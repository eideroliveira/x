// Code generated by github.com/gobuffalo/packr. DO NOT EDIT.

package tiptap

import "github.com/gobuffalo/packr"

// You can use the "packr clean" command to clean up this,
// and any other packr generated files.
func init() {
	packr.PackJSONBytes("./tiptapjs/dist/", "tiptap.css", "\"LnRpcHRhcC1lZGl0b3J7cG9zaXRpb246cmVsYXRpdmV9LnRpcHRhcC1lZGl0b3JfX2NvbnRlbnR7b3ZlcmZsb3ctd3JhcDpicmVhay13b3JkO3dvcmQtd3JhcDpicmVhay13b3JkO3dvcmQtYnJlYWs6YnJlYWstd29yZH0udGlwdGFwLWVkaXRvcl9fY29udGVudCAqe2NhcmV0LWNvbG9yOmN1cnJlbnRDb2xvcn0udGlwdGFwLWVkaXRvcl9fY29udGVudCBibG9ja3F1b3RlLC50aXB0YXAtZWRpdG9yX19jb250ZW50IGgxLC50aXB0YXAtZWRpdG9yX19jb250ZW50IGgyLC50aXB0YXAtZWRpdG9yX19jb250ZW50IGgzLC50aXB0YXAtZWRpdG9yX19jb250ZW50IG9sLC50aXB0YXAtZWRpdG9yX19jb250ZW50IHAsLnRpcHRhcC1lZGl0b3JfX2NvbnRlbnQgcHJlLC50aXB0YXAtZWRpdG9yX19jb250ZW50IHVse21hcmdpbjoxcmVtIDB9LnRpcHRhcC1lZGl0b3JfX2NvbnRlbnQgYmxvY2txdW90ZTpmaXJzdC1jaGlsZCwudGlwdGFwLWVkaXRvcl9fY29udGVudCBoMTpmaXJzdC1jaGlsZCwudGlwdGFwLWVkaXRvcl9fY29udGVudCBoMjpmaXJzdC1jaGlsZCwudGlwdGFwLWVkaXRvcl9fY29udGVudCBoMzpmaXJzdC1jaGlsZCwudGlwdGFwLWVkaXRvcl9fY29udGVudCBvbDpmaXJzdC1jaGlsZCwudGlwdGFwLWVkaXRvcl9fY29udGVudCBwOmZpcnN0LWNoaWxkLC50aXB0YXAtZWRpdG9yX19jb250ZW50IHByZTpmaXJzdC1jaGlsZCwudGlwdGFwLWVkaXRvcl9fY29udGVudCB1bDpmaXJzdC1jaGlsZHttYXJnaW4tdG9wOjB9LnRpcHRhcC1lZGl0b3JfX2NvbnRlbnQgYmxvY2txdW90ZTpsYXN0LWNoaWxkLC50aXB0YXAtZWRpdG9yX19jb250ZW50IGgxOmxhc3QtY2hpbGQsLnRpcHRhcC1lZGl0b3JfX2NvbnRlbnQgaDI6bGFzdC1jaGlsZCwudGlwdGFwLWVkaXRvcl9fY29udGVudCBoMzpsYXN0LWNoaWxkLC50aXB0YXAtZWRpdG9yX19jb250ZW50IG9sOmxhc3QtY2hpbGQsLnRpcHRhcC1lZGl0b3JfX2NvbnRlbnQgcDpsYXN0LWNoaWxkLC50aXB0YXAtZWRpdG9yX19jb250ZW50IHByZTpsYXN0LWNoaWxkLC50aXB0YXAtZWRpdG9yX19jb250ZW50IHVsOmxhc3QtY2hpbGR7bWFyZ2luLWJvdHRvbTowfS50aXB0YXAtZWRpdG9yX19jb250ZW50IGgxLC50aXB0YXAtZWRpdG9yX19jb250ZW50IGgyLC50aXB0YXAtZWRpdG9yX19jb250ZW50IGgze2xpbmUtaGVpZ2h0OjEuM30udGlwdGFwLWVkaXRvcl9fY29udGVudCBwcmV7cGFkZGluZzouN3JlbSAxcmVtO2JvcmRlci1yYWRpdXM6NXB4O2JhY2tncm91bmQ6IzAwMDtjb2xvcjojZmZmO2ZvbnQtc2l6ZTouOHJlbTtvdmVyZmxvdy14OmF1dG99LnRpcHRhcC1lZGl0b3JfX2NvbnRlbnQgcHJlIGNvZGV7ZGlzcGxheTpibG9ja30udGlwdGFwLWVkaXRvcl9fY29udGVudCBwIGNvZGV7ZGlzcGxheTppbmxpbmUtYmxvY2s7cGFkZGluZzowIC40cmVtO2JvcmRlci1yYWRpdXM6NXB4O2ZvbnQtc2l6ZTouOHJlbTtmb250LXdlaWdodDo3MDA7YmFja2dyb3VuZDpyZ2JhKDAsMCwwLC4xKTtjb2xvcjpyZ2JhKDAsMCwwLC44KX0udGlwdGFwLWVkaXRvcl9fY29udGVudCBvbCwudGlwdGFwLWVkaXRvcl9fY29udGVudCB1bHtwYWRkaW5nLWxlZnQ6MXJlbX0udGlwdGFwLWVkaXRvcl9fY29udGVudCBsaT5vbCwudGlwdGFwLWVkaXRvcl9fY29udGVudCBsaT5wLC50aXB0YXAtZWRpdG9yX19jb250ZW50IGxpPnVse21hcmdpbjowfS50aXB0YXAtZWRpdG9yX19jb250ZW50IGF7Y29sb3I6aW5oZXJpdH0udGlwdGFwLWVkaXRvcl9fY29udGVudCBibG9ja3F1b3Rle2JvcmRlci1sZWZ0OjNweCBzb2xpZCByZ2JhKDAsMCwwLC4xKTtjb2xvcjpyZ2JhKDAsMCwwLC44KTtwYWRkaW5nLWxlZnQ6LjhyZW07Zm9udC1zdHlsZTppdGFsaWN9LnRpcHRhcC1lZGl0b3JfX2NvbnRlbnQgYmxvY2txdW90ZSBwe21hcmdpbjowfS50aXB0YXAtZWRpdG9yX19jb250ZW50IGltZ3ttYXgtd2lkdGg6MTAwJTtib3JkZXItcmFkaXVzOjNweH0udGlwdGFwLWVkaXRvcl9fY29udGVudCB0YWJsZXtib3JkZXItY29sbGFwc2U6Y29sbGFwc2U7dGFibGUtbGF5b3V0OmZpeGVkO3dpZHRoOjEwMCU7bWFyZ2luOjA7b3ZlcmZsb3c6aGlkZGVufS50aXB0YXAtZWRpdG9yX19jb250ZW50IHRhYmxlIHRkLC50aXB0YXAtZWRpdG9yX19jb250ZW50IHRhYmxlIHRoe21pbi13aWR0aDoxZW07Ym9yZGVyOjJweCBzb2xpZCAjZGRkO3BhZGRpbmc6M3B4IDVweDt2ZXJ0aWNhbC1hbGlnbjp0b3A7LXdlYmtpdC1ib3gtc2l6aW5nOmJvcmRlci1ib3g7Ym94LXNpemluZzpib3JkZXItYm94O3Bvc2l0aW9uOnJlbGF0aXZlfS50aXB0YXAtZWRpdG9yX19jb250ZW50IHRhYmxlIHRkPiosLnRpcHRhcC1lZGl0b3JfX2NvbnRlbnQgdGFibGUgdGg+KnttYXJnaW4tYm90dG9tOjB9LnRpcHRhcC1lZGl0b3JfX2NvbnRlbnQgdGFibGUgdGh7Zm9udC13ZWlnaHQ6NzAwO3RleHQtYWxpZ246bGVmdH0udGlwdGFwLWVkaXRvcl9fY29udGVudCB0YWJsZSAuc2VsZWN0ZWRDZWxsOmFmdGVye3otaW5kZXg6Mjtwb3NpdGlvbjphYnNvbHV0ZTtjb250ZW50OiIiO2xlZnQ6MDtyaWdodDowO3RvcDowO2JvdHRvbTowO2JhY2tncm91bmQ6cmdiYSgyMDAsMjAwLDI1NSwuNCk7cG9pbnRlci1ldmVudHM6bm9uZX0udGlwdGFwLWVkaXRvcl9fY29udGVudCB0YWJsZSAuY29sdW1uLXJlc2l6ZS1oYW5kbGV7cG9zaXRpb246YWJzb2x1dGU7cmlnaHQ6LTJweDt0b3A6MDtib3R0b206MDt3aWR0aDo0cHg7ei1pbmRleDoyMDtiYWNrZ3JvdW5kLWNvbG9yOiNhZGY7cG9pbnRlci1ldmVudHM6bm9uZX0udGlwdGFwLWVkaXRvcl9fY29udGVudCAudGFibGVXcmFwcGVye21hcmdpbjoxZW0gMDtvdmVyZmxvdy14OmF1dG99LnRpcHRhcC1lZGl0b3JfX2NvbnRlbnQgLnJlc2l6ZS1jdXJzb3J7Y3Vyc29yOmV3LXJlc2l6ZTtjdXJzb3I6Y29sLXJlc2l6ZX0ubWVudWJhcnttYXJnaW4tYm90dG9tOjFyZW07LXdlYmtpdC10cmFuc2l0aW9uOnZpc2liaWxpdHkgLjJzIC40cyxvcGFjaXR5IC4ycyAuNHM7dHJhbnNpdGlvbjp2aXNpYmlsaXR5IC4ycyAuNHMsb3BhY2l0eSAuMnMgLjRzfS5tZW51YmFyLmlzLWhpZGRlbnt2aXNpYmlsaXR5OmhpZGRlbjtvcGFjaXR5OjB9Lm1lbnViYXIuaXMtZm9jdXNlZHt2aXNpYmlsaXR5OnZpc2libGU7b3BhY2l0eToxOy13ZWJraXQtdHJhbnNpdGlvbjp2aXNpYmlsaXR5IC4ycyxvcGFjaXR5IC4yczt0cmFuc2l0aW9uOnZpc2liaWxpdHkgLjJzLG9wYWNpdHkgLjJzfS5tZW51YmFyX19idXR0b257Zm9udC13ZWlnaHQ6NzAwO2Rpc3BsYXk6LXdlYmtpdC1pbmxpbmUtYm94O2Rpc3BsYXk6LW1zLWlubGluZS1mbGV4Ym94O2Rpc3BsYXk6aW5saW5lLWZsZXg7YmFja2dyb3VuZDp0cmFuc3BhcmVudDtib3JkZXI6MDtjb2xvcjojMDAwO3BhZGRpbmc6LjJyZW0gLjVyZW07bWFyZ2luLXJpZ2h0Oi4ycmVtO2JvcmRlci1yYWRpdXM6M3B4O2N1cnNvcjpwb2ludGVyfS5tZW51YmFyX19idXR0b246aG92ZXJ7YmFja2dyb3VuZC1jb2xvcjpyZ2JhKDAsMCwwLC4wNSl9Lm1lbnViYXJfX2J1dHRvbi5pcy1hY3RpdmV7YmFja2dyb3VuZC1jb2xvcjpyZ2JhKDAsMCwwLC4xKX0ubWVudWJhciBzcGFuLm1lbnViYXJfX2J1dHRvbntmb250LXNpemU6MTMuMzMzM3B4fS5tZW51YnViYmxle3Bvc2l0aW9uOmFic29sdXRlO2Rpc3BsYXk6LXdlYmtpdC1ib3g7ZGlzcGxheTotbXMtZmxleGJveDtkaXNwbGF5OmZsZXg7ei1pbmRleDoyMDtiYWNrZ3JvdW5kOiMwMDA7Ym9yZGVyLXJhZGl1czo1cHg7cGFkZGluZzouM3JlbTttYXJnaW4tYm90dG9tOi41cmVtOy13ZWJraXQtdHJhbnNmb3JtOnRyYW5zbGF0ZVgoLTUwJSk7dHJhbnNmb3JtOnRyYW5zbGF0ZVgoLTUwJSk7dmlzaWJpbGl0eTpoaWRkZW47b3BhY2l0eTowOy13ZWJraXQtdHJhbnNpdGlvbjpvcGFjaXR5IC4ycyx2aXNpYmlsaXR5IC4yczt0cmFuc2l0aW9uOm9wYWNpdHkgLjJzLHZpc2liaWxpdHkgLjJzfS5tZW51YnViYmxlLmlzLWFjdGl2ZXtvcGFjaXR5OjE7dmlzaWJpbGl0eTp2aXNpYmxlfS5tZW51YnViYmxlX19idXR0b257ZGlzcGxheTotd2Via2l0LWlubGluZS1ib3g7ZGlzcGxheTotbXMtaW5saW5lLWZsZXhib3g7ZGlzcGxheTppbmxpbmUtZmxleDtiYWNrZ3JvdW5kOnRyYW5zcGFyZW50O2JvcmRlcjowO2NvbG9yOiNmZmY7cGFkZGluZzouMnJlbSAuNXJlbTttYXJnaW4tcmlnaHQ6LjJyZW07Ym9yZGVyLXJhZGl1czozcHg7Y3Vyc29yOnBvaW50ZXJ9Lm1lbnVidWJibGVfX2J1dHRvbjpsYXN0LWNoaWxke21hcmdpbi1yaWdodDowfS5tZW51YnViYmxlX19idXR0b246aG92ZXJ7YmFja2dyb3VuZC1jb2xvcjpoc2xhKDAsMCUsMTAwJSwuMSl9Lm1lbnVidWJibGVfX2J1dHRvbi5pcy1hY3RpdmV7YmFja2dyb3VuZC1jb2xvcjpoc2xhKDAsMCUsMTAwJSwuMil9Lm1lbnVidWJibGVfX2Zvcm17ZGlzcGxheTotd2Via2l0LWJveDtkaXNwbGF5Oi1tcy1mbGV4Ym94O2Rpc3BsYXk6ZmxleDstd2Via2l0LWJveC1hbGlnbjpjZW50ZXI7LW1zLWZsZXgtYWxpZ246Y2VudGVyO2FsaWduLWl0ZW1zOmNlbnRlcn0ubWVudWJ1YmJsZV9faW5wdXR7Zm9udDppbmhlcml0O2JvcmRlcjpub25lO2JhY2tncm91bmQ6dHJhbnNwYXJlbnQ7Y29sb3I6I2ZmZn0uaWNvbltkYXRhLXYtZTU5Zjc4MzJde3Bvc2l0aW9uOnJlbGF0aXZlO2Rpc3BsYXk6aW5saW5lLWJsb2NrO3ZlcnRpY2FsLWFsaWduOm1pZGRsZTt3aWR0aDouOHJlbTtoZWlnaHQ6LjhyZW07bWFyZ2luOjAgLjNyZW07dG9wOi4wNXJlbTtmaWxsOmN1cnJlbnRDb2xvcn0uaWNvbiBzdmdbZGF0YS12LWU1OWY3ODMyXXtkaXNwbGF5OmlubGluZS1ibG9jazt2ZXJ0aWNhbC1hbGlnbjp0b3A7d2lkdGg6MTAwJTtoZWlnaHQ6MTAwJX0uaWNvbltkYXRhLXYtZTU5Zjc4MzJdOmZpcnN0LWNoaWxke21hcmdpbi1sZWZ0OjB9Lmljb25bZGF0YS12LWU1OWY3ODMyXTpsYXN0LWNoaWxke21hcmdpbi1yaWdodDowfQ==\"")
	packr.PackJSONBytes("./tiptapjs/dist/", "tiptap.umd.min.js", "\"KGZ1bmN0aW9uKHQsZSl7Im9iamVjdCI9PT10eXBlb2YgZXhwb3J0cyYmIm9iamVjdCI9PT10eXBlb2YgbW9kdWxlP21vZHVsZS5leHBvcnRzPWUocmVxdWlyZSgiVnVlIikpOiJmdW5jdGlvbiI9PT10eXBlb2YgZGVmaW5lJiZkZWZpbmUuYW1kP2RlZmluZShbIlZ1ZSJdLGUpOiJvYmplY3QiPT09dHlwZW9mIGV4cG9ydHM/ZXhwb3J0c1sidGlwdGFwIl09ZShyZXF1aXJlKCJWdWUiKSk6dFsidGlwdGFwIl09ZSh0WyJWdWUiXSl9KSgidW5kZWZpbmVkIiE9PXR5cGVvZiBzZWxmP3NlbGY6dGhpcywoZnVuY3Rpb24odCl7cmV0dXJuIGZ1bmN0aW9uKHQpe3ZhciBlPXt9O2Z1bmN0aW9uIG4ocil7aWYoZVtyXSlyZXR1cm4gZVtyXS5leHBvcnRzO3ZhciBvPWVbcl09e2k6cixsOiExLGV4cG9ydHM6e319O3JldHVybiB0W3JdLmNhbGwoby5leHBvcnRzLG8sby5leHBvcnRzLG4pLG8ubD0hMCxvLmV4cG9ydHN9cmV0dXJuIG4ubT10LG4uYz1lLG4uZD1mdW5jdGlvbih0LGUscil7bi5vKHQsZSl8fE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LGUse2VudW1lcmFibGU6ITAsZ2V0OnJ9KX0sbi5yPWZ1bmN0aW9uKHQpeyJ1bmRlZmluZWQiIT09dHlwZW9mIFN5bWJvbCYmU3ltYm9sLnRvU3RyaW5nVGFnJiZPYmplY3QuZGVmaW5lUHJvcGVydHkodCxTeW1ib2wudG9TdHJpbmdUYWcse3ZhbHVlOiJNb2R1bGUifSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pfSxuLnQ9ZnVuY3Rpb24odCxlKXtpZigxJmUmJih0PW4odCkpLDgmZSlyZXR1cm4gdDtpZig0JmUmJiJvYmplY3QiPT09dHlwZW9mIHQmJnQmJnQuX19lc01vZHVsZSlyZXR1cm4gdDt2YXIgcj1PYmplY3QuY3JlYXRlKG51bGwpO2lmKG4ucihyKSxPYmplY3QuZGVmaW5lUHJvcGVydHkociwiZGVmYXVsdCIse2VudW1lcmFibGU6ITAsdmFsdWU6dH0pLDImZSYmInN0cmluZyIhPXR5cGVvZiB0KWZvcih2YXIgbyBpbiB0KW4uZChyLG8sZnVuY3Rpb24oZSl7cmV0dXJuIHRbZV19LmJpbmQobnVsbCxvKSk7cmV0dXJuIHJ9LG4ubj1mdW5jdGlvbih0KXt2YXIgZT10JiZ0Ll9fZXNNb2R1bGU/ZnVuY3Rpb24oKXtyZXR1cm4gdFsiZGVmYXVsdCJdfTpmdW5jdGlvbigpe3JldHVybiB0fTtyZXR1cm4gbi5kKGUsImEiLGUpLGV9LG4ubz1mdW5jdGlvbih0LGUpe3JldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwodCxlKX0sbi5wPSIiLG4obi5zPSJmYWUzIil9KHsiMDFmOSI6ZnVuY3Rpb24odCxlLG4peyJ1c2Ugc3RyaWN0Ijt2YXIgcj1uKCIyZDAwIiksbz1uKCI1Y2ExIiksaT1uKCIyYWJhIikscz1uKCIzMmU5IiksYT1uKCI4NGYyIiksYz1uKCI0MWEwIiksbD1uKCI3ZjIwIikscD1uKCIzOGZkIiksdT1uKCIyYjRjIikoIml0ZXJhdG9yIiksaD0hKFtdLmtleXMmJiJuZXh0ImluW10ua2V5cygpKSxmPSJAQGl0ZXJhdG9yIixkPSJrZXlzIix2PSJ2YWx1ZXMiLG09ZnVuY3Rpb24oKXtyZXR1cm4gdGhpc307dC5leHBvcnRzPWZ1bmN0aW9uKHQsZSxuLHksZyx3LHgpe2MobixlLHkpO3ZhciBiLGssUyxDPWZ1bmN0aW9uKHQpe2lmKCFoJiZ0IGluIE4pcmV0dXJuIE5bdF07c3dpdGNoKHQpe2Nhc2UgZDpyZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gbmV3IG4odGhpcyx0KX07Y2FzZSB2OnJldHVybiBmdW5jdGlvbigpe3JldHVybiBuZXcgbih0aGlzLHQpfX1yZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gbmV3IG4odGhpcyx0KX19LE89ZSsiIEl0ZXJhdG9yIixNPWc9PXYsVD0hMSxOPXQucHJvdG90eXBlLEU9Tlt1XXx8TltmXXx8ZyYmTltnXSxBPUV8fEMoZyksUj1nP00/QygiZW50cmllcyIpOkE6dm9pZCAwLEQ9IkFycmF5Ij09ZSYmTi5lbnRyaWVzfHxFO2lmKEQmJihTPXAoRC5jYWxsKG5ldyB0KSksUyE9PU9iamVjdC5wcm90b3R5cGUmJlMubmV4dCYmKGwoUyxPLCEwKSxyfHwiZnVuY3Rpb24iPT10eXBlb2YgU1t1XXx8cyhTLHUsbSkpKSxNJiZFJiZFLm5hbWUhPT12JiYoVD0hMCxBPWZ1bmN0aW9uKCl7cmV0dXJuIEUuY2FsbCh0aGlzKX0pLHImJiF4fHwhaCYmIVQmJk5bdV18fHMoTix1LEEpLGFbZV09QSxhW09dPW0sZylpZihiPXt2YWx1ZXM6TT9BOkModiksa2V5czp3P0E6QyhkKSxlbnRyaWVzOlJ9LHgpZm9yKGsgaW4gYilrIGluIE58fGkoTixrLGJba10pO2Vsc2UgbyhvLlArby5GKihofHxUKSxlLGIpO3JldHVybiBifX0sIjA3M2UiOmZ1bmN0aW9uKHQsZSxuKXsidXNlIHN0cmljdCI7dmFyIHI9bigiNWRiZSIpLG89aShFcnJvcik7ZnVuY3Rpb24gaSh0KXtyZXR1cm4gZS5kaXNwbGF5TmFtZT10LmRpc3BsYXlOYW1lfHx0Lm5hbWUsZTtmdW5jdGlvbiBlKGUpe3JldHVybiBlJiYoZT1yLmFwcGx5KG51bGwsYXJndW1lbnRzKSksbmV3IHQoZSl9fXQuZXhwb3J0cz1vLG8uZXZhbD1pKEV2YWxFcnJvciksby5yYW5nZT1pKFJhbmdlRXJyb3IpLG8ucmVmZXJlbmNlPWkoUmVmZXJlbmNlRXJyb3IpLG8uc3ludGF4PWkoU3ludGF4RXJyb3IpLG8udHlwZT1pKFR5cGVFcnJvciksby51cmk9aShVUklFcnJvciksby5jcmVhdGU9aX0sIjA3ZTMiOmZ1bmN0aW9uKHQsZSl7dmFyIG49e30uaGFzT3duUHJvcGVydHk7dC5leHBvcnRzPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIG4uY2FsbCh0LGUpfX0sIjBkNTgiOmZ1bmN0aW9uKHQsZSxuKXt2YXIgcj1uKCJjZTEwIiksbz1uKCJlMTFlIik7dC5leHBvcnRzPU9iamVjdC5rZXlzfHxmdW5jdGlvbih0KXtyZXR1cm4gcih0LG8pfX0sIjBmYzkiOmZ1bmN0aW9uKHQsZSxuKXt2YXIgcj1uKCIzYTM4Iiksbz1NYXRoLm1heCxpPU1hdGgubWluO3QuZXhwb3J0cz1mdW5jdGlvbih0LGUpe3JldHVybiB0PXIodCksdDwwP28odCtlLDApOmkodCxlKX19LDE0OTU6ZnVuY3Rpb24odCxlLG4pe3ZhciByPW4oIjg2Y2MiKSxvPW4oImNiN2MiKSxpPW4oIjBkNTgiKTt0LmV4cG9ydHM9bigiOWUxZSIpP09iamVjdC5kZWZpbmVQcm9wZXJ0aWVzOmZ1bmN0aW9uKHQsZSl7byh0KTt2YXIgbixzPWkoZSksYT1zLmxlbmd0aCxjPTA7d2hpbGUoYT5jKXIuZih0LG49c1tjKytdLGVbbl0pO3JldHVybiB0fX0sMTY1NDpmdW5jdGlvbih0LGUsbil7InVzZSBzdHJpY3QiO3ZhciByPW4oIjcxYzEiKSghMCk7bigiMzBmMSIpKFN0cmluZywiU3RyaW5nIiwoZnVuY3Rpb24odCl7dGhpcy5fdD1TdHJpbmcodCksdGhpcy5faT0wfSksKGZ1bmN0aW9uKCl7dmFyIHQsZT10aGlzLl90LG49dGhpcy5faTtyZXR1cm4gbj49ZS5sZW5ndGg/e3ZhbHVlOnZvaWQgMCxkb25lOiEwfToodD1yKGUsbiksdGhpcy5faSs9dC5sZW5ndGgse3ZhbHVlOnQsZG9uZTohMX0pfSkpfSwxNjkxOmZ1bmN0aW9uKHQsZSl7dC5leHBvcnRzPSJjb25zdHJ1Y3RvcixoYXNPd25Qcm9wZXJ0eSxpc1Byb3RvdHlwZU9mLHByb3BlcnR5SXNFbnVtZXJhYmxlLHRvTG9jYWxlU3RyaW5nLHRvU3RyaW5nLHZhbHVlT2YiLnNwbGl0KCIsIil9LCIxYWY2IjpmdW5jdGlvbih0LGUsbil7dmFyIHI9bigiNjNiNiIpO3Ioci5TLCJBcnJheSIse2lzQXJyYXk6bigiOTAwMyIpfSl9LCIxYWZhIjpmdW5jdGlvbih0LGUsbil7InVzZSBzdHJpY3QiO3ZhciByPW4oImEwNjgiKSxvPW4ubihyKTtvLmF9LCIxYmMzIjpmdW5jdGlvbih0LGUsbil7dmFyIHI9bigiZjc3MiIpO3QuZXhwb3J0cz1mdW5jdGlvbih0LGUpe2lmKCFyKHQpKXJldHVybiB0O3ZhciBuLG87aWYoZSYmImZ1bmN0aW9uIj09dHlwZW9mKG49dC50b1N0cmluZykmJiFyKG89bi5jYWxsKHQpKSlyZXR1cm4gbztpZigiZnVuY3Rpb24iPT10eXBlb2Yobj10LnZhbHVlT2YpJiYhcihvPW4uY2FsbCh0KSkpcmV0dXJuIG87aWYoIWUmJiJmdW5jdGlvbiI9PXR5cGVvZihuPXQudG9TdHJpbmcpJiYhcihvPW4uY2FsbCh0KSkpcmV0dXJuIG87dGhyb3cgVHlwZUVycm9yKCJDYW4ndCBjb252ZXJ0IG9iamVjdCB0byBwcmltaXRpdmUgdmFsdWUiKX19LCIxZWM5IjpmdW5jdGlvbih0LGUsbil7dmFyIHI9bigiZjc3MiIpLG89bigiZTUzZCIpLmRvY3VtZW50LGk9cihvKSYmcihvLmNyZWF0ZUVsZW1lbnQpO3QuZXhwb3J0cz1mdW5jdGlvbih0KXtyZXR1cm4gaT9vLmNyZWF0ZUVsZW1lbnQodCk6e319fSwiMjI0ZCI6ZnVuY3Rpb24odCxlLG4peyJ1c2Ugc3RyaWN0IjtPYmplY3QuZGVmaW5lUHJvcGVydHkoZSwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSk7dmFyIHI9bigiNTZlYyIpLG89bigiNmZmYiIpLGk9bigiNzAzZiIpLHM9bigiNmYyNyIpLGE9ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZShlKXt0LmNhbGwodGhpcyxlLGUpfXJldHVybiB0JiYoZS5fX3Byb3RvX189dCksZS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZSh0JiZ0LnByb3RvdHlwZSksZS5wcm90b3R5cGUuY29uc3RydWN0b3I9ZSxlLnByb3RvdHlwZS5tYXA9ZnVuY3Rpb24obixyKXt2YXIgbz1uLnJlc29sdmUoci5tYXAodGhpcy5oZWFkKSk7cmV0dXJuIGUudmFsaWQobyk/bmV3IGUobyk6dC5uZWFyKG8pfSxlLnByb3RvdHlwZS5jb250ZW50PWZ1bmN0aW9uKCl7cmV0dXJuIHMuU2xpY2UuZW1wdHl9LGUucHJvdG90eXBlLmVxPWZ1bmN0aW9uKHQpe3JldHVybiB0IGluc3RhbmNlb2YgZSYmdC5oZWFkPT10aGlzLmhlYWR9LGUucHJvdG90eXBlLnRvSlNPTj1mdW5jdGlvbigpe3JldHVybnt0eXBlOiJnYXBjdXJzb3IiLHBvczp0aGlzLmhlYWR9fSxlLmZyb21KU09OPWZ1bmN0aW9uKHQsbil7aWYoIm51bWJlciIhPXR5cGVvZiBuLnBvcyl0aHJvdyBuZXcgUmFuZ2VFcnJvcigiSW52YWxpZCBpbnB1dCBmb3IgR2FwQ3Vyc29yLmZyb21KU09OIik7cmV0dXJuIG5ldyBlKHQucmVzb2x2ZShuLnBvcykpfSxlLnByb3RvdHlwZS5nZXRCb29rbWFyaz1mdW5jdGlvbigpe3JldHVybiBuZXcgYyh0aGlzLmFuY2hvcil9LGUudmFsaWQ9ZnVuY3Rpb24odCl7dmFyIGU9dC5wYXJlbnQ7aWYoZS5pc1RleHRibG9ja3x8IWwodCl8fCFwKHQpKXJldHVybiExO3ZhciBuPWUudHlwZS5zcGVjLmFsbG93R2FwQ3Vyc29yO2lmKG51bGwhPW4pcmV0dXJuIG47dmFyIHI9ZS5jb250ZW50TWF0Y2hBdCh0LmluZGV4KCkpLmRlZmF1bHRUeXBlO3JldHVybiByJiZyLmlzVGV4dGJsb2NrfSxlLmZpbmRGcm9tPWZ1bmN0aW9uKHQsbixyKXtpZighciYmZS52YWxpZCh0KSlyZXR1cm4gdDtmb3IodmFyIG89dC5wb3MsaT1udWxsLHM9dC5kZXB0aDs7cy0tKXt2YXIgYT10Lm5vZGUocyk7aWYobj4wP3QuaW5kZXhBZnRlcihzKTxhLmNoaWxkQ291bnQ6dC5pbmRleChzKT4wKXtpPWEubWF5YmVDaGlsZChuPjA/dC5pbmRleEFmdGVyKHMpOnQuaW5kZXgocyktMSk7YnJlYWt9aWYoMD09cylyZXR1cm4gbnVsbDtvKz1uO3ZhciBjPXQuZG9jLnJlc29sdmUobyk7aWYoZS52YWxpZChjKSlyZXR1cm4gY31mb3IoOzspe2lmKGk9bj4wP2kuZmlyc3RDaGlsZDppLmxhc3RDaGlsZCwhaSlicmVhaztvKz1uO3ZhciBsPXQuZG9jLnJlc29sdmUobyk7aWYoZS52YWxpZChsKSlyZXR1cm4gbH1yZXR1cm4gbnVsbH0sZX0oby5TZWxlY3Rpb24pO2EucHJvdG90eXBlLnZpc2libGU9ITEsby5TZWxlY3Rpb24uanNvbklEKCJnYXBjdXJzb3IiLGEpO3ZhciBjPWZ1bmN0aW9uKHQpe3RoaXMucG9zPXR9O2Z1bmN0aW9uIGwodCl7Zm9yKHZhciBlPXQuZGVwdGg7ZT49MDtlLS0pe3ZhciBuPXQuaW5kZXgoZSk7aWYoMCE9bilmb3IodmFyIHI9dC5ub2RlKGUpLmNoaWxkKG4tMSk7O3I9ci5sYXN0Q2hpbGQpe2lmKDA9PXIuY2hpbGRDb3VudCYmIXIuaW5saW5lQ29udGVudHx8ci5pc0F0b218fHIudHlwZS5zcGVjLmlzb2xhdGluZylyZXR1cm4hMDtpZihyLmlubGluZUNvbnRlbnQpcmV0dXJuITF9fXJldHVybiEwfWZ1bmN0aW9uIHAodCl7Zm9yKHZhciBlPXQuZGVwdGg7ZT49MDtlLS0pe3ZhciBuPXQuaW5kZXhBZnRlcihlKSxyPXQubm9kZShlKTtpZihuIT1yLmNoaWxkQ291bnQpZm9yKHZhciBvPXIuY2hpbGQobik7O289by5maXJzdENoaWxkKXtpZigwPT1vLmNoaWxkQ291bnQmJiFvLmlubGluZUNvbnRlbnR8fG8uaXNBdG9tfHxvLnR5cGUuc3BlYy5pc29sYXRpbmcpcmV0dXJuITA7aWYoby5pbmxpbmVDb250ZW50KXJldHVybiExfX1yZXR1cm4hMH1jLnByb3RvdHlwZS5tYXA9ZnVuY3Rpb24odCl7cmV0dXJuIG5ldyBjKHQubWFwKHRoaXMucG9zKSl9LGMucHJvdG90eXBlLnJlc29sdmU9ZnVuY3Rpb24odCl7dmFyIGU9dC5yZXNvbHZlKHRoaXMucG9zKTtyZXR1cm4gYS52YWxpZChlKT9uZXcgYShlKTpvLlNlbGVjdGlvbi5uZWFyKGUpfTt2YXIgdT1mdW5jdGlvbigpe3JldHVybiBuZXcgby5QbHVnaW4oe3Byb3BzOntkZWNvcmF0aW9uczp2LGNyZWF0ZVNlbGVjdGlvbkJldHdlZW46ZnVuY3Rpb24odCxlLG4pe2lmKGUucG9zPT1uLnBvcyYmYS52YWxpZChuKSlyZXR1cm4gbmV3IGEobil9LGhhbmRsZUNsaWNrOmQsaGFuZGxlS2V5RG93bjpofX0pfSxoPXIua2V5ZG93bkhhbmRsZXIoe0Fycm93TGVmdDpmKCJob3JpeiIsLTEpLEFycm93UmlnaHQ6ZigiaG9yaXoiLDEpLEFycm93VXA6ZigidmVydCIsLTEpLEFycm93RG93bjpmKCJ2ZXJ0IiwxKX0pO2Z1bmN0aW9uIGYodCxlKXt2YXIgbj0idmVydCI9PXQ/ZT4wPyJkb3duIjoidXAiOmU+MD8icmlnaHQiOiJsZWZ0IjtyZXR1cm4gZnVuY3Rpb24odCxyLGkpe3ZhciBzPXQuc2VsZWN0aW9uLGM9ZT4wP3MuJHRvOnMuJGZyb20sbD1zLmVtcHR5O2lmKHMgaW5zdGFuY2VvZiBvLlRleHRTZWxlY3Rpb24pe2lmKCFpLmVuZE9mVGV4dGJsb2NrKG4pKXJldHVybiExO2w9ITEsYz10LmRvYy5yZXNvbHZlKGU+MD9jLmFmdGVyKCk6Yy5iZWZvcmUoKSl9dmFyIHA9YS5maW5kRnJvbShjLGUsbCk7cmV0dXJuISFwJiYociYmcih0LnRyLnNldFNlbGVjdGlvbihuZXcgYShwKSkpLCEwKX19ZnVuY3Rpb24gZCh0LGUsbil7aWYodC5zb21lUHJvcCgiZWRpdGFibGUiLChmdW5jdGlvbihlKXtyZXR1cm4hMT09PWUodC5zdGF0ZSl9KSkpcmV0dXJuITE7dmFyIHI9dC5zdGF0ZS5kb2MucmVzb2x2ZShlKTtpZighYS52YWxpZChyKSlyZXR1cm4hMTt2YXIgaT10LnBvc0F0Q29vcmRzKHtsZWZ0Om4uY2xpZW50WCx0b3A6bi5jbGllbnRZfSkscz1pLmluc2lkZTtyZXR1cm4hKHM+LTEmJm8uTm9kZVNlbGVjdGlvbi5pc1NlbGVjdGFibGUodC5zdGF0ZS5kb2Mubm9kZUF0KHMpKSkmJih0LmRpc3BhdGNoKHQuc3RhdGUudHIuc2V0U2VsZWN0aW9uKG5ldyBhKHIpKSksITApfWZ1bmN0aW9uIHYodCl7aWYoISh0LnNlbGVjdGlvbiBpbnN0YW5jZW9mIGEpKXJldHVybiBudWxsO3ZhciBlPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpO3JldHVybiBlLmNsYXNzTmFtZT0iUHJvc2VNaXJyb3ItZ2FwY3Vyc29yIixpLkRlY29yYXRpb25TZXQuY3JlYXRlKHQuZG9jLFtpLkRlY29yYXRpb24ud2lkZ2V0KHQuc2VsZWN0aW9uLmhlYWQsZSx7a2V5OiJnYXBjdXJzb3IifSldKX1lLmdhcEN1cnNvcj11LGUuR2FwQ3Vyc29yPWF9LCIyMzBlIjpmdW5jdGlvbih0LGUsbil7dmFyIHI9bigiZDNmNCIpLG89bigiNzcyNiIpLmRvY3VtZW50LGk9cihvKSYmcihvLmNyZWF0ZUVsZW1lbnQpO3QuZXhwb3J0cz1mdW5jdGlvbih0KXtyZXR1cm4gaT9vLmNyZWF0ZUVsZW1lbnQodCk6e319fSwiMjQxZSI6ZnVuY3Rpb24odCxlLG4pe3ZhciByPW4oIjI1ZWIiKTt0LmV4cG9ydHM9ZnVuY3Rpb24odCl7cmV0dXJuIE9iamVjdChyKHQpKX19LCIyNWViIjpmdW5jdGlvbih0LGUpe3QuZXhwb3J0cz1mdW5jdGlvbih0KXtpZih2b2lkIDA9PXQpdGhyb3cgVHlwZUVycm9yKCJDYW4ndCBjYWxsIG1ldGhvZCBvbiAgIit0KTtyZXR1cm4gdH19LCIyOTRjIjpmdW5jdGlvbih0LGUpe3QuZXhwb3J0cz1mdW5jdGlvbih0KXt0cnl7cmV0dXJuISF0KCl9Y2F0Y2goZSl7cmV0dXJuITB9fX0sIjJhYmEiOmZ1bmN0aW9uKHQsZSxuKXt2YXIgcj1uKCI3NzI2Iiksbz1uKCIzMmU5IiksaT1uKCI2OWE4Iikscz1uKCJjYTVhIikoInNyYyIpLGE9bigiZmE1YiIpLGM9InRvU3RyaW5nIixsPSgiIithKS5zcGxpdChjKTtuKCI4Mzc4IikuaW5zcGVjdFNvdXJjZT1mdW5jdGlvbih0KXtyZXR1cm4gYS5jYWxsKHQpfSwodC5leHBvcnRzPWZ1bmN0aW9uKHQsZSxuLGEpe3ZhciBjPSJmdW5jdGlvbiI9PXR5cGVvZiBuO2MmJihpKG4sIm5hbWUiKXx8byhuLCJuYW1lIixlKSksdFtlXSE9PW4mJihjJiYoaShuLHMpfHxvKG4scyx0W2VdPyIiK3RbZV06bC5qb2luKFN0cmluZyhlKSkpKSx0PT09cj90W2VdPW46YT90W2VdP3RbZV09bjpvKHQsZSxuKTooZGVsZXRlIHRbZV0sbyh0LGUsbikpKX0pKEZ1bmN0aW9uLnByb3RvdHlwZSxjLChmdW5jdGlvbigpe3JldHVybiJmdW5jdGlvbiI9PXR5cGVvZiB0aGlzJiZ0aGlzW3NdfHxhLmNhbGwodGhpcyl9KSl9LCIyYWViIjpmdW5jdGlvbih0LGUsbil7dmFyIHI9bigiY2I3YyIpLG89bigiMTQ5NSIpLGk9bigiZTExZSIpLHM9bigiNjEzYiIpKCJJRV9QUk9UTyIpLGE9ZnVuY3Rpb24oKXt9LGM9InByb3RvdHlwZSIsbD1mdW5jdGlvbigpe3ZhciB0LGU9bigiMjMwZSIpKCJpZnJhbWUiKSxyPWkubGVuZ3RoLG89IjwiLHM9Ij4iO2Uuc3R5bGUuZGlzcGxheT0ibm9uZSIsbigiZmFiMiIpLmFwcGVuZENoaWxkKGUpLGUuc3JjPSJqYXZhc2NyaXB0OiIsdD1lLmNvbnRlbnRXaW5kb3cuZG9jdW1lbnQsdC5vcGVuKCksdC53cml0ZShvKyJzY3JpcHQiK3MrImRvY3VtZW50LkY9T2JqZWN0IitvKyIvc2NyaXB0IitzKSx0LmNsb3NlKCksbD10LkY7d2hpbGUoci0tKWRlbGV0ZSBsW2NdW2lbcl1dO3JldHVybiBsKCl9O3QuZXhwb3J0cz1PYmplY3QuY3JlYXRlfHxmdW5jdGlvbih0LGUpe3ZhciBuO3JldHVybiBudWxsIT09dD8oYVtjXT1yKHQpLG49bmV3IGEsYVtjXT1udWxsLG5bc109dCk6bj1sKCksdm9pZCAwPT09ZT9uOm8obixlKX19LCIyYjRjIjpmdW5jdGlvbih0LGUsbil7dmFyIHI9bigiNTUzNyIpKCJ3a3MiKSxvPW4oImNhNWEiKSxpPW4oIjc3MjYiKS5TeW1ib2wscz0iZnVuY3Rpb24iPT10eXBlb2YgaSxhPXQuZXhwb3J0cz1mdW5jdGlvbih0KXtyZXR1cm4gclt0XXx8KHJbdF09cyYmaVt0XXx8KHM/aTpvKSgiU3ltYm9sLiIrdCkpfTthLnN0b3JlPXJ9LCIyZDAwIjpmdW5jdGlvbih0LGUpe3QuZXhwb3J0cz0hMX0sIjJkOTUiOmZ1bmN0aW9uKHQsZSl7dmFyIG49e30udG9TdHJpbmc7dC5leHBvcnRzPWZ1bmN0aW9uKHQpe3JldHVybiBuLmNhbGwodCkuc2xpY2UoOCwtMSl9fSwiMmVjOCI6ZnVuY3Rpb24odCxlLG4peyJ1c2Ugc3RyaWN0IjtPYmplY3QuZGVmaW5lUHJvcGVydHkoZSwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSk7dmFyIHI9bigiNmZmYiIpLG89bigiYjkyMyIpO2Z1bmN0aW9uIGkodCl7cmV0dXJuIHZvaWQgMD09PXQmJih0PXt9KSxuZXcgci5QbHVnaW4oe3ZpZXc6ZnVuY3Rpb24oZSl7cmV0dXJuIG5ldyBzKGUsdCl9fSl9dmFyIHM9ZnVuY3Rpb24odCxlKXt2YXIgbj10aGlzO3RoaXMuZWRpdG9yVmlldz10LHRoaXMud2lkdGg9ZS53aWR0aHx8MSx0aGlzLmNvbG9yPWUuY29sb3J8fCJibGFjayIsdGhpcy5jdXJzb3JQb3M9bnVsbCx0aGlzLmVsZW1lbnQ9bnVsbCx0aGlzLnRpbWVvdXQ9bnVsbCx0aGlzLmhhbmRsZXJzPVsiZHJhZ292ZXIiLCJkcmFnZW5kIiwiZHJvcCIsImRyYWdsZWF2ZSJdLm1hcCgoZnVuY3Rpb24oZSl7dmFyIHI9ZnVuY3Rpb24odCl7cmV0dXJuIG5bZV0odCl9O3JldHVybiB0LmRvbS5hZGRFdmVudExpc3RlbmVyKGUscikse25hbWU6ZSxoYW5kbGVyOnJ9fSkpfTtzLnByb3RvdHlwZS5kZXN0cm95PWZ1bmN0aW9uKCl7dmFyIHQ9dGhpczt0aGlzLmhhbmRsZXJzLmZvckVhY2goKGZ1bmN0aW9uKGUpe3ZhciBuPWUubmFtZSxyPWUuaGFuZGxlcjtyZXR1cm4gdC5lZGl0b3JWaWV3LmRvbS5yZW1vdmVFdmVudExpc3RlbmVyKG4scil9KSl9LHMucHJvdG90eXBlLnVwZGF0ZT1mdW5jdGlvbih0LGUpe251bGwhPXRoaXMuY3Vyc29yUG9zJiZlLmRvYyE9dC5zdGF0ZS5kb2MmJnRoaXMudXBkYXRlT3ZlcmxheSgpfSxzLnByb3RvdHlwZS5zZXRDdXJzb3I9ZnVuY3Rpb24odCl7dCE9dGhpcy5jdXJzb3JQb3MmJih0aGlzLmN1cnNvclBvcz10LG51bGw9PXQ/KHRoaXMuZWxlbWVudC5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKHRoaXMuZWxlbWVudCksdGhpcy5lbGVtZW50PW51bGwpOnRoaXMudXBkYXRlT3ZlcmxheSgpKX0scy5wcm90b3R5cGUudXBkYXRlT3ZlcmxheT1mdW5jdGlvbigpe3ZhciB0LGU9dGhpcy5lZGl0b3JWaWV3LnN0YXRlLmRvYy5yZXNvbHZlKHRoaXMuY3Vyc29yUG9zKTtpZighZS5wYXJlbnQuaW5saW5lQ29udGVudCl7dmFyIG49ZS5ub2RlQmVmb3JlLHI9ZS5ub2RlQWZ0ZXI7aWYobnx8cil7dmFyIG89dGhpcy5lZGl0b3JWaWV3Lm5vZGVET00odGhpcy5jdXJzb3JQb3MtKG4/bi5ub2RlU2l6ZTowKSkuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCksaT1uP28uYm90dG9tOm8udG9wO24mJnImJihpPShpK3RoaXMuZWRpdG9yVmlldy5ub2RlRE9NKHRoaXMuY3Vyc29yUG9zKS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS50b3ApLzIpLHQ9e2xlZnQ6by5sZWZ0LHJpZ2h0Om8ucmlnaHQsdG9wOmktdGhpcy53aWR0aC8yLGJvdHRvbTppK3RoaXMud2lkdGgvMn19fWlmKCF0KXt2YXIgcz10aGlzLmVkaXRvclZpZXcuY29vcmRzQXRQb3ModGhpcy5jdXJzb3JQb3MpO3Q9e2xlZnQ6cy5sZWZ0LXRoaXMud2lkdGgvMixyaWdodDpzLmxlZnQrdGhpcy53aWR0aC8yLHRvcDpzLnRvcCxib3R0b206cy5ib3R0b219fXZhciBhPXRoaXMuZWRpdG9yVmlldy5kb20ub2Zmc2V0UGFyZW50O3RoaXMuZWxlbWVudHx8KHRoaXMuZWxlbWVudD1hLmFwcGVuZENoaWxkKGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpKSx0aGlzLmVsZW1lbnQuc3R5bGUuY3NzVGV4dD0icG9zaXRpb246IGFic29sdXRlOyB6LWluZGV4OiA1MDsgcG9pbnRlci1ldmVudHM6IG5vbmU7IGJhY2tncm91bmQtY29sb3I6ICIrdGhpcy5jb2xvcik7dmFyIGM9IWF8fGE9PWRvY3VtZW50LmJvZHkmJiJzdGF0aWMiPT1nZXRDb21wdXRlZFN0eWxlKGEpLnBvc2l0aW9uP3tsZWZ0Oi1wYWdlWE9mZnNldCx0b3A6LXBhZ2VZT2Zmc2V0fTphLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO3RoaXMuZWxlbWVudC5zdHlsZS5sZWZ0PXQubGVmdC1jLmxlZnQrInB4Iix0aGlzLmVsZW1lbnQuc3R5bGUudG9wPXQudG9wLWMudG9wKyJweCIsdGhpcy5lbGVtZW50LnN0eWxlLndpZHRoPXQucmlnaHQtdC5sZWZ0KyJweCIsdGhpcy5lbGVtZW50LnN0eWxlLmhlaWdodD10LmJvdHRvbS10LnRvcCsicHgifSxzLnByb3RvdHlwZS5zY2hlZHVsZVJlbW92YWw9ZnVuY3Rpb24odCl7dmFyIGU9dGhpcztjbGVhclRpbWVvdXQodGhpcy50aW1lb3V0KSx0aGlzLnRpbWVvdXQ9c2V0VGltZW91dCgoZnVuY3Rpb24oKXtyZXR1cm4gZS5zZXRDdXJzb3IobnVsbCl9KSx0KX0scy5wcm90b3R5cGUuZHJhZ292ZXI9ZnVuY3Rpb24odCl7aWYodGhpcy5lZGl0b3JWaWV3LmVkaXRhYmxlKXt2YXIgZT10aGlzLmVkaXRvclZpZXcucG9zQXRDb29yZHMoe2xlZnQ6dC5jbGllbnRYLHRvcDp0LmNsaWVudFl9KTtpZihlKXt2YXIgbj1lLnBvczt0aGlzLmVkaXRvclZpZXcuZHJhZ2dpbmcmJnRoaXMuZWRpdG9yVmlldy5kcmFnZ2luZy5zbGljZSYmKG49by5kcm9wUG9pbnQodGhpcy5lZGl0b3JWaWV3LnN0YXRlLmRvYyxuLHRoaXMuZWRpdG9yVmlldy5kcmFnZ2luZy5zbGljZSksbnVsbD09biYmKG49ZS5wb3MpKSx0aGlzLnNldEN1cnNvcihuKSx0aGlzLnNjaGVkdWxlUmVtb3ZhbCg1ZTMpfX19LHMucHJvdG90eXBlLmRyYWdlbmQ9ZnVuY3Rpb24oKXt0aGlzLnNjaGVkdWxlUmVtb3ZhbCgyMCl9LHMucHJvdG90eXBlLmRyb3A9ZnVuY3Rpb24oKXt0aGlzLnNjaGVkdWxlUmVtb3ZhbCgyMCl9LHMucHJvdG90eXBlLmRyYWdsZWF2ZT1mdW5jdGlvbih0KXt0LnRhcmdldCE9dGhpcy5lZGl0b3JWaWV3LmRvbSYmdGhpcy5lZGl0b3JWaWV3LmRvbS5jb250YWlucyh0LnJlbGF0ZWRUYXJnZXQpfHx0aGlzLnNldEN1cnNvcihudWxsKX0sZS5kcm9wQ3Vyc29yPWl9LCIzMGYxIjpmdW5jdGlvbih0LGUsbil7InVzZSBzdHJpY3QiO3ZhciByPW4oImI4ZTMiKSxvPW4oIjYzYjYiKSxpPW4oIjkxMzgiKSxzPW4oIjM1ZTgiKSxhPW4oIjQ4MWIiKSxjPW4oIjhmNjAiKSxsPW4oIjQ1ZjIiKSxwPW4oIjUzZTIiKSx1PW4oIjUxNjgiKSgiaXRlcmF0b3IiKSxoPSEoW10ua2V5cyYmIm5leHQiaW5bXS5rZXlzKCkpLGY9IkBAaXRlcmF0b3IiLGQ9ImtleXMiLHY9InZhbHVlcyIsbT1mdW5jdGlvbigpe3JldHVybiB0aGlzfTt0LmV4cG9ydHM9ZnVuY3Rpb24odCxlLG4seSxnLHcseCl7YyhuLGUseSk7dmFyIGIsayxTLEM9ZnVuY3Rpb24odCl7aWYoIWgmJnQgaW4gTilyZXR1cm4gTlt0XTtzd2l0Y2godCl7Y2FzZSBkOnJldHVybiBmdW5jdGlvbigpe3JldHVybiBuZXcgbih0aGlzLHQpfTtjYXNlIHY6cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIG5ldyBuKHRoaXMsdCl9fXJldHVybiBmdW5jdGlvbigpe3JldHVybiBuZXcgbih0aGlzLHQpfX0sTz1lKyIgSXRlcmF0b3IiLE09Zz09dixUPSExLE49dC5wcm90b3R5cGUsRT1OW3VdfHxOW2ZdfHxnJiZOW2ddLEE9RXx8QyhnKSxSPWc/TT9DKCJlbnRyaWVzIik6QTp2b2lkIDAsRD0iQXJyYXkiPT1lJiZOLmVudHJpZXN8fEU7aWYoRCYmKFM9cChELmNhbGwobmV3IHQpKSxTIT09T2JqZWN0LnByb3RvdHlwZSYmUy5uZXh0JiYobChTLE8sITApLHJ8fCJmdW5jdGlvbiI9PXR5cGVvZiBTW3VdfHxzKFMsdSxtKSkpLE0mJkUmJkUubmFtZSE9PXYmJihUPSEwLEE9ZnVuY3Rpb24oKXtyZXR1cm4gRS5jYWxsKHRoaXMpfSksciYmIXh8fCFoJiYhVCYmTlt1XXx8cyhOLHUsQSksYVtlXT1BLGFbT109bSxnKWlmKGI9e3ZhbHVlczpNP0E6Qyh2KSxrZXlzOnc/QTpDKGQpLGVudHJpZXM6Un0seClmb3IoayBpbiBiKWsgaW4gTnx8aShOLGssYltrXSk7ZWxzZSBvKG8uUCtvLkYqKGh8fFQpLGUsYik7cmV0dXJuIGJ9fSwiMzIxYSI6ZnVuY3Rpb24odCxlLG4peyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiByKHQpe3JldHVybiB0JiYib2JqZWN0Ij09PXR5cGVvZiB0JiYiZGVmYXVsdCJpbiB0P3RbImRlZmF1bHQiXTp0fU9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KTt2YXIgbz1yKG4oImNkZDAiKSksaT1uKCJiOTIzIikscz1uKCI2ZmZiIiksYT01MDAsYz1mdW5jdGlvbih0LGUpe3RoaXMuaXRlbXM9dCx0aGlzLmV2ZW50Q291bnQ9ZX07ZnVuY3Rpb24gbCh0LGUpe3ZhciBuO3JldHVybiB0LmZvckVhY2goKGZ1bmN0aW9uKHQscil7aWYodC5zZWxlY3Rpb24mJjA9PWUtLSlyZXR1cm4gbj1yLCExfSkpLHQuc2xpY2Uobil9Yy5wcm90b3R5cGUucG9wRXZlbnQ9ZnVuY3Rpb24odCxlKXt2YXIgbj10aGlzO2lmKDA9PXRoaXMuZXZlbnRDb3VudClyZXR1cm4gbnVsbDtmb3IodmFyIHIsbyxpPXRoaXMuaXRlbXMubGVuZ3RoOztpLS0pe3ZhciBzPW4uaXRlbXMuZ2V0KGktMSk7aWYocy5zZWxlY3Rpb24pey0taTticmVha319ZSYmKHI9dGhpcy5yZW1hcHBpbmcoaSx0aGlzLml0ZW1zLmxlbmd0aCksbz1yLm1hcHMubGVuZ3RoKTt2YXIgYSxsLHU9dC50cixoPVtdLGY9W107cmV0dXJuIHRoaXMuaXRlbXMuZm9yRWFjaCgoZnVuY3Rpb24odCxlKXtpZighdC5zdGVwKXJldHVybiByfHwocj1uLnJlbWFwcGluZyhpLGUrMSksbz1yLm1hcHMubGVuZ3RoKSxvLS0sdm9pZCBmLnB1c2godCk7aWYocil7Zi5wdXNoKG5ldyBwKHQubWFwKSk7dmFyIHMsZD10LnN0ZXAubWFwKHIuc2xpY2UobykpO2QmJnUubWF5YmVTdGVwKGQpLmRvYyYmKHM9dS5tYXBwaW5nLm1hcHNbdS5tYXBwaW5nLm1hcHMubGVuZ3RoLTFdLGgucHVzaChuZXcgcChzLG51bGwsbnVsbCxoLmxlbmd0aCtmLmxlbmd0aCkpKSxvLS0scyYmci5hcHBlbmRNYXAocyxvKX1lbHNlIHUubWF5YmVTdGVwKHQuc3RlcCk7cmV0dXJuIHQuc2VsZWN0aW9uPyhhPXI/dC5zZWxlY3Rpb24ubWFwKHIuc2xpY2UobykpOnQuc2VsZWN0aW9uLGw9bmV3IGMobi5pdGVtcy5zbGljZSgwLGkpLmFwcGVuZChmLnJldmVyc2UoKS5jb25jYXQoaCkpLG4uZXZlbnRDb3VudC0xKSwhMSk6dm9pZCAwfSksdGhpcy5pdGVtcy5sZW5ndGgsMCkse3JlbWFpbmluZzpsLHRyYW5zZm9ybTp1LHNlbGVjdGlvbjphfX0sYy5wcm90b3R5cGUuYWRkVHJhbnNmb3JtPWZ1bmN0aW9uKHQsZSxuLHIpe2Zvcih2YXIgbz1bXSxpPXRoaXMuZXZlbnRDb3VudCxzPXRoaXMuaXRlbXMsYT0hciYmcy5sZW5ndGg/cy5nZXQocy5sZW5ndGgtMSk6bnVsbCx1PTA7dTx0LnN0ZXBzLmxlbmd0aDt1Kyspe3ZhciBmPXQuc3RlcHNbdV0uaW52ZXJ0KHQuZG9jc1t1XSksZD1uZXcgcCh0Lm1hcHBpbmcubWFwc1t1XSxmLGUpLHY9dm9pZCAwOyh2PWEmJmEubWVyZ2UoZCkpJiYoZD12LHU/by5wb3AoKTpzPXMuc2xpY2UoMCxzLmxlbmd0aC0xKSksby5wdXNoKGQpLGUmJihpKyssZT1udWxsKSxyfHwoYT1kKX12YXIgbT1pLW4uZGVwdGg7cmV0dXJuIG0+aCYmKHM9bChzLG0pLGktPW0pLG5ldyBjKHMuYXBwZW5kKG8pLGkpfSxjLnByb3RvdHlwZS5yZW1hcHBpbmc9ZnVuY3Rpb24odCxlKXt2YXIgbj1uZXcgaS5NYXBwaW5nO3JldHVybiB0aGlzLml0ZW1zLmZvckVhY2goKGZ1bmN0aW9uKGUscil7dmFyIG89bnVsbCE9ZS5taXJyb3JPZmZzZXQmJnItZS5taXJyb3JPZmZzZXQ+PXQ/bz1uLm1hcHMubGVuZ3RoLWUubWlycm9yT2Zmc2V0Om51bGw7bi5hcHBlbmRNYXAoZS5tYXAsbyl9KSx0LGUpLG59LGMucHJvdG90eXBlLmFkZE1hcHM9ZnVuY3Rpb24odCl7cmV0dXJuIDA9PXRoaXMuZXZlbnRDb3VudD90aGlzOm5ldyBjKHRoaXMuaXRlbXMuYXBwZW5kKHQubWFwKChmdW5jdGlvbih0KXtyZXR1cm4gbmV3IHAodCl9KSkpLHRoaXMuZXZlbnRDb3VudCl9LGMucHJvdG90eXBlLnJlYmFzZWQ9ZnVuY3Rpb24odCxlKXtpZighdGhpcy5ldmVudENvdW50KXJldHVybiB0aGlzO3ZhciBuPVtdLHI9TWF0aC5tYXgoMCx0aGlzLml0ZW1zLmxlbmd0aC1lKSxvPXQubWFwcGluZyxpPXQuc3RlcHMubGVuZ3RoLHM9dGhpcy5ldmVudENvdW50O3RoaXMuaXRlbXMuZm9yRWFjaCgoZnVuY3Rpb24odCl7dC5zZWxlY3Rpb24mJnMtLX0pLHIpO3ZhciBsPWU7dGhpcy5pdGVtcy5mb3JFYWNoKChmdW5jdGlvbihlKXt2YXIgcj1vLmdldE1pcnJvcigtLWwpO2lmKG51bGwhPXIpe2k9TWF0aC5taW4oaSxyKTt2YXIgYT1vLm1hcHNbcl07aWYoZS5zdGVwKXt2YXIgYz10LnN0ZXBzW3JdLmludmVydCh0LmRvY3Nbcl0pLHU9ZS5zZWxlY3Rpb24mJmUuc2VsZWN0aW9uLm1hcChvLnNsaWNlKGwrMSxyKSk7dSYmcysrLG4ucHVzaChuZXcgcChhLGMsdSkpfWVsc2Ugbi5wdXNoKG5ldyBwKGEpKX19KSxyKTtmb3IodmFyIHU9W10saD1lO2g8aTtoKyspdS5wdXNoKG5ldyBwKG8ubWFwc1toXSkpO3ZhciBmPXRoaXMuaXRlbXMuc2xpY2UoMCxyKS5hcHBlbmQodSkuYXBwZW5kKG4pLGQ9bmV3IGMoZixzKTtyZXR1cm4gZC5lbXB0eUl0ZW1Db3VudCgpPmEmJihkPWQuY29tcHJlc3ModGhpcy5pdGVtcy5sZW5ndGgtbi5sZW5ndGgpKSxkfSxjLnByb3RvdHlwZS5lbXB0eUl0ZW1Db3VudD1mdW5jdGlvbigpe3ZhciB0PTA7cmV0dXJuIHRoaXMuaXRlbXMuZm9yRWFjaCgoZnVuY3Rpb24oZSl7ZS5zdGVwfHx0Kyt9KSksdH0sYy5wcm90b3R5cGUuY29tcHJlc3M9ZnVuY3Rpb24odCl7dm9pZCAwPT09dCYmKHQ9dGhpcy5pdGVtcy5sZW5ndGgpO3ZhciBlPXRoaXMucmVtYXBwaW5nKDAsdCksbj1lLm1hcHMubGVuZ3RoLHI9W10saT0wO3JldHVybiB0aGlzLml0ZW1zLmZvckVhY2goKGZ1bmN0aW9uKG8scyl7aWYocz49dClyLnB1c2gobyksby5zZWxlY3Rpb24mJmkrKztlbHNlIGlmKG8uc3RlcCl7dmFyIGE9by5zdGVwLm1hcChlLnNsaWNlKG4pKSxjPWEmJmEuZ2V0TWFwKCk7aWYobi0tLGMmJmUuYXBwZW5kTWFwKGMsbiksYSl7dmFyIGw9by5zZWxlY3Rpb24mJm8uc2VsZWN0aW9uLm1hcChlLnNsaWNlKG4pKTtsJiZpKys7dmFyIHUsaD1uZXcgcChjLmludmVydCgpLGEsbCksZj1yLmxlbmd0aC0xOyh1PXIubGVuZ3RoJiZyW2ZdLm1lcmdlKGgpKT9yW2ZdPXU6ci5wdXNoKGgpfX1lbHNlIG8ubWFwJiZuLS19KSx0aGlzLml0ZW1zLmxlbmd0aCwwKSxuZXcgYyhvLmZyb20oci5yZXZlcnNlKCkpLGkpfSxjLmVtcHR5PW5ldyBjKG8uZW1wdHksMCk7dmFyIHA9ZnVuY3Rpb24odCxlLG4scil7dGhpcy5tYXA9dCx0aGlzLnN0ZXA9ZSx0aGlzLnNlbGVjdGlvbj1uLHRoaXMubWlycm9yT2Zmc2V0PXJ9O3AucHJvdG90eXBlLm1lcmdlPWZ1bmN0aW9uKHQpe2lmKHRoaXMuc3RlcCYmdC5zdGVwJiYhdC5zZWxlY3Rpb24pe3ZhciBlPXQuc3RlcC5tZXJnZSh0aGlzLnN0ZXApO2lmKGUpcmV0dXJuIG5ldyBwKGUuZ2V0TWFwKCkuaW52ZXJ0KCksZSx0aGlzLnNlbGVjdGlvbil9fTt2YXIgdT1mdW5jdGlvbih0LGUsbixyKXt0aGlzLmRvbmU9dCx0aGlzLnVuZG9uZT1lLHRoaXMucHJldlJhbmdlcz1uLHRoaXMucHJldlRpbWU9cn0saD0yMDtmdW5jdGlvbiBmKHQsZSxuLHIpe3ZhciBvLGk9bi5nZXRNZXRhKGspO2lmKGkpcmV0dXJuIGkuaGlzdG9yeVN0YXRlO24uZ2V0TWV0YShTKSYmKHQ9bmV3IHUodC5kb25lLHQudW5kb25lLG51bGwsMCkpO3ZhciBzPW4uZ2V0TWV0YSgiYXBwZW5kZWRUcmFuc2FjdGlvbiIpO2lmKDA9PW4uc3RlcHMubGVuZ3RoKXJldHVybiB0O2lmKHMmJnMuZ2V0TWV0YShrKSlyZXR1cm4gcy5nZXRNZXRhKGspLnJlZG8/bmV3IHUodC5kb25lLmFkZFRyYW5zZm9ybShuLG51bGwscix4KGUpKSx0LnVuZG9uZSx2KG4ubWFwcGluZy5tYXBzW24uc3RlcHMubGVuZ3RoLTFdKSx0LnByZXZUaW1lKTpuZXcgdSh0LmRvbmUsdC51bmRvbmUuYWRkVHJhbnNmb3JtKG4sbnVsbCxyLHgoZSkpLG51bGwsdC5wcmV2VGltZSk7aWYoITE9PT1uLmdldE1ldGEoImFkZFRvSGlzdG9yeSIpfHxzJiYhMT09PXMuZ2V0TWV0YSgiYWRkVG9IaXN0b3J5IikpcmV0dXJuKG89bi5nZXRNZXRhKCJyZWJhc2VkIikpP25ldyB1KHQuZG9uZS5yZWJhc2VkKG4sbyksdC51bmRvbmUucmViYXNlZChuLG8pLG0odC5wcmV2UmFuZ2VzLG4ubWFwcGluZyksdC5wcmV2VGltZSk6bmV3IHUodC5kb25lLmFkZE1hcHMobi5tYXBwaW5nLm1hcHMpLHQudW5kb25lLmFkZE1hcHMobi5tYXBwaW5nLm1hcHMpLG0odC5wcmV2UmFuZ2VzLG4ubWFwcGluZyksdC5wcmV2VGltZSk7dmFyIGE9dC5wcmV2VGltZTwobi50aW1lfHwwKS1yLm5ld0dyb3VwRGVsYXl8fCFzJiYhZChuLHQucHJldlJhbmdlcyksbD1zP20odC5wcmV2UmFuZ2VzLG4ubWFwcGluZyk6dihuLm1hcHBpbmcubWFwc1tuLnN0ZXBzLmxlbmd0aC0xXSk7cmV0dXJuIG5ldyB1KHQuZG9uZS5hZGRUcmFuc2Zvcm0obixhP2Uuc2VsZWN0aW9uLmdldEJvb2ttYXJrKCk6bnVsbCxyLHgoZSkpLGMuZW1wdHksbCxuLnRpbWUpfWZ1bmN0aW9uIGQodCxlKXtpZighZSlyZXR1cm4hMTtpZighdC5kb2NDaGFuZ2VkKXJldHVybiEwO3ZhciBuPSExO3JldHVybiB0Lm1hcHBpbmcubWFwc1swXS5mb3JFYWNoKChmdW5jdGlvbih0LHIpe2Zvcih2YXIgbz0wO288ZS5sZW5ndGg7bys9Mil0PD1lW28rMV0mJnI+PWVbb10mJihuPSEwKX0pKSxufWZ1bmN0aW9uIHYodCl7dmFyIGU9W107cmV0dXJuIHQuZm9yRWFjaCgoZnVuY3Rpb24odCxuLHIsbyl7cmV0dXJuIGUucHVzaChyLG8pfSkpLGV9ZnVuY3Rpb24gbSh0LGUpe2lmKCF0KXJldHVybiBudWxsO2Zvcih2YXIgbj1bXSxyPTA7cjx0Lmxlbmd0aDtyKz0yKXt2YXIgbz1lLm1hcCh0W3JdLDEpLGk9ZS5tYXAodFtyKzFdLC0xKTtvPD1pJiZuLnB1c2gobyxpKX1yZXR1cm4gbn1mdW5jdGlvbiB5KHQsZSxuLHIpe3ZhciBvPXgoZSksaT1rLmdldChlKS5zcGVjLmNvbmZpZyxzPShyP3QudW5kb25lOnQuZG9uZSkucG9wRXZlbnQoZSxvKTtpZihzKXt2YXIgYT1zLnNlbGVjdGlvbi5yZXNvbHZlKHMudHJhbnNmb3JtLmRvYyksYz0ocj90LmRvbmU6dC51bmRvbmUpLmFkZFRyYW5zZm9ybShzLnRyYW5zZm9ybSxlLnNlbGVjdGlvbi5nZXRCb29rbWFyaygpLGksbyksbD1uZXcgdShyP2M6cy5yZW1haW5pbmcscj9zLnJlbWFpbmluZzpjLG51bGwsMCk7bihzLnRyYW5zZm9ybS5zZXRTZWxlY3Rpb24oYSkuc2V0TWV0YShrLHtyZWRvOnIsaGlzdG9yeVN0YXRlOmx9KS5zY3JvbGxJbnRvVmlldygpKX19dmFyIGc9ITEsdz1udWxsO2Z1bmN0aW9uIHgodCl7dmFyIGU9dC5wbHVnaW5zO2lmKHchPWUpe2c9ITEsdz1lO2Zvcih2YXIgbj0wO248ZS5sZW5ndGg7bisrKWlmKGVbbl0uc3BlYy5oaXN0b3J5UHJlc2VydmVJdGVtcyl7Zz0hMDticmVha319cmV0dXJuIGd9ZnVuY3Rpb24gYih0KXtyZXR1cm4gdC5zZXRNZXRhKFMsITApfXZhciBrPW5ldyBzLlBsdWdpbktleSgiaGlzdG9yeSIpLFM9bmV3IHMuUGx1Z2luS2V5KCJjbG9zZUhpc3RvcnkiKTtmdW5jdGlvbiBDKHQpe3JldHVybiB0PXtkZXB0aDp0JiZ0LmRlcHRofHwxMDAsbmV3R3JvdXBEZWxheTp0JiZ0Lm5ld0dyb3VwRGVsYXl8fDUwMH0sbmV3IHMuUGx1Z2luKHtrZXk6ayxzdGF0ZTp7aW5pdDpmdW5jdGlvbigpe3JldHVybiBuZXcgdShjLmVtcHR5LGMuZW1wdHksbnVsbCwwKX0sYXBwbHk6ZnVuY3Rpb24oZSxuLHIpe3JldHVybiBmKG4scixlLHQpfX0sY29uZmlnOnR9KX1mdW5jdGlvbiBPKHQsZSl7dmFyIG49ay5nZXRTdGF0ZSh0KTtyZXR1cm4hKCFufHwwPT1uLmRvbmUuZXZlbnRDb3VudCkmJihlJiZ5KG4sdCxlLCExKSwhMCl9ZnVuY3Rpb24gTSh0LGUpe3ZhciBuPWsuZ2V0U3RhdGUodCk7cmV0dXJuISghbnx8MD09bi51bmRvbmUuZXZlbnRDb3VudCkmJihlJiZ5KG4sdCxlLCEwKSwhMCl9ZnVuY3Rpb24gVCh0KXt2YXIgZT1rLmdldFN0YXRlKHQpO3JldHVybiBlP2UuZG9uZS5ldmVudENvdW50OjB9ZnVuY3Rpb24gTih0KXt2YXIgZT1rLmdldFN0YXRlKHQpO3JldHVybiBlP2UudW5kb25lLmV2ZW50Q291bnQ6MH1lLkhpc3RvcnlTdGF0ZT11LGUuY2xvc2VIaXN0b3J5PWIsZS5oaXN0b3J5PUMsZS51bmRvPU8sZS5yZWRvPU0sZS51bmRvRGVwdGg9VCxlLnJlZG9EZXB0aD1OfSwiMzJlOSI6ZnVuY3Rpb24odCxlLG4pe3ZhciByPW4oIjg2Y2MiKSxvPW4oIjQ2MzAiKTt0LmV4cG9ydHM9bigiOWUxZSIpP2Z1bmN0aW9uKHQsZSxuKXtyZXR1cm4gci5mKHQsZSxvKDEsbikpfTpmdW5jdGlvbih0LGUsbil7cmV0dXJuIHRbZV09bix0fX0sIjMyZmMiOmZ1bmN0aW9uKHQsZSxuKXt2YXIgcj1uKCJlNTNkIikuZG9jdW1lbnQ7dC5leHBvcnRzPXImJnIuZG9jdW1lbnRFbGVtZW50fSwiMzM1YyI6ZnVuY3Rpb24odCxlLG4pe3ZhciByPW4oIjZiNGMiKTt0LmV4cG9ydHM9T2JqZWN0KCJ6IikucHJvcGVydHlJc0VudW1lcmFibGUoMCk/T2JqZWN0OmZ1bmN0aW9uKHQpe3JldHVybiJTdHJpbmciPT1yKHQpP3Quc3BsaXQoIiIpOk9iamVjdCh0KX19LDMzNjI6ZnVuY3Rpb24odCxlLG4peyJ1c2Ugc3RyaWN0IjtPYmplY3QuZGVmaW5lUHJvcGVydHkoZSwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSk7dmFyIHI9bigiOGFiZSIpLG89NjU1MzUsaT1NYXRoLnBvdygyLDE2KTtmdW5jdGlvbiBzKHQsZSl7cmV0dXJuIHQrZSppfWZ1bmN0aW9uIGEodCl7cmV0dXJuIHQmb31mdW5jdGlvbiBjKHQpe3JldHVybih0LSh0Jm8pKS9pfXZhciBsPWZ1bmN0aW9uKHQsZSxuKXt2b2lkIDA9PT1lJiYoZT0hMSksdm9pZCAwPT09biYmKG49bnVsbCksdGhpcy5wb3M9dCx0aGlzLmRlbGV0ZWQ9ZSx0aGlzLnJlY292ZXI9bn0scD1mdW5jdGlvbih0LGUpe3ZvaWQgMD09PWUmJihlPSExKSx0aGlzLnJhbmdlcz10LHRoaXMuaW52ZXJ0ZWQ9ZX07cC5wcm90b3R5cGUucmVjb3Zlcj1mdW5jdGlvbih0KXt2YXIgZT10aGlzLG49MCxyPWEodCk7aWYoIXRoaXMuaW52ZXJ0ZWQpZm9yKHZhciBvPTA7bzxyO28rKyluKz1lLnJhbmdlc1szKm8rMl0tZS5yYW5nZXNbMypvKzFdO3JldHVybiB0aGlzLnJhbmdlc1szKnJdK24rYyh0KX0scC5wcm90b3R5cGUubWFwUmVzdWx0PWZ1bmN0aW9uKHQsZSl7cmV0dXJuIHZvaWQgMD09PWUmJihlPTEpLHRoaXMuX21hcCh0LGUsITEpfSxwLnByb3RvdHlwZS5tYXA9ZnVuY3Rpb24odCxlKXtyZXR1cm4gdm9pZCAwPT09ZSYmKGU9MSksdGhpcy5fbWFwKHQsZSwhMCl9LHAucHJvdG90eXBlLl9tYXA9ZnVuY3Rpb24odCxlLG4pe2Zvcih2YXIgcj10aGlzLG89MCxpPXRoaXMuaW52ZXJ0ZWQ/MjoxLGE9dGhpcy5pbnZlcnRlZD8xOjIsYz0wO2M8dGhpcy5yYW5nZXMubGVuZ3RoO2MrPTMpe3ZhciBwPXIucmFuZ2VzW2NdLShyLmludmVydGVkP286MCk7aWYocD50KWJyZWFrO3ZhciB1PXIucmFuZ2VzW2MraV0saD1yLnJhbmdlc1tjK2FdLGY9cCt1O2lmKHQ8PWYpe3ZhciBkPXU/dD09cD8tMTp0PT1mPzE6ZTplLHY9cCtvKyhkPDA/MDpoKTtpZihuKXJldHVybiB2O3ZhciBtPXMoYy8zLHQtcCk7cmV0dXJuIG5ldyBsKHYsZTwwP3QhPXA6dCE9ZixtKX1vKz1oLXV9cmV0dXJuIG4/dCtvOm5ldyBsKHQrbyl9LHAucHJvdG90eXBlLnRvdWNoZXM9ZnVuY3Rpb24odCxlKXtmb3IodmFyIG49dGhpcyxyPTAsbz1hKGUpLGk9dGhpcy5pbnZlcnRlZD8yOjEscz10aGlzLmludmVydGVkPzE6MixjPTA7Yzx0aGlzLnJhbmdlcy5sZW5ndGg7Yys9Myl7dmFyIGw9bi5yYW5nZXNbY10tKG4uaW52ZXJ0ZWQ/cjowKTtpZihsPnQpYnJlYWs7dmFyIHA9bi5yYW5nZXNbYytpXSx1PWwrcDtpZih0PD11JiZjPT0zKm8pcmV0dXJuITA7cis9bi5yYW5nZXNbYytzXS1wfXJldHVybiExfSxwLnByb3RvdHlwZS5mb3JFYWNoPWZ1bmN0aW9uKHQpe2Zvcih2YXIgZT10aGlzLG49dGhpcy5pbnZlcnRlZD8yOjEscj10aGlzLmludmVydGVkPzE6MixvPTAsaT0wO288dGhpcy5yYW5nZXMubGVuZ3RoO28rPTMpe3ZhciBzPWUucmFuZ2VzW29dLGE9cy0oZS5pbnZlcnRlZD9pOjApLGM9cysoZS5pbnZlcnRlZD8wOmkpLGw9ZS5yYW5nZXNbbytuXSxwPWUucmFuZ2VzW28rcl07dChhLGErbCxjLGMrcCksaSs9cC1sfX0scC5wcm90b3R5cGUuaW52ZXJ0PWZ1bmN0aW9uKCl7cmV0dXJuIG5ldyBwKHRoaXMucmFuZ2VzLCF0aGlzLmludmVydGVkKX0scC5wcm90b3R5cGUudG9TdHJpbmc9ZnVuY3Rpb24oKXtyZXR1cm4odGhpcy5pbnZlcnRlZD8iLSI6IiIpK0pTT04uc3RyaW5naWZ5KHRoaXMucmFuZ2VzKX0scC5vZmZzZXQ9ZnVuY3Rpb24odCl7cmV0dXJuIDA9PXQ/cC5lbXB0eTpuZXcgcCh0PDA/WzAsLXQsMF06WzAsMCx0XSl9LHAuZW1wdHk9bmV3IHAoW10pO3ZhciB1PWZ1bmN0aW9uKHQsZSxuLHIpe3RoaXMubWFwcz10fHxbXSx0aGlzLmZyb209bnx8MCx0aGlzLnRvPW51bGw9PXI/dGhpcy5tYXBzLmxlbmd0aDpyLHRoaXMubWlycm9yPWV9O2Z1bmN0aW9uIGgodCl7dmFyIGU9RXJyb3IuY2FsbCh0aGlzLHQpO3JldHVybiBlLl9fcHJvdG9fXz1oLnByb3RvdHlwZSxlfXUucHJvdG90eXBlLnNsaWNlPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIHZvaWQgMD09PXQmJih0PTApLHZvaWQgMD09PWUmJihlPXRoaXMubWFwcy5sZW5ndGgpLG5ldyB1KHRoaXMubWFwcyx0aGlzLm1pcnJvcix0LGUpfSx1LnByb3RvdHlwZS5jb3B5PWZ1bmN0aW9uKCl7cmV0dXJuIG5ldyB1KHRoaXMubWFwcy5zbGljZSgpLHRoaXMubWlycm9yJiZ0aGlzLm1pcnJvci5zbGljZSgpLHRoaXMuZnJvbSx0aGlzLnRvKX0sdS5wcm90b3R5cGUuYXBwZW5kTWFwPWZ1bmN0aW9uKHQsZSl7dGhpcy50bz10aGlzLm1hcHMucHVzaCh0KSxudWxsIT1lJiZ0aGlzLnNldE1pcnJvcih0aGlzLm1hcHMubGVuZ3RoLTEsZSl9LHUucHJvdG90eXBlLmFwcGVuZE1hcHBpbmc9ZnVuY3Rpb24odCl7Zm9yKHZhciBlPXRoaXMsbj0wLHI9dGhpcy5tYXBzLmxlbmd0aDtuPHQubWFwcy5sZW5ndGg7bisrKXt2YXIgbz10LmdldE1pcnJvcihuKTtlLmFwcGVuZE1hcCh0Lm1hcHNbbl0sbnVsbCE9byYmbzxuP3IrbzpudWxsKX19LHUucHJvdG90eXBlLmdldE1pcnJvcj1mdW5jdGlvbih0KXt2YXIgZT10aGlzO2lmKHRoaXMubWlycm9yKWZvcih2YXIgbj0wO248dGhpcy5taXJyb3IubGVuZ3RoO24rKylpZihlLm1pcnJvcltuXT09dClyZXR1cm4gZS5taXJyb3JbbisobiUyPy0xOjEpXX0sdS5wcm90b3R5cGUuc2V0TWlycm9yPWZ1bmN0aW9uKHQsZSl7dGhpcy5taXJyb3J8fCh0aGlzLm1pcnJvcj1bXSksdGhpcy5taXJyb3IucHVzaCh0LGUpfSx1LnByb3RvdHlwZS5hcHBlbmRNYXBwaW5nSW52ZXJ0ZWQ9ZnVuY3Rpb24odCl7Zm9yKHZhciBlPXRoaXMsbj10Lm1hcHMubGVuZ3RoLTEscj10aGlzLm1hcHMubGVuZ3RoK3QubWFwcy5sZW5ndGg7bj49MDtuLS0pe3ZhciBvPXQuZ2V0TWlycm9yKG4pO2UuYXBwZW5kTWFwKHQubWFwc1tuXS5pbnZlcnQoKSxudWxsIT1vJiZvPm4/ci1vLTE6bnVsbCl9fSx1LnByb3RvdHlwZS5pbnZlcnQ9ZnVuY3Rpb24oKXt2YXIgdD1uZXcgdTtyZXR1cm4gdC5hcHBlbmRNYXBwaW5nSW52ZXJ0ZWQodGhpcyksdH0sdS5wcm90b3R5cGUubWFwPWZ1bmN0aW9uKHQsZSl7dmFyIG49dGhpcztpZih2b2lkIDA9PT1lJiYoZT0xKSx0aGlzLm1pcnJvcilyZXR1cm4gdGhpcy5fbWFwKHQsZSwhMCk7Zm9yKHZhciByPXRoaXMuZnJvbTtyPHRoaXMudG87cisrKXQ9bi5tYXBzW3JdLm1hcCh0LGUpO3JldHVybiB0fSx1LnByb3RvdHlwZS5tYXBSZXN1bHQ9ZnVuY3Rpb24odCxlKXtyZXR1cm4gdm9pZCAwPT09ZSYmKGU9MSksdGhpcy5fbWFwKHQsZSwhMSl9LHUucHJvdG90eXBlLl9tYXA9ZnVuY3Rpb24odCxlLG4pe2Zvcih2YXIgcj10aGlzLG89ITEsaT1udWxsLHM9dGhpcy5mcm9tO3M8dGhpcy50bztzKyspe3ZhciBhPXIubWFwc1tzXSxjPWkmJmlbc107aWYobnVsbCE9YyYmYS50b3VjaGVzKHQsYykpdD1hLnJlY292ZXIoYyk7ZWxzZXt2YXIgcD1hLm1hcFJlc3VsdCh0LGUpO2lmKG51bGwhPXAucmVjb3Zlcil7dmFyIHU9ci5nZXRNaXJyb3Iocyk7aWYobnVsbCE9dSYmdT5zJiZ1PHIudG8pe2lmKHAuZGVsZXRlZCl7cz11LHQ9ci5tYXBzW3VdLnJlY292ZXIocC5yZWNvdmVyKTtjb250aW51ZX0oaXx8KGk9T2JqZWN0LmNyZWF0ZShudWxsKSkpW3VdPXAucmVjb3Zlcn19cC5kZWxldGVkJiYobz0hMCksdD1wLnBvc319cmV0dXJuIG4/dDpuZXcgbCh0LG8pfSxoLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKEVycm9yLnByb3RvdHlwZSksaC5wcm90b3R5cGUuY29uc3RydWN0b3I9aCxoLnByb3RvdHlwZS5uYW1lPSJUcmFuc2Zvcm1FcnJvciI7dmFyIGY9ZnVuY3Rpb24odCl7dGhpcy5kb2M9dCx0aGlzLnN0ZXBzPVtdLHRoaXMuZG9jcz1bXSx0aGlzLm1hcHBpbmc9bmV3IHV9LGQ9e2JlZm9yZTp7fSxkb2NDaGFuZ2VkOnt9fTtmdW5jdGlvbiB2KCl7dGhyb3cgbmV3IEVycm9yKCJPdmVycmlkZSBtZSIpfWQuYmVmb3JlLmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLmRvY3MubGVuZ3RoP3RoaXMuZG9jc1swXTp0aGlzLmRvY30sZi5wcm90b3R5cGUuc3RlcD1mdW5jdGlvbih0KXt2YXIgZT10aGlzLm1heWJlU3RlcCh0KTtpZihlLmZhaWxlZCl0aHJvdyBuZXcgaChlLmZhaWxlZCk7cmV0dXJuIHRoaXN9LGYucHJvdG90eXBlLm1heWJlU3RlcD1mdW5jdGlvbih0KXt2YXIgZT10LmFwcGx5KHRoaXMuZG9jKTtyZXR1cm4gZS5mYWlsZWR8fHRoaXMuYWRkU3RlcCh0LGUuZG9jKSxlfSxkLmRvY0NoYW5nZWQuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuc3RlcHMubGVuZ3RoPjB9LGYucHJvdG90eXBlLmFkZFN0ZXA9ZnVuY3Rpb24odCxlKXt0aGlzLmRvY3MucHVzaCh0aGlzLmRvYyksdGhpcy5zdGVwcy5wdXNoKHQpLHRoaXMubWFwcGluZy5hcHBlbmRNYXAodC5nZXRNYXAoKSksdGhpcy5kb2M9ZX0sT2JqZWN0LmRlZmluZVByb3BlcnRpZXMoZi5wcm90b3R5cGUsZCk7dmFyIG09T2JqZWN0LmNyZWF0ZShudWxsKSx5PWZ1bmN0aW9uKCl7fTt5LnByb3RvdHlwZS5hcHBseT1mdW5jdGlvbih0KXtyZXR1cm4gdigpfSx5LnByb3RvdHlwZS5nZXRNYXA9ZnVuY3Rpb24oKXtyZXR1cm4gcC5lbXB0eX0seS5wcm90b3R5cGUuaW52ZXJ0PWZ1bmN0aW9uKHQpe3JldHVybiB2KCl9LHkucHJvdG90eXBlLm1hcD1mdW5jdGlvbih0KXtyZXR1cm4gdigpfSx5LnByb3RvdHlwZS5tZXJnZT1mdW5jdGlvbih0KXtyZXR1cm4gbnVsbH0seS5wcm90b3R5cGUudG9KU09OPWZ1bmN0aW9uKCl7cmV0dXJuIHYoKX0seS5mcm9tSlNPTj1mdW5jdGlvbih0LGUpe2lmKCFlfHwhZS5zdGVwVHlwZSl0aHJvdyBuZXcgUmFuZ2VFcnJvcigiSW52YWxpZCBpbnB1dCBmb3IgU3RlcC5mcm9tSlNPTiIpO3ZhciBuPW1bZS5zdGVwVHlwZV07aWYoIW4pdGhyb3cgbmV3IFJhbmdlRXJyb3IoIk5vIHN0ZXAgdHlwZSAiK2Uuc3RlcFR5cGUrIiBkZWZpbmVkIik7cmV0dXJuIG4uZnJvbUpTT04odCxlKX0seS5qc29uSUQ9ZnVuY3Rpb24odCxlKXtpZih0IGluIG0pdGhyb3cgbmV3IFJhbmdlRXJyb3IoIkR1cGxpY2F0ZSB1c2Ugb2Ygc3RlcCBKU09OIElEICIrdCk7cmV0dXJuIG1bdF09ZSxlLnByb3RvdHlwZS5qc29uSUQ9dCxlfTt2YXIgZz1mdW5jdGlvbih0LGUpe3RoaXMuZG9jPXQsdGhpcy5mYWlsZWQ9ZX07Zy5vaz1mdW5jdGlvbih0KXtyZXR1cm4gbmV3IGcodCxudWxsKX0sZy5mYWlsPWZ1bmN0aW9uKHQpe3JldHVybiBuZXcgZyhudWxsLHQpfSxnLmZyb21SZXBsYWNlPWZ1bmN0aW9uKHQsZSxuLG8pe3RyeXtyZXR1cm4gZy5vayh0LnJlcGxhY2UoZSxuLG8pKX1jYXRjaChpKXtpZihpIGluc3RhbmNlb2Ygci5SZXBsYWNlRXJyb3IpcmV0dXJuIGcuZmFpbChpLm1lc3NhZ2UpO3Rocm93IGl9fTt2YXIgdz1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKGUsbixyLG8pe3QuY2FsbCh0aGlzKSx0aGlzLmZyb209ZSx0aGlzLnRvPW4sdGhpcy5zbGljZT1yLHRoaXMuc3RydWN0dXJlPSEhb31yZXR1cm4gdCYmKGUuX19wcm90b19fPXQpLGUucHJvdG90eXBlPU9iamVjdC5jcmVhdGUodCYmdC5wcm90b3R5cGUpLGUucHJvdG90eXBlLmNvbnN0cnVjdG9yPWUsZS5wcm90b3R5cGUuYXBwbHk9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuc3RydWN0dXJlJiZiKHQsdGhpcy5mcm9tLHRoaXMudG8pP2cuZmFpbCgiU3RydWN0dXJlIHJlcGxhY2Ugd291bGQgb3ZlcndyaXRlIGNvbnRlbnQiKTpnLmZyb21SZXBsYWNlKHQsdGhpcy5mcm9tLHRoaXMudG8sdGhpcy5zbGljZSl9LGUucHJvdG90eXBlLmdldE1hcD1mdW5jdGlvbigpe3JldHVybiBuZXcgcChbdGhpcy5mcm9tLHRoaXMudG8tdGhpcy5mcm9tLHRoaXMuc2xpY2Uuc2l6ZV0pfSxlLnByb3RvdHlwZS5pbnZlcnQ9ZnVuY3Rpb24odCl7cmV0dXJuIG5ldyBlKHRoaXMuZnJvbSx0aGlzLmZyb20rdGhpcy5zbGljZS5zaXplLHQuc2xpY2UodGhpcy5mcm9tLHRoaXMudG8pKX0sZS5wcm90b3R5cGUubWFwPWZ1bmN0aW9uKHQpe3ZhciBuPXQubWFwUmVzdWx0KHRoaXMuZnJvbSwxKSxyPXQubWFwUmVzdWx0KHRoaXMudG8sLTEpO3JldHVybiBuLmRlbGV0ZWQmJnIuZGVsZXRlZD9udWxsOm5ldyBlKG4ucG9zLE1hdGgubWF4KG4ucG9zLHIucG9zKSx0aGlzLnNsaWNlKX0sZS5wcm90b3R5cGUubWVyZ2U9ZnVuY3Rpb24odCl7aWYoISh0IGluc3RhbmNlb2YgZSl8fHQuc3RydWN0dXJlIT10aGlzLnN0cnVjdHVyZSlyZXR1cm4gbnVsbDtpZih0aGlzLmZyb20rdGhpcy5zbGljZS5zaXplIT10LmZyb218fHRoaXMuc2xpY2Uub3BlbkVuZHx8dC5zbGljZS5vcGVuU3RhcnQpe2lmKHQudG8hPXRoaXMuZnJvbXx8dGhpcy5zbGljZS5vcGVuU3RhcnR8fHQuc2xpY2Uub3BlbkVuZClyZXR1cm4gbnVsbDt2YXIgbj10aGlzLnNsaWNlLnNpemUrdC5zbGljZS5zaXplPT0wP3IuU2xpY2UuZW1wdHk6bmV3IHIuU2xpY2UodC5zbGljZS5jb250ZW50LmFwcGVuZCh0aGlzLnNsaWNlLmNvbnRlbnQpLHQuc2xpY2Uub3BlblN0YXJ0LHRoaXMuc2xpY2Uub3BlbkVuZCk7cmV0dXJuIG5ldyBlKHQuZnJvbSx0aGlzLnRvLG4sdGhpcy5zdHJ1Y3R1cmUpfXZhciBvPXRoaXMuc2xpY2Uuc2l6ZSt0LnNsaWNlLnNpemU9PTA/ci5TbGljZS5lbXB0eTpuZXcgci5TbGljZSh0aGlzLnNsaWNlLmNvbnRlbnQuYXBwZW5kKHQuc2xpY2UuY29udGVudCksdGhpcy5zbGljZS5vcGVuU3RhcnQsdC5zbGljZS5vcGVuRW5kKTtyZXR1cm4gbmV3IGUodGhpcy5mcm9tLHRoaXMudG8rKHQudG8tdC5mcm9tKSxvLHRoaXMuc3RydWN0dXJlKX0sZS5wcm90b3R5cGUudG9KU09OPWZ1bmN0aW9uKCl7dmFyIHQ9e3N0ZXBUeXBlOiJyZXBsYWNlIixmcm9tOnRoaXMuZnJvbSx0bzp0aGlzLnRvfTtyZXR1cm4gdGhpcy5zbGljZS5zaXplJiYodC5zbGljZT10aGlzLnNsaWNlLnRvSlNPTigpKSx0aGlzLnN0cnVjdHVyZSYmKHQuc3RydWN0dXJlPSEwKSx0fSxlLmZyb21KU09OPWZ1bmN0aW9uKHQsbil7aWYoIm51bWJlciIhPXR5cGVvZiBuLmZyb218fCJudW1iZXIiIT10eXBlb2Ygbi50byl0aHJvdyBuZXcgUmFuZ2VFcnJvcigiSW52YWxpZCBpbnB1dCBmb3IgUmVwbGFjZVN0ZXAuZnJvbUpTT04iKTtyZXR1cm4gbmV3IGUobi5mcm9tLG4udG8sci5TbGljZS5mcm9tSlNPTih0LG4uc2xpY2UpLCEhbi5zdHJ1Y3R1cmUpfSxlfSh5KTt5Lmpzb25JRCgicmVwbGFjZSIsdyk7dmFyIHg9ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZShlLG4scixvLGkscyxhKXt0LmNhbGwodGhpcyksdGhpcy5mcm9tPWUsdGhpcy50bz1uLHRoaXMuZ2FwRnJvbT1yLHRoaXMuZ2FwVG89byx0aGlzLnNsaWNlPWksdGhpcy5pbnNlcnQ9cyx0aGlzLnN0cnVjdHVyZT0hIWF9cmV0dXJuIHQmJihlLl9fcHJvdG9fXz10KSxlLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKHQmJnQucHJvdG90eXBlKSxlLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1lLGUucHJvdG90eXBlLmFwcGx5PWZ1bmN0aW9uKHQpe2lmKHRoaXMuc3RydWN0dXJlJiYoYih0LHRoaXMuZnJvbSx0aGlzLmdhcEZyb20pfHxiKHQsdGhpcy5nYXBUbyx0aGlzLnRvKSkpcmV0dXJuIGcuZmFpbCgiU3RydWN0dXJlIGdhcC1yZXBsYWNlIHdvdWxkIG92ZXJ3cml0ZSBjb250ZW50Iik7dmFyIGU9dC5zbGljZSh0aGlzLmdhcEZyb20sdGhpcy5nYXBUbyk7aWYoZS5vcGVuU3RhcnR8fGUub3BlbkVuZClyZXR1cm4gZy5mYWlsKCJHYXAgaXMgbm90IGEgZmxhdCByYW5nZSIpO3ZhciBuPXRoaXMuc2xpY2UuaW5zZXJ0QXQodGhpcy5pbnNlcnQsZS5jb250ZW50KTtyZXR1cm4gbj9nLmZyb21SZXBsYWNlKHQsdGhpcy5mcm9tLHRoaXMudG8sbik6Zy5mYWlsKCJDb250ZW50IGRvZXMgbm90IGZpdCBpbiBnYXAiKX0sZS5wcm90b3R5cGUuZ2V0TWFwPWZ1bmN0aW9uKCl7cmV0dXJuIG5ldyBwKFt0aGlzLmZyb20sdGhpcy5nYXBGcm9tLXRoaXMuZnJvbSx0aGlzLmluc2VydCx0aGlzLmdhcFRvLHRoaXMudG8tdGhpcy5nYXBUbyx0aGlzLnNsaWNlLnNpemUtdGhpcy5pbnNlcnRdKX0sZS5wcm90b3R5cGUuaW52ZXJ0PWZ1bmN0aW9uKHQpe3ZhciBuPXRoaXMuZ2FwVG8tdGhpcy5nYXBGcm9tO3JldHVybiBuZXcgZSh0aGlzLmZyb20sdGhpcy5mcm9tK3RoaXMuc2xpY2Uuc2l6ZStuLHRoaXMuZnJvbSt0aGlzLmluc2VydCx0aGlzLmZyb20rdGhpcy5pbnNlcnQrbix0LnNsaWNlKHRoaXMuZnJvbSx0aGlzLnRvKS5yZW1vdmVCZXR3ZWVuKHRoaXMuZ2FwRnJvbS10aGlzLmZyb20sdGhpcy5nYXBUby10aGlzLmZyb20pLHRoaXMuZ2FwRnJvbS10aGlzLmZyb20sdGhpcy5zdHJ1Y3R1cmUpfSxlLnByb3RvdHlwZS5tYXA9ZnVuY3Rpb24odCl7dmFyIG49dC5tYXBSZXN1bHQodGhpcy5mcm9tLDEpLHI9dC5tYXBSZXN1bHQodGhpcy50bywtMSksbz10Lm1hcCh0aGlzLmdhcEZyb20sLTEpLGk9dC5tYXAodGhpcy5nYXBUbywxKTtyZXR1cm4gbi5kZWxldGVkJiZyLmRlbGV0ZWR8fG88bi5wb3N8fGk+ci5wb3M/bnVsbDpuZXcgZShuLnBvcyxyLnBvcyxvLGksdGhpcy5zbGljZSx0aGlzLmluc2VydCx0aGlzLnN0cnVjdHVyZSl9LGUucHJvdG90eXBlLnRvSlNPTj1mdW5jdGlvbigpe3ZhciB0PXtzdGVwVHlwZToicmVwbGFjZUFyb3VuZCIsZnJvbTp0aGlzLmZyb20sdG86dGhpcy50byxnYXBGcm9tOnRoaXMuZ2FwRnJvbSxnYXBUbzp0aGlzLmdhcFRvLGluc2VydDp0aGlzLmluc2VydH07cmV0dXJuIHRoaXMuc2xpY2Uuc2l6ZSYmKHQuc2xpY2U9dGhpcy5zbGljZS50b0pTT04oKSksdGhpcy5zdHJ1Y3R1cmUmJih0LnN0cnVjdHVyZT0hMCksdH0sZS5mcm9tSlNPTj1mdW5jdGlvbih0LG4pe2lmKCJudW1iZXIiIT10eXBlb2Ygbi5mcm9tfHwibnVtYmVyIiE9dHlwZW9mIG4udG98fCJudW1iZXIiIT10eXBlb2Ygbi5nYXBGcm9tfHwibnVtYmVyIiE9dHlwZW9mIG4uZ2FwVG98fCJudW1iZXIiIT10eXBlb2Ygbi5pbnNlcnQpdGhyb3cgbmV3IFJhbmdlRXJyb3IoIkludmFsaWQgaW5wdXQgZm9yIFJlcGxhY2VBcm91bmRTdGVwLmZyb21KU09OIik7cmV0dXJuIG5ldyBlKG4uZnJvbSxuLnRvLG4uZ2FwRnJvbSxuLmdhcFRvLHIuU2xpY2UuZnJvbUpTT04odCxuLnNsaWNlKSxuLmluc2VydCwhIW4uc3RydWN0dXJlKX0sZX0oeSk7ZnVuY3Rpb24gYih0LGUsbil7dmFyIHI9dC5yZXNvbHZlKGUpLG89bi1lLGk9ci5kZXB0aDt3aGlsZShvPjAmJmk+MCYmci5pbmRleEFmdGVyKGkpPT1yLm5vZGUoaSkuY2hpbGRDb3VudClpLS0sby0tO2lmKG8+MCl7dmFyIHM9ci5ub2RlKGkpLm1heWJlQ2hpbGQoci5pbmRleEFmdGVyKGkpKTt3aGlsZShvPjApe2lmKCFzfHxzLmlzTGVhZilyZXR1cm4hMDtzPXMuZmlyc3RDaGlsZCxvLS19fXJldHVybiExfWZ1bmN0aW9uIGsodCxlLG4pe3JldHVybigwPT1lfHx0LmNhblJlcGxhY2UoZSx0LmNoaWxkQ291bnQpKSYmKG49PXQuY2hpbGRDb3VudHx8dC5jYW5SZXBsYWNlKDAsbikpfWZ1bmN0aW9uIFModCl7Zm9yKHZhciBlPXQucGFyZW50LG49ZS5jb250ZW50LmN1dEJ5SW5kZXgodC5zdGFydEluZGV4LHQuZW5kSW5kZXgpLHI9dC5kZXB0aDs7LS1yKXt2YXIgbz10LiRmcm9tLm5vZGUociksaT10LiRmcm9tLmluZGV4KHIpLHM9dC4kdG8uaW5kZXhBZnRlcihyKTtpZihyPHQuZGVwdGgmJm8uY2FuUmVwbGFjZShpLHMsbikpcmV0dXJuIHI7aWYoMD09cnx8by50eXBlLnNwZWMuaXNvbGF0aW5nfHwhayhvLGkscykpYnJlYWt9fWZ1bmN0aW9uIEModCxlLG4scil7dm9pZCAwPT09ciYmKHI9dCk7dmFyIG89TSh0LGUpLGk9byYmVChyLGUpO3JldHVybiBpP28ubWFwKE8pLmNvbmNhdCh7dHlwZTplLGF0dHJzOm59KS5jb25jYXQoaS5tYXAoTykpOm51bGx9ZnVuY3Rpb24gTyh0KXtyZXR1cm57dHlwZTp0LGF0dHJzOm51bGx9fWZ1bmN0aW9uIE0odCxlKXt2YXIgbj10LnBhcmVudCxyPXQuc3RhcnRJbmRleCxvPXQuZW5kSW5kZXgsaT1uLmNvbnRlbnRNYXRjaEF0KHIpLmZpbmRXcmFwcGluZyhlKTtpZighaSlyZXR1cm4gbnVsbDt2YXIgcz1pLmxlbmd0aD9pWzBdOmU7cmV0dXJuIG4uY2FuUmVwbGFjZVdpdGgocixvLHMpP2k6bnVsbH1mdW5jdGlvbiBUKHQsZSl7dmFyIG49dC5wYXJlbnQscj10LnN0YXJ0SW5kZXgsbz10LmVuZEluZGV4LGk9bi5jaGlsZChyKSxzPWUuY29udGVudE1hdGNoLmZpbmRXcmFwcGluZyhpLnR5cGUpO2lmKCFzKXJldHVybiBudWxsO2Zvcih2YXIgYT1zLmxlbmd0aD9zW3MubGVuZ3RoLTFdOmUsYz1hLmNvbnRlbnRNYXRjaCxsPXI7YyYmbDxvO2wrKyljPWMubWF0Y2hUeXBlKG4uY2hpbGQobCkudHlwZSk7cmV0dXJuIGMmJmMudmFsaWRFbmQ/czpudWxsfWZ1bmN0aW9uIE4odCxlLG4pe3ZhciByPXQucmVzb2x2ZShlKSxvPXIuaW5kZXgoKTtyZXR1cm4gci5wYXJlbnQuY2FuUmVwbGFjZVdpdGgobyxvKzEsbil9ZnVuY3Rpb24gRSh0LGUsbixyKXt2b2lkIDA9PT1uJiYobj0xKTt2YXIgbz10LnJlc29sdmUoZSksaT1vLmRlcHRoLW4scz1yJiZyW3IubGVuZ3RoLTFdfHxvLnBhcmVudDtpZihpPDB8fG8ucGFyZW50LnR5cGUuc3BlYy5pc29sYXRpbmd8fCFvLnBhcmVudC5jYW5SZXBsYWNlKG8uaW5kZXgoKSxvLnBhcmVudC5jaGlsZENvdW50KXx8IXMudHlwZS52YWxpZENvbnRlbnQoby5wYXJlbnQuY29udGVudC5jdXRCeUluZGV4KG8uaW5kZXgoKSxvLnBhcmVudC5jaGlsZENvdW50KSkpcmV0dXJuITE7Zm9yKHZhciBhPW8uZGVwdGgtMSxjPW4tMjthPmk7YS0tLGMtLSl7dmFyIGw9by5ub2RlKGEpLHA9by5pbmRleChhKTtpZihsLnR5cGUuc3BlYy5pc29sYXRpbmcpcmV0dXJuITE7dmFyIHU9bC5jb250ZW50LmN1dEJ5SW5kZXgocCxsLmNoaWxkQ291bnQpLGg9ciYmcltjXXx8bDtpZihoIT1sJiYodT11LnJlcGxhY2VDaGlsZCgwLGgudHlwZS5jcmVhdGUoaC5hdHRycykpKSwhbC5jYW5SZXBsYWNlKHArMSxsLmNoaWxkQ291bnQpfHwhaC50eXBlLnZhbGlkQ29udGVudCh1KSlyZXR1cm4hMX12YXIgZj1vLmluZGV4QWZ0ZXIoaSksZD1yJiZyWzBdO3JldHVybiBvLm5vZGUoaSkuY2FuUmVwbGFjZVdpdGgoZixmLGQ/ZC50eXBlOm8ubm9kZShpKzEpLnR5cGUpfWZ1bmN0aW9uIEEodCxlKXt2YXIgbj10LnJlc29sdmUoZSkscj1uLmluZGV4KCk7cmV0dXJuIFIobi5ub2RlQmVmb3JlLG4ubm9kZUFmdGVyKSYmbi5wYXJlbnQuY2FuUmVwbGFjZShyLHIrMSl9ZnVuY3Rpb24gUih0LGUpe3JldHVybiB0JiZlJiYhdC5pc0xlYWYmJnQuY2FuQXBwZW5kKGUpfWZ1bmN0aW9uIEQodCxlLG4pe3ZvaWQgMD09PW4mJihuPS0xKTtmb3IodmFyIHI9dC5yZXNvbHZlKGUpLG89ci5kZXB0aDs7by0tKXt2YXIgaT12b2lkIDAscz12b2lkIDA7aWYobz09ci5kZXB0aD8oaT1yLm5vZGVCZWZvcmUscz1yLm5vZGVBZnRlcik6bj4wPyhpPXIubm9kZShvKzEpLHM9ci5ub2RlKG8pLm1heWJlQ2hpbGQoci5pbmRleChvKSsxKSk6KGk9ci5ub2RlKG8pLm1heWJlQ2hpbGQoci5pbmRleChvKS0xKSxzPXIubm9kZShvKzEpKSxpJiYhaS5pc1RleHRibG9jayYmUihpLHMpKXJldHVybiBlO2lmKDA9PW8pYnJlYWs7ZT1uPDA/ci5iZWZvcmUobyk6ci5hZnRlcihvKX19ZnVuY3Rpb24geih0LGUsbil7dmFyIHI9dC5yZXNvbHZlKGUpO2lmKHIucGFyZW50LmNhblJlcGxhY2VXaXRoKHIuaW5kZXgoKSxyLmluZGV4KCksbikpcmV0dXJuIGU7aWYoMD09ci5wYXJlbnRPZmZzZXQpZm9yKHZhciBvPXIuZGVwdGgtMTtvPj0wO28tLSl7dmFyIGk9ci5pbmRleChvKTtpZihyLm5vZGUobykuY2FuUmVwbGFjZVdpdGgoaSxpLG4pKXJldHVybiByLmJlZm9yZShvKzEpO2lmKGk+MClyZXR1cm4gbnVsbH1pZihyLnBhcmVudE9mZnNldD09ci5wYXJlbnQuY29udGVudC5zaXplKWZvcih2YXIgcz1yLmRlcHRoLTE7cz49MDtzLS0pe3ZhciBhPXIuaW5kZXhBZnRlcihzKTtpZihyLm5vZGUocykuY2FuUmVwbGFjZVdpdGgoYSxhLG4pKXJldHVybiByLmFmdGVyKHMrMSk7aWYoYTxyLm5vZGUocykuY2hpbGRDb3VudClyZXR1cm4gbnVsbH19ZnVuY3Rpb24gUCh0LGUsbil7dmFyIHI9dC5yZXNvbHZlKGUpO2lmKCFuLmNvbnRlbnQuc2l6ZSlyZXR1cm4gZTtmb3IodmFyIG89bi5jb250ZW50LGk9MDtpPG4ub3BlblN0YXJ0O2krKylvPW8uZmlyc3RDaGlsZC5jb250ZW50O2Zvcih2YXIgcz0xO3M8PSgwPT1uLm9wZW5TdGFydCYmbi5zaXplPzI6MSk7cysrKWZvcih2YXIgYT1yLmRlcHRoO2E+PTA7YS0tKXt2YXIgYz1hPT1yLmRlcHRoPzA6ci5wb3M8PShyLnN0YXJ0KGErMSkrci5lbmQoYSsxKSkvMj8tMToxLGw9ci5pbmRleChhKSsoYz4wPzE6MCk7aWYoMT09cz9yLm5vZGUoYSkuY2FuUmVwbGFjZShsLGwsbyk6ci5ub2RlKGEpLmNvbnRlbnRNYXRjaEF0KGwpLmZpbmRXcmFwcGluZyhvLmZpcnN0Q2hpbGQudHlwZSkpcmV0dXJuIDA9PWM/ci5wb3M6YzwwP3IuYmVmb3JlKGErMSk6ci5hZnRlcihhKzEpfXJldHVybiBudWxsfWZ1bmN0aW9uIEkodCxlLG4pe2Zvcih2YXIgbz1bXSxpPTA7aTx0LmNoaWxkQ291bnQ7aSsrKXt2YXIgcz10LmNoaWxkKGkpO3MuY29udGVudC5zaXplJiYocz1zLmNvcHkoSShzLmNvbnRlbnQsZSxzKSkpLHMuaXNJbmxpbmUmJihzPWUocyxuLGkpKSxvLnB1c2gocyl9cmV0dXJuIHIuRnJhZ21lbnQuZnJvbUFycmF5KG8pfXkuanNvbklEKCJyZXBsYWNlQXJvdW5kIix4KSxmLnByb3RvdHlwZS5saWZ0PWZ1bmN0aW9uKHQsZSl7Zm9yKHZhciBuPXQuJGZyb20sbz10LiR0byxpPXQuZGVwdGgscz1uLmJlZm9yZShpKzEpLGE9by5hZnRlcihpKzEpLGM9cyxsPWEscD1yLkZyYWdtZW50LmVtcHR5LHU9MCxoPWksZj0hMTtoPmU7aC0tKWZ8fG4uaW5kZXgoaCk+MD8oZj0hMCxwPXIuRnJhZ21lbnQuZnJvbShuLm5vZGUoaCkuY29weShwKSksdSsrKTpjLS07Zm9yKHZhciBkPXIuRnJhZ21lbnQuZW1wdHksdj0wLG09aSx5PSExO20+ZTttLS0peXx8by5hZnRlcihtKzEpPG8uZW5kKG0pPyh5PSEwLGQ9ci5GcmFnbWVudC5mcm9tKG8ubm9kZShtKS5jb3B5KGQpKSx2KyspOmwrKztyZXR1cm4gdGhpcy5zdGVwKG5ldyB4KGMsbCxzLGEsbmV3IHIuU2xpY2UocC5hcHBlbmQoZCksdSx2KSxwLnNpemUtdSwhMCkpfSxmLnByb3RvdHlwZS53cmFwPWZ1bmN0aW9uKHQsZSl7Zm9yKHZhciBuPXIuRnJhZ21lbnQuZW1wdHksbz1lLmxlbmd0aC0xO28+PTA7by0tKW49ci5GcmFnbWVudC5mcm9tKGVbb10udHlwZS5jcmVhdGUoZVtvXS5hdHRycyxuKSk7dmFyIGk9dC5zdGFydCxzPXQuZW5kO3JldHVybiB0aGlzLnN0ZXAobmV3IHgoaSxzLGkscyxuZXcgci5TbGljZShuLDAsMCksZS5sZW5ndGgsITApKX0sZi5wcm90b3R5cGUuc2V0QmxvY2tUeXBlPWZ1bmN0aW9uKHQsZSxuLG8pe3ZhciBpPXRoaXM7aWYodm9pZCAwPT09ZSYmKGU9dCksIW4uaXNUZXh0YmxvY2spdGhyb3cgbmV3IFJhbmdlRXJyb3IoIlR5cGUgZ2l2ZW4gdG8gc2V0QmxvY2tUeXBlIHNob3VsZCBiZSBhIHRleHRibG9jayIpO3ZhciBzPXRoaXMuc3RlcHMubGVuZ3RoO3JldHVybiB0aGlzLmRvYy5ub2Rlc0JldHdlZW4odCxlLChmdW5jdGlvbih0LGUpe2lmKHQuaXNUZXh0YmxvY2smJiF0Lmhhc01hcmt1cChuLG8pJiZOKGkuZG9jLGkubWFwcGluZy5zbGljZShzKS5tYXAoZSksbikpe2kuY2xlYXJJbmNvbXBhdGlibGUoaS5tYXBwaW5nLnNsaWNlKHMpLm1hcChlLDEpLG4pO3ZhciBhPWkubWFwcGluZy5zbGljZShzKSxjPWEubWFwKGUsMSksbD1hLm1hcChlK3Qubm9kZVNpemUsMSk7cmV0dXJuIGkuc3RlcChuZXcgeChjLGwsYysxLGwtMSxuZXcgci5TbGljZShyLkZyYWdtZW50LmZyb20obi5jcmVhdGUobyxudWxsLHQubWFya3MpKSwwLDApLDEsITApKSwhMX19KSksdGhpc30sZi5wcm90b3R5cGUuc2V0Tm9kZU1hcmt1cD1mdW5jdGlvbih0LGUsbixvKXt2YXIgaT10aGlzLmRvYy5ub2RlQXQodCk7aWYoIWkpdGhyb3cgbmV3IFJhbmdlRXJyb3IoIk5vIG5vZGUgYXQgZ2l2ZW4gcG9zaXRpb24iKTtlfHwoZT1pLnR5cGUpO3ZhciBzPWUuY3JlYXRlKG4sbnVsbCxvfHxpLm1hcmtzKTtpZihpLmlzTGVhZilyZXR1cm4gdGhpcy5yZXBsYWNlV2l0aCh0LHQraS5ub2RlU2l6ZSxzKTtpZighZS52YWxpZENvbnRlbnQoaS5jb250ZW50KSl0aHJvdyBuZXcgUmFuZ2VFcnJvcigiSW52YWxpZCBjb250ZW50IGZvciBub2RlIHR5cGUgIitlLm5hbWUpO3JldHVybiB0aGlzLnN0ZXAobmV3IHgodCx0K2kubm9kZVNpemUsdCsxLHQraS5ub2RlU2l6ZS0xLG5ldyByLlNsaWNlKHIuRnJhZ21lbnQuZnJvbShzKSwwLDApLDEsITApKX0sZi5wcm90b3R5cGUuc3BsaXQ9ZnVuY3Rpb24odCxlLG4pe3ZvaWQgMD09PWUmJihlPTEpO2Zvcih2YXIgbz10aGlzLmRvYy5yZXNvbHZlKHQpLGk9ci5GcmFnbWVudC5lbXB0eSxzPXIuRnJhZ21lbnQuZW1wdHksYT1vLmRlcHRoLGM9by5kZXB0aC1lLGw9ZS0xO2E+YzthLS0sbC0tKXtpPXIuRnJhZ21lbnQuZnJvbShvLm5vZGUoYSkuY29weShpKSk7dmFyIHA9biYmbltsXTtzPXIuRnJhZ21lbnQuZnJvbShwP3AudHlwZS5jcmVhdGUocC5hdHRycyxzKTpvLm5vZGUoYSkuY29weShzKSl9cmV0dXJuIHRoaXMuc3RlcChuZXcgdyh0LHQsbmV3IHIuU2xpY2UoaS5hcHBlbmQocyksZSxlKSwhMCkpfSxmLnByb3RvdHlwZS5qb2luPWZ1bmN0aW9uKHQsZSl7dm9pZCAwPT09ZSYmKGU9MSk7dmFyIG49bmV3IHcodC1lLHQrZSxyLlNsaWNlLmVtcHR5LCEwKTtyZXR1cm4gdGhpcy5zdGVwKG4pfTt2YXIgXz1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKGUsbixyKXt0LmNhbGwodGhpcyksdGhpcy5mcm9tPWUsdGhpcy50bz1uLHRoaXMubWFyaz1yfXJldHVybiB0JiYoZS5fX3Byb3RvX189dCksZS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZSh0JiZ0LnByb3RvdHlwZSksZS5wcm90b3R5cGUuY29uc3RydWN0b3I9ZSxlLnByb3RvdHlwZS5hcHBseT1mdW5jdGlvbih0KXt2YXIgZT10aGlzLG49dC5zbGljZSh0aGlzLmZyb20sdGhpcy50byksbz10LnJlc29sdmUodGhpcy5mcm9tKSxpPW8ubm9kZShvLnNoYXJlZERlcHRoKHRoaXMudG8pKSxzPW5ldyByLlNsaWNlKEkobi5jb250ZW50LChmdW5jdGlvbih0LG4pe3JldHVybiBuLnR5cGUuYWxsb3dzTWFya1R5cGUoZS5tYXJrLnR5cGUpP3QubWFyayhlLm1hcmsuYWRkVG9TZXQodC5tYXJrcykpOnR9KSxpKSxuLm9wZW5TdGFydCxuLm9wZW5FbmQpO3JldHVybiBnLmZyb21SZXBsYWNlKHQsdGhpcy5mcm9tLHRoaXMudG8scyl9LGUucHJvdG90eXBlLmludmVydD1mdW5jdGlvbigpe3JldHVybiBuZXcgRih0aGlzLmZyb20sdGhpcy50byx0aGlzLm1hcmspfSxlLnByb3RvdHlwZS5tYXA9ZnVuY3Rpb24odCl7dmFyIG49dC5tYXBSZXN1bHQodGhpcy5mcm9tLDEpLHI9dC5tYXBSZXN1bHQodGhpcy50bywtMSk7cmV0dXJuIG4uZGVsZXRlZCYmci5kZWxldGVkfHxuLnBvcz49ci5wb3M/bnVsbDpuZXcgZShuLnBvcyxyLnBvcyx0aGlzLm1hcmspfSxlLnByb3RvdHlwZS5tZXJnZT1mdW5jdGlvbih0KXtpZih0IGluc3RhbmNlb2YgZSYmdC5tYXJrLmVxKHRoaXMubWFyaykmJnRoaXMuZnJvbTw9dC50byYmdGhpcy50bz49dC5mcm9tKXJldHVybiBuZXcgZShNYXRoLm1pbih0aGlzLmZyb20sdC5mcm9tKSxNYXRoLm1heCh0aGlzLnRvLHQudG8pLHRoaXMubWFyayl9LGUucHJvdG90eXBlLnRvSlNPTj1mdW5jdGlvbigpe3JldHVybntzdGVwVHlwZToiYWRkTWFyayIsbWFyazp0aGlzLm1hcmsudG9KU09OKCksZnJvbTp0aGlzLmZyb20sdG86dGhpcy50b319LGUuZnJvbUpTT049ZnVuY3Rpb24odCxuKXtpZigibnVtYmVyIiE9dHlwZW9mIG4uZnJvbXx8Im51bWJlciIhPXR5cGVvZiBuLnRvKXRocm93IG5ldyBSYW5nZUVycm9yKCJJbnZhbGlkIGlucHV0IGZvciBBZGRNYXJrU3RlcC5mcm9tSlNPTiIpO3JldHVybiBuZXcgZShuLmZyb20sbi50byx0Lm1hcmtGcm9tSlNPTihuLm1hcmspKX0sZX0oeSk7eS5qc29uSUQoImFkZE1hcmsiLF8pO3ZhciBGPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoZSxuLHIpe3QuY2FsbCh0aGlzKSx0aGlzLmZyb209ZSx0aGlzLnRvPW4sdGhpcy5tYXJrPXJ9cmV0dXJuIHQmJihlLl9fcHJvdG9fXz10KSxlLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKHQmJnQucHJvdG90eXBlKSxlLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1lLGUucHJvdG90eXBlLmFwcGx5PWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMsbj10LnNsaWNlKHRoaXMuZnJvbSx0aGlzLnRvKSxvPW5ldyByLlNsaWNlKEkobi5jb250ZW50LChmdW5jdGlvbih0KXtyZXR1cm4gdC5tYXJrKGUubWFyay5yZW1vdmVGcm9tU2V0KHQubWFya3MpKX0pKSxuLm9wZW5TdGFydCxuLm9wZW5FbmQpO3JldHVybiBnLmZyb21SZXBsYWNlKHQsdGhpcy5mcm9tLHRoaXMudG8sbyl9LGUucHJvdG90eXBlLmludmVydD1mdW5jdGlvbigpe3JldHVybiBuZXcgXyh0aGlzLmZyb20sdGhpcy50byx0aGlzLm1hcmspfSxlLnByb3RvdHlwZS5tYXA9ZnVuY3Rpb24odCl7dmFyIG49dC5tYXBSZXN1bHQodGhpcy5mcm9tLDEpLHI9dC5tYXBSZXN1bHQodGhpcy50bywtMSk7cmV0dXJuIG4uZGVsZXRlZCYmci5kZWxldGVkfHxuLnBvcz49ci5wb3M/bnVsbDpuZXcgZShuLnBvcyxyLnBvcyx0aGlzLm1hcmspfSxlLnByb3RvdHlwZS5tZXJnZT1mdW5jdGlvbih0KXtpZih0IGluc3RhbmNlb2YgZSYmdC5tYXJrLmVxKHRoaXMubWFyaykmJnRoaXMuZnJvbTw9dC50byYmdGhpcy50bz49dC5mcm9tKXJldHVybiBuZXcgZShNYXRoLm1pbih0aGlzLmZyb20sdC5mcm9tKSxNYXRoLm1heCh0aGlzLnRvLHQudG8pLHRoaXMubWFyayl9LGUucHJvdG90eXBlLnRvSlNPTj1mdW5jdGlvbigpe3JldHVybntzdGVwVHlwZToicmVtb3ZlTWFyayIsbWFyazp0aGlzLm1hcmsudG9KU09OKCksZnJvbTp0aGlzLmZyb20sdG86dGhpcy50b319LGUuZnJvbUpTT049ZnVuY3Rpb24odCxuKXtpZigibnVtYmVyIiE9dHlwZW9mIG4uZnJvbXx8Im51bWJlciIhPXR5cGVvZiBuLnRvKXRocm93IG5ldyBSYW5nZUVycm9yKCJJbnZhbGlkIGlucHV0IGZvciBSZW1vdmVNYXJrU3RlcC5mcm9tSlNPTiIpO3JldHVybiBuZXcgZShuLmZyb20sbi50byx0Lm1hcmtGcm9tSlNPTihuLm1hcmspKX0sZX0oeSk7ZnVuY3Rpb24gQih0LGUsbixvKXtpZih2b2lkIDA9PT1uJiYobj1lKSx2b2lkIDA9PT1vJiYobz1yLlNsaWNlLmVtcHR5KSxlPT1uJiYhby5zaXplKXJldHVybiBudWxsO3ZhciBpPXQucmVzb2x2ZShlKSxzPXQucmVzb2x2ZShuKTtpZihIKGkscyxvKSlyZXR1cm4gbmV3IHcoZSxuLG8pO3ZhciBhPUcoaSxvKSxjPSQoaSxhKSxsPVcoaSxzLGMpO2lmKCFsKXJldHVybiBudWxsO2lmKGMuc2l6ZSE9bC5zaXplJiZLKGkscyxjKSl7dmFyIHA9cy5kZXB0aCx1PXMuYWZ0ZXIocCk7d2hpbGUocD4xJiZ1PT1zLmVuZCgtLXApKSsrdTt2YXIgaD1XKGksdC5yZXNvbHZlKHUpLGMpO2lmKGgpcmV0dXJuIG5ldyB4KGUsdSxuLHMuZW5kKCksaCxjLnNpemUpfXJldHVybiBsLnNpemV8fGUhPW4/bmV3IHcoZSxuLGwpOm51bGx9ZnVuY3Rpb24gaih0LGUsbixvKXt2YXIgaT1yLkZyYWdtZW50LmVtcHR5LHM9MCxhPW5bZV07aWYodC5kZXB0aD5lKXt2YXIgYz1qKHQsZSsxLG4sb3x8YSk7cz1jLm9wZW5FbmQrMSxpPXIuRnJhZ21lbnQuZnJvbSh0Lm5vZGUoZSsxKS5jb3B5KGMuY29udGVudCkpfXJldHVybiBhJiYoaT1pLmFwcGVuZChhLmNvbnRlbnQpLHM9YS5vcGVuRW5kKSxvJiYoaT1pLmFwcGVuZCh0Lm5vZGUoZSkuY29udGVudE1hdGNoQXQodC5pbmRleEFmdGVyKGUpKS5maWxsQmVmb3JlKHIuRnJhZ21lbnQuZW1wdHksITApKSxzPTApLHtjb250ZW50Omksb3BlbkVuZDpzfX1mdW5jdGlvbiAkKHQsZSl7dmFyIG49aih0LDAsZSwhMSksbz1uLmNvbnRlbnQsaT1uLm9wZW5FbmQ7cmV0dXJuIG5ldyByLlNsaWNlKG8sdC5kZXB0aCxpfHwwKX1mdW5jdGlvbiBWKHQsZSxuLHIsbyxpLHMpe3ZhciBhLGM9dC5jaGlsZENvdW50LGw9Yy0ocz4wPzE6MCkscD1pPDA/ZTpuLm5vZGUobyk7YT1pPDA/cC5jb250ZW50TWF0Y2hBdChsKToxPT1jJiZzPjA/cC5jb250ZW50TWF0Y2hBdChpP24uaW5kZXgobyk6bi5pbmRleEFmdGVyKG8pKTpwLmNvbnRlbnRNYXRjaEF0KG4uaW5kZXhBZnRlcihvKSkubWF0Y2hGcmFnbWVudCh0LGM+MCYmaT8xOjAsbCk7dmFyIHU9ci5ub2RlKG8pO2lmKHM+MCYmbzxyLmRlcHRoKXt2YXIgaD11LmNvbnRlbnQuY3V0QnlJbmRleChyLmluZGV4QWZ0ZXIobykpLmFkZFRvU3RhcnQodC5sYXN0Q2hpbGQpLGY9YS5maWxsQmVmb3JlKGgsITApO2lmKGYmJmYuc2l6ZSYmaT4wJiYxPT1jJiYoZj1udWxsKSxmKXt2YXIgZD1WKHQubGFzdENoaWxkLmNvbnRlbnQsdC5sYXN0Q2hpbGQsbixyLG8rMSwxPT1jP2ktMTotMSxzLTEpO2lmKGQpe3ZhciB2PXQubGFzdENoaWxkLmNvcHkoZCk7cmV0dXJuIGYuc2l6ZT90LmN1dEJ5SW5kZXgoMCxjLTEpLmFwcGVuZChmKS5hZGRUb0VuZCh2KTp0LnJlcGxhY2VDaGlsZChjLTEsdil9fX1zPjAmJihhPWEubWF0Y2hUeXBlKCgxPT1jJiZpPjA/bi5ub2RlKG8rMSk6dC5sYXN0Q2hpbGQpLnR5cGUpKTt2YXIgbT1yLmluZGV4KG8pO2lmKG09PXUuY2hpbGRDb3VudCYmIXUudHlwZS5jb21wYXRpYmxlQ29udGVudChlLnR5cGUpKXJldHVybiBudWxsO2Zvcih2YXIgeT1hLmZpbGxCZWZvcmUodS5jb250ZW50LCEwLG0pLGc9bTt5JiZnPHUuY29udGVudC5jaGlsZENvdW50O2crKylwLnR5cGUuYWxsb3dzTWFya3ModS5jb250ZW50LmNoaWxkKGcpLm1hcmtzKXx8KHk9bnVsbCk7aWYoIXkpcmV0dXJuIG51bGw7aWYocz4wKXt2YXIgdz1MKHQubGFzdENoaWxkLHMtMSxuLG8rMSwxPT1jP2ktMTotMSk7dD10LnJlcGxhY2VDaGlsZChjLTEsdyl9cmV0dXJuIHQ9dC5hcHBlbmQoeSksci5kZXB0aD5vJiYodD10LmFkZFRvRW5kKEoocixvKzEpKSksdH1mdW5jdGlvbiBMKHQsZSxuLG8saSl7dmFyIHMsYT10LmNvbnRlbnQsYz1hLmNoaWxkQ291bnQ7aWYocz1pPj0wP24ubm9kZShvKS5jb250ZW50TWF0Y2hBdChuLmluZGV4QWZ0ZXIobykpLm1hdGNoRnJhZ21lbnQoYSxpPjA/MTowLGMpOnQuY29udGVudE1hdGNoQXQoYyksZT4wKXt2YXIgbD1MKGEubGFzdENoaWxkLGUtMSxuLG8rMSwxPT1jP2ktMTotMSk7YT1hLnJlcGxhY2VDaGlsZChjLTEsbCl9cmV0dXJuIHQuY29weShhLmFwcGVuZChzLmZpbGxCZWZvcmUoci5GcmFnbWVudC5lbXB0eSwhMCkpKX1mdW5jdGlvbiBKKHQsZSl7dmFyIG49dC5ub2RlKGUpLHI9bi5jb250ZW50TWF0Y2hBdCgwKS5maWxsQmVmb3JlKG4uY29udGVudCwhMCx0LmluZGV4KGUpKTtyZXR1cm4gdC5kZXB0aD5lJiYocj1yLmFkZFRvRW5kKEoodCxlKzEpKSksbi5jb3B5KHIpfWZ1bmN0aW9uIHEodCxlLG4pe3doaWxlKGU+MCYmbj4wJiYxPT10LmNoaWxkQ291bnQpdD10LmZpcnN0Q2hpbGQuY29udGVudCxlLS0sbi0tO3JldHVybiBuZXcgci5TbGljZSh0LGUsbil9ZnVuY3Rpb24gVyh0LGUsbil7dmFyIHI9VihuLmNvbnRlbnQsdC5ub2RlKDApLHQsZSwwLG4ub3BlblN0YXJ0LG4ub3BlbkVuZCk7cmV0dXJuIHI/cShyLG4ub3BlblN0YXJ0LGUuZGVwdGgpOm51bGx9ZnVuY3Rpb24gSCh0LGUsbil7cmV0dXJuIW4ub3BlblN0YXJ0JiYhbi5vcGVuRW5kJiZ0LnN0YXJ0KCk9PWUuc3RhcnQoKSYmdC5wYXJlbnQuY2FuUmVwbGFjZSh0LmluZGV4KCksZS5pbmRleCgpLG4uY29udGVudCl9ZnVuY3Rpb24gSyh0LGUsbil7aWYoIWUucGFyZW50LmlzVGV4dGJsb2NrKXJldHVybiExO3ZhciByLG89bi5vcGVuRW5kP1Uobi5jb250ZW50LG4ub3BlbkVuZCk6dC5ub2RlKHQuZGVwdGgtKG4ub3BlblN0YXJ0LW4ub3BlbkVuZCkpO2lmKCFvLmlzVGV4dGJsb2NrKXJldHVybiExO2Zvcih2YXIgaT1lLmluZGV4KCk7aTxlLnBhcmVudC5jaGlsZENvdW50O2krKylpZighby50eXBlLmFsbG93c01hcmtzKGUucGFyZW50LmNoaWxkKGkpLm1hcmtzKSlyZXR1cm4hMTtyZXR1cm4gbi5vcGVuRW5kP3I9by5jb250ZW50TWF0Y2hBdChvLmNoaWxkQ291bnQpOihyPW8uY29udGVudE1hdGNoQXQoby5jaGlsZENvdW50KSxuLnNpemUmJihyPXIubWF0Y2hGcmFnbWVudChuLmNvbnRlbnQsbi5vcGVuU3RhcnQ/MTowKSkpLHI9ci5tYXRjaEZyYWdtZW50KGUucGFyZW50LmNvbnRlbnQsZS5pbmRleCgpKSxyJiZyLnZhbGlkRW5kfWZ1bmN0aW9uIFUodCxlKXtmb3IodmFyIG49MTtuPGU7bisrKXQ9dC5sYXN0Q2hpbGQuY29udGVudDtyZXR1cm4gdC5sYXN0Q2hpbGR9ZnVuY3Rpb24gRyh0LGUpe2Zvcih2YXIgbj1uZXcgWCh0KSxyPTE7ZS5zaXplJiZyPD0zO3IrKyl7dmFyIG89bi5wbGFjZVNsaWNlKGUuY29udGVudCxlLm9wZW5TdGFydCxlLm9wZW5FbmQscik7Mz09ciYmbyE9ZSYmby5zaXplJiYocj0wKSxlPW99d2hpbGUobi5vcGVuLmxlbmd0aCluLmNsb3NlTm9kZSgpO3JldHVybiBuLnBsYWNlZH15Lmpzb25JRCgicmVtb3ZlTWFyayIsRiksZi5wcm90b3R5cGUuYWRkTWFyaz1mdW5jdGlvbih0LGUsbil7dmFyIHI9dGhpcyxvPVtdLGk9W10scz1udWxsLGE9bnVsbDtyZXR1cm4gdGhpcy5kb2Mubm9kZXNCZXR3ZWVuKHQsZSwoZnVuY3Rpb24ocixjLGwpe2lmKHIuaXNJbmxpbmUpe3ZhciBwPXIubWFya3M7aWYoIW4uaXNJblNldChwKSYmbC50eXBlLmFsbG93c01hcmtUeXBlKG4udHlwZSkpe2Zvcih2YXIgdT1NYXRoLm1heChjLHQpLGg9TWF0aC5taW4oYytyLm5vZGVTaXplLGUpLGY9bi5hZGRUb1NldChwKSxkPTA7ZDxwLmxlbmd0aDtkKyspcFtkXS5pc0luU2V0KGYpfHwocyYmcy50bz09dSYmcy5tYXJrLmVxKHBbZF0pP3MudG89aDpvLnB1c2gocz1uZXcgRih1LGgscFtkXSkpKTthJiZhLnRvPT11P2EudG89aDppLnB1c2goYT1uZXcgXyh1LGgsbikpfX19KSksby5mb3JFYWNoKChmdW5jdGlvbih0KXtyZXR1cm4gci5zdGVwKHQpfSkpLGkuZm9yRWFjaCgoZnVuY3Rpb24odCl7cmV0dXJuIHIuc3RlcCh0KX0pKSx0aGlzfSxmLnByb3RvdHlwZS5yZW1vdmVNYXJrPWZ1bmN0aW9uKHQsZSxuKXt2YXIgbz10aGlzO3ZvaWQgMD09PW4mJihuPW51bGwpO3ZhciBpPVtdLHM9MDtyZXR1cm4gdGhpcy5kb2Mubm9kZXNCZXR3ZWVuKHQsZSwoZnVuY3Rpb24obyxhKXtpZihvLmlzSW5saW5lKXtzKys7dmFyIGM9bnVsbDtpZihuIGluc3RhbmNlb2Ygci5NYXJrVHlwZSl7dmFyIGw9bi5pc0luU2V0KG8ubWFya3MpO2wmJihjPVtsXSl9ZWxzZSBuP24uaXNJblNldChvLm1hcmtzKSYmKGM9W25dKTpjPW8ubWFya3M7aWYoYyYmYy5sZW5ndGgpZm9yKHZhciBwPU1hdGgubWluKGErby5ub2RlU2l6ZSxlKSx1PTA7dTxjLmxlbmd0aDt1Kyspe2Zvcih2YXIgaD1jW3VdLGY9dm9pZCAwLGQ9MDtkPGkubGVuZ3RoO2QrKyl7dmFyIHY9aVtkXTt2LnN0ZXA9PXMtMSYmaC5lcShpW2RdLnN0eWxlKSYmKGY9dil9Zj8oZi50bz1wLGYuc3RlcD1zKTppLnB1c2goe3N0eWxlOmgsZnJvbTpNYXRoLm1heChhLHQpLHRvOnAsc3RlcDpzfSl9fX0pKSxpLmZvckVhY2goKGZ1bmN0aW9uKHQpe3JldHVybiBvLnN0ZXAobmV3IEYodC5mcm9tLHQudG8sdC5zdHlsZSkpfSkpLHRoaXN9LGYucHJvdG90eXBlLmNsZWFySW5jb21wYXRpYmxlPWZ1bmN0aW9uKHQsZSxuKXt2YXIgbz10aGlzO3ZvaWQgMD09PW4mJihuPWUuY29udGVudE1hdGNoKTtmb3IodmFyIGk9dGhpcy5kb2Mubm9kZUF0KHQpLHM9W10sYT10KzEsYz0wO2M8aS5jaGlsZENvdW50O2MrKyl7dmFyIGw9aS5jaGlsZChjKSxwPWErbC5ub2RlU2l6ZSx1PW4ubWF0Y2hUeXBlKGwudHlwZSxsLmF0dHJzKTtpZih1KXtuPXU7Zm9yKHZhciBoPTA7aDxsLm1hcmtzLmxlbmd0aDtoKyspZS5hbGxvd3NNYXJrVHlwZShsLm1hcmtzW2hdLnR5cGUpfHxvLnN0ZXAobmV3IEYoYSxwLGwubWFya3NbaF0pKX1lbHNlIHMucHVzaChuZXcgdyhhLHAsci5TbGljZS5lbXB0eSkpO2E9cH1pZighbi52YWxpZEVuZCl7dmFyIGY9bi5maWxsQmVmb3JlKHIuRnJhZ21lbnQuZW1wdHksITApO3RoaXMucmVwbGFjZShhLGEsbmV3IHIuU2xpY2UoZiwwLDApKX1mb3IodmFyIGQ9cy5sZW5ndGgtMTtkPj0wO2QtLSlvLnN0ZXAoc1tkXSk7cmV0dXJuIHRoaXN9LGYucHJvdG90eXBlLnJlcGxhY2U9ZnVuY3Rpb24odCxlLG4pe3ZvaWQgMD09PWUmJihlPXQpLHZvaWQgMD09PW4mJihuPXIuU2xpY2UuZW1wdHkpO3ZhciBvPUIodGhpcy5kb2MsdCxlLG4pO3JldHVybiBvJiZ0aGlzLnN0ZXAobyksdGhpc30sZi5wcm90b3R5cGUucmVwbGFjZVdpdGg9ZnVuY3Rpb24odCxlLG4pe3JldHVybiB0aGlzLnJlcGxhY2UodCxlLG5ldyByLlNsaWNlKHIuRnJhZ21lbnQuZnJvbShuKSwwLDApKX0sZi5wcm90b3R5cGUuZGVsZXRlPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIHRoaXMucmVwbGFjZSh0LGUsci5TbGljZS5lbXB0eSl9LGYucHJvdG90eXBlLmluc2VydD1mdW5jdGlvbih0LGUpe3JldHVybiB0aGlzLnJlcGxhY2VXaXRoKHQsdCxlKX07dmFyIFg9ZnVuY3Rpb24odCl7dmFyIGU9dGhpczt0aGlzLm9wZW49W107Zm9yKHZhciBuPTA7bjw9dC5kZXB0aDtuKyspe3ZhciBvPXQubm9kZShuKSxpPW8uY29udGVudE1hdGNoQXQodC5pbmRleEFmdGVyKG4pKTtlLm9wZW4ucHVzaCh7cGFyZW50Om8sbWF0Y2g6aSxjb250ZW50OnIuRnJhZ21lbnQuZW1wdHksd3JhcHBlcjohMSxvcGVuRW5kOjAsZGVwdGg6bn0pfXRoaXMucGxhY2VkPVtdfTtmdW5jdGlvbiBZKHQsZSxuKXt2YXIgcj10LmNvbnRlbnQ7aWYoZT4xKXt2YXIgbz1ZKHQuZmlyc3RDaGlsZCxlLTEsMT09dC5jaGlsZENvdW50P24tMTowKTtyPXQuY29udGVudC5yZXBsYWNlQ2hpbGQoMCxvKX12YXIgaT10LnR5cGUuY29udGVudE1hdGNoLmZpbGxCZWZvcmUociwwPT1uKTtyZXR1cm4gdC5jb3B5KGkuYXBwZW5kKHIpKX1mdW5jdGlvbiBRKHQsZSl7dmFyIG49dC5jb250ZW50O2lmKGU+MSl7dmFyIG89USh0Lmxhc3RDaGlsZCxlLTEpO249dC5jb250ZW50LnJlcGxhY2VDaGlsZCh0LmNoaWxkQ291bnQtMSxvKX12YXIgaT10LmNvbnRlbnRNYXRjaEF0KHQuY2hpbGRDb3VudCkuZmlsbEJlZm9yZShyLkZyYWdtZW50LmVtcHR5LCEwKTtyZXR1cm4gdC5jb3B5KG4uYXBwZW5kKGkpKX1mdW5jdGlvbiBaKHQsZSl7cmV0dXJuIGU/dC5yZXBsYWNlQ2hpbGQodC5jaGlsZENvdW50LTEsUSh0Lmxhc3RDaGlsZCxlKSk6dH1mdW5jdGlvbiB0dCh0LGUsbixyLG8pe2lmKGU8bil7dmFyIGk9dC5maXJzdENoaWxkO3Q9dC5yZXBsYWNlQ2hpbGQoMCxpLmNvcHkodHQoaS5jb250ZW50LGUrMSxuLHIsaSkpKX1yZXR1cm4gZT5yJiYodD1vLmNvbnRlbnRNYXRjaEF0KDApLmZpbGxCZWZvcmUodCwhMCkuYXBwZW5kKHQpKSx0fWZ1bmN0aW9uIGV0KHQsZSl7Zm9yKHZhciBuPVtdLHI9TWF0aC5taW4odC5kZXB0aCxlLmRlcHRoKSxvPXI7bz49MDtvLS0pe3ZhciBpPXQuc3RhcnQobyk7aWYoaTx0LnBvcy0odC5kZXB0aC1vKXx8ZS5lbmQobyk+ZS5wb3MrKGUuZGVwdGgtbyl8fHQubm9kZShvKS50eXBlLnNwZWMuaXNvbGF0aW5nfHxlLm5vZGUobykudHlwZS5zcGVjLmlzb2xhdGluZylicmVhaztpPT1lLnN0YXJ0KG8pJiZuLnB1c2gobyl9cmV0dXJuIG59WC5wcm90b3R5cGUucGxhY2VTbGljZT1mdW5jdGlvbih0LGUsbixvLGkpe2lmKGU+MCl7dmFyIHM9dC5maXJzdENoaWxkLGE9dGhpcy5wbGFjZVNsaWNlKHMuY29udGVudCxNYXRoLm1heCgwLGUtMSksbiYmMT09dC5jaGlsZENvdW50P24tMTowLG8scyk7YS5jb250ZW50IT1zLmNvbnRlbnQmJihhLmNvbnRlbnQuc2l6ZT8odD10LnJlcGxhY2VDaGlsZCgwLHMuY29weShhLmNvbnRlbnQpKSxlPWEub3BlblN0YXJ0KzEpOigxPT10LmNoaWxkQ291bnQmJihuPTApLHQ9dC5jdXRCeUluZGV4KDEpLGU9MCkpfXZhciBjPXRoaXMucGxhY2VDb250ZW50KHQsZSxuLG8saSk7aWYobz4yJiZjLnNpemUmJjA9PWUpe3ZhciBsPWMuY29udGVudC5maXJzdENoaWxkLHA9MT09Yy5jb250ZW50LmNoaWxkQ291bnQ7dGhpcy5wbGFjZUNvbnRlbnQobC5jb250ZW50LDAsbiYmcD9uLTE6MCxvLGwpLGM9cD9yLkZyYWdtZW50LmVtcHR5Om5ldyByLlNsaWNlKGMuY29udGVudC5jdXRCeUluZGV4KDEpLDAsbil9cmV0dXJuIGN9LFgucHJvdG90eXBlLnBsYWNlQ29udGVudD1mdW5jdGlvbih0LGUsbixvLGkpe2Zvcih2YXIgcz10aGlzLGE9MDthPHQuY2hpbGRDb3VudDthKyspe2Zvcih2YXIgYz10LmNoaWxkKGEpLGw9ITEscD1hPT10LmNoaWxkQ291bnQtMSx1PXRoaXMub3Blbi5sZW5ndGgtMTt1Pj0wO3UtLSl7dmFyIGg9cy5vcGVuW3VdLGY9dm9pZCAwO2lmKG8+MSYmKGY9aC5tYXRjaC5maW5kV3JhcHBpbmcoYy50eXBlKSkmJighaXx8IWYubGVuZ3RofHxmW2YubGVuZ3RoLTFdIT1pLnR5cGUpKXt3aGlsZSh0aGlzLm9wZW4ubGVuZ3RoLTE+dSlzLmNsb3NlTm9kZSgpO2Zvcih2YXIgZD0wO2Q8Zi5sZW5ndGg7ZCsrKWgubWF0Y2g9aC5tYXRjaC5tYXRjaFR5cGUoZltkXSksdSsrLGg9e3BhcmVudDpmW2RdLmNyZWF0ZSgpLG1hdGNoOmZbZF0uY29udGVudE1hdGNoLGNvbnRlbnQ6ci5GcmFnbWVudC5lbXB0eSx3cmFwcGVyOiEwLG9wZW5FbmQ6MCxkZXB0aDp1K2R9LHMub3Blbi5wdXNoKGgpfXZhciB2PWgubWF0Y2gubWF0Y2hUeXBlKGMudHlwZSk7aWYoIXYpe3ZhciBtPWgubWF0Y2guZmlsbEJlZm9yZShyLkZyYWdtZW50LmZyb20oYykpO2lmKCFtKXtpZihpJiZoLm1hdGNoLm1hdGNoVHlwZShpLnR5cGUpKWJyZWFrO2NvbnRpbnVlfWZvcih2YXIgeT0wO3k8bS5jaGlsZENvdW50O3krKyl7dmFyIGc9bS5jaGlsZCh5KTtzLmFkZE5vZGUoaCxnLDApLHY9aC5tYXRjaC5tYXRjaEZyYWdtZW50KGcpfX13aGlsZSh0aGlzLm9wZW4ubGVuZ3RoLTE+dSlzLmNsb3NlTm9kZSgpO2M9Yy5tYXJrKGgucGFyZW50LnR5cGUuYWxsb3dlZE1hcmtzKGMubWFya3MpKSxlJiYoYz1ZKGMsZSxwP246MCksZT0wKSxzLmFkZE5vZGUoaCxjLHA/bjowKSxoLm1hdGNoPXYscCYmKG49MCksbD0hMDticmVha31pZighbClicmVha31yZXR1cm4gdGhpcy5vcGVuLmxlbmd0aD4xJiYoYT4wJiZhPT10LmNoaWxkQ291bnR8fGkmJnRoaXMub3Blblt0aGlzLm9wZW4ubGVuZ3RoLTFdLnBhcmVudC50eXBlPT1pLnR5cGUpJiZ0aGlzLmNsb3NlTm9kZSgpLG5ldyByLlNsaWNlKHQuY3V0QnlJbmRleChhKSxlLG4pfSxYLnByb3RvdHlwZS5hZGROb2RlPWZ1bmN0aW9uKHQsZSxuKXt0LmNvbnRlbnQ9Wih0LmNvbnRlbnQsdC5vcGVuRW5kKS5hZGRUb0VuZChlKSx0Lm9wZW5FbmQ9bn0sWC5wcm90b3R5cGUuY2xvc2VOb2RlPWZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5vcGVuLnBvcCgpOzA9PXQuY29udGVudC5zaXplfHwodC53cmFwcGVyP3RoaXMuYWRkTm9kZSh0aGlzLm9wZW5bdGhpcy5vcGVuLmxlbmd0aC0xXSx0LnBhcmVudC5jb3B5KHQuY29udGVudCksdC5vcGVuRW5kKzEpOnRoaXMucGxhY2VkW3QuZGVwdGhdPXtkZXB0aDp0LmRlcHRoLGNvbnRlbnQ6dC5jb250ZW50LG9wZW5FbmQ6dC5vcGVuRW5kfSl9LGYucHJvdG90eXBlLnJlcGxhY2VSYW5nZT1mdW5jdGlvbih0LGUsbil7dmFyIG89dGhpcztpZighbi5zaXplKXJldHVybiB0aGlzLmRlbGV0ZVJhbmdlKHQsZSk7dmFyIGk9dGhpcy5kb2MucmVzb2x2ZSh0KSxzPXRoaXMuZG9jLnJlc29sdmUoZSk7aWYoSChpLHMsbikpcmV0dXJuIHRoaXMuc3RlcChuZXcgdyh0LGUsbikpO3ZhciBhPWV0KGksdGhpcy5kb2MucmVzb2x2ZShlKSk7MD09YVthLmxlbmd0aC0xXSYmYS5wb3AoKTt2YXIgYz0tKGkuZGVwdGgrMSk7YS51bnNoaWZ0KGMpO2Zvcih2YXIgbD1pLmRlcHRoLHA9aS5wb3MtMTtsPjA7bC0tLHAtLSl7dmFyIHU9aS5ub2RlKGwpLnR5cGUuc3BlYztpZih1LmRlZmluaW5nfHx1Lmlzb2xhdGluZylicmVhazthLmluZGV4T2YobCk+LTE/Yz1sOmkuYmVmb3JlKGwpPT1wJiZhLnNwbGljZSgxLDAsLWwpfWZvcih2YXIgaD1hLmluZGV4T2YoYyksZj1bXSxkPW4ub3BlblN0YXJ0LHY9bi5jb250ZW50LG09MDs7bSsrKXt2YXIgeT12LmZpcnN0Q2hpbGQ7aWYoZi5wdXNoKHkpLG09PW4ub3BlblN0YXJ0KWJyZWFrO3Y9eS5jb250ZW50fWQ+MCYmZltkLTFdLnR5cGUuc3BlYy5kZWZpbmluZyYmaS5ub2RlKGgpLnR5cGUhPWZbZC0xXS50eXBlP2QtPTE6ZD49MiYmZltkLTFdLmlzVGV4dGJsb2NrJiZmW2QtMl0udHlwZS5zcGVjLmRlZmluaW5nJiZpLm5vZGUoaCkudHlwZSE9ZltkLTJdLnR5cGUmJihkLT0yKTtmb3IodmFyIGc9bi5vcGVuU3RhcnQ7Zz49MDtnLS0pe3ZhciB4PShnK2QrMSklKG4ub3BlblN0YXJ0KzEpLGI9Zlt4XTtpZihiKWZvcih2YXIgaz0wO2s8YS5sZW5ndGg7aysrKXt2YXIgUz1hWyhrK2gpJWEubGVuZ3RoXSxDPSEwO1M8MCYmKEM9ITEsUz0tUyk7dmFyIE89aS5ub2RlKFMtMSksTT1pLmluZGV4KFMtMSk7aWYoTy5jYW5SZXBsYWNlV2l0aChNLE0sYi50eXBlLGIubWFya3MpKXJldHVybiBvLnJlcGxhY2UoaS5iZWZvcmUoUyksQz9zLmFmdGVyKFMpOmUsbmV3IHIuU2xpY2UodHQobi5jb250ZW50LDAsbi5vcGVuU3RhcnQseCkseCxuLm9wZW5FbmQpKX19Zm9yKHZhciBUPXRoaXMuc3RlcHMubGVuZ3RoLE49YS5sZW5ndGgtMTtOPj0wO04tLSl7aWYoby5yZXBsYWNlKHQsZSxuKSxvLnN0ZXBzLmxlbmd0aD5UKWJyZWFrO3ZhciBFPWFbTl07TjwwfHwodD1pLmJlZm9yZShFKSxlPXMuYWZ0ZXIoRSkpfXJldHVybiB0aGlzfSxmLnByb3RvdHlwZS5yZXBsYWNlUmFuZ2VXaXRoPWZ1bmN0aW9uKHQsZSxuKXtpZighbi5pc0lubGluZSYmdD09ZSYmdGhpcy5kb2MucmVzb2x2ZSh0KS5wYXJlbnQuY29udGVudC5zaXplKXt2YXIgbz16KHRoaXMuZG9jLHQsbi50eXBlKTtudWxsIT1vJiYodD1lPW8pfXJldHVybiB0aGlzLnJlcGxhY2VSYW5nZSh0LGUsbmV3IHIuU2xpY2Uoci5GcmFnbWVudC5mcm9tKG4pLDAsMCkpfSxmLnByb3RvdHlwZS5kZWxldGVSYW5nZT1mdW5jdGlvbih0LGUpe2Zvcih2YXIgbj10aGlzLHI9dGhpcy5kb2MucmVzb2x2ZSh0KSxvPXRoaXMuZG9jLnJlc29sdmUoZSksaT1ldChyLG8pLHM9MDtzPGkubGVuZ3RoO3MrKyl7dmFyIGE9aVtzXSxjPXM9PWkubGVuZ3RoLTE7aWYoYyYmMD09YXx8ci5ub2RlKGEpLnR5cGUuY29udGVudE1hdGNoLnZhbGlkRW5kKXJldHVybiBuLmRlbGV0ZShyLnN0YXJ0KGEpLG8uZW5kKGEpKTtpZihhPjAmJihjfHxyLm5vZGUoYS0xKS5jYW5SZXBsYWNlKHIuaW5kZXgoYS0xKSxvLmluZGV4QWZ0ZXIoYS0xKSkpKXJldHVybiBuLmRlbGV0ZShyLmJlZm9yZShhKSxvLmFmdGVyKGEpKX1mb3IodmFyIGw9MTtsPD1yLmRlcHRoO2wrKylpZih0LXIuc3RhcnQobCk9PXIuZGVwdGgtbCYmZT5yLmVuZChsKSlyZXR1cm4gbi5kZWxldGUoci5iZWZvcmUobCksZSk7cmV0dXJuIHRoaXMuZGVsZXRlKHQsZSl9LGUuVHJhbnNmb3JtPWYsZS5UcmFuc2Zvcm1FcnJvcj1oLGUuU3RlcD15LGUuU3RlcFJlc3VsdD1nLGUuam9pblBvaW50PUQsZS5jYW5Kb2luPUEsZS5jYW5TcGxpdD1FLGUuaW5zZXJ0UG9pbnQ9eixlLmRyb3BQb2ludD1QLGUubGlmdFRhcmdldD1TLGUuZmluZFdyYXBwaW5nPUMsZS5TdGVwTWFwPXAsZS5NYXBSZXN1bHQ9bCxlLk1hcHBpbmc9dSxlLkFkZE1hcmtTdGVwPV8sZS5SZW1vdmVNYXJrU3RlcD1GLGUuUmVwbGFjZVN0ZXA9dyxlLlJlcGxhY2VBcm91bmRTdGVwPXgsZS5yZXBsYWNlU3RlcD1CfSwiMzVlOCI6ZnVuY3Rpb24odCxlLG4pe3ZhciByPW4oImQ5ZjYiKSxvPW4oImFlYmQiKTt0LmV4cG9ydHM9bigiOGU2MCIpP2Z1bmN0aW9uKHQsZSxuKXtyZXR1cm4gci5mKHQsZSxvKDEsbikpfTpmdW5jdGlvbih0LGUsbil7cmV0dXJuIHRbZV09bix0fX0sIjM2YzMiOmZ1bmN0aW9uKHQsZSxuKXt2YXIgcj1uKCIzMzVjIiksbz1uKCIyNWViIik7dC5leHBvcnRzPWZ1bmN0aW9uKHQpe3JldHVybiByKG8odCkpfX0sIjM2ZDAiOmZ1bmN0aW9uKHQsZSxuKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gcih0KXtyZXR1cm4gdCYmIm9iamVjdCI9PT10eXBlb2YgdCYmImRlZmF1bHQiaW4gdD90WyJkZWZhdWx0Il06dH1PYmplY3QuZGVmaW5lUHJvcGVydHkoZSwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSk7dmFyIG89cihuKCJmYWExIikpO2Z1bmN0aW9uIGkodCxlLG4pe2Zvcih2YXIgcj0wOztyKyspe2lmKHI9PXQuY2hpbGRDb3VudHx8cj09ZS5jaGlsZENvdW50KXJldHVybiB0LmNoaWxkQ291bnQ9PWUuY2hpbGRDb3VudD9udWxsOm47dmFyIG89dC5jaGlsZChyKSxzPWUuY2hpbGQocik7aWYobyE9cyl7aWYoIW8uc2FtZU1hcmt1cChzKSlyZXR1cm4gbjtpZihvLmlzVGV4dCYmby50ZXh0IT1zLnRleHQpe2Zvcih2YXIgYT0wO28udGV4dFthXT09cy50ZXh0W2FdO2ErKyluKys7cmV0dXJuIG59aWYoby5jb250ZW50LnNpemV8fHMuY29udGVudC5zaXplKXt2YXIgYz1pKG8uY29udGVudCxzLmNvbnRlbnQsbisxKTtpZihudWxsIT1jKXJldHVybiBjfW4rPW8ubm9kZVNpemV9ZWxzZSBuKz1vLm5vZGVTaXplfX1mdW5jdGlvbiBzKHQsZSxuLHIpe2Zvcih2YXIgbz10LmNoaWxkQ291bnQsaT1lLmNoaWxkQ291bnQ7Oyl7aWYoMD09b3x8MD09aSlyZXR1cm4gbz09aT9udWxsOnthOm4sYjpyfTt2YXIgYT10LmNoaWxkKC0tbyksYz1lLmNoaWxkKC0taSksbD1hLm5vZGVTaXplO2lmKGEhPWMpe2lmKCFhLnNhbWVNYXJrdXAoYykpcmV0dXJue2E6bixiOnJ9O2lmKGEuaXNUZXh0JiZhLnRleHQhPWMudGV4dCl7dmFyIHA9MCx1PU1hdGgubWluKGEudGV4dC5sZW5ndGgsYy50ZXh0Lmxlbmd0aCk7d2hpbGUocDx1JiZhLnRleHRbYS50ZXh0Lmxlbmd0aC1wLTFdPT1jLnRleHRbYy50ZXh0Lmxlbmd0aC1wLTFdKXArKyxuLS0sci0tO3JldHVybnthOm4sYjpyfX1pZihhLmNvbnRlbnQuc2l6ZXx8Yy5jb250ZW50LnNpemUpe3ZhciBoPXMoYS5jb250ZW50LGMuY29udGVudCxuLTEsci0xKTtpZihoKXJldHVybiBofW4tPWwsci09bH1lbHNlIG4tPWwsci09bH19dmFyIGE9ZnVuY3Rpb24odCxlKXt2YXIgbj10aGlzO2lmKHRoaXMuY29udGVudD10LHRoaXMuc2l6ZT1lfHwwLG51bGw9PWUpZm9yKHZhciByPTA7cjx0Lmxlbmd0aDtyKyspbi5zaXplKz10W3JdLm5vZGVTaXplfSxjPXtmaXJzdENoaWxkOnt9LGxhc3RDaGlsZDp7fSxjaGlsZENvdW50Ont9fTthLnByb3RvdHlwZS5ub2Rlc0JldHdlZW49ZnVuY3Rpb24odCxlLG4scixvKXt2YXIgaT10aGlzO3ZvaWQgMD09PXImJihyPTApO2Zvcih2YXIgcz0wLGE9MDthPGU7cysrKXt2YXIgYz1pLmNvbnRlbnRbc10sbD1hK2Mubm9kZVNpemU7aWYobD50JiYhMSE9PW4oYyxyK2EsbyxzKSYmYy5jb250ZW50LnNpemUpe3ZhciBwPWErMTtjLm5vZGVzQmV0d2VlbihNYXRoLm1heCgwLHQtcCksTWF0aC5taW4oYy5jb250ZW50LnNpemUsZS1wKSxuLHIrcCl9YT1sfX0sYS5wcm90b3R5cGUuZGVzY2VuZGFudHM9ZnVuY3Rpb24odCl7dGhpcy5ub2Rlc0JldHdlZW4oMCx0aGlzLnNpemUsdCl9LGEucHJvdG90eXBlLnRleHRCZXR3ZWVuPWZ1bmN0aW9uKHQsZSxuLHIpe3ZhciBvPSIiLGk9ITA7cmV0dXJuIHRoaXMubm9kZXNCZXR3ZWVuKHQsZSwoZnVuY3Rpb24ocyxhKXtzLmlzVGV4dD8obys9cy50ZXh0LnNsaWNlKE1hdGgubWF4KHQsYSktYSxlLWEpLGk9IW4pOnMuaXNMZWFmJiZyPyhvKz1yLGk9IW4pOiFpJiZzLmlzQmxvY2smJihvKz1uLGk9ITApfSksMCksb30sYS5wcm90b3R5cGUuYXBwZW5kPWZ1bmN0aW9uKHQpe2lmKCF0LnNpemUpcmV0dXJuIHRoaXM7aWYoIXRoaXMuc2l6ZSlyZXR1cm4gdDt2YXIgZT10aGlzLmxhc3RDaGlsZCxuPXQuZmlyc3RDaGlsZCxyPXRoaXMuY29udGVudC5zbGljZSgpLG89MDtmb3IoZS5pc1RleHQmJmUuc2FtZU1hcmt1cChuKSYmKHJbci5sZW5ndGgtMV09ZS53aXRoVGV4dChlLnRleHQrbi50ZXh0KSxvPTEpO288dC5jb250ZW50Lmxlbmd0aDtvKyspci5wdXNoKHQuY29udGVudFtvXSk7cmV0dXJuIG5ldyBhKHIsdGhpcy5zaXplK3Quc2l6ZSl9LGEucHJvdG90eXBlLmN1dD1mdW5jdGlvbih0LGUpe3ZhciBuPXRoaXM7aWYobnVsbD09ZSYmKGU9dGhpcy5zaXplKSwwPT10JiZlPT10aGlzLnNpemUpcmV0dXJuIHRoaXM7dmFyIHI9W10sbz0wO2lmKGU+dClmb3IodmFyIGk9MCxzPTA7czxlO2krKyl7dmFyIGM9bi5jb250ZW50W2ldLGw9cytjLm5vZGVTaXplO2w+dCYmKChzPHR8fGw+ZSkmJihjPWMuaXNUZXh0P2MuY3V0KE1hdGgubWF4KDAsdC1zKSxNYXRoLm1pbihjLnRleHQubGVuZ3RoLGUtcykpOmMuY3V0KE1hdGgubWF4KDAsdC1zLTEpLE1hdGgubWluKGMuY29udGVudC5zaXplLGUtcy0xKSkpLHIucHVzaChjKSxvKz1jLm5vZGVTaXplKSxzPWx9cmV0dXJuIG5ldyBhKHIsbyl9LGEucHJvdG90eXBlLmN1dEJ5SW5kZXg9ZnVuY3Rpb24odCxlKXtyZXR1cm4gdD09ZT9hLmVtcHR5OjA9PXQmJmU9PXRoaXMuY29udGVudC5sZW5ndGg/dGhpczpuZXcgYSh0aGlzLmNvbnRlbnQuc2xpY2UodCxlKSl9LGEucHJvdG90eXBlLnJlcGxhY2VDaGlsZD1mdW5jdGlvbih0LGUpe3ZhciBuPXRoaXMuY29udGVudFt0XTtpZihuPT1lKXJldHVybiB0aGlzO3ZhciByPXRoaXMuY29udGVudC5zbGljZSgpLG89dGhpcy5zaXplK2Uubm9kZVNpemUtbi5ub2RlU2l6ZTtyZXR1cm4gclt0XT1lLG5ldyBhKHIsbyl9LGEucHJvdG90eXBlLmFkZFRvU3RhcnQ9ZnVuY3Rpb24odCl7cmV0dXJuIG5ldyBhKFt0XS5jb25jYXQodGhpcy5jb250ZW50KSx0aGlzLnNpemUrdC5ub2RlU2l6ZSl9LGEucHJvdG90eXBlLmFkZFRvRW5kPWZ1bmN0aW9uKHQpe3JldHVybiBuZXcgYSh0aGlzLmNvbnRlbnQuY29uY2F0KHQpLHRoaXMuc2l6ZSt0Lm5vZGVTaXplKX0sYS5wcm90b3R5cGUuZXE9ZnVuY3Rpb24odCl7dmFyIGU9dGhpcztpZih0aGlzLmNvbnRlbnQubGVuZ3RoIT10LmNvbnRlbnQubGVuZ3RoKXJldHVybiExO2Zvcih2YXIgbj0wO248dGhpcy5jb250ZW50Lmxlbmd0aDtuKyspaWYoIWUuY29udGVudFtuXS5lcSh0LmNvbnRlbnRbbl0pKXJldHVybiExO3JldHVybiEwfSxjLmZpcnN0Q2hpbGQuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY29udGVudC5sZW5ndGg/dGhpcy5jb250ZW50WzBdOm51bGx9LGMubGFzdENoaWxkLmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLmNvbnRlbnQubGVuZ3RoP3RoaXMuY29udGVudFt0aGlzLmNvbnRlbnQubGVuZ3RoLTFdOm51bGx9LGMuY2hpbGRDb3VudC5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jb250ZW50Lmxlbmd0aH0sYS5wcm90b3R5cGUuY2hpbGQ9ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5jb250ZW50W3RdO2lmKCFlKXRocm93IG5ldyBSYW5nZUVycm9yKCJJbmRleCAiK3QrIiBvdXQgb2YgcmFuZ2UgZm9yICIrdGhpcyk7cmV0dXJuIGV9LGEucHJvdG90eXBlLm1heWJlQ2hpbGQ9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuY29udGVudFt0XX0sYS5wcm90b3R5cGUuZm9yRWFjaD1mdW5jdGlvbih0KXtmb3IodmFyIGU9dGhpcyxuPTAscj0wO248dGhpcy5jb250ZW50Lmxlbmd0aDtuKyspe3ZhciBvPWUuY29udGVudFtuXTt0KG8scixuKSxyKz1vLm5vZGVTaXplfX0sYS5wcm90b3R5cGUuZmluZERpZmZTdGFydD1mdW5jdGlvbih0LGUpe3JldHVybiB2b2lkIDA9PT1lJiYoZT0wKSxpKHRoaXMsdCxlKX0sYS5wcm90b3R5cGUuZmluZERpZmZFbmQ9ZnVuY3Rpb24odCxlLG4pe3JldHVybiB2b2lkIDA9PT1lJiYoZT10aGlzLnNpemUpLHZvaWQgMD09PW4mJihuPXQuc2l6ZSkscyh0aGlzLHQsZSxuKX0sYS5wcm90b3R5cGUuZmluZEluZGV4PWZ1bmN0aW9uKHQsZSl7dmFyIG49dGhpcztpZih2b2lkIDA9PT1lJiYoZT0tMSksMD09dClyZXR1cm4gcCgwLHQpO2lmKHQ9PXRoaXMuc2l6ZSlyZXR1cm4gcCh0aGlzLmNvbnRlbnQubGVuZ3RoLHQpO2lmKHQ+dGhpcy5zaXplfHx0PDApdGhyb3cgbmV3IFJhbmdlRXJyb3IoIlBvc2l0aW9uICIrdCsiIG91dHNpZGUgb2YgZnJhZ21lbnQgKCIrdGhpcysiKSIpO2Zvcih2YXIgcj0wLG89MDs7cisrKXt2YXIgaT1uLmNoaWxkKHIpLHM9bytpLm5vZGVTaXplO2lmKHM+PXQpcmV0dXJuIHM9PXR8fGU+MD9wKHIrMSxzKTpwKHIsbyk7bz1zfX0sYS5wcm90b3R5cGUudG9TdHJpbmc9ZnVuY3Rpb24oKXtyZXR1cm4iPCIrdGhpcy50b1N0cmluZ0lubmVyKCkrIj4ifSxhLnByb3RvdHlwZS50b1N0cmluZ0lubmVyPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY29udGVudC5qb2luKCIsICIpfSxhLnByb3RvdHlwZS50b0pTT049ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jb250ZW50Lmxlbmd0aD90aGlzLmNvbnRlbnQubWFwKChmdW5jdGlvbih0KXtyZXR1cm4gdC50b0pTT04oKX0pKTpudWxsfSxhLmZyb21KU09OPWZ1bmN0aW9uKHQsZSl7aWYoIWUpcmV0dXJuIGEuZW1wdHk7aWYoIUFycmF5LmlzQXJyYXkoZSkpdGhyb3cgbmV3IFJhbmdlRXJyb3IoIkludmFsaWQgaW5wdXQgZm9yIEZyYWdtZW50LmZyb21KU09OIik7cmV0dXJuIG5ldyBhKGUubWFwKHQubm9kZUZyb21KU09OKSl9LGEuZnJvbUFycmF5PWZ1bmN0aW9uKHQpe2lmKCF0Lmxlbmd0aClyZXR1cm4gYS5lbXB0eTtmb3IodmFyIGUsbj0wLHI9MDtyPHQubGVuZ3RoO3IrKyl7dmFyIG89dFtyXTtuKz1vLm5vZGVTaXplLHImJm8uaXNUZXh0JiZ0W3ItMV0uc2FtZU1hcmt1cChvKT8oZXx8KGU9dC5zbGljZSgwLHIpKSxlW2UubGVuZ3RoLTFdPW8ud2l0aFRleHQoZVtlLmxlbmd0aC0xXS50ZXh0K28udGV4dCkpOmUmJmUucHVzaChvKX1yZXR1cm4gbmV3IGEoZXx8dCxuKX0sYS5mcm9tPWZ1bmN0aW9uKHQpe2lmKCF0KXJldHVybiBhLmVtcHR5O2lmKHQgaW5zdGFuY2VvZiBhKXJldHVybiB0O2lmKEFycmF5LmlzQXJyYXkodCkpcmV0dXJuIHRoaXMuZnJvbUFycmF5KHQpO2lmKHQuYXR0cnMpcmV0dXJuIG5ldyBhKFt0XSx0Lm5vZGVTaXplKTt0aHJvdyBuZXcgUmFuZ2VFcnJvcigiQ2FuIG5vdCBjb252ZXJ0ICIrdCsiIHRvIGEgRnJhZ21lbnQiKyh0Lm5vZGVzQmV0d2Vlbj8iIChsb29rcyBsaWtlIG11bHRpcGxlIHZlcnNpb25zIG9mIHByb3NlbWlycm9yLW1vZGVsIHdlcmUgbG9hZGVkKSI6IiIpKX0sT2JqZWN0LmRlZmluZVByb3BlcnRpZXMoYS5wcm90b3R5cGUsYyk7dmFyIGw9e2luZGV4OjAsb2Zmc2V0OjB9O2Z1bmN0aW9uIHAodCxlKXtyZXR1cm4gbC5pbmRleD10LGwub2Zmc2V0PWUsbH1mdW5jdGlvbiB1KHQsZSl7aWYodD09PWUpcmV0dXJuITA7aWYoIXR8fCJvYmplY3QiIT10eXBlb2YgdHx8IWV8fCJvYmplY3QiIT10eXBlb2YgZSlyZXR1cm4hMTt2YXIgbj1BcnJheS5pc0FycmF5KHQpO2lmKEFycmF5LmlzQXJyYXkoZSkhPW4pcmV0dXJuITE7aWYobil7aWYodC5sZW5ndGghPWUubGVuZ3RoKXJldHVybiExO2Zvcih2YXIgcj0wO3I8dC5sZW5ndGg7cisrKWlmKCF1KHRbcl0sZVtyXSkpcmV0dXJuITF9ZWxzZXtmb3IodmFyIG8gaW4gdClpZighKG8gaW4gZSl8fCF1KHRbb10sZVtvXSkpcmV0dXJuITE7Zm9yKHZhciBpIGluIGUpaWYoIShpIGluIHQpKXJldHVybiExfXJldHVybiEwfWEuZW1wdHk9bmV3IGEoW10sMCk7dmFyIGg9ZnVuY3Rpb24odCxlKXt0aGlzLnR5cGU9dCx0aGlzLmF0dHJzPWV9O2Z1bmN0aW9uIGYodCl7dmFyIGU9RXJyb3IuY2FsbCh0aGlzLHQpO3JldHVybiBlLl9fcHJvdG9fXz1mLnByb3RvdHlwZSxlfWgucHJvdG90eXBlLmFkZFRvU2V0PWZ1bmN0aW9uKHQpe2Zvcih2YXIgZSxuPXRoaXMscj0hMSxvPTA7bzx0Lmxlbmd0aDtvKyspe3ZhciBpPXRbb107aWYobi5lcShpKSlyZXR1cm4gdDtpZihuLnR5cGUuZXhjbHVkZXMoaS50eXBlKSllfHwoZT10LnNsaWNlKDAsbykpO2Vsc2V7aWYoaS50eXBlLmV4Y2x1ZGVzKG4udHlwZSkpcmV0dXJuIHQ7IXImJmkudHlwZS5yYW5rPm4udHlwZS5yYW5rJiYoZXx8KGU9dC5zbGljZSgwLG8pKSxlLnB1c2gobikscj0hMCksZSYmZS5wdXNoKGkpfX1yZXR1cm4gZXx8KGU9dC5zbGljZSgpKSxyfHxlLnB1c2godGhpcyksZX0saC5wcm90b3R5cGUucmVtb3ZlRnJvbVNldD1mdW5jdGlvbih0KXtmb3IodmFyIGU9dGhpcyxuPTA7bjx0Lmxlbmd0aDtuKyspaWYoZS5lcSh0W25dKSlyZXR1cm4gdC5zbGljZSgwLG4pLmNvbmNhdCh0LnNsaWNlKG4rMSkpO3JldHVybiB0fSxoLnByb3RvdHlwZS5pc0luU2V0PWZ1bmN0aW9uKHQpe2Zvcih2YXIgZT10aGlzLG49MDtuPHQubGVuZ3RoO24rKylpZihlLmVxKHRbbl0pKXJldHVybiEwO3JldHVybiExfSxoLnByb3RvdHlwZS5lcT1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcz09dHx8dGhpcy50eXBlPT10LnR5cGUmJnUodGhpcy5hdHRycyx0LmF0dHJzKX0saC5wcm90b3R5cGUudG9KU09OPWZ1bmN0aW9uKCl7dmFyIHQ9dGhpcyxlPXt0eXBlOnRoaXMudHlwZS5uYW1lfTtmb3IodmFyIG4gaW4gdC5hdHRycyl7ZS5hdHRycz10LmF0dHJzO2JyZWFrfXJldHVybiBlfSxoLmZyb21KU09OPWZ1bmN0aW9uKHQsZSl7aWYoIWUpdGhyb3cgbmV3IFJhbmdlRXJyb3IoIkludmFsaWQgaW5wdXQgZm9yIE1hcmsuZnJvbUpTT04iKTt2YXIgbj10Lm1hcmtzW2UudHlwZV07aWYoIW4pdGhyb3cgbmV3IFJhbmdlRXJyb3IoIlRoZXJlIGlzIG5vIG1hcmsgdHlwZSAiK2UudHlwZSsiIGluIHRoaXMgc2NoZW1hIik7cmV0dXJuIG4uY3JlYXRlKGUuYXR0cnMpfSxoLnNhbWVTZXQ9ZnVuY3Rpb24odCxlKXtpZih0PT1lKXJldHVybiEwO2lmKHQubGVuZ3RoIT1lLmxlbmd0aClyZXR1cm4hMTtmb3IodmFyIG49MDtuPHQubGVuZ3RoO24rKylpZighdFtuXS5lcShlW25dKSlyZXR1cm4hMTtyZXR1cm4hMH0saC5zZXRGcm9tPWZ1bmN0aW9uKHQpe2lmKCF0fHwwPT10Lmxlbmd0aClyZXR1cm4gaC5ub25lO2lmKHQgaW5zdGFuY2VvZiBoKXJldHVyblt0XTt2YXIgZT10LnNsaWNlKCk7cmV0dXJuIGUuc29ydCgoZnVuY3Rpb24odCxlKXtyZXR1cm4gdC50eXBlLnJhbmstZS50eXBlLnJhbmt9KSksZX0saC5ub25lPVtdLGYucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoRXJyb3IucHJvdG90eXBlKSxmLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1mLGYucHJvdG90eXBlLm5hbWU9IlJlcGxhY2VFcnJvciI7dmFyIGQ9ZnVuY3Rpb24odCxlLG4pe3RoaXMuY29udGVudD10LHRoaXMub3BlblN0YXJ0PWUsdGhpcy5vcGVuRW5kPW59LHY9e3NpemU6e319O2Z1bmN0aW9uIG0odCxlLG4pe3ZhciByPXQuZmluZEluZGV4KGUpLG89ci5pbmRleCxpPXIub2Zmc2V0LHM9dC5tYXliZUNoaWxkKG8pLGE9dC5maW5kSW5kZXgobiksYz1hLmluZGV4LGw9YS5vZmZzZXQ7aWYoaT09ZXx8cy5pc1RleHQpe2lmKGwhPW4mJiF0LmNoaWxkKGMpLmlzVGV4dCl0aHJvdyBuZXcgUmFuZ2VFcnJvcigiUmVtb3Zpbmcgbm9uLWZsYXQgcmFuZ2UiKTtyZXR1cm4gdC5jdXQoMCxlKS5hcHBlbmQodC5jdXQobikpfWlmKG8hPWMpdGhyb3cgbmV3IFJhbmdlRXJyb3IoIlJlbW92aW5nIG5vbi1mbGF0IHJhbmdlIik7cmV0dXJuIHQucmVwbGFjZUNoaWxkKG8scy5jb3B5KG0ocy5jb250ZW50LGUtaS0xLG4taS0xKSkpfWZ1bmN0aW9uIHkodCxlLG4scil7dmFyIG89dC5maW5kSW5kZXgoZSksaT1vLmluZGV4LHM9by5vZmZzZXQsYT10Lm1heWJlQ2hpbGQoaSk7aWYocz09ZXx8YS5pc1RleHQpcmV0dXJuIHImJiFyLmNhblJlcGxhY2UoaSxpLG4pP251bGw6dC5jdXQoMCxlKS5hcHBlbmQobikuYXBwZW5kKHQuY3V0KGUpKTt2YXIgYz15KGEuY29udGVudCxlLXMtMSxuKTtyZXR1cm4gYyYmdC5yZXBsYWNlQ2hpbGQoaSxhLmNvcHkoYykpfWZ1bmN0aW9uIGcodCxlLG4pe2lmKG4ub3BlblN0YXJ0PnQuZGVwdGgpdGhyb3cgbmV3IGYoIkluc2VydGVkIGNvbnRlbnQgZGVlcGVyIHRoYW4gaW5zZXJ0aW9uIHBvc2l0aW9uIik7aWYodC5kZXB0aC1uLm9wZW5TdGFydCE9ZS5kZXB0aC1uLm9wZW5FbmQpdGhyb3cgbmV3IGYoIkluY29uc2lzdGVudCBvcGVuIGRlcHRocyIpO3JldHVybiB3KHQsZSxuLDApfWZ1bmN0aW9uIHcodCxlLG4scil7dmFyIG89dC5pbmRleChyKSxpPXQubm9kZShyKTtpZihvPT1lLmluZGV4KHIpJiZyPHQuZGVwdGgtbi5vcGVuU3RhcnQpe3ZhciBzPXcodCxlLG4scisxKTtyZXR1cm4gaS5jb3B5KGkuY29udGVudC5yZXBsYWNlQ2hpbGQobyxzKSl9aWYobi5jb250ZW50LnNpemUpe2lmKG4ub3BlblN0YXJ0fHxuLm9wZW5FbmR8fHQuZGVwdGghPXJ8fGUuZGVwdGghPXIpe3ZhciBhPVQobix0KSxjPWEuc3RhcnQsbD1hLmVuZDtyZXR1cm4gQyhpLE8odCxjLGwsZSxyKSl9dmFyIHA9dC5wYXJlbnQsdT1wLmNvbnRlbnQ7cmV0dXJuIEMocCx1LmN1dCgwLHQucGFyZW50T2Zmc2V0KS5hcHBlbmQobi5jb250ZW50KS5hcHBlbmQodS5jdXQoZS5wYXJlbnRPZmZzZXQpKSl9cmV0dXJuIEMoaSxNKHQsZSxyKSl9ZnVuY3Rpb24geCh0LGUpe2lmKCFlLnR5cGUuY29tcGF0aWJsZUNvbnRlbnQodC50eXBlKSl0aHJvdyBuZXcgZigiQ2Fubm90IGpvaW4gIitlLnR5cGUubmFtZSsiIG9udG8gIit0LnR5cGUubmFtZSl9ZnVuY3Rpb24gYih0LGUsbil7dmFyIHI9dC5ub2RlKG4pO3JldHVybiB4KHIsZS5ub2RlKG4pKSxyfWZ1bmN0aW9uIGsodCxlKXt2YXIgbj1lLmxlbmd0aC0xO24+PTAmJnQuaXNUZXh0JiZ0LnNhbWVNYXJrdXAoZVtuXSk/ZVtuXT10LndpdGhUZXh0KGVbbl0udGV4dCt0LnRleHQpOmUucHVzaCh0KX1mdW5jdGlvbiBTKHQsZSxuLHIpe3ZhciBvPShlfHx0KS5ub2RlKG4pLGk9MCxzPWU/ZS5pbmRleChuKTpvLmNoaWxkQ291bnQ7dCYmKGk9dC5pbmRleChuKSx0LmRlcHRoPm4/aSsrOnQudGV4dE9mZnNldCYmKGsodC5ub2RlQWZ0ZXIsciksaSsrKSk7Zm9yKHZhciBhPWk7YTxzO2ErKylrKG8uY2hpbGQoYSkscik7ZSYmZS5kZXB0aD09biYmZS50ZXh0T2Zmc2V0JiZrKGUubm9kZUJlZm9yZSxyKX1mdW5jdGlvbiBDKHQsZSl7aWYoIXQudHlwZS52YWxpZENvbnRlbnQoZSkpdGhyb3cgbmV3IGYoIkludmFsaWQgY29udGVudCBmb3Igbm9kZSAiK3QudHlwZS5uYW1lKTtyZXR1cm4gdC5jb3B5KGUpfWZ1bmN0aW9uIE8odCxlLG4scixvKXt2YXIgaT10LmRlcHRoPm8mJmIodCxlLG8rMSkscz1yLmRlcHRoPm8mJmIobixyLG8rMSksYz1bXTtyZXR1cm4gUyhudWxsLHQsbyxjKSxpJiZzJiZlLmluZGV4KG8pPT1uLmluZGV4KG8pPyh4KGkscyksayhDKGksTyh0LGUsbixyLG8rMSkpLGMpKTooaSYmayhDKGksTSh0LGUsbysxKSksYyksUyhlLG4sbyxjKSxzJiZrKEMocyxNKG4scixvKzEpKSxjKSksUyhyLG51bGwsbyxjKSxuZXcgYShjKX1mdW5jdGlvbiBNKHQsZSxuKXt2YXIgcj1bXTtpZihTKG51bGwsdCxuLHIpLHQuZGVwdGg+bil7dmFyIG89Yih0LGUsbisxKTtrKEMobyxNKHQsZSxuKzEpKSxyKX1yZXR1cm4gUyhlLG51bGwsbixyKSxuZXcgYShyKX1mdW5jdGlvbiBUKHQsZSl7Zm9yKHZhciBuPWUuZGVwdGgtdC5vcGVuU3RhcnQscj1lLm5vZGUobiksbz1yLmNvcHkodC5jb250ZW50KSxpPW4tMTtpPj0wO2ktLSlvPWUubm9kZShpKS5jb3B5KGEuZnJvbShvKSk7cmV0dXJue3N0YXJ0Om8ucmVzb2x2ZU5vQ2FjaGUodC5vcGVuU3RhcnQrbiksZW5kOm8ucmVzb2x2ZU5vQ2FjaGUoby5jb250ZW50LnNpemUtdC5vcGVuRW5kLW4pfX12LnNpemUuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY29udGVudC5zaXplLXRoaXMub3BlblN0YXJ0LXRoaXMub3BlbkVuZH0sZC5wcm90b3R5cGUuaW5zZXJ0QXQ9ZnVuY3Rpb24odCxlKXt2YXIgbj15KHRoaXMuY29udGVudCx0K3RoaXMub3BlblN0YXJ0LGUsbnVsbCk7cmV0dXJuIG4mJm5ldyBkKG4sdGhpcy5vcGVuU3RhcnQsdGhpcy5vcGVuRW5kKX0sZC5wcm90b3R5cGUucmVtb3ZlQmV0d2Vlbj1mdW5jdGlvbih0LGUpe3JldHVybiBuZXcgZChtKHRoaXMuY29udGVudCx0K3RoaXMub3BlblN0YXJ0LGUrdGhpcy5vcGVuU3RhcnQpLHRoaXMub3BlblN0YXJ0LHRoaXMub3BlbkVuZCl9LGQucHJvdG90eXBlLmVxPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLmNvbnRlbnQuZXEodC5jb250ZW50KSYmdGhpcy5vcGVuU3RhcnQ9PXQub3BlblN0YXJ0JiZ0aGlzLm9wZW5FbmQ9PXQub3BlbkVuZH0sZC5wcm90b3R5cGUudG9TdHJpbmc9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jb250ZW50KyIoIit0aGlzLm9wZW5TdGFydCsiLCIrdGhpcy5vcGVuRW5kKyIpIn0sZC5wcm90b3R5cGUudG9KU09OPWZ1bmN0aW9uKCl7aWYoIXRoaXMuY29udGVudC5zaXplKXJldHVybiBudWxsO3ZhciB0PXtjb250ZW50OnRoaXMuY29udGVudC50b0pTT04oKX07cmV0dXJuIHRoaXMub3BlblN0YXJ0PjAmJih0Lm9wZW5TdGFydD10aGlzLm9wZW5TdGFydCksdGhpcy5vcGVuRW5kPjAmJih0Lm9wZW5FbmQ9dGhpcy5vcGVuRW5kKSx0fSxkLmZyb21KU09OPWZ1bmN0aW9uKHQsZSl7aWYoIWUpcmV0dXJuIGQuZW1wdHk7dmFyIG49ZS5vcGVuU3RhcnR8fDAscj1lLm9wZW5FbmR8fDA7aWYoIm51bWJlciIhPXR5cGVvZiBufHwibnVtYmVyIiE9dHlwZW9mIHIpdGhyb3cgbmV3IFJhbmdlRXJyb3IoIkludmFsaWQgaW5wdXQgZm9yIFNsaWNlLmZyb21KU09OIik7cmV0dXJuIG5ldyBkKGEuZnJvbUpTT04odCxlLmNvbnRlbnQpLGUub3BlblN0YXJ0fHwwLGUub3BlbkVuZHx8MCl9LGQubWF4T3Blbj1mdW5jdGlvbih0LGUpe3ZvaWQgMD09PWUmJihlPSEwKTtmb3IodmFyIG49MCxyPTAsbz10LmZpcnN0Q2hpbGQ7byYmIW8uaXNMZWFmJiYoZXx8IW8udHlwZS5zcGVjLmlzb2xhdGluZyk7bz1vLmZpcnN0Q2hpbGQpbisrO2Zvcih2YXIgaT10Lmxhc3RDaGlsZDtpJiYhaS5pc0xlYWYmJihlfHwhaS50eXBlLnNwZWMuaXNvbGF0aW5nKTtpPWkubGFzdENoaWxkKXIrKztyZXR1cm4gbmV3IGQodCxuLHIpfSxPYmplY3QuZGVmaW5lUHJvcGVydGllcyhkLnByb3RvdHlwZSx2KSxkLmVtcHR5PW5ldyBkKGEuZW1wdHksMCwwKTt2YXIgTj1mdW5jdGlvbih0LGUsbil7dGhpcy5wb3M9dCx0aGlzLnBhdGg9ZSx0aGlzLmRlcHRoPWUubGVuZ3RoLzMtMSx0aGlzLnBhcmVudE9mZnNldD1ufSxFPXtwYXJlbnQ6e30sZG9jOnt9LHRleHRPZmZzZXQ6e30sbm9kZUFmdGVyOnt9LG5vZGVCZWZvcmU6e319O04ucHJvdG90eXBlLnJlc29sdmVEZXB0aD1mdW5jdGlvbih0KXtyZXR1cm4gbnVsbD09dD90aGlzLmRlcHRoOnQ8MD90aGlzLmRlcHRoK3Q6dH0sRS5wYXJlbnQuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubm9kZSh0aGlzLmRlcHRoKX0sRS5kb2MuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubm9kZSgwKX0sTi5wcm90b3R5cGUubm9kZT1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5wYXRoWzMqdGhpcy5yZXNvbHZlRGVwdGgodCldfSxOLnByb3RvdHlwZS5pbmRleD1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5wYXRoWzMqdGhpcy5yZXNvbHZlRGVwdGgodCkrMV19LE4ucHJvdG90eXBlLmluZGV4QWZ0ZXI9ZnVuY3Rpb24odCl7cmV0dXJuIHQ9dGhpcy5yZXNvbHZlRGVwdGgodCksdGhpcy5pbmRleCh0KSsodCE9dGhpcy5kZXB0aHx8dGhpcy50ZXh0T2Zmc2V0PzE6MCl9LE4ucHJvdG90eXBlLnN0YXJ0PWZ1bmN0aW9uKHQpe3JldHVybiB0PXRoaXMucmVzb2x2ZURlcHRoKHQpLDA9PXQ/MDp0aGlzLnBhdGhbMyp0LTFdKzF9LE4ucHJvdG90eXBlLmVuZD1mdW5jdGlvbih0KXtyZXR1cm4gdD10aGlzLnJlc29sdmVEZXB0aCh0KSx0aGlzLnN0YXJ0KHQpK3RoaXMubm9kZSh0KS5jb250ZW50LnNpemV9LE4ucHJvdG90eXBlLmJlZm9yZT1mdW5jdGlvbih0KXtpZih0PXRoaXMucmVzb2x2ZURlcHRoKHQpLCF0KXRocm93IG5ldyBSYW5nZUVycm9yKCJUaGVyZSBpcyBubyBwb3NpdGlvbiBiZWZvcmUgdGhlIHRvcC1sZXZlbCBub2RlIik7cmV0dXJuIHQ9PXRoaXMuZGVwdGgrMT90aGlzLnBvczp0aGlzLnBhdGhbMyp0LTFdfSxOLnByb3RvdHlwZS5hZnRlcj1mdW5jdGlvbih0KXtpZih0PXRoaXMucmVzb2x2ZURlcHRoKHQpLCF0KXRocm93IG5ldyBSYW5nZUVycm9yKCJUaGVyZSBpcyBubyBwb3NpdGlvbiBhZnRlciB0aGUgdG9wLWxldmVsIG5vZGUiKTtyZXR1cm4gdD09dGhpcy5kZXB0aCsxP3RoaXMucG9zOnRoaXMucGF0aFszKnQtMV0rdGhpcy5wYXRoWzMqdF0ubm9kZVNpemV9LEUudGV4dE9mZnNldC5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5wb3MtdGhpcy5wYXRoW3RoaXMucGF0aC5sZW5ndGgtMV19LEUubm9kZUFmdGVyLmdldD1mdW5jdGlvbigpe3ZhciB0PXRoaXMucGFyZW50LGU9dGhpcy5pbmRleCh0aGlzLmRlcHRoKTtpZihlPT10LmNoaWxkQ291bnQpcmV0dXJuIG51bGw7dmFyIG49dGhpcy5wb3MtdGhpcy5wYXRoW3RoaXMucGF0aC5sZW5ndGgtMV0scj10LmNoaWxkKGUpO3JldHVybiBuP3QuY2hpbGQoZSkuY3V0KG4pOnJ9LEUubm9kZUJlZm9yZS5nZXQ9ZnVuY3Rpb24oKXt2YXIgdD10aGlzLmluZGV4KHRoaXMuZGVwdGgpLGU9dGhpcy5wb3MtdGhpcy5wYXRoW3RoaXMucGF0aC5sZW5ndGgtMV07cmV0dXJuIGU/dGhpcy5wYXJlbnQuY2hpbGQodCkuY3V0KDAsZSk6MD09dD9udWxsOnRoaXMucGFyZW50LmNoaWxkKHQtMSl9LE4ucHJvdG90eXBlLm1hcmtzPWZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5wYXJlbnQsZT10aGlzLmluZGV4KCk7aWYoMD09dC5jb250ZW50LnNpemUpcmV0dXJuIGgubm9uZTtpZih0aGlzLnRleHRPZmZzZXQpcmV0dXJuIHQuY2hpbGQoZSkubWFya3M7dmFyIG49dC5tYXliZUNoaWxkKGUtMSkscj10Lm1heWJlQ2hpbGQoZSk7aWYoIW4pe3ZhciBvPW47bj1yLHI9b31mb3IodmFyIGk9bi5tYXJrcyxzPTA7czxpLmxlbmd0aDtzKyspITEhPT1pW3NdLnR5cGUuc3BlYy5pbmNsdXNpdmV8fHImJmlbc10uaXNJblNldChyLm1hcmtzKXx8KGk9aVtzLS1dLnJlbW92ZUZyb21TZXQoaSkpO3JldHVybiBpfSxOLnByb3RvdHlwZS5tYXJrc0Fjcm9zcz1mdW5jdGlvbih0KXt2YXIgZT10aGlzLnBhcmVudC5tYXliZUNoaWxkKHRoaXMuaW5kZXgoKSk7aWYoIWV8fCFlLmlzSW5saW5lKXJldHVybiBudWxsO2Zvcih2YXIgbj1lLm1hcmtzLHI9dC5wYXJlbnQubWF5YmVDaGlsZCh0LmluZGV4KCkpLG89MDtvPG4ubGVuZ3RoO28rKykhMSE9PW5bb10udHlwZS5zcGVjLmluY2x1c2l2ZXx8ciYmbltvXS5pc0luU2V0KHIubWFya3MpfHwobj1uW28tLV0ucmVtb3ZlRnJvbVNldChuKSk7cmV0dXJuIG59LE4ucHJvdG90eXBlLnNoYXJlZERlcHRoPWZ1bmN0aW9uKHQpe2Zvcih2YXIgZT10aGlzLG49dGhpcy5kZXB0aDtuPjA7bi0tKWlmKGUuc3RhcnQobik8PXQmJmUuZW5kKG4pPj10KXJldHVybiBuO3JldHVybiAwfSxOLnByb3RvdHlwZS5ibG9ja1JhbmdlPWZ1bmN0aW9uKHQsZSl7dmFyIG49dGhpcztpZih2b2lkIDA9PT10JiYodD10aGlzKSx0LnBvczx0aGlzLnBvcylyZXR1cm4gdC5ibG9ja1JhbmdlKHRoaXMpO2Zvcih2YXIgcj10aGlzLmRlcHRoLSh0aGlzLnBhcmVudC5pbmxpbmVDb250ZW50fHx0aGlzLnBvcz09dC5wb3M/MTowKTtyPj0wO3ItLSlpZih0LnBvczw9bi5lbmQocikmJighZXx8ZShuLm5vZGUocikpKSlyZXR1cm4gbmV3IHoobix0LHIpfSxOLnByb3RvdHlwZS5zYW1lUGFyZW50PWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLnBvcy10aGlzLnBhcmVudE9mZnNldD09dC5wb3MtdC5wYXJlbnRPZmZzZXR9LE4ucHJvdG90eXBlLm1heD1mdW5jdGlvbih0KXtyZXR1cm4gdC5wb3M+dGhpcy5wb3M/dDp0aGlzfSxOLnByb3RvdHlwZS5taW49ZnVuY3Rpb24odCl7cmV0dXJuIHQucG9zPHRoaXMucG9zP3Q6dGhpc30sTi5wcm90b3R5cGUudG9TdHJpbmc9ZnVuY3Rpb24oKXtmb3IodmFyIHQ9dGhpcyxlPSIiLG49MTtuPD10aGlzLmRlcHRoO24rKyllKz0oZT8iLyI6IiIpK3Qubm9kZShuKS50eXBlLm5hbWUrIl8iK3QuaW5kZXgobi0xKTtyZXR1cm4gZSsiOiIrdGhpcy5wYXJlbnRPZmZzZXR9LE4ucmVzb2x2ZT1mdW5jdGlvbih0LGUpe2lmKCEoZT49MCYmZTw9dC5jb250ZW50LnNpemUpKXRocm93IG5ldyBSYW5nZUVycm9yKCJQb3NpdGlvbiAiK2UrIiBvdXQgb2YgcmFuZ2UiKTtmb3IodmFyIG49W10scj0wLG89ZSxpPXQ7Oyl7dmFyIHM9aS5jb250ZW50LmZpbmRJbmRleChvKSxhPXMuaW5kZXgsYz1zLm9mZnNldCxsPW8tYztpZihuLnB1c2goaSxhLHIrYyksIWwpYnJlYWs7aWYoaT1pLmNoaWxkKGEpLGkuaXNUZXh0KWJyZWFrO289bC0xLHIrPWMrMX1yZXR1cm4gbmV3IE4oZSxuLG8pfSxOLnJlc29sdmVDYWNoZWQ9ZnVuY3Rpb24odCxlKXtmb3IodmFyIG49MDtuPEEubGVuZ3RoO24rKyl7dmFyIHI9QVtuXTtpZihyLnBvcz09ZSYmci5kb2M9PXQpcmV0dXJuIHJ9dmFyIG89QVtSXT1OLnJlc29sdmUodCxlKTtyZXR1cm4gUj0oUisxKSVELG99LE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKE4ucHJvdG90eXBlLEUpO3ZhciBBPVtdLFI9MCxEPTEyLHo9ZnVuY3Rpb24odCxlLG4pe3RoaXMuJGZyb209dCx0aGlzLiR0bz1lLHRoaXMuZGVwdGg9bn0sUD17c3RhcnQ6e30sZW5kOnt9LHBhcmVudDp7fSxzdGFydEluZGV4Ont9LGVuZEluZGV4Ont9fTtQLnN0YXJ0LmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLiRmcm9tLmJlZm9yZSh0aGlzLmRlcHRoKzEpfSxQLmVuZC5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy4kdG8uYWZ0ZXIodGhpcy5kZXB0aCsxKX0sUC5wYXJlbnQuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuJGZyb20ubm9kZSh0aGlzLmRlcHRoKX0sUC5zdGFydEluZGV4LmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLiRmcm9tLmluZGV4KHRoaXMuZGVwdGgpfSxQLmVuZEluZGV4LmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLiR0by5pbmRleEFmdGVyKHRoaXMuZGVwdGgpfSxPYmplY3QuZGVmaW5lUHJvcGVydGllcyh6LnByb3RvdHlwZSxQKTt2YXIgST1PYmplY3QuY3JlYXRlKG51bGwpLF89ZnVuY3Rpb24odCxlLG4scil7dGhpcy50eXBlPXQsdGhpcy5hdHRycz1lLHRoaXMuY29udGVudD1ufHxhLmVtcHR5LHRoaXMubWFya3M9cnx8aC5ub25lfSxGPXtub2RlU2l6ZTp7fSxjaGlsZENvdW50Ont9LHRleHRDb250ZW50Ont9LGZpcnN0Q2hpbGQ6e30sbGFzdENoaWxkOnt9LGlzQmxvY2s6e30saXNUZXh0YmxvY2s6e30saW5saW5lQ29udGVudDp7fSxpc0lubGluZTp7fSxpc1RleHQ6e30saXNMZWFmOnt9LGlzQXRvbTp7fX07Ri5ub2RlU2l6ZS5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5pc0xlYWY/MToyK3RoaXMuY29udGVudC5zaXplfSxGLmNoaWxkQ291bnQuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY29udGVudC5jaGlsZENvdW50fSxfLnByb3RvdHlwZS5jaGlsZD1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5jb250ZW50LmNoaWxkKHQpfSxfLnByb3RvdHlwZS5tYXliZUNoaWxkPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLmNvbnRlbnQubWF5YmVDaGlsZCh0KX0sXy5wcm90b3R5cGUuZm9yRWFjaD1mdW5jdGlvbih0KXt0aGlzLmNvbnRlbnQuZm9yRWFjaCh0KX0sXy5wcm90b3R5cGUubm9kZXNCZXR3ZWVuPWZ1bmN0aW9uKHQsZSxuLHIpe3ZvaWQgMD09PXImJihyPTApLHRoaXMuY29udGVudC5ub2Rlc0JldHdlZW4odCxlLG4scix0aGlzKX0sXy5wcm90b3R5cGUuZGVzY2VuZGFudHM9ZnVuY3Rpb24odCl7dGhpcy5ub2Rlc0JldHdlZW4oMCx0aGlzLmNvbnRlbnQuc2l6ZSx0KX0sRi50ZXh0Q29udGVudC5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy50ZXh0QmV0d2VlbigwLHRoaXMuY29udGVudC5zaXplLCIiKX0sXy5wcm90b3R5cGUudGV4dEJldHdlZW49ZnVuY3Rpb24odCxlLG4scil7cmV0dXJuIHRoaXMuY29udGVudC50ZXh0QmV0d2Vlbih0LGUsbixyKX0sRi5maXJzdENoaWxkLmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLmNvbnRlbnQuZmlyc3RDaGlsZH0sRi5sYXN0Q2hpbGQuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY29udGVudC5sYXN0Q2hpbGR9LF8ucHJvdG90eXBlLmVxPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzPT10fHx0aGlzLnNhbWVNYXJrdXAodCkmJnRoaXMuY29udGVudC5lcSh0LmNvbnRlbnQpfSxfLnByb3RvdHlwZS5zYW1lTWFya3VwPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLmhhc01hcmt1cCh0LnR5cGUsdC5hdHRycyx0Lm1hcmtzKX0sXy5wcm90b3R5cGUuaGFzTWFya3VwPWZ1bmN0aW9uKHQsZSxuKXtyZXR1cm4gdGhpcy50eXBlPT10JiZ1KHRoaXMuYXR0cnMsZXx8dC5kZWZhdWx0QXR0cnN8fEkpJiZoLnNhbWVTZXQodGhpcy5tYXJrcyxufHxoLm5vbmUpfSxfLnByb3RvdHlwZS5jb3B5PWZ1bmN0aW9uKHQpe3JldHVybiB2b2lkIDA9PT10JiYodD1udWxsKSx0PT10aGlzLmNvbnRlbnQ/dGhpczpuZXcgdGhpcy5jb25zdHJ1Y3Rvcih0aGlzLnR5cGUsdGhpcy5hdHRycyx0LHRoaXMubWFya3MpfSxfLnByb3RvdHlwZS5tYXJrPWZ1bmN0aW9uKHQpe3JldHVybiB0PT10aGlzLm1hcmtzP3RoaXM6bmV3IHRoaXMuY29uc3RydWN0b3IodGhpcy50eXBlLHRoaXMuYXR0cnMsdGhpcy5jb250ZW50LHQpfSxfLnByb3RvdHlwZS5jdXQ9ZnVuY3Rpb24odCxlKXtyZXR1cm4gMD09dCYmZT09dGhpcy5jb250ZW50LnNpemU/dGhpczp0aGlzLmNvcHkodGhpcy5jb250ZW50LmN1dCh0LGUpKX0sXy5wcm90b3R5cGUuc2xpY2U9ZnVuY3Rpb24odCxlLG4pe2lmKHZvaWQgMD09PWUmJihlPXRoaXMuY29udGVudC5zaXplKSx2b2lkIDA9PT1uJiYobj0hMSksdD09ZSlyZXR1cm4gZC5lbXB0eTt2YXIgcj10aGlzLnJlc29sdmUodCksbz10aGlzLnJlc29sdmUoZSksaT1uPzA6ci5zaGFyZWREZXB0aChlKSxzPXIuc3RhcnQoaSksYT1yLm5vZGUoaSksYz1hLmNvbnRlbnQuY3V0KHIucG9zLXMsby5wb3Mtcyk7cmV0dXJuIG5ldyBkKGMsci5kZXB0aC1pLG8uZGVwdGgtaSl9LF8ucHJvdG90eXBlLnJlcGxhY2U9ZnVuY3Rpb24odCxlLG4pe3JldHVybiBnKHRoaXMucmVzb2x2ZSh0KSx0aGlzLnJlc29sdmUoZSksbil9LF8ucHJvdG90eXBlLm5vZGVBdD1mdW5jdGlvbih0KXtmb3IodmFyIGU9dGhpczs7KXt2YXIgbj1lLmNvbnRlbnQuZmluZEluZGV4KHQpLHI9bi5pbmRleCxvPW4ub2Zmc2V0O2lmKGU9ZS5tYXliZUNoaWxkKHIpLCFlKXJldHVybiBudWxsO2lmKG89PXR8fGUuaXNUZXh0KXJldHVybiBlO3QtPW8rMX19LF8ucHJvdG90eXBlLmNoaWxkQWZ0ZXI9ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5jb250ZW50LmZpbmRJbmRleCh0KSxuPWUuaW5kZXgscj1lLm9mZnNldDtyZXR1cm57bm9kZTp0aGlzLmNvbnRlbnQubWF5YmVDaGlsZChuKSxpbmRleDpuLG9mZnNldDpyfX0sXy5wcm90b3R5cGUuY2hpbGRCZWZvcmU9ZnVuY3Rpb24odCl7aWYoMD09dClyZXR1cm57bm9kZTpudWxsLGluZGV4OjAsb2Zmc2V0OjB9O3ZhciBlPXRoaXMuY29udGVudC5maW5kSW5kZXgodCksbj1lLmluZGV4LHI9ZS5vZmZzZXQ7aWYocjx0KXJldHVybntub2RlOnRoaXMuY29udGVudC5jaGlsZChuKSxpbmRleDpuLG9mZnNldDpyfTt2YXIgbz10aGlzLmNvbnRlbnQuY2hpbGQobi0xKTtyZXR1cm57bm9kZTpvLGluZGV4Om4tMSxvZmZzZXQ6ci1vLm5vZGVTaXplfX0sXy5wcm90b3R5cGUucmVzb2x2ZT1mdW5jdGlvbih0KXtyZXR1cm4gTi5yZXNvbHZlQ2FjaGVkKHRoaXMsdCl9LF8ucHJvdG90eXBlLnJlc29sdmVOb0NhY2hlPWZ1bmN0aW9uKHQpe3JldHVybiBOLnJlc29sdmUodGhpcyx0KX0sXy5wcm90b3R5cGUucmFuZ2VIYXNNYXJrPWZ1bmN0aW9uKHQsZSxuKXt2YXIgcj0hMTtyZXR1cm4gZT50JiZ0aGlzLm5vZGVzQmV0d2Vlbih0LGUsKGZ1bmN0aW9uKHQpe3JldHVybiBuLmlzSW5TZXQodC5tYXJrcykmJihyPSEwKSwhcn0pKSxyfSxGLmlzQmxvY2suZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudHlwZS5pc0Jsb2NrfSxGLmlzVGV4dGJsb2NrLmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLnR5cGUuaXNUZXh0YmxvY2t9LEYuaW5saW5lQ29udGVudC5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy50eXBlLmlubGluZUNvbnRlbnR9LEYuaXNJbmxpbmUuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudHlwZS5pc0lubGluZX0sRi5pc1RleHQuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudHlwZS5pc1RleHR9LEYuaXNMZWFmLmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLnR5cGUuaXNMZWFmfSxGLmlzQXRvbS5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy50eXBlLmlzQXRvbX0sXy5wcm90b3R5cGUudG9TdHJpbmc9ZnVuY3Rpb24oKXtpZih0aGlzLnR5cGUuc3BlYy50b0RlYnVnU3RyaW5nKXJldHVybiB0aGlzLnR5cGUuc3BlYy50b0RlYnVnU3RyaW5nKHRoaXMpO3ZhciB0PXRoaXMudHlwZS5uYW1lO3JldHVybiB0aGlzLmNvbnRlbnQuc2l6ZSYmKHQrPSIoIit0aGlzLmNvbnRlbnQudG9TdHJpbmdJbm5lcigpKyIpIiksaih0aGlzLm1hcmtzLHQpfSxfLnByb3RvdHlwZS5jb250ZW50TWF0Y2hBdD1mdW5jdGlvbih0KXt2YXIgZT10aGlzLnR5cGUuY29udGVudE1hdGNoLm1hdGNoRnJhZ21lbnQodGhpcy5jb250ZW50LDAsdCk7aWYoIWUpdGhyb3cgbmV3IEVycm9yKCJDYWxsZWQgY29udGVudE1hdGNoQXQgb24gYSBub2RlIHdpdGggaW52YWxpZCBjb250ZW50Iik7cmV0dXJuIGV9LF8ucHJvdG90eXBlLmNhblJlcGxhY2U9ZnVuY3Rpb24odCxlLG4scixvKXt2YXIgaT10aGlzO3ZvaWQgMD09PW4mJihuPWEuZW1wdHkpLHZvaWQgMD09PXImJihyPTApLHZvaWQgMD09PW8mJihvPW4uY2hpbGRDb3VudCk7dmFyIHM9dGhpcy5jb250ZW50TWF0Y2hBdCh0KS5tYXRjaEZyYWdtZW50KG4scixvKSxjPXMmJnMubWF0Y2hGcmFnbWVudCh0aGlzLmNvbnRlbnQsZSk7aWYoIWN8fCFjLnZhbGlkRW5kKXJldHVybiExO2Zvcih2YXIgbD1yO2w8bztsKyspaWYoIWkudHlwZS5hbGxvd3NNYXJrcyhuLmNoaWxkKGwpLm1hcmtzKSlyZXR1cm4hMTtyZXR1cm4hMH0sXy5wcm90b3R5cGUuY2FuUmVwbGFjZVdpdGg9ZnVuY3Rpb24odCxlLG4scil7aWYociYmIXRoaXMudHlwZS5hbGxvd3NNYXJrcyhyKSlyZXR1cm4hMTt2YXIgbz10aGlzLmNvbnRlbnRNYXRjaEF0KHQpLm1hdGNoVHlwZShuKSxpPW8mJm8ubWF0Y2hGcmFnbWVudCh0aGlzLmNvbnRlbnQsZSk7cmV0dXJuISFpJiZpLnZhbGlkRW5kfSxfLnByb3RvdHlwZS5jYW5BcHBlbmQ9ZnVuY3Rpb24odCl7cmV0dXJuIHQuY29udGVudC5zaXplP3RoaXMuY2FuUmVwbGFjZSh0aGlzLmNoaWxkQ291bnQsdGhpcy5jaGlsZENvdW50LHQuY29udGVudCk6dGhpcy50eXBlLmNvbXBhdGlibGVDb250ZW50KHQudHlwZSl9LF8ucHJvdG90eXBlLmRlZmF1bHRDb250ZW50VHlwZT1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5jb250ZW50TWF0Y2hBdCh0KS5kZWZhdWx0VHlwZX0sXy5wcm90b3R5cGUuY2hlY2s9ZnVuY3Rpb24oKXtpZighdGhpcy50eXBlLnZhbGlkQ29udGVudCh0aGlzLmNvbnRlbnQpKXRocm93IG5ldyBSYW5nZUVycm9yKCJJbnZhbGlkIGNvbnRlbnQgZm9yIG5vZGUgIit0aGlzLnR5cGUubmFtZSsiOiAiK3RoaXMuY29udGVudC50b1N0cmluZygpLnNsaWNlKDAsNTApKTt0aGlzLmNvbnRlbnQuZm9yRWFjaCgoZnVuY3Rpb24odCl7cmV0dXJuIHQuY2hlY2soKX0pKX0sXy5wcm90b3R5cGUudG9KU09OPWZ1bmN0aW9uKCl7dmFyIHQ9dGhpcyxlPXt0eXBlOnRoaXMudHlwZS5uYW1lfTtmb3IodmFyIG4gaW4gdC5hdHRycyl7ZS5hdHRycz10LmF0dHJzO2JyZWFrfXJldHVybiB0aGlzLmNvbnRlbnQuc2l6ZSYmKGUuY29udGVudD10aGlzLmNvbnRlbnQudG9KU09OKCkpLHRoaXMubWFya3MubGVuZ3RoJiYoZS5tYXJrcz10aGlzLm1hcmtzLm1hcCgoZnVuY3Rpb24odCl7cmV0dXJuIHQudG9KU09OKCl9KSkpLGV9LF8uZnJvbUpTT049ZnVuY3Rpb24odCxlKXtpZighZSl0aHJvdyBuZXcgUmFuZ2VFcnJvcigiSW52YWxpZCBpbnB1dCBmb3IgTm9kZS5mcm9tSlNPTiIpO3ZhciBuPW51bGw7aWYoZS5tYXJrcyl7aWYoIUFycmF5LmlzQXJyYXkoZS5tYXJrcykpdGhyb3cgbmV3IFJhbmdlRXJyb3IoIkludmFsaWQgbWFyayBkYXRhIGZvciBOb2RlLmZyb21KU09OIik7bj1lLm1hcmtzLm1hcCh0Lm1hcmtGcm9tSlNPTil9aWYoInRleHQiPT1lLnR5cGUpe2lmKCJzdHJpbmciIT10eXBlb2YgZS50ZXh0KXRocm93IG5ldyBSYW5nZUVycm9yKCJJbnZhbGlkIHRleHQgbm9kZSBpbiBKU09OIik7cmV0dXJuIHQudGV4dChlLnRleHQsbil9dmFyIHI9YS5mcm9tSlNPTih0LGUuY29udGVudCk7cmV0dXJuIHQubm9kZVR5cGUoZS50eXBlKS5jcmVhdGUoZS5hdHRycyxyLG4pfSxPYmplY3QuZGVmaW5lUHJvcGVydGllcyhfLnByb3RvdHlwZSxGKTt2YXIgQj1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKGUsbixyLG8pe2lmKHQuY2FsbCh0aGlzLGUsbixudWxsLG8pLCFyKXRocm93IG5ldyBSYW5nZUVycm9yKCJFbXB0eSB0ZXh0IG5vZGVzIGFyZSBub3QgYWxsb3dlZCIpO3RoaXMudGV4dD1yfXQmJihlLl9fcHJvdG9fXz10KSxlLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKHQmJnQucHJvdG90eXBlKSxlLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1lO3ZhciBuPXt0ZXh0Q29udGVudDp7fSxub2RlU2l6ZTp7fX07cmV0dXJuIGUucHJvdG90eXBlLnRvU3RyaW5nPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudHlwZS5zcGVjLnRvRGVidWdTdHJpbmc/dGhpcy50eXBlLnNwZWMudG9EZWJ1Z1N0cmluZyh0aGlzKTpqKHRoaXMubWFya3MsSlNPTi5zdHJpbmdpZnkodGhpcy50ZXh0KSl9LG4udGV4dENvbnRlbnQuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudGV4dH0sZS5wcm90b3R5cGUudGV4dEJldHdlZW49ZnVuY3Rpb24odCxlKXtyZXR1cm4gdGhpcy50ZXh0LnNsaWNlKHQsZSl9LG4ubm9kZVNpemUuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudGV4dC5sZW5ndGh9LGUucHJvdG90eXBlLm1hcms9ZnVuY3Rpb24odCl7cmV0dXJuIHQ9PXRoaXMubWFya3M/dGhpczpuZXcgZSh0aGlzLnR5cGUsdGhpcy5hdHRycyx0aGlzLnRleHQsdCl9LGUucHJvdG90eXBlLndpdGhUZXh0PWZ1bmN0aW9uKHQpe3JldHVybiB0PT10aGlzLnRleHQ/dGhpczpuZXcgZSh0aGlzLnR5cGUsdGhpcy5hdHRycyx0LHRoaXMubWFya3MpfSxlLnByb3RvdHlwZS5jdXQ9ZnVuY3Rpb24odCxlKXtyZXR1cm4gdm9pZCAwPT09dCYmKHQ9MCksdm9pZCAwPT09ZSYmKGU9dGhpcy50ZXh0Lmxlbmd0aCksMD09dCYmZT09dGhpcy50ZXh0Lmxlbmd0aD90aGlzOnRoaXMud2l0aFRleHQodGhpcy50ZXh0LnNsaWNlKHQsZSkpfSxlLnByb3RvdHlwZS5lcT1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5zYW1lTWFya3VwKHQpJiZ0aGlzLnRleHQ9PXQudGV4dH0sZS5wcm90b3R5cGUudG9KU09OPWZ1bmN0aW9uKCl7dmFyIGU9dC5wcm90b3R5cGUudG9KU09OLmNhbGwodGhpcyk7cmV0dXJuIGUudGV4dD10aGlzLnRleHQsZX0sT2JqZWN0LmRlZmluZVByb3BlcnRpZXMoZS5wcm90b3R5cGUsbiksZX0oXyk7ZnVuY3Rpb24gaih0LGUpe2Zvcih2YXIgbj10Lmxlbmd0aC0xO24+PTA7bi0tKWU9dFtuXS50eXBlLm5hbWUrIigiK2UrIikiO3JldHVybiBlfXZhciAkPWZ1bmN0aW9uKHQpe3RoaXMudmFsaWRFbmQ9dCx0aGlzLm5leHQ9W10sdGhpcy53cmFwQ2FjaGU9W119LFY9e2lubGluZUNvbnRlbnQ6e30sZGVmYXVsdFR5cGU6e30sZWRnZUNvdW50Ont9fTskLnBhcnNlPWZ1bmN0aW9uKHQsZSl7dmFyIG49bmV3IEwodCxlKTtpZihudWxsPT1uLm5leHQpcmV0dXJuICQuZW1wdHk7dmFyIHI9cShuKTtuLm5leHQmJm4uZXJyKCJVbmV4cGVjdGVkIHRyYWlsaW5nIHRleHQiKTt2YXIgbz10dChZKHIpKTtyZXR1cm4gZXQobyxuKSxvfSwkLnByb3RvdHlwZS5tYXRjaFR5cGU9ZnVuY3Rpb24odCl7Zm9yKHZhciBlPXRoaXMsbj0wO248dGhpcy5uZXh0Lmxlbmd0aDtuKz0yKWlmKGUubmV4dFtuXT09dClyZXR1cm4gZS5uZXh0W24rMV07cmV0dXJuIG51bGx9LCQucHJvdG90eXBlLm1hdGNoRnJhZ21lbnQ9ZnVuY3Rpb24odCxlLG4pe3ZvaWQgMD09PWUmJihlPTApLHZvaWQgMD09PW4mJihuPXQuY2hpbGRDb3VudCk7Zm9yKHZhciByPXRoaXMsbz1lO3ImJm88bjtvKyspcj1yLm1hdGNoVHlwZSh0LmNoaWxkKG8pLnR5cGUpO3JldHVybiByfSxWLmlubGluZUNvbnRlbnQuZ2V0PWZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5uZXh0WzBdO3JldHVybiEhdCYmdC5pc0lubGluZX0sVi5kZWZhdWx0VHlwZS5nZXQ9ZnVuY3Rpb24oKXtmb3IodmFyIHQ9dGhpcyxlPTA7ZTx0aGlzLm5leHQubGVuZ3RoO2UrPTIpe3ZhciBuPXQubmV4dFtlXTtpZighbi5pc1RleHQmJiFuLmhhc1JlcXVpcmVkQXR0cnMoKSlyZXR1cm4gbn19LCQucHJvdG90eXBlLmNvbXBhdGlibGU9ZnVuY3Rpb24odCl7Zm9yKHZhciBlPXRoaXMsbj0wO248dGhpcy5uZXh0Lmxlbmd0aDtuKz0yKWZvcih2YXIgcj0wO3I8dC5uZXh0Lmxlbmd0aDtyKz0yKWlmKGUubmV4dFtuXT09dC5uZXh0W3JdKXJldHVybiEwO3JldHVybiExfSwkLnByb3RvdHlwZS5maWxsQmVmb3JlPWZ1bmN0aW9uKHQsZSxuKXt2b2lkIDA9PT1lJiYoZT0hMSksdm9pZCAwPT09biYmKG49MCk7dmFyIHI9W3RoaXNdO2Z1bmN0aW9uIG8oaSxzKXt2YXIgYz1pLm1hdGNoRnJhZ21lbnQodCxuKTtpZihjJiYoIWV8fGMudmFsaWRFbmQpKXJldHVybiBhLmZyb20ocy5tYXAoKGZ1bmN0aW9uKHQpe3JldHVybiB0LmNyZWF0ZUFuZEZpbGwoKX0pKSk7Zm9yKHZhciBsPTA7bDxpLm5leHQubGVuZ3RoO2wrPTIpe3ZhciBwPWkubmV4dFtsXSx1PWkubmV4dFtsKzFdO2lmKCFwLmlzVGV4dCYmIXAuaGFzUmVxdWlyZWRBdHRycygpJiYtMT09ci5pbmRleE9mKHUpKXtyLnB1c2godSk7dmFyIGg9byh1LHMuY29uY2F0KHApKTtpZihoKXJldHVybiBofX19cmV0dXJuIG8odGhpcyxbXSl9LCQucHJvdG90eXBlLmZpbmRXcmFwcGluZz1mdW5jdGlvbih0KXtmb3IodmFyIGU9dGhpcyxuPTA7bjx0aGlzLndyYXBDYWNoZS5sZW5ndGg7bis9MilpZihlLndyYXBDYWNoZVtuXT09dClyZXR1cm4gZS53cmFwQ2FjaGVbbisxXTt2YXIgcj10aGlzLmNvbXB1dGVXcmFwcGluZyh0KTtyZXR1cm4gdGhpcy53cmFwQ2FjaGUucHVzaCh0LHIpLHJ9LCQucHJvdG90eXBlLmNvbXB1dGVXcmFwcGluZz1mdW5jdGlvbih0KXt2YXIgZT1PYmplY3QuY3JlYXRlKG51bGwpLG49W3ttYXRjaDp0aGlzLHR5cGU6bnVsbCx2aWE6bnVsbH1dO3doaWxlKG4ubGVuZ3RoKXt2YXIgcj1uLnNoaWZ0KCksbz1yLm1hdGNoO2lmKG8ubWF0Y2hUeXBlKHQpKXtmb3IodmFyIGk9W10scz1yO3MudHlwZTtzPXMudmlhKWkucHVzaChzLnR5cGUpO3JldHVybiBpLnJldmVyc2UoKX1mb3IodmFyIGE9MDthPG8ubmV4dC5sZW5ndGg7YSs9Mil7dmFyIGM9by5uZXh0W2FdO2MuaXNMZWFmfHxjLmhhc1JlcXVpcmVkQXR0cnMoKXx8Yy5uYW1lIGluIGV8fHIudHlwZSYmIW8ubmV4dFthKzFdLnZhbGlkRW5kfHwobi5wdXNoKHttYXRjaDpjLmNvbnRlbnRNYXRjaCx0eXBlOmMsdmlhOnJ9KSxlW2MubmFtZV09ITApfX19LFYuZWRnZUNvdW50LmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLm5leHQubGVuZ3RoPj4xfSwkLnByb3RvdHlwZS5lZGdlPWZ1bmN0aW9uKHQpe3ZhciBlPXQ8PDE7aWYoZT50aGlzLm5leHQubGVuZ3RoKXRocm93IG5ldyBSYW5nZUVycm9yKCJUaGVyZSdzIG5vICIrdCsidGggZWRnZSBpbiB0aGlzIGNvbnRlbnQgbWF0Y2giKTtyZXR1cm57dHlwZTp0aGlzLm5leHRbZV0sbmV4dDp0aGlzLm5leHRbZSsxXX19LCQucHJvdG90eXBlLnRvU3RyaW5nPWZ1bmN0aW9uKCl7dmFyIHQ9W107ZnVuY3Rpb24gZShuKXt0LnB1c2gobik7Zm9yKHZhciByPTE7cjxuLm5leHQubGVuZ3RoO3IrPTIpLTE9PXQuaW5kZXhPZihuLm5leHRbcl0pJiZlKG4ubmV4dFtyXSl9cmV0dXJuIGUodGhpcyksdC5tYXAoKGZ1bmN0aW9uKGUsbil7Zm9yKHZhciByPW4rKGUudmFsaWRFbmQ/IioiOiIgIikrIiAiLG89MDtvPGUubmV4dC5sZW5ndGg7bys9MilyKz0obz8iLCAiOiIiKStlLm5leHRbb10ubmFtZSsiLT4iK3QuaW5kZXhPZihlLm5leHRbbysxXSk7cmV0dXJuIHJ9KSkuam9pbigiXG4iKX0sT2JqZWN0LmRlZmluZVByb3BlcnRpZXMoJC5wcm90b3R5cGUsViksJC5lbXB0eT1uZXcgJCghMCk7dmFyIEw9ZnVuY3Rpb24odCxlKXt0aGlzLnN0cmluZz10LHRoaXMubm9kZVR5cGVzPWUsdGhpcy5pbmxpbmU9bnVsbCx0aGlzLnBvcz0wLHRoaXMudG9rZW5zPXQuc3BsaXQoL1xzKig/PVxifFxXfCQpLyksIiI9PXRoaXMudG9rZW5zW3RoaXMudG9rZW5zLmxlbmd0aC0xXSYmdGhpcy50b2tlbnMucG9wKCksIiI9PXRoaXMudG9rZW5zWzBdJiZ0aGlzLnRva2Vucy51bnNoaWZ0KCl9LEo9e25leHQ6e319O2Z1bmN0aW9uIHEodCl7dmFyIGU9W107ZG97ZS5wdXNoKFcodCkpfXdoaWxlKHQuZWF0KCJ8IikpO3JldHVybiAxPT1lLmxlbmd0aD9lWzBdOnt0eXBlOiJjaG9pY2UiLGV4cHJzOmV9fWZ1bmN0aW9uIFcodCl7dmFyIGU9W107ZG97ZS5wdXNoKEgodCkpfXdoaWxlKHQubmV4dCYmIikiIT10Lm5leHQmJiJ8IiE9dC5uZXh0KTtyZXR1cm4gMT09ZS5sZW5ndGg/ZVswXTp7dHlwZToic2VxIixleHByczplfX1mdW5jdGlvbiBIKHQpe2Zvcih2YXIgZT1YKHQpOzspaWYodC5lYXQoIisiKSllPXt0eXBlOiJwbHVzIixleHByOmV9O2Vsc2UgaWYodC5lYXQoIioiKSllPXt0eXBlOiJzdGFyIixleHByOmV9O2Vsc2UgaWYodC5lYXQoIj8iKSllPXt0eXBlOiJvcHQiLGV4cHI6ZX07ZWxzZXtpZighdC5lYXQoInsiKSlicmVhaztlPVUodCxlKX1yZXR1cm4gZX1mdW5jdGlvbiBLKHQpey9cRC8udGVzdCh0Lm5leHQpJiZ0LmVycigiRXhwZWN0ZWQgbnVtYmVyLCBnb3QgJyIrdC5uZXh0KyInIik7dmFyIGU9TnVtYmVyKHQubmV4dCk7cmV0dXJuIHQucG9zKyssZX1mdW5jdGlvbiBVKHQsZSl7dmFyIG49Syh0KSxyPW47cmV0dXJuIHQuZWF0KCIsIikmJihyPSJ9IiE9dC5uZXh0P0sodCk6LTEpLHQuZWF0KCJ9Iil8fHQuZXJyKCJVbmNsb3NlZCBicmFjZWQgcmFuZ2UiKSx7dHlwZToicmFuZ2UiLG1pbjpuLG1heDpyLGV4cHI6ZX19ZnVuY3Rpb24gRyh0LGUpe3ZhciBuPXQubm9kZVR5cGVzLHI9bltlXTtpZihyKXJldHVybltyXTt2YXIgbz1bXTtmb3IodmFyIGkgaW4gbil7dmFyIHM9bltpXTtzLmdyb3Vwcy5pbmRleE9mKGUpPi0xJiZvLnB1c2gocyl9cmV0dXJuIDA9PW8ubGVuZ3RoJiZ0LmVycigiTm8gbm9kZSB0eXBlIG9yIGdyb3VwICciK2UrIicgZm91bmQiKSxvfWZ1bmN0aW9uIFgodCl7aWYodC5lYXQoIigiKSl7dmFyIGU9cSh0KTtyZXR1cm4gdC5lYXQoIikiKXx8dC5lcnIoIk1pc3NpbmcgY2xvc2luZyBwYXJlbiIpLGV9aWYoIS9cVy8udGVzdCh0Lm5leHQpKXt2YXIgbj1HKHQsdC5uZXh0KS5tYXAoKGZ1bmN0aW9uKGUpe3JldHVybiBudWxsPT10LmlubGluZT90LmlubGluZT1lLmlzSW5saW5lOnQuaW5saW5lIT1lLmlzSW5saW5lJiZ0LmVycigiTWl4aW5nIGlubGluZSBhbmQgYmxvY2sgY29udGVudCIpLHt0eXBlOiJuYW1lIix2YWx1ZTplfX0pKTtyZXR1cm4gdC5wb3MrKywxPT1uLmxlbmd0aD9uWzBdOnt0eXBlOiJjaG9pY2UiLGV4cHJzOm59fXQuZXJyKCJVbmV4cGVjdGVkIHRva2VuICciK3QubmV4dCsiJyIpfWZ1bmN0aW9uIFkodCl7dmFyIGU9W1tdXTtyZXR1cm4gbyhpKHQsMCksbigpKSxlO2Z1bmN0aW9uIG4oKXtyZXR1cm4gZS5wdXNoKFtdKS0xfWZ1bmN0aW9uIHIodCxuLHIpe3ZhciBvPXt0ZXJtOnIsdG86bn07cmV0dXJuIGVbdF0ucHVzaChvKSxvfWZ1bmN0aW9uIG8odCxlKXt0LmZvckVhY2goKGZ1bmN0aW9uKHQpe3JldHVybiB0LnRvPWV9KSl9ZnVuY3Rpb24gaSh0LGUpe2lmKCJjaG9pY2UiPT10LnR5cGUpcmV0dXJuIHQuZXhwcnMucmVkdWNlKChmdW5jdGlvbih0LG4pe3JldHVybiB0LmNvbmNhdChpKG4sZSkpfSksW10pO2lmKCJzZXEiPT10LnR5cGUpZm9yKHZhciBzPTA7O3MrKyl7dmFyIGE9aSh0LmV4cHJzW3NdLGUpO2lmKHM9PXQuZXhwcnMubGVuZ3RoLTEpcmV0dXJuIGE7byhhLGU9bigpKX1lbHNle2lmKCJzdGFyIj09dC50eXBlKXt2YXIgYz1uKCk7cmV0dXJuIHIoZSxjKSxvKGkodC5leHByLGMpLGMpLFtyKGMpXX1pZigicGx1cyI9PXQudHlwZSl7dmFyIGw9bigpO3JldHVybiBvKGkodC5leHByLGUpLGwpLG8oaSh0LmV4cHIsbCksbCksW3IobCldfWlmKCJvcHQiPT10LnR5cGUpcmV0dXJuW3IoZSldLmNvbmNhdChpKHQuZXhwcixlKSk7aWYoInJhbmdlIj09dC50eXBlKXtmb3IodmFyIHA9ZSx1PTA7dTx0Lm1pbjt1Kyspe3ZhciBoPW4oKTtvKGkodC5leHByLHApLGgpLHA9aH1pZigtMT09dC5tYXgpbyhpKHQuZXhwcixwKSxwKTtlbHNlIGZvcih2YXIgZj10Lm1pbjtmPHQubWF4O2YrKyl7dmFyIGQ9bigpO3IocCxkKSxvKGkodC5leHByLHApLGQpLHA9ZH1yZXR1cm5bcihwKV19aWYoIm5hbWUiPT10LnR5cGUpcmV0dXJuW3IoZSxudWxsLHQudmFsdWUpXX19fWZ1bmN0aW9uIFEodCxlKXtyZXR1cm4gdC1lfWZ1bmN0aW9uIFoodCxlKXt2YXIgbj1bXTtyZXR1cm4gcihlKSxuLnNvcnQoUSk7ZnVuY3Rpb24gcihlKXt2YXIgbz10W2VdO2lmKDE9PW8ubGVuZ3RoJiYhb1swXS50ZXJtKXJldHVybiByKG9bMF0udG8pO24ucHVzaChlKTtmb3IodmFyIGk9MDtpPG8ubGVuZ3RoO2krKyl7dmFyIHM9b1tpXSxhPXMudGVybSxjPXMudG87YXx8LTEhPW4uaW5kZXhPZihjKXx8cihjKX19fWZ1bmN0aW9uIHR0KHQpe3ZhciBlPU9iamVjdC5jcmVhdGUobnVsbCk7cmV0dXJuIG4oWih0LDApKTtmdW5jdGlvbiBuKHIpe3ZhciBvPVtdO3IuZm9yRWFjaCgoZnVuY3Rpb24oZSl7dFtlXS5mb3JFYWNoKChmdW5jdGlvbihlKXt2YXIgbj1lLnRlcm0scj1lLnRvO2lmKG4pe3ZhciBpPW8uaW5kZXhPZihuKSxzPWk+LTEmJm9baSsxXTtaKHQscikuZm9yRWFjaCgoZnVuY3Rpb24odCl7c3x8by5wdXNoKG4scz1bXSksLTE9PXMuaW5kZXhPZih0KSYmcy5wdXNoKHQpfSkpfX0pKX0pKTtmb3IodmFyIGk9ZVtyLmpvaW4oIiwiKV09bmV3ICQoci5pbmRleE9mKHQubGVuZ3RoLTEpPi0xKSxzPTA7czxvLmxlbmd0aDtzKz0yKXt2YXIgYT1vW3MrMV0uc29ydChRKTtpLm5leHQucHVzaChvW3NdLGVbYS5qb2luKCIsIildfHxuKGEpKX1yZXR1cm4gaX19ZnVuY3Rpb24gZXQodCxlKXtmb3IodmFyIG49MCxyPVt0XTtuPHIubGVuZ3RoO24rKyl7Zm9yKHZhciBvPXJbbl0saT0hby52YWxpZEVuZCxzPVtdLGE9MDthPG8ubmV4dC5sZW5ndGg7YSs9Mil7dmFyIGM9by5uZXh0W2FdLGw9by5uZXh0W2ErMV07cy5wdXNoKGMubmFtZSksIWl8fGMuaXNUZXh0fHxjLmhhc1JlcXVpcmVkQXR0cnMoKXx8KGk9ITEpLC0xPT1yLmluZGV4T2YobCkmJnIucHVzaChsKX1pJiZlLmVycigiT25seSBub24tZ2VuZXJhdGFibGUgbm9kZXMgKCIrcy5qb2luKCIsICIpKyIpIGluIGEgcmVxdWlyZWQgcG9zaXRpb24iKX19ZnVuY3Rpb24gbnQodCl7dmFyIGU9T2JqZWN0LmNyZWF0ZShudWxsKTtmb3IodmFyIG4gaW4gdCl7dmFyIHI9dFtuXTtpZighci5oYXNEZWZhdWx0KXJldHVybiBudWxsO2Vbbl09ci5kZWZhdWx0fXJldHVybiBlfWZ1bmN0aW9uIHJ0KHQsZSl7dmFyIG49T2JqZWN0LmNyZWF0ZShudWxsKTtmb3IodmFyIHIgaW4gdCl7dmFyIG89ZSYmZVtyXTtpZih2b2lkIDA9PT1vKXt2YXIgaT10W3JdO2lmKCFpLmhhc0RlZmF1bHQpdGhyb3cgbmV3IFJhbmdlRXJyb3IoIk5vIHZhbHVlIHN1cHBsaWVkIGZvciBhdHRyaWJ1dGUgIityKTtvPWkuZGVmYXVsdH1uW3JdPW99cmV0dXJuIG59ZnVuY3Rpb24gb3QodCl7dmFyIGU9T2JqZWN0LmNyZWF0ZShudWxsKTtpZih0KWZvcih2YXIgbiBpbiB0KWVbbl09bmV3IGF0KHRbbl0pO3JldHVybiBlfUoubmV4dC5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy50b2tlbnNbdGhpcy5wb3NdfSxMLnByb3RvdHlwZS5lYXQ9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMubmV4dD09dCYmKHRoaXMucG9zKyt8fCEwKX0sTC5wcm90b3R5cGUuZXJyPWZ1bmN0aW9uKHQpe3Rocm93IG5ldyBTeW50YXhFcnJvcih0KyIgKGluIGNvbnRlbnQgZXhwcmVzc2lvbiAnIit0aGlzLnN0cmluZysiJykiKX0sT2JqZWN0LmRlZmluZVByb3BlcnRpZXMoTC5wcm90b3R5cGUsSik7dmFyIGl0PWZ1bmN0aW9uKHQsZSxuKXt0aGlzLm5hbWU9dCx0aGlzLnNjaGVtYT1lLHRoaXMuc3BlYz1uLHRoaXMuZ3JvdXBzPW4uZ3JvdXA/bi5ncm91cC5zcGxpdCgiICIpOltdLHRoaXMuYXR0cnM9b3Qobi5hdHRycyksdGhpcy5kZWZhdWx0QXR0cnM9bnQodGhpcy5hdHRycyksdGhpcy5jb250ZW50TWF0Y2g9bnVsbCx0aGlzLm1hcmtTZXQ9bnVsbCx0aGlzLmlubGluZUNvbnRlbnQ9bnVsbCx0aGlzLmlzQmxvY2s9IShuLmlubGluZXx8InRleHQiPT10KSx0aGlzLmlzVGV4dD0idGV4dCI9PXR9LHN0PXtpc0lubGluZTp7fSxpc1RleHRibG9jazp7fSxpc0xlYWY6e30saXNBdG9tOnt9fTtzdC5pc0lubGluZS5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4hdGhpcy5pc0Jsb2NrfSxzdC5pc1RleHRibG9jay5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5pc0Jsb2NrJiZ0aGlzLmlubGluZUNvbnRlbnR9LHN0LmlzTGVhZi5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jb250ZW50TWF0Y2g9PSQuZW1wdHl9LHN0LmlzQXRvbS5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5pc0xlYWZ8fHRoaXMuc3BlYy5hdG9tfSxpdC5wcm90b3R5cGUuaGFzUmVxdWlyZWRBdHRycz1mdW5jdGlvbih0KXt2YXIgZT10aGlzO2Zvcih2YXIgbiBpbiBlLmF0dHJzKWlmKGUuYXR0cnNbbl0uaXNSZXF1aXJlZCYmKCF0fHwhKG4gaW4gdCkpKXJldHVybiEwO3JldHVybiExfSxpdC5wcm90b3R5cGUuY29tcGF0aWJsZUNvbnRlbnQ9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXM9PXR8fHRoaXMuY29udGVudE1hdGNoLmNvbXBhdGlibGUodC5jb250ZW50TWF0Y2gpfSxpdC5wcm90b3R5cGUuY29tcHV0ZUF0dHJzPWZ1bmN0aW9uKHQpe3JldHVybiF0JiZ0aGlzLmRlZmF1bHRBdHRycz90aGlzLmRlZmF1bHRBdHRyczpydCh0aGlzLmF0dHJzLHQpfSxpdC5wcm90b3R5cGUuY3JlYXRlPWZ1bmN0aW9uKHQsZSxuKXtpZih0aGlzLmlzVGV4dCl0aHJvdyBuZXcgRXJyb3IoIk5vZGVUeXBlLmNyZWF0ZSBjYW4ndCBjb25zdHJ1Y3QgdGV4dCBub2RlcyIpO3JldHVybiBuZXcgXyh0aGlzLHRoaXMuY29tcHV0ZUF0dHJzKHQpLGEuZnJvbShlKSxoLnNldEZyb20obikpfSxpdC5wcm90b3R5cGUuY3JlYXRlQ2hlY2tlZD1mdW5jdGlvbih0LGUsbil7aWYoZT1hLmZyb20oZSksIXRoaXMudmFsaWRDb250ZW50KGUpKXRocm93IG5ldyBSYW5nZUVycm9yKCJJbnZhbGlkIGNvbnRlbnQgZm9yIG5vZGUgIit0aGlzLm5hbWUpO3JldHVybiBuZXcgXyh0aGlzLHRoaXMuY29tcHV0ZUF0dHJzKHQpLGUsaC5zZXRGcm9tKG4pKX0saXQucHJvdG90eXBlLmNyZWF0ZUFuZEZpbGw9ZnVuY3Rpb24odCxlLG4pe2lmKHQ9dGhpcy5jb21wdXRlQXR0cnModCksZT1hLmZyb20oZSksZS5zaXplKXt2YXIgcj10aGlzLmNvbnRlbnRNYXRjaC5maWxsQmVmb3JlKGUpO2lmKCFyKXJldHVybiBudWxsO2U9ci5hcHBlbmQoZSl9dmFyIG89dGhpcy5jb250ZW50TWF0Y2gubWF0Y2hGcmFnbWVudChlKS5maWxsQmVmb3JlKGEuZW1wdHksITApO3JldHVybiBvP25ldyBfKHRoaXMsdCxlLmFwcGVuZChvKSxoLnNldEZyb20obikpOm51bGx9LGl0LnByb3RvdHlwZS52YWxpZENvbnRlbnQ9ZnVuY3Rpb24odCl7dmFyIGU9dGhpcyxuPXRoaXMuY29udGVudE1hdGNoLm1hdGNoRnJhZ21lbnQodCk7aWYoIW58fCFuLnZhbGlkRW5kKXJldHVybiExO2Zvcih2YXIgcj0wO3I8dC5jaGlsZENvdW50O3IrKylpZighZS5hbGxvd3NNYXJrcyh0LmNoaWxkKHIpLm1hcmtzKSlyZXR1cm4hMTtyZXR1cm4hMH0saXQucHJvdG90eXBlLmFsbG93c01hcmtUeXBlPWZ1bmN0aW9uKHQpe3JldHVybiBudWxsPT10aGlzLm1hcmtTZXR8fHRoaXMubWFya1NldC5pbmRleE9mKHQpPi0xfSxpdC5wcm90b3R5cGUuYWxsb3dzTWFya3M9ZnVuY3Rpb24odCl7dmFyIGU9dGhpcztpZihudWxsPT10aGlzLm1hcmtTZXQpcmV0dXJuITA7Zm9yKHZhciBuPTA7bjx0Lmxlbmd0aDtuKyspaWYoIWUuYWxsb3dzTWFya1R5cGUodFtuXS50eXBlKSlyZXR1cm4hMTtyZXR1cm4hMH0saXQucHJvdG90eXBlLmFsbG93ZWRNYXJrcz1mdW5jdGlvbih0KXt2YXIgZSxuPXRoaXM7aWYobnVsbD09dGhpcy5tYXJrU2V0KXJldHVybiB0O2Zvcih2YXIgcj0wO3I8dC5sZW5ndGg7cisrKW4uYWxsb3dzTWFya1R5cGUodFtyXS50eXBlKT9lJiZlLnB1c2godFtyXSk6ZXx8KGU9dC5zbGljZSgwLHIpKTtyZXR1cm4gZT9lLmxlbmd0aD9lOmguZW1wdHk6dH0saXQuY29tcGlsZT1mdW5jdGlvbih0LGUpe3ZhciBuPU9iamVjdC5jcmVhdGUobnVsbCk7dC5mb3JFYWNoKChmdW5jdGlvbih0LHIpe3JldHVybiBuW3RdPW5ldyBpdCh0LGUscil9KSk7dmFyIHI9ZS5zcGVjLnRvcE5vZGV8fCJkb2MiO2lmKCFuW3JdKXRocm93IG5ldyBSYW5nZUVycm9yKCJTY2hlbWEgaXMgbWlzc2luZyBpdHMgdG9wIG5vZGUgdHlwZSAoJyIrcisiJykiKTtpZighbi50ZXh0KXRocm93IG5ldyBSYW5nZUVycm9yKCJFdmVyeSBzY2hlbWEgbmVlZHMgYSAndGV4dCcgdHlwZSIpO2Zvcih2YXIgbyBpbiBuLnRleHQuYXR0cnMpdGhyb3cgbmV3IFJhbmdlRXJyb3IoIlRoZSB0ZXh0IG5vZGUgdHlwZSBzaG91bGQgbm90IGhhdmUgYXR0cmlidXRlcyIpO3JldHVybiBufSxPYmplY3QuZGVmaW5lUHJvcGVydGllcyhpdC5wcm90b3R5cGUsc3QpO3ZhciBhdD1mdW5jdGlvbih0KXt0aGlzLmhhc0RlZmF1bHQ9T2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHQsImRlZmF1bHQiKSx0aGlzLmRlZmF1bHQ9dC5kZWZhdWx0fSxjdD17aXNSZXF1aXJlZDp7fX07Y3QuaXNSZXF1aXJlZC5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4hdGhpcy5oYXNEZWZhdWx0fSxPYmplY3QuZGVmaW5lUHJvcGVydGllcyhhdC5wcm90b3R5cGUsY3QpO3ZhciBsdD1mdW5jdGlvbih0LGUsbixyKXt0aGlzLm5hbWU9dCx0aGlzLnNjaGVtYT1uLHRoaXMuc3BlYz1yLHRoaXMuYXR0cnM9b3Qoci5hdHRycyksdGhpcy5yYW5rPWUsdGhpcy5leGNsdWRlZD1udWxsO3ZhciBvPW50KHRoaXMuYXR0cnMpO3RoaXMuaW5zdGFuY2U9byYmbmV3IGgodGhpcyxvKX07bHQucHJvdG90eXBlLmNyZWF0ZT1mdW5jdGlvbih0KXtyZXR1cm4hdCYmdGhpcy5pbnN0YW5jZT90aGlzLmluc3RhbmNlOm5ldyBoKHRoaXMscnQodGhpcy5hdHRycyx0KSl9LGx0LmNvbXBpbGU9ZnVuY3Rpb24odCxlKXt2YXIgbj1PYmplY3QuY3JlYXRlKG51bGwpLHI9MDtyZXR1cm4gdC5mb3JFYWNoKChmdW5jdGlvbih0LG8pe3JldHVybiBuW3RdPW5ldyBsdCh0LHIrKyxlLG8pfSkpLG59LGx0LnByb3RvdHlwZS5yZW1vdmVGcm9tU2V0PWZ1bmN0aW9uKHQpe2Zvcih2YXIgZT10aGlzLG49MDtuPHQubGVuZ3RoO24rKylpZih0W25dLnR5cGU9PWUpcmV0dXJuIHQuc2xpY2UoMCxuKS5jb25jYXQodC5zbGljZShuKzEpKTtyZXR1cm4gdH0sbHQucHJvdG90eXBlLmlzSW5TZXQ9ZnVuY3Rpb24odCl7Zm9yKHZhciBlPXRoaXMsbj0wO248dC5sZW5ndGg7bisrKWlmKHRbbl0udHlwZT09ZSlyZXR1cm4gdFtuXX0sbHQucHJvdG90eXBlLmV4Y2x1ZGVzPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLmV4Y2x1ZGVkLmluZGV4T2YodCk+LTF9O3ZhciBwdD1mdW5jdGlvbih0KXt2YXIgZT10aGlzO2Zvcih2YXIgbiBpbiB0aGlzLnNwZWM9e30sdCllLnNwZWNbbl09dFtuXTt0aGlzLnNwZWMubm9kZXM9by5mcm9tKHQubm9kZXMpLHRoaXMuc3BlYy5tYXJrcz1vLmZyb20odC5tYXJrcyksdGhpcy5ub2Rlcz1pdC5jb21waWxlKHRoaXMuc3BlYy5ub2Rlcyx0aGlzKSx0aGlzLm1hcmtzPWx0LmNvbXBpbGUodGhpcy5zcGVjLm1hcmtzLHRoaXMpO3ZhciByPU9iamVjdC5jcmVhdGUobnVsbCk7Zm9yKHZhciBpIGluIGUubm9kZXMpe2lmKGkgaW4gZS5tYXJrcyl0aHJvdyBuZXcgUmFuZ2VFcnJvcihpKyIgY2FuIG5vdCBiZSBib3RoIGEgbm9kZSBhbmQgYSBtYXJrIik7dmFyIHM9ZS5ub2Rlc1tpXSxhPXMuc3BlYy5jb250ZW50fHwiIixjPXMuc3BlYy5tYXJrcztzLmNvbnRlbnRNYXRjaD1yW2FdfHwoclthXT0kLnBhcnNlKGEsZS5ub2RlcykpLHMuaW5saW5lQ29udGVudD1zLmNvbnRlbnRNYXRjaC5pbmxpbmVDb250ZW50LHMubWFya1NldD0iXyI9PWM/bnVsbDpjP3V0KGUsYy5zcGxpdCgiICIpKToiIiE9YyYmcy5pbmxpbmVDb250ZW50P251bGw6W119Zm9yKHZhciBsIGluIGUubWFya3Mpe3ZhciBwPWUubWFya3NbbF0sdT1wLnNwZWMuZXhjbHVkZXM7cC5leGNsdWRlZD1udWxsPT11P1twXToiIj09dT9bXTp1dChlLHUuc3BsaXQoIiAiKSl9dGhpcy5ub2RlRnJvbUpTT049dGhpcy5ub2RlRnJvbUpTT04uYmluZCh0aGlzKSx0aGlzLm1hcmtGcm9tSlNPTj10aGlzLm1hcmtGcm9tSlNPTi5iaW5kKHRoaXMpLHRoaXMudG9wTm9kZVR5cGU9dGhpcy5ub2Rlc1t0aGlzLnNwZWMudG9wTm9kZXx8ImRvYyJdLHRoaXMuY2FjaGVkPU9iamVjdC5jcmVhdGUobnVsbCksdGhpcy5jYWNoZWQud3JhcHBpbmdzPU9iamVjdC5jcmVhdGUobnVsbCl9O2Z1bmN0aW9uIHV0KHQsZSl7Zm9yKHZhciBuPVtdLHI9MDtyPGUubGVuZ3RoO3IrKyl7dmFyIG89ZVtyXSxpPXQubWFya3Nbb10scz1pO2lmKGkpbi5wdXNoKGkpO2Vsc2UgZm9yKHZhciBhIGluIHQubWFya3Mpe3ZhciBjPXQubWFya3NbYV07KCJfIj09b3x8Yy5zcGVjLmdyb3VwJiZjLnNwZWMuZ3JvdXAuc3BsaXQoIiAiKS5pbmRleE9mKG8pPi0xKSYmbi5wdXNoKHM9Yyl9aWYoIXMpdGhyb3cgbmV3IFN5bnRheEVycm9yKCJVbmtub3duIG1hcmsgdHlwZTogJyIrZVtyXSsiJyIpfXJldHVybiBufXB0LnByb3RvdHlwZS5ub2RlPWZ1bmN0aW9uKHQsZSxuLHIpe2lmKCJzdHJpbmciPT10eXBlb2YgdCl0PXRoaXMubm9kZVR5cGUodCk7ZWxzZXtpZighKHQgaW5zdGFuY2VvZiBpdCkpdGhyb3cgbmV3IFJhbmdlRXJyb3IoIkludmFsaWQgbm9kZSB0eXBlOiAiK3QpO2lmKHQuc2NoZW1hIT10aGlzKXRocm93IG5ldyBSYW5nZUVycm9yKCJOb2RlIHR5cGUgZnJvbSBkaWZmZXJlbnQgc2NoZW1hIHVzZWQgKCIrdC5uYW1lKyIpIil9cmV0dXJuIHQuY3JlYXRlQ2hlY2tlZChlLG4scil9LHB0LnByb3RvdHlwZS50ZXh0PWZ1bmN0aW9uKHQsZSl7dmFyIG49dGhpcy5ub2Rlcy50ZXh0O3JldHVybiBuZXcgQihuLG4uZGVmYXVsdEF0dHJzLHQsaC5zZXRGcm9tKGUpKX0scHQucHJvdG90eXBlLm1hcms9ZnVuY3Rpb24odCxlKXtyZXR1cm4ic3RyaW5nIj09dHlwZW9mIHQmJih0PXRoaXMubWFya3NbdF0pLHQuY3JlYXRlKGUpfSxwdC5wcm90b3R5cGUubm9kZUZyb21KU09OPWZ1bmN0aW9uKHQpe3JldHVybiBfLmZyb21KU09OKHRoaXMsdCl9LHB0LnByb3RvdHlwZS5tYXJrRnJvbUpTT049ZnVuY3Rpb24odCl7cmV0dXJuIGguZnJvbUpTT04odGhpcyx0KX0scHQucHJvdG90eXBlLm5vZGVUeXBlPWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMubm9kZXNbdF07aWYoIWUpdGhyb3cgbmV3IFJhbmdlRXJyb3IoIlVua25vd24gbm9kZSB0eXBlOiAiK3QpO3JldHVybiBlfTt2YXIgaHQ9ZnVuY3Rpb24odCxlKXt2YXIgbj10aGlzO3RoaXMuc2NoZW1hPXQsdGhpcy5ydWxlcz1lLHRoaXMudGFncz1bXSx0aGlzLnN0eWxlcz1bXSxlLmZvckVhY2goKGZ1bmN0aW9uKHQpe3QudGFnP24udGFncy5wdXNoKHQpOnQuc3R5bGUmJm4uc3R5bGVzLnB1c2godCl9KSl9O2h0LnByb3RvdHlwZS5wYXJzZT1mdW5jdGlvbih0LGUpe3ZvaWQgMD09PWUmJihlPXt9KTt2YXIgbj1uZXcgYnQodGhpcyxlLCExKTtyZXR1cm4gbi5hZGRBbGwodCxudWxsLGUuZnJvbSxlLnRvKSxuLmZpbmlzaCgpfSxodC5wcm90b3R5cGUucGFyc2VTbGljZT1mdW5jdGlvbih0LGUpe3ZvaWQgMD09PWUmJihlPXt9KTt2YXIgbj1uZXcgYnQodGhpcyxlLCEwKTtyZXR1cm4gbi5hZGRBbGwodCxudWxsLGUuZnJvbSxlLnRvKSxkLm1heE9wZW4obi5maW5pc2goKSl9LGh0LnByb3RvdHlwZS5tYXRjaFRhZz1mdW5jdGlvbih0LGUpe2Zvcih2YXIgbj10aGlzLHI9MDtyPHRoaXMudGFncy5sZW5ndGg7cisrKXt2YXIgbz1uLnRhZ3Nbcl07aWYoQ3QodCxvLnRhZykmJih2b2lkIDA9PT1vLm5hbWVzcGFjZXx8dC5uYW1lc3BhY2VVUkk9PW8ubmFtZXNwYWNlKSYmKCFvLmNvbnRleHR8fGUubWF0Y2hlc0NvbnRleHQoby5jb250ZXh0KSkpe2lmKG8uZ2V0QXR0cnMpe3ZhciBpPW8uZ2V0QXR0cnModCk7aWYoITE9PT1pKWNvbnRpbnVlO28uYXR0cnM9aX1yZXR1cm4gb319fSxodC5wcm90b3R5cGUubWF0Y2hTdHlsZT1mdW5jdGlvbih0LGUsbil7Zm9yKHZhciByPXRoaXMsbz0wO288dGhpcy5zdHlsZXMubGVuZ3RoO28rKyl7dmFyIGk9ci5zdHlsZXNbb107aWYoISgwIT1pLnN0eWxlLmluZGV4T2YodCl8fGkuY29udGV4dCYmIW4ubWF0Y2hlc0NvbnRleHQoaS5jb250ZXh0KXx8aS5zdHlsZS5sZW5ndGg+dC5sZW5ndGgmJig2MSE9aS5zdHlsZS5jaGFyQ29kZUF0KHQubGVuZ3RoKXx8aS5zdHlsZS5zbGljZSh0Lmxlbmd0aCsxKSE9ZSkpKXtpZihpLmdldEF0dHJzKXt2YXIgcz1pLmdldEF0dHJzKGUpO2lmKCExPT09cyljb250aW51ZTtpLmF0dHJzPXN9cmV0dXJuIGl9fX0saHQuc2NoZW1hUnVsZXM9ZnVuY3Rpb24odCl7dmFyIGU9W107ZnVuY3Rpb24gbih0KXtmb3IodmFyIG49bnVsbD09dC5wcmlvcml0eT81MDp0LnByaW9yaXR5LHI9MDtyPGUubGVuZ3RoO3IrKyl7dmFyIG89ZVtyXSxpPW51bGw9PW8ucHJpb3JpdHk/NTA6by5wcmlvcml0eTtpZihpPG4pYnJlYWt9ZS5zcGxpY2UociwwLHQpfXZhciByPWZ1bmN0aW9uKGUpe3ZhciByPXQubWFya3NbZV0uc3BlYy5wYXJzZURPTTtyJiZyLmZvckVhY2goKGZ1bmN0aW9uKHQpe24odD1NdCh0KSksdC5tYXJrPWV9KSl9O2Zvcih2YXIgbyBpbiB0Lm1hcmtzKXIobyk7dmFyIGk9ZnVuY3Rpb24oZSl7dmFyIHI9dC5ub2Rlc1tzXS5zcGVjLnBhcnNlRE9NO3ImJnIuZm9yRWFjaCgoZnVuY3Rpb24odCl7bih0PU10KHQpKSx0Lm5vZGU9c30pKX07Zm9yKHZhciBzIGluIHQubm9kZXMpaShvKTtyZXR1cm4gZX0saHQuZnJvbVNjaGVtYT1mdW5jdGlvbih0KXtyZXR1cm4gdC5jYWNoZWQuZG9tUGFyc2VyfHwodC5jYWNoZWQuZG9tUGFyc2VyPW5ldyBodCh0LGh0LnNjaGVtYVJ1bGVzKHQpKSl9O3ZhciBmdD17YWRkcmVzczohMCxhcnRpY2xlOiEwLGFzaWRlOiEwLGJsb2NrcXVvdGU6ITAsY2FudmFzOiEwLGRkOiEwLGRpdjohMCxkbDohMCxmaWVsZHNldDohMCxmaWdjYXB0aW9uOiEwLGZpZ3VyZTohMCxmb290ZXI6ITAsZm9ybTohMCxoMTohMCxoMjohMCxoMzohMCxoNDohMCxoNTohMCxoNjohMCxoZWFkZXI6ITAsaGdyb3VwOiEwLGhyOiEwLGxpOiEwLG5vc2NyaXB0OiEwLG9sOiEwLG91dHB1dDohMCxwOiEwLHByZTohMCxzZWN0aW9uOiEwLHRhYmxlOiEwLHRmb290OiEwLHVsOiEwfSxkdD17aGVhZDohMCxub3NjcmlwdDohMCxvYmplY3Q6ITAsc2NyaXB0OiEwLHN0eWxlOiEwLHRpdGxlOiEwfSx2dD17b2w6ITAsdWw6ITB9LG10PTEseXQ9MixndD00O2Z1bmN0aW9uIHd0KHQpe3JldHVybih0P210OjApfCgiZnVsbCI9PT10P3l0OjApfXZhciB4dD1mdW5jdGlvbih0LGUsbixyLG8saSl7dGhpcy50eXBlPXQsdGhpcy5hdHRycz1lLHRoaXMuc29saWQ9cix0aGlzLm1hdGNoPW98fChpJmd0P251bGw6dC5jb250ZW50TWF0Y2gpLHRoaXMub3B0aW9ucz1pLHRoaXMuY29udGVudD1bXSx0aGlzLm1hcmtzPW4sdGhpcy5hY3RpdmVNYXJrcz1oLm5vbmV9O3h0LnByb3RvdHlwZS5maW5kV3JhcHBpbmc9ZnVuY3Rpb24odCl7aWYoIXRoaXMubWF0Y2gpe2lmKCF0aGlzLnR5cGUpcmV0dXJuW107dmFyIGU9dGhpcy50eXBlLmNvbnRlbnRNYXRjaC5maWxsQmVmb3JlKGEuZnJvbSh0KSk7aWYoIWUpe3ZhciBuLHI9dGhpcy50eXBlLmNvbnRlbnRNYXRjaDtyZXR1cm4obj1yLmZpbmRXcmFwcGluZyh0LnR5cGUpKT8odGhpcy5tYXRjaD1yLG4pOm51bGx9dGhpcy5tYXRjaD10aGlzLnR5cGUuY29udGVudE1hdGNoLm1hdGNoRnJhZ21lbnQoZSl9cmV0dXJuIHRoaXMubWF0Y2guZmluZFdyYXBwaW5nKHQudHlwZSl9LHh0LnByb3RvdHlwZS5maW5pc2g9ZnVuY3Rpb24odCl7aWYoISh0aGlzLm9wdGlvbnMmbXQpKXt2YXIgZSxuPXRoaXMuY29udGVudFt0aGlzLmNvbnRlbnQubGVuZ3RoLTFdO24mJm4uaXNUZXh0JiYoZT0vWyBcdFxyXG5cdTAwMGNdKyQvLmV4ZWMobi50ZXh0KSkmJihuLnRleHQubGVuZ3RoPT1lWzBdLmxlbmd0aD90aGlzLmNvbnRlbnQucG9wKCk6dGhpcy5jb250ZW50W3RoaXMuY29udGVudC5sZW5ndGgtMV09bi53aXRoVGV4dChuLnRleHQuc2xpY2UoMCxuLnRleHQubGVuZ3RoLWVbMF0ubGVuZ3RoKSkpfXZhciByPWEuZnJvbSh0aGlzLmNvbnRlbnQpO3JldHVybiF0JiZ0aGlzLm1hdGNoJiYocj1yLmFwcGVuZCh0aGlzLm1hdGNoLmZpbGxCZWZvcmUoYS5lbXB0eSwhMCkpKSx0aGlzLnR5cGU/dGhpcy50eXBlLmNyZWF0ZSh0aGlzLmF0dHJzLHIsdGhpcy5tYXJrcyk6cn07dmFyIGJ0PWZ1bmN0aW9uKHQsZSxuKXt0aGlzLnBhcnNlcj10LHRoaXMub3B0aW9ucz1lLHRoaXMuaXNPcGVuPW4sdGhpcy5wZW5kaW5nTWFya3M9W107dmFyIHIsbz1lLnRvcE5vZGUsaT13dChlLnByZXNlcnZlV2hpdGVzcGFjZSl8KG4/Z3Q6MCk7cj1vP25ldyB4dChvLnR5cGUsby5hdHRycyxoLm5vbmUsITAsZS50b3BNYXRjaHx8by50eXBlLmNvbnRlbnRNYXRjaCxpKTpuZXcgeHQobj9udWxsOnQuc2NoZW1hLnRvcE5vZGVUeXBlLG51bGwsaC5ub25lLCEwLG51bGwsaSksdGhpcy5ub2Rlcz1bcl0sdGhpcy5vcGVuPTAsdGhpcy5maW5kPWUuZmluZFBvc2l0aW9ucyx0aGlzLm5lZWRzQmxvY2s9ITF9LGt0PXt0b3A6e30sY3VycmVudFBvczp7fX07ZnVuY3Rpb24gU3QodCl7Zm9yKHZhciBlPXQuZmlyc3RDaGlsZCxuPW51bGw7ZTtlPWUubmV4dFNpYmxpbmcpe3ZhciByPTE9PWUubm9kZVR5cGU/ZS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpOm51bGw7ciYmdnQuaGFzT3duUHJvcGVydHkocikmJm4/KG4uYXBwZW5kQ2hpbGQoZSksZT1uKToibGkiPT1yP249ZTpyJiYobj1udWxsKX19ZnVuY3Rpb24gQ3QodCxlKXtyZXR1cm4odC5tYXRjaGVzfHx0Lm1zTWF0Y2hlc1NlbGVjdG9yfHx0LndlYmtpdE1hdGNoZXNTZWxlY3Rvcnx8dC5tb3pNYXRjaGVzU2VsZWN0b3IpLmNhbGwodCxlKX1mdW5jdGlvbiBPdCh0KXt2YXIgZSxuPS9ccyooW1x3LV0rKVxzKjpccyooW147XSspL2cscj1bXTt3aGlsZShlPW4uZXhlYyh0KSlyLnB1c2goZVsxXSxlWzJdLnRyaW0oKSk7cmV0dXJuIHJ9ZnVuY3Rpb24gTXQodCl7dmFyIGU9e307Zm9yKHZhciBuIGluIHQpZVtuXT10W25dO3JldHVybiBlfWt0LnRvcC5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5ub2Rlc1t0aGlzLm9wZW5dfSxidC5wcm90b3R5cGUuYWRkRE9NPWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXM7aWYoMz09dC5ub2RlVHlwZSl0aGlzLmFkZFRleHROb2RlKHQpO2Vsc2UgaWYoMT09dC5ub2RlVHlwZSl7dmFyIG49dC5nZXRBdHRyaWJ1dGUoInN0eWxlIikscj1uP3RoaXMucmVhZFN0eWxlcyhPdChuKSk6bnVsbDtpZihudWxsIT1yKWZvcih2YXIgbz0wO288ci5sZW5ndGg7bysrKWUuYWRkUGVuZGluZ01hcmsocltvXSk7aWYodGhpcy5hZGRFbGVtZW50KHQpLG51bGwhPXIpZm9yKHZhciBpPTA7aTxyLmxlbmd0aDtpKyspZS5yZW1vdmVQZW5kaW5nTWFyayhyW2ldKX19LGJ0LnByb3RvdHlwZS5hZGRUZXh0Tm9kZT1mdW5jdGlvbih0KXt2YXIgZT10Lm5vZGVWYWx1ZSxuPXRoaXMudG9wO2lmKChuLnR5cGU/bi50eXBlLmlubGluZUNvbnRlbnQ6bi5jb250ZW50Lmxlbmd0aCYmbi5jb250ZW50WzBdLmlzSW5saW5lKXx8L1teIFx0XHJcblx1MDAwY10vLnRlc3QoZSkpe2lmKG4ub3B0aW9ucyZtdCluLm9wdGlvbnMmeXR8fChlPWUucmVwbGFjZSgvXHI/XG58XHIvZywiICIpKTtlbHNlIGlmKGU9ZS5yZXBsYWNlKC9bIFx0XHJcblx1MDAwY10rL2csIiAiKSwvXlsgXHRcclxuXHUwMDBjXS8udGVzdChlKSYmdGhpcy5vcGVuPT10aGlzLm5vZGVzLmxlbmd0aC0xKXt2YXIgcj1uLmNvbnRlbnRbbi5jb250ZW50Lmxlbmd0aC0xXSxvPXQucHJldmlvdXNTaWJsaW5nOyghcnx8byYmIkJSIj09by5ub2RlTmFtZXx8ci5pc1RleHQmJi9bIFx0XHJcblx1MDAwY10kLy50ZXN0KHIudGV4dCkpJiYoZT1lLnNsaWNlKDEpKX1lJiZ0aGlzLmluc2VydE5vZGUodGhpcy5wYXJzZXIuc2NoZW1hLnRleHQoZSkpLHRoaXMuZmluZEluVGV4dCh0KX1lbHNlIHRoaXMuZmluZEluc2lkZSh0KX0sYnQucHJvdG90eXBlLmFkZEVsZW1lbnQ9ZnVuY3Rpb24odCl7dmFyIGU9dC5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpO3Z0Lmhhc093blByb3BlcnR5KGUpJiZTdCh0KTt2YXIgbj10aGlzLm9wdGlvbnMucnVsZUZyb21Ob2RlJiZ0aGlzLm9wdGlvbnMucnVsZUZyb21Ob2RlKHQpfHx0aGlzLnBhcnNlci5tYXRjaFRhZyh0LHRoaXMpO2lmKG4/bi5pZ25vcmU6ZHQuaGFzT3duUHJvcGVydHkoZSkpdGhpcy5maW5kSW5zaWRlKHQpO2Vsc2UgaWYoIW58fG4uc2tpcCl7biYmbi5za2lwLm5vZGVUeXBlJiYodD1uLnNraXApO3ZhciByLG89dGhpcy50b3AsaT10aGlzLm5lZWRzQmxvY2s7aWYoZnQuaGFzT3duUHJvcGVydHkoZSkpcj0hMCxvLnR5cGV8fCh0aGlzLm5lZWRzQmxvY2s9ITApO2Vsc2UgaWYoIXQuZmlyc3RDaGlsZClyZXR1cm4gdm9pZCB0aGlzLmxlYWZGYWxsYmFjayh0KTt0aGlzLmFkZEFsbCh0KSxyJiZ0aGlzLnN5bmMobyksdGhpcy5uZWVkc0Jsb2NrPWl9ZWxzZSB0aGlzLmFkZEVsZW1lbnRCeVJ1bGUodCxuKX0sYnQucHJvdG90eXBlLmxlYWZGYWxsYmFjaz1mdW5jdGlvbih0KXsiQlIiPT10Lm5vZGVOYW1lJiZ0aGlzLnRvcC50eXBlJiZ0aGlzLnRvcC50eXBlLmlubGluZUNvbnRlbnQmJnRoaXMuYWRkVGV4dE5vZGUodC5vd25lckRvY3VtZW50LmNyZWF0ZVRleHROb2RlKCJcbiIpKX0sYnQucHJvdG90eXBlLnJlYWRTdHlsZXM9ZnVuY3Rpb24odCl7Zm9yKHZhciBlPXRoaXMsbj1oLm5vbmUscj0wO3I8dC5sZW5ndGg7cis9Mil7dmFyIG89ZS5wYXJzZXIubWF0Y2hTdHlsZSh0W3JdLHRbcisxXSxlKTtpZihvKXtpZihvLmlnbm9yZSlyZXR1cm4gbnVsbDtuPWUucGFyc2VyLnNjaGVtYS5tYXJrc1tvLm1hcmtdLmNyZWF0ZShvLmF0dHJzKS5hZGRUb1NldChuKX19cmV0dXJuIG59LGJ0LnByb3RvdHlwZS5hZGRFbGVtZW50QnlSdWxlPWZ1bmN0aW9uKHQsZSl7dmFyIG4scixvLGkscz10aGlzO2Uubm9kZT8ocj10aGlzLnBhcnNlci5zY2hlbWEubm9kZXNbZS5ub2RlXSxyLmlzTGVhZj90aGlzLmluc2VydE5vZGUoci5jcmVhdGUoZS5hdHRycykpfHx0aGlzLmxlYWZGYWxsYmFjayh0KTpuPXRoaXMuZW50ZXIocixlLmF0dHJzLGUucHJlc2VydmVXaGl0ZXNwYWNlKSk6KG89dGhpcy5wYXJzZXIuc2NoZW1hLm1hcmtzW2UubWFya10saT1vLmNyZWF0ZShlLmF0dHJzKSx0aGlzLmFkZFBlbmRpbmdNYXJrKGkpKTt2YXIgYT10aGlzLnRvcDtpZihyJiZyLmlzTGVhZil0aGlzLmZpbmRJbnNpZGUodCk7ZWxzZSBpZihlLmdldENvbnRlbnQpdGhpcy5maW5kSW5zaWRlKHQpLGUuZ2V0Q29udGVudCh0LHRoaXMucGFyc2VyLnNjaGVtYSkuZm9yRWFjaCgoZnVuY3Rpb24odCl7cmV0dXJuIHMuaW5zZXJ0Tm9kZSh0KX0pKTtlbHNle3ZhciBjPWUuY29udGVudEVsZW1lbnQ7InN0cmluZyI9PXR5cGVvZiBjP2M9dC5xdWVyeVNlbGVjdG9yKGMpOiJmdW5jdGlvbiI9PXR5cGVvZiBjJiYoYz1jKHQpKSxjfHwoYz10KSx0aGlzLmZpbmRBcm91bmQodCxjLCEwKSx0aGlzLmFkZEFsbChjLG4pfW4mJih0aGlzLnN5bmMoYSksdGhpcy5vcGVuLS0pLGkmJnRoaXMucmVtb3ZlUGVuZGluZ01hcmsoaSl9LGJ0LnByb3RvdHlwZS5hZGRBbGw9ZnVuY3Rpb24odCxlLG4scil7Zm9yKHZhciBvPXRoaXMsaT1ufHwwLHM9bj90LmNoaWxkTm9kZXNbbl06dC5maXJzdENoaWxkLGE9bnVsbD09cj9udWxsOnQuY2hpbGROb2Rlc1tyXTtzIT1hO3M9cy5uZXh0U2libGluZywrK2kpby5maW5kQXRQb2ludCh0LGkpLG8uYWRkRE9NKHMpLGUmJmZ0Lmhhc093blByb3BlcnR5KHMubm9kZU5hbWUudG9Mb3dlckNhc2UoKSkmJm8uc3luYyhlKTt0aGlzLmZpbmRBdFBvaW50KHQsaSl9LGJ0LnByb3RvdHlwZS5maW5kUGxhY2U9ZnVuY3Rpb24odCl7Zm9yKHZhciBlLG4scj10aGlzLG89dGhpcy5vcGVuO28+PTA7by0tKXt2YXIgaT1yLm5vZGVzW29dLHM9aS5maW5kV3JhcHBpbmcodCk7aWYocyYmKCFlfHxlLmxlbmd0aD5zLmxlbmd0aCkmJihlPXMsbj1pLCFzLmxlbmd0aCkpYnJlYWs7aWYoaS5zb2xpZClicmVha31pZighZSlyZXR1cm4hMTt0aGlzLnN5bmMobik7Zm9yKHZhciBhPTA7YTxlLmxlbmd0aDthKyspci5lbnRlcklubmVyKGVbYV0sbnVsbCwhMSk7cmV0dXJuITB9LGJ0LnByb3RvdHlwZS5pbnNlcnROb2RlPWZ1bmN0aW9uKHQpe2lmKHQuaXNJbmxpbmUmJnRoaXMubmVlZHNCbG9jayYmIXRoaXMudG9wLnR5cGUpe3ZhciBlPXRoaXMudGV4dGJsb2NrRnJvbUNvbnRleHQoKTtlJiZ0aGlzLmVudGVySW5uZXIoZSl9aWYodGhpcy5maW5kUGxhY2UodCkpe3RoaXMuY2xvc2VFeHRyYSgpO3ZhciBuPXRoaXMudG9wO3RoaXMuYXBwbHlQZW5kaW5nTWFya3Mobiksbi5tYXRjaCYmKG4ubWF0Y2g9bi5tYXRjaC5tYXRjaFR5cGUodC50eXBlKSk7Zm9yKHZhciByPW4uYWN0aXZlTWFya3Msbz0wO288dC5tYXJrcy5sZW5ndGg7bysrKW4udHlwZSYmIW4udHlwZS5hbGxvd3NNYXJrVHlwZSh0Lm1hcmtzW29dLnR5cGUpfHwocj10Lm1hcmtzW29dLmFkZFRvU2V0KHIpKTtyZXR1cm4gbi5jb250ZW50LnB1c2godC5tYXJrKHIpKSwhMH1yZXR1cm4hMX0sYnQucHJvdG90eXBlLmFwcGx5UGVuZGluZ01hcmtzPWZ1bmN0aW9uKHQpe2Zvcih2YXIgZT10aGlzLG49MDtuPHRoaXMucGVuZGluZ01hcmtzLmxlbmd0aDtuKyspe3ZhciByPWUucGVuZGluZ01hcmtzW25dO3QudHlwZSYmIXQudHlwZS5hbGxvd3NNYXJrVHlwZShyLnR5cGUpfHxyLmlzSW5TZXQodC5hY3RpdmVNYXJrcyl8fCh0LmFjdGl2ZU1hcmtzPXIuYWRkVG9TZXQodC5hY3RpdmVNYXJrcyksZS5wZW5kaW5nTWFya3Muc3BsaWNlKG4tLSwxKSl9fSxidC5wcm90b3R5cGUuZW50ZXI9ZnVuY3Rpb24odCxlLG4pe3ZhciByPXRoaXMuZmluZFBsYWNlKHQuY3JlYXRlKGUpKTtyZXR1cm4gciYmKHRoaXMuYXBwbHlQZW5kaW5nTWFya3ModGhpcy50b3ApLHRoaXMuZW50ZXJJbm5lcih0LGUsITAsbikpLHJ9LGJ0LnByb3RvdHlwZS5lbnRlcklubmVyPWZ1bmN0aW9uKHQsZSxuLHIpe3RoaXMuY2xvc2VFeHRyYSgpO3ZhciBvPXRoaXMudG9wO28ubWF0Y2g9by5tYXRjaCYmby5tYXRjaC5tYXRjaFR5cGUodCxlKTt2YXIgaT1udWxsPT1yP28ub3B0aW9ucyZ+Z3Q6d3Qocik7by5vcHRpb25zJmd0JiYwPT1vLmNvbnRlbnQubGVuZ3RoJiYoaXw9Z3QpLHRoaXMubm9kZXMucHVzaChuZXcgeHQodCxlLG8uYWN0aXZlTWFya3MsbixudWxsLGkpKSx0aGlzLm9wZW4rK30sYnQucHJvdG90eXBlLmNsb3NlRXh0cmE9ZnVuY3Rpb24odCl7dmFyIGU9dGhpcyxuPXRoaXMubm9kZXMubGVuZ3RoLTE7aWYobj50aGlzLm9wZW4pe2Zvcig7bj50aGlzLm9wZW47bi0tKWUubm9kZXNbbi0xXS5jb250ZW50LnB1c2goZS5ub2Rlc1tuXS5maW5pc2godCkpO3RoaXMubm9kZXMubGVuZ3RoPXRoaXMub3BlbisxfX0sYnQucHJvdG90eXBlLmZpbmlzaD1mdW5jdGlvbigpe3JldHVybiB0aGlzLm9wZW49MCx0aGlzLmNsb3NlRXh0cmEodGhpcy5pc09wZW4pLHRoaXMubm9kZXNbMF0uZmluaXNoKHRoaXMuaXNPcGVufHx0aGlzLm9wdGlvbnMudG9wT3Blbil9LGJ0LnByb3RvdHlwZS5zeW5jPWZ1bmN0aW9uKHQpe2Zvcih2YXIgZT10aGlzLG49dGhpcy5vcGVuO24+PTA7bi0tKWlmKGUubm9kZXNbbl09PXQpcmV0dXJuIHZvaWQoZS5vcGVuPW4pfSxidC5wcm90b3R5cGUuYWRkUGVuZGluZ01hcms9ZnVuY3Rpb24odCl7dGhpcy5wZW5kaW5nTWFya3MucHVzaCh0KX0sYnQucHJvdG90eXBlLnJlbW92ZVBlbmRpbmdNYXJrPWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMucGVuZGluZ01hcmtzLmxhc3RJbmRleE9mKHQpO2lmKGU+LTEpdGhpcy5wZW5kaW5nTWFya3Muc3BsaWNlKGUsMSk7ZWxzZXt2YXIgbj10aGlzLnRvcDtuLmFjdGl2ZU1hcmtzPXQucmVtb3ZlRnJvbVNldChuLmFjdGl2ZU1hcmtzKX19LGt0LmN1cnJlbnRQb3MuZ2V0PWZ1bmN0aW9uKCl7dmFyIHQ9dGhpczt0aGlzLmNsb3NlRXh0cmEoKTtmb3IodmFyIGU9MCxuPXRoaXMub3BlbjtuPj0wO24tLSl7Zm9yKHZhciByPXQubm9kZXNbbl0uY29udGVudCxvPXIubGVuZ3RoLTE7bz49MDtvLS0pZSs9cltvXS5ub2RlU2l6ZTtuJiZlKyt9cmV0dXJuIGV9LGJ0LnByb3RvdHlwZS5maW5kQXRQb2ludD1mdW5jdGlvbih0LGUpe3ZhciBuPXRoaXM7aWYodGhpcy5maW5kKWZvcih2YXIgcj0wO3I8dGhpcy5maW5kLmxlbmd0aDtyKyspbi5maW5kW3JdLm5vZGU9PXQmJm4uZmluZFtyXS5vZmZzZXQ9PWUmJihuLmZpbmRbcl0ucG9zPW4uY3VycmVudFBvcyl9LGJ0LnByb3RvdHlwZS5maW5kSW5zaWRlPWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXM7aWYodGhpcy5maW5kKWZvcih2YXIgbj0wO248dGhpcy5maW5kLmxlbmd0aDtuKyspbnVsbD09ZS5maW5kW25dLnBvcyYmMT09dC5ub2RlVHlwZSYmdC5jb250YWlucyhlLmZpbmRbbl0ubm9kZSkmJihlLmZpbmRbbl0ucG9zPWUuY3VycmVudFBvcyl9LGJ0LnByb3RvdHlwZS5maW5kQXJvdW5kPWZ1bmN0aW9uKHQsZSxuKXt2YXIgcj10aGlzO2lmKHQhPWUmJnRoaXMuZmluZClmb3IodmFyIG89MDtvPHRoaXMuZmluZC5sZW5ndGg7bysrKWlmKG51bGw9PXIuZmluZFtvXS5wb3MmJjE9PXQubm9kZVR5cGUmJnQuY29udGFpbnMoci5maW5kW29dLm5vZGUpKXt2YXIgaT1lLmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uKHIuZmluZFtvXS5ub2RlKTtpJihuPzI6NCkmJihyLmZpbmRbb10ucG9zPXIuY3VycmVudFBvcyl9fSxidC5wcm90b3R5cGUuZmluZEluVGV4dD1mdW5jdGlvbih0KXt2YXIgZT10aGlzO2lmKHRoaXMuZmluZClmb3IodmFyIG49MDtuPHRoaXMuZmluZC5sZW5ndGg7bisrKWUuZmluZFtuXS5ub2RlPT10JiYoZS5maW5kW25dLnBvcz1lLmN1cnJlbnRQb3MtKHQubm9kZVZhbHVlLmxlbmd0aC1lLmZpbmRbbl0ub2Zmc2V0KSl9LGJ0LnByb3RvdHlwZS5tYXRjaGVzQ29udGV4dD1mdW5jdGlvbih0KXt2YXIgZT10aGlzO2lmKHQuaW5kZXhPZigifCIpPi0xKXJldHVybiB0LnNwbGl0KC9ccypcfFxzKi8pLnNvbWUodGhpcy5tYXRjaGVzQ29udGV4dCx0aGlzKTt2YXIgbj10LnNwbGl0KCIvIikscj10aGlzLm9wdGlvbnMuY29udGV4dCxvPSF0aGlzLmlzT3BlbiYmKCFyfHxyLnBhcmVudC50eXBlPT10aGlzLm5vZGVzWzBdLnR5cGUpLGk9LShyP3IuZGVwdGgrMTowKSsobz8wOjEpLHM9ZnVuY3Rpb24odCxhKXtmb3IoO3Q+PTA7dC0tKXt2YXIgYz1uW3RdO2lmKCIiPT1jKXtpZih0PT1uLmxlbmd0aC0xfHwwPT10KWNvbnRpbnVlO2Zvcig7YT49aTthLS0paWYocyh0LTEsYSkpcmV0dXJuITA7cmV0dXJuITF9dmFyIGw9YT4wfHwwPT1hJiZvP2Uubm9kZXNbYV0udHlwZTpyJiZhPj1pP3Iubm9kZShhLWkpLnR5cGU6bnVsbDtpZighbHx8bC5uYW1lIT1jJiYtMT09bC5ncm91cHMuaW5kZXhPZihjKSlyZXR1cm4hMTthLS19cmV0dXJuITB9O3JldHVybiBzKG4ubGVuZ3RoLTEsdGhpcy5vcGVuKX0sYnQucHJvdG90eXBlLnRleHRibG9ja0Zyb21Db250ZXh0PWZ1bmN0aW9uKCl7dmFyIHQ9dGhpcyxlPXRoaXMub3B0aW9ucy5jb250ZXh0O2lmKGUpZm9yKHZhciBuPWUuZGVwdGg7bj49MDtuLS0pe3ZhciByPWUubm9kZShuKS5jb250ZW50TWF0Y2hBdChlLmluZGV4QWZ0ZXIobikpLmRlZmF1bHRUeXBlO2lmKHImJnIuaXNUZXh0YmxvY2smJnIuZGVmYXVsdEF0dHJzKXJldHVybiByfWZvcih2YXIgbyBpbiB0LnBhcnNlci5zY2hlbWEubm9kZXMpe3ZhciBpPXQucGFyc2VyLnNjaGVtYS5ub2Rlc1tvXTtpZihpLmlzVGV4dGJsb2NrJiZpLmRlZmF1bHRBdHRycylyZXR1cm4gaX19LE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKGJ0LnByb3RvdHlwZSxrdCk7dmFyIFR0PWZ1bmN0aW9uKHQsZSl7dGhpcy5ub2Rlcz10fHx7fSx0aGlzLm1hcmtzPWV8fHt9fTtmdW5jdGlvbiBOdCh0KXt2YXIgZT17fTtmb3IodmFyIG4gaW4gdCl7dmFyIHI9dFtuXS5zcGVjLnRvRE9NO3ImJihlW25dPXIpfXJldHVybiBlfWZ1bmN0aW9uIEV0KHQpe3JldHVybiB0LmRvY3VtZW50fHx3aW5kb3cuZG9jdW1lbnR9VHQucHJvdG90eXBlLnNlcmlhbGl6ZUZyYWdtZW50PWZ1bmN0aW9uKHQsZSxuKXt2YXIgcj10aGlzO3ZvaWQgMD09PWUmJihlPXt9KSxufHwobj1FdChlKS5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCkpO3ZhciBvPW4saT1udWxsO3JldHVybiB0LmZvckVhY2goKGZ1bmN0aW9uKHQpe2lmKGl8fHQubWFya3MubGVuZ3RoKXtpfHwoaT1bXSk7dmFyIG49MCxzPTA7d2hpbGUobjxpLmxlbmd0aCYmczx0Lm1hcmtzLmxlbmd0aCl7dmFyIGE9dC5tYXJrc1tzXTtpZihyLm1hcmtzW2EudHlwZS5uYW1lXSl7aWYoIWEuZXEoaVtuXSl8fCExPT09YS50eXBlLnNwZWMuc3Bhbm5pbmcpYnJlYWs7bis9MixzKyt9ZWxzZSBzKyt9d2hpbGUobjxpLmxlbmd0aClvPWkucG9wKCksaS5wb3AoKTt3aGlsZShzPHQubWFya3MubGVuZ3RoKXt2YXIgYz10Lm1hcmtzW3MrK10sbD1yLnNlcmlhbGl6ZU1hcmsoYyx0LmlzSW5saW5lLGUpO2wmJihpLnB1c2goYyxvKSxvLmFwcGVuZENoaWxkKGwuZG9tKSxvPWwuY29udGVudERPTXx8bC5kb20pfX1vLmFwcGVuZENoaWxkKHIuc2VyaWFsaXplTm9kZSh0LGUpKX0pKSxufSxUdC5wcm90b3R5cGUuc2VyaWFsaXplTm9kZT1mdW5jdGlvbih0LGUpe3ZvaWQgMD09PWUmJihlPXt9KTt2YXIgbj1UdC5yZW5kZXJTcGVjKEV0KGUpLHRoaXMubm9kZXNbdC50eXBlLm5hbWVdKHQpKSxyPW4uZG9tLG89bi5jb250ZW50RE9NO2lmKG8pe2lmKHQuaXNMZWFmKXRocm93IG5ldyBSYW5nZUVycm9yKCJDb250ZW50IGhvbGUgbm90IGFsbG93ZWQgaW4gYSBsZWFmIG5vZGUgc3BlYyIpO2Uub25Db250ZW50P2Uub25Db250ZW50KHQsbyxlKTp0aGlzLnNlcmlhbGl6ZUZyYWdtZW50KHQuY29udGVudCxlLG8pfXJldHVybiByfSxUdC5wcm90b3R5cGUuc2VyaWFsaXplTm9kZUFuZE1hcmtzPWZ1bmN0aW9uKHQsZSl7dmFyIG49dGhpczt2b2lkIDA9PT1lJiYoZT17fSk7Zm9yKHZhciByPXRoaXMuc2VyaWFsaXplTm9kZSh0LGUpLG89dC5tYXJrcy5sZW5ndGgtMTtvPj0wO28tLSl7dmFyIGk9bi5zZXJpYWxpemVNYXJrKHQubWFya3Nbb10sdC5pc0lubGluZSxlKTtpJiYoKGkuY29udGVudERPTXx8aS5kb20pLmFwcGVuZENoaWxkKHIpLHI9aS5kb20pfXJldHVybiByfSxUdC5wcm90b3R5cGUuc2VyaWFsaXplTWFyaz1mdW5jdGlvbih0LGUsbil7dm9pZCAwPT09biYmKG49e30pO3ZhciByPXRoaXMubWFya3NbdC50eXBlLm5hbWVdO3JldHVybiByJiZUdC5yZW5kZXJTcGVjKEV0KG4pLHIodCxlKSl9LFR0LnJlbmRlclNwZWM9ZnVuY3Rpb24odCxlKXtpZigic3RyaW5nIj09dHlwZW9mIGUpcmV0dXJue2RvbTp0LmNyZWF0ZVRleHROb2RlKGUpfTtpZihudWxsIT1lLm5vZGVUeXBlKXJldHVybntkb206ZX07dmFyIG49dC5jcmVhdGVFbGVtZW50KGVbMF0pLHI9bnVsbCxvPWVbMV0saT0xO2lmKG8mJiJvYmplY3QiPT10eXBlb2YgbyYmbnVsbD09by5ub2RlVHlwZSYmIUFycmF5LmlzQXJyYXkobykpZm9yKHZhciBzIGluIGk9MixvKW51bGwhPW9bc10mJm4uc2V0QXR0cmlidXRlKHMsb1tzXSk7Zm9yKHZhciBhPWk7YTxlLmxlbmd0aDthKyspe3ZhciBjPWVbYV07aWYoMD09PWMpe2lmKGE8ZS5sZW5ndGgtMXx8YT5pKXRocm93IG5ldyBSYW5nZUVycm9yKCJDb250ZW50IGhvbGUgbXVzdCBiZSB0aGUgb25seSBjaGlsZCBvZiBpdHMgcGFyZW50IG5vZGUiKTtyZXR1cm57ZG9tOm4sY29udGVudERPTTpufX12YXIgbD1UdC5yZW5kZXJTcGVjKHQsYykscD1sLmRvbSx1PWwuY29udGVudERPTTtpZihuLmFwcGVuZENoaWxkKHApLHUpe2lmKHIpdGhyb3cgbmV3IFJhbmdlRXJyb3IoIk11bHRpcGxlIGNvbnRlbnQgaG9sZXMiKTtyPXV9fXJldHVybntkb206bixjb250ZW50RE9NOnJ9fSxUdC5mcm9tU2NoZW1hPWZ1bmN0aW9uKHQpe3JldHVybiB0LmNhY2hlZC5kb21TZXJpYWxpemVyfHwodC5jYWNoZWQuZG9tU2VyaWFsaXplcj1uZXcgVHQodGhpcy5ub2Rlc0Zyb21TY2hlbWEodCksdGhpcy5tYXJrc0Zyb21TY2hlbWEodCkpKX0sVHQubm9kZXNGcm9tU2NoZW1hPWZ1bmN0aW9uKHQpe3ZhciBlPU50KHQubm9kZXMpO3JldHVybiBlLnRleHR8fChlLnRleHQ9ZnVuY3Rpb24odCl7cmV0dXJuIHQudGV4dH0pLGV9LFR0Lm1hcmtzRnJvbVNjaGVtYT1mdW5jdGlvbih0KXtyZXR1cm4gTnQodC5tYXJrcyl9LGUuTm9kZT1fLGUuUmVzb2x2ZWRQb3M9TixlLk5vZGVSYW5nZT16LGUuRnJhZ21lbnQ9YSxlLlNsaWNlPWQsZS5SZXBsYWNlRXJyb3I9ZixlLk1hcms9aCxlLlNjaGVtYT1wdCxlLk5vZGVUeXBlPWl0LGUuTWFya1R5cGU9bHQsZS5Db250ZW50TWF0Y2g9JCxlLkRPTVBhcnNlcj1odCxlLkRPTVNlcmlhbGl6ZXI9VHR9LCIzOGZkIjpmdW5jdGlvbih0LGUsbil7dmFyIHI9bigiNjlhOCIpLG89bigiNGJmOCIpLGk9bigiNjEzYiIpKCJJRV9QUk9UTyIpLHM9T2JqZWN0LnByb3RvdHlwZTt0LmV4cG9ydHM9T2JqZWN0LmdldFByb3RvdHlwZU9mfHxmdW5jdGlvbih0KXtyZXR1cm4gdD1vKHQpLHIodCxpKT90W2ldOiJmdW5jdGlvbiI9PXR5cGVvZiB0LmNvbnN0cnVjdG9yJiZ0IGluc3RhbmNlb2YgdC5jb25zdHJ1Y3Rvcj90LmNvbnN0cnVjdG9yLnByb3RvdHlwZTp0IGluc3RhbmNlb2YgT2JqZWN0P3M6bnVsbH19LCIzYTM4IjpmdW5jdGlvbih0LGUpe3ZhciBuPU1hdGguY2VpbCxyPU1hdGguZmxvb3I7dC5leHBvcnRzPWZ1bmN0aW9uKHQpe3JldHVybiBpc05hTih0PSt0KT8wOih0PjA/cjpuKSh0KX19LCIzYjUyIjpmdW5jdGlvbih0LGUsbil7InVzZSBzdHJpY3QiO09iamVjdC5kZWZpbmVQcm9wZXJ0eShlLCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KTt2YXIgcj1uKCI2ZmZiIiksbz1mdW5jdGlvbih0LGUsbil7dGhpcy5zdGVwPXQsdGhpcy5pbnZlcnRlZD1lLHRoaXMub3JpZ2luPW59O2Z1bmN0aW9uIGkodCxlLG4pe2Zvcih2YXIgcj10Lmxlbmd0aC0xO3I+PTA7ci0tKW4uc3RlcCh0W3JdLmludmVydGVkKTtmb3IodmFyIGk9MDtpPGUubGVuZ3RoO2krKyluLnN0ZXAoZVtpXSk7Zm9yKHZhciBzPVtdLGE9MCxjPXQubGVuZ3RoO2E8dC5sZW5ndGg7YSsrKXt2YXIgbD10W2FdLnN0ZXAubWFwKG4ubWFwcGluZy5zbGljZShjKSk7Yy0tLGwmJiFuLm1heWJlU3RlcChsKS5mYWlsZWQmJihuLm1hcHBpbmcuc2V0TWlycm9yKGMsbi5zdGVwcy5sZW5ndGgtMSkscy5wdXNoKG5ldyBvKGwsbC5pbnZlcnQobi5kb2NzW24uZG9jcy5sZW5ndGgtMV0pLHRbYV0ub3JpZ2luKSkpfXJldHVybiBzfXZhciBzPWZ1bmN0aW9uKHQsZSl7dGhpcy52ZXJzaW9uPXQsdGhpcy51bmNvbmZpcm1lZD1lfTtmdW5jdGlvbiBhKHQpe2Zvcih2YXIgZT1bXSxuPTA7bjx0LnN0ZXBzLmxlbmd0aDtuKyspZS5wdXNoKG5ldyBvKHQuc3RlcHNbbl0sdC5zdGVwc1tuXS5pbnZlcnQodC5kb2NzW25dKSx0KSk7cmV0dXJuIGV9dmFyIGM9bmV3IHIuUGx1Z2luS2V5KCJjb2xsYWIiKTtmdW5jdGlvbiBsKHQpe3JldHVybiB2b2lkIDA9PT10JiYodD17fSksdD17dmVyc2lvbjp0LnZlcnNpb258fDAsY2xpZW50SUQ6bnVsbD09dC5jbGllbnRJRD9NYXRoLmZsb29yKDQyOTQ5NjcyOTUqTWF0aC5yYW5kb20oKSk6dC5jbGllbnRJRH0sbmV3IHIuUGx1Z2luKHtrZXk6YyxzdGF0ZTp7aW5pdDpmdW5jdGlvbigpe3JldHVybiBuZXcgcyh0LnZlcnNpb24sW10pfSxhcHBseTpmdW5jdGlvbih0LGUpe3ZhciBuPXQuZ2V0TWV0YShjKTtyZXR1cm4gbnx8KHQuZG9jQ2hhbmdlZD9uZXcgcyhlLnZlcnNpb24sZS51bmNvbmZpcm1lZC5jb25jYXQoYSh0KSkpOmUpfX0sY29uZmlnOnQsaGlzdG9yeVByZXNlcnZlSXRlbXM6ITB9KX1mdW5jdGlvbiBwKHQsZSxuLG8pe3ZhciBhPWMuZ2V0U3RhdGUodCksbD1hLnZlcnNpb24rZS5sZW5ndGgscD1jLmdldCh0KS5zcGVjLmNvbmZpZy5jbGllbnRJRCx1PTA7d2hpbGUodTxuLmxlbmd0aCYmblt1XT09cCkrK3U7dmFyIGg9YS51bmNvbmZpcm1lZC5zbGljZSh1KTtpZihlPXU/ZS5zbGljZSh1KTplLCFlLmxlbmd0aClyZXR1cm4gdC50ci5zZXRNZXRhKGMsbmV3IHMobCxoKSk7dmFyIGY9aC5sZW5ndGgsZD10LnRyO2lmKGYpaD1pKGgsZSxkKTtlbHNle2Zvcih2YXIgdj0wO3Y8ZS5sZW5ndGg7disrKWQuc3RlcChlW3ZdKTtoPVtdfXZhciBtPW5ldyBzKGwsaCk7cmV0dXJuIG8mJm8ubWFwU2VsZWN0aW9uQmFja3dhcmQmJnQuc2VsZWN0aW9uIGluc3RhbmNlb2Ygci5UZXh0U2VsZWN0aW9uJiYoZC5zZXRTZWxlY3Rpb24oci5UZXh0U2VsZWN0aW9uLmJldHdlZW4oZC5kb2MucmVzb2x2ZShkLm1hcHBpbmcubWFwKHQuc2VsZWN0aW9uLmFuY2hvciwtMSkpLGQuZG9jLnJlc29sdmUoZC5tYXBwaW5nLm1hcCh0LnNlbGVjdGlvbi5oZWFkLC0xKSksLTEpKSxkLnVwZGF0ZWQmPS0yKSxkLnNldE1ldGEoInJlYmFzZWQiLGYpLnNldE1ldGEoImFkZFRvSGlzdG9yeSIsITEpLnNldE1ldGEoYyxtKX1mdW5jdGlvbiB1KHQpe3ZhciBlPWMuZ2V0U3RhdGUodCk7cmV0dXJuIDA9PWUudW5jb25maXJtZWQubGVuZ3RoP251bGw6e3ZlcnNpb246ZS52ZXJzaW9uLHN0ZXBzOmUudW5jb25maXJtZWQubWFwKChmdW5jdGlvbih0KXtyZXR1cm4gdC5zdGVwfSkpLGNsaWVudElEOmMuZ2V0KHQpLnNwZWMuY29uZmlnLmNsaWVudElELGdldCBvcmlnaW5zKCl7cmV0dXJuIHRoaXMuX29yaWdpbnN8fCh0aGlzLl9vcmlnaW5zPWUudW5jb25maXJtZWQubWFwKChmdW5jdGlvbih0KXtyZXR1cm4gdC5vcmlnaW59KSkpfX19ZnVuY3Rpb24gaCh0KXtyZXR1cm4gYy5nZXRTdGF0ZSh0KS52ZXJzaW9ufWUucmViYXNlU3RlcHM9aSxlLmNvbGxhYj1sLGUucmVjZWl2ZVRyYW5zYWN0aW9uPXAsZS5zZW5kYWJsZVN0ZXBzPXUsZS5nZXRWZXJzaW9uPWh9LCIzY2U0IjpmdW5jdGlvbih0LGUsbil7InVzZSBzdHJpY3QiO3ZhciByPW4oImE3MGUiKSxvPW4oIjA3M2UiKTtmdW5jdGlvbiBpKCl7fWkucHJvdG90eXBlPXI7dmFyIHM9bmV3IGk7dC5leHBvcnRzPXMscy5oaWdobGlnaHQ9dyxzLmhpZ2hsaWdodEF1dG89ZyxzLnJlZ2lzdGVyTGFuZ3VhZ2U9eCxzLmxpc3RMYW5ndWFnZXM9YixzLnJlZ2lzdGVyQWxpYXM9ayxzLmdldExhbmd1YWdlPUU7dmFyIGE9ci5pbmhlcml0LGM9e30uaGFzT3duUHJvcGVydHksbD1bXS5jb25jYXQscD0iaGxqcy0iLHU9ImNhc2VfaW5zZW5zaXRpdmUiLGg9ImNhY2hlZF92YXJpYW50cyIsZj0iICIsZD0ifCIsdj1bXSxtPXt9LHk9e307ZnVuY3Rpb24gZyh0LGUpe3ZhciBuLHIsaSxzLGE9ZXx8e30sYz1hLnN1YnNldHx8dixsPWEucHJlZml4LHU9Yy5sZW5ndGgsaD0tMTtpZihudWxsIT09bCYmdm9pZCAwIT09bHx8KGw9cCksInN0cmluZyIhPT10eXBlb2YgdCl0aHJvdyBvKCJFeHBlY3RlZCBgc3RyaW5nYCBmb3IgdmFsdWUsIGdvdCBgJXNgIix0KTtyPU0oe30pLG49TSh7fSk7d2hpbGUoKytoPHUpcz1jW2hdLEUocykmJihpPU0oUyhzLHQsITEsbCkpLGkubGFuZ3VhZ2U9cyxpLnJlbGV2YW5jZT5yLnJlbGV2YW5jZSYmKHI9aSksaS5yZWxldmFuY2U+bi5yZWxldmFuY2UmJihyPW4sbj1pKSk7cmV0dXJuIHIubGFuZ3VhZ2UmJihuLnNlY29uZEJlc3Q9ciksbn1mdW5jdGlvbiB3KHQsZSxuKXt2YXIgcj1ufHx7fSxvPXIucHJlZml4O3JldHVybiBudWxsIT09byYmdm9pZCAwIT09b3x8KG89cCksTShTKHQsZSwhMCxvKSl9ZnVuY3Rpb24geCh0LGUpe3ZhciBuPWUocyk7bVt0XT1uLHYucHVzaCh0KSxuLmFsaWFzZXMmJmsodCxuLmFsaWFzZXMpfWZ1bmN0aW9uIGIoKXtyZXR1cm4gdi5jb25jYXQoKX1mdW5jdGlvbiBrKHQsZSl7dmFyIG4scixvLGkscz10O2ZvcihuIGluIGUmJihzPXt9LHNbdF09ZSkscyl7cj1zW25dLHI9InN0cmluZyI9PT10eXBlb2Ygcj9bcl06cixvPXIubGVuZ3RoLGk9LTE7d2hpbGUoKytpPG8peVtyW2ldXT1ufX1mdW5jdGlvbiBTKHQsZSxuLHIsaSl7dmFyIHMsYSxsLHAsaCxmLGQsdix5PXt9LHc9W10seD0iIixiPTA7aWYoInN0cmluZyIhPT10eXBlb2YgdCl0aHJvdyBvKCJFeHBlY3RlZCBgc3RyaW5nYCBmb3IgbmFtZSwgZ290IGAlc2AiLHQpO2lmKCJzdHJpbmciIT09dHlwZW9mIGUpdGhyb3cgbygiRXhwZWN0ZWQgYHN0cmluZ2AgZm9yIHZhbHVlLCBnb3QgYCVzYCIsZSk7aWYocz1FKHQpLGE9aXx8cyx2PVtdLGw9YSxwPXYsIXMpdGhyb3cgbygiVW5rbm93biBsYW5ndWFnZTogYCVzYCBpcyBub3QgcmVnaXN0ZXJlZCIsdCk7TyhzKTt0cnl7YS50ZXJtaW5hdG9ycy5sYXN0SW5kZXg9MCxoPTAsZD1hLnRlcm1pbmF0b3JzLmV4ZWMoZSk7d2hpbGUoZClmPWsoZS5zdWJzdHJpbmcoaCxkLmluZGV4KSxkWzBdKSxoPWQuaW5kZXgrZixhLnRlcm1pbmF0b3JzLmxhc3RJbmRleD1oLGQ9YS50ZXJtaW5hdG9ycy5leGVjKGUpO2soZS5zdWJzdHIoaCkpLGw9YTt3aGlsZShsLnBhcmVudClsLmNsYXNzTmFtZSYmaigpLGw9bC5wYXJlbnQ7cmV0dXJue3JlbGV2YW5jZTpiLHZhbHVlOnAsbGFuZ3VhZ2U6dCx0b3A6YX19Y2F0Y2goJCl7aWYoLTE9PT0kLm1lc3NhZ2UuaW5kZXhPZigiSWxsZWdhbCIpKXRocm93ICQ7cmV0dXJue3JlbGV2YW5jZTowLHZhbHVlOkQoZSxbXSl9fWZ1bmN0aW9uIGsodCxlKXt2YXIgbixyLGk7aWYoeCs9dCx2b2lkIDA9PT1lKXJldHVybiBSKE0oKSxwKSwwO2lmKG49QihlLGEpLG4pcmV0dXJuIFIoTSgpLHApLEMobixlKSxuLnJldHVybkJlZ2luPzA6ZS5sZW5ndGg7aWYocj1GKGEsZSkscil7aT1hLGkucmV0dXJuRW5kfHxpLmV4Y2x1ZGVFbmR8fCh4Kz1lKSxSKE0oKSxwKTtkb3thLmNsYXNzTmFtZSYmaigpLGIrPWEucmVsZXZhbmNlLGE9YS5wYXJlbnR9d2hpbGUoYSE9PXIucGFyZW50KTtyZXR1cm4gaS5leGNsdWRlRW5kJiZEKGUscCkseD0iIixyLnN0YXJ0cyYmQyhyLnN0YXJ0cywiIiksaS5yZXR1cm5FbmQ/MDplLmxlbmd0aH1pZihfKGUsYSkpdGhyb3cgbygnSWxsZWdhbCBsZXhlbWUgIiVzIiBmb3IgbW9kZSAiJXMiJyxlLGEuY2xhc3NOYW1lfHwiPHVubmFtZWQ+Iik7cmV0dXJuIHgrPWUsZS5sZW5ndGh8fDF9ZnVuY3Rpb24gQyh0LGUpe3ZhciBuO3QuY2xhc3NOYW1lJiYobj1QKHQuY2xhc3NOYW1lLFtdKSksdC5yZXR1cm5CZWdpbj94PSIiOnQuZXhjbHVkZUJlZ2luPyhEKGUscCkseD0iIik6eD1lLG4mJihwLnB1c2gobiksdy5wdXNoKHApLHA9bi5jaGlsZHJlbiksYT1PYmplY3QuY3JlYXRlKHQse3BhcmVudDp7dmFsdWU6YX19KX1mdW5jdGlvbiBNKCl7dmFyIHQ9YS5zdWJMYW5ndWFnZT9OKCk6QSgpO3JldHVybiB4PSIiLHR9ZnVuY3Rpb24gTigpe3ZhciB0LGU9InN0cmluZyI9PT10eXBlb2YgYS5zdWJMYW5ndWFnZTtyZXR1cm4gZSYmIW1bYS5zdWJMYW5ndWFnZV0/RCh4LFtdKToodD1lP1MoYS5zdWJMYW5ndWFnZSx4LCEwLHIseVthLnN1Ykxhbmd1YWdlXSk6Zyh4LHtzdWJzZXQ6MD09PWEuc3ViTGFuZ3VhZ2UubGVuZ3RoP3ZvaWQgMDphLnN1Ykxhbmd1YWdlLHByZWZpeDpyfSksdC5sYW5ndWFnZT8oYS5yZWxldmFuY2U+MCYmKGIrPXQucmVsZXZhbmNlKSxlJiYoeVthLnN1Ykxhbmd1YWdlXT10LnRvcCksW1AodC5sYW5ndWFnZSx0LnZhbHVlLCEwKV0pOlt6KHgpXSl9ZnVuY3Rpb24gQSgpe3ZhciB0LGUsbixyLG89W107aWYoIWEua2V5d29yZHMpcmV0dXJuIEQoeCxvKTt0PTAsYS5sZXhlbWVzUmUubGFzdEluZGV4PTAsZT1hLmxleGVtZXNSZS5leGVjKHgpO3doaWxlKGUpRCh4LnN1YnN0cmluZyh0LGUuaW5kZXgpLG8pLHI9SShhLGUpLHI/KGIrPXJbMV0sbj1QKHJbMF0sW10pLG8ucHVzaChuKSxEKGVbMF0sbi5jaGlsZHJlbikpOkQoZVswXSxvKSx0PWEubGV4ZW1lc1JlLmxhc3RJbmRleCxlPWEubGV4ZW1lc1JlLmV4ZWMoeCk7cmV0dXJuIEQoeC5zdWJzdHIodCksbyksb31mdW5jdGlvbiBSKHQsZSl7dmFyIG4scj10Lmxlbmd0aCxvPS0xO3doaWxlKCsrbzxyKW49dFtvXSwidGV4dCI9PT1uLnR5cGU/RChuLnZhbHVlLGUpOmUucHVzaChuKX1mdW5jdGlvbiBEKHQsZSl7dmFyIG47cmV0dXJuIHQmJihuPWVbZS5sZW5ndGgtMV0sbiYmInRleHQiPT09bi50eXBlP24udmFsdWUrPXQ6ZS5wdXNoKHoodCkpKSxlfWZ1bmN0aW9uIHoodCl7cmV0dXJue3R5cGU6InRleHQiLHZhbHVlOnR9fWZ1bmN0aW9uIFAodCxlLG4pe3JldHVybnt0eXBlOiJlbGVtZW50Iix0YWdOYW1lOiJzcGFuIixwcm9wZXJ0aWVzOntjbGFzc05hbWU6WyhuPyIiOnIpK3RdfSxjaGlsZHJlbjplfX1mdW5jdGlvbiBJKHQsZSl7dmFyIG49ZVswXTtyZXR1cm4gc1t1XSYmKG49bi50b0xvd2VyQ2FzZSgpKSxjLmNhbGwodC5rZXl3b3JkcyxuKSYmdC5rZXl3b3Jkc1tuXX1mdW5jdGlvbiBfKHQsZSl7cmV0dXJuIW4mJlQoZS5pbGxlZ2FsUmUsdCl9ZnVuY3Rpb24gRih0LGUpe2lmKFQodC5lbmRSZSxlKSl7d2hpbGUodC5lbmRzUGFyZW50JiZ0LnBhcmVudCl0PXQucGFyZW50O3JldHVybiB0fWlmKHQuZW5kc1dpdGhQYXJlbnQpcmV0dXJuIEYodC5wYXJlbnQsZSl9ZnVuY3Rpb24gQih0LGUpe3ZhciBuPWUuY29udGFpbnMscj1uLmxlbmd0aCxvPS0xO3doaWxlKCsrbzxyKWlmKFQobltvXS5iZWdpblJlLHQpKXJldHVybiBuW29dfWZ1bmN0aW9uIGooKXtwPXcucG9wKCl8fHZ9fWZ1bmN0aW9uIEModCl7dmFyIGUsbixyLG87aWYodC52YXJpYW50cyYmIXRbaF0pe3I9dC52YXJpYW50cyxlPXIubGVuZ3RoLG49LTEsbz1bXTt3aGlsZSgrK248ZSlvW25dPWEodCx7dmFyaWFudHM6bnVsbH0scltuXSk7dFtoXT1vfXJldHVybiB0W2hdfHwodC5lbmRzV2l0aFBhcmVudD9bYSh0KV06W3RdKX1mdW5jdGlvbiBPKHQpe2Z1bmN0aW9uIGUobyxpKXt2YXIgcyxhPXt9O2Z1bmN0aW9uIGModCl7cmV0dXJuIHQuYmVnaW5LZXl3b3Jkcz8iXFwuPygiK3QuYmVnaW4rIilcXC4/Ijp0LmJlZ2lufWZ1bmN0aW9uIHAoZSxuKXt2YXIgcixvLGksczt0W3VdJiYobj1uLnRvTG93ZXJDYXNlKCkpLHI9bi5zcGxpdChmKSxzPXIubGVuZ3RoLGk9LTE7d2hpbGUoKytpPHMpbz1yW2ldLnNwbGl0KGQpLGFbb1swXV09W2Usb1sxXT9OdW1iZXIob1sxXSk6MV19by5jb21waWxlZHx8KG8uY29tcGlsZWQ9ITAsby5rZXl3b3Jkcz1vLmtleXdvcmRzfHxvLmJlZ2luS2V5d29yZHMsby5rZXl3b3JkcyYmKCJzdHJpbmciPT09dHlwZW9mIG8ua2V5d29yZHM/cCgia2V5d29yZCIsby5rZXl3b3Jkcyk6T2JqZWN0LmtleXMoby5rZXl3b3JkcykuZm9yRWFjaCgoZnVuY3Rpb24odCl7cCh0LG8ua2V5d29yZHNbdF0pfSkpLG8ua2V5d29yZHM9YSksby5sZXhlbWVzUmU9bihvLmxleGVtZXN8fC9cdysvLCEwKSxpJiYoby5iZWdpbktleXdvcmRzJiYoby5iZWdpbj0iXFxiKCIrby5iZWdpbktleXdvcmRzLnNwbGl0KGYpLmpvaW4oZCkrIilcXGIiKSxvLmJlZ2lufHwoby5iZWdpbj0vXEJ8XGIvKSxvLmJlZ2luUmU9bihvLmJlZ2luKSxvLmVuZHx8by5lbmRzV2l0aFBhcmVudHx8KG8uZW5kPS9cQnxcYi8pLG8uZW5kJiYoby5lbmRSZT1uKG8uZW5kKSksby50ZXJtaW5hdG9yRW5kPXIoby5lbmQpfHwiIixvLmVuZHNXaXRoUGFyZW50JiZpLnRlcm1pbmF0b3JFbmQmJihvLnRlcm1pbmF0b3JFbmQrPShvLmVuZD9kOiIiKStpLnRlcm1pbmF0b3JFbmQpKSxvLmlsbGVnYWwmJihvLmlsbGVnYWxSZT1uKG8uaWxsZWdhbCkpLHZvaWQgMD09PW8ucmVsZXZhbmNlJiYoby5yZWxldmFuY2U9MSksby5jb250YWluc3x8KG8uY29udGFpbnM9W10pLG8uY29udGFpbnM9bC5hcHBseShbXSxvLmNvbnRhaW5zLm1hcCgoZnVuY3Rpb24odCl7cmV0dXJuIEMoInNlbGYiPT09dD9vOnQpfSkpKSxvLmNvbnRhaW5zLmZvckVhY2goKGZ1bmN0aW9uKHQpe2UodCxvKX0pKSxvLnN0YXJ0cyYmZShvLnN0YXJ0cyxpKSxzPW8uY29udGFpbnMubWFwKGMpLmNvbmNhdChbby50ZXJtaW5hdG9yRW5kLG8uaWxsZWdhbF0pLm1hcChyKS5maWx0ZXIoQm9vbGVhbiksby50ZXJtaW5hdG9ycz0wPT09cy5sZW5ndGg/e2V4ZWM6Tn06bihzLmpvaW4oZCksITApKX1mdW5jdGlvbiBuKGUsbil7cmV0dXJuIG5ldyBSZWdFeHAocihlKSwibSIrKHRbdV0/ImkiOiIiKSsobj8iZyI6IiIpKX1mdW5jdGlvbiByKHQpe3JldHVybiB0JiZ0LnNvdXJjZXx8dH1lKHQpfWZ1bmN0aW9uIE0odCl7cmV0dXJue3JlbGV2YW5jZTp0LnJlbGV2YW5jZXx8MCxsYW5ndWFnZTp0Lmxhbmd1YWdlfHxudWxsLHZhbHVlOnQudmFsdWV8fFtdfX1mdW5jdGlvbiBUKHQsZSl7dmFyIG49dCYmdC5leGVjKGUpO3JldHVybiBuJiYwPT09bi5pbmRleH1mdW5jdGlvbiBOKCl7cmV0dXJuIG51bGx9ZnVuY3Rpb24gRSh0KXtyZXR1cm4gdD10LnRvTG93ZXJDYXNlKCksbVt0XXx8bVt5W3RdXX19LCI0MGMzIjpmdW5jdGlvbih0LGUsbil7dmFyIHI9bigiNmI0YyIpLG89bigiNTE2OCIpKCJ0b1N0cmluZ1RhZyIpLGk9IkFyZ3VtZW50cyI9PXIoZnVuY3Rpb24oKXtyZXR1cm4gYXJndW1lbnRzfSgpKSxzPWZ1bmN0aW9uKHQsZSl7dHJ5e3JldHVybiB0W2VdfWNhdGNoKG4pe319O3QuZXhwb3J0cz1mdW5jdGlvbih0KXt2YXIgZSxuLGE7cmV0dXJuIHZvaWQgMD09PXQ/IlVuZGVmaW5lZCI6bnVsbD09PXQ/Ik51bGwiOiJzdHJpbmciPT10eXBlb2Yobj1zKGU9T2JqZWN0KHQpLG8pKT9uOmk/cihlKToiT2JqZWN0Ij09KGE9cihlKSkmJiJmdW5jdGlvbiI9PXR5cGVvZiBlLmNhbGxlZT8iQXJndW1lbnRzIjphfX0sIjQwZjciOmZ1bmN0aW9uKHQsZSxuKXsidXNlIHN0cmljdCI7T2JqZWN0LmRlZmluZVByb3BlcnR5KGUsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pO3ZhciByPW4oIjZmZmIiKSxvPW4oIjYyZWUiKSxpPW4oImZjODgiKSxzPWZ1bmN0aW9uKHQpe3JldHVybiBmdW5jdGlvbihlKXt2YXIgbj1WKHQpKGUuc2VsZWN0aW9uKTtyZXR1cm4gbj9TKG4ucG9zKShlKTplfX0sYT1mdW5jdGlvbih0LGUpe3JldHVybiBmdW5jdGlvbihuKXtBcnJheS5pc0FycmF5KHQpfHwodD1bdF0pO2Zvcih2YXIgcj0wLG89dC5sZW5ndGg7cjxvO3IrKyl7dmFyIGk9Vih0W3JdKShuLnNlbGVjdGlvbik7aWYoaSl7dmFyIHM9YihpLnBvcyxlKShuKTtpZihzIT09bilyZXR1cm4gc319cmV0dXJuIG59fSxjPWZ1bmN0aW9uKHQpe2lmKGcodC5zZWxlY3Rpb24pKXt2YXIgZT10LnNlbGVjdGlvbi4kZnJvbS5wb3Msbj10LnNlbGVjdGlvbi4kdG8ucG9zO3JldHVybiB4KHQuZGVsZXRlKGUsbikpfXJldHVybiB0fSxsPWZ1bmN0aW9uKHQpe3JldHVybiBmdW5jdGlvbihlKXtpZihnKGUuc2VsZWN0aW9uKSl7dmFyIG49ZS5zZWxlY3Rpb24saT1uLiRmcm9tLHM9bi4kdG87aWYodCBpbnN0YW5jZW9mIG8uRnJhZ21lbnQmJmkucGFyZW50LmNhblJlcGxhY2UoaS5pbmRleCgpLGkuaW5kZXhBZnRlcigpLHQpfHxpLnBhcmVudC5jYW5SZXBsYWNlV2l0aChpLmluZGV4KCksaS5pbmRleEFmdGVyKCksdC50eXBlKSlyZXR1cm4geChlLnJlcGxhY2VXaXRoKGkucG9zLHMucG9zLHQpLnNldFNlbGVjdGlvbihuZXcgci5Ob2RlU2VsZWN0aW9uKGUuZG9jLnJlc29sdmUoaS5wb3MpKSkpfXJldHVybiBlfX0scD1mdW5jdGlvbih0KXt2YXIgZT1hcmd1bWVudHMubGVuZ3RoPjEmJnZvaWQgMCE9PWFyZ3VtZW50c1sxXT9hcmd1bWVudHNbMV06MTtyZXR1cm4gZnVuY3Rpb24obil7dmFyIG89ci5TZWxlY3Rpb24uZmluZEZyb20obi5kb2MucmVzb2x2ZSh0KSxlLCEwKTtyZXR1cm4gbz9uLnNldFNlbGVjdGlvbihvKTpufX0sdT1mdW5jdGlvbih0KXtyZXR1cm4gdC50eXBlJiZ0LnR5cGUuc3BlYy5zZWxlY3RhYmxlfSxoPWZ1bmN0aW9uKHQpe3JldHVybiB1KHQpJiZ0LnR5cGUuaXNMZWFmfSxmPWZ1bmN0aW9uKHQsZSxuKXtyZXR1cm4gaCh0KT9uLnNldFNlbGVjdGlvbihuZXcgci5Ob2RlU2VsZWN0aW9uKG4uZG9jLnJlc29sdmUoZSkpKTpwKGUpKG4pfSxkPWZ1bmN0aW9uKHQsZSxuKXtyZXR1cm4gZnVuY3Rpb24ocil7dmFyIG89Im51bWJlciI9PT10eXBlb2YgZSxpPXIuc2VsZWN0aW9uLiRmcm9tLHM9bz9yLmRvYy5yZXNvbHZlKGUpOmcoci5zZWxlY3Rpb24pP3IuZG9jLnJlc29sdmUoaS5wb3MrMSk6aSxjPXMucGFyZW50O2lmKGcoci5zZWxlY3Rpb24pJiZuKXt2YXIgcD1yO2lmKHI9bCh0KShyKSxwIT09cilyZXR1cm4gcn1pZihNKGMpKXt2YXIgaD1yO2lmKHI9YShjLnR5cGUsdCkociksaCE9PXIpe3ZhciBkPXUodCk/cy5iZWZvcmUocy5kZXB0aCk6cy5wb3M7cmV0dXJuIGYodCxkLHIpfX1pZihPKHMsdCkpe3IuaW5zZXJ0KHMucG9zLHQpO3ZhciB2PW8/cy5wb3M6dSh0KT9yLnNlbGVjdGlvbi4kYW5jaG9yLnBvcy0xOnIuc2VsZWN0aW9uLiRhbmNob3IucG9zO3JldHVybiB4KGYodCx2LHIpKX1mb3IodmFyIG09cy5kZXB0aDttPjA7bS0tKXt2YXIgeT1zLmFmdGVyKG0pLHc9ci5kb2MucmVzb2x2ZSh5KTtpZihPKHcsdCkpcmV0dXJuIHIuaW5zZXJ0KHksdCkseChmKHQseSxyKSl9cmV0dXJuIHJ9fSx2PWZ1bmN0aW9uKHQsZSxuLHIpe3JldHVybiBmdW5jdGlvbihvKXt2YXIgaT1WKHQpKG8uc2VsZWN0aW9uKTtyZXR1cm4gaT94KG8uc2V0Tm9kZU1hcmt1cChpLnBvcyxlLE9iamVjdC5hc3NpZ24oe30saS5ub2RlLmF0dHJzLG4pLHIpKTpvfX0sbT1mdW5jdGlvbih0KXtyZXR1cm4gZnVuY3Rpb24oZSl7aWYoIWcoZS5zZWxlY3Rpb24pKXt2YXIgbj1WKHQpKGUuc2VsZWN0aW9uKTtpZihuKXJldHVybiB4KGUuc2V0U2VsZWN0aW9uKHIuTm9kZVNlbGVjdGlvbi5jcmVhdGUoZS5kb2Msbi5wb3MpKSl9cmV0dXJuIGV9fSx5PWZ1bmN0aW9uKHQpe3ZhciBlPUgodC5zZWxlY3Rpb24pO3JldHVybiJudW1iZXIiPT09dHlwZW9mIGU/UyhlKSh0KTp0fSxnPWZ1bmN0aW9uKHQpe3JldHVybiB0IGluc3RhbmNlb2Ygci5Ob2RlU2VsZWN0aW9ufSx3PWZ1bmN0aW9uKHQsZSl7cmV0dXJuIEFycmF5LmlzQXJyYXkodCkmJnQuaW5kZXhPZihlLnR5cGUpPi0xfHxlLnR5cGU9PT10fSx4PWZ1bmN0aW9uKHQpe3JldHVybiBPYmplY3QuYXNzaWduKE9iamVjdC5jcmVhdGUodCksdCkuc2V0VGltZShEYXRlLm5vdygpKX0sYj1mdW5jdGlvbih0LGUpe3JldHVybiBmdW5jdGlvbihuKXt2YXIgcj1uLmRvYy5ub2RlQXQodCksbz1uLmRvYy5yZXNvbHZlKHQpO2lmKGsobyxlKSl7bj1uLnJlcGxhY2VXaXRoKHQsdCtyLm5vZGVTaXplLGUpO3ZhciBpPW4uc2VsZWN0aW9uLiRmcm9tLnBvcy0xO3JldHVybiBuPXAoTWF0aC5tYXgoaSwwKSwtMSkobiksbj1wKG4uc2VsZWN0aW9uLiRmcm9tLnN0YXJ0KCkpKG4pLHgobil9cmV0dXJuIG59fSxrPWZ1bmN0aW9uKHQsZSl7dmFyIG49dC5ub2RlKHQuZGVwdGgpO3JldHVybiBuJiZuLnR5cGUudmFsaWRDb250ZW50KGUgaW5zdGFuY2VvZiBvLkZyYWdtZW50P2U6by5GcmFnbWVudC5mcm9tKGUpKX0sUz1mdW5jdGlvbih0KXtyZXR1cm4gZnVuY3Rpb24oZSl7dmFyIG49ZS5kb2Mubm9kZUF0KHQpO3JldHVybiB4KGUuZGVsZXRlKHQsdCtuLm5vZGVTaXplKSl9fSxDPWZ1bmN0aW9uKHQpe2lmKHQuY2FjaGVkLnRhYmxlTm9kZVR5cGVzKXJldHVybiB0LmNhY2hlZC50YWJsZU5vZGVUeXBlczt2YXIgZT17fTtyZXR1cm4gT2JqZWN0LmtleXModC5ub2RlcykuZm9yRWFjaCgoZnVuY3Rpb24obil7dmFyIHI9dC5ub2Rlc1tuXTtyLnNwZWMudGFibGVSb2xlJiYoZVtyLnNwZWMudGFibGVSb2xlXT1yKX0pKSx0LmNhY2hlZC50YWJsZU5vZGVUeXBlcz1lLGV9LE89ZnVuY3Rpb24odCxlKXt2YXIgbj10LmluZGV4KCk7cmV0dXJuIGUgaW5zdGFuY2VvZiBvLkZyYWdtZW50P3QucGFyZW50LmNhblJlcGxhY2UobixuLGUpOmUgaW5zdGFuY2VvZiBvLk5vZGUmJnQucGFyZW50LmNhblJlcGxhY2VXaXRoKG4sbixlLnR5cGUpfSxNPWZ1bmN0aW9uKHQpe3JldHVybiF0fHwicGFyYWdyYXBoIj09PXQudHlwZS5uYW1lJiYyPT09dC5ub2RlU2l6ZX0sVD1mdW5jdGlvbih0KXt2YXIgZT1mdW5jdGlvbih0KXtyZXR1cm4gdC50eXBlLnNwZWMudGFibGVSb2xlJiYvdGFibGUvaS50ZXN0KHQudHlwZS5zcGVjLnRhYmxlUm9sZSl9O3JldHVybiBCKHQsZSl9LE49ZnVuY3Rpb24odCl7dmFyIGU9YXJndW1lbnRzLmxlbmd0aD4xJiZ2b2lkIDAhPT1hcmd1bWVudHNbMV0/YXJndW1lbnRzWzFdOm51bGw7cmV0dXJuIGU/dC5jcmVhdGVDaGVja2VkKG51bGwsZSk6dC5jcmVhdGVBbmRGaWxsKCl9LEU9ZnVuY3Rpb24odCl7cmV0dXJuIGZ1bmN0aW9uKGUpe2Zvcih2YXIgbj1pLlRhYmxlTWFwLmdldChlLiRhbmNob3JDZWxsLm5vZGUoLTEpKSxyPWUuJGFuY2hvckNlbGwuc3RhcnQoLTEpLG89bi5jZWxsc0luUmVjdCh0KSxzPW4uY2VsbHNJblJlY3Qobi5yZWN0QmV0d2VlbihlLiRhbmNob3JDZWxsLnBvcy1yLGUuJGhlYWRDZWxsLnBvcy1yKSksYT0wLGM9by5sZW5ndGg7YTxjO2ErKylpZigtMT09PXMuaW5kZXhPZihvW2FdKSlyZXR1cm4hMTtyZXR1cm4hMH19LEE9ZnVuY3Rpb24odCl7cmV0dXJuIHRbMF0ubWFwKChmdW5jdGlvbihlLG4pe3JldHVybiB0Lm1hcCgoZnVuY3Rpb24odCl7cmV0dXJuIHRbbl19KSl9KSl9LFI9ZnVuY3Rpb24odCl7Zm9yKHZhciBlPWkuVGFibGVNYXAuZ2V0KHQpLG49W10scj0wO3I8ZS5oZWlnaHQ7cisrKXtmb3IodmFyIG89W10scz17fSxhPTA7YTxlLndpZHRoO2ErKyl7dmFyIGM9ZS5tYXBbciplLndpZHRoK2FdLGw9dC5ub2RlQXQoYykscD1lLmZpbmRDZWxsKGMpO3NbY118fHAudG9wIT09cj9vLnB1c2gobnVsbCk6KHNbY109ITAsby5wdXNoKGwpKX1uLnB1c2gobyl9cmV0dXJuIG59LEQ9ZnVuY3Rpb24odCxlKXtmb3IodmFyIG49W10scj1pLlRhYmxlTWFwLmdldCh0KSxvPTA7bzxyLmhlaWdodDtvKyspe2Zvcih2YXIgcz10LmNoaWxkKG8pLGE9W10sYz0wO2M8ci53aWR0aDtjKyspaWYoZVtvXVtjXSl7dmFyIGw9ci5tYXBbbypyLndpZHRoK2NdLHA9ZVtvXVtjXSx1PXQubm9kZUF0KGwpLGg9dS50eXBlLmNyZWF0ZUNoZWNrZWQoT2JqZWN0LmFzc2lnbih7fSxwLmF0dHJzKSxwLmNvbnRlbnQscC5tYXJrcyk7YS5wdXNoKGgpfW4ucHVzaChzLnR5cGUuY3JlYXRlQ2hlY2tlZChzLmF0dHJzLGEscy5tYXJrcykpfXZhciBmPXQudHlwZS5jcmVhdGVDaGVja2VkKHQuYXR0cnMsbix0Lm1hcmtzKTtyZXR1cm4gZn0sej1mdW5jdGlvbih0LGUsbixyKXt2YXIgbz1BKFIodC5ub2RlKSk7cmV0dXJuIG89SShvLGUsbixyKSxvPUEobyksRCh0Lm5vZGUsbyl9LFA9ZnVuY3Rpb24odCxlLG4scil7dmFyIG89Uih0Lm5vZGUpO3JldHVybiBvPUkobyxlLG4sciksRCh0Lm5vZGUsbyl9LEk9ZnVuY3Rpb24odCxlLG4scil7dmFyIG89ZVswXT5uWzBdPy0xOjEsaT10LnNwbGljZShlWzBdLGUubGVuZ3RoKSxzPWkubGVuZ3RoJTI9PT0wPzE6MCxhPXZvaWQgMDtyZXR1cm4gYT0tMT09PXImJjE9PT1vP25bMF0tMToxPT09ciYmLTE9PT1vP25bbi5sZW5ndGgtMV0tcysxOi0xPT09bz9uWzBdOm5bbi5sZW5ndGgtMV0tcyx0LnNwbGljZS5hcHBseSh0LFthLDBdLmNvbmNhdChpKSksdH0sXz1mdW5jdGlvbih0LGUsbixyKXt2YXIgbz10PmU/LTE6MSxpPSJUYXJnZXQgcG9zaXRpb24gaXMgaW52YWxpZCwgeW91IGNhbid0IG1vdmUgdGhlICIrcisiICIrdCsiIHRvICIrZSsiLCB0aGUgdGFyZ2V0IGNhbid0IGJlIHNwbGl0LiBZb3UgY291bGQgdXNlIHRyeVRvRml0IG9wdGlvbi4iO2lmKDE9PT1vKXtpZigtMSE9PW4uc2xpY2UoMCxuLmxlbmd0aC0xKS5pbmRleE9mKGUpKXRocm93IG5ldyBFcnJvcihpKX1lbHNlIGlmKC0xIT09bi5zbGljZSgxKS5pbmRleE9mKGUpKXRocm93IG5ldyBFcnJvcihpKTtyZXR1cm4hMH0sRj1mdW5jdGlvbih0KXtyZXR1cm4gZnVuY3Rpb24oZSl7dmFyIG49ZS4kZnJvbTtyZXR1cm4gQihuLHQpfX0sQj1mdW5jdGlvbih0LGUpe2Zvcih2YXIgbj10LmRlcHRoO24+MDtuLS0pe3ZhciByPXQubm9kZShuKTtpZihlKHIpKXJldHVybntwb3M6bj4wP3QuYmVmb3JlKG4pOjAsc3RhcnQ6dC5zdGFydChuKSxkZXB0aDpuLG5vZGU6cn19fSxqPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIGZ1bmN0aW9uKG4pe3ZhciByPUYodCkobik7aWYocilyZXR1cm4gSyhyLnBvcyxlKX19LCQ9ZnVuY3Rpb24odCl7cmV0dXJuIGZ1bmN0aW9uKGUpe3JldHVybiEhRih0KShlKX19LFY9ZnVuY3Rpb24odCl7cmV0dXJuIGZ1bmN0aW9uKGUpe3JldHVybiBGKChmdW5jdGlvbihlKXtyZXR1cm4gdyh0LGUpfSkpKGUpfX0sTD1mdW5jdGlvbih0LGUpe3JldHVybiBCKHQsKGZ1bmN0aW9uKHQpe3JldHVybiB3KGUsdCl9KSl9LEo9ZnVuY3Rpb24odCl7cmV0dXJuIGZ1bmN0aW9uKGUpe3JldHVybiAkKChmdW5jdGlvbihlKXtyZXR1cm4gdyh0LGUpfSkpKGUpfX0scT1mdW5jdGlvbih0LGUpe3JldHVybiBmdW5jdGlvbihuKXtyZXR1cm4gaigoZnVuY3Rpb24oZSl7cmV0dXJuIHcodCxlKX0pLGUpKG4pfX0sVz1mdW5jdGlvbih0KXtyZXR1cm4gZnVuY3Rpb24oZSl7aWYoZyhlKSl7dmFyIG49ZS5ub2RlLHI9ZS4kZnJvbTtpZih3KHQsbikpcmV0dXJue25vZGU6bixwb3M6ci5wb3MsZGVwdGg6ci5kZXB0aH19fX0sSD1mdW5jdGlvbih0KXt2YXIgZT10LiRmcm9tLm5vZGVCZWZvcmUsbj1yLlNlbGVjdGlvbi5maW5kRnJvbSh0LiRmcm9tLC0xKTtpZihuJiZlKXt2YXIgbz1WKGUudHlwZSkobik7cmV0dXJuIG8/by5wb3M6bi4kZnJvbS5wb3N9fSxLPWZ1bmN0aW9uKHQsZSl7dmFyIG49ZSh0KSxyPW4ubm9kZS5jaGlsZE5vZGVzW24ub2Zmc2V0XTtyZXR1cm4gbi5ub2RlLm5vZGVUeXBlPT09Tm9kZS5URVhUX05PREU/bi5ub2RlLnBhcmVudE5vZGU6ciYmci5ub2RlVHlwZSE9PU5vZGUuVEVYVF9OT0RFP3I6bi5ub2RlfSxVPWZ1bmN0aW9uKHQpe3ZhciBlPSEoYXJndW1lbnRzLmxlbmd0aD4xJiZ2b2lkIDAhPT1hcmd1bWVudHNbMV0pfHxhcmd1bWVudHNbMV07aWYoIXQpdGhyb3cgbmV3IEVycm9yKCdJbnZhbGlkICJub2RlIiBwYXJhbWV0ZXInKTt2YXIgbj1bXTtyZXR1cm4gdC5kZXNjZW5kYW50cygoZnVuY3Rpb24odCxyKXtpZihuLnB1c2goe25vZGU6dCxwb3M6cn0pLCFlKXJldHVybiExfSkpLG59LEc9ZnVuY3Rpb24odCxlLG4pe2lmKCF0KXRocm93IG5ldyBFcnJvcignSW52YWxpZCAibm9kZSIgcGFyYW1ldGVyJyk7aWYoIWUpdGhyb3cgbmV3IEVycm9yKCdJbnZhbGlkICJwcmVkaWNhdGUiIHBhcmFtZXRlcicpO3JldHVybiBVKHQsbikuZmlsdGVyKChmdW5jdGlvbih0KXtyZXR1cm4gZSh0Lm5vZGUpfSkpfSxYPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIEcodCwoZnVuY3Rpb24odCl7cmV0dXJuIHQuaXNUZXh0fSksZSl9LFk9ZnVuY3Rpb24odCxlKXtyZXR1cm4gRyh0LChmdW5jdGlvbih0KXtyZXR1cm4gdC5pc0lubGluZX0pLGUpfSxRPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIEcodCwoZnVuY3Rpb24odCl7cmV0dXJuIHQuaXNCbG9ja30pLGUpfSxaPWZ1bmN0aW9uKHQsZSxuKXtyZXR1cm4gRyh0LChmdW5jdGlvbih0KXtyZXR1cm4hIWUodC5hdHRycyl9KSxuKX0sdHQ9ZnVuY3Rpb24odCxlLG4pe3JldHVybiBHKHQsKGZ1bmN0aW9uKHQpe3JldHVybiB0LnR5cGU9PT1lfSksbil9LGV0PWZ1bmN0aW9uKHQsZSxuKXtyZXR1cm4gRyh0LChmdW5jdGlvbih0KXtyZXR1cm4gZS5pc0luU2V0KHQubWFya3MpfSksbil9LG50PWZ1bmN0aW9uKHQsZSl7cmV0dXJuISF0dCh0LGUpLmxlbmd0aH07ZnVuY3Rpb24gcnQodCl7aWYoQXJyYXkuaXNBcnJheSh0KSl7Zm9yKHZhciBlPTAsbj1BcnJheSh0Lmxlbmd0aCk7ZTx0Lmxlbmd0aDtlKyspbltlXT10W2VdO3JldHVybiBufXJldHVybiBBcnJheS5mcm9tKHQpfXZhciBvdD1mdW5jdGlvbih0KXtyZXR1cm4gRigoZnVuY3Rpb24odCl7cmV0dXJuIHQudHlwZS5zcGVjLnRhYmxlUm9sZSYmInRhYmxlIj09PXQudHlwZS5zcGVjLnRhYmxlUm9sZX0pKSh0KX0saXQ9ZnVuY3Rpb24odCl7cmV0dXJuIHQgaW5zdGFuY2VvZiBpLkNlbGxTZWxlY3Rpb259LHN0PWZ1bmN0aW9uKHQpe2lmKGl0KHQpKXt2YXIgZT10LiRhbmNob3JDZWxsLnN0YXJ0KC0xKSxuPWkuVGFibGVNYXAuZ2V0KHQuJGFuY2hvckNlbGwubm9kZSgtMSkpO3JldHVybiBuLnJlY3RCZXR3ZWVuKHQuJGFuY2hvckNlbGwucG9zLWUsdC4kaGVhZENlbGwucG9zLWUpfX0sYXQ9ZnVuY3Rpb24odCl7cmV0dXJuIGZ1bmN0aW9uKGUpe2lmKGl0KGUpKXt2YXIgbj1pLlRhYmxlTWFwLmdldChlLiRhbmNob3JDZWxsLm5vZGUoLTEpKTtyZXR1cm4gRSh7bGVmdDp0LHJpZ2h0OnQrMSx0b3A6MCxib3R0b206bi5oZWlnaHR9KShlKX1yZXR1cm4hMX19LGN0PWZ1bmN0aW9uKHQpe3JldHVybiBmdW5jdGlvbihlKXtpZihpdChlKSl7dmFyIG49aS5UYWJsZU1hcC5nZXQoZS4kYW5jaG9yQ2VsbC5ub2RlKC0xKSk7cmV0dXJuIEUoe2xlZnQ6MCxyaWdodDpuLndpZHRoLHRvcDp0LGJvdHRvbTp0KzF9KShlKX1yZXR1cm4hMX19LGx0PWZ1bmN0aW9uKHQpe2lmKGl0KHQpKXt2YXIgZT1pLlRhYmxlTWFwLmdldCh0LiRhbmNob3JDZWxsLm5vZGUoLTEpKTtyZXR1cm4gRSh7bGVmdDowLHJpZ2h0OmUud2lkdGgsdG9wOjAsYm90dG9tOmUuaGVpZ2h0fSkodCl9cmV0dXJuITF9LHB0PWZ1bmN0aW9uKHQpe3JldHVybiBmdW5jdGlvbihlKXt2YXIgbj1vdChlKTtpZihuKXt2YXIgcj1pLlRhYmxlTWFwLmdldChuLm5vZGUpLG89QXJyYXkuaXNBcnJheSh0KT90OkFycmF5LmZyb20oW3RdKTtyZXR1cm4gby5yZWR1Y2UoKGZ1bmN0aW9uKHQsZSl7aWYoZT49MCYmZTw9ci53aWR0aC0xKXt2YXIgbz1yLmNlbGxzSW5SZWN0KHtsZWZ0OmUscmlnaHQ6ZSsxLHRvcDowLGJvdHRvbTpyLmhlaWdodH0pO3JldHVybiB0LmNvbmNhdChvLm1hcCgoZnVuY3Rpb24odCl7dmFyIGU9bi5ub2RlLm5vZGVBdCh0KSxyPXQrbi5zdGFydDtyZXR1cm57cG9zOnIsc3RhcnQ6cisxLG5vZGU6ZX19KSkpfX0pLFtdKX19fSx1dD1mdW5jdGlvbih0KXtyZXR1cm4gZnVuY3Rpb24oZSl7dmFyIG49b3QoZSk7aWYobil7dmFyIHI9aS5UYWJsZU1hcC5nZXQobi5ub2RlKSxvPUFycmF5LmlzQXJyYXkodCk/dDpBcnJheS5mcm9tKFt0XSk7cmV0dXJuIG8ucmVkdWNlKChmdW5jdGlvbih0LGUpe2lmKGU+PTAmJmU8PXIuaGVpZ2h0LTEpe3ZhciBvPXIuY2VsbHNJblJlY3Qoe2xlZnQ6MCxyaWdodDpyLndpZHRoLHRvcDplLGJvdHRvbTplKzF9KTtyZXR1cm4gdC5jb25jYXQoby5tYXAoKGZ1bmN0aW9uKHQpe3ZhciBlPW4ubm9kZS5ub2RlQXQodCkscj10K24uc3RhcnQ7cmV0dXJue3BvczpyLHN0YXJ0OnIrMSxub2RlOmV9fSkpKX19KSxbXSl9fX0saHQ9ZnVuY3Rpb24odCl7dmFyIGU9b3QodCk7aWYoZSl7dmFyIG49aS5UYWJsZU1hcC5nZXQoZS5ub2RlKSxyPW4uY2VsbHNJblJlY3Qoe2xlZnQ6MCxyaWdodDpuLndpZHRoLHRvcDowLGJvdHRvbTpuLmhlaWdodH0pO3JldHVybiByLm1hcCgoZnVuY3Rpb24odCl7dmFyIG49ZS5ub2RlLm5vZGVBdCh0KSxyPXQrZS5zdGFydDtyZXR1cm57cG9zOnIsc3RhcnQ6cisxLG5vZGU6bn19KSl9fSxmdD1mdW5jdGlvbih0KXtyZXR1cm4gZnVuY3Rpb24oZSxuKXtyZXR1cm4gZnVuY3Rpb24ocil7dmFyIG89b3Qoci5zZWxlY3Rpb24pLHM9InJvdyI9PT10O2lmKG8pe3ZhciBhPWkuVGFibGVNYXAuZ2V0KG8ubm9kZSk7aWYoZT49MCYmZTwocz9hLmhlaWdodDphLndpZHRoKSl7dmFyIGM9cz8wOmUsbD1zP2U6MCxwPXM/YS53aWR0aDplKzEsdT1zP2UrMTphLmhlaWdodDtpZihuKXt2YXIgaD1QdChyLnNlbGVjdGlvbi4kZnJvbSk7aWYoIWgpcmV0dXJuIHI7dmFyIGY9YS5maW5kQ2VsbChoLnBvcy1vLnN0YXJ0KTtzPyhsPU1hdGgubWluKGwsZi50b3ApLHU9TWF0aC5tYXgodSxmLmJvdHRvbSkpOihjPU1hdGgubWluKGMsZi5sZWZ0KSxwPU1hdGgubWF4KHAsZi5yaWdodCkpfXZhciBkPWEuY2VsbHNJblJlY3Qoe2xlZnQ6Yyx0b3A6bCxyaWdodDpzP3A6YysxLGJvdHRvbTpzP2wrMTp1fSksdj11LWw9PT0xP2Q6YS5jZWxsc0luUmVjdCh7bGVmdDpzP2M6cC0xLHRvcDpzP3UtMTpsLHJpZ2h0OnAsYm90dG9tOnV9KSxtPW8uc3RhcnQrZFswXSx5PW8uc3RhcnQrdlt2Lmxlbmd0aC0xXSxnPXIuZG9jLnJlc29sdmUobSksdz1yLmRvYy5yZXNvbHZlKHkpO3JldHVybiB4KHIuc2V0U2VsZWN0aW9uKG5ldyBpLkNlbGxTZWxlY3Rpb24odyxnKSkpfX1yZXR1cm4gcn19fSxkdD1mdCgiY29sdW1uIiksdnQ9ZnQoInJvdyIpLG10PWZ1bmN0aW9uKHQpe3ZhciBlPW90KHQuc2VsZWN0aW9uKTtpZihlKXt2YXIgbj1pLlRhYmxlTWFwLmdldChlLm5vZGUpLHI9bi5tYXA7aWYociYmci5sZW5ndGgpe3ZhciBvPWUuc3RhcnQrclswXSxzPWUuc3RhcnQrcltyLmxlbmd0aC0xXSxhPXQuZG9jLnJlc29sdmUobyksYz10LmRvYy5yZXNvbHZlKHMpO3JldHVybiB4KHQuc2V0U2VsZWN0aW9uKG5ldyBpLkNlbGxTZWxlY3Rpb24oYyxhKSkpfX1yZXR1cm4gdH0seXQ9ZnVuY3Rpb24odCxlKXtyZXR1cm4gZnVuY3Rpb24obil7aWYodCl7dmFyIHI9QyhlKS5jZWxsLmNyZWF0ZUFuZEZpbGwoKSxvPXIuY29udGVudDtpZighdC5ub2RlLmNvbnRlbnQuZXEobykpcmV0dXJuIG4ucmVwbGFjZVdpdGgodC5wb3MrMSx0LnBvcyt0Lm5vZGUubm9kZVNpemUsbykseChuKX1yZXR1cm4gbn19LGd0PWZ1bmN0aW9uKHQpe3JldHVybiBmdW5jdGlvbihlKXt2YXIgbj1vdChlLnNlbGVjdGlvbik7aWYobil7dmFyIHI9aS5UYWJsZU1hcC5nZXQobi5ub2RlKTtpZih0Pj0wJiZ0PD1yLndpZHRoKXJldHVybiB4KGkuYWRkQ29sdW1uKGUse21hcDpyLHRhYmxlU3RhcnQ6bi5zdGFydCx0YWJsZTpuLm5vZGV9LHQpKX1yZXR1cm4gZX19LHd0PWZ1bmN0aW9uKHQsZSxuKXtyZXR1cm4gZnVuY3Rpb24ocil7dmFyIG89e3RyeVRvRml0OiExLGRpcmVjdGlvbjowfSxpPU9iamVjdC5hc3NpZ24obyxuKSxzPW90KHIuc2VsZWN0aW9uKTtpZighcylyZXR1cm4gcjt2YXIgYT1CdCh0KShyKSxjPWEuaW5kZXhlcyxsPUJ0KGUpKHIpLHA9bC5pbmRleGVzO2lmKGMuaW5kZXhPZihlKT4tMSlyZXR1cm4gcjshaS50cnlUb0ZpdCYmcC5sZW5ndGg+MSYmXyh0LGUscCwicm93Iik7dmFyIHU9UChzLGMscCxpLmRpcmVjdGlvbik7cmV0dXJuIHgocikucmVwbGFjZVdpdGgocy5wb3Mscy5wb3Mrcy5ub2RlLm5vZGVTaXplLHUpfX0seHQ9ZnVuY3Rpb24odCxlLG4pe3JldHVybiBmdW5jdGlvbihyKXt2YXIgbz17dHJ5VG9GaXQ6ITEsZGlyZWN0aW9uOjB9LGk9T2JqZWN0LmFzc2lnbihvLG4pLHM9b3Qoci5zZWxlY3Rpb24pO2lmKCFzKXJldHVybiByO3ZhciBhPUZ0KHQpKHIpLGM9YS5pbmRleGVzLGw9RnQoZSkocikscD1sLmluZGV4ZXM7aWYoYy5pbmRleE9mKGUpPi0xKXJldHVybiByOyFpLnRyeVRvRml0JiZwLmxlbmd0aD4xJiZfKHQsZSxwLCJjb2x1bW4iKTt2YXIgdT16KHMsYyxwLGkuZGlyZWN0aW9uKTtyZXR1cm4geChyKS5yZXBsYWNlV2l0aChzLnBvcyxzLnBvcytzLm5vZGUubm9kZVNpemUsdSl9fSxidD1mdW5jdGlvbih0LGUpe3JldHVybiBmdW5jdGlvbihuKXt2YXIgcj1vdChuLnNlbGVjdGlvbik7aWYocil7dmFyIG89aS5UYWJsZU1hcC5nZXQoci5ub2RlKSxzPXQtMTtpZihlJiZzPj0wKXJldHVybiB4KGt0KHMpKG4pKTtpZih0Pj0wJiZ0PD1vLmhlaWdodClyZXR1cm4geChpLmFkZFJvdyhuLHttYXA6byx0YWJsZVN0YXJ0OnIuc3RhcnQsdGFibGU6ci5ub2RlfSx0KSl9cmV0dXJuIG59fSxrdD1mdW5jdGlvbih0KXtyZXR1cm4gZnVuY3Rpb24oZSl7dmFyIG49b3QoZS5zZWxlY3Rpb24pO2lmKG4pe3ZhciByPWkuVGFibGVNYXAuZ2V0KG4ubm9kZSk7aWYodD49MCYmdDw9ci5oZWlnaHQpe2Zvcih2YXIgbz1uLm5vZGUscz1DKG8udHlwZS5zY2hlbWEpLGE9bi5zdGFydCxjPTA7Yzx0KzE7YysrKWErPW8uY2hpbGQoYykubm9kZVNpemU7dmFyIGw9by5jaGlsZCh0KSxwPVtdLHU9MDtpZihsLmZvckVhY2goKGZ1bmN0aW9uKHQpezE9PT10LmF0dHJzLnJvd3NwYW4mJih1Kz10LmF0dHJzLmNvbHNwYW4scC5wdXNoKHNbdC50eXBlLnNwZWMudGFibGVSb2xlXS5jcmVhdGVBbmRGaWxsKHQuYXR0cnMsdC5tYXJrcykpKX0pKSx1PHIud2lkdGgpe2Zvcih2YXIgaD1bXSxmPWZ1bmN0aW9uKG4pe3ZhciByPV90KG4sKGZ1bmN0aW9uKGUscil7dmFyIG89ZS5ub2RlLmF0dHJzLnJvd3NwYW4saT1uK287cmV0dXJuIG8+MSYmaT50fSkpKGUpO2gucHVzaC5hcHBseShoLHJ0KHIpKX0sdj10O3Y+PTA7di0tKWYodik7aC5sZW5ndGgmJmguZm9yRWFjaCgoZnVuY3Rpb24odCl7ZT1EdCh0LHtyb3dzcGFuOnQubm9kZS5hdHRycy5yb3dzcGFuKzF9KShlKX0pKX1yZXR1cm4gZChzLnJvdy5jcmVhdGUobC5hdHRycyxwKSxhKShlKX19cmV0dXJuIGV9fSxTdD1mdW5jdGlvbih0KXtyZXR1cm4gZnVuY3Rpb24oZSl7dmFyIG49b3QoZS5zZWxlY3Rpb24pO2lmKG4pe3ZhciByPWkuVGFibGVNYXAuZ2V0KG4ubm9kZSk7aWYoMD09PXQmJjE9PT1yLndpZHRoKXJldHVybiBPdChlKTtpZih0Pj0wJiZ0PD1yLndpZHRoKXJldHVybiBpLnJlbW92ZUNvbHVtbihlLHttYXA6cix0YWJsZVN0YXJ0Om4uc3RhcnQsdGFibGU6bi5ub2RlfSx0KSx4KGUpfXJldHVybiBlfX0sQ3Q9ZnVuY3Rpb24odCl7cmV0dXJuIGZ1bmN0aW9uKGUpe3ZhciBuPW90KGUuc2VsZWN0aW9uKTtpZihuKXt2YXIgcj1pLlRhYmxlTWFwLmdldChuLm5vZGUpO2lmKDA9PT10JiYxPT09ci5oZWlnaHQpcmV0dXJuIE90KGUpO2lmKHQ+PTAmJnQ8PXIuaGVpZ2h0KXJldHVybiBpLnJlbW92ZVJvdyhlLHttYXA6cix0YWJsZVN0YXJ0Om4uc3RhcnQsdGFibGU6bi5ub2RlfSx0KSx4KGUpfXJldHVybiBlfX0sT3Q9ZnVuY3Rpb24odCl7Zm9yKHZhciBlPXQuc2VsZWN0aW9uLiRmcm9tLG49ZS5kZXB0aDtuPjA7bi0tKXt2YXIgcj1lLm5vZGUobik7aWYoInRhYmxlIj09PXIudHlwZS5zcGVjLnRhYmxlUm9sZSlyZXR1cm4geCh0LmRlbGV0ZShlLmJlZm9yZShuKSxlLmFmdGVyKG4pKSl9cmV0dXJuIHR9LE10PWZ1bmN0aW9uKHQpe3ZhciBlPXQuc2VsZWN0aW9uO2lmKGx0KGUpKXJldHVybiBPdCh0KTtpZihpdChlKSl7dmFyIG49b3QoZSk7aWYobil7dmFyIHI9aS5UYWJsZU1hcC5nZXQobi5ub2RlKSxvPXIucmVjdEJldHdlZW4oZS4kYW5jaG9yQ2VsbC5wb3Mtbi5zdGFydCxlLiRoZWFkQ2VsbC5wb3Mtbi5zdGFydCk7aWYoMD09by5sZWZ0JiZvLnJpZ2h0PT1yLndpZHRoKXJldHVybiExO2Zvcih2YXIgcz1PYmplY3QuYXNzaWduKHt9LG8se21hcDpyLHRhYmxlOm4ubm9kZSx0YWJsZVN0YXJ0Om4uc3RhcnR9KSxhPXMucmlnaHQtMTs7YS0tKXtpZihpLnJlbW92ZUNvbHVtbih0LHMsYSksYT09PXMubGVmdClicmVhaztzLnRhYmxlPXMudGFibGVTdGFydD90LmRvYy5ub2RlQXQocy50YWJsZVN0YXJ0LTEpOnQuZG9jLHMubWFwPWkuVGFibGVNYXAuZ2V0KHMudGFibGUpfXJldHVybiB4KHQpfX1yZXR1cm4gdH0sVHQ9ZnVuY3Rpb24odCl7dmFyIGU9dC5zZWxlY3Rpb247aWYobHQoZSkpcmV0dXJuIE90KHQpO2lmKGl0KGUpKXt2YXIgbj1vdChlKTtpZihuKXt2YXIgcj1pLlRhYmxlTWFwLmdldChuLm5vZGUpLG89ci5yZWN0QmV0d2VlbihlLiRhbmNob3JDZWxsLnBvcy1uLnN0YXJ0LGUuJGhlYWRDZWxsLnBvcy1uLnN0YXJ0KTtpZigwPT1vLnRvcCYmby5ib3R0b209PXIuaGVpZ2h0KXJldHVybiExO2Zvcih2YXIgcz1PYmplY3QuYXNzaWduKHt9LG8se21hcDpyLHRhYmxlOm4ubm9kZSx0YWJsZVN0YXJ0Om4uc3RhcnR9KSxhPXMuYm90dG9tLTE7O2EtLSl7aWYoaS5yZW1vdmVSb3codCxzLGEpLGE9PT1zLnRvcClicmVhaztzLnRhYmxlPXMudGFibGVTdGFydD90LmRvYy5ub2RlQXQocy50YWJsZVN0YXJ0LTEpOnQuZG9jLHMubWFwPWkuVGFibGVNYXAuZ2V0KHMudGFibGUpfXJldHVybiB4KHQpfX1yZXR1cm4gdH0sTnQ9ZnVuY3Rpb24odCl7cmV0dXJuIGZ1bmN0aW9uKGUpe3ZhciBuPUl0KHQpO3JldHVybiBuP1N0KG4ubGVmdCkocCh0LnBvcykoZSkpOmV9fSxFdD1mdW5jdGlvbih0KXtyZXR1cm4gZnVuY3Rpb24oZSl7dmFyIG49SXQodCk7cmV0dXJuIG4/Q3Qobi50b3ApKHAodC5wb3MpKGUpKTplfX0sQXQ9ZnVuY3Rpb24odCxlLG4pe3JldHVybiBmdW5jdGlvbihvKXt2YXIgaT1wdCh0KShvLnNlbGVjdGlvbik7aWYoaSl7Zm9yKHZhciBzPWkubGVuZ3RoLTE7cz49MDtzLS0pbz1lKGlbc10sbyk7aWYobil7dmFyIGE9by5kb2MucmVzb2x2ZShvLm1hcHBpbmcubWFwKGlbaS5sZW5ndGgtMV0ucG9zKSk7by5zZXRTZWxlY3Rpb24oci5TZWxlY3Rpb24ubmVhcihhKSl9cmV0dXJuIHgobyl9cmV0dXJuIG99fSxSdD1mdW5jdGlvbih0LGUsbil7cmV0dXJuIGZ1bmN0aW9uKG8pe3ZhciBpPXV0KHQpKG8uc2VsZWN0aW9uKTtpZihpKXtmb3IodmFyIHM9aS5sZW5ndGgtMTtzPj0wO3MtLSlvPWUoaVtzXSxvKTtpZihuKXt2YXIgYT1vLmRvYy5yZXNvbHZlKG8ubWFwcGluZy5tYXAoaVtpLmxlbmd0aC0xXS5wb3MpKTtvLnNldFNlbGVjdGlvbihyLlNlbGVjdGlvbi5uZWFyKGEpKX19cmV0dXJuIG99fSxEdD1mdW5jdGlvbih0LGUpe3JldHVybiBmdW5jdGlvbihuKXtyZXR1cm4gdD8obi5zZXROb2RlTWFya3VwKHQucG9zLG51bGwsT2JqZWN0LmFzc2lnbih7fSx0Lm5vZGUuYXR0cnMsZSkpLHgobikpOm59fSx6dD1mdW5jdGlvbih0KXtmb3IodmFyIGU9YXJndW1lbnRzLmxlbmd0aD4xJiZ2b2lkIDAhPT1hcmd1bWVudHNbMV0/YXJndW1lbnRzWzFdOjMsbj1hcmd1bWVudHMubGVuZ3RoPjImJnZvaWQgMCE9PWFyZ3VtZW50c1syXT9hcmd1bWVudHNbMl06MyxyPSEoYXJndW1lbnRzLmxlbmd0aD4zJiZ2b2lkIDAhPT1hcmd1bWVudHNbM10pfHxhcmd1bWVudHNbM10sbz1hcmd1bWVudHMubGVuZ3RoPjQmJnZvaWQgMCE9PWFyZ3VtZW50c1s0XT9hcmd1bWVudHNbNF06bnVsbCxpPUModCkscz1pLmNlbGwsYT1pLmhlYWRlcl9jZWxsLGM9aS5yb3csbD1pLnRhYmxlLHA9W10sdT1bXSxoPTA7aDxuO2grKylwLnB1c2goTihzLG8pKSxyJiZ1LnB1c2goTihhLG8pKTtmb3IodmFyIGY9W10sZD0wO2Q8ZTtkKyspZi5wdXNoKGMuY3JlYXRlQ2hlY2tlZChudWxsLHImJjA9PT1kP3U6cCkpO3JldHVybiBsLmNyZWF0ZUNoZWNrZWQobnVsbCxmKX0sUHQ9ZnVuY3Rpb24odCl7dmFyIGU9ZnVuY3Rpb24odCl7cmV0dXJuIHQudHlwZS5zcGVjLnRhYmxlUm9sZSYmL2NlbGwvaS50ZXN0KHQudHlwZS5zcGVjLnRhYmxlUm9sZSl9O3JldHVybiBCKHQsZSl9LEl0PWZ1bmN0aW9uKHQpe3ZhciBlPVB0KHQpO2lmKGUpe3ZhciBuPVQodCkscj1pLlRhYmxlTWFwLmdldChuLm5vZGUpLG89ZS5wb3Mtbi5zdGFydDtyZXR1cm4gci5yZWN0QmV0d2VlbihvLG8pfX0sX3Q9ZnVuY3Rpb24odCxlKXtyZXR1cm4gZnVuY3Rpb24obil7dmFyIHI9W10sbz11dCh0KShuLnNlbGVjdGlvbik7aWYobylmb3IodmFyIGk9by5sZW5ndGgtMTtpPj0wO2ktLSllKG9baV0sbikmJnIucHVzaChvW2ldKTtyZXR1cm4gcn19LEZ0PWZ1bmN0aW9uKHQpe3JldHVybiBmdW5jdGlvbihlKXtmb3IodmFyIG49dCxyPXQsbz1mdW5jdGlvbih0KXt2YXIgbz1wdCh0KShlLnNlbGVjdGlvbik7byYmby5mb3JFYWNoKChmdW5jdGlvbihlKXt2YXIgbz1lLm5vZGUuYXR0cnMuY29sc3Bhbit0LTE7bz49biYmKG49dCksbz5yJiYocj1vKX0pKX0saT10O2k+PTA7aS0tKW8oaSk7dmFyIHM9ZnVuY3Rpb24odCl7dmFyIG49cHQodCkoZS5zZWxlY3Rpb24pO24mJm4uZm9yRWFjaCgoZnVuY3Rpb24oZSl7dmFyIG49ZS5ub2RlLmF0dHJzLmNvbHNwYW4rdC0xO2Uubm9kZS5hdHRycy5jb2xzcGFuPjEmJm4+ciYmKHI9bil9KSl9O2ZvcihpPXQ7aTw9cjtpKyspcyhpKTt2YXIgYT1bXTtmb3IoaT1uO2k8PXI7aSsrKXt2YXIgYz1wdChpKShlLnNlbGVjdGlvbik7YyYmYy5sZW5ndGgmJmEucHVzaChpKX1uPWFbMF0scj1hW2EubGVuZ3RoLTFdO2Zvcih2YXIgbD1wdChuKShlLnNlbGVjdGlvbikscD11dCgwKShlLnNlbGVjdGlvbiksdT1lLmRvYy5yZXNvbHZlKGxbbC5sZW5ndGgtMV0ucG9zKSxoPXZvaWQgMCxmPXI7Zj49bjtmLS0pe3ZhciBkPXB0KGYpKGUuc2VsZWN0aW9uKTtpZihkJiZkLmxlbmd0aCl7Zm9yKHZhciB2PXAubGVuZ3RoLTE7dj49MDt2LS0paWYocFt2XS5wb3M9PT1kWzBdLnBvcyl7aD1kWzBdO2JyZWFrfWlmKGgpYnJlYWt9fXZhciBtPWUuZG9jLnJlc29sdmUoaC5wb3MpO3JldHVybnskYW5jaG9yOnUsJGhlYWQ6bSxpbmRleGVzOmF9fX0sQnQ9ZnVuY3Rpb24odCl7cmV0dXJuIGZ1bmN0aW9uKGUpe2Zvcih2YXIgbj10LHI9dCxvPWZ1bmN0aW9uKHQpe3ZhciBvPXV0KHQpKGUuc2VsZWN0aW9uKTtvLmZvckVhY2goKGZ1bmN0aW9uKGUpe3ZhciBvPWUubm9kZS5hdHRycy5yb3dzcGFuK3QtMTtvPj1uJiYobj10KSxvPnImJihyPW8pfSkpfSxpPXQ7aT49MDtpLS0pbyhpKTt2YXIgcz1mdW5jdGlvbih0KXt2YXIgbj11dCh0KShlLnNlbGVjdGlvbik7bi5mb3JFYWNoKChmdW5jdGlvbihlKXt2YXIgbj1lLm5vZGUuYXR0cnMucm93c3Bhbit0LTE7ZS5ub2RlLmF0dHJzLnJvd3NwYW4+MSYmbj5yJiYocj1uKX0pKX07Zm9yKGk9dDtpPD1yO2krKylzKGkpO3ZhciBhPVtdO2ZvcihpPW47aTw9cjtpKyspe3ZhciBjPXV0KGkpKGUuc2VsZWN0aW9uKTtjJiZjLmxlbmd0aCYmYS5wdXNoKGkpfW49YVswXSxyPWFbYS5sZW5ndGgtMV07Zm9yKHZhciBsPXV0KG4pKGUuc2VsZWN0aW9uKSxwPXB0KDApKGUuc2VsZWN0aW9uKSx1PWUuZG9jLnJlc29sdmUobFtsLmxlbmd0aC0xXS5wb3MpLGg9dm9pZCAwLGY9cjtmPj1uO2YtLSl7dmFyIGQ9dXQoZikoZS5zZWxlY3Rpb24pO2lmKGQmJmQubGVuZ3RoKXtmb3IodmFyIHY9cC5sZW5ndGgtMTt2Pj0wO3YtLSlpZihwW3ZdLnBvcz09PWRbMF0ucG9zKXtoPWRbMF07YnJlYWt9aWYoaClicmVha319dmFyIG09ZS5kb2MucmVzb2x2ZShoLnBvcyk7cmV0dXJueyRhbmNob3I6dSwkaGVhZDptLGluZGV4ZXM6YX19fTtlLmlzTm9kZVNlbGVjdGlvbj1nLGUuY2FuSW5zZXJ0PU8sZS5jb252ZXJ0VGFibGVOb2RlVG9BcnJheU9mUm93cz1SLGUuY29udmVydEFycmF5T2ZSb3dzVG9UYWJsZU5vZGU9RCxlLmZpbmRQYXJlbnROb2RlPUYsZS5maW5kUGFyZW50Tm9kZUNsb3Nlc3RUb1Bvcz1CLGUuZmluZFBhcmVudERvbVJlZj1qLGUuaGFzUGFyZW50Tm9kZT0kLGUuZmluZFBhcmVudE5vZGVPZlR5cGU9VixlLmZpbmRQYXJlbnROb2RlT2ZUeXBlQ2xvc2VzdFRvUG9zPUwsZS5oYXNQYXJlbnROb2RlT2ZUeXBlPUosZS5maW5kUGFyZW50RG9tUmVmT2ZUeXBlPXEsZS5maW5kU2VsZWN0ZWROb2RlT2ZUeXBlPVcsZS5maW5kUG9zaXRpb25PZk5vZGVCZWZvcmU9SCxlLmZpbmREb21SZWZBdFBvcz1LLGUuZmxhdHRlbj1VLGUuZmluZENoaWxkcmVuPUcsZS5maW5kVGV4dE5vZGVzPVgsZS5maW5kSW5saW5lTm9kZXM9WSxlLmZpbmRCbG9ja05vZGVzPVEsZS5maW5kQ2hpbGRyZW5CeUF0dHI9WixlLmZpbmRDaGlsZHJlbkJ5VHlwZT10dCxlLmZpbmRDaGlsZHJlbkJ5TWFyaz1ldCxlLmNvbnRhaW5zPW50LGUuZmluZFRhYmxlPW90LGUuaXNDZWxsU2VsZWN0aW9uPWl0LGUuZ2V0U2VsZWN0aW9uUmVjdD1zdCxlLmlzQ29sdW1uU2VsZWN0ZWQ9YXQsZS5pc1Jvd1NlbGVjdGVkPWN0LGUuaXNUYWJsZVNlbGVjdGVkPWx0LGUuZ2V0Q2VsbHNJbkNvbHVtbj1wdCxlLmdldENlbGxzSW5Sb3c9dXQsZS5nZXRDZWxsc0luVGFibGU9aHQsZS5zZWxlY3RDb2x1bW49ZHQsZS5zZWxlY3RSb3c9dnQsZS5zZWxlY3RUYWJsZT1tdCxlLmVtcHR5Q2VsbD15dCxlLmFkZENvbHVtbkF0PWd0LGUubW92ZVJvdz13dCxlLm1vdmVDb2x1bW49eHQsZS5hZGRSb3dBdD1idCxlLmNsb25lUm93QXQ9a3QsZS5yZW1vdmVDb2x1bW5BdD1TdCxlLnJlbW92ZVJvd0F0PUN0LGUucmVtb3ZlVGFibGU9T3QsZS5yZW1vdmVTZWxlY3RlZENvbHVtbnM9TXQsZS5yZW1vdmVTZWxlY3RlZFJvd3M9VHQsZS5yZW1vdmVDb2x1bW5DbG9zZXN0VG9Qb3M9TnQsZS5yZW1vdmVSb3dDbG9zZXN0VG9Qb3M9RXQsZS5mb3JFYWNoQ2VsbEluQ29sdW1uPUF0LGUuZm9yRWFjaENlbGxJblJvdz1SdCxlLnNldENlbGxBdHRycz1EdCxlLmNyZWF0ZVRhYmxlPXp0LGUuZmluZENlbGxDbG9zZXN0VG9Qb3M9UHQsZS5maW5kQ2VsbFJlY3RDbG9zZXN0VG9Qb3M9SXQsZS5nZXRTZWxlY3Rpb25SYW5nZUluQ29sdW1uPUZ0LGUuZ2V0U2VsZWN0aW9uUmFuZ2VJblJvdz1CdCxlLnJlbW92ZVBhcmVudE5vZGVPZlR5cGU9cyxlLnJlcGxhY2VQYXJlbnROb2RlT2ZUeXBlPWEsZS5yZW1vdmVTZWxlY3RlZE5vZGU9YyxlLnJlcGxhY2VTZWxlY3RlZE5vZGU9bCxlLnNldFRleHRTZWxlY3Rpb249cCxlLnNhZmVJbnNlcnQ9ZCxlLnNldFBhcmVudE5vZGVNYXJrdXA9dixlLnNlbGVjdFBhcmVudE5vZGVPZlR5cGU9bSxlLnJlbW92ZU5vZGVCZWZvcmU9eX0sIjQxYTAiOmZ1bmN0aW9uKHQsZSxuKXsidXNlIHN0cmljdCI7dmFyIHI9bigiMmFlYiIpLG89bigiNDYzMCIpLGk9bigiN2YyMCIpLHM9e307bigiMzJlOSIpKHMsbigiMmI0YyIpKCJpdGVyYXRvciIpLChmdW5jdGlvbigpe3JldHVybiB0aGlzfSkpLHQuZXhwb3J0cz1mdW5jdGlvbih0LGUsbil7dC5wcm90b3R5cGU9cihzLHtuZXh0Om8oMSxuKX0pLGkodCxlKyIgSXRlcmF0b3IiKX19LDQ1ODg6ZnVuY3Rpb24odCxlKXt2YXIgbj1NYXRoLmNlaWwscj1NYXRoLmZsb29yO3QuZXhwb3J0cz1mdW5jdGlvbih0KXtyZXR1cm4gaXNOYU4odD0rdCk/MDoodD4wP3I6bikodCl9fSwiNDVmMiI6ZnVuY3Rpb24odCxlLG4pe3ZhciByPW4oImQ5ZjYiKS5mLG89bigiMDdlMyIpLGk9bigiNTE2OCIpKCJ0b1N0cmluZ1RhZyIpO3QuZXhwb3J0cz1mdW5jdGlvbih0LGUsbil7dCYmIW8odD1uP3Q6dC5wcm90b3R5cGUsaSkmJnIodCxpLHtjb25maWd1cmFibGU6ITAsdmFsdWU6ZX0pfX0sNDYzMDpmdW5jdGlvbih0LGUpe3QuZXhwb3J0cz1mdW5jdGlvbih0LGUpe3JldHVybntlbnVtZXJhYmxlOiEoMSZ0KSxjb25maWd1cmFibGU6ISgyJnQpLHdyaXRhYmxlOiEoNCZ0KSx2YWx1ZTplfX19LCI0NjlmIjpmdW5jdGlvbih0LGUsbil7bigiNmMxYyIpLG4oIjE2NTQiKSx0LmV4cG9ydHM9bigiN2Q3YiIpfSwiNDgxYiI6ZnVuY3Rpb24odCxlKXt0LmV4cG9ydHM9e319LCI0YmY4IjpmdW5jdGlvbih0LGUsbil7dmFyIHI9bigiYmUxMyIpO3QuZXhwb3J0cz1mdW5jdGlvbih0KXtyZXR1cm4gT2JqZWN0KHIodCkpfX0sIjRjYTQiOmZ1bmN0aW9uKHQsZSl7Zm9yKHZhciBuPXs4OiJCYWNrc3BhY2UiLDk6IlRhYiIsMTA6IkVudGVyIiwxMjoiTnVtTG9jayIsMTM6IkVudGVyIiwxNjoiU2hpZnQiLDE3OiJDb250cm9sIiwxODoiQWx0IiwyMDoiQ2Fwc0xvY2siLDI3OiJFc2NhcGUiLDMyOiIgIiwzMzoiUGFnZVVwIiwzNDoiUGFnZURvd24iLDM1OiJFbmQiLDM2OiJIb21lIiwzNzoiQXJyb3dMZWZ0IiwzODoiQXJyb3dVcCIsMzk6IkFycm93UmlnaHQiLDQwOiJBcnJvd0Rvd24iLDQ0OiJQcmludFNjcmVlbiIsNDU6Ikluc2VydCIsNDY6IkRlbGV0ZSIsNTk6IjsiLDYxOiI9Iiw5MToiTWV0YSIsOTI6Ik1ldGEiLDEwNjoiKiIsMTA3OiIrIiwxMDg6IiwiLDEwOToiLSIsMTEwOiIuIiwxMTE6Ii8iLDE0NDoiTnVtTG9jayIsMTQ1OiJTY3JvbGxMb2NrIiwxNjA6IlNoaWZ0IiwxNjE6IlNoaWZ0IiwxNjI6IkNvbnRyb2wiLDE2MzoiQ29udHJvbCIsMTY0OiJBbHQiLDE2NToiQWx0IiwxNzM6Ii0iLDE4NjoiOyIsMTg3OiI9IiwxODg6IiwiLDE4OToiLSIsMTkwOiIuIiwxOTE6Ii8iLDE5MjoiYCIsMjE5OiJbIiwyMjA6IlxcIiwyMjE6Il0iLDIyMjoiJyIsMjI5OiJxIn0scj17NDg6IikiLDQ5OiIhIiw1MDoiQCIsNTE6IiMiLDUyOiIkIiw1MzoiJSIsNTQ6Il4iLDU1OiImIiw1NjoiKiIsNTc6IigiLDU5OiI7Iiw2MToiKyIsMTczOiJfIiwxODY6IjoiLDE4NzoiKyIsMTg4OiI8IiwxODk6Il8iLDE5MDoiPiIsMTkxOiI/IiwxOTI6In4iLDIxOToieyIsMjIwOiJ8IiwyMjE6In0iLDIyMjonIicsMjI5OiJRIn0sbz0idW5kZWZpbmVkIiE9dHlwZW9mIG5hdmlnYXRvciYmL0Nocm9tZVwvKFxkKykvLmV4ZWMobmF2aWdhdG9yLnVzZXJBZ2VudCksaT0idW5kZWZpbmVkIiE9dHlwZW9mIG5hdmlnYXRvciYmL0FwcGxlIENvbXB1dGVyLy50ZXN0KG5hdmlnYXRvci52ZW5kb3IpLHM9InVuZGVmaW5lZCIhPXR5cGVvZiBuYXZpZ2F0b3ImJi9HZWNrb1wvXGQrLy50ZXN0KG5hdmlnYXRvci51c2VyQWdlbnQpLGE9InVuZGVmaW5lZCIhPXR5cGVvZiBuYXZpZ2F0b3ImJi9NYWMvLnRlc3QobmF2aWdhdG9yLnBsYXRmb3JtKSxjPW8mJihhfHwrb1sxXTw1Nyl8fHMmJmEsbD0wO2w8MTA7bCsrKW5bNDgrbF09bls5NitsXT1TdHJpbmcobCk7Zm9yKGw9MTtsPD0yNDtsKyspbltsKzExMV09IkYiK2w7Zm9yKGw9NjU7bDw9OTA7bCsrKW5bbF09U3RyaW5nLmZyb21DaGFyQ29kZShsKzMyKSxyW2xdPVN0cmluZy5mcm9tQ2hhckNvZGUobCk7Zm9yKHZhciBwIGluIG4pci5oYXNPd25Qcm9wZXJ0eShwKXx8KHJbcF09bltwXSk7ZnVuY3Rpb24gdSh0KXt2YXIgZT1jJiYodC5jdHJsS2V5fHx0LmFsdEtleXx8dC5tZXRhS2V5KXx8aSYmdC5zaGlmdEtleSYmdC5rZXkmJjE9PXQua2V5Lmxlbmd0aCxvPSFlJiZ0LmtleXx8KHQuc2hpZnRLZXk/cjpuKVt0LmtleUNvZGVdfHx0LmtleXx8IlVuaWRlbnRpZmllZCI7cmV0dXJuIkVzYyI9PW8mJihvPSJFc2NhcGUiKSwiRGVsIj09byYmKG89IkRlbGV0ZSIpLCJMZWZ0Ij09byYmKG89IkFycm93TGVmdCIpLCJVcCI9PW8mJihvPSJBcnJvd1VwIiksIlJpZ2h0Ij09byYmKG89IkFycm93UmlnaHQiKSwiRG93biI9PW8mJihvPSJBcnJvd0Rvd24iKSxvfXQuZXhwb3J0cz11LHUuYmFzZT1uLHUuc2hpZnQ9cn0sIjUwNGMiOmZ1bmN0aW9uKHQsZSxuKXt2YXIgcj1uKCI5ZTFlIiksbz1uKCIwZDU4IiksaT1uKCI2ODIxIikscz1uKCI1MmE3IikuZjt0LmV4cG9ydHM9ZnVuY3Rpb24odCl7cmV0dXJuIGZ1bmN0aW9uKGUpe3ZhciBuLGE9aShlKSxjPW8oYSksbD1jLmxlbmd0aCxwPTAsdT1bXTt3aGlsZShsPnApbj1jW3ArK10sciYmIXMuY2FsbChhLG4pfHx1LnB1c2godD9bbixhW25dXTphW25dKTtyZXR1cm4gdX19fSwiNTBlZCI6ZnVuY3Rpb24odCxlKXt0LmV4cG9ydHM9ZnVuY3Rpb24odCxlKXtyZXR1cm57dmFsdWU6ZSxkb25lOiEhdH19fSw1MTY4OmZ1bmN0aW9uKHQsZSxuKXt2YXIgcj1uKCJkYmRiIikoIndrcyIpLG89bigiNjJhMCIpLGk9bigiZTUzZCIpLlN5bWJvbCxzPSJmdW5jdGlvbiI9PXR5cGVvZiBpLGE9dC5leHBvcnRzPWZ1bmN0aW9uKHQpe3JldHVybiByW3RdfHwoclt0XT1zJiZpW3RdfHwocz9pOm8pKCJTeW1ib2wuIit0KSl9O2Euc3RvcmU9cn0sIjUyYTciOmZ1bmN0aW9uKHQsZSl7ZS5mPXt9LnByb3BlcnR5SXNFbnVtZXJhYmxlfSwiNTNlMiI6ZnVuY3Rpb24odCxlLG4pe3ZhciByPW4oIjA3ZTMiKSxvPW4oIjI0MWUiKSxpPW4oIjU1NTkiKSgiSUVfUFJPVE8iKSxzPU9iamVjdC5wcm90b3R5cGU7dC5leHBvcnRzPU9iamVjdC5nZXRQcm90b3R5cGVPZnx8ZnVuY3Rpb24odCl7cmV0dXJuIHQ9byh0KSxyKHQsaSk/dFtpXToiZnVuY3Rpb24iPT10eXBlb2YgdC5jb25zdHJ1Y3RvciYmdCBpbnN0YW5jZW9mIHQuY29uc3RydWN0b3I/dC5jb25zdHJ1Y3Rvci5wcm90b3R5cGU6dCBpbnN0YW5jZW9mIE9iamVjdD9zOm51bGx9fSwiNTQwYyI6ZnVuY3Rpb24odCxlLG4peyJ1c2Ugc3RyaWN0IjtPYmplY3QuZGVmaW5lUHJvcGVydHkoZSwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSk7dmFyIHI9bigiNmZmYiIpLG89bigiOWZkZCIpLGk9bigiYjkyMyIpLHM9e307aWYoInVuZGVmaW5lZCIhPXR5cGVvZiBuYXZpZ2F0b3ImJiJ1bmRlZmluZWQiIT10eXBlb2YgZG9jdW1lbnQpe3ZhciBhPS9FZGdlXC8oXGQrKS8uZXhlYyhuYXZpZ2F0b3IudXNlckFnZW50KSxjPS9NU0lFIFxkLy50ZXN0KG5hdmlnYXRvci51c2VyQWdlbnQpLGw9L1RyaWRlbnRcLyg/Ols3LTldfFxkezIsfSlcLi4qcnY6KFxkKykvLmV4ZWMobmF2aWdhdG9yLnVzZXJBZ2VudCk7cy5tYWM9L01hYy8udGVzdChuYXZpZ2F0b3IucGxhdGZvcm0pO3ZhciBwPXMuaWU9ISEoY3x8bHx8YSk7cy5pZV92ZXJzaW9uPWM/ZG9jdW1lbnQuZG9jdW1lbnRNb2RlfHw2Omw/K2xbMV06YT8rYVsxXTpudWxsLHMuZ2Vja289IXAmJi9nZWNrb1wvKFxkKykvaS50ZXN0KG5hdmlnYXRvci51c2VyQWdlbnQpLHMuZ2Vja29fdmVyc2lvbj1zLmdlY2tvJiYrKC9GaXJlZm94XC8oXGQrKS8uZXhlYyhuYXZpZ2F0b3IudXNlckFnZW50KXx8WzAsMF0pWzFdO3ZhciB1PSFwJiYvQ2hyb21lXC8oXGQrKS8uZXhlYyhuYXZpZ2F0b3IudXNlckFnZW50KTtzLmNocm9tZT0hIXUscy5jaHJvbWVfdmVyc2lvbj11JiYrdVsxXSxzLmlvcz0hcCYmL0FwcGxlV2ViS2l0Ly50ZXN0KG5hdmlnYXRvci51c2VyQWdlbnQpJiYvTW9iaWxlXC9cdysvLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudCkscy5hbmRyb2lkPS9BbmRyb2lkIFxkLy50ZXN0KG5hdmlnYXRvci51c2VyQWdlbnQpLHMud2Via2l0PSFwJiYiV2Via2l0QXBwZWFyYW5jZSJpbiBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc3R5bGUscy5zYWZhcmk9L0FwcGxlIENvbXB1dGVyLy50ZXN0KG5hdmlnYXRvci52ZW5kb3IpLHMud2Via2l0X3ZlcnNpb249cy53ZWJraXQmJisoL1xiQXBwbGVXZWJLaXRcLyhcZCspLy5leGVjKG5hdmlnYXRvci51c2VyQWdlbnQpfHxbMCwwXSlbMV19dmFyIGg9ZnVuY3Rpb24odCl7Zm9yKHZhciBlPTA7O2UrKylpZih0PXQucHJldmlvdXNTaWJsaW5nLCF0KXJldHVybiBlfSxmPWZ1bmN0aW9uKHQpe3ZhciBlPXQucGFyZW50Tm9kZTtyZXR1cm4gZSYmMTE9PWUubm9kZVR5cGU/ZS5ob3N0OmV9LGQ9ZnVuY3Rpb24odCxlLG4pe3ZhciByPWRvY3VtZW50LmNyZWF0ZVJhbmdlKCk7cmV0dXJuIHIuc2V0RW5kKHQsbnVsbD09bj90Lm5vZGVWYWx1ZS5sZW5ndGg6biksci5zZXRTdGFydCh0LGV8fDApLHJ9LHY9ZnVuY3Rpb24odCxlLG4scil7cmV0dXJuIG4mJih5KHQsZSxuLHIsLTEpfHx5KHQsZSxuLHIsMSkpfSxtPS9eKGltZ3xicnxpbnB1dHx0ZXh0YXJlYXxocikkL2k7ZnVuY3Rpb24geSh0LGUsbixyLG8pe2Zvcig7Oyl7aWYodD09biYmZT09cilyZXR1cm4hMDtpZihlPT0obzwwPzA6Zyh0KSkpe3ZhciBpPXQucGFyZW50Tm9kZTtpZigxIT1pLm5vZGVUeXBlfHx3KHQpfHxtLnRlc3QodC5ub2RlTmFtZSl8fCJmYWxzZSI9PXQuY29udGVudEVkaXRhYmxlKXJldHVybiExO2U9aCh0KSsobzwwPzA6MSksdD1pfWVsc2V7aWYoMSE9dC5ub2RlVHlwZSlyZXR1cm4hMTt0PXQuY2hpbGROb2Rlc1tlKyhvPDA/LTE6MCldLGU9bzwwP2codCk6MH19fWZ1bmN0aW9uIGcodCl7cmV0dXJuIDM9PXQubm9kZVR5cGU/dC5ub2RlVmFsdWUubGVuZ3RoOnQuY2hpbGROb2Rlcy5sZW5ndGh9ZnVuY3Rpb24gdyh0KXtmb3IodmFyIGUsbj10O247bj1uLnBhcmVudE5vZGUpaWYoZT1uLnBtVmlld0Rlc2MpYnJlYWs7cmV0dXJuIGUmJmUubm9kZSYmZS5ub2RlLmlzQmxvY2smJihlLmRvbT09dHx8ZS5jb250ZW50RE9NPT10KX12YXIgeD1mdW5jdGlvbih0KXt2YXIgZT10LmlzQ29sbGFwc2VkO3JldHVybiBlJiZzLmNocm9tZSYmdC5yYW5nZUNvdW50JiYhdC5nZXRSYW5nZUF0KDApLmNvbGxhcHNlZCYmKGU9ITEpLGV9O2Z1bmN0aW9uIGIodCxlKXt2YXIgbj1kb2N1bWVudC5jcmVhdGVFdmVudCgiRXZlbnQiKTtyZXR1cm4gbi5pbml0RXZlbnQoImtleWRvd24iLCEwLCEwKSxuLmtleUNvZGU9dCxuLmtleT1uLmNvZGU9ZSxufWZ1bmN0aW9uIGsodCl7cmV0dXJue2xlZnQ6MCxyaWdodDp0LmlubmVyV2lkdGgsdG9wOjAsYm90dG9tOnQuaW5uZXJIZWlnaHR9fWZ1bmN0aW9uIFModCxlKXtyZXR1cm4ibnVtYmVyIj09dHlwZW9mIHQ/dDp0W2VdfWZ1bmN0aW9uIEModCxlLG4pe2Zvcih2YXIgcj10LnNvbWVQcm9wKCJzY3JvbGxUaHJlc2hvbGQiKXx8MCxvPXQuc29tZVByb3AoInNjcm9sbE1hcmdpbiIpfHw1LGk9dC5kb20ub3duZXJEb2N1bWVudCxzPWkuZGVmYXVsdFZpZXcsYT1ufHx0LmRvbTs7YT1mKGEpKXtpZighYSlicmVhaztpZigxPT1hLm5vZGVUeXBlKXt2YXIgYz1hPT1pLmJvZHl8fDEhPWEubm9kZVR5cGUsbD1jP2socyk6YS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKSxwPTAsdT0wO2lmKGUudG9wPGwudG9wK1MociwidG9wIik/dT0tKGwudG9wLWUudG9wK1MobywidG9wIikpOmUuYm90dG9tPmwuYm90dG9tLVMociwiYm90dG9tIikmJih1PWUuYm90dG9tLWwuYm90dG9tK1MobywiYm90dG9tIikpLGUubGVmdDxsLmxlZnQrUyhyLCJsZWZ0Iik/cD0tKGwubGVmdC1lLmxlZnQrUyhvLCJsZWZ0IikpOmUucmlnaHQ+bC5yaWdodC1TKHIsInJpZ2h0IikmJihwPWUucmlnaHQtbC5yaWdodCtTKG8sInJpZ2h0IikpLChwfHx1KSYmKGM/cy5zY3JvbGxCeShwLHUpOih1JiYoYS5zY3JvbGxUb3ArPXUpLHAmJihhLnNjcm9sbExlZnQrPXApKSksYylicmVha319fWZ1bmN0aW9uIE8odCl7Zm9yKHZhciBlLG4scj10LmRvbS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKSxvPU1hdGgubWF4KDAsci50b3ApLGk9dC5kb20ub3duZXJEb2N1bWVudCxzPShyLmxlZnQrci5yaWdodCkvMixhPW8rMTthPE1hdGgubWluKGlubmVySGVpZ2h0LHIuYm90dG9tKTthKz01KXt2YXIgYz10LnJvb3QuZWxlbWVudEZyb21Qb2ludChzLGEpO2lmKGMhPXQuZG9tJiZ0LmRvbS5jb250YWlucyhjKSl7dmFyIGw9Yy5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtpZihsLnRvcD49by0yMCl7ZT1jLG49bC50b3A7YnJlYWt9fX1mb3IodmFyIHA9W10sdT10LmRvbTt1O3U9Zih1KSlpZihwLnB1c2goe2RvbTp1LHRvcDp1LnNjcm9sbFRvcCxsZWZ0OnUuc2Nyb2xsTGVmdH0pLHU9PWkuYm9keSlicmVhaztyZXR1cm57cmVmRE9NOmUscmVmVG9wOm4sc3RhY2s6cH19ZnVuY3Rpb24gTSh0KXtmb3IodmFyIGU9dC5yZWZET00sbj10LnJlZlRvcCxyPXQuc3RhY2ssbz1lP2UuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkudG9wOjAsaT0wPT1vPzA6by1uLHM9MDtzPHIubGVuZ3RoO3MrKyl7dmFyIGE9cltzXSxjPWEuZG9tLGw9YS50b3AscD1hLmxlZnQ7Yy5zY3JvbGxUb3AhPWwraSYmKGMuc2Nyb2xsVG9wPWwraSksYy5zY3JvbGxMZWZ0IT1wJiYoYy5zY3JvbGxMZWZ0PXApfX1mdW5jdGlvbiBUKHQsZSl7Zm9yKHZhciBuLHIsbz0yZTgsaT0wLHM9ZS50b3AsYT1lLnRvcCxjPXQuZmlyc3RDaGlsZCxsPTA7YztjPWMubmV4dFNpYmxpbmcsbCsrKXt2YXIgcD12b2lkIDA7aWYoMT09Yy5ub2RlVHlwZSlwPWMuZ2V0Q2xpZW50UmVjdHMoKTtlbHNle2lmKDMhPWMubm9kZVR5cGUpY29udGludWU7cD1kKGMpLmdldENsaWVudFJlY3RzKCl9Zm9yKHZhciB1PTA7dTxwLmxlbmd0aDt1Kyspe3ZhciBoPXBbdV07aWYoaC50b3A8PXMmJmguYm90dG9tPj1hKXtzPU1hdGgubWF4KGguYm90dG9tLHMpLGE9TWF0aC5taW4oaC50b3AsYSk7dmFyIGY9aC5sZWZ0PmUubGVmdD9oLmxlZnQtZS5sZWZ0OmgucmlnaHQ8ZS5sZWZ0P2UubGVmdC1oLnJpZ2h0OjA7aWYoZjxvKXtuPWMsbz1mLHI9ZiYmMz09bi5ub2RlVHlwZT97bGVmdDpoLnJpZ2h0PGUubGVmdD9oLnJpZ2h0OmgubGVmdCx0b3A6ZS50b3B9OmUsMT09Yy5ub2RlVHlwZSYmZiYmKGk9bCsoZS5sZWZ0Pj0oaC5sZWZ0K2gucmlnaHQpLzI/MTowKSk7Y29udGludWV9fSFuJiYoZS5sZWZ0Pj1oLnJpZ2h0JiZlLnRvcD49aC50b3B8fGUubGVmdD49aC5sZWZ0JiZlLnRvcD49aC5ib3R0b20pJiYoaT1sKzEpfX1yZXR1cm4gbiYmMz09bi5ub2RlVHlwZT9OKG4scik6IW58fG8mJjE9PW4ubm9kZVR5cGU/e25vZGU6dCxvZmZzZXQ6aX06VChuLHIpfWZ1bmN0aW9uIE4odCxlKXtmb3IodmFyIG49dC5ub2RlVmFsdWUubGVuZ3RoLHI9ZG9jdW1lbnQuY3JlYXRlUmFuZ2UoKSxvPTA7bzxuO28rKyl7ci5zZXRFbmQodCxvKzEpLHIuc2V0U3RhcnQodCxvKTt2YXIgaT1JKHIsMSk7aWYoaS50b3AhPWkuYm90dG9tJiZFKGUsaSkpcmV0dXJue25vZGU6dCxvZmZzZXQ6bysoZS5sZWZ0Pj0oaS5sZWZ0K2kucmlnaHQpLzI/MTowKX19cmV0dXJue25vZGU6dCxvZmZzZXQ6MH19ZnVuY3Rpb24gRSh0LGUpe3JldHVybiB0LmxlZnQ+PWUubGVmdC0xJiZ0LmxlZnQ8PWUucmlnaHQrMSYmdC50b3A+PWUudG9wLTEmJnQudG9wPD1lLmJvdHRvbSsxfWZ1bmN0aW9uIEEodCxlKXt2YXIgbj10LnBhcmVudE5vZGU7cmV0dXJuIG4mJi9ebGkkL2kudGVzdChuLm5vZGVOYW1lKSYmZS5sZWZ0PHQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkubGVmdD9uOnR9ZnVuY3Rpb24gUih0LGUsbil7dmFyIHI9VChlLG4pLG89ci5ub2RlLGk9ci5vZmZzZXQscz0tMTtpZigxPT1vLm5vZGVUeXBlJiYhby5maXJzdENoaWxkKXt2YXIgYT1vLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO3M9YS5sZWZ0IT1hLnJpZ2h0JiZuLmxlZnQ+KGEubGVmdCthLnJpZ2h0KS8yPzE6LTF9cmV0dXJuIHQuZG9jVmlldy5wb3NGcm9tRE9NKG8saSxzKX1mdW5jdGlvbiBEKHQsZSxuLHIpe2Zvcih2YXIgbz0tMSxpPWU7Oyl7aWYoaT09dC5kb20pYnJlYWs7dmFyIHM9dC5kb2NWaWV3Lm5lYXJlc3REZXNjKGksITApO2lmKCFzKXJldHVybiBudWxsO2lmKHMubm9kZS5pc0Jsb2NrJiZzLnBhcmVudCl7dmFyIGE9cy5kb20uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7aWYoYS5sZWZ0PnIubGVmdHx8YS50b3A+ci50b3Apbz1zLnBvc0JlZm9yZTtlbHNle2lmKCEoYS5yaWdodDxyLmxlZnR8fGEuYm90dG9tPHIudG9wKSlicmVhaztvPXMucG9zQWZ0ZXJ9fWk9cy5kb20ucGFyZW50Tm9kZX1yZXR1cm4gbz4tMT9vOnQuZG9jVmlldy5wb3NGcm9tRE9NKGUsbil9ZnVuY3Rpb24geih0LGUsbil7dmFyIHI9dC5jaGlsZE5vZGVzLmxlbmd0aDtpZihyJiZuLnRvcDxuLmJvdHRvbSlmb3IodmFyIG89TWF0aC5tYXgoMCxNYXRoLm1pbihyLTEsTWF0aC5mbG9vcihyKihlLnRvcC1uLnRvcCkvKG4uYm90dG9tLW4udG9wKSktMikpLGk9bzs7KXt2YXIgcz10LmNoaWxkTm9kZXNbaV07aWYoMT09cy5ub2RlVHlwZSlmb3IodmFyIGE9cy5nZXRDbGllbnRSZWN0cygpLGM9MDtjPGEubGVuZ3RoO2MrKyl7dmFyIGw9YVtjXTtpZihFKGUsbCkpcmV0dXJuIHoocyxlLGwpfWlmKChpPShpKzEpJXIpPT1vKWJyZWFrfXJldHVybiB0fWZ1bmN0aW9uIFAodCxlKXt2YXIgbixyLG89dC5yb290O2lmKG8uY2FyZXRQb3NpdGlvbkZyb21Qb2ludCl7dmFyIGksYT1vLmNhcmV0UG9zaXRpb25Gcm9tUG9pbnQoZS5sZWZ0LGUudG9wKTtpZihhKWk9YSxuPWkub2Zmc2V0Tm9kZSxyPWkub2Zmc2V0fWlmKCFuJiZvLmNhcmV0UmFuZ2VGcm9tUG9pbnQpe3ZhciBjLGw9by5jYXJldFJhbmdlRnJvbVBvaW50KGUubGVmdCxlLnRvcCk7aWYobCljPWwsbj1jLnN0YXJ0Q29udGFpbmVyLHI9Yy5zdGFydE9mZnNldH12YXIgcCx1PW8uZWxlbWVudEZyb21Qb2ludChlLmxlZnQsZS50b3ArMSk7aWYoIXV8fCF0LmRvbS5jb250YWlucygxIT11Lm5vZGVUeXBlP3UucGFyZW50Tm9kZTp1KSl7dmFyIGg9dC5kb20uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7aWYoIUUoZSxoKSlyZXR1cm4gbnVsbDtpZih1PXoodC5kb20sZSxoKSwhdSlyZXR1cm4gbnVsbH1pZih1PUEodSxlKSxuKXtpZihzLmdlY2tvJiYxPT1uLm5vZGVUeXBlJiYocj1NYXRoLm1pbihyLG4uY2hpbGROb2Rlcy5sZW5ndGgpLHI8bi5jaGlsZE5vZGVzLmxlbmd0aCkpe3ZhciBmLGQ9bi5jaGlsZE5vZGVzW3JdOyJJTUciPT1kLm5vZGVOYW1lJiYoZj1kLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpKS5yaWdodDw9ZS5sZWZ0JiZmLmJvdHRvbT5lLnRvcCYmcisrfW49PXQuZG9tJiZyPT1uLmNoaWxkTm9kZXMubGVuZ3RoLTEmJjE9PW4ubGFzdENoaWxkLm5vZGVUeXBlJiZlLnRvcD5uLmxhc3RDaGlsZC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS5ib3R0b20/cD10LnN0YXRlLmRvYy5jb250ZW50LnNpemU6MCE9ciYmMT09bi5ub2RlVHlwZSYmIkJSIj09bi5jaGlsZE5vZGVzW3ItMV0ubm9kZU5hbWV8fChwPUQodCxuLHIsZSkpfW51bGw9PXAmJihwPVIodCx1LGUpKTt2YXIgdj10LmRvY1ZpZXcubmVhcmVzdERlc2ModSwhMCk7cmV0dXJue3BvczpwLGluc2lkZTp2P3YucG9zQXRTdGFydC12LmJvcmRlcjotMX19ZnVuY3Rpb24gSSh0LGUpe3ZhciBuPXQuZ2V0Q2xpZW50UmVjdHMoKTtyZXR1cm4gbi5sZW5ndGg/bltlPDA/MDpuLmxlbmd0aC0xXTp0LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpfWZ1bmN0aW9uIF8odCxlKXt2YXIgbj10LmRvY1ZpZXcuZG9tRnJvbVBvcyhlKSxyPW4ubm9kZSxvPW4ub2Zmc2V0O2lmKDM9PXIubm9kZVR5cGUmJihzLmNocm9tZXx8cy5nZWNrbykpe3ZhciBpPUkoZChyLG8sbyksMCk7aWYocy5nZWNrbyYmbyYmL1xzLy50ZXN0KHIubm9kZVZhbHVlW28tMV0pJiZvPHIubm9kZVZhbHVlLmxlbmd0aCl7dmFyIGE9SShkKHIsby0xLG8tMSksLTEpO2lmKE1hdGguYWJzKGEubGVmdC1pLmxlZnQpPDEmJmEudG9wPT1pLnRvcCl7dmFyIGM9SShkKHIsbyxvKzEpLC0xKTtyZXR1cm4gRihjLGMubGVmdDxhLmxlZnQpfX1yZXR1cm4gaX1pZigxPT1yLm5vZGVUeXBlJiYhdC5zdGF0ZS5kb2MucmVzb2x2ZShlKS5wYXJlbnQuaW5saW5lQ29udGVudCl7dmFyIGwscD0hMDtpZihvPHIuY2hpbGROb2Rlcy5sZW5ndGgpe3ZhciB1PXIuY2hpbGROb2Rlc1tvXTsxPT11Lm5vZGVUeXBlJiYobD11LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpKX1pZighbCYmbyl7dmFyIGg9ci5jaGlsZE5vZGVzW28tMV07MT09aC5ub2RlVHlwZSYmKGw9aC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKSxwPSExKX1yZXR1cm4gQihsfHxyLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLHApfWZvcih2YXIgZj0tMTtmPDI7Zis9MilpZihmPDAmJm8pe3ZhciB2PXZvaWQgMCxtPTM9PXIubm9kZVR5cGU/ZChyLG8tMSxvKTozPT0odj1yLmNoaWxkTm9kZXNbby0xXSkubm9kZVR5cGU/ZCh2KToxPT12Lm5vZGVUeXBlJiYiQlIiIT12Lm5vZGVOYW1lP3Y6bnVsbDtpZihtKXt2YXIgeT1JKG0sMSk7aWYoeS50b3A8eS5ib3R0b20pcmV0dXJuIEYoeSwhMSl9fWVsc2UgaWYoZj4wJiZvPGcocikpe3ZhciB3PXZvaWQgMCx4PTM9PXIubm9kZVR5cGU/ZChyLG8sbysxKTozPT0odz1yLmNoaWxkTm9kZXNbb10pLm5vZGVUeXBlP2Qodyk6MT09dy5ub2RlVHlwZT93Om51bGw7aWYoeCl7dmFyIGI9SSh4LC0xKTtpZihiLnRvcDxiLmJvdHRvbSlyZXR1cm4gRihiLCEwKX19cmV0dXJuIEYoSSgzPT1yLm5vZGVUeXBlP2Qocik6ciwwKSwhMSl9ZnVuY3Rpb24gRih0LGUpe2lmKDA9PXQud2lkdGgpcmV0dXJuIHQ7dmFyIG49ZT90LmxlZnQ6dC5yaWdodDtyZXR1cm57dG9wOnQudG9wLGJvdHRvbTp0LmJvdHRvbSxsZWZ0Om4scmlnaHQ6bn19ZnVuY3Rpb24gQih0LGUpe2lmKDA9PXQuaGVpZ2h0KXJldHVybiB0O3ZhciBuPWU/dC50b3A6dC5ib3R0b207cmV0dXJue3RvcDpuLGJvdHRvbTpuLGxlZnQ6dC5sZWZ0LHJpZ2h0OnQucmlnaHR9fWZ1bmN0aW9uIGoodCxlLG4pe3ZhciByPXQuc3RhdGUsbz10LnJvb3QuYWN0aXZlRWxlbWVudDtyIT1lJiZ0LnVwZGF0ZVN0YXRlKGUpLG8hPXQuZG9tJiZ0LmZvY3VzKCk7dHJ5e3JldHVybiBuKCl9ZmluYWxseXtyIT1lJiZ0LnVwZGF0ZVN0YXRlKHIpLG8hPXQuZG9tJiZvLmZvY3VzKCl9fWZ1bmN0aW9uICQodCxlLG4pe3ZhciByPWUuc2VsZWN0aW9uLG89InVwIj09bj9yLiRhbmNob3IubWluKHIuJGhlYWQpOnIuJGFuY2hvci5tYXgoci4kaGVhZCk7cmV0dXJuIGoodCxlLChmdW5jdGlvbigpe2Zvcih2YXIgZT10LmRvY1ZpZXcuZG9tRnJvbVBvcyhvLnBvcykscj1lLm5vZGU7Oyl7dmFyIGk9dC5kb2NWaWV3Lm5lYXJlc3REZXNjKHIsITApO2lmKCFpKWJyZWFrO2lmKGkubm9kZS5pc0Jsb2NrKXtyPWkuZG9tO2JyZWFrfXI9aS5kb20ucGFyZW50Tm9kZX1mb3IodmFyIHM9Xyh0LG8ucG9zKSxhPXIuZmlyc3RDaGlsZDthO2E9YS5uZXh0U2libGluZyl7dmFyIGM9dm9pZCAwO2lmKDE9PWEubm9kZVR5cGUpYz1hLmdldENsaWVudFJlY3RzKCk7ZWxzZXtpZigzIT1hLm5vZGVUeXBlKWNvbnRpbnVlO2M9ZChhLDAsYS5ub2RlVmFsdWUubGVuZ3RoKS5nZXRDbGllbnRSZWN0cygpfWZvcih2YXIgbD0wO2w8Yy5sZW5ndGg7bCsrKXt2YXIgcD1jW2xdO2lmKHAuYm90dG9tPnAudG9wJiYoInVwIj09bj9wLmJvdHRvbTxzLnRvcCsxOnAudG9wPnMuYm90dG9tLTEpKXJldHVybiExfX1yZXR1cm4hMH0pKX12YXIgVj0vW1x1MDU5MC1cdTA4YWNdLztmdW5jdGlvbiBMKHQsZSxuKXt2YXIgcj1lLnNlbGVjdGlvbixvPXIuJGhlYWQ7aWYoIW8ucGFyZW50LmlzVGV4dGJsb2NrKXJldHVybiExO3ZhciBpPW8ucGFyZW50T2Zmc2V0LHM9IWksYT1pPT1vLnBhcmVudC5jb250ZW50LnNpemUsYz1nZXRTZWxlY3Rpb24oKTtyZXR1cm4gVi50ZXN0KG8ucGFyZW50LnRleHRDb250ZW50KSYmYy5tb2RpZnk/aih0LGUsKGZ1bmN0aW9uKCl7dmFyIGU9Yy5nZXRSYW5nZUF0KDApLHI9Yy5mb2N1c05vZGUsaT1jLmZvY3VzT2Zmc2V0LHM9Yy5jYXJldEJpZGlMZXZlbDtjLm1vZGlmeSgibW92ZSIsbiwiY2hhcmFjdGVyIik7dmFyIGE9by5kZXB0aD90LmRvY1ZpZXcuZG9tQWZ0ZXJQb3Moby5iZWZvcmUoKSk6dC5kb20sbD0hYS5jb250YWlucygxPT1jLmZvY3VzTm9kZS5ub2RlVHlwZT9jLmZvY3VzTm9kZTpjLmZvY3VzTm9kZS5wYXJlbnROb2RlKXx8cj09Yy5mb2N1c05vZGUmJmk9PWMuZm9jdXNPZmZzZXQ7cmV0dXJuIGMucmVtb3ZlQWxsUmFuZ2VzKCksYy5hZGRSYW5nZShlKSxudWxsIT1zJiYoYy5jYXJldEJpZGlMZXZlbD1zKSxsfSkpOiJsZWZ0Ij09bnx8ImJhY2t3YXJkIj09bj9zOmF9dmFyIEo9bnVsbCxxPW51bGwsVz0hMTtmdW5jdGlvbiBIKHQsZSxuKXtyZXR1cm4gSj09ZSYmcT09bj9XOihKPWUscT1uLFc9InVwIj09bnx8ImRvd24iPT1uPyQodCxlLG4pOkwodCxlLG4pKX12YXIgSz0wLFU9MSxHPTIsWD0zLFk9ZnVuY3Rpb24odCxlLG4scil7dGhpcy5wYXJlbnQ9dCx0aGlzLmNoaWxkcmVuPWUsdGhpcy5kb209bixuLnBtVmlld0Rlc2M9dGhpcyx0aGlzLmNvbnRlbnRET009cix0aGlzLmRpcnR5PUt9LFE9e2JlZm9yZVBvc2l0aW9uOnt9LHNpemU6e30sYm9yZGVyOnt9LHBvc0JlZm9yZTp7fSxwb3NBdFN0YXJ0Ont9LHBvc0FmdGVyOnt9LHBvc0F0RW5kOnt9LGNvbnRlbnRMb3N0Ont9fTtZLnByb3RvdHlwZS5tYXRjaGVzV2lkZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuITF9LFkucHJvdG90eXBlLm1hdGNoZXNNYXJrPWZ1bmN0aW9uKCl7cmV0dXJuITF9LFkucHJvdG90eXBlLm1hdGNoZXNOb2RlPWZ1bmN0aW9uKCl7cmV0dXJuITF9LFkucHJvdG90eXBlLm1hdGNoZXNIYWNrPWZ1bmN0aW9uKCl7cmV0dXJuITF9LFEuYmVmb3JlUG9zaXRpb24uZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuITF9LFkucHJvdG90eXBlLnBhcnNlUnVsZT1mdW5jdGlvbigpe3JldHVybiBudWxsfSxZLnByb3RvdHlwZS5zdG9wRXZlbnQ9ZnVuY3Rpb24oKXtyZXR1cm4hMX0sUS5zaXplLmdldD1mdW5jdGlvbigpe2Zvcih2YXIgdD10aGlzLGU9MCxuPTA7bjx0aGlzLmNoaWxkcmVuLmxlbmd0aDtuKyspZSs9dC5jaGlsZHJlbltuXS5zaXplO3JldHVybiBlfSxRLmJvcmRlci5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gMH0sWS5wcm90b3R5cGUuZGVzdHJveT1mdW5jdGlvbigpe3ZhciB0PXRoaXM7dGhpcy5wYXJlbnQ9bnVsbCx0aGlzLmRvbS5wbVZpZXdEZXNjPT10aGlzJiYodGhpcy5kb20ucG1WaWV3RGVzYz1udWxsKTtmb3IodmFyIGU9MDtlPHRoaXMuY2hpbGRyZW4ubGVuZ3RoO2UrKyl0LmNoaWxkcmVuW2VdLmRlc3Ryb3koKX0sWS5wcm90b3R5cGUucG9zQmVmb3JlQ2hpbGQ9ZnVuY3Rpb24odCl7Zm9yKHZhciBlPXRoaXMsbj0wLHI9dGhpcy5wb3NBdFN0YXJ0O248dGhpcy5jaGlsZHJlbi5sZW5ndGg7bisrKXt2YXIgbz1lLmNoaWxkcmVuW25dO2lmKG89PXQpcmV0dXJuIHI7cis9by5zaXplfX0sUS5wb3NCZWZvcmUuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucGFyZW50LnBvc0JlZm9yZUNoaWxkKHRoaXMpfSxRLnBvc0F0U3RhcnQuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucGFyZW50P3RoaXMucGFyZW50LnBvc0JlZm9yZUNoaWxkKHRoaXMpK3RoaXMuYm9yZGVyOjB9LFEucG9zQWZ0ZXIuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucG9zQmVmb3JlK3RoaXMuc2l6ZX0sUS5wb3NBdEVuZC5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5wb3NBdFN0YXJ0K3RoaXMuc2l6ZS0yKnRoaXMuYm9yZGVyfSxZLnByb3RvdHlwZS5sb2NhbFBvc0Zyb21ET009ZnVuY3Rpb24odCxlLG4pe3ZhciByLG89dGhpcztpZih0aGlzLmNvbnRlbnRET00mJnRoaXMuY29udGVudERPTS5jb250YWlucygxPT10Lm5vZGVUeXBlP3Q6dC5wYXJlbnROb2RlKSl7aWYobjwwKXt2YXIgaSxzO2lmKHQ9PXRoaXMuY29udGVudERPTSlpPXQuY2hpbGROb2Rlc1tlLTFdO2Vsc2V7d2hpbGUodC5wYXJlbnROb2RlIT10aGlzLmNvbnRlbnRET00pdD10LnBhcmVudE5vZGU7aT10LnByZXZpb3VzU2libGluZ313aGlsZShpJiYoIShzPWkucG1WaWV3RGVzYyl8fHMucGFyZW50IT10aGlzKSlpPWkucHJldmlvdXNTaWJsaW5nO3JldHVybiBpP3RoaXMucG9zQmVmb3JlQ2hpbGQocykrcy5zaXplOnRoaXMucG9zQXRTdGFydH12YXIgYSxjO2lmKHQ9PXRoaXMuY29udGVudERPTSlhPXQuY2hpbGROb2Rlc1tlXTtlbHNle3doaWxlKHQucGFyZW50Tm9kZSE9dGhpcy5jb250ZW50RE9NKXQ9dC5wYXJlbnROb2RlO2E9dC5uZXh0U2libGluZ313aGlsZShhJiYoIShjPWEucG1WaWV3RGVzYyl8fGMucGFyZW50IT10aGlzKSlhPWEubmV4dFNpYmxpbmc7cmV0dXJuIGE/dGhpcy5wb3NCZWZvcmVDaGlsZChjKTp0aGlzLnBvc0F0RW5kfWlmKHRoaXMuY29udGVudERPTSYmdGhpcy5jb250ZW50RE9NIT10aGlzLmRvbSYmdGhpcy5kb20uY29udGFpbnModGhpcy5jb250ZW50RE9NKSlyPTImdC5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbih0aGlzLmNvbnRlbnRET00pO2Vsc2UgaWYodGhpcy5kb20uZmlyc3RDaGlsZCl7aWYoMD09ZSlmb3IodmFyIGw9dDs7bD1sLnBhcmVudE5vZGUpe2lmKGw9PW8uZG9tKXtyPSExO2JyZWFrfWlmKGwucGFyZW50Tm9kZS5maXJzdENoaWxkIT1sKWJyZWFrfWlmKG51bGw9PXImJmU9PXQuY2hpbGROb2Rlcy5sZW5ndGgpZm9yKHZhciBwPXQ7O3A9cC5wYXJlbnROb2RlKXtpZihwPT1vLmRvbSl7cj0hMDticmVha31pZihwLnBhcmVudE5vZGUubGFzdENoaWxkIT1wKWJyZWFrfX1yZXR1cm4obnVsbD09cj9uPjA6cik/dGhpcy5wb3NBdEVuZDp0aGlzLnBvc0F0U3RhcnR9LFkucHJvdG90eXBlLm5lYXJlc3REZXNjPWZ1bmN0aW9uKHQsZSl7Zm9yKHZhciBuPXRoaXMscj0hMCxvPXQ7bztvPW8ucGFyZW50Tm9kZSl7dmFyIGk9bi5nZXREZXNjKG8pO2lmKGkmJighZXx8aS5ub2RlKSl7aWYoIXJ8fCFpLm5vZGVET018fCgxPT1pLm5vZGVET00ubm9kZVR5cGU/aS5ub2RlRE9NLmNvbnRhaW5zKHQpOmkubm9kZURPTT09dCkpcmV0dXJuIGk7cj0hMX19fSxZLnByb3RvdHlwZS5nZXREZXNjPWZ1bmN0aW9uKHQpe2Zvcih2YXIgZT10aGlzLG49dC5wbVZpZXdEZXNjLHI9bjtyO3I9ci5wYXJlbnQpaWYocj09ZSlyZXR1cm4gbn0sWS5wcm90b3R5cGUucG9zRnJvbURPTT1mdW5jdGlvbih0LGUsbil7Zm9yKHZhciByPXRoaXMsbz10OztvPW8ucGFyZW50Tm9kZSl7dmFyIGk9ci5nZXREZXNjKG8pO2lmKGkpcmV0dXJuIGkubG9jYWxQb3NGcm9tRE9NKHQsZSxuKX19LFkucHJvdG90eXBlLmRlc2NBdD1mdW5jdGlvbih0KXtmb3IodmFyIGU9dGhpcyxuPTAscj0wO248dGhpcy5jaGlsZHJlbi5sZW5ndGg7bisrKXt2YXIgbz1lLmNoaWxkcmVuW25dLGk9citvLnNpemU7aWYocj09dCYmaSE9cil7d2hpbGUoIW8uYm9yZGVyJiZvLmNoaWxkcmVuLmxlbmd0aClvPW8uY2hpbGRyZW5bMF07cmV0dXJuIG99aWYodDxpKXJldHVybiBvLmRlc2NBdCh0LXItby5ib3JkZXIpO3I9aX19LFkucHJvdG90eXBlLmRvbUZyb21Qb3M9ZnVuY3Rpb24odCl7dmFyIGU9dGhpcztpZighdGhpcy5jb250ZW50RE9NKXJldHVybntub2RlOnRoaXMuZG9tLG9mZnNldDowfTtmb3IodmFyIG49MCxyPTA7O3IrKyl7aWYobj09dCl7d2hpbGUocjx0aGlzLmNoaWxkcmVuLmxlbmd0aCYmKHRoaXMuY2hpbGRyZW5bcl0uYmVmb3JlUG9zaXRpb258fHRoaXMuY2hpbGRyZW5bcl0uZG9tLnBhcmVudE5vZGUhPXRoaXMuY29udGVudERPTSkpcisrO3JldHVybntub2RlOmUuY29udGVudERPTSxvZmZzZXQ6cj09ZS5jaGlsZHJlbi5sZW5ndGg/ZS5jb250ZW50RE9NLmNoaWxkTm9kZXMubGVuZ3RoOmgoZS5jaGlsZHJlbltyXS5kb20pfX1pZihyPT1lLmNoaWxkcmVuLmxlbmd0aCl0aHJvdyBuZXcgRXJyb3IoIkludmFsaWQgcG9zaXRpb24gIit0KTt2YXIgbz1lLmNoaWxkcmVuW3JdLGk9bitvLnNpemU7aWYodDxpKXJldHVybiBvLmRvbUZyb21Qb3ModC1uLW8uYm9yZGVyKTtuPWl9fSxZLnByb3RvdHlwZS5wYXJzZVJhbmdlPWZ1bmN0aW9uKHQsZSxuKXt2YXIgcj10aGlzO2lmKHZvaWQgMD09PW4mJihuPTApLDA9PXRoaXMuY2hpbGRyZW4ubGVuZ3RoKXJldHVybntub2RlOnRoaXMuY29udGVudERPTSxmcm9tOnQsdG86ZSxmcm9tT2Zmc2V0OjAsdG9PZmZzZXQ6dGhpcy5jb250ZW50RE9NLmNoaWxkTm9kZXMubGVuZ3RofTtmb3IodmFyIG89LTEsaT0tMSxzPW4sYT0wOzthKyspe3ZhciBjPXIuY2hpbGRyZW5bYV0sbD1zK2Muc2l6ZTtpZigtMT09byYmdDw9bCl7dmFyIHA9cytjLmJvcmRlcjtpZih0Pj1wJiZlPD1sLWMuYm9yZGVyJiZjLm5vZGUmJmMuY29udGVudERPTSYmci5jb250ZW50RE9NLmNvbnRhaW5zKGMuY29udGVudERPTSkpcmV0dXJuIGMucGFyc2VSYW5nZSh0LGUscCk7dD1zO2Zvcih2YXIgdT1hO3U+MDt1LS0pe3ZhciBmPXIuY2hpbGRyZW5bdS0xXTtpZihmLnNpemUmJmYuZG9tLnBhcmVudE5vZGU9PXIuY29udGVudERPTSYmIWYuZW1wdHlDaGlsZEF0KDEpKXtvPWgoZi5kb20pKzE7YnJlYWt9dC09Zi5zaXplfS0xPT1vJiYobz0wKX1pZihvPi0xJiZlPD1sKXtlPWw7Zm9yKHZhciBkPWErMTtkPHRoaXMuY2hpbGRyZW4ubGVuZ3RoO2QrKyl7dmFyIHY9ci5jaGlsZHJlbltkXTtpZih2LnNpemUmJnYuZG9tLnBhcmVudE5vZGU9PXIuY29udGVudERPTSYmIXYuZW1wdHlDaGlsZEF0KC0xKSl7aT1oKHYuZG9tKTticmVha31lKz12LnNpemV9LTE9PWkmJihpPXIuY29udGVudERPTS5jaGlsZE5vZGVzLmxlbmd0aCk7YnJlYWt9cz1sfXJldHVybntub2RlOnRoaXMuY29udGVudERPTSxmcm9tOnQsdG86ZSxmcm9tT2Zmc2V0Om8sdG9PZmZzZXQ6aX19LFkucHJvdG90eXBlLmVtcHR5Q2hpbGRBdD1mdW5jdGlvbih0KXtpZih0aGlzLmJvcmRlcnx8IXRoaXMuY29udGVudERPTXx8IXRoaXMuY2hpbGRyZW4ubGVuZ3RoKXJldHVybiExO3ZhciBlPXRoaXMuY2hpbGRyZW5bdDwwPzA6dGhpcy5jaGlsZHJlbi5sZW5ndGgtMV07cmV0dXJuIDA9PWUuc2l6ZXx8ZS5lbXB0eUNoaWxkQXQodCl9LFkucHJvdG90eXBlLmRvbUFmdGVyUG9zPWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMuZG9tRnJvbVBvcyh0KSxuPWUubm9kZSxyPWUub2Zmc2V0O2lmKDEhPW4ubm9kZVR5cGV8fHI9PW4uY2hpbGROb2Rlcy5sZW5ndGgpdGhyb3cgbmV3IFJhbmdlRXJyb3IoIk5vIG5vZGUgYWZ0ZXIgcG9zICIrdCk7cmV0dXJuIG4uY2hpbGROb2Rlc1tyXX0sWS5wcm90b3R5cGUuc2V0U2VsZWN0aW9uPWZ1bmN0aW9uKHQsZSxuLHIpe2Zvcih2YXIgbz10aGlzLGk9TWF0aC5taW4odCxlKSxzPU1hdGgubWF4KHQsZSksYT0wLGM9MDthPHRoaXMuY2hpbGRyZW4ubGVuZ3RoO2ErKyl7dmFyIGw9by5jaGlsZHJlblthXSxwPWMrbC5zaXplO2lmKGk+YyYmczxwKXJldHVybiBsLnNldFNlbGVjdGlvbih0LWMtbC5ib3JkZXIsZS1jLWwuYm9yZGVyLG4scik7Yz1wfXZhciB1PXRoaXMuZG9tRnJvbVBvcyh0KSxoPXRoaXMuZG9tRnJvbVBvcyhlKSxmPW4uZ2V0U2VsZWN0aW9uKCksZD1kb2N1bWVudC5jcmVhdGVSYW5nZSgpO2lmKHJ8fCF2KHUubm9kZSx1Lm9mZnNldCxmLmFuY2hvck5vZGUsZi5hbmNob3JPZmZzZXQpfHwhdihoLm5vZGUsaC5vZmZzZXQsZi5mb2N1c05vZGUsZi5mb2N1c09mZnNldCkpe2lmKGYuZXh0ZW5kKWQuc2V0RW5kKHUubm9kZSx1Lm9mZnNldCksZC5jb2xsYXBzZSghMSk7ZWxzZXtpZih0PmUpe3ZhciBtPXU7dT1oLGg9bX1kLnNldEVuZChoLm5vZGUsaC5vZmZzZXQpLGQuc2V0U3RhcnQodS5ub2RlLHUub2Zmc2V0KX1mLnJlbW92ZUFsbFJhbmdlcygpLGYuYWRkUmFuZ2UoZCksZi5leHRlbmQmJmYuZXh0ZW5kKGgubm9kZSxoLm9mZnNldCl9fSxZLnByb3RvdHlwZS5pZ25vcmVNdXRhdGlvbj1mdW5jdGlvbih0KXtyZXR1cm4hdGhpcy5jb250ZW50RE9NfSxRLmNvbnRlbnRMb3N0LmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLmNvbnRlbnRET00mJnRoaXMuY29udGVudERPTSE9dGhpcy5kb20mJiF0aGlzLmRvbS5jb250YWlucyh0aGlzLmNvbnRlbnRET00pfSxZLnByb3RvdHlwZS5tYXJrRGlydHk9ZnVuY3Rpb24odCxlKXtmb3IodmFyIG49dGhpcyxyPTAsbz0wO288dGhpcy5jaGlsZHJlbi5sZW5ndGg7bysrKXt2YXIgaT1uLmNoaWxkcmVuW29dLHM9citpLnNpemU7aWYocj09cz90PD1zJiZlPj1yOnQ8cyYmZT5yKXt2YXIgYT1yK2kuYm9yZGVyLGM9cy1pLmJvcmRlcjtpZih0Pj1hJiZlPD1jKXJldHVybiBuLmRpcnR5PXQ9PXJ8fGU9PXM/RzpVLHZvaWQodCE9YXx8ZSE9Y3x8IWkuY29udGVudExvc3QmJmkuZG9tLnBhcmVudE5vZGU9PW4uY29udGVudERPTT9pLm1hcmtEaXJ0eSh0LWEsZS1hKTppLmRpcnR5PVgpO2kuZGlydHk9WH1yPXN9dGhpcy5kaXJ0eT1HfSxZLnByb3RvdHlwZS5tYXJrUGFyZW50c0RpcnR5PWZ1bmN0aW9uKCl7Zm9yKHZhciB0PTEsZT10aGlzLnBhcmVudDtlO2U9ZS5wYXJlbnQpe3ZhciBuPTE9PXQ/RzpVO2UuZGlydHk8biYmKGUuZGlydHk9bil9fSxPYmplY3QuZGVmaW5lUHJvcGVydGllcyhZLnByb3RvdHlwZSxRKTt2YXIgWj1bXSx0dD1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKGUsbixyLG8pe3ZhciBpLHM9bi50eXBlLnRvRE9NO2lmKCJmdW5jdGlvbiI9PXR5cGVvZiBzJiYocz1zKHIsKGZ1bmN0aW9uKCl7cmV0dXJuIGk/aS5wYXJlbnQ/aS5wYXJlbnQucG9zQmVmb3JlQ2hpbGQoaSk6dm9pZCAwOm99KSkpLCFuLnR5cGUuc3BlYy5yYXcpe2lmKDEhPXMubm9kZVR5cGUpe3ZhciBhPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoInNwYW4iKTthLmFwcGVuZENoaWxkKHMpLHM9YX1zLmNvbnRlbnRFZGl0YWJsZT0hMSxzLmNsYXNzTGlzdC5hZGQoIlByb3NlTWlycm9yLXdpZGdldCIpfXQuY2FsbCh0aGlzLGUsWixzLG51bGwpLHRoaXMud2lkZ2V0PW4saT10aGlzfXQmJihlLl9fcHJvdG9fXz10KSxlLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKHQmJnQucHJvdG90eXBlKSxlLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1lO3ZhciBuPXtiZWZvcmVQb3NpdGlvbjp7fX07cmV0dXJuIG4uYmVmb3JlUG9zaXRpb24uZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMud2lkZ2V0LnR5cGUuc2lkZTwwfSxlLnByb3RvdHlwZS5tYXRjaGVzV2lkZ2V0PWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLmRpcnR5PT1LJiZ0LnR5cGUuZXEodGhpcy53aWRnZXQudHlwZSl9LGUucHJvdG90eXBlLnBhcnNlUnVsZT1mdW5jdGlvbigpe3JldHVybntpZ25vcmU6ITB9fSxlLnByb3RvdHlwZS5zdG9wRXZlbnQ9ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy53aWRnZXQuc3BlYy5zdG9wRXZlbnQ7cmV0dXJuISFlJiZlKHQpfSxPYmplY3QuZGVmaW5lUHJvcGVydGllcyhlLnByb3RvdHlwZSxuKSxlfShZKSxldD1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKGUsbixyLG8pe3QuY2FsbCh0aGlzLGUsWixuLG51bGwpLHRoaXMudGV4dERPTT1yLHRoaXMudGV4dD1vfXQmJihlLl9fcHJvdG9fXz10KSxlLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKHQmJnQucHJvdG90eXBlKSxlLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1lO3ZhciBuPXtzaXplOnt9fTtyZXR1cm4gbi5zaXplLmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLnRleHQubGVuZ3RofSxlLnByb3RvdHlwZS5sb2NhbFBvc0Zyb21ET009ZnVuY3Rpb24odCxlKXtyZXR1cm4gdCE9dGhpcy50ZXh0RE9NP3RoaXMucG9zQXRTdGFydCsoZT90aGlzLnNpemU6MCk6dGhpcy5wb3NBdFN0YXJ0K2V9LGUucHJvdG90eXBlLmRvbUZyb21Qb3M9ZnVuY3Rpb24odCl7cmV0dXJue25vZGU6dGhpcy50ZXh0RE9NLG9mZnNldDp0fX0sZS5wcm90b3R5cGUuaWdub3JlTXV0YXRpb249ZnVuY3Rpb24odCl7cmV0dXJuImNoYXJhY3RlckRhdGEiPT09dC50eXBlJiZ0LnRhcmdldC5ub2RlVmFsdWU9PXQub2xkVmFsdWV9LE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKGUucHJvdG90eXBlLG4pLGV9KFkpLG50PWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoZSxuLHIsbyl7dC5jYWxsKHRoaXMsZSxbXSxyLG8pLHRoaXMubWFyaz1ufXJldHVybiB0JiYoZS5fX3Byb3RvX189dCksZS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZSh0JiZ0LnByb3RvdHlwZSksZS5wcm90b3R5cGUuY29uc3RydWN0b3I9ZSxlLmNyZWF0ZT1mdW5jdGlvbih0LG4scixpKXt2YXIgcz1pLm5vZGVWaWV3c1tuLnR5cGUubmFtZV0sYT1zJiZzKG4saSxyKTtyZXR1cm4gYSYmYS5kb218fChhPW8uRE9NU2VyaWFsaXplci5yZW5kZXJTcGVjKGRvY3VtZW50LG4udHlwZS5zcGVjLnRvRE9NKG4scikpKSxuZXcgZSh0LG4sYS5kb20sYS5jb250ZW50RE9NfHxhLmRvbSl9LGUucHJvdG90eXBlLnBhcnNlUnVsZT1mdW5jdGlvbigpe3JldHVybnttYXJrOnRoaXMubWFyay50eXBlLm5hbWUsYXR0cnM6dGhpcy5tYXJrLmF0dHJzLGNvbnRlbnRFbGVtZW50OnRoaXMuY29udGVudERPTX19LGUucHJvdG90eXBlLm1hdGNoZXNNYXJrPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLmRpcnR5IT1YJiZ0aGlzLm1hcmsuZXEodCl9LGUucHJvdG90eXBlLm1hcmtEaXJ0eT1mdW5jdGlvbihlLG4pe2lmKHQucHJvdG90eXBlLm1hcmtEaXJ0eS5jYWxsKHRoaXMsZSxuKSx0aGlzLmRpcnR5IT1LKXt2YXIgcj10aGlzLnBhcmVudDt3aGlsZSghci5ub2RlKXI9ci5wYXJlbnQ7ci5kaXJ0eTx0aGlzLmRpcnR5JiYoci5kaXJ0eT10aGlzLmRpcnR5KSx0aGlzLmRpcnR5PUt9fSxlLnByb3RvdHlwZS5zbGljZT1mdW5jdGlvbih0LG4scil7dmFyIG89ZS5jcmVhdGUodGhpcy5wYXJlbnQsdGhpcy5tYXJrLCEwLHIpLGk9dGhpcy5jaGlsZHJlbixzPXRoaXMuc2l6ZTtuPHMmJihpPUN0KGksbixzLHIpKSx0PjAmJihpPUN0KGksMCx0LHIpKTtmb3IodmFyIGE9MDthPGkubGVuZ3RoO2ErKylpW2FdLnBhcmVudD1vO3JldHVybiBvLmNoaWxkcmVuPWksb30sZX0oWSkscnQ9ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZShlLG4scixvLGkscyxhLGMsbCl7dC5jYWxsKHRoaXMsZSxuLmlzTGVhZj9aOltdLGkscyksdGhpcy5ub2RlRE9NPWEsdGhpcy5ub2RlPW4sdGhpcy5vdXRlckRlY289cix0aGlzLmlubmVyRGVjbz1vLHMmJnRoaXMudXBkYXRlQ2hpbGRyZW4oYyxsKX10JiYoZS5fX3Byb3RvX189dCksZS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZSh0JiZ0LnByb3RvdHlwZSksZS5wcm90b3R5cGUuY29uc3RydWN0b3I9ZTt2YXIgbj17c2l6ZTp7fSxib3JkZXI6e319O3JldHVybiBlLmNyZWF0ZT1mdW5jdGlvbih0LG4scixpLHMsYSl7dmFyIGMsbD1zLm5vZGVWaWV3c1tuLnR5cGUubmFtZV0scD1sJiZsKG4scywoZnVuY3Rpb24oKXtyZXR1cm4gYz9jLnBhcmVudD9jLnBhcmVudC5wb3NCZWZvcmVDaGlsZChjKTp2b2lkIDA6YX0pLHIpLHU9cCYmcC5kb20saD1wJiZwLmNvbnRlbnRET007aWYobi5pc1RleHQpaWYodSl7aWYoMyE9dS5ub2RlVHlwZSl0aHJvdyBuZXcgUmFuZ2VFcnJvcigiVGV4dCBtdXN0IGJlIHJlbmRlcmVkIGFzIGEgRE9NIHRleHQgbm9kZSIpfWVsc2UgdT1kb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShuLnRleHQpO2Vsc2UgaWYoIXUpe3ZhciBmO2Y9by5ET01TZXJpYWxpemVyLnJlbmRlclNwZWMoZG9jdW1lbnQsbi50eXBlLnNwZWMudG9ET00obikpLHU9Zi5kb20saD1mLmNvbnRlbnRET019aHx8bi5pc1RleHR8fCJCUiI9PXUubm9kZU5hbWV8fCh1Lmhhc0F0dHJpYnV0ZSgiY29udGVudGVkaXRhYmxlIil8fCh1LmNvbnRlbnRFZGl0YWJsZT0hMSksbi50eXBlLnNwZWMuZHJhZ2dhYmxlJiYodS5kcmFnZ2FibGU9ITApKTt2YXIgZD11O3JldHVybiB1PWR0KHUscixuKSxwP2M9bmV3IGF0KHQsbixyLGksdSxoLGQscCxzLGErMSk6bi5pc1RleHQ/bmV3IGl0KHQsbixyLGksdSxkLHMpOm5ldyBlKHQsbixyLGksdSxoLGQscyxhKzEpfSxlLnByb3RvdHlwZS5wYXJzZVJ1bGU9ZnVuY3Rpb24oKXt2YXIgdD10aGlzO2lmKHRoaXMubm9kZS50eXBlLnNwZWMucmVwYXJzZUluVmlldylyZXR1cm4gbnVsbDt2YXIgZT17bm9kZTp0aGlzLm5vZGUudHlwZS5uYW1lLGF0dHJzOnRoaXMubm9kZS5hdHRyc307cmV0dXJuIHRoaXMubm9kZS50eXBlLnNwZWMuY29kZSYmKGUucHJlc2VydmVXaGl0ZXNwYWNlPSJmdWxsIiksdGhpcy5jb250ZW50RE9NJiYhdGhpcy5jb250ZW50TG9zdD9lLmNvbnRlbnRFbGVtZW50PXRoaXMuY29udGVudERPTTplLmdldENvbnRlbnQ9ZnVuY3Rpb24oKXtyZXR1cm4gdC5jb250ZW50RE9NP28uRnJhZ21lbnQuZW1wdHk6dC5ub2RlLmNvbnRlbnR9LGV9LGUucHJvdG90eXBlLm1hdGNoZXNOb2RlPWZ1bmN0aW9uKHQsZSxuKXtyZXR1cm4gdGhpcy5kaXJ0eT09SyYmdC5lcSh0aGlzLm5vZGUpJiZ2dChlLHRoaXMub3V0ZXJEZWNvKSYmbi5lcSh0aGlzLmlubmVyRGVjbyl9LG4uc2l6ZS5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5ub2RlLm5vZGVTaXplfSxuLmJvcmRlci5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5ub2RlLmlzTGVhZj8wOjF9LGUucHJvdG90eXBlLnVwZGF0ZUNoaWxkcmVuPWZ1bmN0aW9uKHQsZSl7dmFyIG49dGhpcyxyPXRoaXMubm9kZS5pbmxpbmVDb250ZW50LGk9ZSxzPXImJnQuY29tcG9zaW5nJiZ0aGlzLmxvY2FsQ29tcG9zaXRpb25Ob2RlKHQsZSksYT1uZXcgeXQodGhpcyxzJiZzLm5vZGUpO3h0KHRoaXMubm9kZSx0aGlzLmlubmVyRGVjbywoZnVuY3Rpb24oZSxzKXtlLnNwZWMubWFya3M/YS5zeW5jVG9NYXJrcyhlLnNwZWMubWFya3Mscix0KTplLnR5cGUuc2lkZT49MCYmYS5zeW5jVG9NYXJrcyhzPT1uLm5vZGUuY2hpbGRDb3VudD9vLk1hcmsubm9uZTpuLm5vZGUuY2hpbGQocykubWFya3Mscix0KSxhLnBsYWNlV2lkZ2V0KGUsdCxpKX0pLChmdW5jdGlvbihlLG4sbyxzKXthLnN5bmNUb01hcmtzKGUubWFya3Mscix0KSxhLmZpbmROb2RlTWF0Y2goZSxuLG8scyl8fGEudXBkYXRlTmV4dE5vZGUoZSxuLG8sdCxzKXx8YS5hZGROb2RlKGUsbixvLHQsaSksaSs9ZS5ub2RlU2l6ZX0pKSxhLnN5bmNUb01hcmtzKFoscix0KSx0aGlzLm5vZGUuaXNUZXh0YmxvY2smJmEuYWRkVGV4dGJsb2NrSGFja3MoKSxhLmRlc3Ryb3lSZXN0KCksKGEuY2hhbmdlZHx8dGhpcy5kaXJ0eT09RykmJihzJiZ0aGlzLnByb3RlY3RMb2NhbENvbXBvc2l0aW9uKHQscyksdGhpcy5yZW5kZXJDaGlsZHJlbigpKX0sZS5wcm90b3R5cGUucmVuZGVyQ2hpbGRyZW49ZnVuY3Rpb24oKXtjdCh0aGlzLmNvbnRlbnRET00sdGhpcy5jaGlsZHJlbixlLmlzKSxzLmlvcyYmYnQodGhpcy5kb20pfSxlLnByb3RvdHlwZS5sb2NhbENvbXBvc2l0aW9uTm9kZT1mdW5jdGlvbih0LGUpe3ZhciBuPXQuc3RhdGUuc2VsZWN0aW9uLG89bi5mcm9tLGk9bi50bztpZighKCEodC5zdGF0ZS5zZWxlY3Rpb24gaW5zdGFuY2VvZiByLlRleHRTZWxlY3Rpb24pfHxvPGV8fGk+ZSt0aGlzLm5vZGUuY29udGVudC5zaXplKSl7dmFyIHM9dC5yb290LmdldFNlbGVjdGlvbigpLGE9a3Qocy5mb2N1c05vZGUscy5mb2N1c09mZnNldCk7aWYoYSYmdGhpcy5kb20uY29udGFpbnMoYS5wYXJlbnROb2RlKSl7dmFyIGM9YS5ub2RlVmFsdWUsbD1TdCh0aGlzLm5vZGUuY29udGVudCxjLG8tZSxpLWUpO3JldHVybiBsPDA/bnVsbDp7bm9kZTphLHBvczpsLHRleHQ6Y319fX0sZS5wcm90b3R5cGUucHJvdGVjdExvY2FsQ29tcG9zaXRpb249ZnVuY3Rpb24odCxlKXt2YXIgbj10aGlzLHI9ZS5ub2RlLG89ZS5wb3MsaT1lLnRleHQ7aWYoIXRoaXMuZ2V0RGVzYyhyKSl7Zm9yKHZhciBzPXI7O3M9cy5wYXJlbnROb2RlKXtpZihzLnBhcmVudE5vZGU9PW4uY29udGVudERPTSlicmVhazt3aGlsZShzLnByZXZpb3VzU2libGluZylzLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQocy5wcmV2aW91c1NpYmxpbmcpO3doaWxlKHMubmV4dFNpYmxpbmcpcy5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKHMubmV4dFNpYmxpbmcpO3MucG1WaWV3RGVzYyYmKHMucG1WaWV3RGVzYz1udWxsKX12YXIgYT1uZXcgZXQodGhpcyxzLHIsaSk7dC5jb21wb3NpdGlvbk5vZGVzLnB1c2goYSksdGhpcy5jaGlsZHJlbj1DdCh0aGlzLmNoaWxkcmVuLG8sbytpLmxlbmd0aCx0LGEpfX0sZS5wcm90b3R5cGUudXBkYXRlPWZ1bmN0aW9uKHQsZSxuLHIpe3JldHVybiEodGhpcy5kaXJ0eT09WHx8IXQuc2FtZU1hcmt1cCh0aGlzLm5vZGUpKSYmKHRoaXMudXBkYXRlSW5uZXIodCxlLG4sciksITApfSxlLnByb3RvdHlwZS51cGRhdGVJbm5lcj1mdW5jdGlvbih0LGUsbixyKXt0aGlzLnVwZGF0ZU91dGVyRGVjbyhlKSx0aGlzLm5vZGU9dCx0aGlzLmlubmVyRGVjbz1uLHRoaXMuY29udGVudERPTSYmdGhpcy51cGRhdGVDaGlsZHJlbihyLHRoaXMucG9zQXRTdGFydCksdGhpcy5kaXJ0eT1LfSxlLnByb3RvdHlwZS51cGRhdGVPdXRlckRlY289ZnVuY3Rpb24odCl7aWYoIXZ0KHQsdGhpcy5vdXRlckRlY28pKXt2YXIgZT0xIT10aGlzLm5vZGVET00ubm9kZVR5cGUsbj10aGlzLmRvbTt0aGlzLmRvbT1odCh0aGlzLmRvbSx0aGlzLm5vZGVET00sdXQodGhpcy5vdXRlckRlY28sdGhpcy5ub2RlLGUpLHV0KHQsdGhpcy5ub2RlLGUpKSx0aGlzLmRvbSE9biYmKG4ucG1WaWV3RGVzYz1udWxsLHRoaXMuZG9tLnBtVmlld0Rlc2M9dGhpcyksdGhpcy5vdXRlckRlY289dH19LGUucHJvdG90eXBlLnNlbGVjdE5vZGU9ZnVuY3Rpb24oKXt0aGlzLm5vZGVET00uY2xhc3NMaXN0LmFkZCgiUHJvc2VNaXJyb3Itc2VsZWN0ZWRub2RlIiksIXRoaXMuY29udGVudERPTSYmdGhpcy5ub2RlLnR5cGUuc3BlYy5kcmFnZ2FibGV8fCh0aGlzLmRvbS5kcmFnZ2FibGU9ITApfSxlLnByb3RvdHlwZS5kZXNlbGVjdE5vZGU9ZnVuY3Rpb24oKXt0aGlzLm5vZGVET00uY2xhc3NMaXN0LnJlbW92ZSgiUHJvc2VNaXJyb3Itc2VsZWN0ZWRub2RlIiksIXRoaXMuY29udGVudERPTSYmdGhpcy5ub2RlLnR5cGUuc3BlYy5kcmFnZ2FibGV8fCh0aGlzLmRvbS5kcmFnZ2FibGU9ITEpfSxPYmplY3QuZGVmaW5lUHJvcGVydGllcyhlLnByb3RvdHlwZSxuKSxlfShZKTtmdW5jdGlvbiBvdCh0LGUsbixyLG8pe3JldHVybiBkdChyLGUsdCksbmV3IHJ0KG51bGwsdCxlLG4scixyLHIsbywwKX12YXIgaXQ9ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZShlLG4scixvLGkscyxhKXt0LmNhbGwodGhpcyxlLG4scixvLGksbnVsbCxzLGEpfXJldHVybiB0JiYoZS5fX3Byb3RvX189dCksZS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZSh0JiZ0LnByb3RvdHlwZSksZS5wcm90b3R5cGUuY29uc3RydWN0b3I9ZSxlLnByb3RvdHlwZS5wYXJzZVJ1bGU9ZnVuY3Rpb24oKXtyZXR1cm57c2tpcDp0aGlzLm5vZGVET00ucGFyZW50Tm9kZXx8ITB9fSxlLnByb3RvdHlwZS51cGRhdGU9ZnVuY3Rpb24odCxlKXtyZXR1cm4hKHRoaXMuZGlydHk9PVh8fHRoaXMuZGlydHkhPUsmJiF0aGlzLmluUGFyZW50KCl8fCF0LnNhbWVNYXJrdXAodGhpcy5ub2RlKSkmJih0aGlzLnVwZGF0ZU91dGVyRGVjbyhlKSx0aGlzLmRpcnR5PT1LJiZ0LnRleHQ9PXRoaXMubm9kZS50ZXh0fHx0LnRleHQ9PXRoaXMubm9kZURPTS5ub2RlVmFsdWV8fCh0aGlzLm5vZGVET00ubm9kZVZhbHVlPXQudGV4dCksdGhpcy5ub2RlPXQsdGhpcy5kaXJ0eT1LLCEwKX0sZS5wcm90b3R5cGUuaW5QYXJlbnQ9ZnVuY3Rpb24oKXtmb3IodmFyIHQ9dGhpcy5wYXJlbnQuY29udGVudERPTSxlPXRoaXMubm9kZURPTTtlO2U9ZS5wYXJlbnROb2RlKWlmKGU9PXQpcmV0dXJuITA7cmV0dXJuITF9LGUucHJvdG90eXBlLmRvbUZyb21Qb3M9ZnVuY3Rpb24odCl7cmV0dXJue25vZGU6dGhpcy5ub2RlRE9NLG9mZnNldDp0fX0sZS5wcm90b3R5cGUubG9jYWxQb3NGcm9tRE9NPWZ1bmN0aW9uKGUsbixyKXtyZXR1cm4gZT09dGhpcy5ub2RlRE9NP3RoaXMucG9zQXRTdGFydCtNYXRoLm1pbihuLHRoaXMubm9kZS50ZXh0Lmxlbmd0aCk6dC5wcm90b3R5cGUubG9jYWxQb3NGcm9tRE9NLmNhbGwodGhpcyxlLG4scil9LGUucHJvdG90eXBlLmlnbm9yZU11dGF0aW9uPWZ1bmN0aW9uKHQpe3JldHVybiJjaGFyYWN0ZXJEYXRhIiE9dC50eXBlJiYic2VsZWN0aW9uIiE9dC50eXBlfSxlLnByb3RvdHlwZS5zbGljZT1mdW5jdGlvbih0LG4scil7dmFyIG89dGhpcy5ub2RlLmN1dCh0LG4pLGk9ZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoby50ZXh0KTtyZXR1cm4gbmV3IGUodGhpcy5wYXJlbnQsbyx0aGlzLm91dGVyRGVjbyx0aGlzLmlubmVyRGVjbyxpLGkscil9LGV9KHJ0KSxzdD1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKCl7dC5hcHBseSh0aGlzLGFyZ3VtZW50cyl9cmV0dXJuIHQmJihlLl9fcHJvdG9fXz10KSxlLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKHQmJnQucHJvdG90eXBlKSxlLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1lLGUucHJvdG90eXBlLnBhcnNlUnVsZT1mdW5jdGlvbigpe3JldHVybntpZ25vcmU6ITB9fSxlLnByb3RvdHlwZS5tYXRjaGVzSGFjaz1mdW5jdGlvbigpe3JldHVybiB0aGlzLmRpcnR5PT1LfSxlfShZKSxhdD1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKGUsbixyLG8saSxzLGEsYyxsLHApe3QuY2FsbCh0aGlzLGUsbixyLG8saSxzLGEsbCxwKSx0aGlzLnNwZWM9Y31yZXR1cm4gdCYmKGUuX19wcm90b19fPXQpLGUucHJvdG90eXBlPU9iamVjdC5jcmVhdGUodCYmdC5wcm90b3R5cGUpLGUucHJvdG90eXBlLmNvbnN0cnVjdG9yPWUsZS5wcm90b3R5cGUudXBkYXRlPWZ1bmN0aW9uKGUsbixyLG8pe2lmKHRoaXMuZGlydHk9PVgpcmV0dXJuITE7aWYodGhpcy5zcGVjLnVwZGF0ZSl7dmFyIGk9dGhpcy5zcGVjLnVwZGF0ZShlLG4pO3JldHVybiBpJiZ0aGlzLnVwZGF0ZUlubmVyKGUsbixyLG8pLGl9cmV0dXJuISghdGhpcy5jb250ZW50RE9NJiYhZS5pc0xlYWYpJiZ0LnByb3RvdHlwZS51cGRhdGUuY2FsbCh0aGlzLGUsbixyLG8pfSxlLnByb3RvdHlwZS5zZWxlY3ROb2RlPWZ1bmN0aW9uKCl7dGhpcy5zcGVjLnNlbGVjdE5vZGU/dGhpcy5zcGVjLnNlbGVjdE5vZGUoKTp0LnByb3RvdHlwZS5zZWxlY3ROb2RlLmNhbGwodGhpcyl9LGUucHJvdG90eXBlLmRlc2VsZWN0Tm9kZT1mdW5jdGlvbigpe3RoaXMuc3BlYy5kZXNlbGVjdE5vZGU/dGhpcy5zcGVjLmRlc2VsZWN0Tm9kZSgpOnQucHJvdG90eXBlLmRlc2VsZWN0Tm9kZS5jYWxsKHRoaXMpfSxlLnByb3RvdHlwZS5zZXRTZWxlY3Rpb249ZnVuY3Rpb24oZSxuLHIsbyl7dGhpcy5zcGVjLnNldFNlbGVjdGlvbj90aGlzLnNwZWMuc2V0U2VsZWN0aW9uKGUsbixyKTp0LnByb3RvdHlwZS5zZXRTZWxlY3Rpb24uY2FsbCh0aGlzLGUsbixyLG8pfSxlLnByb3RvdHlwZS5kZXN0cm95PWZ1bmN0aW9uKCl7dGhpcy5zcGVjLmRlc3Ryb3kmJnRoaXMuc3BlYy5kZXN0cm95KCksdC5wcm90b3R5cGUuZGVzdHJveS5jYWxsKHRoaXMpfSxlLnByb3RvdHlwZS5zdG9wRXZlbnQ9ZnVuY3Rpb24odCl7cmV0dXJuISF0aGlzLnNwZWMuc3RvcEV2ZW50JiZ0aGlzLnNwZWMuc3RvcEV2ZW50KHQpfSxlLnByb3RvdHlwZS5pZ25vcmVNdXRhdGlvbj1mdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5zcGVjLmlnbm9yZU11dGF0aW9uP3RoaXMuc3BlYy5pZ25vcmVNdXRhdGlvbihlKTp0LnByb3RvdHlwZS5pZ25vcmVNdXRhdGlvbi5jYWxsKHRoaXMsZSl9LGV9KHJ0KTtmdW5jdGlvbiBjdCh0LGUpe2Zvcih2YXIgbj10LmZpcnN0Q2hpbGQscj0wO3I8ZS5sZW5ndGg7cisrKXt2YXIgbz1lW3JdLGk9by5kb207aWYoaS5wYXJlbnROb2RlPT10KXt3aGlsZShpIT1uKW49bXQobik7bj1uLm5leHRTaWJsaW5nfWVsc2UgdC5pbnNlcnRCZWZvcmUoaSxuKTtpZihvIGluc3RhbmNlb2YgbnQpe3ZhciBzPW4/bi5wcmV2aW91c1NpYmxpbmc6dC5sYXN0Q2hpbGQ7Y3Qoby5jb250ZW50RE9NLG8uY2hpbGRyZW4pLG49cz9zLm5leHRTaWJsaW5nOnQuZmlyc3RDaGlsZH19d2hpbGUobiluPW10KG4pfWZ1bmN0aW9uIGx0KHQpe3QmJih0aGlzLm5vZGVOYW1lPXQpfWx0LnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKG51bGwpO3ZhciBwdD1bbmV3IGx0XTtmdW5jdGlvbiB1dCh0LGUsbil7aWYoMD09dC5sZW5ndGgpcmV0dXJuIHB0O2Zvcih2YXIgcj1uP3B0WzBdOm5ldyBsdCxvPVtyXSxpPTA7aTx0Lmxlbmd0aDtpKyspe3ZhciBzPXRbaV0udHlwZS5hdHRycyxhPXI7aWYocylmb3IodmFyIGMgaW4gcy5ub2RlTmFtZSYmby5wdXNoKGE9bmV3IGx0KHMubm9kZU5hbWUpKSxzKXt2YXIgbD1zW2NdO251bGwhPWwmJihuJiYxPT1vLmxlbmd0aCYmby5wdXNoKGE9cj1uZXcgbHQoZS5pc0lubGluZT8ic3BhbiI6ImRpdiIpKSwiY2xhc3MiPT1jP2EuY2xhc3M9KGEuY2xhc3M/YS5jbGFzcysiICI6IiIpK2w6InN0eWxlIj09Yz9hLnN0eWxlPShhLnN0eWxlP2Euc3R5bGUrIjsiOiIiKStsOiJub2RlTmFtZSIhPWMmJihhW2NdPWwpKX19cmV0dXJuIG99ZnVuY3Rpb24gaHQodCxlLG4scil7aWYobj09cHQmJnI9PXB0KXJldHVybiBlO2Zvcih2YXIgbz1lLGk9MDtpPHIubGVuZ3RoO2krKyl7dmFyIHM9cltpXSxhPW5baV07aWYoaSl7dmFyIGM9dm9pZCAwO2EmJmEubm9kZU5hbWU9PXMubm9kZU5hbWUmJm8hPXQmJihjPWUucGFyZW50Tm9kZSkmJmMudGFnTmFtZS50b0xvd2VyQ2FzZSgpPT1zLm5vZGVOYW1lP289YzooYz1kb2N1bWVudC5jcmVhdGVFbGVtZW50KHMubm9kZU5hbWUpLGMuYXBwZW5kQ2hpbGQobyksbz1jKX1mdChvLGF8fHB0WzBdLHMpfXJldHVybiBvfWZ1bmN0aW9uIGZ0KHQsZSxuKXtmb3IodmFyIHIgaW4gZSkiY2xhc3MiPT1yfHwic3R5bGUiPT1yfHwibm9kZU5hbWUiPT1yfHxyIGluIG58fHQucmVtb3ZlQXR0cmlidXRlKHIpO2Zvcih2YXIgbyBpbiBuKSJjbGFzcyIhPW8mJiJzdHlsZSIhPW8mJiJub2RlTmFtZSIhPW8mJm5bb10hPWVbb10mJnQuc2V0QXR0cmlidXRlKG8sbltvXSk7aWYoZS5jbGFzcyE9bi5jbGFzcyl7Zm9yKHZhciBpPWUuY2xhc3M/ZS5jbGFzcy5zcGxpdCgiICIpOloscz1uLmNsYXNzP24uY2xhc3Muc3BsaXQoIiAiKTpaLGE9MDthPGkubGVuZ3RoO2ErKyktMT09cy5pbmRleE9mKGlbYV0pJiZ0LmNsYXNzTGlzdC5yZW1vdmUoaVthXSk7Zm9yKHZhciBjPTA7YzxzLmxlbmd0aDtjKyspLTE9PWkuaW5kZXhPZihzW2NdKSYmdC5jbGFzc0xpc3QuYWRkKHNbY10pfWlmKGUuc3R5bGUhPW4uc3R5bGUpe2lmKGUuc3R5bGUpe3ZhciBsLHA9L1xzKihbXHdcLVx4YTEtXHVmZmZmXSspXHMqOig/OiIoPzpcXC58W14iXSkqInwnKD86XFwufFteJ10pKid8XCguKj9cKXxbXjtdKSovZzt3aGlsZShsPXAuZXhlYyhlLnN0eWxlKSl0LnN0eWxlW2xbMV0udG9Mb3dlckNhc2UoKV09IiJ9bi5zdHlsZSYmKHQuc3R5bGUuY3NzVGV4dCs9bi5zdHlsZSl9fWZ1bmN0aW9uIGR0KHQsZSxuKXtyZXR1cm4gaHQodCx0LHB0LHV0KGUsbiwxIT10Lm5vZGVUeXBlKSl9ZnVuY3Rpb24gdnQodCxlKXtpZih0Lmxlbmd0aCE9ZS5sZW5ndGgpcmV0dXJuITE7Zm9yKHZhciBuPTA7bjx0Lmxlbmd0aDtuKyspaWYoIXRbbl0udHlwZS5lcShlW25dLnR5cGUpKXJldHVybiExO3JldHVybiEwfWZ1bmN0aW9uIG10KHQpe3ZhciBlPXQubmV4dFNpYmxpbmc7cmV0dXJuIHQucGFyZW50Tm9kZS5yZW1vdmVDaGlsZCh0KSxlfXZhciB5dD1mdW5jdGlvbih0LGUpe3RoaXMudG9wPXQsdGhpcy5sb2NrPWUsdGhpcy5pbmRleD0wLHRoaXMuc3RhY2s9W10sdGhpcy5jaGFuZ2VkPSExO3ZhciBuPWd0KHQubm9kZS5jb250ZW50LHQuY2hpbGRyZW4pO3RoaXMucHJlTWF0Y2hlZD1uLm5vZGVzLHRoaXMucHJlTWF0Y2hPZmZzZXQ9bi5vZmZzZXR9O2Z1bmN0aW9uIGd0KHQsZSl7Zm9yKHZhciBuPVtdLHI9dC5jaGlsZENvdW50LG89ZS5sZW5ndGgtMTtyPjAmJm8+PTA7by0tKXt2YXIgaT1lW29dLHM9aS5ub2RlO2lmKHMpe2lmKHMhPXQuY2hpbGQoci0xKSlicmVhaztuLnB1c2goaSksLS1yfX1yZXR1cm57bm9kZXM6bi5yZXZlcnNlKCksb2Zmc2V0OnJ9fWZ1bmN0aW9uIHd0KHQsZSl7cmV0dXJuIHQudHlwZS5zaWRlLWUudHlwZS5zaWRlfWZ1bmN0aW9uIHh0KHQsZSxuLHIpe3ZhciBvPWUubG9jYWxzKHQpLGk9MDtpZigwIT1vLmxlbmd0aClmb3IodmFyIHM9MCxhPVtdLGM9bnVsbCxsPTA7Oyl7aWYoczxvLmxlbmd0aCYmb1tzXS50bz09aSl7dmFyIHA9b1tzKytdLHU9dm9pZCAwO3doaWxlKHM8by5sZW5ndGgmJm9bc10udG89PWkpKHV8fCh1PVtwXSkpLnB1c2gob1tzKytdKTtpZih1KXt1LnNvcnQod3QpO2Zvcih2YXIgaD0wO2g8dS5sZW5ndGg7aCsrKW4odVtoXSxsKX1lbHNlIG4ocCxsKX12YXIgZj12b2lkIDAsZD12b2lkIDA7aWYoYylkPS0xLGY9YyxjPW51bGw7ZWxzZXtpZighKGw8dC5jaGlsZENvdW50KSlicmVhaztkPWwsZj10LmNoaWxkKGwrKyl9Zm9yKHZhciB2PTA7djxhLmxlbmd0aDt2KyspYVt2XS50bzw9aSYmYS5zcGxpY2Uodi0tLDEpO3doaWxlKHM8by5sZW5ndGgmJm9bc10uZnJvbT09aSlhLnB1c2gob1tzKytdKTt2YXIgbT1pK2Yubm9kZVNpemU7aWYoZi5pc1RleHQpe3ZhciB5PW07czxvLmxlbmd0aCYmb1tzXS5mcm9tPHkmJih5PW9bc10uZnJvbSk7Zm9yKHZhciBnPTA7ZzxhLmxlbmd0aDtnKyspYVtnXS50bzx5JiYoeT1hW2ddLnRvKTt5PG0mJihjPWYuY3V0KHktaSksZj1mLmN1dCgwLHktaSksbT15LGQ9LTEpfXIoZixhLmxlbmd0aD9hLnNsaWNlKCk6WixlLmZvckNoaWxkKGksZiksZCksaT1tfWVsc2UgZm9yKHZhciB3PTA7dzx0LmNoaWxkQ291bnQ7dysrKXt2YXIgeD10LmNoaWxkKHcpO3IoeCxvLGUuZm9yQ2hpbGQoaSx4KSx3KSxpKz14Lm5vZGVTaXplfX1mdW5jdGlvbiBidCh0KXtpZigiVUwiPT10Lm5vZGVOYW1lfHwiT0wiPT10Lm5vZGVOYW1lKXt2YXIgZT10LnN0eWxlLmNzc1RleHQ7dC5zdHlsZS5jc3NUZXh0PWUrIjsgbGlzdC1zdHlsZTogc3F1YXJlICFpbXBvcnRhbnQiLHdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKHQpLmxpc3RTdHlsZSx0LnN0eWxlLmNzc1RleHQ9ZX19ZnVuY3Rpb24ga3QodCxlKXtmb3IoOzspe2lmKDM9PXQubm9kZVR5cGUpcmV0dXJuIHQ7aWYoMT09dC5ub2RlVHlwZSYmZT4wKXtpZih0LmNoaWxkTm9kZXMubGVuZ3RoPmUmJjM9PXQuY2hpbGROb2Rlc1tlXS5ub2RlVHlwZSlyZXR1cm4gdC5jaGlsZE5vZGVzW2VdO3Q9dC5jaGlsZE5vZGVzW2UtMV0sZT1nKHQpfWVsc2V7aWYoISgxPT10Lm5vZGVUeXBlJiZlPHQuY2hpbGROb2Rlcy5sZW5ndGgpKXJldHVybiBudWxsO3Q9dC5jaGlsZE5vZGVzW2VdLGU9MH19fWZ1bmN0aW9uIFN0KHQsZSxuLHIpe2Zvcih2YXIgbz0iIixpPTAscz0wO2k8dC5jaGlsZENvdW50O2krKyl7dmFyIGE9dC5jaGlsZChpKSxjPXMrYS5ub2RlU2l6ZTtpZihhLmlzVGV4dCl7aWYobys9YS50ZXh0LGM+PXIpe3ZhciBsPWMtby5sZW5ndGgscD1vLmxhc3RJbmRleE9mKGUpO3doaWxlKHA+LTEmJmwrcD5uKXA9by5sYXN0SW5kZXhPZihlLHAtMSk7aWYocD4tMSYmbCtwK2UubGVuZ3RoPj1yKXJldHVybiBsK3A7aWYoYz5yKWJyZWFrfX1lbHNlIG89IiI7cz1jfXJldHVybi0xfWZ1bmN0aW9uIEN0KHQsZSxuLHIsbyl7Zm9yKHZhciBpPVtdLHM9MCxhPTA7czx0Lmxlbmd0aDtzKyspe3ZhciBjPXRbc10sbD1hLHA9YSs9Yy5zaXplO2w+PW58fHA8PWU/aS5wdXNoKGMpOihsPGUmJmkucHVzaChjLnNsaWNlKDAsZS1sLHIpKSxvJiYoaS5wdXNoKG8pLG89bnVsbCkscD5uJiZpLnB1c2goYy5zbGljZShuLWwsYy5zaXplLHIpKSl9cmV0dXJuIGl9ZnVuY3Rpb24gT3QodCxlKXt2YXIgbj10LnNlbGVjdGlvbixvPW4uJGFuY2hvcixpPW4uJGhlYWQscz1lPjA/by5tYXgoaSk6by5taW4oaSksYT1zLnBhcmVudC5pbmxpbmVDb250ZW50P3MuZGVwdGg/dC5kb2MucmVzb2x2ZShlPjA/cy5hZnRlcigpOnMuYmVmb3JlKCkpOm51bGw6cztyZXR1cm4gYSYmci5TZWxlY3Rpb24uZmluZEZyb20oYSxlKX1mdW5jdGlvbiBNdCh0LGUpe3JldHVybiB0LmRpc3BhdGNoKHQuc3RhdGUudHIuc2V0U2VsZWN0aW9uKGUpLnNjcm9sbEludG9WaWV3KCkpLCEwfWZ1bmN0aW9uIFR0KHQsZSxuKXt2YXIgbz10LnN0YXRlLnNlbGVjdGlvbjtpZihvIGluc3RhbmNlb2Ygci5UZXh0U2VsZWN0aW9uKXtpZighby5lbXB0eXx8bi5pbmRleE9mKCJzIik+LTEpcmV0dXJuITE7aWYodC5lbmRPZlRleHRibG9jayhlPjA/InJpZ2h0IjoibGVmdCIpKXt2YXIgaT1PdCh0LnN0YXRlLGUpO3JldHVybiEhKGkmJmkgaW5zdGFuY2VvZiByLk5vZGVTZWxlY3Rpb24pJiZNdCh0LGkpfXZhciBhLGM9by4kaGVhZCxsPWMudGV4dE9mZnNldD9udWxsOmU8MD9jLm5vZGVCZWZvcmU6Yy5ub2RlQWZ0ZXI7aWYoIWx8fGwuaXNUZXh0KXJldHVybiExO3ZhciBwPWU8MD9jLnBvcy1sLm5vZGVTaXplOmMucG9zO3JldHVybiEhKGwuaXNBdG9tfHwoYT10LmRvY1ZpZXcuZGVzY0F0KHApKSYmIWEuY29udGVudERPTSkmJihyLk5vZGVTZWxlY3Rpb24uaXNTZWxlY3RhYmxlKGwpP010KHQsbmV3IHIuTm9kZVNlbGVjdGlvbihlPDA/dC5zdGF0ZS5kb2MucmVzb2x2ZShjLnBvcy1sLm5vZGVTaXplKTpjKSk6ISFzLndlYmtpdCYmTXQodCxuZXcgci5UZXh0U2VsZWN0aW9uKHQuc3RhdGUuZG9jLnJlc29sdmUoZTwwP3A6cCtsLm5vZGVTaXplKSkpKX1pZihvIGluc3RhbmNlb2Ygci5Ob2RlU2VsZWN0aW9uJiZvLm5vZGUuaXNJbmxpbmUpcmV0dXJuIE10KHQsbmV3IHIuVGV4dFNlbGVjdGlvbihlPjA/by4kdG86by4kZnJvbSkpO3ZhciB1PU90KHQuc3RhdGUsZSk7cmV0dXJuISF1JiZNdCh0LHUpfWZ1bmN0aW9uIE50KHQpe3JldHVybiAzPT10Lm5vZGVUeXBlP3Qubm9kZVZhbHVlLmxlbmd0aDp0LmNoaWxkTm9kZXMubGVuZ3RofWZ1bmN0aW9uIEV0KHQpe3ZhciBlPXQucG1WaWV3RGVzYztyZXR1cm4gZSYmMD09ZS5zaXplJiYodC5uZXh0U2libGluZ3x8IkJSIiE9dC5ub2RlTmFtZSl9ZnVuY3Rpb24gQXQodCl7dmFyIGU9dC5yb290LmdldFNlbGVjdGlvbigpLG49ZS5mb2N1c05vZGUscj1lLmZvY3VzT2Zmc2V0O2lmKG4pe3ZhciBvLGksYT0hMTtmb3Iocy5nZWNrbyYmMT09bi5ub2RlVHlwZSYmcjxOdChuKSYmRXQobi5jaGlsZE5vZGVzW3JdKSYmKGE9ITApOzspaWYocj4wKXtpZigxIT1uLm5vZGVUeXBlKWJyZWFrO3ZhciBjPW4uY2hpbGROb2Rlc1tyLTFdO2lmKEV0KGMpKW89bixpPS0tcjtlbHNle2lmKDMhPWMubm9kZVR5cGUpYnJlYWs7bj1jLHI9bi5ub2RlVmFsdWUubGVuZ3RofX1lbHNle2lmKER0KG4pKWJyZWFrO3ZhciBsPW4ucHJldmlvdXNTaWJsaW5nO3doaWxlKGwmJkV0KGwpKW89bi5wYXJlbnROb2RlLGk9aChsKSxsPWwucHJldmlvdXNTaWJsaW5nO2lmKGwpbj1sLHI9TnQobik7ZWxzZXtpZihuPW4ucGFyZW50Tm9kZSxuPT10LmRvbSlicmVhaztyPTB9fWE/enQodCxlLG4scik6byYmenQodCxlLG8saSl9fWZ1bmN0aW9uIFJ0KHQpe3ZhciBlPXQucm9vdC5nZXRTZWxlY3Rpb24oKSxuPWUuZm9jdXNOb2RlLHI9ZS5mb2N1c09mZnNldDtpZihuKXtmb3IodmFyIG8saSxzPU50KG4pOzspaWYocjxzKXtpZigxIT1uLm5vZGVUeXBlKWJyZWFrO3ZhciBhPW4uY2hpbGROb2Rlc1tyXTtpZighRXQoYSkpYnJlYWs7bz1uLGk9KytyfWVsc2V7aWYoRHQobikpYnJlYWs7dmFyIGM9bi5uZXh0U2libGluZzt3aGlsZShjJiZFdChjKSlvPWMucGFyZW50Tm9kZSxpPWgoYykrMSxjPWMubmV4dFNpYmxpbmc7aWYoYyluPWMscj0wLHM9TnQobik7ZWxzZXtpZihuPW4ucGFyZW50Tm9kZSxuPT10LmRvbSlicmVhaztyPXM9MH19byYmenQodCxlLG8saSl9fWZ1bmN0aW9uIER0KHQpe3ZhciBlPXQucG1WaWV3RGVzYztyZXR1cm4gZSYmZS5ub2RlJiZlLm5vZGUuaXNCbG9ja31mdW5jdGlvbiB6dCh0LGUsbixyKXtpZih4KGUpKXt2YXIgbz1kb2N1bWVudC5jcmVhdGVSYW5nZSgpO28uc2V0RW5kKG4sciksby5zZXRTdGFydChuLHIpLGUucmVtb3ZlQWxsUmFuZ2VzKCksZS5hZGRSYW5nZShvKX1lbHNlIGUuZXh0ZW5kJiZlLmV4dGVuZChuLHIpO3QuZG9tT2JzZXJ2ZXIuc2V0Q3VyU2VsZWN0aW9uKCl9ZnVuY3Rpb24gUHQodCxlLG4pe3ZhciBvPXQuc3RhdGUuc2VsZWN0aW9uO2lmKG8gaW5zdGFuY2VvZiByLlRleHRTZWxlY3Rpb24mJiFvLmVtcHR5fHxuLmluZGV4T2YoInMiKT4tMSlyZXR1cm4hMTt2YXIgaT1vLiRmcm9tLHM9by4kdG87aWYoIWkucGFyZW50LmlubGluZUNvbnRlbnR8fHQuZW5kT2ZUZXh0YmxvY2soZTwwPyJ1cCI6ImRvd24iKSl7dmFyIGE9T3QodC5zdGF0ZSxlKTtpZihhJiZhIGluc3RhbmNlb2Ygci5Ob2RlU2VsZWN0aW9uKXJldHVybiBNdCh0LGEpfWlmKCFpLnBhcmVudC5pbmxpbmVDb250ZW50KXt2YXIgYz1yLlNlbGVjdGlvbi5maW5kRnJvbShlPDA/aTpzLGUpO3JldHVybiFjfHxNdCh0LGMpfXJldHVybiExfWZ1bmN0aW9uIEl0KHQsZSl7aWYoISh0LnN0YXRlLnNlbGVjdGlvbiBpbnN0YW5jZW9mIHIuVGV4dFNlbGVjdGlvbikpcmV0dXJuITA7dmFyIG49dC5zdGF0ZS5zZWxlY3Rpb24sbz1uLiRoZWFkLGk9bi4kYW5jaG9yLHM9bi5lbXB0eTtpZighby5zYW1lUGFyZW50KGkpKXJldHVybiEwO2lmKCFzKXJldHVybiExO2lmKHQuZW5kT2ZUZXh0YmxvY2soZT4wPyJmb3J3YXJkIjoiYmFja3dhcmQiKSlyZXR1cm4hMDt2YXIgYT0hby50ZXh0T2Zmc2V0JiYoZTwwP28ubm9kZUJlZm9yZTpvLm5vZGVBZnRlcik7aWYoYSYmIWEuaXNUZXh0KXt2YXIgYz10LnN0YXRlLnRyO3JldHVybiBlPDA/Yy5kZWxldGUoby5wb3MtYS5ub2RlU2l6ZSxvLnBvcyk6Yy5kZWxldGUoby5wb3Msby5wb3MrYS5ub2RlU2l6ZSksdC5kaXNwYXRjaChjKSwhMH1yZXR1cm4hMX1mdW5jdGlvbiBfdCh0LGUsbil7dC5kb21PYnNlcnZlci5zdG9wKCksZS5jb250ZW50RWRpdGFibGU9bix0LmRvbU9ic2VydmVyLnN0YXJ0KCl9ZnVuY3Rpb24gRnQodCl7aWYocy5jaHJvbWUmJiEodC5zdGF0ZS5zZWxlY3Rpb24uJGhlYWQucGFyZW50T2Zmc2V0PjApKXt2YXIgZT10LnJvb3QuZ2V0U2VsZWN0aW9uKCksbj1lLmZvY3VzTm9kZSxyPWUuZm9jdXNPZmZzZXQ7aWYobiYmMT09bi5ub2RlVHlwZSYmMD09ciYmbi5maXJzdENoaWxkJiYiZmFsc2UiPT1uLmZpcnN0Q2hpbGQuY29udGVudEVkaXRhYmxlKXt2YXIgbz1uLmZpcnN0Q2hpbGQ7X3QodCxvLCEwKSxzZXRUaW1lb3V0KChmdW5jdGlvbigpe3JldHVybiBfdCh0LG8sITEpfSksMjApfX19ZnVuY3Rpb24gQnQodCl7dmFyIGU9IiI7cmV0dXJuIHQuY3RybEtleSYmKGUrPSJjIiksdC5tZXRhS2V5JiYoZSs9Im0iKSx0LmFsdEtleSYmKGUrPSJhIiksdC5zaGlmdEtleSYmKGUrPSJzIiksZX1mdW5jdGlvbiBqdCh0LGUpe3ZhciBuPWUua2V5Q29kZSxyPUJ0KGUpO3JldHVybiA4PT1ufHxzLm1hYyYmNzI9PW4mJiJjIj09cj9JdCh0LC0xKXx8QXQodCk6NDY9PW58fHMubWFjJiY2OD09biYmImMiPT1yP0l0KHQsMSl8fFJ0KHQpOjEzPT1ufHwyNz09bnx8KDM3PT1uP1R0KHQsLTEscil8fEF0KHQpOjM5PT1uP1R0KHQsMSxyKXx8UnQodCk6Mzg9PW4/UHQodCwtMSxyKXx8QXQodCk6NDA9PW4/RnQodCl8fFB0KHQsMSxyKXx8UnQodCk6cj09KHMubWFjPyJtIjoiYyIpJiYoNjY9PW58fDczPT1ufHw4OT09bnx8OTA9PW4pKX1mdW5jdGlvbiAkdCh0LGUpe3ZhciBuLG8saT10LnJvb3QuZ2V0U2VsZWN0aW9uKCkscz10LnN0YXRlLmRvYyxhPXQuZG9jVmlldy5uZWFyZXN0RGVzYyhpLmZvY3VzTm9kZSksYz1hJiYwPT1hLnNpemUsbD10LmRvY1ZpZXcucG9zRnJvbURPTShpLmZvY3VzTm9kZSxpLmZvY3VzT2Zmc2V0KSxwPXMucmVzb2x2ZShsKTtpZih4KGkpKXtuPXA7d2hpbGUoYSYmIWEubm9kZSlhPWEucGFyZW50O2lmKGEmJmEubm9kZS5pc0F0b20mJnIuTm9kZVNlbGVjdGlvbi5pc1NlbGVjdGFibGUoYS5ub2RlKSYmYS5wYXJlbnQpe3ZhciB1PWEucG9zQmVmb3JlO289bmV3IHIuTm9kZVNlbGVjdGlvbihsPT11P3A6cy5yZXNvbHZlKHUpKX19ZWxzZSBuPXMucmVzb2x2ZSh0LmRvY1ZpZXcucG9zRnJvbURPTShpLmFuY2hvck5vZGUsaS5hbmNob3JPZmZzZXQpKTtpZighbyl7dmFyIGg9InBvaW50ZXIiPT1lfHx0LnN0YXRlLnNlbGVjdGlvbi5oZWFkPHAucG9zJiYhYz8xOi0xO289VXQodCxuLHAsaCl9cmV0dXJuIG99ZnVuY3Rpb24gVnQodCxlLG4pe3ZhciBvPXQuc3RhdGUuc2VsZWN0aW9uO2lmKEh0KHQsbyksdC5lZGl0YWJsZSYmIXQuaGFzRm9jdXMoKSl7aWYoIWUpcmV0dXJuO3MuZ2Vja28mJnMuZ2Vja29fdmVyc2lvbjw9NTUmJih0LmRvbU9ic2VydmVyLmRpc2Nvbm5lY3RTZWxlY3Rpb24oKSx0LmRvbS5mb2N1cygpLHQuZG9tT2JzZXJ2ZXIuY29ubmVjdFNlbGVjdGlvbigpKX1lbHNlIGlmKCF0LmVkaXRhYmxlJiYoIVh0KHQpfHwhZG9jdW1lbnQuYWN0aXZlRWxlbWVudC5jb250YWlucyh0LmRvbSkpJiYhZSlyZXR1cm47aWYodC5kb21PYnNlcnZlci5kaXNjb25uZWN0U2VsZWN0aW9uKCksdC5jdXJzb3JXcmFwcGVyKVd0KHQpO2Vsc2V7dmFyIGksYSxjPW8uYW5jaG9yLGw9by5oZWFkOyFMdHx8byBpbnN0YW5jZW9mIHIuVGV4dFNlbGVjdGlvbnx8KG8uJGZyb20ucGFyZW50LmlubGluZUNvbnRlbnR8fChpPUp0KHQsby5mcm9tKSksby5lbXB0eXx8by4kZnJvbS5wYXJlbnQuaW5saW5lQ29udGVudHx8KGE9SnQodCxvLnRvKSkpLHQuZG9jVmlldy5zZXRTZWxlY3Rpb24oYyxsLHQucm9vdCxuKSxMdCYmKGkmJihpLmNvbnRlbnRFZGl0YWJsZT0iZmFsc2UiKSxhJiYoYS5jb250ZW50RWRpdGFibGU9ImZhbHNlIikpLG8udmlzaWJsZT90LmRvbS5jbGFzc0xpc3QucmVtb3ZlKCJQcm9zZU1pcnJvci1oaWRlc2VsZWN0aW9uIik6YyE9bCYmKHQuZG9tLmNsYXNzTGlzdC5hZGQoIlByb3NlTWlycm9yLWhpZGVzZWxlY3Rpb24iKSwib25zZWxlY3Rpb25jaGFuZ2UiaW4gZG9jdW1lbnQmJnF0KHQpKX10LmRvbU9ic2VydmVyLnNldEN1clNlbGVjdGlvbigpLHQuZG9tT2JzZXJ2ZXIuY29ubmVjdFNlbGVjdGlvbigpfXl0LnByb3RvdHlwZS5nZXRQcmVNYXRjaD1mdW5jdGlvbih0KXtyZXR1cm4gdD49dGhpcy5wcmVNYXRjaE9mZnNldD90aGlzLnByZU1hdGNoZWRbdC10aGlzLnByZU1hdGNoT2Zmc2V0XTpudWxsfSx5dC5wcm90b3R5cGUuZGVzdHJveUJldHdlZW49ZnVuY3Rpb24odCxlKXt2YXIgbj10aGlzO2lmKHQhPWUpe2Zvcih2YXIgcj10O3I8ZTtyKyspbi50b3AuY2hpbGRyZW5bcl0uZGVzdHJveSgpO3RoaXMudG9wLmNoaWxkcmVuLnNwbGljZSh0LGUtdCksdGhpcy5jaGFuZ2VkPSEwfX0seXQucHJvdG90eXBlLmRlc3Ryb3lSZXN0PWZ1bmN0aW9uKCl7dGhpcy5kZXN0cm95QmV0d2Vlbih0aGlzLmluZGV4LHRoaXMudG9wLmNoaWxkcmVuLmxlbmd0aCl9LHl0LnByb3RvdHlwZS5zeW5jVG9NYXJrcz1mdW5jdGlvbih0LGUsbil7dmFyIHI9dGhpcyxvPTAsaT10aGlzLnN0YWNrLmxlbmd0aD4+MSxzPU1hdGgubWluKGksdC5sZW5ndGgpO3doaWxlKG88cyYmKG89PWktMT90aGlzLnRvcDp0aGlzLnN0YWNrW28rMTw8MV0pLm1hdGNoZXNNYXJrKHRbb10pJiYhMSE9PXRbb10udHlwZS5zcGVjLnNwYW5uaW5nKW8rKzt3aGlsZShvPGkpci5kZXN0cm95UmVzdCgpLHIudG9wLmRpcnR5PUssci5pbmRleD1yLnN0YWNrLnBvcCgpLHIudG9wPXIuc3RhY2sucG9wKCksaS0tO3doaWxlKGk8dC5sZW5ndGgpe3Iuc3RhY2sucHVzaChyLnRvcCxyLmluZGV4KzEpO2Zvcih2YXIgYT0tMSxjPXRoaXMuaW5kZXg7YzxNYXRoLm1pbih0aGlzLmluZGV4KzMsdGhpcy50b3AuY2hpbGRyZW4ubGVuZ3RoKTtjKyspaWYoci50b3AuY2hpbGRyZW5bY10ubWF0Y2hlc01hcmsodFtpXSkpe2E9YzticmVha31pZihhPi0xKWE+ci5pbmRleCYmKHIuY2hhbmdlZD0hMCxyLmRlc3Ryb3lCZXR3ZWVuKHIuaW5kZXgsYSkpLHIudG9wPXIudG9wLmNoaWxkcmVuW3IuaW5kZXhdO2Vsc2V7dmFyIGw9bnQuY3JlYXRlKHIudG9wLHRbaV0sZSxuKTtyLnRvcC5jaGlsZHJlbi5zcGxpY2Uoci5pbmRleCwwLGwpLHIudG9wPWwsci5jaGFuZ2VkPSEwfXIuaW5kZXg9MCxpKyt9fSx5dC5wcm90b3R5cGUuZmluZE5vZGVNYXRjaD1mdW5jdGlvbih0LGUsbixyKXt2YXIgbz10aGlzLGk9LTEscz1yPDA/dm9pZCAwOnRoaXMuZ2V0UHJlTWF0Y2gociksYT10aGlzLnRvcC5jaGlsZHJlbjtpZihzJiZzLm1hdGNoZXNOb2RlKHQsZSxuKSlpPWEuaW5kZXhPZihzKTtlbHNlIGZvcih2YXIgYz10aGlzLmluZGV4LGw9TWF0aC5taW4oYS5sZW5ndGgsYys1KTtjPGw7YysrKXt2YXIgcD1hW2NdO2lmKHAubWF0Y2hlc05vZGUodCxlLG4pJiZvLnByZU1hdGNoZWQuaW5kZXhPZihwKTwwKXtpPWM7YnJlYWt9fXJldHVybiEoaTwwKSYmKHRoaXMuZGVzdHJveUJldHdlZW4odGhpcy5pbmRleCxpKSx0aGlzLmluZGV4KyssITApfSx5dC5wcm90b3R5cGUudXBkYXRlTmV4dE5vZGU9ZnVuY3Rpb24odCxlLG4scixvKXtpZih0aGlzLmluZGV4PT10aGlzLnRvcC5jaGlsZHJlbi5sZW5ndGgpcmV0dXJuITE7dmFyIGk9dGhpcy50b3AuY2hpbGRyZW5bdGhpcy5pbmRleF07aWYoaSBpbnN0YW5jZW9mIHJ0KXt2YXIgcz10aGlzLnByZU1hdGNoZWQuaW5kZXhPZihpKTtpZihzPi0xJiZzK3RoaXMucHJlTWF0Y2hPZmZzZXQhPW8pcmV0dXJuITE7dmFyIGE9aS5kb20sYz10aGlzLmxvY2smJihhPT10aGlzLmxvY2t8fDE9PWEubm9kZVR5cGUmJmEuY29udGFpbnModGhpcy5sb2NrLnBhcmVudE5vZGUpKSYmISh0LmlzVGV4dCYmaS5ub2RlJiZpLm5vZGUuaXNUZXh0JiZpLm5vZGVET00ubm9kZVZhbHVlPT10LnRleHQmJmkuZGlydHkhPVgmJnZ0KGUsaS5vdXRlckRlY28pKTtpZighYyYmaS51cGRhdGUodCxlLG4scikpcmV0dXJuIGkuZG9tIT1hJiYodGhpcy5jaGFuZ2VkPSEwKSx0aGlzLmluZGV4KyssITB9cmV0dXJuITF9LHl0LnByb3RvdHlwZS5hZGROb2RlPWZ1bmN0aW9uKHQsZSxuLHIsbyl7dGhpcy50b3AuY2hpbGRyZW4uc3BsaWNlKHRoaXMuaW5kZXgrKywwLHJ0LmNyZWF0ZSh0aGlzLnRvcCx0LGUsbixyLG8pKSx0aGlzLmNoYW5nZWQ9ITB9LHl0LnByb3RvdHlwZS5wbGFjZVdpZGdldD1mdW5jdGlvbih0LGUsbil7aWYodGhpcy5pbmRleDx0aGlzLnRvcC5jaGlsZHJlbi5sZW5ndGgmJnRoaXMudG9wLmNoaWxkcmVuW3RoaXMuaW5kZXhdLm1hdGNoZXNXaWRnZXQodCkpdGhpcy5pbmRleCsrO2Vsc2V7dmFyIHI9bmV3IHR0KHRoaXMudG9wLHQsZSxuKTt0aGlzLnRvcC5jaGlsZHJlbi5zcGxpY2UodGhpcy5pbmRleCsrLDAsciksdGhpcy5jaGFuZ2VkPSEwfX0seXQucHJvdG90eXBlLmFkZFRleHRibG9ja0hhY2tzPWZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy50b3AuY2hpbGRyZW5bdGhpcy5pbmRleC0xXTt3aGlsZSh0IGluc3RhbmNlb2YgbnQpdD10LmNoaWxkcmVuW3QuY2hpbGRyZW4ubGVuZ3RoLTFdO2lmKCF0fHwhKHQgaW5zdGFuY2VvZiBpdCl8fC9cbiQvLnRlc3QodC5ub2RlLnRleHQpKWlmKHRoaXMuaW5kZXg8dGhpcy50b3AuY2hpbGRyZW4ubGVuZ3RoJiZ0aGlzLnRvcC5jaGlsZHJlblt0aGlzLmluZGV4XS5tYXRjaGVzSGFjaygpKXRoaXMuaW5kZXgrKztlbHNle3ZhciBlPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImJyIik7dGhpcy50b3AuY2hpbGRyZW4uc3BsaWNlKHRoaXMuaW5kZXgrKywwLG5ldyBzdCh0aGlzLnRvcCxaLGUsbnVsbCkpLHRoaXMuY2hhbmdlZD0hMH19O3ZhciBMdD1zLnNhZmFyaXx8cy5jaHJvbWUmJnMuY2hyb21lX3ZlcnNpb248NjM7ZnVuY3Rpb24gSnQodCxlKXt2YXIgbj10LmRvY1ZpZXcuZG9tRnJvbVBvcyhlKSxyPW4ubm9kZSxvPW4ub2Zmc2V0LGk9bzxyLmNoaWxkTm9kZXMubGVuZ3RoP3IuY2hpbGROb2Rlc1tvXTpudWxsLHM9bz9yLmNoaWxkTm9kZXNbby0xXTpudWxsO2lmKCghaXx8ImZhbHNlIj09aS5jb250ZW50RWRpdGFibGUpJiYoIXN8fCJmYWxzZSI9PXMuY29udGVudEVkaXRhYmxlKSl7aWYoaSlyZXR1cm4gaS5jb250ZW50RWRpdGFibGU9InRydWUiLGk7aWYocylyZXR1cm4gcy5jb250ZW50RWRpdGFibGU9InRydWUiLHN9fWZ1bmN0aW9uIHF0KHQpe3ZhciBlPXQuZG9tLm93bmVyRG9jdW1lbnQ7ZS5yZW1vdmVFdmVudExpc3RlbmVyKCJzZWxlY3Rpb25jaGFuZ2UiLHQuaGlkZVNlbGVjdGlvbkd1YXJkKTt2YXIgbj10LnJvb3QuZ2V0U2VsZWN0aW9uKCkscj1uLmFuY2hvck5vZGUsbz1uLmFuY2hvck9mZnNldDtlLmFkZEV2ZW50TGlzdGVuZXIoInNlbGVjdGlvbmNoYW5nZSIsdC5oaWRlU2VsZWN0aW9uR3VhcmQ9ZnVuY3Rpb24oKXtuLmFuY2hvck5vZGU9PXImJm4uYW5jaG9yT2Zmc2V0PT1vfHwoZS5yZW1vdmVFdmVudExpc3RlbmVyKCJzZWxlY3Rpb25jaGFuZ2UiLHQuaGlkZVNlbGVjdGlvbkd1YXJkKSx0LmRvbS5jbGFzc0xpc3QucmVtb3ZlKCJQcm9zZU1pcnJvci1oaWRlc2VsZWN0aW9uIikpfSl9ZnVuY3Rpb24gV3QodCl7dmFyIGU9dC5yb290LmdldFNlbGVjdGlvbigpLG49ZG9jdW1lbnQuY3JlYXRlUmFuZ2UoKSxyPXQuY3Vyc29yV3JhcHBlci5kb20sbz0iSU1HIj09ci5ub2RlTmFtZTtvP24uc2V0RW5kKHIucGFyZW50Tm9kZSxoKHIpKzEpOm4uc2V0RW5kKHIsMCksbi5jb2xsYXBzZSghMSksZS5yZW1vdmVBbGxSYW5nZXMoKSxlLmFkZFJhbmdlKG4pLCFvJiYhdC5zdGF0ZS5zZWxlY3Rpb24udmlzaWJsZSYmcy5pZSYmcy5pZV92ZXJzaW9uPD0xMSYmKHIuZGlzYWJsZWQ9ITAsci5kaXNhYmxlZD0hMSl9ZnVuY3Rpb24gSHQodCxlKXtpZihlIGluc3RhbmNlb2Ygci5Ob2RlU2VsZWN0aW9uKXt2YXIgbj10LmRvY1ZpZXcuZGVzY0F0KGUuZnJvbSk7biE9dC5sYXN0U2VsZWN0ZWRWaWV3RGVzYyYmKEt0KHQpLG4mJm4uc2VsZWN0Tm9kZSgpLHQubGFzdFNlbGVjdGVkVmlld0Rlc2M9bil9ZWxzZSBLdCh0KX1mdW5jdGlvbiBLdCh0KXt0Lmxhc3RTZWxlY3RlZFZpZXdEZXNjJiYodC5sYXN0U2VsZWN0ZWRWaWV3RGVzYy5wYXJlbnQmJnQubGFzdFNlbGVjdGVkVmlld0Rlc2MuZGVzZWxlY3ROb2RlKCksdC5sYXN0U2VsZWN0ZWRWaWV3RGVzYz1udWxsKX1mdW5jdGlvbiBVdCh0LGUsbixvKXtyZXR1cm4gdC5zb21lUHJvcCgiY3JlYXRlU2VsZWN0aW9uQmV0d2VlbiIsKGZ1bmN0aW9uKHIpe3JldHVybiByKHQsZSxuKX0pKXx8ci5UZXh0U2VsZWN0aW9uLmJldHdlZW4oZSxuLG8pfWZ1bmN0aW9uIEd0KHQpe3JldHVybighdC5lZGl0YWJsZXx8dC5yb290LmFjdGl2ZUVsZW1lbnQ9PXQuZG9tKSYmWHQodCl9ZnVuY3Rpb24gWHQodCl7dmFyIGU9dC5yb290LmdldFNlbGVjdGlvbigpO2lmKCFlLmFuY2hvck5vZGUpcmV0dXJuITE7dHJ5e3JldHVybiB0LmRvbS5jb250YWlucygzPT1lLmFuY2hvck5vZGUubm9kZVR5cGU/ZS5hbmNob3JOb2RlLnBhcmVudE5vZGU6ZS5hbmNob3JOb2RlKSYmKHQuZWRpdGFibGV8fHQuZG9tLmNvbnRhaW5zKDM9PWUuZm9jdXNOb2RlLm5vZGVUeXBlP2UuZm9jdXNOb2RlLnBhcmVudE5vZGU6ZS5mb2N1c05vZGUpKX1jYXRjaChuKXtyZXR1cm4hMX19ZnVuY3Rpb24gWXQodCl7dmFyIGU9dC5kb2NWaWV3LmRvbUZyb21Qb3ModC5zdGF0ZS5zZWxlY3Rpb24uYW5jaG9yKSxuPXQucm9vdC5nZXRTZWxlY3Rpb24oKTtyZXR1cm4gdihlLm5vZGUsZS5vZmZzZXQsbi5hbmNob3JOb2RlLG4uYW5jaG9yT2Zmc2V0KX1mdW5jdGlvbiBRdCh0LGUsbil7dmFyIHI9dC5kb2NWaWV3LnBhcnNlUmFuZ2UoZSxuKSxpPXIubm9kZSxhPXIuZnJvbU9mZnNldCxjPXIudG9PZmZzZXQsbD1yLmZyb20scD1yLnRvLHU9dC5yb290LmdldFNlbGVjdGlvbigpLGg9bnVsbCxmPXUuYW5jaG9yTm9kZTtpZihmJiZ0LmRvbS5jb250YWlucygxPT1mLm5vZGVUeXBlP2Y6Zi5wYXJlbnROb2RlKSYmKGg9W3tub2RlOmYsb2Zmc2V0OnUuYW5jaG9yT2Zmc2V0fV0seCh1KXx8aC5wdXNoKHtub2RlOnUuZm9jdXNOb2RlLG9mZnNldDp1LmZvY3VzT2Zmc2V0fSkpLHMuY2hyb21lJiY4PT09dC5sYXN0S2V5Q29kZSlmb3IodmFyIGQ9YztkPmE7ZC0tKXt2YXIgdj1pLmNoaWxkTm9kZXNbZC0xXSxtPXYucG1WaWV3RGVzYztpZigiQlIiPT12Lm5vZGVUeXBlJiYhbSl7Yz1kO2JyZWFrfWlmKCFtfHxtLnNpemUpYnJlYWt9dmFyIHk9dC5zdGF0ZS5kb2MsZz10LnNvbWVQcm9wKCJkb21QYXJzZXIiKXx8by5ET01QYXJzZXIuZnJvbVNjaGVtYSh0LnN0YXRlLnNjaGVtYSksdz15LnJlc29sdmUobCksYj1udWxsLGs9Zy5wYXJzZShpLHt0b3BOb2RlOncucGFyZW50LHRvcE1hdGNoOncucGFyZW50LmNvbnRlbnRNYXRjaEF0KHcuaW5kZXgoKSksdG9wT3BlbjohMCxmcm9tOmEsdG86YyxwcmVzZXJ2ZVdoaXRlc3BhY2U6IXcucGFyZW50LnR5cGUuc3BlYy5jb2RlfHwiZnVsbCIsZWRpdGFibGVDb250ZW50OiEwLGZpbmRQb3NpdGlvbnM6aCxydWxlRnJvbU5vZGU6WnQoZyx3KSxjb250ZXh0Ond9KTtpZihoJiZudWxsIT1oWzBdLnBvcyl7dmFyIFM9aFswXS5wb3MsQz1oWzFdJiZoWzFdLnBvcztudWxsPT1DJiYoQz1TKSxiPXthbmNob3I6UytsLGhlYWQ6QytsfX1yZXR1cm57ZG9jOmssc2VsOmIsZnJvbTpsLHRvOnB9fWZ1bmN0aW9uIFp0KHQsZSl7cmV0dXJuIGZ1bmN0aW9uKG4pe3ZhciByPW4ucG1WaWV3RGVzYztpZihyKXJldHVybiByLnBhcnNlUnVsZSgpO2lmKCJCUiI9PW4ubm9kZU5hbWUmJm4ucGFyZW50Tm9kZSl7aWYocy5zYWZhcmkmJi9eKHVsfG9sKSQvaS50ZXN0KG4ucGFyZW50Tm9kZS5ub2RlTmFtZSkpcmV0dXJuIHQubWF0Y2hUYWcoZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgibGkiKSxlKTtpZihuLnBhcmVudE5vZGUubGFzdENoaWxkPT1ufHxzLnNhZmFyaSYmL14odHJ8dGFibGUpJC9pLnRlc3Qobi5wYXJlbnROb2RlLm5vZGVOYW1lKSlyZXR1cm57aWdub3JlOiEwfX1lbHNlIGlmKCJJTUciPT1uLm5vZGVOYW1lJiZuLmdldEF0dHJpYnV0ZSgibWFyay1wbGFjZWhvbGRlciIpKXJldHVybntpZ25vcmU6ITB9fX1mdW5jdGlvbiB0ZSh0LGUsbixvKXtpZihlPDApe3ZhciBpPXQubGFzdFNlbGVjdGlvblRpbWU+RGF0ZS5ub3coKS01MD90Lmxhc3RTZWxlY3Rpb25PcmlnaW46bnVsbCxhPSR0KHQsaSk7aWYoIXQuc3RhdGUuc2VsZWN0aW9uLmVxKGEpKXt2YXIgYz10LnN0YXRlLnRyLnNldFNlbGVjdGlvbihhKTsicG9pbnRlciI9PWk/Yy5zZXRNZXRhKCJwb2ludGVyIiwhMCk6ImtleSI9PWkmJmMuc2Nyb2xsSW50b1ZpZXcoKSx0LmRpc3BhdGNoKGMpfX1lbHNle3ZhciBsPXQuc3RhdGUuZG9jLnJlc29sdmUoZSkscD1sLnNoYXJlZERlcHRoKG4pO2U9bC5iZWZvcmUocCsxKSxuPXQuc3RhdGUuZG9jLnJlc29sdmUobikuYWZ0ZXIocCsxKTt2YXIgdSxoLGY9dC5zdGF0ZS5zZWxlY3Rpb24sZD1RdCh0LGUsbiksdj10LnN0YXRlLmRvYyxtPXYuc2xpY2UoZC5mcm9tLGQudG8pOzg9PT10Lmxhc3RLZXlDb2RlJiZEYXRlLm5vdygpLTEwMDx0Lmxhc3RLZXlDb2RlVGltZT8odT10LnN0YXRlLnNlbGVjdGlvbi50byxoPSJlbmQiKToodT10LnN0YXRlLnNlbGVjdGlvbi5mcm9tLGg9InN0YXJ0IiksdC5sYXN0S2V5Q29kZT1udWxsO3ZhciB5PWllKG0uY29udGVudCxkLmRvYy5jb250ZW50LGQuZnJvbSx1LGgpO2lmKCF5KXtpZighKG8mJmYgaW5zdGFuY2VvZiByLlRleHRTZWxlY3Rpb24mJiFmLmVtcHR5JiZmLiRoZWFkLnNhbWVQYXJlbnQoZi4kYW5jaG9yKSl8fHQuY29tcG9zaW5nfHxkLnNlbCYmZC5zZWwuYW5jaG9yIT1kLnNlbC5oZWFkKXtpZihkLnNlbCl7dmFyIGc9ZWUodCx0LnN0YXRlLmRvYyxkLnNlbCk7ZyYmIWcuZXEodC5zdGF0ZS5zZWxlY3Rpb24pJiZ0LmRpc3BhdGNoKHQuc3RhdGUudHIuc2V0U2VsZWN0aW9uKGcpKX1yZXR1cm59eT17c3RhcnQ6Zi5mcm9tLGVuZEE6Zi50byxlbmRCOmYudG99fXQuZG9tQ2hhbmdlQ291bnQrKyx0LnN0YXRlLnNlbGVjdGlvbi5mcm9tPHQuc3RhdGUuc2VsZWN0aW9uLnRvJiZ5LnN0YXJ0PT15LmVuZEImJnQuc3RhdGUuc2VsZWN0aW9uIGluc3RhbmNlb2Ygci5UZXh0U2VsZWN0aW9uJiYoeS5zdGFydD50LnN0YXRlLnNlbGVjdGlvbi5mcm9tJiZ5LnN0YXJ0PD10LnN0YXRlLnNlbGVjdGlvbi5mcm9tKzI/eS5zdGFydD10LnN0YXRlLnNlbGVjdGlvbi5mcm9tOnkuZW5kQTx0LnN0YXRlLnNlbGVjdGlvbi50byYmeS5lbmRBPj10LnN0YXRlLnNlbGVjdGlvbi50by0yJiYoeS5lbmRCKz10LnN0YXRlLnNlbGVjdGlvbi50by15LmVuZEEseS5lbmRBPXQuc3RhdGUuc2VsZWN0aW9uLnRvKSkscy5pZSYmcy5pZV92ZXJzaW9uPD0xMSYmeS5lbmRCPT15LnN0YXJ0KzEmJnkuZW5kQT09eS5zdGFydCYmeS5zdGFydD5kLmZyb20mJiIgwqAiPT1kLmRvYy50ZXh0QmV0d2Vlbih5LnN0YXJ0LWQuZnJvbS0xLHkuc3RhcnQtZC5mcm9tKzEpJiYoeS5zdGFydC0tLHkuZW5kQS0tLHkuZW5kQi0tKTt2YXIgdyx4PWQuZG9jLnJlc29sdmVOb0NhY2hlKHkuc3RhcnQtZC5mcm9tKSxrPWQuZG9jLnJlc29sdmVOb0NhY2hlKHkuZW5kQi1kLmZyb20pO2lmKCEoIXguc2FtZVBhcmVudChrKSYmeC5wb3M8ZC5kb2MuY29udGVudC5zaXplJiYodz1yLlNlbGVjdGlvbi5maW5kRnJvbShkLmRvYy5yZXNvbHZlKHgucG9zKzEpLDEsITApKSYmdy5oZWFkPT1rLnBvcyYmdC5zb21lUHJvcCgiaGFuZGxlS2V5RG93biIsKGZ1bmN0aW9uKGUpe3JldHVybiBlKHQsYigxMywiRW50ZXIiKSl9KSkpKWlmKHQuc3RhdGUuc2VsZWN0aW9uLmFuY2hvcj55LnN0YXJ0JiZyZSh2LHkuc3RhcnQseS5lbmRBLHgsaykmJnQuc29tZVByb3AoImhhbmRsZUtleURvd24iLChmdW5jdGlvbihlKXtyZXR1cm4gZSh0LGIoOCwiQmFja3NwYWNlIikpfSkpKXMuYW5kcm9pZCYmcy5jaHJvbWUmJnQuZG9tT2JzZXJ2ZXIuc3VwcHJlc3NTZWxlY3Rpb25VcGRhdGVzKCk7ZWxzZXt2YXIgUyxDLE8sTSxUPXkuc3RhcnQsTj15LmVuZEE7aWYoeC5zYW1lUGFyZW50KGspJiZ4LnBhcmVudC5pbmxpbmVDb250ZW50KWlmKHgucG9zPT1rLnBvcylzLmllJiZzLmllX3ZlcnNpb248PTExJiYwPT14LnBhcmVudE9mZnNldCYmKHQuZG9tT2JzZXJ2ZXIuc3VwcHJlc3NTZWxlY3Rpb25VcGRhdGVzKCksc2V0VGltZW91dCgoZnVuY3Rpb24oKXtyZXR1cm4gVnQodCl9KSwyMCkpLFM9dC5zdGF0ZS50ci5kZWxldGUoVCxOKSxDPXYucmVzb2x2ZSh5LnN0YXJ0KS5tYXJrc0Fjcm9zcyh2LnJlc29sdmUoeS5lbmRBKSk7ZWxzZSBpZih5LmVuZEE9PXkuZW5kQiYmKE09di5yZXNvbHZlKHkuc3RhcnQpKSYmKE89bmUoeC5wYXJlbnQuY29udGVudC5jdXQoeC5wYXJlbnRPZmZzZXQsay5wYXJlbnRPZmZzZXQpLE0ucGFyZW50LmNvbnRlbnQuY3V0KE0ucGFyZW50T2Zmc2V0LHkuZW5kQS1NLnN0YXJ0KCkpKSkpUz10LnN0YXRlLnRyLCJhZGQiPT1PLnR5cGU/Uy5hZGRNYXJrKFQsTixPLm1hcmspOlMucmVtb3ZlTWFyayhULE4sTy5tYXJrKTtlbHNlIGlmKHgucGFyZW50LmNoaWxkKHguaW5kZXgoKSkuaXNUZXh0JiZ4LmluZGV4KCk9PWsuaW5kZXgoKS0oay50ZXh0T2Zmc2V0PzA6MSkpe3ZhciBFPXgucGFyZW50LnRleHRCZXR3ZWVuKHgucGFyZW50T2Zmc2V0LGsucGFyZW50T2Zmc2V0KTtpZih0LnNvbWVQcm9wKCJoYW5kbGVUZXh0SW5wdXQiLChmdW5jdGlvbihlKXtyZXR1cm4gZSh0LFQsTixFKX0pKSlyZXR1cm47Uz10LnN0YXRlLnRyLmluc2VydFRleHQoRSxULE4pfWlmKFN8fChTPXQuc3RhdGUudHIucmVwbGFjZShULE4sZC5kb2Muc2xpY2UoeS5zdGFydC1kLmZyb20seS5lbmRCLWQuZnJvbSkpKSxkLnNlbCl7dmFyIEE9ZWUodCxTLmRvYyxkLnNlbCk7QSYmUy5zZXRTZWxlY3Rpb24oQSl9QyYmUy5lbnN1cmVNYXJrcyhDKSx0LmRpc3BhdGNoKFMuc2Nyb2xsSW50b1ZpZXcoKSl9fX1mdW5jdGlvbiBlZSh0LGUsbil7cmV0dXJuIE1hdGgubWF4KG4uYW5jaG9yLG4uaGVhZCk+ZS5jb250ZW50LnNpemU/bnVsbDpVdCh0LGUucmVzb2x2ZShuLmFuY2hvciksZS5yZXNvbHZlKG4uaGVhZCkpfWZ1bmN0aW9uIG5lKHQsZSl7Zm9yKHZhciBuLHIsaSxzPXQuZmlyc3RDaGlsZC5tYXJrcyxhPWUuZmlyc3RDaGlsZC5tYXJrcyxjPXMsbD1hLHA9MDtwPGEubGVuZ3RoO3ArKyljPWFbcF0ucmVtb3ZlRnJvbVNldChjKTtmb3IodmFyIHU9MDt1PHMubGVuZ3RoO3UrKylsPXNbdV0ucmVtb3ZlRnJvbVNldChsKTtpZigxPT1jLmxlbmd0aCYmMD09bC5sZW5ndGgpcj1jWzBdLG49ImFkZCIsaT1mdW5jdGlvbih0KXtyZXR1cm4gdC5tYXJrKHIuYWRkVG9TZXQodC5tYXJrcykpfTtlbHNle2lmKDAhPWMubGVuZ3RofHwxIT1sLmxlbmd0aClyZXR1cm4gbnVsbDtyPWxbMF0sbj0icmVtb3ZlIixpPWZ1bmN0aW9uKHQpe3JldHVybiB0Lm1hcmsoci5yZW1vdmVGcm9tU2V0KHQubWFya3MpKX19Zm9yKHZhciBoPVtdLGY9MDtmPGUuY2hpbGRDb3VudDtmKyspaC5wdXNoKGkoZS5jaGlsZChmKSkpO2lmKG8uRnJhZ21lbnQuZnJvbShoKS5lcSh0KSlyZXR1cm57bWFyazpyLHR5cGU6bn19ZnVuY3Rpb24gcmUodCxlLG4scixvKXtpZighci5wYXJlbnQuaXNUZXh0YmxvY2t8fG4tZTw9by5wb3Mtci5wb3N8fG9lKHIsITAsITEpPG8ucG9zKXJldHVybiExO3ZhciBpPXQucmVzb2x2ZShlKTtpZihpLnBhcmVudE9mZnNldDxpLnBhcmVudC5jb250ZW50LnNpemV8fCFpLnBhcmVudC5pc1RleHRibG9jaylyZXR1cm4hMTt2YXIgcz10LnJlc29sdmUob2UoaSwhMCwhMCkpO3JldHVybiEoIXMucGFyZW50LmlzVGV4dGJsb2NrfHxzLnBvcz5ufHxvZShzLCEwLCExKTxuKSYmci5wYXJlbnQuY29udGVudC5jdXQoci5wYXJlbnRPZmZzZXQpLmVxKHMucGFyZW50LmNvbnRlbnQpfWZ1bmN0aW9uIG9lKHQsZSxuKXt2YXIgcj10LmRlcHRoLG89ZT90LmVuZCgpOnQucG9zO3doaWxlKHI+MCYmKGV8fHQuaW5kZXhBZnRlcihyKT09dC5ub2RlKHIpLmNoaWxkQ291bnQpKXItLSxvKyssZT0hMTtpZihuKXt2YXIgaT10Lm5vZGUocikubWF5YmVDaGlsZCh0LmluZGV4QWZ0ZXIocikpO3doaWxlKGkmJiFpLmlzTGVhZilpPWkuZmlyc3RDaGlsZCxvKyt9cmV0dXJuIG99ZnVuY3Rpb24gaWUodCxlLG4scixvKXt2YXIgaT10LmZpbmREaWZmU3RhcnQoZSxuKTtpZihudWxsPT1pKXJldHVybiBudWxsO3ZhciBzPXQuZmluZERpZmZFbmQoZSxuK3Quc2l6ZSxuK2Uuc2l6ZSksYT1zLmEsYz1zLmI7aWYoImVuZCI9PW8pe3ZhciBsPU1hdGgubWF4KDAsaS1NYXRoLm1pbihhLGMpKTtyLT1hK2wtaX1pZihhPGkmJnQuc2l6ZTxlLnNpemUpe3ZhciBwPXI8PWkmJnI+PWE/aS1yOjA7aS09cCxjPWkrKGMtYSksYT1pfWVsc2UgaWYoYzxpKXt2YXIgdT1yPD1pJiZyPj1jP2ktcjowO2ktPXUsYT1pKyhhLWMpLGM9aX1yZXR1cm57c3RhcnQ6aSxlbmRBOmEsZW5kQjpjfX1mdW5jdGlvbiBzZSh0LGUpe3ZhciBuPVtdLHI9ZS5jb250ZW50LGk9ZS5vcGVuU3RhcnQscz1lLm9wZW5FbmQ7d2hpbGUoaT4xJiZzPjEmJjE9PXIuY2hpbGRDb3VudCYmMT09ci5maXJzdENoaWxkLmNoaWxkQ291bnQpe2ktLSxzLS07dmFyIGE9ci5maXJzdENoaWxkO24ucHVzaChhLnR5cGUubmFtZSxhLnR5cGUuaGFzUmVxdWlyZWRBdHRycygpP2EuYXR0cnM6bnVsbCkscj1hLmNvbnRlbnR9dmFyIGM9dC5zb21lUHJvcCgiY2xpcGJvYXJkU2VyaWFsaXplciIpfHxvLkRPTVNlcmlhbGl6ZXIuZnJvbVNjaGVtYSh0LnN0YXRlLnNjaGVtYSksbD1tZSgpLHA9bC5jcmVhdGVFbGVtZW50KCJkaXYiKTtwLmFwcGVuZENoaWxkKGMuc2VyaWFsaXplRnJhZ21lbnQocix7ZG9jdW1lbnQ6bH0pKTt2YXIgdSxoPXAuZmlyc3RDaGlsZDt3aGlsZShoJiYxPT1oLm5vZGVUeXBlJiYodT1kZVtoLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCldKSl7Zm9yKHZhciBmPXUubGVuZ3RoLTE7Zj49MDtmLS0pe3ZhciBkPWwuY3JlYXRlRWxlbWVudCh1W2ZdKTt3aGlsZShwLmZpcnN0Q2hpbGQpZC5hcHBlbmRDaGlsZChwLmZpcnN0Q2hpbGQpO3AuYXBwZW5kQ2hpbGQoZCl9aD1wLmZpcnN0Q2hpbGR9aCYmMT09aC5ub2RlVHlwZSYmaC5zZXRBdHRyaWJ1dGUoImRhdGEtcG0tc2xpY2UiLGkrIiAiK3MrIiAiK0pTT04uc3RyaW5naWZ5KG4pKTt2YXIgdj10LnNvbWVQcm9wKCJjbGlwYm9hcmRUZXh0U2VyaWFsaXplciIsKGZ1bmN0aW9uKHQpe3JldHVybiB0KGUpfSkpfHxlLmNvbnRlbnQudGV4dEJldHdlZW4oMCxlLmNvbnRlbnQuc2l6ZSwiXG5cbiIpO3JldHVybntkb206cCx0ZXh0OnZ9fWZ1bmN0aW9uIGFlKHQsZSxuLHIsaSl7dmFyIHMsYSxjPWkucGFyZW50LnR5cGUuc3BlYy5jb2RlO2lmKCFuJiYhZSlyZXR1cm4gbnVsbDt2YXIgbD1lJiYocnx8Y3x8IW4pO2lmKGwpe2lmKHQuc29tZVByb3AoInRyYW5zZm9ybVBhc3RlZFRleHQiLChmdW5jdGlvbih0KXtlPXQoZSl9KSksYylyZXR1cm4gbmV3IG8uU2xpY2Uoby5GcmFnbWVudC5mcm9tKHQuc3RhdGUuc2NoZW1hLnRleHQoZSkpLDAsMCk7dmFyIHA9dC5zb21lUHJvcCgiY2xpcGJvYXJkVGV4dFBhcnNlciIsKGZ1bmN0aW9uKHQpe3JldHVybiB0KGUsaSl9KSk7cD9hPXA6KHM9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2IiksZS50cmltKCkuc3BsaXQoLyg/OlxyXG4/fFxuKSsvKS5mb3JFYWNoKChmdW5jdGlvbih0KXtzLmFwcGVuZENoaWxkKGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoInAiKSkudGV4dENvbnRlbnQ9dH0pKSl9ZWxzZSB0LnNvbWVQcm9wKCJ0cmFuc2Zvcm1QYXN0ZWRIVE1MIiwoZnVuY3Rpb24odCl7bj10KG4pfSkpLHM9eWUobik7dmFyIHU9cyYmcy5xdWVyeVNlbGVjdG9yKCJbZGF0YS1wbS1zbGljZV0iKSxoPXUmJi9eKFxkKykgKFxkKykgKC4qKS8uZXhlYyh1LmdldEF0dHJpYnV0ZSgiZGF0YS1wbS1zbGljZSIpKTtpZighYSl7dmFyIGY9dC5zb21lUHJvcCgiY2xpcGJvYXJkUGFyc2VyIil8fHQuc29tZVByb3AoImRvbVBhcnNlciIpfHxvLkRPTVBhcnNlci5mcm9tU2NoZW1hKHQuc3RhdGUuc2NoZW1hKTthPWYucGFyc2VTbGljZShzLHtwcmVzZXJ2ZVdoaXRlc3BhY2U6ISghbCYmIWgpLGNvbnRleHQ6aX0pfXJldHVybiBhPWg/Z2UoZmUoYSwraFsxXSwraFsyXSksaFszXSk6by5TbGljZS5tYXhPcGVuKGNlKGEuY29udGVudCxpKSwhMSksdC5zb21lUHJvcCgidHJhbnNmb3JtUGFzdGVkIiwoZnVuY3Rpb24odCl7YT10KGEpfSkpLGF9ZnVuY3Rpb24gY2UodCxlKXtpZih0LmNoaWxkQ291bnQ8MilyZXR1cm4gdDtmb3IodmFyIG49ZnVuY3Rpb24obil7dmFyIHI9ZS5ub2RlKG4pLGk9ci5jb250ZW50TWF0Y2hBdChlLmluZGV4KG4pKSxzPXZvaWQgMCxhPVtdO2lmKHQuZm9yRWFjaCgoZnVuY3Rpb24odCl7aWYoYSl7dmFyIGUsbj1pLmZpbmRXcmFwcGluZyh0LnR5cGUpO2lmKCFuKXJldHVybiBhPW51bGw7aWYoZT1hLmxlbmd0aCYmcy5sZW5ndGgmJnBlKG4scyx0LGFbYS5sZW5ndGgtMV0sMCkpYVthLmxlbmd0aC0xXT1lO2Vsc2V7YS5sZW5ndGgmJihhW2EubGVuZ3RoLTFdPXVlKGFbYS5sZW5ndGgtMV0scy5sZW5ndGgpKTt2YXIgcj1sZSh0LG4pO2EucHVzaChyKSxpPWkubWF0Y2hUeXBlKHIudHlwZSxyLmF0dHJzKSxzPW59fX0pKSxhKXJldHVybnt2Om8uRnJhZ21lbnQuZnJvbShhKX19LHI9ZS5kZXB0aDtyPj0wO3ItLSl7dmFyIGk9bihyKTtpZihpKXJldHVybiBpLnZ9cmV0dXJuIHR9ZnVuY3Rpb24gbGUodCxlLG4pe3ZvaWQgMD09PW4mJihuPTApO2Zvcih2YXIgcj1lLmxlbmd0aC0xO3I+PW47ci0tKXQ9ZVtyXS5jcmVhdGUobnVsbCxvLkZyYWdtZW50LmZyb20odCkpO3JldHVybiB0fWZ1bmN0aW9uIHBlKHQsZSxuLHIsaSl7aWYoaTx0Lmxlbmd0aCYmaTxlLmxlbmd0aCYmdFtpXT09ZVtpXSl7dmFyIHM9cGUodCxlLG4sci5sYXN0Q2hpbGQsaSsxKTtpZihzKXJldHVybiByLmNvcHkoci5jb250ZW50LnJlcGxhY2VDaGlsZChyLmNoaWxkQ291bnQtMSxzKSk7dmFyIGE9ci5jb250ZW50TWF0Y2hBdChyLmNoaWxkQ291bnQpO2lmKGEubWF0Y2hUeXBlKGk9PXQubGVuZ3RoLTE/bi50eXBlOnRbaSsxXSkpcmV0dXJuIHIuY29weShyLmNvbnRlbnQuYXBwZW5kKG8uRnJhZ21lbnQuZnJvbShsZShuLHQsaSsxKSkpKX19ZnVuY3Rpb24gdWUodCxlKXtpZigwPT1lKXJldHVybiB0O3ZhciBuPXQuY29udGVudC5yZXBsYWNlQ2hpbGQodC5jaGlsZENvdW50LTEsdWUodC5sYXN0Q2hpbGQsZS0xKSkscj10LmNvbnRlbnRNYXRjaEF0KHQuY2hpbGRDb3VudCkuZmlsbEJlZm9yZShvLkZyYWdtZW50LmVtcHR5LCEwKTtyZXR1cm4gdC5jb3B5KG4uYXBwZW5kKHIpKX1mdW5jdGlvbiBoZSh0LGUsbixyLGkscyl7dmFyIGE9ZTwwP3QuZmlyc3RDaGlsZDp0Lmxhc3RDaGlsZCxjPWEuY29udGVudDtyZXR1cm4gaTxyLTEmJihjPWhlKGMsZSxuLHIsaSsxLHMpKSxpPj1uJiYoYz1lPDA/YS5jb250ZW50TWF0Y2hBdCgwKS5maWxsQmVmb3JlKGMsdC5jaGlsZENvdW50PjF8fHM8PWkpLmFwcGVuZChjKTpjLmFwcGVuZChhLmNvbnRlbnRNYXRjaEF0KGEuY2hpbGRDb3VudCkuZmlsbEJlZm9yZShvLkZyYWdtZW50LmVtcHR5LCEwKSkpLHQucmVwbGFjZUNoaWxkKGU8MD8wOnQuY2hpbGRDb3VudC0xLGEuY29weShjKSl9ZnVuY3Rpb24gZmUodCxlLG4pe3JldHVybiBlPHQub3BlblN0YXJ0JiYodD1uZXcgby5TbGljZShoZSh0LmNvbnRlbnQsLTEsZSx0Lm9wZW5TdGFydCwwLHQub3BlbkVuZCksZSx0Lm9wZW5FbmQpKSxuPHQub3BlbkVuZCYmKHQ9bmV3IG8uU2xpY2UoaGUodC5jb250ZW50LDEsbix0Lm9wZW5FbmQsMCwwKSx0Lm9wZW5TdGFydCxuKSksdH12YXIgZGU9e3RoZWFkOlsidGFibGUiXSxjb2xncm91cDpbInRhYmxlIl0sY29sOlsidGFibGUiLCJjb2xncm91cCJdLHRyOlsidGFibGUiLCJ0Ym9keSJdLHRkOlsidGFibGUiLCJ0Ym9keSIsInRyIl0sdGg6WyJ0YWJsZSIsInRib2R5IiwidHIiXX0sdmU9bnVsbDtmdW5jdGlvbiBtZSgpe3JldHVybiB2ZXx8KHZlPWRvY3VtZW50LmltcGxlbWVudGF0aW9uLmNyZWF0ZUhUTUxEb2N1bWVudCgidGl0bGUiKSl9ZnVuY3Rpb24geWUodCl7dmFyIGU9Lyhccyo8bWV0YSBbXj5dKj4pKi8uZXhlYyh0KTtlJiYodD10LnNsaWNlKGVbMF0ubGVuZ3RoKSk7dmFyIG4scj1tZSgpLmNyZWF0ZUVsZW1lbnQoImRpdiIpLG89Lyg/OjxtZXRhIFtePl0qPikqPChbYS16XVtePlxzXSspL2kuZXhlYyh0KSxpPTA7KG49byYmZGVbb1sxXS50b0xvd2VyQ2FzZSgpXSkmJih0PW4ubWFwKChmdW5jdGlvbih0KXtyZXR1cm4iPCIrdCsiPiJ9KSkuam9pbigiIikrdCtuLm1hcCgoZnVuY3Rpb24odCl7cmV0dXJuIjwvIit0KyI+In0pKS5yZXZlcnNlKCkuam9pbigiIiksaT1uLmxlbmd0aCksci5pbm5lckhUTUw9dDtmb3IodmFyIHM9MDtzPGk7cysrKXI9ci5maXJzdENoaWxkO3JldHVybiByfWZ1bmN0aW9uIGdlKHQsZSl7aWYoIXQuc2l6ZSlyZXR1cm4gdDt2YXIgbixyPXQuY29udGVudC5maXJzdENoaWxkLnR5cGUuc2NoZW1hO3RyeXtuPUpTT04ucGFyc2UoZSl9Y2F0Y2gocCl7cmV0dXJuIHR9Zm9yKHZhciBpPXQuY29udGVudCxzPXQub3BlblN0YXJ0LGE9dC5vcGVuRW5kLGM9bi5sZW5ndGgtMjtjPj0wO2MtPTIpe3ZhciBsPXIubm9kZXNbbltjXV07aWYoIWx8fGwuaGFzUmVxdWlyZWRBdHRycygpKWJyZWFrO2k9by5GcmFnbWVudC5mcm9tKGwuY3JlYXRlKG5bYysxXSxpKSkscysrLGErK31yZXR1cm4gbmV3IG8uU2xpY2UoaSxzLGEpfXZhciB3ZT17Y2hpbGRMaXN0OiEwLGNoYXJhY3RlckRhdGE6ITAsYXR0cmlidXRlczohMCxzdWJ0cmVlOiEwLGNoYXJhY3RlckRhdGFPbGRWYWx1ZTohMH0seGU9cy5pZSYmcy5pZV92ZXJzaW9uPD0xMSxiZT1mdW5jdGlvbigpe3RoaXMuYW5jaG9yTm9kZT10aGlzLmFuY2hvck9mZnNldD10aGlzLmZvY3VzTm9kZT10aGlzLmZvY3VzT2Zmc2V0PW51bGx9O2JlLnByb3RvdHlwZS5zZXQ9ZnVuY3Rpb24odCl7dGhpcy5hbmNob3JOb2RlPXQuYW5jaG9yTm9kZSx0aGlzLmFuY2hvck9mZnNldD10LmFuY2hvck9mZnNldCx0aGlzLmZvY3VzTm9kZT10LmZvY3VzTm9kZSx0aGlzLmZvY3VzT2Zmc2V0PXQuZm9jdXNPZmZzZXR9LGJlLnByb3RvdHlwZS5lcT1mdW5jdGlvbih0KXtyZXR1cm4gdC5hbmNob3JOb2RlPT10aGlzLmFuY2hvck5vZGUmJnQuYW5jaG9yT2Zmc2V0PT10aGlzLmFuY2hvck9mZnNldCYmdC5mb2N1c05vZGU9PXRoaXMuZm9jdXNOb2RlJiZ0LmZvY3VzT2Zmc2V0PT10aGlzLmZvY3VzT2Zmc2V0fTt2YXIga2U9ZnVuY3Rpb24odCxlKXt2YXIgbj10aGlzO3RoaXMudmlldz10LHRoaXMuaGFuZGxlRE9NQ2hhbmdlPWUsdGhpcy5xdWV1ZT1bXSx0aGlzLmZsdXNoaW5nU29vbj0hMSx0aGlzLm9ic2VydmVyPXdpbmRvdy5NdXRhdGlvbk9ic2VydmVyJiZuZXcgd2luZG93Lk11dGF0aW9uT2JzZXJ2ZXIoKGZ1bmN0aW9uKHQpe2Zvcih2YXIgZT0wO2U8dC5sZW5ndGg7ZSsrKW4ucXVldWUucHVzaCh0W2VdKTtzLmllJiZzLmllX3ZlcnNpb248PTExJiZ0LnNvbWUoKGZ1bmN0aW9uKHQpe3JldHVybiJjaGlsZExpc3QiPT10LnR5cGUmJnQucmVtb3ZlZE5vZGVzLmxlbmd0aHx8ImNoYXJhY3RlckRhdGEiPT10LnR5cGUmJnQub2xkVmFsdWUubGVuZ3RoPnQudGFyZ2V0Lm5vZGVWYWx1ZS5sZW5ndGh9KSk/bi5mbHVzaFNvb24oKTpuLmZsdXNoKCl9KSksdGhpcy5jdXJyZW50U2VsZWN0aW9uPW5ldyBiZSx4ZSYmKHRoaXMub25DaGFyRGF0YT1mdW5jdGlvbih0KXtuLnF1ZXVlLnB1c2goe3RhcmdldDp0LnRhcmdldCx0eXBlOiJjaGFyYWN0ZXJEYXRhIixvbGRWYWx1ZTp0LnByZXZWYWx1ZX0pLG4uZmx1c2hTb29uKCl9KSx0aGlzLm9uU2VsZWN0aW9uQ2hhbmdlPXRoaXMub25TZWxlY3Rpb25DaGFuZ2UuYmluZCh0aGlzKSx0aGlzLnN1cHByZXNzaW5nU2VsZWN0aW9uVXBkYXRlcz0hMX07a2UucHJvdG90eXBlLmZsdXNoU29vbj1mdW5jdGlvbigpe3ZhciB0PXRoaXM7dGhpcy5mbHVzaGluZ1Nvb258fCh0aGlzLmZsdXNoaW5nU29vbj0hMCx3aW5kb3cuc2V0VGltZW91dCgoZnVuY3Rpb24oKXt0LmZsdXNoaW5nU29vbj0hMSx0LmZsdXNoKCl9KSwyMCkpfSxrZS5wcm90b3R5cGUuc3RhcnQ9ZnVuY3Rpb24oKXt0aGlzLm9ic2VydmVyJiZ0aGlzLm9ic2VydmVyLm9ic2VydmUodGhpcy52aWV3LmRvbSx3ZSkseGUmJnRoaXMudmlldy5kb20uYWRkRXZlbnRMaXN0ZW5lcigiRE9NQ2hhcmFjdGVyRGF0YU1vZGlmaWVkIix0aGlzLm9uQ2hhckRhdGEpLHRoaXMuY29ubmVjdFNlbGVjdGlvbigpfSxrZS5wcm90b3R5cGUuc3RvcD1mdW5jdGlvbigpe3ZhciB0PXRoaXM7aWYodGhpcy5vYnNlcnZlcil7dmFyIGU9dGhpcy5vYnNlcnZlci50YWtlUmVjb3JkcygpO2lmKGUubGVuZ3RoKXtmb3IodmFyIG49MDtuPGUubGVuZ3RoO24rKyl0LnF1ZXVlLnB1c2goZVtuXSk7d2luZG93LnNldFRpbWVvdXQoKGZ1bmN0aW9uKCl7cmV0dXJuIHQuZmx1c2goKX0pLDIwKX10aGlzLm9ic2VydmVyLmRpc2Nvbm5lY3QoKX14ZSYmdGhpcy52aWV3LmRvbS5yZW1vdmVFdmVudExpc3RlbmVyKCJET01DaGFyYWN0ZXJEYXRhTW9kaWZpZWQiLHRoaXMub25DaGFyRGF0YSksdGhpcy5kaXNjb25uZWN0U2VsZWN0aW9uKCl9LGtlLnByb3RvdHlwZS5jb25uZWN0U2VsZWN0aW9uPWZ1bmN0aW9uKCl7dGhpcy52aWV3LmRvbS5vd25lckRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoInNlbGVjdGlvbmNoYW5nZSIsdGhpcy5vblNlbGVjdGlvbkNoYW5nZSl9LGtlLnByb3RvdHlwZS5kaXNjb25uZWN0U2VsZWN0aW9uPWZ1bmN0aW9uKCl7dGhpcy52aWV3LmRvbS5vd25lckRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoInNlbGVjdGlvbmNoYW5nZSIsdGhpcy5vblNlbGVjdGlvbkNoYW5nZSl9LGtlLnByb3RvdHlwZS5zdXBwcmVzc1NlbGVjdGlvblVwZGF0ZXM9ZnVuY3Rpb24oKXt2YXIgdD10aGlzO3RoaXMuc3VwcHJlc3NpbmdTZWxlY3Rpb25VcGRhdGVzPSEwLHNldFRpbWVvdXQoKGZ1bmN0aW9uKCl7cmV0dXJuIHQuc3VwcHJlc3NpbmdTZWxlY3Rpb25VcGRhdGVzPSExfSksNTApfSxrZS5wcm90b3R5cGUub25TZWxlY3Rpb25DaGFuZ2U9ZnVuY3Rpb24oKXtpZihHdCh0aGlzLnZpZXcpKXtpZih0aGlzLnN1cHByZXNzaW5nU2VsZWN0aW9uVXBkYXRlcylyZXR1cm4gVnQodGhpcy52aWV3KTtpZihzLmllJiZzLmllX3ZlcnNpb248PTExJiYhdGhpcy52aWV3LnN0YXRlLnNlbGVjdGlvbi5lbXB0eSl7dmFyIHQ9dGhpcy52aWV3LnJvb3QuZ2V0U2VsZWN0aW9uKCk7aWYodC5mb2N1c05vZGUmJnYodC5mb2N1c05vZGUsdC5mb2N1c09mZnNldCx0LmFuY2hvck5vZGUsdC5hbmNob3JPZmZzZXQpKXJldHVybiB0aGlzLmZsdXNoU29vbigpfXRoaXMuZmx1c2goKX19LGtlLnByb3RvdHlwZS5zZXRDdXJTZWxlY3Rpb249ZnVuY3Rpb24oKXt0aGlzLmN1cnJlbnRTZWxlY3Rpb24uc2V0KHRoaXMudmlldy5yb290LmdldFNlbGVjdGlvbigpKX0sa2UucHJvdG90eXBlLmlnbm9yZVNlbGVjdGlvbkNoYW5nZT1mdW5jdGlvbih0KXtpZigwPT10LnJhbmdlQ291bnQpcmV0dXJuITA7dmFyIGU9dC5nZXRSYW5nZUF0KDApLmNvbW1vbkFuY2VzdG9yQ29udGFpbmVyLG49dGhpcy52aWV3LmRvY1ZpZXcubmVhcmVzdERlc2MoZSk7cmV0dXJuIG4mJm4uaWdub3JlTXV0YXRpb24oe3R5cGU6InNlbGVjdGlvbiIsdGFyZ2V0OjM9PWUubm9kZVR5cGU/ZS5wYXJlbnROb2RlOmV9KX0sa2UucHJvdG90eXBlLmZsdXNoPWZ1bmN0aW9uKCl7dmFyIHQ9dGhpcztpZih0aGlzLnZpZXcuZG9jVmlldyYmIXRoaXMuZmx1c2hpbmdTb29uKXt2YXIgZT10aGlzLm9ic2VydmVyP3RoaXMub2JzZXJ2ZXIudGFrZVJlY29yZHMoKTpbXTt0aGlzLnF1ZXVlLmxlbmd0aCYmKGU9dGhpcy5xdWV1ZS5jb25jYXQoZSksdGhpcy5xdWV1ZS5sZW5ndGg9MCk7dmFyIG49dGhpcy52aWV3LnJvb3QuZ2V0U2VsZWN0aW9uKCkscj0hdGhpcy5zdXBwcmVzc2luZ1NlbGVjdGlvblVwZGF0ZXMmJiF0aGlzLmN1cnJlbnRTZWxlY3Rpb24uZXEobikmJlh0KHRoaXMudmlldykmJiF0aGlzLmlnbm9yZVNlbGVjdGlvbkNoYW5nZShuKSxvPS0xLGk9LTEscz0hMTtpZih0aGlzLnZpZXcuZWRpdGFibGUpZm9yKHZhciBhPTA7YTxlLmxlbmd0aDthKyspe3ZhciBjPXQucmVnaXN0ZXJNdXRhdGlvbihlW2FdKTtjJiYobz1vPDA/Yy5mcm9tOk1hdGgubWluKGMuZnJvbSxvKSxpPWk8MD9jLnRvOk1hdGgubWF4KGMudG8saSksYy50eXBlT3ZlciYmIXQudmlldy5jb21wb3NpbmcmJihzPSEwKSl9KG8+LTF8fHIpJiYobz4tMSYmdGhpcy52aWV3LmRvY1ZpZXcubWFya0RpcnR5KG8saSksdGhpcy5oYW5kbGVET01DaGFuZ2UobyxpLHMpLHRoaXMudmlldy5kb2NWaWV3LmRpcnR5P3RoaXMudmlldy51cGRhdGVTdGF0ZSh0aGlzLnZpZXcuc3RhdGUpOnRoaXMuY3VycmVudFNlbGVjdGlvbi5lcShuKXx8VnQodGhpcy52aWV3KSl9fSxrZS5wcm90b3R5cGUucmVnaXN0ZXJNdXRhdGlvbj1mdW5jdGlvbih0KXt2YXIgZT10aGlzLnZpZXcuZG9jVmlldy5uZWFyZXN0RGVzYyh0LnRhcmdldCk7aWYoImF0dHJpYnV0ZXMiPT10LnR5cGUmJihlPT10aGlzLnZpZXcuZG9jVmlld3x8ImNvbnRlbnRlZGl0YWJsZSI9PXQuYXR0cmlidXRlTmFtZXx8InN0eWxlIj09dC5hdHRyaWJ1dGVOYW1lJiYhdC5vbGRWYWx1ZSYmIXQudGFyZ2V0LmdldEF0dHJpYnV0ZSgic3R5bGUiKSkpcmV0dXJuIG51bGw7aWYoIWV8fGUuaWdub3JlTXV0YXRpb24odCkpcmV0dXJuIG51bGw7aWYoImNoaWxkTGlzdCI9PXQudHlwZSl7dmFyIG49dC5wcmV2aW91c1NpYmxpbmcscj10Lm5leHRTaWJsaW5nO2lmKHMuaWUmJnMuaWVfdmVyc2lvbjw9MTEmJnQuYWRkZWROb2Rlcy5sZW5ndGgpZm9yKHZhciBvPTA7bzx0LmFkZGVkTm9kZXMubGVuZ3RoO28rKyl7dmFyIGk9dC5hZGRlZE5vZGVzW29dLGE9aS5wcmV2aW91c1NpYmxpbmcsYz1pLm5leHRTaWJsaW5nOyghYXx8QXJyYXkucHJvdG90eXBlLmluZGV4T2YuY2FsbCh0LmFkZGVkTm9kZXMsYSk8MCkmJihuPWEpLCghY3x8QXJyYXkucHJvdG90eXBlLmluZGV4T2YuY2FsbCh0LmFkZGVkTm9kZXMsYyk8MCkmJihyPWMpfXZhciBsPW4mJm4ucGFyZW50Tm9kZT09dC50YXJnZXQ/aChuKSsxOjAscD1lLmxvY2FsUG9zRnJvbURPTSh0LnRhcmdldCxsLC0xKSx1PXImJnIucGFyZW50Tm9kZT09dC50YXJnZXQ/aChyKTp0LnRhcmdldC5jaGlsZE5vZGVzLmxlbmd0aCxmPWUubG9jYWxQb3NGcm9tRE9NKHQudGFyZ2V0LHUsMSk7cmV0dXJue2Zyb206cCx0bzpmfX1yZXR1cm4iYXR0cmlidXRlcyI9PXQudHlwZT97ZnJvbTplLnBvc0F0U3RhcnQtZS5ib3JkZXIsdG86ZS5wb3NBdEVuZCtlLmJvcmRlcn06e2Zyb206ZS5wb3NBdFN0YXJ0LHRvOmUucG9zQXRFbmQsdHlwZU92ZXI6dC50YXJnZXQubm9kZVZhbHVlPT10Lm9sZFZhbHVlfX07dmFyIFNlPXt9LENlPXt9O2Z1bmN0aW9uIE9lKHQpe3Quc2hpZnRLZXk9ITEsdC5tb3VzZURvd249bnVsbCx0Lmxhc3RLZXlDb2RlPW51bGwsdC5sYXN0S2V5Q29kZVRpbWU9MCx0Lmxhc3RDbGljaz17dGltZTowLHg6MCx5OjAsdHlwZToiIn0sdC5sYXN0U2VsZWN0aW9uT3JpZ2luPW51bGwsdC5sYXN0U2VsZWN0aW9uVGltZT0wLHQuY29tcG9zaW5nPSExLHQuY29tcG9zaW5nVGltZW91dD1udWxsLHQuY29tcG9zaXRpb25Ob2Rlcz1bXSx0LmNvbXBvc2l0aW9uRW5kZWRBdD0tMmU4LHQuZG9tT2JzZXJ2ZXI9bmV3IGtlKHQsKGZ1bmN0aW9uKGUsbixyKXtyZXR1cm4gdGUodCxlLG4scil9KSksdC5kb21PYnNlcnZlci5zdGFydCgpLHQuZG9tQ2hhbmdlQ291bnQ9MCx0LmV2ZW50SGFuZGxlcnM9T2JqZWN0LmNyZWF0ZShudWxsKTt2YXIgZT1mdW5jdGlvbihlKXt2YXIgbj1TZVtlXTt0LmRvbS5hZGRFdmVudExpc3RlbmVyKGUsdC5ldmVudEhhbmRsZXJzW2VdPWZ1bmN0aW9uKGUpeyFBZSh0LGUpfHxFZSh0LGUpfHwhdC5lZGl0YWJsZSYmZS50eXBlIGluIENlfHxuKHQsZSl9KX07Zm9yKHZhciBuIGluIFNlKWUobik7cy5zYWZhcmkmJnQuZG9tLmFkZEV2ZW50TGlzdGVuZXIoImlucHV0IiwoZnVuY3Rpb24oKXtyZXR1cm4gbnVsbH0pKSxOZSh0KX1mdW5jdGlvbiBNZSh0LGUpe3QubGFzdFNlbGVjdGlvbk9yaWdpbj1lLHQubGFzdFNlbGVjdGlvblRpbWU9RGF0ZS5ub3coKX1mdW5jdGlvbiBUZSh0KXtmb3IodmFyIGUgaW4gdC5kb21PYnNlcnZlci5zdG9wKCksdC5ldmVudEhhbmRsZXJzKXQuZG9tLnJlbW92ZUV2ZW50TGlzdGVuZXIoZSx0LmV2ZW50SGFuZGxlcnNbZV0pO2NsZWFyVGltZW91dCh0LmNvbXBvc2luZ1RpbWVvdXQpfWZ1bmN0aW9uIE5lKHQpe3Quc29tZVByb3AoImhhbmRsZURPTUV2ZW50cyIsKGZ1bmN0aW9uKGUpe2Zvcih2YXIgbiBpbiBlKXQuZXZlbnRIYW5kbGVyc1tuXXx8dC5kb20uYWRkRXZlbnRMaXN0ZW5lcihuLHQuZXZlbnRIYW5kbGVyc1tuXT1mdW5jdGlvbihlKXtyZXR1cm4gRWUodCxlKX0pfSkpfWZ1bmN0aW9uIEVlKHQsZSl7cmV0dXJuIHQuc29tZVByb3AoImhhbmRsZURPTUV2ZW50cyIsKGZ1bmN0aW9uKG4pe3ZhciByPW5bZS50eXBlXTtyZXR1cm4hIXImJihyKHQsZSl8fGUuZGVmYXVsdFByZXZlbnRlZCl9KSl9ZnVuY3Rpb24gQWUodCxlKXtpZighZS5idWJibGVzKXJldHVybiEwO2lmKGUuZGVmYXVsdFByZXZlbnRlZClyZXR1cm4hMTtmb3IodmFyIG49ZS50YXJnZXQ7biE9dC5kb207bj1uLnBhcmVudE5vZGUpaWYoIW58fDExPT1uLm5vZGVUeXBlfHxuLnBtVmlld0Rlc2MmJm4ucG1WaWV3RGVzYy5zdG9wRXZlbnQoZSkpcmV0dXJuITE7cmV0dXJuITB9ZnVuY3Rpb24gUmUodCxlKXtFZSh0LGUpfHwhU2VbZS50eXBlXXx8IXQuZWRpdGFibGUmJmUudHlwZSBpbiBDZXx8U2VbZS50eXBlXSh0LGUpfWZ1bmN0aW9uIERlKHQpe3JldHVybntsZWZ0OnQuY2xpZW50WCx0b3A6dC5jbGllbnRZfX1mdW5jdGlvbiB6ZSh0LGUpe3ZhciBuPWUueC10LmNsaWVudFgscj1lLnktdC5jbGllbnRZO3JldHVybiBuKm4rcipyPDEwMH1mdW5jdGlvbiBQZSh0LGUsbixyLG8pe2lmKC0xPT1yKXJldHVybiExO2Zvcih2YXIgaT10LnN0YXRlLmRvYy5yZXNvbHZlKHIpLHM9ZnVuY3Rpb24ocil7aWYodC5zb21lUHJvcChlLChmdW5jdGlvbihlKXtyZXR1cm4gcj5pLmRlcHRoP2UodCxuLGkubm9kZUFmdGVyLGkuYmVmb3JlKHIpLG8sITApOmUodCxuLGkubm9kZShyKSxpLmJlZm9yZShyKSxvLCExKX0pKSlyZXR1cm57djohMH19LGE9aS5kZXB0aCsxO2E+MDthLS0pe3ZhciBjPXMoYSk7aWYoYylyZXR1cm4gYy52fXJldHVybiExfWZ1bmN0aW9uIEllKHQsZSxuKXt0LmZvY3VzZWR8fHQuZm9jdXMoKTt2YXIgcj10LnN0YXRlLnRyLnNldFNlbGVjdGlvbihlKTsicG9pbnRlciI9PW4mJnIuc2V0TWV0YSgicG9pbnRlciIsITApLHQuZGlzcGF0Y2gocil9ZnVuY3Rpb24gX2UodCxlKXtpZigtMT09ZSlyZXR1cm4hMTt2YXIgbj10LnN0YXRlLmRvYy5yZXNvbHZlKGUpLG89bi5ub2RlQWZ0ZXI7cmV0dXJuISEobyYmby5pc0F0b20mJnIuTm9kZVNlbGVjdGlvbi5pc1NlbGVjdGFibGUobykpJiYoSWUodCxuZXcgci5Ob2RlU2VsZWN0aW9uKG4pLCJwb2ludGVyIiksITApfWZ1bmN0aW9uIEZlKHQsZSl7aWYoLTE9PWUpcmV0dXJuITE7dmFyIG4sbyxpPXQuc3RhdGUuc2VsZWN0aW9uO2kgaW5zdGFuY2VvZiByLk5vZGVTZWxlY3Rpb24mJihuPWkubm9kZSk7Zm9yKHZhciBzPXQuc3RhdGUuZG9jLnJlc29sdmUoZSksYT1zLmRlcHRoKzE7YT4wO2EtLSl7dmFyIGM9YT5zLmRlcHRoP3Mubm9kZUFmdGVyOnMubm9kZShhKTtpZihyLk5vZGVTZWxlY3Rpb24uaXNTZWxlY3RhYmxlKGMpKXtvPW4mJmkuJGZyb20uZGVwdGg+MCYmYT49aS4kZnJvbS5kZXB0aCYmcy5iZWZvcmUoaS4kZnJvbS5kZXB0aCsxKT09aS4kZnJvbS5wb3M/cy5iZWZvcmUoaS4kZnJvbS5kZXB0aCk6cy5iZWZvcmUoYSk7YnJlYWt9fXJldHVybiBudWxsIT1vJiYoSWUodCxyLk5vZGVTZWxlY3Rpb24uY3JlYXRlKHQuc3RhdGUuZG9jLG8pLCJwb2ludGVyIiksITApfWZ1bmN0aW9uIEJlKHQsZSxuLHIsbyl7cmV0dXJuIFBlKHQsImhhbmRsZUNsaWNrT24iLGUsbixyKXx8dC5zb21lUHJvcCgiaGFuZGxlQ2xpY2siLChmdW5jdGlvbihuKXtyZXR1cm4gbih0LGUscil9KSl8fChvP0ZlKHQsbik6X2UodCxuKSl9ZnVuY3Rpb24gamUodCxlLG4scil7cmV0dXJuIFBlKHQsImhhbmRsZURvdWJsZUNsaWNrT24iLGUsbixyKXx8dC5zb21lUHJvcCgiaGFuZGxlRG91YmxlQ2xpY2siLChmdW5jdGlvbihuKXtyZXR1cm4gbih0LGUscil9KSl9ZnVuY3Rpb24gJGUodCxlLG4scil7cmV0dXJuIFBlKHQsImhhbmRsZVRyaXBsZUNsaWNrT24iLGUsbixyKXx8dC5zb21lUHJvcCgiaGFuZGxlVHJpcGxlQ2xpY2siLChmdW5jdGlvbihuKXtyZXR1cm4gbih0LGUscil9KSl8fFZlKHQsbil9ZnVuY3Rpb24gVmUodCxlKXt2YXIgbj10LnN0YXRlLmRvYztpZigtMT09ZSlyZXR1cm4hIW4uaW5saW5lQ29udGVudCYmKEllKHQsci5UZXh0U2VsZWN0aW9uLmNyZWF0ZShuLDAsbi5jb250ZW50LnNpemUpLCJwb2ludGVyIiksITApO2Zvcih2YXIgbz1uLnJlc29sdmUoZSksaT1vLmRlcHRoKzE7aT4wO2ktLSl7dmFyIHM9aT5vLmRlcHRoP28ubm9kZUFmdGVyOm8ubm9kZShpKSxhPW8uYmVmb3JlKGkpO2lmKHMuaW5saW5lQ29udGVudClJZSh0LHIuVGV4dFNlbGVjdGlvbi5jcmVhdGUobixhKzEsYSsxK3MuY29udGVudC5zaXplKSwicG9pbnRlciIpO2Vsc2V7aWYoIXIuTm9kZVNlbGVjdGlvbi5pc1NlbGVjdGFibGUocykpY29udGludWU7SWUodCxyLk5vZGVTZWxlY3Rpb24uY3JlYXRlKG4sYSksInBvaW50ZXIiKX1yZXR1cm4hMH19ZnVuY3Rpb24gTGUodCl7cmV0dXJuIFVlKHQpfUNlLmtleWRvd249ZnVuY3Rpb24odCxlKXt0LnNoaWZ0S2V5PTE2PT1lLmtleUNvZGV8fGUuc2hpZnRLZXksV2UodCxlKXx8KHQubGFzdEtleUNvZGU9ZS5rZXlDb2RlLHQubGFzdEtleUNvZGVUaW1lPURhdGUubm93KCksdC5zb21lUHJvcCgiaGFuZGxlS2V5RG93biIsKGZ1bmN0aW9uKG4pe3JldHVybiBuKHQsZSl9KSl8fGp0KHQsZSk/ZS5wcmV2ZW50RGVmYXVsdCgpOk1lKHQsImtleSIpKX0sQ2Uua2V5dXA9ZnVuY3Rpb24odCxlKXsxNj09ZS5rZXlDb2RlJiYodC5zaGlmdEtleT0hMSl9LENlLmtleXByZXNzPWZ1bmN0aW9uKHQsZSl7aWYoIShXZSh0LGUpfHwhZS5jaGFyQ29kZXx8ZS5jdHJsS2V5JiYhZS5hbHRLZXl8fHMubWFjJiZlLm1ldGFLZXkpKWlmKHQuc29tZVByb3AoImhhbmRsZUtleVByZXNzIiwoZnVuY3Rpb24obil7cmV0dXJuIG4odCxlKX0pKSllLnByZXZlbnREZWZhdWx0KCk7ZWxzZXt2YXIgbj10LnN0YXRlLnNlbGVjdGlvbjtpZighKG4gaW5zdGFuY2VvZiByLlRleHRTZWxlY3Rpb24pfHwhbi4kZnJvbS5zYW1lUGFyZW50KG4uJHRvKSl7dmFyIG89U3RyaW5nLmZyb21DaGFyQ29kZShlLmNoYXJDb2RlKTt0LnNvbWVQcm9wKCJoYW5kbGVUZXh0SW5wdXQiLChmdW5jdGlvbihlKXtyZXR1cm4gZSh0LG4uJGZyb20ucG9zLG4uJHRvLnBvcyxvKX0pKXx8dC5kaXNwYXRjaCh0LnN0YXRlLnRyLmluc2VydFRleHQobykuc2Nyb2xsSW50b1ZpZXcoKSksZS5wcmV2ZW50RGVmYXVsdCgpfX19O3ZhciBKZT1zLm1hYz8ibWV0YUtleSI6ImN0cmxLZXkiO1NlLm1vdXNlZG93bj1mdW5jdGlvbih0LGUpe3Quc2hpZnRLZXk9ZS5zaGlmdEtleTt2YXIgbj1MZSh0KSxyPURhdGUubm93KCksbz0ic2luZ2xlQ2xpY2siO3ItdC5sYXN0Q2xpY2sudGltZTw1MDAmJnplKGUsdC5sYXN0Q2xpY2spJiYhZVtKZV0mJigic2luZ2xlQ2xpY2siPT10Lmxhc3RDbGljay50eXBlP289ImRvdWJsZUNsaWNrIjoiZG91YmxlQ2xpY2siPT10Lmxhc3RDbGljay50eXBlJiYobz0idHJpcGxlQ2xpY2siKSksdC5sYXN0Q2xpY2s9e3RpbWU6cix4OmUuY2xpZW50WCx5OmUuY2xpZW50WSx0eXBlOm99O3ZhciBpPXQucG9zQXRDb29yZHMoRGUoZSkpO2kmJigic2luZ2xlQ2xpY2siPT1vP3QubW91c2VEb3duPW5ldyBxZSh0LGksZSxuKTooImRvdWJsZUNsaWNrIj09bz9qZTokZSkodCxpLnBvcyxpLmluc2lkZSxlKT9lLnByZXZlbnREZWZhdWx0KCk6TWUodCwicG9pbnRlciIpKX07dmFyIHFlPWZ1bmN0aW9uKHQsZSxuLG8pe3ZhciBpLGEsYz10aGlzO2lmKHRoaXMudmlldz10LHRoaXMuc3RhcnREb2M9dC5zdGF0ZS5kb2MsdGhpcy5wb3M9ZSx0aGlzLmV2ZW50PW4sdGhpcy5mbHVzaGVkPW8sdGhpcy5zZWxlY3ROb2RlPW5bSmVdLHRoaXMuYWxsb3dEZWZhdWx0PW4uc2hpZnRLZXksZS5pbnNpZGU+LTEpaT10LnN0YXRlLmRvYy5ub2RlQXQoZS5pbnNpZGUpLGE9ZS5pbnNpZGU7ZWxzZXt2YXIgbD10LnN0YXRlLmRvYy5yZXNvbHZlKGUucG9zKTtpPWwucGFyZW50LGE9bC5kZXB0aD9sLmJlZm9yZSgpOjB9dGhpcy5taWdodERyYWc9bnVsbDt2YXIgcD1vP251bGw6bi50YXJnZXQsdT1wP3QuZG9jVmlldy5uZWFyZXN0RGVzYyhwLCEwKTpudWxsO3RoaXMudGFyZ2V0PXU/dS5kb206bnVsbCwoaS50eXBlLnNwZWMuZHJhZ2dhYmxlJiYhMSE9PWkudHlwZS5zcGVjLnNlbGVjdGFibGV8fHQuc3RhdGUuc2VsZWN0aW9uIGluc3RhbmNlb2Ygci5Ob2RlU2VsZWN0aW9uJiZhPT10LnN0YXRlLnNlbGVjdGlvbi5mcm9tKSYmKHRoaXMubWlnaHREcmFnPXtub2RlOmkscG9zOmEsYWRkQXR0cjp0aGlzLnRhcmdldCYmIXRoaXMudGFyZ2V0LmRyYWdnYWJsZSxzZXRVbmVkaXRhYmxlOnRoaXMudGFyZ2V0JiZzLmdlY2tvJiYhdGhpcy50YXJnZXQuaGFzQXR0cmlidXRlKCJjb250ZW50RWRpdGFibGUiKX0pLHRoaXMudGFyZ2V0JiZ0aGlzLm1pZ2h0RHJhZyYmKHRoaXMubWlnaHREcmFnLmFkZEF0dHJ8fHRoaXMubWlnaHREcmFnLnNldFVuZWRpdGFibGUpJiYodGhpcy52aWV3LmRvbU9ic2VydmVyLnN0b3AoKSx0aGlzLm1pZ2h0RHJhZy5hZGRBdHRyJiYodGhpcy50YXJnZXQuZHJhZ2dhYmxlPSEwKSx0aGlzLm1pZ2h0RHJhZy5zZXRVbmVkaXRhYmxlJiZzZXRUaW1lb3V0KChmdW5jdGlvbigpe3JldHVybiBjLnRhcmdldC5zZXRBdHRyaWJ1dGUoImNvbnRlbnRFZGl0YWJsZSIsImZhbHNlIil9KSwyMCksdGhpcy52aWV3LmRvbU9ic2VydmVyLnN0YXJ0KCkpLHQucm9vdC5hZGRFdmVudExpc3RlbmVyKCJtb3VzZXVwIix0aGlzLnVwPXRoaXMudXAuYmluZCh0aGlzKSksdC5yb290LmFkZEV2ZW50TGlzdGVuZXIoIm1vdXNlbW92ZSIsdGhpcy5tb3ZlPXRoaXMubW92ZS5iaW5kKHRoaXMpKSxNZSh0LCJwb2ludGVyIil9O2Z1bmN0aW9uIFdlKHQsZSl7cmV0dXJuISF0LmNvbXBvc2luZ3x8ISEocy5zYWZhcmkmJk1hdGguYWJzKGUudGltZVN0YW1wLXQuY29tcG9zaXRpb25FbmRlZEF0KTw1MDApJiYodC5jb21wb3NpdGlvbkVuZGVkQXQ9LTJlOCwhMCl9cWUucHJvdG90eXBlLmRvbmU9ZnVuY3Rpb24oKXt0aGlzLnZpZXcucm9vdC5yZW1vdmVFdmVudExpc3RlbmVyKCJtb3VzZXVwIix0aGlzLnVwKSx0aGlzLnZpZXcucm9vdC5yZW1vdmVFdmVudExpc3RlbmVyKCJtb3VzZW1vdmUiLHRoaXMubW92ZSksdGhpcy5taWdodERyYWcmJnRoaXMudGFyZ2V0JiYodGhpcy52aWV3LmRvbU9ic2VydmVyLnN0b3AoKSx0aGlzLm1pZ2h0RHJhZy5hZGRBdHRyJiYodGhpcy50YXJnZXQuZHJhZ2dhYmxlPSExKSx0aGlzLm1pZ2h0RHJhZy5zZXRVbmVkaXRhYmxlJiZ0aGlzLnRhcmdldC5yZW1vdmVBdHRyaWJ1dGUoImNvbnRlbnRFZGl0YWJsZSIpLHRoaXMudmlldy5kb21PYnNlcnZlci5zdGFydCgpKSx0aGlzLnZpZXcubW91c2VEb3duPW51bGx9LHFlLnByb3RvdHlwZS51cD1mdW5jdGlvbih0KXtpZih0aGlzLmRvbmUoKSx0aGlzLnZpZXcuZG9tLmNvbnRhaW5zKDM9PXQudGFyZ2V0Lm5vZGVUeXBlP3QudGFyZ2V0LnBhcmVudE5vZGU6dC50YXJnZXQpKXt2YXIgZT10aGlzLnBvczt0aGlzLnZpZXcuc3RhdGUuZG9jIT10aGlzLnN0YXJ0RG9jJiYoZT10aGlzLnZpZXcucG9zQXRDb29yZHMoRGUodCkpKSx0aGlzLmFsbG93RGVmYXVsdHx8IWU/TWUodGhpcy52aWV3LCJwb2ludGVyIik6QmUodGhpcy52aWV3LGUucG9zLGUuaW5zaWRlLHQsdGhpcy5zZWxlY3ROb2RlKT90LnByZXZlbnREZWZhdWx0KCk6IXRoaXMuZmx1c2hlZCYmKCFzLmNocm9tZXx8dGhpcy52aWV3LnN0YXRlLnNlbGVjdGlvbiBpbnN0YW5jZW9mIHIuVGV4dFNlbGVjdGlvbnx8ZS5wb3MhPXRoaXMudmlldy5zdGF0ZS5zZWxlY3Rpb24uZnJvbSYmZS5wb3MhPXRoaXMudmlldy5zdGF0ZS5zZWxlY3Rpb24udG8pP01lKHRoaXMudmlldywicG9pbnRlciIpOihJZSh0aGlzLnZpZXcsci5TZWxlY3Rpb24ubmVhcih0aGlzLnZpZXcuc3RhdGUuZG9jLnJlc29sdmUoZS5wb3MpKSwicG9pbnRlciIpLHQucHJldmVudERlZmF1bHQoKSl9fSxxZS5wcm90b3R5cGUubW92ZT1mdW5jdGlvbih0KXshdGhpcy5hbGxvd0RlZmF1bHQmJihNYXRoLmFicyh0aGlzLmV2ZW50LngtdC5jbGllbnRYKT40fHxNYXRoLmFicyh0aGlzLmV2ZW50LnktdC5jbGllbnRZKT40KSYmKHRoaXMuYWxsb3dEZWZhdWx0PSEwKSxNZSh0aGlzLnZpZXcsInBvaW50ZXIiKX0sU2UudG91Y2hkb3duPWZ1bmN0aW9uKHQpe0xlKHQpLE1lKHQsInBvaW50ZXIiKX0sU2UuY29udGV4dG1lbnU9ZnVuY3Rpb24odCl7cmV0dXJuIExlKHQpfTt2YXIgSGU9cy5hbmRyb2lkPzVlMzotMTtmdW5jdGlvbiBLZSh0LGUpe2NsZWFyVGltZW91dCh0LmNvbXBvc2luZ1RpbWVvdXQpLGU+LTEmJih0LmNvbXBvc2luZ1RpbWVvdXQ9c2V0VGltZW91dCgoZnVuY3Rpb24oKXtyZXR1cm4gVWUodCl9KSxlKSl9ZnVuY3Rpb24gVWUodCxlKXt0LmNvbXBvc2luZz0hMTt3aGlsZSh0LmNvbXBvc2l0aW9uTm9kZXMubGVuZ3RoPjApdC5jb21wb3NpdGlvbk5vZGVzLnBvcCgpLm1hcmtQYXJlbnRzRGlydHkoKTtyZXR1cm4hKCFlJiYhdC5kb2NWaWV3LmRpcnR5KSYmKHQudXBkYXRlU3RhdGUodC5zdGF0ZSksITApfWZ1bmN0aW9uIEdlKHQsZSl7dmFyIG49dC5kb20ub3duZXJEb2N1bWVudCxyPW4uYm9keS5hcHBlbmRDaGlsZChuLmNyZWF0ZUVsZW1lbnQoImRpdiIpKTtyLmFwcGVuZENoaWxkKGUpLHIuc3R5bGUuY3NzVGV4dD0icG9zaXRpb246IGZpeGVkOyBsZWZ0OiAtMTAwMDBweDsgdG9wOiAxMHB4Ijt2YXIgbz1nZXRTZWxlY3Rpb24oKSxpPW4uY3JlYXRlUmFuZ2UoKTtpLnNlbGVjdE5vZGVDb250ZW50cyhlKSx0LmRvbS5ibHVyKCksby5yZW1vdmVBbGxSYW5nZXMoKSxvLmFkZFJhbmdlKGkpLHNldFRpbWVvdXQoKGZ1bmN0aW9uKCl7bi5ib2R5LnJlbW92ZUNoaWxkKHIpLHQuZm9jdXMoKX0pLDUwKX1DZS5jb21wb3NpdGlvbnN0YXJ0PUNlLmNvbXBvc2l0aW9udXBkYXRlPWZ1bmN0aW9uKHQpe2lmKCF0LmNvbXBvc2luZyl7dC5kb21PYnNlcnZlci5mbHVzaCgpO3ZhciBlPXQuc3RhdGUsbj1lLnNlbGVjdGlvbi4kZnJvbTtpZihlLnNlbGVjdGlvbi5lbXB0eSYmKGUuc3RvcmVkTWFya3N8fCFuLnRleHRPZmZzZXQmJm4ucGFyZW50T2Zmc2V0JiZuLm5vZGVCZWZvcmUubWFya3Muc29tZSgoZnVuY3Rpb24odCl7cmV0dXJuITE9PT10LnR5cGUuc3BlYy5pbmNsdXNpdmV9KSkpKXQubWFya0N1cnNvcj10LnN0YXRlLnN0b3JlZE1hcmtzfHxuLm1hcmtzKCksVWUodCwhMCksdC5tYXJrQ3Vyc29yPW51bGw7ZWxzZSBpZihVZSh0KSxzLmdlY2tvJiZlLnNlbGVjdGlvbi5lbXB0eSYmbi5wYXJlbnRPZmZzZXQmJiFuLnRleHRPZmZzZXQmJm4ubm9kZUJlZm9yZS5tYXJrcy5sZW5ndGgpZm9yKHZhciByPXQucm9vdC5nZXRTZWxlY3Rpb24oKSxvPXIuZm9jdXNOb2RlLGk9ci5mb2N1c09mZnNldDtvJiYxPT1vLm5vZGVUeXBlJiYwIT1pOyl7dmFyIGE9aTwwP28ubGFzdENoaWxkOm8uY2hpbGROb2Rlc1tpLTFdO2lmKDM9PWEubm9kZVR5cGUpe3IuY29sbGFwc2UoYSxhLm5vZGVWYWx1ZS5sZW5ndGgpO2JyZWFrfW89YSxpPS0xfXQuY29tcG9zaW5nPSEwfUtlKHQsSGUpfSxDZS5jb21wb3NpdGlvbmVuZD1mdW5jdGlvbih0LGUpe3QuY29tcG9zaW5nJiYodC5jb21wb3Npbmc9ITEsdC5jb21wb3NpdGlvbkVuZGVkQXQ9ZS50aW1lU3RhbXAsS2UodCwyMCkpfTt2YXIgWGU9cy5pZSYmcy5pZV92ZXJzaW9uPDE1fHxzLmlvcyYmcy53ZWJraXRfdmVyc2lvbjw2MDQ7ZnVuY3Rpb24gWWUodCl7cmV0dXJuIDA9PXQub3BlblN0YXJ0JiYwPT10Lm9wZW5FbmQmJjE9PXQuY29udGVudC5jaGlsZENvdW50P3QuY29udGVudC5maXJzdENoaWxkOm51bGx9ZnVuY3Rpb24gUWUodCxlKXt2YXIgbj10LmRvbS5vd25lckRvY3VtZW50LHI9dC5zaGlmdEtleXx8dC5zdGF0ZS5zZWxlY3Rpb24uJGZyb20ucGFyZW50LnR5cGUuc3BlYy5jb2RlLG89bi5ib2R5LmFwcGVuZENoaWxkKG4uY3JlYXRlRWxlbWVudChyPyJ0ZXh0YXJlYSI6ImRpdiIpKTtyfHwoby5jb250ZW50RWRpdGFibGU9InRydWUiKSxvLnN0eWxlLmNzc1RleHQ9InBvc2l0aW9uOiBmaXhlZDsgbGVmdDogLTEwMDAwcHg7IHRvcDogMTBweCIsby5mb2N1cygpLHNldFRpbWVvdXQoKGZ1bmN0aW9uKCl7dC5mb2N1cygpLG4uYm9keS5yZW1vdmVDaGlsZChvKSxyP1plKHQsby52YWx1ZSxudWxsLGUpOlplKHQsby50ZXh0Q29udGVudCxvLmlubmVySFRNTCxlKX0pLDUwKX1mdW5jdGlvbiBaZSh0LGUsbixyKXt2YXIgaT1hZSh0LGUsbix0LnNoaWZ0S2V5LHQuc3RhdGUuc2VsZWN0aW9uLiRmcm9tKTtpZih0LnNvbWVQcm9wKCJoYW5kbGVQYXN0ZSIsKGZ1bmN0aW9uKGUpe3JldHVybiBlKHQscixpfHxvLlNsaWNlLmVtcHR5KX0pKXx8IWkpcmV0dXJuITA7dmFyIHM9WWUoaSksYT1zP3Quc3RhdGUudHIucmVwbGFjZVNlbGVjdGlvbldpdGgocyx0LnNoaWZ0S2V5KTp0LnN0YXRlLnRyLnJlcGxhY2VTZWxlY3Rpb24oaSk7cmV0dXJuIHQuZGlzcGF0Y2goYS5zY3JvbGxJbnRvVmlldygpLnNldE1ldGEoInBhc3RlIiwhMCkuc2V0TWV0YSgidWlFdmVudCIsInBhc3RlIikpLCEwfVNlLmNvcHk9Q2UuY3V0PWZ1bmN0aW9uKHQsZSl7dmFyIG49dC5zdGF0ZS5zZWxlY3Rpb24scj0iY3V0Ij09ZS50eXBlO2lmKCFuLmVtcHR5KXt2YXIgbz1YZT9udWxsOmUuY2xpcGJvYXJkRGF0YSxpPW4uY29udGVudCgpLHM9c2UodCxpKSxhPXMuZG9tLGM9cy50ZXh0O28/KGUucHJldmVudERlZmF1bHQoKSxvLmNsZWFyRGF0YSgpLG8uc2V0RGF0YSgidGV4dC9odG1sIixhLmlubmVySFRNTCksby5zZXREYXRhKCJ0ZXh0L3BsYWluIixjKSk6R2UodCxhKSxyJiZ0LmRpc3BhdGNoKHQuc3RhdGUudHIuZGVsZXRlU2VsZWN0aW9uKCkuc2Nyb2xsSW50b1ZpZXcoKS5zZXRNZXRhKCJ1aUV2ZW50IiwiY3V0IikpfX0sQ2UucGFzdGU9ZnVuY3Rpb24odCxlKXt2YXIgbj1YZT9udWxsOmUuY2xpcGJvYXJkRGF0YTtuJiYoWmUodCxuLmdldERhdGEoInRleHQvcGxhaW4iKSxuLmdldERhdGEoInRleHQvaHRtbCIpLGUpfHxuLmZpbGVzLmxlbmd0aD4wKT9lLnByZXZlbnREZWZhdWx0KCk6UWUodCxlKX07dmFyIHRuPWZ1bmN0aW9uKHQsZSl7dGhpcy5zbGljZT10LHRoaXMubW92ZT1lfSxlbj1zLm1hYz8iYWx0S2V5IjoiY3RybEtleSI7Zm9yKHZhciBubiBpbiBTZS5kcmFnc3RhcnQ9ZnVuY3Rpb24odCxlKXt2YXIgbj10Lm1vdXNlRG93bjtpZihuJiZuLmRvbmUoKSxlLmRhdGFUcmFuc2Zlcil7dmFyIG89dC5zdGF0ZS5zZWxlY3Rpb24saT1vLmVtcHR5P251bGw6dC5wb3NBdENvb3JkcyhEZShlKSk7aWYoaSYmaS5wb3M+PW8uZnJvbSYmaS5wb3M8PShvIGluc3RhbmNlb2Ygci5Ob2RlU2VsZWN0aW9uP28udG8tMTpvLnRvKSk7ZWxzZSBpZihuJiZuLm1pZ2h0RHJhZyl0LmRpc3BhdGNoKHQuc3RhdGUudHIuc2V0U2VsZWN0aW9uKHIuTm9kZVNlbGVjdGlvbi5jcmVhdGUodC5zdGF0ZS5kb2Msbi5taWdodERyYWcucG9zKSkpO2Vsc2UgaWYoZS50YXJnZXQmJjE9PWUudGFyZ2V0Lm5vZGVUeXBlKXt2YXIgcz10LmRvY1ZpZXcubmVhcmVzdERlc2MoZS50YXJnZXQsITApO2lmKCFzfHwhcy5ub2RlLnR5cGUuc3BlYy5kcmFnZ2FibGV8fHM9PXQuZG9jVmlldylyZXR1cm47dC5kaXNwYXRjaCh0LnN0YXRlLnRyLnNldFNlbGVjdGlvbihyLk5vZGVTZWxlY3Rpb24uY3JlYXRlKHQuc3RhdGUuZG9jLHMucG9zQmVmb3JlKSkpfXZhciBhPXQuc3RhdGUuc2VsZWN0aW9uLmNvbnRlbnQoKSxjPXNlKHQsYSksbD1jLmRvbSxwPWMudGV4dDtlLmRhdGFUcmFuc2Zlci5jbGVhckRhdGEoKSxlLmRhdGFUcmFuc2Zlci5zZXREYXRhKFhlPyJUZXh0IjoidGV4dC9odG1sIixsLmlubmVySFRNTCksWGV8fGUuZGF0YVRyYW5zZmVyLnNldERhdGEoInRleHQvcGxhaW4iLHApLHQuZHJhZ2dpbmc9bmV3IHRuKGEsIWVbZW5dKX19LFNlLmRyYWdlbmQ9ZnVuY3Rpb24odCl7d2luZG93LnNldFRpbWVvdXQoKGZ1bmN0aW9uKCl7cmV0dXJuIHQuZHJhZ2dpbmc9bnVsbH0pLDUwKX0sQ2UuZHJhZ292ZXI9Q2UuZHJhZ2VudGVyPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIGUucHJldmVudERlZmF1bHQoKX0sQ2UuZHJvcD1mdW5jdGlvbih0LGUpe3ZhciBuPXQuZHJhZ2dpbmc7aWYodC5kcmFnZ2luZz1udWxsLGUuZGF0YVRyYW5zZmVyKXt2YXIgbz10LnBvc0F0Q29vcmRzKERlKGUpKTtpZihvKXt2YXIgcz10LnN0YXRlLmRvYy5yZXNvbHZlKG8ucG9zKTtpZihzKXt2YXIgYT1uJiZuLnNsaWNlfHxhZSh0LGUuZGF0YVRyYW5zZmVyLmdldERhdGEoWGU/IlRleHQiOiJ0ZXh0L3BsYWluIiksWGU/bnVsbDplLmRhdGFUcmFuc2Zlci5nZXREYXRhKCJ0ZXh0L2h0bWwiKSwhMSxzKTtpZihhJiYoZS5wcmV2ZW50RGVmYXVsdCgpLCF0LnNvbWVQcm9wKCJoYW5kbGVEcm9wIiwoZnVuY3Rpb24ocil7cmV0dXJuIHIodCxlLGEsbiYmbi5tb3ZlKX0pKSkpe3ZhciBjPWE/aS5kcm9wUG9pbnQodC5zdGF0ZS5kb2Mscy5wb3MsYSk6cy5wb3M7bnVsbD09YyYmKGM9cy5wb3MpO3ZhciBsPXQuc3RhdGUudHI7biYmbi5tb3ZlJiZsLmRlbGV0ZVNlbGVjdGlvbigpO3ZhciBwPWwubWFwcGluZy5tYXAoYyksdT0wPT1hLm9wZW5TdGFydCYmMD09YS5vcGVuRW5kJiYxPT1hLmNvbnRlbnQuY2hpbGRDb3VudCxoPWwuZG9jO2lmKHU/bC5yZXBsYWNlUmFuZ2VXaXRoKHAscCxhLmNvbnRlbnQuZmlyc3RDaGlsZCk6bC5yZXBsYWNlUmFuZ2UocCxwLGEpLCFsLmRvYy5lcShoKSl7dmFyIGY9bC5kb2MucmVzb2x2ZShwKTt1JiZyLk5vZGVTZWxlY3Rpb24uaXNTZWxlY3RhYmxlKGEuY29udGVudC5maXJzdENoaWxkKSYmZi5ub2RlQWZ0ZXImJmYubm9kZUFmdGVyLnNhbWVNYXJrdXAoYS5jb250ZW50LmZpcnN0Q2hpbGQpP2wuc2V0U2VsZWN0aW9uKG5ldyByLk5vZGVTZWxlY3Rpb24oZikpOmwuc2V0U2VsZWN0aW9uKFV0KHQsZixsLmRvYy5yZXNvbHZlKGwubWFwcGluZy5tYXAoYykpKSksdC5mb2N1cygpLHQuZGlzcGF0Y2gobC5zZXRNZXRhKCJ1aUV2ZW50IiwiZHJvcCIpKX19fX19fSxTZS5mb2N1cz1mdW5jdGlvbih0KXt0LmZvY3VzZWR8fCh0LmRvbU9ic2VydmVyLnN0b3AoKSx0LmRvbS5jbGFzc0xpc3QuYWRkKCJQcm9zZU1pcnJvci1mb2N1c2VkIiksdC5kb21PYnNlcnZlci5zdGFydCgpLHQuZm9jdXNlZD0hMCl9LFNlLmJsdXI9ZnVuY3Rpb24odCl7dC5mb2N1c2VkJiYodC5kb21PYnNlcnZlci5zdG9wKCksdC5kb20uY2xhc3NMaXN0LnJlbW92ZSgiUHJvc2VNaXJyb3ItZm9jdXNlZCIpLHQuZG9tT2JzZXJ2ZXIuc3RhcnQoKSx0LmZvY3VzZWQ9ITEpfSxTZS5iZWZvcmVpbnB1dD1mdW5jdGlvbih0LGUpe2lmKHMuY2hyb21lJiZzLmFuZHJvaWQmJiJkZWxldGVDb250ZW50QmFja3dhcmQiPT1lLmlucHV0VHlwZSl7dmFyIG49dC5kb21DaGFuZ2VDb3VudDtzZXRUaW1lb3V0KChmdW5jdGlvbigpe2lmKHQuZG9tQ2hhbmdlQ291bnQ9PW4mJih0LmRvbS5ibHVyKCksdC5mb2N1cygpLCF0LnNvbWVQcm9wKCJoYW5kbGVLZXlEb3duIiwoZnVuY3Rpb24oZSl7cmV0dXJuIGUodCxiKDgsIkJhY2tzcGFjZSIpKX0pKSkpe3ZhciBlPXQuc3RhdGUuc2VsZWN0aW9uLHI9ZS4kY3Vyc29yO3ImJnIucG9zPjAmJnQuZGlzcGF0Y2godC5zdGF0ZS50ci5kZWxldGUoci5wb3MtMSxyLnBvcykuc2Nyb2xsSW50b1ZpZXcoKSl9fSksNTApfX0sQ2UpU2Vbbm5dPUNlW25uXTtmdW5jdGlvbiBybih0LGUpe2lmKHQ9PWUpcmV0dXJuITA7Zm9yKHZhciBuIGluIHQpaWYodFtuXSE9PWVbbl0pcmV0dXJuITE7Zm9yKHZhciByIGluIGUpaWYoIShyIGluIHQpKXJldHVybiExO3JldHVybiEwfXZhciBvbj1mdW5jdGlvbih0LGUpe3RoaXMuc3BlYz1lfHx1bix0aGlzLnNpZGU9dGhpcy5zcGVjLnNpZGV8fDAsdGhpcy50b0RPTT10fTtvbi5wcm90b3R5cGUubWFwPWZ1bmN0aW9uKHQsZSxuLHIpe3ZhciBvPXQubWFwUmVzdWx0KGUuZnJvbStyLHRoaXMuc2lkZTwwPy0xOjEpLGk9by5wb3Mscz1vLmRlbGV0ZWQ7cmV0dXJuIHM/bnVsbDpuZXcgY24oaS1uLGktbix0aGlzKX0sb24ucHJvdG90eXBlLnZhbGlkPWZ1bmN0aW9uKCl7cmV0dXJuITB9LG9uLnByb3RvdHlwZS5lcT1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcz09dHx8dCBpbnN0YW5jZW9mIG9uJiYodGhpcy5zcGVjLmtleSYmdGhpcy5zcGVjLmtleT09dC5zcGVjLmtleXx8dGhpcy50b0RPTT09dC50b0RPTSYmcm4odGhpcy5zcGVjLHQuc3BlYykpfTt2YXIgc249ZnVuY3Rpb24odCxlKXt0aGlzLnNwZWM9ZXx8dW4sdGhpcy5hdHRycz10fTtzbi5wcm90b3R5cGUubWFwPWZ1bmN0aW9uKHQsZSxuLHIpe3ZhciBvPXQubWFwKGUuZnJvbStyLHRoaXMuc3BlYy5pbmNsdXNpdmVTdGFydD8tMToxKS1uLGk9dC5tYXAoZS50bytyLHRoaXMuc3BlYy5pbmNsdXNpdmVFbmQ/MTotMSktbjtyZXR1cm4gbz49aT9udWxsOm5ldyBjbihvLGksdGhpcyl9LHNuLnByb3RvdHlwZS52YWxpZD1mdW5jdGlvbih0LGUpe3JldHVybiBlLmZyb208ZS50b30sc24ucHJvdG90eXBlLmVxPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzPT10fHx0IGluc3RhbmNlb2Ygc24mJnJuKHRoaXMuYXR0cnMsdC5hdHRycykmJnJuKHRoaXMuc3BlYyx0LnNwZWMpfSxzbi5pcz1mdW5jdGlvbih0KXtyZXR1cm4gdC50eXBlIGluc3RhbmNlb2Ygc259O3ZhciBhbj1mdW5jdGlvbih0LGUpe3RoaXMuc3BlYz1lfHx1bix0aGlzLmF0dHJzPXR9O2FuLnByb3RvdHlwZS5tYXA9ZnVuY3Rpb24odCxlLG4scil7dmFyIG89dC5tYXBSZXN1bHQoZS5mcm9tK3IsMSk7aWYoby5kZWxldGVkKXJldHVybiBudWxsO3ZhciBpPXQubWFwUmVzdWx0KGUudG8rciwtMSk7cmV0dXJuIGkuZGVsZXRlZHx8aS5wb3M8PW8ucG9zP251bGw6bmV3IGNuKG8ucG9zLW4saS5wb3Mtbix0aGlzKX0sYW4ucHJvdG90eXBlLnZhbGlkPWZ1bmN0aW9uKHQsZSl7dmFyIG49dC5jb250ZW50LmZpbmRJbmRleChlLmZyb20pLHI9bi5pbmRleCxvPW4ub2Zmc2V0O3JldHVybiBvPT1lLmZyb20mJm8rdC5jaGlsZChyKS5ub2RlU2l6ZT09ZS50b30sYW4ucHJvdG90eXBlLmVxPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzPT10fHx0IGluc3RhbmNlb2YgYW4mJnJuKHRoaXMuYXR0cnMsdC5hdHRycykmJnJuKHRoaXMuc3BlYyx0LnNwZWMpfTt2YXIgY249ZnVuY3Rpb24odCxlLG4pe3RoaXMuZnJvbT10LHRoaXMudG89ZSx0aGlzLnR5cGU9bn0sbG49e3NwZWM6e319O2NuLnByb3RvdHlwZS5jb3B5PWZ1bmN0aW9uKHQsZSl7cmV0dXJuIG5ldyBjbih0LGUsdGhpcy50eXBlKX0sY24ucHJvdG90eXBlLmVxPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLnR5cGUuZXEodC50eXBlKSYmdGhpcy5mcm9tPT10LmZyb20mJnRoaXMudG89PXQudG99LGNuLnByb3RvdHlwZS5tYXA9ZnVuY3Rpb24odCxlLG4pe3JldHVybiB0aGlzLnR5cGUubWFwKHQsdGhpcyxlLG4pfSxjbi53aWRnZXQ9ZnVuY3Rpb24odCxlLG4pe3JldHVybiBuZXcgY24odCx0LG5ldyBvbihlLG4pKX0sY24uaW5saW5lPWZ1bmN0aW9uKHQsZSxuLHIpe3JldHVybiBuZXcgY24odCxlLG5ldyBzbihuLHIpKX0sY24ubm9kZT1mdW5jdGlvbih0LGUsbixyKXtyZXR1cm4gbmV3IGNuKHQsZSxuZXcgYW4obixyKSl9LGxuLnNwZWMuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudHlwZS5zcGVjfSxPYmplY3QuZGVmaW5lUHJvcGVydGllcyhjbi5wcm90b3R5cGUsbG4pO3ZhciBwbj1bXSx1bj17fSxobj1mdW5jdGlvbih0LGUpe3RoaXMubG9jYWw9dCYmdC5sZW5ndGg/dDpwbix0aGlzLmNoaWxkcmVuPWUmJmUubGVuZ3RoP2U6cG59O2huLmNyZWF0ZT1mdW5jdGlvbih0LGUpe3JldHVybiBlLmxlbmd0aD94bihlLHQsMCx1bik6Zm59LGhuLnByb3RvdHlwZS5maW5kPWZ1bmN0aW9uKHQsZSxuKXt2YXIgcj1bXTtyZXR1cm4gdGhpcy5maW5kSW5uZXIobnVsbD09dD8wOnQsbnVsbD09ZT8xZTk6ZSxyLDAsbikscn0saG4ucHJvdG90eXBlLmZpbmRJbm5lcj1mdW5jdGlvbih0LGUsbixyLG8pe2Zvcih2YXIgaT10aGlzLHM9MDtzPHRoaXMubG9jYWwubGVuZ3RoO3MrKyl7dmFyIGE9aS5sb2NhbFtzXTthLmZyb208PWUmJmEudG8+PXQmJighb3x8byhhLnNwZWMpKSYmbi5wdXNoKGEuY29weShhLmZyb20rcixhLnRvK3IpKX1mb3IodmFyIGM9MDtjPHRoaXMuY2hpbGRyZW4ubGVuZ3RoO2MrPTMpaWYoaS5jaGlsZHJlbltjXTxlJiZpLmNoaWxkcmVuW2MrMV0+dCl7dmFyIGw9aS5jaGlsZHJlbltjXSsxO2kuY2hpbGRyZW5bYysyXS5maW5kSW5uZXIodC1sLGUtbCxuLHIrbCxvKX19LGhuLnByb3RvdHlwZS5tYXA9ZnVuY3Rpb24odCxlLG4pe3JldHVybiB0aGlzPT1mbnx8MD09dC5tYXBzLmxlbmd0aD90aGlzOnRoaXMubWFwSW5uZXIodCxlLDAsMCxufHx1bil9LGhuLnByb3RvdHlwZS5tYXBJbm5lcj1mdW5jdGlvbih0LGUsbixyLG8pe2Zvcih2YXIgaSxzPXRoaXMsYT0wO2E8dGhpcy5sb2NhbC5sZW5ndGg7YSsrKXt2YXIgYz1zLmxvY2FsW2FdLm1hcCh0LG4scik7YyYmYy50eXBlLnZhbGlkKGUsYyk/KGl8fChpPVtdKSkucHVzaChjKTpvLm9uUmVtb3ZlJiZvLm9uUmVtb3ZlKHMubG9jYWxbYV0uc3BlYyl9cmV0dXJuIHRoaXMuY2hpbGRyZW4ubGVuZ3RoP3ZuKHRoaXMuY2hpbGRyZW4saSx0LGUsbixyLG8pOmk/bmV3IGhuKGkuc29ydChibikpOmZufSxobi5wcm90b3R5cGUuYWRkPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIGUubGVuZ3RoP3RoaXM9PWZuP2huLmNyZWF0ZSh0LGUpOnRoaXMuYWRkSW5uZXIodCxlLDApOnRoaXN9LGhuLnByb3RvdHlwZS5hZGRJbm5lcj1mdW5jdGlvbih0LGUsbil7dmFyIHIsbz10aGlzLGk9MDt0LmZvckVhY2goKGZ1bmN0aW9uKHQscyl7dmFyIGEsYz1zK247aWYoYT1nbihlLHQsYykpe3J8fChyPW8uY2hpbGRyZW4uc2xpY2UoKSk7d2hpbGUoaTxyLmxlbmd0aCYmcltpXTxzKWkrPTM7cltpXT09cz9yW2krMl09cltpKzJdLmFkZElubmVyKHQsYSxjKzEpOnIuc3BsaWNlKGksMCxzLHMrdC5ub2RlU2l6ZSx4bihhLHQsYysxLHVuKSksaSs9M319KSk7dmFyIHM9bW4oaT93bihlKTplLC1uKTtyZXR1cm4gbmV3IGhuKHMubGVuZ3RoP3RoaXMubG9jYWwuY29uY2F0KHMpLnNvcnQoYm4pOnRoaXMubG9jYWwscnx8dGhpcy5jaGlsZHJlbil9LGhuLnByb3RvdHlwZS5yZW1vdmU9ZnVuY3Rpb24odCl7cmV0dXJuIDA9PXQubGVuZ3RofHx0aGlzPT1mbj90aGlzOnRoaXMucmVtb3ZlSW5uZXIodCwwKX0saG4ucHJvdG90eXBlLnJlbW92ZUlubmVyPWZ1bmN0aW9uKHQsZSl7Zm9yKHZhciBuPXRoaXMscj10aGlzLmNoaWxkcmVuLG89dGhpcy5sb2NhbCxpPTA7aTxyLmxlbmd0aDtpKz0zKXtmb3IodmFyIHM9dm9pZCAwLGE9cltpXStlLGM9cltpKzFdK2UsbD0wLHA9dm9pZCAwO2w8dC5sZW5ndGg7bCsrKShwPXRbbF0pJiZwLmZyb20+YSYmcC50bzxjJiYodFtsXT1udWxsLChzfHwocz1bXSkpLnB1c2gocCkpO2lmKHMpe3I9PW4uY2hpbGRyZW4mJihyPW4uY2hpbGRyZW4uc2xpY2UoKSk7dmFyIHU9cltpKzJdLnJlbW92ZUlubmVyKHMsYSsxKTt1IT1mbj9yW2krMl09dTooci5zcGxpY2UoaSwzKSxpLT0zKX19aWYoby5sZW5ndGgpZm9yKHZhciBoPTAsZj12b2lkIDA7aDx0Lmxlbmd0aDtoKyspaWYoZj10W2hdKWZvcih2YXIgZD0wO2Q8by5sZW5ndGg7ZCsrKW9bZF0udHlwZS5lcShmLnR5cGUpJiYobz09bi5sb2NhbCYmKG89bi5sb2NhbC5zbGljZSgpKSxvLnNwbGljZShkLS0sMSkpO3JldHVybiByPT10aGlzLmNoaWxkcmVuJiZvPT10aGlzLmxvY2FsP3RoaXM6by5sZW5ndGh8fHIubGVuZ3RoP25ldyBobihvLHIpOmZufSxobi5wcm90b3R5cGUuZm9yQ2hpbGQ9ZnVuY3Rpb24odCxlKXt2YXIgbixyLG89dGhpcztpZih0aGlzPT1mbilyZXR1cm4gdGhpcztpZihlLmlzTGVhZilyZXR1cm4gaG4uZW1wdHk7Zm9yKHZhciBpPTA7aTx0aGlzLmNoaWxkcmVuLmxlbmd0aDtpKz0zKWlmKG8uY2hpbGRyZW5baV0+PXQpe28uY2hpbGRyZW5baV09PXQmJihuPW8uY2hpbGRyZW5baSsyXSk7YnJlYWt9Zm9yKHZhciBzPXQrMSxhPXMrZS5jb250ZW50LnNpemUsYz0wO2M8dGhpcy5sb2NhbC5sZW5ndGg7YysrKXt2YXIgbD1vLmxvY2FsW2NdO2lmKGwuZnJvbTxhJiZsLnRvPnMmJmwudHlwZSBpbnN0YW5jZW9mIHNuKXt2YXIgcD1NYXRoLm1heChzLGwuZnJvbSktcyx1PU1hdGgubWluKGEsbC50byktcztwPHUmJihyfHwocj1bXSkpLnB1c2gobC5jb3B5KHAsdSkpfX1pZihyKXt2YXIgaD1uZXcgaG4oci5zb3J0KGJuKSk7cmV0dXJuIG4/bmV3IGRuKFtoLG5dKTpofXJldHVybiBufHxmbn0saG4ucHJvdG90eXBlLmVxPWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXM7aWYodGhpcz09dClyZXR1cm4hMDtpZighKHQgaW5zdGFuY2VvZiBobil8fHRoaXMubG9jYWwubGVuZ3RoIT10LmxvY2FsLmxlbmd0aHx8dGhpcy5jaGlsZHJlbi5sZW5ndGghPXQuY2hpbGRyZW4ubGVuZ3RoKXJldHVybiExO2Zvcih2YXIgbj0wO248dGhpcy5sb2NhbC5sZW5ndGg7bisrKWlmKCFlLmxvY2FsW25dLmVxKHQubG9jYWxbbl0pKXJldHVybiExO2Zvcih2YXIgcj0wO3I8dGhpcy5jaGlsZHJlbi5sZW5ndGg7cis9MylpZihlLmNoaWxkcmVuW3JdIT10LmNoaWxkcmVuW3JdfHxlLmNoaWxkcmVuW3IrMV0hPXQuY2hpbGRyZW5bcisxXXx8IWUuY2hpbGRyZW5bcisyXS5lcSh0LmNoaWxkcmVuW3IrMl0pKXJldHVybiExO3JldHVybiEwfSxobi5wcm90b3R5cGUubG9jYWxzPWZ1bmN0aW9uKHQpe3JldHVybiBrbih0aGlzLmxvY2Fsc0lubmVyKHQpKX0saG4ucHJvdG90eXBlLmxvY2Fsc0lubmVyPWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXM7aWYodGhpcz09Zm4pcmV0dXJuIHBuO2lmKHQuaW5saW5lQ29udGVudHx8IXRoaXMubG9jYWwuc29tZShzbi5pcykpcmV0dXJuIHRoaXMubG9jYWw7Zm9yKHZhciBuPVtdLHI9MDtyPHRoaXMubG9jYWwubGVuZ3RoO3IrKyllLmxvY2FsW3JdLnR5cGUgaW5zdGFuY2VvZiBzbnx8bi5wdXNoKGUubG9jYWxbcl0pO3JldHVybiBufTt2YXIgZm49bmV3IGhuO2huLmVtcHR5PWZuLGhuLnJlbW92ZU92ZXJsYXA9a247dmFyIGRuPWZ1bmN0aW9uKHQpe3RoaXMubWVtYmVycz10fTtmdW5jdGlvbiB2bih0LGUsbixyLG8saSxzKXtmb3IodmFyIGE9dC5zbGljZSgpLGM9ZnVuY3Rpb24odCxlLG4scil7Zm9yKHZhciBzPTA7czxhLmxlbmd0aDtzKz0zKXt2YXIgYz1hW3MrMV0sbD12b2lkIDA7LTE9PWN8fHQ+YytpfHwoZT49YVtzXStpP2FbcysxXT0tMToobD1yLW4tKGUtdCkrKGktbykpJiYoYVtzXSs9bCxhW3MrMV0rPWwpKX19LGw9MDtsPG4ubWFwcy5sZW5ndGg7bCsrKW4ubWFwc1tsXS5mb3JFYWNoKGMpO2Zvcih2YXIgcD0hMSx1PTA7dTxhLmxlbmd0aDt1Kz0zKWlmKC0xPT1hW3UrMV0pe3ZhciBoPW4ubWFwKGFbdV0raSksZj1oLW87aWYoZjwwfHxmPj1yLmNvbnRlbnQuc2l6ZSl7cD0hMDtjb250aW51ZX12YXIgZD1uLm1hcCh0W3UrMV0raSwtMSksdj1kLW8sbT1yLmNvbnRlbnQuZmluZEluZGV4KGYpLHk9bS5pbmRleCxnPW0ub2Zmc2V0LHc9ci5tYXliZUNoaWxkKHkpO2lmKHcmJmc9PWYmJmcrdy5ub2RlU2l6ZT09dil7dmFyIHg9YVt1KzJdLm1hcElubmVyKG4sdyxoKzEsYVt1XStpKzEscyk7eCE9Zm4/KGFbdV09ZixhW3UrMV09dixhW3UrMl09eCk6KGFbdSsxXT0tMixwPSEwKX1lbHNlIHA9ITB9aWYocCl7dmFyIGI9eW4oYSx0LGV8fFtdLG4sbyxpLHMpLGs9eG4oYixyLDAscyk7ZT1rLmxvY2FsO2Zvcih2YXIgUz0wO1M8YS5sZW5ndGg7Uys9MylhW1MrMV08MCYmKGEuc3BsaWNlKFMsMyksUy09Myk7Zm9yKHZhciBDPTAsTz0wO0M8ay5jaGlsZHJlbi5sZW5ndGg7Qys9Myl7dmFyIE09ay5jaGlsZHJlbltDXTt3aGlsZShPPGEubGVuZ3RoJiZhW09dPE0pTys9MzthLnNwbGljZShPLDAsay5jaGlsZHJlbltDXSxrLmNoaWxkcmVuW0MrMV0say5jaGlsZHJlbltDKzJdKX19cmV0dXJuIG5ldyBobihlJiZlLnNvcnQoYm4pLGEpfWZ1bmN0aW9uIG1uKHQsZSl7aWYoIWV8fCF0Lmxlbmd0aClyZXR1cm4gdDtmb3IodmFyIG49W10scj0wO3I8dC5sZW5ndGg7cisrKXt2YXIgbz10W3JdO24ucHVzaChuZXcgY24oby5mcm9tK2Usby50bytlLG8udHlwZSkpfXJldHVybiBufWZ1bmN0aW9uIHluKHQsZSxuLHIsbyxpLHMpe2Z1bmN0aW9uIGEodCxlKXtmb3IodmFyIGk9MDtpPHQubG9jYWwubGVuZ3RoO2krKyl7dmFyIGM9dC5sb2NhbFtpXS5tYXAocixvLGUpO2M/bi5wdXNoKGMpOnMub25SZW1vdmUmJnMub25SZW1vdmUodC5sb2NhbFtpXS5zcGVjKX1mb3IodmFyIGw9MDtsPHQuY2hpbGRyZW4ubGVuZ3RoO2wrPTMpYSh0LmNoaWxkcmVuW2wrMl0sdC5jaGlsZHJlbltsXStlKzEpfWZvcih2YXIgYz0wO2M8dC5sZW5ndGg7Yys9MyktMT09dFtjKzFdJiZhKHRbYysyXSxlW2NdK2krMSk7cmV0dXJuIG59ZnVuY3Rpb24gZ24odCxlLG4pe2lmKGUuaXNMZWFmKXJldHVybiBudWxsO2Zvcih2YXIgcj1uK2Uubm9kZVNpemUsbz1udWxsLGk9MCxzPXZvaWQgMDtpPHQubGVuZ3RoO2krKykocz10W2ldKSYmcy5mcm9tPm4mJnMudG88ciYmKChvfHwobz1bXSkpLnB1c2gocyksdFtpXT1udWxsKTtyZXR1cm4gb31mdW5jdGlvbiB3bih0KXtmb3IodmFyIGU9W10sbj0wO248dC5sZW5ndGg7bisrKW51bGwhPXRbbl0mJmUucHVzaCh0W25dKTtyZXR1cm4gZX1mdW5jdGlvbiB4bih0LGUsbixyKXt2YXIgbz1bXSxpPSExO2UuZm9yRWFjaCgoZnVuY3Rpb24oZSxzKXt2YXIgYT1nbih0LGUscytuKTtpZihhKXtpPSEwO3ZhciBjPXhuKGEsZSxuK3MrMSxyKTtjIT1mbiYmby5wdXNoKHMscytlLm5vZGVTaXplLGMpfX0pKTtmb3IodmFyIHM9bW4oaT93bih0KTp0LC1uKS5zb3J0KGJuKSxhPTA7YTxzLmxlbmd0aDthKyspc1thXS50eXBlLnZhbGlkKGUsc1thXSl8fChyLm9uUmVtb3ZlJiZyLm9uUmVtb3ZlKHNbYV0uc3BlYykscy5zcGxpY2UoYS0tLDEpKTtyZXR1cm4gcy5sZW5ndGh8fG8ubGVuZ3RoP25ldyBobihzLG8pOmZufWZ1bmN0aW9uIGJuKHQsZSl7cmV0dXJuIHQuZnJvbS1lLmZyb218fHQudG8tZS50b31mdW5jdGlvbiBrbih0KXtmb3IodmFyIGU9dCxuPTA7bjxlLmxlbmd0aC0xO24rKyl7dmFyIHI9ZVtuXTtpZihyLmZyb20hPXIudG8pZm9yKHZhciBvPW4rMTtvPGUubGVuZ3RoO28rKyl7dmFyIGk9ZVtvXTtpZihpLmZyb20hPXIuZnJvbSl7aS5mcm9tPHIudG8mJihlPT10JiYoZT10LnNsaWNlKCkpLGVbbl09ci5jb3B5KHIuZnJvbSxpLmZyb20pLFNuKGUsbyxyLmNvcHkoaS5mcm9tLHIudG8pKSk7YnJlYWt9aS50byE9ci50byYmKGU9PXQmJihlPXQuc2xpY2UoKSksZVtvXT1pLmNvcHkoaS5mcm9tLHIudG8pLFNuKGUsbysxLGkuY29weShyLnRvLGkudG8pKSl9fXJldHVybiBlfWZ1bmN0aW9uIFNuKHQsZSxuKXt3aGlsZShlPHQubGVuZ3RoJiZibihuLHRbZV0pPjApZSsrO3Quc3BsaWNlKGUsMCxuKX1mdW5jdGlvbiBDbih0KXt2YXIgZT1bXTtyZXR1cm4gdC5zb21lUHJvcCgiZGVjb3JhdGlvbnMiLChmdW5jdGlvbihuKXt2YXIgcj1uKHQuc3RhdGUpO3ImJnIhPWZuJiZlLnB1c2gocil9KSksdC5jdXJzb3JXcmFwcGVyJiZlLnB1c2goaG4uY3JlYXRlKHQuc3RhdGUuZG9jLFt0LmN1cnNvcldyYXBwZXIuZGVjb10pKSxkbi5mcm9tKGUpfWRuLnByb3RvdHlwZS5mb3JDaGlsZD1mdW5jdGlvbih0LGUpe3ZhciBuPXRoaXM7aWYoZS5pc0xlYWYpcmV0dXJuIGhuLmVtcHR5O2Zvcih2YXIgcj1bXSxvPTA7bzx0aGlzLm1lbWJlcnMubGVuZ3RoO28rKyl7dmFyIGk9bi5tZW1iZXJzW29dLmZvckNoaWxkKHQsZSk7aSE9Zm4mJihpIGluc3RhbmNlb2YgZG4/cj1yLmNvbmNhdChpLm1lbWJlcnMpOnIucHVzaChpKSl9cmV0dXJuIGRuLmZyb20ocil9LGRuLnByb3RvdHlwZS5lcT1mdW5jdGlvbih0KXt2YXIgZT10aGlzO2lmKCEodCBpbnN0YW5jZW9mIGRuKXx8dC5tZW1iZXJzLmxlbmd0aCE9dGhpcy5tZW1iZXJzLmxlbmd0aClyZXR1cm4hMTtmb3IodmFyIG49MDtuPHRoaXMubWVtYmVycy5sZW5ndGg7bisrKWlmKCFlLm1lbWJlcnNbbl0uZXEodC5tZW1iZXJzW25dKSlyZXR1cm4hMTtyZXR1cm4hMH0sZG4ucHJvdG90eXBlLmxvY2Fscz1mdW5jdGlvbih0KXtmb3IodmFyIGUsbj10aGlzLHI9ITAsbz0wO288dGhpcy5tZW1iZXJzLmxlbmd0aDtvKyspe3ZhciBpPW4ubWVtYmVyc1tvXS5sb2NhbHNJbm5lcih0KTtpZihpLmxlbmd0aClpZihlKXtyJiYoZT1lLnNsaWNlKCkscj0hMSk7Zm9yKHZhciBzPTA7czxpLmxlbmd0aDtzKyspZS5wdXNoKGlbc10pfWVsc2UgZT1pfXJldHVybiBlP2tuKHI/ZTplLnNvcnQoYm4pKTpwbn0sZG4uZnJvbT1mdW5jdGlvbih0KXtzd2l0Y2godC5sZW5ndGgpe2Nhc2UgMDpyZXR1cm4gZm47Y2FzZSAxOnJldHVybiB0WzBdO2RlZmF1bHQ6cmV0dXJuIG5ldyBkbih0KX19O3ZhciBPbj1mdW5jdGlvbih0LGUpe3RoaXMuX3Byb3BzPWUsdGhpcy5zdGF0ZT1lLnN0YXRlLHRoaXMuZGlzcGF0Y2g9dGhpcy5kaXNwYXRjaC5iaW5kKHRoaXMpLHRoaXMuX3Jvb3Q9bnVsbCx0aGlzLmZvY3VzZWQ9ITEsdGhpcy5kb209dCYmdC5tb3VudHx8ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2IiksdCYmKHQuYXBwZW5kQ2hpbGQ/dC5hcHBlbmRDaGlsZCh0aGlzLmRvbSk6dC5hcHBseT90KHRoaXMuZG9tKTp0Lm1vdW50JiYodGhpcy5tb3VudGVkPSEwKSksdGhpcy5lZGl0YWJsZT1Fbih0aGlzKSx0aGlzLm1hcmtDdXJzb3I9bnVsbCx0aGlzLmN1cnNvcldyYXBwZXI9bnVsbCxObih0aGlzKSx0aGlzLm5vZGVWaWV3cz1Ebih0aGlzKSx0aGlzLmRvY1ZpZXc9b3QodGhpcy5zdGF0ZS5kb2MsVG4odGhpcyksQ24odGhpcyksdGhpcy5kb20sdGhpcyksdGhpcy5sYXN0U2VsZWN0ZWRWaWV3RGVzYz1udWxsLHRoaXMuZHJhZ2dpbmc9bnVsbCxPZSh0aGlzKSx0aGlzLnBsdWdpblZpZXdzPVtdLHRoaXMudXBkYXRlUGx1Z2luVmlld3MoKX0sTW49e3Byb3BzOnt9LHJvb3Q6e319O2Z1bmN0aW9uIFRuKHQpe3ZhciBlPU9iamVjdC5jcmVhdGUobnVsbCk7cmV0dXJuIGUuY2xhc3M9IlByb3NlTWlycm9yIixlLmNvbnRlbnRlZGl0YWJsZT1TdHJpbmcodC5lZGl0YWJsZSksdC5zb21lUHJvcCgiYXR0cmlidXRlcyIsKGZ1bmN0aW9uKG4pe2lmKCJmdW5jdGlvbiI9PXR5cGVvZiBuJiYobj1uKHQuc3RhdGUpKSxuKWZvcih2YXIgciBpbiBuKSJjbGFzcyI9PXI/ZS5jbGFzcys9IiAiK25bcl06ZVtyXXx8ImNvbnRlbnRlZGl0YWJsZSI9PXJ8fCJub2RlTmFtZSI9PXJ8fChlW3JdPVN0cmluZyhuW3JdKSl9KSksW2NuLm5vZGUoMCx0LnN0YXRlLmRvYy5jb250ZW50LnNpemUsZSldfWZ1bmN0aW9uIE5uKHQpe3ZhciBlPXQuc3RhdGUuc2VsZWN0aW9uLG49ZS4kaGVhZCxyPWUuJGFuY2hvcixvPWUudmlzaWJsZTtpZih0Lm1hcmtDdXJzb3Ipe3ZhciBpPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImltZyIpO2kuc2V0QXR0cmlidXRlKCJtYXJrLXBsYWNlaG9sZGVyIiwidHJ1ZSIpLHQuY3Vyc29yV3JhcHBlcj17ZG9tOmksZGVjbzpjbi53aWRnZXQobi5wb3MsaSx7cmF3OiEwLG1hcmtzOnQubWFya0N1cnNvcn0pfX1lbHNlIGlmKG98fG4ucG9zIT1yLnBvcyl0LmN1cnNvcldyYXBwZXI9bnVsbDtlbHNle3ZhciBzOyF0LmN1cnNvcldyYXBwZXJ8fHQuY3Vyc29yV3JhcHBlci5kb20uY2hpbGROb2Rlcy5sZW5ndGg/KHM9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2Iikscy5zdHlsZS5wb3NpdGlvbj0iYWJzb2x1dGUiLHMuc3R5bGUubGVmdD0iLTEwMDAwMHB4Iik6dC5jdXJzb3JXcmFwcGVyLmRlY28ucG9zIT1uLnBvcyYmKHM9dC5jdXJzb3JXcmFwcGVyLmRvbSkscyYmKHQuY3Vyc29yV3JhcHBlcj17ZG9tOnMsZGVjbzpjbi53aWRnZXQobi5wb3Mscyx7cmF3OiEwfSl9KX19ZnVuY3Rpb24gRW4odCl7cmV0dXJuIXQuc29tZVByb3AoImVkaXRhYmxlIiwoZnVuY3Rpb24oZSl7cmV0dXJuITE9PT1lKHQuc3RhdGUpfSkpfWZ1bmN0aW9uIEFuKHQpe3ZhciBlPXQuZ2V0U2VsZWN0aW9uKCksbj1lLmZvY3VzT2Zmc2V0LHI9ZS5mb2N1c05vZGU7cmV0dXJuIHImJjMhPXIubm9kZVR5cGU/W3IsbiwxPT1yLm5vZGVUeXBlP3IuY2hpbGROb2Rlc1tuLTFdOm51bGwsMT09ci5ub2RlVHlwZT9yLmNoaWxkTm9kZXNbbl06bnVsbF06bnVsbH1mdW5jdGlvbiBSbih0LGUpe3ZhciBuPUFuKGUpO2lmKCFufHwzPT1uWzBdLm5vZGVUeXBlKXJldHVybiExO2Zvcih2YXIgcj0wO3I8dC5sZW5ndGg7cisrKWlmKG5bcl0hPXRbcl0pcmV0dXJuITA7cmV0dXJuITF9ZnVuY3Rpb24gRG4odCl7dmFyIGU9e307cmV0dXJuIHQuc29tZVByb3AoIm5vZGVWaWV3cyIsKGZ1bmN0aW9uKHQpe2Zvcih2YXIgbiBpbiB0KU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChlLG4pfHwoZVtuXT10W25dKX0pKSxlfWZ1bmN0aW9uIHpuKHQsZSl7dmFyIG49MCxyPTA7Zm9yKHZhciBvIGluIHQpe2lmKHRbb10hPWVbb10pcmV0dXJuITA7bisrfWZvcih2YXIgaSBpbiBlKXIrKztyZXR1cm4gbiE9cn1Nbi5wcm9wcy5nZXQ9ZnVuY3Rpb24oKXt2YXIgdD10aGlzO2lmKHRoaXMuX3Byb3BzLnN0YXRlIT10aGlzLnN0YXRlKXt2YXIgZT10aGlzLl9wcm9wcztmb3IodmFyIG4gaW4gdGhpcy5fcHJvcHM9e30sZSl0Ll9wcm9wc1tuXT1lW25dO3RoaXMuX3Byb3BzLnN0YXRlPXRoaXMuc3RhdGV9cmV0dXJuIHRoaXMuX3Byb3BzfSxPbi5wcm90b3R5cGUudXBkYXRlPWZ1bmN0aW9uKHQpe3QuaGFuZGxlRE9NRXZlbnRzIT10aGlzLl9wcm9wcy5oYW5kbGVET01FdmVudHMmJk5lKHRoaXMpLHRoaXMuX3Byb3BzPXQsdGhpcy51cGRhdGVTdGF0ZUlubmVyKHQuc3RhdGUsITApfSxPbi5wcm90b3R5cGUuc2V0UHJvcHM9ZnVuY3Rpb24odCl7dmFyIGU9dGhpcyxuPXt9O2Zvcih2YXIgciBpbiBlLl9wcm9wcyluW3JdPWUuX3Byb3BzW3JdO2Zvcih2YXIgbyBpbiBuLnN0YXRlPXRoaXMuc3RhdGUsdCluW29dPXRbb107dGhpcy51cGRhdGUobil9LE9uLnByb3RvdHlwZS51cGRhdGVTdGF0ZT1mdW5jdGlvbih0KXt0aGlzLnVwZGF0ZVN0YXRlSW5uZXIodCx0aGlzLnN0YXRlLnBsdWdpbnMhPXQucGx1Z2lucyl9LE9uLnByb3RvdHlwZS51cGRhdGVTdGF0ZUlubmVyPWZ1bmN0aW9uKHQsZSl7dmFyIG49dGhpcyxvPXRoaXMuc3RhdGUsaT0hMTtpZih0aGlzLnN0YXRlPXQsZSl7dmFyIGE9RG4odGhpcyk7em4oYSx0aGlzLm5vZGVWaWV3cykmJih0aGlzLm5vZGVWaWV3cz1hLGk9ITApLE5lKHRoaXMpfXRoaXMuZWRpdGFibGU9RW4odGhpcyksTm4odGhpcyk7dmFyIGM9Q24odGhpcyksbD1Ubih0aGlzKSxwPWU/InJlc2V0Ijp0LnNjcm9sbFRvU2VsZWN0aW9uPm8uc2Nyb2xsVG9TZWxlY3Rpb24/InRvIHNlbGVjdGlvbiI6InByZXNlcnZlIix1PWl8fCF0aGlzLmRvY1ZpZXcubWF0Y2hlc05vZGUodC5kb2MsbCxjKSxoPXV8fCF0LnNlbGVjdGlvbi5lcShvLnNlbGVjdGlvbiksZj0icHJlc2VydmUiPT1wJiZoJiZudWxsPT10aGlzLmRvbS5zdHlsZS5vdmVyZmxvd0FuY2hvciYmTyh0aGlzKTtpZihoKXt0aGlzLmRvbU9ic2VydmVyLnN0b3AoKTt2YXIgZD0hMTtpZih1KXt2YXIgdj1zLmNocm9tZSYmQW4odGhpcy5yb290KTshaSYmdGhpcy5kb2NWaWV3LnVwZGF0ZSh0LmRvYyxsLGMsdGhpcyl8fCh0aGlzLmRvY1ZpZXcuZGVzdHJveSgpLHRoaXMuZG9jVmlldz1vdCh0LmRvYyxsLGMsdGhpcy5kb20sdGhpcykpLHYmJihkPSF0aGlzLmNvbXBvc2luZyYmUm4odix0aGlzLnJvb3QpKSxzLmllJiZzLmllX3ZlcnNpb248PTExJiYhby5zZWxlY3Rpb24uZW1wdHkmJnQuc2VsZWN0aW9uLmVtcHR5JiZ0LmRvYy5jb250ZW50LnNpemU8by5kb2MuY29udGVudC5zaXplJiYoZD0hMCl9ZHx8ISh0aGlzLm1vdXNlRG93biYmdGhpcy5kb21PYnNlcnZlci5jdXJyZW50U2VsZWN0aW9uLmVxKHRoaXMucm9vdC5nZXRTZWxlY3Rpb24oKSkmJll0KHRoaXMpKT9WdCh0aGlzLCExLGQpOihIdCh0aGlzLHQuc2VsZWN0aW9uKSx0aGlzLmRvbU9ic2VydmVyLnNldEN1clNlbGVjdGlvbigpKSx0aGlzLmRvbU9ic2VydmVyLnN0YXJ0KCl9aWYodGhpcy51cGRhdGVQbHVnaW5WaWV3cyhvKSwicmVzZXQiPT1wKXRoaXMuZG9tLnNjcm9sbFRvcD0wO2Vsc2UgaWYoInRvIHNlbGVjdGlvbiI9PXApe3ZhciBtPXRoaXMucm9vdC5nZXRTZWxlY3Rpb24oKS5mb2N1c05vZGU7dGhpcy5zb21lUHJvcCgiaGFuZGxlU2Nyb2xsVG9TZWxlY3Rpb24iLChmdW5jdGlvbih0KXtyZXR1cm4gdChuKX0pKXx8KHQuc2VsZWN0aW9uIGluc3RhbmNlb2Ygci5Ob2RlU2VsZWN0aW9uP0ModGhpcyx0aGlzLmRvY1ZpZXcuZG9tQWZ0ZXJQb3ModC5zZWxlY3Rpb24uZnJvbSkuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCksbSk6Qyh0aGlzLHRoaXMuY29vcmRzQXRQb3ModC5zZWxlY3Rpb24uaGVhZCksbSkpfWVsc2UgZiYmTShmKX0sT24ucHJvdG90eXBlLmRlc3Ryb3lQbHVnaW5WaWV3cz1mdW5jdGlvbigpe3ZhciB0O3doaWxlKHQ9dGhpcy5wbHVnaW5WaWV3cy5wb3AoKSl0LmRlc3Ryb3kmJnQuZGVzdHJveSgpfSxPbi5wcm90b3R5cGUudXBkYXRlUGx1Z2luVmlld3M9ZnVuY3Rpb24odCl7dmFyIGU9dGhpcztpZih0JiZ0LnBsdWdpbnM9PXRoaXMuc3RhdGUucGx1Z2lucylmb3IodmFyIG49MDtuPHRoaXMucGx1Z2luVmlld3MubGVuZ3RoO24rKyl7dmFyIHI9ZS5wbHVnaW5WaWV3c1tuXTtyLnVwZGF0ZSYmci51cGRhdGUoZSx0KX1lbHNle3RoaXMuZGVzdHJveVBsdWdpblZpZXdzKCk7Zm9yKHZhciBvPTA7bzx0aGlzLnN0YXRlLnBsdWdpbnMubGVuZ3RoO28rKyl7dmFyIGk9ZS5zdGF0ZS5wbHVnaW5zW29dO2kuc3BlYy52aWV3JiZlLnBsdWdpblZpZXdzLnB1c2goaS5zcGVjLnZpZXcoZSkpfX19LE9uLnByb3RvdHlwZS5zb21lUHJvcD1mdW5jdGlvbih0LGUpe3ZhciBuLHI9dGhpcy5fcHJvcHMmJnRoaXMuX3Byb3BzW3RdO2lmKG51bGwhPXImJihuPWU/ZShyKTpyKSlyZXR1cm4gbjt2YXIgbz10aGlzLnN0YXRlLnBsdWdpbnM7aWYobylmb3IodmFyIGk9MDtpPG8ubGVuZ3RoO2krKyl7dmFyIHM9b1tpXS5wcm9wc1t0XTtpZihudWxsIT1zJiYobj1lP2Uocyk6cykpcmV0dXJuIG59fSxPbi5wcm90b3R5cGUuaGFzRm9jdXM9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5yb290LmFjdGl2ZUVsZW1lbnQ9PXRoaXMuZG9tfSxPbi5wcm90b3R5cGUuZm9jdXM9ZnVuY3Rpb24oKXt0aGlzLmRvbU9ic2VydmVyLnN0b3AoKSxWdCh0aGlzLCEwKSx0aGlzLmVkaXRhYmxlJiYodGhpcy5kb20uc2V0QWN0aXZlP3RoaXMuZG9tLnNldEFjdGl2ZSgpOnRoaXMuZG9tLmZvY3VzKHtwcmV2ZW50U2Nyb2xsOiEwfSkpLHRoaXMuZG9tT2JzZXJ2ZXIuc3RhcnQoKX0sTW4ucm9vdC5nZXQ9ZnVuY3Rpb24oKXt2YXIgdD10aGlzLGU9dGhpcy5fcm9vdDtpZihudWxsPT1lKWZvcih2YXIgbj10aGlzLmRvbS5wYXJlbnROb2RlO247bj1uLnBhcmVudE5vZGUpaWYoOT09bi5ub2RlVHlwZXx8MTE9PW4ubm9kZVR5cGUmJm4uaG9zdClyZXR1cm4gdC5fcm9vdD1uO3JldHVybiBlfHxkb2N1bWVudH0sT24ucHJvdG90eXBlLnBvc0F0Q29vcmRzPWZ1bmN0aW9uKHQpe3JldHVybiBQKHRoaXMsdCl9LE9uLnByb3RvdHlwZS5jb29yZHNBdFBvcz1mdW5jdGlvbih0KXtyZXR1cm4gXyh0aGlzLHQpfSxPbi5wcm90b3R5cGUuZG9tQXRQb3M9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuZG9jVmlldy5kb21Gcm9tUG9zKHQpfSxPbi5wcm90b3R5cGUubm9kZURPTT1mdW5jdGlvbih0KXt2YXIgZT10aGlzLmRvY1ZpZXcuZGVzY0F0KHQpO3JldHVybiBlP2Uubm9kZURPTTpudWxsfSxPbi5wcm90b3R5cGUucG9zQXRET009ZnVuY3Rpb24odCxlLG4pe3ZvaWQgMD09PW4mJihuPS0xKTt2YXIgcj10aGlzLmRvY1ZpZXcucG9zRnJvbURPTSh0LGUsbik7aWYobnVsbD09cil0aHJvdyBuZXcgUmFuZ2VFcnJvcigiRE9NIHBvc2l0aW9uIG5vdCBpbnNpZGUgdGhlIGVkaXRvciIpO3JldHVybiByfSxPbi5wcm90b3R5cGUuZW5kT2ZUZXh0YmxvY2s9ZnVuY3Rpb24odCxlKXtyZXR1cm4gSCh0aGlzLGV8fHRoaXMuc3RhdGUsdCl9LE9uLnByb3RvdHlwZS5kZXN0cm95PWZ1bmN0aW9uKCl7dGhpcy5kb2NWaWV3JiYoVGUodGhpcyksdGhpcy5kZXN0cm95UGx1Z2luVmlld3MoKSx0aGlzLm1vdW50ZWQ/KHRoaXMuZG9jVmlldy51cGRhdGUodGhpcy5zdGF0ZS5kb2MsW10sQ24odGhpcyksdGhpcyksdGhpcy5kb20udGV4dENvbnRlbnQ9IiIpOnRoaXMuZG9tLnBhcmVudE5vZGUmJnRoaXMuZG9tLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQodGhpcy5kb20pLHRoaXMuZG9jVmlldy5kZXN0cm95KCksdGhpcy5kb2NWaWV3PW51bGwpfSxPbi5wcm90b3R5cGUuZGlzcGF0Y2hFdmVudD1mdW5jdGlvbih0KXtyZXR1cm4gUmUodGhpcyx0KX0sT24ucHJvdG90eXBlLmRpc3BhdGNoPWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMuX3Byb3BzLmRpc3BhdGNoVHJhbnNhY3Rpb247ZT9lLmNhbGwodGhpcyx0KTp0aGlzLnVwZGF0ZVN0YXRlKHRoaXMuc3RhdGUuYXBwbHkodCkpfSxPYmplY3QuZGVmaW5lUHJvcGVydGllcyhPbi5wcm90b3R5cGUsTW4pLGUuRWRpdG9yVmlldz1PbixlLkRlY29yYXRpb249Y24sZS5EZWNvcmF0aW9uU2V0PWhuLGUuX19zZXJpYWxpemVGb3JDbGlwYm9hcmQ9c2UsZS5fX3BhcnNlRnJvbUNsaXBib2FyZD1hZSxlLl9fZW5kQ29tcG9zaXRpb249VWV9LCI1NGExIjpmdW5jdGlvbih0LGUsbil7bigiNmMxYyIpLG4oIjE2NTQiKSx0LmV4cG9ydHM9bigiOTVkNSIpfSw1NTM3OmZ1bmN0aW9uKHQsZSxuKXt2YXIgcj1uKCI4Mzc4Iiksbz1uKCI3NzI2IiksaT0iX19jb3JlLWpzX3NoYXJlZF9fIixzPW9baV18fChvW2ldPXt9KTsodC5leHBvcnRzPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIHNbdF18fChzW3RdPXZvaWQgMCE9PWU/ZTp7fSl9KSgidmVyc2lvbnMiLFtdKS5wdXNoKHt2ZXJzaW9uOnIudmVyc2lvbixtb2RlOm4oIjJkMDAiKT8icHVyZSI6Imdsb2JhbCIsY29weXJpZ2h0OiLCqSAyMDE5IERlbmlzIFB1c2hrYXJldiAoemxvaXJvY2sucnUpIn0pfSw1NTU5OmZ1bmN0aW9uKHQsZSxuKXt2YXIgcj1uKCJkYmRiIikoImtleXMiKSxvPW4oIjYyYTAiKTt0LmV4cG9ydHM9ZnVuY3Rpb24odCl7cmV0dXJuIHJbdF18fChyW3RdPW8odCkpfX0sIjU2ZWMiOmZ1bmN0aW9uKHQsZSxuKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gcih0KXtyZXR1cm4gdCYmIm9iamVjdCI9PT10eXBlb2YgdCYmImRlZmF1bHQiaW4gdD90WyJkZWZhdWx0Il06dH1PYmplY3QuZGVmaW5lUHJvcGVydHkoZSwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSk7dmFyIG89cihuKCI0Y2E0IikpLGk9bigiNmZmYiIpLHM9InVuZGVmaW5lZCIhPXR5cGVvZiBuYXZpZ2F0b3ImJi9NYWMvLnRlc3QobmF2aWdhdG9yLnBsYXRmb3JtKTtmdW5jdGlvbiBhKHQpe3ZhciBlLG4scixvLGk9dC5zcGxpdCgvLSg/ISQpLyksYT1pW2kubGVuZ3RoLTFdOyJTcGFjZSI9PWEmJihhPSIgIik7Zm9yKHZhciBjPTA7YzxpLmxlbmd0aC0xO2MrKyl7dmFyIGw9aVtjXTtpZigvXihjbWR8bWV0YXxtKSQvaS50ZXN0KGwpKW89ITA7ZWxzZSBpZigvXmEobHQpPyQvaS50ZXN0KGwpKWU9ITA7ZWxzZSBpZigvXihjfGN0cmx8Y29udHJvbCkkL2kudGVzdChsKSluPSEwO2Vsc2UgaWYoL15zKGhpZnQpPyQvaS50ZXN0KGwpKXI9ITA7ZWxzZXtpZighL15tb2QkL2kudGVzdChsKSl0aHJvdyBuZXcgRXJyb3IoIlVucmVjb2duaXplZCBtb2RpZmllciBuYW1lOiAiK2wpO3M/bz0hMDpuPSEwfX1yZXR1cm4gZSYmKGE9IkFsdC0iK2EpLG4mJihhPSJDdHJsLSIrYSksbyYmKGE9Ik1ldGEtIithKSxyJiYoYT0iU2hpZnQtIithKSxhfWZ1bmN0aW9uIGModCl7dmFyIGU9T2JqZWN0LmNyZWF0ZShudWxsKTtmb3IodmFyIG4gaW4gdCllW2EobildPXRbbl07cmV0dXJuIGV9ZnVuY3Rpb24gbCh0LGUsbil7cmV0dXJuIGUuYWx0S2V5JiYodD0iQWx0LSIrdCksZS5jdHJsS2V5JiYodD0iQ3RybC0iK3QpLGUubWV0YUtleSYmKHQ9Ik1ldGEtIit0KSwhMSE9PW4mJmUuc2hpZnRLZXkmJih0PSJTaGlmdC0iK3QpLHR9ZnVuY3Rpb24gcCh0KXtyZXR1cm4gbmV3IGkuUGx1Z2luKHtwcm9wczp7aGFuZGxlS2V5RG93bjp1KHQpfX0pfWZ1bmN0aW9uIHUodCl7dmFyIGU9Yyh0KTtyZXR1cm4gZnVuY3Rpb24odCxuKXt2YXIgcixpPW8obikscz0xPT1pLmxlbmd0aCYmIiAiIT1pLGE9ZVtsKGksbiwhcyldO2lmKGEmJmEodC5zdGF0ZSx0LmRpc3BhdGNoLHQpKXJldHVybiEwO2lmKHMmJihuLnNoaWZ0S2V5fHxuLmFsdEtleXx8bi5tZXRhS2V5KSYmKHI9by5iYXNlW24ua2V5Q29kZV0pJiZyIT1pKXt2YXIgYz1lW2wocixuLCEwKV07aWYoYyYmYyh0LnN0YXRlLHQuZGlzcGF0Y2gsdCkpcmV0dXJuITB9cmV0dXJuITF9fWUua2V5bWFwPXAsZS5rZXlkb3duSGFuZGxlcj11fSwiNTg0YSI6ZnVuY3Rpb24odCxlKXt2YXIgbj10LmV4cG9ydHM9e3ZlcnNpb246IjIuNi45In07Im51bWJlciI9PXR5cGVvZiBfX2UmJihfX2U9bil9LCI1YjRlIjpmdW5jdGlvbih0LGUsbil7dmFyIHI9bigiMzZjMyIpLG89bigiYjQ0NyIpLGk9bigiMGZjOSIpO3QuZXhwb3J0cz1mdW5jdGlvbih0KXtyZXR1cm4gZnVuY3Rpb24oZSxuLHMpe3ZhciBhLGM9cihlKSxsPW8oYy5sZW5ndGgpLHA9aShzLGwpO2lmKHQmJm4hPW4pe3doaWxlKGw+cClpZihhPWNbcCsrXSxhIT1hKXJldHVybiEwfWVsc2UgZm9yKDtsPnA7cCsrKWlmKCh0fHxwIGluIGMpJiZjW3BdPT09bilyZXR1cm4gdHx8cHx8MDtyZXR1cm4hdCYmLTF9fX0sIjVjYTEiOmZ1bmN0aW9uKHQsZSxuKXt2YXIgcj1uKCI3NzI2Iiksbz1uKCI4Mzc4IiksaT1uKCIzMmU5Iikscz1uKCIyYWJhIiksYT1uKCI5YjQzIiksYz0icHJvdG90eXBlIixsPWZ1bmN0aW9uKHQsZSxuKXt2YXIgcCx1LGgsZixkPXQmbC5GLHY9dCZsLkcsbT10JmwuUyx5PXQmbC5QLGc9dCZsLkIsdz12P3I6bT9yW2VdfHwocltlXT17fSk6KHJbZV18fHt9KVtjXSx4PXY/bzpvW2VdfHwob1tlXT17fSksYj14W2NdfHwoeFtjXT17fSk7Zm9yKHAgaW4gdiYmKG49ZSksbil1PSFkJiZ3JiZ2b2lkIDAhPT13W3BdLGg9KHU/dzpuKVtwXSxmPWcmJnU/YShoLHIpOnkmJiJmdW5jdGlvbiI9PXR5cGVvZiBoP2EoRnVuY3Rpb24uY2FsbCxoKTpoLHcmJnModyxwLGgsdCZsLlUpLHhbcF0hPWgmJmkoeCxwLGYpLHkmJmJbcF0hPWgmJihiW3BdPWgpfTtyLmNvcmU9byxsLkY9MSxsLkc9MixsLlM9NCxsLlA9OCxsLkI9MTYsbC5XPTMyLGwuVT02NCxsLlI9MTI4LHQuZXhwb3J0cz1sfSwiNWQ3MyI6ZnVuY3Rpb24odCxlLG4pe3QuZXhwb3J0cz1uKCI0NjlmIil9LCI1ZGJlIjpmdW5jdGlvbih0LGUsbil7KGZ1bmN0aW9uKCl7dmFyIGU7ZnVuY3Rpb24gbigpe2NvbnNvbGUubG9nKG8uYXBwbHkobnVsbCxhcmd1bWVudHMpKX1mdW5jdGlvbiByKHQsZSl7cmV0dXJuIG8uYXBwbHkobnVsbCxbdF0uY29uY2F0KGUpKX1mdW5jdGlvbiBvKHQpe2Zvcih2YXIgZSxuLHIsbyxpPTEscz1bXS5zbGljZS5jYWxsKGFyZ3VtZW50cyksYT0wLGM9dC5sZW5ndGgsbD0iIixwPSExLHU9ITEsaD1mdW5jdGlvbigpe3JldHVybiBzW2krK119LGY9ZnVuY3Rpb24oKXt2YXIgbj0iIjt3aGlsZSgvXGQvLnRlc3QodFthXSkpbis9dFthKytdLGU9dFthXTtyZXR1cm4gbi5sZW5ndGg+MD9wYXJzZUludChuKTpudWxsfTthPGM7KythKWlmKGU9dFthXSxwKXN3aXRjaChwPSExLCIuIj09ZT8odT0hMSxlPXRbKythXSk6IjAiPT1lJiYiLiI9PXRbYSsxXT8odT0hMCxhKz0yLGU9dFthXSk6dT0hMCxvPWYoKSxlKXtjYXNlImIiOmwrPXBhcnNlSW50KGgoKSwxMCkudG9TdHJpbmcoMik7YnJlYWs7Y2FzZSJjIjpuPWgoKSwic3RyaW5nIj09PXR5cGVvZiBufHxuIGluc3RhbmNlb2YgU3RyaW5nP2wrPW46bCs9U3RyaW5nLmZyb21DaGFyQ29kZShwYXJzZUludChuLDEwKSk7YnJlYWs7Y2FzZSJkIjpsKz1wYXJzZUludChoKCksMTApO2JyZWFrO2Nhc2UiZiI6cj1TdHJpbmcocGFyc2VGbG9hdChoKCkpLnRvRml4ZWQob3x8NikpLGwrPXU/cjpyLnJlcGxhY2UoL14wLywiIik7YnJlYWs7Y2FzZSJqIjpsKz1KU09OLnN0cmluZ2lmeShoKCkpO2JyZWFrO2Nhc2UibyI6bCs9IjAiK3BhcnNlSW50KGgoKSwxMCkudG9TdHJpbmcoOCk7YnJlYWs7Y2FzZSJzIjpsKz1oKCk7YnJlYWs7Y2FzZSJ4IjpsKz0iMHgiK3BhcnNlSW50KGgoKSwxMCkudG9TdHJpbmcoMTYpO2JyZWFrO2Nhc2UiWCI6bCs9IjB4IitwYXJzZUludChoKCksMTApLnRvU3RyaW5nKDE2KS50b1VwcGVyQ2FzZSgpO2JyZWFrO2RlZmF1bHQ6bCs9ZTticmVha31lbHNlIiUiPT09ZT9wPSEwOmwrPWU7cmV0dXJuIGx9ZT10LmV4cG9ydHM9byxlLmZvcm1hdD1vLGUudnNwcmludGY9ciwidW5kZWZpbmVkIiE9PXR5cGVvZiBjb25zb2xlJiYiZnVuY3Rpb24iPT09dHlwZW9mIGNvbnNvbGUubG9nJiYoZS5wcmludGY9bil9KSgpfSwiNjEzYiI6ZnVuY3Rpb24odCxlLG4pe3ZhciByPW4oIjU1MzciKSgia2V5cyIpLG89bigiY2E1YSIpO3QuZXhwb3J0cz1mdW5jdGlvbih0KXtyZXR1cm4gclt0XXx8KHJbdF09byh0KSl9fSwiNjI2YSI6ZnVuY3Rpb24odCxlLG4pe3ZhciByPW4oIjJkOTUiKTt0LmV4cG9ydHM9T2JqZWN0KCJ6IikucHJvcGVydHlJc0VudW1lcmFibGUoMCk/T2JqZWN0OmZ1bmN0aW9uKHQpe3JldHVybiJTdHJpbmciPT1yKHQpP3Quc3BsaXQoIiIpOk9iamVjdCh0KX19LCI2MmEwIjpmdW5jdGlvbih0LGUpe3ZhciBuPTAscj1NYXRoLnJhbmRvbSgpO3QuZXhwb3J0cz1mdW5jdGlvbih0KXtyZXR1cm4iU3ltYm9sKCIuY29uY2F0KHZvaWQgMD09PXQ/IiI6dCwiKV8iLCgrK24rcikudG9TdHJpbmcoMzYpKX19LCI2MmVlIjpmdW5jdGlvbih0LGUsbil7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIHIodCl7cmV0dXJuIHQmJiJvYmplY3QiPT09dHlwZW9mIHQmJiJkZWZhdWx0ImluIHQ/dFsiZGVmYXVsdCJdOnR9T2JqZWN0LmRlZmluZVByb3BlcnR5KGUsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pO3ZhciBvPXIobigiZmFhMSIpKTtmdW5jdGlvbiBpKHQsZSxuKXtmb3IodmFyIHI9MDs7cisrKXtpZihyPT10LmNoaWxkQ291bnR8fHI9PWUuY2hpbGRDb3VudClyZXR1cm4gdC5jaGlsZENvdW50PT1lLmNoaWxkQ291bnQ/bnVsbDpuO3ZhciBvPXQuY2hpbGQocikscz1lLmNoaWxkKHIpO2lmKG8hPXMpe2lmKCFvLnNhbWVNYXJrdXAocykpcmV0dXJuIG47aWYoby5pc1RleHQmJm8udGV4dCE9cy50ZXh0KXtmb3IodmFyIGE9MDtvLnRleHRbYV09PXMudGV4dFthXTthKyspbisrO3JldHVybiBufWlmKG8uY29udGVudC5zaXplfHxzLmNvbnRlbnQuc2l6ZSl7dmFyIGM9aShvLmNvbnRlbnQscy5jb250ZW50LG4rMSk7aWYobnVsbCE9YylyZXR1cm4gY31uKz1vLm5vZGVTaXplfWVsc2Ugbis9by5ub2RlU2l6ZX19ZnVuY3Rpb24gcyh0LGUsbixyKXtmb3IodmFyIG89dC5jaGlsZENvdW50LGk9ZS5jaGlsZENvdW50Ozspe2lmKDA9PW98fDA9PWkpcmV0dXJuIG89PWk/bnVsbDp7YTpuLGI6cn07dmFyIGE9dC5jaGlsZCgtLW8pLGM9ZS5jaGlsZCgtLWkpLGw9YS5ub2RlU2l6ZTtpZihhIT1jKXtpZighYS5zYW1lTWFya3VwKGMpKXJldHVybnthOm4sYjpyfTtpZihhLmlzVGV4dCYmYS50ZXh0IT1jLnRleHQpe3ZhciBwPTAsdT1NYXRoLm1pbihhLnRleHQubGVuZ3RoLGMudGV4dC5sZW5ndGgpO3doaWxlKHA8dSYmYS50ZXh0W2EudGV4dC5sZW5ndGgtcC0xXT09Yy50ZXh0W2MudGV4dC5sZW5ndGgtcC0xXSlwKyssbi0tLHItLTtyZXR1cm57YTpuLGI6cn19aWYoYS5jb250ZW50LnNpemV8fGMuY29udGVudC5zaXplKXt2YXIgaD1zKGEuY29udGVudCxjLmNvbnRlbnQsbi0xLHItMSk7aWYoaClyZXR1cm4gaH1uLT1sLHItPWx9ZWxzZSBuLT1sLHItPWx9fXZhciBhPWZ1bmN0aW9uKHQsZSl7dmFyIG49dGhpcztpZih0aGlzLmNvbnRlbnQ9dCx0aGlzLnNpemU9ZXx8MCxudWxsPT1lKWZvcih2YXIgcj0wO3I8dC5sZW5ndGg7cisrKW4uc2l6ZSs9dFtyXS5ub2RlU2l6ZX0sYz17Zmlyc3RDaGlsZDp7fSxsYXN0Q2hpbGQ6e30sY2hpbGRDb3VudDp7fX07YS5wcm90b3R5cGUubm9kZXNCZXR3ZWVuPWZ1bmN0aW9uKHQsZSxuLHIsbyl7dmFyIGk9dGhpczt2b2lkIDA9PT1yJiYocj0wKTtmb3IodmFyIHM9MCxhPTA7YTxlO3MrKyl7dmFyIGM9aS5jb250ZW50W3NdLGw9YStjLm5vZGVTaXplO2lmKGw+dCYmITEhPT1uKGMscithLG8scykmJmMuY29udGVudC5zaXplKXt2YXIgcD1hKzE7Yy5ub2Rlc0JldHdlZW4oTWF0aC5tYXgoMCx0LXApLE1hdGgubWluKGMuY29udGVudC5zaXplLGUtcCksbixyK3ApfWE9bH19LGEucHJvdG90eXBlLmRlc2NlbmRhbnRzPWZ1bmN0aW9uKHQpe3RoaXMubm9kZXNCZXR3ZWVuKDAsdGhpcy5zaXplLHQpfSxhLnByb3RvdHlwZS50ZXh0QmV0d2Vlbj1mdW5jdGlvbih0LGUsbixyKXt2YXIgbz0iIixpPSEwO3JldHVybiB0aGlzLm5vZGVzQmV0d2Vlbih0LGUsKGZ1bmN0aW9uKHMsYSl7cy5pc1RleHQ/KG8rPXMudGV4dC5zbGljZShNYXRoLm1heCh0LGEpLWEsZS1hKSxpPSFuKTpzLmlzTGVhZiYmcj8obys9cixpPSFuKTohaSYmcy5pc0Jsb2NrJiYobys9bixpPSEwKX0pLDApLG99LGEucHJvdG90eXBlLmFwcGVuZD1mdW5jdGlvbih0KXtpZighdC5zaXplKXJldHVybiB0aGlzO2lmKCF0aGlzLnNpemUpcmV0dXJuIHQ7dmFyIGU9dGhpcy5sYXN0Q2hpbGQsbj10LmZpcnN0Q2hpbGQscj10aGlzLmNvbnRlbnQuc2xpY2UoKSxvPTA7Zm9yKGUuaXNUZXh0JiZlLnNhbWVNYXJrdXAobikmJihyW3IubGVuZ3RoLTFdPWUud2l0aFRleHQoZS50ZXh0K24udGV4dCksbz0xKTtvPHQuY29udGVudC5sZW5ndGg7bysrKXIucHVzaCh0LmNvbnRlbnRbb10pO3JldHVybiBuZXcgYShyLHRoaXMuc2l6ZSt0LnNpemUpfSxhLnByb3RvdHlwZS5jdXQ9ZnVuY3Rpb24odCxlKXt2YXIgbj10aGlzO2lmKG51bGw9PWUmJihlPXRoaXMuc2l6ZSksMD09dCYmZT09dGhpcy5zaXplKXJldHVybiB0aGlzO3ZhciByPVtdLG89MDtpZihlPnQpZm9yKHZhciBpPTAscz0wO3M8ZTtpKyspe3ZhciBjPW4uY29udGVudFtpXSxsPXMrYy5ub2RlU2l6ZTtsPnQmJigoczx0fHxsPmUpJiYoYz1jLmlzVGV4dD9jLmN1dChNYXRoLm1heCgwLHQtcyksTWF0aC5taW4oYy50ZXh0Lmxlbmd0aCxlLXMpKTpjLmN1dChNYXRoLm1heCgwLHQtcy0xKSxNYXRoLm1pbihjLmNvbnRlbnQuc2l6ZSxlLXMtMSkpKSxyLnB1c2goYyksbys9Yy5ub2RlU2l6ZSkscz1sfXJldHVybiBuZXcgYShyLG8pfSxhLnByb3RvdHlwZS5jdXRCeUluZGV4PWZ1bmN0aW9uKHQsZSl7cmV0dXJuIHQ9PWU/YS5lbXB0eTowPT10JiZlPT10aGlzLmNvbnRlbnQubGVuZ3RoP3RoaXM6bmV3IGEodGhpcy5jb250ZW50LnNsaWNlKHQsZSkpfSxhLnByb3RvdHlwZS5yZXBsYWNlQ2hpbGQ9ZnVuY3Rpb24odCxlKXt2YXIgbj10aGlzLmNvbnRlbnRbdF07aWYobj09ZSlyZXR1cm4gdGhpczt2YXIgcj10aGlzLmNvbnRlbnQuc2xpY2UoKSxvPXRoaXMuc2l6ZStlLm5vZGVTaXplLW4ubm9kZVNpemU7cmV0dXJuIHJbdF09ZSxuZXcgYShyLG8pfSxhLnByb3RvdHlwZS5hZGRUb1N0YXJ0PWZ1bmN0aW9uKHQpe3JldHVybiBuZXcgYShbdF0uY29uY2F0KHRoaXMuY29udGVudCksdGhpcy5zaXplK3Qubm9kZVNpemUpfSxhLnByb3RvdHlwZS5hZGRUb0VuZD1mdW5jdGlvbih0KXtyZXR1cm4gbmV3IGEodGhpcy5jb250ZW50LmNvbmNhdCh0KSx0aGlzLnNpemUrdC5ub2RlU2l6ZSl9LGEucHJvdG90eXBlLmVxPWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXM7aWYodGhpcy5jb250ZW50Lmxlbmd0aCE9dC5jb250ZW50Lmxlbmd0aClyZXR1cm4hMTtmb3IodmFyIG49MDtuPHRoaXMuY29udGVudC5sZW5ndGg7bisrKWlmKCFlLmNvbnRlbnRbbl0uZXEodC5jb250ZW50W25dKSlyZXR1cm4hMTtyZXR1cm4hMH0sYy5maXJzdENoaWxkLmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLmNvbnRlbnQubGVuZ3RoP3RoaXMuY29udGVudFswXTpudWxsfSxjLmxhc3RDaGlsZC5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jb250ZW50Lmxlbmd0aD90aGlzLmNvbnRlbnRbdGhpcy5jb250ZW50Lmxlbmd0aC0xXTpudWxsfSxjLmNoaWxkQ291bnQuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY29udGVudC5sZW5ndGh9LGEucHJvdG90eXBlLmNoaWxkPWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMuY29udGVudFt0XTtpZighZSl0aHJvdyBuZXcgUmFuZ2VFcnJvcigiSW5kZXggIit0KyIgb3V0IG9mIHJhbmdlIGZvciAiK3RoaXMpO3JldHVybiBlfSxhLnByb3RvdHlwZS5tYXliZUNoaWxkPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLmNvbnRlbnRbdF19LGEucHJvdG90eXBlLmZvckVhY2g9ZnVuY3Rpb24odCl7Zm9yKHZhciBlPXRoaXMsbj0wLHI9MDtuPHRoaXMuY29udGVudC5sZW5ndGg7bisrKXt2YXIgbz1lLmNvbnRlbnRbbl07dChvLHIsbikscis9by5ub2RlU2l6ZX19LGEucHJvdG90eXBlLmZpbmREaWZmU3RhcnQ9ZnVuY3Rpb24odCxlKXtyZXR1cm4gdm9pZCAwPT09ZSYmKGU9MCksaSh0aGlzLHQsZSl9LGEucHJvdG90eXBlLmZpbmREaWZmRW5kPWZ1bmN0aW9uKHQsZSxuKXtyZXR1cm4gdm9pZCAwPT09ZSYmKGU9dGhpcy5zaXplKSx2b2lkIDA9PT1uJiYobj10LnNpemUpLHModGhpcyx0LGUsbil9LGEucHJvdG90eXBlLmZpbmRJbmRleD1mdW5jdGlvbih0LGUpe3ZhciBuPXRoaXM7aWYodm9pZCAwPT09ZSYmKGU9LTEpLDA9PXQpcmV0dXJuIHAoMCx0KTtpZih0PT10aGlzLnNpemUpcmV0dXJuIHAodGhpcy5jb250ZW50Lmxlbmd0aCx0KTtpZih0PnRoaXMuc2l6ZXx8dDwwKXRocm93IG5ldyBSYW5nZUVycm9yKCJQb3NpdGlvbiAiK3QrIiBvdXRzaWRlIG9mIGZyYWdtZW50ICgiK3RoaXMrIikiKTtmb3IodmFyIHI9MCxvPTA7O3IrKyl7dmFyIGk9bi5jaGlsZChyKSxzPW8raS5ub2RlU2l6ZTtpZihzPj10KXJldHVybiBzPT10fHxlPjA/cChyKzEscyk6cChyLG8pO289c319LGEucHJvdG90eXBlLnRvU3RyaW5nPWZ1bmN0aW9uKCl7cmV0dXJuIjwiK3RoaXMudG9TdHJpbmdJbm5lcigpKyI+In0sYS5wcm90b3R5cGUudG9TdHJpbmdJbm5lcj1mdW5jdGlvbigpe3JldHVybiB0aGlzLmNvbnRlbnQuam9pbigiLCAiKX0sYS5wcm90b3R5cGUudG9KU09OPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY29udGVudC5sZW5ndGg/dGhpcy5jb250ZW50Lm1hcCgoZnVuY3Rpb24odCl7cmV0dXJuIHQudG9KU09OKCl9KSk6bnVsbH0sYS5mcm9tSlNPTj1mdW5jdGlvbih0LGUpe2lmKCFlKXJldHVybiBhLmVtcHR5O2lmKCFBcnJheS5pc0FycmF5KGUpKXRocm93IG5ldyBSYW5nZUVycm9yKCJJbnZhbGlkIGlucHV0IGZvciBGcmFnbWVudC5mcm9tSlNPTiIpO3JldHVybiBuZXcgYShlLm1hcCh0Lm5vZGVGcm9tSlNPTikpfSxhLmZyb21BcnJheT1mdW5jdGlvbih0KXtpZighdC5sZW5ndGgpcmV0dXJuIGEuZW1wdHk7Zm9yKHZhciBlLG49MCxyPTA7cjx0Lmxlbmd0aDtyKyspe3ZhciBvPXRbcl07bis9by5ub2RlU2l6ZSxyJiZvLmlzVGV4dCYmdFtyLTFdLnNhbWVNYXJrdXAobyk/KGV8fChlPXQuc2xpY2UoMCxyKSksZVtlLmxlbmd0aC0xXT1vLndpdGhUZXh0KGVbZS5sZW5ndGgtMV0udGV4dCtvLnRleHQpKTplJiZlLnB1c2gobyl9cmV0dXJuIG5ldyBhKGV8fHQsbil9LGEuZnJvbT1mdW5jdGlvbih0KXtpZighdClyZXR1cm4gYS5lbXB0eTtpZih0IGluc3RhbmNlb2YgYSlyZXR1cm4gdDtpZihBcnJheS5pc0FycmF5KHQpKXJldHVybiB0aGlzLmZyb21BcnJheSh0KTtpZih0LmF0dHJzKXJldHVybiBuZXcgYShbdF0sdC5ub2RlU2l6ZSk7dGhyb3cgbmV3IFJhbmdlRXJyb3IoIkNhbiBub3QgY29udmVydCAiK3QrIiB0byBhIEZyYWdtZW50IisodC5ub2Rlc0JldHdlZW4/IiAobG9va3MgbGlrZSBtdWx0aXBsZSB2ZXJzaW9ucyBvZiBwcm9zZW1pcnJvci1tb2RlbCB3ZXJlIGxvYWRlZCkiOiIiKSl9LE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKGEucHJvdG90eXBlLGMpO3ZhciBsPXtpbmRleDowLG9mZnNldDowfTtmdW5jdGlvbiBwKHQsZSl7cmV0dXJuIGwuaW5kZXg9dCxsLm9mZnNldD1lLGx9ZnVuY3Rpb24gdSh0LGUpe2lmKHQ9PT1lKXJldHVybiEwO2lmKCF0fHwib2JqZWN0IiE9dHlwZW9mIHR8fCFlfHwib2JqZWN0IiE9dHlwZW9mIGUpcmV0dXJuITE7dmFyIG49QXJyYXkuaXNBcnJheSh0KTtpZihBcnJheS5pc0FycmF5KGUpIT1uKXJldHVybiExO2lmKG4pe2lmKHQubGVuZ3RoIT1lLmxlbmd0aClyZXR1cm4hMTtmb3IodmFyIHI9MDtyPHQubGVuZ3RoO3IrKylpZighdSh0W3JdLGVbcl0pKXJldHVybiExfWVsc2V7Zm9yKHZhciBvIGluIHQpaWYoIShvIGluIGUpfHwhdSh0W29dLGVbb10pKXJldHVybiExO2Zvcih2YXIgaSBpbiBlKWlmKCEoaSBpbiB0KSlyZXR1cm4hMX1yZXR1cm4hMH1hLmVtcHR5PW5ldyBhKFtdLDApO3ZhciBoPWZ1bmN0aW9uKHQsZSl7dGhpcy50eXBlPXQsdGhpcy5hdHRycz1lfTtmdW5jdGlvbiBmKHQpe3ZhciBlPUVycm9yLmNhbGwodGhpcyx0KTtyZXR1cm4gZS5fX3Byb3RvX189Zi5wcm90b3R5cGUsZX1oLnByb3RvdHlwZS5hZGRUb1NldD1mdW5jdGlvbih0KXtmb3IodmFyIGUsbj10aGlzLHI9ITEsbz0wO288dC5sZW5ndGg7bysrKXt2YXIgaT10W29dO2lmKG4uZXEoaSkpcmV0dXJuIHQ7aWYobi50eXBlLmV4Y2x1ZGVzKGkudHlwZSkpZXx8KGU9dC5zbGljZSgwLG8pKTtlbHNle2lmKGkudHlwZS5leGNsdWRlcyhuLnR5cGUpKXJldHVybiB0OyFyJiZpLnR5cGUucmFuaz5uLnR5cGUucmFuayYmKGV8fChlPXQuc2xpY2UoMCxvKSksZS5wdXNoKG4pLHI9ITApLGUmJmUucHVzaChpKX19cmV0dXJuIGV8fChlPXQuc2xpY2UoKSkscnx8ZS5wdXNoKHRoaXMpLGV9LGgucHJvdG90eXBlLnJlbW92ZUZyb21TZXQ9ZnVuY3Rpb24odCl7Zm9yKHZhciBlPXRoaXMsbj0wO248dC5sZW5ndGg7bisrKWlmKGUuZXEodFtuXSkpcmV0dXJuIHQuc2xpY2UoMCxuKS5jb25jYXQodC5zbGljZShuKzEpKTtyZXR1cm4gdH0saC5wcm90b3R5cGUuaXNJblNldD1mdW5jdGlvbih0KXtmb3IodmFyIGU9dGhpcyxuPTA7bjx0Lmxlbmd0aDtuKyspaWYoZS5lcSh0W25dKSlyZXR1cm4hMDtyZXR1cm4hMX0saC5wcm90b3R5cGUuZXE9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXM9PXR8fHRoaXMudHlwZT09dC50eXBlJiZ1KHRoaXMuYXR0cnMsdC5hdHRycyl9LGgucHJvdG90eXBlLnRvSlNPTj1mdW5jdGlvbigpe3ZhciB0PXRoaXMsZT17dHlwZTp0aGlzLnR5cGUubmFtZX07Zm9yKHZhciBuIGluIHQuYXR0cnMpe2UuYXR0cnM9dC5hdHRyczticmVha31yZXR1cm4gZX0saC5mcm9tSlNPTj1mdW5jdGlvbih0LGUpe2lmKCFlKXRocm93IG5ldyBSYW5nZUVycm9yKCJJbnZhbGlkIGlucHV0IGZvciBNYXJrLmZyb21KU09OIik7dmFyIG49dC5tYXJrc1tlLnR5cGVdO2lmKCFuKXRocm93IG5ldyBSYW5nZUVycm9yKCJUaGVyZSBpcyBubyBtYXJrIHR5cGUgIitlLnR5cGUrIiBpbiB0aGlzIHNjaGVtYSIpO3JldHVybiBuLmNyZWF0ZShlLmF0dHJzKX0saC5zYW1lU2V0PWZ1bmN0aW9uKHQsZSl7aWYodD09ZSlyZXR1cm4hMDtpZih0Lmxlbmd0aCE9ZS5sZW5ndGgpcmV0dXJuITE7Zm9yKHZhciBuPTA7bjx0Lmxlbmd0aDtuKyspaWYoIXRbbl0uZXEoZVtuXSkpcmV0dXJuITE7cmV0dXJuITB9LGguc2V0RnJvbT1mdW5jdGlvbih0KXtpZighdHx8MD09dC5sZW5ndGgpcmV0dXJuIGgubm9uZTtpZih0IGluc3RhbmNlb2YgaClyZXR1cm5bdF07dmFyIGU9dC5zbGljZSgpO3JldHVybiBlLnNvcnQoKGZ1bmN0aW9uKHQsZSl7cmV0dXJuIHQudHlwZS5yYW5rLWUudHlwZS5yYW5rfSkpLGV9LGgubm9uZT1bXSxmLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKEVycm9yLnByb3RvdHlwZSksZi5wcm90b3R5cGUuY29uc3RydWN0b3I9ZixmLnByb3RvdHlwZS5uYW1lPSJSZXBsYWNlRXJyb3IiO3ZhciBkPWZ1bmN0aW9uKHQsZSxuKXt0aGlzLmNvbnRlbnQ9dCx0aGlzLm9wZW5TdGFydD1lLHRoaXMub3BlbkVuZD1ufSx2PXtzaXplOnt9fTtmdW5jdGlvbiBtKHQsZSxuKXt2YXIgcj10LmZpbmRJbmRleChlKSxvPXIuaW5kZXgsaT1yLm9mZnNldCxzPXQubWF5YmVDaGlsZChvKSxhPXQuZmluZEluZGV4KG4pLGM9YS5pbmRleCxsPWEub2Zmc2V0O2lmKGk9PWV8fHMuaXNUZXh0KXtpZihsIT1uJiYhdC5jaGlsZChjKS5pc1RleHQpdGhyb3cgbmV3IFJhbmdlRXJyb3IoIlJlbW92aW5nIG5vbi1mbGF0IHJhbmdlIik7cmV0dXJuIHQuY3V0KDAsZSkuYXBwZW5kKHQuY3V0KG4pKX1pZihvIT1jKXRocm93IG5ldyBSYW5nZUVycm9yKCJSZW1vdmluZyBub24tZmxhdCByYW5nZSIpO3JldHVybiB0LnJlcGxhY2VDaGlsZChvLHMuY29weShtKHMuY29udGVudCxlLWktMSxuLWktMSkpKX1mdW5jdGlvbiB5KHQsZSxuLHIpe3ZhciBvPXQuZmluZEluZGV4KGUpLGk9by5pbmRleCxzPW8ub2Zmc2V0LGE9dC5tYXliZUNoaWxkKGkpO2lmKHM9PWV8fGEuaXNUZXh0KXJldHVybiByJiYhci5jYW5SZXBsYWNlKGksaSxuKT9udWxsOnQuY3V0KDAsZSkuYXBwZW5kKG4pLmFwcGVuZCh0LmN1dChlKSk7dmFyIGM9eShhLmNvbnRlbnQsZS1zLTEsbik7cmV0dXJuIGMmJnQucmVwbGFjZUNoaWxkKGksYS5jb3B5KGMpKX1mdW5jdGlvbiBnKHQsZSxuKXtpZihuLm9wZW5TdGFydD50LmRlcHRoKXRocm93IG5ldyBmKCJJbnNlcnRlZCBjb250ZW50IGRlZXBlciB0aGFuIGluc2VydGlvbiBwb3NpdGlvbiIpO2lmKHQuZGVwdGgtbi5vcGVuU3RhcnQhPWUuZGVwdGgtbi5vcGVuRW5kKXRocm93IG5ldyBmKCJJbmNvbnNpc3RlbnQgb3BlbiBkZXB0aHMiKTtyZXR1cm4gdyh0LGUsbiwwKX1mdW5jdGlvbiB3KHQsZSxuLHIpe3ZhciBvPXQuaW5kZXgociksaT10Lm5vZGUocik7aWYobz09ZS5pbmRleChyKSYmcjx0LmRlcHRoLW4ub3BlblN0YXJ0KXt2YXIgcz13KHQsZSxuLHIrMSk7cmV0dXJuIGkuY29weShpLmNvbnRlbnQucmVwbGFjZUNoaWxkKG8scykpfWlmKG4uY29udGVudC5zaXplKXtpZihuLm9wZW5TdGFydHx8bi5vcGVuRW5kfHx0LmRlcHRoIT1yfHxlLmRlcHRoIT1yKXt2YXIgYT1UKG4sdCksYz1hLnN0YXJ0LGw9YS5lbmQ7cmV0dXJuIEMoaSxPKHQsYyxsLGUscikpfXZhciBwPXQucGFyZW50LHU9cC5jb250ZW50O3JldHVybiBDKHAsdS5jdXQoMCx0LnBhcmVudE9mZnNldCkuYXBwZW5kKG4uY29udGVudCkuYXBwZW5kKHUuY3V0KGUucGFyZW50T2Zmc2V0KSkpfXJldHVybiBDKGksTSh0LGUscikpfWZ1bmN0aW9uIHgodCxlKXtpZighZS50eXBlLmNvbXBhdGlibGVDb250ZW50KHQudHlwZSkpdGhyb3cgbmV3IGYoIkNhbm5vdCBqb2luICIrZS50eXBlLm5hbWUrIiBvbnRvICIrdC50eXBlLm5hbWUpfWZ1bmN0aW9uIGIodCxlLG4pe3ZhciByPXQubm9kZShuKTtyZXR1cm4geChyLGUubm9kZShuKSkscn1mdW5jdGlvbiBrKHQsZSl7dmFyIG49ZS5sZW5ndGgtMTtuPj0wJiZ0LmlzVGV4dCYmdC5zYW1lTWFya3VwKGVbbl0pP2Vbbl09dC53aXRoVGV4dChlW25dLnRleHQrdC50ZXh0KTplLnB1c2godCl9ZnVuY3Rpb24gUyh0LGUsbixyKXt2YXIgbz0oZXx8dCkubm9kZShuKSxpPTAscz1lP2UuaW5kZXgobik6by5jaGlsZENvdW50O3QmJihpPXQuaW5kZXgobiksdC5kZXB0aD5uP2krKzp0LnRleHRPZmZzZXQmJihrKHQubm9kZUFmdGVyLHIpLGkrKykpO2Zvcih2YXIgYT1pO2E8czthKyspayhvLmNoaWxkKGEpLHIpO2UmJmUuZGVwdGg9PW4mJmUudGV4dE9mZnNldCYmayhlLm5vZGVCZWZvcmUscil9ZnVuY3Rpb24gQyh0LGUpe2lmKCF0LnR5cGUudmFsaWRDb250ZW50KGUpKXRocm93IG5ldyBmKCJJbnZhbGlkIGNvbnRlbnQgZm9yIG5vZGUgIit0LnR5cGUubmFtZSk7cmV0dXJuIHQuY29weShlKX1mdW5jdGlvbiBPKHQsZSxuLHIsbyl7dmFyIGk9dC5kZXB0aD5vJiZiKHQsZSxvKzEpLHM9ci5kZXB0aD5vJiZiKG4scixvKzEpLGM9W107cmV0dXJuIFMobnVsbCx0LG8sYyksaSYmcyYmZS5pbmRleChvKT09bi5pbmRleChvKT8oeChpLHMpLGsoQyhpLE8odCxlLG4scixvKzEpKSxjKSk6KGkmJmsoQyhpLE0odCxlLG8rMSkpLGMpLFMoZSxuLG8sYykscyYmayhDKHMsTShuLHIsbysxKSksYykpLFMocixudWxsLG8sYyksbmV3IGEoYyl9ZnVuY3Rpb24gTSh0LGUsbil7dmFyIHI9W107aWYoUyhudWxsLHQsbixyKSx0LmRlcHRoPm4pe3ZhciBvPWIodCxlLG4rMSk7ayhDKG8sTSh0LGUsbisxKSkscil9cmV0dXJuIFMoZSxudWxsLG4sciksbmV3IGEocil9ZnVuY3Rpb24gVCh0LGUpe2Zvcih2YXIgbj1lLmRlcHRoLXQub3BlblN0YXJ0LHI9ZS5ub2RlKG4pLG89ci5jb3B5KHQuY29udGVudCksaT1uLTE7aT49MDtpLS0pbz1lLm5vZGUoaSkuY29weShhLmZyb20obykpO3JldHVybntzdGFydDpvLnJlc29sdmVOb0NhY2hlKHQub3BlblN0YXJ0K24pLGVuZDpvLnJlc29sdmVOb0NhY2hlKG8uY29udGVudC5zaXplLXQub3BlbkVuZC1uKX19di5zaXplLmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLmNvbnRlbnQuc2l6ZS10aGlzLm9wZW5TdGFydC10aGlzLm9wZW5FbmR9LGQucHJvdG90eXBlLmluc2VydEF0PWZ1bmN0aW9uKHQsZSl7dmFyIG49eSh0aGlzLmNvbnRlbnQsdCt0aGlzLm9wZW5TdGFydCxlLG51bGwpO3JldHVybiBuJiZuZXcgZChuLHRoaXMub3BlblN0YXJ0LHRoaXMub3BlbkVuZCl9LGQucHJvdG90eXBlLnJlbW92ZUJldHdlZW49ZnVuY3Rpb24odCxlKXtyZXR1cm4gbmV3IGQobSh0aGlzLmNvbnRlbnQsdCt0aGlzLm9wZW5TdGFydCxlK3RoaXMub3BlblN0YXJ0KSx0aGlzLm9wZW5TdGFydCx0aGlzLm9wZW5FbmQpfSxkLnByb3RvdHlwZS5lcT1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5jb250ZW50LmVxKHQuY29udGVudCkmJnRoaXMub3BlblN0YXJ0PT10Lm9wZW5TdGFydCYmdGhpcy5vcGVuRW5kPT10Lm9wZW5FbmR9LGQucHJvdG90eXBlLnRvU3RyaW5nPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY29udGVudCsiKCIrdGhpcy5vcGVuU3RhcnQrIiwiK3RoaXMub3BlbkVuZCsiKSJ9LGQucHJvdG90eXBlLnRvSlNPTj1mdW5jdGlvbigpe2lmKCF0aGlzLmNvbnRlbnQuc2l6ZSlyZXR1cm4gbnVsbDt2YXIgdD17Y29udGVudDp0aGlzLmNvbnRlbnQudG9KU09OKCl9O3JldHVybiB0aGlzLm9wZW5TdGFydD4wJiYodC5vcGVuU3RhcnQ9dGhpcy5vcGVuU3RhcnQpLHRoaXMub3BlbkVuZD4wJiYodC5vcGVuRW5kPXRoaXMub3BlbkVuZCksdH0sZC5mcm9tSlNPTj1mdW5jdGlvbih0LGUpe2lmKCFlKXJldHVybiBkLmVtcHR5O3ZhciBuPWUub3BlblN0YXJ0fHwwLHI9ZS5vcGVuRW5kfHwwO2lmKCJudW1iZXIiIT10eXBlb2Ygbnx8Im51bWJlciIhPXR5cGVvZiByKXRocm93IG5ldyBSYW5nZUVycm9yKCJJbnZhbGlkIGlucHV0IGZvciBTbGljZS5mcm9tSlNPTiIpO3JldHVybiBuZXcgZChhLmZyb21KU09OKHQsZS5jb250ZW50KSxlLm9wZW5TdGFydHx8MCxlLm9wZW5FbmR8fDApfSxkLm1heE9wZW49ZnVuY3Rpb24odCxlKXt2b2lkIDA9PT1lJiYoZT0hMCk7Zm9yKHZhciBuPTAscj0wLG89dC5maXJzdENoaWxkO28mJiFvLmlzTGVhZiYmKGV8fCFvLnR5cGUuc3BlYy5pc29sYXRpbmcpO289by5maXJzdENoaWxkKW4rKztmb3IodmFyIGk9dC5sYXN0Q2hpbGQ7aSYmIWkuaXNMZWFmJiYoZXx8IWkudHlwZS5zcGVjLmlzb2xhdGluZyk7aT1pLmxhc3RDaGlsZClyKys7cmV0dXJuIG5ldyBkKHQsbixyKX0sT2JqZWN0LmRlZmluZVByb3BlcnRpZXMoZC5wcm90b3R5cGUsdiksZC5lbXB0eT1uZXcgZChhLmVtcHR5LDAsMCk7dmFyIE49ZnVuY3Rpb24odCxlLG4pe3RoaXMucG9zPXQsdGhpcy5wYXRoPWUsdGhpcy5kZXB0aD1lLmxlbmd0aC8zLTEsdGhpcy5wYXJlbnRPZmZzZXQ9bn0sRT17cGFyZW50Ont9LGRvYzp7fSx0ZXh0T2Zmc2V0Ont9LG5vZGVBZnRlcjp7fSxub2RlQmVmb3JlOnt9fTtOLnByb3RvdHlwZS5yZXNvbHZlRGVwdGg9ZnVuY3Rpb24odCl7cmV0dXJuIG51bGw9PXQ/dGhpcy5kZXB0aDp0PDA/dGhpcy5kZXB0aCt0OnR9LEUucGFyZW50LmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLm5vZGUodGhpcy5kZXB0aCl9LEUuZG9jLmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLm5vZGUoMCl9LE4ucHJvdG90eXBlLm5vZGU9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMucGF0aFszKnRoaXMucmVzb2x2ZURlcHRoKHQpXX0sTi5wcm90b3R5cGUuaW5kZXg9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMucGF0aFszKnRoaXMucmVzb2x2ZURlcHRoKHQpKzFdfSxOLnByb3RvdHlwZS5pbmRleEFmdGVyPWZ1bmN0aW9uKHQpe3JldHVybiB0PXRoaXMucmVzb2x2ZURlcHRoKHQpLHRoaXMuaW5kZXgodCkrKHQhPXRoaXMuZGVwdGh8fHRoaXMudGV4dE9mZnNldD8xOjApfSxOLnByb3RvdHlwZS5zdGFydD1mdW5jdGlvbih0KXtyZXR1cm4gdD10aGlzLnJlc29sdmVEZXB0aCh0KSwwPT10PzA6dGhpcy5wYXRoWzMqdC0xXSsxfSxOLnByb3RvdHlwZS5lbmQ9ZnVuY3Rpb24odCl7cmV0dXJuIHQ9dGhpcy5yZXNvbHZlRGVwdGgodCksdGhpcy5zdGFydCh0KSt0aGlzLm5vZGUodCkuY29udGVudC5zaXplfSxOLnByb3RvdHlwZS5iZWZvcmU9ZnVuY3Rpb24odCl7aWYodD10aGlzLnJlc29sdmVEZXB0aCh0KSwhdCl0aHJvdyBuZXcgUmFuZ2VFcnJvcigiVGhlcmUgaXMgbm8gcG9zaXRpb24gYmVmb3JlIHRoZSB0b3AtbGV2ZWwgbm9kZSIpO3JldHVybiB0PT10aGlzLmRlcHRoKzE/dGhpcy5wb3M6dGhpcy5wYXRoWzMqdC0xXX0sTi5wcm90b3R5cGUuYWZ0ZXI9ZnVuY3Rpb24odCl7aWYodD10aGlzLnJlc29sdmVEZXB0aCh0KSwhdCl0aHJvdyBuZXcgUmFuZ2VFcnJvcigiVGhlcmUgaXMgbm8gcG9zaXRpb24gYWZ0ZXIgdGhlIHRvcC1sZXZlbCBub2RlIik7cmV0dXJuIHQ9PXRoaXMuZGVwdGgrMT90aGlzLnBvczp0aGlzLnBhdGhbMyp0LTFdK3RoaXMucGF0aFszKnRdLm5vZGVTaXplfSxFLnRleHRPZmZzZXQuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucG9zLXRoaXMucGF0aFt0aGlzLnBhdGgubGVuZ3RoLTFdfSxFLm5vZGVBZnRlci5nZXQ9ZnVuY3Rpb24oKXt2YXIgdD10aGlzLnBhcmVudCxlPXRoaXMuaW5kZXgodGhpcy5kZXB0aCk7aWYoZT09dC5jaGlsZENvdW50KXJldHVybiBudWxsO3ZhciBuPXRoaXMucG9zLXRoaXMucGF0aFt0aGlzLnBhdGgubGVuZ3RoLTFdLHI9dC5jaGlsZChlKTtyZXR1cm4gbj90LmNoaWxkKGUpLmN1dChuKTpyfSxFLm5vZGVCZWZvcmUuZ2V0PWZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5pbmRleCh0aGlzLmRlcHRoKSxlPXRoaXMucG9zLXRoaXMucGF0aFt0aGlzLnBhdGgubGVuZ3RoLTFdO3JldHVybiBlP3RoaXMucGFyZW50LmNoaWxkKHQpLmN1dCgwLGUpOjA9PXQ/bnVsbDp0aGlzLnBhcmVudC5jaGlsZCh0LTEpfSxOLnByb3RvdHlwZS5tYXJrcz1mdW5jdGlvbigpe3ZhciB0PXRoaXMucGFyZW50LGU9dGhpcy5pbmRleCgpO2lmKDA9PXQuY29udGVudC5zaXplKXJldHVybiBoLm5vbmU7aWYodGhpcy50ZXh0T2Zmc2V0KXJldHVybiB0LmNoaWxkKGUpLm1hcmtzO3ZhciBuPXQubWF5YmVDaGlsZChlLTEpLHI9dC5tYXliZUNoaWxkKGUpO2lmKCFuKXt2YXIgbz1uO249cixyPW99Zm9yKHZhciBpPW4ubWFya3Mscz0wO3M8aS5sZW5ndGg7cysrKSExIT09aVtzXS50eXBlLnNwZWMuaW5jbHVzaXZlfHxyJiZpW3NdLmlzSW5TZXQoci5tYXJrcyl8fChpPWlbcy0tXS5yZW1vdmVGcm9tU2V0KGkpKTtyZXR1cm4gaX0sTi5wcm90b3R5cGUubWFya3NBY3Jvc3M9ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5wYXJlbnQubWF5YmVDaGlsZCh0aGlzLmluZGV4KCkpO2lmKCFlfHwhZS5pc0lubGluZSlyZXR1cm4gbnVsbDtmb3IodmFyIG49ZS5tYXJrcyxyPXQucGFyZW50Lm1heWJlQ2hpbGQodC5pbmRleCgpKSxvPTA7bzxuLmxlbmd0aDtvKyspITEhPT1uW29dLnR5cGUuc3BlYy5pbmNsdXNpdmV8fHImJm5bb10uaXNJblNldChyLm1hcmtzKXx8KG49bltvLS1dLnJlbW92ZUZyb21TZXQobikpO3JldHVybiBufSxOLnByb3RvdHlwZS5zaGFyZWREZXB0aD1mdW5jdGlvbih0KXtmb3IodmFyIGU9dGhpcyxuPXRoaXMuZGVwdGg7bj4wO24tLSlpZihlLnN0YXJ0KG4pPD10JiZlLmVuZChuKT49dClyZXR1cm4gbjtyZXR1cm4gMH0sTi5wcm90b3R5cGUuYmxvY2tSYW5nZT1mdW5jdGlvbih0LGUpe3ZhciBuPXRoaXM7aWYodm9pZCAwPT09dCYmKHQ9dGhpcyksdC5wb3M8dGhpcy5wb3MpcmV0dXJuIHQuYmxvY2tSYW5nZSh0aGlzKTtmb3IodmFyIHI9dGhpcy5kZXB0aC0odGhpcy5wYXJlbnQuaW5saW5lQ29udGVudHx8dGhpcy5wb3M9PXQucG9zPzE6MCk7cj49MDtyLS0paWYodC5wb3M8PW4uZW5kKHIpJiYoIWV8fGUobi5ub2RlKHIpKSkpcmV0dXJuIG5ldyB6KG4sdCxyKX0sTi5wcm90b3R5cGUuc2FtZVBhcmVudD1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5wb3MtdGhpcy5wYXJlbnRPZmZzZXQ9PXQucG9zLXQucGFyZW50T2Zmc2V0fSxOLnByb3RvdHlwZS5tYXg9ZnVuY3Rpb24odCl7cmV0dXJuIHQucG9zPnRoaXMucG9zP3Q6dGhpc30sTi5wcm90b3R5cGUubWluPWZ1bmN0aW9uKHQpe3JldHVybiB0LnBvczx0aGlzLnBvcz90OnRoaXN9LE4ucHJvdG90eXBlLnRvU3RyaW5nPWZ1bmN0aW9uKCl7Zm9yKHZhciB0PXRoaXMsZT0iIixuPTE7bjw9dGhpcy5kZXB0aDtuKyspZSs9KGU/Ii8iOiIiKSt0Lm5vZGUobikudHlwZS5uYW1lKyJfIit0LmluZGV4KG4tMSk7cmV0dXJuIGUrIjoiK3RoaXMucGFyZW50T2Zmc2V0fSxOLnJlc29sdmU9ZnVuY3Rpb24odCxlKXtpZighKGU+PTAmJmU8PXQuY29udGVudC5zaXplKSl0aHJvdyBuZXcgUmFuZ2VFcnJvcigiUG9zaXRpb24gIitlKyIgb3V0IG9mIHJhbmdlIik7Zm9yKHZhciBuPVtdLHI9MCxvPWUsaT10Ozspe3ZhciBzPWkuY29udGVudC5maW5kSW5kZXgobyksYT1zLmluZGV4LGM9cy5vZmZzZXQsbD1vLWM7aWYobi5wdXNoKGksYSxyK2MpLCFsKWJyZWFrO2lmKGk9aS5jaGlsZChhKSxpLmlzVGV4dClicmVhaztvPWwtMSxyKz1jKzF9cmV0dXJuIG5ldyBOKGUsbixvKX0sTi5yZXNvbHZlQ2FjaGVkPWZ1bmN0aW9uKHQsZSl7Zm9yKHZhciBuPTA7bjxBLmxlbmd0aDtuKyspe3ZhciByPUFbbl07aWYoci5wb3M9PWUmJnIuZG9jPT10KXJldHVybiByfXZhciBvPUFbUl09Ti5yZXNvbHZlKHQsZSk7cmV0dXJuIFI9KFIrMSklRCxvfSxPYmplY3QuZGVmaW5lUHJvcGVydGllcyhOLnByb3RvdHlwZSxFKTt2YXIgQT1bXSxSPTAsRD0xMix6PWZ1bmN0aW9uKHQsZSxuKXt0aGlzLiRmcm9tPXQsdGhpcy4kdG89ZSx0aGlzLmRlcHRoPW59LFA9e3N0YXJ0Ont9LGVuZDp7fSxwYXJlbnQ6e30sc3RhcnRJbmRleDp7fSxlbmRJbmRleDp7fX07UC5zdGFydC5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy4kZnJvbS5iZWZvcmUodGhpcy5kZXB0aCsxKX0sUC5lbmQuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuJHRvLmFmdGVyKHRoaXMuZGVwdGgrMSl9LFAucGFyZW50LmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLiRmcm9tLm5vZGUodGhpcy5kZXB0aCl9LFAuc3RhcnRJbmRleC5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy4kZnJvbS5pbmRleCh0aGlzLmRlcHRoKX0sUC5lbmRJbmRleC5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy4kdG8uaW5kZXhBZnRlcih0aGlzLmRlcHRoKX0sT2JqZWN0LmRlZmluZVByb3BlcnRpZXMoei5wcm90b3R5cGUsUCk7dmFyIEk9T2JqZWN0LmNyZWF0ZShudWxsKSxfPWZ1bmN0aW9uKHQsZSxuLHIpe3RoaXMudHlwZT10LHRoaXMuYXR0cnM9ZSx0aGlzLmNvbnRlbnQ9bnx8YS5lbXB0eSx0aGlzLm1hcmtzPXJ8fGgubm9uZX0sRj17bm9kZVNpemU6e30sY2hpbGRDb3VudDp7fSx0ZXh0Q29udGVudDp7fSxmaXJzdENoaWxkOnt9LGxhc3RDaGlsZDp7fSxpc0Jsb2NrOnt9LGlzVGV4dGJsb2NrOnt9LGlubGluZUNvbnRlbnQ6e30saXNJbmxpbmU6e30saXNUZXh0Ont9LGlzTGVhZjp7fSxpc0F0b206e319O0Yubm9kZVNpemUuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuaXNMZWFmPzE6Mit0aGlzLmNvbnRlbnQuc2l6ZX0sRi5jaGlsZENvdW50LmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLmNvbnRlbnQuY2hpbGRDb3VudH0sXy5wcm90b3R5cGUuY2hpbGQ9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuY29udGVudC5jaGlsZCh0KX0sXy5wcm90b3R5cGUubWF5YmVDaGlsZD1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5jb250ZW50Lm1heWJlQ2hpbGQodCl9LF8ucHJvdG90eXBlLmZvckVhY2g9ZnVuY3Rpb24odCl7dGhpcy5jb250ZW50LmZvckVhY2godCl9LF8ucHJvdG90eXBlLm5vZGVzQmV0d2Vlbj1mdW5jdGlvbih0LGUsbixyKXt2b2lkIDA9PT1yJiYocj0wKSx0aGlzLmNvbnRlbnQubm9kZXNCZXR3ZWVuKHQsZSxuLHIsdGhpcyl9LF8ucHJvdG90eXBlLmRlc2NlbmRhbnRzPWZ1bmN0aW9uKHQpe3RoaXMubm9kZXNCZXR3ZWVuKDAsdGhpcy5jb250ZW50LnNpemUsdCl9LEYudGV4dENvbnRlbnQuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudGV4dEJldHdlZW4oMCx0aGlzLmNvbnRlbnQuc2l6ZSwiIil9LF8ucHJvdG90eXBlLnRleHRCZXR3ZWVuPWZ1bmN0aW9uKHQsZSxuLHIpe3JldHVybiB0aGlzLmNvbnRlbnQudGV4dEJldHdlZW4odCxlLG4scil9LEYuZmlyc3RDaGlsZC5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jb250ZW50LmZpcnN0Q2hpbGR9LEYubGFzdENoaWxkLmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLmNvbnRlbnQubGFzdENoaWxkfSxfLnByb3RvdHlwZS5lcT1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcz09dHx8dGhpcy5zYW1lTWFya3VwKHQpJiZ0aGlzLmNvbnRlbnQuZXEodC5jb250ZW50KX0sXy5wcm90b3R5cGUuc2FtZU1hcmt1cD1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5oYXNNYXJrdXAodC50eXBlLHQuYXR0cnMsdC5tYXJrcyl9LF8ucHJvdG90eXBlLmhhc01hcmt1cD1mdW5jdGlvbih0LGUsbil7cmV0dXJuIHRoaXMudHlwZT09dCYmdSh0aGlzLmF0dHJzLGV8fHQuZGVmYXVsdEF0dHJzfHxJKSYmaC5zYW1lU2V0KHRoaXMubWFya3Msbnx8aC5ub25lKX0sXy5wcm90b3R5cGUuY29weT1mdW5jdGlvbih0KXtyZXR1cm4gdm9pZCAwPT09dCYmKHQ9bnVsbCksdD09dGhpcy5jb250ZW50P3RoaXM6bmV3IHRoaXMuY29uc3RydWN0b3IodGhpcy50eXBlLHRoaXMuYXR0cnMsdCx0aGlzLm1hcmtzKX0sXy5wcm90b3R5cGUubWFyaz1mdW5jdGlvbih0KXtyZXR1cm4gdD09dGhpcy5tYXJrcz90aGlzOm5ldyB0aGlzLmNvbnN0cnVjdG9yKHRoaXMudHlwZSx0aGlzLmF0dHJzLHRoaXMuY29udGVudCx0KX0sXy5wcm90b3R5cGUuY3V0PWZ1bmN0aW9uKHQsZSl7cmV0dXJuIDA9PXQmJmU9PXRoaXMuY29udGVudC5zaXplP3RoaXM6dGhpcy5jb3B5KHRoaXMuY29udGVudC5jdXQodCxlKSl9LF8ucHJvdG90eXBlLnNsaWNlPWZ1bmN0aW9uKHQsZSxuKXtpZih2b2lkIDA9PT1lJiYoZT10aGlzLmNvbnRlbnQuc2l6ZSksdm9pZCAwPT09biYmKG49ITEpLHQ9PWUpcmV0dXJuIGQuZW1wdHk7dmFyIHI9dGhpcy5yZXNvbHZlKHQpLG89dGhpcy5yZXNvbHZlKGUpLGk9bj8wOnIuc2hhcmVkRGVwdGgoZSkscz1yLnN0YXJ0KGkpLGE9ci5ub2RlKGkpLGM9YS5jb250ZW50LmN1dChyLnBvcy1zLG8ucG9zLXMpO3JldHVybiBuZXcgZChjLHIuZGVwdGgtaSxvLmRlcHRoLWkpfSxfLnByb3RvdHlwZS5yZXBsYWNlPWZ1bmN0aW9uKHQsZSxuKXtyZXR1cm4gZyh0aGlzLnJlc29sdmUodCksdGhpcy5yZXNvbHZlKGUpLG4pfSxfLnByb3RvdHlwZS5ub2RlQXQ9ZnVuY3Rpb24odCl7Zm9yKHZhciBlPXRoaXM7Oyl7dmFyIG49ZS5jb250ZW50LmZpbmRJbmRleCh0KSxyPW4uaW5kZXgsbz1uLm9mZnNldDtpZihlPWUubWF5YmVDaGlsZChyKSwhZSlyZXR1cm4gbnVsbDtpZihvPT10fHxlLmlzVGV4dClyZXR1cm4gZTt0LT1vKzF9fSxfLnByb3RvdHlwZS5jaGlsZEFmdGVyPWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMuY29udGVudC5maW5kSW5kZXgodCksbj1lLmluZGV4LHI9ZS5vZmZzZXQ7cmV0dXJue25vZGU6dGhpcy5jb250ZW50Lm1heWJlQ2hpbGQobiksaW5kZXg6bixvZmZzZXQ6cn19LF8ucHJvdG90eXBlLmNoaWxkQmVmb3JlPWZ1bmN0aW9uKHQpe2lmKDA9PXQpcmV0dXJue25vZGU6bnVsbCxpbmRleDowLG9mZnNldDowfTt2YXIgZT10aGlzLmNvbnRlbnQuZmluZEluZGV4KHQpLG49ZS5pbmRleCxyPWUub2Zmc2V0O2lmKHI8dClyZXR1cm57bm9kZTp0aGlzLmNvbnRlbnQuY2hpbGQobiksaW5kZXg6bixvZmZzZXQ6cn07dmFyIG89dGhpcy5jb250ZW50LmNoaWxkKG4tMSk7cmV0dXJue25vZGU6byxpbmRleDpuLTEsb2Zmc2V0OnItby5ub2RlU2l6ZX19LF8ucHJvdG90eXBlLnJlc29sdmU9ZnVuY3Rpb24odCl7cmV0dXJuIE4ucmVzb2x2ZUNhY2hlZCh0aGlzLHQpfSxfLnByb3RvdHlwZS5yZXNvbHZlTm9DYWNoZT1mdW5jdGlvbih0KXtyZXR1cm4gTi5yZXNvbHZlKHRoaXMsdCl9LF8ucHJvdG90eXBlLnJhbmdlSGFzTWFyaz1mdW5jdGlvbih0LGUsbil7dmFyIHI9ITE7cmV0dXJuIGU+dCYmdGhpcy5ub2Rlc0JldHdlZW4odCxlLChmdW5jdGlvbih0KXtyZXR1cm4gbi5pc0luU2V0KHQubWFya3MpJiYocj0hMCksIXJ9KSkscn0sRi5pc0Jsb2NrLmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLnR5cGUuaXNCbG9ja30sRi5pc1RleHRibG9jay5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy50eXBlLmlzVGV4dGJsb2NrfSxGLmlubGluZUNvbnRlbnQuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudHlwZS5pbmxpbmVDb250ZW50fSxGLmlzSW5saW5lLmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLnR5cGUuaXNJbmxpbmV9LEYuaXNUZXh0LmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLnR5cGUuaXNUZXh0fSxGLmlzTGVhZi5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy50eXBlLmlzTGVhZn0sRi5pc0F0b20uZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudHlwZS5pc0F0b219LF8ucHJvdG90eXBlLnRvU3RyaW5nPWZ1bmN0aW9uKCl7aWYodGhpcy50eXBlLnNwZWMudG9EZWJ1Z1N0cmluZylyZXR1cm4gdGhpcy50eXBlLnNwZWMudG9EZWJ1Z1N0cmluZyh0aGlzKTt2YXIgdD10aGlzLnR5cGUubmFtZTtyZXR1cm4gdGhpcy5jb250ZW50LnNpemUmJih0Kz0iKCIrdGhpcy5jb250ZW50LnRvU3RyaW5nSW5uZXIoKSsiKSIpLGoodGhpcy5tYXJrcyx0KX0sXy5wcm90b3R5cGUuY29udGVudE1hdGNoQXQ9ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy50eXBlLmNvbnRlbnRNYXRjaC5tYXRjaEZyYWdtZW50KHRoaXMuY29udGVudCwwLHQpO2lmKCFlKXRocm93IG5ldyBFcnJvcigiQ2FsbGVkIGNvbnRlbnRNYXRjaEF0IG9uIGEgbm9kZSB3aXRoIGludmFsaWQgY29udGVudCIpO3JldHVybiBlfSxfLnByb3RvdHlwZS5jYW5SZXBsYWNlPWZ1bmN0aW9uKHQsZSxuLHIsbyl7dmFyIGk9dGhpczt2b2lkIDA9PT1uJiYobj1hLmVtcHR5KSx2b2lkIDA9PT1yJiYocj0wKSx2b2lkIDA9PT1vJiYobz1uLmNoaWxkQ291bnQpO3ZhciBzPXRoaXMuY29udGVudE1hdGNoQXQodCkubWF0Y2hGcmFnbWVudChuLHIsbyksYz1zJiZzLm1hdGNoRnJhZ21lbnQodGhpcy5jb250ZW50LGUpO2lmKCFjfHwhYy52YWxpZEVuZClyZXR1cm4hMTtmb3IodmFyIGw9cjtsPG87bCsrKWlmKCFpLnR5cGUuYWxsb3dzTWFya3Mobi5jaGlsZChsKS5tYXJrcykpcmV0dXJuITE7cmV0dXJuITB9LF8ucHJvdG90eXBlLmNhblJlcGxhY2VXaXRoPWZ1bmN0aW9uKHQsZSxuLHIpe2lmKHImJiF0aGlzLnR5cGUuYWxsb3dzTWFya3MocikpcmV0dXJuITE7dmFyIG89dGhpcy5jb250ZW50TWF0Y2hBdCh0KS5tYXRjaFR5cGUobiksaT1vJiZvLm1hdGNoRnJhZ21lbnQodGhpcy5jb250ZW50LGUpO3JldHVybiEhaSYmaS52YWxpZEVuZH0sXy5wcm90b3R5cGUuY2FuQXBwZW5kPWZ1bmN0aW9uKHQpe3JldHVybiB0LmNvbnRlbnQuc2l6ZT90aGlzLmNhblJlcGxhY2UodGhpcy5jaGlsZENvdW50LHRoaXMuY2hpbGRDb3VudCx0LmNvbnRlbnQpOnRoaXMudHlwZS5jb21wYXRpYmxlQ29udGVudCh0LnR5cGUpfSxfLnByb3RvdHlwZS5kZWZhdWx0Q29udGVudFR5cGU9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuY29udGVudE1hdGNoQXQodCkuZGVmYXVsdFR5cGV9LF8ucHJvdG90eXBlLmNoZWNrPWZ1bmN0aW9uKCl7aWYoIXRoaXMudHlwZS52YWxpZENvbnRlbnQodGhpcy5jb250ZW50KSl0aHJvdyBuZXcgUmFuZ2VFcnJvcigiSW52YWxpZCBjb250ZW50IGZvciBub2RlICIrdGhpcy50eXBlLm5hbWUrIjogIit0aGlzLmNvbnRlbnQudG9TdHJpbmcoKS5zbGljZSgwLDUwKSk7dGhpcy5jb250ZW50LmZvckVhY2goKGZ1bmN0aW9uKHQpe3JldHVybiB0LmNoZWNrKCl9KSl9LF8ucHJvdG90eXBlLnRvSlNPTj1mdW5jdGlvbigpe3ZhciB0PXRoaXMsZT17dHlwZTp0aGlzLnR5cGUubmFtZX07Zm9yKHZhciBuIGluIHQuYXR0cnMpe2UuYXR0cnM9dC5hdHRyczticmVha31yZXR1cm4gdGhpcy5jb250ZW50LnNpemUmJihlLmNvbnRlbnQ9dGhpcy5jb250ZW50LnRvSlNPTigpKSx0aGlzLm1hcmtzLmxlbmd0aCYmKGUubWFya3M9dGhpcy5tYXJrcy5tYXAoKGZ1bmN0aW9uKHQpe3JldHVybiB0LnRvSlNPTigpfSkpKSxlfSxfLmZyb21KU09OPWZ1bmN0aW9uKHQsZSl7aWYoIWUpdGhyb3cgbmV3IFJhbmdlRXJyb3IoIkludmFsaWQgaW5wdXQgZm9yIE5vZGUuZnJvbUpTT04iKTt2YXIgbj1udWxsO2lmKGUubWFya3Mpe2lmKCFBcnJheS5pc0FycmF5KGUubWFya3MpKXRocm93IG5ldyBSYW5nZUVycm9yKCJJbnZhbGlkIG1hcmsgZGF0YSBmb3IgTm9kZS5mcm9tSlNPTiIpO249ZS5tYXJrcy5tYXAodC5tYXJrRnJvbUpTT04pfWlmKCJ0ZXh0Ij09ZS50eXBlKXtpZigic3RyaW5nIiE9dHlwZW9mIGUudGV4dCl0aHJvdyBuZXcgUmFuZ2VFcnJvcigiSW52YWxpZCB0ZXh0IG5vZGUgaW4gSlNPTiIpO3JldHVybiB0LnRleHQoZS50ZXh0LG4pfXZhciByPWEuZnJvbUpTT04odCxlLmNvbnRlbnQpO3JldHVybiB0Lm5vZGVUeXBlKGUudHlwZSkuY3JlYXRlKGUuYXR0cnMscixuKX0sT2JqZWN0LmRlZmluZVByb3BlcnRpZXMoXy5wcm90b3R5cGUsRik7dmFyIEI9ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZShlLG4scixvKXtpZih0LmNhbGwodGhpcyxlLG4sbnVsbCxvKSwhcil0aHJvdyBuZXcgUmFuZ2VFcnJvcigiRW1wdHkgdGV4dCBub2RlcyBhcmUgbm90IGFsbG93ZWQiKTt0aGlzLnRleHQ9cn10JiYoZS5fX3Byb3RvX189dCksZS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZSh0JiZ0LnByb3RvdHlwZSksZS5wcm90b3R5cGUuY29uc3RydWN0b3I9ZTt2YXIgbj17dGV4dENvbnRlbnQ6e30sbm9kZVNpemU6e319O3JldHVybiBlLnByb3RvdHlwZS50b1N0cmluZz1mdW5jdGlvbigpe3JldHVybiB0aGlzLnR5cGUuc3BlYy50b0RlYnVnU3RyaW5nP3RoaXMudHlwZS5zcGVjLnRvRGVidWdTdHJpbmcodGhpcyk6aih0aGlzLm1hcmtzLEpTT04uc3RyaW5naWZ5KHRoaXMudGV4dCkpfSxuLnRleHRDb250ZW50LmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLnRleHR9LGUucHJvdG90eXBlLnRleHRCZXR3ZWVuPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIHRoaXMudGV4dC5zbGljZSh0LGUpfSxuLm5vZGVTaXplLmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLnRleHQubGVuZ3RofSxlLnByb3RvdHlwZS5tYXJrPWZ1bmN0aW9uKHQpe3JldHVybiB0PT10aGlzLm1hcmtzP3RoaXM6bmV3IGUodGhpcy50eXBlLHRoaXMuYXR0cnMsdGhpcy50ZXh0LHQpfSxlLnByb3RvdHlwZS53aXRoVGV4dD1mdW5jdGlvbih0KXtyZXR1cm4gdD09dGhpcy50ZXh0P3RoaXM6bmV3IGUodGhpcy50eXBlLHRoaXMuYXR0cnMsdCx0aGlzLm1hcmtzKX0sZS5wcm90b3R5cGUuY3V0PWZ1bmN0aW9uKHQsZSl7cmV0dXJuIHZvaWQgMD09PXQmJih0PTApLHZvaWQgMD09PWUmJihlPXRoaXMudGV4dC5sZW5ndGgpLDA9PXQmJmU9PXRoaXMudGV4dC5sZW5ndGg/dGhpczp0aGlzLndpdGhUZXh0KHRoaXMudGV4dC5zbGljZSh0LGUpKX0sZS5wcm90b3R5cGUuZXE9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuc2FtZU1hcmt1cCh0KSYmdGhpcy50ZXh0PT10LnRleHR9LGUucHJvdG90eXBlLnRvSlNPTj1mdW5jdGlvbigpe3ZhciBlPXQucHJvdG90eXBlLnRvSlNPTi5jYWxsKHRoaXMpO3JldHVybiBlLnRleHQ9dGhpcy50ZXh0LGV9LE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKGUucHJvdG90eXBlLG4pLGV9KF8pO2Z1bmN0aW9uIGoodCxlKXtmb3IodmFyIG49dC5sZW5ndGgtMTtuPj0wO24tLSllPXRbbl0udHlwZS5uYW1lKyIoIitlKyIpIjtyZXR1cm4gZX12YXIgJD1mdW5jdGlvbih0KXt0aGlzLnZhbGlkRW5kPXQsdGhpcy5uZXh0PVtdLHRoaXMud3JhcENhY2hlPVtdfSxWPXtpbmxpbmVDb250ZW50Ont9LGRlZmF1bHRUeXBlOnt9LGVkZ2VDb3VudDp7fX07JC5wYXJzZT1mdW5jdGlvbih0LGUpe3ZhciBuPW5ldyBMKHQsZSk7aWYobnVsbD09bi5uZXh0KXJldHVybiAkLmVtcHR5O3ZhciByPXEobik7bi5uZXh0JiZuLmVycigiVW5leHBlY3RlZCB0cmFpbGluZyB0ZXh0Iik7dmFyIG89dHQoWShyKSk7cmV0dXJuIGV0KG8sbiksb30sJC5wcm90b3R5cGUubWF0Y2hUeXBlPWZ1bmN0aW9uKHQpe2Zvcih2YXIgZT10aGlzLG49MDtuPHRoaXMubmV4dC5sZW5ndGg7bis9MilpZihlLm5leHRbbl09PXQpcmV0dXJuIGUubmV4dFtuKzFdO3JldHVybiBudWxsfSwkLnByb3RvdHlwZS5tYXRjaEZyYWdtZW50PWZ1bmN0aW9uKHQsZSxuKXt2b2lkIDA9PT1lJiYoZT0wKSx2b2lkIDA9PT1uJiYobj10LmNoaWxkQ291bnQpO2Zvcih2YXIgcj10aGlzLG89ZTtyJiZvPG47bysrKXI9ci5tYXRjaFR5cGUodC5jaGlsZChvKS50eXBlKTtyZXR1cm4gcn0sVi5pbmxpbmVDb250ZW50LmdldD1mdW5jdGlvbigpe3ZhciB0PXRoaXMubmV4dFswXTtyZXR1cm4hIXQmJnQuaXNJbmxpbmV9LFYuZGVmYXVsdFR5cGUuZ2V0PWZ1bmN0aW9uKCl7Zm9yKHZhciB0PXRoaXMsZT0wO2U8dGhpcy5uZXh0Lmxlbmd0aDtlKz0yKXt2YXIgbj10Lm5leHRbZV07aWYoIW4uaXNUZXh0JiYhbi5oYXNSZXF1aXJlZEF0dHJzKCkpcmV0dXJuIG59fSwkLnByb3RvdHlwZS5jb21wYXRpYmxlPWZ1bmN0aW9uKHQpe2Zvcih2YXIgZT10aGlzLG49MDtuPHRoaXMubmV4dC5sZW5ndGg7bis9Milmb3IodmFyIHI9MDtyPHQubmV4dC5sZW5ndGg7cis9MilpZihlLm5leHRbbl09PXQubmV4dFtyXSlyZXR1cm4hMDtyZXR1cm4hMX0sJC5wcm90b3R5cGUuZmlsbEJlZm9yZT1mdW5jdGlvbih0LGUsbil7dm9pZCAwPT09ZSYmKGU9ITEpLHZvaWQgMD09PW4mJihuPTApO3ZhciByPVt0aGlzXTtmdW5jdGlvbiBvKGkscyl7dmFyIGM9aS5tYXRjaEZyYWdtZW50KHQsbik7aWYoYyYmKCFlfHxjLnZhbGlkRW5kKSlyZXR1cm4gYS5mcm9tKHMubWFwKChmdW5jdGlvbih0KXtyZXR1cm4gdC5jcmVhdGVBbmRGaWxsKCl9KSkpO2Zvcih2YXIgbD0wO2w8aS5uZXh0Lmxlbmd0aDtsKz0yKXt2YXIgcD1pLm5leHRbbF0sdT1pLm5leHRbbCsxXTtpZighcC5pc1RleHQmJiFwLmhhc1JlcXVpcmVkQXR0cnMoKSYmLTE9PXIuaW5kZXhPZih1KSl7ci5wdXNoKHUpO3ZhciBoPW8odSxzLmNvbmNhdChwKSk7aWYoaClyZXR1cm4gaH19fXJldHVybiBvKHRoaXMsW10pfSwkLnByb3RvdHlwZS5maW5kV3JhcHBpbmc9ZnVuY3Rpb24odCl7Zm9yKHZhciBlPXRoaXMsbj0wO248dGhpcy53cmFwQ2FjaGUubGVuZ3RoO24rPTIpaWYoZS53cmFwQ2FjaGVbbl09PXQpcmV0dXJuIGUud3JhcENhY2hlW24rMV07dmFyIHI9dGhpcy5jb21wdXRlV3JhcHBpbmcodCk7cmV0dXJuIHRoaXMud3JhcENhY2hlLnB1c2godCxyKSxyfSwkLnByb3RvdHlwZS5jb21wdXRlV3JhcHBpbmc9ZnVuY3Rpb24odCl7dmFyIGU9T2JqZWN0LmNyZWF0ZShudWxsKSxuPVt7bWF0Y2g6dGhpcyx0eXBlOm51bGwsdmlhOm51bGx9XTt3aGlsZShuLmxlbmd0aCl7dmFyIHI9bi5zaGlmdCgpLG89ci5tYXRjaDtpZihvLm1hdGNoVHlwZSh0KSl7Zm9yKHZhciBpPVtdLHM9cjtzLnR5cGU7cz1zLnZpYSlpLnB1c2gocy50eXBlKTtyZXR1cm4gaS5yZXZlcnNlKCl9Zm9yKHZhciBhPTA7YTxvLm5leHQubGVuZ3RoO2ErPTIpe3ZhciBjPW8ubmV4dFthXTtjLmlzTGVhZnx8Yy5oYXNSZXF1aXJlZEF0dHJzKCl8fGMubmFtZSBpbiBlfHxyLnR5cGUmJiFvLm5leHRbYSsxXS52YWxpZEVuZHx8KG4ucHVzaCh7bWF0Y2g6Yy5jb250ZW50TWF0Y2gsdHlwZTpjLHZpYTpyfSksZVtjLm5hbWVdPSEwKX19fSxWLmVkZ2VDb3VudC5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5uZXh0Lmxlbmd0aD4+MX0sJC5wcm90b3R5cGUuZWRnZT1mdW5jdGlvbih0KXt2YXIgZT10PDwxO2lmKGU+dGhpcy5uZXh0Lmxlbmd0aCl0aHJvdyBuZXcgUmFuZ2VFcnJvcigiVGhlcmUncyBubyAiK3QrInRoIGVkZ2UgaW4gdGhpcyBjb250ZW50IG1hdGNoIik7cmV0dXJue3R5cGU6dGhpcy5uZXh0W2VdLG5leHQ6dGhpcy5uZXh0W2UrMV19fSwkLnByb3RvdHlwZS50b1N0cmluZz1mdW5jdGlvbigpe3ZhciB0PVtdO2Z1bmN0aW9uIGUobil7dC5wdXNoKG4pO2Zvcih2YXIgcj0xO3I8bi5uZXh0Lmxlbmd0aDtyKz0yKS0xPT10LmluZGV4T2Yobi5uZXh0W3JdKSYmZShuLm5leHRbcl0pfXJldHVybiBlKHRoaXMpLHQubWFwKChmdW5jdGlvbihlLG4pe2Zvcih2YXIgcj1uKyhlLnZhbGlkRW5kPyIqIjoiICIpKyIgIixvPTA7bzxlLm5leHQubGVuZ3RoO28rPTIpcis9KG8/IiwgIjoiIikrZS5uZXh0W29dLm5hbWUrIi0+Iit0LmluZGV4T2YoZS5uZXh0W28rMV0pO3JldHVybiByfSkpLmpvaW4oIlxuIil9LE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKCQucHJvdG90eXBlLFYpLCQuZW1wdHk9bmV3ICQoITApO3ZhciBMPWZ1bmN0aW9uKHQsZSl7dGhpcy5zdHJpbmc9dCx0aGlzLm5vZGVUeXBlcz1lLHRoaXMuaW5saW5lPW51bGwsdGhpcy5wb3M9MCx0aGlzLnRva2Vucz10LnNwbGl0KC9ccyooPz1cYnxcV3wkKS8pLCIiPT10aGlzLnRva2Vuc1t0aGlzLnRva2Vucy5sZW5ndGgtMV0mJnRoaXMudG9rZW5zLnBvcCgpLCIiPT10aGlzLnRva2Vuc1swXSYmdGhpcy50b2tlbnMudW5zaGlmdCgpfSxKPXtuZXh0Ont9fTtmdW5jdGlvbiBxKHQpe3ZhciBlPVtdO2Rve2UucHVzaChXKHQpKX13aGlsZSh0LmVhdCgifCIpKTtyZXR1cm4gMT09ZS5sZW5ndGg/ZVswXTp7dHlwZToiY2hvaWNlIixleHByczplfX1mdW5jdGlvbiBXKHQpe3ZhciBlPVtdO2Rve2UucHVzaChIKHQpKX13aGlsZSh0Lm5leHQmJiIpIiE9dC5uZXh0JiYifCIhPXQubmV4dCk7cmV0dXJuIDE9PWUubGVuZ3RoP2VbMF06e3R5cGU6InNlcSIsZXhwcnM6ZX19ZnVuY3Rpb24gSCh0KXtmb3IodmFyIGU9WCh0KTs7KWlmKHQuZWF0KCIrIikpZT17dHlwZToicGx1cyIsZXhwcjplfTtlbHNlIGlmKHQuZWF0KCIqIikpZT17dHlwZToic3RhciIsZXhwcjplfTtlbHNlIGlmKHQuZWF0KCI/IikpZT17dHlwZToib3B0IixleHByOmV9O2Vsc2V7aWYoIXQuZWF0KCJ7IikpYnJlYWs7ZT1VKHQsZSl9cmV0dXJuIGV9ZnVuY3Rpb24gSyh0KXsvXEQvLnRlc3QodC5uZXh0KSYmdC5lcnIoIkV4cGVjdGVkIG51bWJlciwgZ290ICciK3QubmV4dCsiJyIpO3ZhciBlPU51bWJlcih0Lm5leHQpO3JldHVybiB0LnBvcysrLGV9ZnVuY3Rpb24gVSh0LGUpe3ZhciBuPUsodCkscj1uO3JldHVybiB0LmVhdCgiLCIpJiYocj0ifSIhPXQubmV4dD9LKHQpOi0xKSx0LmVhdCgifSIpfHx0LmVycigiVW5jbG9zZWQgYnJhY2VkIHJhbmdlIikse3R5cGU6InJhbmdlIixtaW46bixtYXg6cixleHByOmV9fWZ1bmN0aW9uIEcodCxlKXt2YXIgbj10Lm5vZGVUeXBlcyxyPW5bZV07aWYocilyZXR1cm5bcl07dmFyIG89W107Zm9yKHZhciBpIGluIG4pe3ZhciBzPW5baV07cy5ncm91cHMuaW5kZXhPZihlKT4tMSYmby5wdXNoKHMpfXJldHVybiAwPT1vLmxlbmd0aCYmdC5lcnIoIk5vIG5vZGUgdHlwZSBvciBncm91cCAnIitlKyInIGZvdW5kIiksb31mdW5jdGlvbiBYKHQpe2lmKHQuZWF0KCIoIikpe3ZhciBlPXEodCk7cmV0dXJuIHQuZWF0KCIpIil8fHQuZXJyKCJNaXNzaW5nIGNsb3NpbmcgcGFyZW4iKSxlfWlmKCEvXFcvLnRlc3QodC5uZXh0KSl7dmFyIG49Ryh0LHQubmV4dCkubWFwKChmdW5jdGlvbihlKXtyZXR1cm4gbnVsbD09dC5pbmxpbmU/dC5pbmxpbmU9ZS5pc0lubGluZTp0LmlubGluZSE9ZS5pc0lubGluZSYmdC5lcnIoIk1peGluZyBpbmxpbmUgYW5kIGJsb2NrIGNvbnRlbnQiKSx7dHlwZToibmFtZSIsdmFsdWU6ZX19KSk7cmV0dXJuIHQucG9zKyssMT09bi5sZW5ndGg/blswXTp7dHlwZToiY2hvaWNlIixleHByczpufX10LmVycigiVW5leHBlY3RlZCB0b2tlbiAnIit0Lm5leHQrIiciKX1mdW5jdGlvbiBZKHQpe3ZhciBlPVtbXV07cmV0dXJuIG8oaSh0LDApLG4oKSksZTtmdW5jdGlvbiBuKCl7cmV0dXJuIGUucHVzaChbXSktMX1mdW5jdGlvbiByKHQsbixyKXt2YXIgbz17dGVybTpyLHRvOm59O3JldHVybiBlW3RdLnB1c2gobyksb31mdW5jdGlvbiBvKHQsZSl7dC5mb3JFYWNoKChmdW5jdGlvbih0KXtyZXR1cm4gdC50bz1lfSkpfWZ1bmN0aW9uIGkodCxlKXtpZigiY2hvaWNlIj09dC50eXBlKXJldHVybiB0LmV4cHJzLnJlZHVjZSgoZnVuY3Rpb24odCxuKXtyZXR1cm4gdC5jb25jYXQoaShuLGUpKX0pLFtdKTtpZigic2VxIj09dC50eXBlKWZvcih2YXIgcz0wOztzKyspe3ZhciBhPWkodC5leHByc1tzXSxlKTtpZihzPT10LmV4cHJzLmxlbmd0aC0xKXJldHVybiBhO28oYSxlPW4oKSl9ZWxzZXtpZigic3RhciI9PXQudHlwZSl7dmFyIGM9bigpO3JldHVybiByKGUsYyksbyhpKHQuZXhwcixjKSxjKSxbcihjKV19aWYoInBsdXMiPT10LnR5cGUpe3ZhciBsPW4oKTtyZXR1cm4gbyhpKHQuZXhwcixlKSxsKSxvKGkodC5leHByLGwpLGwpLFtyKGwpXX1pZigib3B0Ij09dC50eXBlKXJldHVybltyKGUpXS5jb25jYXQoaSh0LmV4cHIsZSkpO2lmKCJyYW5nZSI9PXQudHlwZSl7Zm9yKHZhciBwPWUsdT0wO3U8dC5taW47dSsrKXt2YXIgaD1uKCk7byhpKHQuZXhwcixwKSxoKSxwPWh9aWYoLTE9PXQubWF4KW8oaSh0LmV4cHIscCkscCk7ZWxzZSBmb3IodmFyIGY9dC5taW47Zjx0Lm1heDtmKyspe3ZhciBkPW4oKTtyKHAsZCksbyhpKHQuZXhwcixwKSxkKSxwPWR9cmV0dXJuW3IocCldfWlmKCJuYW1lIj09dC50eXBlKXJldHVybltyKGUsbnVsbCx0LnZhbHVlKV19fX1mdW5jdGlvbiBRKHQsZSl7cmV0dXJuIHQtZX1mdW5jdGlvbiBaKHQsZSl7dmFyIG49W107cmV0dXJuIHIoZSksbi5zb3J0KFEpO2Z1bmN0aW9uIHIoZSl7dmFyIG89dFtlXTtpZigxPT1vLmxlbmd0aCYmIW9bMF0udGVybSlyZXR1cm4gcihvWzBdLnRvKTtuLnB1c2goZSk7Zm9yKHZhciBpPTA7aTxvLmxlbmd0aDtpKyspe3ZhciBzPW9baV0sYT1zLnRlcm0sYz1zLnRvO2F8fC0xIT1uLmluZGV4T2YoYyl8fHIoYyl9fX1mdW5jdGlvbiB0dCh0KXt2YXIgZT1PYmplY3QuY3JlYXRlKG51bGwpO3JldHVybiBuKFoodCwwKSk7ZnVuY3Rpb24gbihyKXt2YXIgbz1bXTtyLmZvckVhY2goKGZ1bmN0aW9uKGUpe3RbZV0uZm9yRWFjaCgoZnVuY3Rpb24oZSl7dmFyIG49ZS50ZXJtLHI9ZS50bztpZihuKXt2YXIgaT1vLmluZGV4T2Yobikscz1pPi0xJiZvW2krMV07Wih0LHIpLmZvckVhY2goKGZ1bmN0aW9uKHQpe3N8fG8ucHVzaChuLHM9W10pLC0xPT1zLmluZGV4T2YodCkmJnMucHVzaCh0KX0pKX19KSl9KSk7Zm9yKHZhciBpPWVbci5qb2luKCIsIildPW5ldyAkKHIuaW5kZXhPZih0Lmxlbmd0aC0xKT4tMSkscz0wO3M8by5sZW5ndGg7cys9Mil7dmFyIGE9b1tzKzFdLnNvcnQoUSk7aS5uZXh0LnB1c2gob1tzXSxlW2Euam9pbigiLCIpXXx8bihhKSl9cmV0dXJuIGl9fWZ1bmN0aW9uIGV0KHQsZSl7Zm9yKHZhciBuPTAscj1bdF07bjxyLmxlbmd0aDtuKyspe2Zvcih2YXIgbz1yW25dLGk9IW8udmFsaWRFbmQscz1bXSxhPTA7YTxvLm5leHQubGVuZ3RoO2ErPTIpe3ZhciBjPW8ubmV4dFthXSxsPW8ubmV4dFthKzFdO3MucHVzaChjLm5hbWUpLCFpfHxjLmlzVGV4dHx8Yy5oYXNSZXF1aXJlZEF0dHJzKCl8fChpPSExKSwtMT09ci5pbmRleE9mKGwpJiZyLnB1c2gobCl9aSYmZS5lcnIoIk9ubHkgbm9uLWdlbmVyYXRhYmxlIG5vZGVzICgiK3Muam9pbigiLCAiKSsiKSBpbiBhIHJlcXVpcmVkIHBvc2l0aW9uIil9fWZ1bmN0aW9uIG50KHQpe3ZhciBlPU9iamVjdC5jcmVhdGUobnVsbCk7Zm9yKHZhciBuIGluIHQpe3ZhciByPXRbbl07aWYoIXIuaGFzRGVmYXVsdClyZXR1cm4gbnVsbDtlW25dPXIuZGVmYXVsdH1yZXR1cm4gZX1mdW5jdGlvbiBydCh0LGUpe3ZhciBuPU9iamVjdC5jcmVhdGUobnVsbCk7Zm9yKHZhciByIGluIHQpe3ZhciBvPWUmJmVbcl07aWYodm9pZCAwPT09byl7dmFyIGk9dFtyXTtpZighaS5oYXNEZWZhdWx0KXRocm93IG5ldyBSYW5nZUVycm9yKCJObyB2YWx1ZSBzdXBwbGllZCBmb3IgYXR0cmlidXRlICIrcik7bz1pLmRlZmF1bHR9bltyXT1vfXJldHVybiBufWZ1bmN0aW9uIG90KHQpe3ZhciBlPU9iamVjdC5jcmVhdGUobnVsbCk7aWYodClmb3IodmFyIG4gaW4gdCllW25dPW5ldyBhdCh0W25dKTtyZXR1cm4gZX1KLm5leHQuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudG9rZW5zW3RoaXMucG9zXX0sTC5wcm90b3R5cGUuZWF0PWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLm5leHQ9PXQmJih0aGlzLnBvcysrfHwhMCl9LEwucHJvdG90eXBlLmVycj1mdW5jdGlvbih0KXt0aHJvdyBuZXcgU3ludGF4RXJyb3IodCsiIChpbiBjb250ZW50IGV4cHJlc3Npb24gJyIrdGhpcy5zdHJpbmcrIicpIil9LE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKEwucHJvdG90eXBlLEopO3ZhciBpdD1mdW5jdGlvbih0LGUsbil7dGhpcy5uYW1lPXQsdGhpcy5zY2hlbWE9ZSx0aGlzLnNwZWM9bix0aGlzLmdyb3Vwcz1uLmdyb3VwP24uZ3JvdXAuc3BsaXQoIiAiKTpbXSx0aGlzLmF0dHJzPW90KG4uYXR0cnMpLHRoaXMuZGVmYXVsdEF0dHJzPW50KHRoaXMuYXR0cnMpLHRoaXMuY29udGVudE1hdGNoPW51bGwsdGhpcy5tYXJrU2V0PW51bGwsdGhpcy5pbmxpbmVDb250ZW50PW51bGwsdGhpcy5pc0Jsb2NrPSEobi5pbmxpbmV8fCJ0ZXh0Ij09dCksdGhpcy5pc1RleHQ9InRleHQiPT10fSxzdD17aXNJbmxpbmU6e30saXNUZXh0YmxvY2s6e30saXNMZWFmOnt9LGlzQXRvbTp7fX07c3QuaXNJbmxpbmUuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIXRoaXMuaXNCbG9ja30sc3QuaXNUZXh0YmxvY2suZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuaXNCbG9jayYmdGhpcy5pbmxpbmVDb250ZW50fSxzdC5pc0xlYWYuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY29udGVudE1hdGNoPT0kLmVtcHR5fSxzdC5pc0F0b20uZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuaXNMZWFmfHx0aGlzLnNwZWMuYXRvbX0saXQucHJvdG90eXBlLmhhc1JlcXVpcmVkQXR0cnM9ZnVuY3Rpb24odCl7dmFyIGU9dGhpcztmb3IodmFyIG4gaW4gZS5hdHRycylpZihlLmF0dHJzW25dLmlzUmVxdWlyZWQmJighdHx8IShuIGluIHQpKSlyZXR1cm4hMDtyZXR1cm4hMX0saXQucHJvdG90eXBlLmNvbXBhdGlibGVDb250ZW50PWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzPT10fHx0aGlzLmNvbnRlbnRNYXRjaC5jb21wYXRpYmxlKHQuY29udGVudE1hdGNoKX0saXQucHJvdG90eXBlLmNvbXB1dGVBdHRycz1mdW5jdGlvbih0KXtyZXR1cm4hdCYmdGhpcy5kZWZhdWx0QXR0cnM/dGhpcy5kZWZhdWx0QXR0cnM6cnQodGhpcy5hdHRycyx0KX0saXQucHJvdG90eXBlLmNyZWF0ZT1mdW5jdGlvbih0LGUsbil7aWYodGhpcy5pc1RleHQpdGhyb3cgbmV3IEVycm9yKCJOb2RlVHlwZS5jcmVhdGUgY2FuJ3QgY29uc3RydWN0IHRleHQgbm9kZXMiKTtyZXR1cm4gbmV3IF8odGhpcyx0aGlzLmNvbXB1dGVBdHRycyh0KSxhLmZyb20oZSksaC5zZXRGcm9tKG4pKX0saXQucHJvdG90eXBlLmNyZWF0ZUNoZWNrZWQ9ZnVuY3Rpb24odCxlLG4pe2lmKGU9YS5mcm9tKGUpLCF0aGlzLnZhbGlkQ29udGVudChlKSl0aHJvdyBuZXcgUmFuZ2VFcnJvcigiSW52YWxpZCBjb250ZW50IGZvciBub2RlICIrdGhpcy5uYW1lKTtyZXR1cm4gbmV3IF8odGhpcyx0aGlzLmNvbXB1dGVBdHRycyh0KSxlLGguc2V0RnJvbShuKSl9LGl0LnByb3RvdHlwZS5jcmVhdGVBbmRGaWxsPWZ1bmN0aW9uKHQsZSxuKXtpZih0PXRoaXMuY29tcHV0ZUF0dHJzKHQpLGU9YS5mcm9tKGUpLGUuc2l6ZSl7dmFyIHI9dGhpcy5jb250ZW50TWF0Y2guZmlsbEJlZm9yZShlKTtpZighcilyZXR1cm4gbnVsbDtlPXIuYXBwZW5kKGUpfXZhciBvPXRoaXMuY29udGVudE1hdGNoLm1hdGNoRnJhZ21lbnQoZSkuZmlsbEJlZm9yZShhLmVtcHR5LCEwKTtyZXR1cm4gbz9uZXcgXyh0aGlzLHQsZS5hcHBlbmQobyksaC5zZXRGcm9tKG4pKTpudWxsfSxpdC5wcm90b3R5cGUudmFsaWRDb250ZW50PWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMsbj10aGlzLmNvbnRlbnRNYXRjaC5tYXRjaEZyYWdtZW50KHQpO2lmKCFufHwhbi52YWxpZEVuZClyZXR1cm4hMTtmb3IodmFyIHI9MDtyPHQuY2hpbGRDb3VudDtyKyspaWYoIWUuYWxsb3dzTWFya3ModC5jaGlsZChyKS5tYXJrcykpcmV0dXJuITE7cmV0dXJuITB9LGl0LnByb3RvdHlwZS5hbGxvd3NNYXJrVHlwZT1mdW5jdGlvbih0KXtyZXR1cm4gbnVsbD09dGhpcy5tYXJrU2V0fHx0aGlzLm1hcmtTZXQuaW5kZXhPZih0KT4tMX0saXQucHJvdG90eXBlLmFsbG93c01hcmtzPWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXM7aWYobnVsbD09dGhpcy5tYXJrU2V0KXJldHVybiEwO2Zvcih2YXIgbj0wO248dC5sZW5ndGg7bisrKWlmKCFlLmFsbG93c01hcmtUeXBlKHRbbl0udHlwZSkpcmV0dXJuITE7cmV0dXJuITB9LGl0LnByb3RvdHlwZS5hbGxvd2VkTWFya3M9ZnVuY3Rpb24odCl7dmFyIGUsbj10aGlzO2lmKG51bGw9PXRoaXMubWFya1NldClyZXR1cm4gdDtmb3IodmFyIHI9MDtyPHQubGVuZ3RoO3IrKyluLmFsbG93c01hcmtUeXBlKHRbcl0udHlwZSk/ZSYmZS5wdXNoKHRbcl0pOmV8fChlPXQuc2xpY2UoMCxyKSk7cmV0dXJuIGU/ZS5sZW5ndGg/ZTpoLmVtcHR5OnR9LGl0LmNvbXBpbGU9ZnVuY3Rpb24odCxlKXt2YXIgbj1PYmplY3QuY3JlYXRlKG51bGwpO3QuZm9yRWFjaCgoZnVuY3Rpb24odCxyKXtyZXR1cm4gblt0XT1uZXcgaXQodCxlLHIpfSkpO3ZhciByPWUuc3BlYy50b3BOb2RlfHwiZG9jIjtpZighbltyXSl0aHJvdyBuZXcgUmFuZ2VFcnJvcigiU2NoZW1hIGlzIG1pc3NpbmcgaXRzIHRvcCBub2RlIHR5cGUgKCciK3IrIicpIik7aWYoIW4udGV4dCl0aHJvdyBuZXcgUmFuZ2VFcnJvcigiRXZlcnkgc2NoZW1hIG5lZWRzIGEgJ3RleHQnIHR5cGUiKTtmb3IodmFyIG8gaW4gbi50ZXh0LmF0dHJzKXRocm93IG5ldyBSYW5nZUVycm9yKCJUaGUgdGV4dCBub2RlIHR5cGUgc2hvdWxkIG5vdCBoYXZlIGF0dHJpYnV0ZXMiKTtyZXR1cm4gbn0sT2JqZWN0LmRlZmluZVByb3BlcnRpZXMoaXQucHJvdG90eXBlLHN0KTt2YXIgYXQ9ZnVuY3Rpb24odCl7dGhpcy5oYXNEZWZhdWx0PU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbCh0LCJkZWZhdWx0IiksdGhpcy5kZWZhdWx0PXQuZGVmYXVsdH0sY3Q9e2lzUmVxdWlyZWQ6e319O2N0LmlzUmVxdWlyZWQuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIXRoaXMuaGFzRGVmYXVsdH0sT2JqZWN0LmRlZmluZVByb3BlcnRpZXMoYXQucHJvdG90eXBlLGN0KTt2YXIgbHQ9ZnVuY3Rpb24odCxlLG4scil7dGhpcy5uYW1lPXQsdGhpcy5zY2hlbWE9bix0aGlzLnNwZWM9cix0aGlzLmF0dHJzPW90KHIuYXR0cnMpLHRoaXMucmFuaz1lLHRoaXMuZXhjbHVkZWQ9bnVsbDt2YXIgbz1udCh0aGlzLmF0dHJzKTt0aGlzLmluc3RhbmNlPW8mJm5ldyBoKHRoaXMsbyl9O2x0LnByb3RvdHlwZS5jcmVhdGU9ZnVuY3Rpb24odCl7cmV0dXJuIXQmJnRoaXMuaW5zdGFuY2U/dGhpcy5pbnN0YW5jZTpuZXcgaCh0aGlzLHJ0KHRoaXMuYXR0cnMsdCkpfSxsdC5jb21waWxlPWZ1bmN0aW9uKHQsZSl7dmFyIG49T2JqZWN0LmNyZWF0ZShudWxsKSxyPTA7cmV0dXJuIHQuZm9yRWFjaCgoZnVuY3Rpb24odCxvKXtyZXR1cm4gblt0XT1uZXcgbHQodCxyKyssZSxvKX0pKSxufSxsdC5wcm90b3R5cGUucmVtb3ZlRnJvbVNldD1mdW5jdGlvbih0KXtmb3IodmFyIGU9dGhpcyxuPTA7bjx0Lmxlbmd0aDtuKyspaWYodFtuXS50eXBlPT1lKXJldHVybiB0LnNsaWNlKDAsbikuY29uY2F0KHQuc2xpY2UobisxKSk7cmV0dXJuIHR9LGx0LnByb3RvdHlwZS5pc0luU2V0PWZ1bmN0aW9uKHQpe2Zvcih2YXIgZT10aGlzLG49MDtuPHQubGVuZ3RoO24rKylpZih0W25dLnR5cGU9PWUpcmV0dXJuIHRbbl19LGx0LnByb3RvdHlwZS5leGNsdWRlcz1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5leGNsdWRlZC5pbmRleE9mKHQpPi0xfTt2YXIgcHQ9ZnVuY3Rpb24odCl7dmFyIGU9dGhpcztmb3IodmFyIG4gaW4gdGhpcy5zcGVjPXt9LHQpZS5zcGVjW25dPXRbbl07dGhpcy5zcGVjLm5vZGVzPW8uZnJvbSh0Lm5vZGVzKSx0aGlzLnNwZWMubWFya3M9by5mcm9tKHQubWFya3MpLHRoaXMubm9kZXM9aXQuY29tcGlsZSh0aGlzLnNwZWMubm9kZXMsdGhpcyksdGhpcy5tYXJrcz1sdC5jb21waWxlKHRoaXMuc3BlYy5tYXJrcyx0aGlzKTt2YXIgcj1PYmplY3QuY3JlYXRlKG51bGwpO2Zvcih2YXIgaSBpbiBlLm5vZGVzKXtpZihpIGluIGUubWFya3MpdGhyb3cgbmV3IFJhbmdlRXJyb3IoaSsiIGNhbiBub3QgYmUgYm90aCBhIG5vZGUgYW5kIGEgbWFyayIpO3ZhciBzPWUubm9kZXNbaV0sYT1zLnNwZWMuY29udGVudHx8IiIsYz1zLnNwZWMubWFya3M7cy5jb250ZW50TWF0Y2g9clthXXx8KHJbYV09JC5wYXJzZShhLGUubm9kZXMpKSxzLmlubGluZUNvbnRlbnQ9cy5jb250ZW50TWF0Y2guaW5saW5lQ29udGVudCxzLm1hcmtTZXQ9Il8iPT1jP251bGw6Yz91dChlLGMuc3BsaXQoIiAiKSk6IiIhPWMmJnMuaW5saW5lQ29udGVudD9udWxsOltdfWZvcih2YXIgbCBpbiBlLm1hcmtzKXt2YXIgcD1lLm1hcmtzW2xdLHU9cC5zcGVjLmV4Y2x1ZGVzO3AuZXhjbHVkZWQ9bnVsbD09dT9bcF06IiI9PXU/W106dXQoZSx1LnNwbGl0KCIgIikpfXRoaXMubm9kZUZyb21KU09OPXRoaXMubm9kZUZyb21KU09OLmJpbmQodGhpcyksdGhpcy5tYXJrRnJvbUpTT049dGhpcy5tYXJrRnJvbUpTT04uYmluZCh0aGlzKSx0aGlzLnRvcE5vZGVUeXBlPXRoaXMubm9kZXNbdGhpcy5zcGVjLnRvcE5vZGV8fCJkb2MiXSx0aGlzLmNhY2hlZD1PYmplY3QuY3JlYXRlKG51bGwpLHRoaXMuY2FjaGVkLndyYXBwaW5ncz1PYmplY3QuY3JlYXRlKG51bGwpfTtmdW5jdGlvbiB1dCh0LGUpe2Zvcih2YXIgbj1bXSxyPTA7cjxlLmxlbmd0aDtyKyspe3ZhciBvPWVbcl0saT10Lm1hcmtzW29dLHM9aTtpZihpKW4ucHVzaChpKTtlbHNlIGZvcih2YXIgYSBpbiB0Lm1hcmtzKXt2YXIgYz10Lm1hcmtzW2FdOygiXyI9PW98fGMuc3BlYy5ncm91cCYmYy5zcGVjLmdyb3VwLnNwbGl0KCIgIikuaW5kZXhPZihvKT4tMSkmJm4ucHVzaChzPWMpfWlmKCFzKXRocm93IG5ldyBTeW50YXhFcnJvcigiVW5rbm93biBtYXJrIHR5cGU6ICciK2Vbcl0rIiciKX1yZXR1cm4gbn1wdC5wcm90b3R5cGUubm9kZT1mdW5jdGlvbih0LGUsbixyKXtpZigic3RyaW5nIj09dHlwZW9mIHQpdD10aGlzLm5vZGVUeXBlKHQpO2Vsc2V7aWYoISh0IGluc3RhbmNlb2YgaXQpKXRocm93IG5ldyBSYW5nZUVycm9yKCJJbnZhbGlkIG5vZGUgdHlwZTogIit0KTtpZih0LnNjaGVtYSE9dGhpcyl0aHJvdyBuZXcgUmFuZ2VFcnJvcigiTm9kZSB0eXBlIGZyb20gZGlmZmVyZW50IHNjaGVtYSB1c2VkICgiK3QubmFtZSsiKSIpfXJldHVybiB0LmNyZWF0ZUNoZWNrZWQoZSxuLHIpfSxwdC5wcm90b3R5cGUudGV4dD1mdW5jdGlvbih0LGUpe3ZhciBuPXRoaXMubm9kZXMudGV4dDtyZXR1cm4gbmV3IEIobixuLmRlZmF1bHRBdHRycyx0LGguc2V0RnJvbShlKSl9LHB0LnByb3RvdHlwZS5tYXJrPWZ1bmN0aW9uKHQsZSl7cmV0dXJuInN0cmluZyI9PXR5cGVvZiB0JiYodD10aGlzLm1hcmtzW3RdKSx0LmNyZWF0ZShlKX0scHQucHJvdG90eXBlLm5vZGVGcm9tSlNPTj1mdW5jdGlvbih0KXtyZXR1cm4gXy5mcm9tSlNPTih0aGlzLHQpfSxwdC5wcm90b3R5cGUubWFya0Zyb21KU09OPWZ1bmN0aW9uKHQpe3JldHVybiBoLmZyb21KU09OKHRoaXMsdCl9LHB0LnByb3RvdHlwZS5ub2RlVHlwZT1mdW5jdGlvbih0KXt2YXIgZT10aGlzLm5vZGVzW3RdO2lmKCFlKXRocm93IG5ldyBSYW5nZUVycm9yKCJVbmtub3duIG5vZGUgdHlwZTogIit0KTtyZXR1cm4gZX07dmFyIGh0PWZ1bmN0aW9uKHQsZSl7dmFyIG49dGhpczt0aGlzLnNjaGVtYT10LHRoaXMucnVsZXM9ZSx0aGlzLnRhZ3M9W10sdGhpcy5zdHlsZXM9W10sZS5mb3JFYWNoKChmdW5jdGlvbih0KXt0LnRhZz9uLnRhZ3MucHVzaCh0KTp0LnN0eWxlJiZuLnN0eWxlcy5wdXNoKHQpfSkpfTtodC5wcm90b3R5cGUucGFyc2U9ZnVuY3Rpb24odCxlKXt2b2lkIDA9PT1lJiYoZT17fSk7dmFyIG49bmV3IGJ0KHRoaXMsZSwhMSk7cmV0dXJuIG4uYWRkQWxsKHQsbnVsbCxlLmZyb20sZS50byksbi5maW5pc2goKX0saHQucHJvdG90eXBlLnBhcnNlU2xpY2U9ZnVuY3Rpb24odCxlKXt2b2lkIDA9PT1lJiYoZT17fSk7dmFyIG49bmV3IGJ0KHRoaXMsZSwhMCk7cmV0dXJuIG4uYWRkQWxsKHQsbnVsbCxlLmZyb20sZS50byksZC5tYXhPcGVuKG4uZmluaXNoKCkpfSxodC5wcm90b3R5cGUubWF0Y2hUYWc9ZnVuY3Rpb24odCxlKXtmb3IodmFyIG49dGhpcyxyPTA7cjx0aGlzLnRhZ3MubGVuZ3RoO3IrKyl7dmFyIG89bi50YWdzW3JdO2lmKEN0KHQsby50YWcpJiYodm9pZCAwPT09by5uYW1lc3BhY2V8fHQubmFtZXNwYWNlVVJJPT1vLm5hbWVzcGFjZSkmJighby5jb250ZXh0fHxlLm1hdGNoZXNDb250ZXh0KG8uY29udGV4dCkpKXtpZihvLmdldEF0dHJzKXt2YXIgaT1vLmdldEF0dHJzKHQpO2lmKCExPT09aSljb250aW51ZTtvLmF0dHJzPWl9cmV0dXJuIG99fX0saHQucHJvdG90eXBlLm1hdGNoU3R5bGU9ZnVuY3Rpb24odCxlLG4pe2Zvcih2YXIgcj10aGlzLG89MDtvPHRoaXMuc3R5bGVzLmxlbmd0aDtvKyspe3ZhciBpPXIuc3R5bGVzW29dO2lmKCEoMCE9aS5zdHlsZS5pbmRleE9mKHQpfHxpLmNvbnRleHQmJiFuLm1hdGNoZXNDb250ZXh0KGkuY29udGV4dCl8fGkuc3R5bGUubGVuZ3RoPnQubGVuZ3RoJiYoNjEhPWkuc3R5bGUuY2hhckNvZGVBdCh0Lmxlbmd0aCl8fGkuc3R5bGUuc2xpY2UodC5sZW5ndGgrMSkhPWUpKSl7aWYoaS5nZXRBdHRycyl7dmFyIHM9aS5nZXRBdHRycyhlKTtpZighMT09PXMpY29udGludWU7aS5hdHRycz1zfXJldHVybiBpfX19LGh0LnNjaGVtYVJ1bGVzPWZ1bmN0aW9uKHQpe3ZhciBlPVtdO2Z1bmN0aW9uIG4odCl7Zm9yKHZhciBuPW51bGw9PXQucHJpb3JpdHk/NTA6dC5wcmlvcml0eSxyPTA7cjxlLmxlbmd0aDtyKyspe3ZhciBvPWVbcl0saT1udWxsPT1vLnByaW9yaXR5PzUwOm8ucHJpb3JpdHk7aWYoaTxuKWJyZWFrfWUuc3BsaWNlKHIsMCx0KX12YXIgcj1mdW5jdGlvbihlKXt2YXIgcj10Lm1hcmtzW2VdLnNwZWMucGFyc2VET007ciYmci5mb3JFYWNoKChmdW5jdGlvbih0KXtuKHQ9TXQodCkpLHQubWFyaz1lfSkpfTtmb3IodmFyIG8gaW4gdC5tYXJrcylyKG8pO3ZhciBpPWZ1bmN0aW9uKGUpe3ZhciByPXQubm9kZXNbc10uc3BlYy5wYXJzZURPTTtyJiZyLmZvckVhY2goKGZ1bmN0aW9uKHQpe24odD1NdCh0KSksdC5ub2RlPXN9KSl9O2Zvcih2YXIgcyBpbiB0Lm5vZGVzKWkobyk7cmV0dXJuIGV9LGh0LmZyb21TY2hlbWE9ZnVuY3Rpb24odCl7cmV0dXJuIHQuY2FjaGVkLmRvbVBhcnNlcnx8KHQuY2FjaGVkLmRvbVBhcnNlcj1uZXcgaHQodCxodC5zY2hlbWFSdWxlcyh0KSkpfTt2YXIgZnQ9e2FkZHJlc3M6ITAsYXJ0aWNsZTohMCxhc2lkZTohMCxibG9ja3F1b3RlOiEwLGNhbnZhczohMCxkZDohMCxkaXY6ITAsZGw6ITAsZmllbGRzZXQ6ITAsZmlnY2FwdGlvbjohMCxmaWd1cmU6ITAsZm9vdGVyOiEwLGZvcm06ITAsaDE6ITAsaDI6ITAsaDM6ITAsaDQ6ITAsaDU6ITAsaDY6ITAsaGVhZGVyOiEwLGhncm91cDohMCxocjohMCxsaTohMCxub3NjcmlwdDohMCxvbDohMCxvdXRwdXQ6ITAscDohMCxwcmU6ITAsc2VjdGlvbjohMCx0YWJsZTohMCx0Zm9vdDohMCx1bDohMH0sZHQ9e2hlYWQ6ITAsbm9zY3JpcHQ6ITAsb2JqZWN0OiEwLHNjcmlwdDohMCxzdHlsZTohMCx0aXRsZTohMH0sdnQ9e29sOiEwLHVsOiEwfSxtdD0xLHl0PTIsZ3Q9NDtmdW5jdGlvbiB3dCh0KXtyZXR1cm4odD9tdDowKXwoImZ1bGwiPT09dD95dDowKX12YXIgeHQ9ZnVuY3Rpb24odCxlLG4scixvLGkpe3RoaXMudHlwZT10LHRoaXMuYXR0cnM9ZSx0aGlzLnNvbGlkPXIsdGhpcy5tYXRjaD1vfHwoaSZndD9udWxsOnQuY29udGVudE1hdGNoKSx0aGlzLm9wdGlvbnM9aSx0aGlzLmNvbnRlbnQ9W10sdGhpcy5tYXJrcz1uLHRoaXMuYWN0aXZlTWFya3M9aC5ub25lfTt4dC5wcm90b3R5cGUuZmluZFdyYXBwaW5nPWZ1bmN0aW9uKHQpe2lmKCF0aGlzLm1hdGNoKXtpZighdGhpcy50eXBlKXJldHVybltdO3ZhciBlPXRoaXMudHlwZS5jb250ZW50TWF0Y2guZmlsbEJlZm9yZShhLmZyb20odCkpO2lmKCFlKXt2YXIgbixyPXRoaXMudHlwZS5jb250ZW50TWF0Y2g7cmV0dXJuKG49ci5maW5kV3JhcHBpbmcodC50eXBlKSk/KHRoaXMubWF0Y2g9cixuKTpudWxsfXRoaXMubWF0Y2g9dGhpcy50eXBlLmNvbnRlbnRNYXRjaC5tYXRjaEZyYWdtZW50KGUpfXJldHVybiB0aGlzLm1hdGNoLmZpbmRXcmFwcGluZyh0LnR5cGUpfSx4dC5wcm90b3R5cGUuZmluaXNoPWZ1bmN0aW9uKHQpe2lmKCEodGhpcy5vcHRpb25zJm10KSl7dmFyIGUsbj10aGlzLmNvbnRlbnRbdGhpcy5jb250ZW50Lmxlbmd0aC0xXTtuJiZuLmlzVGV4dCYmKGU9L1sgXHRcclxuXHUwMDBjXSskLy5leGVjKG4udGV4dCkpJiYobi50ZXh0Lmxlbmd0aD09ZVswXS5sZW5ndGg/dGhpcy5jb250ZW50LnBvcCgpOnRoaXMuY29udGVudFt0aGlzLmNvbnRlbnQubGVuZ3RoLTFdPW4ud2l0aFRleHQobi50ZXh0LnNsaWNlKDAsbi50ZXh0Lmxlbmd0aC1lWzBdLmxlbmd0aCkpKX12YXIgcj1hLmZyb20odGhpcy5jb250ZW50KTtyZXR1cm4hdCYmdGhpcy5tYXRjaCYmKHI9ci5hcHBlbmQodGhpcy5tYXRjaC5maWxsQmVmb3JlKGEuZW1wdHksITApKSksdGhpcy50eXBlP3RoaXMudHlwZS5jcmVhdGUodGhpcy5hdHRycyxyLHRoaXMubWFya3MpOnJ9O3ZhciBidD1mdW5jdGlvbih0LGUsbil7dGhpcy5wYXJzZXI9dCx0aGlzLm9wdGlvbnM9ZSx0aGlzLmlzT3Blbj1uLHRoaXMucGVuZGluZ01hcmtzPVtdO3ZhciByLG89ZS50b3BOb2RlLGk9d3QoZS5wcmVzZXJ2ZVdoaXRlc3BhY2UpfChuP2d0OjApO3I9bz9uZXcgeHQoby50eXBlLG8uYXR0cnMsaC5ub25lLCEwLGUudG9wTWF0Y2h8fG8udHlwZS5jb250ZW50TWF0Y2gsaSk6bmV3IHh0KG4/bnVsbDp0LnNjaGVtYS50b3BOb2RlVHlwZSxudWxsLGgubm9uZSwhMCxudWxsLGkpLHRoaXMubm9kZXM9W3JdLHRoaXMub3Blbj0wLHRoaXMuZmluZD1lLmZpbmRQb3NpdGlvbnMsdGhpcy5uZWVkc0Jsb2NrPSExfSxrdD17dG9wOnt9LGN1cnJlbnRQb3M6e319O2Z1bmN0aW9uIFN0KHQpe2Zvcih2YXIgZT10LmZpcnN0Q2hpbGQsbj1udWxsO2U7ZT1lLm5leHRTaWJsaW5nKXt2YXIgcj0xPT1lLm5vZGVUeXBlP2Uubm9kZU5hbWUudG9Mb3dlckNhc2UoKTpudWxsO3ImJnZ0Lmhhc093blByb3BlcnR5KHIpJiZuPyhuLmFwcGVuZENoaWxkKGUpLGU9bik6ImxpIj09cj9uPWU6ciYmKG49bnVsbCl9fWZ1bmN0aW9uIEN0KHQsZSl7cmV0dXJuKHQubWF0Y2hlc3x8dC5tc01hdGNoZXNTZWxlY3Rvcnx8dC53ZWJraXRNYXRjaGVzU2VsZWN0b3J8fHQubW96TWF0Y2hlc1NlbGVjdG9yKS5jYWxsKHQsZSl9ZnVuY3Rpb24gT3QodCl7dmFyIGUsbj0vXHMqKFtcdy1dKylccyo6XHMqKFteO10rKS9nLHI9W107d2hpbGUoZT1uLmV4ZWModCkpci5wdXNoKGVbMV0sZVsyXS50cmltKCkpO3JldHVybiByfWZ1bmN0aW9uIE10KHQpe3ZhciBlPXt9O2Zvcih2YXIgbiBpbiB0KWVbbl09dFtuXTtyZXR1cm4gZX1rdC50b3AuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubm9kZXNbdGhpcy5vcGVuXX0sYnQucHJvdG90eXBlLmFkZERPTT1mdW5jdGlvbih0KXt2YXIgZT10aGlzO2lmKDM9PXQubm9kZVR5cGUpdGhpcy5hZGRUZXh0Tm9kZSh0KTtlbHNlIGlmKDE9PXQubm9kZVR5cGUpe3ZhciBuPXQuZ2V0QXR0cmlidXRlKCJzdHlsZSIpLHI9bj90aGlzLnJlYWRTdHlsZXMoT3QobikpOm51bGw7aWYobnVsbCE9cilmb3IodmFyIG89MDtvPHIubGVuZ3RoO28rKyllLmFkZFBlbmRpbmdNYXJrKHJbb10pO2lmKHRoaXMuYWRkRWxlbWVudCh0KSxudWxsIT1yKWZvcih2YXIgaT0wO2k8ci5sZW5ndGg7aSsrKWUucmVtb3ZlUGVuZGluZ01hcmsocltpXSl9fSxidC5wcm90b3R5cGUuYWRkVGV4dE5vZGU9ZnVuY3Rpb24odCl7dmFyIGU9dC5ub2RlVmFsdWUsbj10aGlzLnRvcDtpZigobi50eXBlP24udHlwZS5pbmxpbmVDb250ZW50Om4uY29udGVudC5sZW5ndGgmJm4uY29udGVudFswXS5pc0lubGluZSl8fC9bXiBcdFxyXG5cdTAwMGNdLy50ZXN0KGUpKXtpZihuLm9wdGlvbnMmbXQpbi5vcHRpb25zJnl0fHwoZT1lLnJlcGxhY2UoL1xyP1xufFxyL2csIiAiKSk7ZWxzZSBpZihlPWUucmVwbGFjZSgvWyBcdFxyXG5cdTAwMGNdKy9nLCIgIiksL15bIFx0XHJcblx1MDAwY10vLnRlc3QoZSkmJnRoaXMub3Blbj09dGhpcy5ub2Rlcy5sZW5ndGgtMSl7dmFyIHI9bi5jb250ZW50W24uY29udGVudC5sZW5ndGgtMV0sbz10LnByZXZpb3VzU2libGluZzsoIXJ8fG8mJiJCUiI9PW8ubm9kZU5hbWV8fHIuaXNUZXh0JiYvWyBcdFxyXG5cdTAwMGNdJC8udGVzdChyLnRleHQpKSYmKGU9ZS5zbGljZSgxKSl9ZSYmdGhpcy5pbnNlcnROb2RlKHRoaXMucGFyc2VyLnNjaGVtYS50ZXh0KGUpKSx0aGlzLmZpbmRJblRleHQodCl9ZWxzZSB0aGlzLmZpbmRJbnNpZGUodCl9LGJ0LnByb3RvdHlwZS5hZGRFbGVtZW50PWZ1bmN0aW9uKHQpe3ZhciBlPXQubm9kZU5hbWUudG9Mb3dlckNhc2UoKTt2dC5oYXNPd25Qcm9wZXJ0eShlKSYmU3QodCk7dmFyIG49dGhpcy5vcHRpb25zLnJ1bGVGcm9tTm9kZSYmdGhpcy5vcHRpb25zLnJ1bGVGcm9tTm9kZSh0KXx8dGhpcy5wYXJzZXIubWF0Y2hUYWcodCx0aGlzKTtpZihuP24uaWdub3JlOmR0Lmhhc093blByb3BlcnR5KGUpKXRoaXMuZmluZEluc2lkZSh0KTtlbHNlIGlmKCFufHxuLnNraXApe24mJm4uc2tpcC5ub2RlVHlwZSYmKHQ9bi5za2lwKTt2YXIgcixvPXRoaXMudG9wLGk9dGhpcy5uZWVkc0Jsb2NrO2lmKGZ0Lmhhc093blByb3BlcnR5KGUpKXI9ITAsby50eXBlfHwodGhpcy5uZWVkc0Jsb2NrPSEwKTtlbHNlIGlmKCF0LmZpcnN0Q2hpbGQpcmV0dXJuIHZvaWQgdGhpcy5sZWFmRmFsbGJhY2sodCk7dGhpcy5hZGRBbGwodCksciYmdGhpcy5zeW5jKG8pLHRoaXMubmVlZHNCbG9jaz1pfWVsc2UgdGhpcy5hZGRFbGVtZW50QnlSdWxlKHQsbil9LGJ0LnByb3RvdHlwZS5sZWFmRmFsbGJhY2s9ZnVuY3Rpb24odCl7IkJSIj09dC5ub2RlTmFtZSYmdGhpcy50b3AudHlwZSYmdGhpcy50b3AudHlwZS5pbmxpbmVDb250ZW50JiZ0aGlzLmFkZFRleHROb2RlKHQub3duZXJEb2N1bWVudC5jcmVhdGVUZXh0Tm9kZSgiXG4iKSl9LGJ0LnByb3RvdHlwZS5yZWFkU3R5bGVzPWZ1bmN0aW9uKHQpe2Zvcih2YXIgZT10aGlzLG49aC5ub25lLHI9MDtyPHQubGVuZ3RoO3IrPTIpe3ZhciBvPWUucGFyc2VyLm1hdGNoU3R5bGUodFtyXSx0W3IrMV0sZSk7aWYobyl7aWYoby5pZ25vcmUpcmV0dXJuIG51bGw7bj1lLnBhcnNlci5zY2hlbWEubWFya3Nbby5tYXJrXS5jcmVhdGUoby5hdHRycykuYWRkVG9TZXQobil9fXJldHVybiBufSxidC5wcm90b3R5cGUuYWRkRWxlbWVudEJ5UnVsZT1mdW5jdGlvbih0LGUpe3ZhciBuLHIsbyxpLHM9dGhpcztlLm5vZGU/KHI9dGhpcy5wYXJzZXIuc2NoZW1hLm5vZGVzW2Uubm9kZV0sci5pc0xlYWY/dGhpcy5pbnNlcnROb2RlKHIuY3JlYXRlKGUuYXR0cnMpKXx8dGhpcy5sZWFmRmFsbGJhY2sodCk6bj10aGlzLmVudGVyKHIsZS5hdHRycyxlLnByZXNlcnZlV2hpdGVzcGFjZSkpOihvPXRoaXMucGFyc2VyLnNjaGVtYS5tYXJrc1tlLm1hcmtdLGk9by5jcmVhdGUoZS5hdHRycyksdGhpcy5hZGRQZW5kaW5nTWFyayhpKSk7dmFyIGE9dGhpcy50b3A7aWYociYmci5pc0xlYWYpdGhpcy5maW5kSW5zaWRlKHQpO2Vsc2UgaWYoZS5nZXRDb250ZW50KXRoaXMuZmluZEluc2lkZSh0KSxlLmdldENvbnRlbnQodCx0aGlzLnBhcnNlci5zY2hlbWEpLmZvckVhY2goKGZ1bmN0aW9uKHQpe3JldHVybiBzLmluc2VydE5vZGUodCl9KSk7ZWxzZXt2YXIgYz1lLmNvbnRlbnRFbGVtZW50OyJzdHJpbmciPT10eXBlb2YgYz9jPXQucXVlcnlTZWxlY3RvcihjKToiZnVuY3Rpb24iPT10eXBlb2YgYyYmKGM9Yyh0KSksY3x8KGM9dCksdGhpcy5maW5kQXJvdW5kKHQsYywhMCksdGhpcy5hZGRBbGwoYyxuKX1uJiYodGhpcy5zeW5jKGEpLHRoaXMub3Blbi0tKSxpJiZ0aGlzLnJlbW92ZVBlbmRpbmdNYXJrKGkpfSxidC5wcm90b3R5cGUuYWRkQWxsPWZ1bmN0aW9uKHQsZSxuLHIpe2Zvcih2YXIgbz10aGlzLGk9bnx8MCxzPW4/dC5jaGlsZE5vZGVzW25dOnQuZmlyc3RDaGlsZCxhPW51bGw9PXI/bnVsbDp0LmNoaWxkTm9kZXNbcl07cyE9YTtzPXMubmV4dFNpYmxpbmcsKytpKW8uZmluZEF0UG9pbnQodCxpKSxvLmFkZERPTShzKSxlJiZmdC5oYXNPd25Qcm9wZXJ0eShzLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCkpJiZvLnN5bmMoZSk7dGhpcy5maW5kQXRQb2ludCh0LGkpfSxidC5wcm90b3R5cGUuZmluZFBsYWNlPWZ1bmN0aW9uKHQpe2Zvcih2YXIgZSxuLHI9dGhpcyxvPXRoaXMub3BlbjtvPj0wO28tLSl7dmFyIGk9ci5ub2Rlc1tvXSxzPWkuZmluZFdyYXBwaW5nKHQpO2lmKHMmJighZXx8ZS5sZW5ndGg+cy5sZW5ndGgpJiYoZT1zLG49aSwhcy5sZW5ndGgpKWJyZWFrO2lmKGkuc29saWQpYnJlYWt9aWYoIWUpcmV0dXJuITE7dGhpcy5zeW5jKG4pO2Zvcih2YXIgYT0wO2E8ZS5sZW5ndGg7YSsrKXIuZW50ZXJJbm5lcihlW2FdLG51bGwsITEpO3JldHVybiEwfSxidC5wcm90b3R5cGUuaW5zZXJ0Tm9kZT1mdW5jdGlvbih0KXtpZih0LmlzSW5saW5lJiZ0aGlzLm5lZWRzQmxvY2smJiF0aGlzLnRvcC50eXBlKXt2YXIgZT10aGlzLnRleHRibG9ja0Zyb21Db250ZXh0KCk7ZSYmdGhpcy5lbnRlcklubmVyKGUpfWlmKHRoaXMuZmluZFBsYWNlKHQpKXt0aGlzLmNsb3NlRXh0cmEoKTt2YXIgbj10aGlzLnRvcDt0aGlzLmFwcGx5UGVuZGluZ01hcmtzKG4pLG4ubWF0Y2gmJihuLm1hdGNoPW4ubWF0Y2gubWF0Y2hUeXBlKHQudHlwZSkpO2Zvcih2YXIgcj1uLmFjdGl2ZU1hcmtzLG89MDtvPHQubWFya3MubGVuZ3RoO28rKyluLnR5cGUmJiFuLnR5cGUuYWxsb3dzTWFya1R5cGUodC5tYXJrc1tvXS50eXBlKXx8KHI9dC5tYXJrc1tvXS5hZGRUb1NldChyKSk7cmV0dXJuIG4uY29udGVudC5wdXNoKHQubWFyayhyKSksITB9cmV0dXJuITF9LGJ0LnByb3RvdHlwZS5hcHBseVBlbmRpbmdNYXJrcz1mdW5jdGlvbih0KXtmb3IodmFyIGU9dGhpcyxuPTA7bjx0aGlzLnBlbmRpbmdNYXJrcy5sZW5ndGg7bisrKXt2YXIgcj1lLnBlbmRpbmdNYXJrc1tuXTt0LnR5cGUmJiF0LnR5cGUuYWxsb3dzTWFya1R5cGUoci50eXBlKXx8ci5pc0luU2V0KHQuYWN0aXZlTWFya3MpfHwodC5hY3RpdmVNYXJrcz1yLmFkZFRvU2V0KHQuYWN0aXZlTWFya3MpLGUucGVuZGluZ01hcmtzLnNwbGljZShuLS0sMSkpfX0sYnQucHJvdG90eXBlLmVudGVyPWZ1bmN0aW9uKHQsZSxuKXt2YXIgcj10aGlzLmZpbmRQbGFjZSh0LmNyZWF0ZShlKSk7cmV0dXJuIHImJih0aGlzLmFwcGx5UGVuZGluZ01hcmtzKHRoaXMudG9wKSx0aGlzLmVudGVySW5uZXIodCxlLCEwLG4pKSxyfSxidC5wcm90b3R5cGUuZW50ZXJJbm5lcj1mdW5jdGlvbih0LGUsbixyKXt0aGlzLmNsb3NlRXh0cmEoKTt2YXIgbz10aGlzLnRvcDtvLm1hdGNoPW8ubWF0Y2gmJm8ubWF0Y2gubWF0Y2hUeXBlKHQsZSk7dmFyIGk9bnVsbD09cj9vLm9wdGlvbnMmfmd0Ond0KHIpO28ub3B0aW9ucyZndCYmMD09by5jb250ZW50Lmxlbmd0aCYmKGl8PWd0KSx0aGlzLm5vZGVzLnB1c2gobmV3IHh0KHQsZSxvLmFjdGl2ZU1hcmtzLG4sbnVsbCxpKSksdGhpcy5vcGVuKyt9LGJ0LnByb3RvdHlwZS5jbG9zZUV4dHJhPWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMsbj10aGlzLm5vZGVzLmxlbmd0aC0xO2lmKG4+dGhpcy5vcGVuKXtmb3IoO24+dGhpcy5vcGVuO24tLSllLm5vZGVzW24tMV0uY29udGVudC5wdXNoKGUubm9kZXNbbl0uZmluaXNoKHQpKTt0aGlzLm5vZGVzLmxlbmd0aD10aGlzLm9wZW4rMX19LGJ0LnByb3RvdHlwZS5maW5pc2g9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5vcGVuPTAsdGhpcy5jbG9zZUV4dHJhKHRoaXMuaXNPcGVuKSx0aGlzLm5vZGVzWzBdLmZpbmlzaCh0aGlzLmlzT3Blbnx8dGhpcy5vcHRpb25zLnRvcE9wZW4pfSxidC5wcm90b3R5cGUuc3luYz1mdW5jdGlvbih0KXtmb3IodmFyIGU9dGhpcyxuPXRoaXMub3BlbjtuPj0wO24tLSlpZihlLm5vZGVzW25dPT10KXJldHVybiB2b2lkKGUub3Blbj1uKX0sYnQucHJvdG90eXBlLmFkZFBlbmRpbmdNYXJrPWZ1bmN0aW9uKHQpe3RoaXMucGVuZGluZ01hcmtzLnB1c2godCl9LGJ0LnByb3RvdHlwZS5yZW1vdmVQZW5kaW5nTWFyaz1mdW5jdGlvbih0KXt2YXIgZT10aGlzLnBlbmRpbmdNYXJrcy5sYXN0SW5kZXhPZih0KTtpZihlPi0xKXRoaXMucGVuZGluZ01hcmtzLnNwbGljZShlLDEpO2Vsc2V7dmFyIG49dGhpcy50b3A7bi5hY3RpdmVNYXJrcz10LnJlbW92ZUZyb21TZXQobi5hY3RpdmVNYXJrcyl9fSxrdC5jdXJyZW50UG9zLmdldD1mdW5jdGlvbigpe3ZhciB0PXRoaXM7dGhpcy5jbG9zZUV4dHJhKCk7Zm9yKHZhciBlPTAsbj10aGlzLm9wZW47bj49MDtuLS0pe2Zvcih2YXIgcj10Lm5vZGVzW25dLmNvbnRlbnQsbz1yLmxlbmd0aC0xO28+PTA7by0tKWUrPXJbb10ubm9kZVNpemU7biYmZSsrfXJldHVybiBlfSxidC5wcm90b3R5cGUuZmluZEF0UG9pbnQ9ZnVuY3Rpb24odCxlKXt2YXIgbj10aGlzO2lmKHRoaXMuZmluZClmb3IodmFyIHI9MDtyPHRoaXMuZmluZC5sZW5ndGg7cisrKW4uZmluZFtyXS5ub2RlPT10JiZuLmZpbmRbcl0ub2Zmc2V0PT1lJiYobi5maW5kW3JdLnBvcz1uLmN1cnJlbnRQb3MpfSxidC5wcm90b3R5cGUuZmluZEluc2lkZT1mdW5jdGlvbih0KXt2YXIgZT10aGlzO2lmKHRoaXMuZmluZClmb3IodmFyIG49MDtuPHRoaXMuZmluZC5sZW5ndGg7bisrKW51bGw9PWUuZmluZFtuXS5wb3MmJjE9PXQubm9kZVR5cGUmJnQuY29udGFpbnMoZS5maW5kW25dLm5vZGUpJiYoZS5maW5kW25dLnBvcz1lLmN1cnJlbnRQb3MpfSxidC5wcm90b3R5cGUuZmluZEFyb3VuZD1mdW5jdGlvbih0LGUsbil7dmFyIHI9dGhpcztpZih0IT1lJiZ0aGlzLmZpbmQpZm9yKHZhciBvPTA7bzx0aGlzLmZpbmQubGVuZ3RoO28rKylpZihudWxsPT1yLmZpbmRbb10ucG9zJiYxPT10Lm5vZGVUeXBlJiZ0LmNvbnRhaW5zKHIuZmluZFtvXS5ub2RlKSl7dmFyIGk9ZS5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbihyLmZpbmRbb10ubm9kZSk7aSYobj8yOjQpJiYoci5maW5kW29dLnBvcz1yLmN1cnJlbnRQb3MpfX0sYnQucHJvdG90eXBlLmZpbmRJblRleHQ9ZnVuY3Rpb24odCl7dmFyIGU9dGhpcztpZih0aGlzLmZpbmQpZm9yKHZhciBuPTA7bjx0aGlzLmZpbmQubGVuZ3RoO24rKyllLmZpbmRbbl0ubm9kZT09dCYmKGUuZmluZFtuXS5wb3M9ZS5jdXJyZW50UG9zLSh0Lm5vZGVWYWx1ZS5sZW5ndGgtZS5maW5kW25dLm9mZnNldCkpfSxidC5wcm90b3R5cGUubWF0Y2hlc0NvbnRleHQ9ZnVuY3Rpb24odCl7dmFyIGU9dGhpcztpZih0LmluZGV4T2YoInwiKT4tMSlyZXR1cm4gdC5zcGxpdCgvXHMqXHxccyovKS5zb21lKHRoaXMubWF0Y2hlc0NvbnRleHQsdGhpcyk7dmFyIG49dC5zcGxpdCgiLyIpLHI9dGhpcy5vcHRpb25zLmNvbnRleHQsbz0hdGhpcy5pc09wZW4mJighcnx8ci5wYXJlbnQudHlwZT09dGhpcy5ub2Rlc1swXS50eXBlKSxpPS0ocj9yLmRlcHRoKzE6MCkrKG8/MDoxKSxzPWZ1bmN0aW9uKHQsYSl7Zm9yKDt0Pj0wO3QtLSl7dmFyIGM9blt0XTtpZigiIj09Yyl7aWYodD09bi5sZW5ndGgtMXx8MD09dCljb250aW51ZTtmb3IoO2E+PWk7YS0tKWlmKHModC0xLGEpKXJldHVybiEwO3JldHVybiExfXZhciBsPWE+MHx8MD09YSYmbz9lLm5vZGVzW2FdLnR5cGU6ciYmYT49aT9yLm5vZGUoYS1pKS50eXBlOm51bGw7aWYoIWx8fGwubmFtZSE9YyYmLTE9PWwuZ3JvdXBzLmluZGV4T2YoYykpcmV0dXJuITE7YS0tfXJldHVybiEwfTtyZXR1cm4gcyhuLmxlbmd0aC0xLHRoaXMub3Blbil9LGJ0LnByb3RvdHlwZS50ZXh0YmxvY2tGcm9tQ29udGV4dD1mdW5jdGlvbigpe3ZhciB0PXRoaXMsZT10aGlzLm9wdGlvbnMuY29udGV4dDtpZihlKWZvcih2YXIgbj1lLmRlcHRoO24+PTA7bi0tKXt2YXIgcj1lLm5vZGUobikuY29udGVudE1hdGNoQXQoZS5pbmRleEFmdGVyKG4pKS5kZWZhdWx0VHlwZTtpZihyJiZyLmlzVGV4dGJsb2NrJiZyLmRlZmF1bHRBdHRycylyZXR1cm4gcn1mb3IodmFyIG8gaW4gdC5wYXJzZXIuc2NoZW1hLm5vZGVzKXt2YXIgaT10LnBhcnNlci5zY2hlbWEubm9kZXNbb107aWYoaS5pc1RleHRibG9jayYmaS5kZWZhdWx0QXR0cnMpcmV0dXJuIGl9fSxPYmplY3QuZGVmaW5lUHJvcGVydGllcyhidC5wcm90b3R5cGUsa3QpO3ZhciBUdD1mdW5jdGlvbih0LGUpe3RoaXMubm9kZXM9dHx8e30sdGhpcy5tYXJrcz1lfHx7fX07ZnVuY3Rpb24gTnQodCl7dmFyIGU9e307Zm9yKHZhciBuIGluIHQpe3ZhciByPXRbbl0uc3BlYy50b0RPTTtyJiYoZVtuXT1yKX1yZXR1cm4gZX1mdW5jdGlvbiBFdCh0KXtyZXR1cm4gdC5kb2N1bWVudHx8d2luZG93LmRvY3VtZW50fVR0LnByb3RvdHlwZS5zZXJpYWxpemVGcmFnbWVudD1mdW5jdGlvbih0LGUsbil7dmFyIHI9dGhpczt2b2lkIDA9PT1lJiYoZT17fSksbnx8KG49RXQoZSkuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpKTt2YXIgbz1uLGk9bnVsbDtyZXR1cm4gdC5mb3JFYWNoKChmdW5jdGlvbih0KXtpZihpfHx0Lm1hcmtzLmxlbmd0aCl7aXx8KGk9W10pO3ZhciBuPTAscz0wO3doaWxlKG48aS5sZW5ndGgmJnM8dC5tYXJrcy5sZW5ndGgpe3ZhciBhPXQubWFya3Nbc107aWYoci5tYXJrc1thLnR5cGUubmFtZV0pe2lmKCFhLmVxKGlbbl0pfHwhMT09PWEudHlwZS5zcGVjLnNwYW5uaW5nKWJyZWFrO24rPTIscysrfWVsc2UgcysrfXdoaWxlKG48aS5sZW5ndGgpbz1pLnBvcCgpLGkucG9wKCk7d2hpbGUoczx0Lm1hcmtzLmxlbmd0aCl7dmFyIGM9dC5tYXJrc1tzKytdLGw9ci5zZXJpYWxpemVNYXJrKGMsdC5pc0lubGluZSxlKTtsJiYoaS5wdXNoKGMsbyksby5hcHBlbmRDaGlsZChsLmRvbSksbz1sLmNvbnRlbnRET018fGwuZG9tKX19by5hcHBlbmRDaGlsZChyLnNlcmlhbGl6ZU5vZGUodCxlKSl9KSksbn0sVHQucHJvdG90eXBlLnNlcmlhbGl6ZU5vZGU9ZnVuY3Rpb24odCxlKXt2b2lkIDA9PT1lJiYoZT17fSk7dmFyIG49VHQucmVuZGVyU3BlYyhFdChlKSx0aGlzLm5vZGVzW3QudHlwZS5uYW1lXSh0KSkscj1uLmRvbSxvPW4uY29udGVudERPTTtpZihvKXtpZih0LmlzTGVhZil0aHJvdyBuZXcgUmFuZ2VFcnJvcigiQ29udGVudCBob2xlIG5vdCBhbGxvd2VkIGluIGEgbGVhZiBub2RlIHNwZWMiKTtlLm9uQ29udGVudD9lLm9uQ29udGVudCh0LG8sZSk6dGhpcy5zZXJpYWxpemVGcmFnbWVudCh0LmNvbnRlbnQsZSxvKX1yZXR1cm4gcn0sVHQucHJvdG90eXBlLnNlcmlhbGl6ZU5vZGVBbmRNYXJrcz1mdW5jdGlvbih0LGUpe3ZhciBuPXRoaXM7dm9pZCAwPT09ZSYmKGU9e30pO2Zvcih2YXIgcj10aGlzLnNlcmlhbGl6ZU5vZGUodCxlKSxvPXQubWFya3MubGVuZ3RoLTE7bz49MDtvLS0pe3ZhciBpPW4uc2VyaWFsaXplTWFyayh0Lm1hcmtzW29dLHQuaXNJbmxpbmUsZSk7aSYmKChpLmNvbnRlbnRET018fGkuZG9tKS5hcHBlbmRDaGlsZChyKSxyPWkuZG9tKX1yZXR1cm4gcn0sVHQucHJvdG90eXBlLnNlcmlhbGl6ZU1hcms9ZnVuY3Rpb24odCxlLG4pe3ZvaWQgMD09PW4mJihuPXt9KTt2YXIgcj10aGlzLm1hcmtzW3QudHlwZS5uYW1lXTtyZXR1cm4gciYmVHQucmVuZGVyU3BlYyhFdChuKSxyKHQsZSkpfSxUdC5yZW5kZXJTcGVjPWZ1bmN0aW9uKHQsZSl7aWYoInN0cmluZyI9PXR5cGVvZiBlKXJldHVybntkb206dC5jcmVhdGVUZXh0Tm9kZShlKX07aWYobnVsbCE9ZS5ub2RlVHlwZSlyZXR1cm57ZG9tOmV9O3ZhciBuPXQuY3JlYXRlRWxlbWVudChlWzBdKSxyPW51bGwsbz1lWzFdLGk9MTtpZihvJiYib2JqZWN0Ij09dHlwZW9mIG8mJm51bGw9PW8ubm9kZVR5cGUmJiFBcnJheS5pc0FycmF5KG8pKWZvcih2YXIgcyBpbiBpPTIsbyludWxsIT1vW3NdJiZuLnNldEF0dHJpYnV0ZShzLG9bc10pO2Zvcih2YXIgYT1pO2E8ZS5sZW5ndGg7YSsrKXt2YXIgYz1lW2FdO2lmKDA9PT1jKXtpZihhPGUubGVuZ3RoLTF8fGE+aSl0aHJvdyBuZXcgUmFuZ2VFcnJvcigiQ29udGVudCBob2xlIG11c3QgYmUgdGhlIG9ubHkgY2hpbGQgb2YgaXRzIHBhcmVudCBub2RlIik7cmV0dXJue2RvbTpuLGNvbnRlbnRET006bn19dmFyIGw9VHQucmVuZGVyU3BlYyh0LGMpLHA9bC5kb20sdT1sLmNvbnRlbnRET007aWYobi5hcHBlbmRDaGlsZChwKSx1KXtpZihyKXRocm93IG5ldyBSYW5nZUVycm9yKCJNdWx0aXBsZSBjb250ZW50IGhvbGVzIik7cj11fX1yZXR1cm57ZG9tOm4sY29udGVudERPTTpyfX0sVHQuZnJvbVNjaGVtYT1mdW5jdGlvbih0KXtyZXR1cm4gdC5jYWNoZWQuZG9tU2VyaWFsaXplcnx8KHQuY2FjaGVkLmRvbVNlcmlhbGl6ZXI9bmV3IFR0KHRoaXMubm9kZXNGcm9tU2NoZW1hKHQpLHRoaXMubWFya3NGcm9tU2NoZW1hKHQpKSl9LFR0Lm5vZGVzRnJvbVNjaGVtYT1mdW5jdGlvbih0KXt2YXIgZT1OdCh0Lm5vZGVzKTtyZXR1cm4gZS50ZXh0fHwoZS50ZXh0PWZ1bmN0aW9uKHQpe3JldHVybiB0LnRleHR9KSxlfSxUdC5tYXJrc0Zyb21TY2hlbWE9ZnVuY3Rpb24odCl7cmV0dXJuIE50KHQubWFya3MpfSxlLk5vZGU9XyxlLlJlc29sdmVkUG9zPU4sZS5Ob2RlUmFuZ2U9eixlLkZyYWdtZW50PWEsZS5TbGljZT1kLGUuUmVwbGFjZUVycm9yPWYsZS5NYXJrPWgsZS5TY2hlbWE9cHQsZS5Ob2RlVHlwZT1pdCxlLk1hcmtUeXBlPWx0LGUuQ29udGVudE1hdGNoPSQsZS5ET01QYXJzZXI9aHQsZS5ET01TZXJpYWxpemVyPVR0fSwiNjNiNiI6ZnVuY3Rpb24odCxlLG4pe3ZhciByPW4oImU1M2QiKSxvPW4oIjU4NGEiKSxpPW4oImQ4NjQiKSxzPW4oIjM1ZTgiKSxhPW4oIjA3ZTMiKSxjPSJwcm90b3R5cGUiLGw9ZnVuY3Rpb24odCxlLG4pe3ZhciBwLHUsaCxmPXQmbC5GLGQ9dCZsLkcsdj10JmwuUyxtPXQmbC5QLHk9dCZsLkIsZz10JmwuVyx3PWQ/bzpvW2VdfHwob1tlXT17fSkseD13W2NdLGI9ZD9yOnY/cltlXToocltlXXx8e30pW2NdO2ZvcihwIGluIGQmJihuPWUpLG4pdT0hZiYmYiYmdm9pZCAwIT09YltwXSx1JiZhKHcscCl8fChoPXU/YltwXTpuW3BdLHdbcF09ZCYmImZ1bmN0aW9uIiE9dHlwZW9mIGJbcF0/bltwXTp5JiZ1P2koaCxyKTpnJiZiW3BdPT1oP2Z1bmN0aW9uKHQpe3ZhciBlPWZ1bmN0aW9uKGUsbixyKXtpZih0aGlzIGluc3RhbmNlb2YgdCl7c3dpdGNoKGFyZ3VtZW50cy5sZW5ndGgpe2Nhc2UgMDpyZXR1cm4gbmV3IHQ7Y2FzZSAxOnJldHVybiBuZXcgdChlKTtjYXNlIDI6cmV0dXJuIG5ldyB0KGUsbil9cmV0dXJuIG5ldyB0KGUsbixyKX1yZXR1cm4gdC5hcHBseSh0aGlzLGFyZ3VtZW50cyl9O3JldHVybiBlW2NdPXRbY10sZX0oaCk6bSYmImZ1bmN0aW9uIj09dHlwZW9mIGg/aShGdW5jdGlvbi5jYWxsLGgpOmgsbSYmKCh3LnZpcnR1YWx8fCh3LnZpcnR1YWw9e30pKVtwXT1oLHQmbC5SJiZ4JiYheFtwXSYmcyh4LHAsaCkpKX07bC5GPTEsbC5HPTIsbC5TPTQsbC5QPTgsbC5CPTE2LGwuVz0zMixsLlU9NjQsbC5SPTEyOCx0LmV4cG9ydHM9bH0sNjgyMTpmdW5jdGlvbih0LGUsbil7dmFyIHI9bigiNjI2YSIpLG89bigiYmUxMyIpO3QuZXhwb3J0cz1mdW5jdGlvbih0KXtyZXR1cm4gcihvKHQpKX19LCI2OWE4IjpmdW5jdGlvbih0LGUpe3ZhciBuPXt9Lmhhc093blByb3BlcnR5O3QuZXhwb3J0cz1mdW5jdGlvbih0LGUpe3JldHVybiBuLmNhbGwodCxlKX19LCI2YTk5IjpmdW5jdGlvbih0LGUsbil7dmFyIHI9bigiZDNmNCIpO3QuZXhwb3J0cz1mdW5jdGlvbih0LGUpe2lmKCFyKHQpKXJldHVybiB0O3ZhciBuLG87aWYoZSYmImZ1bmN0aW9uIj09dHlwZW9mKG49dC50b1N0cmluZykmJiFyKG89bi5jYWxsKHQpKSlyZXR1cm4gbztpZigiZnVuY3Rpb24iPT10eXBlb2Yobj10LnZhbHVlT2YpJiYhcihvPW4uY2FsbCh0KSkpcmV0dXJuIG87aWYoIWUmJiJmdW5jdGlvbiI9PXR5cGVvZihuPXQudG9TdHJpbmcpJiYhcihvPW4uY2FsbCh0KSkpcmV0dXJuIG87dGhyb3cgVHlwZUVycm9yKCJDYW4ndCBjb252ZXJ0IG9iamVjdCB0byBwcmltaXRpdmUgdmFsdWUiKX19LCI2YjRjIjpmdW5jdGlvbih0LGUpe3ZhciBuPXt9LnRvU3RyaW5nO3QuZXhwb3J0cz1mdW5jdGlvbih0KXtyZXR1cm4gbi5jYWxsKHQpLnNsaWNlKDgsLTEpfX0sIjZjMWMiOmZ1bmN0aW9uKHQsZSxuKXtuKCJjMzY3Iik7Zm9yKHZhciByPW4oImU1M2QiKSxvPW4oIjM1ZTgiKSxpPW4oIjQ4MWIiKSxzPW4oIjUxNjgiKSgidG9TdHJpbmdUYWciKSxhPSJDU1NSdWxlTGlzdCxDU1NTdHlsZURlY2xhcmF0aW9uLENTU1ZhbHVlTGlzdCxDbGllbnRSZWN0TGlzdCxET01SZWN0TGlzdCxET01TdHJpbmdMaXN0LERPTVRva2VuTGlzdCxEYXRhVHJhbnNmZXJJdGVtTGlzdCxGaWxlTGlzdCxIVE1MQWxsQ29sbGVjdGlvbixIVE1MQ29sbGVjdGlvbixIVE1MRm9ybUVsZW1lbnQsSFRNTFNlbGVjdEVsZW1lbnQsTWVkaWFMaXN0LE1pbWVUeXBlQXJyYXksTmFtZWROb2RlTWFwLE5vZGVMaXN0LFBhaW50UmVxdWVzdExpc3QsUGx1Z2luLFBsdWdpbkFycmF5LFNWR0xlbmd0aExpc3QsU1ZHTnVtYmVyTGlzdCxTVkdQYXRoU2VnTGlzdCxTVkdQb2ludExpc3QsU1ZHU3RyaW5nTGlzdCxTVkdUcmFuc2Zvcm1MaXN0LFNvdXJjZUJ1ZmZlckxpc3QsU3R5bGVTaGVldExpc3QsVGV4dFRyYWNrQ3VlTGlzdCxUZXh0VHJhY2tMaXN0LFRvdWNoTGlzdCIuc3BsaXQoIiwiKSxjPTA7YzxhLmxlbmd0aDtjKyspe3ZhciBsPWFbY10scD1yW2xdLHU9cCYmcC5wcm90b3R5cGU7dSYmIXVbc10mJm8odSxzLGwpLGlbbF09aS5BcnJheX19LCI2ZjI3IjpmdW5jdGlvbih0LGUsbil7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIHIodCl7cmV0dXJuIHQmJiJvYmplY3QiPT09dHlwZW9mIHQmJiJkZWZhdWx0ImluIHQ/dFsiZGVmYXVsdCJdOnR9T2JqZWN0LmRlZmluZVByb3BlcnR5KGUsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pO3ZhciBvPXIobigiZmFhMSIpKTtmdW5jdGlvbiBpKHQsZSxuKXtmb3IodmFyIHI9MDs7cisrKXtpZihyPT10LmNoaWxkQ291bnR8fHI9PWUuY2hpbGRDb3VudClyZXR1cm4gdC5jaGlsZENvdW50PT1lLmNoaWxkQ291bnQ/bnVsbDpuO3ZhciBvPXQuY2hpbGQocikscz1lLmNoaWxkKHIpO2lmKG8hPXMpe2lmKCFvLnNhbWVNYXJrdXAocykpcmV0dXJuIG47aWYoby5pc1RleHQmJm8udGV4dCE9cy50ZXh0KXtmb3IodmFyIGE9MDtvLnRleHRbYV09PXMudGV4dFthXTthKyspbisrO3JldHVybiBufWlmKG8uY29udGVudC5zaXplfHxzLmNvbnRlbnQuc2l6ZSl7dmFyIGM9aShvLmNvbnRlbnQscy5jb250ZW50LG4rMSk7aWYobnVsbCE9YylyZXR1cm4gY31uKz1vLm5vZGVTaXplfWVsc2Ugbis9by5ub2RlU2l6ZX19ZnVuY3Rpb24gcyh0LGUsbixyKXtmb3IodmFyIG89dC5jaGlsZENvdW50LGk9ZS5jaGlsZENvdW50Ozspe2lmKDA9PW98fDA9PWkpcmV0dXJuIG89PWk/bnVsbDp7YTpuLGI6cn07dmFyIGE9dC5jaGlsZCgtLW8pLGM9ZS5jaGlsZCgtLWkpLGw9YS5ub2RlU2l6ZTtpZihhIT1jKXtpZighYS5zYW1lTWFya3VwKGMpKXJldHVybnthOm4sYjpyfTtpZihhLmlzVGV4dCYmYS50ZXh0IT1jLnRleHQpe3ZhciBwPTAsdT1NYXRoLm1pbihhLnRleHQubGVuZ3RoLGMudGV4dC5sZW5ndGgpO3doaWxlKHA8dSYmYS50ZXh0W2EudGV4dC5sZW5ndGgtcC0xXT09Yy50ZXh0W2MudGV4dC5sZW5ndGgtcC0xXSlwKyssbi0tLHItLTtyZXR1cm57YTpuLGI6cn19aWYoYS5jb250ZW50LnNpemV8fGMuY29udGVudC5zaXplKXt2YXIgaD1zKGEuY29udGVudCxjLmNvbnRlbnQsbi0xLHItMSk7aWYoaClyZXR1cm4gaH1uLT1sLHItPWx9ZWxzZSBuLT1sLHItPWx9fXZhciBhPWZ1bmN0aW9uKHQsZSl7dmFyIG49dGhpcztpZih0aGlzLmNvbnRlbnQ9dCx0aGlzLnNpemU9ZXx8MCxudWxsPT1lKWZvcih2YXIgcj0wO3I8dC5sZW5ndGg7cisrKW4uc2l6ZSs9dFtyXS5ub2RlU2l6ZX0sYz17Zmlyc3RDaGlsZDp7fSxsYXN0Q2hpbGQ6e30sY2hpbGRDb3VudDp7fX07YS5wcm90b3R5cGUubm9kZXNCZXR3ZWVuPWZ1bmN0aW9uKHQsZSxuLHIsbyl7dmFyIGk9dGhpczt2b2lkIDA9PT1yJiYocj0wKTtmb3IodmFyIHM9MCxhPTA7YTxlO3MrKyl7dmFyIGM9aS5jb250ZW50W3NdLGw9YStjLm5vZGVTaXplO2lmKGw+dCYmITEhPT1uKGMscithLG8scykmJmMuY29udGVudC5zaXplKXt2YXIgcD1hKzE7Yy5ub2Rlc0JldHdlZW4oTWF0aC5tYXgoMCx0LXApLE1hdGgubWluKGMuY29udGVudC5zaXplLGUtcCksbixyK3ApfWE9bH19LGEucHJvdG90eXBlLmRlc2NlbmRhbnRzPWZ1bmN0aW9uKHQpe3RoaXMubm9kZXNCZXR3ZWVuKDAsdGhpcy5zaXplLHQpfSxhLnByb3RvdHlwZS50ZXh0QmV0d2Vlbj1mdW5jdGlvbih0LGUsbixyKXt2YXIgbz0iIixpPSEwO3JldHVybiB0aGlzLm5vZGVzQmV0d2Vlbih0LGUsKGZ1bmN0aW9uKHMsYSl7cy5pc1RleHQ/KG8rPXMudGV4dC5zbGljZShNYXRoLm1heCh0LGEpLWEsZS1hKSxpPSFuKTpzLmlzTGVhZiYmcj8obys9cixpPSFuKTohaSYmcy5pc0Jsb2NrJiYobys9bixpPSEwKX0pLDApLG99LGEucHJvdG90eXBlLmFwcGVuZD1mdW5jdGlvbih0KXtpZighdC5zaXplKXJldHVybiB0aGlzO2lmKCF0aGlzLnNpemUpcmV0dXJuIHQ7dmFyIGU9dGhpcy5sYXN0Q2hpbGQsbj10LmZpcnN0Q2hpbGQscj10aGlzLmNvbnRlbnQuc2xpY2UoKSxvPTA7Zm9yKGUuaXNUZXh0JiZlLnNhbWVNYXJrdXAobikmJihyW3IubGVuZ3RoLTFdPWUud2l0aFRleHQoZS50ZXh0K24udGV4dCksbz0xKTtvPHQuY29udGVudC5sZW5ndGg7bysrKXIucHVzaCh0LmNvbnRlbnRbb10pO3JldHVybiBuZXcgYShyLHRoaXMuc2l6ZSt0LnNpemUpfSxhLnByb3RvdHlwZS5jdXQ9ZnVuY3Rpb24odCxlKXt2YXIgbj10aGlzO2lmKG51bGw9PWUmJihlPXRoaXMuc2l6ZSksMD09dCYmZT09dGhpcy5zaXplKXJldHVybiB0aGlzO3ZhciByPVtdLG89MDtpZihlPnQpZm9yKHZhciBpPTAscz0wO3M8ZTtpKyspe3ZhciBjPW4uY29udGVudFtpXSxsPXMrYy5ub2RlU2l6ZTtsPnQmJigoczx0fHxsPmUpJiYoYz1jLmlzVGV4dD9jLmN1dChNYXRoLm1heCgwLHQtcyksTWF0aC5taW4oYy50ZXh0Lmxlbmd0aCxlLXMpKTpjLmN1dChNYXRoLm1heCgwLHQtcy0xKSxNYXRoLm1pbihjLmNvbnRlbnQuc2l6ZSxlLXMtMSkpKSxyLnB1c2goYyksbys9Yy5ub2RlU2l6ZSkscz1sfXJldHVybiBuZXcgYShyLG8pfSxhLnByb3RvdHlwZS5jdXRCeUluZGV4PWZ1bmN0aW9uKHQsZSl7cmV0dXJuIHQ9PWU/YS5lbXB0eTowPT10JiZlPT10aGlzLmNvbnRlbnQubGVuZ3RoP3RoaXM6bmV3IGEodGhpcy5jb250ZW50LnNsaWNlKHQsZSkpfSxhLnByb3RvdHlwZS5yZXBsYWNlQ2hpbGQ9ZnVuY3Rpb24odCxlKXt2YXIgbj10aGlzLmNvbnRlbnRbdF07aWYobj09ZSlyZXR1cm4gdGhpczt2YXIgcj10aGlzLmNvbnRlbnQuc2xpY2UoKSxvPXRoaXMuc2l6ZStlLm5vZGVTaXplLW4ubm9kZVNpemU7cmV0dXJuIHJbdF09ZSxuZXcgYShyLG8pfSxhLnByb3RvdHlwZS5hZGRUb1N0YXJ0PWZ1bmN0aW9uKHQpe3JldHVybiBuZXcgYShbdF0uY29uY2F0KHRoaXMuY29udGVudCksdGhpcy5zaXplK3Qubm9kZVNpemUpfSxhLnByb3RvdHlwZS5hZGRUb0VuZD1mdW5jdGlvbih0KXtyZXR1cm4gbmV3IGEodGhpcy5jb250ZW50LmNvbmNhdCh0KSx0aGlzLnNpemUrdC5ub2RlU2l6ZSl9LGEucHJvdG90eXBlLmVxPWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXM7aWYodGhpcy5jb250ZW50Lmxlbmd0aCE9dC5jb250ZW50Lmxlbmd0aClyZXR1cm4hMTtmb3IodmFyIG49MDtuPHRoaXMuY29udGVudC5sZW5ndGg7bisrKWlmKCFlLmNvbnRlbnRbbl0uZXEodC5jb250ZW50W25dKSlyZXR1cm4hMTtyZXR1cm4hMH0sYy5maXJzdENoaWxkLmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLmNvbnRlbnQubGVuZ3RoP3RoaXMuY29udGVudFswXTpudWxsfSxjLmxhc3RDaGlsZC5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jb250ZW50Lmxlbmd0aD90aGlzLmNvbnRlbnRbdGhpcy5jb250ZW50Lmxlbmd0aC0xXTpudWxsfSxjLmNoaWxkQ291bnQuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY29udGVudC5sZW5ndGh9LGEucHJvdG90eXBlLmNoaWxkPWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMuY29udGVudFt0XTtpZighZSl0aHJvdyBuZXcgUmFuZ2VFcnJvcigiSW5kZXggIit0KyIgb3V0IG9mIHJhbmdlIGZvciAiK3RoaXMpO3JldHVybiBlfSxhLnByb3RvdHlwZS5tYXliZUNoaWxkPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLmNvbnRlbnRbdF19LGEucHJvdG90eXBlLmZvckVhY2g9ZnVuY3Rpb24odCl7Zm9yKHZhciBlPXRoaXMsbj0wLHI9MDtuPHRoaXMuY29udGVudC5sZW5ndGg7bisrKXt2YXIgbz1lLmNvbnRlbnRbbl07dChvLHIsbikscis9by5ub2RlU2l6ZX19LGEucHJvdG90eXBlLmZpbmREaWZmU3RhcnQ9ZnVuY3Rpb24odCxlKXtyZXR1cm4gdm9pZCAwPT09ZSYmKGU9MCksaSh0aGlzLHQsZSl9LGEucHJvdG90eXBlLmZpbmREaWZmRW5kPWZ1bmN0aW9uKHQsZSxuKXtyZXR1cm4gdm9pZCAwPT09ZSYmKGU9dGhpcy5zaXplKSx2b2lkIDA9PT1uJiYobj10LnNpemUpLHModGhpcyx0LGUsbil9LGEucHJvdG90eXBlLmZpbmRJbmRleD1mdW5jdGlvbih0LGUpe3ZhciBuPXRoaXM7aWYodm9pZCAwPT09ZSYmKGU9LTEpLDA9PXQpcmV0dXJuIHAoMCx0KTtpZih0PT10aGlzLnNpemUpcmV0dXJuIHAodGhpcy5jb250ZW50Lmxlbmd0aCx0KTtpZih0PnRoaXMuc2l6ZXx8dDwwKXRocm93IG5ldyBSYW5nZUVycm9yKCJQb3NpdGlvbiAiK3QrIiBvdXRzaWRlIG9mIGZyYWdtZW50ICgiK3RoaXMrIikiKTtmb3IodmFyIHI9MCxvPTA7O3IrKyl7dmFyIGk9bi5jaGlsZChyKSxzPW8raS5ub2RlU2l6ZTtpZihzPj10KXJldHVybiBzPT10fHxlPjA/cChyKzEscyk6cChyLG8pO289c319LGEucHJvdG90eXBlLnRvU3RyaW5nPWZ1bmN0aW9uKCl7cmV0dXJuIjwiK3RoaXMudG9TdHJpbmdJbm5lcigpKyI+In0sYS5wcm90b3R5cGUudG9TdHJpbmdJbm5lcj1mdW5jdGlvbigpe3JldHVybiB0aGlzLmNvbnRlbnQuam9pbigiLCAiKX0sYS5wcm90b3R5cGUudG9KU09OPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY29udGVudC5sZW5ndGg/dGhpcy5jb250ZW50Lm1hcCgoZnVuY3Rpb24odCl7cmV0dXJuIHQudG9KU09OKCl9KSk6bnVsbH0sYS5mcm9tSlNPTj1mdW5jdGlvbih0LGUpe2lmKCFlKXJldHVybiBhLmVtcHR5O2lmKCFBcnJheS5pc0FycmF5KGUpKXRocm93IG5ldyBSYW5nZUVycm9yKCJJbnZhbGlkIGlucHV0IGZvciBGcmFnbWVudC5mcm9tSlNPTiIpO3JldHVybiBuZXcgYShlLm1hcCh0Lm5vZGVGcm9tSlNPTikpfSxhLmZyb21BcnJheT1mdW5jdGlvbih0KXtpZighdC5sZW5ndGgpcmV0dXJuIGEuZW1wdHk7Zm9yKHZhciBlLG49MCxyPTA7cjx0Lmxlbmd0aDtyKyspe3ZhciBvPXRbcl07bis9by5ub2RlU2l6ZSxyJiZvLmlzVGV4dCYmdFtyLTFdLnNhbWVNYXJrdXAobyk/KGV8fChlPXQuc2xpY2UoMCxyKSksZVtlLmxlbmd0aC0xXT1vLndpdGhUZXh0KGVbZS5sZW5ndGgtMV0udGV4dCtvLnRleHQpKTplJiZlLnB1c2gobyl9cmV0dXJuIG5ldyBhKGV8fHQsbil9LGEuZnJvbT1mdW5jdGlvbih0KXtpZighdClyZXR1cm4gYS5lbXB0eTtpZih0IGluc3RhbmNlb2YgYSlyZXR1cm4gdDtpZihBcnJheS5pc0FycmF5KHQpKXJldHVybiB0aGlzLmZyb21BcnJheSh0KTtpZih0LmF0dHJzKXJldHVybiBuZXcgYShbdF0sdC5ub2RlU2l6ZSk7dGhyb3cgbmV3IFJhbmdlRXJyb3IoIkNhbiBub3QgY29udmVydCAiK3QrIiB0byBhIEZyYWdtZW50IisodC5ub2Rlc0JldHdlZW4/IiAobG9va3MgbGlrZSBtdWx0aXBsZSB2ZXJzaW9ucyBvZiBwcm9zZW1pcnJvci1tb2RlbCB3ZXJlIGxvYWRlZCkiOiIiKSl9LE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKGEucHJvdG90eXBlLGMpO3ZhciBsPXtpbmRleDowLG9mZnNldDowfTtmdW5jdGlvbiBwKHQsZSl7cmV0dXJuIGwuaW5kZXg9dCxsLm9mZnNldD1lLGx9ZnVuY3Rpb24gdSh0LGUpe2lmKHQ9PT1lKXJldHVybiEwO2lmKCF0fHwib2JqZWN0IiE9dHlwZW9mIHR8fCFlfHwib2JqZWN0IiE9dHlwZW9mIGUpcmV0dXJuITE7dmFyIG49QXJyYXkuaXNBcnJheSh0KTtpZihBcnJheS5pc0FycmF5KGUpIT1uKXJldHVybiExO2lmKG4pe2lmKHQubGVuZ3RoIT1lLmxlbmd0aClyZXR1cm4hMTtmb3IodmFyIHI9MDtyPHQubGVuZ3RoO3IrKylpZighdSh0W3JdLGVbcl0pKXJldHVybiExfWVsc2V7Zm9yKHZhciBvIGluIHQpaWYoIShvIGluIGUpfHwhdSh0W29dLGVbb10pKXJldHVybiExO2Zvcih2YXIgaSBpbiBlKWlmKCEoaSBpbiB0KSlyZXR1cm4hMX1yZXR1cm4hMH1hLmVtcHR5PW5ldyBhKFtdLDApO3ZhciBoPWZ1bmN0aW9uKHQsZSl7dGhpcy50eXBlPXQsdGhpcy5hdHRycz1lfTtmdW5jdGlvbiBmKHQpe3ZhciBlPUVycm9yLmNhbGwodGhpcyx0KTtyZXR1cm4gZS5fX3Byb3RvX189Zi5wcm90b3R5cGUsZX1oLnByb3RvdHlwZS5hZGRUb1NldD1mdW5jdGlvbih0KXtmb3IodmFyIGUsbj10aGlzLHI9ITEsbz0wO288dC5sZW5ndGg7bysrKXt2YXIgaT10W29dO2lmKG4uZXEoaSkpcmV0dXJuIHQ7aWYobi50eXBlLmV4Y2x1ZGVzKGkudHlwZSkpZXx8KGU9dC5zbGljZSgwLG8pKTtlbHNle2lmKGkudHlwZS5leGNsdWRlcyhuLnR5cGUpKXJldHVybiB0OyFyJiZpLnR5cGUucmFuaz5uLnR5cGUucmFuayYmKGV8fChlPXQuc2xpY2UoMCxvKSksZS5wdXNoKG4pLHI9ITApLGUmJmUucHVzaChpKX19cmV0dXJuIGV8fChlPXQuc2xpY2UoKSkscnx8ZS5wdXNoKHRoaXMpLGV9LGgucHJvdG90eXBlLnJlbW92ZUZyb21TZXQ9ZnVuY3Rpb24odCl7Zm9yKHZhciBlPXRoaXMsbj0wO248dC5sZW5ndGg7bisrKWlmKGUuZXEodFtuXSkpcmV0dXJuIHQuc2xpY2UoMCxuKS5jb25jYXQodC5zbGljZShuKzEpKTtyZXR1cm4gdH0saC5wcm90b3R5cGUuaXNJblNldD1mdW5jdGlvbih0KXtmb3IodmFyIGU9dGhpcyxuPTA7bjx0Lmxlbmd0aDtuKyspaWYoZS5lcSh0W25dKSlyZXR1cm4hMDtyZXR1cm4hMX0saC5wcm90b3R5cGUuZXE9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXM9PXR8fHRoaXMudHlwZT09dC50eXBlJiZ1KHRoaXMuYXR0cnMsdC5hdHRycyl9LGgucHJvdG90eXBlLnRvSlNPTj1mdW5jdGlvbigpe3ZhciB0PXRoaXMsZT17dHlwZTp0aGlzLnR5cGUubmFtZX07Zm9yKHZhciBuIGluIHQuYXR0cnMpe2UuYXR0cnM9dC5hdHRyczticmVha31yZXR1cm4gZX0saC5mcm9tSlNPTj1mdW5jdGlvbih0LGUpe2lmKCFlKXRocm93IG5ldyBSYW5nZUVycm9yKCJJbnZhbGlkIGlucHV0IGZvciBNYXJrLmZyb21KU09OIik7dmFyIG49dC5tYXJrc1tlLnR5cGVdO2lmKCFuKXRocm93IG5ldyBSYW5nZUVycm9yKCJUaGVyZSBpcyBubyBtYXJrIHR5cGUgIitlLnR5cGUrIiBpbiB0aGlzIHNjaGVtYSIpO3JldHVybiBuLmNyZWF0ZShlLmF0dHJzKX0saC5zYW1lU2V0PWZ1bmN0aW9uKHQsZSl7aWYodD09ZSlyZXR1cm4hMDtpZih0Lmxlbmd0aCE9ZS5sZW5ndGgpcmV0dXJuITE7Zm9yKHZhciBuPTA7bjx0Lmxlbmd0aDtuKyspaWYoIXRbbl0uZXEoZVtuXSkpcmV0dXJuITE7cmV0dXJuITB9LGguc2V0RnJvbT1mdW5jdGlvbih0KXtpZighdHx8MD09dC5sZW5ndGgpcmV0dXJuIGgubm9uZTtpZih0IGluc3RhbmNlb2YgaClyZXR1cm5bdF07dmFyIGU9dC5zbGljZSgpO3JldHVybiBlLnNvcnQoKGZ1bmN0aW9uKHQsZSl7cmV0dXJuIHQudHlwZS5yYW5rLWUudHlwZS5yYW5rfSkpLGV9LGgubm9uZT1bXSxmLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKEVycm9yLnByb3RvdHlwZSksZi5wcm90b3R5cGUuY29uc3RydWN0b3I9ZixmLnByb3RvdHlwZS5uYW1lPSJSZXBsYWNlRXJyb3IiO3ZhciBkPWZ1bmN0aW9uKHQsZSxuKXt0aGlzLmNvbnRlbnQ9dCx0aGlzLm9wZW5TdGFydD1lLHRoaXMub3BlbkVuZD1ufSx2PXtzaXplOnt9fTtmdW5jdGlvbiBtKHQsZSxuKXt2YXIgcj10LmZpbmRJbmRleChlKSxvPXIuaW5kZXgsaT1yLm9mZnNldCxzPXQubWF5YmVDaGlsZChvKSxhPXQuZmluZEluZGV4KG4pLGM9YS5pbmRleCxsPWEub2Zmc2V0O2lmKGk9PWV8fHMuaXNUZXh0KXtpZihsIT1uJiYhdC5jaGlsZChjKS5pc1RleHQpdGhyb3cgbmV3IFJhbmdlRXJyb3IoIlJlbW92aW5nIG5vbi1mbGF0IHJhbmdlIik7cmV0dXJuIHQuY3V0KDAsZSkuYXBwZW5kKHQuY3V0KG4pKX1pZihvIT1jKXRocm93IG5ldyBSYW5nZUVycm9yKCJSZW1vdmluZyBub24tZmxhdCByYW5nZSIpO3JldHVybiB0LnJlcGxhY2VDaGlsZChvLHMuY29weShtKHMuY29udGVudCxlLWktMSxuLWktMSkpKX1mdW5jdGlvbiB5KHQsZSxuLHIpe3ZhciBvPXQuZmluZEluZGV4KGUpLGk9by5pbmRleCxzPW8ub2Zmc2V0LGE9dC5tYXliZUNoaWxkKGkpO2lmKHM9PWV8fGEuaXNUZXh0KXJldHVybiByJiYhci5jYW5SZXBsYWNlKGksaSxuKT9udWxsOnQuY3V0KDAsZSkuYXBwZW5kKG4pLmFwcGVuZCh0LmN1dChlKSk7dmFyIGM9eShhLmNvbnRlbnQsZS1zLTEsbik7cmV0dXJuIGMmJnQucmVwbGFjZUNoaWxkKGksYS5jb3B5KGMpKX1mdW5jdGlvbiBnKHQsZSxuKXtpZihuLm9wZW5TdGFydD50LmRlcHRoKXRocm93IG5ldyBmKCJJbnNlcnRlZCBjb250ZW50IGRlZXBlciB0aGFuIGluc2VydGlvbiBwb3NpdGlvbiIpO2lmKHQuZGVwdGgtbi5vcGVuU3RhcnQhPWUuZGVwdGgtbi5vcGVuRW5kKXRocm93IG5ldyBmKCJJbmNvbnNpc3RlbnQgb3BlbiBkZXB0aHMiKTtyZXR1cm4gdyh0LGUsbiwwKX1mdW5jdGlvbiB3KHQsZSxuLHIpe3ZhciBvPXQuaW5kZXgociksaT10Lm5vZGUocik7aWYobz09ZS5pbmRleChyKSYmcjx0LmRlcHRoLW4ub3BlblN0YXJ0KXt2YXIgcz13KHQsZSxuLHIrMSk7cmV0dXJuIGkuY29weShpLmNvbnRlbnQucmVwbGFjZUNoaWxkKG8scykpfWlmKG4uY29udGVudC5zaXplKXtpZihuLm9wZW5TdGFydHx8bi5vcGVuRW5kfHx0LmRlcHRoIT1yfHxlLmRlcHRoIT1yKXt2YXIgYT1UKG4sdCksYz1hLnN0YXJ0LGw9YS5lbmQ7cmV0dXJuIEMoaSxPKHQsYyxsLGUscikpfXZhciBwPXQucGFyZW50LHU9cC5jb250ZW50O3JldHVybiBDKHAsdS5jdXQoMCx0LnBhcmVudE9mZnNldCkuYXBwZW5kKG4uY29udGVudCkuYXBwZW5kKHUuY3V0KGUucGFyZW50T2Zmc2V0KSkpfXJldHVybiBDKGksTSh0LGUscikpfWZ1bmN0aW9uIHgodCxlKXtpZighZS50eXBlLmNvbXBhdGlibGVDb250ZW50KHQudHlwZSkpdGhyb3cgbmV3IGYoIkNhbm5vdCBqb2luICIrZS50eXBlLm5hbWUrIiBvbnRvICIrdC50eXBlLm5hbWUpfWZ1bmN0aW9uIGIodCxlLG4pe3ZhciByPXQubm9kZShuKTtyZXR1cm4geChyLGUubm9kZShuKSkscn1mdW5jdGlvbiBrKHQsZSl7dmFyIG49ZS5sZW5ndGgtMTtuPj0wJiZ0LmlzVGV4dCYmdC5zYW1lTWFya3VwKGVbbl0pP2Vbbl09dC53aXRoVGV4dChlW25dLnRleHQrdC50ZXh0KTplLnB1c2godCl9ZnVuY3Rpb24gUyh0LGUsbixyKXt2YXIgbz0oZXx8dCkubm9kZShuKSxpPTAscz1lP2UuaW5kZXgobik6by5jaGlsZENvdW50O3QmJihpPXQuaW5kZXgobiksdC5kZXB0aD5uP2krKzp0LnRleHRPZmZzZXQmJihrKHQubm9kZUFmdGVyLHIpLGkrKykpO2Zvcih2YXIgYT1pO2E8czthKyspayhvLmNoaWxkKGEpLHIpO2UmJmUuZGVwdGg9PW4mJmUudGV4dE9mZnNldCYmayhlLm5vZGVCZWZvcmUscil9ZnVuY3Rpb24gQyh0LGUpe2lmKCF0LnR5cGUudmFsaWRDb250ZW50KGUpKXRocm93IG5ldyBmKCJJbnZhbGlkIGNvbnRlbnQgZm9yIG5vZGUgIit0LnR5cGUubmFtZSk7cmV0dXJuIHQuY29weShlKX1mdW5jdGlvbiBPKHQsZSxuLHIsbyl7dmFyIGk9dC5kZXB0aD5vJiZiKHQsZSxvKzEpLHM9ci5kZXB0aD5vJiZiKG4scixvKzEpLGM9W107cmV0dXJuIFMobnVsbCx0LG8sYyksaSYmcyYmZS5pbmRleChvKT09bi5pbmRleChvKT8oeChpLHMpLGsoQyhpLE8odCxlLG4scixvKzEpKSxjKSk6KGkmJmsoQyhpLE0odCxlLG8rMSkpLGMpLFMoZSxuLG8sYykscyYmayhDKHMsTShuLHIsbysxKSksYykpLFMocixudWxsLG8sYyksbmV3IGEoYyl9ZnVuY3Rpb24gTSh0LGUsbil7dmFyIHI9W107aWYoUyhudWxsLHQsbixyKSx0LmRlcHRoPm4pe3ZhciBvPWIodCxlLG4rMSk7ayhDKG8sTSh0LGUsbisxKSkscil9cmV0dXJuIFMoZSxudWxsLG4sciksbmV3IGEocil9ZnVuY3Rpb24gVCh0LGUpe2Zvcih2YXIgbj1lLmRlcHRoLXQub3BlblN0YXJ0LHI9ZS5ub2RlKG4pLG89ci5jb3B5KHQuY29udGVudCksaT1uLTE7aT49MDtpLS0pbz1lLm5vZGUoaSkuY29weShhLmZyb20obykpO3JldHVybntzdGFydDpvLnJlc29sdmVOb0NhY2hlKHQub3BlblN0YXJ0K24pLGVuZDpvLnJlc29sdmVOb0NhY2hlKG8uY29udGVudC5zaXplLXQub3BlbkVuZC1uKX19di5zaXplLmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLmNvbnRlbnQuc2l6ZS10aGlzLm9wZW5TdGFydC10aGlzLm9wZW5FbmR9LGQucHJvdG90eXBlLmluc2VydEF0PWZ1bmN0aW9uKHQsZSl7dmFyIG49eSh0aGlzLmNvbnRlbnQsdCt0aGlzLm9wZW5TdGFydCxlLG51bGwpO3JldHVybiBuJiZuZXcgZChuLHRoaXMub3BlblN0YXJ0LHRoaXMub3BlbkVuZCl9LGQucHJvdG90eXBlLnJlbW92ZUJldHdlZW49ZnVuY3Rpb24odCxlKXtyZXR1cm4gbmV3IGQobSh0aGlzLmNvbnRlbnQsdCt0aGlzLm9wZW5TdGFydCxlK3RoaXMub3BlblN0YXJ0KSx0aGlzLm9wZW5TdGFydCx0aGlzLm9wZW5FbmQpfSxkLnByb3RvdHlwZS5lcT1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5jb250ZW50LmVxKHQuY29udGVudCkmJnRoaXMub3BlblN0YXJ0PT10Lm9wZW5TdGFydCYmdGhpcy5vcGVuRW5kPT10Lm9wZW5FbmR9LGQucHJvdG90eXBlLnRvU3RyaW5nPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY29udGVudCsiKCIrdGhpcy5vcGVuU3RhcnQrIiwiK3RoaXMub3BlbkVuZCsiKSJ9LGQucHJvdG90eXBlLnRvSlNPTj1mdW5jdGlvbigpe2lmKCF0aGlzLmNvbnRlbnQuc2l6ZSlyZXR1cm4gbnVsbDt2YXIgdD17Y29udGVudDp0aGlzLmNvbnRlbnQudG9KU09OKCl9O3JldHVybiB0aGlzLm9wZW5TdGFydD4wJiYodC5vcGVuU3RhcnQ9dGhpcy5vcGVuU3RhcnQpLHRoaXMub3BlbkVuZD4wJiYodC5vcGVuRW5kPXRoaXMub3BlbkVuZCksdH0sZC5mcm9tSlNPTj1mdW5jdGlvbih0LGUpe2lmKCFlKXJldHVybiBkLmVtcHR5O3ZhciBuPWUub3BlblN0YXJ0fHwwLHI9ZS5vcGVuRW5kfHwwO2lmKCJudW1iZXIiIT10eXBlb2Ygbnx8Im51bWJlciIhPXR5cGVvZiByKXRocm93IG5ldyBSYW5nZUVycm9yKCJJbnZhbGlkIGlucHV0IGZvciBTbGljZS5mcm9tSlNPTiIpO3JldHVybiBuZXcgZChhLmZyb21KU09OKHQsZS5jb250ZW50KSxlLm9wZW5TdGFydHx8MCxlLm9wZW5FbmR8fDApfSxkLm1heE9wZW49ZnVuY3Rpb24odCxlKXt2b2lkIDA9PT1lJiYoZT0hMCk7Zm9yKHZhciBuPTAscj0wLG89dC5maXJzdENoaWxkO28mJiFvLmlzTGVhZiYmKGV8fCFvLnR5cGUuc3BlYy5pc29sYXRpbmcpO289by5maXJzdENoaWxkKW4rKztmb3IodmFyIGk9dC5sYXN0Q2hpbGQ7aSYmIWkuaXNMZWFmJiYoZXx8IWkudHlwZS5zcGVjLmlzb2xhdGluZyk7aT1pLmxhc3RDaGlsZClyKys7cmV0dXJuIG5ldyBkKHQsbixyKX0sT2JqZWN0LmRlZmluZVByb3BlcnRpZXMoZC5wcm90b3R5cGUsdiksZC5lbXB0eT1uZXcgZChhLmVtcHR5LDAsMCk7dmFyIE49ZnVuY3Rpb24odCxlLG4pe3RoaXMucG9zPXQsdGhpcy5wYXRoPWUsdGhpcy5kZXB0aD1lLmxlbmd0aC8zLTEsdGhpcy5wYXJlbnRPZmZzZXQ9bn0sRT17cGFyZW50Ont9LGRvYzp7fSx0ZXh0T2Zmc2V0Ont9LG5vZGVBZnRlcjp7fSxub2RlQmVmb3JlOnt9fTtOLnByb3RvdHlwZS5yZXNvbHZlRGVwdGg9ZnVuY3Rpb24odCl7cmV0dXJuIG51bGw9PXQ/dGhpcy5kZXB0aDp0PDA/dGhpcy5kZXB0aCt0OnR9LEUucGFyZW50LmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLm5vZGUodGhpcy5kZXB0aCl9LEUuZG9jLmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLm5vZGUoMCl9LE4ucHJvdG90eXBlLm5vZGU9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMucGF0aFszKnRoaXMucmVzb2x2ZURlcHRoKHQpXX0sTi5wcm90b3R5cGUuaW5kZXg9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMucGF0aFszKnRoaXMucmVzb2x2ZURlcHRoKHQpKzFdfSxOLnByb3RvdHlwZS5pbmRleEFmdGVyPWZ1bmN0aW9uKHQpe3JldHVybiB0PXRoaXMucmVzb2x2ZURlcHRoKHQpLHRoaXMuaW5kZXgodCkrKHQhPXRoaXMuZGVwdGh8fHRoaXMudGV4dE9mZnNldD8xOjApfSxOLnByb3RvdHlwZS5zdGFydD1mdW5jdGlvbih0KXtyZXR1cm4gdD10aGlzLnJlc29sdmVEZXB0aCh0KSwwPT10PzA6dGhpcy5wYXRoWzMqdC0xXSsxfSxOLnByb3RvdHlwZS5lbmQ9ZnVuY3Rpb24odCl7cmV0dXJuIHQ9dGhpcy5yZXNvbHZlRGVwdGgodCksdGhpcy5zdGFydCh0KSt0aGlzLm5vZGUodCkuY29udGVudC5zaXplfSxOLnByb3RvdHlwZS5iZWZvcmU9ZnVuY3Rpb24odCl7aWYodD10aGlzLnJlc29sdmVEZXB0aCh0KSwhdCl0aHJvdyBuZXcgUmFuZ2VFcnJvcigiVGhlcmUgaXMgbm8gcG9zaXRpb24gYmVmb3JlIHRoZSB0b3AtbGV2ZWwgbm9kZSIpO3JldHVybiB0PT10aGlzLmRlcHRoKzE/dGhpcy5wb3M6dGhpcy5wYXRoWzMqdC0xXX0sTi5wcm90b3R5cGUuYWZ0ZXI9ZnVuY3Rpb24odCl7aWYodD10aGlzLnJlc29sdmVEZXB0aCh0KSwhdCl0aHJvdyBuZXcgUmFuZ2VFcnJvcigiVGhlcmUgaXMgbm8gcG9zaXRpb24gYWZ0ZXIgdGhlIHRvcC1sZXZlbCBub2RlIik7cmV0dXJuIHQ9PXRoaXMuZGVwdGgrMT90aGlzLnBvczp0aGlzLnBhdGhbMyp0LTFdK3RoaXMucGF0aFszKnRdLm5vZGVTaXplfSxFLnRleHRPZmZzZXQuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucG9zLXRoaXMucGF0aFt0aGlzLnBhdGgubGVuZ3RoLTFdfSxFLm5vZGVBZnRlci5nZXQ9ZnVuY3Rpb24oKXt2YXIgdD10aGlzLnBhcmVudCxlPXRoaXMuaW5kZXgodGhpcy5kZXB0aCk7aWYoZT09dC5jaGlsZENvdW50KXJldHVybiBudWxsO3ZhciBuPXRoaXMucG9zLXRoaXMucGF0aFt0aGlzLnBhdGgubGVuZ3RoLTFdLHI9dC5jaGlsZChlKTtyZXR1cm4gbj90LmNoaWxkKGUpLmN1dChuKTpyfSxFLm5vZGVCZWZvcmUuZ2V0PWZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5pbmRleCh0aGlzLmRlcHRoKSxlPXRoaXMucG9zLXRoaXMucGF0aFt0aGlzLnBhdGgubGVuZ3RoLTFdO3JldHVybiBlP3RoaXMucGFyZW50LmNoaWxkKHQpLmN1dCgwLGUpOjA9PXQ/bnVsbDp0aGlzLnBhcmVudC5jaGlsZCh0LTEpfSxOLnByb3RvdHlwZS5tYXJrcz1mdW5jdGlvbigpe3ZhciB0PXRoaXMucGFyZW50LGU9dGhpcy5pbmRleCgpO2lmKDA9PXQuY29udGVudC5zaXplKXJldHVybiBoLm5vbmU7aWYodGhpcy50ZXh0T2Zmc2V0KXJldHVybiB0LmNoaWxkKGUpLm1hcmtzO3ZhciBuPXQubWF5YmVDaGlsZChlLTEpLHI9dC5tYXliZUNoaWxkKGUpO2lmKCFuKXt2YXIgbz1uO249cixyPW99Zm9yKHZhciBpPW4ubWFya3Mscz0wO3M8aS5sZW5ndGg7cysrKSExIT09aVtzXS50eXBlLnNwZWMuaW5jbHVzaXZlfHxyJiZpW3NdLmlzSW5TZXQoci5tYXJrcyl8fChpPWlbcy0tXS5yZW1vdmVGcm9tU2V0KGkpKTtyZXR1cm4gaX0sTi5wcm90b3R5cGUubWFya3NBY3Jvc3M9ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5wYXJlbnQubWF5YmVDaGlsZCh0aGlzLmluZGV4KCkpO2lmKCFlfHwhZS5pc0lubGluZSlyZXR1cm4gbnVsbDtmb3IodmFyIG49ZS5tYXJrcyxyPXQucGFyZW50Lm1heWJlQ2hpbGQodC5pbmRleCgpKSxvPTA7bzxuLmxlbmd0aDtvKyspITEhPT1uW29dLnR5cGUuc3BlYy5pbmNsdXNpdmV8fHImJm5bb10uaXNJblNldChyLm1hcmtzKXx8KG49bltvLS1dLnJlbW92ZUZyb21TZXQobikpO3JldHVybiBufSxOLnByb3RvdHlwZS5zaGFyZWREZXB0aD1mdW5jdGlvbih0KXtmb3IodmFyIGU9dGhpcyxuPXRoaXMuZGVwdGg7bj4wO24tLSlpZihlLnN0YXJ0KG4pPD10JiZlLmVuZChuKT49dClyZXR1cm4gbjtyZXR1cm4gMH0sTi5wcm90b3R5cGUuYmxvY2tSYW5nZT1mdW5jdGlvbih0LGUpe3ZhciBuPXRoaXM7aWYodm9pZCAwPT09dCYmKHQ9dGhpcyksdC5wb3M8dGhpcy5wb3MpcmV0dXJuIHQuYmxvY2tSYW5nZSh0aGlzKTtmb3IodmFyIHI9dGhpcy5kZXB0aC0odGhpcy5wYXJlbnQuaW5saW5lQ29udGVudHx8dGhpcy5wb3M9PXQucG9zPzE6MCk7cj49MDtyLS0paWYodC5wb3M8PW4uZW5kKHIpJiYoIWV8fGUobi5ub2RlKHIpKSkpcmV0dXJuIG5ldyB6KG4sdCxyKX0sTi5wcm90b3R5cGUuc2FtZVBhcmVudD1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5wb3MtdGhpcy5wYXJlbnRPZmZzZXQ9PXQucG9zLXQucGFyZW50T2Zmc2V0fSxOLnByb3RvdHlwZS5tYXg9ZnVuY3Rpb24odCl7cmV0dXJuIHQucG9zPnRoaXMucG9zP3Q6dGhpc30sTi5wcm90b3R5cGUubWluPWZ1bmN0aW9uKHQpe3JldHVybiB0LnBvczx0aGlzLnBvcz90OnRoaXN9LE4ucHJvdG90eXBlLnRvU3RyaW5nPWZ1bmN0aW9uKCl7Zm9yKHZhciB0PXRoaXMsZT0iIixuPTE7bjw9dGhpcy5kZXB0aDtuKyspZSs9KGU/Ii8iOiIiKSt0Lm5vZGUobikudHlwZS5uYW1lKyJfIit0LmluZGV4KG4tMSk7cmV0dXJuIGUrIjoiK3RoaXMucGFyZW50T2Zmc2V0fSxOLnJlc29sdmU9ZnVuY3Rpb24odCxlKXtpZighKGU+PTAmJmU8PXQuY29udGVudC5zaXplKSl0aHJvdyBuZXcgUmFuZ2VFcnJvcigiUG9zaXRpb24gIitlKyIgb3V0IG9mIHJhbmdlIik7Zm9yKHZhciBuPVtdLHI9MCxvPWUsaT10Ozspe3ZhciBzPWkuY29udGVudC5maW5kSW5kZXgobyksYT1zLmluZGV4LGM9cy5vZmZzZXQsbD1vLWM7aWYobi5wdXNoKGksYSxyK2MpLCFsKWJyZWFrO2lmKGk9aS5jaGlsZChhKSxpLmlzVGV4dClicmVhaztvPWwtMSxyKz1jKzF9cmV0dXJuIG5ldyBOKGUsbixvKX0sTi5yZXNvbHZlQ2FjaGVkPWZ1bmN0aW9uKHQsZSl7Zm9yKHZhciBuPTA7bjxBLmxlbmd0aDtuKyspe3ZhciByPUFbbl07aWYoci5wb3M9PWUmJnIuZG9jPT10KXJldHVybiByfXZhciBvPUFbUl09Ti5yZXNvbHZlKHQsZSk7cmV0dXJuIFI9KFIrMSklRCxvfSxPYmplY3QuZGVmaW5lUHJvcGVydGllcyhOLnByb3RvdHlwZSxFKTt2YXIgQT1bXSxSPTAsRD0xMix6PWZ1bmN0aW9uKHQsZSxuKXt0aGlzLiRmcm9tPXQsdGhpcy4kdG89ZSx0aGlzLmRlcHRoPW59LFA9e3N0YXJ0Ont9LGVuZDp7fSxwYXJlbnQ6e30sc3RhcnRJbmRleDp7fSxlbmRJbmRleDp7fX07UC5zdGFydC5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy4kZnJvbS5iZWZvcmUodGhpcy5kZXB0aCsxKX0sUC5lbmQuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuJHRvLmFmdGVyKHRoaXMuZGVwdGgrMSl9LFAucGFyZW50LmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLiRmcm9tLm5vZGUodGhpcy5kZXB0aCl9LFAuc3RhcnRJbmRleC5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy4kZnJvbS5pbmRleCh0aGlzLmRlcHRoKX0sUC5lbmRJbmRleC5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy4kdG8uaW5kZXhBZnRlcih0aGlzLmRlcHRoKX0sT2JqZWN0LmRlZmluZVByb3BlcnRpZXMoei5wcm90b3R5cGUsUCk7dmFyIEk9T2JqZWN0LmNyZWF0ZShudWxsKSxfPWZ1bmN0aW9uKHQsZSxuLHIpe3RoaXMudHlwZT10LHRoaXMuYXR0cnM9ZSx0aGlzLmNvbnRlbnQ9bnx8YS5lbXB0eSx0aGlzLm1hcmtzPXJ8fGgubm9uZX0sRj17bm9kZVNpemU6e30sY2hpbGRDb3VudDp7fSx0ZXh0Q29udGVudDp7fSxmaXJzdENoaWxkOnt9LGxhc3RDaGlsZDp7fSxpc0Jsb2NrOnt9LGlzVGV4dGJsb2NrOnt9LGlubGluZUNvbnRlbnQ6e30saXNJbmxpbmU6e30saXNUZXh0Ont9LGlzTGVhZjp7fSxpc0F0b206e319O0Yubm9kZVNpemUuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuaXNMZWFmPzE6Mit0aGlzLmNvbnRlbnQuc2l6ZX0sRi5jaGlsZENvdW50LmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLmNvbnRlbnQuY2hpbGRDb3VudH0sXy5wcm90b3R5cGUuY2hpbGQ9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuY29udGVudC5jaGlsZCh0KX0sXy5wcm90b3R5cGUubWF5YmVDaGlsZD1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5jb250ZW50Lm1heWJlQ2hpbGQodCl9LF8ucHJvdG90eXBlLmZvckVhY2g9ZnVuY3Rpb24odCl7dGhpcy5jb250ZW50LmZvckVhY2godCl9LF8ucHJvdG90eXBlLm5vZGVzQmV0d2Vlbj1mdW5jdGlvbih0LGUsbixyKXt2b2lkIDA9PT1yJiYocj0wKSx0aGlzLmNvbnRlbnQubm9kZXNCZXR3ZWVuKHQsZSxuLHIsdGhpcyl9LF8ucHJvdG90eXBlLmRlc2NlbmRhbnRzPWZ1bmN0aW9uKHQpe3RoaXMubm9kZXNCZXR3ZWVuKDAsdGhpcy5jb250ZW50LnNpemUsdCl9LEYudGV4dENvbnRlbnQuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudGV4dEJldHdlZW4oMCx0aGlzLmNvbnRlbnQuc2l6ZSwiIil9LF8ucHJvdG90eXBlLnRleHRCZXR3ZWVuPWZ1bmN0aW9uKHQsZSxuLHIpe3JldHVybiB0aGlzLmNvbnRlbnQudGV4dEJldHdlZW4odCxlLG4scil9LEYuZmlyc3RDaGlsZC5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jb250ZW50LmZpcnN0Q2hpbGR9LEYubGFzdENoaWxkLmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLmNvbnRlbnQubGFzdENoaWxkfSxfLnByb3RvdHlwZS5lcT1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcz09dHx8dGhpcy5zYW1lTWFya3VwKHQpJiZ0aGlzLmNvbnRlbnQuZXEodC5jb250ZW50KX0sXy5wcm90b3R5cGUuc2FtZU1hcmt1cD1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5oYXNNYXJrdXAodC50eXBlLHQuYXR0cnMsdC5tYXJrcyl9LF8ucHJvdG90eXBlLmhhc01hcmt1cD1mdW5jdGlvbih0LGUsbil7cmV0dXJuIHRoaXMudHlwZT09dCYmdSh0aGlzLmF0dHJzLGV8fHQuZGVmYXVsdEF0dHJzfHxJKSYmaC5zYW1lU2V0KHRoaXMubWFya3Msbnx8aC5ub25lKX0sXy5wcm90b3R5cGUuY29weT1mdW5jdGlvbih0KXtyZXR1cm4gdm9pZCAwPT09dCYmKHQ9bnVsbCksdD09dGhpcy5jb250ZW50P3RoaXM6bmV3IHRoaXMuY29uc3RydWN0b3IodGhpcy50eXBlLHRoaXMuYXR0cnMsdCx0aGlzLm1hcmtzKX0sXy5wcm90b3R5cGUubWFyaz1mdW5jdGlvbih0KXtyZXR1cm4gdD09dGhpcy5tYXJrcz90aGlzOm5ldyB0aGlzLmNvbnN0cnVjdG9yKHRoaXMudHlwZSx0aGlzLmF0dHJzLHRoaXMuY29udGVudCx0KX0sXy5wcm90b3R5cGUuY3V0PWZ1bmN0aW9uKHQsZSl7cmV0dXJuIDA9PXQmJmU9PXRoaXMuY29udGVudC5zaXplP3RoaXM6dGhpcy5jb3B5KHRoaXMuY29udGVudC5jdXQodCxlKSl9LF8ucHJvdG90eXBlLnNsaWNlPWZ1bmN0aW9uKHQsZSxuKXtpZih2b2lkIDA9PT1lJiYoZT10aGlzLmNvbnRlbnQuc2l6ZSksdm9pZCAwPT09biYmKG49ITEpLHQ9PWUpcmV0dXJuIGQuZW1wdHk7dmFyIHI9dGhpcy5yZXNvbHZlKHQpLG89dGhpcy5yZXNvbHZlKGUpLGk9bj8wOnIuc2hhcmVkRGVwdGgoZSkscz1yLnN0YXJ0KGkpLGE9ci5ub2RlKGkpLGM9YS5jb250ZW50LmN1dChyLnBvcy1zLG8ucG9zLXMpO3JldHVybiBuZXcgZChjLHIuZGVwdGgtaSxvLmRlcHRoLWkpfSxfLnByb3RvdHlwZS5yZXBsYWNlPWZ1bmN0aW9uKHQsZSxuKXtyZXR1cm4gZyh0aGlzLnJlc29sdmUodCksdGhpcy5yZXNvbHZlKGUpLG4pfSxfLnByb3RvdHlwZS5ub2RlQXQ9ZnVuY3Rpb24odCl7Zm9yKHZhciBlPXRoaXM7Oyl7dmFyIG49ZS5jb250ZW50LmZpbmRJbmRleCh0KSxyPW4uaW5kZXgsbz1uLm9mZnNldDtpZihlPWUubWF5YmVDaGlsZChyKSwhZSlyZXR1cm4gbnVsbDtpZihvPT10fHxlLmlzVGV4dClyZXR1cm4gZTt0LT1vKzF9fSxfLnByb3RvdHlwZS5jaGlsZEFmdGVyPWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMuY29udGVudC5maW5kSW5kZXgodCksbj1lLmluZGV4LHI9ZS5vZmZzZXQ7cmV0dXJue25vZGU6dGhpcy5jb250ZW50Lm1heWJlQ2hpbGQobiksaW5kZXg6bixvZmZzZXQ6cn19LF8ucHJvdG90eXBlLmNoaWxkQmVmb3JlPWZ1bmN0aW9uKHQpe2lmKDA9PXQpcmV0dXJue25vZGU6bnVsbCxpbmRleDowLG9mZnNldDowfTt2YXIgZT10aGlzLmNvbnRlbnQuZmluZEluZGV4KHQpLG49ZS5pbmRleCxyPWUub2Zmc2V0O2lmKHI8dClyZXR1cm57bm9kZTp0aGlzLmNvbnRlbnQuY2hpbGQobiksaW5kZXg6bixvZmZzZXQ6cn07dmFyIG89dGhpcy5jb250ZW50LmNoaWxkKG4tMSk7cmV0dXJue25vZGU6byxpbmRleDpuLTEsb2Zmc2V0OnItby5ub2RlU2l6ZX19LF8ucHJvdG90eXBlLnJlc29sdmU9ZnVuY3Rpb24odCl7cmV0dXJuIE4ucmVzb2x2ZUNhY2hlZCh0aGlzLHQpfSxfLnByb3RvdHlwZS5yZXNvbHZlTm9DYWNoZT1mdW5jdGlvbih0KXtyZXR1cm4gTi5yZXNvbHZlKHRoaXMsdCl9LF8ucHJvdG90eXBlLnJhbmdlSGFzTWFyaz1mdW5jdGlvbih0LGUsbil7dmFyIHI9ITE7cmV0dXJuIGU+dCYmdGhpcy5ub2Rlc0JldHdlZW4odCxlLChmdW5jdGlvbih0KXtyZXR1cm4gbi5pc0luU2V0KHQubWFya3MpJiYocj0hMCksIXJ9KSkscn0sRi5pc0Jsb2NrLmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLnR5cGUuaXNCbG9ja30sRi5pc1RleHRibG9jay5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy50eXBlLmlzVGV4dGJsb2NrfSxGLmlubGluZUNvbnRlbnQuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudHlwZS5pbmxpbmVDb250ZW50fSxGLmlzSW5saW5lLmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLnR5cGUuaXNJbmxpbmV9LEYuaXNUZXh0LmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLnR5cGUuaXNUZXh0fSxGLmlzTGVhZi5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy50eXBlLmlzTGVhZn0sRi5pc0F0b20uZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudHlwZS5pc0F0b219LF8ucHJvdG90eXBlLnRvU3RyaW5nPWZ1bmN0aW9uKCl7aWYodGhpcy50eXBlLnNwZWMudG9EZWJ1Z1N0cmluZylyZXR1cm4gdGhpcy50eXBlLnNwZWMudG9EZWJ1Z1N0cmluZyh0aGlzKTt2YXIgdD10aGlzLnR5cGUubmFtZTtyZXR1cm4gdGhpcy5jb250ZW50LnNpemUmJih0Kz0iKCIrdGhpcy5jb250ZW50LnRvU3RyaW5nSW5uZXIoKSsiKSIpLGoodGhpcy5tYXJrcyx0KX0sXy5wcm90b3R5cGUuY29udGVudE1hdGNoQXQ9ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy50eXBlLmNvbnRlbnRNYXRjaC5tYXRjaEZyYWdtZW50KHRoaXMuY29udGVudCwwLHQpO2lmKCFlKXRocm93IG5ldyBFcnJvcigiQ2FsbGVkIGNvbnRlbnRNYXRjaEF0IG9uIGEgbm9kZSB3aXRoIGludmFsaWQgY29udGVudCIpO3JldHVybiBlfSxfLnByb3RvdHlwZS5jYW5SZXBsYWNlPWZ1bmN0aW9uKHQsZSxuLHIsbyl7dmFyIGk9dGhpczt2b2lkIDA9PT1uJiYobj1hLmVtcHR5KSx2b2lkIDA9PT1yJiYocj0wKSx2b2lkIDA9PT1vJiYobz1uLmNoaWxkQ291bnQpO3ZhciBzPXRoaXMuY29udGVudE1hdGNoQXQodCkubWF0Y2hGcmFnbWVudChuLHIsbyksYz1zJiZzLm1hdGNoRnJhZ21lbnQodGhpcy5jb250ZW50LGUpO2lmKCFjfHwhYy52YWxpZEVuZClyZXR1cm4hMTtmb3IodmFyIGw9cjtsPG87bCsrKWlmKCFpLnR5cGUuYWxsb3dzTWFya3Mobi5jaGlsZChsKS5tYXJrcykpcmV0dXJuITE7cmV0dXJuITB9LF8ucHJvdG90eXBlLmNhblJlcGxhY2VXaXRoPWZ1bmN0aW9uKHQsZSxuLHIpe2lmKHImJiF0aGlzLnR5cGUuYWxsb3dzTWFya3MocikpcmV0dXJuITE7dmFyIG89dGhpcy5jb250ZW50TWF0Y2hBdCh0KS5tYXRjaFR5cGUobiksaT1vJiZvLm1hdGNoRnJhZ21lbnQodGhpcy5jb250ZW50LGUpO3JldHVybiEhaSYmaS52YWxpZEVuZH0sXy5wcm90b3R5cGUuY2FuQXBwZW5kPWZ1bmN0aW9uKHQpe3JldHVybiB0LmNvbnRlbnQuc2l6ZT90aGlzLmNhblJlcGxhY2UodGhpcy5jaGlsZENvdW50LHRoaXMuY2hpbGRDb3VudCx0LmNvbnRlbnQpOnRoaXMudHlwZS5jb21wYXRpYmxlQ29udGVudCh0LnR5cGUpfSxfLnByb3RvdHlwZS5kZWZhdWx0Q29udGVudFR5cGU9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuY29udGVudE1hdGNoQXQodCkuZGVmYXVsdFR5cGV9LF8ucHJvdG90eXBlLmNoZWNrPWZ1bmN0aW9uKCl7aWYoIXRoaXMudHlwZS52YWxpZENvbnRlbnQodGhpcy5jb250ZW50KSl0aHJvdyBuZXcgUmFuZ2VFcnJvcigiSW52YWxpZCBjb250ZW50IGZvciBub2RlICIrdGhpcy50eXBlLm5hbWUrIjogIit0aGlzLmNvbnRlbnQudG9TdHJpbmcoKS5zbGljZSgwLDUwKSk7dGhpcy5jb250ZW50LmZvckVhY2goKGZ1bmN0aW9uKHQpe3JldHVybiB0LmNoZWNrKCl9KSl9LF8ucHJvdG90eXBlLnRvSlNPTj1mdW5jdGlvbigpe3ZhciB0PXRoaXMsZT17dHlwZTp0aGlzLnR5cGUubmFtZX07Zm9yKHZhciBuIGluIHQuYXR0cnMpe2UuYXR0cnM9dC5hdHRyczticmVha31yZXR1cm4gdGhpcy5jb250ZW50LnNpemUmJihlLmNvbnRlbnQ9dGhpcy5jb250ZW50LnRvSlNPTigpKSx0aGlzLm1hcmtzLmxlbmd0aCYmKGUubWFya3M9dGhpcy5tYXJrcy5tYXAoKGZ1bmN0aW9uKHQpe3JldHVybiB0LnRvSlNPTigpfSkpKSxlfSxfLmZyb21KU09OPWZ1bmN0aW9uKHQsZSl7aWYoIWUpdGhyb3cgbmV3IFJhbmdlRXJyb3IoIkludmFsaWQgaW5wdXQgZm9yIE5vZGUuZnJvbUpTT04iKTt2YXIgbj1udWxsO2lmKGUubWFya3Mpe2lmKCFBcnJheS5pc0FycmF5KGUubWFya3MpKXRocm93IG5ldyBSYW5nZUVycm9yKCJJbnZhbGlkIG1hcmsgZGF0YSBmb3IgTm9kZS5mcm9tSlNPTiIpO249ZS5tYXJrcy5tYXAodC5tYXJrRnJvbUpTT04pfWlmKCJ0ZXh0Ij09ZS50eXBlKXtpZigic3RyaW5nIiE9dHlwZW9mIGUudGV4dCl0aHJvdyBuZXcgUmFuZ2VFcnJvcigiSW52YWxpZCB0ZXh0IG5vZGUgaW4gSlNPTiIpO3JldHVybiB0LnRleHQoZS50ZXh0LG4pfXZhciByPWEuZnJvbUpTT04odCxlLmNvbnRlbnQpO3JldHVybiB0Lm5vZGVUeXBlKGUudHlwZSkuY3JlYXRlKGUuYXR0cnMscixuKX0sT2JqZWN0LmRlZmluZVByb3BlcnRpZXMoXy5wcm90b3R5cGUsRik7dmFyIEI9ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZShlLG4scixvKXtpZih0LmNhbGwodGhpcyxlLG4sbnVsbCxvKSwhcil0aHJvdyBuZXcgUmFuZ2VFcnJvcigiRW1wdHkgdGV4dCBub2RlcyBhcmUgbm90IGFsbG93ZWQiKTt0aGlzLnRleHQ9cn10JiYoZS5fX3Byb3RvX189dCksZS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZSh0JiZ0LnByb3RvdHlwZSksZS5wcm90b3R5cGUuY29uc3RydWN0b3I9ZTt2YXIgbj17dGV4dENvbnRlbnQ6e30sbm9kZVNpemU6e319O3JldHVybiBlLnByb3RvdHlwZS50b1N0cmluZz1mdW5jdGlvbigpe3JldHVybiB0aGlzLnR5cGUuc3BlYy50b0RlYnVnU3RyaW5nP3RoaXMudHlwZS5zcGVjLnRvRGVidWdTdHJpbmcodGhpcyk6aih0aGlzLm1hcmtzLEpTT04uc3RyaW5naWZ5KHRoaXMudGV4dCkpfSxuLnRleHRDb250ZW50LmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLnRleHR9LGUucHJvdG90eXBlLnRleHRCZXR3ZWVuPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIHRoaXMudGV4dC5zbGljZSh0LGUpfSxuLm5vZGVTaXplLmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLnRleHQubGVuZ3RofSxlLnByb3RvdHlwZS5tYXJrPWZ1bmN0aW9uKHQpe3JldHVybiB0PT10aGlzLm1hcmtzP3RoaXM6bmV3IGUodGhpcy50eXBlLHRoaXMuYXR0cnMsdGhpcy50ZXh0LHQpfSxlLnByb3RvdHlwZS53aXRoVGV4dD1mdW5jdGlvbih0KXtyZXR1cm4gdD09dGhpcy50ZXh0P3RoaXM6bmV3IGUodGhpcy50eXBlLHRoaXMuYXR0cnMsdCx0aGlzLm1hcmtzKX0sZS5wcm90b3R5cGUuY3V0PWZ1bmN0aW9uKHQsZSl7cmV0dXJuIHZvaWQgMD09PXQmJih0PTApLHZvaWQgMD09PWUmJihlPXRoaXMudGV4dC5sZW5ndGgpLDA9PXQmJmU9PXRoaXMudGV4dC5sZW5ndGg/dGhpczp0aGlzLndpdGhUZXh0KHRoaXMudGV4dC5zbGljZSh0LGUpKX0sZS5wcm90b3R5cGUuZXE9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuc2FtZU1hcmt1cCh0KSYmdGhpcy50ZXh0PT10LnRleHR9LGUucHJvdG90eXBlLnRvSlNPTj1mdW5jdGlvbigpe3ZhciBlPXQucHJvdG90eXBlLnRvSlNPTi5jYWxsKHRoaXMpO3JldHVybiBlLnRleHQ9dGhpcy50ZXh0LGV9LE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKGUucHJvdG90eXBlLG4pLGV9KF8pO2Z1bmN0aW9uIGoodCxlKXtmb3IodmFyIG49dC5sZW5ndGgtMTtuPj0wO24tLSllPXRbbl0udHlwZS5uYW1lKyIoIitlKyIpIjtyZXR1cm4gZX12YXIgJD1mdW5jdGlvbih0KXt0aGlzLnZhbGlkRW5kPXQsdGhpcy5uZXh0PVtdLHRoaXMud3JhcENhY2hlPVtdfSxWPXtpbmxpbmVDb250ZW50Ont9LGRlZmF1bHRUeXBlOnt9LGVkZ2VDb3VudDp7fX07JC5wYXJzZT1mdW5jdGlvbih0LGUpe3ZhciBuPW5ldyBMKHQsZSk7aWYobnVsbD09bi5uZXh0KXJldHVybiAkLmVtcHR5O3ZhciByPXEobik7bi5uZXh0JiZuLmVycigiVW5leHBlY3RlZCB0cmFpbGluZyB0ZXh0Iik7dmFyIG89dHQoWShyKSk7cmV0dXJuIGV0KG8sbiksb30sJC5wcm90b3R5cGUubWF0Y2hUeXBlPWZ1bmN0aW9uKHQpe2Zvcih2YXIgZT10aGlzLG49MDtuPHRoaXMubmV4dC5sZW5ndGg7bis9MilpZihlLm5leHRbbl09PXQpcmV0dXJuIGUubmV4dFtuKzFdO3JldHVybiBudWxsfSwkLnByb3RvdHlwZS5tYXRjaEZyYWdtZW50PWZ1bmN0aW9uKHQsZSxuKXt2b2lkIDA9PT1lJiYoZT0wKSx2b2lkIDA9PT1uJiYobj10LmNoaWxkQ291bnQpO2Zvcih2YXIgcj10aGlzLG89ZTtyJiZvPG47bysrKXI9ci5tYXRjaFR5cGUodC5jaGlsZChvKS50eXBlKTtyZXR1cm4gcn0sVi5pbmxpbmVDb250ZW50LmdldD1mdW5jdGlvbigpe3ZhciB0PXRoaXMubmV4dFswXTtyZXR1cm4hIXQmJnQuaXNJbmxpbmV9LFYuZGVmYXVsdFR5cGUuZ2V0PWZ1bmN0aW9uKCl7Zm9yKHZhciB0PXRoaXMsZT0wO2U8dGhpcy5uZXh0Lmxlbmd0aDtlKz0yKXt2YXIgbj10Lm5leHRbZV07aWYoIW4uaXNUZXh0JiYhbi5oYXNSZXF1aXJlZEF0dHJzKCkpcmV0dXJuIG59fSwkLnByb3RvdHlwZS5jb21wYXRpYmxlPWZ1bmN0aW9uKHQpe2Zvcih2YXIgZT10aGlzLG49MDtuPHRoaXMubmV4dC5sZW5ndGg7bis9Milmb3IodmFyIHI9MDtyPHQubmV4dC5sZW5ndGg7cis9MilpZihlLm5leHRbbl09PXQubmV4dFtyXSlyZXR1cm4hMDtyZXR1cm4hMX0sJC5wcm90b3R5cGUuZmlsbEJlZm9yZT1mdW5jdGlvbih0LGUsbil7dm9pZCAwPT09ZSYmKGU9ITEpLHZvaWQgMD09PW4mJihuPTApO3ZhciByPVt0aGlzXTtmdW5jdGlvbiBvKGkscyl7dmFyIGM9aS5tYXRjaEZyYWdtZW50KHQsbik7aWYoYyYmKCFlfHxjLnZhbGlkRW5kKSlyZXR1cm4gYS5mcm9tKHMubWFwKChmdW5jdGlvbih0KXtyZXR1cm4gdC5jcmVhdGVBbmRGaWxsKCl9KSkpO2Zvcih2YXIgbD0wO2w8aS5uZXh0Lmxlbmd0aDtsKz0yKXt2YXIgcD1pLm5leHRbbF0sdT1pLm5leHRbbCsxXTtpZighcC5pc1RleHQmJiFwLmhhc1JlcXVpcmVkQXR0cnMoKSYmLTE9PXIuaW5kZXhPZih1KSl7ci5wdXNoKHUpO3ZhciBoPW8odSxzLmNvbmNhdChwKSk7aWYoaClyZXR1cm4gaH19fXJldHVybiBvKHRoaXMsW10pfSwkLnByb3RvdHlwZS5maW5kV3JhcHBpbmc9ZnVuY3Rpb24odCl7Zm9yKHZhciBlPXRoaXMsbj0wO248dGhpcy53cmFwQ2FjaGUubGVuZ3RoO24rPTIpaWYoZS53cmFwQ2FjaGVbbl09PXQpcmV0dXJuIGUud3JhcENhY2hlW24rMV07dmFyIHI9dGhpcy5jb21wdXRlV3JhcHBpbmcodCk7cmV0dXJuIHRoaXMud3JhcENhY2hlLnB1c2godCxyKSxyfSwkLnByb3RvdHlwZS5jb21wdXRlV3JhcHBpbmc9ZnVuY3Rpb24odCl7dmFyIGU9T2JqZWN0LmNyZWF0ZShudWxsKSxuPVt7bWF0Y2g6dGhpcyx0eXBlOm51bGwsdmlhOm51bGx9XTt3aGlsZShuLmxlbmd0aCl7dmFyIHI9bi5zaGlmdCgpLG89ci5tYXRjaDtpZihvLm1hdGNoVHlwZSh0KSl7Zm9yKHZhciBpPVtdLHM9cjtzLnR5cGU7cz1zLnZpYSlpLnB1c2gocy50eXBlKTtyZXR1cm4gaS5yZXZlcnNlKCl9Zm9yKHZhciBhPTA7YTxvLm5leHQubGVuZ3RoO2ErPTIpe3ZhciBjPW8ubmV4dFthXTtjLmlzTGVhZnx8Yy5oYXNSZXF1aXJlZEF0dHJzKCl8fGMubmFtZSBpbiBlfHxyLnR5cGUmJiFvLm5leHRbYSsxXS52YWxpZEVuZHx8KG4ucHVzaCh7bWF0Y2g6Yy5jb250ZW50TWF0Y2gsdHlwZTpjLHZpYTpyfSksZVtjLm5hbWVdPSEwKX19fSxWLmVkZ2VDb3VudC5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5uZXh0Lmxlbmd0aD4+MX0sJC5wcm90b3R5cGUuZWRnZT1mdW5jdGlvbih0KXt2YXIgZT10PDwxO2lmKGU+dGhpcy5uZXh0Lmxlbmd0aCl0aHJvdyBuZXcgUmFuZ2VFcnJvcigiVGhlcmUncyBubyAiK3QrInRoIGVkZ2UgaW4gdGhpcyBjb250ZW50IG1hdGNoIik7cmV0dXJue3R5cGU6dGhpcy5uZXh0W2VdLG5leHQ6dGhpcy5uZXh0W2UrMV19fSwkLnByb3RvdHlwZS50b1N0cmluZz1mdW5jdGlvbigpe3ZhciB0PVtdO2Z1bmN0aW9uIGUobil7dC5wdXNoKG4pO2Zvcih2YXIgcj0xO3I8bi5uZXh0Lmxlbmd0aDtyKz0yKS0xPT10LmluZGV4T2Yobi5uZXh0W3JdKSYmZShuLm5leHRbcl0pfXJldHVybiBlKHRoaXMpLHQubWFwKChmdW5jdGlvbihlLG4pe2Zvcih2YXIgcj1uKyhlLnZhbGlkRW5kPyIqIjoiICIpKyIgIixvPTA7bzxlLm5leHQubGVuZ3RoO28rPTIpcis9KG8/IiwgIjoiIikrZS5uZXh0W29dLm5hbWUrIi0+Iit0LmluZGV4T2YoZS5uZXh0W28rMV0pO3JldHVybiByfSkpLmpvaW4oIlxuIil9LE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKCQucHJvdG90eXBlLFYpLCQuZW1wdHk9bmV3ICQoITApO3ZhciBMPWZ1bmN0aW9uKHQsZSl7dGhpcy5zdHJpbmc9dCx0aGlzLm5vZGVUeXBlcz1lLHRoaXMuaW5saW5lPW51bGwsdGhpcy5wb3M9MCx0aGlzLnRva2Vucz10LnNwbGl0KC9ccyooPz1cYnxcV3wkKS8pLCIiPT10aGlzLnRva2Vuc1t0aGlzLnRva2Vucy5sZW5ndGgtMV0mJnRoaXMudG9rZW5zLnBvcCgpLCIiPT10aGlzLnRva2Vuc1swXSYmdGhpcy50b2tlbnMudW5zaGlmdCgpfSxKPXtuZXh0Ont9fTtmdW5jdGlvbiBxKHQpe3ZhciBlPVtdO2Rve2UucHVzaChXKHQpKX13aGlsZSh0LmVhdCgifCIpKTtyZXR1cm4gMT09ZS5sZW5ndGg/ZVswXTp7dHlwZToiY2hvaWNlIixleHByczplfX1mdW5jdGlvbiBXKHQpe3ZhciBlPVtdO2Rve2UucHVzaChIKHQpKX13aGlsZSh0Lm5leHQmJiIpIiE9dC5uZXh0JiYifCIhPXQubmV4dCk7cmV0dXJuIDE9PWUubGVuZ3RoP2VbMF06e3R5cGU6InNlcSIsZXhwcnM6ZX19ZnVuY3Rpb24gSCh0KXtmb3IodmFyIGU9WCh0KTs7KWlmKHQuZWF0KCIrIikpZT17dHlwZToicGx1cyIsZXhwcjplfTtlbHNlIGlmKHQuZWF0KCIqIikpZT17dHlwZToic3RhciIsZXhwcjplfTtlbHNlIGlmKHQuZWF0KCI/IikpZT17dHlwZToib3B0IixleHByOmV9O2Vsc2V7aWYoIXQuZWF0KCJ7IikpYnJlYWs7ZT1VKHQsZSl9cmV0dXJuIGV9ZnVuY3Rpb24gSyh0KXsvXEQvLnRlc3QodC5uZXh0KSYmdC5lcnIoIkV4cGVjdGVkIG51bWJlciwgZ290ICciK3QubmV4dCsiJyIpO3ZhciBlPU51bWJlcih0Lm5leHQpO3JldHVybiB0LnBvcysrLGV9ZnVuY3Rpb24gVSh0LGUpe3ZhciBuPUsodCkscj1uO3JldHVybiB0LmVhdCgiLCIpJiYocj0ifSIhPXQubmV4dD9LKHQpOi0xKSx0LmVhdCgifSIpfHx0LmVycigiVW5jbG9zZWQgYnJhY2VkIHJhbmdlIikse3R5cGU6InJhbmdlIixtaW46bixtYXg6cixleHByOmV9fWZ1bmN0aW9uIEcodCxlKXt2YXIgbj10Lm5vZGVUeXBlcyxyPW5bZV07aWYocilyZXR1cm5bcl07dmFyIG89W107Zm9yKHZhciBpIGluIG4pe3ZhciBzPW5baV07cy5ncm91cHMuaW5kZXhPZihlKT4tMSYmby5wdXNoKHMpfXJldHVybiAwPT1vLmxlbmd0aCYmdC5lcnIoIk5vIG5vZGUgdHlwZSBvciBncm91cCAnIitlKyInIGZvdW5kIiksb31mdW5jdGlvbiBYKHQpe2lmKHQuZWF0KCIoIikpe3ZhciBlPXEodCk7cmV0dXJuIHQuZWF0KCIpIil8fHQuZXJyKCJNaXNzaW5nIGNsb3NpbmcgcGFyZW4iKSxlfWlmKCEvXFcvLnRlc3QodC5uZXh0KSl7dmFyIG49Ryh0LHQubmV4dCkubWFwKChmdW5jdGlvbihlKXtyZXR1cm4gbnVsbD09dC5pbmxpbmU/dC5pbmxpbmU9ZS5pc0lubGluZTp0LmlubGluZSE9ZS5pc0lubGluZSYmdC5lcnIoIk1peGluZyBpbmxpbmUgYW5kIGJsb2NrIGNvbnRlbnQiKSx7dHlwZToibmFtZSIsdmFsdWU6ZX19KSk7cmV0dXJuIHQucG9zKyssMT09bi5sZW5ndGg/blswXTp7dHlwZToiY2hvaWNlIixleHByczpufX10LmVycigiVW5leHBlY3RlZCB0b2tlbiAnIit0Lm5leHQrIiciKX1mdW5jdGlvbiBZKHQpe3ZhciBlPVtbXV07cmV0dXJuIG8oaSh0LDApLG4oKSksZTtmdW5jdGlvbiBuKCl7cmV0dXJuIGUucHVzaChbXSktMX1mdW5jdGlvbiByKHQsbixyKXt2YXIgbz17dGVybTpyLHRvOm59O3JldHVybiBlW3RdLnB1c2gobyksb31mdW5jdGlvbiBvKHQsZSl7dC5mb3JFYWNoKChmdW5jdGlvbih0KXtyZXR1cm4gdC50bz1lfSkpfWZ1bmN0aW9uIGkodCxlKXtpZigiY2hvaWNlIj09dC50eXBlKXJldHVybiB0LmV4cHJzLnJlZHVjZSgoZnVuY3Rpb24odCxuKXtyZXR1cm4gdC5jb25jYXQoaShuLGUpKX0pLFtdKTtpZigic2VxIj09dC50eXBlKWZvcih2YXIgcz0wOztzKyspe3ZhciBhPWkodC5leHByc1tzXSxlKTtpZihzPT10LmV4cHJzLmxlbmd0aC0xKXJldHVybiBhO28oYSxlPW4oKSl9ZWxzZXtpZigic3RhciI9PXQudHlwZSl7dmFyIGM9bigpO3JldHVybiByKGUsYyksbyhpKHQuZXhwcixjKSxjKSxbcihjKV19aWYoInBsdXMiPT10LnR5cGUpe3ZhciBsPW4oKTtyZXR1cm4gbyhpKHQuZXhwcixlKSxsKSxvKGkodC5leHByLGwpLGwpLFtyKGwpXX1pZigib3B0Ij09dC50eXBlKXJldHVybltyKGUpXS5jb25jYXQoaSh0LmV4cHIsZSkpO2lmKCJyYW5nZSI9PXQudHlwZSl7Zm9yKHZhciBwPWUsdT0wO3U8dC5taW47dSsrKXt2YXIgaD1uKCk7byhpKHQuZXhwcixwKSxoKSxwPWh9aWYoLTE9PXQubWF4KW8oaSh0LmV4cHIscCkscCk7ZWxzZSBmb3IodmFyIGY9dC5taW47Zjx0Lm1heDtmKyspe3ZhciBkPW4oKTtyKHAsZCksbyhpKHQuZXhwcixwKSxkKSxwPWR9cmV0dXJuW3IocCldfWlmKCJuYW1lIj09dC50eXBlKXJldHVybltyKGUsbnVsbCx0LnZhbHVlKV19fX1mdW5jdGlvbiBRKHQsZSl7cmV0dXJuIHQtZX1mdW5jdGlvbiBaKHQsZSl7dmFyIG49W107cmV0dXJuIHIoZSksbi5zb3J0KFEpO2Z1bmN0aW9uIHIoZSl7dmFyIG89dFtlXTtpZigxPT1vLmxlbmd0aCYmIW9bMF0udGVybSlyZXR1cm4gcihvWzBdLnRvKTtuLnB1c2goZSk7Zm9yKHZhciBpPTA7aTxvLmxlbmd0aDtpKyspe3ZhciBzPW9baV0sYT1zLnRlcm0sYz1zLnRvO2F8fC0xIT1uLmluZGV4T2YoYyl8fHIoYyl9fX1mdW5jdGlvbiB0dCh0KXt2YXIgZT1PYmplY3QuY3JlYXRlKG51bGwpO3JldHVybiBuKFoodCwwKSk7ZnVuY3Rpb24gbihyKXt2YXIgbz1bXTtyLmZvckVhY2goKGZ1bmN0aW9uKGUpe3RbZV0uZm9yRWFjaCgoZnVuY3Rpb24oZSl7dmFyIG49ZS50ZXJtLHI9ZS50bztpZihuKXt2YXIgaT1vLmluZGV4T2Yobikscz1pPi0xJiZvW2krMV07Wih0LHIpLmZvckVhY2goKGZ1bmN0aW9uKHQpe3N8fG8ucHVzaChuLHM9W10pLC0xPT1zLmluZGV4T2YodCkmJnMucHVzaCh0KX0pKX19KSl9KSk7Zm9yKHZhciBpPWVbci5qb2luKCIsIildPW5ldyAkKHIuaW5kZXhPZih0Lmxlbmd0aC0xKT4tMSkscz0wO3M8by5sZW5ndGg7cys9Mil7dmFyIGE9b1tzKzFdLnNvcnQoUSk7aS5uZXh0LnB1c2gob1tzXSxlW2Euam9pbigiLCIpXXx8bihhKSl9cmV0dXJuIGl9fWZ1bmN0aW9uIGV0KHQsZSl7Zm9yKHZhciBuPTAscj1bdF07bjxyLmxlbmd0aDtuKyspe2Zvcih2YXIgbz1yW25dLGk9IW8udmFsaWRFbmQscz1bXSxhPTA7YTxvLm5leHQubGVuZ3RoO2ErPTIpe3ZhciBjPW8ubmV4dFthXSxsPW8ubmV4dFthKzFdO3MucHVzaChjLm5hbWUpLCFpfHxjLmlzVGV4dHx8Yy5oYXNSZXF1aXJlZEF0dHJzKCl8fChpPSExKSwtMT09ci5pbmRleE9mKGwpJiZyLnB1c2gobCl9aSYmZS5lcnIoIk9ubHkgbm9uLWdlbmVyYXRhYmxlIG5vZGVzICgiK3Muam9pbigiLCAiKSsiKSBpbiBhIHJlcXVpcmVkIHBvc2l0aW9uIil9fWZ1bmN0aW9uIG50KHQpe3ZhciBlPU9iamVjdC5jcmVhdGUobnVsbCk7Zm9yKHZhciBuIGluIHQpe3ZhciByPXRbbl07aWYoIXIuaGFzRGVmYXVsdClyZXR1cm4gbnVsbDtlW25dPXIuZGVmYXVsdH1yZXR1cm4gZX1mdW5jdGlvbiBydCh0LGUpe3ZhciBuPU9iamVjdC5jcmVhdGUobnVsbCk7Zm9yKHZhciByIGluIHQpe3ZhciBvPWUmJmVbcl07aWYodm9pZCAwPT09byl7dmFyIGk9dFtyXTtpZighaS5oYXNEZWZhdWx0KXRocm93IG5ldyBSYW5nZUVycm9yKCJObyB2YWx1ZSBzdXBwbGllZCBmb3IgYXR0cmlidXRlICIrcik7bz1pLmRlZmF1bHR9bltyXT1vfXJldHVybiBufWZ1bmN0aW9uIG90KHQpe3ZhciBlPU9iamVjdC5jcmVhdGUobnVsbCk7aWYodClmb3IodmFyIG4gaW4gdCllW25dPW5ldyBhdCh0W25dKTtyZXR1cm4gZX1KLm5leHQuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudG9rZW5zW3RoaXMucG9zXX0sTC5wcm90b3R5cGUuZWF0PWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLm5leHQ9PXQmJih0aGlzLnBvcysrfHwhMCl9LEwucHJvdG90eXBlLmVycj1mdW5jdGlvbih0KXt0aHJvdyBuZXcgU3ludGF4RXJyb3IodCsiIChpbiBjb250ZW50IGV4cHJlc3Npb24gJyIrdGhpcy5zdHJpbmcrIicpIil9LE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKEwucHJvdG90eXBlLEopO3ZhciBpdD1mdW5jdGlvbih0LGUsbil7dGhpcy5uYW1lPXQsdGhpcy5zY2hlbWE9ZSx0aGlzLnNwZWM9bix0aGlzLmdyb3Vwcz1uLmdyb3VwP24uZ3JvdXAuc3BsaXQoIiAiKTpbXSx0aGlzLmF0dHJzPW90KG4uYXR0cnMpLHRoaXMuZGVmYXVsdEF0dHJzPW50KHRoaXMuYXR0cnMpLHRoaXMuY29udGVudE1hdGNoPW51bGwsdGhpcy5tYXJrU2V0PW51bGwsdGhpcy5pbmxpbmVDb250ZW50PW51bGwsdGhpcy5pc0Jsb2NrPSEobi5pbmxpbmV8fCJ0ZXh0Ij09dCksdGhpcy5pc1RleHQ9InRleHQiPT10fSxzdD17aXNJbmxpbmU6e30saXNUZXh0YmxvY2s6e30saXNMZWFmOnt9LGlzQXRvbTp7fX07c3QuaXNJbmxpbmUuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIXRoaXMuaXNCbG9ja30sc3QuaXNUZXh0YmxvY2suZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuaXNCbG9jayYmdGhpcy5pbmxpbmVDb250ZW50fSxzdC5pc0xlYWYuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY29udGVudE1hdGNoPT0kLmVtcHR5fSxzdC5pc0F0b20uZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuaXNMZWFmfHx0aGlzLnNwZWMuYXRvbX0saXQucHJvdG90eXBlLmhhc1JlcXVpcmVkQXR0cnM9ZnVuY3Rpb24odCl7dmFyIGU9dGhpcztmb3IodmFyIG4gaW4gZS5hdHRycylpZihlLmF0dHJzW25dLmlzUmVxdWlyZWQmJighdHx8IShuIGluIHQpKSlyZXR1cm4hMDtyZXR1cm4hMX0saXQucHJvdG90eXBlLmNvbXBhdGlibGVDb250ZW50PWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzPT10fHx0aGlzLmNvbnRlbnRNYXRjaC5jb21wYXRpYmxlKHQuY29udGVudE1hdGNoKX0saXQucHJvdG90eXBlLmNvbXB1dGVBdHRycz1mdW5jdGlvbih0KXtyZXR1cm4hdCYmdGhpcy5kZWZhdWx0QXR0cnM/dGhpcy5kZWZhdWx0QXR0cnM6cnQodGhpcy5hdHRycyx0KX0saXQucHJvdG90eXBlLmNyZWF0ZT1mdW5jdGlvbih0LGUsbil7aWYodGhpcy5pc1RleHQpdGhyb3cgbmV3IEVycm9yKCJOb2RlVHlwZS5jcmVhdGUgY2FuJ3QgY29uc3RydWN0IHRleHQgbm9kZXMiKTtyZXR1cm4gbmV3IF8odGhpcyx0aGlzLmNvbXB1dGVBdHRycyh0KSxhLmZyb20oZSksaC5zZXRGcm9tKG4pKX0saXQucHJvdG90eXBlLmNyZWF0ZUNoZWNrZWQ9ZnVuY3Rpb24odCxlLG4pe2lmKGU9YS5mcm9tKGUpLCF0aGlzLnZhbGlkQ29udGVudChlKSl0aHJvdyBuZXcgUmFuZ2VFcnJvcigiSW52YWxpZCBjb250ZW50IGZvciBub2RlICIrdGhpcy5uYW1lKTtyZXR1cm4gbmV3IF8odGhpcyx0aGlzLmNvbXB1dGVBdHRycyh0KSxlLGguc2V0RnJvbShuKSl9LGl0LnByb3RvdHlwZS5jcmVhdGVBbmRGaWxsPWZ1bmN0aW9uKHQsZSxuKXtpZih0PXRoaXMuY29tcHV0ZUF0dHJzKHQpLGU9YS5mcm9tKGUpLGUuc2l6ZSl7dmFyIHI9dGhpcy5jb250ZW50TWF0Y2guZmlsbEJlZm9yZShlKTtpZighcilyZXR1cm4gbnVsbDtlPXIuYXBwZW5kKGUpfXZhciBvPXRoaXMuY29udGVudE1hdGNoLm1hdGNoRnJhZ21lbnQoZSkuZmlsbEJlZm9yZShhLmVtcHR5LCEwKTtyZXR1cm4gbz9uZXcgXyh0aGlzLHQsZS5hcHBlbmQobyksaC5zZXRGcm9tKG4pKTpudWxsfSxpdC5wcm90b3R5cGUudmFsaWRDb250ZW50PWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMsbj10aGlzLmNvbnRlbnRNYXRjaC5tYXRjaEZyYWdtZW50KHQpO2lmKCFufHwhbi52YWxpZEVuZClyZXR1cm4hMTtmb3IodmFyIHI9MDtyPHQuY2hpbGRDb3VudDtyKyspaWYoIWUuYWxsb3dzTWFya3ModC5jaGlsZChyKS5tYXJrcykpcmV0dXJuITE7cmV0dXJuITB9LGl0LnByb3RvdHlwZS5hbGxvd3NNYXJrVHlwZT1mdW5jdGlvbih0KXtyZXR1cm4gbnVsbD09dGhpcy5tYXJrU2V0fHx0aGlzLm1hcmtTZXQuaW5kZXhPZih0KT4tMX0saXQucHJvdG90eXBlLmFsbG93c01hcmtzPWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXM7aWYobnVsbD09dGhpcy5tYXJrU2V0KXJldHVybiEwO2Zvcih2YXIgbj0wO248dC5sZW5ndGg7bisrKWlmKCFlLmFsbG93c01hcmtUeXBlKHRbbl0udHlwZSkpcmV0dXJuITE7cmV0dXJuITB9LGl0LnByb3RvdHlwZS5hbGxvd2VkTWFya3M9ZnVuY3Rpb24odCl7dmFyIGUsbj10aGlzO2lmKG51bGw9PXRoaXMubWFya1NldClyZXR1cm4gdDtmb3IodmFyIHI9MDtyPHQubGVuZ3RoO3IrKyluLmFsbG93c01hcmtUeXBlKHRbcl0udHlwZSk/ZSYmZS5wdXNoKHRbcl0pOmV8fChlPXQuc2xpY2UoMCxyKSk7cmV0dXJuIGU/ZS5sZW5ndGg/ZTpoLmVtcHR5OnR9LGl0LmNvbXBpbGU9ZnVuY3Rpb24odCxlKXt2YXIgbj1PYmplY3QuY3JlYXRlKG51bGwpO3QuZm9yRWFjaCgoZnVuY3Rpb24odCxyKXtyZXR1cm4gblt0XT1uZXcgaXQodCxlLHIpfSkpO3ZhciByPWUuc3BlYy50b3BOb2RlfHwiZG9jIjtpZighbltyXSl0aHJvdyBuZXcgUmFuZ2VFcnJvcigiU2NoZW1hIGlzIG1pc3NpbmcgaXRzIHRvcCBub2RlIHR5cGUgKCciK3IrIicpIik7aWYoIW4udGV4dCl0aHJvdyBuZXcgUmFuZ2VFcnJvcigiRXZlcnkgc2NoZW1hIG5lZWRzIGEgJ3RleHQnIHR5cGUiKTtmb3IodmFyIG8gaW4gbi50ZXh0LmF0dHJzKXRocm93IG5ldyBSYW5nZUVycm9yKCJUaGUgdGV4dCBub2RlIHR5cGUgc2hvdWxkIG5vdCBoYXZlIGF0dHJpYnV0ZXMiKTtyZXR1cm4gbn0sT2JqZWN0LmRlZmluZVByb3BlcnRpZXMoaXQucHJvdG90eXBlLHN0KTt2YXIgYXQ9ZnVuY3Rpb24odCl7dGhpcy5oYXNEZWZhdWx0PU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbCh0LCJkZWZhdWx0IiksdGhpcy5kZWZhdWx0PXQuZGVmYXVsdH0sY3Q9e2lzUmVxdWlyZWQ6e319O2N0LmlzUmVxdWlyZWQuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIXRoaXMuaGFzRGVmYXVsdH0sT2JqZWN0LmRlZmluZVByb3BlcnRpZXMoYXQucHJvdG90eXBlLGN0KTt2YXIgbHQ9ZnVuY3Rpb24odCxlLG4scil7dGhpcy5uYW1lPXQsdGhpcy5zY2hlbWE9bix0aGlzLnNwZWM9cix0aGlzLmF0dHJzPW90KHIuYXR0cnMpLHRoaXMucmFuaz1lLHRoaXMuZXhjbHVkZWQ9bnVsbDt2YXIgbz1udCh0aGlzLmF0dHJzKTt0aGlzLmluc3RhbmNlPW8mJm5ldyBoKHRoaXMsbyl9O2x0LnByb3RvdHlwZS5jcmVhdGU9ZnVuY3Rpb24odCl7cmV0dXJuIXQmJnRoaXMuaW5zdGFuY2U/dGhpcy5pbnN0YW5jZTpuZXcgaCh0aGlzLHJ0KHRoaXMuYXR0cnMsdCkpfSxsdC5jb21waWxlPWZ1bmN0aW9uKHQsZSl7dmFyIG49T2JqZWN0LmNyZWF0ZShudWxsKSxyPTA7cmV0dXJuIHQuZm9yRWFjaCgoZnVuY3Rpb24odCxvKXtyZXR1cm4gblt0XT1uZXcgbHQodCxyKyssZSxvKX0pKSxufSxsdC5wcm90b3R5cGUucmVtb3ZlRnJvbVNldD1mdW5jdGlvbih0KXtmb3IodmFyIGU9dGhpcyxuPTA7bjx0Lmxlbmd0aDtuKyspaWYodFtuXS50eXBlPT1lKXJldHVybiB0LnNsaWNlKDAsbikuY29uY2F0KHQuc2xpY2UobisxKSk7cmV0dXJuIHR9LGx0LnByb3RvdHlwZS5pc0luU2V0PWZ1bmN0aW9uKHQpe2Zvcih2YXIgZT10aGlzLG49MDtuPHQubGVuZ3RoO24rKylpZih0W25dLnR5cGU9PWUpcmV0dXJuIHRbbl19LGx0LnByb3RvdHlwZS5leGNsdWRlcz1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5leGNsdWRlZC5pbmRleE9mKHQpPi0xfTt2YXIgcHQ9ZnVuY3Rpb24odCl7dmFyIGU9dGhpcztmb3IodmFyIG4gaW4gdGhpcy5zcGVjPXt9LHQpZS5zcGVjW25dPXRbbl07dGhpcy5zcGVjLm5vZGVzPW8uZnJvbSh0Lm5vZGVzKSx0aGlzLnNwZWMubWFya3M9by5mcm9tKHQubWFya3MpLHRoaXMubm9kZXM9aXQuY29tcGlsZSh0aGlzLnNwZWMubm9kZXMsdGhpcyksdGhpcy5tYXJrcz1sdC5jb21waWxlKHRoaXMuc3BlYy5tYXJrcyx0aGlzKTt2YXIgcj1PYmplY3QuY3JlYXRlKG51bGwpO2Zvcih2YXIgaSBpbiBlLm5vZGVzKXtpZihpIGluIGUubWFya3MpdGhyb3cgbmV3IFJhbmdlRXJyb3IoaSsiIGNhbiBub3QgYmUgYm90aCBhIG5vZGUgYW5kIGEgbWFyayIpO3ZhciBzPWUubm9kZXNbaV0sYT1zLnNwZWMuY29udGVudHx8IiIsYz1zLnNwZWMubWFya3M7cy5jb250ZW50TWF0Y2g9clthXXx8KHJbYV09JC5wYXJzZShhLGUubm9kZXMpKSxzLmlubGluZUNvbnRlbnQ9cy5jb250ZW50TWF0Y2guaW5saW5lQ29udGVudCxzLm1hcmtTZXQ9Il8iPT1jP251bGw6Yz91dChlLGMuc3BsaXQoIiAiKSk6IiIhPWMmJnMuaW5saW5lQ29udGVudD9udWxsOltdfWZvcih2YXIgbCBpbiBlLm1hcmtzKXt2YXIgcD1lLm1hcmtzW2xdLHU9cC5zcGVjLmV4Y2x1ZGVzO3AuZXhjbHVkZWQ9bnVsbD09dT9bcF06IiI9PXU/W106dXQoZSx1LnNwbGl0KCIgIikpfXRoaXMubm9kZUZyb21KU09OPXRoaXMubm9kZUZyb21KU09OLmJpbmQodGhpcyksdGhpcy5tYXJrRnJvbUpTT049dGhpcy5tYXJrRnJvbUpTT04uYmluZCh0aGlzKSx0aGlzLnRvcE5vZGVUeXBlPXRoaXMubm9kZXNbdGhpcy5zcGVjLnRvcE5vZGV8fCJkb2MiXSx0aGlzLmNhY2hlZD1PYmplY3QuY3JlYXRlKG51bGwpLHRoaXMuY2FjaGVkLndyYXBwaW5ncz1PYmplY3QuY3JlYXRlKG51bGwpfTtmdW5jdGlvbiB1dCh0LGUpe2Zvcih2YXIgbj1bXSxyPTA7cjxlLmxlbmd0aDtyKyspe3ZhciBvPWVbcl0saT10Lm1hcmtzW29dLHM9aTtpZihpKW4ucHVzaChpKTtlbHNlIGZvcih2YXIgYSBpbiB0Lm1hcmtzKXt2YXIgYz10Lm1hcmtzW2FdOygiXyI9PW98fGMuc3BlYy5ncm91cCYmYy5zcGVjLmdyb3VwLnNwbGl0KCIgIikuaW5kZXhPZihvKT4tMSkmJm4ucHVzaChzPWMpfWlmKCFzKXRocm93IG5ldyBTeW50YXhFcnJvcigiVW5rbm93biBtYXJrIHR5cGU6ICciK2Vbcl0rIiciKX1yZXR1cm4gbn1wdC5wcm90b3R5cGUubm9kZT1mdW5jdGlvbih0LGUsbixyKXtpZigic3RyaW5nIj09dHlwZW9mIHQpdD10aGlzLm5vZGVUeXBlKHQpO2Vsc2V7aWYoISh0IGluc3RhbmNlb2YgaXQpKXRocm93IG5ldyBSYW5nZUVycm9yKCJJbnZhbGlkIG5vZGUgdHlwZTogIit0KTtpZih0LnNjaGVtYSE9dGhpcyl0aHJvdyBuZXcgUmFuZ2VFcnJvcigiTm9kZSB0eXBlIGZyb20gZGlmZmVyZW50IHNjaGVtYSB1c2VkICgiK3QubmFtZSsiKSIpfXJldHVybiB0LmNyZWF0ZUNoZWNrZWQoZSxuLHIpfSxwdC5wcm90b3R5cGUudGV4dD1mdW5jdGlvbih0LGUpe3ZhciBuPXRoaXMubm9kZXMudGV4dDtyZXR1cm4gbmV3IEIobixuLmRlZmF1bHRBdHRycyx0LGguc2V0RnJvbShlKSl9LHB0LnByb3RvdHlwZS5tYXJrPWZ1bmN0aW9uKHQsZSl7cmV0dXJuInN0cmluZyI9PXR5cGVvZiB0JiYodD10aGlzLm1hcmtzW3RdKSx0LmNyZWF0ZShlKX0scHQucHJvdG90eXBlLm5vZGVGcm9tSlNPTj1mdW5jdGlvbih0KXtyZXR1cm4gXy5mcm9tSlNPTih0aGlzLHQpfSxwdC5wcm90b3R5cGUubWFya0Zyb21KU09OPWZ1bmN0aW9uKHQpe3JldHVybiBoLmZyb21KU09OKHRoaXMsdCl9LHB0LnByb3RvdHlwZS5ub2RlVHlwZT1mdW5jdGlvbih0KXt2YXIgZT10aGlzLm5vZGVzW3RdO2lmKCFlKXRocm93IG5ldyBSYW5nZUVycm9yKCJVbmtub3duIG5vZGUgdHlwZTogIit0KTtyZXR1cm4gZX07dmFyIGh0PWZ1bmN0aW9uKHQsZSl7dmFyIG49dGhpczt0aGlzLnNjaGVtYT10LHRoaXMucnVsZXM9ZSx0aGlzLnRhZ3M9W10sdGhpcy5zdHlsZXM9W10sZS5mb3JFYWNoKChmdW5jdGlvbih0KXt0LnRhZz9uLnRhZ3MucHVzaCh0KTp0LnN0eWxlJiZuLnN0eWxlcy5wdXNoKHQpfSkpfTtodC5wcm90b3R5cGUucGFyc2U9ZnVuY3Rpb24odCxlKXt2b2lkIDA9PT1lJiYoZT17fSk7dmFyIG49bmV3IGJ0KHRoaXMsZSwhMSk7cmV0dXJuIG4uYWRkQWxsKHQsbnVsbCxlLmZyb20sZS50byksbi5maW5pc2goKX0saHQucHJvdG90eXBlLnBhcnNlU2xpY2U9ZnVuY3Rpb24odCxlKXt2b2lkIDA9PT1lJiYoZT17fSk7dmFyIG49bmV3IGJ0KHRoaXMsZSwhMCk7cmV0dXJuIG4uYWRkQWxsKHQsbnVsbCxlLmZyb20sZS50byksZC5tYXhPcGVuKG4uZmluaXNoKCkpfSxodC5wcm90b3R5cGUubWF0Y2hUYWc9ZnVuY3Rpb24odCxlKXtmb3IodmFyIG49dGhpcyxyPTA7cjx0aGlzLnRhZ3MubGVuZ3RoO3IrKyl7dmFyIG89bi50YWdzW3JdO2lmKEN0KHQsby50YWcpJiYodm9pZCAwPT09by5uYW1lc3BhY2V8fHQubmFtZXNwYWNlVVJJPT1vLm5hbWVzcGFjZSkmJighby5jb250ZXh0fHxlLm1hdGNoZXNDb250ZXh0KG8uY29udGV4dCkpKXtpZihvLmdldEF0dHJzKXt2YXIgaT1vLmdldEF0dHJzKHQpO2lmKCExPT09aSljb250aW51ZTtvLmF0dHJzPWl9cmV0dXJuIG99fX0saHQucHJvdG90eXBlLm1hdGNoU3R5bGU9ZnVuY3Rpb24odCxlLG4pe2Zvcih2YXIgcj10aGlzLG89MDtvPHRoaXMuc3R5bGVzLmxlbmd0aDtvKyspe3ZhciBpPXIuc3R5bGVzW29dO2lmKCEoMCE9aS5zdHlsZS5pbmRleE9mKHQpfHxpLmNvbnRleHQmJiFuLm1hdGNoZXNDb250ZXh0KGkuY29udGV4dCl8fGkuc3R5bGUubGVuZ3RoPnQubGVuZ3RoJiYoNjEhPWkuc3R5bGUuY2hhckNvZGVBdCh0Lmxlbmd0aCl8fGkuc3R5bGUuc2xpY2UodC5sZW5ndGgrMSkhPWUpKSl7aWYoaS5nZXRBdHRycyl7dmFyIHM9aS5nZXRBdHRycyhlKTtpZighMT09PXMpY29udGludWU7aS5hdHRycz1zfXJldHVybiBpfX19LGh0LnNjaGVtYVJ1bGVzPWZ1bmN0aW9uKHQpe3ZhciBlPVtdO2Z1bmN0aW9uIG4odCl7Zm9yKHZhciBuPW51bGw9PXQucHJpb3JpdHk/NTA6dC5wcmlvcml0eSxyPTA7cjxlLmxlbmd0aDtyKyspe3ZhciBvPWVbcl0saT1udWxsPT1vLnByaW9yaXR5PzUwOm8ucHJpb3JpdHk7aWYoaTxuKWJyZWFrfWUuc3BsaWNlKHIsMCx0KX12YXIgcj1mdW5jdGlvbihlKXt2YXIgcj10Lm1hcmtzW2VdLnNwZWMucGFyc2VET007ciYmci5mb3JFYWNoKChmdW5jdGlvbih0KXtuKHQ9TXQodCkpLHQubWFyaz1lfSkpfTtmb3IodmFyIG8gaW4gdC5tYXJrcylyKG8pO3ZhciBpPWZ1bmN0aW9uKGUpe3ZhciByPXQubm9kZXNbc10uc3BlYy5wYXJzZURPTTtyJiZyLmZvckVhY2goKGZ1bmN0aW9uKHQpe24odD1NdCh0KSksdC5ub2RlPXN9KSl9O2Zvcih2YXIgcyBpbiB0Lm5vZGVzKWkobyk7cmV0dXJuIGV9LGh0LmZyb21TY2hlbWE9ZnVuY3Rpb24odCl7cmV0dXJuIHQuY2FjaGVkLmRvbVBhcnNlcnx8KHQuY2FjaGVkLmRvbVBhcnNlcj1uZXcgaHQodCxodC5zY2hlbWFSdWxlcyh0KSkpfTt2YXIgZnQ9e2FkZHJlc3M6ITAsYXJ0aWNsZTohMCxhc2lkZTohMCxibG9ja3F1b3RlOiEwLGNhbnZhczohMCxkZDohMCxkaXY6ITAsZGw6ITAsZmllbGRzZXQ6ITAsZmlnY2FwdGlvbjohMCxmaWd1cmU6ITAsZm9vdGVyOiEwLGZvcm06ITAsaDE6ITAsaDI6ITAsaDM6ITAsaDQ6ITAsaDU6ITAsaDY6ITAsaGVhZGVyOiEwLGhncm91cDohMCxocjohMCxsaTohMCxub3NjcmlwdDohMCxvbDohMCxvdXRwdXQ6ITAscDohMCxwcmU6ITAsc2VjdGlvbjohMCx0YWJsZTohMCx0Zm9vdDohMCx1bDohMH0sZHQ9e2hlYWQ6ITAsbm9zY3JpcHQ6ITAsb2JqZWN0OiEwLHNjcmlwdDohMCxzdHlsZTohMCx0aXRsZTohMH0sdnQ9e29sOiEwLHVsOiEwfSxtdD0xLHl0PTIsZ3Q9NDtmdW5jdGlvbiB3dCh0KXtyZXR1cm4odD9tdDowKXwoImZ1bGwiPT09dD95dDowKX12YXIgeHQ9ZnVuY3Rpb24odCxlLG4scixvLGkpe3RoaXMudHlwZT10LHRoaXMuYXR0cnM9ZSx0aGlzLnNvbGlkPXIsdGhpcy5tYXRjaD1vfHwoaSZndD9udWxsOnQuY29udGVudE1hdGNoKSx0aGlzLm9wdGlvbnM9aSx0aGlzLmNvbnRlbnQ9W10sdGhpcy5tYXJrcz1uLHRoaXMuYWN0aXZlTWFya3M9aC5ub25lfTt4dC5wcm90b3R5cGUuZmluZFdyYXBwaW5nPWZ1bmN0aW9uKHQpe2lmKCF0aGlzLm1hdGNoKXtpZighdGhpcy50eXBlKXJldHVybltdO3ZhciBlPXRoaXMudHlwZS5jb250ZW50TWF0Y2guZmlsbEJlZm9yZShhLmZyb20odCkpO2lmKCFlKXt2YXIgbixyPXRoaXMudHlwZS5jb250ZW50TWF0Y2g7cmV0dXJuKG49ci5maW5kV3JhcHBpbmcodC50eXBlKSk/KHRoaXMubWF0Y2g9cixuKTpudWxsfXRoaXMubWF0Y2g9dGhpcy50eXBlLmNvbnRlbnRNYXRjaC5tYXRjaEZyYWdtZW50KGUpfXJldHVybiB0aGlzLm1hdGNoLmZpbmRXcmFwcGluZyh0LnR5cGUpfSx4dC5wcm90b3R5cGUuZmluaXNoPWZ1bmN0aW9uKHQpe2lmKCEodGhpcy5vcHRpb25zJm10KSl7dmFyIGUsbj10aGlzLmNvbnRlbnRbdGhpcy5jb250ZW50Lmxlbmd0aC0xXTtuJiZuLmlzVGV4dCYmKGU9L1xzKyQvLmV4ZWMobi50ZXh0KSkmJihuLnRleHQubGVuZ3RoPT1lWzBdLmxlbmd0aD90aGlzLmNvbnRlbnQucG9wKCk6dGhpcy5jb250ZW50W3RoaXMuY29udGVudC5sZW5ndGgtMV09bi53aXRoVGV4dChuLnRleHQuc2xpY2UoMCxuLnRleHQubGVuZ3RoLWVbMF0ubGVuZ3RoKSkpfXZhciByPWEuZnJvbSh0aGlzLmNvbnRlbnQpO3JldHVybiF0JiZ0aGlzLm1hdGNoJiYocj1yLmFwcGVuZCh0aGlzLm1hdGNoLmZpbGxCZWZvcmUoYS5lbXB0eSwhMCkpKSx0aGlzLnR5cGU/dGhpcy50eXBlLmNyZWF0ZSh0aGlzLmF0dHJzLHIsdGhpcy5tYXJrcyk6cn07dmFyIGJ0PWZ1bmN0aW9uKHQsZSxuKXt0aGlzLnBhcnNlcj10LHRoaXMub3B0aW9ucz1lLHRoaXMuaXNPcGVuPW4sdGhpcy5wZW5kaW5nTWFya3M9W107dmFyIHIsbz1lLnRvcE5vZGUsaT13dChlLnByZXNlcnZlV2hpdGVzcGFjZSl8KG4/Z3Q6MCk7cj1vP25ldyB4dChvLnR5cGUsby5hdHRycyxoLm5vbmUsITAsZS50b3BNYXRjaHx8by50eXBlLmNvbnRlbnRNYXRjaCxpKTpuZXcgeHQobj9udWxsOnQuc2NoZW1hLnRvcE5vZGVUeXBlLG51bGwsaC5ub25lLCEwLG51bGwsaSksdGhpcy5ub2Rlcz1bcl0sdGhpcy5vcGVuPTAsdGhpcy5maW5kPWUuZmluZFBvc2l0aW9ucyx0aGlzLm5lZWRzQmxvY2s9ITF9LGt0PXt0b3A6e30sY3VycmVudFBvczp7fX07ZnVuY3Rpb24gU3QodCl7Zm9yKHZhciBlPXQuZmlyc3RDaGlsZCxuPW51bGw7ZTtlPWUubmV4dFNpYmxpbmcpe3ZhciByPTE9PWUubm9kZVR5cGU/ZS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpOm51bGw7ciYmdnQuaGFzT3duUHJvcGVydHkocikmJm4/KG4uYXBwZW5kQ2hpbGQoZSksZT1uKToibGkiPT1yP249ZTpyJiYobj1udWxsKX19ZnVuY3Rpb24gQ3QodCxlKXtyZXR1cm4odC5tYXRjaGVzfHx0Lm1zTWF0Y2hlc1NlbGVjdG9yfHx0LndlYmtpdE1hdGNoZXNTZWxlY3Rvcnx8dC5tb3pNYXRjaGVzU2VsZWN0b3IpLmNhbGwodCxlKX1mdW5jdGlvbiBPdCh0KXt2YXIgZSxuPS9ccyooW1x3LV0rKVxzKjpccyooW147XSspL2cscj1bXTt3aGlsZShlPW4uZXhlYyh0KSlyLnB1c2goZVsxXSxlWzJdLnRyaW0oKSk7cmV0dXJuIHJ9ZnVuY3Rpb24gTXQodCl7dmFyIGU9e307Zm9yKHZhciBuIGluIHQpZVtuXT10W25dO3JldHVybiBlfWt0LnRvcC5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5ub2Rlc1t0aGlzLm9wZW5dfSxidC5wcm90b3R5cGUuYWRkRE9NPWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXM7aWYoMz09dC5ub2RlVHlwZSl0aGlzLmFkZFRleHROb2RlKHQpO2Vsc2UgaWYoMT09dC5ub2RlVHlwZSl7dmFyIG49dC5nZXRBdHRyaWJ1dGUoInN0eWxlIikscj1uP3RoaXMucmVhZFN0eWxlcyhPdChuKSk6bnVsbDtpZihudWxsIT1yKWZvcih2YXIgbz0wO288ci5sZW5ndGg7bysrKWUuYWRkUGVuZGluZ01hcmsocltvXSk7aWYodGhpcy5hZGRFbGVtZW50KHQpLG51bGwhPXIpZm9yKHZhciBpPTA7aTxyLmxlbmd0aDtpKyspZS5yZW1vdmVQZW5kaW5nTWFyayhyW2ldKX19LGJ0LnByb3RvdHlwZS5hZGRUZXh0Tm9kZT1mdW5jdGlvbih0KXt2YXIgZT10Lm5vZGVWYWx1ZSxuPXRoaXMudG9wO2lmKChuLnR5cGU/bi50eXBlLmlubGluZUNvbnRlbnQ6bi5jb250ZW50Lmxlbmd0aCYmbi5jb250ZW50WzBdLmlzSW5saW5lKXx8L1xTLy50ZXN0KGUpKXtpZihuLm9wdGlvbnMmbXQpbi5vcHRpb25zJnl0fHwoZT1lLnJlcGxhY2UoL1xyP1xufFxyL2csIiAiKSk7ZWxzZSBpZihlPWUucmVwbGFjZSgvXHMrL2csIiAiKSwvXlxzLy50ZXN0KGUpJiZ0aGlzLm9wZW49PXRoaXMubm9kZXMubGVuZ3RoLTEpe3ZhciByPW4uY29udGVudFtuLmNvbnRlbnQubGVuZ3RoLTFdLG89dC5wcmV2aW91c1NpYmxpbmc7KCFyfHxvJiYiQlIiPT1vLm5vZGVOYW1lfHxyLmlzVGV4dCYmL1xzJC8udGVzdChyLnRleHQpKSYmKGU9ZS5zbGljZSgxKSl9ZSYmdGhpcy5pbnNlcnROb2RlKHRoaXMucGFyc2VyLnNjaGVtYS50ZXh0KGUpKSx0aGlzLmZpbmRJblRleHQodCl9ZWxzZSB0aGlzLmZpbmRJbnNpZGUodCl9LGJ0LnByb3RvdHlwZS5hZGRFbGVtZW50PWZ1bmN0aW9uKHQpe3ZhciBlPXQubm9kZU5hbWUudG9Mb3dlckNhc2UoKTt2dC5oYXNPd25Qcm9wZXJ0eShlKSYmU3QodCk7dmFyIG49dGhpcy5vcHRpb25zLnJ1bGVGcm9tTm9kZSYmdGhpcy5vcHRpb25zLnJ1bGVGcm9tTm9kZSh0KXx8dGhpcy5wYXJzZXIubWF0Y2hUYWcodCx0aGlzKTtpZihuP24uaWdub3JlOmR0Lmhhc093blByb3BlcnR5KGUpKXRoaXMuZmluZEluc2lkZSh0KTtlbHNlIGlmKCFufHxuLnNraXApe24mJm4uc2tpcC5ub2RlVHlwZSYmKHQ9bi5za2lwKTt2YXIgcixvPXRoaXMudG9wLGk9dGhpcy5uZWVkc0Jsb2NrO2lmKGZ0Lmhhc093blByb3BlcnR5KGUpKXI9ITAsby50eXBlfHwodGhpcy5uZWVkc0Jsb2NrPSEwKTtlbHNlIGlmKCF0LmZpcnN0Q2hpbGQpcmV0dXJuIHZvaWQgdGhpcy5sZWFmRmFsbGJhY2sodCk7dGhpcy5hZGRBbGwodCksciYmdGhpcy5zeW5jKG8pLHRoaXMubmVlZHNCbG9jaz1pfWVsc2UgdGhpcy5hZGRFbGVtZW50QnlSdWxlKHQsbil9LGJ0LnByb3RvdHlwZS5sZWFmRmFsbGJhY2s9ZnVuY3Rpb24odCl7IkJSIj09dC5ub2RlTmFtZSYmdGhpcy50b3AudHlwZSYmdGhpcy50b3AudHlwZS5pbmxpbmVDb250ZW50JiZ0aGlzLmFkZFRleHROb2RlKHQub3duZXJEb2N1bWVudC5jcmVhdGVUZXh0Tm9kZSgiXG4iKSl9LGJ0LnByb3RvdHlwZS5yZWFkU3R5bGVzPWZ1bmN0aW9uKHQpe2Zvcih2YXIgZT10aGlzLG49aC5ub25lLHI9MDtyPHQubGVuZ3RoO3IrPTIpe3ZhciBvPWUucGFyc2VyLm1hdGNoU3R5bGUodFtyXSx0W3IrMV0sZSk7aWYobyl7aWYoby5pZ25vcmUpcmV0dXJuIG51bGw7bj1lLnBhcnNlci5zY2hlbWEubWFya3Nbby5tYXJrXS5jcmVhdGUoby5hdHRycykuYWRkVG9TZXQobil9fXJldHVybiBufSxidC5wcm90b3R5cGUuYWRkRWxlbWVudEJ5UnVsZT1mdW5jdGlvbih0LGUpe3ZhciBuLHIsbyxpLHM9dGhpcztlLm5vZGU/KHI9dGhpcy5wYXJzZXIuc2NoZW1hLm5vZGVzW2Uubm9kZV0sci5pc0xlYWY/dGhpcy5pbnNlcnROb2RlKHIuY3JlYXRlKGUuYXR0cnMpKXx8dGhpcy5sZWFmRmFsbGJhY2sodCk6bj10aGlzLmVudGVyKHIsZS5hdHRycyxlLnByZXNlcnZlV2hpdGVzcGFjZSkpOihvPXRoaXMucGFyc2VyLnNjaGVtYS5tYXJrc1tlLm1hcmtdLGk9by5jcmVhdGUoZS5hdHRycyksdGhpcy5hZGRQZW5kaW5nTWFyayhpKSk7dmFyIGE9dGhpcy50b3A7aWYociYmci5pc0xlYWYpdGhpcy5maW5kSW5zaWRlKHQpO2Vsc2UgaWYoZS5nZXRDb250ZW50KXRoaXMuZmluZEluc2lkZSh0KSxlLmdldENvbnRlbnQodCx0aGlzLnBhcnNlci5zY2hlbWEpLmZvckVhY2goKGZ1bmN0aW9uKHQpe3JldHVybiBzLmluc2VydE5vZGUodCl9KSk7ZWxzZXt2YXIgYz1lLmNvbnRlbnRFbGVtZW50OyJzdHJpbmciPT10eXBlb2YgYz9jPXQucXVlcnlTZWxlY3RvcihjKToiZnVuY3Rpb24iPT10eXBlb2YgYyYmKGM9Yyh0KSksY3x8KGM9dCksdGhpcy5maW5kQXJvdW5kKHQsYywhMCksdGhpcy5hZGRBbGwoYyxuKX1uJiYodGhpcy5zeW5jKGEpLHRoaXMub3Blbi0tKSxpJiZ0aGlzLnJlbW92ZVBlbmRpbmdNYXJrKGkpfSxidC5wcm90b3R5cGUuYWRkQWxsPWZ1bmN0aW9uKHQsZSxuLHIpe2Zvcih2YXIgbz10aGlzLGk9bnx8MCxzPW4/dC5jaGlsZE5vZGVzW25dOnQuZmlyc3RDaGlsZCxhPW51bGw9PXI/bnVsbDp0LmNoaWxkTm9kZXNbcl07cyE9YTtzPXMubmV4dFNpYmxpbmcsKytpKW8uZmluZEF0UG9pbnQodCxpKSxvLmFkZERPTShzKSxlJiZmdC5oYXNPd25Qcm9wZXJ0eShzLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCkpJiZvLnN5bmMoZSk7dGhpcy5maW5kQXRQb2ludCh0LGkpfSxidC5wcm90b3R5cGUuZmluZFBsYWNlPWZ1bmN0aW9uKHQpe2Zvcih2YXIgZSxuLHI9dGhpcyxvPXRoaXMub3BlbjtvPj0wO28tLSl7dmFyIGk9ci5ub2Rlc1tvXSxzPWkuZmluZFdyYXBwaW5nKHQpO2lmKHMmJighZXx8ZS5sZW5ndGg+cy5sZW5ndGgpJiYoZT1zLG49aSwhcy5sZW5ndGgpKWJyZWFrO2lmKGkuc29saWQpYnJlYWt9aWYoIWUpcmV0dXJuITE7dGhpcy5zeW5jKG4pO2Zvcih2YXIgYT0wO2E8ZS5sZW5ndGg7YSsrKXIuZW50ZXJJbm5lcihlW2FdLG51bGwsITEpO3JldHVybiEwfSxidC5wcm90b3R5cGUuaW5zZXJ0Tm9kZT1mdW5jdGlvbih0KXtpZih0LmlzSW5saW5lJiZ0aGlzLm5lZWRzQmxvY2smJiF0aGlzLnRvcC50eXBlKXt2YXIgZT10aGlzLnRleHRibG9ja0Zyb21Db250ZXh0KCk7ZSYmdGhpcy5lbnRlcklubmVyKGUpfWlmKHRoaXMuZmluZFBsYWNlKHQpKXt0aGlzLmNsb3NlRXh0cmEoKTt2YXIgbj10aGlzLnRvcDt0aGlzLmFwcGx5UGVuZGluZ01hcmtzKG4pLG4ubWF0Y2gmJihuLm1hdGNoPW4ubWF0Y2gubWF0Y2hUeXBlKHQudHlwZSkpO2Zvcih2YXIgcj1uLmFjdGl2ZU1hcmtzLG89MDtvPHQubWFya3MubGVuZ3RoO28rKyluLnR5cGUmJiFuLnR5cGUuYWxsb3dzTWFya1R5cGUodC5tYXJrc1tvXS50eXBlKXx8KHI9dC5tYXJrc1tvXS5hZGRUb1NldChyKSk7cmV0dXJuIG4uY29udGVudC5wdXNoKHQubWFyayhyKSksITB9cmV0dXJuITF9LGJ0LnByb3RvdHlwZS5hcHBseVBlbmRpbmdNYXJrcz1mdW5jdGlvbih0KXtmb3IodmFyIGU9dGhpcyxuPTA7bjx0aGlzLnBlbmRpbmdNYXJrcy5sZW5ndGg7bisrKXt2YXIgcj1lLnBlbmRpbmdNYXJrc1tuXTt0LnR5cGUmJiF0LnR5cGUuYWxsb3dzTWFya1R5cGUoci50eXBlKXx8ci5pc0luU2V0KHQuYWN0aXZlTWFya3MpfHwodC5hY3RpdmVNYXJrcz1yLmFkZFRvU2V0KHQuYWN0aXZlTWFya3MpLGUucGVuZGluZ01hcmtzLnNwbGljZShuLS0sMSkpfX0sYnQucHJvdG90eXBlLmVudGVyPWZ1bmN0aW9uKHQsZSxuKXt2YXIgcj10aGlzLmZpbmRQbGFjZSh0LmNyZWF0ZShlKSk7cmV0dXJuIHImJih0aGlzLmFwcGx5UGVuZGluZ01hcmtzKHRoaXMudG9wKSx0aGlzLmVudGVySW5uZXIodCxlLCEwLG4pKSxyfSxidC5wcm90b3R5cGUuZW50ZXJJbm5lcj1mdW5jdGlvbih0LGUsbixyKXt0aGlzLmNsb3NlRXh0cmEoKTt2YXIgbz10aGlzLnRvcDtvLm1hdGNoPW8ubWF0Y2gmJm8ubWF0Y2gubWF0Y2hUeXBlKHQsZSk7dmFyIGk9bnVsbD09cj9vLm9wdGlvbnMmfmd0Ond0KHIpO28ub3B0aW9ucyZndCYmMD09by5jb250ZW50Lmxlbmd0aCYmKGl8PWd0KSx0aGlzLm5vZGVzLnB1c2gobmV3IHh0KHQsZSxvLmFjdGl2ZU1hcmtzLG4sbnVsbCxpKSksdGhpcy5vcGVuKyt9LGJ0LnByb3RvdHlwZS5jbG9zZUV4dHJhPWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMsbj10aGlzLm5vZGVzLmxlbmd0aC0xO2lmKG4+dGhpcy5vcGVuKXtmb3IoO24+dGhpcy5vcGVuO24tLSllLm5vZGVzW24tMV0uY29udGVudC5wdXNoKGUubm9kZXNbbl0uZmluaXNoKHQpKTt0aGlzLm5vZGVzLmxlbmd0aD10aGlzLm9wZW4rMX19LGJ0LnByb3RvdHlwZS5maW5pc2g9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5vcGVuPTAsdGhpcy5jbG9zZUV4dHJhKHRoaXMuaXNPcGVuKSx0aGlzLm5vZGVzWzBdLmZpbmlzaCh0aGlzLmlzT3Blbnx8dGhpcy5vcHRpb25zLnRvcE9wZW4pfSxidC5wcm90b3R5cGUuc3luYz1mdW5jdGlvbih0KXtmb3IodmFyIGU9dGhpcyxuPXRoaXMub3BlbjtuPj0wO24tLSlpZihlLm5vZGVzW25dPT10KXJldHVybiB2b2lkKGUub3Blbj1uKX0sYnQucHJvdG90eXBlLmFkZFBlbmRpbmdNYXJrPWZ1bmN0aW9uKHQpe3RoaXMucGVuZGluZ01hcmtzLnB1c2godCl9LGJ0LnByb3RvdHlwZS5yZW1vdmVQZW5kaW5nTWFyaz1mdW5jdGlvbih0KXt2YXIgZT10aGlzLnBlbmRpbmdNYXJrcy5sYXN0SW5kZXhPZih0KTtpZihlPi0xKXRoaXMucGVuZGluZ01hcmtzLnNwbGljZShlLDEpO2Vsc2V7dmFyIG49dGhpcy50b3A7bi5hY3RpdmVNYXJrcz10LnJlbW92ZUZyb21TZXQobi5hY3RpdmVNYXJrcyl9fSxrdC5jdXJyZW50UG9zLmdldD1mdW5jdGlvbigpe3ZhciB0PXRoaXM7dGhpcy5jbG9zZUV4dHJhKCk7Zm9yKHZhciBlPTAsbj10aGlzLm9wZW47bj49MDtuLS0pe2Zvcih2YXIgcj10Lm5vZGVzW25dLmNvbnRlbnQsbz1yLmxlbmd0aC0xO28+PTA7by0tKWUrPXJbb10ubm9kZVNpemU7biYmZSsrfXJldHVybiBlfSxidC5wcm90b3R5cGUuZmluZEF0UG9pbnQ9ZnVuY3Rpb24odCxlKXt2YXIgbj10aGlzO2lmKHRoaXMuZmluZClmb3IodmFyIHI9MDtyPHRoaXMuZmluZC5sZW5ndGg7cisrKW4uZmluZFtyXS5ub2RlPT10JiZuLmZpbmRbcl0ub2Zmc2V0PT1lJiYobi5maW5kW3JdLnBvcz1uLmN1cnJlbnRQb3MpfSxidC5wcm90b3R5cGUuZmluZEluc2lkZT1mdW5jdGlvbih0KXt2YXIgZT10aGlzO2lmKHRoaXMuZmluZClmb3IodmFyIG49MDtuPHRoaXMuZmluZC5sZW5ndGg7bisrKW51bGw9PWUuZmluZFtuXS5wb3MmJjE9PXQubm9kZVR5cGUmJnQuY29udGFpbnMoZS5maW5kW25dLm5vZGUpJiYoZS5maW5kW25dLnBvcz1lLmN1cnJlbnRQb3MpfSxidC5wcm90b3R5cGUuZmluZEFyb3VuZD1mdW5jdGlvbih0LGUsbil7dmFyIHI9dGhpcztpZih0IT1lJiZ0aGlzLmZpbmQpZm9yKHZhciBvPTA7bzx0aGlzLmZpbmQubGVuZ3RoO28rKylpZihudWxsPT1yLmZpbmRbb10ucG9zJiYxPT10Lm5vZGVUeXBlJiZ0LmNvbnRhaW5zKHIuZmluZFtvXS5ub2RlKSl7dmFyIGk9ZS5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbihyLmZpbmRbb10ubm9kZSk7aSYobj8yOjQpJiYoci5maW5kW29dLnBvcz1yLmN1cnJlbnRQb3MpfX0sYnQucHJvdG90eXBlLmZpbmRJblRleHQ9ZnVuY3Rpb24odCl7dmFyIGU9dGhpcztpZih0aGlzLmZpbmQpZm9yKHZhciBuPTA7bjx0aGlzLmZpbmQubGVuZ3RoO24rKyllLmZpbmRbbl0ubm9kZT09dCYmKGUuZmluZFtuXS5wb3M9ZS5jdXJyZW50UG9zLSh0Lm5vZGVWYWx1ZS5sZW5ndGgtZS5maW5kW25dLm9mZnNldCkpfSxidC5wcm90b3R5cGUubWF0Y2hlc0NvbnRleHQ9ZnVuY3Rpb24odCl7dmFyIGU9dGhpcztpZih0LmluZGV4T2YoInwiKT4tMSlyZXR1cm4gdC5zcGxpdCgvXHMqXHxccyovKS5zb21lKHRoaXMubWF0Y2hlc0NvbnRleHQsdGhpcyk7dmFyIG49dC5zcGxpdCgiLyIpLHI9dGhpcy5vcHRpb25zLmNvbnRleHQsbz0hdGhpcy5pc09wZW4mJighcnx8ci5wYXJlbnQudHlwZT09dGhpcy5ub2Rlc1swXS50eXBlKSxpPS0ocj9yLmRlcHRoKzE6MCkrKG8/MDoxKSxzPWZ1bmN0aW9uKHQsYSl7Zm9yKDt0Pj0wO3QtLSl7dmFyIGM9blt0XTtpZigiIj09Yyl7aWYodD09bi5sZW5ndGgtMXx8MD09dCljb250aW51ZTtmb3IoO2E+PWk7YS0tKWlmKHModC0xLGEpKXJldHVybiEwO3JldHVybiExfXZhciBsPWE+MHx8MD09YSYmbz9lLm5vZGVzW2FdLnR5cGU6ciYmYT49aT9yLm5vZGUoYS1pKS50eXBlOm51bGw7aWYoIWx8fGwubmFtZSE9YyYmLTE9PWwuZ3JvdXBzLmluZGV4T2YoYykpcmV0dXJuITE7YS0tfXJldHVybiEwfTtyZXR1cm4gcyhuLmxlbmd0aC0xLHRoaXMub3Blbil9LGJ0LnByb3RvdHlwZS50ZXh0YmxvY2tGcm9tQ29udGV4dD1mdW5jdGlvbigpe3ZhciB0PXRoaXMsZT10aGlzLm9wdGlvbnMuY29udGV4dDtpZihlKWZvcih2YXIgbj1lLmRlcHRoO24+PTA7bi0tKXt2YXIgcj1lLm5vZGUobikuY29udGVudE1hdGNoQXQoZS5pbmRleEFmdGVyKG4pKS5kZWZhdWx0VHlwZTtpZihyJiZyLmlzVGV4dGJsb2NrJiZyLmRlZmF1bHRBdHRycylyZXR1cm4gcn1mb3IodmFyIG8gaW4gdC5wYXJzZXIuc2NoZW1hLm5vZGVzKXt2YXIgaT10LnBhcnNlci5zY2hlbWEubm9kZXNbb107aWYoaS5pc1RleHRibG9jayYmaS5kZWZhdWx0QXR0cnMpcmV0dXJuIGl9fSxPYmplY3QuZGVmaW5lUHJvcGVydGllcyhidC5wcm90b3R5cGUsa3QpO3ZhciBUdD1mdW5jdGlvbih0LGUpe3RoaXMubm9kZXM9dHx8e30sdGhpcy5tYXJrcz1lfHx7fX07ZnVuY3Rpb24gTnQodCl7dmFyIGU9e307Zm9yKHZhciBuIGluIHQpe3ZhciByPXRbbl0uc3BlYy50b0RPTTtyJiYoZVtuXT1yKX1yZXR1cm4gZX1mdW5jdGlvbiBFdCh0KXtyZXR1cm4gdC5kb2N1bWVudHx8d2luZG93LmRvY3VtZW50fVR0LnByb3RvdHlwZS5zZXJpYWxpemVGcmFnbWVudD1mdW5jdGlvbih0LGUsbil7dmFyIHI9dGhpczt2b2lkIDA9PT1lJiYoZT17fSksbnx8KG49RXQoZSkuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpKTt2YXIgbz1uLGk9bnVsbDtyZXR1cm4gdC5mb3JFYWNoKChmdW5jdGlvbih0KXtpZihpfHx0Lm1hcmtzLmxlbmd0aCl7aXx8KGk9W10pO3ZhciBuPTAscz0wO3doaWxlKG48aS5sZW5ndGgmJnM8dC5tYXJrcy5sZW5ndGgpe3ZhciBhPXQubWFya3Nbc107aWYoci5tYXJrc1thLnR5cGUubmFtZV0pe2lmKCFhLmVxKGlbbl0pfHwhMT09PWEudHlwZS5zcGVjLnNwYW5uaW5nKWJyZWFrO24rPTIscysrfWVsc2UgcysrfXdoaWxlKG48aS5sZW5ndGgpbz1pLnBvcCgpLGkucG9wKCk7d2hpbGUoczx0Lm1hcmtzLmxlbmd0aCl7dmFyIGM9dC5tYXJrc1tzKytdLGw9ci5zZXJpYWxpemVNYXJrKGMsdC5pc0lubGluZSxlKTtsJiYoaS5wdXNoKGMsbyksby5hcHBlbmRDaGlsZChsLmRvbSksbz1sLmNvbnRlbnRET018fGwuZG9tKX19by5hcHBlbmRDaGlsZChyLnNlcmlhbGl6ZU5vZGUodCxlKSl9KSksbn0sVHQucHJvdG90eXBlLnNlcmlhbGl6ZU5vZGU9ZnVuY3Rpb24odCxlKXt2b2lkIDA9PT1lJiYoZT17fSk7dmFyIG49VHQucmVuZGVyU3BlYyhFdChlKSx0aGlzLm5vZGVzW3QudHlwZS5uYW1lXSh0KSkscj1uLmRvbSxvPW4uY29udGVudERPTTtpZihvKXtpZih0LmlzTGVhZil0aHJvdyBuZXcgUmFuZ2VFcnJvcigiQ29udGVudCBob2xlIG5vdCBhbGxvd2VkIGluIGEgbGVhZiBub2RlIHNwZWMiKTtlLm9uQ29udGVudD9lLm9uQ29udGVudCh0LG8sZSk6dGhpcy5zZXJpYWxpemVGcmFnbWVudCh0LmNvbnRlbnQsZSxvKX1yZXR1cm4gcn0sVHQucHJvdG90eXBlLnNlcmlhbGl6ZU5vZGVBbmRNYXJrcz1mdW5jdGlvbih0LGUpe3ZhciBuPXRoaXM7dm9pZCAwPT09ZSYmKGU9e30pO2Zvcih2YXIgcj10aGlzLnNlcmlhbGl6ZU5vZGUodCxlKSxvPXQubWFya3MubGVuZ3RoLTE7bz49MDtvLS0pe3ZhciBpPW4uc2VyaWFsaXplTWFyayh0Lm1hcmtzW29dLHQuaXNJbmxpbmUsZSk7aSYmKChpLmNvbnRlbnRET018fGkuZG9tKS5hcHBlbmRDaGlsZChyKSxyPWkuZG9tKX1yZXR1cm4gcn0sVHQucHJvdG90eXBlLnNlcmlhbGl6ZU1hcms9ZnVuY3Rpb24odCxlLG4pe3ZvaWQgMD09PW4mJihuPXt9KTt2YXIgcj10aGlzLm1hcmtzW3QudHlwZS5uYW1lXTtyZXR1cm4gciYmVHQucmVuZGVyU3BlYyhFdChuKSxyKHQsZSkpfSxUdC5yZW5kZXJTcGVjPWZ1bmN0aW9uKHQsZSl7aWYoInN0cmluZyI9PXR5cGVvZiBlKXJldHVybntkb206dC5jcmVhdGVUZXh0Tm9kZShlKX07aWYobnVsbCE9ZS5ub2RlVHlwZSlyZXR1cm57ZG9tOmV9O3ZhciBuPXQuY3JlYXRlRWxlbWVudChlWzBdKSxyPW51bGwsbz1lWzFdLGk9MTtpZihvJiYib2JqZWN0Ij09dHlwZW9mIG8mJm51bGw9PW8ubm9kZVR5cGUmJiFBcnJheS5pc0FycmF5KG8pKWZvcih2YXIgcyBpbiBpPTIsbyludWxsIT1vW3NdJiZuLnNldEF0dHJpYnV0ZShzLG9bc10pO2Zvcih2YXIgYT1pO2E8ZS5sZW5ndGg7YSsrKXt2YXIgYz1lW2FdO2lmKDA9PT1jKXtpZihhPGUubGVuZ3RoLTF8fGE+aSl0aHJvdyBuZXcgUmFuZ2VFcnJvcigiQ29udGVudCBob2xlIG11c3QgYmUgdGhlIG9ubHkgY2hpbGQgb2YgaXRzIHBhcmVudCBub2RlIik7cmV0dXJue2RvbTpuLGNvbnRlbnRET006bn19dmFyIGw9VHQucmVuZGVyU3BlYyh0LGMpLHA9bC5kb20sdT1sLmNvbnRlbnRET007aWYobi5hcHBlbmRDaGlsZChwKSx1KXtpZihyKXRocm93IG5ldyBSYW5nZUVycm9yKCJNdWx0aXBsZSBjb250ZW50IGhvbGVzIik7cj11fX1yZXR1cm57ZG9tOm4sY29udGVudERPTTpyfX0sVHQuZnJvbVNjaGVtYT1mdW5jdGlvbih0KXtyZXR1cm4gdC5jYWNoZWQuZG9tU2VyaWFsaXplcnx8KHQuY2FjaGVkLmRvbVNlcmlhbGl6ZXI9bmV3IFR0KHRoaXMubm9kZXNGcm9tU2NoZW1hKHQpLHRoaXMubWFya3NGcm9tU2NoZW1hKHQpKSl9LFR0Lm5vZGVzRnJvbVNjaGVtYT1mdW5jdGlvbih0KXt2YXIgZT1OdCh0Lm5vZGVzKTtyZXR1cm4gZS50ZXh0fHwoZS50ZXh0PWZ1bmN0aW9uKHQpe3JldHVybiB0LnRleHR9KSxlfSxUdC5tYXJrc0Zyb21TY2hlbWE9ZnVuY3Rpb24odCl7cmV0dXJuIE50KHQubWFya3MpfSxlLk5vZGU9XyxlLlJlc29sdmVkUG9zPU4sZS5Ob2RlUmFuZ2U9eixlLkZyYWdtZW50PWEsZS5TbGljZT1kLGUuUmVwbGFjZUVycm9yPWYsZS5NYXJrPWgsZS5TY2hlbWE9cHQsZS5Ob2RlVHlwZT1pdCxlLk1hcmtUeXBlPWx0LGUuQ29udGVudE1hdGNoPSQsZS5ET01QYXJzZXI9aHQsZS5ET01TZXJpYWxpemVyPVR0fSwiNmZmYiI6ZnVuY3Rpb24odCxlLG4peyJ1c2Ugc3RyaWN0IjtPYmplY3QuZGVmaW5lUHJvcGVydHkoZSwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSk7dmFyIHI9bigiNmYyNyIpLG89bigiYjkyMyIpLGk9T2JqZWN0LmNyZWF0ZShudWxsKSxzPWZ1bmN0aW9uKHQsZSxuKXt0aGlzLnJhbmdlcz1ufHxbbmV3IGModC5taW4oZSksdC5tYXgoZSkpXSx0aGlzLiRhbmNob3I9dCx0aGlzLiRoZWFkPWV9LGE9e2FuY2hvcjp7fSxoZWFkOnt9LGZyb206e30sdG86e30sJGZyb206e30sJHRvOnt9LGVtcHR5Ont9fTthLmFuY2hvci5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy4kYW5jaG9yLnBvc30sYS5oZWFkLmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLiRoZWFkLnBvc30sYS5mcm9tLmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLiRmcm9tLnBvc30sYS50by5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy4kdG8ucG9zfSxhLiRmcm9tLmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLnJhbmdlc1swXS4kZnJvbX0sYS4kdG8uZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucmFuZ2VzWzBdLiR0b30sYS5lbXB0eS5nZXQ9ZnVuY3Rpb24oKXtmb3IodmFyIHQ9dGhpcy5yYW5nZXMsZT0wO2U8dC5sZW5ndGg7ZSsrKWlmKHRbZV0uJGZyb20ucG9zIT10W2VdLiR0by5wb3MpcmV0dXJuITE7cmV0dXJuITB9LHMucHJvdG90eXBlLmNvbnRlbnQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy4kZnJvbS5ub2RlKDApLnNsaWNlKHRoaXMuZnJvbSx0aGlzLnRvLCEwKX0scy5wcm90b3R5cGUucmVwbGFjZT1mdW5jdGlvbih0LGUpe3ZvaWQgMD09PWUmJihlPXIuU2xpY2UuZW1wdHkpO2Zvcih2YXIgbj1lLmNvbnRlbnQubGFzdENoaWxkLG89bnVsbCxpPTA7aTxlLm9wZW5FbmQ7aSsrKW89bixuPW4ubGFzdENoaWxkO2Zvcih2YXIgcz10LnN0ZXBzLmxlbmd0aCxhPXRoaXMucmFuZ2VzLGM9MDtjPGEubGVuZ3RoO2MrKyl7dmFyIGw9YVtjXSxwPWwuJGZyb20sdT1sLiR0byxoPXQubWFwcGluZy5zbGljZShzKTt0LnJlcGxhY2VSYW5nZShoLm1hcChwLnBvcyksaC5tYXAodS5wb3MpLGM/ci5TbGljZS5lbXB0eTplKSwwPT1jJiZtKHQscywobj9uLmlzSW5saW5lOm8mJm8uaXNUZXh0YmxvY2spPy0xOjEpfX0scy5wcm90b3R5cGUucmVwbGFjZVdpdGg9ZnVuY3Rpb24odCxlKXtmb3IodmFyIG49dC5zdGVwcy5sZW5ndGgscj10aGlzLnJhbmdlcyxvPTA7bzxyLmxlbmd0aDtvKyspe3ZhciBpPXJbb10scz1pLiRmcm9tLGE9aS4kdG8sYz10Lm1hcHBpbmcuc2xpY2UobiksbD1jLm1hcChzLnBvcykscD1jLm1hcChhLnBvcyk7bz90LmRlbGV0ZVJhbmdlKGwscCk6KHQucmVwbGFjZVJhbmdlV2l0aChsLHAsZSksbSh0LG4sZS5pc0lubGluZT8tMToxKSl9fSxzLmZpbmRGcm9tPWZ1bmN0aW9uKHQsZSxuKXt2YXIgcj10LnBhcmVudC5pbmxpbmVDb250ZW50P25ldyBsKHQpOnYodC5ub2RlKDApLHQucGFyZW50LHQucG9zLHQuaW5kZXgoKSxlLG4pO2lmKHIpcmV0dXJuIHI7Zm9yKHZhciBvPXQuZGVwdGgtMTtvPj0wO28tLSl7dmFyIGk9ZTwwP3YodC5ub2RlKDApLHQubm9kZShvKSx0LmJlZm9yZShvKzEpLHQuaW5kZXgobyksZSxuKTp2KHQubm9kZSgwKSx0Lm5vZGUobyksdC5hZnRlcihvKzEpLHQuaW5kZXgobykrMSxlLG4pO2lmKGkpcmV0dXJuIGl9fSxzLm5lYXI9ZnVuY3Rpb24odCxlKXtyZXR1cm4gdm9pZCAwPT09ZSYmKGU9MSksdGhpcy5maW5kRnJvbSh0LGUpfHx0aGlzLmZpbmRGcm9tKHQsLWUpfHxuZXcgZih0Lm5vZGUoMCkpfSxzLmF0U3RhcnQ9ZnVuY3Rpb24odCl7cmV0dXJuIHYodCx0LDAsMCwxKXx8bmV3IGYodCl9LHMuYXRFbmQ9ZnVuY3Rpb24odCl7cmV0dXJuIHYodCx0LHQuY29udGVudC5zaXplLHQuY2hpbGRDb3VudCwtMSl8fG5ldyBmKHQpfSxzLmZyb21KU09OPWZ1bmN0aW9uKHQsZSl7aWYoIWV8fCFlLnR5cGUpdGhyb3cgbmV3IFJhbmdlRXJyb3IoIkludmFsaWQgaW5wdXQgZm9yIFNlbGVjdGlvbi5mcm9tSlNPTiIpO3ZhciBuPWlbZS50eXBlXTtpZighbil0aHJvdyBuZXcgUmFuZ2VFcnJvcigiTm8gc2VsZWN0aW9uIHR5cGUgIitlLnR5cGUrIiBkZWZpbmVkIik7cmV0dXJuIG4uZnJvbUpTT04odCxlKX0scy5qc29uSUQ9ZnVuY3Rpb24odCxlKXtpZih0IGluIGkpdGhyb3cgbmV3IFJhbmdlRXJyb3IoIkR1cGxpY2F0ZSB1c2Ugb2Ygc2VsZWN0aW9uIEpTT04gSUQgIit0KTtyZXR1cm4gaVt0XT1lLGUucHJvdG90eXBlLmpzb25JRD10LGV9LHMucHJvdG90eXBlLmdldEJvb2ttYXJrPWZ1bmN0aW9uKCl7cmV0dXJuIGwuYmV0d2Vlbih0aGlzLiRhbmNob3IsdGhpcy4kaGVhZCkuZ2V0Qm9va21hcmsoKX0sT2JqZWN0LmRlZmluZVByb3BlcnRpZXMocy5wcm90b3R5cGUsYSkscy5wcm90b3R5cGUudmlzaWJsZT0hMDt2YXIgYz1mdW5jdGlvbih0LGUpe3RoaXMuJGZyb209dCx0aGlzLiR0bz1lfSxsPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoZSxuKXt2b2lkIDA9PT1uJiYobj1lKSx0LmNhbGwodGhpcyxlLG4pfXQmJihlLl9fcHJvdG9fXz10KSxlLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKHQmJnQucHJvdG90eXBlKSxlLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1lO3ZhciBuPXskY3Vyc29yOnt9fTtyZXR1cm4gbi4kY3Vyc29yLmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLiRhbmNob3IucG9zPT10aGlzLiRoZWFkLnBvcz90aGlzLiRoZWFkOm51bGx9LGUucHJvdG90eXBlLm1hcD1mdW5jdGlvbihuLHIpe3ZhciBvPW4ucmVzb2x2ZShyLm1hcCh0aGlzLmhlYWQpKTtpZighby5wYXJlbnQuaW5saW5lQ29udGVudClyZXR1cm4gdC5uZWFyKG8pO3ZhciBpPW4ucmVzb2x2ZShyLm1hcCh0aGlzLmFuY2hvcikpO3JldHVybiBuZXcgZShpLnBhcmVudC5pbmxpbmVDb250ZW50P2k6byxvKX0sZS5wcm90b3R5cGUucmVwbGFjZT1mdW5jdGlvbihlLG4pe2lmKHZvaWQgMD09PW4mJihuPXIuU2xpY2UuZW1wdHkpLHQucHJvdG90eXBlLnJlcGxhY2UuY2FsbCh0aGlzLGUsbiksbj09ci5TbGljZS5lbXB0eSl7dmFyIG89dGhpcy4kZnJvbS5tYXJrc0Fjcm9zcyh0aGlzLiR0byk7byYmZS5lbnN1cmVNYXJrcyhvKX19LGUucHJvdG90eXBlLmVxPWZ1bmN0aW9uKHQpe3JldHVybiB0IGluc3RhbmNlb2YgZSYmdC5hbmNob3I9PXRoaXMuYW5jaG9yJiZ0LmhlYWQ9PXRoaXMuaGVhZH0sZS5wcm90b3R5cGUuZ2V0Qm9va21hcms9ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IHAodGhpcy5hbmNob3IsdGhpcy5oZWFkKX0sZS5wcm90b3R5cGUudG9KU09OPWZ1bmN0aW9uKCl7cmV0dXJue3R5cGU6InRleHQiLGFuY2hvcjp0aGlzLmFuY2hvcixoZWFkOnRoaXMuaGVhZH19LGUuZnJvbUpTT049ZnVuY3Rpb24odCxuKXtpZigibnVtYmVyIiE9dHlwZW9mIG4uYW5jaG9yfHwibnVtYmVyIiE9dHlwZW9mIG4uaGVhZCl0aHJvdyBuZXcgUmFuZ2VFcnJvcigiSW52YWxpZCBpbnB1dCBmb3IgVGV4dFNlbGVjdGlvbi5mcm9tSlNPTiIpO3JldHVybiBuZXcgZSh0LnJlc29sdmUobi5hbmNob3IpLHQucmVzb2x2ZShuLmhlYWQpKX0sZS5jcmVhdGU9ZnVuY3Rpb24odCxlLG4pe3ZvaWQgMD09PW4mJihuPWUpO3ZhciByPXQucmVzb2x2ZShlKTtyZXR1cm4gbmV3IHRoaXMocixuPT1lP3I6dC5yZXNvbHZlKG4pKX0sZS5iZXR3ZWVuPWZ1bmN0aW9uKG4scixvKXt2YXIgaT1uLnBvcy1yLnBvcztpZihvJiYhaXx8KG89aT49MD8xOi0xKSwhci5wYXJlbnQuaW5saW5lQ29udGVudCl7dmFyIHM9dC5maW5kRnJvbShyLG8sITApfHx0LmZpbmRGcm9tKHIsLW8sITApO2lmKCFzKXJldHVybiB0Lm5lYXIocixvKTtyPXMuJGhlYWR9cmV0dXJuIG4ucGFyZW50LmlubGluZUNvbnRlbnR8fCgwPT1pP249cjoobj0odC5maW5kRnJvbShuLC1vLCEwKXx8dC5maW5kRnJvbShuLG8sITApKS4kYW5jaG9yLG4ucG9zPHIucG9zIT1pPDAmJihuPXIpKSksbmV3IGUobixyKX0sT2JqZWN0LmRlZmluZVByb3BlcnRpZXMoZS5wcm90b3R5cGUsbiksZX0ocyk7cy5qc29uSUQoInRleHQiLGwpO3ZhciBwPWZ1bmN0aW9uKHQsZSl7dGhpcy5hbmNob3I9dCx0aGlzLmhlYWQ9ZX07cC5wcm90b3R5cGUubWFwPWZ1bmN0aW9uKHQpe3JldHVybiBuZXcgcCh0Lm1hcCh0aGlzLmFuY2hvciksdC5tYXAodGhpcy5oZWFkKSl9LHAucHJvdG90eXBlLnJlc29sdmU9ZnVuY3Rpb24odCl7cmV0dXJuIGwuYmV0d2Vlbih0LnJlc29sdmUodGhpcy5hbmNob3IpLHQucmVzb2x2ZSh0aGlzLmhlYWQpKX07dmFyIHU9ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZShlKXt2YXIgbj1lLm5vZGVBZnRlcixyPWUubm9kZSgwKS5yZXNvbHZlKGUucG9zK24ubm9kZVNpemUpO3QuY2FsbCh0aGlzLGUsciksdGhpcy5ub2RlPW59cmV0dXJuIHQmJihlLl9fcHJvdG9fXz10KSxlLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKHQmJnQucHJvdG90eXBlKSxlLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1lLGUucHJvdG90eXBlLm1hcD1mdW5jdGlvbihuLHIpe3ZhciBvPXIubWFwUmVzdWx0KHRoaXMuYW5jaG9yKSxpPW8uZGVsZXRlZCxzPW8ucG9zLGE9bi5yZXNvbHZlKHMpO3JldHVybiBpP3QubmVhcihhKTpuZXcgZShhKX0sZS5wcm90b3R5cGUuY29udGVudD1mdW5jdGlvbigpe3JldHVybiBuZXcgci5TbGljZShyLkZyYWdtZW50LmZyb20odGhpcy5ub2RlKSwwLDApfSxlLnByb3RvdHlwZS5lcT1mdW5jdGlvbih0KXtyZXR1cm4gdCBpbnN0YW5jZW9mIGUmJnQuYW5jaG9yPT10aGlzLmFuY2hvcn0sZS5wcm90b3R5cGUudG9KU09OPWZ1bmN0aW9uKCl7cmV0dXJue3R5cGU6Im5vZGUiLGFuY2hvcjp0aGlzLmFuY2hvcn19LGUucHJvdG90eXBlLmdldEJvb2ttYXJrPWZ1bmN0aW9uKCl7cmV0dXJuIG5ldyBoKHRoaXMuYW5jaG9yKX0sZS5mcm9tSlNPTj1mdW5jdGlvbih0LG4pe2lmKCJudW1iZXIiIT10eXBlb2Ygbi5hbmNob3IpdGhyb3cgbmV3IFJhbmdlRXJyb3IoIkludmFsaWQgaW5wdXQgZm9yIE5vZGVTZWxlY3Rpb24uZnJvbUpTT04iKTtyZXR1cm4gbmV3IGUodC5yZXNvbHZlKG4uYW5jaG9yKSl9LGUuY3JlYXRlPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIG5ldyB0aGlzKHQucmVzb2x2ZShlKSl9LGUuaXNTZWxlY3RhYmxlPWZ1bmN0aW9uKHQpe3JldHVybiF0LmlzVGV4dCYmITEhPT10LnR5cGUuc3BlYy5zZWxlY3RhYmxlfSxlfShzKTt1LnByb3RvdHlwZS52aXNpYmxlPSExLHMuanNvbklEKCJub2RlIix1KTt2YXIgaD1mdW5jdGlvbih0KXt0aGlzLmFuY2hvcj10fTtoLnByb3RvdHlwZS5tYXA9ZnVuY3Rpb24odCl7dmFyIGU9dC5tYXBSZXN1bHQodGhpcy5hbmNob3IpLG49ZS5kZWxldGVkLHI9ZS5wb3M7cmV0dXJuIG4/bmV3IHAocixyKTpuZXcgaChyKX0saC5wcm90b3R5cGUucmVzb2x2ZT1mdW5jdGlvbih0KXt2YXIgZT10LnJlc29sdmUodGhpcy5hbmNob3IpLG49ZS5ub2RlQWZ0ZXI7cmV0dXJuIG4mJnUuaXNTZWxlY3RhYmxlKG4pP25ldyB1KGUpOnMubmVhcihlKX07dmFyIGY9ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZShlKXt0LmNhbGwodGhpcyxlLnJlc29sdmUoMCksZS5yZXNvbHZlKGUuY29udGVudC5zaXplKSl9cmV0dXJuIHQmJihlLl9fcHJvdG9fXz10KSxlLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKHQmJnQucHJvdG90eXBlKSxlLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1lLGUucHJvdG90eXBlLnRvSlNPTj1mdW5jdGlvbigpe3JldHVybnt0eXBlOiJhbGwifX0sZS5mcm9tSlNPTj1mdW5jdGlvbih0KXtyZXR1cm4gbmV3IGUodCl9LGUucHJvdG90eXBlLm1hcD1mdW5jdGlvbih0KXtyZXR1cm4gbmV3IGUodCl9LGUucHJvdG90eXBlLmVxPWZ1bmN0aW9uKHQpe3JldHVybiB0IGluc3RhbmNlb2YgZX0sZS5wcm90b3R5cGUuZ2V0Qm9va21hcms9ZnVuY3Rpb24oKXtyZXR1cm4gZH0sZX0ocyk7cy5qc29uSUQoImFsbCIsZik7dmFyIGQ9e21hcDpmdW5jdGlvbigpe3JldHVybiB0aGlzfSxyZXNvbHZlOmZ1bmN0aW9uKHQpe3JldHVybiBuZXcgZih0KX19O2Z1bmN0aW9uIHYodCxlLG4scixvLGkpe2lmKGUuaW5saW5lQ29udGVudClyZXR1cm4gbC5jcmVhdGUodCxuKTtmb3IodmFyIHM9ci0obz4wPzA6MSk7bz4wP3M8ZS5jaGlsZENvdW50OnM+PTA7cys9byl7dmFyIGE9ZS5jaGlsZChzKTtpZihhLmlzQXRvbSl7aWYoIWkmJnUuaXNTZWxlY3RhYmxlKGEpKXJldHVybiB1LmNyZWF0ZSh0LG4tKG88MD9hLm5vZGVTaXplOjApKX1lbHNle3ZhciBjPXYodCxhLG4rbyxvPDA/YS5jaGlsZENvdW50OjAsbyxpKTtpZihjKXJldHVybiBjfW4rPWEubm9kZVNpemUqb319ZnVuY3Rpb24gbSh0LGUsbil7dmFyIHI9dC5zdGVwcy5sZW5ndGgtMTtpZighKHI8ZSkpe3ZhciBpPXQuc3RlcHNbcl07aWYoaSBpbnN0YW5jZW9mIG8uUmVwbGFjZVN0ZXB8fGkgaW5zdGFuY2VvZiBvLlJlcGxhY2VBcm91bmRTdGVwKXt2YXIgYSxjPXQubWFwcGluZy5tYXBzW3JdO2MuZm9yRWFjaCgoZnVuY3Rpb24odCxlLG4scil7bnVsbD09YSYmKGE9cil9KSksdC5zZXRTZWxlY3Rpb24ocy5uZWFyKHQuZG9jLnJlc29sdmUoYSksbikpfX19dmFyIHk9MSxnPTIsdz00LHg9ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZShlKXt0LmNhbGwodGhpcyxlLmRvYyksdGhpcy50aW1lPURhdGUubm93KCksdGhpcy5jdXJTZWxlY3Rpb249ZS5zZWxlY3Rpb24sdGhpcy5jdXJTZWxlY3Rpb25Gb3I9MCx0aGlzLnN0b3JlZE1hcmtzPWUuc3RvcmVkTWFya3MsdGhpcy51cGRhdGVkPTAsdGhpcy5tZXRhPU9iamVjdC5jcmVhdGUobnVsbCl9dCYmKGUuX19wcm90b19fPXQpLGUucHJvdG90eXBlPU9iamVjdC5jcmVhdGUodCYmdC5wcm90b3R5cGUpLGUucHJvdG90eXBlLmNvbnN0cnVjdG9yPWU7dmFyIG49e3NlbGVjdGlvbjp7fSxzZWxlY3Rpb25TZXQ6e30sc3RvcmVkTWFya3NTZXQ6e30saXNHZW5lcmljOnt9LHNjcm9sbGVkSW50b1ZpZXc6e319O3JldHVybiBuLnNlbGVjdGlvbi5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jdXJTZWxlY3Rpb25Gb3I8dGhpcy5zdGVwcy5sZW5ndGgmJih0aGlzLmN1clNlbGVjdGlvbj10aGlzLmN1clNlbGVjdGlvbi5tYXAodGhpcy5kb2MsdGhpcy5tYXBwaW5nLnNsaWNlKHRoaXMuY3VyU2VsZWN0aW9uRm9yKSksdGhpcy5jdXJTZWxlY3Rpb25Gb3I9dGhpcy5zdGVwcy5sZW5ndGgpLHRoaXMuY3VyU2VsZWN0aW9ufSxlLnByb3RvdHlwZS5zZXRTZWxlY3Rpb249ZnVuY3Rpb24odCl7aWYodC4kZnJvbS5kb2MhPXRoaXMuZG9jKXRocm93IG5ldyBSYW5nZUVycm9yKCJTZWxlY3Rpb24gcGFzc2VkIHRvIHNldFNlbGVjdGlvbiBtdXN0IHBvaW50IGF0IHRoZSBjdXJyZW50IGRvY3VtZW50Iik7cmV0dXJuIHRoaXMuY3VyU2VsZWN0aW9uPXQsdGhpcy5jdXJTZWxlY3Rpb25Gb3I9dGhpcy5zdGVwcy5sZW5ndGgsdGhpcy51cGRhdGVkPSh0aGlzLnVwZGF0ZWR8eSkmfmcsdGhpcy5zdG9yZWRNYXJrcz1udWxsLHRoaXN9LG4uc2VsZWN0aW9uU2V0LmdldD1mdW5jdGlvbigpe3JldHVybih0aGlzLnVwZGF0ZWQmeSk+MH0sZS5wcm90b3R5cGUuc2V0U3RvcmVkTWFya3M9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuc3RvcmVkTWFya3M9dCx0aGlzLnVwZGF0ZWR8PWcsdGhpc30sZS5wcm90b3R5cGUuZW5zdXJlTWFya3M9ZnVuY3Rpb24odCl7cmV0dXJuIHIuTWFyay5zYW1lU2V0KHRoaXMuc3RvcmVkTWFya3N8fHRoaXMuc2VsZWN0aW9uLiRmcm9tLm1hcmtzKCksdCl8fHRoaXMuc2V0U3RvcmVkTWFya3ModCksdGhpc30sZS5wcm90b3R5cGUuYWRkU3RvcmVkTWFyaz1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5lbnN1cmVNYXJrcyh0LmFkZFRvU2V0KHRoaXMuc3RvcmVkTWFya3N8fHRoaXMuc2VsZWN0aW9uLiRoZWFkLm1hcmtzKCkpKX0sZS5wcm90b3R5cGUucmVtb3ZlU3RvcmVkTWFyaz1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5lbnN1cmVNYXJrcyh0LnJlbW92ZUZyb21TZXQodGhpcy5zdG9yZWRNYXJrc3x8dGhpcy5zZWxlY3Rpb24uJGhlYWQubWFya3MoKSkpfSxuLnN0b3JlZE1hcmtzU2V0LmdldD1mdW5jdGlvbigpe3JldHVybih0aGlzLnVwZGF0ZWQmZyk+MH0sZS5wcm90b3R5cGUuYWRkU3RlcD1mdW5jdGlvbihlLG4pe3QucHJvdG90eXBlLmFkZFN0ZXAuY2FsbCh0aGlzLGUsbiksdGhpcy51cGRhdGVkPXRoaXMudXBkYXRlZCZ+Zyx0aGlzLnN0b3JlZE1hcmtzPW51bGx9LGUucHJvdG90eXBlLnNldFRpbWU9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMudGltZT10LHRoaXN9LGUucHJvdG90eXBlLnJlcGxhY2VTZWxlY3Rpb249ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuc2VsZWN0aW9uLnJlcGxhY2UodGhpcyx0KSx0aGlzfSxlLnByb3RvdHlwZS5yZXBsYWNlU2VsZWN0aW9uV2l0aD1mdW5jdGlvbih0LGUpe3ZhciBuPXRoaXMuc2VsZWN0aW9uO3JldHVybiExIT09ZSYmKHQ9dC5tYXJrKHRoaXMuc3RvcmVkTWFya3N8fChuLmVtcHR5P24uJGZyb20ubWFya3MoKTpuLiRmcm9tLm1hcmtzQWNyb3NzKG4uJHRvKXx8ci5NYXJrLm5vbmUpKSksbi5yZXBsYWNlV2l0aCh0aGlzLHQpLHRoaXN9LGUucHJvdG90eXBlLmRlbGV0ZVNlbGVjdGlvbj1mdW5jdGlvbigpe3JldHVybiB0aGlzLnNlbGVjdGlvbi5yZXBsYWNlKHRoaXMpLHRoaXN9LGUucHJvdG90eXBlLmluc2VydFRleHQ9ZnVuY3Rpb24odCxlLG4pe3ZvaWQgMD09PW4mJihuPWUpO3ZhciByPXRoaXMuZG9jLnR5cGUuc2NoZW1hO2lmKG51bGw9PWUpcmV0dXJuIHQ/dGhpcy5yZXBsYWNlU2VsZWN0aW9uV2l0aChyLnRleHQodCksITApOnRoaXMuZGVsZXRlU2VsZWN0aW9uKCk7aWYoIXQpcmV0dXJuIHRoaXMuZGVsZXRlUmFuZ2UoZSxuKTt2YXIgbz10aGlzLnN0b3JlZE1hcmtzO2lmKCFvKXt2YXIgaT10aGlzLmRvYy5yZXNvbHZlKGUpO289bj09ZT9pLm1hcmtzKCk6aS5tYXJrc0Fjcm9zcyh0aGlzLmRvYy5yZXNvbHZlKG4pKX1yZXR1cm4gdGhpcy5yZXBsYWNlUmFuZ2VXaXRoKGUsbixyLnRleHQodCxvKSksdGhpcy5zZWxlY3Rpb24uZW1wdHl8fHRoaXMuc2V0U2VsZWN0aW9uKHMubmVhcih0aGlzLnNlbGVjdGlvbi4kdG8pKSx0aGlzfSxlLnByb3RvdHlwZS5zZXRNZXRhPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIHRoaXMubWV0YVsic3RyaW5nIj09dHlwZW9mIHQ/dDp0LmtleV09ZSx0aGlzfSxlLnByb3RvdHlwZS5nZXRNZXRhPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLm1ldGFbInN0cmluZyI9PXR5cGVvZiB0P3Q6dC5rZXldfSxuLmlzR2VuZXJpYy5nZXQ9ZnVuY3Rpb24oKXt2YXIgdD10aGlzO2Zvcih2YXIgZSBpbiB0Lm1ldGEpcmV0dXJuITE7cmV0dXJuITB9LGUucHJvdG90eXBlLnNjcm9sbEludG9WaWV3PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudXBkYXRlZHw9dyx0aGlzfSxuLnNjcm9sbGVkSW50b1ZpZXcuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuKHRoaXMudXBkYXRlZCZ3KT4wfSxPYmplY3QuZGVmaW5lUHJvcGVydGllcyhlLnByb3RvdHlwZSxuKSxlfShvLlRyYW5zZm9ybSk7ZnVuY3Rpb24gYih0LGUpe3JldHVybiBlJiZ0P3QuYmluZChlKTp0fXZhciBrPWZ1bmN0aW9uKHQsZSxuKXt0aGlzLm5hbWU9dCx0aGlzLmluaXQ9YihlLmluaXQsbiksdGhpcy5hcHBseT1iKGUuYXBwbHksbil9LFM9W25ldyBrKCJkb2MiLHtpbml0OmZ1bmN0aW9uKHQpe3JldHVybiB0LmRvY3x8dC5zY2hlbWEudG9wTm9kZVR5cGUuY3JlYXRlQW5kRmlsbCgpfSxhcHBseTpmdW5jdGlvbih0KXtyZXR1cm4gdC5kb2N9fSksbmV3IGsoInNlbGVjdGlvbiIse2luaXQ6ZnVuY3Rpb24odCxlKXtyZXR1cm4gdC5zZWxlY3Rpb258fHMuYXRTdGFydChlLmRvYyl9LGFwcGx5OmZ1bmN0aW9uKHQpe3JldHVybiB0LnNlbGVjdGlvbn19KSxuZXcgaygic3RvcmVkTWFya3MiLHtpbml0OmZ1bmN0aW9uKHQpe3JldHVybiB0LnN0b3JlZE1hcmtzfHxudWxsfSxhcHBseTpmdW5jdGlvbih0LGUsbixyKXtyZXR1cm4gci5zZWxlY3Rpb24uJGN1cnNvcj90LnN0b3JlZE1hcmtzOm51bGx9fSksbmV3IGsoInNjcm9sbFRvU2VsZWN0aW9uIix7aW5pdDpmdW5jdGlvbigpe3JldHVybiAwfSxhcHBseTpmdW5jdGlvbih0LGUpe3JldHVybiB0LnNjcm9sbGVkSW50b1ZpZXc/ZSsxOmV9fSldLEM9ZnVuY3Rpb24odCxlKXt2YXIgbj10aGlzO3RoaXMuc2NoZW1hPXQsdGhpcy5maWVsZHM9Uy5jb25jYXQoKSx0aGlzLnBsdWdpbnM9W10sdGhpcy5wbHVnaW5zQnlLZXk9T2JqZWN0LmNyZWF0ZShudWxsKSxlJiZlLmZvckVhY2goKGZ1bmN0aW9uKHQpe2lmKG4ucGx1Z2luc0J5S2V5W3Qua2V5XSl0aHJvdyBuZXcgUmFuZ2VFcnJvcigiQWRkaW5nIGRpZmZlcmVudCBpbnN0YW5jZXMgb2YgYSBrZXllZCBwbHVnaW4gKCIrdC5rZXkrIikiKTtuLnBsdWdpbnMucHVzaCh0KSxuLnBsdWdpbnNCeUtleVt0LmtleV09dCx0LnNwZWMuc3RhdGUmJm4uZmllbGRzLnB1c2gobmV3IGsodC5rZXksdC5zcGVjLnN0YXRlLHQpKX0pKX0sTz1mdW5jdGlvbih0KXt0aGlzLmNvbmZpZz10fSxNPXtzY2hlbWE6e30scGx1Z2luczp7fSx0cjp7fX07TS5zY2hlbWEuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY29uZmlnLnNjaGVtYX0sTS5wbHVnaW5zLmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLmNvbmZpZy5wbHVnaW5zfSxPLnByb3RvdHlwZS5hcHBseT1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5hcHBseVRyYW5zYWN0aW9uKHQpLnN0YXRlfSxPLnByb3RvdHlwZS5maWx0ZXJUcmFuc2FjdGlvbj1mdW5jdGlvbih0LGUpe3ZhciBuPXRoaXM7dm9pZCAwPT09ZSYmKGU9LTEpO2Zvcih2YXIgcj0wO3I8dGhpcy5jb25maWcucGx1Z2lucy5sZW5ndGg7cisrKWlmKHIhPWUpe3ZhciBvPW4uY29uZmlnLnBsdWdpbnNbcl07aWYoby5zcGVjLmZpbHRlclRyYW5zYWN0aW9uJiYhby5zcGVjLmZpbHRlclRyYW5zYWN0aW9uLmNhbGwobyx0LG4pKXJldHVybiExfXJldHVybiEwfSxPLnByb3RvdHlwZS5hcHBseVRyYW5zYWN0aW9uPWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXM7aWYoIXRoaXMuZmlsdGVyVHJhbnNhY3Rpb24odCkpcmV0dXJue3N0YXRlOnRoaXMsdHJhbnNhY3Rpb25zOltdfTtmb3IodmFyIG49W3RdLHI9dGhpcy5hcHBseUlubmVyKHQpLG89bnVsbDs7KXtmb3IodmFyIGk9ITEscz0wO3M8dGhpcy5jb25maWcucGx1Z2lucy5sZW5ndGg7cysrKXt2YXIgYT1lLmNvbmZpZy5wbHVnaW5zW3NdO2lmKGEuc3BlYy5hcHBlbmRUcmFuc2FjdGlvbil7dmFyIGM9bz9vW3NdLm46MCxsPW8/b1tzXS5zdGF0ZTplLHA9YzxuLmxlbmd0aCYmYS5zcGVjLmFwcGVuZFRyYW5zYWN0aW9uLmNhbGwoYSxjP24uc2xpY2UoYyk6bixsLHIpO2lmKHAmJnIuZmlsdGVyVHJhbnNhY3Rpb24ocCxzKSl7aWYocC5zZXRNZXRhKCJhcHBlbmRlZFRyYW5zYWN0aW9uIix0KSwhbyl7bz1bXTtmb3IodmFyIHU9MDt1PHRoaXMuY29uZmlnLnBsdWdpbnMubGVuZ3RoO3UrKylvLnB1c2godTxzP3tzdGF0ZTpyLG46bi5sZW5ndGh9OntzdGF0ZTplLG46MH0pfW4ucHVzaChwKSxyPXIuYXBwbHlJbm5lcihwKSxpPSEwfW8mJihvW3NdPXtzdGF0ZTpyLG46bi5sZW5ndGh9KX19aWYoIWkpcmV0dXJue3N0YXRlOnIsdHJhbnNhY3Rpb25zOm59fX0sTy5wcm90b3R5cGUuYXBwbHlJbm5lcj1mdW5jdGlvbih0KXt2YXIgZT10aGlzO2lmKCF0LmJlZm9yZS5lcSh0aGlzLmRvYykpdGhyb3cgbmV3IFJhbmdlRXJyb3IoIkFwcGx5aW5nIGEgbWlzbWF0Y2hlZCB0cmFuc2FjdGlvbiIpO2Zvcih2YXIgbj1uZXcgTyh0aGlzLmNvbmZpZykscj10aGlzLmNvbmZpZy5maWVsZHMsbz0wO288ci5sZW5ndGg7bysrKXt2YXIgaT1yW29dO25baS5uYW1lXT1pLmFwcGx5KHQsZVtpLm5hbWVdLGUsbil9Zm9yKHZhciBzPTA7czxULmxlbmd0aDtzKyspVFtzXShlLHQsbik7cmV0dXJuIG59LE0udHIuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIG5ldyB4KHRoaXMpfSxPLmNyZWF0ZT1mdW5jdGlvbih0KXtmb3IodmFyIGU9bmV3IEModC5zY2hlbWF8fHQuZG9jLnR5cGUuc2NoZW1hLHQucGx1Z2lucyksbj1uZXcgTyhlKSxyPTA7cjxlLmZpZWxkcy5sZW5ndGg7cisrKW5bZS5maWVsZHNbcl0ubmFtZV09ZS5maWVsZHNbcl0uaW5pdCh0LG4pO3JldHVybiBufSxPLnByb3RvdHlwZS5yZWNvbmZpZ3VyZT1mdW5jdGlvbih0KXtmb3IodmFyIGU9dGhpcyxuPW5ldyBDKHQuc2NoZW1hfHx0aGlzLnNjaGVtYSx0LnBsdWdpbnMpLHI9bi5maWVsZHMsbz1uZXcgTyhuKSxpPTA7aTxyLmxlbmd0aDtpKyspe3ZhciBzPXJbaV0ubmFtZTtvW3NdPWUuaGFzT3duUHJvcGVydHkocyk/ZVtzXTpyW2ldLmluaXQodCxvKX1yZXR1cm4gb30sTy5wcm90b3R5cGUudG9KU09OPWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMsbj17ZG9jOnRoaXMuZG9jLnRvSlNPTigpLHNlbGVjdGlvbjp0aGlzLnNlbGVjdGlvbi50b0pTT04oKX07aWYodGhpcy5zdG9yZWRNYXJrcyYmKG4uc3RvcmVkTWFya3M9dGhpcy5zdG9yZWRNYXJrcy5tYXAoKGZ1bmN0aW9uKHQpe3JldHVybiB0LnRvSlNPTigpfSkpKSx0JiYib2JqZWN0Ij09dHlwZW9mIHQpZm9yKHZhciByIGluIHQpe2lmKCJkb2MiPT1yfHwic2VsZWN0aW9uIj09cil0aHJvdyBuZXcgUmFuZ2VFcnJvcigiVGhlIEpTT04gZmllbGRzIGBkb2NgIGFuZCBgc2VsZWN0aW9uYCBhcmUgcmVzZXJ2ZWQiKTt2YXIgbz10W3JdLGk9by5zcGVjLnN0YXRlO2kmJmkudG9KU09OJiYobltyXT1pLnRvSlNPTi5jYWxsKG8sZVtvLmtleV0pKX1yZXR1cm4gbn0sTy5mcm9tSlNPTj1mdW5jdGlvbih0LGUsbil7aWYoIWUpdGhyb3cgbmV3IFJhbmdlRXJyb3IoIkludmFsaWQgaW5wdXQgZm9yIEVkaXRvclN0YXRlLmZyb21KU09OIik7aWYoIXQuc2NoZW1hKXRocm93IG5ldyBSYW5nZUVycm9yKCJSZXF1aXJlZCBjb25maWcgZmllbGQgJ3NjaGVtYScgbWlzc2luZyIpO3ZhciBvPW5ldyBDKHQuc2NoZW1hLHQucGx1Z2lucyksaT1uZXcgTyhvKTtyZXR1cm4gby5maWVsZHMuZm9yRWFjaCgoZnVuY3Rpb24obyl7aWYoImRvYyI9PW8ubmFtZSlpLmRvYz1yLk5vZGUuZnJvbUpTT04odC5zY2hlbWEsZS5kb2MpO2Vsc2UgaWYoInNlbGVjdGlvbiI9PW8ubmFtZSlpLnNlbGVjdGlvbj1zLmZyb21KU09OKGkuZG9jLGUuc2VsZWN0aW9uKTtlbHNlIGlmKCJzdG9yZWRNYXJrcyI9PW8ubmFtZSllLnN0b3JlZE1hcmtzJiYoaS5zdG9yZWRNYXJrcz1lLnN0b3JlZE1hcmtzLm1hcCh0LnNjaGVtYS5tYXJrRnJvbUpTT04pKTtlbHNle2lmKG4pZm9yKHZhciBhIGluIG4pe3ZhciBjPW5bYV0sbD1jLnNwZWMuc3RhdGU7aWYoYy5rZXk9PW8ubmFtZSYmbCYmbC5mcm9tSlNPTiYmT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGUsYSkpcmV0dXJuIHZvaWQoaVtvLm5hbWVdPWwuZnJvbUpTT04uY2FsbChjLHQsZVthXSxpKSl9aVtvLm5hbWVdPW8uaW5pdCh0LGkpfX0pKSxpfSxPLmFkZEFwcGx5TGlzdGVuZXI9ZnVuY3Rpb24odCl7VC5wdXNoKHQpfSxPLnJlbW92ZUFwcGx5TGlzdGVuZXI9ZnVuY3Rpb24odCl7dmFyIGU9VC5pbmRleE9mKHQpO2U+LTEmJlQuc3BsaWNlKGUsMSl9LE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKE8ucHJvdG90eXBlLE0pO3ZhciBUPVtdO2Z1bmN0aW9uIE4odCxlLG4pe2Zvcih2YXIgciBpbiB0KXt2YXIgbz10W3JdO28gaW5zdGFuY2VvZiBGdW5jdGlvbj9vPW8uYmluZChlKToiaGFuZGxlRE9NRXZlbnRzIj09ciYmKG89TihvLGUse30pKSxuW3JdPW99cmV0dXJuIG59dmFyIEU9ZnVuY3Rpb24odCl7dGhpcy5wcm9wcz17fSx0LnByb3BzJiZOKHQucHJvcHMsdGhpcyx0aGlzLnByb3BzKSx0aGlzLnNwZWM9dCx0aGlzLmtleT10LmtleT90LmtleS5rZXk6UigicGx1Z2luIil9O0UucHJvdG90eXBlLmdldFN0YXRlPWZ1bmN0aW9uKHQpe3JldHVybiB0W3RoaXMua2V5XX07dmFyIEE9T2JqZWN0LmNyZWF0ZShudWxsKTtmdW5jdGlvbiBSKHQpe3JldHVybiB0IGluIEE/dCsiJCIrICsrQVt0XTooQVt0XT0wLHQrIiQiKX12YXIgRD1mdW5jdGlvbih0KXt2b2lkIDA9PT10JiYodD0ia2V5IiksdGhpcy5rZXk9Uih0KX07RC5wcm90b3R5cGUuZ2V0PWZ1bmN0aW9uKHQpe3JldHVybiB0LmNvbmZpZy5wbHVnaW5zQnlLZXlbdGhpcy5rZXldfSxELnByb3RvdHlwZS5nZXRTdGF0ZT1mdW5jdGlvbih0KXtyZXR1cm4gdFt0aGlzLmtleV19LGUuU2VsZWN0aW9uPXMsZS5TZWxlY3Rpb25SYW5nZT1jLGUuVGV4dFNlbGVjdGlvbj1sLGUuTm9kZVNlbGVjdGlvbj11LGUuQWxsU2VsZWN0aW9uPWYsZS5UcmFuc2FjdGlvbj14LGUuRWRpdG9yU3RhdGU9TyxlLlBsdWdpbj1FLGUuUGx1Z2luS2V5PUR9LCI3MDNmIjpmdW5jdGlvbih0LGUsbil7InVzZSBzdHJpY3QiO09iamVjdC5kZWZpbmVQcm9wZXJ0eShlLCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KTt2YXIgcj1uKCI2ZmZiIiksbz1uKCI2ZjI3IiksaT1uKCJiOTIzIikscz17fTtpZigidW5kZWZpbmVkIiE9dHlwZW9mIG5hdmlnYXRvciYmInVuZGVmaW5lZCIhPXR5cGVvZiBkb2N1bWVudCl7dmFyIGE9L0VkZ2VcLyhcZCspLy5leGVjKG5hdmlnYXRvci51c2VyQWdlbnQpLGM9L01TSUUgXGQvLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudCksbD0vVHJpZGVudFwvKD86WzctOV18XGR7Mix9KVwuLipydjooXGQrKS8uZXhlYyhuYXZpZ2F0b3IudXNlckFnZW50KTtzLm1hYz0vTWFjLy50ZXN0KG5hdmlnYXRvci5wbGF0Zm9ybSk7dmFyIHA9cy5pZT0hIShjfHxsfHxhKTtzLmllX3ZlcnNpb249Yz9kb2N1bWVudC5kb2N1bWVudE1vZGV8fDY6bD8rbFsxXTphPythWzFdOm51bGwscy5nZWNrbz0hcCYmL2dlY2tvXC8oXGQrKS9pLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudCkscy5nZWNrb192ZXJzaW9uPXMuZ2Vja28mJisoL0ZpcmVmb3hcLyhcZCspLy5leGVjKG5hdmlnYXRvci51c2VyQWdlbnQpfHxbMCwwXSlbMV07dmFyIHU9IXAmJi9DaHJvbWVcLyhcZCspLy5leGVjKG5hdmlnYXRvci51c2VyQWdlbnQpO3MuY2hyb21lPSEhdSxzLmNocm9tZV92ZXJzaW9uPXUmJit1WzFdLHMuaW9zPSFwJiYvQXBwbGVXZWJLaXQvLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudCkmJi9Nb2JpbGVcL1x3Ky8udGVzdChuYXZpZ2F0b3IudXNlckFnZW50KSxzLmFuZHJvaWQ9L0FuZHJvaWQgXGQvLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudCkscy53ZWJraXQ9IXAmJiJXZWJraXRBcHBlYXJhbmNlImluIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zdHlsZSxzLnNhZmFyaT0vQXBwbGUgQ29tcHV0ZXIvLnRlc3QobmF2aWdhdG9yLnZlbmRvcikscy53ZWJraXRfdmVyc2lvbj1zLndlYmtpdCYmKygvXGJBcHBsZVdlYktpdFwvKFxkKykvLmV4ZWMobmF2aWdhdG9yLnVzZXJBZ2VudCl8fFswLDBdKVsxXX12YXIgaD1mdW5jdGlvbih0KXtmb3IodmFyIGU9MDs7ZSsrKWlmKHQ9dC5wcmV2aW91c1NpYmxpbmcsIXQpcmV0dXJuIGV9LGY9ZnVuY3Rpb24odCl7dmFyIGU9dC5wYXJlbnROb2RlO3JldHVybiBlJiYxMT09ZS5ub2RlVHlwZT9lLmhvc3Q6ZX0sZD1mdW5jdGlvbih0LGUsbil7dmFyIHI9ZG9jdW1lbnQuY3JlYXRlUmFuZ2UoKTtyZXR1cm4gci5zZXRFbmQodCxudWxsPT1uP3Qubm9kZVZhbHVlLmxlbmd0aDpuKSxyLnNldFN0YXJ0KHQsZXx8MCkscn0sdj1mdW5jdGlvbih0LGUsbixyKXtyZXR1cm4gbiYmKHkodCxlLG4sciwtMSl8fHkodCxlLG4sciwxKSl9LG09L14oaW1nfGJyfGlucHV0fHRleHRhcmVhfGhyKSQvaTtmdW5jdGlvbiB5KHQsZSxuLHIsbyl7Zm9yKDs7KXtpZih0PT1uJiZlPT1yKXJldHVybiEwO2lmKGU9PShvPDA/MDpnKHQpKSl7dmFyIGk9dC5wYXJlbnROb2RlO2lmKDEhPWkubm9kZVR5cGV8fHcodCl8fG0udGVzdCh0Lm5vZGVOYW1lKXx8ImZhbHNlIj09dC5jb250ZW50RWRpdGFibGUpcmV0dXJuITE7ZT1oKHQpKyhvPDA/MDoxKSx0PWl9ZWxzZXtpZigxIT10Lm5vZGVUeXBlKXJldHVybiExO3Q9dC5jaGlsZE5vZGVzW2UrKG88MD8tMTowKV0sZT1vPDA/Zyh0KTowfX19ZnVuY3Rpb24gZyh0KXtyZXR1cm4gMz09dC5ub2RlVHlwZT90Lm5vZGVWYWx1ZS5sZW5ndGg6dC5jaGlsZE5vZGVzLmxlbmd0aH1mdW5jdGlvbiB3KHQpe3ZhciBlPXQucG1WaWV3RGVzYztyZXR1cm4gZSYmZS5ub2RlJiZlLm5vZGUuaXNCbG9ja312YXIgeD1mdW5jdGlvbih0KXt2YXIgZT10LmlzQ29sbGFwc2VkO3JldHVybiBlJiZzLmNocm9tZSYmdC5yYW5nZUNvdW50JiYhdC5nZXRSYW5nZUF0KDApLmNvbGxhcHNlZCYmKGU9ITEpLGV9O2Z1bmN0aW9uIGIodCxlKXt2YXIgbj1kb2N1bWVudC5jcmVhdGVFdmVudCgiRXZlbnQiKTtyZXR1cm4gbi5pbml0RXZlbnQoImtleWRvd24iLCEwLCEwKSxuLmtleUNvZGU9dCxuLmtleT1uLmNvZGU9ZSxufWZ1bmN0aW9uIGsodCl7cmV0dXJue2xlZnQ6MCxyaWdodDp0LmlubmVyV2lkdGgsdG9wOjAsYm90dG9tOnQuaW5uZXJIZWlnaHR9fWZ1bmN0aW9uIFModCxlKXtyZXR1cm4ibnVtYmVyIj09dHlwZW9mIHQ/dDp0W2VdfWZ1bmN0aW9uIEModCxlLG4pe2Zvcih2YXIgcj10LnNvbWVQcm9wKCJzY3JvbGxUaHJlc2hvbGQiKXx8MCxvPXQuc29tZVByb3AoInNjcm9sbE1hcmdpbiIpfHw1LGk9dC5kb20ub3duZXJEb2N1bWVudCxzPWkuZGVmYXVsdFZpZXcsYT1ufHx0LmRvbTs7YT1mKGEpKXtpZighYSlicmVhaztpZigxPT1hLm5vZGVUeXBlKXt2YXIgYz1hPT1pLmJvZHl8fDEhPWEubm9kZVR5cGUsbD1jP2socyk6YS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKSxwPTAsdT0wO2lmKGUudG9wPGwudG9wK1MociwidG9wIik/dT0tKGwudG9wLWUudG9wK1MobywidG9wIikpOmUuYm90dG9tPmwuYm90dG9tLVMociwiYm90dG9tIikmJih1PWUuYm90dG9tLWwuYm90dG9tK1MobywiYm90dG9tIikpLGUubGVmdDxsLmxlZnQrUyhyLCJsZWZ0Iik/cD0tKGwubGVmdC1lLmxlZnQrUyhvLCJsZWZ0IikpOmUucmlnaHQ+bC5yaWdodC1TKHIsInJpZ2h0IikmJihwPWUucmlnaHQtbC5yaWdodCtTKG8sInJpZ2h0IikpLChwfHx1KSYmKGM/cy5zY3JvbGxCeShwLHUpOih1JiYoYS5zY3JvbGxUb3ArPXUpLHAmJihhLnNjcm9sbExlZnQrPXApKSksYylicmVha319fWZ1bmN0aW9uIE8odCl7Zm9yKHZhciBlLG4scj10LmRvbS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKSxvPU1hdGgubWF4KDAsci50b3ApLGk9dC5kb20ub3duZXJEb2N1bWVudCxzPShyLmxlZnQrci5yaWdodCkvMixhPW8rMTthPE1hdGgubWluKGlubmVySGVpZ2h0LHIuYm90dG9tKTthKz01KXt2YXIgYz10LnJvb3QuZWxlbWVudEZyb21Qb2ludChzLGEpO2lmKGMhPXQuZG9tJiZ0LmRvbS5jb250YWlucyhjKSl7dmFyIGw9Yy5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtpZihsLnRvcD49by0yMCl7ZT1jLG49bC50b3A7YnJlYWt9fX1mb3IodmFyIHA9W10sdT10LmRvbTt1O3U9Zih1KSlpZihwLnB1c2goe2RvbTp1LHRvcDp1LnNjcm9sbFRvcCxsZWZ0OnUuc2Nyb2xsTGVmdH0pLHU9PWkuYm9keSlicmVhaztyZXR1cm57cmVmRE9NOmUscmVmVG9wOm4sc3RhY2s6cH19ZnVuY3Rpb24gTSh0KXtmb3IodmFyIGU9dC5yZWZET00sbj10LnJlZlRvcCxyPXQuc3RhY2ssbz1lP2UuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkudG9wOjAsaT0wPT1vPzA6by1uLHM9MDtzPHIubGVuZ3RoO3MrKyl7dmFyIGE9cltzXSxjPWEuZG9tLGw9YS50b3AscD1hLmxlZnQ7Yy5zY3JvbGxUb3AhPWwraSYmKGMuc2Nyb2xsVG9wPWwraSksYy5zY3JvbGxMZWZ0IT1wJiYoYy5zY3JvbGxMZWZ0PXApfX1mdW5jdGlvbiBUKHQsZSl7Zm9yKHZhciBuLHIsbz0yZTgsaT0wLHM9ZS50b3AsYT1lLnRvcCxjPXQuZmlyc3RDaGlsZCxsPTA7YztjPWMubmV4dFNpYmxpbmcsbCsrKXt2YXIgcD12b2lkIDA7aWYoMT09Yy5ub2RlVHlwZSlwPWMuZ2V0Q2xpZW50UmVjdHMoKTtlbHNle2lmKDMhPWMubm9kZVR5cGUpY29udGludWU7cD1kKGMpLmdldENsaWVudFJlY3RzKCl9Zm9yKHZhciB1PTA7dTxwLmxlbmd0aDt1Kyspe3ZhciBoPXBbdV07aWYoaC50b3A8PXMmJmguYm90dG9tPj1hKXtzPU1hdGgubWF4KGguYm90dG9tLHMpLGE9TWF0aC5taW4oaC50b3AsYSk7dmFyIGY9aC5sZWZ0PmUubGVmdD9oLmxlZnQtZS5sZWZ0OmgucmlnaHQ8ZS5sZWZ0P2UubGVmdC1oLnJpZ2h0OjA7aWYoZjxvKXtuPWMsbz1mLHI9ZiYmMz09bi5ub2RlVHlwZT97bGVmdDpoLnJpZ2h0PGUubGVmdD9oLnJpZ2h0OmgubGVmdCx0b3A6ZS50b3B9OmUsMT09Yy5ub2RlVHlwZSYmZiYmKGk9bCsoZS5sZWZ0Pj0oaC5sZWZ0K2gucmlnaHQpLzI/MTowKSk7Y29udGludWV9fSFuJiYoZS5sZWZ0Pj1oLnJpZ2h0JiZlLnRvcD49aC50b3B8fGUubGVmdD49aC5sZWZ0JiZlLnRvcD49aC5ib3R0b20pJiYoaT1sKzEpfX1yZXR1cm4gbiYmMz09bi5ub2RlVHlwZT9OKG4scik6IW58fG8mJjE9PW4ubm9kZVR5cGU/e25vZGU6dCxvZmZzZXQ6aX06VChuLHIpfWZ1bmN0aW9uIE4odCxlKXtmb3IodmFyIG49dC5ub2RlVmFsdWUubGVuZ3RoLHI9ZG9jdW1lbnQuY3JlYXRlUmFuZ2UoKSxvPTA7bzxuO28rKyl7ci5zZXRFbmQodCxvKzEpLHIuc2V0U3RhcnQodCxvKTt2YXIgaT1JKHIsMSk7aWYoaS50b3AhPWkuYm90dG9tJiZFKGUsaSkpcmV0dXJue25vZGU6dCxvZmZzZXQ6bysoZS5sZWZ0Pj0oaS5sZWZ0K2kucmlnaHQpLzI/MTowKX19cmV0dXJue25vZGU6dCxvZmZzZXQ6MH19ZnVuY3Rpb24gRSh0LGUpe3JldHVybiB0LmxlZnQ+PWUubGVmdC0xJiZ0LmxlZnQ8PWUucmlnaHQrMSYmdC50b3A+PWUudG9wLTEmJnQudG9wPD1lLmJvdHRvbSsxfWZ1bmN0aW9uIEEodCxlKXt2YXIgbj10LnBhcmVudE5vZGU7cmV0dXJuIG4mJi9ebGkkL2kudGVzdChuLm5vZGVOYW1lKSYmZS5sZWZ0PHQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkubGVmdD9uOnR9ZnVuY3Rpb24gUih0LGUsbil7dmFyIHI9VChlLG4pLG89ci5ub2RlLGk9ci5vZmZzZXQscz0tMTtpZigxPT1vLm5vZGVUeXBlJiYhby5maXJzdENoaWxkKXt2YXIgYT1vLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO3M9YS5sZWZ0IT1hLnJpZ2h0JiZuLmxlZnQ+KGEubGVmdCthLnJpZ2h0KS8yPzE6LTF9cmV0dXJuIHQuZG9jVmlldy5wb3NGcm9tRE9NKG8saSxzKX1mdW5jdGlvbiBEKHQsZSxuLHIpe2Zvcih2YXIgbz0tMSxpPWU7Oyl7aWYoaT09dC5kb20pYnJlYWs7dmFyIHM9dC5kb2NWaWV3Lm5lYXJlc3REZXNjKGksITApO2lmKCFzKXJldHVybiBudWxsO2lmKHMubm9kZS5pc0Jsb2NrJiZzLnBhcmVudCl7dmFyIGE9cy5kb20uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7aWYoYS5sZWZ0PnIubGVmdHx8YS50b3A+ci50b3Apbz1zLnBvc0JlZm9yZTtlbHNle2lmKCEoYS5yaWdodDxyLmxlZnR8fGEuYm90dG9tPHIudG9wKSlicmVhaztvPXMucG9zQWZ0ZXJ9fWk9cy5kb20ucGFyZW50Tm9kZX1yZXR1cm4gbz4tMT9vOnQuZG9jVmlldy5wb3NGcm9tRE9NKGUsbil9ZnVuY3Rpb24geih0LGUsbil7dmFyIHI9dC5jaGlsZE5vZGVzLmxlbmd0aDtpZihyJiZuLnRvcDxuLmJvdHRvbSlmb3IodmFyIG89TWF0aC5tYXgoMCxNYXRoLm1pbihyLTEsTWF0aC5mbG9vcihyKihlLnRvcC1uLnRvcCkvKG4uYm90dG9tLW4udG9wKSktMikpLGk9bzs7KXt2YXIgcz10LmNoaWxkTm9kZXNbaV07aWYoMT09cy5ub2RlVHlwZSlmb3IodmFyIGE9cy5nZXRDbGllbnRSZWN0cygpLGM9MDtjPGEubGVuZ3RoO2MrKyl7dmFyIGw9YVtjXTtpZihFKGUsbCkpcmV0dXJuIHoocyxlLGwpfWlmKChpPShpKzEpJXIpPT1vKWJyZWFrfXJldHVybiB0fWZ1bmN0aW9uIFAodCxlKXt2YXIgbixyLG89dC5yb290O2lmKG8uY2FyZXRQb3NpdGlvbkZyb21Qb2ludCl7dmFyIGkscz1vLmNhcmV0UG9zaXRpb25Gcm9tUG9pbnQoZS5sZWZ0LGUudG9wKTtpZihzKWk9cyxuPWkub2Zmc2V0Tm9kZSxyPWkub2Zmc2V0fWlmKCFuJiZvLmNhcmV0UmFuZ2VGcm9tUG9pbnQpe3ZhciBhLGM9by5jYXJldFJhbmdlRnJvbVBvaW50KGUubGVmdCxlLnRvcCk7aWYoYylhPWMsbj1hLnN0YXJ0Q29udGFpbmVyLHI9YS5zdGFydE9mZnNldH12YXIgbCxwPW8uZWxlbWVudEZyb21Qb2ludChlLmxlZnQsZS50b3ArMSk7aWYoIXB8fCF0LmRvbS5jb250YWlucygxIT1wLm5vZGVUeXBlP3AucGFyZW50Tm9kZTpwKSl7dmFyIHU9dC5kb20uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7aWYoIUUoZSx1KSlyZXR1cm4gbnVsbDtpZihwPXoodC5kb20sZSx1KSwhcClyZXR1cm4gbnVsbH1wPUEocCxlKSxuJiYoMT09bi5ub2RlVHlwZSYmKHI9TWF0aC5taW4ocixuLmNoaWxkTm9kZXMubGVuZ3RoKSksbj09dC5kb20mJnI9PW4uY2hpbGROb2Rlcy5sZW5ndGgtMSYmMT09bi5sYXN0Q2hpbGQubm9kZVR5cGUmJmUudG9wPm4ubGFzdENoaWxkLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLmJvdHRvbT9sPXQuc3RhdGUuZG9jLmNvbnRlbnQuc2l6ZTowIT1yJiYxPT1uLm5vZGVUeXBlJiYiQlIiPT1uLmNoaWxkTm9kZXNbci0xXS5ub2RlTmFtZXx8KGw9RCh0LG4scixlKSkpLG51bGw9PWwmJihsPVIodCxwLGUpKTt2YXIgaD10LmRvY1ZpZXcubmVhcmVzdERlc2MocCwhMCk7cmV0dXJue3BvczpsLGluc2lkZTpoP2gucG9zQXRTdGFydC1oLmJvcmRlcjotMX19ZnVuY3Rpb24gSSh0LGUpe3ZhciBuPXQuZ2V0Q2xpZW50UmVjdHMoKTtyZXR1cm4gbi5sZW5ndGg/bltlPDA/MDpuLmxlbmd0aC0xXTp0LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpfWZ1bmN0aW9uIF8odCxlKXt2YXIgbj10LmRvY1ZpZXcuZG9tRnJvbVBvcyhlKSxyPW4ubm9kZSxvPW4ub2Zmc2V0O2lmKDM9PXIubm9kZVR5cGUmJihzLmNocm9tZXx8cy5nZWNrbykpe3ZhciBpPUkoZChyLG8sbyksMCk7aWYocy5nZWNrbyYmbyYmL1xzLy50ZXN0KHIubm9kZVZhbHVlW28tMV0pJiZvPHIubm9kZVZhbHVlLmxlbmd0aCl7dmFyIGE9SShkKHIsby0xLG8tMSksLTEpO2lmKE1hdGguYWJzKGEubGVmdC1pLmxlZnQpPDEmJmEudG9wPT1pLnRvcCl7dmFyIGM9SShkKHIsbyxvKzEpLC0xKTtyZXR1cm4gRihjLGMubGVmdDxhLmxlZnQpfX1yZXR1cm4gaX1pZigxPT1yLm5vZGVUeXBlJiYhdC5zdGF0ZS5kb2MucmVzb2x2ZShlKS5wYXJlbnQuaW5saW5lQ29udGVudCl7dmFyIGwscD0hMDtpZihvPHIuY2hpbGROb2Rlcy5sZW5ndGgpe3ZhciB1PXIuY2hpbGROb2Rlc1tvXTsxPT11Lm5vZGVUeXBlJiYobD11LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpKX1pZighbCYmbyl7dmFyIGg9ci5jaGlsZE5vZGVzW28tMV07MT09aC5ub2RlVHlwZSYmKGw9aC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKSxwPSExKX1yZXR1cm4gQihsfHxyLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLHApfWZvcih2YXIgZj0tMTtmPDI7Zis9MilpZihmPDAmJm8pe3ZhciB2PXZvaWQgMCxtPTM9PXIubm9kZVR5cGU/ZChyLG8tMSxvKTozPT0odj1yLmNoaWxkTm9kZXNbby0xXSkubm9kZVR5cGU/ZCh2KToxPT12Lm5vZGVUeXBlJiYiQlIiIT12Lm5vZGVOYW1lP3Y6bnVsbDtpZihtKXt2YXIgeT1JKG0sMSk7aWYoeS50b3A8eS5ib3R0b20pcmV0dXJuIEYoeSwhMSl9fWVsc2UgaWYoZj4wJiZvPGcocikpe3ZhciB3PXZvaWQgMCx4PTM9PXIubm9kZVR5cGU/ZChyLG8sbysxKTozPT0odz1yLmNoaWxkTm9kZXNbb10pLm5vZGVUeXBlP2Qodyk6MT09dy5ub2RlVHlwZT93Om51bGw7aWYoeCl7dmFyIGI9SSh4LC0xKTtpZihiLnRvcDxiLmJvdHRvbSlyZXR1cm4gRihiLCEwKX19cmV0dXJuIEYoSSgzPT1yLm5vZGVUeXBlP2Qocik6ciwwKSwhMSl9ZnVuY3Rpb24gRih0LGUpe2lmKDA9PXQud2lkdGgpcmV0dXJuIHQ7dmFyIG49ZT90LmxlZnQ6dC5yaWdodDtyZXR1cm57dG9wOnQudG9wLGJvdHRvbTp0LmJvdHRvbSxsZWZ0Om4scmlnaHQ6bn19ZnVuY3Rpb24gQih0LGUpe2lmKDA9PXQuaGVpZ2h0KXJldHVybiB0O3ZhciBuPWU/dC50b3A6dC5ib3R0b207cmV0dXJue3RvcDpuLGJvdHRvbTpuLGxlZnQ6dC5sZWZ0LHJpZ2h0OnQucmlnaHR9fWZ1bmN0aW9uIGoodCxlLG4pe3ZhciByPXQuc3RhdGUsbz10LnJvb3QuYWN0aXZlRWxlbWVudDtyIT1lJiZ0LnVwZGF0ZVN0YXRlKGUpLG8hPXQuZG9tJiZ0LmZvY3VzKCk7dHJ5e3JldHVybiBuKCl9ZmluYWxseXtyIT1lJiZ0LnVwZGF0ZVN0YXRlKHIpLG8hPXQuZG9tJiZvLmZvY3VzKCl9fWZ1bmN0aW9uICQodCxlLG4pe3ZhciByPWUuc2VsZWN0aW9uLG89InVwIj09bj9yLiRhbmNob3IubWluKHIuJGhlYWQpOnIuJGFuY2hvci5tYXgoci4kaGVhZCk7cmV0dXJuIGoodCxlLChmdW5jdGlvbigpe2Zvcih2YXIgZT10LmRvY1ZpZXcuZG9tRnJvbVBvcyhvLnBvcykscj1lLm5vZGU7Oyl7dmFyIGk9dC5kb2NWaWV3Lm5lYXJlc3REZXNjKHIsITApO2lmKCFpKWJyZWFrO2lmKGkubm9kZS5pc0Jsb2NrKXtyPWkuZG9tO2JyZWFrfXI9aS5kb20ucGFyZW50Tm9kZX1mb3IodmFyIHM9Xyh0LG8ucG9zKSxhPXIuZmlyc3RDaGlsZDthO2E9YS5uZXh0U2libGluZyl7dmFyIGM9dm9pZCAwO2lmKDE9PWEubm9kZVR5cGUpYz1hLmdldENsaWVudFJlY3RzKCk7ZWxzZXtpZigzIT1hLm5vZGVUeXBlKWNvbnRpbnVlO2M9ZChhLDAsYS5ub2RlVmFsdWUubGVuZ3RoKS5nZXRDbGllbnRSZWN0cygpfWZvcih2YXIgbD0wO2w8Yy5sZW5ndGg7bCsrKXt2YXIgcD1jW2xdO2lmKHAuYm90dG9tPnAudG9wJiYoInVwIj09bj9wLmJvdHRvbTxzLnRvcCsxOnAudG9wPnMuYm90dG9tLTEpKXJldHVybiExfX1yZXR1cm4hMH0pKX12YXIgVj0vW1x1MDU5MC1cdTA4YWNdLztmdW5jdGlvbiBMKHQsZSxuKXt2YXIgcj1lLnNlbGVjdGlvbixvPXIuJGhlYWQ7aWYoIW8ucGFyZW50LmlzVGV4dGJsb2NrKXJldHVybiExO3ZhciBpPW8ucGFyZW50T2Zmc2V0LHM9IWksYT1pPT1vLnBhcmVudC5jb250ZW50LnNpemUsYz1nZXRTZWxlY3Rpb24oKTtyZXR1cm4gVi50ZXN0KG8ucGFyZW50LnRleHRDb250ZW50KSYmYy5tb2RpZnk/aih0LGUsKGZ1bmN0aW9uKCl7dmFyIGU9Yy5nZXRSYW5nZUF0KDApLHI9Yy5mb2N1c05vZGUsaT1jLmZvY3VzT2Zmc2V0LHM9Yy5jYXJldEJpZGlMZXZlbDtjLm1vZGlmeSgibW92ZSIsbiwiY2hhcmFjdGVyIik7dmFyIGE9by5kZXB0aD90LmRvY1ZpZXcuZG9tQWZ0ZXJQb3Moby5iZWZvcmUoKSk6dC5kb20sbD0hYS5jb250YWlucygxPT1jLmZvY3VzTm9kZS5ub2RlVHlwZT9jLmZvY3VzTm9kZTpjLmZvY3VzTm9kZS5wYXJlbnROb2RlKXx8cj09Yy5mb2N1c05vZGUmJmk9PWMuZm9jdXNPZmZzZXQ7cmV0dXJuIGMucmVtb3ZlQWxsUmFuZ2VzKCksYy5hZGRSYW5nZShlKSxudWxsIT1zJiYoYy5jYXJldEJpZGlMZXZlbD1zKSxsfSkpOiJsZWZ0Ij09bnx8ImJhY2t3YXJkIj09bj9zOmF9dmFyIEo9bnVsbCxxPW51bGwsVz0hMTtmdW5jdGlvbiBIKHQsZSxuKXtyZXR1cm4gSj09ZSYmcT09bj9XOihKPWUscT1uLFc9InVwIj09bnx8ImRvd24iPT1uPyQodCxlLG4pOkwodCxlLG4pKX12YXIgSz0wLFU9MSxHPTIsWD0zLFk9ZnVuY3Rpb24odCxlLG4scil7dGhpcy5wYXJlbnQ9dCx0aGlzLmNoaWxkcmVuPWUsdGhpcy5kb209bixuLnBtVmlld0Rlc2M9dGhpcyx0aGlzLmNvbnRlbnRET009cix0aGlzLmRpcnR5PUt9LFE9e2JlZm9yZVBvc2l0aW9uOnt9LHNpemU6e30sYm9yZGVyOnt9LHBvc0JlZm9yZTp7fSxwb3NBdFN0YXJ0Ont9LHBvc0FmdGVyOnt9LHBvc0F0RW5kOnt9LGNvbnRlbnRMb3N0Ont9fTtZLnByb3RvdHlwZS5tYXRjaGVzV2lkZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuITF9LFkucHJvdG90eXBlLm1hdGNoZXNNYXJrPWZ1bmN0aW9uKCl7cmV0dXJuITF9LFkucHJvdG90eXBlLm1hdGNoZXNOb2RlPWZ1bmN0aW9uKCl7cmV0dXJuITF9LFkucHJvdG90eXBlLm1hdGNoZXNIYWNrPWZ1bmN0aW9uKCl7cmV0dXJuITF9LFEuYmVmb3JlUG9zaXRpb24uZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuITF9LFkucHJvdG90eXBlLnBhcnNlUnVsZT1mdW5jdGlvbigpe3JldHVybiBudWxsfSxZLnByb3RvdHlwZS5zdG9wRXZlbnQ9ZnVuY3Rpb24oKXtyZXR1cm4hMX0sUS5zaXplLmdldD1mdW5jdGlvbigpe2Zvcih2YXIgdD10aGlzLGU9MCxuPTA7bjx0aGlzLmNoaWxkcmVuLmxlbmd0aDtuKyspZSs9dC5jaGlsZHJlbltuXS5zaXplO3JldHVybiBlfSxRLmJvcmRlci5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gMH0sWS5wcm90b3R5cGUuZGVzdHJveT1mdW5jdGlvbigpe3ZhciB0PXRoaXM7dGhpcy5wYXJlbnQ9bnVsbCx0aGlzLmRvbS5wbVZpZXdEZXNjPT10aGlzJiYodGhpcy5kb20ucG1WaWV3RGVzYz1udWxsKTtmb3IodmFyIGU9MDtlPHRoaXMuY2hpbGRyZW4ubGVuZ3RoO2UrKyl0LmNoaWxkcmVuW2VdLmRlc3Ryb3koKX0sWS5wcm90b3R5cGUucG9zQmVmb3JlQ2hpbGQ9ZnVuY3Rpb24odCl7Zm9yKHZhciBlPXRoaXMsbj0wLHI9dGhpcy5wb3NBdFN0YXJ0O248dGhpcy5jaGlsZHJlbi5sZW5ndGg7bisrKXt2YXIgbz1lLmNoaWxkcmVuW25dO2lmKG89PXQpcmV0dXJuIHI7cis9by5zaXplfX0sUS5wb3NCZWZvcmUuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucGFyZW50LnBvc0JlZm9yZUNoaWxkKHRoaXMpfSxRLnBvc0F0U3RhcnQuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucGFyZW50P3RoaXMucGFyZW50LnBvc0JlZm9yZUNoaWxkKHRoaXMpK3RoaXMuYm9yZGVyOjB9LFEucG9zQWZ0ZXIuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucG9zQmVmb3JlK3RoaXMuc2l6ZX0sUS5wb3NBdEVuZC5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5wb3NBdFN0YXJ0K3RoaXMuc2l6ZS0yKnRoaXMuYm9yZGVyfSxZLnByb3RvdHlwZS5sb2NhbFBvc0Zyb21ET009ZnVuY3Rpb24odCxlLG4pe3ZhciByLG89dGhpcztpZih0aGlzLmNvbnRlbnRET00mJnRoaXMuY29udGVudERPTS5jb250YWlucygxPT10Lm5vZGVUeXBlP3Q6dC5wYXJlbnROb2RlKSl7aWYobjwwKXt2YXIgaSxzO2lmKHQ9PXRoaXMuY29udGVudERPTSlpPXQuY2hpbGROb2Rlc1tlLTFdO2Vsc2V7d2hpbGUodC5wYXJlbnROb2RlIT10aGlzLmNvbnRlbnRET00pdD10LnBhcmVudE5vZGU7aT10LnByZXZpb3VzU2libGluZ313aGlsZShpJiYoIShzPWkucG1WaWV3RGVzYyl8fHMucGFyZW50IT10aGlzKSlpPWkucHJldmlvdXNTaWJsaW5nO3JldHVybiBpP3RoaXMucG9zQmVmb3JlQ2hpbGQocykrcy5zaXplOnRoaXMucG9zQXRTdGFydH12YXIgYSxjO2lmKHQ9PXRoaXMuY29udGVudERPTSlhPXQuY2hpbGROb2Rlc1tlXTtlbHNle3doaWxlKHQucGFyZW50Tm9kZSE9dGhpcy5jb250ZW50RE9NKXQ9dC5wYXJlbnROb2RlO2E9dC5uZXh0U2libGluZ313aGlsZShhJiYoIShjPWEucG1WaWV3RGVzYyl8fGMucGFyZW50IT10aGlzKSlhPWEubmV4dFNpYmxpbmc7cmV0dXJuIGE/dGhpcy5wb3NCZWZvcmVDaGlsZChjKTp0aGlzLnBvc0F0RW5kfWlmKHRoaXMuY29udGVudERPTSYmdGhpcy5jb250ZW50RE9NIT10aGlzLmRvbSYmdGhpcy5kb20uY29udGFpbnModGhpcy5jb250ZW50RE9NKSlyPTImdC5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbih0aGlzLmNvbnRlbnRET00pO2Vsc2UgaWYodGhpcy5kb20uZmlyc3RDaGlsZCl7aWYoMD09ZSlmb3IodmFyIGw9dDs7bD1sLnBhcmVudE5vZGUpe2lmKGw9PW8uZG9tKXtyPSExO2JyZWFrfWlmKGwucGFyZW50Tm9kZS5maXJzdENoaWxkIT1sKWJyZWFrfWlmKG51bGw9PXImJmU9PXQuY2hpbGROb2Rlcy5sZW5ndGgpZm9yKHZhciBwPXQ7O3A9cC5wYXJlbnROb2RlKXtpZihwPT1vLmRvbSl7cj0hMDticmVha31pZihwLnBhcmVudE5vZGUubGFzdENoaWxkIT1wKWJyZWFrfX1yZXR1cm4obnVsbD09cj9uPjA6cik/dGhpcy5wb3NBdEVuZDp0aGlzLnBvc0F0U3RhcnR9LFkucHJvdG90eXBlLm5lYXJlc3REZXNjPWZ1bmN0aW9uKHQsZSl7Zm9yKHZhciBuPXRoaXMscj0hMCxvPXQ7bztvPW8ucGFyZW50Tm9kZSl7dmFyIGk9bi5nZXREZXNjKG8pO2lmKGkmJighZXx8aS5ub2RlKSl7aWYoIXJ8fCFpLm5vZGVET018fCgxPT1pLm5vZGVET00ubm9kZVR5cGU/aS5ub2RlRE9NLmNvbnRhaW5zKHQpOmkubm9kZURPTT09dCkpcmV0dXJuIGk7cj0hMX19fSxZLnByb3RvdHlwZS5nZXREZXNjPWZ1bmN0aW9uKHQpe2Zvcih2YXIgZT10aGlzLG49dC5wbVZpZXdEZXNjLHI9bjtyO3I9ci5wYXJlbnQpaWYocj09ZSlyZXR1cm4gbn0sWS5wcm90b3R5cGUucG9zRnJvbURPTT1mdW5jdGlvbih0LGUsbil7Zm9yKHZhciByPXRoaXMsbz10OztvPW8ucGFyZW50Tm9kZSl7dmFyIGk9ci5nZXREZXNjKG8pO2lmKGkpcmV0dXJuIGkubG9jYWxQb3NGcm9tRE9NKHQsZSxuKX19LFkucHJvdG90eXBlLmRlc2NBdD1mdW5jdGlvbih0KXtmb3IodmFyIGU9dGhpcyxuPTAscj0wO248dGhpcy5jaGlsZHJlbi5sZW5ndGg7bisrKXt2YXIgbz1lLmNoaWxkcmVuW25dLGk9citvLnNpemU7aWYocj09dCYmaSE9cil7d2hpbGUoIW8uYm9yZGVyJiZvLmNoaWxkcmVuLmxlbmd0aClvPW8uY2hpbGRyZW5bMF07cmV0dXJuIG99aWYodDxpKXJldHVybiBvLmRlc2NBdCh0LXItby5ib3JkZXIpO3I9aX19LFkucHJvdG90eXBlLmRvbUZyb21Qb3M9ZnVuY3Rpb24odCl7dmFyIGU9dGhpcztpZighdGhpcy5jb250ZW50RE9NKXJldHVybntub2RlOnRoaXMuZG9tLG9mZnNldDowfTtmb3IodmFyIG49MCxyPTA7O3IrKyl7aWYobj09dCl7d2hpbGUocjx0aGlzLmNoaWxkcmVuLmxlbmd0aCYmKHRoaXMuY2hpbGRyZW5bcl0uYmVmb3JlUG9zaXRpb258fHRoaXMuY2hpbGRyZW5bcl0uZG9tLnBhcmVudE5vZGUhPXRoaXMuY29udGVudERPTSkpcisrO3JldHVybntub2RlOmUuY29udGVudERPTSxvZmZzZXQ6cj09ZS5jaGlsZHJlbi5sZW5ndGg/ZS5jb250ZW50RE9NLmNoaWxkTm9kZXMubGVuZ3RoOmgoZS5jaGlsZHJlbltyXS5kb20pfX1pZihyPT1lLmNoaWxkcmVuLmxlbmd0aCl0aHJvdyBuZXcgRXJyb3IoIkludmFsaWQgcG9zaXRpb24gIit0KTt2YXIgbz1lLmNoaWxkcmVuW3JdLGk9bitvLnNpemU7aWYodDxpKXJldHVybiBvLmRvbUZyb21Qb3ModC1uLW8uYm9yZGVyKTtuPWl9fSxZLnByb3RvdHlwZS5wYXJzZVJhbmdlPWZ1bmN0aW9uKHQsZSxuKXt2YXIgcj10aGlzO2lmKHZvaWQgMD09PW4mJihuPTApLDA9PXRoaXMuY2hpbGRyZW4ubGVuZ3RoKXJldHVybntub2RlOnRoaXMuY29udGVudERPTSxmcm9tOnQsdG86ZSxmcm9tT2Zmc2V0OjAsdG9PZmZzZXQ6dGhpcy5jb250ZW50RE9NLmNoaWxkTm9kZXMubGVuZ3RofTtmb3IodmFyIG89LTEsaT0tMSxzPW4sYT0wOzthKyspe3ZhciBjPXIuY2hpbGRyZW5bYV0sbD1zK2Muc2l6ZTtpZigtMT09byYmdDw9bCl7dmFyIHA9cytjLmJvcmRlcjtpZih0Pj1wJiZlPD1sLWMuYm9yZGVyJiZjLm5vZGUmJmMuY29udGVudERPTSYmci5jb250ZW50RE9NLmNvbnRhaW5zKGMuY29udGVudERPTSkpcmV0dXJuIGMucGFyc2VSYW5nZSh0LGUscCk7dD1zO2Zvcih2YXIgdT1hO3U+MDt1LS0pe3ZhciBmPXIuY2hpbGRyZW5bdS0xXTtpZihmLnNpemUmJmYuZG9tLnBhcmVudE5vZGU9PXIuY29udGVudERPTSYmIWYuZW1wdHlDaGlsZEF0KDEpKXtvPWgoZi5kb20pKzE7YnJlYWt9dC09Zi5zaXplfS0xPT1vJiYobz0wKX1pZihvPi0xJiZlPD1sKXtlPWw7Zm9yKHZhciBkPWErMTtkPHRoaXMuY2hpbGRyZW4ubGVuZ3RoO2QrKyl7dmFyIHY9ci5jaGlsZHJlbltkXTtpZih2LnNpemUmJnYuZG9tLnBhcmVudE5vZGU9PXIuY29udGVudERPTSYmIXYuZW1wdHlDaGlsZEF0KC0xKSl7aT1oKHYuZG9tKTticmVha31lKz12LnNpemV9LTE9PWkmJihpPXIuY29udGVudERPTS5jaGlsZE5vZGVzLmxlbmd0aCk7YnJlYWt9cz1sfXJldHVybntub2RlOnRoaXMuY29udGVudERPTSxmcm9tOnQsdG86ZSxmcm9tT2Zmc2V0Om8sdG9PZmZzZXQ6aX19LFkucHJvdG90eXBlLmVtcHR5Q2hpbGRBdD1mdW5jdGlvbih0KXtpZih0aGlzLmJvcmRlcnx8IXRoaXMuY29udGVudERPTXx8IXRoaXMuY2hpbGRyZW4ubGVuZ3RoKXJldHVybiExO3ZhciBlPXRoaXMuY2hpbGRyZW5bdDwwPzA6dGhpcy5jaGlsZHJlbi5sZW5ndGgtMV07cmV0dXJuIDA9PWUuc2l6ZXx8ZS5lbXB0eUNoaWxkQXQodCl9LFkucHJvdG90eXBlLmRvbUFmdGVyUG9zPWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMuZG9tRnJvbVBvcyh0KSxuPWUubm9kZSxyPWUub2Zmc2V0O2lmKDEhPW4ubm9kZVR5cGV8fHI9PW4uY2hpbGROb2Rlcy5sZW5ndGgpdGhyb3cgbmV3IFJhbmdlRXJyb3IoIk5vIG5vZGUgYWZ0ZXIgcG9zICIrdCk7cmV0dXJuIG4uY2hpbGROb2Rlc1tyXX0sWS5wcm90b3R5cGUuc2V0U2VsZWN0aW9uPWZ1bmN0aW9uKHQsZSxuLHIpe2Zvcih2YXIgbz10aGlzLGk9TWF0aC5taW4odCxlKSxzPU1hdGgubWF4KHQsZSksYT0wLGM9MDthPHRoaXMuY2hpbGRyZW4ubGVuZ3RoO2ErKyl7dmFyIGw9by5jaGlsZHJlblthXSxwPWMrbC5zaXplO2lmKGk+YyYmczxwKXJldHVybiBsLnNldFNlbGVjdGlvbih0LWMtbC5ib3JkZXIsZS1jLWwuYm9yZGVyLG4scik7Yz1wfXZhciB1PXRoaXMuZG9tRnJvbVBvcyh0KSxoPXRoaXMuZG9tRnJvbVBvcyhlKSxmPW4uZ2V0U2VsZWN0aW9uKCksZD1kb2N1bWVudC5jcmVhdGVSYW5nZSgpO2lmKHJ8fCF2KHUubm9kZSx1Lm9mZnNldCxmLmFuY2hvck5vZGUsZi5hbmNob3JPZmZzZXQpfHwhdihoLm5vZGUsaC5vZmZzZXQsZi5mb2N1c05vZGUsZi5mb2N1c09mZnNldCkpe2lmKGYuZXh0ZW5kKWQuc2V0RW5kKHUubm9kZSx1Lm9mZnNldCksZC5jb2xsYXBzZSghMSk7ZWxzZXtpZih0PmUpe3ZhciBtPXU7dT1oLGg9bX1kLnNldEVuZChoLm5vZGUsaC5vZmZzZXQpLGQuc2V0U3RhcnQodS5ub2RlLHUub2Zmc2V0KX1mLnJlbW92ZUFsbFJhbmdlcygpLGYuYWRkUmFuZ2UoZCksZi5leHRlbmQmJmYuZXh0ZW5kKGgubm9kZSxoLm9mZnNldCl9fSxZLnByb3RvdHlwZS5pZ25vcmVNdXRhdGlvbj1mdW5jdGlvbih0KXtyZXR1cm4hdGhpcy5jb250ZW50RE9NfSxRLmNvbnRlbnRMb3N0LmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLmNvbnRlbnRET00mJnRoaXMuY29udGVudERPTSE9dGhpcy5kb20mJiF0aGlzLmRvbS5jb250YWlucyh0aGlzLmNvbnRlbnRET00pfSxZLnByb3RvdHlwZS5tYXJrRGlydHk9ZnVuY3Rpb24odCxlKXtmb3IodmFyIG49dGhpcyxyPTAsbz0wO288dGhpcy5jaGlsZHJlbi5sZW5ndGg7bysrKXt2YXIgaT1uLmNoaWxkcmVuW29dLHM9citpLnNpemU7aWYocj09cz90PD1zJiZlPj1yOnQ8cyYmZT5yKXt2YXIgYT1yK2kuYm9yZGVyLGM9cy1pLmJvcmRlcjtpZih0Pj1hJiZlPD1jKXJldHVybiBuLmRpcnR5PXQ9PXJ8fGU9PXM/RzpVLHZvaWQodD09YSYmZT09YyYmaS5jb250ZW50TG9zdD9pLmRpcnR5PVg6aS5tYXJrRGlydHkodC1hLGUtYSkpO2kuZGlydHk9WH1yPXN9dGhpcy5kaXJ0eT1HfSxZLnByb3RvdHlwZS5tYXJrUGFyZW50c0RpcnR5PWZ1bmN0aW9uKCl7Zm9yKHZhciB0PTEsZT10aGlzLnBhcmVudDtlO2U9ZS5wYXJlbnQpe3ZhciBuPTE9PXQ/RzpVO2UuZGlydHk8biYmKGUuZGlydHk9bil9fSxPYmplY3QuZGVmaW5lUHJvcGVydGllcyhZLnByb3RvdHlwZSxRKTt2YXIgWj1bXSx0dD1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKGUsbixyLG8pe3ZhciBpLHM9bi50eXBlLnRvRE9NO2lmKCJmdW5jdGlvbiI9PXR5cGVvZiBzJiYocz1zKHIsKGZ1bmN0aW9uKCl7cmV0dXJuIGk/aS5wYXJlbnQ/aS5wYXJlbnQucG9zQmVmb3JlQ2hpbGQoaSk6dm9pZCAwOm99KSkpLCFuLnR5cGUuc3BlYy5yYXcpe2lmKDEhPXMubm9kZVR5cGUpe3ZhciBhPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoInNwYW4iKTthLmFwcGVuZENoaWxkKHMpLHM9YX1zLmNvbnRlbnRFZGl0YWJsZT0hMSxzLmNsYXNzTGlzdC5hZGQoIlByb3NlTWlycm9yLXdpZGdldCIpfXQuY2FsbCh0aGlzLGUsWixzLG51bGwpLHRoaXMud2lkZ2V0PW4saT10aGlzfXQmJihlLl9fcHJvdG9fXz10KSxlLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKHQmJnQucHJvdG90eXBlKSxlLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1lO3ZhciBuPXtiZWZvcmVQb3NpdGlvbjp7fX07cmV0dXJuIG4uYmVmb3JlUG9zaXRpb24uZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMud2lkZ2V0LnR5cGUuc2lkZTwwfSxlLnByb3RvdHlwZS5tYXRjaGVzV2lkZ2V0PWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLmRpcnR5PT1LJiZ0LnR5cGUuZXEodGhpcy53aWRnZXQudHlwZSl9LGUucHJvdG90eXBlLnBhcnNlUnVsZT1mdW5jdGlvbigpe3JldHVybntpZ25vcmU6ITB9fSxlLnByb3RvdHlwZS5zdG9wRXZlbnQ9ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy53aWRnZXQuc3BlYy5zdG9wRXZlbnQ7cmV0dXJuISFlJiZlKHQpfSxPYmplY3QuZGVmaW5lUHJvcGVydGllcyhlLnByb3RvdHlwZSxuKSxlfShZKSxldD1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKGUsbixyLG8pe3QuY2FsbCh0aGlzLGUsWixuLG51bGwpLHRoaXMudGV4dERPTT1yLHRoaXMudGV4dD1vfXQmJihlLl9fcHJvdG9fXz10KSxlLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKHQmJnQucHJvdG90eXBlKSxlLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1lO3ZhciBuPXtzaXplOnt9fTtyZXR1cm4gbi5zaXplLmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLnRleHQubGVuZ3RofSxlLnByb3RvdHlwZS5sb2NhbFBvc0Zyb21ET009ZnVuY3Rpb24odCxlKXtyZXR1cm4gdCE9dGhpcy50ZXh0RE9NP3RoaXMucG9zQXRTdGFydCsoZT90aGlzLnNpemU6MCk6dGhpcy5wb3NBdFN0YXJ0K2V9LGUucHJvdG90eXBlLmRvbUZyb21Qb3M9ZnVuY3Rpb24odCl7cmV0dXJue25vZGU6dGhpcy50ZXh0RE9NLG9mZnNldDp0fX0sZS5wcm90b3R5cGUuaWdub3JlTXV0YXRpb249ZnVuY3Rpb24odCl7cmV0dXJuImNoYXJhY3RlckRhdGEiPT09dC50eXBlJiZ0LnRhcmdldC5ub2RlVmFsdWU9PXQub2xkVmFsdWV9LE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKGUucHJvdG90eXBlLG4pLGV9KFkpLG50PWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoZSxuLHIsbyl7dC5jYWxsKHRoaXMsZSxbXSxyLG8pLHRoaXMubWFyaz1ufXJldHVybiB0JiYoZS5fX3Byb3RvX189dCksZS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZSh0JiZ0LnByb3RvdHlwZSksZS5wcm90b3R5cGUuY29uc3RydWN0b3I9ZSxlLmNyZWF0ZT1mdW5jdGlvbih0LG4scixpKXt2YXIgcz1pLm5vZGVWaWV3c1tuLnR5cGUubmFtZV0sYT1zJiZzKG4saSxyKTtyZXR1cm4gYSYmYS5kb218fChhPW8uRE9NU2VyaWFsaXplci5yZW5kZXJTcGVjKGRvY3VtZW50LG4udHlwZS5zcGVjLnRvRE9NKG4scikpKSxuZXcgZSh0LG4sYS5kb20sYS5jb250ZW50RE9NfHxhLmRvbSl9LGUucHJvdG90eXBlLnBhcnNlUnVsZT1mdW5jdGlvbigpe3JldHVybnttYXJrOnRoaXMubWFyay50eXBlLm5hbWUsYXR0cnM6dGhpcy5tYXJrLmF0dHJzLGNvbnRlbnRFbGVtZW50OnRoaXMuY29udGVudERPTX19LGUucHJvdG90eXBlLm1hdGNoZXNNYXJrPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLmRpcnR5IT1YJiZ0aGlzLm1hcmsuZXEodCl9LGUucHJvdG90eXBlLm1hcmtEaXJ0eT1mdW5jdGlvbihlLG4pe2lmKHQucHJvdG90eXBlLm1hcmtEaXJ0eS5jYWxsKHRoaXMsZSxuKSx0aGlzLmRpcnR5IT1LKXt2YXIgcj10aGlzLnBhcmVudDt3aGlsZSghci5ub2RlKXI9ci5wYXJlbnQ7ci5kaXJ0eTx0aGlzLmRpcnR5JiYoci5kaXJ0eT10aGlzLmRpcnR5KSx0aGlzLmRpcnR5PUt9fSxlLnByb3RvdHlwZS5zbGljZT1mdW5jdGlvbih0LG4scil7dmFyIG89ZS5jcmVhdGUodGhpcy5wYXJlbnQsdGhpcy5tYXJrLCEwLHIpLGk9dGhpcy5jaGlsZHJlbixzPXRoaXMuc2l6ZTtuPHMmJihpPUN0KGksbixzLHIpKSx0PjAmJihpPUN0KGksMCx0LHIpKTtmb3IodmFyIGE9MDthPGkubGVuZ3RoO2ErKylpW2FdLnBhcmVudD1vO3JldHVybiBvLmNoaWxkcmVuPWksb30sZX0oWSkscnQ9ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZShlLG4scixvLGkscyxhLGMsbCl7dC5jYWxsKHRoaXMsZSxuLmlzTGVhZj9aOltdLGkscyksdGhpcy5ub2RlRE9NPWEsdGhpcy5ub2RlPW4sdGhpcy5vdXRlckRlY289cix0aGlzLmlubmVyRGVjbz1vLHMmJnRoaXMudXBkYXRlQ2hpbGRyZW4oYyxsKX10JiYoZS5fX3Byb3RvX189dCksZS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZSh0JiZ0LnByb3RvdHlwZSksZS5wcm90b3R5cGUuY29uc3RydWN0b3I9ZTt2YXIgbj17c2l6ZTp7fSxib3JkZXI6e319O3JldHVybiBlLmNyZWF0ZT1mdW5jdGlvbih0LG4scixpLHMsYSl7dmFyIGMsbD1zLm5vZGVWaWV3c1tuLnR5cGUubmFtZV0scD1sJiZsKG4scywoZnVuY3Rpb24oKXtyZXR1cm4gYz9jLnBhcmVudD9jLnBhcmVudC5wb3NCZWZvcmVDaGlsZChjKTp2b2lkIDA6YX0pLHIpLHU9cCYmcC5kb20saD1wJiZwLmNvbnRlbnRET007aWYobi5pc1RleHQpaWYodSl7aWYoMyE9dS5ub2RlVHlwZSl0aHJvdyBuZXcgUmFuZ2VFcnJvcigiVGV4dCBtdXN0IGJlIHJlbmRlcmVkIGFzIGEgRE9NIHRleHQgbm9kZSIpfWVsc2UgdT1kb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShuLnRleHQpO2Vsc2UgaWYoIXUpe3ZhciBmO2Y9by5ET01TZXJpYWxpemVyLnJlbmRlclNwZWMoZG9jdW1lbnQsbi50eXBlLnNwZWMudG9ET00obikpLHU9Zi5kb20saD1mLmNvbnRlbnRET019aHx8bi5pc1RleHR8fCJCUiI9PXUubm9kZU5hbWV8fCh1Lmhhc0F0dHJpYnV0ZSgiY29udGVudGVkaXRhYmxlIil8fCh1LmNvbnRlbnRFZGl0YWJsZT0hMSksbi50eXBlLnNwZWMuZHJhZ2dhYmxlJiYodS5kcmFnZ2FibGU9ITApKTt2YXIgZD11O3JldHVybiB1PWR0KHUscixuKSxwP2M9bmV3IGF0KHQsbixyLGksdSxoLGQscCxzLGErMSk6bi5pc1RleHQ/bmV3IGl0KHQsbixyLGksdSxkLHMpOm5ldyBlKHQsbixyLGksdSxoLGQscyxhKzEpfSxlLnByb3RvdHlwZS5wYXJzZVJ1bGU9ZnVuY3Rpb24oKXt2YXIgdD10aGlzO2lmKHRoaXMubm9kZS50eXBlLnNwZWMucmVwYXJzZUluVmlldylyZXR1cm4gbnVsbDt2YXIgZT17bm9kZTp0aGlzLm5vZGUudHlwZS5uYW1lLGF0dHJzOnRoaXMubm9kZS5hdHRyc307cmV0dXJuIHRoaXMubm9kZS50eXBlLnNwZWMuY29kZSYmKGUucHJlc2VydmVXaGl0ZXNwYWNlPSJmdWxsIiksdGhpcy5jb250ZW50RE9NJiYhdGhpcy5jb250ZW50TG9zdD9lLmNvbnRlbnRFbGVtZW50PXRoaXMuY29udGVudERPTTplLmdldENvbnRlbnQ9ZnVuY3Rpb24oKXtyZXR1cm4gdC5jb250ZW50RE9NP28uRnJhZ21lbnQuZW1wdHk6dC5ub2RlLmNvbnRlbnR9LGV9LGUucHJvdG90eXBlLm1hdGNoZXNOb2RlPWZ1bmN0aW9uKHQsZSxuKXtyZXR1cm4gdGhpcy5kaXJ0eT09SyYmdC5lcSh0aGlzLm5vZGUpJiZ2dChlLHRoaXMub3V0ZXJEZWNvKSYmbi5lcSh0aGlzLmlubmVyRGVjbyl9LG4uc2l6ZS5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5ub2RlLm5vZGVTaXplfSxuLmJvcmRlci5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5ub2RlLmlzTGVhZj8wOjF9LGUucHJvdG90eXBlLnVwZGF0ZUNoaWxkcmVuPWZ1bmN0aW9uKHQsZSl7dmFyIG49dGhpcyxyPXRoaXMubm9kZS5pbmxpbmVDb250ZW50LGk9ZSxzPXImJnQuY29tcG9zaW5nJiZ0aGlzLmxvY2FsQ29tcG9zaXRpb25Ob2RlKHQsZSksYT1uZXcgeXQodGhpcyxzJiZzLm5vZGUpO3h0KHRoaXMubm9kZSx0aGlzLmlubmVyRGVjbywoZnVuY3Rpb24oZSxzKXtlLnNwZWMubWFya3M/YS5zeW5jVG9NYXJrcyhlLnNwZWMubWFya3Mscix0KTplLnR5cGUuc2lkZT49MCYmYS5zeW5jVG9NYXJrcyhzPT1uLm5vZGUuY2hpbGRDb3VudD9vLk1hcmsubm9uZTpuLm5vZGUuY2hpbGQocykubWFya3Mscix0KSxhLnBsYWNlV2lkZ2V0KGUsdCxpKX0pLChmdW5jdGlvbihlLG4sbyxzKXthLnN5bmNUb01hcmtzKGUubWFya3Mscix0KSxhLmZpbmROb2RlTWF0Y2goZSxuLG8scyl8fGEudXBkYXRlTmV4dE5vZGUoZSxuLG8sdCxzKXx8YS5hZGROb2RlKGUsbixvLHQsaSksaSs9ZS5ub2RlU2l6ZX0pKSxhLnN5bmNUb01hcmtzKFoscix0KSx0aGlzLm5vZGUuaXNUZXh0YmxvY2smJmEuYWRkVGV4dGJsb2NrSGFja3MoKSxhLmRlc3Ryb3lSZXN0KCksKGEuY2hhbmdlZHx8dGhpcy5kaXJ0eT09RykmJihzJiZ0aGlzLnByb3RlY3RMb2NhbENvbXBvc2l0aW9uKHQscyksdGhpcy5yZW5kZXJDaGlsZHJlbigpKX0sZS5wcm90b3R5cGUucmVuZGVyQ2hpbGRyZW49ZnVuY3Rpb24oKXtjdCh0aGlzLmNvbnRlbnRET00sdGhpcy5jaGlsZHJlbixlLmlzKSxzLmlvcyYmYnQodGhpcy5kb20pfSxlLnByb3RvdHlwZS5sb2NhbENvbXBvc2l0aW9uTm9kZT1mdW5jdGlvbih0LGUpe3ZhciBuPXQuc3RhdGUuc2VsZWN0aW9uLG89bi5mcm9tLGk9bi50bztpZighKCEodC5zdGF0ZS5zZWxlY3Rpb24gaW5zdGFuY2VvZiByLlRleHRTZWxlY3Rpb24pfHxvPGV8fGk+ZSt0aGlzLm5vZGUuY29udGVudC5zaXplKSl7dmFyIHM9dC5yb290LmdldFNlbGVjdGlvbigpLGE9a3Qocy5mb2N1c05vZGUscy5mb2N1c09mZnNldCk7aWYoYSYmdGhpcy5kb20uY29udGFpbnMoYS5wYXJlbnROb2RlKSl7dmFyIGM9YS5ub2RlVmFsdWUsbD1TdCh0aGlzLm5vZGUuY29udGVudCxjLG8tZSxpLWUpO3JldHVybiBsPDA/bnVsbDp7bm9kZTphLHBvczpsLHRleHQ6Y319fX0sZS5wcm90b3R5cGUucHJvdGVjdExvY2FsQ29tcG9zaXRpb249ZnVuY3Rpb24odCxlKXt2YXIgbj10aGlzLHI9ZS5ub2RlLG89ZS5wb3MsaT1lLnRleHQ7aWYoIXRoaXMuZ2V0RGVzYyhyKSl7Zm9yKHZhciBzPXI7O3M9cy5wYXJlbnROb2RlKXtpZihzLnBhcmVudE5vZGU9PW4uY29udGVudERPTSlicmVhazt3aGlsZShzLnByZXZpb3VzU2libGluZylzLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQocy5wcmV2aW91c1NpYmxpbmcpO3doaWxlKHMubmV4dFNpYmxpbmcpcy5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKHMubmV4dFNpYmxpbmcpO3MucG1WaWV3RGVzYyYmKHMucG1WaWV3RGVzYz1udWxsKX12YXIgYT1uZXcgZXQodGhpcyxzLHIsaSk7dC5jb21wb3NpdGlvbk5vZGVzLnB1c2goYSksdGhpcy5jaGlsZHJlbj1DdCh0aGlzLmNoaWxkcmVuLG8sbytpLmxlbmd0aCx0LGEpfX0sZS5wcm90b3R5cGUudXBkYXRlPWZ1bmN0aW9uKHQsZSxuLHIpe3JldHVybiEodGhpcy5kaXJ0eT09WHx8IXQuc2FtZU1hcmt1cCh0aGlzLm5vZGUpKSYmKHRoaXMudXBkYXRlSW5uZXIodCxlLG4sciksITApfSxlLnByb3RvdHlwZS51cGRhdGVJbm5lcj1mdW5jdGlvbih0LGUsbixyKXt0aGlzLnVwZGF0ZU91dGVyRGVjbyhlKSx0aGlzLm5vZGU9dCx0aGlzLmlubmVyRGVjbz1uLHRoaXMuY29udGVudERPTSYmdGhpcy51cGRhdGVDaGlsZHJlbihyLHRoaXMucG9zQXRTdGFydCksdGhpcy5kaXJ0eT1LfSxlLnByb3RvdHlwZS51cGRhdGVPdXRlckRlY289ZnVuY3Rpb24odCl7aWYoIXZ0KHQsdGhpcy5vdXRlckRlY28pKXt2YXIgZT0xIT10aGlzLm5vZGVET00ubm9kZVR5cGUsbj10aGlzLmRvbTt0aGlzLmRvbT1odCh0aGlzLmRvbSx0aGlzLm5vZGVET00sdXQodGhpcy5vdXRlckRlY28sdGhpcy5ub2RlLGUpLHV0KHQsdGhpcy5ub2RlLGUpKSx0aGlzLmRvbSE9biYmKG4ucG1WaWV3RGVzYz1udWxsLHRoaXMuZG9tLnBtVmlld0Rlc2M9dGhpcyksdGhpcy5vdXRlckRlY289dH19LGUucHJvdG90eXBlLnNlbGVjdE5vZGU9ZnVuY3Rpb24oKXt0aGlzLm5vZGVET00uY2xhc3NMaXN0LmFkZCgiUHJvc2VNaXJyb3Itc2VsZWN0ZWRub2RlIiksIXRoaXMuY29udGVudERPTSYmdGhpcy5ub2RlLnR5cGUuc3BlYy5kcmFnZ2FibGV8fCh0aGlzLmRvbS5kcmFnZ2FibGU9ITApfSxlLnByb3RvdHlwZS5kZXNlbGVjdE5vZGU9ZnVuY3Rpb24oKXt0aGlzLm5vZGVET00uY2xhc3NMaXN0LnJlbW92ZSgiUHJvc2VNaXJyb3Itc2VsZWN0ZWRub2RlIiksIXRoaXMuY29udGVudERPTSYmdGhpcy5ub2RlLnR5cGUuc3BlYy5kcmFnZ2FibGV8fCh0aGlzLmRvbS5kcmFnZ2FibGU9ITEpfSxPYmplY3QuZGVmaW5lUHJvcGVydGllcyhlLnByb3RvdHlwZSxuKSxlfShZKTtmdW5jdGlvbiBvdCh0LGUsbixyLG8pe3JldHVybiBkdChyLGUsdCksbmV3IHJ0KG51bGwsdCxlLG4scixyLHIsbywwKX12YXIgaXQ9ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZShlLG4scixvLGkscyxhKXt0LmNhbGwodGhpcyxlLG4scixvLGksbnVsbCxzLGEpfXJldHVybiB0JiYoZS5fX3Byb3RvX189dCksZS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZSh0JiZ0LnByb3RvdHlwZSksZS5wcm90b3R5cGUuY29uc3RydWN0b3I9ZSxlLnByb3RvdHlwZS5wYXJzZVJ1bGU9ZnVuY3Rpb24oKXt2YXIgdD10aGlzLm5vZGVET00ucGFyZW50Tm9kZTtyZXR1cm4gdD97c2tpcDp0fTp7aWdub3JlOiEwfX0sZS5wcm90b3R5cGUudXBkYXRlPWZ1bmN0aW9uKHQsZSl7cmV0dXJuISh0aGlzLmRpcnR5PT1YfHx0aGlzLmRpcnR5IT1LJiYhdGhpcy5pblBhcmVudCgpfHwhdC5zYW1lTWFya3VwKHRoaXMubm9kZSkpJiYodGhpcy51cGRhdGVPdXRlckRlY28oZSksdGhpcy5kaXJ0eT09SyYmdC50ZXh0PT10aGlzLm5vZGUudGV4dHx8dC50ZXh0PT10aGlzLm5vZGVET00ubm9kZVZhbHVlfHwodGhpcy5ub2RlRE9NLm5vZGVWYWx1ZT10LnRleHQpLHRoaXMubm9kZT10LHRoaXMuZGlydHk9SywhMCl9LGUucHJvdG90eXBlLmluUGFyZW50PWZ1bmN0aW9uKCl7Zm9yKHZhciB0PXRoaXMucGFyZW50LmNvbnRlbnRET00sZT10aGlzLm5vZGVET007ZTtlPWUucGFyZW50Tm9kZSlpZihlPT10KXJldHVybiEwO3JldHVybiExfSxlLnByb3RvdHlwZS5kb21Gcm9tUG9zPWZ1bmN0aW9uKHQpe3JldHVybntub2RlOnRoaXMubm9kZURPTSxvZmZzZXQ6dH19LGUucHJvdG90eXBlLmxvY2FsUG9zRnJvbURPTT1mdW5jdGlvbihlLG4scil7cmV0dXJuIGU9PXRoaXMubm9kZURPTT90aGlzLnBvc0F0U3RhcnQrTWF0aC5taW4obix0aGlzLm5vZGUudGV4dC5sZW5ndGgpOnQucHJvdG90eXBlLmxvY2FsUG9zRnJvbURPTS5jYWxsKHRoaXMsZSxuLHIpfSxlLnByb3RvdHlwZS5pZ25vcmVNdXRhdGlvbj1mdW5jdGlvbih0KXtyZXR1cm4iY2hhcmFjdGVyRGF0YSIhPXQudHlwZSYmInNlbGVjdGlvbiIhPXQudHlwZX0sZS5wcm90b3R5cGUuc2xpY2U9ZnVuY3Rpb24odCxuLHIpe3ZhciBvPXRoaXMubm9kZS5jdXQodCxuKSxpPWRvY3VtZW50LmNyZWF0ZVRleHROb2RlKG8udGV4dCk7cmV0dXJuIG5ldyBlKHRoaXMucGFyZW50LG8sdGhpcy5vdXRlckRlY28sdGhpcy5pbm5lckRlY28saSxpLHIpfSxlfShydCksc3Q9ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZSgpe3QuYXBwbHkodGhpcyxhcmd1bWVudHMpfXJldHVybiB0JiYoZS5fX3Byb3RvX189dCksZS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZSh0JiZ0LnByb3RvdHlwZSksZS5wcm90b3R5cGUuY29uc3RydWN0b3I9ZSxlLnByb3RvdHlwZS5wYXJzZVJ1bGU9ZnVuY3Rpb24oKXtyZXR1cm57aWdub3JlOiEwfX0sZS5wcm90b3R5cGUubWF0Y2hlc0hhY2s9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5kaXJ0eT09S30sZX0oWSksYXQ9ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZShlLG4scixvLGkscyxhLGMsbCxwKXt0LmNhbGwodGhpcyxlLG4scixvLGkscyxhLGwscCksdGhpcy5zcGVjPWN9cmV0dXJuIHQmJihlLl9fcHJvdG9fXz10KSxlLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKHQmJnQucHJvdG90eXBlKSxlLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1lLGUucHJvdG90eXBlLnVwZGF0ZT1mdW5jdGlvbihlLG4scixvKXtpZih0aGlzLmRpcnR5PT1YKXJldHVybiExO2lmKHRoaXMuc3BlYy51cGRhdGUpe3ZhciBpPXRoaXMuc3BlYy51cGRhdGUoZSxuKTtyZXR1cm4gaSYmdGhpcy51cGRhdGVJbm5lcihlLG4scixvKSxpfXJldHVybiEoIXRoaXMuY29udGVudERPTSYmIWUuaXNMZWFmKSYmdC5wcm90b3R5cGUudXBkYXRlLmNhbGwodGhpcyxlLG4scixvKX0sZS5wcm90b3R5cGUuc2VsZWN0Tm9kZT1mdW5jdGlvbigpe3RoaXMuc3BlYy5zZWxlY3ROb2RlP3RoaXMuc3BlYy5zZWxlY3ROb2RlKCk6dC5wcm90b3R5cGUuc2VsZWN0Tm9kZS5jYWxsKHRoaXMpfSxlLnByb3RvdHlwZS5kZXNlbGVjdE5vZGU9ZnVuY3Rpb24oKXt0aGlzLnNwZWMuZGVzZWxlY3ROb2RlP3RoaXMuc3BlYy5kZXNlbGVjdE5vZGUoKTp0LnByb3RvdHlwZS5kZXNlbGVjdE5vZGUuY2FsbCh0aGlzKX0sZS5wcm90b3R5cGUuc2V0U2VsZWN0aW9uPWZ1bmN0aW9uKGUsbixyLG8pe3RoaXMuc3BlYy5zZXRTZWxlY3Rpb24/dGhpcy5zcGVjLnNldFNlbGVjdGlvbihlLG4scik6dC5wcm90b3R5cGUuc2V0U2VsZWN0aW9uLmNhbGwodGhpcyxlLG4scixvKX0sZS5wcm90b3R5cGUuZGVzdHJveT1mdW5jdGlvbigpe3RoaXMuc3BlYy5kZXN0cm95JiZ0aGlzLnNwZWMuZGVzdHJveSgpLHQucHJvdG90eXBlLmRlc3Ryb3kuY2FsbCh0aGlzKX0sZS5wcm90b3R5cGUuc3RvcEV2ZW50PWZ1bmN0aW9uKHQpe3JldHVybiEhdGhpcy5zcGVjLnN0b3BFdmVudCYmdGhpcy5zcGVjLnN0b3BFdmVudCh0KX0sZS5wcm90b3R5cGUuaWdub3JlTXV0YXRpb249ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuc3BlYy5pZ25vcmVNdXRhdGlvbj90aGlzLnNwZWMuaWdub3JlTXV0YXRpb24oZSk6dC5wcm90b3R5cGUuaWdub3JlTXV0YXRpb24uY2FsbCh0aGlzLGUpfSxlfShydCk7ZnVuY3Rpb24gY3QodCxlKXtmb3IodmFyIG49dC5maXJzdENoaWxkLHI9MDtyPGUubGVuZ3RoO3IrKyl7dmFyIG89ZVtyXSxpPW8uZG9tO2lmKGkucGFyZW50Tm9kZT09dCl7d2hpbGUoaSE9biluPW10KG4pO249bi5uZXh0U2libGluZ31lbHNlIHQuaW5zZXJ0QmVmb3JlKGksbik7aWYobyBpbnN0YW5jZW9mIG50KXt2YXIgcz1uP24ucHJldmlvdXNTaWJsaW5nOnQubGFzdENoaWxkO2N0KG8uY29udGVudERPTSxvLmNoaWxkcmVuKSxuPXM/cy5uZXh0U2libGluZzp0LmZpcnN0Q2hpbGR9fXdoaWxlKG4pbj1tdChuKX1mdW5jdGlvbiBsdCh0KXt0JiYodGhpcy5ub2RlTmFtZT10KX1sdC5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShudWxsKTt2YXIgcHQ9W25ldyBsdF07ZnVuY3Rpb24gdXQodCxlLG4pe2lmKDA9PXQubGVuZ3RoKXJldHVybiBwdDtmb3IodmFyIHI9bj9wdFswXTpuZXcgbHQsbz1bcl0saT0wO2k8dC5sZW5ndGg7aSsrKXt2YXIgcz10W2ldLnR5cGUuYXR0cnMsYT1yO2lmKHMpZm9yKHZhciBjIGluIHMubm9kZU5hbWUmJm8ucHVzaChhPW5ldyBsdChzLm5vZGVOYW1lKSkscyl7dmFyIGw9c1tjXTtudWxsIT1sJiYobiYmMT09by5sZW5ndGgmJm8ucHVzaChhPXI9bmV3IGx0KGUuaXNJbmxpbmU/InNwYW4iOiJkaXYiKSksImNsYXNzIj09Yz9hLmNsYXNzPShhLmNsYXNzP2EuY2xhc3MrIiAiOiIiKStsOiJzdHlsZSI9PWM/YS5zdHlsZT0oYS5zdHlsZT9hLnN0eWxlKyI7IjoiIikrbDoibm9kZU5hbWUiIT1jJiYoYVtjXT1sKSl9fXJldHVybiBvfWZ1bmN0aW9uIGh0KHQsZSxuLHIpe2lmKG49PXB0JiZyPT1wdClyZXR1cm4gZTtmb3IodmFyIG89ZSxpPTA7aTxyLmxlbmd0aDtpKyspe3ZhciBzPXJbaV0sYT1uW2ldO2lmKGkpe3ZhciBjPXZvaWQgMDthJiZhLm5vZGVOYW1lPT1zLm5vZGVOYW1lJiZvIT10JiYoYz1lLnBhcmVudE5vZGUpJiZjLnRhZ05hbWUudG9Mb3dlckNhc2UoKT09cy5ub2RlTmFtZT9vPWM6KGM9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChzLm5vZGVOYW1lKSxjLmFwcGVuZENoaWxkKG8pLG89Yyl9ZnQobyxhfHxwdFswXSxzKX1yZXR1cm4gb31mdW5jdGlvbiBmdCh0LGUsbil7Zm9yKHZhciByIGluIGUpImNsYXNzIj09cnx8InN0eWxlIj09cnx8Im5vZGVOYW1lIj09cnx8ciBpbiBufHx0LnJlbW92ZUF0dHJpYnV0ZShyKTtmb3IodmFyIG8gaW4gbikiY2xhc3MiIT1vJiYic3R5bGUiIT1vJiYibm9kZU5hbWUiIT1vJiZuW29dIT1lW29dJiZ0LnNldEF0dHJpYnV0ZShvLG5bb10pO2lmKGUuY2xhc3MhPW4uY2xhc3Mpe2Zvcih2YXIgaT1lLmNsYXNzP2UuY2xhc3Muc3BsaXQoIiAiKTpaLHM9bi5jbGFzcz9uLmNsYXNzLnNwbGl0KCIgIik6WixhPTA7YTxpLmxlbmd0aDthKyspLTE9PXMuaW5kZXhPZihpW2FdKSYmdC5jbGFzc0xpc3QucmVtb3ZlKGlbYV0pO2Zvcih2YXIgYz0wO2M8cy5sZW5ndGg7YysrKS0xPT1pLmluZGV4T2Yoc1tjXSkmJnQuY2xhc3NMaXN0LmFkZChzW2NdKX1pZihlLnN0eWxlIT1uLnN0eWxlKXtpZihlLnN0eWxlKXt2YXIgbCxwPS9ccyooW1x3XC1ceGExLVx1ZmZmZl0rKVxzKjooPzoiKD86XFwufFteIl0pKiJ8Jyg/OlxcLnxbXiddKSonfFwoLio/XCl8W147XSkqL2c7d2hpbGUobD1wLmV4ZWMoZS5zdHlsZSkpdC5zdHlsZVtsWzFdLnRvTG93ZXJDYXNlKCldPSIifW4uc3R5bGUmJih0LnN0eWxlLmNzc1RleHQrPW4uc3R5bGUpfX1mdW5jdGlvbiBkdCh0LGUsbil7cmV0dXJuIGh0KHQsdCxwdCx1dChlLG4sMSE9dC5ub2RlVHlwZSkpfWZ1bmN0aW9uIHZ0KHQsZSl7aWYodC5sZW5ndGghPWUubGVuZ3RoKXJldHVybiExO2Zvcih2YXIgbj0wO248dC5sZW5ndGg7bisrKWlmKCF0W25dLnR5cGUuZXEoZVtuXS50eXBlKSlyZXR1cm4hMTtyZXR1cm4hMH1mdW5jdGlvbiBtdCh0KXt2YXIgZT10Lm5leHRTaWJsaW5nO3JldHVybiB0LnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQodCksZX12YXIgeXQ9ZnVuY3Rpb24odCxlKXt0aGlzLnRvcD10LHRoaXMubG9jaz1lLHRoaXMuaW5kZXg9MCx0aGlzLnN0YWNrPVtdLHRoaXMuY2hhbmdlZD0hMTt2YXIgbj1ndCh0Lm5vZGUuY29udGVudCx0LmNoaWxkcmVuKTt0aGlzLnByZU1hdGNoZWQ9bi5ub2Rlcyx0aGlzLnByZU1hdGNoT2Zmc2V0PW4ub2Zmc2V0fTtmdW5jdGlvbiBndCh0LGUpe2Zvcih2YXIgbj1bXSxyPXQuY2hpbGRDb3VudCxvPWUubGVuZ3RoLTE7cj4wJiZvPj0wO28tLSl7dmFyIGk9ZVtvXSxzPWkubm9kZTtpZihzKXtpZihzIT10LmNoaWxkKHItMSkpYnJlYWs7bi5wdXNoKGkpLC0tcn19cmV0dXJue25vZGVzOm4ucmV2ZXJzZSgpLG9mZnNldDpyfX1mdW5jdGlvbiB3dCh0LGUpe3JldHVybiB0LnR5cGUuc2lkZS1lLnR5cGUuc2lkZX1mdW5jdGlvbiB4dCh0LGUsbixyKXt2YXIgbz1lLmxvY2Fscyh0KSxpPTA7aWYoMCE9by5sZW5ndGgpZm9yKHZhciBzPTAsYT1bXSxjPW51bGwsbD0wOzspe2lmKHM8by5sZW5ndGgmJm9bc10udG89PWkpe3ZhciBwPW9bcysrXSx1PXZvaWQgMDt3aGlsZShzPG8ubGVuZ3RoJiZvW3NdLnRvPT1pKSh1fHwodT1bcF0pKS5wdXNoKG9bcysrXSk7aWYodSl7dS5zb3J0KHd0KTtmb3IodmFyIGg9MDtoPHUubGVuZ3RoO2grKyluKHVbaF0sbCl9ZWxzZSBuKHAsbCl9dmFyIGY9dm9pZCAwLGQ9dm9pZCAwO2lmKGMpZD0tMSxmPWMsYz1udWxsO2Vsc2V7aWYoIShsPHQuY2hpbGRDb3VudCkpYnJlYWs7ZD1sLGY9dC5jaGlsZChsKyspfWZvcih2YXIgdj0wO3Y8YS5sZW5ndGg7disrKWFbdl0udG88PWkmJmEuc3BsaWNlKHYtLSwxKTt3aGlsZShzPG8ubGVuZ3RoJiZvW3NdLmZyb209PWkpYS5wdXNoKG9bcysrXSk7dmFyIG09aStmLm5vZGVTaXplO2lmKGYuaXNUZXh0KXt2YXIgeT1tO3M8by5sZW5ndGgmJm9bc10uZnJvbTx5JiYoeT1vW3NdLmZyb20pO2Zvcih2YXIgZz0wO2c8YS5sZW5ndGg7ZysrKWFbZ10udG88eSYmKHk9YVtnXS50byk7eTxtJiYoYz1mLmN1dCh5LWkpLGY9Zi5jdXQoMCx5LWkpLG09eSxkPS0xKX1yKGYsYS5sZW5ndGg/YS5zbGljZSgpOlosZS5mb3JDaGlsZChpLGYpLGQpLGk9bX1lbHNlIGZvcih2YXIgdz0wO3c8dC5jaGlsZENvdW50O3crKyl7dmFyIHg9dC5jaGlsZCh3KTtyKHgsbyxlLmZvckNoaWxkKGkseCksdyksaSs9eC5ub2RlU2l6ZX19ZnVuY3Rpb24gYnQodCl7aWYoIlVMIj09dC5ub2RlTmFtZXx8Ik9MIj09dC5ub2RlTmFtZSl7dmFyIGU9dC5zdHlsZS5jc3NUZXh0O3Quc3R5bGUuY3NzVGV4dD1lKyI7IGxpc3Qtc3R5bGU6IHNxdWFyZSAhaW1wb3J0YW50Iix3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZSh0KS5saXN0U3R5bGUsdC5zdHlsZS5jc3NUZXh0PWV9fWZ1bmN0aW9uIGt0KHQsZSl7Zm9yKDs7KXtpZigzPT10Lm5vZGVUeXBlKXJldHVybiB0O2lmKDE9PXQubm9kZVR5cGUmJmU+MCl7aWYodC5jaGlsZE5vZGVzLmxlbmd0aD5lJiYzPT10LmNoaWxkTm9kZXNbZV0ubm9kZVR5cGUpcmV0dXJuIHQuY2hpbGROb2Rlc1tlXTt0PXQuY2hpbGROb2Rlc1tlLTFdLGU9Zyh0KX1lbHNle2lmKCEoMT09dC5ub2RlVHlwZSYmZTx0LmNoaWxkTm9kZXMubGVuZ3RoKSlyZXR1cm4gbnVsbDt0PXQuY2hpbGROb2Rlc1tlXSxlPTB9fX1mdW5jdGlvbiBTdCh0LGUsbixyKXtmb3IodmFyIG89IiIsaT0wLHM9MDtpPHQuY2hpbGRDb3VudDtpKyspe3ZhciBhPXQuY2hpbGQoaSksYz1zK2Eubm9kZVNpemU7aWYoYS5pc1RleHQpe2lmKG8rPWEudGV4dCxjPj1yKXt2YXIgbD1jLW8ubGVuZ3RoLHA9by5sYXN0SW5kZXhPZihlKTt3aGlsZShwPi0xJiZsK3A+bilwPW8ubGFzdEluZGV4T2YoZSxwLTEpO2lmKHA+LTEmJmwrcCtlLmxlbmd0aD49cilyZXR1cm4gbCtwO2lmKGM+cilicmVha319ZWxzZSBvPSIiO3M9Y31yZXR1cm4tMX1mdW5jdGlvbiBDdCh0LGUsbixyLG8pe2Zvcih2YXIgaT1bXSxzPTAsYT0wO3M8dC5sZW5ndGg7cysrKXt2YXIgYz10W3NdLGw9YSxwPWErPWMuc2l6ZTtsPj1ufHxwPD1lP2kucHVzaChjKToobDxlJiZpLnB1c2goYy5zbGljZSgwLGUtbCxyKSksbyYmKGkucHVzaChvKSxvPW51bGwpLHA+biYmaS5wdXNoKGMuc2xpY2Uobi1sLGMuc2l6ZSxyKSkpfXJldHVybiBpfWZ1bmN0aW9uIE90KHQsZSl7dmFyIG49dC5zZWxlY3Rpb24sbz1uLiRhbmNob3IsaT1uLiRoZWFkLHM9ZT4wP28ubWF4KGkpOm8ubWluKGkpLGE9cy5wYXJlbnQuaW5saW5lQ29udGVudD9zLmRlcHRoP3QuZG9jLnJlc29sdmUoZT4wP3MuYWZ0ZXIoKTpzLmJlZm9yZSgpKTpudWxsOnM7cmV0dXJuIGEmJnIuU2VsZWN0aW9uLmZpbmRGcm9tKGEsZSl9ZnVuY3Rpb24gTXQodCxlKXtyZXR1cm4gdC5kaXNwYXRjaCh0LnN0YXRlLnRyLnNldFNlbGVjdGlvbihlKS5zY3JvbGxJbnRvVmlldygpKSwhMH1mdW5jdGlvbiBUdCh0LGUsbil7dmFyIG89dC5zdGF0ZS5zZWxlY3Rpb247aWYobyBpbnN0YW5jZW9mIHIuVGV4dFNlbGVjdGlvbil7aWYoIW8uZW1wdHl8fG4uaW5kZXhPZigicyIpPi0xKXJldHVybiExO2lmKHQuZW5kT2ZUZXh0YmxvY2soZT4wPyJyaWdodCI6ImxlZnQiKSl7dmFyIGk9T3QodC5zdGF0ZSxlKTtyZXR1cm4hIShpJiZpIGluc3RhbmNlb2Ygci5Ob2RlU2VsZWN0aW9uKSYmTXQodCxpKX12YXIgYSxjPW8uJGhlYWQsbD1jLnRleHRPZmZzZXQ/bnVsbDplPDA/Yy5ub2RlQmVmb3JlOmMubm9kZUFmdGVyO2lmKCFsfHxsLmlzVGV4dClyZXR1cm4hMTt2YXIgcD1lPDA/Yy5wb3MtbC5ub2RlU2l6ZTpjLnBvcztyZXR1cm4hIShsLmlzQXRvbXx8KGE9dC5kb2NWaWV3LmRlc2NBdChwKSkmJiFhLmNvbnRlbnRET00pJiYoci5Ob2RlU2VsZWN0aW9uLmlzU2VsZWN0YWJsZShsKT9NdCh0LG5ldyByLk5vZGVTZWxlY3Rpb24oZTwwP3Quc3RhdGUuZG9jLnJlc29sdmUoYy5wb3MtbC5ub2RlU2l6ZSk6YykpOiEhcy53ZWJraXQmJk10KHQsbmV3IHIuVGV4dFNlbGVjdGlvbih0LnN0YXRlLmRvYy5yZXNvbHZlKGU8MD9wOnArbC5ub2RlU2l6ZSkpKSl9aWYobyBpbnN0YW5jZW9mIHIuTm9kZVNlbGVjdGlvbiYmby5ub2RlLmlzSW5saW5lKXJldHVybiBNdCh0LG5ldyByLlRleHRTZWxlY3Rpb24oZT4wP28uJHRvOm8uJGZyb20pKTt2YXIgdT1PdCh0LnN0YXRlLGUpO3JldHVybiEhdSYmTXQodCx1KX1mdW5jdGlvbiBOdCh0KXtyZXR1cm4gMz09dC5ub2RlVHlwZT90Lm5vZGVWYWx1ZS5sZW5ndGg6dC5jaGlsZE5vZGVzLmxlbmd0aH1mdW5jdGlvbiBFdCh0KXt2YXIgZT10LnBtVmlld0Rlc2M7cmV0dXJuIGUmJjA9PWUuc2l6ZSYmKHQubmV4dFNpYmxpbmd8fCJCUiIhPXQubm9kZU5hbWUpfWZ1bmN0aW9uIEF0KHQpe3ZhciBlPXQucm9vdC5nZXRTZWxlY3Rpb24oKSxuPWUuZm9jdXNOb2RlLHI9ZS5mb2N1c09mZnNldDtpZihuKXt2YXIgbyxpLGE9ITE7Zm9yKHMuZ2Vja28mJjE9PW4ubm9kZVR5cGUmJnI8TnQobikmJkV0KG4uY2hpbGROb2Rlc1tyXSkmJihhPSEwKTs7KWlmKHI+MCl7aWYoMSE9bi5ub2RlVHlwZSlicmVhazt2YXIgYz1uLmNoaWxkTm9kZXNbci0xXTtpZihFdChjKSlvPW4saT0tLXI7ZWxzZXtpZigzIT1jLm5vZGVUeXBlKWJyZWFrO249YyxyPW4ubm9kZVZhbHVlLmxlbmd0aH19ZWxzZXtpZihEdChuKSlicmVhazt2YXIgbD1uLnByZXZpb3VzU2libGluZzt3aGlsZShsJiZFdChsKSlvPW4ucGFyZW50Tm9kZSxpPWgobCksbD1sLnByZXZpb3VzU2libGluZztpZihsKW49bCxyPU50KG4pO2Vsc2V7aWYobj1uLnBhcmVudE5vZGUsbj09dC5kb20pYnJlYWs7cj0wfX1hP3p0KHQsZSxuLHIpOm8mJnp0KHQsZSxvLGkpfX1mdW5jdGlvbiBSdCh0KXt2YXIgZT10LnJvb3QuZ2V0U2VsZWN0aW9uKCksbj1lLmZvY3VzTm9kZSxyPWUuZm9jdXNPZmZzZXQ7aWYobil7Zm9yKHZhciBvLGkscz1OdChuKTs7KWlmKHI8cyl7aWYoMSE9bi5ub2RlVHlwZSlicmVhazt2YXIgYT1uLmNoaWxkTm9kZXNbcl07aWYoIUV0KGEpKWJyZWFrO289bixpPSsrcn1lbHNle2lmKER0KG4pKWJyZWFrO3ZhciBjPW4ubmV4dFNpYmxpbmc7d2hpbGUoYyYmRXQoYykpbz1jLnBhcmVudE5vZGUsaT1oKGMpKzEsYz1jLm5leHRTaWJsaW5nO2lmKGMpbj1jLHI9MCxzPU50KG4pO2Vsc2V7aWYobj1uLnBhcmVudE5vZGUsbj09dC5kb20pYnJlYWs7cj1zPTB9fW8mJnp0KHQsZSxvLGkpfX1mdW5jdGlvbiBEdCh0KXt2YXIgZT10LnBtVmlld0Rlc2M7cmV0dXJuIGUmJmUubm9kZSYmZS5ub2RlLmlzQmxvY2t9ZnVuY3Rpb24genQodCxlLG4scil7aWYoeChlKSl7dmFyIG89ZG9jdW1lbnQuY3JlYXRlUmFuZ2UoKTtvLnNldEVuZChuLHIpLG8uc2V0U3RhcnQobixyKSxlLnJlbW92ZUFsbFJhbmdlcygpLGUuYWRkUmFuZ2Uobyl9ZWxzZSBlLmV4dGVuZCYmZS5leHRlbmQobixyKTt0LmRvbU9ic2VydmVyLnNldEN1clNlbGVjdGlvbigpfWZ1bmN0aW9uIFB0KHQsZSxuKXt2YXIgbz10LnN0YXRlLnNlbGVjdGlvbjtpZihvIGluc3RhbmNlb2Ygci5UZXh0U2VsZWN0aW9uJiYhby5lbXB0eXx8bi5pbmRleE9mKCJzIik+LTEpcmV0dXJuITE7dmFyIGk9by4kZnJvbSxzPW8uJHRvO2lmKCFpLnBhcmVudC5pbmxpbmVDb250ZW50fHx0LmVuZE9mVGV4dGJsb2NrKGU8MD8idXAiOiJkb3duIikpe3ZhciBhPU90KHQuc3RhdGUsZSk7aWYoYSYmYSBpbnN0YW5jZW9mIHIuTm9kZVNlbGVjdGlvbilyZXR1cm4gTXQodCxhKX1pZighaS5wYXJlbnQuaW5saW5lQ29udGVudCl7dmFyIGM9ci5TZWxlY3Rpb24uZmluZEZyb20oZTwwP2k6cyxlKTtyZXR1cm4hY3x8TXQodCxjKX1yZXR1cm4hMX1mdW5jdGlvbiBJdCh0LGUpe2lmKCEodC5zdGF0ZS5zZWxlY3Rpb24gaW5zdGFuY2VvZiByLlRleHRTZWxlY3Rpb24pKXJldHVybiEwO3ZhciBuPXQuc3RhdGUuc2VsZWN0aW9uLG89bi4kaGVhZCxpPW4uJGFuY2hvcixzPW4uZW1wdHk7aWYoIW8uc2FtZVBhcmVudChpKSlyZXR1cm4hMDtpZighcylyZXR1cm4hMTtpZih0LmVuZE9mVGV4dGJsb2NrKGU+MD8iZm9yd2FyZCI6ImJhY2t3YXJkIikpcmV0dXJuITA7dmFyIGE9IW8udGV4dE9mZnNldCYmKGU8MD9vLm5vZGVCZWZvcmU6by5ub2RlQWZ0ZXIpO2lmKGEmJiFhLmlzVGV4dCl7dmFyIGM9dC5zdGF0ZS50cjtyZXR1cm4gZTwwP2MuZGVsZXRlKG8ucG9zLWEubm9kZVNpemUsby5wb3MpOmMuZGVsZXRlKG8ucG9zLG8ucG9zK2Eubm9kZVNpemUpLHQuZGlzcGF0Y2goYyksITB9cmV0dXJuITF9ZnVuY3Rpb24gX3QodCxlLG4pe3QuZG9tT2JzZXJ2ZXIuc3RvcCgpLGUuY29udGVudEVkaXRhYmxlPW4sdC5kb21PYnNlcnZlci5zdGFydCgpfWZ1bmN0aW9uIEZ0KHQpe2lmKHMuY2hyb21lJiYhKHQuc3RhdGUuc2VsZWN0aW9uLiRoZWFkLnBhcmVudE9mZnNldD4wKSl7dmFyIGU9dC5yb290LmdldFNlbGVjdGlvbigpLG49ZS5mb2N1c05vZGUscj1lLmZvY3VzT2Zmc2V0O2lmKG4mJjE9PW4ubm9kZVR5cGUmJjA9PXImJm4uZmlyc3RDaGlsZCYmImZhbHNlIj09bi5maXJzdENoaWxkLmNvbnRlbnRFZGl0YWJsZSl7dmFyIG89bi5maXJzdENoaWxkO190KHQsbywhMCksc2V0VGltZW91dCgoZnVuY3Rpb24oKXtyZXR1cm4gX3QodCxvLCExKX0pLDIwKX19fWZ1bmN0aW9uIEJ0KHQpe3ZhciBlPSIiO3JldHVybiB0LmN0cmxLZXkmJihlKz0iYyIpLHQubWV0YUtleSYmKGUrPSJtIiksdC5hbHRLZXkmJihlKz0iYSIpLHQuc2hpZnRLZXkmJihlKz0icyIpLGV9ZnVuY3Rpb24ganQodCxlKXt2YXIgbj1lLmtleUNvZGUscj1CdChlKTtyZXR1cm4gOD09bnx8cy5tYWMmJjcyPT1uJiYiYyI9PXI/SXQodCwtMSl8fEF0KHQpOjQ2PT1ufHxzLm1hYyYmNjg9PW4mJiJjIj09cj9JdCh0LDEpfHxSdCh0KToxMz09bnx8Mjc9PW58fCgzNz09bj9UdCh0LC0xLHIpfHxBdCh0KTozOT09bj9UdCh0LDEscil8fFJ0KHQpOjM4PT1uP1B0KHQsLTEscil8fEF0KHQpOjQwPT1uP0Z0KHQpfHxQdCh0LDEscil8fFJ0KHQpOnI9PShzLm1hYz8ibSI6ImMiKSYmKDY2PT1ufHw3Mz09bnx8ODk9PW58fDkwPT1uKSl9ZnVuY3Rpb24gJHQodCxlKXt2YXIgbixvLGk9dC5yb290LmdldFNlbGVjdGlvbigpLHM9dC5zdGF0ZS5kb2MsYT10LmRvY1ZpZXcubmVhcmVzdERlc2MoaS5mb2N1c05vZGUpLGM9YSYmMD09YS5zaXplLGw9dC5kb2NWaWV3LnBvc0Zyb21ET00oaS5mb2N1c05vZGUsaS5mb2N1c09mZnNldCkscD1zLnJlc29sdmUobCk7aWYoeChpKSl7bj1wO3doaWxlKGEmJiFhLm5vZGUpYT1hLnBhcmVudDtpZihhJiZhLm5vZGUuaXNBdG9tJiZyLk5vZGVTZWxlY3Rpb24uaXNTZWxlY3RhYmxlKGEubm9kZSkmJmEucGFyZW50KXt2YXIgdT1hLnBvc0JlZm9yZTtvPW5ldyByLk5vZGVTZWxlY3Rpb24obD09dT9wOnMucmVzb2x2ZSh1KSl9fWVsc2Ugbj1zLnJlc29sdmUodC5kb2NWaWV3LnBvc0Zyb21ET00oaS5hbmNob3JOb2RlLGkuYW5jaG9yT2Zmc2V0KSk7aWYoIW8pe3ZhciBoPSJwb2ludGVyIj09ZXx8dC5zdGF0ZS5zZWxlY3Rpb24uaGVhZDxwLnBvcyYmIWM/MTotMTtvPVV0KHQsbixwLGgpfXJldHVybiBvfWZ1bmN0aW9uIFZ0KHQsZSxuKXt2YXIgbz10LnN0YXRlLnNlbGVjdGlvbjtpZihIdCh0LG8pLHQuZWRpdGFibGUmJiF0Lmhhc0ZvY3VzKCkpe2lmKCFlKXJldHVybjtzLmdlY2tvJiZzLmdlY2tvX3ZlcnNpb248PTU1JiYodC5kb21PYnNlcnZlci5kaXNjb25uZWN0U2VsZWN0aW9uKCksdC5kb20uZm9jdXMoKSx0LmRvbU9ic2VydmVyLmNvbm5lY3RTZWxlY3Rpb24oKSl9ZWxzZSBpZighdC5lZGl0YWJsZSYmKCFYdCh0KXx8IWRvY3VtZW50LmFjdGl2ZUVsZW1lbnQuY29udGFpbnModC5kb20pKSYmIWUpcmV0dXJuO2lmKHQuZG9tT2JzZXJ2ZXIuZGlzY29ubmVjdFNlbGVjdGlvbigpLHQuY3Vyc29yV3JhcHBlcilXdCh0KTtlbHNle3ZhciBpLGEsYz1vLmFuY2hvcixsPW8uaGVhZDshTHR8fG8gaW5zdGFuY2VvZiByLlRleHRTZWxlY3Rpb258fChvLiRmcm9tLnBhcmVudC5pbmxpbmVDb250ZW50fHwoaT1KdCh0LG8uZnJvbSkpLG8uZW1wdHl8fG8uJGZyb20ucGFyZW50LmlubGluZUNvbnRlbnR8fChhPUp0KHQsby50bykpKSx0LmRvY1ZpZXcuc2V0U2VsZWN0aW9uKGMsbCx0LnJvb3QsbiksTHQmJihpJiYoaS5jb250ZW50RWRpdGFibGU9ImZhbHNlIiksYSYmKGEuY29udGVudEVkaXRhYmxlPSJmYWxzZSIpKSxvLnZpc2libGU/dC5kb20uY2xhc3NMaXN0LnJlbW92ZSgiUHJvc2VNaXJyb3ItaGlkZXNlbGVjdGlvbiIpOmMhPWwmJih0LmRvbS5jbGFzc0xpc3QuYWRkKCJQcm9zZU1pcnJvci1oaWRlc2VsZWN0aW9uIiksIm9uc2VsZWN0aW9uY2hhbmdlImluIGRvY3VtZW50JiZxdCh0KSl9dC5kb21PYnNlcnZlci5zZXRDdXJTZWxlY3Rpb24oKSx0LmRvbU9ic2VydmVyLmNvbm5lY3RTZWxlY3Rpb24oKX15dC5wcm90b3R5cGUuZ2V0UHJlTWF0Y2g9ZnVuY3Rpb24odCl7cmV0dXJuIHQ+PXRoaXMucHJlTWF0Y2hPZmZzZXQ/dGhpcy5wcmVNYXRjaGVkW3QtdGhpcy5wcmVNYXRjaE9mZnNldF06bnVsbH0seXQucHJvdG90eXBlLmRlc3Ryb3lCZXR3ZWVuPWZ1bmN0aW9uKHQsZSl7dmFyIG49dGhpcztpZih0IT1lKXtmb3IodmFyIHI9dDtyPGU7cisrKW4udG9wLmNoaWxkcmVuW3JdLmRlc3Ryb3koKTt0aGlzLnRvcC5jaGlsZHJlbi5zcGxpY2UodCxlLXQpLHRoaXMuY2hhbmdlZD0hMH19LHl0LnByb3RvdHlwZS5kZXN0cm95UmVzdD1mdW5jdGlvbigpe3RoaXMuZGVzdHJveUJldHdlZW4odGhpcy5pbmRleCx0aGlzLnRvcC5jaGlsZHJlbi5sZW5ndGgpfSx5dC5wcm90b3R5cGUuc3luY1RvTWFya3M9ZnVuY3Rpb24odCxlLG4pe3ZhciByPXRoaXMsbz0wLGk9dGhpcy5zdGFjay5sZW5ndGg+PjEscz1NYXRoLm1pbihpLHQubGVuZ3RoKTt3aGlsZShvPHMmJihvPT1pLTE/dGhpcy50b3A6dGhpcy5zdGFja1tvKzE8PDFdKS5tYXRjaGVzTWFyayh0W29dKSYmITEhPT10W29dLnR5cGUuc3BlYy5zcGFubmluZylvKys7d2hpbGUobzxpKXIuZGVzdHJveVJlc3QoKSxyLnRvcC5kaXJ0eT1LLHIuaW5kZXg9ci5zdGFjay5wb3AoKSxyLnRvcD1yLnN0YWNrLnBvcCgpLGktLTt3aGlsZShpPHQubGVuZ3RoKXtyLnN0YWNrLnB1c2goci50b3Asci5pbmRleCsxKTtmb3IodmFyIGE9LTEsYz10aGlzLmluZGV4O2M8TWF0aC5taW4odGhpcy5pbmRleCszLHRoaXMudG9wLmNoaWxkcmVuLmxlbmd0aCk7YysrKWlmKHIudG9wLmNoaWxkcmVuW2NdLm1hdGNoZXNNYXJrKHRbaV0pKXthPWM7YnJlYWt9aWYoYT4tMSlhPnIuaW5kZXgmJihyLmNoYW5nZWQ9ITAsci5kZXN0cm95QmV0d2VlbihyLmluZGV4LGEpKSxyLnRvcD1yLnRvcC5jaGlsZHJlbltyLmluZGV4XTtlbHNle3ZhciBsPW50LmNyZWF0ZShyLnRvcCx0W2ldLGUsbik7ci50b3AuY2hpbGRyZW4uc3BsaWNlKHIuaW5kZXgsMCxsKSxyLnRvcD1sLHIuY2hhbmdlZD0hMH1yLmluZGV4PTAsaSsrfX0seXQucHJvdG90eXBlLmZpbmROb2RlTWF0Y2g9ZnVuY3Rpb24odCxlLG4scil7dmFyIG89dGhpcyxpPS0xLHM9cjwwP3ZvaWQgMDp0aGlzLmdldFByZU1hdGNoKHIpLGE9dGhpcy50b3AuY2hpbGRyZW47aWYocyYmcy5tYXRjaGVzTm9kZSh0LGUsbikpaT1hLmluZGV4T2Yocyk7ZWxzZSBmb3IodmFyIGM9dGhpcy5pbmRleCxsPU1hdGgubWluKGEubGVuZ3RoLGMrNSk7YzxsO2MrKyl7dmFyIHA9YVtjXTtpZihwLm1hdGNoZXNOb2RlKHQsZSxuKSYmby5wcmVNYXRjaGVkLmluZGV4T2YocCk8MCl7aT1jO2JyZWFrfX1yZXR1cm4hKGk8MCkmJih0aGlzLmRlc3Ryb3lCZXR3ZWVuKHRoaXMuaW5kZXgsaSksdGhpcy5pbmRleCsrLCEwKX0seXQucHJvdG90eXBlLnVwZGF0ZU5leHROb2RlPWZ1bmN0aW9uKHQsZSxuLHIsbyl7aWYodGhpcy5pbmRleD09dGhpcy50b3AuY2hpbGRyZW4ubGVuZ3RoKXJldHVybiExO3ZhciBpPXRoaXMudG9wLmNoaWxkcmVuW3RoaXMuaW5kZXhdO2lmKGkgaW5zdGFuY2VvZiBydCl7dmFyIHM9dGhpcy5wcmVNYXRjaGVkLmluZGV4T2YoaSk7aWYocz4tMSYmcyt0aGlzLnByZU1hdGNoT2Zmc2V0IT1vKXJldHVybiExO3ZhciBhPWkuZG9tLGM9dGhpcy5sb2NrJiYoYT09dGhpcy5sb2NrfHwxPT1hLm5vZGVUeXBlJiZhLmNvbnRhaW5zKHRoaXMubG9jay5wYXJlbnROb2RlKSkmJiEodC5pc1RleHQmJmkubm9kZSYmaS5ub2RlLmlzVGV4dCYmaS5ub2RlRE9NLm5vZGVWYWx1ZT09dC50ZXh0JiZpLmRpcnR5IT1YJiZ2dChlLGkub3V0ZXJEZWNvKSk7aWYoIWMmJmkudXBkYXRlKHQsZSxuLHIpKXJldHVybiBpLmRvbSE9YSYmKHRoaXMuY2hhbmdlZD0hMCksdGhpcy5pbmRleCsrLCEwfXJldHVybiExfSx5dC5wcm90b3R5cGUuYWRkTm9kZT1mdW5jdGlvbih0LGUsbixyLG8pe3RoaXMudG9wLmNoaWxkcmVuLnNwbGljZSh0aGlzLmluZGV4KyssMCxydC5jcmVhdGUodGhpcy50b3AsdCxlLG4scixvKSksdGhpcy5jaGFuZ2VkPSEwfSx5dC5wcm90b3R5cGUucGxhY2VXaWRnZXQ9ZnVuY3Rpb24odCxlLG4pe2lmKHRoaXMuaW5kZXg8dGhpcy50b3AuY2hpbGRyZW4ubGVuZ3RoJiZ0aGlzLnRvcC5jaGlsZHJlblt0aGlzLmluZGV4XS5tYXRjaGVzV2lkZ2V0KHQpKXRoaXMuaW5kZXgrKztlbHNle3ZhciByPW5ldyB0dCh0aGlzLnRvcCx0LGUsbik7dGhpcy50b3AuY2hpbGRyZW4uc3BsaWNlKHRoaXMuaW5kZXgrKywwLHIpLHRoaXMuY2hhbmdlZD0hMH19LHl0LnByb3RvdHlwZS5hZGRUZXh0YmxvY2tIYWNrcz1mdW5jdGlvbigpe3ZhciB0PXRoaXMudG9wLmNoaWxkcmVuW3RoaXMuaW5kZXgtMV07d2hpbGUodCBpbnN0YW5jZW9mIG50KXQ9dC5jaGlsZHJlblt0LmNoaWxkcmVuLmxlbmd0aC0xXTtpZighdHx8ISh0IGluc3RhbmNlb2YgaXQpfHwvXG4kLy50ZXN0KHQubm9kZS50ZXh0KSlpZih0aGlzLmluZGV4PHRoaXMudG9wLmNoaWxkcmVuLmxlbmd0aCYmdGhpcy50b3AuY2hpbGRyZW5bdGhpcy5pbmRleF0ubWF0Y2hlc0hhY2soKSl0aGlzLmluZGV4Kys7ZWxzZXt2YXIgZT1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJiciIpO3RoaXMudG9wLmNoaWxkcmVuLnNwbGljZSh0aGlzLmluZGV4KyssMCxuZXcgc3QodGhpcy50b3AsWixlLG51bGwpKSx0aGlzLmNoYW5nZWQ9ITB9fTt2YXIgTHQ9cy5zYWZhcml8fHMuY2hyb21lJiZzLmNocm9tZV92ZXJzaW9uPDYzO2Z1bmN0aW9uIEp0KHQsZSl7dmFyIG49dC5kb2NWaWV3LmRvbUZyb21Qb3MoZSkscj1uLm5vZGUsbz1uLm9mZnNldCxpPW88ci5jaGlsZE5vZGVzLmxlbmd0aD9yLmNoaWxkTm9kZXNbb106bnVsbCxzPW8/ci5jaGlsZE5vZGVzW28tMV06bnVsbDtpZigoIWl8fCJmYWxzZSI9PWkuY29udGVudEVkaXRhYmxlKSYmKCFzfHwiZmFsc2UiPT1zLmNvbnRlbnRFZGl0YWJsZSkpe2lmKGkpcmV0dXJuIGkuY29udGVudEVkaXRhYmxlPSJ0cnVlIixpO2lmKHMpcmV0dXJuIHMuY29udGVudEVkaXRhYmxlPSJ0cnVlIixzfX1mdW5jdGlvbiBxdCh0KXt2YXIgZT10LmRvbS5vd25lckRvY3VtZW50O2UucmVtb3ZlRXZlbnRMaXN0ZW5lcigic2VsZWN0aW9uY2hhbmdlIix0LmhpZGVTZWxlY3Rpb25HdWFyZCk7dmFyIG49dC5yb290LmdldFNlbGVjdGlvbigpLHI9bi5hbmNob3JOb2RlLG89bi5hbmNob3JPZmZzZXQ7ZS5hZGRFdmVudExpc3RlbmVyKCJzZWxlY3Rpb25jaGFuZ2UiLHQuaGlkZVNlbGVjdGlvbkd1YXJkPWZ1bmN0aW9uKCl7bi5hbmNob3JOb2RlPT1yJiZuLmFuY2hvck9mZnNldD09b3x8KGUucmVtb3ZlRXZlbnRMaXN0ZW5lcigic2VsZWN0aW9uY2hhbmdlIix0LmhpZGVTZWxlY3Rpb25HdWFyZCksdC5kb20uY2xhc3NMaXN0LnJlbW92ZSgiUHJvc2VNaXJyb3ItaGlkZXNlbGVjdGlvbiIpKX0pfWZ1bmN0aW9uIFd0KHQpe3ZhciBlPXQucm9vdC5nZXRTZWxlY3Rpb24oKSxuPWRvY3VtZW50LmNyZWF0ZVJhbmdlKCkscj10LmN1cnNvcldyYXBwZXIuZG9tLG89IklNRyI9PXIubm9kZU5hbWU7bz9uLnNldEVuZChyLnBhcmVudE5vZGUsaChyKSsxKTpuLnNldEVuZChyLDApLG4uY29sbGFwc2UoITEpLGUucmVtb3ZlQWxsUmFuZ2VzKCksZS5hZGRSYW5nZShuKSwhbyYmIXQuc3RhdGUuc2VsZWN0aW9uLnZpc2libGUmJnMuaWUmJnMuaWVfdmVyc2lvbjw9MTEmJihyLmRpc2FibGVkPSEwLHIuZGlzYWJsZWQ9ITEpfWZ1bmN0aW9uIEh0KHQsZSl7aWYoZSBpbnN0YW5jZW9mIHIuTm9kZVNlbGVjdGlvbil7dmFyIG49dC5kb2NWaWV3LmRlc2NBdChlLmZyb20pO24hPXQubGFzdFNlbGVjdGVkVmlld0Rlc2MmJihLdCh0KSxuJiZuLnNlbGVjdE5vZGUoKSx0Lmxhc3RTZWxlY3RlZFZpZXdEZXNjPW4pfWVsc2UgS3QodCl9ZnVuY3Rpb24gS3QodCl7dC5sYXN0U2VsZWN0ZWRWaWV3RGVzYyYmKHQubGFzdFNlbGVjdGVkVmlld0Rlc2MucGFyZW50JiZ0Lmxhc3RTZWxlY3RlZFZpZXdEZXNjLmRlc2VsZWN0Tm9kZSgpLHQubGFzdFNlbGVjdGVkVmlld0Rlc2M9bnVsbCl9ZnVuY3Rpb24gVXQodCxlLG4sbyl7cmV0dXJuIHQuc29tZVByb3AoImNyZWF0ZVNlbGVjdGlvbkJldHdlZW4iLChmdW5jdGlvbihyKXtyZXR1cm4gcih0LGUsbil9KSl8fHIuVGV4dFNlbGVjdGlvbi5iZXR3ZWVuKGUsbixvKX1mdW5jdGlvbiBHdCh0KXtyZXR1cm4oIXQuZWRpdGFibGV8fHQucm9vdC5hY3RpdmVFbGVtZW50PT10LmRvbSkmJlh0KHQpfWZ1bmN0aW9uIFh0KHQpe3ZhciBlPXQucm9vdC5nZXRTZWxlY3Rpb24oKTtpZighZS5hbmNob3JOb2RlKXJldHVybiExO3RyeXtyZXR1cm4gdC5kb20uY29udGFpbnMoMz09ZS5hbmNob3JOb2RlLm5vZGVUeXBlP2UuYW5jaG9yTm9kZS5wYXJlbnROb2RlOmUuYW5jaG9yTm9kZSkmJih0LmVkaXRhYmxlfHx0LmRvbS5jb250YWlucygzPT1lLmZvY3VzTm9kZS5ub2RlVHlwZT9lLmZvY3VzTm9kZS5wYXJlbnROb2RlOmUuZm9jdXNOb2RlKSl9Y2F0Y2gobil7cmV0dXJuITF9fWZ1bmN0aW9uIFl0KHQpe3ZhciBlPXQuZG9jVmlldy5kb21Gcm9tUG9zKHQuc3RhdGUuc2VsZWN0aW9uLmFuY2hvciksbj10LnJvb3QuZ2V0U2VsZWN0aW9uKCk7cmV0dXJuIHYoZS5ub2RlLGUub2Zmc2V0LG4uYW5jaG9yTm9kZSxuLmFuY2hvck9mZnNldCl9ZnVuY3Rpb24gUXQodCxlLG4pe3ZhciByPXQuZG9jVmlldy5wYXJzZVJhbmdlKGUsbiksaT1yLm5vZGUsYT1yLmZyb21PZmZzZXQsYz1yLnRvT2Zmc2V0LGw9ci5mcm9tLHA9ci50byx1PXQucm9vdC5nZXRTZWxlY3Rpb24oKSxoPW51bGwsZj11LmFuY2hvck5vZGU7aWYoZiYmdC5kb20uY29udGFpbnMoMT09Zi5ub2RlVHlwZT9mOmYucGFyZW50Tm9kZSkmJihoPVt7bm9kZTpmLG9mZnNldDp1LmFuY2hvck9mZnNldH1dLHgodSl8fGgucHVzaCh7bm9kZTp1LmZvY3VzTm9kZSxvZmZzZXQ6dS5mb2N1c09mZnNldH0pKSxzLmNocm9tZSYmOD09PXQubGFzdEtleUNvZGUpZm9yKHZhciBkPWM7ZD5hO2QtLSl7dmFyIHY9aS5jaGlsZE5vZGVzW2QtMV0sbT12LnBtVmlld0Rlc2M7aWYoIkJSIj09di5ub2RlVHlwZSYmIW0pe2M9ZDticmVha31pZighbXx8bS5zaXplKWJyZWFrfXZhciB5PXQuc3RhdGUuZG9jLGc9dC5zb21lUHJvcCgiZG9tUGFyc2VyIil8fG8uRE9NUGFyc2VyLmZyb21TY2hlbWEodC5zdGF0ZS5zY2hlbWEpLHc9eS5yZXNvbHZlKGwpLGI9bnVsbCxrPWcucGFyc2UoaSx7dG9wTm9kZTp3LnBhcmVudCx0b3BNYXRjaDp3LnBhcmVudC5jb250ZW50TWF0Y2hBdCh3LmluZGV4KCkpLHRvcE9wZW46ITAsZnJvbTphLHRvOmMscHJlc2VydmVXaGl0ZXNwYWNlOiF3LnBhcmVudC50eXBlLnNwZWMuY29kZXx8ImZ1bGwiLGVkaXRhYmxlQ29udGVudDohMCxmaW5kUG9zaXRpb25zOmgscnVsZUZyb21Ob2RlOlp0KGcsdyksY29udGV4dDp3fSk7aWYoaCYmbnVsbCE9aFswXS5wb3Mpe3ZhciBTPWhbMF0ucG9zLEM9aFsxXSYmaFsxXS5wb3M7bnVsbD09QyYmKEM9UyksYj17YW5jaG9yOlMrbCxoZWFkOkMrbH19cmV0dXJue2RvYzprLHNlbDpiLGZyb206bCx0bzpwfX1mdW5jdGlvbiBadCh0LGUpe3JldHVybiBmdW5jdGlvbihuKXt2YXIgcj1uLnBtVmlld0Rlc2M7aWYocilyZXR1cm4gci5wYXJzZVJ1bGUoKTtpZigiQlIiPT1uLm5vZGVOYW1lJiZuLnBhcmVudE5vZGUpe2lmKHMuc2FmYXJpJiYvXih1bHxvbCkkL2kudGVzdChuLnBhcmVudE5vZGUubm9kZU5hbWUpKXJldHVybiB0Lm1hdGNoVGFnKGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImxpIiksZSk7aWYobi5wYXJlbnROb2RlLmxhc3RDaGlsZD09bnx8cy5zYWZhcmkmJi9eKHRyfHRhYmxlKSQvaS50ZXN0KG4ucGFyZW50Tm9kZS5ub2RlTmFtZSkpcmV0dXJue2lnbm9yZTohMH19ZWxzZSBpZigiSU1HIj09bi5ub2RlTmFtZSYmbi5nZXRBdHRyaWJ1dGUoIm1hcmstcGxhY2Vob2xkZXIiKSlyZXR1cm57aWdub3JlOiEwfX19ZnVuY3Rpb24gdGUodCxlLG4sbyl7aWYoZTwwKXt2YXIgaT10Lmxhc3RTZWxlY3Rpb25UaW1lPkRhdGUubm93KCktNTA/dC5sYXN0U2VsZWN0aW9uT3JpZ2luOm51bGwsYT0kdCh0LGkpO2lmKCF0LnN0YXRlLnNlbGVjdGlvbi5lcShhKSl7dmFyIGM9dC5zdGF0ZS50ci5zZXRTZWxlY3Rpb24oYSk7InBvaW50ZXIiPT1pP2Muc2V0TWV0YSgicG9pbnRlciIsITApOiJrZXkiPT1pJiZjLnNjcm9sbEludG9WaWV3KCksdC5kaXNwYXRjaChjKX19ZWxzZXt2YXIgbD10LnN0YXRlLmRvYy5yZXNvbHZlKGUpLHA9bC5zaGFyZWREZXB0aChuKTtlPWwuYmVmb3JlKHArMSksbj10LnN0YXRlLmRvYy5yZXNvbHZlKG4pLmFmdGVyKHArMSk7dmFyIHUsaCxmPXQuc3RhdGUuc2VsZWN0aW9uLGQ9UXQodCxlLG4pLHY9dC5zdGF0ZS5kb2MsbT12LnNsaWNlKGQuZnJvbSxkLnRvKTs4PT09dC5sYXN0S2V5Q29kZSYmRGF0ZS5ub3coKS0xMDA8dC5sYXN0S2V5Q29kZVRpbWU/KHU9dC5zdGF0ZS5zZWxlY3Rpb24udG8saD0iZW5kIik6KHU9dC5zdGF0ZS5zZWxlY3Rpb24uZnJvbSxoPSJzdGFydCIpLHQubGFzdEtleUNvZGU9bnVsbDt2YXIgeT1pZShtLmNvbnRlbnQsZC5kb2MuY29udGVudCxkLmZyb20sdSxoKTtpZih5KXt0LmRvbUNoYW5nZUNvdW50KyssdC5zdGF0ZS5zZWxlY3Rpb24uZnJvbTx0LnN0YXRlLnNlbGVjdGlvbi50byYmeS5zdGFydD09eS5lbmRCJiZ0LnN0YXRlLnNlbGVjdGlvbiBpbnN0YW5jZW9mIHIuVGV4dFNlbGVjdGlvbiYmKHkuc3RhcnQ+dC5zdGF0ZS5zZWxlY3Rpb24uZnJvbSYmeS5zdGFydDw9dC5zdGF0ZS5zZWxlY3Rpb24uZnJvbSsyP3kuc3RhcnQ9dC5zdGF0ZS5zZWxlY3Rpb24uZnJvbTp5LmVuZEE8dC5zdGF0ZS5zZWxlY3Rpb24udG8mJnkuZW5kQT49dC5zdGF0ZS5zZWxlY3Rpb24udG8tMiYmKHkuZW5kQis9dC5zdGF0ZS5zZWxlY3Rpb24udG8teS5lbmRBLHkuZW5kQT10LnN0YXRlLnNlbGVjdGlvbi50bykpO3ZhciBnLHc9ZC5kb2MucmVzb2x2ZU5vQ2FjaGUoeS5zdGFydC1kLmZyb20pLHg9ZC5kb2MucmVzb2x2ZU5vQ2FjaGUoeS5lbmRCLWQuZnJvbSk7aWYoISghdy5zYW1lUGFyZW50KHgpJiZ3LnBvczxkLmRvYy5jb250ZW50LnNpemUmJihnPXIuU2VsZWN0aW9uLmZpbmRGcm9tKGQuZG9jLnJlc29sdmUody5wb3MrMSksMSwhMCkpJiZnLmhlYWQ9PXgucG9zJiZ0LnNvbWVQcm9wKCJoYW5kbGVLZXlEb3duIiwoZnVuY3Rpb24oZSl7cmV0dXJuIGUodCxiKDEzLCJFbnRlciIpKX0pKSkpaWYodC5zdGF0ZS5zZWxlY3Rpb24uYW5jaG9yPnkuc3RhcnQmJnJlKHYseS5zdGFydCx5LmVuZEEsdyx4KSYmdC5zb21lUHJvcCgiaGFuZGxlS2V5RG93biIsKGZ1bmN0aW9uKGUpe3JldHVybiBlKHQsYig4LCJCYWNrc3BhY2UiKSl9KSkpcy5hbmRyb2lkJiZzLmNocm9tZSYmdC5kb21PYnNlcnZlci5zdXBwcmVzc1NlbGVjdGlvblVwZGF0ZXMoKTtlbHNle3ZhciBrLFMsQyxPLE09eS5zdGFydCxUPXkuZW5kQTtpZih3LnNhbWVQYXJlbnQoeCkmJncucGFyZW50LmlubGluZUNvbnRlbnQpaWYody5wb3M9PXgucG9zKXMuaWUmJnMuaWVfdmVyc2lvbjw9MTEmJjA9PXcucGFyZW50T2Zmc2V0JiYodC5kb21PYnNlcnZlci5zdXBwcmVzc1NlbGVjdGlvblVwZGF0ZXMoKSxzZXRUaW1lb3V0KChmdW5jdGlvbigpe3JldHVybiBWdCh0KX0pLDIwKSksaz10LnN0YXRlLnRyLmRlbGV0ZShNLFQpLFM9di5yZXNvbHZlKHkuc3RhcnQpLm1hcmtzQWNyb3NzKHYucmVzb2x2ZSh5LmVuZEEpKTtlbHNlIGlmKHkuZW5kQT09eS5lbmRCJiYoTz12LnJlc29sdmUoeS5zdGFydCkpJiYoQz1uZSh3LnBhcmVudC5jb250ZW50LmN1dCh3LnBhcmVudE9mZnNldCx4LnBhcmVudE9mZnNldCksTy5wYXJlbnQuY29udGVudC5jdXQoTy5wYXJlbnRPZmZzZXQseS5lbmRBLU8uc3RhcnQoKSkpKSlrPXQuc3RhdGUudHIsImFkZCI9PUMudHlwZT9rLmFkZE1hcmsoTSxULEMubWFyayk6ay5yZW1vdmVNYXJrKE0sVCxDLm1hcmspO2Vsc2UgaWYody5wYXJlbnQuY2hpbGQody5pbmRleCgpKS5pc1RleHQmJncuaW5kZXgoKT09eC5pbmRleCgpLSh4LnRleHRPZmZzZXQ/MDoxKSl7dmFyIE49dy5wYXJlbnQudGV4dEJldHdlZW4ody5wYXJlbnRPZmZzZXQseC5wYXJlbnRPZmZzZXQpO2lmKHQuc29tZVByb3AoImhhbmRsZVRleHRJbnB1dCIsKGZ1bmN0aW9uKGUpe3JldHVybiBlKHQsTSxULE4pfSkpKXJldHVybjtrPXQuc3RhdGUudHIuaW5zZXJ0VGV4dChOLE0sVCl9aWYoa3x8KGs9dC5zdGF0ZS50ci5yZXBsYWNlKE0sVCxkLmRvYy5zbGljZSh5LnN0YXJ0LWQuZnJvbSx5LmVuZEItZC5mcm9tKSkpLGQuc2VsKXt2YXIgRT1lZSh0LGsuZG9jLGQuc2VsKTtFJiZrLnNldFNlbGVjdGlvbihFKX1TJiZrLmVuc3VyZU1hcmtzKFMpLHQuZGlzcGF0Y2goay5zY3JvbGxJbnRvVmlldygpKX19ZWxzZSBpZighKG8mJmYgaW5zdGFuY2VvZiByLlRleHRTZWxlY3Rpb24mJiFmLmVtcHR5JiZmLiRoZWFkLnNhbWVQYXJlbnQoZi4kYW5jaG9yKSl8fHQuY29tcG9zaW5nfHxkLnNlbCYmZC5zZWwuYW5jaG9yIT1kLnNlbC5oZWFkKXtpZihkLnNlbCl7dmFyIEE9ZWUodCx0LnN0YXRlLmRvYyxkLnNlbCk7QSYmIUEuZXEodC5zdGF0ZS5zZWxlY3Rpb24pJiZ0LmRpc3BhdGNoKHQuc3RhdGUudHIuc2V0U2VsZWN0aW9uKEEpKX19ZWxzZXt2YXIgUj10LnN0YXRlLEQ9Ui5zZWxlY3Rpb247dC5kaXNwYXRjaChSLnRyLnJlcGxhY2VTZWxlY3Rpb25XaXRoKFIuc2NoZW1hLnRleHQoUi5kb2MudGV4dEJldHdlZW4oRC5mcm9tLEQudG8pKSwhMCkuc2Nyb2xsSW50b1ZpZXcoKSl9fX1mdW5jdGlvbiBlZSh0LGUsbil7cmV0dXJuIE1hdGgubWF4KG4uYW5jaG9yLG4uaGVhZCk+ZS5jb250ZW50LnNpemU/bnVsbDpVdCh0LGUucmVzb2x2ZShuLmFuY2hvciksZS5yZXNvbHZlKG4uaGVhZCkpfWZ1bmN0aW9uIG5lKHQsZSl7Zm9yKHZhciBuLHIsaSxzPXQuZmlyc3RDaGlsZC5tYXJrcyxhPWUuZmlyc3RDaGlsZC5tYXJrcyxjPXMsbD1hLHA9MDtwPGEubGVuZ3RoO3ArKyljPWFbcF0ucmVtb3ZlRnJvbVNldChjKTtmb3IodmFyIHU9MDt1PHMubGVuZ3RoO3UrKylsPXNbdV0ucmVtb3ZlRnJvbVNldChsKTtpZigxPT1jLmxlbmd0aCYmMD09bC5sZW5ndGgpcj1jWzBdLG49ImFkZCIsaT1mdW5jdGlvbih0KXtyZXR1cm4gdC5tYXJrKHIuYWRkVG9TZXQodC5tYXJrcykpfTtlbHNle2lmKDAhPWMubGVuZ3RofHwxIT1sLmxlbmd0aClyZXR1cm4gbnVsbDtyPWxbMF0sbj0icmVtb3ZlIixpPWZ1bmN0aW9uKHQpe3JldHVybiB0Lm1hcmsoci5yZW1vdmVGcm9tU2V0KHQubWFya3MpKX19Zm9yKHZhciBoPVtdLGY9MDtmPGUuY2hpbGRDb3VudDtmKyspaC5wdXNoKGkoZS5jaGlsZChmKSkpO2lmKG8uRnJhZ21lbnQuZnJvbShoKS5lcSh0KSlyZXR1cm57bWFyazpyLHR5cGU6bn19ZnVuY3Rpb24gcmUodCxlLG4scixvKXtpZighci5wYXJlbnQuaXNUZXh0YmxvY2t8fG4tZTw9by5wb3Mtci5wb3N8fG9lKHIsITAsITEpPG8ucG9zKXJldHVybiExO3ZhciBpPXQucmVzb2x2ZShlKTtpZihpLnBhcmVudE9mZnNldDxpLnBhcmVudC5jb250ZW50LnNpemV8fCFpLnBhcmVudC5pc1RleHRibG9jaylyZXR1cm4hMTt2YXIgcz10LnJlc29sdmUob2UoaSwhMCwhMCkpO3JldHVybiEoIXMucGFyZW50LmlzVGV4dGJsb2NrfHxzLnBvcz5ufHxvZShzLCEwLCExKTxuKSYmci5wYXJlbnQuY29udGVudC5jdXQoci5wYXJlbnRPZmZzZXQpLmVxKHMucGFyZW50LmNvbnRlbnQpfWZ1bmN0aW9uIG9lKHQsZSxuKXt2YXIgcj10LmRlcHRoLG89ZT90LmVuZCgpOnQucG9zO3doaWxlKHI+MCYmKGV8fHQuaW5kZXhBZnRlcihyKT09dC5ub2RlKHIpLmNoaWxkQ291bnQpKXItLSxvKyssZT0hMTtpZihuKXt2YXIgaT10Lm5vZGUocikubWF5YmVDaGlsZCh0LmluZGV4QWZ0ZXIocikpO3doaWxlKGkmJiFpLmlzTGVhZilpPWkuZmlyc3RDaGlsZCxvKyt9cmV0dXJuIG99ZnVuY3Rpb24gaWUodCxlLG4scixvKXt2YXIgaT10LmZpbmREaWZmU3RhcnQoZSxuKTtpZihudWxsPT1pKXJldHVybiBudWxsO3ZhciBzPXQuZmluZERpZmZFbmQoZSxuK3Quc2l6ZSxuK2Uuc2l6ZSksYT1zLmEsYz1zLmI7aWYoImVuZCI9PW8pe3ZhciBsPU1hdGgubWF4KDAsaS1NYXRoLm1pbihhLGMpKTtyLT1hK2wtaX1pZihhPGkmJnQuc2l6ZTxlLnNpemUpe3ZhciBwPXI8PWkmJnI+PWE/aS1yOjA7aS09cCxjPWkrKGMtYSksYT1pfWVsc2UgaWYoYzxpKXt2YXIgdT1yPD1pJiZyPj1jP2ktcjowO2ktPXUsYT1pKyhhLWMpLGM9aX1yZXR1cm57c3RhcnQ6aSxlbmRBOmEsZW5kQjpjfX1mdW5jdGlvbiBzZSh0LGUpe3ZhciBuPVtdLHI9ZS5jb250ZW50LGk9ZS5vcGVuU3RhcnQscz1lLm9wZW5FbmQ7d2hpbGUoaT4xJiZzPjEmJjE9PXIuY2hpbGRDb3VudCYmMT09ci5maXJzdENoaWxkLmNoaWxkQ291bnQpe2ktLSxzLS07dmFyIGE9ci5maXJzdENoaWxkO24ucHVzaChhLnR5cGUubmFtZSxhLnR5cGUuaGFzUmVxdWlyZWRBdHRycygpP2EuYXR0cnM6bnVsbCkscj1hLmNvbnRlbnR9dmFyIGM9dC5zb21lUHJvcCgiY2xpcGJvYXJkU2VyaWFsaXplciIpfHxvLkRPTVNlcmlhbGl6ZXIuZnJvbVNjaGVtYSh0LnN0YXRlLnNjaGVtYSksbD1tZSgpLHA9bC5jcmVhdGVFbGVtZW50KCJkaXYiKTtwLmFwcGVuZENoaWxkKGMuc2VyaWFsaXplRnJhZ21lbnQocix7ZG9jdW1lbnQ6bH0pKTt2YXIgdSxoPXAuZmlyc3RDaGlsZDt3aGlsZShoJiYxPT1oLm5vZGVUeXBlJiYodT1kZVtoLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCldKSl7Zm9yKHZhciBmPXUubGVuZ3RoLTE7Zj49MDtmLS0pe3ZhciBkPWwuY3JlYXRlRWxlbWVudCh1W2ZdKTt3aGlsZShwLmZpcnN0Q2hpbGQpZC5hcHBlbmRDaGlsZChwLmZpcnN0Q2hpbGQpO3AuYXBwZW5kQ2hpbGQoZCl9aD1wLmZpcnN0Q2hpbGR9aCYmMT09aC5ub2RlVHlwZSYmaC5zZXRBdHRyaWJ1dGUoImRhdGEtcG0tc2xpY2UiLGkrIiAiK3MrIiAiK0pTT04uc3RyaW5naWZ5KG4pKTt2YXIgdj10LnNvbWVQcm9wKCJjbGlwYm9hcmRUZXh0U2VyaWFsaXplciIsKGZ1bmN0aW9uKHQpe3JldHVybiB0KGUpfSkpfHxlLmNvbnRlbnQudGV4dEJldHdlZW4oMCxlLmNvbnRlbnQuc2l6ZSwiXG5cbiIpO3JldHVybntkb206cCx0ZXh0OnZ9fWZ1bmN0aW9uIGFlKHQsZSxuLHIsaSl7dmFyIHMsYSxjPWkucGFyZW50LnR5cGUuc3BlYy5jb2RlO2lmKCFuJiYhZSlyZXR1cm4gbnVsbDt2YXIgbD1lJiYocnx8Y3x8IW4pO2lmKGwpe2lmKHQuc29tZVByb3AoInRyYW5zZm9ybVBhc3RlZFRleHQiLChmdW5jdGlvbih0KXtlPXQoZSl9KSksYylyZXR1cm4gbmV3IG8uU2xpY2Uoby5GcmFnbWVudC5mcm9tKHQuc3RhdGUuc2NoZW1hLnRleHQoZSkpLDAsMCk7dmFyIHA9dC5zb21lUHJvcCgiY2xpcGJvYXJkVGV4dFBhcnNlciIsKGZ1bmN0aW9uKHQpe3JldHVybiB0KGUsaSl9KSk7cD9hPXA6KHM9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2IiksZS50cmltKCkuc3BsaXQoLyg/OlxyXG4/fFxuKSsvKS5mb3JFYWNoKChmdW5jdGlvbih0KXtzLmFwcGVuZENoaWxkKGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoInAiKSkudGV4dENvbnRlbnQ9dH0pKSl9ZWxzZSB0LnNvbWVQcm9wKCJ0cmFuc2Zvcm1QYXN0ZWRIVE1MIiwoZnVuY3Rpb24odCl7bj10KG4pfSkpLHM9eWUobik7dmFyIHU9cyYmcy5xdWVyeVNlbGVjdG9yKCJbZGF0YS1wbS1zbGljZV0iKSxoPXUmJi9eKFxkKykgKFxkKykgKC4qKS8uZXhlYyh1LmdldEF0dHJpYnV0ZSgiZGF0YS1wbS1zbGljZSIpKTtpZighYSl7dmFyIGY9dC5zb21lUHJvcCgiY2xpcGJvYXJkUGFyc2VyIil8fHQuc29tZVByb3AoImRvbVBhcnNlciIpfHxvLkRPTVBhcnNlci5mcm9tU2NoZW1hKHQuc3RhdGUuc2NoZW1hKTthPWYucGFyc2VTbGljZShzLHtwcmVzZXJ2ZVdoaXRlc3BhY2U6ISghbCYmIWgpLGNvbnRleHQ6aX0pfXJldHVybiBhPWg/Z2UoZmUoYSwraFsxXSwraFsyXSksaFszXSk6by5TbGljZS5tYXhPcGVuKGNlKGEuY29udGVudCxpKSwhMSksdC5zb21lUHJvcCgidHJhbnNmb3JtUGFzdGVkIiwoZnVuY3Rpb24odCl7YT10KGEpfSkpLGF9ZnVuY3Rpb24gY2UodCxlKXtpZih0LmNoaWxkQ291bnQ8MilyZXR1cm4gdDtmb3IodmFyIG49ZnVuY3Rpb24obil7dmFyIHI9ZS5ub2RlKG4pLGk9ci5jb250ZW50TWF0Y2hBdChlLmluZGV4KG4pKSxzPXZvaWQgMCxhPVtdO2lmKHQuZm9yRWFjaCgoZnVuY3Rpb24odCl7aWYoYSl7dmFyIGUsbj1pLmZpbmRXcmFwcGluZyh0LnR5cGUpO2lmKCFuKXJldHVybiBhPW51bGw7aWYoZT1hLmxlbmd0aCYmcy5sZW5ndGgmJnBlKG4scyx0LGFbYS5sZW5ndGgtMV0sMCkpYVthLmxlbmd0aC0xXT1lO2Vsc2V7YS5sZW5ndGgmJihhW2EubGVuZ3RoLTFdPXVlKGFbYS5sZW5ndGgtMV0scy5sZW5ndGgpKTt2YXIgcj1sZSh0LG4pO2EucHVzaChyKSxpPWkubWF0Y2hUeXBlKHIudHlwZSxyLmF0dHJzKSxzPW59fX0pKSxhKXJldHVybnt2Om8uRnJhZ21lbnQuZnJvbShhKX19LHI9ZS5kZXB0aDtyPj0wO3ItLSl7dmFyIGk9bihyKTtpZihpKXJldHVybiBpLnZ9cmV0dXJuIHR9ZnVuY3Rpb24gbGUodCxlLG4pe3ZvaWQgMD09PW4mJihuPTApO2Zvcih2YXIgcj1lLmxlbmd0aC0xO3I+PW47ci0tKXQ9ZVtyXS5jcmVhdGUobnVsbCxvLkZyYWdtZW50LmZyb20odCkpO3JldHVybiB0fWZ1bmN0aW9uIHBlKHQsZSxuLHIsaSl7aWYoaTx0Lmxlbmd0aCYmaTxlLmxlbmd0aCYmdFtpXT09ZVtpXSl7dmFyIHM9cGUodCxlLG4sci5sYXN0Q2hpbGQsaSsxKTtpZihzKXJldHVybiByLmNvcHkoci5jb250ZW50LnJlcGxhY2VDaGlsZChyLmNoaWxkQ291bnQtMSxzKSk7dmFyIGE9ci5jb250ZW50TWF0Y2hBdChyLmNoaWxkQ291bnQpO2lmKGEubWF0Y2hUeXBlKGk9PXQubGVuZ3RoLTE/bi50eXBlOnRbaSsxXSkpcmV0dXJuIHIuY29weShyLmNvbnRlbnQuYXBwZW5kKG8uRnJhZ21lbnQuZnJvbShsZShuLHQsaSsxKSkpKX19ZnVuY3Rpb24gdWUodCxlKXtpZigwPT1lKXJldHVybiB0O3ZhciBuPXQuY29udGVudC5yZXBsYWNlQ2hpbGQodC5jaGlsZENvdW50LTEsdWUodC5sYXN0Q2hpbGQsZS0xKSkscj10LmNvbnRlbnRNYXRjaEF0KHQuY2hpbGRDb3VudCkuZmlsbEJlZm9yZShvLkZyYWdtZW50LmVtcHR5LCEwKTtyZXR1cm4gdC5jb3B5KG4uYXBwZW5kKHIpKX1mdW5jdGlvbiBoZSh0LGUsbixyLGkscyl7dmFyIGE9ZTwwP3QuZmlyc3RDaGlsZDp0Lmxhc3RDaGlsZCxjPWEuY29udGVudDtyZXR1cm4gaTxyLTEmJihjPWhlKGMsZSxuLHIsaSsxLHMpKSxpPj1uJiYoYz1lPDA/YS5jb250ZW50TWF0Y2hBdCgwKS5maWxsQmVmb3JlKGMsdC5jaGlsZENvdW50PjF8fHM8PWkpLmFwcGVuZChjKTpjLmFwcGVuZChhLmNvbnRlbnRNYXRjaEF0KGEuY2hpbGRDb3VudCkuZmlsbEJlZm9yZShvLkZyYWdtZW50LmVtcHR5LCEwKSkpLHQucmVwbGFjZUNoaWxkKGU8MD8wOnQuY2hpbGRDb3VudC0xLGEuY29weShjKSl9ZnVuY3Rpb24gZmUodCxlLG4pe3JldHVybiBlPHQub3BlblN0YXJ0JiYodD1uZXcgby5TbGljZShoZSh0LmNvbnRlbnQsLTEsZSx0Lm9wZW5TdGFydCwwLHQub3BlbkVuZCksZSx0Lm9wZW5FbmQpKSxuPHQub3BlbkVuZCYmKHQ9bmV3IG8uU2xpY2UoaGUodC5jb250ZW50LDEsbix0Lm9wZW5FbmQsMCwwKSx0Lm9wZW5TdGFydCxuKSksdH12YXIgZGU9e3RoZWFkOlsidGFibGUiXSxjb2xncm91cDpbInRhYmxlIl0sY29sOlsidGFibGUiLCJjb2xncm91cCJdLHRyOlsidGFibGUiLCJ0Ym9keSJdLHRkOlsidGFibGUiLCJ0Ym9keSIsInRyIl0sdGg6WyJ0YWJsZSIsInRib2R5IiwidHIiXX0sdmU9bnVsbDtmdW5jdGlvbiBtZSgpe3JldHVybiB2ZXx8KHZlPWRvY3VtZW50LmltcGxlbWVudGF0aW9uLmNyZWF0ZUhUTUxEb2N1bWVudCgidGl0bGUiKSl9ZnVuY3Rpb24geWUodCl7dmFyIGU9Lyhccyo8bWV0YSBbXj5dKj4pKi8uZXhlYyh0KTtlJiYodD10LnNsaWNlKGVbMF0ubGVuZ3RoKSk7dmFyIG4scj1tZSgpLmNyZWF0ZUVsZW1lbnQoImRpdiIpLG89Lyg/OjxtZXRhIFtePl0qPikqPChbYS16XVtePlxzXSspL2kuZXhlYyh0KSxpPTA7KG49byYmZGVbb1sxXS50b0xvd2VyQ2FzZSgpXSkmJih0PW4ubWFwKChmdW5jdGlvbih0KXtyZXR1cm4iPCIrdCsiPiJ9KSkuam9pbigiIikrdCtuLm1hcCgoZnVuY3Rpb24odCl7cmV0dXJuIjwvIit0KyI+In0pKS5yZXZlcnNlKCkuam9pbigiIiksaT1uLmxlbmd0aCksci5pbm5lckhUTUw9dDtmb3IodmFyIHM9MDtzPGk7cysrKXI9ci5maXJzdENoaWxkO3JldHVybiByfWZ1bmN0aW9uIGdlKHQsZSl7aWYoIXQuc2l6ZSlyZXR1cm4gdDt2YXIgbixyPXQuY29udGVudC5maXJzdENoaWxkLnR5cGUuc2NoZW1hO3RyeXtuPUpTT04ucGFyc2UoZSl9Y2F0Y2gocCl7cmV0dXJuIHR9Zm9yKHZhciBpPXQuY29udGVudCxzPXQub3BlblN0YXJ0LGE9dC5vcGVuRW5kLGM9bi5sZW5ndGgtMjtjPj0wO2MtPTIpe3ZhciBsPXIubm9kZXNbbltjXV07aWYoIWx8fGwuaGFzUmVxdWlyZWRBdHRycygpKWJyZWFrO2k9by5GcmFnbWVudC5mcm9tKGwuY3JlYXRlKG5bYysxXSxpKSkscysrLGErK31yZXR1cm4gbmV3IG8uU2xpY2UoaSxzLGEpfXZhciB3ZT17Y2hpbGRMaXN0OiEwLGNoYXJhY3RlckRhdGE6ITAsYXR0cmlidXRlczohMCxzdWJ0cmVlOiEwLGNoYXJhY3RlckRhdGFPbGRWYWx1ZTohMH0seGU9cy5pZSYmcy5pZV92ZXJzaW9uPD0xMSxiZT1mdW5jdGlvbigpe3RoaXMuYW5jaG9yTm9kZT10aGlzLmFuY2hvck9mZnNldD10aGlzLmZvY3VzTm9kZT10aGlzLmZvY3VzT2Zmc2V0PW51bGx9O2JlLnByb3RvdHlwZS5zZXQ9ZnVuY3Rpb24odCl7dGhpcy5hbmNob3JOb2RlPXQuYW5jaG9yTm9kZSx0aGlzLmFuY2hvck9mZnNldD10LmFuY2hvck9mZnNldCx0aGlzLmZvY3VzTm9kZT10LmZvY3VzTm9kZSx0aGlzLmZvY3VzT2Zmc2V0PXQuZm9jdXNPZmZzZXR9LGJlLnByb3RvdHlwZS5lcT1mdW5jdGlvbih0KXtyZXR1cm4gdC5hbmNob3JOb2RlPT10aGlzLmFuY2hvck5vZGUmJnQuYW5jaG9yT2Zmc2V0PT10aGlzLmFuY2hvck9mZnNldCYmdC5mb2N1c05vZGU9PXRoaXMuZm9jdXNOb2RlJiZ0LmZvY3VzT2Zmc2V0PT10aGlzLmZvY3VzT2Zmc2V0fTt2YXIga2U9ZnVuY3Rpb24odCxlKXt2YXIgbj10aGlzO3RoaXMudmlldz10LHRoaXMuaGFuZGxlRE9NQ2hhbmdlPWUsdGhpcy5xdWV1ZT1bXSx0aGlzLmZsdXNoaW5nU29vbj0hMSx0aGlzLm9ic2VydmVyPXdpbmRvdy5NdXRhdGlvbk9ic2VydmVyJiZuZXcgd2luZG93Lk11dGF0aW9uT2JzZXJ2ZXIoKGZ1bmN0aW9uKHQpe2Zvcih2YXIgZT0wO2U8dC5sZW5ndGg7ZSsrKW4ucXVldWUucHVzaCh0W2VdKTtzLmllJiZzLmllX3ZlcnNpb248PTExJiZ0LnNvbWUoKGZ1bmN0aW9uKHQpe3JldHVybiJjaGlsZExpc3QiPT10LnR5cGUmJjE9PXQucmVtb3ZlZE5vZGVzLmxlbmd0aCYmdC5yZW1vdmVkTm9kZXNbMF0ucGFyZW50Tm9kZT09dC50YXJnZXR8fCJjaGFyYWN0ZXJEYXRhIj09dC50eXBlJiZ0Lm9sZFZhbHVlLmxlbmd0aD50LnRhcmdldC5ub2RlVmFsdWUubGVuZ3RofSkpP24uZmx1c2hTb29uKCk6bi5mbHVzaCgpfSkpLHRoaXMuY3VycmVudFNlbGVjdGlvbj1uZXcgYmUseGUmJih0aGlzLm9uQ2hhckRhdGE9ZnVuY3Rpb24odCl7bi5xdWV1ZS5wdXNoKHt0YXJnZXQ6dC50YXJnZXQsdHlwZToiY2hhcmFjdGVyRGF0YSIsb2xkVmFsdWU6dC5wcmV2VmFsdWV9KSxuLmZsdXNoU29vbigpfSksdGhpcy5vblNlbGVjdGlvbkNoYW5nZT10aGlzLm9uU2VsZWN0aW9uQ2hhbmdlLmJpbmQodGhpcyksdGhpcy5zdXBwcmVzc2luZ1NlbGVjdGlvblVwZGF0ZXM9ITF9O2tlLnByb3RvdHlwZS5mbHVzaFNvb249ZnVuY3Rpb24oKXt2YXIgdD10aGlzO3RoaXMuZmx1c2hpbmdTb29ufHwodGhpcy5mbHVzaGluZ1Nvb249ITAsd2luZG93LnNldFRpbWVvdXQoKGZ1bmN0aW9uKCl7dC5mbHVzaGluZ1Nvb249ITEsdC5mbHVzaCgpfSksMjApKX0sa2UucHJvdG90eXBlLnN0YXJ0PWZ1bmN0aW9uKCl7dGhpcy5vYnNlcnZlciYmdGhpcy5vYnNlcnZlci5vYnNlcnZlKHRoaXMudmlldy5kb20sd2UpLHhlJiZ0aGlzLnZpZXcuZG9tLmFkZEV2ZW50TGlzdGVuZXIoIkRPTUNoYXJhY3RlckRhdGFNb2RpZmllZCIsdGhpcy5vbkNoYXJEYXRhKSx0aGlzLmNvbm5lY3RTZWxlY3Rpb24oKX0sa2UucHJvdG90eXBlLnN0b3A9ZnVuY3Rpb24oKXt2YXIgdD10aGlzLGU9dGhpcy5vYnNlcnZlci50YWtlUmVjb3JkcygpO2lmKGUubGVuZ3RoKXtmb3IodmFyIG49MDtuPGUubGVuZ3RoO24rKyl0LnF1ZXVlLnB1c2goZVtuXSk7d2luZG93LnNldFRpbWVvdXQoKGZ1bmN0aW9uKCl7cmV0dXJuIHQuZmx1c2goKX0pLDIwKX10aGlzLm9ic2VydmVyJiZ0aGlzLm9ic2VydmVyLmRpc2Nvbm5lY3QoKSx4ZSYmdGhpcy52aWV3LmRvbS5yZW1vdmVFdmVudExpc3RlbmVyKCJET01DaGFyYWN0ZXJEYXRhTW9kaWZpZWQiLHRoaXMub25DaGFyRGF0YSksdGhpcy5kaXNjb25uZWN0U2VsZWN0aW9uKCl9LGtlLnByb3RvdHlwZS5jb25uZWN0U2VsZWN0aW9uPWZ1bmN0aW9uKCl7dGhpcy52aWV3LmRvbS5vd25lckRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoInNlbGVjdGlvbmNoYW5nZSIsdGhpcy5vblNlbGVjdGlvbkNoYW5nZSl9LGtlLnByb3RvdHlwZS5kaXNjb25uZWN0U2VsZWN0aW9uPWZ1bmN0aW9uKCl7dGhpcy52aWV3LmRvbS5vd25lckRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoInNlbGVjdGlvbmNoYW5nZSIsdGhpcy5vblNlbGVjdGlvbkNoYW5nZSl9LGtlLnByb3RvdHlwZS5zdXBwcmVzc1NlbGVjdGlvblVwZGF0ZXM9ZnVuY3Rpb24oKXt2YXIgdD10aGlzO3RoaXMuc3VwcHJlc3NpbmdTZWxlY3Rpb25VcGRhdGVzPSEwLHNldFRpbWVvdXQoKGZ1bmN0aW9uKCl7cmV0dXJuIHQuc3VwcHJlc3NpbmdTZWxlY3Rpb25VcGRhdGVzPSExfSksNTApfSxrZS5wcm90b3R5cGUub25TZWxlY3Rpb25DaGFuZ2U9ZnVuY3Rpb24oKXtpZihHdCh0aGlzLnZpZXcpKXtpZih0aGlzLnN1cHByZXNzaW5nU2VsZWN0aW9uVXBkYXRlcylyZXR1cm4gVnQodGhpcy52aWV3KTtpZihzLmllJiZzLmllX3ZlcnNpb248PTExJiYhdGhpcy52aWV3LnN0YXRlLnNlbGVjdGlvbi5lbXB0eSl7dmFyIHQ9dGhpcy52aWV3LnJvb3QuZ2V0U2VsZWN0aW9uKCk7aWYodC5mb2N1c05vZGUmJnYodC5mb2N1c05vZGUsdC5mb2N1c09mZnNldCx0LmFuY2hvck5vZGUsdC5hbmNob3JPZmZzZXQpKXJldHVybiB0aGlzLmZsdXNoU29vbigpfXRoaXMuZmx1c2goKX19LGtlLnByb3RvdHlwZS5zZXRDdXJTZWxlY3Rpb249ZnVuY3Rpb24oKXt0aGlzLmN1cnJlbnRTZWxlY3Rpb24uc2V0KHRoaXMudmlldy5yb290LmdldFNlbGVjdGlvbigpKX0sa2UucHJvdG90eXBlLmlnbm9yZVNlbGVjdGlvbkNoYW5nZT1mdW5jdGlvbih0KXtpZigwPT10LnJhbmdlQ291bnQpcmV0dXJuITA7dmFyIGU9dC5nZXRSYW5nZUF0KDApLmNvbW1vbkFuY2VzdG9yQ29udGFpbmVyLG49dGhpcy52aWV3LmRvY1ZpZXcubmVhcmVzdERlc2MoZSk7cmV0dXJuIG4mJm4uaWdub3JlTXV0YXRpb24oe3R5cGU6InNlbGVjdGlvbiIsdGFyZ2V0OjM9PWUubm9kZVR5cGU/ZS5wYXJlbnROb2RlOmV9KX0sa2UucHJvdG90eXBlLmZsdXNoPWZ1bmN0aW9uKCl7dmFyIHQ9dGhpcztpZih0aGlzLnZpZXcuZG9jVmlldyYmIXRoaXMuZmx1c2hpbmdTb29uKXt2YXIgZT10aGlzLm9ic2VydmVyLnRha2VSZWNvcmRzKCk7dGhpcy5xdWV1ZS5sZW5ndGgmJihlPXRoaXMucXVldWUuY29uY2F0KGUpLHRoaXMucXVldWUubGVuZ3RoPTApO3ZhciBuPXRoaXMudmlldy5yb290LmdldFNlbGVjdGlvbigpLHI9IXRoaXMuc3VwcHJlc3NpbmdTZWxlY3Rpb25VcGRhdGVzJiYhdGhpcy5jdXJyZW50U2VsZWN0aW9uLmVxKG4pJiZYdCh0aGlzLnZpZXcpJiYhdGhpcy5pZ25vcmVTZWxlY3Rpb25DaGFuZ2Uobiksbz0tMSxpPS0xLHM9ITE7aWYodGhpcy52aWV3LmVkaXRhYmxlKWZvcih2YXIgYT0wO2E8ZS5sZW5ndGg7YSsrKXt2YXIgYz10LnJlZ2lzdGVyTXV0YXRpb24oZVthXSk7YyYmKG89bzwwP2MuZnJvbTpNYXRoLm1pbihjLmZyb20sbyksaT1pPDA/Yy50bzpNYXRoLm1heChjLnRvLGkpLGMudHlwZU92ZXImJiF0LnZpZXcuY29tcG9zaW5nJiYocz0hMCkpfShvPi0xfHxyKSYmKG8+LTEmJnRoaXMudmlldy5kb2NWaWV3Lm1hcmtEaXJ0eShvLGkpLHRoaXMuaGFuZGxlRE9NQ2hhbmdlKG8saSxzKSx0aGlzLnZpZXcuZG9jVmlldy5kaXJ0eT90aGlzLnZpZXcudXBkYXRlU3RhdGUodGhpcy52aWV3LnN0YXRlKTp0aGlzLmN1cnJlbnRTZWxlY3Rpb24uZXEobil8fFZ0KHRoaXMudmlldykpfX0sa2UucHJvdG90eXBlLnJlZ2lzdGVyTXV0YXRpb249ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy52aWV3LmRvY1ZpZXcubmVhcmVzdERlc2ModC50YXJnZXQpO2lmKCJhdHRyaWJ1dGVzIj09dC50eXBlJiYoZT09dGhpcy52aWV3LmRvY1ZpZXd8fCJjb250ZW50ZWRpdGFibGUiPT10LmF0dHJpYnV0ZU5hbWV8fCJzdHlsZSI9PXQuYXR0cmlidXRlTmFtZSYmIXQub2xkVmFsdWUmJiF0LnRhcmdldC5nZXRBdHRyaWJ1dGUoInN0eWxlIikpKXJldHVybiBudWxsO2lmKCFlfHxlLmlnbm9yZU11dGF0aW9uKHQpKXJldHVybiBudWxsO2lmKCJjaGlsZExpc3QiPT10LnR5cGUpe3ZhciBuPXQucHJldmlvdXNTaWJsaW5nLHI9dC5uZXh0U2libGluZztpZihzLmllJiZzLmllX3ZlcnNpb248PTExKXt3aGlsZShuJiYiQlIiPT1uLm5vZGVOYW1lKW49bi5wcmV2aW91c1NpYmxpbmc7d2hpbGUociYmIkJSIj09ci5ub2RlTmFtZSlyPXIucHJldmlvdXNTaWJsaW5nfXZhciBvPW4mJm4ucGFyZW50Tm9kZT09dC50YXJnZXQ/aChuKSsxOjAsaT1lLmxvY2FsUG9zRnJvbURPTSh0LnRhcmdldCxvLC0xKSxhPXImJnIucGFyZW50Tm9kZT09dC50YXJnZXQ/aChyKTp0LnRhcmdldC5jaGlsZE5vZGVzLmxlbmd0aCxjPWUubG9jYWxQb3NGcm9tRE9NKHQudGFyZ2V0LGEsMSk7cmV0dXJue2Zyb206aSx0bzpjfX1yZXR1cm4iYXR0cmlidXRlcyI9PXQudHlwZT97ZnJvbTplLnBvc0F0U3RhcnQtZS5ib3JkZXIsdG86ZS5wb3NBdEVuZCtlLmJvcmRlcn06e2Zyb206ZS5wb3NBdFN0YXJ0LHRvOmUucG9zQXRFbmQsdHlwZU92ZXI6dC50YXJnZXQubm9kZVZhbHVlPT10Lm9sZFZhbHVlfX07dmFyIFNlPXt9LENlPXt9O2Z1bmN0aW9uIE9lKHQpe3Quc2hpZnRLZXk9ITEsdC5tb3VzZURvd249bnVsbCx0Lmxhc3RLZXlDb2RlPW51bGwsdC5sYXN0S2V5Q29kZVRpbWU9MCx0Lmxhc3RDbGljaz17dGltZTowLHg6MCx5OjAsdHlwZToiIn0sdC5sYXN0U2VsZWN0aW9uT3JpZ2luPW51bGwsdC5sYXN0U2VsZWN0aW9uVGltZT0wLHQuY29tcG9zaW5nPSExLHQuY29tcG9zaW5nVGltZW91dD1udWxsLHQuY29tcG9zaXRpb25Ob2Rlcz1bXSx0LmNvbXBvc2l0aW9uRW5kZWRBdD0tMmU4LHQuZG9tT2JzZXJ2ZXI9bmV3IGtlKHQsKGZ1bmN0aW9uKGUsbixyKXtyZXR1cm4gdGUodCxlLG4scil9KSksdC5kb21PYnNlcnZlci5zdGFydCgpLHQuZG9tQ2hhbmdlQ291bnQ9MCx0LmV2ZW50SGFuZGxlcnM9T2JqZWN0LmNyZWF0ZShudWxsKTt2YXIgZT1mdW5jdGlvbihlKXt2YXIgbj1TZVtlXTt0LmRvbS5hZGRFdmVudExpc3RlbmVyKGUsdC5ldmVudEhhbmRsZXJzW2VdPWZ1bmN0aW9uKGUpeyFBZSh0LGUpfHxFZSh0LGUpfHwhdC5lZGl0YWJsZSYmZS50eXBlIGluIENlfHxuKHQsZSl9KX07Zm9yKHZhciBuIGluIFNlKWUobik7cy5zYWZhcmkmJnQuZG9tLmFkZEV2ZW50TGlzdGVuZXIoImlucHV0IiwoZnVuY3Rpb24oKXtyZXR1cm4gbnVsbH0pKSxOZSh0KX1mdW5jdGlvbiBNZSh0LGUpe3QubGFzdFNlbGVjdGlvbk9yaWdpbj1lLHQubGFzdFNlbGVjdGlvblRpbWU9RGF0ZS5ub3coKX1mdW5jdGlvbiBUZSh0KXtmb3IodmFyIGUgaW4gdC5kb21PYnNlcnZlci5zdG9wKCksdC5ldmVudEhhbmRsZXJzKXQuZG9tLnJlbW92ZUV2ZW50TGlzdGVuZXIoZSx0LmV2ZW50SGFuZGxlcnNbZV0pO2NsZWFyVGltZW91dCh0LmNvbXBvc2luZ1RpbWVvdXQpfWZ1bmN0aW9uIE5lKHQpe3Quc29tZVByb3AoImhhbmRsZURPTUV2ZW50cyIsKGZ1bmN0aW9uKGUpe2Zvcih2YXIgbiBpbiBlKXQuZXZlbnRIYW5kbGVyc1tuXXx8dC5kb20uYWRkRXZlbnRMaXN0ZW5lcihuLHQuZXZlbnRIYW5kbGVyc1tuXT1mdW5jdGlvbihlKXtyZXR1cm4gRWUodCxlKX0pfSkpfWZ1bmN0aW9uIEVlKHQsZSl7cmV0dXJuIHQuc29tZVByb3AoImhhbmRsZURPTUV2ZW50cyIsKGZ1bmN0aW9uKG4pe3ZhciByPW5bZS50eXBlXTtyZXR1cm4hIXImJihyKHQsZSl8fGUuZGVmYXVsdFByZXZlbnRlZCl9KSl9ZnVuY3Rpb24gQWUodCxlKXtpZighZS5idWJibGVzKXJldHVybiEwO2lmKGUuZGVmYXVsdFByZXZlbnRlZClyZXR1cm4hMTtmb3IodmFyIG49ZS50YXJnZXQ7biE9dC5kb207bj1uLnBhcmVudE5vZGUpaWYoIW58fDExPT1uLm5vZGVUeXBlfHxuLnBtVmlld0Rlc2MmJm4ucG1WaWV3RGVzYy5zdG9wRXZlbnQoZSkpcmV0dXJuITE7cmV0dXJuITB9ZnVuY3Rpb24gUmUodCxlKXtFZSh0LGUpfHwhU2VbZS50eXBlXXx8IXQuZWRpdGFibGUmJmUudHlwZSBpbiBDZXx8U2VbZS50eXBlXSh0LGUpfWZ1bmN0aW9uIERlKHQpe3JldHVybntsZWZ0OnQuY2xpZW50WCx0b3A6dC5jbGllbnRZfX1mdW5jdGlvbiB6ZSh0LGUpe3ZhciBuPWUueC10LmNsaWVudFgscj1lLnktdC5jbGllbnRZO3JldHVybiBuKm4rcipyPDEwMH1mdW5jdGlvbiBQZSh0LGUsbixyLG8pe2lmKC0xPT1yKXJldHVybiExO2Zvcih2YXIgaT10LnN0YXRlLmRvYy5yZXNvbHZlKHIpLHM9ZnVuY3Rpb24ocil7aWYodC5zb21lUHJvcChlLChmdW5jdGlvbihlKXtyZXR1cm4gcj5pLmRlcHRoP2UodCxuLGkubm9kZUFmdGVyLGkuYmVmb3JlKHIpLG8sITApOmUodCxuLGkubm9kZShyKSxpLmJlZm9yZShyKSxvLCExKX0pKSlyZXR1cm57djohMH19LGE9aS5kZXB0aCsxO2E+MDthLS0pe3ZhciBjPXMoYSk7aWYoYylyZXR1cm4gYy52fXJldHVybiExfWZ1bmN0aW9uIEllKHQsZSxuKXt0LmZvY3VzZWR8fHQuZm9jdXMoKTt2YXIgcj10LnN0YXRlLnRyLnNldFNlbGVjdGlvbihlKTsicG9pbnRlciI9PW4mJnIuc2V0TWV0YSgicG9pbnRlciIsITApLHQuZGlzcGF0Y2gocil9ZnVuY3Rpb24gX2UodCxlKXtpZigtMT09ZSlyZXR1cm4hMTt2YXIgbj10LnN0YXRlLmRvYy5yZXNvbHZlKGUpLG89bi5ub2RlQWZ0ZXI7cmV0dXJuISEobyYmby5pc0F0b20mJnIuTm9kZVNlbGVjdGlvbi5pc1NlbGVjdGFibGUobykpJiYoSWUodCxuZXcgci5Ob2RlU2VsZWN0aW9uKG4pLCJwb2ludGVyIiksITApfWZ1bmN0aW9uIEZlKHQsZSl7aWYoLTE9PWUpcmV0dXJuITE7dmFyIG4sbyxpPXQuc3RhdGUuc2VsZWN0aW9uO2kgaW5zdGFuY2VvZiByLk5vZGVTZWxlY3Rpb24mJihuPWkubm9kZSk7Zm9yKHZhciBzPXQuc3RhdGUuZG9jLnJlc29sdmUoZSksYT1zLmRlcHRoKzE7YT4wO2EtLSl7dmFyIGM9YT5zLmRlcHRoP3Mubm9kZUFmdGVyOnMubm9kZShhKTtpZihyLk5vZGVTZWxlY3Rpb24uaXNTZWxlY3RhYmxlKGMpKXtvPW4mJmkuJGZyb20uZGVwdGg+MCYmYT49aS4kZnJvbS5kZXB0aCYmcy5iZWZvcmUoaS4kZnJvbS5kZXB0aCsxKT09aS4kZnJvbS5wb3M/cy5iZWZvcmUoaS4kZnJvbS5kZXB0aCk6cy5iZWZvcmUoYSk7YnJlYWt9fXJldHVybiBudWxsIT1vJiYoSWUodCxyLk5vZGVTZWxlY3Rpb24uY3JlYXRlKHQuc3RhdGUuZG9jLG8pLCJwb2ludGVyIiksITApfWZ1bmN0aW9uIEJlKHQsZSxuLHIsbyl7cmV0dXJuIFBlKHQsImhhbmRsZUNsaWNrT24iLGUsbixyKXx8dC5zb21lUHJvcCgiaGFuZGxlQ2xpY2siLChmdW5jdGlvbihuKXtyZXR1cm4gbih0LGUscil9KSl8fChvP0ZlKHQsbik6X2UodCxuKSl9ZnVuY3Rpb24gamUodCxlLG4scil7cmV0dXJuIFBlKHQsImhhbmRsZURvdWJsZUNsaWNrT24iLGUsbixyKXx8dC5zb21lUHJvcCgiaGFuZGxlRG91YmxlQ2xpY2siLChmdW5jdGlvbihuKXtyZXR1cm4gbih0LGUscil9KSl9ZnVuY3Rpb24gJGUodCxlLG4scil7cmV0dXJuIFBlKHQsImhhbmRsZVRyaXBsZUNsaWNrT24iLGUsbixyKXx8dC5zb21lUHJvcCgiaGFuZGxlVHJpcGxlQ2xpY2siLChmdW5jdGlvbihuKXtyZXR1cm4gbih0LGUscil9KSl8fFZlKHQsbil9ZnVuY3Rpb24gVmUodCxlKXt2YXIgbj10LnN0YXRlLmRvYztpZigtMT09ZSlyZXR1cm4hIW4uaW5saW5lQ29udGVudCYmKEllKHQsci5UZXh0U2VsZWN0aW9uLmNyZWF0ZShuLDAsbi5jb250ZW50LnNpemUpLCJwb2ludGVyIiksITApO2Zvcih2YXIgbz1uLnJlc29sdmUoZSksaT1vLmRlcHRoKzE7aT4wO2ktLSl7dmFyIHM9aT5vLmRlcHRoP28ubm9kZUFmdGVyOm8ubm9kZShpKSxhPW8uYmVmb3JlKGkpO2lmKHMuaW5saW5lQ29udGVudClJZSh0LHIuVGV4dFNlbGVjdGlvbi5jcmVhdGUobixhKzEsYSsxK3MuY29udGVudC5zaXplKSwicG9pbnRlciIpO2Vsc2V7aWYoIXIuTm9kZVNlbGVjdGlvbi5pc1NlbGVjdGFibGUocykpY29udGludWU7SWUodCxyLk5vZGVTZWxlY3Rpb24uY3JlYXRlKG4sYSksInBvaW50ZXIiKX1yZXR1cm4hMH19ZnVuY3Rpb24gTGUodCl7cmV0dXJuIFVlKHQpfUNlLmtleWRvd249ZnVuY3Rpb24odCxlKXt0LnNoaWZ0S2V5PTE2PT1lLmtleUNvZGV8fGUuc2hpZnRLZXksV2UodCxlKXx8KHQubGFzdEtleUNvZGU9ZS5rZXlDb2RlLHQubGFzdEtleUNvZGVUaW1lPURhdGUubm93KCksdC5zb21lUHJvcCgiaGFuZGxlS2V5RG93biIsKGZ1bmN0aW9uKG4pe3JldHVybiBuKHQsZSl9KSl8fGp0KHQsZSk/ZS5wcmV2ZW50RGVmYXVsdCgpOk1lKHQsImtleSIpKX0sQ2Uua2V5dXA9ZnVuY3Rpb24odCxlKXsxNj09ZS5rZXlDb2RlJiYodC5zaGlmdEtleT0hMSl9LENlLmtleXByZXNzPWZ1bmN0aW9uKHQsZSl7aWYoIShXZSh0LGUpfHwhZS5jaGFyQ29kZXx8ZS5jdHJsS2V5JiYhZS5hbHRLZXl8fHMubWFjJiZlLm1ldGFLZXkpKWlmKHQuc29tZVByb3AoImhhbmRsZUtleVByZXNzIiwoZnVuY3Rpb24obil7cmV0dXJuIG4odCxlKX0pKSllLnByZXZlbnREZWZhdWx0KCk7ZWxzZXt2YXIgbj10LnN0YXRlLnNlbGVjdGlvbjtpZighKG4gaW5zdGFuY2VvZiByLlRleHRTZWxlY3Rpb24pfHwhbi4kZnJvbS5zYW1lUGFyZW50KG4uJHRvKSl7dmFyIG89U3RyaW5nLmZyb21DaGFyQ29kZShlLmNoYXJDb2RlKTt0LnNvbWVQcm9wKCJoYW5kbGVUZXh0SW5wdXQiLChmdW5jdGlvbihlKXtyZXR1cm4gZSh0LG4uJGZyb20ucG9zLG4uJHRvLnBvcyxvKX0pKXx8dC5kaXNwYXRjaCh0LnN0YXRlLnRyLmluc2VydFRleHQobykuc2Nyb2xsSW50b1ZpZXcoKSksZS5wcmV2ZW50RGVmYXVsdCgpfX19O3ZhciBKZT1zLm1hYz8ibWV0YUtleSI6ImN0cmxLZXkiO1NlLm1vdXNlZG93bj1mdW5jdGlvbih0LGUpe3Quc2hpZnRLZXk9ZS5zaGlmdEtleTt2YXIgbj1MZSh0KSxyPURhdGUubm93KCksbz0ic2luZ2xlQ2xpY2siO3ItdC5sYXN0Q2xpY2sudGltZTw1MDAmJnplKGUsdC5sYXN0Q2xpY2spJiYhZVtKZV0mJigic2luZ2xlQ2xpY2siPT10Lmxhc3RDbGljay50eXBlP289ImRvdWJsZUNsaWNrIjoiZG91YmxlQ2xpY2siPT10Lmxhc3RDbGljay50eXBlJiYobz0idHJpcGxlQ2xpY2siKSksdC5sYXN0Q2xpY2s9e3RpbWU6cix4OmUuY2xpZW50WCx5OmUuY2xpZW50WSx0eXBlOm99O3ZhciBpPXQucG9zQXRDb29yZHMoRGUoZSkpO2kmJigic2luZ2xlQ2xpY2siPT1vP3QubW91c2VEb3duPW5ldyBxZSh0LGksZSxuKTooImRvdWJsZUNsaWNrIj09bz9qZTokZSkodCxpLnBvcyxpLmluc2lkZSxlKT9lLnByZXZlbnREZWZhdWx0KCk6TWUodCwicG9pbnRlciIpKX07dmFyIHFlPWZ1bmN0aW9uKHQsZSxuLG8pe3ZhciBpLGEsYz10aGlzO2lmKHRoaXMudmlldz10LHRoaXMuc3RhcnREb2M9dC5zdGF0ZS5kb2MsdGhpcy5wb3M9ZSx0aGlzLmV2ZW50PW4sdGhpcy5mbHVzaGVkPW8sdGhpcy5zZWxlY3ROb2RlPW5bSmVdLHRoaXMuYWxsb3dEZWZhdWx0PW4uc2hpZnRLZXksZS5pbnNpZGU+LTEpaT10LnN0YXRlLmRvYy5ub2RlQXQoZS5pbnNpZGUpLGE9ZS5pbnNpZGU7ZWxzZXt2YXIgbD10LnN0YXRlLmRvYy5yZXNvbHZlKGUucG9zKTtpPWwucGFyZW50LGE9bC5kZXB0aD9sLmJlZm9yZSgpOjB9dGhpcy5taWdodERyYWc9bnVsbDt2YXIgcD1vP251bGw6bi50YXJnZXQsdT1wP3QuZG9jVmlldy5uZWFyZXN0RGVzYyhwLCEwKTpudWxsO3RoaXMudGFyZ2V0PXU/dS5kb206bnVsbCwoaS50eXBlLnNwZWMuZHJhZ2dhYmxlJiYhMSE9PWkudHlwZS5zcGVjLnNlbGVjdGFibGV8fHQuc3RhdGUuc2VsZWN0aW9uIGluc3RhbmNlb2Ygci5Ob2RlU2VsZWN0aW9uJiZhPT10LnN0YXRlLnNlbGVjdGlvbi5mcm9tKSYmKHRoaXMubWlnaHREcmFnPXtub2RlOmkscG9zOmEsYWRkQXR0cjp0aGlzLnRhcmdldCYmIXRoaXMudGFyZ2V0LmRyYWdnYWJsZSxzZXRVbmVkaXRhYmxlOnRoaXMudGFyZ2V0JiZzLmdlY2tvJiYhdGhpcy50YXJnZXQuaGFzQXR0cmlidXRlKCJjb250ZW50RWRpdGFibGUiKX0pLHRoaXMudGFyZ2V0JiZ0aGlzLm1pZ2h0RHJhZyYmKHRoaXMubWlnaHREcmFnLmFkZEF0dHJ8fHRoaXMubWlnaHREcmFnLnNldFVuZWRpdGFibGUpJiYodGhpcy52aWV3LmRvbU9ic2VydmVyLnN0b3AoKSx0aGlzLm1pZ2h0RHJhZy5hZGRBdHRyJiYodGhpcy50YXJnZXQuZHJhZ2dhYmxlPSEwKSx0aGlzLm1pZ2h0RHJhZy5zZXRVbmVkaXRhYmxlJiZzZXRUaW1lb3V0KChmdW5jdGlvbigpe3JldHVybiBjLnRhcmdldC5zZXRBdHRyaWJ1dGUoImNvbnRlbnRFZGl0YWJsZSIsImZhbHNlIil9KSwyMCksdGhpcy52aWV3LmRvbU9ic2VydmVyLnN0YXJ0KCkpLHQucm9vdC5hZGRFdmVudExpc3RlbmVyKCJtb3VzZXVwIix0aGlzLnVwPXRoaXMudXAuYmluZCh0aGlzKSksdC5yb290LmFkZEV2ZW50TGlzdGVuZXIoIm1vdXNlbW92ZSIsdGhpcy5tb3ZlPXRoaXMubW92ZS5iaW5kKHRoaXMpKSxNZSh0LCJwb2ludGVyIil9O2Z1bmN0aW9uIFdlKHQsZSl7cmV0dXJuISF0LmNvbXBvc2luZ3x8ISEocy5zYWZhcmkmJk1hdGguYWJzKGUudGltZVN0YW1wLXQuY29tcG9zaXRpb25FbmRlZEF0KTw1MDApJiYodC5jb21wb3NpdGlvbkVuZGVkQXQ9LTJlOCwhMCl9cWUucHJvdG90eXBlLmRvbmU9ZnVuY3Rpb24oKXt0aGlzLnZpZXcucm9vdC5yZW1vdmVFdmVudExpc3RlbmVyKCJtb3VzZXVwIix0aGlzLnVwKSx0aGlzLnZpZXcucm9vdC5yZW1vdmVFdmVudExpc3RlbmVyKCJtb3VzZW1vdmUiLHRoaXMubW92ZSksdGhpcy5taWdodERyYWcmJnRoaXMudGFyZ2V0JiYodGhpcy52aWV3LmRvbU9ic2VydmVyLnN0b3AoKSx0aGlzLm1pZ2h0RHJhZy5hZGRBdHRyJiYodGhpcy50YXJnZXQuZHJhZ2dhYmxlPSExKSx0aGlzLm1pZ2h0RHJhZy5zZXRVbmVkaXRhYmxlJiZ0aGlzLnRhcmdldC5yZW1vdmVBdHRyaWJ1dGUoImNvbnRlbnRFZGl0YWJsZSIpLHRoaXMudmlldy5kb21PYnNlcnZlci5zdGFydCgpKSx0aGlzLnZpZXcubW91c2VEb3duPW51bGx9LHFlLnByb3RvdHlwZS51cD1mdW5jdGlvbih0KXtpZih0aGlzLmRvbmUoKSx0aGlzLnZpZXcuZG9tLmNvbnRhaW5zKDM9PXQudGFyZ2V0Lm5vZGVUeXBlP3QudGFyZ2V0LnBhcmVudE5vZGU6dC50YXJnZXQpKXt2YXIgZT10aGlzLnBvczt0aGlzLnZpZXcuc3RhdGUuZG9jIT10aGlzLnN0YXJ0RG9jJiYoZT10aGlzLnZpZXcucG9zQXRDb29yZHMoRGUodCkpKSx0aGlzLmFsbG93RGVmYXVsdHx8IWU/TWUodGhpcy52aWV3LCJwb2ludGVyIik6QmUodGhpcy52aWV3LGUucG9zLGUuaW5zaWRlLHQsdGhpcy5zZWxlY3ROb2RlKT90LnByZXZlbnREZWZhdWx0KCk6IXRoaXMuZmx1c2hlZCYmKCFzLmNocm9tZXx8dGhpcy52aWV3LnN0YXRlLnNlbGVjdGlvbiBpbnN0YW5jZW9mIHIuVGV4dFNlbGVjdGlvbnx8ZS5wb3MhPXRoaXMudmlldy5zdGF0ZS5zZWxlY3Rpb24uZnJvbSYmZS5wb3MhPXRoaXMudmlldy5zdGF0ZS5zZWxlY3Rpb24udG8pP01lKHRoaXMudmlldywicG9pbnRlciIpOihJZSh0aGlzLnZpZXcsci5TZWxlY3Rpb24ubmVhcih0aGlzLnZpZXcuc3RhdGUuZG9jLnJlc29sdmUoZS5wb3MpKSwicG9pbnRlciIpLHQucHJldmVudERlZmF1bHQoKSl9fSxxZS5wcm90b3R5cGUubW92ZT1mdW5jdGlvbih0KXshdGhpcy5hbGxvd0RlZmF1bHQmJihNYXRoLmFicyh0aGlzLmV2ZW50LngtdC5jbGllbnRYKT40fHxNYXRoLmFicyh0aGlzLmV2ZW50LnktdC5jbGllbnRZKT40KSYmKHRoaXMuYWxsb3dEZWZhdWx0PSEwKSxNZSh0aGlzLnZpZXcsInBvaW50ZXIiKX0sU2UudG91Y2hkb3duPWZ1bmN0aW9uKHQpe0xlKHQpLE1lKHQsInBvaW50ZXIiKX0sU2UuY29udGV4dG1lbnU9ZnVuY3Rpb24odCl7cmV0dXJuIExlKHQpfTt2YXIgSGU9cy5hbmRyb2lkPzVlMzotMTtmdW5jdGlvbiBLZSh0LGUpe2NsZWFyVGltZW91dCh0LmNvbXBvc2luZ1RpbWVvdXQpLGU+LTEmJih0LmNvbXBvc2luZ1RpbWVvdXQ9c2V0VGltZW91dCgoZnVuY3Rpb24oKXtyZXR1cm4gVWUodCl9KSxlKSl9ZnVuY3Rpb24gVWUodCxlKXt0LmNvbXBvc2luZz0hMTt3aGlsZSh0LmNvbXBvc2l0aW9uTm9kZXMubGVuZ3RoPjApdC5jb21wb3NpdGlvbk5vZGVzLnBvcCgpLm1hcmtQYXJlbnRzRGlydHkoKTtyZXR1cm4hKCFlJiYhdC5kb2NWaWV3LmRpcnR5KSYmKHQudXBkYXRlU3RhdGUodC5zdGF0ZSksITApfWZ1bmN0aW9uIEdlKHQsZSl7dmFyIG49dC5kb20ub3duZXJEb2N1bWVudCxyPW4uYm9keS5hcHBlbmRDaGlsZChuLmNyZWF0ZUVsZW1lbnQoImRpdiIpKTtyLmFwcGVuZENoaWxkKGUpLHIuc3R5bGUuY3NzVGV4dD0icG9zaXRpb246IGZpeGVkOyBsZWZ0OiAtMTAwMDBweDsgdG9wOiAxMHB4Ijt2YXIgbz1nZXRTZWxlY3Rpb24oKSxpPW4uY3JlYXRlUmFuZ2UoKTtpLnNlbGVjdE5vZGVDb250ZW50cyhlKSx0LmRvbS5ibHVyKCksby5yZW1vdmVBbGxSYW5nZXMoKSxvLmFkZFJhbmdlKGkpLHNldFRpbWVvdXQoKGZ1bmN0aW9uKCl7bi5ib2R5LnJlbW92ZUNoaWxkKHIpLHQuZm9jdXMoKX0pLDUwKX1DZS5jb21wb3NpdGlvbnN0YXJ0PUNlLmNvbXBvc2l0aW9udXBkYXRlPWZ1bmN0aW9uKHQpe2lmKCF0LmNvbXBvc2luZyl7dC5kb21PYnNlcnZlci5mbHVzaCgpO3ZhciBlPXQuc3RhdGUsbj1lLnNlbGVjdGlvbi4kZnJvbTtpZihlLnNlbGVjdGlvbi5lbXB0eSYmKGUuc3RvcmVkTWFya3N8fCFuLnRleHRPZmZzZXQmJm4ucGFyZW50T2Zmc2V0JiZuLm5vZGVCZWZvcmUubWFya3Muc29tZSgoZnVuY3Rpb24odCl7cmV0dXJuITE9PT10LnR5cGUuc3BlYy5pbmNsdXNpdmV9KSkpKXQubWFya0N1cnNvcj10LnN0YXRlLnN0b3JlZE1hcmtzfHxuLm1hcmtzKCksVWUodCwhMCksdC5tYXJrQ3Vyc29yPW51bGw7ZWxzZSBpZihVZSh0KSxzLmdlY2tvJiZlLnNlbGVjdGlvbi5lbXB0eSYmbi5wYXJlbnRPZmZzZXQmJiFuLnRleHRPZmZzZXQmJm4ubm9kZUJlZm9yZS5tYXJrcy5sZW5ndGgpZm9yKHZhciByPXQucm9vdC5nZXRTZWxlY3Rpb24oKSxvPXIuZm9jdXNOb2RlLGk9ci5mb2N1c09mZnNldDtvJiYxPT1vLm5vZGVUeXBlJiYwIT1pOyl7dmFyIGE9aTwwP28ubGFzdENoaWxkOm8uY2hpbGROb2Rlc1tpLTFdO2lmKDM9PWEubm9kZVR5cGUpe3IuY29sbGFwc2UoYSxhLm5vZGVWYWx1ZS5sZW5ndGgpO2JyZWFrfW89YSxpPS0xfXQuY29tcG9zaW5nPSEwfUtlKHQsSGUpfSxDZS5jb21wb3NpdGlvbmVuZD1mdW5jdGlvbih0LGUpe3QuY29tcG9zaW5nJiYodC5jb21wb3Npbmc9ITEsdC5jb21wb3NpdGlvbkVuZGVkQXQ9ZS50aW1lU3RhbXAsS2UodCwyMCkpfTt2YXIgWGU9cy5pZSYmcy5pZV92ZXJzaW9uPDE1fHxzLmlvcyYmcy53ZWJraXRfdmVyc2lvbjw2MDQ7ZnVuY3Rpb24gWWUodCl7cmV0dXJuIDA9PXQub3BlblN0YXJ0JiYwPT10Lm9wZW5FbmQmJjE9PXQuY29udGVudC5jaGlsZENvdW50P3QuY29udGVudC5maXJzdENoaWxkOm51bGx9ZnVuY3Rpb24gUWUodCxlKXt2YXIgbj10LmRvbS5vd25lckRvY3VtZW50LHI9dC5zaGlmdEtleXx8dC5zdGF0ZS5zZWxlY3Rpb24uJGZyb20ucGFyZW50LnR5cGUuc3BlYy5jb2RlLG89bi5ib2R5LmFwcGVuZENoaWxkKG4uY3JlYXRlRWxlbWVudChyPyJ0ZXh0YXJlYSI6ImRpdiIpKTtyfHwoby5jb250ZW50RWRpdGFibGU9InRydWUiKSxvLnN0eWxlLmNzc1RleHQ9InBvc2l0aW9uOiBmaXhlZDsgbGVmdDogLTEwMDAwcHg7IHRvcDogMTBweCIsby5mb2N1cygpLHNldFRpbWVvdXQoKGZ1bmN0aW9uKCl7dC5mb2N1cygpLG4uYm9keS5yZW1vdmVDaGlsZChvKSxyP1plKHQsby52YWx1ZSxudWxsLGUpOlplKHQsby50ZXh0Q29udGVudCxvLmlubmVySFRNTCxlKX0pLDUwKX1mdW5jdGlvbiBaZSh0LGUsbixyKXt2YXIgaT1hZSh0LGUsbix0LnNoaWZ0S2V5LHQuc3RhdGUuc2VsZWN0aW9uLiRmcm9tKTtpZih0LnNvbWVQcm9wKCJoYW5kbGVQYXN0ZSIsKGZ1bmN0aW9uKGUpe3JldHVybiBlKHQscixpfHxvLlNsaWNlLmVtcHR5KX0pKXx8IWkpcmV0dXJuITA7dmFyIHM9WWUoaSksYT1zP3Quc3RhdGUudHIucmVwbGFjZVNlbGVjdGlvbldpdGgocyx0LnNoaWZ0S2V5KTp0LnN0YXRlLnRyLnJlcGxhY2VTZWxlY3Rpb24oaSk7cmV0dXJuIHQuZGlzcGF0Y2goYS5zY3JvbGxJbnRvVmlldygpLnNldE1ldGEoInBhc3RlIiwhMCkuc2V0TWV0YSgidWlFdmVudCIsInBhc3RlIikpLCEwfVNlLmNvcHk9Q2UuY3V0PWZ1bmN0aW9uKHQsZSl7dmFyIG49dC5zdGF0ZS5zZWxlY3Rpb24scj0iY3V0Ij09ZS50eXBlO2lmKCFuLmVtcHR5KXt2YXIgbz1YZT9udWxsOmUuY2xpcGJvYXJkRGF0YSxpPW4uY29udGVudCgpLHM9c2UodCxpKSxhPXMuZG9tLGM9cy50ZXh0O28/KGUucHJldmVudERlZmF1bHQoKSxvLmNsZWFyRGF0YSgpLG8uc2V0RGF0YSgidGV4dC9odG1sIixhLmlubmVySFRNTCksby5zZXREYXRhKCJ0ZXh0L3BsYWluIixjKSk6R2UodCxhKSxyJiZ0LmRpc3BhdGNoKHQuc3RhdGUudHIuZGVsZXRlU2VsZWN0aW9uKCkuc2Nyb2xsSW50b1ZpZXcoKS5zZXRNZXRhKCJ1aUV2ZW50IiwiY3V0IikpfX0sQ2UucGFzdGU9ZnVuY3Rpb24odCxlKXt2YXIgbj1YZT9udWxsOmUuY2xpcGJvYXJkRGF0YTtuJiYoWmUodCxuLmdldERhdGEoInRleHQvcGxhaW4iKSxuLmdldERhdGEoInRleHQvaHRtbCIpLGUpfHxuLmZpbGVzLmxlbmd0aD4wKT9lLnByZXZlbnREZWZhdWx0KCk6UWUodCxlKX07dmFyIHRuPWZ1bmN0aW9uKHQsZSl7dGhpcy5zbGljZT10LHRoaXMubW92ZT1lfSxlbj1zLm1hYz8iYWx0S2V5IjoiY3RybEtleSI7Zm9yKHZhciBubiBpbiBTZS5kcmFnc3RhcnQ9ZnVuY3Rpb24odCxlKXt2YXIgbj10Lm1vdXNlRG93bjtpZihuJiZuLmRvbmUoKSxlLmRhdGFUcmFuc2Zlcil7dmFyIG89dC5zdGF0ZS5zZWxlY3Rpb24saT1vLmVtcHR5P251bGw6dC5wb3NBdENvb3JkcyhEZShlKSk7aWYoaSYmaS5wb3M+PW8uZnJvbSYmaS5wb3M8PShvIGluc3RhbmNlb2Ygci5Ob2RlU2VsZWN0aW9uP28udG8tMTpvLnRvKSk7ZWxzZSBpZihuJiZuLm1pZ2h0RHJhZyl0LmRpc3BhdGNoKHQuc3RhdGUudHIuc2V0U2VsZWN0aW9uKHIuTm9kZVNlbGVjdGlvbi5jcmVhdGUodC5zdGF0ZS5kb2Msbi5taWdodERyYWcucG9zKSkpO2Vsc2UgaWYoZS50YXJnZXQmJjE9PWUudGFyZ2V0Lm5vZGVUeXBlKXt2YXIgcz10LmRvY1ZpZXcubmVhcmVzdERlc2MoZS50YXJnZXQsITApO2lmKCFzfHwhcy5ub2RlLnR5cGUuc3BlYy5kcmFnZ2FibGV8fHM9PXQuZG9jVmlldylyZXR1cm47dC5kaXNwYXRjaCh0LnN0YXRlLnRyLnNldFNlbGVjdGlvbihyLk5vZGVTZWxlY3Rpb24uY3JlYXRlKHQuc3RhdGUuZG9jLHMucG9zQmVmb3JlKSkpfXZhciBhPXQuc3RhdGUuc2VsZWN0aW9uLmNvbnRlbnQoKSxjPXNlKHQsYSksbD1jLmRvbSxwPWMudGV4dDtlLmRhdGFUcmFuc2Zlci5jbGVhckRhdGEoKSxlLmRhdGFUcmFuc2Zlci5zZXREYXRhKFhlPyJUZXh0IjoidGV4dC9odG1sIixsLmlubmVySFRNTCksWGV8fGUuZGF0YVRyYW5zZmVyLnNldERhdGEoInRleHQvcGxhaW4iLHApLHQuZHJhZ2dpbmc9bmV3IHRuKGEsIWVbZW5dKX19LFNlLmRyYWdlbmQ9ZnVuY3Rpb24odCl7d2luZG93LnNldFRpbWVvdXQoKGZ1bmN0aW9uKCl7cmV0dXJuIHQuZHJhZ2dpbmc9bnVsbH0pLDUwKX0sQ2UuZHJhZ292ZXI9Q2UuZHJhZ2VudGVyPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIGUucHJldmVudERlZmF1bHQoKX0sQ2UuZHJvcD1mdW5jdGlvbih0LGUpe3ZhciBuPXQuZHJhZ2dpbmc7aWYodC5kcmFnZ2luZz1udWxsLGUuZGF0YVRyYW5zZmVyKXt2YXIgbz10LnBvc0F0Q29vcmRzKERlKGUpKTtpZihvKXt2YXIgcz10LnN0YXRlLmRvYy5yZXNvbHZlKG8ucG9zKTtpZihzKXt2YXIgYT1uJiZuLnNsaWNlfHxhZSh0LGUuZGF0YVRyYW5zZmVyLmdldERhdGEoWGU/IlRleHQiOiJ0ZXh0L3BsYWluIiksWGU/bnVsbDplLmRhdGFUcmFuc2Zlci5nZXREYXRhKCJ0ZXh0L2h0bWwiKSwhMSxzKTtpZihhJiYoZS5wcmV2ZW50RGVmYXVsdCgpLCF0LnNvbWVQcm9wKCJoYW5kbGVEcm9wIiwoZnVuY3Rpb24ocil7cmV0dXJuIHIodCxlLGEsbiYmbi5tb3ZlKX0pKSkpe3ZhciBjPWE/aS5kcm9wUG9pbnQodC5zdGF0ZS5kb2Mscy5wb3MsYSk6cy5wb3M7bnVsbD09YyYmKGM9cy5wb3MpO3ZhciBsPXQuc3RhdGUudHI7biYmbi5tb3ZlJiZsLmRlbGV0ZVNlbGVjdGlvbigpO3ZhciBwPWwubWFwcGluZy5tYXAoYyksdT0wPT1hLm9wZW5TdGFydCYmMD09YS5vcGVuRW5kJiYxPT1hLmNvbnRlbnQuY2hpbGRDb3VudCxoPWwuZG9jO2lmKHU/bC5yZXBsYWNlUmFuZ2VXaXRoKHAscCxhLmNvbnRlbnQuZmlyc3RDaGlsZCk6bC5yZXBsYWNlUmFuZ2UocCxwLGEpLCFsLmRvYy5lcShoKSl7dmFyIGY9bC5kb2MucmVzb2x2ZShwKTt1JiZyLk5vZGVTZWxlY3Rpb24uaXNTZWxlY3RhYmxlKGEuY29udGVudC5maXJzdENoaWxkKSYmZi5ub2RlQWZ0ZXImJmYubm9kZUFmdGVyLnNhbWVNYXJrdXAoYS5jb250ZW50LmZpcnN0Q2hpbGQpP2wuc2V0U2VsZWN0aW9uKG5ldyByLk5vZGVTZWxlY3Rpb24oZikpOmwuc2V0U2VsZWN0aW9uKFV0KHQsZixsLmRvYy5yZXNvbHZlKGwubWFwcGluZy5tYXAoYykpKSksdC5mb2N1cygpLHQuZGlzcGF0Y2gobC5zZXRNZXRhKCJ1aUV2ZW50IiwiZHJvcCIpKX19fX19fSxTZS5mb2N1cz1mdW5jdGlvbih0KXt0LmZvY3VzZWR8fCh0LmRvbU9ic2VydmVyLnN0b3AoKSx0LmRvbS5jbGFzc0xpc3QuYWRkKCJQcm9zZU1pcnJvci1mb2N1c2VkIiksdC5kb21PYnNlcnZlci5zdGFydCgpLHQuZm9jdXNlZD0hMCl9LFNlLmJsdXI9ZnVuY3Rpb24odCl7dC5mb2N1c2VkJiYodC5kb21PYnNlcnZlci5zdG9wKCksdC5kb20uY2xhc3NMaXN0LnJlbW92ZSgiUHJvc2VNaXJyb3ItZm9jdXNlZCIpLHQuZG9tT2JzZXJ2ZXIuc3RhcnQoKSx0LmZvY3VzZWQ9ITEpfSxTZS5iZWZvcmVpbnB1dD1mdW5jdGlvbih0LGUpe2lmKHMuY2hyb21lJiZzLmFuZHJvaWQmJiJkZWxldGVDb250ZW50QmFja3dhcmQiPT1lLmlucHV0VHlwZSl7dmFyIG49dC5kb21DaGFuZ2VDb3VudDtzZXRUaW1lb3V0KChmdW5jdGlvbigpe2lmKHQuZG9tQ2hhbmdlQ291bnQ9PW4mJih0LmRvbS5ibHVyKCksdC5mb2N1cygpLCF0LnNvbWVQcm9wKCJoYW5kbGVLZXlEb3duIiwoZnVuY3Rpb24oZSl7cmV0dXJuIGUodCxiKDgsIkJhY2tzcGFjZSIpKX0pKSkpe3ZhciBlPXQuc3RhdGUuc2VsZWN0aW9uLHI9ZS4kY3Vyc29yO3ImJnIucG9zPjAmJnQuZGlzcGF0Y2godC5zdGF0ZS50ci5kZWxldGUoci5wb3MtMSxyLnBvcykuc2Nyb2xsSW50b1ZpZXcoKSl9fSksNTApfX0sQ2UpU2Vbbm5dPUNlW25uXTtmdW5jdGlvbiBybih0LGUpe2lmKHQ9PWUpcmV0dXJuITA7Zm9yKHZhciBuIGluIHQpaWYodFtuXSE9PWVbbl0pcmV0dXJuITE7Zm9yKHZhciByIGluIGUpaWYoIShyIGluIHQpKXJldHVybiExO3JldHVybiEwfXZhciBvbj1mdW5jdGlvbih0LGUpe3RoaXMuc3BlYz1lfHx1bix0aGlzLnNpZGU9dGhpcy5zcGVjLnNpZGV8fDAsdGhpcy50b0RPTT10fTtvbi5wcm90b3R5cGUubWFwPWZ1bmN0aW9uKHQsZSxuLHIpe3ZhciBvPXQubWFwUmVzdWx0KGUuZnJvbStyLHRoaXMuc2lkZTwwPy0xOjEpLGk9by5wb3Mscz1vLmRlbGV0ZWQ7cmV0dXJuIHM/bnVsbDpuZXcgY24oaS1uLGktbix0aGlzKX0sb24ucHJvdG90eXBlLnZhbGlkPWZ1bmN0aW9uKCl7cmV0dXJuITB9LG9uLnByb3RvdHlwZS5lcT1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcz09dHx8dCBpbnN0YW5jZW9mIG9uJiYodGhpcy5zcGVjLmtleSYmdGhpcy5zcGVjLmtleT09dC5zcGVjLmtleXx8dGhpcy50b0RPTT09dC50b0RPTSYmcm4odGhpcy5zcGVjLHQuc3BlYykpfTt2YXIgc249ZnVuY3Rpb24odCxlKXt0aGlzLnNwZWM9ZXx8dW4sdGhpcy5hdHRycz10fTtzbi5wcm90b3R5cGUubWFwPWZ1bmN0aW9uKHQsZSxuLHIpe3ZhciBvPXQubWFwKGUuZnJvbStyLHRoaXMuc3BlYy5pbmNsdXNpdmVTdGFydD8tMToxKS1uLGk9dC5tYXAoZS50bytyLHRoaXMuc3BlYy5pbmNsdXNpdmVFbmQ/MTotMSktbjtyZXR1cm4gbz49aT9udWxsOm5ldyBjbihvLGksdGhpcyl9LHNuLnByb3RvdHlwZS52YWxpZD1mdW5jdGlvbih0LGUpe3JldHVybiBlLmZyb208ZS50b30sc24ucHJvdG90eXBlLmVxPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzPT10fHx0IGluc3RhbmNlb2Ygc24mJnJuKHRoaXMuYXR0cnMsdC5hdHRycykmJnJuKHRoaXMuc3BlYyx0LnNwZWMpfSxzbi5pcz1mdW5jdGlvbih0KXtyZXR1cm4gdC50eXBlIGluc3RhbmNlb2Ygc259O3ZhciBhbj1mdW5jdGlvbih0LGUpe3RoaXMuc3BlYz1lfHx1bix0aGlzLmF0dHJzPXR9O2FuLnByb3RvdHlwZS5tYXA9ZnVuY3Rpb24odCxlLG4scil7dmFyIG89dC5tYXBSZXN1bHQoZS5mcm9tK3IsMSk7aWYoby5kZWxldGVkKXJldHVybiBudWxsO3ZhciBpPXQubWFwUmVzdWx0KGUudG8rciwtMSk7cmV0dXJuIGkuZGVsZXRlZHx8aS5wb3M8PW8ucG9zP251bGw6bmV3IGNuKG8ucG9zLW4saS5wb3Mtbix0aGlzKX0sYW4ucHJvdG90eXBlLnZhbGlkPWZ1bmN0aW9uKHQsZSl7dmFyIG49dC5jb250ZW50LmZpbmRJbmRleChlLmZyb20pLHI9bi5pbmRleCxvPW4ub2Zmc2V0O3JldHVybiBvPT1lLmZyb20mJm8rdC5jaGlsZChyKS5ub2RlU2l6ZT09ZS50b30sYW4ucHJvdG90eXBlLmVxPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzPT10fHx0IGluc3RhbmNlb2YgYW4mJnJuKHRoaXMuYXR0cnMsdC5hdHRycykmJnJuKHRoaXMuc3BlYyx0LnNwZWMpfTt2YXIgY249ZnVuY3Rpb24odCxlLG4pe3RoaXMuZnJvbT10LHRoaXMudG89ZSx0aGlzLnR5cGU9bn0sbG49e3NwZWM6e319O2NuLnByb3RvdHlwZS5jb3B5PWZ1bmN0aW9uKHQsZSl7cmV0dXJuIG5ldyBjbih0LGUsdGhpcy50eXBlKX0sY24ucHJvdG90eXBlLmVxPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLnR5cGUuZXEodC50eXBlKSYmdGhpcy5mcm9tPT10LmZyb20mJnRoaXMudG89PXQudG99LGNuLnByb3RvdHlwZS5tYXA9ZnVuY3Rpb24odCxlLG4pe3JldHVybiB0aGlzLnR5cGUubWFwKHQsdGhpcyxlLG4pfSxjbi53aWRnZXQ9ZnVuY3Rpb24odCxlLG4pe3JldHVybiBuZXcgY24odCx0LG5ldyBvbihlLG4pKX0sY24uaW5saW5lPWZ1bmN0aW9uKHQsZSxuLHIpe3JldHVybiBuZXcgY24odCxlLG5ldyBzbihuLHIpKX0sY24ubm9kZT1mdW5jdGlvbih0LGUsbixyKXtyZXR1cm4gbmV3IGNuKHQsZSxuZXcgYW4obixyKSl9LGxuLnNwZWMuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudHlwZS5zcGVjfSxPYmplY3QuZGVmaW5lUHJvcGVydGllcyhjbi5wcm90b3R5cGUsbG4pO3ZhciBwbj1bXSx1bj17fSxobj1mdW5jdGlvbih0LGUpe3RoaXMubG9jYWw9dCYmdC5sZW5ndGg/dDpwbix0aGlzLmNoaWxkcmVuPWUmJmUubGVuZ3RoP2U6cG59O2huLmNyZWF0ZT1mdW5jdGlvbih0LGUpe3JldHVybiBlLmxlbmd0aD94bihlLHQsMCx1bik6Zm59LGhuLnByb3RvdHlwZS5maW5kPWZ1bmN0aW9uKHQsZSxuKXt2YXIgcj1bXTtyZXR1cm4gdGhpcy5maW5kSW5uZXIobnVsbD09dD8wOnQsbnVsbD09ZT8xZTk6ZSxyLDAsbikscn0saG4ucHJvdG90eXBlLmZpbmRJbm5lcj1mdW5jdGlvbih0LGUsbixyLG8pe2Zvcih2YXIgaT10aGlzLHM9MDtzPHRoaXMubG9jYWwubGVuZ3RoO3MrKyl7dmFyIGE9aS5sb2NhbFtzXTthLmZyb208PWUmJmEudG8+PXQmJighb3x8byhhLnNwZWMpKSYmbi5wdXNoKGEuY29weShhLmZyb20rcixhLnRvK3IpKX1mb3IodmFyIGM9MDtjPHRoaXMuY2hpbGRyZW4ubGVuZ3RoO2MrPTMpaWYoaS5jaGlsZHJlbltjXTxlJiZpLmNoaWxkcmVuW2MrMV0+dCl7dmFyIGw9aS5jaGlsZHJlbltjXSsxO2kuY2hpbGRyZW5bYysyXS5maW5kSW5uZXIodC1sLGUtbCxuLHIrbCxvKX19LGhuLnByb3RvdHlwZS5tYXA9ZnVuY3Rpb24odCxlLG4pe3JldHVybiB0aGlzPT1mbnx8MD09dC5tYXBzLmxlbmd0aD90aGlzOnRoaXMubWFwSW5uZXIodCxlLDAsMCxufHx1bil9LGhuLnByb3RvdHlwZS5tYXBJbm5lcj1mdW5jdGlvbih0LGUsbixyLG8pe2Zvcih2YXIgaSxzPXRoaXMsYT0wO2E8dGhpcy5sb2NhbC5sZW5ndGg7YSsrKXt2YXIgYz1zLmxvY2FsW2FdLm1hcCh0LG4scik7YyYmYy50eXBlLnZhbGlkKGUsYyk/KGl8fChpPVtdKSkucHVzaChjKTpvLm9uUmVtb3ZlJiZvLm9uUmVtb3ZlKHMubG9jYWxbYV0uc3BlYyl9cmV0dXJuIHRoaXMuY2hpbGRyZW4ubGVuZ3RoP3ZuKHRoaXMuY2hpbGRyZW4saSx0LGUsbixyLG8pOmk/bmV3IGhuKGkuc29ydChibikpOmZufSxobi5wcm90b3R5cGUuYWRkPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIGUubGVuZ3RoP3RoaXM9PWZuP2huLmNyZWF0ZSh0LGUpOnRoaXMuYWRkSW5uZXIodCxlLDApOnRoaXN9LGhuLnByb3RvdHlwZS5hZGRJbm5lcj1mdW5jdGlvbih0LGUsbil7dmFyIHIsbz10aGlzLGk9MDt0LmZvckVhY2goKGZ1bmN0aW9uKHQscyl7dmFyIGEsYz1zK247aWYoYT1nbihlLHQsYykpe3J8fChyPW8uY2hpbGRyZW4uc2xpY2UoKSk7d2hpbGUoaTxyLmxlbmd0aCYmcltpXTxzKWkrPTM7cltpXT09cz9yW2krMl09cltpKzJdLmFkZElubmVyKHQsYSxjKzEpOnIuc3BsaWNlKGksMCxzLHMrdC5ub2RlU2l6ZSx4bihhLHQsYysxLHVuKSksaSs9M319KSk7dmFyIHM9bW4oaT93bihlKTplLC1uKTtyZXR1cm4gbmV3IGhuKHMubGVuZ3RoP3RoaXMubG9jYWwuY29uY2F0KHMpLnNvcnQoYm4pOnRoaXMubG9jYWwscnx8dGhpcy5jaGlsZHJlbil9LGhuLnByb3RvdHlwZS5yZW1vdmU9ZnVuY3Rpb24odCl7cmV0dXJuIDA9PXQubGVuZ3RofHx0aGlzPT1mbj90aGlzOnRoaXMucmVtb3ZlSW5uZXIodCwwKX0saG4ucHJvdG90eXBlLnJlbW92ZUlubmVyPWZ1bmN0aW9uKHQsZSl7Zm9yKHZhciBuPXRoaXMscj10aGlzLmNoaWxkcmVuLG89dGhpcy5sb2NhbCxpPTA7aTxyLmxlbmd0aDtpKz0zKXtmb3IodmFyIHM9dm9pZCAwLGE9cltpXStlLGM9cltpKzFdK2UsbD0wLHA9dm9pZCAwO2w8dC5sZW5ndGg7bCsrKShwPXRbbF0pJiZwLmZyb20+YSYmcC50bzxjJiYodFtsXT1udWxsLChzfHwocz1bXSkpLnB1c2gocCkpO2lmKHMpe3I9PW4uY2hpbGRyZW4mJihyPW4uY2hpbGRyZW4uc2xpY2UoKSk7dmFyIHU9cltpKzJdLnJlbW92ZUlubmVyKHMsYSsxKTt1IT1mbj9yW2krMl09dTooci5zcGxpY2UoaSwzKSxpLT0zKX19aWYoby5sZW5ndGgpZm9yKHZhciBoPTAsZj12b2lkIDA7aDx0Lmxlbmd0aDtoKyspaWYoZj10W2hdKWZvcih2YXIgZD0wO2Q8by5sZW5ndGg7ZCsrKW9bZF0udHlwZS5lcShmLnR5cGUpJiYobz09bi5sb2NhbCYmKG89bi5sb2NhbC5zbGljZSgpKSxvLnNwbGljZShkLS0sMSkpO3JldHVybiByPT10aGlzLmNoaWxkcmVuJiZvPT10aGlzLmxvY2FsP3RoaXM6by5sZW5ndGh8fHIubGVuZ3RoP25ldyBobihvLHIpOmZufSxobi5wcm90b3R5cGUuZm9yQ2hpbGQ9ZnVuY3Rpb24odCxlKXt2YXIgbixyLG89dGhpcztpZih0aGlzPT1mbilyZXR1cm4gdGhpcztpZihlLmlzTGVhZilyZXR1cm4gaG4uZW1wdHk7Zm9yKHZhciBpPTA7aTx0aGlzLmNoaWxkcmVuLmxlbmd0aDtpKz0zKWlmKG8uY2hpbGRyZW5baV0+PXQpe28uY2hpbGRyZW5baV09PXQmJihuPW8uY2hpbGRyZW5baSsyXSk7YnJlYWt9Zm9yKHZhciBzPXQrMSxhPXMrZS5jb250ZW50LnNpemUsYz0wO2M8dGhpcy5sb2NhbC5sZW5ndGg7YysrKXt2YXIgbD1vLmxvY2FsW2NdO2lmKGwuZnJvbTxhJiZsLnRvPnMmJmwudHlwZSBpbnN0YW5jZW9mIHNuKXt2YXIgcD1NYXRoLm1heChzLGwuZnJvbSktcyx1PU1hdGgubWluKGEsbC50byktcztwPHUmJihyfHwocj1bXSkpLnB1c2gobC5jb3B5KHAsdSkpfX1pZihyKXt2YXIgaD1uZXcgaG4oci5zb3J0KGJuKSk7cmV0dXJuIG4/bmV3IGRuKFtoLG5dKTpofXJldHVybiBufHxmbn0saG4ucHJvdG90eXBlLmVxPWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXM7aWYodGhpcz09dClyZXR1cm4hMDtpZighKHQgaW5zdGFuY2VvZiBobil8fHRoaXMubG9jYWwubGVuZ3RoIT10LmxvY2FsLmxlbmd0aHx8dGhpcy5jaGlsZHJlbi5sZW5ndGghPXQuY2hpbGRyZW4ubGVuZ3RoKXJldHVybiExO2Zvcih2YXIgbj0wO248dGhpcy5sb2NhbC5sZW5ndGg7bisrKWlmKCFlLmxvY2FsW25dLmVxKHQubG9jYWxbbl0pKXJldHVybiExO2Zvcih2YXIgcj0wO3I8dGhpcy5jaGlsZHJlbi5sZW5ndGg7cis9MylpZihlLmNoaWxkcmVuW3JdIT10LmNoaWxkcmVuW3JdfHxlLmNoaWxkcmVuW3IrMV0hPXQuY2hpbGRyZW5bcisxXXx8IWUuY2hpbGRyZW5bcisyXS5lcSh0LmNoaWxkcmVuW3IrMl0pKXJldHVybiExO3JldHVybiEwfSxobi5wcm90b3R5cGUubG9jYWxzPWZ1bmN0aW9uKHQpe3JldHVybiBrbih0aGlzLmxvY2Fsc0lubmVyKHQpKX0saG4ucHJvdG90eXBlLmxvY2Fsc0lubmVyPWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXM7aWYodGhpcz09Zm4pcmV0dXJuIHBuO2lmKHQuaW5saW5lQ29udGVudHx8IXRoaXMubG9jYWwuc29tZShzbi5pcykpcmV0dXJuIHRoaXMubG9jYWw7Zm9yKHZhciBuPVtdLHI9MDtyPHRoaXMubG9jYWwubGVuZ3RoO3IrKyllLmxvY2FsW3JdLnR5cGUgaW5zdGFuY2VvZiBzbnx8bi5wdXNoKGUubG9jYWxbcl0pO3JldHVybiBufTt2YXIgZm49bmV3IGhuO2huLmVtcHR5PWZuLGhuLnJlbW92ZU92ZXJsYXA9a247dmFyIGRuPWZ1bmN0aW9uKHQpe3RoaXMubWVtYmVycz10fTtmdW5jdGlvbiB2bih0LGUsbixyLG8saSxzKXtmb3IodmFyIGE9dC5zbGljZSgpLGM9ZnVuY3Rpb24odCxlLG4scil7Zm9yKHZhciBzPTA7czxhLmxlbmd0aDtzKz0zKXt2YXIgYz1hW3MrMV0sbD12b2lkIDA7LTE9PWN8fHQ+YytpfHwoZT49YVtzXStpP2FbcysxXT0tMToobD1yLW4tKGUtdCkrKGktbykpJiYoYVtzXSs9bCxhW3MrMV0rPWwpKX19LGw9MDtsPG4ubWFwcy5sZW5ndGg7bCsrKW4ubWFwc1tsXS5mb3JFYWNoKGMpO2Zvcih2YXIgcD0hMSx1PTA7dTxhLmxlbmd0aDt1Kz0zKWlmKC0xPT1hW3UrMV0pe3ZhciBoPW4ubWFwKGFbdV0raSksZj1oLW87aWYoZjwwfHxmPj1yLmNvbnRlbnQuc2l6ZSl7cD0hMDtjb250aW51ZX12YXIgZD1uLm1hcCh0W3UrMV0raSwtMSksdj1kLW8sbT1yLmNvbnRlbnQuZmluZEluZGV4KGYpLHk9bS5pbmRleCxnPW0ub2Zmc2V0LHc9ci5tYXliZUNoaWxkKHkpO2lmKHcmJmc9PWYmJmcrdy5ub2RlU2l6ZT09dil7dmFyIHg9YVt1KzJdLm1hcElubmVyKG4sdyxoKzEsYVt1XStpKzEscyk7eCE9Zm4/KGFbdV09ZixhW3UrMV09dixhW3UrMl09eCk6KGFbdSsxXT0tMixwPSEwKX1lbHNlIHA9ITB9aWYocCl7dmFyIGI9eW4oYSx0LGV8fFtdLG4sbyxpLHMpLGs9eG4oYixyLDAscyk7ZT1rLmxvY2FsO2Zvcih2YXIgUz0wO1M8YS5sZW5ndGg7Uys9MylhW1MrMV08MCYmKGEuc3BsaWNlKFMsMyksUy09Myk7Zm9yKHZhciBDPTAsTz0wO0M8ay5jaGlsZHJlbi5sZW5ndGg7Qys9Myl7dmFyIE09ay5jaGlsZHJlbltDXTt3aGlsZShPPGEubGVuZ3RoJiZhW09dPE0pTys9MzthLnNwbGljZShPLDAsay5jaGlsZHJlbltDXSxrLmNoaWxkcmVuW0MrMV0say5jaGlsZHJlbltDKzJdKX19cmV0dXJuIG5ldyBobihlJiZlLnNvcnQoYm4pLGEpfWZ1bmN0aW9uIG1uKHQsZSl7aWYoIWV8fCF0Lmxlbmd0aClyZXR1cm4gdDtmb3IodmFyIG49W10scj0wO3I8dC5sZW5ndGg7cisrKXt2YXIgbz10W3JdO24ucHVzaChuZXcgY24oby5mcm9tK2Usby50bytlLG8udHlwZSkpfXJldHVybiBufWZ1bmN0aW9uIHluKHQsZSxuLHIsbyxpLHMpe2Z1bmN0aW9uIGEodCxlKXtmb3IodmFyIGk9MDtpPHQubG9jYWwubGVuZ3RoO2krKyl7dmFyIGM9dC5sb2NhbFtpXS5tYXAocixvLGUpO2M/bi5wdXNoKGMpOnMub25SZW1vdmUmJnMub25SZW1vdmUodC5sb2NhbFtpXS5zcGVjKX1mb3IodmFyIGw9MDtsPHQuY2hpbGRyZW4ubGVuZ3RoO2wrPTMpYSh0LmNoaWxkcmVuW2wrMl0sdC5jaGlsZHJlbltsXStlKzEpfWZvcih2YXIgYz0wO2M8dC5sZW5ndGg7Yys9MyktMT09dFtjKzFdJiZhKHRbYysyXSxlW2NdK2krMSk7cmV0dXJuIG59ZnVuY3Rpb24gZ24odCxlLG4pe2lmKGUuaXNMZWFmKXJldHVybiBudWxsO2Zvcih2YXIgcj1uK2Uubm9kZVNpemUsbz1udWxsLGk9MCxzPXZvaWQgMDtpPHQubGVuZ3RoO2krKykocz10W2ldKSYmcy5mcm9tPm4mJnMudG88ciYmKChvfHwobz1bXSkpLnB1c2gocyksdFtpXT1udWxsKTtyZXR1cm4gb31mdW5jdGlvbiB3bih0KXtmb3IodmFyIGU9W10sbj0wO248dC5sZW5ndGg7bisrKW51bGwhPXRbbl0mJmUucHVzaCh0W25dKTtyZXR1cm4gZX1mdW5jdGlvbiB4bih0LGUsbixyKXt2YXIgbz1bXSxpPSExO2UuZm9yRWFjaCgoZnVuY3Rpb24oZSxzKXt2YXIgYT1nbih0LGUscytuKTtpZihhKXtpPSEwO3ZhciBjPXhuKGEsZSxuK3MrMSxyKTtjIT1mbiYmby5wdXNoKHMscytlLm5vZGVTaXplLGMpfX0pKTtmb3IodmFyIHM9bW4oaT93bih0KTp0LC1uKS5zb3J0KGJuKSxhPTA7YTxzLmxlbmd0aDthKyspc1thXS50eXBlLnZhbGlkKGUsc1thXSl8fChyLm9uUmVtb3ZlJiZyLm9uUmVtb3ZlKHNbYV0uc3BlYykscy5zcGxpY2UoYS0tLDEpKTtyZXR1cm4gcy5sZW5ndGh8fG8ubGVuZ3RoP25ldyBobihzLG8pOmZufWZ1bmN0aW9uIGJuKHQsZSl7cmV0dXJuIHQuZnJvbS1lLmZyb218fHQudG8tZS50b31mdW5jdGlvbiBrbih0KXtmb3IodmFyIGU9dCxuPTA7bjxlLmxlbmd0aC0xO24rKyl7dmFyIHI9ZVtuXTtpZihyLmZyb20hPXIudG8pZm9yKHZhciBvPW4rMTtvPGUubGVuZ3RoO28rKyl7dmFyIGk9ZVtvXTtpZihpLmZyb20hPXIuZnJvbSl7aS5mcm9tPHIudG8mJihlPT10JiYoZT10LnNsaWNlKCkpLGVbbl09ci5jb3B5KHIuZnJvbSxpLmZyb20pLFNuKGUsbyxyLmNvcHkoaS5mcm9tLHIudG8pKSk7YnJlYWt9aS50byE9ci50byYmKGU9PXQmJihlPXQuc2xpY2UoKSksZVtvXT1pLmNvcHkoaS5mcm9tLHIudG8pLFNuKGUsbysxLGkuY29weShyLnRvLGkudG8pKSl9fXJldHVybiBlfWZ1bmN0aW9uIFNuKHQsZSxuKXt3aGlsZShlPHQubGVuZ3RoJiZibihuLHRbZV0pPjApZSsrO3Quc3BsaWNlKGUsMCxuKX1mdW5jdGlvbiBDbih0KXt2YXIgZT1bXTtyZXR1cm4gdC5zb21lUHJvcCgiZGVjb3JhdGlvbnMiLChmdW5jdGlvbihuKXt2YXIgcj1uKHQuc3RhdGUpO3ImJnIhPWZuJiZlLnB1c2gocil9KSksdC5jdXJzb3JXcmFwcGVyJiZlLnB1c2goaG4uY3JlYXRlKHQuc3RhdGUuZG9jLFt0LmN1cnNvcldyYXBwZXIuZGVjb10pKSxkbi5mcm9tKGUpfWRuLnByb3RvdHlwZS5mb3JDaGlsZD1mdW5jdGlvbih0LGUpe3ZhciBuPXRoaXM7aWYoZS5pc0xlYWYpcmV0dXJuIGhuLmVtcHR5O2Zvcih2YXIgcj1bXSxvPTA7bzx0aGlzLm1lbWJlcnMubGVuZ3RoO28rKyl7dmFyIGk9bi5tZW1iZXJzW29dLmZvckNoaWxkKHQsZSk7aSE9Zm4mJihpIGluc3RhbmNlb2YgZG4/cj1yLmNvbmNhdChpLm1lbWJlcnMpOnIucHVzaChpKSl9cmV0dXJuIGRuLmZyb20ocil9LGRuLnByb3RvdHlwZS5lcT1mdW5jdGlvbih0KXt2YXIgZT10aGlzO2lmKCEodCBpbnN0YW5jZW9mIGRuKXx8dC5tZW1iZXJzLmxlbmd0aCE9dGhpcy5tZW1iZXJzLmxlbmd0aClyZXR1cm4hMTtmb3IodmFyIG49MDtuPHRoaXMubWVtYmVycy5sZW5ndGg7bisrKWlmKCFlLm1lbWJlcnNbbl0uZXEodC5tZW1iZXJzW25dKSlyZXR1cm4hMTtyZXR1cm4hMH0sZG4ucHJvdG90eXBlLmxvY2Fscz1mdW5jdGlvbih0KXtmb3IodmFyIGUsbj10aGlzLHI9ITAsbz0wO288dGhpcy5tZW1iZXJzLmxlbmd0aDtvKyspe3ZhciBpPW4ubWVtYmVyc1tvXS5sb2NhbHNJbm5lcih0KTtpZihpLmxlbmd0aClpZihlKXtyJiYoZT1lLnNsaWNlKCkscj0hMSk7Zm9yKHZhciBzPTA7czxpLmxlbmd0aDtzKyspZS5wdXNoKGlbc10pfWVsc2UgZT1pfXJldHVybiBlP2tuKHI/ZTplLnNvcnQoYm4pKTpwbn0sZG4uZnJvbT1mdW5jdGlvbih0KXtzd2l0Y2godC5sZW5ndGgpe2Nhc2UgMDpyZXR1cm4gZm47Y2FzZSAxOnJldHVybiB0WzBdO2RlZmF1bHQ6cmV0dXJuIG5ldyBkbih0KX19O3ZhciBPbj1mdW5jdGlvbih0LGUpe3RoaXMuX3Byb3BzPWUsdGhpcy5zdGF0ZT1lLnN0YXRlLHRoaXMuZGlzcGF0Y2g9dGhpcy5kaXNwYXRjaC5iaW5kKHRoaXMpLHRoaXMuX3Jvb3Q9bnVsbCx0aGlzLmZvY3VzZWQ9ITEsdGhpcy5kb209dCYmdC5tb3VudHx8ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2IiksdCYmKHQuYXBwZW5kQ2hpbGQ/dC5hcHBlbmRDaGlsZCh0aGlzLmRvbSk6dC5hcHBseT90KHRoaXMuZG9tKTp0Lm1vdW50JiYodGhpcy5tb3VudGVkPSEwKSksdGhpcy5lZGl0YWJsZT1Fbih0aGlzKSx0aGlzLm1hcmtDdXJzb3I9bnVsbCx0aGlzLmN1cnNvcldyYXBwZXI9bnVsbCxObih0aGlzKSx0aGlzLm5vZGVWaWV3cz1Ebih0aGlzKSx0aGlzLmRvY1ZpZXc9b3QodGhpcy5zdGF0ZS5kb2MsVG4odGhpcyksQ24odGhpcyksdGhpcy5kb20sdGhpcyksdGhpcy5sYXN0U2VsZWN0ZWRWaWV3RGVzYz1udWxsLHRoaXMuZHJhZ2dpbmc9bnVsbCxPZSh0aGlzKSx0aGlzLnBsdWdpblZpZXdzPVtdLHRoaXMudXBkYXRlUGx1Z2luVmlld3MoKX0sTW49e3Byb3BzOnt9LHJvb3Q6e319O2Z1bmN0aW9uIFRuKHQpe3ZhciBlPU9iamVjdC5jcmVhdGUobnVsbCk7cmV0dXJuIGUuY2xhc3M9IlByb3NlTWlycm9yIixlLmNvbnRlbnRlZGl0YWJsZT1TdHJpbmcodC5lZGl0YWJsZSksdC5zb21lUHJvcCgiYXR0cmlidXRlcyIsKGZ1bmN0aW9uKG4pe2lmKCJmdW5jdGlvbiI9PXR5cGVvZiBuJiYobj1uKHQuc3RhdGUpKSxuKWZvcih2YXIgciBpbiBuKSJjbGFzcyI9PXI/ZS5jbGFzcys9IiAiK25bcl06ZVtyXXx8ImNvbnRlbnRlZGl0YWJsZSI9PXJ8fCJub2RlTmFtZSI9PXJ8fChlW3JdPVN0cmluZyhuW3JdKSl9KSksW2NuLm5vZGUoMCx0LnN0YXRlLmRvYy5jb250ZW50LnNpemUsZSldfWZ1bmN0aW9uIE5uKHQpe3ZhciBlPXQuc3RhdGUuc2VsZWN0aW9uLG49ZS4kaGVhZCxyPWUuJGFuY2hvcixvPWUudmlzaWJsZTtpZih0Lm1hcmtDdXJzb3Ipe3ZhciBpPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImltZyIpO2kuc2V0QXR0cmlidXRlKCJtYXJrLXBsYWNlaG9sZGVyIiwidHJ1ZSIpLHQuY3Vyc29yV3JhcHBlcj17ZG9tOmksZGVjbzpjbi53aWRnZXQobi5wb3MsaSx7cmF3OiEwLG1hcmtzOnQubWFya0N1cnNvcn0pfX1lbHNlIGlmKG98fG4ucG9zIT1yLnBvcyl0LmN1cnNvcldyYXBwZXI9bnVsbDtlbHNle3ZhciBzOyF0LmN1cnNvcldyYXBwZXJ8fHQuY3Vyc29yV3JhcHBlci5kb20uY2hpbGROb2Rlcy5sZW5ndGg/KHM9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2Iikscy5zdHlsZS5wb3NpdGlvbj0iYWJzb2x1dGUiLHMuc3R5bGUubGVmdD0iLTEwMDAwMHB4Iik6dC5jdXJzb3JXcmFwcGVyLmRlY28ucG9zIT1uLnBvcyYmKHM9dC5jdXJzb3JXcmFwcGVyLmRvbSkscyYmKHQuY3Vyc29yV3JhcHBlcj17ZG9tOnMsZGVjbzpjbi53aWRnZXQobi5wb3Mscyx7cmF3OiEwfSl9KX19ZnVuY3Rpb24gRW4odCl7cmV0dXJuIXQuc29tZVByb3AoImVkaXRhYmxlIiwoZnVuY3Rpb24oZSl7cmV0dXJuITE9PT1lKHQuc3RhdGUpfSkpfWZ1bmN0aW9uIEFuKHQpe3ZhciBlPXQuZ2V0U2VsZWN0aW9uKCksbj1lLmZvY3VzT2Zmc2V0LHI9ZS5mb2N1c05vZGU7cmV0dXJuIHImJjMhPXIubm9kZVR5cGU/W3IsbiwxPT1yLm5vZGVUeXBlP3IuY2hpbGROb2Rlc1tuLTFdOm51bGwsMT09ci5ub2RlVHlwZT9yLmNoaWxkTm9kZXNbbl06bnVsbF06bnVsbH1mdW5jdGlvbiBSbih0LGUpe3ZhciBuPUFuKGUpO2lmKCFufHwzPT1uWzBdLm5vZGVUeXBlKXJldHVybiExO2Zvcih2YXIgcj0wO3I8dC5sZW5ndGg7cisrKWlmKG5bcl0hPXRbcl0pcmV0dXJuITA7cmV0dXJuITF9ZnVuY3Rpb24gRG4odCl7dmFyIGU9e307cmV0dXJuIHQuc29tZVByb3AoIm5vZGVWaWV3cyIsKGZ1bmN0aW9uKHQpe2Zvcih2YXIgbiBpbiB0KU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChlLG4pfHwoZVtuXT10W25dKX0pKSxlfWZ1bmN0aW9uIHpuKHQsZSl7dmFyIG49MCxyPTA7Zm9yKHZhciBvIGluIHQpe2lmKHRbb10hPWVbb10pcmV0dXJuITA7bisrfWZvcih2YXIgaSBpbiBlKXIrKztyZXR1cm4gbiE9cn1Nbi5wcm9wcy5nZXQ9ZnVuY3Rpb24oKXt2YXIgdD10aGlzO2lmKHRoaXMuX3Byb3BzLnN0YXRlIT10aGlzLnN0YXRlKXt2YXIgZT10aGlzLl9wcm9wcztmb3IodmFyIG4gaW4gdGhpcy5fcHJvcHM9e30sZSl0Ll9wcm9wc1tuXT1lW25dO3RoaXMuX3Byb3BzLnN0YXRlPXRoaXMuc3RhdGV9cmV0dXJuIHRoaXMuX3Byb3BzfSxPbi5wcm90b3R5cGUudXBkYXRlPWZ1bmN0aW9uKHQpe3QuaGFuZGxlRE9NRXZlbnRzIT10aGlzLl9wcm9wcy5oYW5kbGVET01FdmVudHMmJk5lKHRoaXMpLHRoaXMuX3Byb3BzPXQsdGhpcy51cGRhdGVTdGF0ZUlubmVyKHQuc3RhdGUsITApfSxPbi5wcm90b3R5cGUuc2V0UHJvcHM9ZnVuY3Rpb24odCl7dmFyIGU9dGhpcyxuPXt9O2Zvcih2YXIgciBpbiBlLl9wcm9wcyluW3JdPWUuX3Byb3BzW3JdO2Zvcih2YXIgbyBpbiBuLnN0YXRlPXRoaXMuc3RhdGUsdCluW29dPXRbb107dGhpcy51cGRhdGUobil9LE9uLnByb3RvdHlwZS51cGRhdGVTdGF0ZT1mdW5jdGlvbih0KXt0aGlzLnVwZGF0ZVN0YXRlSW5uZXIodCx0aGlzLnN0YXRlLnBsdWdpbnMhPXQucGx1Z2lucyl9LE9uLnByb3RvdHlwZS51cGRhdGVTdGF0ZUlubmVyPWZ1bmN0aW9uKHQsZSl7dmFyIG49dGhpcyxvPXRoaXMuc3RhdGUsaT0hMTtpZih0aGlzLnN0YXRlPXQsZSl7dmFyIGE9RG4odGhpcyk7em4oYSx0aGlzLm5vZGVWaWV3cykmJih0aGlzLm5vZGVWaWV3cz1hLGk9ITApLE5lKHRoaXMpfXRoaXMuZWRpdGFibGU9RW4odGhpcyksTm4odGhpcyk7dmFyIGM9Q24odGhpcyksbD1Ubih0aGlzKSxwPWU/InJlc2V0Ijp0LnNjcm9sbFRvU2VsZWN0aW9uPm8uc2Nyb2xsVG9TZWxlY3Rpb24/InRvIHNlbGVjdGlvbiI6InByZXNlcnZlIix1PWl8fCF0aGlzLmRvY1ZpZXcubWF0Y2hlc05vZGUodC5kb2MsbCxjKSxoPXV8fCF0LnNlbGVjdGlvbi5lcShvLnNlbGVjdGlvbiksZj0icHJlc2VydmUiPT1wJiZoJiZudWxsPT10aGlzLmRvbS5zdHlsZS5vdmVyZmxvd0FuY2hvciYmTyh0aGlzKTtpZihoKXt0aGlzLmRvbU9ic2VydmVyLnN0b3AoKTt2YXIgZD0hMTtpZih1KXt2YXIgdj1zLmNocm9tZSYmQW4odGhpcy5yb290KTshaSYmdGhpcy5kb2NWaWV3LnVwZGF0ZSh0LmRvYyxsLGMsdGhpcyl8fCh0aGlzLmRvY1ZpZXcuZGVzdHJveSgpLHRoaXMuZG9jVmlldz1vdCh0LmRvYyxsLGMsdGhpcy5kb20sdGhpcykpLHYmJihkPSF0aGlzLmNvbXBvc2luZyYmUm4odix0aGlzLnJvb3QpKSxzLmllJiZzLmllX3ZlcnNpb248PTExJiYhby5zZWxlY3Rpb24uZW1wdHkmJnQuc2VsZWN0aW9uLmVtcHR5JiZ0LmRvYy5jb250ZW50LnNpemU8by5kb2MuY29udGVudC5zaXplJiYoZD0hMCl9ZHx8ISh0aGlzLm1vdXNlRG93biYmdGhpcy5kb21PYnNlcnZlci5jdXJyZW50U2VsZWN0aW9uLmVxKHRoaXMucm9vdC5nZXRTZWxlY3Rpb24oKSkmJll0KHRoaXMpKT9WdCh0aGlzLCExLGQpOihIdCh0aGlzLHQuc2VsZWN0aW9uKSx0aGlzLmRvbU9ic2VydmVyLnNldEN1clNlbGVjdGlvbigpKSx0aGlzLmRvbU9ic2VydmVyLnN0YXJ0KCl9aWYodGhpcy51cGRhdGVQbHVnaW5WaWV3cyhvKSwicmVzZXQiPT1wKXRoaXMuZG9tLnNjcm9sbFRvcD0wO2Vsc2UgaWYoInRvIHNlbGVjdGlvbiI9PXApe3ZhciBtPXRoaXMucm9vdC5nZXRTZWxlY3Rpb24oKS5mb2N1c05vZGU7dGhpcy5zb21lUHJvcCgiaGFuZGxlU2Nyb2xsVG9TZWxlY3Rpb24iLChmdW5jdGlvbih0KXtyZXR1cm4gdChuKX0pKXx8KHQuc2VsZWN0aW9uIGluc3RhbmNlb2Ygci5Ob2RlU2VsZWN0aW9uP0ModGhpcyx0aGlzLmRvY1ZpZXcuZG9tQWZ0ZXJQb3ModC5zZWxlY3Rpb24uZnJvbSkuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCksbSk6Qyh0aGlzLHRoaXMuY29vcmRzQXRQb3ModC5zZWxlY3Rpb24uaGVhZCksbSkpfWVsc2UgZiYmTShmKX0sT24ucHJvdG90eXBlLmRlc3Ryb3lQbHVnaW5WaWV3cz1mdW5jdGlvbigpe3ZhciB0O3doaWxlKHQ9dGhpcy5wbHVnaW5WaWV3cy5wb3AoKSl0LmRlc3Ryb3kmJnQuZGVzdHJveSgpfSxPbi5wcm90b3R5cGUudXBkYXRlUGx1Z2luVmlld3M9ZnVuY3Rpb24odCl7dmFyIGU9dGhpcztpZih0JiZ0LnBsdWdpbnM9PXRoaXMuc3RhdGUucGx1Z2lucylmb3IodmFyIG49MDtuPHRoaXMucGx1Z2luVmlld3MubGVuZ3RoO24rKyl7dmFyIHI9ZS5wbHVnaW5WaWV3c1tuXTtyLnVwZGF0ZSYmci51cGRhdGUoZSx0KX1lbHNle3RoaXMuZGVzdHJveVBsdWdpblZpZXdzKCk7Zm9yKHZhciBvPTA7bzx0aGlzLnN0YXRlLnBsdWdpbnMubGVuZ3RoO28rKyl7dmFyIGk9ZS5zdGF0ZS5wbHVnaW5zW29dO2kuc3BlYy52aWV3JiZlLnBsdWdpblZpZXdzLnB1c2goaS5zcGVjLnZpZXcoZSkpfX19LE9uLnByb3RvdHlwZS5zb21lUHJvcD1mdW5jdGlvbih0LGUpe3ZhciBuLHI9dGhpcy5fcHJvcHMmJnRoaXMuX3Byb3BzW3RdO2lmKG51bGwhPXImJihuPWU/ZShyKTpyKSlyZXR1cm4gbjt2YXIgbz10aGlzLnN0YXRlLnBsdWdpbnM7aWYobylmb3IodmFyIGk9MDtpPG8ubGVuZ3RoO2krKyl7dmFyIHM9b1tpXS5wcm9wc1t0XTtpZihudWxsIT1zJiYobj1lP2Uocyk6cykpcmV0dXJuIG59fSxPbi5wcm90b3R5cGUuaGFzRm9jdXM9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5yb290LmFjdGl2ZUVsZW1lbnQ9PXRoaXMuZG9tfSxPbi5wcm90b3R5cGUuZm9jdXM9ZnVuY3Rpb24oKXt0aGlzLmRvbU9ic2VydmVyLnN0b3AoKSxWdCh0aGlzLCEwKSx0aGlzLmVkaXRhYmxlJiYodGhpcy5kb20uc2V0QWN0aXZlP3RoaXMuZG9tLnNldEFjdGl2ZSgpOnRoaXMuZG9tLmZvY3VzKHtwcmV2ZW50U2Nyb2xsOiEwfSkpLHRoaXMuZG9tT2JzZXJ2ZXIuc3RhcnQoKX0sTW4ucm9vdC5nZXQ9ZnVuY3Rpb24oKXt2YXIgdD10aGlzLGU9dGhpcy5fcm9vdDtpZihudWxsPT1lKWZvcih2YXIgbj10aGlzLmRvbS5wYXJlbnROb2RlO247bj1uLnBhcmVudE5vZGUpaWYoOT09bi5ub2RlVHlwZXx8MTE9PW4ubm9kZVR5cGUmJm4uaG9zdClyZXR1cm4gdC5fcm9vdD1uO3JldHVybiBlfHxkb2N1bWVudH0sT24ucHJvdG90eXBlLnBvc0F0Q29vcmRzPWZ1bmN0aW9uKHQpe3JldHVybiBQKHRoaXMsdCl9LE9uLnByb3RvdHlwZS5jb29yZHNBdFBvcz1mdW5jdGlvbih0KXtyZXR1cm4gXyh0aGlzLHQpfSxPbi5wcm90b3R5cGUuZG9tQXRQb3M9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuZG9jVmlldy5kb21Gcm9tUG9zKHQpfSxPbi5wcm90b3R5cGUubm9kZURPTT1mdW5jdGlvbih0KXt2YXIgZT10aGlzLmRvY1ZpZXcuZGVzY0F0KHQpO3JldHVybiBlP2Uubm9kZURPTTpudWxsfSxPbi5wcm90b3R5cGUucG9zQXRET009ZnVuY3Rpb24odCxlLG4pe3ZvaWQgMD09PW4mJihuPS0xKTt2YXIgcj10aGlzLmRvY1ZpZXcucG9zRnJvbURPTSh0LGUsbik7aWYobnVsbD09cil0aHJvdyBuZXcgUmFuZ2VFcnJvcigiRE9NIHBvc2l0aW9uIG5vdCBpbnNpZGUgdGhlIGVkaXRvciIpO3JldHVybiByfSxPbi5wcm90b3R5cGUuZW5kT2ZUZXh0YmxvY2s9ZnVuY3Rpb24odCxlKXtyZXR1cm4gSCh0aGlzLGV8fHRoaXMuc3RhdGUsdCl9LE9uLnByb3RvdHlwZS5kZXN0cm95PWZ1bmN0aW9uKCl7dGhpcy5kb2NWaWV3JiYoVGUodGhpcyksdGhpcy5kZXN0cm95UGx1Z2luVmlld3MoKSx0aGlzLm1vdW50ZWQ/KHRoaXMuZG9jVmlldy51cGRhdGUodGhpcy5zdGF0ZS5kb2MsW10sQ24odGhpcyksdGhpcyksdGhpcy5kb20udGV4dENvbnRlbnQ9IiIpOnRoaXMuZG9tLnBhcmVudE5vZGUmJnRoaXMuZG9tLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQodGhpcy5kb20pLHRoaXMuZG9jVmlldy5kZXN0cm95KCksdGhpcy5kb2NWaWV3PW51bGwpfSxPbi5wcm90b3R5cGUuZGlzcGF0Y2hFdmVudD1mdW5jdGlvbih0KXtyZXR1cm4gUmUodGhpcyx0KX0sT24ucHJvdG90eXBlLmRpc3BhdGNoPWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMuX3Byb3BzLmRpc3BhdGNoVHJhbnNhY3Rpb247ZT9lLmNhbGwodGhpcyx0KTp0aGlzLnVwZGF0ZVN0YXRlKHRoaXMuc3RhdGUuYXBwbHkodCkpfSxPYmplY3QuZGVmaW5lUHJvcGVydGllcyhPbi5wcm90b3R5cGUsTW4pLGUuRWRpdG9yVmlldz1PbixlLkRlY29yYXRpb249Y24sZS5EZWNvcmF0aW9uU2V0PWhuLGUuX19zZXJpYWxpemVGb3JDbGlwYm9hcmQ9c2UsZS5fX3BhcnNlRnJvbUNsaXBib2FyZD1hZSxlLl9fZW5kQ29tcG9zaXRpb249VWV9LCI3MWMxIjpmdW5jdGlvbih0LGUsbil7dmFyIHI9bigiM2EzOCIpLG89bigiMjVlYiIpO3QuZXhwb3J0cz1mdW5jdGlvbih0KXtyZXR1cm4gZnVuY3Rpb24oZSxuKXt2YXIgaSxzLGE9U3RyaW5nKG8oZSkpLGM9cihuKSxsPWEubGVuZ3RoO3JldHVybiBjPDB8fGM+PWw/dD8iIjp2b2lkIDA6KGk9YS5jaGFyQ29kZUF0KGMpLGk8NTUyOTZ8fGk+NTYzMTl8fGMrMT09PWx8fChzPWEuY2hhckNvZGVBdChjKzEpKTw1NjMyMHx8cz41NzM0Mz90P2EuY2hhckF0KGMpOmk6dD9hLnNsaWNlKGMsYysyKTpzLTU2MzIwKyhpLTU1Mjk2PDwxMCkrNjU1MzYpfX19LCI3MjdkIjpmdW5jdGlvbih0LGUsbil7InVzZSBzdHJpY3QiO09iamVjdC5kZWZpbmVQcm9wZXJ0eShlLCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KTt2YXIgcj1uKCI2ZmZiIiksbz1uKCI4YWJlIiksaT1uKCIzMzYyIikscz17fTtpZigidW5kZWZpbmVkIiE9dHlwZW9mIG5hdmlnYXRvciYmInVuZGVmaW5lZCIhPXR5cGVvZiBkb2N1bWVudCl7dmFyIGE9L0VkZ2VcLyhcZCspLy5leGVjKG5hdmlnYXRvci51c2VyQWdlbnQpLGM9L01TSUUgXGQvLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudCksbD0vVHJpZGVudFwvKD86WzctOV18XGR7Mix9KVwuLipydjooXGQrKS8uZXhlYyhuYXZpZ2F0b3IudXNlckFnZW50KTtzLm1hYz0vTWFjLy50ZXN0KG5hdmlnYXRvci5wbGF0Zm9ybSk7dmFyIHA9cy5pZT0hIShjfHxsfHxhKTtzLmllX3ZlcnNpb249Yz9kb2N1bWVudC5kb2N1bWVudE1vZGV8fDY6bD8rbFsxXTphPythWzFdOm51bGwscy5nZWNrbz0hcCYmL2dlY2tvXC8oXGQrKS9pLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudCkscy5nZWNrb192ZXJzaW9uPXMuZ2Vja28mJisoL0ZpcmVmb3hcLyhcZCspLy5leGVjKG5hdmlnYXRvci51c2VyQWdlbnQpfHxbMCwwXSlbMV07dmFyIHU9IXAmJi9DaHJvbWVcLyhcZCspLy5leGVjKG5hdmlnYXRvci51c2VyQWdlbnQpO3MuY2hyb21lPSEhdSxzLmNocm9tZV92ZXJzaW9uPXUmJit1WzFdLHMuaW9zPSFwJiYvQXBwbGVXZWJLaXQvLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudCkmJi9Nb2JpbGVcL1x3Ky8udGVzdChuYXZpZ2F0b3IudXNlckFnZW50KSxzLmFuZHJvaWQ9L0FuZHJvaWQgXGQvLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudCkscy53ZWJraXQ9IXAmJiJXZWJraXRBcHBlYXJhbmNlImluIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zdHlsZSxzLnNhZmFyaT0vQXBwbGUgQ29tcHV0ZXIvLnRlc3QobmF2aWdhdG9yLnZlbmRvcikscy53ZWJraXRfdmVyc2lvbj1zLndlYmtpdCYmKygvXGJBcHBsZVdlYktpdFwvKFxkKykvLmV4ZWMobmF2aWdhdG9yLnVzZXJBZ2VudCl8fFswLDBdKVsxXX12YXIgaD1mdW5jdGlvbih0KXtmb3IodmFyIGU9MDs7ZSsrKWlmKHQ9dC5wcmV2aW91c1NpYmxpbmcsIXQpcmV0dXJuIGV9LGY9ZnVuY3Rpb24odCl7dmFyIGU9dC5wYXJlbnROb2RlO3JldHVybiBlJiYxMT09ZS5ub2RlVHlwZT9lLmhvc3Q6ZX0sZD1mdW5jdGlvbih0LGUsbil7dmFyIHI9ZG9jdW1lbnQuY3JlYXRlUmFuZ2UoKTtyZXR1cm4gci5zZXRFbmQodCxudWxsPT1uP3Qubm9kZVZhbHVlLmxlbmd0aDpuKSxyLnNldFN0YXJ0KHQsZXx8MCkscn0sdj1mdW5jdGlvbih0LGUsbixyKXtyZXR1cm4gbiYmKHkodCxlLG4sciwtMSl8fHkodCxlLG4sciwxKSl9LG09L14oaW1nfGJyfGlucHV0fHRleHRhcmVhfGhyKSQvaTtmdW5jdGlvbiB5KHQsZSxuLHIsbyl7Zm9yKDs7KXtpZih0PT1uJiZlPT1yKXJldHVybiEwO2lmKGU9PShvPDA/MDpnKHQpKSl7dmFyIGk9dC5wYXJlbnROb2RlO2lmKDEhPWkubm9kZVR5cGV8fHcodCl8fG0udGVzdCh0Lm5vZGVOYW1lKXx8ImZhbHNlIj09dC5jb250ZW50RWRpdGFibGUpcmV0dXJuITE7ZT1oKHQpKyhvPDA/MDoxKSx0PWl9ZWxzZXtpZigxIT10Lm5vZGVUeXBlKXJldHVybiExO3Q9dC5jaGlsZE5vZGVzW2UrKG88MD8tMTowKV0sZT1vPDA/Zyh0KTowfX19ZnVuY3Rpb24gZyh0KXtyZXR1cm4gMz09dC5ub2RlVHlwZT90Lm5vZGVWYWx1ZS5sZW5ndGg6dC5jaGlsZE5vZGVzLmxlbmd0aH1mdW5jdGlvbiB3KHQpe2Zvcih2YXIgZSxuPXQ7bjtuPW4ucGFyZW50Tm9kZSlpZihlPW4ucG1WaWV3RGVzYylicmVhaztyZXR1cm4gZSYmZS5ub2RlJiZlLm5vZGUuaXNCbG9jayYmKGUuZG9tPT10fHxlLmNvbnRlbnRET009PXQpfXZhciB4PWZ1bmN0aW9uKHQpe3ZhciBlPXQuaXNDb2xsYXBzZWQ7cmV0dXJuIGUmJnMuY2hyb21lJiZ0LnJhbmdlQ291bnQmJiF0LmdldFJhbmdlQXQoMCkuY29sbGFwc2VkJiYoZT0hMSksZX07ZnVuY3Rpb24gYih0LGUpe3ZhciBuPWRvY3VtZW50LmNyZWF0ZUV2ZW50KCJFdmVudCIpO3JldHVybiBuLmluaXRFdmVudCgia2V5ZG93biIsITAsITApLG4ua2V5Q29kZT10LG4ua2V5PW4uY29kZT1lLG59ZnVuY3Rpb24gayh0KXtyZXR1cm57bGVmdDowLHJpZ2h0OnQuaW5uZXJXaWR0aCx0b3A6MCxib3R0b206dC5pbm5lckhlaWdodH19ZnVuY3Rpb24gUyh0LGUpe3JldHVybiJudW1iZXIiPT10eXBlb2YgdD90OnRbZV19ZnVuY3Rpb24gQyh0LGUsbil7Zm9yKHZhciByPXQuc29tZVByb3AoInNjcm9sbFRocmVzaG9sZCIpfHwwLG89dC5zb21lUHJvcCgic2Nyb2xsTWFyZ2luIil8fDUsaT10LmRvbS5vd25lckRvY3VtZW50LHM9aS5kZWZhdWx0VmlldyxhPW58fHQuZG9tOzthPWYoYSkpe2lmKCFhKWJyZWFrO2lmKDE9PWEubm9kZVR5cGUpe3ZhciBjPWE9PWkuYm9keXx8MSE9YS5ub2RlVHlwZSxsPWM/ayhzKTphLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLHA9MCx1PTA7aWYoZS50b3A8bC50b3ArUyhyLCJ0b3AiKT91PS0obC50b3AtZS50b3ArUyhvLCJ0b3AiKSk6ZS5ib3R0b20+bC5ib3R0b20tUyhyLCJib3R0b20iKSYmKHU9ZS5ib3R0b20tbC5ib3R0b20rUyhvLCJib3R0b20iKSksZS5sZWZ0PGwubGVmdCtTKHIsImxlZnQiKT9wPS0obC5sZWZ0LWUubGVmdCtTKG8sImxlZnQiKSk6ZS5yaWdodD5sLnJpZ2h0LVMociwicmlnaHQiKSYmKHA9ZS5yaWdodC1sLnJpZ2h0K1MobywicmlnaHQiKSksKHB8fHUpJiYoYz9zLnNjcm9sbEJ5KHAsdSk6KHUmJihhLnNjcm9sbFRvcCs9dSkscCYmKGEuc2Nyb2xsTGVmdCs9cCkpKSxjKWJyZWFrfX19ZnVuY3Rpb24gTyh0KXtmb3IodmFyIGUsbixyPXQuZG9tLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLG89TWF0aC5tYXgoMCxyLnRvcCksaT10LmRvbS5vd25lckRvY3VtZW50LHM9KHIubGVmdCtyLnJpZ2h0KS8yLGE9bysxO2E8TWF0aC5taW4oaW5uZXJIZWlnaHQsci5ib3R0b20pO2ErPTUpe3ZhciBjPXQucm9vdC5lbGVtZW50RnJvbVBvaW50KHMsYSk7aWYoYyE9dC5kb20mJnQuZG9tLmNvbnRhaW5zKGMpKXt2YXIgbD1jLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO2lmKGwudG9wPj1vLTIwKXtlPWMsbj1sLnRvcDticmVha319fWZvcih2YXIgcD1bXSx1PXQuZG9tO3U7dT1mKHUpKWlmKHAucHVzaCh7ZG9tOnUsdG9wOnUuc2Nyb2xsVG9wLGxlZnQ6dS5zY3JvbGxMZWZ0fSksdT09aS5ib2R5KWJyZWFrO3JldHVybntyZWZET006ZSxyZWZUb3A6bixzdGFjazpwfX1mdW5jdGlvbiBNKHQpe2Zvcih2YXIgZT10LnJlZkRPTSxuPXQucmVmVG9wLHI9dC5zdGFjayxvPWU/ZS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS50b3A6MCxpPTA9PW8/MDpvLW4scz0wO3M8ci5sZW5ndGg7cysrKXt2YXIgYT1yW3NdLGM9YS5kb20sbD1hLnRvcCxwPWEubGVmdDtjLnNjcm9sbFRvcCE9bCtpJiYoYy5zY3JvbGxUb3A9bCtpKSxjLnNjcm9sbExlZnQhPXAmJihjLnNjcm9sbExlZnQ9cCl9fWZ1bmN0aW9uIFQodCxlKXtmb3IodmFyIG4scixvPTJlOCxpPTAscz1lLnRvcCxhPWUudG9wLGM9dC5maXJzdENoaWxkLGw9MDtjO2M9Yy5uZXh0U2libGluZyxsKyspe3ZhciBwPXZvaWQgMDtpZigxPT1jLm5vZGVUeXBlKXA9Yy5nZXRDbGllbnRSZWN0cygpO2Vsc2V7aWYoMyE9Yy5ub2RlVHlwZSljb250aW51ZTtwPWQoYykuZ2V0Q2xpZW50UmVjdHMoKX1mb3IodmFyIHU9MDt1PHAubGVuZ3RoO3UrKyl7dmFyIGg9cFt1XTtpZihoLnRvcDw9cyYmaC5ib3R0b20+PWEpe3M9TWF0aC5tYXgoaC5ib3R0b20scyksYT1NYXRoLm1pbihoLnRvcCxhKTt2YXIgZj1oLmxlZnQ+ZS5sZWZ0P2gubGVmdC1lLmxlZnQ6aC5yaWdodDxlLmxlZnQ/ZS5sZWZ0LWgucmlnaHQ6MDtpZihmPG8pe249YyxvPWYscj1mJiYzPT1uLm5vZGVUeXBlP3tsZWZ0OmgucmlnaHQ8ZS5sZWZ0P2gucmlnaHQ6aC5sZWZ0LHRvcDplLnRvcH06ZSwxPT1jLm5vZGVUeXBlJiZmJiYoaT1sKyhlLmxlZnQ+PShoLmxlZnQraC5yaWdodCkvMj8xOjApKTtjb250aW51ZX19IW4mJihlLmxlZnQ+PWgucmlnaHQmJmUudG9wPj1oLnRvcHx8ZS5sZWZ0Pj1oLmxlZnQmJmUudG9wPj1oLmJvdHRvbSkmJihpPWwrMSl9fXJldHVybiBuJiYzPT1uLm5vZGVUeXBlP04obixyKTohbnx8byYmMT09bi5ub2RlVHlwZT97bm9kZTp0LG9mZnNldDppfTpUKG4scil9ZnVuY3Rpb24gTih0LGUpe2Zvcih2YXIgbj10Lm5vZGVWYWx1ZS5sZW5ndGgscj1kb2N1bWVudC5jcmVhdGVSYW5nZSgpLG89MDtvPG47bysrKXtyLnNldEVuZCh0LG8rMSksci5zZXRTdGFydCh0LG8pO3ZhciBpPUkociwxKTtpZihpLnRvcCE9aS5ib3R0b20mJkUoZSxpKSlyZXR1cm57bm9kZTp0LG9mZnNldDpvKyhlLmxlZnQ+PShpLmxlZnQraS5yaWdodCkvMj8xOjApfX1yZXR1cm57bm9kZTp0LG9mZnNldDowfX1mdW5jdGlvbiBFKHQsZSl7cmV0dXJuIHQubGVmdD49ZS5sZWZ0LTEmJnQubGVmdDw9ZS5yaWdodCsxJiZ0LnRvcD49ZS50b3AtMSYmdC50b3A8PWUuYm90dG9tKzF9ZnVuY3Rpb24gQSh0LGUpe3ZhciBuPXQucGFyZW50Tm9kZTtyZXR1cm4gbiYmL15saSQvaS50ZXN0KG4ubm9kZU5hbWUpJiZlLmxlZnQ8dC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS5sZWZ0P246dH1mdW5jdGlvbiBSKHQsZSxuKXt2YXIgcj1UKGUsbiksbz1yLm5vZGUsaT1yLm9mZnNldCxzPS0xO2lmKDE9PW8ubm9kZVR5cGUmJiFvLmZpcnN0Q2hpbGQpe3ZhciBhPW8uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7cz1hLmxlZnQhPWEucmlnaHQmJm4ubGVmdD4oYS5sZWZ0K2EucmlnaHQpLzI/MTotMX1yZXR1cm4gdC5kb2NWaWV3LnBvc0Zyb21ET00obyxpLHMpfWZ1bmN0aW9uIEQodCxlLG4scil7Zm9yKHZhciBvPS0xLGk9ZTs7KXtpZihpPT10LmRvbSlicmVhazt2YXIgcz10LmRvY1ZpZXcubmVhcmVzdERlc2MoaSwhMCk7aWYoIXMpcmV0dXJuIG51bGw7aWYocy5ub2RlLmlzQmxvY2smJnMucGFyZW50KXt2YXIgYT1zLmRvbS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtpZihhLmxlZnQ+ci5sZWZ0fHxhLnRvcD5yLnRvcClvPXMucG9zQmVmb3JlO2Vsc2V7aWYoIShhLnJpZ2h0PHIubGVmdHx8YS5ib3R0b208ci50b3ApKWJyZWFrO289cy5wb3NBZnRlcn19aT1zLmRvbS5wYXJlbnROb2RlfXJldHVybiBvPi0xP286dC5kb2NWaWV3LnBvc0Zyb21ET00oZSxuKX1mdW5jdGlvbiB6KHQsZSxuKXt2YXIgcj10LmNoaWxkTm9kZXMubGVuZ3RoO2lmKHImJm4udG9wPG4uYm90dG9tKWZvcih2YXIgbz1NYXRoLm1heCgwLE1hdGgubWluKHItMSxNYXRoLmZsb29yKHIqKGUudG9wLW4udG9wKS8obi5ib3R0b20tbi50b3ApKS0yKSksaT1vOzspe3ZhciBzPXQuY2hpbGROb2Rlc1tpXTtpZigxPT1zLm5vZGVUeXBlKWZvcih2YXIgYT1zLmdldENsaWVudFJlY3RzKCksYz0wO2M8YS5sZW5ndGg7YysrKXt2YXIgbD1hW2NdO2lmKEUoZSxsKSlyZXR1cm4geihzLGUsbCl9aWYoKGk9KGkrMSklcik9PW8pYnJlYWt9cmV0dXJuIHR9ZnVuY3Rpb24gUCh0LGUpe3ZhciBuLHIsbz10LnJvb3Q7aWYoby5jYXJldFBvc2l0aW9uRnJvbVBvaW50KXt2YXIgaSxhPW8uY2FyZXRQb3NpdGlvbkZyb21Qb2ludChlLmxlZnQsZS50b3ApO2lmKGEpaT1hLG49aS5vZmZzZXROb2RlLHI9aS5vZmZzZXR9aWYoIW4mJm8uY2FyZXRSYW5nZUZyb21Qb2ludCl7dmFyIGMsbD1vLmNhcmV0UmFuZ2VGcm9tUG9pbnQoZS5sZWZ0LGUudG9wKTtpZihsKWM9bCxuPWMuc3RhcnRDb250YWluZXIscj1jLnN0YXJ0T2Zmc2V0fXZhciBwLHU9by5lbGVtZW50RnJvbVBvaW50KGUubGVmdCxlLnRvcCsxKTtpZighdXx8IXQuZG9tLmNvbnRhaW5zKDEhPXUubm9kZVR5cGU/dS5wYXJlbnROb2RlOnUpKXt2YXIgaD10LmRvbS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtpZighRShlLGgpKXJldHVybiBudWxsO2lmKHU9eih0LmRvbSxlLGgpLCF1KXJldHVybiBudWxsfWlmKHU9QSh1LGUpLG4pe2lmKHMuZ2Vja28mJjE9PW4ubm9kZVR5cGUmJihyPU1hdGgubWluKHIsbi5jaGlsZE5vZGVzLmxlbmd0aCkscjxuLmNoaWxkTm9kZXMubGVuZ3RoKSl7dmFyIGYsZD1uLmNoaWxkTm9kZXNbcl07IklNRyI9PWQubm9kZU5hbWUmJihmPWQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkpLnJpZ2h0PD1lLmxlZnQmJmYuYm90dG9tPmUudG9wJiZyKyt9bj09dC5kb20mJnI9PW4uY2hpbGROb2Rlcy5sZW5ndGgtMSYmMT09bi5sYXN0Q2hpbGQubm9kZVR5cGUmJmUudG9wPm4ubGFzdENoaWxkLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLmJvdHRvbT9wPXQuc3RhdGUuZG9jLmNvbnRlbnQuc2l6ZTowIT1yJiYxPT1uLm5vZGVUeXBlJiYiQlIiPT1uLmNoaWxkTm9kZXNbci0xXS5ub2RlTmFtZXx8KHA9RCh0LG4scixlKSl9bnVsbD09cCYmKHA9Uih0LHUsZSkpO3ZhciB2PXQuZG9jVmlldy5uZWFyZXN0RGVzYyh1LCEwKTtyZXR1cm57cG9zOnAsaW5zaWRlOnY/di5wb3NBdFN0YXJ0LXYuYm9yZGVyOi0xfX1mdW5jdGlvbiBJKHQsZSl7dmFyIG49dC5nZXRDbGllbnRSZWN0cygpO3JldHVybiBuLmxlbmd0aD9uW2U8MD8wOm4ubGVuZ3RoLTFdOnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCl9ZnVuY3Rpb24gXyh0LGUpe3ZhciBuPXQuZG9jVmlldy5kb21Gcm9tUG9zKGUpLHI9bi5ub2RlLG89bi5vZmZzZXQ7aWYoMz09ci5ub2RlVHlwZSYmKHMuY2hyb21lfHxzLmdlY2tvKSl7dmFyIGk9SShkKHIsbyxvKSwwKTtpZihzLmdlY2tvJiZvJiYvXHMvLnRlc3Qoci5ub2RlVmFsdWVbby0xXSkmJm88ci5ub2RlVmFsdWUubGVuZ3RoKXt2YXIgYT1JKGQocixvLTEsby0xKSwtMSk7aWYoTWF0aC5hYnMoYS5sZWZ0LWkubGVmdCk8MSYmYS50b3A9PWkudG9wKXt2YXIgYz1JKGQocixvLG8rMSksLTEpO3JldHVybiBGKGMsYy5sZWZ0PGEubGVmdCl9fXJldHVybiBpfWlmKDE9PXIubm9kZVR5cGUmJiF0LnN0YXRlLmRvYy5yZXNvbHZlKGUpLnBhcmVudC5pbmxpbmVDb250ZW50KXt2YXIgbCxwPSEwO2lmKG88ci5jaGlsZE5vZGVzLmxlbmd0aCl7dmFyIHU9ci5jaGlsZE5vZGVzW29dOzE9PXUubm9kZVR5cGUmJihsPXUuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkpfWlmKCFsJiZvKXt2YXIgaD1yLmNoaWxkTm9kZXNbby0xXTsxPT1oLm5vZGVUeXBlJiYobD1oLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLHA9ITEpfXJldHVybiBCKGx8fHIuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkscCl9Zm9yKHZhciBmPS0xO2Y8MjtmKz0yKWlmKGY8MCYmbyl7dmFyIHY9dm9pZCAwLG09Mz09ci5ub2RlVHlwZT9kKHIsby0xLG8pOjM9PSh2PXIuY2hpbGROb2Rlc1tvLTFdKS5ub2RlVHlwZT9kKHYpOjE9PXYubm9kZVR5cGUmJiJCUiIhPXYubm9kZU5hbWU/djpudWxsO2lmKG0pe3ZhciB5PUkobSwxKTtpZih5LnRvcDx5LmJvdHRvbSlyZXR1cm4gRih5LCExKX19ZWxzZSBpZihmPjAmJm88ZyhyKSl7dmFyIHc9dm9pZCAwLHg9Mz09ci5ub2RlVHlwZT9kKHIsbyxvKzEpOjM9PSh3PXIuY2hpbGROb2Rlc1tvXSkubm9kZVR5cGU/ZCh3KToxPT13Lm5vZGVUeXBlP3c6bnVsbDtpZih4KXt2YXIgYj1JKHgsLTEpO2lmKGIudG9wPGIuYm90dG9tKXJldHVybiBGKGIsITApfX1yZXR1cm4gRihJKDM9PXIubm9kZVR5cGU/ZChyKTpyLDApLCExKX1mdW5jdGlvbiBGKHQsZSl7aWYoMD09dC53aWR0aClyZXR1cm4gdDt2YXIgbj1lP3QubGVmdDp0LnJpZ2h0O3JldHVybnt0b3A6dC50b3AsYm90dG9tOnQuYm90dG9tLGxlZnQ6bixyaWdodDpufX1mdW5jdGlvbiBCKHQsZSl7aWYoMD09dC5oZWlnaHQpcmV0dXJuIHQ7dmFyIG49ZT90LnRvcDp0LmJvdHRvbTtyZXR1cm57dG9wOm4sYm90dG9tOm4sbGVmdDp0LmxlZnQscmlnaHQ6dC5yaWdodH19ZnVuY3Rpb24gaih0LGUsbil7dmFyIHI9dC5zdGF0ZSxvPXQucm9vdC5hY3RpdmVFbGVtZW50O3IhPWUmJnQudXBkYXRlU3RhdGUoZSksbyE9dC5kb20mJnQuZm9jdXMoKTt0cnl7cmV0dXJuIG4oKX1maW5hbGx5e3IhPWUmJnQudXBkYXRlU3RhdGUociksbyE9dC5kb20mJm8uZm9jdXMoKX19ZnVuY3Rpb24gJCh0LGUsbil7dmFyIHI9ZS5zZWxlY3Rpb24sbz0idXAiPT1uP3IuJGFuY2hvci5taW4oci4kaGVhZCk6ci4kYW5jaG9yLm1heChyLiRoZWFkKTtyZXR1cm4gaih0LGUsKGZ1bmN0aW9uKCl7Zm9yKHZhciBlPXQuZG9jVmlldy5kb21Gcm9tUG9zKG8ucG9zKSxyPWUubm9kZTs7KXt2YXIgaT10LmRvY1ZpZXcubmVhcmVzdERlc2MociwhMCk7aWYoIWkpYnJlYWs7aWYoaS5ub2RlLmlzQmxvY2spe3I9aS5kb207YnJlYWt9cj1pLmRvbS5wYXJlbnROb2RlfWZvcih2YXIgcz1fKHQsby5wb3MpLGE9ci5maXJzdENoaWxkO2E7YT1hLm5leHRTaWJsaW5nKXt2YXIgYz12b2lkIDA7aWYoMT09YS5ub2RlVHlwZSljPWEuZ2V0Q2xpZW50UmVjdHMoKTtlbHNle2lmKDMhPWEubm9kZVR5cGUpY29udGludWU7Yz1kKGEsMCxhLm5vZGVWYWx1ZS5sZW5ndGgpLmdldENsaWVudFJlY3RzKCl9Zm9yKHZhciBsPTA7bDxjLmxlbmd0aDtsKyspe3ZhciBwPWNbbF07aWYocC5ib3R0b20+cC50b3AmJigidXAiPT1uP3AuYm90dG9tPHMudG9wKzE6cC50b3A+cy5ib3R0b20tMSkpcmV0dXJuITF9fXJldHVybiEwfSkpfXZhciBWPS9bXHUwNTkwLVx1MDhhY10vO2Z1bmN0aW9uIEwodCxlLG4pe3ZhciByPWUuc2VsZWN0aW9uLG89ci4kaGVhZDtpZighby5wYXJlbnQuaXNUZXh0YmxvY2spcmV0dXJuITE7dmFyIGk9by5wYXJlbnRPZmZzZXQscz0haSxhPWk9PW8ucGFyZW50LmNvbnRlbnQuc2l6ZSxjPWdldFNlbGVjdGlvbigpO3JldHVybiBWLnRlc3Qoby5wYXJlbnQudGV4dENvbnRlbnQpJiZjLm1vZGlmeT9qKHQsZSwoZnVuY3Rpb24oKXt2YXIgZT1jLmdldFJhbmdlQXQoMCkscj1jLmZvY3VzTm9kZSxpPWMuZm9jdXNPZmZzZXQscz1jLmNhcmV0QmlkaUxldmVsO2MubW9kaWZ5KCJtb3ZlIixuLCJjaGFyYWN0ZXIiKTt2YXIgYT1vLmRlcHRoP3QuZG9jVmlldy5kb21BZnRlclBvcyhvLmJlZm9yZSgpKTp0LmRvbSxsPSFhLmNvbnRhaW5zKDE9PWMuZm9jdXNOb2RlLm5vZGVUeXBlP2MuZm9jdXNOb2RlOmMuZm9jdXNOb2RlLnBhcmVudE5vZGUpfHxyPT1jLmZvY3VzTm9kZSYmaT09Yy5mb2N1c09mZnNldDtyZXR1cm4gYy5yZW1vdmVBbGxSYW5nZXMoKSxjLmFkZFJhbmdlKGUpLG51bGwhPXMmJihjLmNhcmV0QmlkaUxldmVsPXMpLGx9KSk6ImxlZnQiPT1ufHwiYmFja3dhcmQiPT1uP3M6YX12YXIgSj1udWxsLHE9bnVsbCxXPSExO2Z1bmN0aW9uIEgodCxlLG4pe3JldHVybiBKPT1lJiZxPT1uP1c6KEo9ZSxxPW4sVz0idXAiPT1ufHwiZG93biI9PW4/JCh0LGUsbik6TCh0LGUsbikpfXZhciBLPTAsVT0xLEc9MixYPTMsWT1mdW5jdGlvbih0LGUsbixyKXt0aGlzLnBhcmVudD10LHRoaXMuY2hpbGRyZW49ZSx0aGlzLmRvbT1uLG4ucG1WaWV3RGVzYz10aGlzLHRoaXMuY29udGVudERPTT1yLHRoaXMuZGlydHk9S30sUT17YmVmb3JlUG9zaXRpb246e30sc2l6ZTp7fSxib3JkZXI6e30scG9zQmVmb3JlOnt9LHBvc0F0U3RhcnQ6e30scG9zQWZ0ZXI6e30scG9zQXRFbmQ6e30sY29udGVudExvc3Q6e319O1kucHJvdG90eXBlLm1hdGNoZXNXaWRnZXQ9ZnVuY3Rpb24oKXtyZXR1cm4hMX0sWS5wcm90b3R5cGUubWF0Y2hlc01hcms9ZnVuY3Rpb24oKXtyZXR1cm4hMX0sWS5wcm90b3R5cGUubWF0Y2hlc05vZGU9ZnVuY3Rpb24oKXtyZXR1cm4hMX0sWS5wcm90b3R5cGUubWF0Y2hlc0hhY2s9ZnVuY3Rpb24oKXtyZXR1cm4hMX0sUS5iZWZvcmVQb3NpdGlvbi5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4hMX0sWS5wcm90b3R5cGUucGFyc2VSdWxlPWZ1bmN0aW9uKCl7cmV0dXJuIG51bGx9LFkucHJvdG90eXBlLnN0b3BFdmVudD1mdW5jdGlvbigpe3JldHVybiExfSxRLnNpemUuZ2V0PWZ1bmN0aW9uKCl7Zm9yKHZhciB0PXRoaXMsZT0wLG49MDtuPHRoaXMuY2hpbGRyZW4ubGVuZ3RoO24rKyllKz10LmNoaWxkcmVuW25dLnNpemU7cmV0dXJuIGV9LFEuYm9yZGVyLmdldD1mdW5jdGlvbigpe3JldHVybiAwfSxZLnByb3RvdHlwZS5kZXN0cm95PWZ1bmN0aW9uKCl7dmFyIHQ9dGhpczt0aGlzLnBhcmVudD1udWxsLHRoaXMuZG9tLnBtVmlld0Rlc2M9PXRoaXMmJih0aGlzLmRvbS5wbVZpZXdEZXNjPW51bGwpO2Zvcih2YXIgZT0wO2U8dGhpcy5jaGlsZHJlbi5sZW5ndGg7ZSsrKXQuY2hpbGRyZW5bZV0uZGVzdHJveSgpfSxZLnByb3RvdHlwZS5wb3NCZWZvcmVDaGlsZD1mdW5jdGlvbih0KXtmb3IodmFyIGU9dGhpcyxuPTAscj10aGlzLnBvc0F0U3RhcnQ7bjx0aGlzLmNoaWxkcmVuLmxlbmd0aDtuKyspe3ZhciBvPWUuY2hpbGRyZW5bbl07aWYobz09dClyZXR1cm4gcjtyKz1vLnNpemV9fSxRLnBvc0JlZm9yZS5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5wYXJlbnQucG9zQmVmb3JlQ2hpbGQodGhpcyl9LFEucG9zQXRTdGFydC5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5wYXJlbnQ/dGhpcy5wYXJlbnQucG9zQmVmb3JlQ2hpbGQodGhpcykrdGhpcy5ib3JkZXI6MH0sUS5wb3NBZnRlci5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5wb3NCZWZvcmUrdGhpcy5zaXplfSxRLnBvc0F0RW5kLmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLnBvc0F0U3RhcnQrdGhpcy5zaXplLTIqdGhpcy5ib3JkZXJ9LFkucHJvdG90eXBlLmxvY2FsUG9zRnJvbURPTT1mdW5jdGlvbih0LGUsbil7dmFyIHIsbz10aGlzO2lmKHRoaXMuY29udGVudERPTSYmdGhpcy5jb250ZW50RE9NLmNvbnRhaW5zKDE9PXQubm9kZVR5cGU/dDp0LnBhcmVudE5vZGUpKXtpZihuPDApe3ZhciBpLHM7aWYodD09dGhpcy5jb250ZW50RE9NKWk9dC5jaGlsZE5vZGVzW2UtMV07ZWxzZXt3aGlsZSh0LnBhcmVudE5vZGUhPXRoaXMuY29udGVudERPTSl0PXQucGFyZW50Tm9kZTtpPXQucHJldmlvdXNTaWJsaW5nfXdoaWxlKGkmJighKHM9aS5wbVZpZXdEZXNjKXx8cy5wYXJlbnQhPXRoaXMpKWk9aS5wcmV2aW91c1NpYmxpbmc7cmV0dXJuIGk/dGhpcy5wb3NCZWZvcmVDaGlsZChzKStzLnNpemU6dGhpcy5wb3NBdFN0YXJ0fXZhciBhLGM7aWYodD09dGhpcy5jb250ZW50RE9NKWE9dC5jaGlsZE5vZGVzW2VdO2Vsc2V7d2hpbGUodC5wYXJlbnROb2RlIT10aGlzLmNvbnRlbnRET00pdD10LnBhcmVudE5vZGU7YT10Lm5leHRTaWJsaW5nfXdoaWxlKGEmJighKGM9YS5wbVZpZXdEZXNjKXx8Yy5wYXJlbnQhPXRoaXMpKWE9YS5uZXh0U2libGluZztyZXR1cm4gYT90aGlzLnBvc0JlZm9yZUNoaWxkKGMpOnRoaXMucG9zQXRFbmR9aWYodGhpcy5jb250ZW50RE9NJiZ0aGlzLmNvbnRlbnRET00hPXRoaXMuZG9tJiZ0aGlzLmRvbS5jb250YWlucyh0aGlzLmNvbnRlbnRET00pKXI9MiZ0LmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uKHRoaXMuY29udGVudERPTSk7ZWxzZSBpZih0aGlzLmRvbS5maXJzdENoaWxkKXtpZigwPT1lKWZvcih2YXIgbD10OztsPWwucGFyZW50Tm9kZSl7aWYobD09by5kb20pe3I9ITE7YnJlYWt9aWYobC5wYXJlbnROb2RlLmZpcnN0Q2hpbGQhPWwpYnJlYWt9aWYobnVsbD09ciYmZT09dC5jaGlsZE5vZGVzLmxlbmd0aClmb3IodmFyIHA9dDs7cD1wLnBhcmVudE5vZGUpe2lmKHA9PW8uZG9tKXtyPSEwO2JyZWFrfWlmKHAucGFyZW50Tm9kZS5sYXN0Q2hpbGQhPXApYnJlYWt9fXJldHVybihudWxsPT1yP24+MDpyKT90aGlzLnBvc0F0RW5kOnRoaXMucG9zQXRTdGFydH0sWS5wcm90b3R5cGUubmVhcmVzdERlc2M9ZnVuY3Rpb24odCxlKXtmb3IodmFyIG49dGhpcyxyPSEwLG89dDtvO289by5wYXJlbnROb2RlKXt2YXIgaT1uLmdldERlc2Mobyk7aWYoaSYmKCFlfHxpLm5vZGUpKXtpZighcnx8IWkubm9kZURPTXx8KDE9PWkubm9kZURPTS5ub2RlVHlwZT9pLm5vZGVET00uY29udGFpbnModCk6aS5ub2RlRE9NPT10KSlyZXR1cm4gaTtyPSExfX19LFkucHJvdG90eXBlLmdldERlc2M9ZnVuY3Rpb24odCl7Zm9yKHZhciBlPXRoaXMsbj10LnBtVmlld0Rlc2Mscj1uO3I7cj1yLnBhcmVudClpZihyPT1lKXJldHVybiBufSxZLnByb3RvdHlwZS5wb3NGcm9tRE9NPWZ1bmN0aW9uKHQsZSxuKXtmb3IodmFyIHI9dGhpcyxvPXQ7O289by5wYXJlbnROb2RlKXt2YXIgaT1yLmdldERlc2Mobyk7aWYoaSlyZXR1cm4gaS5sb2NhbFBvc0Zyb21ET00odCxlLG4pfX0sWS5wcm90b3R5cGUuZGVzY0F0PWZ1bmN0aW9uKHQpe2Zvcih2YXIgZT10aGlzLG49MCxyPTA7bjx0aGlzLmNoaWxkcmVuLmxlbmd0aDtuKyspe3ZhciBvPWUuY2hpbGRyZW5bbl0saT1yK28uc2l6ZTtpZihyPT10JiZpIT1yKXt3aGlsZSghby5ib3JkZXImJm8uY2hpbGRyZW4ubGVuZ3RoKW89by5jaGlsZHJlblswXTtyZXR1cm4gb31pZih0PGkpcmV0dXJuIG8uZGVzY0F0KHQtci1vLmJvcmRlcik7cj1pfX0sWS5wcm90b3R5cGUuZG9tRnJvbVBvcz1mdW5jdGlvbih0KXt2YXIgZT10aGlzO2lmKCF0aGlzLmNvbnRlbnRET00pcmV0dXJue25vZGU6dGhpcy5kb20sb2Zmc2V0OjB9O2Zvcih2YXIgbj0wLHI9MDs7cisrKXtpZihuPT10KXt3aGlsZShyPHRoaXMuY2hpbGRyZW4ubGVuZ3RoJiYodGhpcy5jaGlsZHJlbltyXS5iZWZvcmVQb3NpdGlvbnx8dGhpcy5jaGlsZHJlbltyXS5kb20ucGFyZW50Tm9kZSE9dGhpcy5jb250ZW50RE9NKSlyKys7cmV0dXJue25vZGU6ZS5jb250ZW50RE9NLG9mZnNldDpyPT1lLmNoaWxkcmVuLmxlbmd0aD9lLmNvbnRlbnRET00uY2hpbGROb2Rlcy5sZW5ndGg6aChlLmNoaWxkcmVuW3JdLmRvbSl9fWlmKHI9PWUuY2hpbGRyZW4ubGVuZ3RoKXRocm93IG5ldyBFcnJvcigiSW52YWxpZCBwb3NpdGlvbiAiK3QpO3ZhciBvPWUuY2hpbGRyZW5bcl0saT1uK28uc2l6ZTtpZih0PGkpcmV0dXJuIG8uZG9tRnJvbVBvcyh0LW4tby5ib3JkZXIpO249aX19LFkucHJvdG90eXBlLnBhcnNlUmFuZ2U9ZnVuY3Rpb24odCxlLG4pe3ZhciByPXRoaXM7aWYodm9pZCAwPT09biYmKG49MCksMD09dGhpcy5jaGlsZHJlbi5sZW5ndGgpcmV0dXJue25vZGU6dGhpcy5jb250ZW50RE9NLGZyb206dCx0bzplLGZyb21PZmZzZXQ6MCx0b09mZnNldDp0aGlzLmNvbnRlbnRET00uY2hpbGROb2Rlcy5sZW5ndGh9O2Zvcih2YXIgbz0tMSxpPS0xLHM9bixhPTA7O2ErKyl7dmFyIGM9ci5jaGlsZHJlblthXSxsPXMrYy5zaXplO2lmKC0xPT1vJiZ0PD1sKXt2YXIgcD1zK2MuYm9yZGVyO2lmKHQ+PXAmJmU8PWwtYy5ib3JkZXImJmMubm9kZSYmYy5jb250ZW50RE9NJiZyLmNvbnRlbnRET00uY29udGFpbnMoYy5jb250ZW50RE9NKSlyZXR1cm4gYy5wYXJzZVJhbmdlKHQsZSxwKTt0PXM7Zm9yKHZhciB1PWE7dT4wO3UtLSl7dmFyIGY9ci5jaGlsZHJlblt1LTFdO2lmKGYuc2l6ZSYmZi5kb20ucGFyZW50Tm9kZT09ci5jb250ZW50RE9NJiYhZi5lbXB0eUNoaWxkQXQoMSkpe289aChmLmRvbSkrMTticmVha310LT1mLnNpemV9LTE9PW8mJihvPTApfWlmKG8+LTEmJmU8PWwpe2U9bDtmb3IodmFyIGQ9YSsxO2Q8dGhpcy5jaGlsZHJlbi5sZW5ndGg7ZCsrKXt2YXIgdj1yLmNoaWxkcmVuW2RdO2lmKHYuc2l6ZSYmdi5kb20ucGFyZW50Tm9kZT09ci5jb250ZW50RE9NJiYhdi5lbXB0eUNoaWxkQXQoLTEpKXtpPWgodi5kb20pO2JyZWFrfWUrPXYuc2l6ZX0tMT09aSYmKGk9ci5jb250ZW50RE9NLmNoaWxkTm9kZXMubGVuZ3RoKTticmVha31zPWx9cmV0dXJue25vZGU6dGhpcy5jb250ZW50RE9NLGZyb206dCx0bzplLGZyb21PZmZzZXQ6byx0b09mZnNldDppfX0sWS5wcm90b3R5cGUuZW1wdHlDaGlsZEF0PWZ1bmN0aW9uKHQpe2lmKHRoaXMuYm9yZGVyfHwhdGhpcy5jb250ZW50RE9NfHwhdGhpcy5jaGlsZHJlbi5sZW5ndGgpcmV0dXJuITE7dmFyIGU9dGhpcy5jaGlsZHJlblt0PDA/MDp0aGlzLmNoaWxkcmVuLmxlbmd0aC0xXTtyZXR1cm4gMD09ZS5zaXplfHxlLmVtcHR5Q2hpbGRBdCh0KX0sWS5wcm90b3R5cGUuZG9tQWZ0ZXJQb3M9ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5kb21Gcm9tUG9zKHQpLG49ZS5ub2RlLHI9ZS5vZmZzZXQ7aWYoMSE9bi5ub2RlVHlwZXx8cj09bi5jaGlsZE5vZGVzLmxlbmd0aCl0aHJvdyBuZXcgUmFuZ2VFcnJvcigiTm8gbm9kZSBhZnRlciBwb3MgIit0KTtyZXR1cm4gbi5jaGlsZE5vZGVzW3JdfSxZLnByb3RvdHlwZS5zZXRTZWxlY3Rpb249ZnVuY3Rpb24odCxlLG4scil7Zm9yKHZhciBvPXRoaXMsaT1NYXRoLm1pbih0LGUpLHM9TWF0aC5tYXgodCxlKSxhPTAsYz0wO2E8dGhpcy5jaGlsZHJlbi5sZW5ndGg7YSsrKXt2YXIgbD1vLmNoaWxkcmVuW2FdLHA9YytsLnNpemU7aWYoaT5jJiZzPHApcmV0dXJuIGwuc2V0U2VsZWN0aW9uKHQtYy1sLmJvcmRlcixlLWMtbC5ib3JkZXIsbixyKTtjPXB9dmFyIHU9dGhpcy5kb21Gcm9tUG9zKHQpLGg9dGhpcy5kb21Gcm9tUG9zKGUpLGY9bi5nZXRTZWxlY3Rpb24oKSxkPWRvY3VtZW50LmNyZWF0ZVJhbmdlKCk7aWYocnx8IXYodS5ub2RlLHUub2Zmc2V0LGYuYW5jaG9yTm9kZSxmLmFuY2hvck9mZnNldCl8fCF2KGgubm9kZSxoLm9mZnNldCxmLmZvY3VzTm9kZSxmLmZvY3VzT2Zmc2V0KSl7aWYoZi5leHRlbmQpZC5zZXRFbmQodS5ub2RlLHUub2Zmc2V0KSxkLmNvbGxhcHNlKCExKTtlbHNle2lmKHQ+ZSl7dmFyIG09dTt1PWgsaD1tfWQuc2V0RW5kKGgubm9kZSxoLm9mZnNldCksZC5zZXRTdGFydCh1Lm5vZGUsdS5vZmZzZXQpfWYucmVtb3ZlQWxsUmFuZ2VzKCksZi5hZGRSYW5nZShkKSxmLmV4dGVuZCYmZi5leHRlbmQoaC5ub2RlLGgub2Zmc2V0KX19LFkucHJvdG90eXBlLmlnbm9yZU11dGF0aW9uPWZ1bmN0aW9uKHQpe3JldHVybiF0aGlzLmNvbnRlbnRET019LFEuY29udGVudExvc3QuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY29udGVudERPTSYmdGhpcy5jb250ZW50RE9NIT10aGlzLmRvbSYmIXRoaXMuZG9tLmNvbnRhaW5zKHRoaXMuY29udGVudERPTSl9LFkucHJvdG90eXBlLm1hcmtEaXJ0eT1mdW5jdGlvbih0LGUpe2Zvcih2YXIgbj10aGlzLHI9MCxvPTA7bzx0aGlzLmNoaWxkcmVuLmxlbmd0aDtvKyspe3ZhciBpPW4uY2hpbGRyZW5bb10scz1yK2kuc2l6ZTtpZihyPT1zP3Q8PXMmJmU+PXI6dDxzJiZlPnIpe3ZhciBhPXIraS5ib3JkZXIsYz1zLWkuYm9yZGVyO2lmKHQ+PWEmJmU8PWMpcmV0dXJuIG4uZGlydHk9dD09cnx8ZT09cz9HOlUsdm9pZCh0IT1hfHxlIT1jfHwhaS5jb250ZW50TG9zdCYmaS5kb20ucGFyZW50Tm9kZT09bi5jb250ZW50RE9NP2kubWFya0RpcnR5KHQtYSxlLWEpOmkuZGlydHk9WCk7aS5kaXJ0eT1YfXI9c310aGlzLmRpcnR5PUd9LFkucHJvdG90eXBlLm1hcmtQYXJlbnRzRGlydHk9ZnVuY3Rpb24oKXtmb3IodmFyIHQ9MSxlPXRoaXMucGFyZW50O2U7ZT1lLnBhcmVudCl7dmFyIG49MT09dD9HOlU7ZS5kaXJ0eTxuJiYoZS5kaXJ0eT1uKX19LE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKFkucHJvdG90eXBlLFEpO3ZhciBaPVtdLHR0PWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoZSxuLHIsbyl7dmFyIGkscz1uLnR5cGUudG9ET007aWYoImZ1bmN0aW9uIj09dHlwZW9mIHMmJihzPXMociwoZnVuY3Rpb24oKXtyZXR1cm4gaT9pLnBhcmVudD9pLnBhcmVudC5wb3NCZWZvcmVDaGlsZChpKTp2b2lkIDA6b30pKSksIW4udHlwZS5zcGVjLnJhdyl7aWYoMSE9cy5ub2RlVHlwZSl7dmFyIGE9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgic3BhbiIpO2EuYXBwZW5kQ2hpbGQocykscz1hfXMuY29udGVudEVkaXRhYmxlPSExLHMuY2xhc3NMaXN0LmFkZCgiUHJvc2VNaXJyb3Itd2lkZ2V0Iil9dC5jYWxsKHRoaXMsZSxaLHMsbnVsbCksdGhpcy53aWRnZXQ9bixpPXRoaXN9dCYmKGUuX19wcm90b19fPXQpLGUucHJvdG90eXBlPU9iamVjdC5jcmVhdGUodCYmdC5wcm90b3R5cGUpLGUucHJvdG90eXBlLmNvbnN0cnVjdG9yPWU7dmFyIG49e2JlZm9yZVBvc2l0aW9uOnt9fTtyZXR1cm4gbi5iZWZvcmVQb3NpdGlvbi5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy53aWRnZXQudHlwZS5zaWRlPDB9LGUucHJvdG90eXBlLm1hdGNoZXNXaWRnZXQ9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuZGlydHk9PUsmJnQudHlwZS5lcSh0aGlzLndpZGdldC50eXBlKX0sZS5wcm90b3R5cGUucGFyc2VSdWxlPWZ1bmN0aW9uKCl7cmV0dXJue2lnbm9yZTohMH19LGUucHJvdG90eXBlLnN0b3BFdmVudD1mdW5jdGlvbih0KXt2YXIgZT10aGlzLndpZGdldC5zcGVjLnN0b3BFdmVudDtyZXR1cm4hIWUmJmUodCl9LE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKGUucHJvdG90eXBlLG4pLGV9KFkpLGV0PWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoZSxuLHIsbyl7dC5jYWxsKHRoaXMsZSxaLG4sbnVsbCksdGhpcy50ZXh0RE9NPXIsdGhpcy50ZXh0PW99dCYmKGUuX19wcm90b19fPXQpLGUucHJvdG90eXBlPU9iamVjdC5jcmVhdGUodCYmdC5wcm90b3R5cGUpLGUucHJvdG90eXBlLmNvbnN0cnVjdG9yPWU7dmFyIG49e3NpemU6e319O3JldHVybiBuLnNpemUuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudGV4dC5sZW5ndGh9LGUucHJvdG90eXBlLmxvY2FsUG9zRnJvbURPTT1mdW5jdGlvbih0LGUpe3JldHVybiB0IT10aGlzLnRleHRET00/dGhpcy5wb3NBdFN0YXJ0KyhlP3RoaXMuc2l6ZTowKTp0aGlzLnBvc0F0U3RhcnQrZX0sZS5wcm90b3R5cGUuZG9tRnJvbVBvcz1mdW5jdGlvbih0KXtyZXR1cm57bm9kZTp0aGlzLnRleHRET00sb2Zmc2V0OnR9fSxlLnByb3RvdHlwZS5pZ25vcmVNdXRhdGlvbj1mdW5jdGlvbih0KXtyZXR1cm4iY2hhcmFjdGVyRGF0YSI9PT10LnR5cGUmJnQudGFyZ2V0Lm5vZGVWYWx1ZT09dC5vbGRWYWx1ZX0sT2JqZWN0LmRlZmluZVByb3BlcnRpZXMoZS5wcm90b3R5cGUsbiksZX0oWSksbnQ9ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZShlLG4scixvKXt0LmNhbGwodGhpcyxlLFtdLHIsbyksdGhpcy5tYXJrPW59cmV0dXJuIHQmJihlLl9fcHJvdG9fXz10KSxlLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKHQmJnQucHJvdG90eXBlKSxlLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1lLGUuY3JlYXRlPWZ1bmN0aW9uKHQsbixyLGkpe3ZhciBzPWkubm9kZVZpZXdzW24udHlwZS5uYW1lXSxhPXMmJnMobixpLHIpO3JldHVybiBhJiZhLmRvbXx8KGE9by5ET01TZXJpYWxpemVyLnJlbmRlclNwZWMoZG9jdW1lbnQsbi50eXBlLnNwZWMudG9ET00obixyKSkpLG5ldyBlKHQsbixhLmRvbSxhLmNvbnRlbnRET018fGEuZG9tKX0sZS5wcm90b3R5cGUucGFyc2VSdWxlPWZ1bmN0aW9uKCl7cmV0dXJue21hcms6dGhpcy5tYXJrLnR5cGUubmFtZSxhdHRyczp0aGlzLm1hcmsuYXR0cnMsY29udGVudEVsZW1lbnQ6dGhpcy5jb250ZW50RE9NfX0sZS5wcm90b3R5cGUubWF0Y2hlc01hcms9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuZGlydHkhPVgmJnRoaXMubWFyay5lcSh0KX0sZS5wcm90b3R5cGUubWFya0RpcnR5PWZ1bmN0aW9uKGUsbil7aWYodC5wcm90b3R5cGUubWFya0RpcnR5LmNhbGwodGhpcyxlLG4pLHRoaXMuZGlydHkhPUspe3ZhciByPXRoaXMucGFyZW50O3doaWxlKCFyLm5vZGUpcj1yLnBhcmVudDtyLmRpcnR5PHRoaXMuZGlydHkmJihyLmRpcnR5PXRoaXMuZGlydHkpLHRoaXMuZGlydHk9S319LGUucHJvdG90eXBlLnNsaWNlPWZ1bmN0aW9uKHQsbixyKXt2YXIgbz1lLmNyZWF0ZSh0aGlzLnBhcmVudCx0aGlzLm1hcmssITAsciksaT10aGlzLmNoaWxkcmVuLHM9dGhpcy5zaXplO248cyYmKGk9Q3QoaSxuLHMscikpLHQ+MCYmKGk9Q3QoaSwwLHQscikpO2Zvcih2YXIgYT0wO2E8aS5sZW5ndGg7YSsrKWlbYV0ucGFyZW50PW87cmV0dXJuIG8uY2hpbGRyZW49aSxvfSxlfShZKSxydD1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKGUsbixyLG8saSxzLGEsYyxsKXt0LmNhbGwodGhpcyxlLG4uaXNMZWFmP1o6W10saSxzKSx0aGlzLm5vZGVET009YSx0aGlzLm5vZGU9bix0aGlzLm91dGVyRGVjbz1yLHRoaXMuaW5uZXJEZWNvPW8scyYmdGhpcy51cGRhdGVDaGlsZHJlbihjLGwpfXQmJihlLl9fcHJvdG9fXz10KSxlLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKHQmJnQucHJvdG90eXBlKSxlLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1lO3ZhciBuPXtzaXplOnt9LGJvcmRlcjp7fX07cmV0dXJuIGUuY3JlYXRlPWZ1bmN0aW9uKHQsbixyLGkscyxhKXt2YXIgYyxsPXMubm9kZVZpZXdzW24udHlwZS5uYW1lXSxwPWwmJmwobixzLChmdW5jdGlvbigpe3JldHVybiBjP2MucGFyZW50P2MucGFyZW50LnBvc0JlZm9yZUNoaWxkKGMpOnZvaWQgMDphfSksciksdT1wJiZwLmRvbSxoPXAmJnAuY29udGVudERPTTtpZihuLmlzVGV4dClpZih1KXtpZigzIT11Lm5vZGVUeXBlKXRocm93IG5ldyBSYW5nZUVycm9yKCJUZXh0IG11c3QgYmUgcmVuZGVyZWQgYXMgYSBET00gdGV4dCBub2RlIil9ZWxzZSB1PWRvY3VtZW50LmNyZWF0ZVRleHROb2RlKG4udGV4dCk7ZWxzZSBpZighdSl7dmFyIGY7Zj1vLkRPTVNlcmlhbGl6ZXIucmVuZGVyU3BlYyhkb2N1bWVudCxuLnR5cGUuc3BlYy50b0RPTShuKSksdT1mLmRvbSxoPWYuY29udGVudERPTX1ofHxuLmlzVGV4dHx8IkJSIj09dS5ub2RlTmFtZXx8KHUuaGFzQXR0cmlidXRlKCJjb250ZW50ZWRpdGFibGUiKXx8KHUuY29udGVudEVkaXRhYmxlPSExKSxuLnR5cGUuc3BlYy5kcmFnZ2FibGUmJih1LmRyYWdnYWJsZT0hMCkpO3ZhciBkPXU7cmV0dXJuIHU9ZHQodSxyLG4pLHA/Yz1uZXcgYXQodCxuLHIsaSx1LGgsZCxwLHMsYSsxKTpuLmlzVGV4dD9uZXcgaXQodCxuLHIsaSx1LGQscyk6bmV3IGUodCxuLHIsaSx1LGgsZCxzLGErMSl9LGUucHJvdG90eXBlLnBhcnNlUnVsZT1mdW5jdGlvbigpe3ZhciB0PXRoaXM7aWYodGhpcy5ub2RlLnR5cGUuc3BlYy5yZXBhcnNlSW5WaWV3KXJldHVybiBudWxsO3ZhciBlPXtub2RlOnRoaXMubm9kZS50eXBlLm5hbWUsYXR0cnM6dGhpcy5ub2RlLmF0dHJzfTtyZXR1cm4gdGhpcy5ub2RlLnR5cGUuc3BlYy5jb2RlJiYoZS5wcmVzZXJ2ZVdoaXRlc3BhY2U9ImZ1bGwiKSx0aGlzLmNvbnRlbnRET00mJiF0aGlzLmNvbnRlbnRMb3N0P2UuY29udGVudEVsZW1lbnQ9dGhpcy5jb250ZW50RE9NOmUuZ2V0Q29udGVudD1mdW5jdGlvbigpe3JldHVybiB0LmNvbnRlbnRET00/by5GcmFnbWVudC5lbXB0eTp0Lm5vZGUuY29udGVudH0sZX0sZS5wcm90b3R5cGUubWF0Y2hlc05vZGU9ZnVuY3Rpb24odCxlLG4pe3JldHVybiB0aGlzLmRpcnR5PT1LJiZ0LmVxKHRoaXMubm9kZSkmJnZ0KGUsdGhpcy5vdXRlckRlY28pJiZuLmVxKHRoaXMuaW5uZXJEZWNvKX0sbi5zaXplLmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLm5vZGUubm9kZVNpemV9LG4uYm9yZGVyLmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLm5vZGUuaXNMZWFmPzA6MX0sZS5wcm90b3R5cGUudXBkYXRlQ2hpbGRyZW49ZnVuY3Rpb24odCxlKXt2YXIgbj10aGlzLHI9dGhpcy5ub2RlLmlubGluZUNvbnRlbnQsaT1lLHM9ciYmdC5jb21wb3NpbmcmJnRoaXMubG9jYWxDb21wb3NpdGlvbk5vZGUodCxlKSxhPW5ldyB5dCh0aGlzLHMmJnMubm9kZSk7eHQodGhpcy5ub2RlLHRoaXMuaW5uZXJEZWNvLChmdW5jdGlvbihlLHMpe2Uuc3BlYy5tYXJrcz9hLnN5bmNUb01hcmtzKGUuc3BlYy5tYXJrcyxyLHQpOmUudHlwZS5zaWRlPj0wJiZhLnN5bmNUb01hcmtzKHM9PW4ubm9kZS5jaGlsZENvdW50P28uTWFyay5ub25lOm4ubm9kZS5jaGlsZChzKS5tYXJrcyxyLHQpLGEucGxhY2VXaWRnZXQoZSx0LGkpfSksKGZ1bmN0aW9uKGUsbixvLHMpe2Euc3luY1RvTWFya3MoZS5tYXJrcyxyLHQpLGEuZmluZE5vZGVNYXRjaChlLG4sbyxzKXx8YS51cGRhdGVOZXh0Tm9kZShlLG4sbyx0LHMpfHxhLmFkZE5vZGUoZSxuLG8sdCxpKSxpKz1lLm5vZGVTaXplfSkpLGEuc3luY1RvTWFya3MoWixyLHQpLHRoaXMubm9kZS5pc1RleHRibG9jayYmYS5hZGRUZXh0YmxvY2tIYWNrcygpLGEuZGVzdHJveVJlc3QoKSwoYS5jaGFuZ2VkfHx0aGlzLmRpcnR5PT1HKSYmKHMmJnRoaXMucHJvdGVjdExvY2FsQ29tcG9zaXRpb24odCxzKSx0aGlzLnJlbmRlckNoaWxkcmVuKCkpfSxlLnByb3RvdHlwZS5yZW5kZXJDaGlsZHJlbj1mdW5jdGlvbigpe2N0KHRoaXMuY29udGVudERPTSx0aGlzLmNoaWxkcmVuLGUuaXMpLHMuaW9zJiZidCh0aGlzLmRvbSl9LGUucHJvdG90eXBlLmxvY2FsQ29tcG9zaXRpb25Ob2RlPWZ1bmN0aW9uKHQsZSl7dmFyIG49dC5zdGF0ZS5zZWxlY3Rpb24sbz1uLmZyb20saT1uLnRvO2lmKCEoISh0LnN0YXRlLnNlbGVjdGlvbiBpbnN0YW5jZW9mIHIuVGV4dFNlbGVjdGlvbil8fG88ZXx8aT5lK3RoaXMubm9kZS5jb250ZW50LnNpemUpKXt2YXIgcz10LnJvb3QuZ2V0U2VsZWN0aW9uKCksYT1rdChzLmZvY3VzTm9kZSxzLmZvY3VzT2Zmc2V0KTtpZihhJiZ0aGlzLmRvbS5jb250YWlucyhhLnBhcmVudE5vZGUpKXt2YXIgYz1hLm5vZGVWYWx1ZSxsPVN0KHRoaXMubm9kZS5jb250ZW50LGMsby1lLGktZSk7cmV0dXJuIGw8MD9udWxsOntub2RlOmEscG9zOmwsdGV4dDpjfX19fSxlLnByb3RvdHlwZS5wcm90ZWN0TG9jYWxDb21wb3NpdGlvbj1mdW5jdGlvbih0LGUpe3ZhciBuPXRoaXMscj1lLm5vZGUsbz1lLnBvcyxpPWUudGV4dDtpZighdGhpcy5nZXREZXNjKHIpKXtmb3IodmFyIHM9cjs7cz1zLnBhcmVudE5vZGUpe2lmKHMucGFyZW50Tm9kZT09bi5jb250ZW50RE9NKWJyZWFrO3doaWxlKHMucHJldmlvdXNTaWJsaW5nKXMucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChzLnByZXZpb3VzU2libGluZyk7d2hpbGUocy5uZXh0U2libGluZylzLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQocy5uZXh0U2libGluZyk7cy5wbVZpZXdEZXNjJiYocy5wbVZpZXdEZXNjPW51bGwpfXZhciBhPW5ldyBldCh0aGlzLHMscixpKTt0LmNvbXBvc2l0aW9uTm9kZXMucHVzaChhKSx0aGlzLmNoaWxkcmVuPUN0KHRoaXMuY2hpbGRyZW4sbyxvK2kubGVuZ3RoLHQsYSl9fSxlLnByb3RvdHlwZS51cGRhdGU9ZnVuY3Rpb24odCxlLG4scil7cmV0dXJuISh0aGlzLmRpcnR5PT1YfHwhdC5zYW1lTWFya3VwKHRoaXMubm9kZSkpJiYodGhpcy51cGRhdGVJbm5lcih0LGUsbixyKSwhMCl9LGUucHJvdG90eXBlLnVwZGF0ZUlubmVyPWZ1bmN0aW9uKHQsZSxuLHIpe3RoaXMudXBkYXRlT3V0ZXJEZWNvKGUpLHRoaXMubm9kZT10LHRoaXMuaW5uZXJEZWNvPW4sdGhpcy5jb250ZW50RE9NJiZ0aGlzLnVwZGF0ZUNoaWxkcmVuKHIsdGhpcy5wb3NBdFN0YXJ0KSx0aGlzLmRpcnR5PUt9LGUucHJvdG90eXBlLnVwZGF0ZU91dGVyRGVjbz1mdW5jdGlvbih0KXtpZighdnQodCx0aGlzLm91dGVyRGVjbykpe3ZhciBlPTEhPXRoaXMubm9kZURPTS5ub2RlVHlwZSxuPXRoaXMuZG9tO3RoaXMuZG9tPWh0KHRoaXMuZG9tLHRoaXMubm9kZURPTSx1dCh0aGlzLm91dGVyRGVjbyx0aGlzLm5vZGUsZSksdXQodCx0aGlzLm5vZGUsZSkpLHRoaXMuZG9tIT1uJiYobi5wbVZpZXdEZXNjPW51bGwsdGhpcy5kb20ucG1WaWV3RGVzYz10aGlzKSx0aGlzLm91dGVyRGVjbz10fX0sZS5wcm90b3R5cGUuc2VsZWN0Tm9kZT1mdW5jdGlvbigpe3RoaXMubm9kZURPTS5jbGFzc0xpc3QuYWRkKCJQcm9zZU1pcnJvci1zZWxlY3RlZG5vZGUiKSwhdGhpcy5jb250ZW50RE9NJiZ0aGlzLm5vZGUudHlwZS5zcGVjLmRyYWdnYWJsZXx8KHRoaXMuZG9tLmRyYWdnYWJsZT0hMCl9LGUucHJvdG90eXBlLmRlc2VsZWN0Tm9kZT1mdW5jdGlvbigpe3RoaXMubm9kZURPTS5jbGFzc0xpc3QucmVtb3ZlKCJQcm9zZU1pcnJvci1zZWxlY3RlZG5vZGUiKSwhdGhpcy5jb250ZW50RE9NJiZ0aGlzLm5vZGUudHlwZS5zcGVjLmRyYWdnYWJsZXx8KHRoaXMuZG9tLmRyYWdnYWJsZT0hMSl9LE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKGUucHJvdG90eXBlLG4pLGV9KFkpO2Z1bmN0aW9uIG90KHQsZSxuLHIsbyl7cmV0dXJuIGR0KHIsZSx0KSxuZXcgcnQobnVsbCx0LGUsbixyLHIscixvLDApfXZhciBpdD1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKGUsbixyLG8saSxzLGEpe3QuY2FsbCh0aGlzLGUsbixyLG8saSxudWxsLHMsYSl9cmV0dXJuIHQmJihlLl9fcHJvdG9fXz10KSxlLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKHQmJnQucHJvdG90eXBlKSxlLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1lLGUucHJvdG90eXBlLnBhcnNlUnVsZT1mdW5jdGlvbigpe3JldHVybntza2lwOnRoaXMubm9kZURPTS5wYXJlbnROb2RlfHwhMH19LGUucHJvdG90eXBlLnVwZGF0ZT1mdW5jdGlvbih0LGUpe3JldHVybiEodGhpcy5kaXJ0eT09WHx8dGhpcy5kaXJ0eSE9SyYmIXRoaXMuaW5QYXJlbnQoKXx8IXQuc2FtZU1hcmt1cCh0aGlzLm5vZGUpKSYmKHRoaXMudXBkYXRlT3V0ZXJEZWNvKGUpLHRoaXMuZGlydHk9PUsmJnQudGV4dD09dGhpcy5ub2RlLnRleHR8fHQudGV4dD09dGhpcy5ub2RlRE9NLm5vZGVWYWx1ZXx8KHRoaXMubm9kZURPTS5ub2RlVmFsdWU9dC50ZXh0KSx0aGlzLm5vZGU9dCx0aGlzLmRpcnR5PUssITApfSxlLnByb3RvdHlwZS5pblBhcmVudD1mdW5jdGlvbigpe2Zvcih2YXIgdD10aGlzLnBhcmVudC5jb250ZW50RE9NLGU9dGhpcy5ub2RlRE9NO2U7ZT1lLnBhcmVudE5vZGUpaWYoZT09dClyZXR1cm4hMDtyZXR1cm4hMX0sZS5wcm90b3R5cGUuZG9tRnJvbVBvcz1mdW5jdGlvbih0KXtyZXR1cm57bm9kZTp0aGlzLm5vZGVET00sb2Zmc2V0OnR9fSxlLnByb3RvdHlwZS5sb2NhbFBvc0Zyb21ET009ZnVuY3Rpb24oZSxuLHIpe3JldHVybiBlPT10aGlzLm5vZGVET00/dGhpcy5wb3NBdFN0YXJ0K01hdGgubWluKG4sdGhpcy5ub2RlLnRleHQubGVuZ3RoKTp0LnByb3RvdHlwZS5sb2NhbFBvc0Zyb21ET00uY2FsbCh0aGlzLGUsbixyKX0sZS5wcm90b3R5cGUuaWdub3JlTXV0YXRpb249ZnVuY3Rpb24odCl7cmV0dXJuImNoYXJhY3RlckRhdGEiIT10LnR5cGUmJiJzZWxlY3Rpb24iIT10LnR5cGV9LGUucHJvdG90eXBlLnNsaWNlPWZ1bmN0aW9uKHQsbixyKXt2YXIgbz10aGlzLm5vZGUuY3V0KHQsbiksaT1kb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShvLnRleHQpO3JldHVybiBuZXcgZSh0aGlzLnBhcmVudCxvLHRoaXMub3V0ZXJEZWNvLHRoaXMuaW5uZXJEZWNvLGksaSxyKX0sZX0ocnQpLHN0PWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoKXt0LmFwcGx5KHRoaXMsYXJndW1lbnRzKX1yZXR1cm4gdCYmKGUuX19wcm90b19fPXQpLGUucHJvdG90eXBlPU9iamVjdC5jcmVhdGUodCYmdC5wcm90b3R5cGUpLGUucHJvdG90eXBlLmNvbnN0cnVjdG9yPWUsZS5wcm90b3R5cGUucGFyc2VSdWxlPWZ1bmN0aW9uKCl7cmV0dXJue2lnbm9yZTohMH19LGUucHJvdG90eXBlLm1hdGNoZXNIYWNrPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZGlydHk9PUt9LGV9KFkpLGF0PWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoZSxuLHIsbyxpLHMsYSxjLGwscCl7dC5jYWxsKHRoaXMsZSxuLHIsbyxpLHMsYSxsLHApLHRoaXMuc3BlYz1jfXJldHVybiB0JiYoZS5fX3Byb3RvX189dCksZS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZSh0JiZ0LnByb3RvdHlwZSksZS5wcm90b3R5cGUuY29uc3RydWN0b3I9ZSxlLnByb3RvdHlwZS51cGRhdGU9ZnVuY3Rpb24oZSxuLHIsbyl7aWYodGhpcy5kaXJ0eT09WClyZXR1cm4hMTtpZih0aGlzLnNwZWMudXBkYXRlKXt2YXIgaT10aGlzLnNwZWMudXBkYXRlKGUsbik7cmV0dXJuIGkmJnRoaXMudXBkYXRlSW5uZXIoZSxuLHIsbyksaX1yZXR1cm4hKCF0aGlzLmNvbnRlbnRET00mJiFlLmlzTGVhZikmJnQucHJvdG90eXBlLnVwZGF0ZS5jYWxsKHRoaXMsZSxuLHIsbyl9LGUucHJvdG90eXBlLnNlbGVjdE5vZGU9ZnVuY3Rpb24oKXt0aGlzLnNwZWMuc2VsZWN0Tm9kZT90aGlzLnNwZWMuc2VsZWN0Tm9kZSgpOnQucHJvdG90eXBlLnNlbGVjdE5vZGUuY2FsbCh0aGlzKX0sZS5wcm90b3R5cGUuZGVzZWxlY3ROb2RlPWZ1bmN0aW9uKCl7dGhpcy5zcGVjLmRlc2VsZWN0Tm9kZT90aGlzLnNwZWMuZGVzZWxlY3ROb2RlKCk6dC5wcm90b3R5cGUuZGVzZWxlY3ROb2RlLmNhbGwodGhpcyl9LGUucHJvdG90eXBlLnNldFNlbGVjdGlvbj1mdW5jdGlvbihlLG4scixvKXt0aGlzLnNwZWMuc2V0U2VsZWN0aW9uP3RoaXMuc3BlYy5zZXRTZWxlY3Rpb24oZSxuLHIpOnQucHJvdG90eXBlLnNldFNlbGVjdGlvbi5jYWxsKHRoaXMsZSxuLHIsbyl9LGUucHJvdG90eXBlLmRlc3Ryb3k9ZnVuY3Rpb24oKXt0aGlzLnNwZWMuZGVzdHJveSYmdGhpcy5zcGVjLmRlc3Ryb3koKSx0LnByb3RvdHlwZS5kZXN0cm95LmNhbGwodGhpcyl9LGUucHJvdG90eXBlLnN0b3BFdmVudD1mdW5jdGlvbih0KXtyZXR1cm4hIXRoaXMuc3BlYy5zdG9wRXZlbnQmJnRoaXMuc3BlYy5zdG9wRXZlbnQodCl9LGUucHJvdG90eXBlLmlnbm9yZU11dGF0aW9uPWZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLnNwZWMuaWdub3JlTXV0YXRpb24/dGhpcy5zcGVjLmlnbm9yZU11dGF0aW9uKGUpOnQucHJvdG90eXBlLmlnbm9yZU11dGF0aW9uLmNhbGwodGhpcyxlKX0sZX0ocnQpO2Z1bmN0aW9uIGN0KHQsZSl7Zm9yKHZhciBuPXQuZmlyc3RDaGlsZCxyPTA7cjxlLmxlbmd0aDtyKyspe3ZhciBvPWVbcl0saT1vLmRvbTtpZihpLnBhcmVudE5vZGU9PXQpe3doaWxlKGkhPW4pbj1tdChuKTtuPW4ubmV4dFNpYmxpbmd9ZWxzZSB0Lmluc2VydEJlZm9yZShpLG4pO2lmKG8gaW5zdGFuY2VvZiBudCl7dmFyIHM9bj9uLnByZXZpb3VzU2libGluZzp0Lmxhc3RDaGlsZDtjdChvLmNvbnRlbnRET00sby5jaGlsZHJlbiksbj1zP3MubmV4dFNpYmxpbmc6dC5maXJzdENoaWxkfX13aGlsZShuKW49bXQobil9ZnVuY3Rpb24gbHQodCl7dCYmKHRoaXMubm9kZU5hbWU9dCl9bHQucHJvdG90eXBlPU9iamVjdC5jcmVhdGUobnVsbCk7dmFyIHB0PVtuZXcgbHRdO2Z1bmN0aW9uIHV0KHQsZSxuKXtpZigwPT10Lmxlbmd0aClyZXR1cm4gcHQ7Zm9yKHZhciByPW4/cHRbMF06bmV3IGx0LG89W3JdLGk9MDtpPHQubGVuZ3RoO2krKyl7dmFyIHM9dFtpXS50eXBlLmF0dHJzLGE9cjtpZihzKWZvcih2YXIgYyBpbiBzLm5vZGVOYW1lJiZvLnB1c2goYT1uZXcgbHQocy5ub2RlTmFtZSkpLHMpe3ZhciBsPXNbY107bnVsbCE9bCYmKG4mJjE9PW8ubGVuZ3RoJiZvLnB1c2goYT1yPW5ldyBsdChlLmlzSW5saW5lPyJzcGFuIjoiZGl2IikpLCJjbGFzcyI9PWM/YS5jbGFzcz0oYS5jbGFzcz9hLmNsYXNzKyIgIjoiIikrbDoic3R5bGUiPT1jP2Euc3R5bGU9KGEuc3R5bGU/YS5zdHlsZSsiOyI6IiIpK2w6Im5vZGVOYW1lIiE9YyYmKGFbY109bCkpfX1yZXR1cm4gb31mdW5jdGlvbiBodCh0LGUsbixyKXtpZihuPT1wdCYmcj09cHQpcmV0dXJuIGU7Zm9yKHZhciBvPWUsaT0wO2k8ci5sZW5ndGg7aSsrKXt2YXIgcz1yW2ldLGE9bltpXTtpZihpKXt2YXIgYz12b2lkIDA7YSYmYS5ub2RlTmFtZT09cy5ub2RlTmFtZSYmbyE9dCYmKGM9ZS5wYXJlbnROb2RlKSYmYy50YWdOYW1lLnRvTG93ZXJDYXNlKCk9PXMubm9kZU5hbWU/bz1jOihjPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQocy5ub2RlTmFtZSksYy5hcHBlbmRDaGlsZChvKSxvPWMpfWZ0KG8sYXx8cHRbMF0scyl9cmV0dXJuIG99ZnVuY3Rpb24gZnQodCxlLG4pe2Zvcih2YXIgciBpbiBlKSJjbGFzcyI9PXJ8fCJzdHlsZSI9PXJ8fCJub2RlTmFtZSI9PXJ8fHIgaW4gbnx8dC5yZW1vdmVBdHRyaWJ1dGUocik7Zm9yKHZhciBvIGluIG4pImNsYXNzIiE9byYmInN0eWxlIiE9byYmIm5vZGVOYW1lIiE9byYmbltvXSE9ZVtvXSYmdC5zZXRBdHRyaWJ1dGUobyxuW29dKTtpZihlLmNsYXNzIT1uLmNsYXNzKXtmb3IodmFyIGk9ZS5jbGFzcz9lLmNsYXNzLnNwbGl0KCIgIik6WixzPW4uY2xhc3M/bi5jbGFzcy5zcGxpdCgiICIpOlosYT0wO2E8aS5sZW5ndGg7YSsrKS0xPT1zLmluZGV4T2YoaVthXSkmJnQuY2xhc3NMaXN0LnJlbW92ZShpW2FdKTtmb3IodmFyIGM9MDtjPHMubGVuZ3RoO2MrKyktMT09aS5pbmRleE9mKHNbY10pJiZ0LmNsYXNzTGlzdC5hZGQoc1tjXSl9aWYoZS5zdHlsZSE9bi5zdHlsZSl7aWYoZS5zdHlsZSl7dmFyIGwscD0vXHMqKFtcd1wtXHhhMS1cdWZmZmZdKylccyo6KD86Iig/OlxcLnxbXiJdKSoifCcoPzpcXC58W14nXSkqJ3xcKC4qP1wpfFteO10pKi9nO3doaWxlKGw9cC5leGVjKGUuc3R5bGUpKXQuc3R5bGVbbFsxXS50b0xvd2VyQ2FzZSgpXT0iIn1uLnN0eWxlJiYodC5zdHlsZS5jc3NUZXh0Kz1uLnN0eWxlKX19ZnVuY3Rpb24gZHQodCxlLG4pe3JldHVybiBodCh0LHQscHQsdXQoZSxuLDEhPXQubm9kZVR5cGUpKX1mdW5jdGlvbiB2dCh0LGUpe2lmKHQubGVuZ3RoIT1lLmxlbmd0aClyZXR1cm4hMTtmb3IodmFyIG49MDtuPHQubGVuZ3RoO24rKylpZighdFtuXS50eXBlLmVxKGVbbl0udHlwZSkpcmV0dXJuITE7cmV0dXJuITB9ZnVuY3Rpb24gbXQodCl7dmFyIGU9dC5uZXh0U2libGluZztyZXR1cm4gdC5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKHQpLGV9dmFyIHl0PWZ1bmN0aW9uKHQsZSl7dGhpcy50b3A9dCx0aGlzLmxvY2s9ZSx0aGlzLmluZGV4PTAsdGhpcy5zdGFjaz1bXSx0aGlzLmNoYW5nZWQ9ITE7dmFyIG49Z3QodC5ub2RlLmNvbnRlbnQsdC5jaGlsZHJlbik7dGhpcy5wcmVNYXRjaGVkPW4ubm9kZXMsdGhpcy5wcmVNYXRjaE9mZnNldD1uLm9mZnNldH07ZnVuY3Rpb24gZ3QodCxlKXtmb3IodmFyIG49W10scj10LmNoaWxkQ291bnQsbz1lLmxlbmd0aC0xO3I+MCYmbz49MDtvLS0pe3ZhciBpPWVbb10scz1pLm5vZGU7aWYocyl7aWYocyE9dC5jaGlsZChyLTEpKWJyZWFrO24ucHVzaChpKSwtLXJ9fXJldHVybntub2RlczpuLnJldmVyc2UoKSxvZmZzZXQ6cn19ZnVuY3Rpb24gd3QodCxlKXtyZXR1cm4gdC50eXBlLnNpZGUtZS50eXBlLnNpZGV9ZnVuY3Rpb24geHQodCxlLG4scil7dmFyIG89ZS5sb2NhbHModCksaT0wO2lmKDAhPW8ubGVuZ3RoKWZvcih2YXIgcz0wLGE9W10sYz1udWxsLGw9MDs7KXtpZihzPG8ubGVuZ3RoJiZvW3NdLnRvPT1pKXt2YXIgcD1vW3MrK10sdT12b2lkIDA7d2hpbGUoczxvLmxlbmd0aCYmb1tzXS50bz09aSkodXx8KHU9W3BdKSkucHVzaChvW3MrK10pO2lmKHUpe3Uuc29ydCh3dCk7Zm9yKHZhciBoPTA7aDx1Lmxlbmd0aDtoKyspbih1W2hdLGwpfWVsc2UgbihwLGwpfXZhciBmPXZvaWQgMCxkPXZvaWQgMDtpZihjKWQ9LTEsZj1jLGM9bnVsbDtlbHNle2lmKCEobDx0LmNoaWxkQ291bnQpKWJyZWFrO2Q9bCxmPXQuY2hpbGQobCsrKX1mb3IodmFyIHY9MDt2PGEubGVuZ3RoO3YrKylhW3ZdLnRvPD1pJiZhLnNwbGljZSh2LS0sMSk7d2hpbGUoczxvLmxlbmd0aCYmb1tzXS5mcm9tPT1pKWEucHVzaChvW3MrK10pO3ZhciBtPWkrZi5ub2RlU2l6ZTtpZihmLmlzVGV4dCl7dmFyIHk9bTtzPG8ubGVuZ3RoJiZvW3NdLmZyb208eSYmKHk9b1tzXS5mcm9tKTtmb3IodmFyIGc9MDtnPGEubGVuZ3RoO2crKylhW2ddLnRvPHkmJih5PWFbZ10udG8pO3k8bSYmKGM9Zi5jdXQoeS1pKSxmPWYuY3V0KDAseS1pKSxtPXksZD0tMSl9cihmLGEubGVuZ3RoP2Euc2xpY2UoKTpaLGUuZm9yQ2hpbGQoaSxmKSxkKSxpPW19ZWxzZSBmb3IodmFyIHc9MDt3PHQuY2hpbGRDb3VudDt3Kyspe3ZhciB4PXQuY2hpbGQodyk7cih4LG8sZS5mb3JDaGlsZChpLHgpLHcpLGkrPXgubm9kZVNpemV9fWZ1bmN0aW9uIGJ0KHQpe2lmKCJVTCI9PXQubm9kZU5hbWV8fCJPTCI9PXQubm9kZU5hbWUpe3ZhciBlPXQuc3R5bGUuY3NzVGV4dDt0LnN0eWxlLmNzc1RleHQ9ZSsiOyBsaXN0LXN0eWxlOiBzcXVhcmUgIWltcG9ydGFudCIsd2luZG93LmdldENvbXB1dGVkU3R5bGUodCkubGlzdFN0eWxlLHQuc3R5bGUuY3NzVGV4dD1lfX1mdW5jdGlvbiBrdCh0LGUpe2Zvcig7Oyl7aWYoMz09dC5ub2RlVHlwZSlyZXR1cm4gdDtpZigxPT10Lm5vZGVUeXBlJiZlPjApe2lmKHQuY2hpbGROb2Rlcy5sZW5ndGg+ZSYmMz09dC5jaGlsZE5vZGVzW2VdLm5vZGVUeXBlKXJldHVybiB0LmNoaWxkTm9kZXNbZV07dD10LmNoaWxkTm9kZXNbZS0xXSxlPWcodCl9ZWxzZXtpZighKDE9PXQubm9kZVR5cGUmJmU8dC5jaGlsZE5vZGVzLmxlbmd0aCkpcmV0dXJuIG51bGw7dD10LmNoaWxkTm9kZXNbZV0sZT0wfX19ZnVuY3Rpb24gU3QodCxlLG4scil7Zm9yKHZhciBvPSIiLGk9MCxzPTA7aTx0LmNoaWxkQ291bnQ7aSsrKXt2YXIgYT10LmNoaWxkKGkpLGM9cythLm5vZGVTaXplO2lmKGEuaXNUZXh0KXtpZihvKz1hLnRleHQsYz49cil7dmFyIGw9Yy1vLmxlbmd0aCxwPW8ubGFzdEluZGV4T2YoZSk7d2hpbGUocD4tMSYmbCtwPm4pcD1vLmxhc3RJbmRleE9mKGUscC0xKTtpZihwPi0xJiZsK3ArZS5sZW5ndGg+PXIpcmV0dXJuIGwrcDtpZihjPnIpYnJlYWt9fWVsc2Ugbz0iIjtzPWN9cmV0dXJuLTF9ZnVuY3Rpb24gQ3QodCxlLG4scixvKXtmb3IodmFyIGk9W10scz0wLGE9MDtzPHQubGVuZ3RoO3MrKyl7dmFyIGM9dFtzXSxsPWEscD1hKz1jLnNpemU7bD49bnx8cDw9ZT9pLnB1c2goYyk6KGw8ZSYmaS5wdXNoKGMuc2xpY2UoMCxlLWwscikpLG8mJihpLnB1c2gobyksbz1udWxsKSxwPm4mJmkucHVzaChjLnNsaWNlKG4tbCxjLnNpemUscikpKX1yZXR1cm4gaX1mdW5jdGlvbiBPdCh0LGUpe3ZhciBuPXQuc2VsZWN0aW9uLG89bi4kYW5jaG9yLGk9bi4kaGVhZCxzPWU+MD9vLm1heChpKTpvLm1pbihpKSxhPXMucGFyZW50LmlubGluZUNvbnRlbnQ/cy5kZXB0aD90LmRvYy5yZXNvbHZlKGU+MD9zLmFmdGVyKCk6cy5iZWZvcmUoKSk6bnVsbDpzO3JldHVybiBhJiZyLlNlbGVjdGlvbi5maW5kRnJvbShhLGUpfWZ1bmN0aW9uIE10KHQsZSl7cmV0dXJuIHQuZGlzcGF0Y2godC5zdGF0ZS50ci5zZXRTZWxlY3Rpb24oZSkuc2Nyb2xsSW50b1ZpZXcoKSksITB9ZnVuY3Rpb24gVHQodCxlLG4pe3ZhciBvPXQuc3RhdGUuc2VsZWN0aW9uO2lmKG8gaW5zdGFuY2VvZiByLlRleHRTZWxlY3Rpb24pe2lmKCFvLmVtcHR5fHxuLmluZGV4T2YoInMiKT4tMSlyZXR1cm4hMTtpZih0LmVuZE9mVGV4dGJsb2NrKGU+MD8icmlnaHQiOiJsZWZ0Iikpe3ZhciBpPU90KHQuc3RhdGUsZSk7cmV0dXJuISEoaSYmaSBpbnN0YW5jZW9mIHIuTm9kZVNlbGVjdGlvbikmJk10KHQsaSl9dmFyIGEsYz1vLiRoZWFkLGw9Yy50ZXh0T2Zmc2V0P251bGw6ZTwwP2Mubm9kZUJlZm9yZTpjLm5vZGVBZnRlcjtpZighbHx8bC5pc1RleHQpcmV0dXJuITE7dmFyIHA9ZTwwP2MucG9zLWwubm9kZVNpemU6Yy5wb3M7cmV0dXJuISEobC5pc0F0b218fChhPXQuZG9jVmlldy5kZXNjQXQocCkpJiYhYS5jb250ZW50RE9NKSYmKHIuTm9kZVNlbGVjdGlvbi5pc1NlbGVjdGFibGUobCk/TXQodCxuZXcgci5Ob2RlU2VsZWN0aW9uKGU8MD90LnN0YXRlLmRvYy5yZXNvbHZlKGMucG9zLWwubm9kZVNpemUpOmMpKTohIXMud2Via2l0JiZNdCh0LG5ldyByLlRleHRTZWxlY3Rpb24odC5zdGF0ZS5kb2MucmVzb2x2ZShlPDA/cDpwK2wubm9kZVNpemUpKSkpfWlmKG8gaW5zdGFuY2VvZiByLk5vZGVTZWxlY3Rpb24mJm8ubm9kZS5pc0lubGluZSlyZXR1cm4gTXQodCxuZXcgci5UZXh0U2VsZWN0aW9uKGU+MD9vLiR0bzpvLiRmcm9tKSk7dmFyIHU9T3QodC5zdGF0ZSxlKTtyZXR1cm4hIXUmJk10KHQsdSl9ZnVuY3Rpb24gTnQodCl7cmV0dXJuIDM9PXQubm9kZVR5cGU/dC5ub2RlVmFsdWUubGVuZ3RoOnQuY2hpbGROb2Rlcy5sZW5ndGh9ZnVuY3Rpb24gRXQodCl7dmFyIGU9dC5wbVZpZXdEZXNjO3JldHVybiBlJiYwPT1lLnNpemUmJih0Lm5leHRTaWJsaW5nfHwiQlIiIT10Lm5vZGVOYW1lKX1mdW5jdGlvbiBBdCh0KXt2YXIgZT10LnJvb3QuZ2V0U2VsZWN0aW9uKCksbj1lLmZvY3VzTm9kZSxyPWUuZm9jdXNPZmZzZXQ7aWYobil7dmFyIG8saSxhPSExO2ZvcihzLmdlY2tvJiYxPT1uLm5vZGVUeXBlJiZyPE50KG4pJiZFdChuLmNoaWxkTm9kZXNbcl0pJiYoYT0hMCk7OylpZihyPjApe2lmKDEhPW4ubm9kZVR5cGUpYnJlYWs7dmFyIGM9bi5jaGlsZE5vZGVzW3ItMV07aWYoRXQoYykpbz1uLGk9LS1yO2Vsc2V7aWYoMyE9Yy5ub2RlVHlwZSlicmVhaztuPWMscj1uLm5vZGVWYWx1ZS5sZW5ndGh9fWVsc2V7aWYoRHQobikpYnJlYWs7dmFyIGw9bi5wcmV2aW91c1NpYmxpbmc7d2hpbGUobCYmRXQobCkpbz1uLnBhcmVudE5vZGUsaT1oKGwpLGw9bC5wcmV2aW91c1NpYmxpbmc7aWYobCluPWwscj1OdChuKTtlbHNle2lmKG49bi5wYXJlbnROb2RlLG49PXQuZG9tKWJyZWFrO3I9MH19YT96dCh0LGUsbixyKTpvJiZ6dCh0LGUsbyxpKX19ZnVuY3Rpb24gUnQodCl7dmFyIGU9dC5yb290LmdldFNlbGVjdGlvbigpLG49ZS5mb2N1c05vZGUscj1lLmZvY3VzT2Zmc2V0O2lmKG4pe2Zvcih2YXIgbyxpLHM9TnQobik7OylpZihyPHMpe2lmKDEhPW4ubm9kZVR5cGUpYnJlYWs7dmFyIGE9bi5jaGlsZE5vZGVzW3JdO2lmKCFFdChhKSlicmVhaztvPW4saT0rK3J9ZWxzZXtpZihEdChuKSlicmVhazt2YXIgYz1uLm5leHRTaWJsaW5nO3doaWxlKGMmJkV0KGMpKW89Yy5wYXJlbnROb2RlLGk9aChjKSsxLGM9Yy5uZXh0U2libGluZztpZihjKW49YyxyPTAscz1OdChuKTtlbHNle2lmKG49bi5wYXJlbnROb2RlLG49PXQuZG9tKWJyZWFrO3I9cz0wfX1vJiZ6dCh0LGUsbyxpKX19ZnVuY3Rpb24gRHQodCl7dmFyIGU9dC5wbVZpZXdEZXNjO3JldHVybiBlJiZlLm5vZGUmJmUubm9kZS5pc0Jsb2NrfWZ1bmN0aW9uIHp0KHQsZSxuLHIpe2lmKHgoZSkpe3ZhciBvPWRvY3VtZW50LmNyZWF0ZVJhbmdlKCk7by5zZXRFbmQobixyKSxvLnNldFN0YXJ0KG4sciksZS5yZW1vdmVBbGxSYW5nZXMoKSxlLmFkZFJhbmdlKG8pfWVsc2UgZS5leHRlbmQmJmUuZXh0ZW5kKG4scik7dC5kb21PYnNlcnZlci5zZXRDdXJTZWxlY3Rpb24oKX1mdW5jdGlvbiBQdCh0LGUsbil7dmFyIG89dC5zdGF0ZS5zZWxlY3Rpb247aWYobyBpbnN0YW5jZW9mIHIuVGV4dFNlbGVjdGlvbiYmIW8uZW1wdHl8fG4uaW5kZXhPZigicyIpPi0xKXJldHVybiExO3ZhciBpPW8uJGZyb20scz1vLiR0bztpZighaS5wYXJlbnQuaW5saW5lQ29udGVudHx8dC5lbmRPZlRleHRibG9jayhlPDA/InVwIjoiZG93biIpKXt2YXIgYT1PdCh0LnN0YXRlLGUpO2lmKGEmJmEgaW5zdGFuY2VvZiByLk5vZGVTZWxlY3Rpb24pcmV0dXJuIE10KHQsYSl9aWYoIWkucGFyZW50LmlubGluZUNvbnRlbnQpe3ZhciBjPXIuU2VsZWN0aW9uLmZpbmRGcm9tKGU8MD9pOnMsZSk7cmV0dXJuIWN8fE10KHQsYyl9cmV0dXJuITF9ZnVuY3Rpb24gSXQodCxlKXtpZighKHQuc3RhdGUuc2VsZWN0aW9uIGluc3RhbmNlb2Ygci5UZXh0U2VsZWN0aW9uKSlyZXR1cm4hMDt2YXIgbj10LnN0YXRlLnNlbGVjdGlvbixvPW4uJGhlYWQsaT1uLiRhbmNob3Iscz1uLmVtcHR5O2lmKCFvLnNhbWVQYXJlbnQoaSkpcmV0dXJuITA7aWYoIXMpcmV0dXJuITE7aWYodC5lbmRPZlRleHRibG9jayhlPjA/ImZvcndhcmQiOiJiYWNrd2FyZCIpKXJldHVybiEwO3ZhciBhPSFvLnRleHRPZmZzZXQmJihlPDA/by5ub2RlQmVmb3JlOm8ubm9kZUFmdGVyKTtpZihhJiYhYS5pc1RleHQpe3ZhciBjPXQuc3RhdGUudHI7cmV0dXJuIGU8MD9jLmRlbGV0ZShvLnBvcy1hLm5vZGVTaXplLG8ucG9zKTpjLmRlbGV0ZShvLnBvcyxvLnBvcythLm5vZGVTaXplKSx0LmRpc3BhdGNoKGMpLCEwfXJldHVybiExfWZ1bmN0aW9uIF90KHQsZSxuKXt0LmRvbU9ic2VydmVyLnN0b3AoKSxlLmNvbnRlbnRFZGl0YWJsZT1uLHQuZG9tT2JzZXJ2ZXIuc3RhcnQoKX1mdW5jdGlvbiBGdCh0KXtpZihzLmNocm9tZSYmISh0LnN0YXRlLnNlbGVjdGlvbi4kaGVhZC5wYXJlbnRPZmZzZXQ+MCkpe3ZhciBlPXQucm9vdC5nZXRTZWxlY3Rpb24oKSxuPWUuZm9jdXNOb2RlLHI9ZS5mb2N1c09mZnNldDtpZihuJiYxPT1uLm5vZGVUeXBlJiYwPT1yJiZuLmZpcnN0Q2hpbGQmJiJmYWxzZSI9PW4uZmlyc3RDaGlsZC5jb250ZW50RWRpdGFibGUpe3ZhciBvPW4uZmlyc3RDaGlsZDtfdCh0LG8sITApLHNldFRpbWVvdXQoKGZ1bmN0aW9uKCl7cmV0dXJuIF90KHQsbywhMSl9KSwyMCl9fX1mdW5jdGlvbiBCdCh0KXt2YXIgZT0iIjtyZXR1cm4gdC5jdHJsS2V5JiYoZSs9ImMiKSx0Lm1ldGFLZXkmJihlKz0ibSIpLHQuYWx0S2V5JiYoZSs9ImEiKSx0LnNoaWZ0S2V5JiYoZSs9InMiKSxlfWZ1bmN0aW9uIGp0KHQsZSl7dmFyIG49ZS5rZXlDb2RlLHI9QnQoZSk7cmV0dXJuIDg9PW58fHMubWFjJiY3Mj09biYmImMiPT1yP0l0KHQsLTEpfHxBdCh0KTo0Nj09bnx8cy5tYWMmJjY4PT1uJiYiYyI9PXI/SXQodCwxKXx8UnQodCk6MTM9PW58fDI3PT1ufHwoMzc9PW4/VHQodCwtMSxyKXx8QXQodCk6Mzk9PW4/VHQodCwxLHIpfHxSdCh0KTozOD09bj9QdCh0LC0xLHIpfHxBdCh0KTo0MD09bj9GdCh0KXx8UHQodCwxLHIpfHxSdCh0KTpyPT0ocy5tYWM/Im0iOiJjIikmJig2Nj09bnx8NzM9PW58fDg5PT1ufHw5MD09bikpfWZ1bmN0aW9uICR0KHQsZSl7dmFyIG4sbyxpPXQucm9vdC5nZXRTZWxlY3Rpb24oKSxzPXQuc3RhdGUuZG9jLGE9dC5kb2NWaWV3Lm5lYXJlc3REZXNjKGkuZm9jdXNOb2RlKSxjPWEmJjA9PWEuc2l6ZSxsPXQuZG9jVmlldy5wb3NGcm9tRE9NKGkuZm9jdXNOb2RlLGkuZm9jdXNPZmZzZXQpLHA9cy5yZXNvbHZlKGwpO2lmKHgoaSkpe249cDt3aGlsZShhJiYhYS5ub2RlKWE9YS5wYXJlbnQ7aWYoYSYmYS5ub2RlLmlzQXRvbSYmci5Ob2RlU2VsZWN0aW9uLmlzU2VsZWN0YWJsZShhLm5vZGUpJiZhLnBhcmVudCl7dmFyIHU9YS5wb3NCZWZvcmU7bz1uZXcgci5Ob2RlU2VsZWN0aW9uKGw9PXU/cDpzLnJlc29sdmUodSkpfX1lbHNlIG49cy5yZXNvbHZlKHQuZG9jVmlldy5wb3NGcm9tRE9NKGkuYW5jaG9yTm9kZSxpLmFuY2hvck9mZnNldCkpO2lmKCFvKXt2YXIgaD0icG9pbnRlciI9PWV8fHQuc3RhdGUuc2VsZWN0aW9uLmhlYWQ8cC5wb3MmJiFjPzE6LTE7bz1VdCh0LG4scCxoKX1yZXR1cm4gb31mdW5jdGlvbiBWdCh0LGUsbil7dmFyIG89dC5zdGF0ZS5zZWxlY3Rpb247aWYoSHQodCxvKSx0LmVkaXRhYmxlJiYhdC5oYXNGb2N1cygpKXtpZighZSlyZXR1cm47cy5nZWNrbyYmcy5nZWNrb192ZXJzaW9uPD01NSYmKHQuZG9tT2JzZXJ2ZXIuZGlzY29ubmVjdFNlbGVjdGlvbigpLHQuZG9tLmZvY3VzKCksdC5kb21PYnNlcnZlci5jb25uZWN0U2VsZWN0aW9uKCkpfWVsc2UgaWYoIXQuZWRpdGFibGUmJighWHQodCl8fCFkb2N1bWVudC5hY3RpdmVFbGVtZW50LmNvbnRhaW5zKHQuZG9tKSkmJiFlKXJldHVybjtpZih0LmRvbU9ic2VydmVyLmRpc2Nvbm5lY3RTZWxlY3Rpb24oKSx0LmN1cnNvcldyYXBwZXIpV3QodCk7ZWxzZXt2YXIgaSxhLGM9by5hbmNob3IsbD1vLmhlYWQ7IUx0fHxvIGluc3RhbmNlb2Ygci5UZXh0U2VsZWN0aW9ufHwoby4kZnJvbS5wYXJlbnQuaW5saW5lQ29udGVudHx8KGk9SnQodCxvLmZyb20pKSxvLmVtcHR5fHxvLiRmcm9tLnBhcmVudC5pbmxpbmVDb250ZW50fHwoYT1KdCh0LG8udG8pKSksdC5kb2NWaWV3LnNldFNlbGVjdGlvbihjLGwsdC5yb290LG4pLEx0JiYoaSYmKGkuY29udGVudEVkaXRhYmxlPSJmYWxzZSIpLGEmJihhLmNvbnRlbnRFZGl0YWJsZT0iZmFsc2UiKSksby52aXNpYmxlP3QuZG9tLmNsYXNzTGlzdC5yZW1vdmUoIlByb3NlTWlycm9yLWhpZGVzZWxlY3Rpb24iKTpjIT1sJiYodC5kb20uY2xhc3NMaXN0LmFkZCgiUHJvc2VNaXJyb3ItaGlkZXNlbGVjdGlvbiIpLCJvbnNlbGVjdGlvbmNoYW5nZSJpbiBkb2N1bWVudCYmcXQodCkpfXQuZG9tT2JzZXJ2ZXIuc2V0Q3VyU2VsZWN0aW9uKCksdC5kb21PYnNlcnZlci5jb25uZWN0U2VsZWN0aW9uKCl9eXQucHJvdG90eXBlLmdldFByZU1hdGNoPWZ1bmN0aW9uKHQpe3JldHVybiB0Pj10aGlzLnByZU1hdGNoT2Zmc2V0P3RoaXMucHJlTWF0Y2hlZFt0LXRoaXMucHJlTWF0Y2hPZmZzZXRdOm51bGx9LHl0LnByb3RvdHlwZS5kZXN0cm95QmV0d2Vlbj1mdW5jdGlvbih0LGUpe3ZhciBuPXRoaXM7aWYodCE9ZSl7Zm9yKHZhciByPXQ7cjxlO3IrKyluLnRvcC5jaGlsZHJlbltyXS5kZXN0cm95KCk7dGhpcy50b3AuY2hpbGRyZW4uc3BsaWNlKHQsZS10KSx0aGlzLmNoYW5nZWQ9ITB9fSx5dC5wcm90b3R5cGUuZGVzdHJveVJlc3Q9ZnVuY3Rpb24oKXt0aGlzLmRlc3Ryb3lCZXR3ZWVuKHRoaXMuaW5kZXgsdGhpcy50b3AuY2hpbGRyZW4ubGVuZ3RoKX0seXQucHJvdG90eXBlLnN5bmNUb01hcmtzPWZ1bmN0aW9uKHQsZSxuKXt2YXIgcj10aGlzLG89MCxpPXRoaXMuc3RhY2subGVuZ3RoPj4xLHM9TWF0aC5taW4oaSx0Lmxlbmd0aCk7d2hpbGUobzxzJiYobz09aS0xP3RoaXMudG9wOnRoaXMuc3RhY2tbbysxPDwxXSkubWF0Y2hlc01hcmsodFtvXSkmJiExIT09dFtvXS50eXBlLnNwZWMuc3Bhbm5pbmcpbysrO3doaWxlKG88aSlyLmRlc3Ryb3lSZXN0KCksci50b3AuZGlydHk9SyxyLmluZGV4PXIuc3RhY2sucG9wKCksci50b3A9ci5zdGFjay5wb3AoKSxpLS07d2hpbGUoaTx0Lmxlbmd0aCl7ci5zdGFjay5wdXNoKHIudG9wLHIuaW5kZXgrMSk7Zm9yKHZhciBhPS0xLGM9dGhpcy5pbmRleDtjPE1hdGgubWluKHRoaXMuaW5kZXgrMyx0aGlzLnRvcC5jaGlsZHJlbi5sZW5ndGgpO2MrKylpZihyLnRvcC5jaGlsZHJlbltjXS5tYXRjaGVzTWFyayh0W2ldKSl7YT1jO2JyZWFrfWlmKGE+LTEpYT5yLmluZGV4JiYoci5jaGFuZ2VkPSEwLHIuZGVzdHJveUJldHdlZW4oci5pbmRleCxhKSksci50b3A9ci50b3AuY2hpbGRyZW5bci5pbmRleF07ZWxzZXt2YXIgbD1udC5jcmVhdGUoci50b3AsdFtpXSxlLG4pO3IudG9wLmNoaWxkcmVuLnNwbGljZShyLmluZGV4LDAsbCksci50b3A9bCxyLmNoYW5nZWQ9ITB9ci5pbmRleD0wLGkrK319LHl0LnByb3RvdHlwZS5maW5kTm9kZU1hdGNoPWZ1bmN0aW9uKHQsZSxuLHIpe3ZhciBvPXRoaXMsaT0tMSxzPXI8MD92b2lkIDA6dGhpcy5nZXRQcmVNYXRjaChyKSxhPXRoaXMudG9wLmNoaWxkcmVuO2lmKHMmJnMubWF0Y2hlc05vZGUodCxlLG4pKWk9YS5pbmRleE9mKHMpO2Vsc2UgZm9yKHZhciBjPXRoaXMuaW5kZXgsbD1NYXRoLm1pbihhLmxlbmd0aCxjKzUpO2M8bDtjKyspe3ZhciBwPWFbY107aWYocC5tYXRjaGVzTm9kZSh0LGUsbikmJm8ucHJlTWF0Y2hlZC5pbmRleE9mKHApPDApe2k9YzticmVha319cmV0dXJuIShpPDApJiYodGhpcy5kZXN0cm95QmV0d2Vlbih0aGlzLmluZGV4LGkpLHRoaXMuaW5kZXgrKywhMCl9LHl0LnByb3RvdHlwZS51cGRhdGVOZXh0Tm9kZT1mdW5jdGlvbih0LGUsbixyLG8pe2lmKHRoaXMuaW5kZXg9PXRoaXMudG9wLmNoaWxkcmVuLmxlbmd0aClyZXR1cm4hMTt2YXIgaT10aGlzLnRvcC5jaGlsZHJlblt0aGlzLmluZGV4XTtpZihpIGluc3RhbmNlb2YgcnQpe3ZhciBzPXRoaXMucHJlTWF0Y2hlZC5pbmRleE9mKGkpO2lmKHM+LTEmJnMrdGhpcy5wcmVNYXRjaE9mZnNldCE9bylyZXR1cm4hMTt2YXIgYT1pLmRvbSxjPXRoaXMubG9jayYmKGE9PXRoaXMubG9ja3x8MT09YS5ub2RlVHlwZSYmYS5jb250YWlucyh0aGlzLmxvY2sucGFyZW50Tm9kZSkpJiYhKHQuaXNUZXh0JiZpLm5vZGUmJmkubm9kZS5pc1RleHQmJmkubm9kZURPTS5ub2RlVmFsdWU9PXQudGV4dCYmaS5kaXJ0eSE9WCYmdnQoZSxpLm91dGVyRGVjbykpO2lmKCFjJiZpLnVwZGF0ZSh0LGUsbixyKSlyZXR1cm4gaS5kb20hPWEmJih0aGlzLmNoYW5nZWQ9ITApLHRoaXMuaW5kZXgrKywhMH1yZXR1cm4hMX0seXQucHJvdG90eXBlLmFkZE5vZGU9ZnVuY3Rpb24odCxlLG4scixvKXt0aGlzLnRvcC5jaGlsZHJlbi5zcGxpY2UodGhpcy5pbmRleCsrLDAscnQuY3JlYXRlKHRoaXMudG9wLHQsZSxuLHIsbykpLHRoaXMuY2hhbmdlZD0hMH0seXQucHJvdG90eXBlLnBsYWNlV2lkZ2V0PWZ1bmN0aW9uKHQsZSxuKXtpZih0aGlzLmluZGV4PHRoaXMudG9wLmNoaWxkcmVuLmxlbmd0aCYmdGhpcy50b3AuY2hpbGRyZW5bdGhpcy5pbmRleF0ubWF0Y2hlc1dpZGdldCh0KSl0aGlzLmluZGV4Kys7ZWxzZXt2YXIgcj1uZXcgdHQodGhpcy50b3AsdCxlLG4pO3RoaXMudG9wLmNoaWxkcmVuLnNwbGljZSh0aGlzLmluZGV4KyssMCxyKSx0aGlzLmNoYW5nZWQ9ITB9fSx5dC5wcm90b3R5cGUuYWRkVGV4dGJsb2NrSGFja3M9ZnVuY3Rpb24oKXt2YXIgdD10aGlzLnRvcC5jaGlsZHJlblt0aGlzLmluZGV4LTFdO3doaWxlKHQgaW5zdGFuY2VvZiBudCl0PXQuY2hpbGRyZW5bdC5jaGlsZHJlbi5sZW5ndGgtMV07aWYoIXR8fCEodCBpbnN0YW5jZW9mIGl0KXx8L1xuJC8udGVzdCh0Lm5vZGUudGV4dCkpaWYodGhpcy5pbmRleDx0aGlzLnRvcC5jaGlsZHJlbi5sZW5ndGgmJnRoaXMudG9wLmNoaWxkcmVuW3RoaXMuaW5kZXhdLm1hdGNoZXNIYWNrKCkpdGhpcy5pbmRleCsrO2Vsc2V7dmFyIGU9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiYnIiKTt0aGlzLnRvcC5jaGlsZHJlbi5zcGxpY2UodGhpcy5pbmRleCsrLDAsbmV3IHN0KHRoaXMudG9wLFosZSxudWxsKSksdGhpcy5jaGFuZ2VkPSEwfX07dmFyIEx0PXMuc2FmYXJpfHxzLmNocm9tZSYmcy5jaHJvbWVfdmVyc2lvbjw2MztmdW5jdGlvbiBKdCh0LGUpe3ZhciBuPXQuZG9jVmlldy5kb21Gcm9tUG9zKGUpLHI9bi5ub2RlLG89bi5vZmZzZXQsaT1vPHIuY2hpbGROb2Rlcy5sZW5ndGg/ci5jaGlsZE5vZGVzW29dOm51bGwscz1vP3IuY2hpbGROb2Rlc1tvLTFdOm51bGw7aWYoKCFpfHwiZmFsc2UiPT1pLmNvbnRlbnRFZGl0YWJsZSkmJighc3x8ImZhbHNlIj09cy5jb250ZW50RWRpdGFibGUpKXtpZihpKXJldHVybiBpLmNvbnRlbnRFZGl0YWJsZT0idHJ1ZSIsaTtpZihzKXJldHVybiBzLmNvbnRlbnRFZGl0YWJsZT0idHJ1ZSIsc319ZnVuY3Rpb24gcXQodCl7dmFyIGU9dC5kb20ub3duZXJEb2N1bWVudDtlLnJlbW92ZUV2ZW50TGlzdGVuZXIoInNlbGVjdGlvbmNoYW5nZSIsdC5oaWRlU2VsZWN0aW9uR3VhcmQpO3ZhciBuPXQucm9vdC5nZXRTZWxlY3Rpb24oKSxyPW4uYW5jaG9yTm9kZSxvPW4uYW5jaG9yT2Zmc2V0O2UuYWRkRXZlbnRMaXN0ZW5lcigic2VsZWN0aW9uY2hhbmdlIix0LmhpZGVTZWxlY3Rpb25HdWFyZD1mdW5jdGlvbigpe24uYW5jaG9yTm9kZT09ciYmbi5hbmNob3JPZmZzZXQ9PW98fChlLnJlbW92ZUV2ZW50TGlzdGVuZXIoInNlbGVjdGlvbmNoYW5nZSIsdC5oaWRlU2VsZWN0aW9uR3VhcmQpLHQuZG9tLmNsYXNzTGlzdC5yZW1vdmUoIlByb3NlTWlycm9yLWhpZGVzZWxlY3Rpb24iKSl9KX1mdW5jdGlvbiBXdCh0KXt2YXIgZT10LnJvb3QuZ2V0U2VsZWN0aW9uKCksbj1kb2N1bWVudC5jcmVhdGVSYW5nZSgpLHI9dC5jdXJzb3JXcmFwcGVyLmRvbSxvPSJJTUciPT1yLm5vZGVOYW1lO28/bi5zZXRFbmQoci5wYXJlbnROb2RlLGgocikrMSk6bi5zZXRFbmQociwwKSxuLmNvbGxhcHNlKCExKSxlLnJlbW92ZUFsbFJhbmdlcygpLGUuYWRkUmFuZ2UobiksIW8mJiF0LnN0YXRlLnNlbGVjdGlvbi52aXNpYmxlJiZzLmllJiZzLmllX3ZlcnNpb248PTExJiYoci5kaXNhYmxlZD0hMCxyLmRpc2FibGVkPSExKX1mdW5jdGlvbiBIdCh0LGUpe2lmKGUgaW5zdGFuY2VvZiByLk5vZGVTZWxlY3Rpb24pe3ZhciBuPXQuZG9jVmlldy5kZXNjQXQoZS5mcm9tKTtuIT10Lmxhc3RTZWxlY3RlZFZpZXdEZXNjJiYoS3QodCksbiYmbi5zZWxlY3ROb2RlKCksdC5sYXN0U2VsZWN0ZWRWaWV3RGVzYz1uKX1lbHNlIEt0KHQpfWZ1bmN0aW9uIEt0KHQpe3QubGFzdFNlbGVjdGVkVmlld0Rlc2MmJih0Lmxhc3RTZWxlY3RlZFZpZXdEZXNjLnBhcmVudCYmdC5sYXN0U2VsZWN0ZWRWaWV3RGVzYy5kZXNlbGVjdE5vZGUoKSx0Lmxhc3RTZWxlY3RlZFZpZXdEZXNjPW51bGwpfWZ1bmN0aW9uIFV0KHQsZSxuLG8pe3JldHVybiB0LnNvbWVQcm9wKCJjcmVhdGVTZWxlY3Rpb25CZXR3ZWVuIiwoZnVuY3Rpb24ocil7cmV0dXJuIHIodCxlLG4pfSkpfHxyLlRleHRTZWxlY3Rpb24uYmV0d2VlbihlLG4sbyl9ZnVuY3Rpb24gR3QodCl7cmV0dXJuKCF0LmVkaXRhYmxlfHx0LnJvb3QuYWN0aXZlRWxlbWVudD09dC5kb20pJiZYdCh0KX1mdW5jdGlvbiBYdCh0KXt2YXIgZT10LnJvb3QuZ2V0U2VsZWN0aW9uKCk7aWYoIWUuYW5jaG9yTm9kZSlyZXR1cm4hMTt0cnl7cmV0dXJuIHQuZG9tLmNvbnRhaW5zKDM9PWUuYW5jaG9yTm9kZS5ub2RlVHlwZT9lLmFuY2hvck5vZGUucGFyZW50Tm9kZTplLmFuY2hvck5vZGUpJiYodC5lZGl0YWJsZXx8dC5kb20uY29udGFpbnMoMz09ZS5mb2N1c05vZGUubm9kZVR5cGU/ZS5mb2N1c05vZGUucGFyZW50Tm9kZTplLmZvY3VzTm9kZSkpfWNhdGNoKG4pe3JldHVybiExfX1mdW5jdGlvbiBZdCh0KXt2YXIgZT10LmRvY1ZpZXcuZG9tRnJvbVBvcyh0LnN0YXRlLnNlbGVjdGlvbi5hbmNob3IpLG49dC5yb290LmdldFNlbGVjdGlvbigpO3JldHVybiB2KGUubm9kZSxlLm9mZnNldCxuLmFuY2hvck5vZGUsbi5hbmNob3JPZmZzZXQpfWZ1bmN0aW9uIFF0KHQsZSxuKXt2YXIgcj10LmRvY1ZpZXcucGFyc2VSYW5nZShlLG4pLGk9ci5ub2RlLGE9ci5mcm9tT2Zmc2V0LGM9ci50b09mZnNldCxsPXIuZnJvbSxwPXIudG8sdT10LnJvb3QuZ2V0U2VsZWN0aW9uKCksaD1udWxsLGY9dS5hbmNob3JOb2RlO2lmKGYmJnQuZG9tLmNvbnRhaW5zKDE9PWYubm9kZVR5cGU/ZjpmLnBhcmVudE5vZGUpJiYoaD1be25vZGU6ZixvZmZzZXQ6dS5hbmNob3JPZmZzZXR9XSx4KHUpfHxoLnB1c2goe25vZGU6dS5mb2N1c05vZGUsb2Zmc2V0OnUuZm9jdXNPZmZzZXR9KSkscy5jaHJvbWUmJjg9PT10Lmxhc3RLZXlDb2RlKWZvcih2YXIgZD1jO2Q+YTtkLS0pe3ZhciB2PWkuY2hpbGROb2Rlc1tkLTFdLG09di5wbVZpZXdEZXNjO2lmKCJCUiI9PXYubm9kZVR5cGUmJiFtKXtjPWQ7YnJlYWt9aWYoIW18fG0uc2l6ZSlicmVha312YXIgeT10LnN0YXRlLmRvYyxnPXQuc29tZVByb3AoImRvbVBhcnNlciIpfHxvLkRPTVBhcnNlci5mcm9tU2NoZW1hKHQuc3RhdGUuc2NoZW1hKSx3PXkucmVzb2x2ZShsKSxiPW51bGwsaz1nLnBhcnNlKGkse3RvcE5vZGU6dy5wYXJlbnQsdG9wTWF0Y2g6dy5wYXJlbnQuY29udGVudE1hdGNoQXQody5pbmRleCgpKSx0b3BPcGVuOiEwLGZyb206YSx0bzpjLHByZXNlcnZlV2hpdGVzcGFjZTohdy5wYXJlbnQudHlwZS5zcGVjLmNvZGV8fCJmdWxsIixlZGl0YWJsZUNvbnRlbnQ6ITAsZmluZFBvc2l0aW9uczpoLHJ1bGVGcm9tTm9kZTpadChnLHcpLGNvbnRleHQ6d30pO2lmKGgmJm51bGwhPWhbMF0ucG9zKXt2YXIgUz1oWzBdLnBvcyxDPWhbMV0mJmhbMV0ucG9zO251bGw9PUMmJihDPVMpLGI9e2FuY2hvcjpTK2wsaGVhZDpDK2x9fXJldHVybntkb2M6ayxzZWw6Yixmcm9tOmwsdG86cH19ZnVuY3Rpb24gWnQodCxlKXtyZXR1cm4gZnVuY3Rpb24obil7dmFyIHI9bi5wbVZpZXdEZXNjO2lmKHIpcmV0dXJuIHIucGFyc2VSdWxlKCk7aWYoIkJSIj09bi5ub2RlTmFtZSYmbi5wYXJlbnROb2RlKXtpZihzLnNhZmFyaSYmL14odWx8b2wpJC9pLnRlc3Qobi5wYXJlbnROb2RlLm5vZGVOYW1lKSlyZXR1cm4gdC5tYXRjaFRhZyhkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJsaSIpLGUpO2lmKG4ucGFyZW50Tm9kZS5sYXN0Q2hpbGQ9PW58fHMuc2FmYXJpJiYvXih0cnx0YWJsZSkkL2kudGVzdChuLnBhcmVudE5vZGUubm9kZU5hbWUpKXJldHVybntpZ25vcmU6ITB9fWVsc2UgaWYoIklNRyI9PW4ubm9kZU5hbWUmJm4uZ2V0QXR0cmlidXRlKCJtYXJrLXBsYWNlaG9sZGVyIikpcmV0dXJue2lnbm9yZTohMH19fWZ1bmN0aW9uIHRlKHQsZSxuLG8pe2lmKGU8MCl7dmFyIGk9dC5sYXN0U2VsZWN0aW9uVGltZT5EYXRlLm5vdygpLTUwP3QubGFzdFNlbGVjdGlvbk9yaWdpbjpudWxsLGE9JHQodCxpKTtpZighdC5zdGF0ZS5zZWxlY3Rpb24uZXEoYSkpe3ZhciBjPXQuc3RhdGUudHIuc2V0U2VsZWN0aW9uKGEpOyJwb2ludGVyIj09aT9jLnNldE1ldGEoInBvaW50ZXIiLCEwKToia2V5Ij09aSYmYy5zY3JvbGxJbnRvVmlldygpLHQuZGlzcGF0Y2goYyl9fWVsc2V7dmFyIGw9dC5zdGF0ZS5kb2MucmVzb2x2ZShlKSxwPWwuc2hhcmVkRGVwdGgobik7ZT1sLmJlZm9yZShwKzEpLG49dC5zdGF0ZS5kb2MucmVzb2x2ZShuKS5hZnRlcihwKzEpO3ZhciB1LGgsZj10LnN0YXRlLnNlbGVjdGlvbixkPVF0KHQsZSxuKSx2PXQuc3RhdGUuZG9jLG09di5zbGljZShkLmZyb20sZC50byk7OD09PXQubGFzdEtleUNvZGUmJkRhdGUubm93KCktMTAwPHQubGFzdEtleUNvZGVUaW1lPyh1PXQuc3RhdGUuc2VsZWN0aW9uLnRvLGg9ImVuZCIpOih1PXQuc3RhdGUuc2VsZWN0aW9uLmZyb20saD0ic3RhcnQiKSx0Lmxhc3RLZXlDb2RlPW51bGw7dmFyIHk9aWUobS5jb250ZW50LGQuZG9jLmNvbnRlbnQsZC5mcm9tLHUsaCk7aWYoIXkpe2lmKCEobyYmZiBpbnN0YW5jZW9mIHIuVGV4dFNlbGVjdGlvbiYmIWYuZW1wdHkmJmYuJGhlYWQuc2FtZVBhcmVudChmLiRhbmNob3IpKXx8dC5jb21wb3Npbmd8fGQuc2VsJiZkLnNlbC5hbmNob3IhPWQuc2VsLmhlYWQpe2lmKGQuc2VsKXt2YXIgZz1lZSh0LHQuc3RhdGUuZG9jLGQuc2VsKTtnJiYhZy5lcSh0LnN0YXRlLnNlbGVjdGlvbikmJnQuZGlzcGF0Y2godC5zdGF0ZS50ci5zZXRTZWxlY3Rpb24oZykpfXJldHVybn15PXtzdGFydDpmLmZyb20sZW5kQTpmLnRvLGVuZEI6Zi50b319dC5kb21DaGFuZ2VDb3VudCsrLHQuc3RhdGUuc2VsZWN0aW9uLmZyb208dC5zdGF0ZS5zZWxlY3Rpb24udG8mJnkuc3RhcnQ9PXkuZW5kQiYmdC5zdGF0ZS5zZWxlY3Rpb24gaW5zdGFuY2VvZiByLlRleHRTZWxlY3Rpb24mJih5LnN0YXJ0PnQuc3RhdGUuc2VsZWN0aW9uLmZyb20mJnkuc3RhcnQ8PXQuc3RhdGUuc2VsZWN0aW9uLmZyb20rMj95LnN0YXJ0PXQuc3RhdGUuc2VsZWN0aW9uLmZyb206eS5lbmRBPHQuc3RhdGUuc2VsZWN0aW9uLnRvJiZ5LmVuZEE+PXQuc3RhdGUuc2VsZWN0aW9uLnRvLTImJih5LmVuZEIrPXQuc3RhdGUuc2VsZWN0aW9uLnRvLXkuZW5kQSx5LmVuZEE9dC5zdGF0ZS5zZWxlY3Rpb24udG8pKSxzLmllJiZzLmllX3ZlcnNpb248PTExJiZ5LmVuZEI9PXkuc3RhcnQrMSYmeS5lbmRBPT15LnN0YXJ0JiZ5LnN0YXJ0PmQuZnJvbSYmIiDCoCI9PWQuZG9jLnRleHRCZXR3ZWVuKHkuc3RhcnQtZC5mcm9tLTEseS5zdGFydC1kLmZyb20rMSkmJih5LnN0YXJ0LS0seS5lbmRBLS0seS5lbmRCLS0pO3ZhciB3LHg9ZC5kb2MucmVzb2x2ZU5vQ2FjaGUoeS5zdGFydC1kLmZyb20pLGs9ZC5kb2MucmVzb2x2ZU5vQ2FjaGUoeS5lbmRCLWQuZnJvbSk7aWYoISgheC5zYW1lUGFyZW50KGspJiZ4LnBvczxkLmRvYy5jb250ZW50LnNpemUmJih3PXIuU2VsZWN0aW9uLmZpbmRGcm9tKGQuZG9jLnJlc29sdmUoeC5wb3MrMSksMSwhMCkpJiZ3LmhlYWQ9PWsucG9zJiZ0LnNvbWVQcm9wKCJoYW5kbGVLZXlEb3duIiwoZnVuY3Rpb24oZSl7cmV0dXJuIGUodCxiKDEzLCJFbnRlciIpKX0pKSkpaWYodC5zdGF0ZS5zZWxlY3Rpb24uYW5jaG9yPnkuc3RhcnQmJnJlKHYseS5zdGFydCx5LmVuZEEseCxrKSYmdC5zb21lUHJvcCgiaGFuZGxlS2V5RG93biIsKGZ1bmN0aW9uKGUpe3JldHVybiBlKHQsYig4LCJCYWNrc3BhY2UiKSl9KSkpcy5hbmRyb2lkJiZzLmNocm9tZSYmdC5kb21PYnNlcnZlci5zdXBwcmVzc1NlbGVjdGlvblVwZGF0ZXMoKTtlbHNle3ZhciBTLEMsTyxNLFQ9eS5zdGFydCxOPXkuZW5kQTtpZih4LnNhbWVQYXJlbnQoaykmJngucGFyZW50LmlubGluZUNvbnRlbnQpaWYoeC5wb3M9PWsucG9zKXMuaWUmJnMuaWVfdmVyc2lvbjw9MTEmJjA9PXgucGFyZW50T2Zmc2V0JiYodC5kb21PYnNlcnZlci5zdXBwcmVzc1NlbGVjdGlvblVwZGF0ZXMoKSxzZXRUaW1lb3V0KChmdW5jdGlvbigpe3JldHVybiBWdCh0KX0pLDIwKSksUz10LnN0YXRlLnRyLmRlbGV0ZShULE4pLEM9di5yZXNvbHZlKHkuc3RhcnQpLm1hcmtzQWNyb3NzKHYucmVzb2x2ZSh5LmVuZEEpKTtlbHNlIGlmKHkuZW5kQT09eS5lbmRCJiYoTT12LnJlc29sdmUoeS5zdGFydCkpJiYoTz1uZSh4LnBhcmVudC5jb250ZW50LmN1dCh4LnBhcmVudE9mZnNldCxrLnBhcmVudE9mZnNldCksTS5wYXJlbnQuY29udGVudC5jdXQoTS5wYXJlbnRPZmZzZXQseS5lbmRBLU0uc3RhcnQoKSkpKSlTPXQuc3RhdGUudHIsImFkZCI9PU8udHlwZT9TLmFkZE1hcmsoVCxOLE8ubWFyayk6Uy5yZW1vdmVNYXJrKFQsTixPLm1hcmspO2Vsc2UgaWYoeC5wYXJlbnQuY2hpbGQoeC5pbmRleCgpKS5pc1RleHQmJnguaW5kZXgoKT09ay5pbmRleCgpLShrLnRleHRPZmZzZXQ/MDoxKSl7dmFyIEU9eC5wYXJlbnQudGV4dEJldHdlZW4oeC5wYXJlbnRPZmZzZXQsay5wYXJlbnRPZmZzZXQpO2lmKHQuc29tZVByb3AoImhhbmRsZVRleHRJbnB1dCIsKGZ1bmN0aW9uKGUpe3JldHVybiBlKHQsVCxOLEUpfSkpKXJldHVybjtTPXQuc3RhdGUudHIuaW5zZXJ0VGV4dChFLFQsTil9aWYoU3x8KFM9dC5zdGF0ZS50ci5yZXBsYWNlKFQsTixkLmRvYy5zbGljZSh5LnN0YXJ0LWQuZnJvbSx5LmVuZEItZC5mcm9tKSkpLGQuc2VsKXt2YXIgQT1lZSh0LFMuZG9jLGQuc2VsKTtBJiZTLnNldFNlbGVjdGlvbihBKX1DJiZTLmVuc3VyZU1hcmtzKEMpLHQuZGlzcGF0Y2goUy5zY3JvbGxJbnRvVmlldygpKX19fWZ1bmN0aW9uIGVlKHQsZSxuKXtyZXR1cm4gTWF0aC5tYXgobi5hbmNob3Isbi5oZWFkKT5lLmNvbnRlbnQuc2l6ZT9udWxsOlV0KHQsZS5yZXNvbHZlKG4uYW5jaG9yKSxlLnJlc29sdmUobi5oZWFkKSl9ZnVuY3Rpb24gbmUodCxlKXtmb3IodmFyIG4scixpLHM9dC5maXJzdENoaWxkLm1hcmtzLGE9ZS5maXJzdENoaWxkLm1hcmtzLGM9cyxsPWEscD0wO3A8YS5sZW5ndGg7cCsrKWM9YVtwXS5yZW1vdmVGcm9tU2V0KGMpO2Zvcih2YXIgdT0wO3U8cy5sZW5ndGg7dSsrKWw9c1t1XS5yZW1vdmVGcm9tU2V0KGwpO2lmKDE9PWMubGVuZ3RoJiYwPT1sLmxlbmd0aClyPWNbMF0sbj0iYWRkIixpPWZ1bmN0aW9uKHQpe3JldHVybiB0Lm1hcmsoci5hZGRUb1NldCh0Lm1hcmtzKSl9O2Vsc2V7aWYoMCE9Yy5sZW5ndGh8fDEhPWwubGVuZ3RoKXJldHVybiBudWxsO3I9bFswXSxuPSJyZW1vdmUiLGk9ZnVuY3Rpb24odCl7cmV0dXJuIHQubWFyayhyLnJlbW92ZUZyb21TZXQodC5tYXJrcykpfX1mb3IodmFyIGg9W10sZj0wO2Y8ZS5jaGlsZENvdW50O2YrKyloLnB1c2goaShlLmNoaWxkKGYpKSk7aWYoby5GcmFnbWVudC5mcm9tKGgpLmVxKHQpKXJldHVybnttYXJrOnIsdHlwZTpufX1mdW5jdGlvbiByZSh0LGUsbixyLG8pe2lmKCFyLnBhcmVudC5pc1RleHRibG9ja3x8bi1lPD1vLnBvcy1yLnBvc3x8b2UociwhMCwhMSk8by5wb3MpcmV0dXJuITE7dmFyIGk9dC5yZXNvbHZlKGUpO2lmKGkucGFyZW50T2Zmc2V0PGkucGFyZW50LmNvbnRlbnQuc2l6ZXx8IWkucGFyZW50LmlzVGV4dGJsb2NrKXJldHVybiExO3ZhciBzPXQucmVzb2x2ZShvZShpLCEwLCEwKSk7cmV0dXJuISghcy5wYXJlbnQuaXNUZXh0YmxvY2t8fHMucG9zPm58fG9lKHMsITAsITEpPG4pJiZyLnBhcmVudC5jb250ZW50LmN1dChyLnBhcmVudE9mZnNldCkuZXEocy5wYXJlbnQuY29udGVudCl9ZnVuY3Rpb24gb2UodCxlLG4pe3ZhciByPXQuZGVwdGgsbz1lP3QuZW5kKCk6dC5wb3M7d2hpbGUocj4wJiYoZXx8dC5pbmRleEFmdGVyKHIpPT10Lm5vZGUocikuY2hpbGRDb3VudCkpci0tLG8rKyxlPSExO2lmKG4pe3ZhciBpPXQubm9kZShyKS5tYXliZUNoaWxkKHQuaW5kZXhBZnRlcihyKSk7d2hpbGUoaSYmIWkuaXNMZWFmKWk9aS5maXJzdENoaWxkLG8rK31yZXR1cm4gb31mdW5jdGlvbiBpZSh0LGUsbixyLG8pe3ZhciBpPXQuZmluZERpZmZTdGFydChlLG4pO2lmKG51bGw9PWkpcmV0dXJuIG51bGw7dmFyIHM9dC5maW5kRGlmZkVuZChlLG4rdC5zaXplLG4rZS5zaXplKSxhPXMuYSxjPXMuYjtpZigiZW5kIj09byl7dmFyIGw9TWF0aC5tYXgoMCxpLU1hdGgubWluKGEsYykpO3ItPWErbC1pfWlmKGE8aSYmdC5zaXplPGUuc2l6ZSl7dmFyIHA9cjw9aSYmcj49YT9pLXI6MDtpLT1wLGM9aSsoYy1hKSxhPWl9ZWxzZSBpZihjPGkpe3ZhciB1PXI8PWkmJnI+PWM/aS1yOjA7aS09dSxhPWkrKGEtYyksYz1pfXJldHVybntzdGFydDppLGVuZEE6YSxlbmRCOmN9fWZ1bmN0aW9uIHNlKHQsZSl7dmFyIG49W10scj1lLmNvbnRlbnQsaT1lLm9wZW5TdGFydCxzPWUub3BlbkVuZDt3aGlsZShpPjEmJnM+MSYmMT09ci5jaGlsZENvdW50JiYxPT1yLmZpcnN0Q2hpbGQuY2hpbGRDb3VudCl7aS0tLHMtLTt2YXIgYT1yLmZpcnN0Q2hpbGQ7bi5wdXNoKGEudHlwZS5uYW1lLGEudHlwZS5oYXNSZXF1aXJlZEF0dHJzKCk/YS5hdHRyczpudWxsKSxyPWEuY29udGVudH12YXIgYz10LnNvbWVQcm9wKCJjbGlwYm9hcmRTZXJpYWxpemVyIil8fG8uRE9NU2VyaWFsaXplci5mcm9tU2NoZW1hKHQuc3RhdGUuc2NoZW1hKSxsPW1lKCkscD1sLmNyZWF0ZUVsZW1lbnQoImRpdiIpO3AuYXBwZW5kQ2hpbGQoYy5zZXJpYWxpemVGcmFnbWVudChyLHtkb2N1bWVudDpsfSkpO3ZhciB1LGg9cC5maXJzdENoaWxkO3doaWxlKGgmJjE9PWgubm9kZVR5cGUmJih1PWRlW2gubm9kZU5hbWUudG9Mb3dlckNhc2UoKV0pKXtmb3IodmFyIGY9dS5sZW5ndGgtMTtmPj0wO2YtLSl7dmFyIGQ9bC5jcmVhdGVFbGVtZW50KHVbZl0pO3doaWxlKHAuZmlyc3RDaGlsZClkLmFwcGVuZENoaWxkKHAuZmlyc3RDaGlsZCk7cC5hcHBlbmRDaGlsZChkKX1oPXAuZmlyc3RDaGlsZH1oJiYxPT1oLm5vZGVUeXBlJiZoLnNldEF0dHJpYnV0ZSgiZGF0YS1wbS1zbGljZSIsaSsiICIrcysiICIrSlNPTi5zdHJpbmdpZnkobikpO3ZhciB2PXQuc29tZVByb3AoImNsaXBib2FyZFRleHRTZXJpYWxpemVyIiwoZnVuY3Rpb24odCl7cmV0dXJuIHQoZSl9KSl8fGUuY29udGVudC50ZXh0QmV0d2VlbigwLGUuY29udGVudC5zaXplLCJcblxuIik7cmV0dXJue2RvbTpwLHRleHQ6dn19ZnVuY3Rpb24gYWUodCxlLG4scixpKXt2YXIgcyxhLGM9aS5wYXJlbnQudHlwZS5zcGVjLmNvZGU7aWYoIW4mJiFlKXJldHVybiBudWxsO3ZhciBsPWUmJihyfHxjfHwhbik7aWYobCl7aWYodC5zb21lUHJvcCgidHJhbnNmb3JtUGFzdGVkVGV4dCIsKGZ1bmN0aW9uKHQpe2U9dChlKX0pKSxjKXJldHVybiBuZXcgby5TbGljZShvLkZyYWdtZW50LmZyb20odC5zdGF0ZS5zY2hlbWEudGV4dChlKSksMCwwKTt2YXIgcD10LnNvbWVQcm9wKCJjbGlwYm9hcmRUZXh0UGFyc2VyIiwoZnVuY3Rpb24odCl7cmV0dXJuIHQoZSxpKX0pKTtwP2E9cDoocz1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKSxlLnRyaW0oKS5zcGxpdCgvKD86XHJcbj98XG4pKy8pLmZvckVhY2goKGZ1bmN0aW9uKHQpe3MuYXBwZW5kQ2hpbGQoZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgicCIpKS50ZXh0Q29udGVudD10fSkpKX1lbHNlIHQuc29tZVByb3AoInRyYW5zZm9ybVBhc3RlZEhUTUwiLChmdW5jdGlvbih0KXtuPXQobil9KSkscz15ZShuKTt2YXIgdT1zJiZzLnF1ZXJ5U2VsZWN0b3IoIltkYXRhLXBtLXNsaWNlXSIpLGg9dSYmL14oXGQrKSAoXGQrKSAoLiopLy5leGVjKHUuZ2V0QXR0cmlidXRlKCJkYXRhLXBtLXNsaWNlIikpO2lmKCFhKXt2YXIgZj10LnNvbWVQcm9wKCJjbGlwYm9hcmRQYXJzZXIiKXx8dC5zb21lUHJvcCgiZG9tUGFyc2VyIil8fG8uRE9NUGFyc2VyLmZyb21TY2hlbWEodC5zdGF0ZS5zY2hlbWEpO2E9Zi5wYXJzZVNsaWNlKHMse3ByZXNlcnZlV2hpdGVzcGFjZTohKCFsJiYhaCksY29udGV4dDppfSl9cmV0dXJuIGE9aD9nZShmZShhLCtoWzFdLCtoWzJdKSxoWzNdKTpvLlNsaWNlLm1heE9wZW4oY2UoYS5jb250ZW50LGkpLCExKSx0LnNvbWVQcm9wKCJ0cmFuc2Zvcm1QYXN0ZWQiLChmdW5jdGlvbih0KXthPXQoYSl9KSksYX1mdW5jdGlvbiBjZSh0LGUpe2lmKHQuY2hpbGRDb3VudDwyKXJldHVybiB0O2Zvcih2YXIgbj1mdW5jdGlvbihuKXt2YXIgcj1lLm5vZGUobiksaT1yLmNvbnRlbnRNYXRjaEF0KGUuaW5kZXgobikpLHM9dm9pZCAwLGE9W107aWYodC5mb3JFYWNoKChmdW5jdGlvbih0KXtpZihhKXt2YXIgZSxuPWkuZmluZFdyYXBwaW5nKHQudHlwZSk7aWYoIW4pcmV0dXJuIGE9bnVsbDtpZihlPWEubGVuZ3RoJiZzLmxlbmd0aCYmcGUobixzLHQsYVthLmxlbmd0aC0xXSwwKSlhW2EubGVuZ3RoLTFdPWU7ZWxzZXthLmxlbmd0aCYmKGFbYS5sZW5ndGgtMV09dWUoYVthLmxlbmd0aC0xXSxzLmxlbmd0aCkpO3ZhciByPWxlKHQsbik7YS5wdXNoKHIpLGk9aS5tYXRjaFR5cGUoci50eXBlLHIuYXR0cnMpLHM9bn19fSkpLGEpcmV0dXJue3Y6by5GcmFnbWVudC5mcm9tKGEpfX0scj1lLmRlcHRoO3I+PTA7ci0tKXt2YXIgaT1uKHIpO2lmKGkpcmV0dXJuIGkudn1yZXR1cm4gdH1mdW5jdGlvbiBsZSh0LGUsbil7dm9pZCAwPT09biYmKG49MCk7Zm9yKHZhciByPWUubGVuZ3RoLTE7cj49bjtyLS0pdD1lW3JdLmNyZWF0ZShudWxsLG8uRnJhZ21lbnQuZnJvbSh0KSk7cmV0dXJuIHR9ZnVuY3Rpb24gcGUodCxlLG4scixpKXtpZihpPHQubGVuZ3RoJiZpPGUubGVuZ3RoJiZ0W2ldPT1lW2ldKXt2YXIgcz1wZSh0LGUsbixyLmxhc3RDaGlsZCxpKzEpO2lmKHMpcmV0dXJuIHIuY29weShyLmNvbnRlbnQucmVwbGFjZUNoaWxkKHIuY2hpbGRDb3VudC0xLHMpKTt2YXIgYT1yLmNvbnRlbnRNYXRjaEF0KHIuY2hpbGRDb3VudCk7aWYoYS5tYXRjaFR5cGUoaT09dC5sZW5ndGgtMT9uLnR5cGU6dFtpKzFdKSlyZXR1cm4gci5jb3B5KHIuY29udGVudC5hcHBlbmQoby5GcmFnbWVudC5mcm9tKGxlKG4sdCxpKzEpKSkpfX1mdW5jdGlvbiB1ZSh0LGUpe2lmKDA9PWUpcmV0dXJuIHQ7dmFyIG49dC5jb250ZW50LnJlcGxhY2VDaGlsZCh0LmNoaWxkQ291bnQtMSx1ZSh0Lmxhc3RDaGlsZCxlLTEpKSxyPXQuY29udGVudE1hdGNoQXQodC5jaGlsZENvdW50KS5maWxsQmVmb3JlKG8uRnJhZ21lbnQuZW1wdHksITApO3JldHVybiB0LmNvcHkobi5hcHBlbmQocikpfWZ1bmN0aW9uIGhlKHQsZSxuLHIsaSxzKXt2YXIgYT1lPDA/dC5maXJzdENoaWxkOnQubGFzdENoaWxkLGM9YS5jb250ZW50O3JldHVybiBpPHItMSYmKGM9aGUoYyxlLG4scixpKzEscykpLGk+PW4mJihjPWU8MD9hLmNvbnRlbnRNYXRjaEF0KDApLmZpbGxCZWZvcmUoYyx0LmNoaWxkQ291bnQ+MXx8czw9aSkuYXBwZW5kKGMpOmMuYXBwZW5kKGEuY29udGVudE1hdGNoQXQoYS5jaGlsZENvdW50KS5maWxsQmVmb3JlKG8uRnJhZ21lbnQuZW1wdHksITApKSksdC5yZXBsYWNlQ2hpbGQoZTwwPzA6dC5jaGlsZENvdW50LTEsYS5jb3B5KGMpKX1mdW5jdGlvbiBmZSh0LGUsbil7cmV0dXJuIGU8dC5vcGVuU3RhcnQmJih0PW5ldyBvLlNsaWNlKGhlKHQuY29udGVudCwtMSxlLHQub3BlblN0YXJ0LDAsdC5vcGVuRW5kKSxlLHQub3BlbkVuZCkpLG48dC5vcGVuRW5kJiYodD1uZXcgby5TbGljZShoZSh0LmNvbnRlbnQsMSxuLHQub3BlbkVuZCwwLDApLHQub3BlblN0YXJ0LG4pKSx0fXZhciBkZT17dGhlYWQ6WyJ0YWJsZSJdLGNvbGdyb3VwOlsidGFibGUiXSxjb2w6WyJ0YWJsZSIsImNvbGdyb3VwIl0sdHI6WyJ0YWJsZSIsInRib2R5Il0sdGQ6WyJ0YWJsZSIsInRib2R5IiwidHIiXSx0aDpbInRhYmxlIiwidGJvZHkiLCJ0ciJdfSx2ZT1udWxsO2Z1bmN0aW9uIG1lKCl7cmV0dXJuIHZlfHwodmU9ZG9jdW1lbnQuaW1wbGVtZW50YXRpb24uY3JlYXRlSFRNTERvY3VtZW50KCJ0aXRsZSIpKX1mdW5jdGlvbiB5ZSh0KXt2YXIgZT0vKFxzKjxtZXRhIFtePl0qPikqLy5leGVjKHQpO2UmJih0PXQuc2xpY2UoZVswXS5sZW5ndGgpKTt2YXIgbixyPW1lKCkuY3JlYXRlRWxlbWVudCgiZGl2Iiksbz0vKD86PG1ldGEgW14+XSo+KSo8KFthLXpdW14+XHNdKykvaS5leGVjKHQpLGk9MDsobj1vJiZkZVtvWzFdLnRvTG93ZXJDYXNlKCldKSYmKHQ9bi5tYXAoKGZ1bmN0aW9uKHQpe3JldHVybiI8Iit0KyI+In0pKS5qb2luKCIiKSt0K24ubWFwKChmdW5jdGlvbih0KXtyZXR1cm4iPC8iK3QrIj4ifSkpLnJldmVyc2UoKS5qb2luKCIiKSxpPW4ubGVuZ3RoKSxyLmlubmVySFRNTD10O2Zvcih2YXIgcz0wO3M8aTtzKyspcj1yLmZpcnN0Q2hpbGQ7cmV0dXJuIHJ9ZnVuY3Rpb24gZ2UodCxlKXtpZighdC5zaXplKXJldHVybiB0O3ZhciBuLHI9dC5jb250ZW50LmZpcnN0Q2hpbGQudHlwZS5zY2hlbWE7dHJ5e249SlNPTi5wYXJzZShlKX1jYXRjaChwKXtyZXR1cm4gdH1mb3IodmFyIGk9dC5jb250ZW50LHM9dC5vcGVuU3RhcnQsYT10Lm9wZW5FbmQsYz1uLmxlbmd0aC0yO2M+PTA7Yy09Mil7dmFyIGw9ci5ub2Rlc1tuW2NdXTtpZighbHx8bC5oYXNSZXF1aXJlZEF0dHJzKCkpYnJlYWs7aT1vLkZyYWdtZW50LmZyb20obC5jcmVhdGUobltjKzFdLGkpKSxzKyssYSsrfXJldHVybiBuZXcgby5TbGljZShpLHMsYSl9dmFyIHdlPXtjaGlsZExpc3Q6ITAsY2hhcmFjdGVyRGF0YTohMCxhdHRyaWJ1dGVzOiEwLHN1YnRyZWU6ITAsY2hhcmFjdGVyRGF0YU9sZFZhbHVlOiEwfSx4ZT1zLmllJiZzLmllX3ZlcnNpb248PTExLGJlPWZ1bmN0aW9uKCl7dGhpcy5hbmNob3JOb2RlPXRoaXMuYW5jaG9yT2Zmc2V0PXRoaXMuZm9jdXNOb2RlPXRoaXMuZm9jdXNPZmZzZXQ9bnVsbH07YmUucHJvdG90eXBlLnNldD1mdW5jdGlvbih0KXt0aGlzLmFuY2hvck5vZGU9dC5hbmNob3JOb2RlLHRoaXMuYW5jaG9yT2Zmc2V0PXQuYW5jaG9yT2Zmc2V0LHRoaXMuZm9jdXNOb2RlPXQuZm9jdXNOb2RlLHRoaXMuZm9jdXNPZmZzZXQ9dC5mb2N1c09mZnNldH0sYmUucHJvdG90eXBlLmVxPWZ1bmN0aW9uKHQpe3JldHVybiB0LmFuY2hvck5vZGU9PXRoaXMuYW5jaG9yTm9kZSYmdC5hbmNob3JPZmZzZXQ9PXRoaXMuYW5jaG9yT2Zmc2V0JiZ0LmZvY3VzTm9kZT09dGhpcy5mb2N1c05vZGUmJnQuZm9jdXNPZmZzZXQ9PXRoaXMuZm9jdXNPZmZzZXR9O3ZhciBrZT1mdW5jdGlvbih0LGUpe3ZhciBuPXRoaXM7dGhpcy52aWV3PXQsdGhpcy5oYW5kbGVET01DaGFuZ2U9ZSx0aGlzLnF1ZXVlPVtdLHRoaXMuZmx1c2hpbmdTb29uPSExLHRoaXMub2JzZXJ2ZXI9d2luZG93Lk11dGF0aW9uT2JzZXJ2ZXImJm5ldyB3aW5kb3cuTXV0YXRpb25PYnNlcnZlcigoZnVuY3Rpb24odCl7Zm9yKHZhciBlPTA7ZTx0Lmxlbmd0aDtlKyspbi5xdWV1ZS5wdXNoKHRbZV0pO3MuaWUmJnMuaWVfdmVyc2lvbjw9MTEmJnQuc29tZSgoZnVuY3Rpb24odCl7cmV0dXJuImNoaWxkTGlzdCI9PXQudHlwZSYmdC5yZW1vdmVkTm9kZXMubGVuZ3RofHwiY2hhcmFjdGVyRGF0YSI9PXQudHlwZSYmdC5vbGRWYWx1ZS5sZW5ndGg+dC50YXJnZXQubm9kZVZhbHVlLmxlbmd0aH0pKT9uLmZsdXNoU29vbigpOm4uZmx1c2goKX0pKSx0aGlzLmN1cnJlbnRTZWxlY3Rpb249bmV3IGJlLHhlJiYodGhpcy5vbkNoYXJEYXRhPWZ1bmN0aW9uKHQpe24ucXVldWUucHVzaCh7dGFyZ2V0OnQudGFyZ2V0LHR5cGU6ImNoYXJhY3RlckRhdGEiLG9sZFZhbHVlOnQucHJldlZhbHVlfSksbi5mbHVzaFNvb24oKX0pLHRoaXMub25TZWxlY3Rpb25DaGFuZ2U9dGhpcy5vblNlbGVjdGlvbkNoYW5nZS5iaW5kKHRoaXMpLHRoaXMuc3VwcHJlc3NpbmdTZWxlY3Rpb25VcGRhdGVzPSExfTtrZS5wcm90b3R5cGUuZmx1c2hTb29uPWZ1bmN0aW9uKCl7dmFyIHQ9dGhpczt0aGlzLmZsdXNoaW5nU29vbnx8KHRoaXMuZmx1c2hpbmdTb29uPSEwLHdpbmRvdy5zZXRUaW1lb3V0KChmdW5jdGlvbigpe3QuZmx1c2hpbmdTb29uPSExLHQuZmx1c2goKX0pLDIwKSl9LGtlLnByb3RvdHlwZS5zdGFydD1mdW5jdGlvbigpe3RoaXMub2JzZXJ2ZXImJnRoaXMub2JzZXJ2ZXIub2JzZXJ2ZSh0aGlzLnZpZXcuZG9tLHdlKSx4ZSYmdGhpcy52aWV3LmRvbS5hZGRFdmVudExpc3RlbmVyKCJET01DaGFyYWN0ZXJEYXRhTW9kaWZpZWQiLHRoaXMub25DaGFyRGF0YSksdGhpcy5jb25uZWN0U2VsZWN0aW9uKCl9LGtlLnByb3RvdHlwZS5zdG9wPWZ1bmN0aW9uKCl7dmFyIHQ9dGhpcztpZih0aGlzLm9ic2VydmVyKXt2YXIgZT10aGlzLm9ic2VydmVyLnRha2VSZWNvcmRzKCk7aWYoZS5sZW5ndGgpe2Zvcih2YXIgbj0wO248ZS5sZW5ndGg7bisrKXQucXVldWUucHVzaChlW25dKTt3aW5kb3cuc2V0VGltZW91dCgoZnVuY3Rpb24oKXtyZXR1cm4gdC5mbHVzaCgpfSksMjApfXRoaXMub2JzZXJ2ZXIuZGlzY29ubmVjdCgpfXhlJiZ0aGlzLnZpZXcuZG9tLnJlbW92ZUV2ZW50TGlzdGVuZXIoIkRPTUNoYXJhY3RlckRhdGFNb2RpZmllZCIsdGhpcy5vbkNoYXJEYXRhKSx0aGlzLmRpc2Nvbm5lY3RTZWxlY3Rpb24oKX0sa2UucHJvdG90eXBlLmNvbm5lY3RTZWxlY3Rpb249ZnVuY3Rpb24oKXt0aGlzLnZpZXcuZG9tLm93bmVyRG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigic2VsZWN0aW9uY2hhbmdlIix0aGlzLm9uU2VsZWN0aW9uQ2hhbmdlKX0sa2UucHJvdG90eXBlLmRpc2Nvbm5lY3RTZWxlY3Rpb249ZnVuY3Rpb24oKXt0aGlzLnZpZXcuZG9tLm93bmVyRG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcigic2VsZWN0aW9uY2hhbmdlIix0aGlzLm9uU2VsZWN0aW9uQ2hhbmdlKX0sa2UucHJvdG90eXBlLnN1cHByZXNzU2VsZWN0aW9uVXBkYXRlcz1mdW5jdGlvbigpe3ZhciB0PXRoaXM7dGhpcy5zdXBwcmVzc2luZ1NlbGVjdGlvblVwZGF0ZXM9ITAsc2V0VGltZW91dCgoZnVuY3Rpb24oKXtyZXR1cm4gdC5zdXBwcmVzc2luZ1NlbGVjdGlvblVwZGF0ZXM9ITF9KSw1MCl9LGtlLnByb3RvdHlwZS5vblNlbGVjdGlvbkNoYW5nZT1mdW5jdGlvbigpe2lmKEd0KHRoaXMudmlldykpe2lmKHRoaXMuc3VwcHJlc3NpbmdTZWxlY3Rpb25VcGRhdGVzKXJldHVybiBWdCh0aGlzLnZpZXcpO2lmKHMuaWUmJnMuaWVfdmVyc2lvbjw9MTEmJiF0aGlzLnZpZXcuc3RhdGUuc2VsZWN0aW9uLmVtcHR5KXt2YXIgdD10aGlzLnZpZXcucm9vdC5nZXRTZWxlY3Rpb24oKTtpZih0LmZvY3VzTm9kZSYmdih0LmZvY3VzTm9kZSx0LmZvY3VzT2Zmc2V0LHQuYW5jaG9yTm9kZSx0LmFuY2hvck9mZnNldCkpcmV0dXJuIHRoaXMuZmx1c2hTb29uKCl9dGhpcy5mbHVzaCgpfX0sa2UucHJvdG90eXBlLnNldEN1clNlbGVjdGlvbj1mdW5jdGlvbigpe3RoaXMuY3VycmVudFNlbGVjdGlvbi5zZXQodGhpcy52aWV3LnJvb3QuZ2V0U2VsZWN0aW9uKCkpfSxrZS5wcm90b3R5cGUuaWdub3JlU2VsZWN0aW9uQ2hhbmdlPWZ1bmN0aW9uKHQpe2lmKDA9PXQucmFuZ2VDb3VudClyZXR1cm4hMDt2YXIgZT10LmdldFJhbmdlQXQoMCkuY29tbW9uQW5jZXN0b3JDb250YWluZXIsbj10aGlzLnZpZXcuZG9jVmlldy5uZWFyZXN0RGVzYyhlKTtyZXR1cm4gbiYmbi5pZ25vcmVNdXRhdGlvbih7dHlwZToic2VsZWN0aW9uIix0YXJnZXQ6Mz09ZS5ub2RlVHlwZT9lLnBhcmVudE5vZGU6ZX0pfSxrZS5wcm90b3R5cGUuZmx1c2g9ZnVuY3Rpb24oKXt2YXIgdD10aGlzO2lmKHRoaXMudmlldy5kb2NWaWV3JiYhdGhpcy5mbHVzaGluZ1Nvb24pe3ZhciBlPXRoaXMub2JzZXJ2ZXI/dGhpcy5vYnNlcnZlci50YWtlUmVjb3JkcygpOltdO3RoaXMucXVldWUubGVuZ3RoJiYoZT10aGlzLnF1ZXVlLmNvbmNhdChlKSx0aGlzLnF1ZXVlLmxlbmd0aD0wKTt2YXIgbj10aGlzLnZpZXcucm9vdC5nZXRTZWxlY3Rpb24oKSxyPSF0aGlzLnN1cHByZXNzaW5nU2VsZWN0aW9uVXBkYXRlcyYmIXRoaXMuY3VycmVudFNlbGVjdGlvbi5lcShuKSYmWHQodGhpcy52aWV3KSYmIXRoaXMuaWdub3JlU2VsZWN0aW9uQ2hhbmdlKG4pLG89LTEsaT0tMSxzPSExO2lmKHRoaXMudmlldy5lZGl0YWJsZSlmb3IodmFyIGE9MDthPGUubGVuZ3RoO2ErKyl7dmFyIGM9dC5yZWdpc3Rlck11dGF0aW9uKGVbYV0pO2MmJihvPW88MD9jLmZyb206TWF0aC5taW4oYy5mcm9tLG8pLGk9aTwwP2MudG86TWF0aC5tYXgoYy50byxpKSxjLnR5cGVPdmVyJiYhdC52aWV3LmNvbXBvc2luZyYmKHM9ITApKX0obz4tMXx8cikmJihvPi0xJiZ0aGlzLnZpZXcuZG9jVmlldy5tYXJrRGlydHkobyxpKSx0aGlzLmhhbmRsZURPTUNoYW5nZShvLGkscyksdGhpcy52aWV3LmRvY1ZpZXcuZGlydHk/dGhpcy52aWV3LnVwZGF0ZVN0YXRlKHRoaXMudmlldy5zdGF0ZSk6dGhpcy5jdXJyZW50U2VsZWN0aW9uLmVxKG4pfHxWdCh0aGlzLnZpZXcpKX19LGtlLnByb3RvdHlwZS5yZWdpc3Rlck11dGF0aW9uPWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMudmlldy5kb2NWaWV3Lm5lYXJlc3REZXNjKHQudGFyZ2V0KTtpZigiYXR0cmlidXRlcyI9PXQudHlwZSYmKGU9PXRoaXMudmlldy5kb2NWaWV3fHwiY29udGVudGVkaXRhYmxlIj09dC5hdHRyaWJ1dGVOYW1lfHwic3R5bGUiPT10LmF0dHJpYnV0ZU5hbWUmJiF0Lm9sZFZhbHVlJiYhdC50YXJnZXQuZ2V0QXR0cmlidXRlKCJzdHlsZSIpKSlyZXR1cm4gbnVsbDtpZighZXx8ZS5pZ25vcmVNdXRhdGlvbih0KSlyZXR1cm4gbnVsbDtpZigiY2hpbGRMaXN0Ij09dC50eXBlKXt2YXIgbj10LnByZXZpb3VzU2libGluZyxyPXQubmV4dFNpYmxpbmc7aWYocy5pZSYmcy5pZV92ZXJzaW9uPD0xMSYmdC5hZGRlZE5vZGVzLmxlbmd0aClmb3IodmFyIG89MDtvPHQuYWRkZWROb2Rlcy5sZW5ndGg7bysrKXt2YXIgaT10LmFkZGVkTm9kZXNbb10sYT1pLnByZXZpb3VzU2libGluZyxjPWkubmV4dFNpYmxpbmc7KCFhfHxBcnJheS5wcm90b3R5cGUuaW5kZXhPZi5jYWxsKHQuYWRkZWROb2RlcyxhKTwwKSYmKG49YSksKCFjfHxBcnJheS5wcm90b3R5cGUuaW5kZXhPZi5jYWxsKHQuYWRkZWROb2RlcyxjKTwwKSYmKHI9Yyl9dmFyIGw9biYmbi5wYXJlbnROb2RlPT10LnRhcmdldD9oKG4pKzE6MCxwPWUubG9jYWxQb3NGcm9tRE9NKHQudGFyZ2V0LGwsLTEpLHU9ciYmci5wYXJlbnROb2RlPT10LnRhcmdldD9oKHIpOnQudGFyZ2V0LmNoaWxkTm9kZXMubGVuZ3RoLGY9ZS5sb2NhbFBvc0Zyb21ET00odC50YXJnZXQsdSwxKTtyZXR1cm57ZnJvbTpwLHRvOmZ9fXJldHVybiJhdHRyaWJ1dGVzIj09dC50eXBlP3tmcm9tOmUucG9zQXRTdGFydC1lLmJvcmRlcix0bzplLnBvc0F0RW5kK2UuYm9yZGVyfTp7ZnJvbTplLnBvc0F0U3RhcnQsdG86ZS5wb3NBdEVuZCx0eXBlT3Zlcjp0LnRhcmdldC5ub2RlVmFsdWU9PXQub2xkVmFsdWV9fTt2YXIgU2U9e30sQ2U9e307ZnVuY3Rpb24gT2UodCl7dC5zaGlmdEtleT0hMSx0Lm1vdXNlRG93bj1udWxsLHQubGFzdEtleUNvZGU9bnVsbCx0Lmxhc3RLZXlDb2RlVGltZT0wLHQubGFzdENsaWNrPXt0aW1lOjAseDowLHk6MCx0eXBlOiIifSx0Lmxhc3RTZWxlY3Rpb25PcmlnaW49bnVsbCx0Lmxhc3RTZWxlY3Rpb25UaW1lPTAsdC5jb21wb3Npbmc9ITEsdC5jb21wb3NpbmdUaW1lb3V0PW51bGwsdC5jb21wb3NpdGlvbk5vZGVzPVtdLHQuY29tcG9zaXRpb25FbmRlZEF0PS0yZTgsdC5kb21PYnNlcnZlcj1uZXcga2UodCwoZnVuY3Rpb24oZSxuLHIpe3JldHVybiB0ZSh0LGUsbixyKX0pKSx0LmRvbU9ic2VydmVyLnN0YXJ0KCksdC5kb21DaGFuZ2VDb3VudD0wLHQuZXZlbnRIYW5kbGVycz1PYmplY3QuY3JlYXRlKG51bGwpO3ZhciBlPWZ1bmN0aW9uKGUpe3ZhciBuPVNlW2VdO3QuZG9tLmFkZEV2ZW50TGlzdGVuZXIoZSx0LmV2ZW50SGFuZGxlcnNbZV09ZnVuY3Rpb24oZSl7IUFlKHQsZSl8fEVlKHQsZSl8fCF0LmVkaXRhYmxlJiZlLnR5cGUgaW4gQ2V8fG4odCxlKX0pfTtmb3IodmFyIG4gaW4gU2UpZShuKTtzLnNhZmFyaSYmdC5kb20uYWRkRXZlbnRMaXN0ZW5lcigiaW5wdXQiLChmdW5jdGlvbigpe3JldHVybiBudWxsfSkpLE5lKHQpfWZ1bmN0aW9uIE1lKHQsZSl7dC5sYXN0U2VsZWN0aW9uT3JpZ2luPWUsdC5sYXN0U2VsZWN0aW9uVGltZT1EYXRlLm5vdygpfWZ1bmN0aW9uIFRlKHQpe2Zvcih2YXIgZSBpbiB0LmRvbU9ic2VydmVyLnN0b3AoKSx0LmV2ZW50SGFuZGxlcnMpdC5kb20ucmVtb3ZlRXZlbnRMaXN0ZW5lcihlLHQuZXZlbnRIYW5kbGVyc1tlXSk7Y2xlYXJUaW1lb3V0KHQuY29tcG9zaW5nVGltZW91dCl9ZnVuY3Rpb24gTmUodCl7dC5zb21lUHJvcCgiaGFuZGxlRE9NRXZlbnRzIiwoZnVuY3Rpb24oZSl7Zm9yKHZhciBuIGluIGUpdC5ldmVudEhhbmRsZXJzW25dfHx0LmRvbS5hZGRFdmVudExpc3RlbmVyKG4sdC5ldmVudEhhbmRsZXJzW25dPWZ1bmN0aW9uKGUpe3JldHVybiBFZSh0LGUpfSl9KSl9ZnVuY3Rpb24gRWUodCxlKXtyZXR1cm4gdC5zb21lUHJvcCgiaGFuZGxlRE9NRXZlbnRzIiwoZnVuY3Rpb24obil7dmFyIHI9bltlLnR5cGVdO3JldHVybiEhciYmKHIodCxlKXx8ZS5kZWZhdWx0UHJldmVudGVkKX0pKX1mdW5jdGlvbiBBZSh0LGUpe2lmKCFlLmJ1YmJsZXMpcmV0dXJuITA7aWYoZS5kZWZhdWx0UHJldmVudGVkKXJldHVybiExO2Zvcih2YXIgbj1lLnRhcmdldDtuIT10LmRvbTtuPW4ucGFyZW50Tm9kZSlpZighbnx8MTE9PW4ubm9kZVR5cGV8fG4ucG1WaWV3RGVzYyYmbi5wbVZpZXdEZXNjLnN0b3BFdmVudChlKSlyZXR1cm4hMTtyZXR1cm4hMH1mdW5jdGlvbiBSZSh0LGUpe0VlKHQsZSl8fCFTZVtlLnR5cGVdfHwhdC5lZGl0YWJsZSYmZS50eXBlIGluIENlfHxTZVtlLnR5cGVdKHQsZSl9ZnVuY3Rpb24gRGUodCl7cmV0dXJue2xlZnQ6dC5jbGllbnRYLHRvcDp0LmNsaWVudFl9fWZ1bmN0aW9uIHplKHQsZSl7dmFyIG49ZS54LXQuY2xpZW50WCxyPWUueS10LmNsaWVudFk7cmV0dXJuIG4qbityKnI8MTAwfWZ1bmN0aW9uIFBlKHQsZSxuLHIsbyl7aWYoLTE9PXIpcmV0dXJuITE7Zm9yKHZhciBpPXQuc3RhdGUuZG9jLnJlc29sdmUocikscz1mdW5jdGlvbihyKXtpZih0LnNvbWVQcm9wKGUsKGZ1bmN0aW9uKGUpe3JldHVybiByPmkuZGVwdGg/ZSh0LG4saS5ub2RlQWZ0ZXIsaS5iZWZvcmUociksbywhMCk6ZSh0LG4saS5ub2RlKHIpLGkuYmVmb3JlKHIpLG8sITEpfSkpKXJldHVybnt2OiEwfX0sYT1pLmRlcHRoKzE7YT4wO2EtLSl7dmFyIGM9cyhhKTtpZihjKXJldHVybiBjLnZ9cmV0dXJuITF9ZnVuY3Rpb24gSWUodCxlLG4pe3QuZm9jdXNlZHx8dC5mb2N1cygpO3ZhciByPXQuc3RhdGUudHIuc2V0U2VsZWN0aW9uKGUpOyJwb2ludGVyIj09biYmci5zZXRNZXRhKCJwb2ludGVyIiwhMCksdC5kaXNwYXRjaChyKX1mdW5jdGlvbiBfZSh0LGUpe2lmKC0xPT1lKXJldHVybiExO3ZhciBuPXQuc3RhdGUuZG9jLnJlc29sdmUoZSksbz1uLm5vZGVBZnRlcjtyZXR1cm4hIShvJiZvLmlzQXRvbSYmci5Ob2RlU2VsZWN0aW9uLmlzU2VsZWN0YWJsZShvKSkmJihJZSh0LG5ldyByLk5vZGVTZWxlY3Rpb24obiksInBvaW50ZXIiKSwhMCl9ZnVuY3Rpb24gRmUodCxlKXtpZigtMT09ZSlyZXR1cm4hMTt2YXIgbixvLGk9dC5zdGF0ZS5zZWxlY3Rpb247aSBpbnN0YW5jZW9mIHIuTm9kZVNlbGVjdGlvbiYmKG49aS5ub2RlKTtmb3IodmFyIHM9dC5zdGF0ZS5kb2MucmVzb2x2ZShlKSxhPXMuZGVwdGgrMTthPjA7YS0tKXt2YXIgYz1hPnMuZGVwdGg/cy5ub2RlQWZ0ZXI6cy5ub2RlKGEpO2lmKHIuTm9kZVNlbGVjdGlvbi5pc1NlbGVjdGFibGUoYykpe289biYmaS4kZnJvbS5kZXB0aD4wJiZhPj1pLiRmcm9tLmRlcHRoJiZzLmJlZm9yZShpLiRmcm9tLmRlcHRoKzEpPT1pLiRmcm9tLnBvcz9zLmJlZm9yZShpLiRmcm9tLmRlcHRoKTpzLmJlZm9yZShhKTticmVha319cmV0dXJuIG51bGwhPW8mJihJZSh0LHIuTm9kZVNlbGVjdGlvbi5jcmVhdGUodC5zdGF0ZS5kb2MsbyksInBvaW50ZXIiKSwhMCl9ZnVuY3Rpb24gQmUodCxlLG4scixvKXtyZXR1cm4gUGUodCwiaGFuZGxlQ2xpY2tPbiIsZSxuLHIpfHx0LnNvbWVQcm9wKCJoYW5kbGVDbGljayIsKGZ1bmN0aW9uKG4pe3JldHVybiBuKHQsZSxyKX0pKXx8KG8/RmUodCxuKTpfZSh0LG4pKX1mdW5jdGlvbiBqZSh0LGUsbixyKXtyZXR1cm4gUGUodCwiaGFuZGxlRG91YmxlQ2xpY2tPbiIsZSxuLHIpfHx0LnNvbWVQcm9wKCJoYW5kbGVEb3VibGVDbGljayIsKGZ1bmN0aW9uKG4pe3JldHVybiBuKHQsZSxyKX0pKX1mdW5jdGlvbiAkZSh0LGUsbixyKXtyZXR1cm4gUGUodCwiaGFuZGxlVHJpcGxlQ2xpY2tPbiIsZSxuLHIpfHx0LnNvbWVQcm9wKCJoYW5kbGVUcmlwbGVDbGljayIsKGZ1bmN0aW9uKG4pe3JldHVybiBuKHQsZSxyKX0pKXx8VmUodCxuKX1mdW5jdGlvbiBWZSh0LGUpe3ZhciBuPXQuc3RhdGUuZG9jO2lmKC0xPT1lKXJldHVybiEhbi5pbmxpbmVDb250ZW50JiYoSWUodCxyLlRleHRTZWxlY3Rpb24uY3JlYXRlKG4sMCxuLmNvbnRlbnQuc2l6ZSksInBvaW50ZXIiKSwhMCk7Zm9yKHZhciBvPW4ucmVzb2x2ZShlKSxpPW8uZGVwdGgrMTtpPjA7aS0tKXt2YXIgcz1pPm8uZGVwdGg/by5ub2RlQWZ0ZXI6by5ub2RlKGkpLGE9by5iZWZvcmUoaSk7aWYocy5pbmxpbmVDb250ZW50KUllKHQsci5UZXh0U2VsZWN0aW9uLmNyZWF0ZShuLGErMSxhKzErcy5jb250ZW50LnNpemUpLCJwb2ludGVyIik7ZWxzZXtpZighci5Ob2RlU2VsZWN0aW9uLmlzU2VsZWN0YWJsZShzKSljb250aW51ZTtJZSh0LHIuTm9kZVNlbGVjdGlvbi5jcmVhdGUobixhKSwicG9pbnRlciIpfXJldHVybiEwfX1mdW5jdGlvbiBMZSh0KXtyZXR1cm4gVWUodCl9Q2Uua2V5ZG93bj1mdW5jdGlvbih0LGUpe3Quc2hpZnRLZXk9MTY9PWUua2V5Q29kZXx8ZS5zaGlmdEtleSxXZSh0LGUpfHwodC5sYXN0S2V5Q29kZT1lLmtleUNvZGUsdC5sYXN0S2V5Q29kZVRpbWU9RGF0ZS5ub3coKSx0LnNvbWVQcm9wKCJoYW5kbGVLZXlEb3duIiwoZnVuY3Rpb24obil7cmV0dXJuIG4odCxlKX0pKXx8anQodCxlKT9lLnByZXZlbnREZWZhdWx0KCk6TWUodCwia2V5IikpfSxDZS5rZXl1cD1mdW5jdGlvbih0LGUpezE2PT1lLmtleUNvZGUmJih0LnNoaWZ0S2V5PSExKX0sQ2Uua2V5cHJlc3M9ZnVuY3Rpb24odCxlKXtpZighKFdlKHQsZSl8fCFlLmNoYXJDb2RlfHxlLmN0cmxLZXkmJiFlLmFsdEtleXx8cy5tYWMmJmUubWV0YUtleSkpaWYodC5zb21lUHJvcCgiaGFuZGxlS2V5UHJlc3MiLChmdW5jdGlvbihuKXtyZXR1cm4gbih0LGUpfSkpKWUucHJldmVudERlZmF1bHQoKTtlbHNle3ZhciBuPXQuc3RhdGUuc2VsZWN0aW9uO2lmKCEobiBpbnN0YW5jZW9mIHIuVGV4dFNlbGVjdGlvbil8fCFuLiRmcm9tLnNhbWVQYXJlbnQobi4kdG8pKXt2YXIgbz1TdHJpbmcuZnJvbUNoYXJDb2RlKGUuY2hhckNvZGUpO3Quc29tZVByb3AoImhhbmRsZVRleHRJbnB1dCIsKGZ1bmN0aW9uKGUpe3JldHVybiBlKHQsbi4kZnJvbS5wb3Msbi4kdG8ucG9zLG8pfSkpfHx0LmRpc3BhdGNoKHQuc3RhdGUudHIuaW5zZXJ0VGV4dChvKS5zY3JvbGxJbnRvVmlldygpKSxlLnByZXZlbnREZWZhdWx0KCl9fX07dmFyIEplPXMubWFjPyJtZXRhS2V5IjoiY3RybEtleSI7U2UubW91c2Vkb3duPWZ1bmN0aW9uKHQsZSl7dC5zaGlmdEtleT1lLnNoaWZ0S2V5O3ZhciBuPUxlKHQpLHI9RGF0ZS5ub3coKSxvPSJzaW5nbGVDbGljayI7ci10Lmxhc3RDbGljay50aW1lPDUwMCYmemUoZSx0Lmxhc3RDbGljaykmJiFlW0plXSYmKCJzaW5nbGVDbGljayI9PXQubGFzdENsaWNrLnR5cGU/bz0iZG91YmxlQ2xpY2siOiJkb3VibGVDbGljayI9PXQubGFzdENsaWNrLnR5cGUmJihvPSJ0cmlwbGVDbGljayIpKSx0Lmxhc3RDbGljaz17dGltZTpyLHg6ZS5jbGllbnRYLHk6ZS5jbGllbnRZLHR5cGU6b307dmFyIGk9dC5wb3NBdENvb3JkcyhEZShlKSk7aSYmKCJzaW5nbGVDbGljayI9PW8/dC5tb3VzZURvd249bmV3IHFlKHQsaSxlLG4pOigiZG91YmxlQ2xpY2siPT1vP2plOiRlKSh0LGkucG9zLGkuaW5zaWRlLGUpP2UucHJldmVudERlZmF1bHQoKTpNZSh0LCJwb2ludGVyIikpfTt2YXIgcWU9ZnVuY3Rpb24odCxlLG4sbyl7dmFyIGksYSxjPXRoaXM7aWYodGhpcy52aWV3PXQsdGhpcy5zdGFydERvYz10LnN0YXRlLmRvYyx0aGlzLnBvcz1lLHRoaXMuZXZlbnQ9bix0aGlzLmZsdXNoZWQ9byx0aGlzLnNlbGVjdE5vZGU9bltKZV0sdGhpcy5hbGxvd0RlZmF1bHQ9bi5zaGlmdEtleSxlLmluc2lkZT4tMSlpPXQuc3RhdGUuZG9jLm5vZGVBdChlLmluc2lkZSksYT1lLmluc2lkZTtlbHNle3ZhciBsPXQuc3RhdGUuZG9jLnJlc29sdmUoZS5wb3MpO2k9bC5wYXJlbnQsYT1sLmRlcHRoP2wuYmVmb3JlKCk6MH10aGlzLm1pZ2h0RHJhZz1udWxsO3ZhciBwPW8/bnVsbDpuLnRhcmdldCx1PXA/dC5kb2NWaWV3Lm5lYXJlc3REZXNjKHAsITApOm51bGw7dGhpcy50YXJnZXQ9dT91LmRvbTpudWxsLChpLnR5cGUuc3BlYy5kcmFnZ2FibGUmJiExIT09aS50eXBlLnNwZWMuc2VsZWN0YWJsZXx8dC5zdGF0ZS5zZWxlY3Rpb24gaW5zdGFuY2VvZiByLk5vZGVTZWxlY3Rpb24mJmE9PXQuc3RhdGUuc2VsZWN0aW9uLmZyb20pJiYodGhpcy5taWdodERyYWc9e25vZGU6aSxwb3M6YSxhZGRBdHRyOnRoaXMudGFyZ2V0JiYhdGhpcy50YXJnZXQuZHJhZ2dhYmxlLHNldFVuZWRpdGFibGU6dGhpcy50YXJnZXQmJnMuZ2Vja28mJiF0aGlzLnRhcmdldC5oYXNBdHRyaWJ1dGUoImNvbnRlbnRFZGl0YWJsZSIpfSksdGhpcy50YXJnZXQmJnRoaXMubWlnaHREcmFnJiYodGhpcy5taWdodERyYWcuYWRkQXR0cnx8dGhpcy5taWdodERyYWcuc2V0VW5lZGl0YWJsZSkmJih0aGlzLnZpZXcuZG9tT2JzZXJ2ZXIuc3RvcCgpLHRoaXMubWlnaHREcmFnLmFkZEF0dHImJih0aGlzLnRhcmdldC5kcmFnZ2FibGU9ITApLHRoaXMubWlnaHREcmFnLnNldFVuZWRpdGFibGUmJnNldFRpbWVvdXQoKGZ1bmN0aW9uKCl7cmV0dXJuIGMudGFyZ2V0LnNldEF0dHJpYnV0ZSgiY29udGVudEVkaXRhYmxlIiwiZmFsc2UiKX0pLDIwKSx0aGlzLnZpZXcuZG9tT2JzZXJ2ZXIuc3RhcnQoKSksdC5yb290LmFkZEV2ZW50TGlzdGVuZXIoIm1vdXNldXAiLHRoaXMudXA9dGhpcy51cC5iaW5kKHRoaXMpKSx0LnJvb3QuYWRkRXZlbnRMaXN0ZW5lcigibW91c2Vtb3ZlIix0aGlzLm1vdmU9dGhpcy5tb3ZlLmJpbmQodGhpcykpLE1lKHQsInBvaW50ZXIiKX07ZnVuY3Rpb24gV2UodCxlKXtyZXR1cm4hIXQuY29tcG9zaW5nfHwhIShzLnNhZmFyaSYmTWF0aC5hYnMoZS50aW1lU3RhbXAtdC5jb21wb3NpdGlvbkVuZGVkQXQpPDUwMCkmJih0LmNvbXBvc2l0aW9uRW5kZWRBdD0tMmU4LCEwKX1xZS5wcm90b3R5cGUuZG9uZT1mdW5jdGlvbigpe3RoaXMudmlldy5yb290LnJlbW92ZUV2ZW50TGlzdGVuZXIoIm1vdXNldXAiLHRoaXMudXApLHRoaXMudmlldy5yb290LnJlbW92ZUV2ZW50TGlzdGVuZXIoIm1vdXNlbW92ZSIsdGhpcy5tb3ZlKSx0aGlzLm1pZ2h0RHJhZyYmdGhpcy50YXJnZXQmJih0aGlzLnZpZXcuZG9tT2JzZXJ2ZXIuc3RvcCgpLHRoaXMubWlnaHREcmFnLmFkZEF0dHImJih0aGlzLnRhcmdldC5kcmFnZ2FibGU9ITEpLHRoaXMubWlnaHREcmFnLnNldFVuZWRpdGFibGUmJnRoaXMudGFyZ2V0LnJlbW92ZUF0dHJpYnV0ZSgiY29udGVudEVkaXRhYmxlIiksdGhpcy52aWV3LmRvbU9ic2VydmVyLnN0YXJ0KCkpLHRoaXMudmlldy5tb3VzZURvd249bnVsbH0scWUucHJvdG90eXBlLnVwPWZ1bmN0aW9uKHQpe2lmKHRoaXMuZG9uZSgpLHRoaXMudmlldy5kb20uY29udGFpbnMoMz09dC50YXJnZXQubm9kZVR5cGU/dC50YXJnZXQucGFyZW50Tm9kZTp0LnRhcmdldCkpe3ZhciBlPXRoaXMucG9zO3RoaXMudmlldy5zdGF0ZS5kb2MhPXRoaXMuc3RhcnREb2MmJihlPXRoaXMudmlldy5wb3NBdENvb3JkcyhEZSh0KSkpLHRoaXMuYWxsb3dEZWZhdWx0fHwhZT9NZSh0aGlzLnZpZXcsInBvaW50ZXIiKTpCZSh0aGlzLnZpZXcsZS5wb3MsZS5pbnNpZGUsdCx0aGlzLnNlbGVjdE5vZGUpP3QucHJldmVudERlZmF1bHQoKTohdGhpcy5mbHVzaGVkJiYoIXMuY2hyb21lfHx0aGlzLnZpZXcuc3RhdGUuc2VsZWN0aW9uIGluc3RhbmNlb2Ygci5UZXh0U2VsZWN0aW9ufHxlLnBvcyE9dGhpcy52aWV3LnN0YXRlLnNlbGVjdGlvbi5mcm9tJiZlLnBvcyE9dGhpcy52aWV3LnN0YXRlLnNlbGVjdGlvbi50byk/TWUodGhpcy52aWV3LCJwb2ludGVyIik6KEllKHRoaXMudmlldyxyLlNlbGVjdGlvbi5uZWFyKHRoaXMudmlldy5zdGF0ZS5kb2MucmVzb2x2ZShlLnBvcykpLCJwb2ludGVyIiksdC5wcmV2ZW50RGVmYXVsdCgpKX19LHFlLnByb3RvdHlwZS5tb3ZlPWZ1bmN0aW9uKHQpeyF0aGlzLmFsbG93RGVmYXVsdCYmKE1hdGguYWJzKHRoaXMuZXZlbnQueC10LmNsaWVudFgpPjR8fE1hdGguYWJzKHRoaXMuZXZlbnQueS10LmNsaWVudFkpPjQpJiYodGhpcy5hbGxvd0RlZmF1bHQ9ITApLE1lKHRoaXMudmlldywicG9pbnRlciIpfSxTZS50b3VjaGRvd249ZnVuY3Rpb24odCl7TGUodCksTWUodCwicG9pbnRlciIpfSxTZS5jb250ZXh0bWVudT1mdW5jdGlvbih0KXtyZXR1cm4gTGUodCl9O3ZhciBIZT1zLmFuZHJvaWQ/NWUzOi0xO2Z1bmN0aW9uIEtlKHQsZSl7Y2xlYXJUaW1lb3V0KHQuY29tcG9zaW5nVGltZW91dCksZT4tMSYmKHQuY29tcG9zaW5nVGltZW91dD1zZXRUaW1lb3V0KChmdW5jdGlvbigpe3JldHVybiBVZSh0KX0pLGUpKX1mdW5jdGlvbiBVZSh0LGUpe3QuY29tcG9zaW5nPSExO3doaWxlKHQuY29tcG9zaXRpb25Ob2Rlcy5sZW5ndGg+MCl0LmNvbXBvc2l0aW9uTm9kZXMucG9wKCkubWFya1BhcmVudHNEaXJ0eSgpO3JldHVybiEoIWUmJiF0LmRvY1ZpZXcuZGlydHkpJiYodC51cGRhdGVTdGF0ZSh0LnN0YXRlKSwhMCl9ZnVuY3Rpb24gR2UodCxlKXt2YXIgbj10LmRvbS5vd25lckRvY3VtZW50LHI9bi5ib2R5LmFwcGVuZENoaWxkKG4uY3JlYXRlRWxlbWVudCgiZGl2IikpO3IuYXBwZW5kQ2hpbGQoZSksci5zdHlsZS5jc3NUZXh0PSJwb3NpdGlvbjogZml4ZWQ7IGxlZnQ6IC0xMDAwMHB4OyB0b3A6IDEwcHgiO3ZhciBvPWdldFNlbGVjdGlvbigpLGk9bi5jcmVhdGVSYW5nZSgpO2kuc2VsZWN0Tm9kZUNvbnRlbnRzKGUpLHQuZG9tLmJsdXIoKSxvLnJlbW92ZUFsbFJhbmdlcygpLG8uYWRkUmFuZ2UoaSksc2V0VGltZW91dCgoZnVuY3Rpb24oKXtuLmJvZHkucmVtb3ZlQ2hpbGQociksdC5mb2N1cygpfSksNTApfUNlLmNvbXBvc2l0aW9uc3RhcnQ9Q2UuY29tcG9zaXRpb251cGRhdGU9ZnVuY3Rpb24odCl7aWYoIXQuY29tcG9zaW5nKXt0LmRvbU9ic2VydmVyLmZsdXNoKCk7dmFyIGU9dC5zdGF0ZSxuPWUuc2VsZWN0aW9uLiRmcm9tO2lmKGUuc2VsZWN0aW9uLmVtcHR5JiYoZS5zdG9yZWRNYXJrc3x8IW4udGV4dE9mZnNldCYmbi5wYXJlbnRPZmZzZXQmJm4ubm9kZUJlZm9yZS5tYXJrcy5zb21lKChmdW5jdGlvbih0KXtyZXR1cm4hMT09PXQudHlwZS5zcGVjLmluY2x1c2l2ZX0pKSkpdC5tYXJrQ3Vyc29yPXQuc3RhdGUuc3RvcmVkTWFya3N8fG4ubWFya3MoKSxVZSh0LCEwKSx0Lm1hcmtDdXJzb3I9bnVsbDtlbHNlIGlmKFVlKHQpLHMuZ2Vja28mJmUuc2VsZWN0aW9uLmVtcHR5JiZuLnBhcmVudE9mZnNldCYmIW4udGV4dE9mZnNldCYmbi5ub2RlQmVmb3JlLm1hcmtzLmxlbmd0aClmb3IodmFyIHI9dC5yb290LmdldFNlbGVjdGlvbigpLG89ci5mb2N1c05vZGUsaT1yLmZvY3VzT2Zmc2V0O28mJjE9PW8ubm9kZVR5cGUmJjAhPWk7KXt2YXIgYT1pPDA/by5sYXN0Q2hpbGQ6by5jaGlsZE5vZGVzW2ktMV07aWYoMz09YS5ub2RlVHlwZSl7ci5jb2xsYXBzZShhLGEubm9kZVZhbHVlLmxlbmd0aCk7YnJlYWt9bz1hLGk9LTF9dC5jb21wb3Npbmc9ITB9S2UodCxIZSl9LENlLmNvbXBvc2l0aW9uZW5kPWZ1bmN0aW9uKHQsZSl7dC5jb21wb3NpbmcmJih0LmNvbXBvc2luZz0hMSx0LmNvbXBvc2l0aW9uRW5kZWRBdD1lLnRpbWVTdGFtcCxLZSh0LDIwKSl9O3ZhciBYZT1zLmllJiZzLmllX3ZlcnNpb248MTV8fHMuaW9zJiZzLndlYmtpdF92ZXJzaW9uPDYwNDtmdW5jdGlvbiBZZSh0KXtyZXR1cm4gMD09dC5vcGVuU3RhcnQmJjA9PXQub3BlbkVuZCYmMT09dC5jb250ZW50LmNoaWxkQ291bnQ/dC5jb250ZW50LmZpcnN0Q2hpbGQ6bnVsbH1mdW5jdGlvbiBRZSh0LGUpe3ZhciBuPXQuZG9tLm93bmVyRG9jdW1lbnQscj10LnNoaWZ0S2V5fHx0LnN0YXRlLnNlbGVjdGlvbi4kZnJvbS5wYXJlbnQudHlwZS5zcGVjLmNvZGUsbz1uLmJvZHkuYXBwZW5kQ2hpbGQobi5jcmVhdGVFbGVtZW50KHI/InRleHRhcmVhIjoiZGl2IikpO3J8fChvLmNvbnRlbnRFZGl0YWJsZT0idHJ1ZSIpLG8uc3R5bGUuY3NzVGV4dD0icG9zaXRpb246IGZpeGVkOyBsZWZ0OiAtMTAwMDBweDsgdG9wOiAxMHB4IixvLmZvY3VzKCksc2V0VGltZW91dCgoZnVuY3Rpb24oKXt0LmZvY3VzKCksbi5ib2R5LnJlbW92ZUNoaWxkKG8pLHI/WmUodCxvLnZhbHVlLG51bGwsZSk6WmUodCxvLnRleHRDb250ZW50LG8uaW5uZXJIVE1MLGUpfSksNTApfWZ1bmN0aW9uIFplKHQsZSxuLHIpe3ZhciBpPWFlKHQsZSxuLHQuc2hpZnRLZXksdC5zdGF0ZS5zZWxlY3Rpb24uJGZyb20pO2lmKHQuc29tZVByb3AoImhhbmRsZVBhc3RlIiwoZnVuY3Rpb24oZSl7cmV0dXJuIGUodCxyLGl8fG8uU2xpY2UuZW1wdHkpfSkpfHwhaSlyZXR1cm4hMDt2YXIgcz1ZZShpKSxhPXM/dC5zdGF0ZS50ci5yZXBsYWNlU2VsZWN0aW9uV2l0aChzLHQuc2hpZnRLZXkpOnQuc3RhdGUudHIucmVwbGFjZVNlbGVjdGlvbihpKTtyZXR1cm4gdC5kaXNwYXRjaChhLnNjcm9sbEludG9WaWV3KCkuc2V0TWV0YSgicGFzdGUiLCEwKS5zZXRNZXRhKCJ1aUV2ZW50IiwicGFzdGUiKSksITB9U2UuY29weT1DZS5jdXQ9ZnVuY3Rpb24odCxlKXt2YXIgbj10LnN0YXRlLnNlbGVjdGlvbixyPSJjdXQiPT1lLnR5cGU7aWYoIW4uZW1wdHkpe3ZhciBvPVhlP251bGw6ZS5jbGlwYm9hcmREYXRhLGk9bi5jb250ZW50KCkscz1zZSh0LGkpLGE9cy5kb20sYz1zLnRleHQ7bz8oZS5wcmV2ZW50RGVmYXVsdCgpLG8uY2xlYXJEYXRhKCksby5zZXREYXRhKCJ0ZXh0L2h0bWwiLGEuaW5uZXJIVE1MKSxvLnNldERhdGEoInRleHQvcGxhaW4iLGMpKTpHZSh0LGEpLHImJnQuZGlzcGF0Y2godC5zdGF0ZS50ci5kZWxldGVTZWxlY3Rpb24oKS5zY3JvbGxJbnRvVmlldygpLnNldE1ldGEoInVpRXZlbnQiLCJjdXQiKSl9fSxDZS5wYXN0ZT1mdW5jdGlvbih0LGUpe3ZhciBuPVhlP251bGw6ZS5jbGlwYm9hcmREYXRhO24mJihaZSh0LG4uZ2V0RGF0YSgidGV4dC9wbGFpbiIpLG4uZ2V0RGF0YSgidGV4dC9odG1sIiksZSl8fG4uZmlsZXMubGVuZ3RoPjApP2UucHJldmVudERlZmF1bHQoKTpRZSh0LGUpfTt2YXIgdG49ZnVuY3Rpb24odCxlKXt0aGlzLnNsaWNlPXQsdGhpcy5tb3ZlPWV9LGVuPXMubWFjPyJhbHRLZXkiOiJjdHJsS2V5Ijtmb3IodmFyIG5uIGluIFNlLmRyYWdzdGFydD1mdW5jdGlvbih0LGUpe3ZhciBuPXQubW91c2VEb3duO2lmKG4mJm4uZG9uZSgpLGUuZGF0YVRyYW5zZmVyKXt2YXIgbz10LnN0YXRlLnNlbGVjdGlvbixpPW8uZW1wdHk/bnVsbDp0LnBvc0F0Q29vcmRzKERlKGUpKTtpZihpJiZpLnBvcz49by5mcm9tJiZpLnBvczw9KG8gaW5zdGFuY2VvZiByLk5vZGVTZWxlY3Rpb24/by50by0xOm8udG8pKTtlbHNlIGlmKG4mJm4ubWlnaHREcmFnKXQuZGlzcGF0Y2godC5zdGF0ZS50ci5zZXRTZWxlY3Rpb24oci5Ob2RlU2VsZWN0aW9uLmNyZWF0ZSh0LnN0YXRlLmRvYyxuLm1pZ2h0RHJhZy5wb3MpKSk7ZWxzZSBpZihlLnRhcmdldCYmMT09ZS50YXJnZXQubm9kZVR5cGUpe3ZhciBzPXQuZG9jVmlldy5uZWFyZXN0RGVzYyhlLnRhcmdldCwhMCk7aWYoIXN8fCFzLm5vZGUudHlwZS5zcGVjLmRyYWdnYWJsZXx8cz09dC5kb2NWaWV3KXJldHVybjt0LmRpc3BhdGNoKHQuc3RhdGUudHIuc2V0U2VsZWN0aW9uKHIuTm9kZVNlbGVjdGlvbi5jcmVhdGUodC5zdGF0ZS5kb2Mscy5wb3NCZWZvcmUpKSl9dmFyIGE9dC5zdGF0ZS5zZWxlY3Rpb24uY29udGVudCgpLGM9c2UodCxhKSxsPWMuZG9tLHA9Yy50ZXh0O2UuZGF0YVRyYW5zZmVyLmNsZWFyRGF0YSgpLGUuZGF0YVRyYW5zZmVyLnNldERhdGEoWGU/IlRleHQiOiJ0ZXh0L2h0bWwiLGwuaW5uZXJIVE1MKSxYZXx8ZS5kYXRhVHJhbnNmZXIuc2V0RGF0YSgidGV4dC9wbGFpbiIscCksdC5kcmFnZ2luZz1uZXcgdG4oYSwhZVtlbl0pfX0sU2UuZHJhZ2VuZD1mdW5jdGlvbih0KXt3aW5kb3cuc2V0VGltZW91dCgoZnVuY3Rpb24oKXtyZXR1cm4gdC5kcmFnZ2luZz1udWxsfSksNTApfSxDZS5kcmFnb3Zlcj1DZS5kcmFnZW50ZXI9ZnVuY3Rpb24odCxlKXtyZXR1cm4gZS5wcmV2ZW50RGVmYXVsdCgpfSxDZS5kcm9wPWZ1bmN0aW9uKHQsZSl7dmFyIG49dC5kcmFnZ2luZztpZih0LmRyYWdnaW5nPW51bGwsZS5kYXRhVHJhbnNmZXIpe3ZhciBvPXQucG9zQXRDb29yZHMoRGUoZSkpO2lmKG8pe3ZhciBzPXQuc3RhdGUuZG9jLnJlc29sdmUoby5wb3MpO2lmKHMpe3ZhciBhPW4mJm4uc2xpY2V8fGFlKHQsZS5kYXRhVHJhbnNmZXIuZ2V0RGF0YShYZT8iVGV4dCI6InRleHQvcGxhaW4iKSxYZT9udWxsOmUuZGF0YVRyYW5zZmVyLmdldERhdGEoInRleHQvaHRtbCIpLCExLHMpO2lmKGEmJihlLnByZXZlbnREZWZhdWx0KCksIXQuc29tZVByb3AoImhhbmRsZURyb3AiLChmdW5jdGlvbihyKXtyZXR1cm4gcih0LGUsYSxuJiZuLm1vdmUpfSkpKSl7dmFyIGM9YT9pLmRyb3BQb2ludCh0LnN0YXRlLmRvYyxzLnBvcyxhKTpzLnBvcztudWxsPT1jJiYoYz1zLnBvcyk7dmFyIGw9dC5zdGF0ZS50cjtuJiZuLm1vdmUmJmwuZGVsZXRlU2VsZWN0aW9uKCk7dmFyIHA9bC5tYXBwaW5nLm1hcChjKSx1PTA9PWEub3BlblN0YXJ0JiYwPT1hLm9wZW5FbmQmJjE9PWEuY29udGVudC5jaGlsZENvdW50LGg9bC5kb2M7aWYodT9sLnJlcGxhY2VSYW5nZVdpdGgocCxwLGEuY29udGVudC5maXJzdENoaWxkKTpsLnJlcGxhY2VSYW5nZShwLHAsYSksIWwuZG9jLmVxKGgpKXt2YXIgZj1sLmRvYy5yZXNvbHZlKHApO3UmJnIuTm9kZVNlbGVjdGlvbi5pc1NlbGVjdGFibGUoYS5jb250ZW50LmZpcnN0Q2hpbGQpJiZmLm5vZGVBZnRlciYmZi5ub2RlQWZ0ZXIuc2FtZU1hcmt1cChhLmNvbnRlbnQuZmlyc3RDaGlsZCk/bC5zZXRTZWxlY3Rpb24obmV3IHIuTm9kZVNlbGVjdGlvbihmKSk6bC5zZXRTZWxlY3Rpb24oVXQodCxmLGwuZG9jLnJlc29sdmUobC5tYXBwaW5nLm1hcChjKSkpKSx0LmZvY3VzKCksdC5kaXNwYXRjaChsLnNldE1ldGEoInVpRXZlbnQiLCJkcm9wIikpfX19fX19LFNlLmZvY3VzPWZ1bmN0aW9uKHQpe3QuZm9jdXNlZHx8KHQuZG9tT2JzZXJ2ZXIuc3RvcCgpLHQuZG9tLmNsYXNzTGlzdC5hZGQoIlByb3NlTWlycm9yLWZvY3VzZWQiKSx0LmRvbU9ic2VydmVyLnN0YXJ0KCksdC5mb2N1c2VkPSEwKX0sU2UuYmx1cj1mdW5jdGlvbih0KXt0LmZvY3VzZWQmJih0LmRvbU9ic2VydmVyLnN0b3AoKSx0LmRvbS5jbGFzc0xpc3QucmVtb3ZlKCJQcm9zZU1pcnJvci1mb2N1c2VkIiksdC5kb21PYnNlcnZlci5zdGFydCgpLHQuZm9jdXNlZD0hMSl9LFNlLmJlZm9yZWlucHV0PWZ1bmN0aW9uKHQsZSl7aWYocy5jaHJvbWUmJnMuYW5kcm9pZCYmImRlbGV0ZUNvbnRlbnRCYWNrd2FyZCI9PWUuaW5wdXRUeXBlKXt2YXIgbj10LmRvbUNoYW5nZUNvdW50O3NldFRpbWVvdXQoKGZ1bmN0aW9uKCl7aWYodC5kb21DaGFuZ2VDb3VudD09biYmKHQuZG9tLmJsdXIoKSx0LmZvY3VzKCksIXQuc29tZVByb3AoImhhbmRsZUtleURvd24iLChmdW5jdGlvbihlKXtyZXR1cm4gZSh0LGIoOCwiQmFja3NwYWNlIikpfSkpKSl7dmFyIGU9dC5zdGF0ZS5zZWxlY3Rpb24scj1lLiRjdXJzb3I7ciYmci5wb3M+MCYmdC5kaXNwYXRjaCh0LnN0YXRlLnRyLmRlbGV0ZShyLnBvcy0xLHIucG9zKS5zY3JvbGxJbnRvVmlldygpKX19KSw1MCl9fSxDZSlTZVtubl09Q2Vbbm5dO2Z1bmN0aW9uIHJuKHQsZSl7aWYodD09ZSlyZXR1cm4hMDtmb3IodmFyIG4gaW4gdClpZih0W25dIT09ZVtuXSlyZXR1cm4hMTtmb3IodmFyIHIgaW4gZSlpZighKHIgaW4gdCkpcmV0dXJuITE7cmV0dXJuITB9dmFyIG9uPWZ1bmN0aW9uKHQsZSl7dGhpcy5zcGVjPWV8fHVuLHRoaXMuc2lkZT10aGlzLnNwZWMuc2lkZXx8MCx0aGlzLnRvRE9NPXR9O29uLnByb3RvdHlwZS5tYXA9ZnVuY3Rpb24odCxlLG4scil7dmFyIG89dC5tYXBSZXN1bHQoZS5mcm9tK3IsdGhpcy5zaWRlPDA/LTE6MSksaT1vLnBvcyxzPW8uZGVsZXRlZDtyZXR1cm4gcz9udWxsOm5ldyBjbihpLW4saS1uLHRoaXMpfSxvbi5wcm90b3R5cGUudmFsaWQ9ZnVuY3Rpb24oKXtyZXR1cm4hMH0sb24ucHJvdG90eXBlLmVxPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzPT10fHx0IGluc3RhbmNlb2Ygb24mJih0aGlzLnNwZWMua2V5JiZ0aGlzLnNwZWMua2V5PT10LnNwZWMua2V5fHx0aGlzLnRvRE9NPT10LnRvRE9NJiZybih0aGlzLnNwZWMsdC5zcGVjKSl9O3ZhciBzbj1mdW5jdGlvbih0LGUpe3RoaXMuc3BlYz1lfHx1bix0aGlzLmF0dHJzPXR9O3NuLnByb3RvdHlwZS5tYXA9ZnVuY3Rpb24odCxlLG4scil7dmFyIG89dC5tYXAoZS5mcm9tK3IsdGhpcy5zcGVjLmluY2x1c2l2ZVN0YXJ0Py0xOjEpLW4saT10Lm1hcChlLnRvK3IsdGhpcy5zcGVjLmluY2x1c2l2ZUVuZD8xOi0xKS1uO3JldHVybiBvPj1pP251bGw6bmV3IGNuKG8saSx0aGlzKX0sc24ucHJvdG90eXBlLnZhbGlkPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIGUuZnJvbTxlLnRvfSxzbi5wcm90b3R5cGUuZXE9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXM9PXR8fHQgaW5zdGFuY2VvZiBzbiYmcm4odGhpcy5hdHRycyx0LmF0dHJzKSYmcm4odGhpcy5zcGVjLHQuc3BlYyl9LHNuLmlzPWZ1bmN0aW9uKHQpe3JldHVybiB0LnR5cGUgaW5zdGFuY2VvZiBzbn07dmFyIGFuPWZ1bmN0aW9uKHQsZSl7dGhpcy5zcGVjPWV8fHVuLHRoaXMuYXR0cnM9dH07YW4ucHJvdG90eXBlLm1hcD1mdW5jdGlvbih0LGUsbixyKXt2YXIgbz10Lm1hcFJlc3VsdChlLmZyb20rciwxKTtpZihvLmRlbGV0ZWQpcmV0dXJuIG51bGw7dmFyIGk9dC5tYXBSZXN1bHQoZS50bytyLC0xKTtyZXR1cm4gaS5kZWxldGVkfHxpLnBvczw9by5wb3M/bnVsbDpuZXcgY24oby5wb3MtbixpLnBvcy1uLHRoaXMpfSxhbi5wcm90b3R5cGUudmFsaWQ9ZnVuY3Rpb24odCxlKXt2YXIgbj10LmNvbnRlbnQuZmluZEluZGV4KGUuZnJvbSkscj1uLmluZGV4LG89bi5vZmZzZXQ7cmV0dXJuIG89PWUuZnJvbSYmbyt0LmNoaWxkKHIpLm5vZGVTaXplPT1lLnRvfSxhbi5wcm90b3R5cGUuZXE9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXM9PXR8fHQgaW5zdGFuY2VvZiBhbiYmcm4odGhpcy5hdHRycyx0LmF0dHJzKSYmcm4odGhpcy5zcGVjLHQuc3BlYyl9O3ZhciBjbj1mdW5jdGlvbih0LGUsbil7dGhpcy5mcm9tPXQsdGhpcy50bz1lLHRoaXMudHlwZT1ufSxsbj17c3BlYzp7fX07Y24ucHJvdG90eXBlLmNvcHk9ZnVuY3Rpb24odCxlKXtyZXR1cm4gbmV3IGNuKHQsZSx0aGlzLnR5cGUpfSxjbi5wcm90b3R5cGUuZXE9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMudHlwZS5lcSh0LnR5cGUpJiZ0aGlzLmZyb209PXQuZnJvbSYmdGhpcy50bz09dC50b30sY24ucHJvdG90eXBlLm1hcD1mdW5jdGlvbih0LGUsbil7cmV0dXJuIHRoaXMudHlwZS5tYXAodCx0aGlzLGUsbil9LGNuLndpZGdldD1mdW5jdGlvbih0LGUsbil7cmV0dXJuIG5ldyBjbih0LHQsbmV3IG9uKGUsbikpfSxjbi5pbmxpbmU9ZnVuY3Rpb24odCxlLG4scil7cmV0dXJuIG5ldyBjbih0LGUsbmV3IHNuKG4scikpfSxjbi5ub2RlPWZ1bmN0aW9uKHQsZSxuLHIpe3JldHVybiBuZXcgY24odCxlLG5ldyBhbihuLHIpKX0sbG4uc3BlYy5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy50eXBlLnNwZWN9LE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKGNuLnByb3RvdHlwZSxsbik7dmFyIHBuPVtdLHVuPXt9LGhuPWZ1bmN0aW9uKHQsZSl7dGhpcy5sb2NhbD10JiZ0Lmxlbmd0aD90OnBuLHRoaXMuY2hpbGRyZW49ZSYmZS5sZW5ndGg/ZTpwbn07aG4uY3JlYXRlPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIGUubGVuZ3RoP3huKGUsdCwwLHVuKTpmbn0saG4ucHJvdG90eXBlLmZpbmQ9ZnVuY3Rpb24odCxlLG4pe3ZhciByPVtdO3JldHVybiB0aGlzLmZpbmRJbm5lcihudWxsPT10PzA6dCxudWxsPT1lPzFlOTplLHIsMCxuKSxyfSxobi5wcm90b3R5cGUuZmluZElubmVyPWZ1bmN0aW9uKHQsZSxuLHIsbyl7Zm9yKHZhciBpPXRoaXMscz0wO3M8dGhpcy5sb2NhbC5sZW5ndGg7cysrKXt2YXIgYT1pLmxvY2FsW3NdO2EuZnJvbTw9ZSYmYS50bz49dCYmKCFvfHxvKGEuc3BlYykpJiZuLnB1c2goYS5jb3B5KGEuZnJvbStyLGEudG8rcikpfWZvcih2YXIgYz0wO2M8dGhpcy5jaGlsZHJlbi5sZW5ndGg7Yys9MylpZihpLmNoaWxkcmVuW2NdPGUmJmkuY2hpbGRyZW5bYysxXT50KXt2YXIgbD1pLmNoaWxkcmVuW2NdKzE7aS5jaGlsZHJlbltjKzJdLmZpbmRJbm5lcih0LWwsZS1sLG4scitsLG8pfX0saG4ucHJvdG90eXBlLm1hcD1mdW5jdGlvbih0LGUsbil7cmV0dXJuIHRoaXM9PWZufHwwPT10Lm1hcHMubGVuZ3RoP3RoaXM6dGhpcy5tYXBJbm5lcih0LGUsMCwwLG58fHVuKX0saG4ucHJvdG90eXBlLm1hcElubmVyPWZ1bmN0aW9uKHQsZSxuLHIsbyl7Zm9yKHZhciBpLHM9dGhpcyxhPTA7YTx0aGlzLmxvY2FsLmxlbmd0aDthKyspe3ZhciBjPXMubG9jYWxbYV0ubWFwKHQsbixyKTtjJiZjLnR5cGUudmFsaWQoZSxjKT8oaXx8KGk9W10pKS5wdXNoKGMpOm8ub25SZW1vdmUmJm8ub25SZW1vdmUocy5sb2NhbFthXS5zcGVjKX1yZXR1cm4gdGhpcy5jaGlsZHJlbi5sZW5ndGg/dm4odGhpcy5jaGlsZHJlbixpLHQsZSxuLHIsbyk6aT9uZXcgaG4oaS5zb3J0KGJuKSk6Zm59LGhuLnByb3RvdHlwZS5hZGQ9ZnVuY3Rpb24odCxlKXtyZXR1cm4gZS5sZW5ndGg/dGhpcz09Zm4/aG4uY3JlYXRlKHQsZSk6dGhpcy5hZGRJbm5lcih0LGUsMCk6dGhpc30saG4ucHJvdG90eXBlLmFkZElubmVyPWZ1bmN0aW9uKHQsZSxuKXt2YXIgcixvPXRoaXMsaT0wO3QuZm9yRWFjaCgoZnVuY3Rpb24odCxzKXt2YXIgYSxjPXMrbjtpZihhPWduKGUsdCxjKSl7cnx8KHI9by5jaGlsZHJlbi5zbGljZSgpKTt3aGlsZShpPHIubGVuZ3RoJiZyW2ldPHMpaSs9MztyW2ldPT1zP3JbaSsyXT1yW2krMl0uYWRkSW5uZXIodCxhLGMrMSk6ci5zcGxpY2UoaSwwLHMscyt0Lm5vZGVTaXplLHhuKGEsdCxjKzEsdW4pKSxpKz0zfX0pKTt2YXIgcz1tbihpP3duKGUpOmUsLW4pO3JldHVybiBuZXcgaG4ocy5sZW5ndGg/dGhpcy5sb2NhbC5jb25jYXQocykuc29ydChibik6dGhpcy5sb2NhbCxyfHx0aGlzLmNoaWxkcmVuKX0saG4ucHJvdG90eXBlLnJlbW92ZT1mdW5jdGlvbih0KXtyZXR1cm4gMD09dC5sZW5ndGh8fHRoaXM9PWZuP3RoaXM6dGhpcy5yZW1vdmVJbm5lcih0LDApfSxobi5wcm90b3R5cGUucmVtb3ZlSW5uZXI9ZnVuY3Rpb24odCxlKXtmb3IodmFyIG49dGhpcyxyPXRoaXMuY2hpbGRyZW4sbz10aGlzLmxvY2FsLGk9MDtpPHIubGVuZ3RoO2krPTMpe2Zvcih2YXIgcz12b2lkIDAsYT1yW2ldK2UsYz1yW2krMV0rZSxsPTAscD12b2lkIDA7bDx0Lmxlbmd0aDtsKyspKHA9dFtsXSkmJnAuZnJvbT5hJiZwLnRvPGMmJih0W2xdPW51bGwsKHN8fChzPVtdKSkucHVzaChwKSk7aWYocyl7cj09bi5jaGlsZHJlbiYmKHI9bi5jaGlsZHJlbi5zbGljZSgpKTt2YXIgdT1yW2krMl0ucmVtb3ZlSW5uZXIocyxhKzEpO3UhPWZuP3JbaSsyXT11OihyLnNwbGljZShpLDMpLGktPTMpfX1pZihvLmxlbmd0aClmb3IodmFyIGg9MCxmPXZvaWQgMDtoPHQubGVuZ3RoO2grKylpZihmPXRbaF0pZm9yKHZhciBkPTA7ZDxvLmxlbmd0aDtkKyspb1tkXS50eXBlLmVxKGYudHlwZSkmJihvPT1uLmxvY2FsJiYobz1uLmxvY2FsLnNsaWNlKCkpLG8uc3BsaWNlKGQtLSwxKSk7cmV0dXJuIHI9PXRoaXMuY2hpbGRyZW4mJm89PXRoaXMubG9jYWw/dGhpczpvLmxlbmd0aHx8ci5sZW5ndGg/bmV3IGhuKG8scik6Zm59LGhuLnByb3RvdHlwZS5mb3JDaGlsZD1mdW5jdGlvbih0LGUpe3ZhciBuLHIsbz10aGlzO2lmKHRoaXM9PWZuKXJldHVybiB0aGlzO2lmKGUuaXNMZWFmKXJldHVybiBobi5lbXB0eTtmb3IodmFyIGk9MDtpPHRoaXMuY2hpbGRyZW4ubGVuZ3RoO2krPTMpaWYoby5jaGlsZHJlbltpXT49dCl7by5jaGlsZHJlbltpXT09dCYmKG49by5jaGlsZHJlbltpKzJdKTticmVha31mb3IodmFyIHM9dCsxLGE9cytlLmNvbnRlbnQuc2l6ZSxjPTA7Yzx0aGlzLmxvY2FsLmxlbmd0aDtjKyspe3ZhciBsPW8ubG9jYWxbY107aWYobC5mcm9tPGEmJmwudG8+cyYmbC50eXBlIGluc3RhbmNlb2Ygc24pe3ZhciBwPU1hdGgubWF4KHMsbC5mcm9tKS1zLHU9TWF0aC5taW4oYSxsLnRvKS1zO3A8dSYmKHJ8fChyPVtdKSkucHVzaChsLmNvcHkocCx1KSl9fWlmKHIpe3ZhciBoPW5ldyBobihyLnNvcnQoYm4pKTtyZXR1cm4gbj9uZXcgZG4oW2gsbl0pOmh9cmV0dXJuIG58fGZufSxobi5wcm90b3R5cGUuZXE9ZnVuY3Rpb24odCl7dmFyIGU9dGhpcztpZih0aGlzPT10KXJldHVybiEwO2lmKCEodCBpbnN0YW5jZW9mIGhuKXx8dGhpcy5sb2NhbC5sZW5ndGghPXQubG9jYWwubGVuZ3RofHx0aGlzLmNoaWxkcmVuLmxlbmd0aCE9dC5jaGlsZHJlbi5sZW5ndGgpcmV0dXJuITE7Zm9yKHZhciBuPTA7bjx0aGlzLmxvY2FsLmxlbmd0aDtuKyspaWYoIWUubG9jYWxbbl0uZXEodC5sb2NhbFtuXSkpcmV0dXJuITE7Zm9yKHZhciByPTA7cjx0aGlzLmNoaWxkcmVuLmxlbmd0aDtyKz0zKWlmKGUuY2hpbGRyZW5bcl0hPXQuY2hpbGRyZW5bcl18fGUuY2hpbGRyZW5bcisxXSE9dC5jaGlsZHJlbltyKzFdfHwhZS5jaGlsZHJlbltyKzJdLmVxKHQuY2hpbGRyZW5bcisyXSkpcmV0dXJuITE7cmV0dXJuITB9LGhuLnByb3RvdHlwZS5sb2NhbHM9ZnVuY3Rpb24odCl7cmV0dXJuIGtuKHRoaXMubG9jYWxzSW5uZXIodCkpfSxobi5wcm90b3R5cGUubG9jYWxzSW5uZXI9ZnVuY3Rpb24odCl7dmFyIGU9dGhpcztpZih0aGlzPT1mbilyZXR1cm4gcG47aWYodC5pbmxpbmVDb250ZW50fHwhdGhpcy5sb2NhbC5zb21lKHNuLmlzKSlyZXR1cm4gdGhpcy5sb2NhbDtmb3IodmFyIG49W10scj0wO3I8dGhpcy5sb2NhbC5sZW5ndGg7cisrKWUubG9jYWxbcl0udHlwZSBpbnN0YW5jZW9mIHNufHxuLnB1c2goZS5sb2NhbFtyXSk7cmV0dXJuIG59O3ZhciBmbj1uZXcgaG47aG4uZW1wdHk9Zm4saG4ucmVtb3ZlT3ZlcmxhcD1rbjt2YXIgZG49ZnVuY3Rpb24odCl7dGhpcy5tZW1iZXJzPXR9O2Z1bmN0aW9uIHZuKHQsZSxuLHIsbyxpLHMpe2Zvcih2YXIgYT10LnNsaWNlKCksYz1mdW5jdGlvbih0LGUsbixyKXtmb3IodmFyIHM9MDtzPGEubGVuZ3RoO3MrPTMpe3ZhciBjPWFbcysxXSxsPXZvaWQgMDstMT09Y3x8dD5jK2l8fChlPj1hW3NdK2k/YVtzKzFdPS0xOihsPXItbi0oZS10KSsoaS1vKSkmJihhW3NdKz1sLGFbcysxXSs9bCkpfX0sbD0wO2w8bi5tYXBzLmxlbmd0aDtsKyspbi5tYXBzW2xdLmZvckVhY2goYyk7Zm9yKHZhciBwPSExLHU9MDt1PGEubGVuZ3RoO3UrPTMpaWYoLTE9PWFbdSsxXSl7dmFyIGg9bi5tYXAoYVt1XStpKSxmPWgtbztpZihmPDB8fGY+PXIuY29udGVudC5zaXplKXtwPSEwO2NvbnRpbnVlfXZhciBkPW4ubWFwKHRbdSsxXStpLC0xKSx2PWQtbyxtPXIuY29udGVudC5maW5kSW5kZXgoZikseT1tLmluZGV4LGc9bS5vZmZzZXQsdz1yLm1heWJlQ2hpbGQoeSk7aWYodyYmZz09ZiYmZyt3Lm5vZGVTaXplPT12KXt2YXIgeD1hW3UrMl0ubWFwSW5uZXIobix3LGgrMSxhW3VdK2krMSxzKTt4IT1mbj8oYVt1XT1mLGFbdSsxXT12LGFbdSsyXT14KTooYVt1KzFdPS0yLHA9ITApfWVsc2UgcD0hMH1pZihwKXt2YXIgYj15bihhLHQsZXx8W10sbixvLGkscyksaz14bihiLHIsMCxzKTtlPWsubG9jYWw7Zm9yKHZhciBTPTA7UzxhLmxlbmd0aDtTKz0zKWFbUysxXTwwJiYoYS5zcGxpY2UoUywzKSxTLT0zKTtmb3IodmFyIEM9MCxPPTA7QzxrLmNoaWxkcmVuLmxlbmd0aDtDKz0zKXt2YXIgTT1rLmNoaWxkcmVuW0NdO3doaWxlKE88YS5sZW5ndGgmJmFbT108TSlPKz0zO2Euc3BsaWNlKE8sMCxrLmNoaWxkcmVuW0NdLGsuY2hpbGRyZW5bQysxXSxrLmNoaWxkcmVuW0MrMl0pfX1yZXR1cm4gbmV3IGhuKGUmJmUuc29ydChibiksYSl9ZnVuY3Rpb24gbW4odCxlKXtpZighZXx8IXQubGVuZ3RoKXJldHVybiB0O2Zvcih2YXIgbj1bXSxyPTA7cjx0Lmxlbmd0aDtyKyspe3ZhciBvPXRbcl07bi5wdXNoKG5ldyBjbihvLmZyb20rZSxvLnRvK2Usby50eXBlKSl9cmV0dXJuIG59ZnVuY3Rpb24geW4odCxlLG4scixvLGkscyl7ZnVuY3Rpb24gYSh0LGUpe2Zvcih2YXIgaT0wO2k8dC5sb2NhbC5sZW5ndGg7aSsrKXt2YXIgYz10LmxvY2FsW2ldLm1hcChyLG8sZSk7Yz9uLnB1c2goYyk6cy5vblJlbW92ZSYmcy5vblJlbW92ZSh0LmxvY2FsW2ldLnNwZWMpfWZvcih2YXIgbD0wO2w8dC5jaGlsZHJlbi5sZW5ndGg7bCs9MylhKHQuY2hpbGRyZW5bbCsyXSx0LmNoaWxkcmVuW2xdK2UrMSl9Zm9yKHZhciBjPTA7Yzx0Lmxlbmd0aDtjKz0zKS0xPT10W2MrMV0mJmEodFtjKzJdLGVbY10raSsxKTtyZXR1cm4gbn1mdW5jdGlvbiBnbih0LGUsbil7aWYoZS5pc0xlYWYpcmV0dXJuIG51bGw7Zm9yKHZhciByPW4rZS5ub2RlU2l6ZSxvPW51bGwsaT0wLHM9dm9pZCAwO2k8dC5sZW5ndGg7aSsrKShzPXRbaV0pJiZzLmZyb20+biYmcy50bzxyJiYoKG98fChvPVtdKSkucHVzaChzKSx0W2ldPW51bGwpO3JldHVybiBvfWZ1bmN0aW9uIHduKHQpe2Zvcih2YXIgZT1bXSxuPTA7bjx0Lmxlbmd0aDtuKyspbnVsbCE9dFtuXSYmZS5wdXNoKHRbbl0pO3JldHVybiBlfWZ1bmN0aW9uIHhuKHQsZSxuLHIpe3ZhciBvPVtdLGk9ITE7ZS5mb3JFYWNoKChmdW5jdGlvbihlLHMpe3ZhciBhPWduKHQsZSxzK24pO2lmKGEpe2k9ITA7dmFyIGM9eG4oYSxlLG4rcysxLHIpO2MhPWZuJiZvLnB1c2gocyxzK2Uubm9kZVNpemUsYyl9fSkpO2Zvcih2YXIgcz1tbihpP3duKHQpOnQsLW4pLnNvcnQoYm4pLGE9MDthPHMubGVuZ3RoO2ErKylzW2FdLnR5cGUudmFsaWQoZSxzW2FdKXx8KHIub25SZW1vdmUmJnIub25SZW1vdmUoc1thXS5zcGVjKSxzLnNwbGljZShhLS0sMSkpO3JldHVybiBzLmxlbmd0aHx8by5sZW5ndGg/bmV3IGhuKHMsbyk6Zm59ZnVuY3Rpb24gYm4odCxlKXtyZXR1cm4gdC5mcm9tLWUuZnJvbXx8dC50by1lLnRvfWZ1bmN0aW9uIGtuKHQpe2Zvcih2YXIgZT10LG49MDtuPGUubGVuZ3RoLTE7bisrKXt2YXIgcj1lW25dO2lmKHIuZnJvbSE9ci50bylmb3IodmFyIG89bisxO288ZS5sZW5ndGg7bysrKXt2YXIgaT1lW29dO2lmKGkuZnJvbSE9ci5mcm9tKXtpLmZyb208ci50byYmKGU9PXQmJihlPXQuc2xpY2UoKSksZVtuXT1yLmNvcHkoci5mcm9tLGkuZnJvbSksU24oZSxvLHIuY29weShpLmZyb20sci50bykpKTticmVha31pLnRvIT1yLnRvJiYoZT09dCYmKGU9dC5zbGljZSgpKSxlW29dPWkuY29weShpLmZyb20sci50byksU24oZSxvKzEsaS5jb3B5KHIudG8saS50bykpKX19cmV0dXJuIGV9ZnVuY3Rpb24gU24odCxlLG4pe3doaWxlKGU8dC5sZW5ndGgmJmJuKG4sdFtlXSk+MCllKys7dC5zcGxpY2UoZSwwLG4pfWZ1bmN0aW9uIENuKHQpe3ZhciBlPVtdO3JldHVybiB0LnNvbWVQcm9wKCJkZWNvcmF0aW9ucyIsKGZ1bmN0aW9uKG4pe3ZhciByPW4odC5zdGF0ZSk7ciYmciE9Zm4mJmUucHVzaChyKX0pKSx0LmN1cnNvcldyYXBwZXImJmUucHVzaChobi5jcmVhdGUodC5zdGF0ZS5kb2MsW3QuY3Vyc29yV3JhcHBlci5kZWNvXSkpLGRuLmZyb20oZSl9ZG4ucHJvdG90eXBlLmZvckNoaWxkPWZ1bmN0aW9uKHQsZSl7dmFyIG49dGhpcztpZihlLmlzTGVhZilyZXR1cm4gaG4uZW1wdHk7Zm9yKHZhciByPVtdLG89MDtvPHRoaXMubWVtYmVycy5sZW5ndGg7bysrKXt2YXIgaT1uLm1lbWJlcnNbb10uZm9yQ2hpbGQodCxlKTtpIT1mbiYmKGkgaW5zdGFuY2VvZiBkbj9yPXIuY29uY2F0KGkubWVtYmVycyk6ci5wdXNoKGkpKX1yZXR1cm4gZG4uZnJvbShyKX0sZG4ucHJvdG90eXBlLmVxPWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXM7aWYoISh0IGluc3RhbmNlb2YgZG4pfHx0Lm1lbWJlcnMubGVuZ3RoIT10aGlzLm1lbWJlcnMubGVuZ3RoKXJldHVybiExO2Zvcih2YXIgbj0wO248dGhpcy5tZW1iZXJzLmxlbmd0aDtuKyspaWYoIWUubWVtYmVyc1tuXS5lcSh0Lm1lbWJlcnNbbl0pKXJldHVybiExO3JldHVybiEwfSxkbi5wcm90b3R5cGUubG9jYWxzPWZ1bmN0aW9uKHQpe2Zvcih2YXIgZSxuPXRoaXMscj0hMCxvPTA7bzx0aGlzLm1lbWJlcnMubGVuZ3RoO28rKyl7dmFyIGk9bi5tZW1iZXJzW29dLmxvY2Fsc0lubmVyKHQpO2lmKGkubGVuZ3RoKWlmKGUpe3ImJihlPWUuc2xpY2UoKSxyPSExKTtmb3IodmFyIHM9MDtzPGkubGVuZ3RoO3MrKyllLnB1c2goaVtzXSl9ZWxzZSBlPWl9cmV0dXJuIGU/a24ocj9lOmUuc29ydChibikpOnBufSxkbi5mcm9tPWZ1bmN0aW9uKHQpe3N3aXRjaCh0Lmxlbmd0aCl7Y2FzZSAwOnJldHVybiBmbjtjYXNlIDE6cmV0dXJuIHRbMF07ZGVmYXVsdDpyZXR1cm4gbmV3IGRuKHQpfX07dmFyIE9uPWZ1bmN0aW9uKHQsZSl7dGhpcy5fcHJvcHM9ZSx0aGlzLnN0YXRlPWUuc3RhdGUsdGhpcy5kaXNwYXRjaD10aGlzLmRpc3BhdGNoLmJpbmQodGhpcyksdGhpcy5fcm9vdD1udWxsLHRoaXMuZm9jdXNlZD0hMSx0aGlzLmRvbT10JiZ0Lm1vdW50fHxkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKSx0JiYodC5hcHBlbmRDaGlsZD90LmFwcGVuZENoaWxkKHRoaXMuZG9tKTp0LmFwcGx5P3QodGhpcy5kb20pOnQubW91bnQmJih0aGlzLm1vdW50ZWQ9ITApKSx0aGlzLmVkaXRhYmxlPUVuKHRoaXMpLHRoaXMubWFya0N1cnNvcj1udWxsLHRoaXMuY3Vyc29yV3JhcHBlcj1udWxsLE5uKHRoaXMpLHRoaXMubm9kZVZpZXdzPURuKHRoaXMpLHRoaXMuZG9jVmlldz1vdCh0aGlzLnN0YXRlLmRvYyxUbih0aGlzKSxDbih0aGlzKSx0aGlzLmRvbSx0aGlzKSx0aGlzLmxhc3RTZWxlY3RlZFZpZXdEZXNjPW51bGwsdGhpcy5kcmFnZ2luZz1udWxsLE9lKHRoaXMpLHRoaXMucGx1Z2luVmlld3M9W10sdGhpcy51cGRhdGVQbHVnaW5WaWV3cygpfSxNbj17cHJvcHM6e30scm9vdDp7fX07ZnVuY3Rpb24gVG4odCl7dmFyIGU9T2JqZWN0LmNyZWF0ZShudWxsKTtyZXR1cm4gZS5jbGFzcz0iUHJvc2VNaXJyb3IiLGUuY29udGVudGVkaXRhYmxlPVN0cmluZyh0LmVkaXRhYmxlKSx0LnNvbWVQcm9wKCJhdHRyaWJ1dGVzIiwoZnVuY3Rpb24obil7aWYoImZ1bmN0aW9uIj09dHlwZW9mIG4mJihuPW4odC5zdGF0ZSkpLG4pZm9yKHZhciByIGluIG4pImNsYXNzIj09cj9lLmNsYXNzKz0iICIrbltyXTplW3JdfHwiY29udGVudGVkaXRhYmxlIj09cnx8Im5vZGVOYW1lIj09cnx8KGVbcl09U3RyaW5nKG5bcl0pKX0pKSxbY24ubm9kZSgwLHQuc3RhdGUuZG9jLmNvbnRlbnQuc2l6ZSxlKV19ZnVuY3Rpb24gTm4odCl7dmFyIGU9dC5zdGF0ZS5zZWxlY3Rpb24sbj1lLiRoZWFkLHI9ZS4kYW5jaG9yLG89ZS52aXNpYmxlO2lmKHQubWFya0N1cnNvcil7dmFyIGk9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiaW1nIik7aS5zZXRBdHRyaWJ1dGUoIm1hcmstcGxhY2Vob2xkZXIiLCJ0cnVlIiksdC5jdXJzb3JXcmFwcGVyPXtkb206aSxkZWNvOmNuLndpZGdldChuLnBvcyxpLHtyYXc6ITAsbWFya3M6dC5tYXJrQ3Vyc29yfSl9fWVsc2UgaWYob3x8bi5wb3MhPXIucG9zKXQuY3Vyc29yV3JhcHBlcj1udWxsO2Vsc2V7dmFyIHM7IXQuY3Vyc29yV3JhcHBlcnx8dC5jdXJzb3JXcmFwcGVyLmRvbS5jaGlsZE5vZGVzLmxlbmd0aD8ocz1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKSxzLnN0eWxlLnBvc2l0aW9uPSJhYnNvbHV0ZSIscy5zdHlsZS5sZWZ0PSItMTAwMDAwcHgiKTp0LmN1cnNvcldyYXBwZXIuZGVjby5wb3MhPW4ucG9zJiYocz10LmN1cnNvcldyYXBwZXIuZG9tKSxzJiYodC5jdXJzb3JXcmFwcGVyPXtkb206cyxkZWNvOmNuLndpZGdldChuLnBvcyxzLHtyYXc6ITB9KX0pfX1mdW5jdGlvbiBFbih0KXtyZXR1cm4hdC5zb21lUHJvcCgiZWRpdGFibGUiLChmdW5jdGlvbihlKXtyZXR1cm4hMT09PWUodC5zdGF0ZSl9KSl9ZnVuY3Rpb24gQW4odCl7dmFyIGU9dC5nZXRTZWxlY3Rpb24oKSxuPWUuZm9jdXNPZmZzZXQscj1lLmZvY3VzTm9kZTtyZXR1cm4gciYmMyE9ci5ub2RlVHlwZT9bcixuLDE9PXIubm9kZVR5cGU/ci5jaGlsZE5vZGVzW24tMV06bnVsbCwxPT1yLm5vZGVUeXBlP3IuY2hpbGROb2Rlc1tuXTpudWxsXTpudWxsfWZ1bmN0aW9uIFJuKHQsZSl7dmFyIG49QW4oZSk7aWYoIW58fDM9PW5bMF0ubm9kZVR5cGUpcmV0dXJuITE7Zm9yKHZhciByPTA7cjx0Lmxlbmd0aDtyKyspaWYobltyXSE9dFtyXSlyZXR1cm4hMDtyZXR1cm4hMX1mdW5jdGlvbiBEbih0KXt2YXIgZT17fTtyZXR1cm4gdC5zb21lUHJvcCgibm9kZVZpZXdzIiwoZnVuY3Rpb24odCl7Zm9yKHZhciBuIGluIHQpT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGUsbil8fChlW25dPXRbbl0pfSkpLGV9ZnVuY3Rpb24gem4odCxlKXt2YXIgbj0wLHI9MDtmb3IodmFyIG8gaW4gdCl7aWYodFtvXSE9ZVtvXSlyZXR1cm4hMDtuKyt9Zm9yKHZhciBpIGluIGUpcisrO3JldHVybiBuIT1yfU1uLnByb3BzLmdldD1mdW5jdGlvbigpe3ZhciB0PXRoaXM7aWYodGhpcy5fcHJvcHMuc3RhdGUhPXRoaXMuc3RhdGUpe3ZhciBlPXRoaXMuX3Byb3BzO2Zvcih2YXIgbiBpbiB0aGlzLl9wcm9wcz17fSxlKXQuX3Byb3BzW25dPWVbbl07dGhpcy5fcHJvcHMuc3RhdGU9dGhpcy5zdGF0ZX1yZXR1cm4gdGhpcy5fcHJvcHN9LE9uLnByb3RvdHlwZS51cGRhdGU9ZnVuY3Rpb24odCl7dC5oYW5kbGVET01FdmVudHMhPXRoaXMuX3Byb3BzLmhhbmRsZURPTUV2ZW50cyYmTmUodGhpcyksdGhpcy5fcHJvcHM9dCx0aGlzLnVwZGF0ZVN0YXRlSW5uZXIodC5zdGF0ZSwhMCl9LE9uLnByb3RvdHlwZS5zZXRQcm9wcz1mdW5jdGlvbih0KXt2YXIgZT10aGlzLG49e307Zm9yKHZhciByIGluIGUuX3Byb3BzKW5bcl09ZS5fcHJvcHNbcl07Zm9yKHZhciBvIGluIG4uc3RhdGU9dGhpcy5zdGF0ZSx0KW5bb109dFtvXTt0aGlzLnVwZGF0ZShuKX0sT24ucHJvdG90eXBlLnVwZGF0ZVN0YXRlPWZ1bmN0aW9uKHQpe3RoaXMudXBkYXRlU3RhdGVJbm5lcih0LHRoaXMuc3RhdGUucGx1Z2lucyE9dC5wbHVnaW5zKX0sT24ucHJvdG90eXBlLnVwZGF0ZVN0YXRlSW5uZXI9ZnVuY3Rpb24odCxlKXt2YXIgbj10aGlzLG89dGhpcy5zdGF0ZSxpPSExO2lmKHRoaXMuc3RhdGU9dCxlKXt2YXIgYT1Ebih0aGlzKTt6bihhLHRoaXMubm9kZVZpZXdzKSYmKHRoaXMubm9kZVZpZXdzPWEsaT0hMCksTmUodGhpcyl9dGhpcy5lZGl0YWJsZT1Fbih0aGlzKSxObih0aGlzKTt2YXIgYz1Dbih0aGlzKSxsPVRuKHRoaXMpLHA9ZT8icmVzZXQiOnQuc2Nyb2xsVG9TZWxlY3Rpb24+by5zY3JvbGxUb1NlbGVjdGlvbj8idG8gc2VsZWN0aW9uIjoicHJlc2VydmUiLHU9aXx8IXRoaXMuZG9jVmlldy5tYXRjaGVzTm9kZSh0LmRvYyxsLGMpLGg9dXx8IXQuc2VsZWN0aW9uLmVxKG8uc2VsZWN0aW9uKSxmPSJwcmVzZXJ2ZSI9PXAmJmgmJm51bGw9PXRoaXMuZG9tLnN0eWxlLm92ZXJmbG93QW5jaG9yJiZPKHRoaXMpO2lmKGgpe3RoaXMuZG9tT2JzZXJ2ZXIuc3RvcCgpO3ZhciBkPSExO2lmKHUpe3ZhciB2PXMuY2hyb21lJiZBbih0aGlzLnJvb3QpOyFpJiZ0aGlzLmRvY1ZpZXcudXBkYXRlKHQuZG9jLGwsYyx0aGlzKXx8KHRoaXMuZG9jVmlldy5kZXN0cm95KCksdGhpcy5kb2NWaWV3PW90KHQuZG9jLGwsYyx0aGlzLmRvbSx0aGlzKSksdiYmKGQ9IXRoaXMuY29tcG9zaW5nJiZSbih2LHRoaXMucm9vdCkpLHMuaWUmJnMuaWVfdmVyc2lvbjw9MTEmJiFvLnNlbGVjdGlvbi5lbXB0eSYmdC5zZWxlY3Rpb24uZW1wdHkmJnQuZG9jLmNvbnRlbnQuc2l6ZTxvLmRvYy5jb250ZW50LnNpemUmJihkPSEwKX1kfHwhKHRoaXMubW91c2VEb3duJiZ0aGlzLmRvbU9ic2VydmVyLmN1cnJlbnRTZWxlY3Rpb24uZXEodGhpcy5yb290LmdldFNlbGVjdGlvbigpKSYmWXQodGhpcykpP1Z0KHRoaXMsITEsZCk6KEh0KHRoaXMsdC5zZWxlY3Rpb24pLHRoaXMuZG9tT2JzZXJ2ZXIuc2V0Q3VyU2VsZWN0aW9uKCkpLHRoaXMuZG9tT2JzZXJ2ZXIuc3RhcnQoKX1pZih0aGlzLnVwZGF0ZVBsdWdpblZpZXdzKG8pLCJyZXNldCI9PXApdGhpcy5kb20uc2Nyb2xsVG9wPTA7ZWxzZSBpZigidG8gc2VsZWN0aW9uIj09cCl7dmFyIG09dGhpcy5yb290LmdldFNlbGVjdGlvbigpLmZvY3VzTm9kZTt0aGlzLnNvbWVQcm9wKCJoYW5kbGVTY3JvbGxUb1NlbGVjdGlvbiIsKGZ1bmN0aW9uKHQpe3JldHVybiB0KG4pfSkpfHwodC5zZWxlY3Rpb24gaW5zdGFuY2VvZiByLk5vZGVTZWxlY3Rpb24/Qyh0aGlzLHRoaXMuZG9jVmlldy5kb21BZnRlclBvcyh0LnNlbGVjdGlvbi5mcm9tKS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKSxtKTpDKHRoaXMsdGhpcy5jb29yZHNBdFBvcyh0LnNlbGVjdGlvbi5oZWFkKSxtKSl9ZWxzZSBmJiZNKGYpfSxPbi5wcm90b3R5cGUuZGVzdHJveVBsdWdpblZpZXdzPWZ1bmN0aW9uKCl7dmFyIHQ7d2hpbGUodD10aGlzLnBsdWdpblZpZXdzLnBvcCgpKXQuZGVzdHJveSYmdC5kZXN0cm95KCl9LE9uLnByb3RvdHlwZS51cGRhdGVQbHVnaW5WaWV3cz1mdW5jdGlvbih0KXt2YXIgZT10aGlzO2lmKHQmJnQucGx1Z2lucz09dGhpcy5zdGF0ZS5wbHVnaW5zKWZvcih2YXIgbj0wO248dGhpcy5wbHVnaW5WaWV3cy5sZW5ndGg7bisrKXt2YXIgcj1lLnBsdWdpblZpZXdzW25dO3IudXBkYXRlJiZyLnVwZGF0ZShlLHQpfWVsc2V7dGhpcy5kZXN0cm95UGx1Z2luVmlld3MoKTtmb3IodmFyIG89MDtvPHRoaXMuc3RhdGUucGx1Z2lucy5sZW5ndGg7bysrKXt2YXIgaT1lLnN0YXRlLnBsdWdpbnNbb107aS5zcGVjLnZpZXcmJmUucGx1Z2luVmlld3MucHVzaChpLnNwZWMudmlldyhlKSl9fX0sT24ucHJvdG90eXBlLnNvbWVQcm9wPWZ1bmN0aW9uKHQsZSl7dmFyIG4scj10aGlzLl9wcm9wcyYmdGhpcy5fcHJvcHNbdF07aWYobnVsbCE9ciYmKG49ZT9lKHIpOnIpKXJldHVybiBuO3ZhciBvPXRoaXMuc3RhdGUucGx1Z2lucztpZihvKWZvcih2YXIgaT0wO2k8by5sZW5ndGg7aSsrKXt2YXIgcz1vW2ldLnByb3BzW3RdO2lmKG51bGwhPXMmJihuPWU/ZShzKTpzKSlyZXR1cm4gbn19LE9uLnByb3RvdHlwZS5oYXNGb2N1cz1mdW5jdGlvbigpe3JldHVybiB0aGlzLnJvb3QuYWN0aXZlRWxlbWVudD09dGhpcy5kb219LE9uLnByb3RvdHlwZS5mb2N1cz1mdW5jdGlvbigpe3RoaXMuZG9tT2JzZXJ2ZXIuc3RvcCgpLFZ0KHRoaXMsITApLHRoaXMuZWRpdGFibGUmJih0aGlzLmRvbS5zZXRBY3RpdmU/dGhpcy5kb20uc2V0QWN0aXZlKCk6dGhpcy5kb20uZm9jdXMoe3ByZXZlbnRTY3JvbGw6ITB9KSksdGhpcy5kb21PYnNlcnZlci5zdGFydCgpfSxNbi5yb290LmdldD1mdW5jdGlvbigpe3ZhciB0PXRoaXMsZT10aGlzLl9yb290O2lmKG51bGw9PWUpZm9yKHZhciBuPXRoaXMuZG9tLnBhcmVudE5vZGU7bjtuPW4ucGFyZW50Tm9kZSlpZig5PT1uLm5vZGVUeXBlfHwxMT09bi5ub2RlVHlwZSYmbi5ob3N0KXJldHVybiB0Ll9yb290PW47cmV0dXJuIGV8fGRvY3VtZW50fSxPbi5wcm90b3R5cGUucG9zQXRDb29yZHM9ZnVuY3Rpb24odCl7cmV0dXJuIFAodGhpcyx0KX0sT24ucHJvdG90eXBlLmNvb3Jkc0F0UG9zPWZ1bmN0aW9uKHQpe3JldHVybiBfKHRoaXMsdCl9LE9uLnByb3RvdHlwZS5kb21BdFBvcz1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5kb2NWaWV3LmRvbUZyb21Qb3ModCl9LE9uLnByb3RvdHlwZS5ub2RlRE9NPWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMuZG9jVmlldy5kZXNjQXQodCk7cmV0dXJuIGU/ZS5ub2RlRE9NOm51bGx9LE9uLnByb3RvdHlwZS5wb3NBdERPTT1mdW5jdGlvbih0LGUsbil7dm9pZCAwPT09biYmKG49LTEpO3ZhciByPXRoaXMuZG9jVmlldy5wb3NGcm9tRE9NKHQsZSxuKTtpZihudWxsPT1yKXRocm93IG5ldyBSYW5nZUVycm9yKCJET00gcG9zaXRpb24gbm90IGluc2lkZSB0aGUgZWRpdG9yIik7cmV0dXJuIHJ9LE9uLnByb3RvdHlwZS5lbmRPZlRleHRibG9jaz1mdW5jdGlvbih0LGUpe3JldHVybiBIKHRoaXMsZXx8dGhpcy5zdGF0ZSx0KX0sT24ucHJvdG90eXBlLmRlc3Ryb3k9ZnVuY3Rpb24oKXt0aGlzLmRvY1ZpZXcmJihUZSh0aGlzKSx0aGlzLmRlc3Ryb3lQbHVnaW5WaWV3cygpLHRoaXMubW91bnRlZD8odGhpcy5kb2NWaWV3LnVwZGF0ZSh0aGlzLnN0YXRlLmRvYyxbXSxDbih0aGlzKSx0aGlzKSx0aGlzLmRvbS50ZXh0Q29udGVudD0iIik6dGhpcy5kb20ucGFyZW50Tm9kZSYmdGhpcy5kb20ucGFyZW50Tm9kZS5yZW1vdmVDaGlsZCh0aGlzLmRvbSksdGhpcy5kb2NWaWV3LmRlc3Ryb3koKSx0aGlzLmRvY1ZpZXc9bnVsbCl9LE9uLnByb3RvdHlwZS5kaXNwYXRjaEV2ZW50PWZ1bmN0aW9uKHQpe3JldHVybiBSZSh0aGlzLHQpfSxPbi5wcm90b3R5cGUuZGlzcGF0Y2g9ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5fcHJvcHMuZGlzcGF0Y2hUcmFuc2FjdGlvbjtlP2UuY2FsbCh0aGlzLHQpOnRoaXMudXBkYXRlU3RhdGUodGhpcy5zdGF0ZS5hcHBseSh0KSl9LE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKE9uLnByb3RvdHlwZSxNbiksZS5FZGl0b3JWaWV3PU9uLGUuRGVjb3JhdGlvbj1jbixlLkRlY29yYXRpb25TZXQ9aG4sZS5fX3NlcmlhbGl6ZUZvckNsaXBib2FyZD1zZSxlLl9fcGFyc2VGcm9tQ2xpcGJvYXJkPWFlLGUuX19lbmRDb21wb3NpdGlvbj1VZX0sIjcyYTgiOmZ1bmN0aW9uKHQsZSxuKXsidXNlIHN0cmljdCI7T2JqZWN0LmRlZmluZVByb3BlcnR5KGUsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pO3ZhciByPW4oIjZmZmIiKSxvPW4oImI5MjMiKSxpPWZ1bmN0aW9uKHQsZSl7dGhpcy5tYXRjaD10LHRoaXMuaGFuZGxlcj0ic3RyaW5nIj09dHlwZW9mIGU/cyhlKTplfTtmdW5jdGlvbiBzKHQpe3JldHVybiBmdW5jdGlvbihlLG4scixvKXt2YXIgaT10O2lmKG5bMV0pe3ZhciBzPW5bMF0ubGFzdEluZGV4T2YoblsxXSk7aSs9blswXS5zbGljZShzK25bMV0ubGVuZ3RoKSxyKz1zO3ZhciBhPXItbzthPjAmJihpPW5bMF0uc2xpY2Uocy1hLHMpK2kscj1vKX1yZXR1cm4gZS50ci5pbnNlcnRUZXh0KGkscixvKX19dmFyIGE9NTAwO2Z1bmN0aW9uIGModCl7dmFyIGU9dC5ydWxlcyxuPW5ldyByLlBsdWdpbih7c3RhdGU6e2luaXQ6ZnVuY3Rpb24oKXtyZXR1cm4gbnVsbH0sYXBwbHk6ZnVuY3Rpb24odCxlKXt2YXIgbj10LmdldE1ldGEodGhpcyk7cmV0dXJuIG58fCh0LnNlbGVjdGlvblNldHx8dC5kb2NDaGFuZ2VkP251bGw6ZSl9fSxwcm9wczp7aGFuZGxlVGV4dElucHV0OmZ1bmN0aW9uKHQscixvLGkpe3JldHVybiBsKHQscixvLGksZSxuKX0saGFuZGxlRE9NRXZlbnRzOntjb21wb3NpdGlvbmVuZDpmdW5jdGlvbih0KXtzZXRUaW1lb3V0KChmdW5jdGlvbigpe3ZhciByPXQuc3RhdGUuc2VsZWN0aW9uLG89ci4kY3Vyc29yO28mJmwodCxvLnBvcyxvLnBvcywiIixlLG4pfSkpfX19LGlzSW5wdXRSdWxlczohMH0pO3JldHVybiBufWZ1bmN0aW9uIGwodCxlLG4scixvLGkpe2lmKHQuY29tcG9zaW5nKXJldHVybiExO3ZhciBzPXQuc3RhdGUsYz1zLmRvYy5yZXNvbHZlKGUpO2lmKGMucGFyZW50LnR5cGUuc3BlYy5jb2RlKXJldHVybiExO2Zvcih2YXIgbD1jLnBhcmVudC50ZXh0QmV0d2VlbihNYXRoLm1heCgwLGMucGFyZW50T2Zmc2V0LWEpLGMucGFyZW50T2Zmc2V0LG51bGwsIu+/vCIpK3IscD0wO3A8by5sZW5ndGg7cCsrKXt2YXIgdT1vW3BdLm1hdGNoLmV4ZWMobCksaD11JiZvW3BdLmhhbmRsZXIocyx1LGUtKHVbMF0ubGVuZ3RoLXIubGVuZ3RoKSxuKTtpZihoKXJldHVybiB0LmRpc3BhdGNoKGguc2V0TWV0YShpLHt0cmFuc2Zvcm06aCxmcm9tOmUsdG86bix0ZXh0OnJ9KSksITB9cmV0dXJuITF9ZnVuY3Rpb24gcCh0LGUpe2Zvcih2YXIgbj10LnBsdWdpbnMscj0wO3I8bi5sZW5ndGg7cisrKXt2YXIgbz1uW3JdLGk9dm9pZCAwO2lmKG8uc3BlYy5pc0lucHV0UnVsZXMmJihpPW8uZ2V0U3RhdGUodCkpKXtpZihlKXtmb3IodmFyIHM9dC50cixhPWkudHJhbnNmb3JtLGM9YS5zdGVwcy5sZW5ndGgtMTtjPj0wO2MtLSlzLnN0ZXAoYS5zdGVwc1tjXS5pbnZlcnQoYS5kb2NzW2NdKSk7dmFyIGw9cy5kb2MucmVzb2x2ZShpLmZyb20pLm1hcmtzKCk7ZShzLnJlcGxhY2VXaXRoKGkuZnJvbSxpLnRvLHQuc2NoZW1hLnRleHQoaS50ZXh0LGwpKSl9cmV0dXJuITB9fXJldHVybiExfXZhciB1PW5ldyBpKC8tLSQvLCLigJQiKSxoPW5ldyBpKC9cLlwuXC4kLywi4oCmIiksZj1uZXcgaSgvKD86XnxbXHNce1xbXChcPCciXHUyMDE4XHUyMDFDXSkoIikkLywi4oCcIiksZD1uZXcgaSgvIiQvLCLigJ0iKSx2PW5ldyBpKC8oPzpefFtcc1x7XFtcKFw8JyJcdTIwMThcdTIwMUNdKSgnKSQvLCLigJgiKSxtPW5ldyBpKC8nJC8sIuKAmSIpLHk9W2YsZCx2LG1dO2Z1bmN0aW9uIGcodCxlLG4scil7cmV0dXJuIG5ldyBpKHQsKGZ1bmN0aW9uKHQsaSxzLGEpe3ZhciBjPW4gaW5zdGFuY2VvZiBGdW5jdGlvbj9uKGkpOm4sbD10LnRyLmRlbGV0ZShzLGEpLHA9bC5kb2MucmVzb2x2ZShzKSx1PXAuYmxvY2tSYW5nZSgpLGg9dSYmby5maW5kV3JhcHBpbmcodSxlLGMpO2lmKCFoKXJldHVybiBudWxsO2wud3JhcCh1LGgpO3ZhciBmPWwuZG9jLnJlc29sdmUocy0xKS5ub2RlQmVmb3JlO3JldHVybiBmJiZmLnR5cGU9PWUmJm8uY2FuSm9pbihsLmRvYyxzLTEpJiYoIXJ8fHIoaSxmKSkmJmwuam9pbihzLTEpLGx9KSl9ZnVuY3Rpb24gdyh0LGUsbil7cmV0dXJuIG5ldyBpKHQsKGZ1bmN0aW9uKHQscixvLGkpe3ZhciBzPXQuZG9jLnJlc29sdmUobyksYT1uIGluc3RhbmNlb2YgRnVuY3Rpb24/bihyKTpuO3JldHVybiBzLm5vZGUoLTEpLmNhblJlcGxhY2VXaXRoKHMuaW5kZXgoLTEpLHMuaW5kZXhBZnRlcigtMSksZSk/dC50ci5kZWxldGUobyxpKS5zZXRCbG9ja1R5cGUobyxvLGUsYSk6bnVsbH0pKX1lLklucHV0UnVsZT1pLGUuaW5wdXRSdWxlcz1jLGUudW5kb0lucHV0UnVsZT1wLGUuZW1EYXNoPXUsZS5lbGxpcHNpcz1oLGUub3BlbkRvdWJsZVF1b3RlPWYsZS5jbG9zZURvdWJsZVF1b3RlPWQsZS5vcGVuU2luZ2xlUXVvdGU9dixlLmNsb3NlU2luZ2xlUXVvdGU9bSxlLnNtYXJ0UXVvdGVzPXksZS53cmFwcGluZ0lucHV0UnVsZT1nLGUudGV4dGJsb2NrVHlwZUlucHV0UnVsZT13fSw3NzI2OmZ1bmN0aW9uKHQsZSl7dmFyIG49dC5leHBvcnRzPSJ1bmRlZmluZWQiIT10eXBlb2Ygd2luZG93JiZ3aW5kb3cuTWF0aD09TWF0aD93aW5kb3c6InVuZGVmaW5lZCIhPXR5cGVvZiBzZWxmJiZzZWxmLk1hdGg9PU1hdGg/c2VsZjpGdW5jdGlvbigicmV0dXJuIHRoaXMiKSgpOyJudW1iZXIiPT10eXBlb2YgX19nJiYoX19nPW4pfSwiNzdmMSI6ZnVuY3Rpb24odCxlLG4pe3ZhciByPW4oIjQ1ODgiKSxvPU1hdGgubWF4LGk9TWF0aC5taW47dC5leHBvcnRzPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIHQ9cih0KSx0PDA/byh0K2UsMCk6aSh0LGUpfX0sIjc5NGIiOmZ1bmN0aW9uKHQsZSxuKXt0LmV4cG9ydHM9IW4oIjhlNjAiKSYmIW4oIjI5NGMiKSgoZnVuY3Rpb24oKXtyZXR1cm4gNyE9T2JqZWN0LmRlZmluZVByb3BlcnR5KG4oIjFlYzkiKSgiZGl2IiksImEiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gN319KS5hfSkpfSwiNzlhYSI6ZnVuY3Rpb24odCxlKXt0LmV4cG9ydHM9ZnVuY3Rpb24odCl7aWYoImZ1bmN0aW9uIiE9dHlwZW9mIHQpdGhyb3cgVHlwZUVycm9yKHQrIiBpcyBub3QgYSBmdW5jdGlvbiEiKTtyZXR1cm4gdH19LCI3OWU1IjpmdW5jdGlvbih0LGUpe3QuZXhwb3J0cz1mdW5jdGlvbih0KXt0cnl7cmV0dXJuISF0KCl9Y2F0Y2goZSl7cmV0dXJuITB9fX0sIjdhODciOmZ1bmN0aW9uKHQsZSxuKXsidXNlIHN0cmljdCI7T2JqZWN0LmRlZmluZVByb3BlcnR5KGUsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pO3ZhciByPW4oImI5MjMiKSxvPW4oIjZmMjciKSxpPVsib2wiLDBdLHM9WyJ1bCIsMF0sYT1bImxpIiwwXSxjPXthdHRyczp7b3JkZXI6e2RlZmF1bHQ6MX19LHBhcnNlRE9NOlt7dGFnOiJvbCIsZ2V0QXR0cnM6ZnVuY3Rpb24odCl7cmV0dXJue29yZGVyOnQuaGFzQXR0cmlidXRlKCJzdGFydCIpPyt0LmdldEF0dHJpYnV0ZSgic3RhcnQiKToxfX19XSx0b0RPTTpmdW5jdGlvbih0KXtyZXR1cm4gMT09dC5hdHRycy5vcmRlcj9pOlsib2wiLHtzdGFydDp0LmF0dHJzLm9yZGVyfSwwXX19LGw9e3BhcnNlRE9NOlt7dGFnOiJ1bCJ9XSx0b0RPTTpmdW5jdGlvbigpe3JldHVybiBzfX0scD17cGFyc2VET006W3t0YWc6ImxpIn1dLHRvRE9NOmZ1bmN0aW9uKCl7cmV0dXJuIGF9LGRlZmluaW5nOiEwfTtmdW5jdGlvbiB1KHQsZSl7dmFyIG49e307Zm9yKHZhciByIGluIHQpbltyXT10W3JdO2Zvcih2YXIgbyBpbiBlKW5bb109ZVtvXTtyZXR1cm4gbn1mdW5jdGlvbiBoKHQsZSxuKXtyZXR1cm4gdC5hcHBlbmQoe29yZGVyZWRfbGlzdDp1KGMse2NvbnRlbnQ6Imxpc3RfaXRlbSsiLGdyb3VwOm59KSxidWxsZXRfbGlzdDp1KGwse2NvbnRlbnQ6Imxpc3RfaXRlbSsiLGdyb3VwOm59KSxsaXN0X2l0ZW06dShwLHtjb250ZW50OmV9KX0pfWZ1bmN0aW9uIGYodCxlKXtyZXR1cm4gZnVuY3Rpb24obixpKXt2YXIgcz1uLnNlbGVjdGlvbixhPXMuJGZyb20sYz1zLiR0byxsPWEuYmxvY2tSYW5nZShjKSxwPSExLHU9bDtpZighbClyZXR1cm4hMTtpZihsLmRlcHRoPj0yJiZhLm5vZGUobC5kZXB0aC0xKS50eXBlLmNvbXBhdGlibGVDb250ZW50KHQpJiYwPT1sLnN0YXJ0SW5kZXgpe2lmKDA9PWEuaW5kZXgobC5kZXB0aC0xKSlyZXR1cm4hMTt2YXIgaD1uLmRvYy5yZXNvbHZlKGwuc3RhcnQtMik7dT1uZXcgby5Ob2RlUmFuZ2UoaCxoLGwuZGVwdGgpLGwuZW5kSW5kZXg8bC5wYXJlbnQuY2hpbGRDb3VudCYmKGw9bmV3IG8uTm9kZVJhbmdlKGEsbi5kb2MucmVzb2x2ZShjLmVuZChsLmRlcHRoKSksbC5kZXB0aCkpLHA9ITB9dmFyIGY9ci5maW5kV3JhcHBpbmcodSx0LGUsbCk7cmV0dXJuISFmJiYoaSYmaShkKG4udHIsbCxmLHAsdCkuc2Nyb2xsSW50b1ZpZXcoKSksITApfX1mdW5jdGlvbiBkKHQsZSxuLGkscyl7Zm9yKHZhciBhPW8uRnJhZ21lbnQuZW1wdHksYz1uLmxlbmd0aC0xO2M+PTA7Yy0tKWE9by5GcmFnbWVudC5mcm9tKG5bY10udHlwZS5jcmVhdGUobltjXS5hdHRycyxhKSk7dC5zdGVwKG5ldyByLlJlcGxhY2VBcm91bmRTdGVwKGUuc3RhcnQtKGk/MjowKSxlLmVuZCxlLnN0YXJ0LGUuZW5kLG5ldyBvLlNsaWNlKGEsMCwwKSxuLmxlbmd0aCwhMCkpO2Zvcih2YXIgbD0wLHA9MDtwPG4ubGVuZ3RoO3ArKyluW3BdLnR5cGU9PXMmJihsPXArMSk7Zm9yKHZhciB1PW4ubGVuZ3RoLWwsaD1lLnN0YXJ0K24ubGVuZ3RoLShpPzI6MCksZj1lLnBhcmVudCxkPWUuc3RhcnRJbmRleCx2PWUuZW5kSW5kZXgsbT0hMDtkPHY7ZCsrLG09ITEpIW0mJnIuY2FuU3BsaXQodC5kb2MsaCx1KSYmKHQuc3BsaXQoaCx1KSxoKz0yKnUpLGgrPWYuY2hpbGQoZCkubm9kZVNpemU7cmV0dXJuIHR9ZnVuY3Rpb24gdih0KXtyZXR1cm4gZnVuY3Rpb24oZSxuKXt2YXIgaT1lLnNlbGVjdGlvbixzPWkuJGZyb20sYT1pLiR0byxjPWkubm9kZTtpZihjJiZjLmlzQmxvY2t8fHMuZGVwdGg8Mnx8IXMuc2FtZVBhcmVudChhKSlyZXR1cm4hMTt2YXIgbD1zLm5vZGUoLTEpO2lmKGwudHlwZSE9dClyZXR1cm4hMTtpZigwPT1zLnBhcmVudC5jb250ZW50LnNpemUpe2lmKDI9PXMuZGVwdGh8fHMubm9kZSgtMykudHlwZSE9dHx8cy5pbmRleCgtMikhPXMubm9kZSgtMikuY2hpbGRDb3VudC0xKXJldHVybiExO2lmKG4pe2Zvcih2YXIgcD1vLkZyYWdtZW50LmVtcHR5LHU9cy5pbmRleCgtMSk+MCxoPXMuZGVwdGgtKHU/MToyKTtoPj1zLmRlcHRoLTM7aC0tKXA9by5GcmFnbWVudC5mcm9tKHMubm9kZShoKS5jb3B5KHApKTtwPXAuYXBwZW5kKG8uRnJhZ21lbnQuZnJvbSh0LmNyZWF0ZUFuZEZpbGwoKSkpO3ZhciBmPWUudHIucmVwbGFjZShzLmJlZm9yZSh1P251bGw6LTEpLHMuYWZ0ZXIoLTMpLG5ldyBvLlNsaWNlKHAsdT8zOjIsMikpO2Yuc2V0U2VsZWN0aW9uKGUuc2VsZWN0aW9uLmNvbnN0cnVjdG9yLm5lYXIoZi5kb2MucmVzb2x2ZShzLnBvcysodT8zOjIpKSkpLG4oZi5zY3JvbGxJbnRvVmlldygpKX1yZXR1cm4hMH12YXIgZD1hLnBvcz09cy5lbmQoKT9sLmNvbnRlbnRNYXRjaEF0KHMuaW5kZXhBZnRlcigtMSkpLmRlZmF1bHRUeXBlOm51bGwsdj1lLnRyLmRlbGV0ZShzLnBvcyxhLnBvcyksbT1kJiZbbnVsbCx7dHlwZTpkfV07cmV0dXJuISFyLmNhblNwbGl0KHYuZG9jLHMucG9zLDIsbSkmJihuJiZuKHYuc3BsaXQocy5wb3MsMixtKS5zY3JvbGxJbnRvVmlldygpKSwhMCl9fWZ1bmN0aW9uIG0odCl7cmV0dXJuIGZ1bmN0aW9uKGUsbil7dmFyIHI9ZS5zZWxlY3Rpb24sbz1yLiRmcm9tLGk9ci4kdG8scz1vLmJsb2NrUmFuZ2UoaSwoZnVuY3Rpb24oZSl7cmV0dXJuIGUuY2hpbGRDb3VudCYmZS5maXJzdENoaWxkLnR5cGU9PXR9KSk7cmV0dXJuISFzJiYoIW58fChvLm5vZGUocy5kZXB0aC0xKS50eXBlPT10P3koZSxuLHQscyk6ZyhlLG4scykpKX19ZnVuY3Rpb24geSh0LGUsbixpKXt2YXIgcz10LnRyLGE9aS5lbmQsYz1pLiR0by5lbmQoaS5kZXB0aCk7cmV0dXJuIGE8YyYmKHMuc3RlcChuZXcgci5SZXBsYWNlQXJvdW5kU3RlcChhLTEsYyxhLGMsbmV3IG8uU2xpY2Uoby5GcmFnbWVudC5mcm9tKG4uY3JlYXRlKG51bGwsaS5wYXJlbnQuY29weSgpKSksMSwwKSwxLCEwKSksaT1uZXcgby5Ob2RlUmFuZ2Uocy5kb2MucmVzb2x2ZShpLiRmcm9tLnBvcykscy5kb2MucmVzb2x2ZShjKSxpLmRlcHRoKSksZShzLmxpZnQoaSxyLmxpZnRUYXJnZXQoaSkpLnNjcm9sbEludG9WaWV3KCkpLCEwfWZ1bmN0aW9uIGcodCxlLG4pe2Zvcih2YXIgaT10LnRyLHM9bi5wYXJlbnQsYT1uLmVuZCxjPW4uZW5kSW5kZXgtMSxsPW4uc3RhcnRJbmRleDtjPmw7Yy0tKWEtPXMuY2hpbGQoYykubm9kZVNpemUsaS5kZWxldGUoYS0xLGErMSk7dmFyIHA9aS5kb2MucmVzb2x2ZShuLnN0YXJ0KSx1PXAubm9kZUFmdGVyLGg9MD09bi5zdGFydEluZGV4LGY9bi5lbmRJbmRleD09cy5jaGlsZENvdW50LGQ9cC5ub2RlKC0xKSx2PXAuaW5kZXgoLTEpO2lmKCFkLmNhblJlcGxhY2UodisoaD8wOjEpLHYrMSx1LmNvbnRlbnQuYXBwZW5kKGY/by5GcmFnbWVudC5lbXB0eTpvLkZyYWdtZW50LmZyb20ocykpKSlyZXR1cm4hMTt2YXIgbT1wLnBvcyx5PW0rdS5ub2RlU2l6ZTtyZXR1cm4gaS5zdGVwKG5ldyByLlJlcGxhY2VBcm91bmRTdGVwKG0tKGg/MTowKSx5KyhmPzE6MCksbSsxLHktMSxuZXcgby5TbGljZSgoaD9vLkZyYWdtZW50LmVtcHR5Om8uRnJhZ21lbnQuZnJvbShzLmNvcHkoby5GcmFnbWVudC5lbXB0eSkpKS5hcHBlbmQoZj9vLkZyYWdtZW50LmVtcHR5Om8uRnJhZ21lbnQuZnJvbShzLmNvcHkoby5GcmFnbWVudC5lbXB0eSkpKSxoPzA6MSxmPzA6MSksaD8wOjEpKSxlKGkuc2Nyb2xsSW50b1ZpZXcoKSksITB9ZnVuY3Rpb24gdyh0KXtyZXR1cm4gZnVuY3Rpb24oZSxuKXt2YXIgaT1lLnNlbGVjdGlvbixzPWkuJGZyb20sYT1pLiR0byxjPXMuYmxvY2tSYW5nZShhLChmdW5jdGlvbihlKXtyZXR1cm4gZS5jaGlsZENvdW50JiZlLmZpcnN0Q2hpbGQudHlwZT09dH0pKTtpZighYylyZXR1cm4hMTt2YXIgbD1jLnN0YXJ0SW5kZXg7aWYoMD09bClyZXR1cm4hMTt2YXIgcD1jLnBhcmVudCx1PXAuY2hpbGQobC0xKTtpZih1LnR5cGUhPXQpcmV0dXJuITE7aWYobil7dmFyIGg9dS5sYXN0Q2hpbGQmJnUubGFzdENoaWxkLnR5cGU9PXAudHlwZSxmPW8uRnJhZ21lbnQuZnJvbShoP3QuY3JlYXRlKCk6bnVsbCksZD1uZXcgby5TbGljZShvLkZyYWdtZW50LmZyb20odC5jcmVhdGUobnVsbCxvLkZyYWdtZW50LmZyb20ocC50eXBlLmNyZWF0ZShudWxsLGYpKSkpLGg/MzoxLDApLHY9Yy5zdGFydCxtPWMuZW5kO24oZS50ci5zdGVwKG5ldyByLlJlcGxhY2VBcm91bmRTdGVwKHYtKGg/MzoxKSxtLHYsbSxkLDEsITApKS5zY3JvbGxJbnRvVmlldygpKX1yZXR1cm4hMH19ZS5vcmRlcmVkTGlzdD1jLGUuYnVsbGV0TGlzdD1sLGUubGlzdEl0ZW09cCxlLmFkZExpc3ROb2Rlcz1oLGUud3JhcEluTGlzdD1mLGUuc3BsaXRMaXN0SXRlbT12LGUubGlmdExpc3RJdGVtPW0sZS5zaW5rTGlzdEl0ZW09d30sIjdjZDYiOmZ1bmN0aW9uKHQsZSxuKXt2YXIgcj1uKCI0MGMzIiksbz1uKCI1MTY4IikoIml0ZXJhdG9yIiksaT1uKCI0ODFiIik7dC5leHBvcnRzPW4oIjU4NGEiKS5nZXRJdGVyYXRvck1ldGhvZD1mdW5jdGlvbih0KXtpZih2b2lkIDAhPXQpcmV0dXJuIHRbb118fHRbIkBAaXRlcmF0b3IiXXx8aVtyKHQpXX19LCI3ZDdiIjpmdW5jdGlvbih0LGUsbil7dmFyIHI9bigiZTRhZSIpLG89bigiN2NkNiIpO3QuZXhwb3J0cz1uKCI1ODRhIikuZ2V0SXRlcmF0b3I9ZnVuY3Rpb24odCl7dmFyIGU9byh0KTtpZigiZnVuY3Rpb24iIT10eXBlb2YgZSl0aHJvdyBUeXBlRXJyb3IodCsiIGlzIG5vdCBpdGVyYWJsZSEiKTtyZXR1cm4gcihlLmNhbGwodCkpfX0sIjdlOTAiOmZ1bmN0aW9uKHQsZSxuKXt2YXIgcj1uKCJkOWY2Iiksbz1uKCJlNGFlIiksaT1uKCJjM2ExIik7dC5leHBvcnRzPW4oIjhlNjAiKT9PYmplY3QuZGVmaW5lUHJvcGVydGllczpmdW5jdGlvbih0LGUpe28odCk7dmFyIG4scz1pKGUpLGE9cy5sZW5ndGgsYz0wO3doaWxlKGE+YylyLmYodCxuPXNbYysrXSxlW25dKTtyZXR1cm4gdH19LCI3ZjIwIjpmdW5jdGlvbih0LGUsbil7dmFyIHI9bigiODZjYyIpLmYsbz1uKCI2OWE4IiksaT1uKCIyYjRjIikoInRvU3RyaW5nVGFnIik7dC5leHBvcnRzPWZ1bmN0aW9uKHQsZSxuKXt0JiYhbyh0PW4/dDp0LnByb3RvdHlwZSxpKSYmcih0LGkse2NvbmZpZ3VyYWJsZTohMCx2YWx1ZTplfSl9fSwiN2Y3ZiI6ZnVuY3Rpb24odCxlLG4pe3ZhciByPW4oIjg2Y2MiKS5mLG89RnVuY3Rpb24ucHJvdG90eXBlLGk9L15ccypmdW5jdGlvbiAoW14gKF0qKS8scz0ibmFtZSI7cyBpbiBvfHxuKCI5ZTFlIikmJnIobyxzLHtjb25maWd1cmFibGU6ITAsZ2V0OmZ1bmN0aW9uKCl7dHJ5e3JldHVybigiIit0aGlzKS5tYXRjaChpKVsxXX1jYXRjaCh0KXtyZXR1cm4iIn19fSl9LDgzNzg6ZnVuY3Rpb24odCxlKXt2YXIgbj10LmV4cG9ydHM9e3ZlcnNpb246IjIuNi45In07Im51bWJlciI9PXR5cGVvZiBfX2UmJihfX2U9bil9LDg0MzY6ZnVuY3Rpb24odCxlKXt0LmV4cG9ydHM9ZnVuY3Rpb24oKXt9fSwiODRmMiI6ZnVuY3Rpb24odCxlKXt0LmV4cG9ydHM9e319LCI4NmNjIjpmdW5jdGlvbih0LGUsbil7dmFyIHI9bigiY2I3YyIpLG89bigiYzY5YSIpLGk9bigiNmE5OSIpLHM9T2JqZWN0LmRlZmluZVByb3BlcnR5O2UuZj1uKCI5ZTFlIik/T2JqZWN0LmRlZmluZVByb3BlcnR5OmZ1bmN0aW9uKHQsZSxuKXtpZihyKHQpLGU9aShlLCEwKSxyKG4pLG8pdHJ5e3JldHVybiBzKHQsZSxuKX1jYXRjaChhKXt9aWYoImdldCJpbiBufHwic2V0ImluIG4pdGhyb3cgVHlwZUVycm9yKCJBY2Nlc3NvcnMgbm90IHN1cHBvcnRlZCEiKTtyZXR1cm4idmFsdWUiaW4gbiYmKHRbZV09bi52YWx1ZSksdH19LCI4YWJlIjpmdW5jdGlvbih0LGUsbil7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIHIodCl7cmV0dXJuIHQmJiJvYmplY3QiPT09dHlwZW9mIHQmJiJkZWZhdWx0ImluIHQ/dFsiZGVmYXVsdCJdOnR9T2JqZWN0LmRlZmluZVByb3BlcnR5KGUsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pO3ZhciBvPXIobigiZmFhMSIpKTtmdW5jdGlvbiBpKHQsZSxuKXtmb3IodmFyIHI9MDs7cisrKXtpZihyPT10LmNoaWxkQ291bnR8fHI9PWUuY2hpbGRDb3VudClyZXR1cm4gdC5jaGlsZENvdW50PT1lLmNoaWxkQ291bnQ/bnVsbDpuO3ZhciBvPXQuY2hpbGQocikscz1lLmNoaWxkKHIpO2lmKG8hPXMpe2lmKCFvLnNhbWVNYXJrdXAocykpcmV0dXJuIG47aWYoby5pc1RleHQmJm8udGV4dCE9cy50ZXh0KXtmb3IodmFyIGE9MDtvLnRleHRbYV09PXMudGV4dFthXTthKyspbisrO3JldHVybiBufWlmKG8uY29udGVudC5zaXplfHxzLmNvbnRlbnQuc2l6ZSl7dmFyIGM9aShvLmNvbnRlbnQscy5jb250ZW50LG4rMSk7aWYobnVsbCE9YylyZXR1cm4gY31uKz1vLm5vZGVTaXplfWVsc2Ugbis9by5ub2RlU2l6ZX19ZnVuY3Rpb24gcyh0LGUsbixyKXtmb3IodmFyIG89dC5jaGlsZENvdW50LGk9ZS5jaGlsZENvdW50Ozspe2lmKDA9PW98fDA9PWkpcmV0dXJuIG89PWk/bnVsbDp7YTpuLGI6cn07dmFyIGE9dC5jaGlsZCgtLW8pLGM9ZS5jaGlsZCgtLWkpLGw9YS5ub2RlU2l6ZTtpZihhIT1jKXtpZighYS5zYW1lTWFya3VwKGMpKXJldHVybnthOm4sYjpyfTtpZihhLmlzVGV4dCYmYS50ZXh0IT1jLnRleHQpe3ZhciBwPTAsdT1NYXRoLm1pbihhLnRleHQubGVuZ3RoLGMudGV4dC5sZW5ndGgpO3doaWxlKHA8dSYmYS50ZXh0W2EudGV4dC5sZW5ndGgtcC0xXT09Yy50ZXh0W2MudGV4dC5sZW5ndGgtcC0xXSlwKyssbi0tLHItLTtyZXR1cm57YTpuLGI6cn19aWYoYS5jb250ZW50LnNpemV8fGMuY29udGVudC5zaXplKXt2YXIgaD1zKGEuY29udGVudCxjLmNvbnRlbnQsbi0xLHItMSk7aWYoaClyZXR1cm4gaH1uLT1sLHItPWx9ZWxzZSBuLT1sLHItPWx9fXZhciBhPWZ1bmN0aW9uKHQsZSl7dmFyIG49dGhpcztpZih0aGlzLmNvbnRlbnQ9dCx0aGlzLnNpemU9ZXx8MCxudWxsPT1lKWZvcih2YXIgcj0wO3I8dC5sZW5ndGg7cisrKW4uc2l6ZSs9dFtyXS5ub2RlU2l6ZX0sYz17Zmlyc3RDaGlsZDp7fSxsYXN0Q2hpbGQ6e30sY2hpbGRDb3VudDp7fX07YS5wcm90b3R5cGUubm9kZXNCZXR3ZWVuPWZ1bmN0aW9uKHQsZSxuLHIsbyl7dmFyIGk9dGhpczt2b2lkIDA9PT1yJiYocj0wKTtmb3IodmFyIHM9MCxhPTA7YTxlO3MrKyl7dmFyIGM9aS5jb250ZW50W3NdLGw9YStjLm5vZGVTaXplO2lmKGw+dCYmITEhPT1uKGMscithLG8scykmJmMuY29udGVudC5zaXplKXt2YXIgcD1hKzE7Yy5ub2Rlc0JldHdlZW4oTWF0aC5tYXgoMCx0LXApLE1hdGgubWluKGMuY29udGVudC5zaXplLGUtcCksbixyK3ApfWE9bH19LGEucHJvdG90eXBlLmRlc2NlbmRhbnRzPWZ1bmN0aW9uKHQpe3RoaXMubm9kZXNCZXR3ZWVuKDAsdGhpcy5zaXplLHQpfSxhLnByb3RvdHlwZS50ZXh0QmV0d2Vlbj1mdW5jdGlvbih0LGUsbixyKXt2YXIgbz0iIixpPSEwO3JldHVybiB0aGlzLm5vZGVzQmV0d2Vlbih0LGUsKGZ1bmN0aW9uKHMsYSl7cy5pc1RleHQ/KG8rPXMudGV4dC5zbGljZShNYXRoLm1heCh0LGEpLWEsZS1hKSxpPSFuKTpzLmlzTGVhZiYmcj8obys9cixpPSFuKTohaSYmcy5pc0Jsb2NrJiYobys9bixpPSEwKX0pLDApLG99LGEucHJvdG90eXBlLmFwcGVuZD1mdW5jdGlvbih0KXtpZighdC5zaXplKXJldHVybiB0aGlzO2lmKCF0aGlzLnNpemUpcmV0dXJuIHQ7dmFyIGU9dGhpcy5sYXN0Q2hpbGQsbj10LmZpcnN0Q2hpbGQscj10aGlzLmNvbnRlbnQuc2xpY2UoKSxvPTA7Zm9yKGUuaXNUZXh0JiZlLnNhbWVNYXJrdXAobikmJihyW3IubGVuZ3RoLTFdPWUud2l0aFRleHQoZS50ZXh0K24udGV4dCksbz0xKTtvPHQuY29udGVudC5sZW5ndGg7bysrKXIucHVzaCh0LmNvbnRlbnRbb10pO3JldHVybiBuZXcgYShyLHRoaXMuc2l6ZSt0LnNpemUpfSxhLnByb3RvdHlwZS5jdXQ9ZnVuY3Rpb24odCxlKXt2YXIgbj10aGlzO2lmKG51bGw9PWUmJihlPXRoaXMuc2l6ZSksMD09dCYmZT09dGhpcy5zaXplKXJldHVybiB0aGlzO3ZhciByPVtdLG89MDtpZihlPnQpZm9yKHZhciBpPTAscz0wO3M8ZTtpKyspe3ZhciBjPW4uY29udGVudFtpXSxsPXMrYy5ub2RlU2l6ZTtsPnQmJigoczx0fHxsPmUpJiYoYz1jLmlzVGV4dD9jLmN1dChNYXRoLm1heCgwLHQtcyksTWF0aC5taW4oYy50ZXh0Lmxlbmd0aCxlLXMpKTpjLmN1dChNYXRoLm1heCgwLHQtcy0xKSxNYXRoLm1pbihjLmNvbnRlbnQuc2l6ZSxlLXMtMSkpKSxyLnB1c2goYyksbys9Yy5ub2RlU2l6ZSkscz1sfXJldHVybiBuZXcgYShyLG8pfSxhLnByb3RvdHlwZS5jdXRCeUluZGV4PWZ1bmN0aW9uKHQsZSl7cmV0dXJuIHQ9PWU/YS5lbXB0eTowPT10JiZlPT10aGlzLmNvbnRlbnQubGVuZ3RoP3RoaXM6bmV3IGEodGhpcy5jb250ZW50LnNsaWNlKHQsZSkpfSxhLnByb3RvdHlwZS5yZXBsYWNlQ2hpbGQ9ZnVuY3Rpb24odCxlKXt2YXIgbj10aGlzLmNvbnRlbnRbdF07aWYobj09ZSlyZXR1cm4gdGhpczt2YXIgcj10aGlzLmNvbnRlbnQuc2xpY2UoKSxvPXRoaXMuc2l6ZStlLm5vZGVTaXplLW4ubm9kZVNpemU7cmV0dXJuIHJbdF09ZSxuZXcgYShyLG8pfSxhLnByb3RvdHlwZS5hZGRUb1N0YXJ0PWZ1bmN0aW9uKHQpe3JldHVybiBuZXcgYShbdF0uY29uY2F0KHRoaXMuY29udGVudCksdGhpcy5zaXplK3Qubm9kZVNpemUpfSxhLnByb3RvdHlwZS5hZGRUb0VuZD1mdW5jdGlvbih0KXtyZXR1cm4gbmV3IGEodGhpcy5jb250ZW50LmNvbmNhdCh0KSx0aGlzLnNpemUrdC5ub2RlU2l6ZSl9LGEucHJvdG90eXBlLmVxPWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXM7aWYodGhpcy5jb250ZW50Lmxlbmd0aCE9dC5jb250ZW50Lmxlbmd0aClyZXR1cm4hMTtmb3IodmFyIG49MDtuPHRoaXMuY29udGVudC5sZW5ndGg7bisrKWlmKCFlLmNvbnRlbnRbbl0uZXEodC5jb250ZW50W25dKSlyZXR1cm4hMTtyZXR1cm4hMH0sYy5maXJzdENoaWxkLmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLmNvbnRlbnQubGVuZ3RoP3RoaXMuY29udGVudFswXTpudWxsfSxjLmxhc3RDaGlsZC5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jb250ZW50Lmxlbmd0aD90aGlzLmNvbnRlbnRbdGhpcy5jb250ZW50Lmxlbmd0aC0xXTpudWxsfSxjLmNoaWxkQ291bnQuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY29udGVudC5sZW5ndGh9LGEucHJvdG90eXBlLmNoaWxkPWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMuY29udGVudFt0XTtpZighZSl0aHJvdyBuZXcgUmFuZ2VFcnJvcigiSW5kZXggIit0KyIgb3V0IG9mIHJhbmdlIGZvciAiK3RoaXMpO3JldHVybiBlfSxhLnByb3RvdHlwZS5tYXliZUNoaWxkPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLmNvbnRlbnRbdF19LGEucHJvdG90eXBlLmZvckVhY2g9ZnVuY3Rpb24odCl7Zm9yKHZhciBlPXRoaXMsbj0wLHI9MDtuPHRoaXMuY29udGVudC5sZW5ndGg7bisrKXt2YXIgbz1lLmNvbnRlbnRbbl07dChvLHIsbikscis9by5ub2RlU2l6ZX19LGEucHJvdG90eXBlLmZpbmREaWZmU3RhcnQ9ZnVuY3Rpb24odCxlKXtyZXR1cm4gdm9pZCAwPT09ZSYmKGU9MCksaSh0aGlzLHQsZSl9LGEucHJvdG90eXBlLmZpbmREaWZmRW5kPWZ1bmN0aW9uKHQsZSxuKXtyZXR1cm4gdm9pZCAwPT09ZSYmKGU9dGhpcy5zaXplKSx2b2lkIDA9PT1uJiYobj10LnNpemUpLHModGhpcyx0LGUsbil9LGEucHJvdG90eXBlLmZpbmRJbmRleD1mdW5jdGlvbih0LGUpe3ZhciBuPXRoaXM7aWYodm9pZCAwPT09ZSYmKGU9LTEpLDA9PXQpcmV0dXJuIHAoMCx0KTtpZih0PT10aGlzLnNpemUpcmV0dXJuIHAodGhpcy5jb250ZW50Lmxlbmd0aCx0KTtpZih0PnRoaXMuc2l6ZXx8dDwwKXRocm93IG5ldyBSYW5nZUVycm9yKCJQb3NpdGlvbiAiK3QrIiBvdXRzaWRlIG9mIGZyYWdtZW50ICgiK3RoaXMrIikiKTtmb3IodmFyIHI9MCxvPTA7O3IrKyl7dmFyIGk9bi5jaGlsZChyKSxzPW8raS5ub2RlU2l6ZTtpZihzPj10KXJldHVybiBzPT10fHxlPjA/cChyKzEscyk6cChyLG8pO289c319LGEucHJvdG90eXBlLnRvU3RyaW5nPWZ1bmN0aW9uKCl7cmV0dXJuIjwiK3RoaXMudG9TdHJpbmdJbm5lcigpKyI+In0sYS5wcm90b3R5cGUudG9TdHJpbmdJbm5lcj1mdW5jdGlvbigpe3JldHVybiB0aGlzLmNvbnRlbnQuam9pbigiLCAiKX0sYS5wcm90b3R5cGUudG9KU09OPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY29udGVudC5sZW5ndGg/dGhpcy5jb250ZW50Lm1hcCgoZnVuY3Rpb24odCl7cmV0dXJuIHQudG9KU09OKCl9KSk6bnVsbH0sYS5mcm9tSlNPTj1mdW5jdGlvbih0LGUpe2lmKCFlKXJldHVybiBhLmVtcHR5O2lmKCFBcnJheS5pc0FycmF5KGUpKXRocm93IG5ldyBSYW5nZUVycm9yKCJJbnZhbGlkIGlucHV0IGZvciBGcmFnbWVudC5mcm9tSlNPTiIpO3JldHVybiBuZXcgYShlLm1hcCh0Lm5vZGVGcm9tSlNPTikpfSxhLmZyb21BcnJheT1mdW5jdGlvbih0KXtpZighdC5sZW5ndGgpcmV0dXJuIGEuZW1wdHk7Zm9yKHZhciBlLG49MCxyPTA7cjx0Lmxlbmd0aDtyKyspe3ZhciBvPXRbcl07bis9by5ub2RlU2l6ZSxyJiZvLmlzVGV4dCYmdFtyLTFdLnNhbWVNYXJrdXAobyk/KGV8fChlPXQuc2xpY2UoMCxyKSksZVtlLmxlbmd0aC0xXT1vLndpdGhUZXh0KGVbZS5sZW5ndGgtMV0udGV4dCtvLnRleHQpKTplJiZlLnB1c2gobyl9cmV0dXJuIG5ldyBhKGV8fHQsbil9LGEuZnJvbT1mdW5jdGlvbih0KXtpZighdClyZXR1cm4gYS5lbXB0eTtpZih0IGluc3RhbmNlb2YgYSlyZXR1cm4gdDtpZihBcnJheS5pc0FycmF5KHQpKXJldHVybiB0aGlzLmZyb21BcnJheSh0KTtpZih0LmF0dHJzKXJldHVybiBuZXcgYShbdF0sdC5ub2RlU2l6ZSk7dGhyb3cgbmV3IFJhbmdlRXJyb3IoIkNhbiBub3QgY29udmVydCAiK3QrIiB0byBhIEZyYWdtZW50IisodC5ub2Rlc0JldHdlZW4/IiAobG9va3MgbGlrZSBtdWx0aXBsZSB2ZXJzaW9ucyBvZiBwcm9zZW1pcnJvci1tb2RlbCB3ZXJlIGxvYWRlZCkiOiIiKSl9LE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKGEucHJvdG90eXBlLGMpO3ZhciBsPXtpbmRleDowLG9mZnNldDowfTtmdW5jdGlvbiBwKHQsZSl7cmV0dXJuIGwuaW5kZXg9dCxsLm9mZnNldD1lLGx9ZnVuY3Rpb24gdSh0LGUpe2lmKHQ9PT1lKXJldHVybiEwO2lmKCF0fHwib2JqZWN0IiE9dHlwZW9mIHR8fCFlfHwib2JqZWN0IiE9dHlwZW9mIGUpcmV0dXJuITE7dmFyIG49QXJyYXkuaXNBcnJheSh0KTtpZihBcnJheS5pc0FycmF5KGUpIT1uKXJldHVybiExO2lmKG4pe2lmKHQubGVuZ3RoIT1lLmxlbmd0aClyZXR1cm4hMTtmb3IodmFyIHI9MDtyPHQubGVuZ3RoO3IrKylpZighdSh0W3JdLGVbcl0pKXJldHVybiExfWVsc2V7Zm9yKHZhciBvIGluIHQpaWYoIShvIGluIGUpfHwhdSh0W29dLGVbb10pKXJldHVybiExO2Zvcih2YXIgaSBpbiBlKWlmKCEoaSBpbiB0KSlyZXR1cm4hMX1yZXR1cm4hMH1hLmVtcHR5PW5ldyBhKFtdLDApO3ZhciBoPWZ1bmN0aW9uKHQsZSl7dGhpcy50eXBlPXQsdGhpcy5hdHRycz1lfTtmdW5jdGlvbiBmKHQpe3ZhciBlPUVycm9yLmNhbGwodGhpcyx0KTtyZXR1cm4gZS5fX3Byb3RvX189Zi5wcm90b3R5cGUsZX1oLnByb3RvdHlwZS5hZGRUb1NldD1mdW5jdGlvbih0KXtmb3IodmFyIGUsbj10aGlzLHI9ITEsbz0wO288dC5sZW5ndGg7bysrKXt2YXIgaT10W29dO2lmKG4uZXEoaSkpcmV0dXJuIHQ7aWYobi50eXBlLmV4Y2x1ZGVzKGkudHlwZSkpZXx8KGU9dC5zbGljZSgwLG8pKTtlbHNle2lmKGkudHlwZS5leGNsdWRlcyhuLnR5cGUpKXJldHVybiB0OyFyJiZpLnR5cGUucmFuaz5uLnR5cGUucmFuayYmKGV8fChlPXQuc2xpY2UoMCxvKSksZS5wdXNoKG4pLHI9ITApLGUmJmUucHVzaChpKX19cmV0dXJuIGV8fChlPXQuc2xpY2UoKSkscnx8ZS5wdXNoKHRoaXMpLGV9LGgucHJvdG90eXBlLnJlbW92ZUZyb21TZXQ9ZnVuY3Rpb24odCl7Zm9yKHZhciBlPXRoaXMsbj0wO248dC5sZW5ndGg7bisrKWlmKGUuZXEodFtuXSkpcmV0dXJuIHQuc2xpY2UoMCxuKS5jb25jYXQodC5zbGljZShuKzEpKTtyZXR1cm4gdH0saC5wcm90b3R5cGUuaXNJblNldD1mdW5jdGlvbih0KXtmb3IodmFyIGU9dGhpcyxuPTA7bjx0Lmxlbmd0aDtuKyspaWYoZS5lcSh0W25dKSlyZXR1cm4hMDtyZXR1cm4hMX0saC5wcm90b3R5cGUuZXE9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXM9PXR8fHRoaXMudHlwZT09dC50eXBlJiZ1KHRoaXMuYXR0cnMsdC5hdHRycyl9LGgucHJvdG90eXBlLnRvSlNPTj1mdW5jdGlvbigpe3ZhciB0PXRoaXMsZT17dHlwZTp0aGlzLnR5cGUubmFtZX07Zm9yKHZhciBuIGluIHQuYXR0cnMpe2UuYXR0cnM9dC5hdHRyczticmVha31yZXR1cm4gZX0saC5mcm9tSlNPTj1mdW5jdGlvbih0LGUpe2lmKCFlKXRocm93IG5ldyBSYW5nZUVycm9yKCJJbnZhbGlkIGlucHV0IGZvciBNYXJrLmZyb21KU09OIik7dmFyIG49dC5tYXJrc1tlLnR5cGVdO2lmKCFuKXRocm93IG5ldyBSYW5nZUVycm9yKCJUaGVyZSBpcyBubyBtYXJrIHR5cGUgIitlLnR5cGUrIiBpbiB0aGlzIHNjaGVtYSIpO3JldHVybiBuLmNyZWF0ZShlLmF0dHJzKX0saC5zYW1lU2V0PWZ1bmN0aW9uKHQsZSl7aWYodD09ZSlyZXR1cm4hMDtpZih0Lmxlbmd0aCE9ZS5sZW5ndGgpcmV0dXJuITE7Zm9yKHZhciBuPTA7bjx0Lmxlbmd0aDtuKyspaWYoIXRbbl0uZXEoZVtuXSkpcmV0dXJuITE7cmV0dXJuITB9LGguc2V0RnJvbT1mdW5jdGlvbih0KXtpZighdHx8MD09dC5sZW5ndGgpcmV0dXJuIGgubm9uZTtpZih0IGluc3RhbmNlb2YgaClyZXR1cm5bdF07dmFyIGU9dC5zbGljZSgpO3JldHVybiBlLnNvcnQoKGZ1bmN0aW9uKHQsZSl7cmV0dXJuIHQudHlwZS5yYW5rLWUudHlwZS5yYW5rfSkpLGV9LGgubm9uZT1bXSxmLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKEVycm9yLnByb3RvdHlwZSksZi5wcm90b3R5cGUuY29uc3RydWN0b3I9ZixmLnByb3RvdHlwZS5uYW1lPSJSZXBsYWNlRXJyb3IiO3ZhciBkPWZ1bmN0aW9uKHQsZSxuKXt0aGlzLmNvbnRlbnQ9dCx0aGlzLm9wZW5TdGFydD1lLHRoaXMub3BlbkVuZD1ufSx2PXtzaXplOnt9fTtmdW5jdGlvbiBtKHQsZSxuKXt2YXIgcj10LmZpbmRJbmRleChlKSxvPXIuaW5kZXgsaT1yLm9mZnNldCxzPXQubWF5YmVDaGlsZChvKSxhPXQuZmluZEluZGV4KG4pLGM9YS5pbmRleCxsPWEub2Zmc2V0O2lmKGk9PWV8fHMuaXNUZXh0KXtpZihsIT1uJiYhdC5jaGlsZChjKS5pc1RleHQpdGhyb3cgbmV3IFJhbmdlRXJyb3IoIlJlbW92aW5nIG5vbi1mbGF0IHJhbmdlIik7cmV0dXJuIHQuY3V0KDAsZSkuYXBwZW5kKHQuY3V0KG4pKX1pZihvIT1jKXRocm93IG5ldyBSYW5nZUVycm9yKCJSZW1vdmluZyBub24tZmxhdCByYW5nZSIpO3JldHVybiB0LnJlcGxhY2VDaGlsZChvLHMuY29weShtKHMuY29udGVudCxlLWktMSxuLWktMSkpKX1mdW5jdGlvbiB5KHQsZSxuLHIpe3ZhciBvPXQuZmluZEluZGV4KGUpLGk9by5pbmRleCxzPW8ub2Zmc2V0LGE9dC5tYXliZUNoaWxkKGkpO2lmKHM9PWV8fGEuaXNUZXh0KXJldHVybiByJiYhci5jYW5SZXBsYWNlKGksaSxuKT9udWxsOnQuY3V0KDAsZSkuYXBwZW5kKG4pLmFwcGVuZCh0LmN1dChlKSk7dmFyIGM9eShhLmNvbnRlbnQsZS1zLTEsbik7cmV0dXJuIGMmJnQucmVwbGFjZUNoaWxkKGksYS5jb3B5KGMpKX1mdW5jdGlvbiBnKHQsZSxuKXtpZihuLm9wZW5TdGFydD50LmRlcHRoKXRocm93IG5ldyBmKCJJbnNlcnRlZCBjb250ZW50IGRlZXBlciB0aGFuIGluc2VydGlvbiBwb3NpdGlvbiIpO2lmKHQuZGVwdGgtbi5vcGVuU3RhcnQhPWUuZGVwdGgtbi5vcGVuRW5kKXRocm93IG5ldyBmKCJJbmNvbnNpc3RlbnQgb3BlbiBkZXB0aHMiKTtyZXR1cm4gdyh0LGUsbiwwKX1mdW5jdGlvbiB3KHQsZSxuLHIpe3ZhciBvPXQuaW5kZXgociksaT10Lm5vZGUocik7aWYobz09ZS5pbmRleChyKSYmcjx0LmRlcHRoLW4ub3BlblN0YXJ0KXt2YXIgcz13KHQsZSxuLHIrMSk7cmV0dXJuIGkuY29weShpLmNvbnRlbnQucmVwbGFjZUNoaWxkKG8scykpfWlmKG4uY29udGVudC5zaXplKXtpZihuLm9wZW5TdGFydHx8bi5vcGVuRW5kfHx0LmRlcHRoIT1yfHxlLmRlcHRoIT1yKXt2YXIgYT1UKG4sdCksYz1hLnN0YXJ0LGw9YS5lbmQ7cmV0dXJuIEMoaSxPKHQsYyxsLGUscikpfXZhciBwPXQucGFyZW50LHU9cC5jb250ZW50O3JldHVybiBDKHAsdS5jdXQoMCx0LnBhcmVudE9mZnNldCkuYXBwZW5kKG4uY29udGVudCkuYXBwZW5kKHUuY3V0KGUucGFyZW50T2Zmc2V0KSkpfXJldHVybiBDKGksTSh0LGUscikpfWZ1bmN0aW9uIHgodCxlKXtpZighZS50eXBlLmNvbXBhdGlibGVDb250ZW50KHQudHlwZSkpdGhyb3cgbmV3IGYoIkNhbm5vdCBqb2luICIrZS50eXBlLm5hbWUrIiBvbnRvICIrdC50eXBlLm5hbWUpfWZ1bmN0aW9uIGIodCxlLG4pe3ZhciByPXQubm9kZShuKTtyZXR1cm4geChyLGUubm9kZShuKSkscn1mdW5jdGlvbiBrKHQsZSl7dmFyIG49ZS5sZW5ndGgtMTtuPj0wJiZ0LmlzVGV4dCYmdC5zYW1lTWFya3VwKGVbbl0pP2Vbbl09dC53aXRoVGV4dChlW25dLnRleHQrdC50ZXh0KTplLnB1c2godCl9ZnVuY3Rpb24gUyh0LGUsbixyKXt2YXIgbz0oZXx8dCkubm9kZShuKSxpPTAscz1lP2UuaW5kZXgobik6by5jaGlsZENvdW50O3QmJihpPXQuaW5kZXgobiksdC5kZXB0aD5uP2krKzp0LnRleHRPZmZzZXQmJihrKHQubm9kZUFmdGVyLHIpLGkrKykpO2Zvcih2YXIgYT1pO2E8czthKyspayhvLmNoaWxkKGEpLHIpO2UmJmUuZGVwdGg9PW4mJmUudGV4dE9mZnNldCYmayhlLm5vZGVCZWZvcmUscil9ZnVuY3Rpb24gQyh0LGUpe2lmKCF0LnR5cGUudmFsaWRDb250ZW50KGUpKXRocm93IG5ldyBmKCJJbnZhbGlkIGNvbnRlbnQgZm9yIG5vZGUgIit0LnR5cGUubmFtZSk7cmV0dXJuIHQuY29weShlKX1mdW5jdGlvbiBPKHQsZSxuLHIsbyl7dmFyIGk9dC5kZXB0aD5vJiZiKHQsZSxvKzEpLHM9ci5kZXB0aD5vJiZiKG4scixvKzEpLGM9W107cmV0dXJuIFMobnVsbCx0LG8sYyksaSYmcyYmZS5pbmRleChvKT09bi5pbmRleChvKT8oeChpLHMpLGsoQyhpLE8odCxlLG4scixvKzEpKSxjKSk6KGkmJmsoQyhpLE0odCxlLG8rMSkpLGMpLFMoZSxuLG8sYykscyYmayhDKHMsTShuLHIsbysxKSksYykpLFMocixudWxsLG8sYyksbmV3IGEoYyl9ZnVuY3Rpb24gTSh0LGUsbil7dmFyIHI9W107aWYoUyhudWxsLHQsbixyKSx0LmRlcHRoPm4pe3ZhciBvPWIodCxlLG4rMSk7ayhDKG8sTSh0LGUsbisxKSkscil9cmV0dXJuIFMoZSxudWxsLG4sciksbmV3IGEocil9ZnVuY3Rpb24gVCh0LGUpe2Zvcih2YXIgbj1lLmRlcHRoLXQub3BlblN0YXJ0LHI9ZS5ub2RlKG4pLG89ci5jb3B5KHQuY29udGVudCksaT1uLTE7aT49MDtpLS0pbz1lLm5vZGUoaSkuY29weShhLmZyb20obykpO3JldHVybntzdGFydDpvLnJlc29sdmVOb0NhY2hlKHQub3BlblN0YXJ0K24pLGVuZDpvLnJlc29sdmVOb0NhY2hlKG8uY29udGVudC5zaXplLXQub3BlbkVuZC1uKX19di5zaXplLmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLmNvbnRlbnQuc2l6ZS10aGlzLm9wZW5TdGFydC10aGlzLm9wZW5FbmR9LGQucHJvdG90eXBlLmluc2VydEF0PWZ1bmN0aW9uKHQsZSl7dmFyIG49eSh0aGlzLmNvbnRlbnQsdCt0aGlzLm9wZW5TdGFydCxlLG51bGwpO3JldHVybiBuJiZuZXcgZChuLHRoaXMub3BlblN0YXJ0LHRoaXMub3BlbkVuZCl9LGQucHJvdG90eXBlLnJlbW92ZUJldHdlZW49ZnVuY3Rpb24odCxlKXtyZXR1cm4gbmV3IGQobSh0aGlzLmNvbnRlbnQsdCt0aGlzLm9wZW5TdGFydCxlK3RoaXMub3BlblN0YXJ0KSx0aGlzLm9wZW5TdGFydCx0aGlzLm9wZW5FbmQpfSxkLnByb3RvdHlwZS5lcT1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5jb250ZW50LmVxKHQuY29udGVudCkmJnRoaXMub3BlblN0YXJ0PT10Lm9wZW5TdGFydCYmdGhpcy5vcGVuRW5kPT10Lm9wZW5FbmR9LGQucHJvdG90eXBlLnRvU3RyaW5nPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY29udGVudCsiKCIrdGhpcy5vcGVuU3RhcnQrIiwiK3RoaXMub3BlbkVuZCsiKSJ9LGQucHJvdG90eXBlLnRvSlNPTj1mdW5jdGlvbigpe2lmKCF0aGlzLmNvbnRlbnQuc2l6ZSlyZXR1cm4gbnVsbDt2YXIgdD17Y29udGVudDp0aGlzLmNvbnRlbnQudG9KU09OKCl9O3JldHVybiB0aGlzLm9wZW5TdGFydD4wJiYodC5vcGVuU3RhcnQ9dGhpcy5vcGVuU3RhcnQpLHRoaXMub3BlbkVuZD4wJiYodC5vcGVuRW5kPXRoaXMub3BlbkVuZCksdH0sZC5mcm9tSlNPTj1mdW5jdGlvbih0LGUpe2lmKCFlKXJldHVybiBkLmVtcHR5O3ZhciBuPWUub3BlblN0YXJ0fHwwLHI9ZS5vcGVuRW5kfHwwO2lmKCJudW1iZXIiIT10eXBlb2Ygbnx8Im51bWJlciIhPXR5cGVvZiByKXRocm93IG5ldyBSYW5nZUVycm9yKCJJbnZhbGlkIGlucHV0IGZvciBTbGljZS5mcm9tSlNPTiIpO3JldHVybiBuZXcgZChhLmZyb21KU09OKHQsZS5jb250ZW50KSxlLm9wZW5TdGFydHx8MCxlLm9wZW5FbmR8fDApfSxkLm1heE9wZW49ZnVuY3Rpb24odCxlKXt2b2lkIDA9PT1lJiYoZT0hMCk7Zm9yKHZhciBuPTAscj0wLG89dC5maXJzdENoaWxkO28mJiFvLmlzTGVhZiYmKGV8fCFvLnR5cGUuc3BlYy5pc29sYXRpbmcpO289by5maXJzdENoaWxkKW4rKztmb3IodmFyIGk9dC5sYXN0Q2hpbGQ7aSYmIWkuaXNMZWFmJiYoZXx8IWkudHlwZS5zcGVjLmlzb2xhdGluZyk7aT1pLmxhc3RDaGlsZClyKys7cmV0dXJuIG5ldyBkKHQsbixyKX0sT2JqZWN0LmRlZmluZVByb3BlcnRpZXMoZC5wcm90b3R5cGUsdiksZC5lbXB0eT1uZXcgZChhLmVtcHR5LDAsMCk7dmFyIE49ZnVuY3Rpb24odCxlLG4pe3RoaXMucG9zPXQsdGhpcy5wYXRoPWUsdGhpcy5kZXB0aD1lLmxlbmd0aC8zLTEsdGhpcy5wYXJlbnRPZmZzZXQ9bn0sRT17cGFyZW50Ont9LGRvYzp7fSx0ZXh0T2Zmc2V0Ont9LG5vZGVBZnRlcjp7fSxub2RlQmVmb3JlOnt9fTtOLnByb3RvdHlwZS5yZXNvbHZlRGVwdGg9ZnVuY3Rpb24odCl7cmV0dXJuIG51bGw9PXQ/dGhpcy5kZXB0aDp0PDA/dGhpcy5kZXB0aCt0OnR9LEUucGFyZW50LmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLm5vZGUodGhpcy5kZXB0aCl9LEUuZG9jLmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLm5vZGUoMCl9LE4ucHJvdG90eXBlLm5vZGU9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMucGF0aFszKnRoaXMucmVzb2x2ZURlcHRoKHQpXX0sTi5wcm90b3R5cGUuaW5kZXg9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMucGF0aFszKnRoaXMucmVzb2x2ZURlcHRoKHQpKzFdfSxOLnByb3RvdHlwZS5pbmRleEFmdGVyPWZ1bmN0aW9uKHQpe3JldHVybiB0PXRoaXMucmVzb2x2ZURlcHRoKHQpLHRoaXMuaW5kZXgodCkrKHQhPXRoaXMuZGVwdGh8fHRoaXMudGV4dE9mZnNldD8xOjApfSxOLnByb3RvdHlwZS5zdGFydD1mdW5jdGlvbih0KXtyZXR1cm4gdD10aGlzLnJlc29sdmVEZXB0aCh0KSwwPT10PzA6dGhpcy5wYXRoWzMqdC0xXSsxfSxOLnByb3RvdHlwZS5lbmQ9ZnVuY3Rpb24odCl7cmV0dXJuIHQ9dGhpcy5yZXNvbHZlRGVwdGgodCksdGhpcy5zdGFydCh0KSt0aGlzLm5vZGUodCkuY29udGVudC5zaXplfSxOLnByb3RvdHlwZS5iZWZvcmU9ZnVuY3Rpb24odCl7aWYodD10aGlzLnJlc29sdmVEZXB0aCh0KSwhdCl0aHJvdyBuZXcgUmFuZ2VFcnJvcigiVGhlcmUgaXMgbm8gcG9zaXRpb24gYmVmb3JlIHRoZSB0b3AtbGV2ZWwgbm9kZSIpO3JldHVybiB0PT10aGlzLmRlcHRoKzE/dGhpcy5wb3M6dGhpcy5wYXRoWzMqdC0xXX0sTi5wcm90b3R5cGUuYWZ0ZXI9ZnVuY3Rpb24odCl7aWYodD10aGlzLnJlc29sdmVEZXB0aCh0KSwhdCl0aHJvdyBuZXcgUmFuZ2VFcnJvcigiVGhlcmUgaXMgbm8gcG9zaXRpb24gYWZ0ZXIgdGhlIHRvcC1sZXZlbCBub2RlIik7cmV0dXJuIHQ9PXRoaXMuZGVwdGgrMT90aGlzLnBvczp0aGlzLnBhdGhbMyp0LTFdK3RoaXMucGF0aFszKnRdLm5vZGVTaXplfSxFLnRleHRPZmZzZXQuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucG9zLXRoaXMucGF0aFt0aGlzLnBhdGgubGVuZ3RoLTFdfSxFLm5vZGVBZnRlci5nZXQ9ZnVuY3Rpb24oKXt2YXIgdD10aGlzLnBhcmVudCxlPXRoaXMuaW5kZXgodGhpcy5kZXB0aCk7aWYoZT09dC5jaGlsZENvdW50KXJldHVybiBudWxsO3ZhciBuPXRoaXMucG9zLXRoaXMucGF0aFt0aGlzLnBhdGgubGVuZ3RoLTFdLHI9dC5jaGlsZChlKTtyZXR1cm4gbj90LmNoaWxkKGUpLmN1dChuKTpyfSxFLm5vZGVCZWZvcmUuZ2V0PWZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5pbmRleCh0aGlzLmRlcHRoKSxlPXRoaXMucG9zLXRoaXMucGF0aFt0aGlzLnBhdGgubGVuZ3RoLTFdO3JldHVybiBlP3RoaXMucGFyZW50LmNoaWxkKHQpLmN1dCgwLGUpOjA9PXQ/bnVsbDp0aGlzLnBhcmVudC5jaGlsZCh0LTEpfSxOLnByb3RvdHlwZS5tYXJrcz1mdW5jdGlvbigpe3ZhciB0PXRoaXMucGFyZW50LGU9dGhpcy5pbmRleCgpO2lmKDA9PXQuY29udGVudC5zaXplKXJldHVybiBoLm5vbmU7aWYodGhpcy50ZXh0T2Zmc2V0KXJldHVybiB0LmNoaWxkKGUpLm1hcmtzO3ZhciBuPXQubWF5YmVDaGlsZChlLTEpLHI9dC5tYXliZUNoaWxkKGUpO2lmKCFuKXt2YXIgbz1uO249cixyPW99Zm9yKHZhciBpPW4ubWFya3Mscz0wO3M8aS5sZW5ndGg7cysrKSExIT09aVtzXS50eXBlLnNwZWMuaW5jbHVzaXZlfHxyJiZpW3NdLmlzSW5TZXQoci5tYXJrcyl8fChpPWlbcy0tXS5yZW1vdmVGcm9tU2V0KGkpKTtyZXR1cm4gaX0sTi5wcm90b3R5cGUubWFya3NBY3Jvc3M9ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5wYXJlbnQubWF5YmVDaGlsZCh0aGlzLmluZGV4KCkpO2lmKCFlfHwhZS5pc0lubGluZSlyZXR1cm4gbnVsbDtmb3IodmFyIG49ZS5tYXJrcyxyPXQucGFyZW50Lm1heWJlQ2hpbGQodC5pbmRleCgpKSxvPTA7bzxuLmxlbmd0aDtvKyspITEhPT1uW29dLnR5cGUuc3BlYy5pbmNsdXNpdmV8fHImJm5bb10uaXNJblNldChyLm1hcmtzKXx8KG49bltvLS1dLnJlbW92ZUZyb21TZXQobikpO3JldHVybiBufSxOLnByb3RvdHlwZS5zaGFyZWREZXB0aD1mdW5jdGlvbih0KXtmb3IodmFyIGU9dGhpcyxuPXRoaXMuZGVwdGg7bj4wO24tLSlpZihlLnN0YXJ0KG4pPD10JiZlLmVuZChuKT49dClyZXR1cm4gbjtyZXR1cm4gMH0sTi5wcm90b3R5cGUuYmxvY2tSYW5nZT1mdW5jdGlvbih0LGUpe3ZhciBuPXRoaXM7aWYodm9pZCAwPT09dCYmKHQ9dGhpcyksdC5wb3M8dGhpcy5wb3MpcmV0dXJuIHQuYmxvY2tSYW5nZSh0aGlzKTtmb3IodmFyIHI9dGhpcy5kZXB0aC0odGhpcy5wYXJlbnQuaW5saW5lQ29udGVudHx8dGhpcy5wb3M9PXQucG9zPzE6MCk7cj49MDtyLS0paWYodC5wb3M8PW4uZW5kKHIpJiYoIWV8fGUobi5ub2RlKHIpKSkpcmV0dXJuIG5ldyB6KG4sdCxyKX0sTi5wcm90b3R5cGUuc2FtZVBhcmVudD1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5wb3MtdGhpcy5wYXJlbnRPZmZzZXQ9PXQucG9zLXQucGFyZW50T2Zmc2V0fSxOLnByb3RvdHlwZS5tYXg9ZnVuY3Rpb24odCl7cmV0dXJuIHQucG9zPnRoaXMucG9zP3Q6dGhpc30sTi5wcm90b3R5cGUubWluPWZ1bmN0aW9uKHQpe3JldHVybiB0LnBvczx0aGlzLnBvcz90OnRoaXN9LE4ucHJvdG90eXBlLnRvU3RyaW5nPWZ1bmN0aW9uKCl7Zm9yKHZhciB0PXRoaXMsZT0iIixuPTE7bjw9dGhpcy5kZXB0aDtuKyspZSs9KGU/Ii8iOiIiKSt0Lm5vZGUobikudHlwZS5uYW1lKyJfIit0LmluZGV4KG4tMSk7cmV0dXJuIGUrIjoiK3RoaXMucGFyZW50T2Zmc2V0fSxOLnJlc29sdmU9ZnVuY3Rpb24odCxlKXtpZighKGU+PTAmJmU8PXQuY29udGVudC5zaXplKSl0aHJvdyBuZXcgUmFuZ2VFcnJvcigiUG9zaXRpb24gIitlKyIgb3V0IG9mIHJhbmdlIik7Zm9yKHZhciBuPVtdLHI9MCxvPWUsaT10Ozspe3ZhciBzPWkuY29udGVudC5maW5kSW5kZXgobyksYT1zLmluZGV4LGM9cy5vZmZzZXQsbD1vLWM7aWYobi5wdXNoKGksYSxyK2MpLCFsKWJyZWFrO2lmKGk9aS5jaGlsZChhKSxpLmlzVGV4dClicmVhaztvPWwtMSxyKz1jKzF9cmV0dXJuIG5ldyBOKGUsbixvKX0sTi5yZXNvbHZlQ2FjaGVkPWZ1bmN0aW9uKHQsZSl7Zm9yKHZhciBuPTA7bjxBLmxlbmd0aDtuKyspe3ZhciByPUFbbl07aWYoci5wb3M9PWUmJnIuZG9jPT10KXJldHVybiByfXZhciBvPUFbUl09Ti5yZXNvbHZlKHQsZSk7cmV0dXJuIFI9KFIrMSklRCxvfSxPYmplY3QuZGVmaW5lUHJvcGVydGllcyhOLnByb3RvdHlwZSxFKTt2YXIgQT1bXSxSPTAsRD0xMix6PWZ1bmN0aW9uKHQsZSxuKXt0aGlzLiRmcm9tPXQsdGhpcy4kdG89ZSx0aGlzLmRlcHRoPW59LFA9e3N0YXJ0Ont9LGVuZDp7fSxwYXJlbnQ6e30sc3RhcnRJbmRleDp7fSxlbmRJbmRleDp7fX07UC5zdGFydC5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy4kZnJvbS5iZWZvcmUodGhpcy5kZXB0aCsxKX0sUC5lbmQuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuJHRvLmFmdGVyKHRoaXMuZGVwdGgrMSl9LFAucGFyZW50LmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLiRmcm9tLm5vZGUodGhpcy5kZXB0aCl9LFAuc3RhcnRJbmRleC5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy4kZnJvbS5pbmRleCh0aGlzLmRlcHRoKX0sUC5lbmRJbmRleC5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy4kdG8uaW5kZXhBZnRlcih0aGlzLmRlcHRoKX0sT2JqZWN0LmRlZmluZVByb3BlcnRpZXMoei5wcm90b3R5cGUsUCk7dmFyIEk9T2JqZWN0LmNyZWF0ZShudWxsKSxfPWZ1bmN0aW9uKHQsZSxuLHIpe3RoaXMudHlwZT10LHRoaXMuYXR0cnM9ZSx0aGlzLmNvbnRlbnQ9bnx8YS5lbXB0eSx0aGlzLm1hcmtzPXJ8fGgubm9uZX0sRj17bm9kZVNpemU6e30sY2hpbGRDb3VudDp7fSx0ZXh0Q29udGVudDp7fSxmaXJzdENoaWxkOnt9LGxhc3RDaGlsZDp7fSxpc0Jsb2NrOnt9LGlzVGV4dGJsb2NrOnt9LGlubGluZUNvbnRlbnQ6e30saXNJbmxpbmU6e30saXNUZXh0Ont9LGlzTGVhZjp7fSxpc0F0b206e319O0Yubm9kZVNpemUuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuaXNMZWFmPzE6Mit0aGlzLmNvbnRlbnQuc2l6ZX0sRi5jaGlsZENvdW50LmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLmNvbnRlbnQuY2hpbGRDb3VudH0sXy5wcm90b3R5cGUuY2hpbGQ9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuY29udGVudC5jaGlsZCh0KX0sXy5wcm90b3R5cGUubWF5YmVDaGlsZD1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5jb250ZW50Lm1heWJlQ2hpbGQodCl9LF8ucHJvdG90eXBlLmZvckVhY2g9ZnVuY3Rpb24odCl7dGhpcy5jb250ZW50LmZvckVhY2godCl9LF8ucHJvdG90eXBlLm5vZGVzQmV0d2Vlbj1mdW5jdGlvbih0LGUsbixyKXt2b2lkIDA9PT1yJiYocj0wKSx0aGlzLmNvbnRlbnQubm9kZXNCZXR3ZWVuKHQsZSxuLHIsdGhpcyl9LF8ucHJvdG90eXBlLmRlc2NlbmRhbnRzPWZ1bmN0aW9uKHQpe3RoaXMubm9kZXNCZXR3ZWVuKDAsdGhpcy5jb250ZW50LnNpemUsdCl9LEYudGV4dENvbnRlbnQuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudGV4dEJldHdlZW4oMCx0aGlzLmNvbnRlbnQuc2l6ZSwiIil9LF8ucHJvdG90eXBlLnRleHRCZXR3ZWVuPWZ1bmN0aW9uKHQsZSxuLHIpe3JldHVybiB0aGlzLmNvbnRlbnQudGV4dEJldHdlZW4odCxlLG4scil9LEYuZmlyc3RDaGlsZC5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jb250ZW50LmZpcnN0Q2hpbGR9LEYubGFzdENoaWxkLmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLmNvbnRlbnQubGFzdENoaWxkfSxfLnByb3RvdHlwZS5lcT1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcz09dHx8dGhpcy5zYW1lTWFya3VwKHQpJiZ0aGlzLmNvbnRlbnQuZXEodC5jb250ZW50KX0sXy5wcm90b3R5cGUuc2FtZU1hcmt1cD1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5oYXNNYXJrdXAodC50eXBlLHQuYXR0cnMsdC5tYXJrcyl9LF8ucHJvdG90eXBlLmhhc01hcmt1cD1mdW5jdGlvbih0LGUsbil7cmV0dXJuIHRoaXMudHlwZT09dCYmdSh0aGlzLmF0dHJzLGV8fHQuZGVmYXVsdEF0dHJzfHxJKSYmaC5zYW1lU2V0KHRoaXMubWFya3Msbnx8aC5ub25lKX0sXy5wcm90b3R5cGUuY29weT1mdW5jdGlvbih0KXtyZXR1cm4gdm9pZCAwPT09dCYmKHQ9bnVsbCksdD09dGhpcy5jb250ZW50P3RoaXM6bmV3IHRoaXMuY29uc3RydWN0b3IodGhpcy50eXBlLHRoaXMuYXR0cnMsdCx0aGlzLm1hcmtzKX0sXy5wcm90b3R5cGUubWFyaz1mdW5jdGlvbih0KXtyZXR1cm4gdD09dGhpcy5tYXJrcz90aGlzOm5ldyB0aGlzLmNvbnN0cnVjdG9yKHRoaXMudHlwZSx0aGlzLmF0dHJzLHRoaXMuY29udGVudCx0KX0sXy5wcm90b3R5cGUuY3V0PWZ1bmN0aW9uKHQsZSl7cmV0dXJuIDA9PXQmJmU9PXRoaXMuY29udGVudC5zaXplP3RoaXM6dGhpcy5jb3B5KHRoaXMuY29udGVudC5jdXQodCxlKSl9LF8ucHJvdG90eXBlLnNsaWNlPWZ1bmN0aW9uKHQsZSxuKXtpZih2b2lkIDA9PT1lJiYoZT10aGlzLmNvbnRlbnQuc2l6ZSksdm9pZCAwPT09biYmKG49ITEpLHQ9PWUpcmV0dXJuIGQuZW1wdHk7dmFyIHI9dGhpcy5yZXNvbHZlKHQpLG89dGhpcy5yZXNvbHZlKGUpLGk9bj8wOnIuc2hhcmVkRGVwdGgoZSkscz1yLnN0YXJ0KGkpLGE9ci5ub2RlKGkpLGM9YS5jb250ZW50LmN1dChyLnBvcy1zLG8ucG9zLXMpO3JldHVybiBuZXcgZChjLHIuZGVwdGgtaSxvLmRlcHRoLWkpfSxfLnByb3RvdHlwZS5yZXBsYWNlPWZ1bmN0aW9uKHQsZSxuKXtyZXR1cm4gZyh0aGlzLnJlc29sdmUodCksdGhpcy5yZXNvbHZlKGUpLG4pfSxfLnByb3RvdHlwZS5ub2RlQXQ9ZnVuY3Rpb24odCl7Zm9yKHZhciBlPXRoaXM7Oyl7dmFyIG49ZS5jb250ZW50LmZpbmRJbmRleCh0KSxyPW4uaW5kZXgsbz1uLm9mZnNldDtpZihlPWUubWF5YmVDaGlsZChyKSwhZSlyZXR1cm4gbnVsbDtpZihvPT10fHxlLmlzVGV4dClyZXR1cm4gZTt0LT1vKzF9fSxfLnByb3RvdHlwZS5jaGlsZEFmdGVyPWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMuY29udGVudC5maW5kSW5kZXgodCksbj1lLmluZGV4LHI9ZS5vZmZzZXQ7cmV0dXJue25vZGU6dGhpcy5jb250ZW50Lm1heWJlQ2hpbGQobiksaW5kZXg6bixvZmZzZXQ6cn19LF8ucHJvdG90eXBlLmNoaWxkQmVmb3JlPWZ1bmN0aW9uKHQpe2lmKDA9PXQpcmV0dXJue25vZGU6bnVsbCxpbmRleDowLG9mZnNldDowfTt2YXIgZT10aGlzLmNvbnRlbnQuZmluZEluZGV4KHQpLG49ZS5pbmRleCxyPWUub2Zmc2V0O2lmKHI8dClyZXR1cm57bm9kZTp0aGlzLmNvbnRlbnQuY2hpbGQobiksaW5kZXg6bixvZmZzZXQ6cn07dmFyIG89dGhpcy5jb250ZW50LmNoaWxkKG4tMSk7cmV0dXJue25vZGU6byxpbmRleDpuLTEsb2Zmc2V0OnItby5ub2RlU2l6ZX19LF8ucHJvdG90eXBlLnJlc29sdmU9ZnVuY3Rpb24odCl7cmV0dXJuIE4ucmVzb2x2ZUNhY2hlZCh0aGlzLHQpfSxfLnByb3RvdHlwZS5yZXNvbHZlTm9DYWNoZT1mdW5jdGlvbih0KXtyZXR1cm4gTi5yZXNvbHZlKHRoaXMsdCl9LF8ucHJvdG90eXBlLnJhbmdlSGFzTWFyaz1mdW5jdGlvbih0LGUsbil7dmFyIHI9ITE7cmV0dXJuIGU+dCYmdGhpcy5ub2Rlc0JldHdlZW4odCxlLChmdW5jdGlvbih0KXtyZXR1cm4gbi5pc0luU2V0KHQubWFya3MpJiYocj0hMCksIXJ9KSkscn0sRi5pc0Jsb2NrLmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLnR5cGUuaXNCbG9ja30sRi5pc1RleHRibG9jay5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy50eXBlLmlzVGV4dGJsb2NrfSxGLmlubGluZUNvbnRlbnQuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudHlwZS5pbmxpbmVDb250ZW50fSxGLmlzSW5saW5lLmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLnR5cGUuaXNJbmxpbmV9LEYuaXNUZXh0LmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLnR5cGUuaXNUZXh0fSxGLmlzTGVhZi5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy50eXBlLmlzTGVhZn0sRi5pc0F0b20uZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudHlwZS5pc0F0b219LF8ucHJvdG90eXBlLnRvU3RyaW5nPWZ1bmN0aW9uKCl7aWYodGhpcy50eXBlLnNwZWMudG9EZWJ1Z1N0cmluZylyZXR1cm4gdGhpcy50eXBlLnNwZWMudG9EZWJ1Z1N0cmluZyh0aGlzKTt2YXIgdD10aGlzLnR5cGUubmFtZTtyZXR1cm4gdGhpcy5jb250ZW50LnNpemUmJih0Kz0iKCIrdGhpcy5jb250ZW50LnRvU3RyaW5nSW5uZXIoKSsiKSIpLGoodGhpcy5tYXJrcyx0KX0sXy5wcm90b3R5cGUuY29udGVudE1hdGNoQXQ9ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy50eXBlLmNvbnRlbnRNYXRjaC5tYXRjaEZyYWdtZW50KHRoaXMuY29udGVudCwwLHQpO2lmKCFlKXRocm93IG5ldyBFcnJvcigiQ2FsbGVkIGNvbnRlbnRNYXRjaEF0IG9uIGEgbm9kZSB3aXRoIGludmFsaWQgY29udGVudCIpO3JldHVybiBlfSxfLnByb3RvdHlwZS5jYW5SZXBsYWNlPWZ1bmN0aW9uKHQsZSxuLHIsbyl7dmFyIGk9dGhpczt2b2lkIDA9PT1uJiYobj1hLmVtcHR5KSx2b2lkIDA9PT1yJiYocj0wKSx2b2lkIDA9PT1vJiYobz1uLmNoaWxkQ291bnQpO3ZhciBzPXRoaXMuY29udGVudE1hdGNoQXQodCkubWF0Y2hGcmFnbWVudChuLHIsbyksYz1zJiZzLm1hdGNoRnJhZ21lbnQodGhpcy5jb250ZW50LGUpO2lmKCFjfHwhYy52YWxpZEVuZClyZXR1cm4hMTtmb3IodmFyIGw9cjtsPG87bCsrKWlmKCFpLnR5cGUuYWxsb3dzTWFya3Mobi5jaGlsZChsKS5tYXJrcykpcmV0dXJuITE7cmV0dXJuITB9LF8ucHJvdG90eXBlLmNhblJlcGxhY2VXaXRoPWZ1bmN0aW9uKHQsZSxuLHIpe2lmKHImJiF0aGlzLnR5cGUuYWxsb3dzTWFya3MocikpcmV0dXJuITE7dmFyIG89dGhpcy5jb250ZW50TWF0Y2hBdCh0KS5tYXRjaFR5cGUobiksaT1vJiZvLm1hdGNoRnJhZ21lbnQodGhpcy5jb250ZW50LGUpO3JldHVybiEhaSYmaS52YWxpZEVuZH0sXy5wcm90b3R5cGUuY2FuQXBwZW5kPWZ1bmN0aW9uKHQpe3JldHVybiB0LmNvbnRlbnQuc2l6ZT90aGlzLmNhblJlcGxhY2UodGhpcy5jaGlsZENvdW50LHRoaXMuY2hpbGRDb3VudCx0LmNvbnRlbnQpOnRoaXMudHlwZS5jb21wYXRpYmxlQ29udGVudCh0LnR5cGUpfSxfLnByb3RvdHlwZS5kZWZhdWx0Q29udGVudFR5cGU9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuY29udGVudE1hdGNoQXQodCkuZGVmYXVsdFR5cGV9LF8ucHJvdG90eXBlLmNoZWNrPWZ1bmN0aW9uKCl7aWYoIXRoaXMudHlwZS52YWxpZENvbnRlbnQodGhpcy5jb250ZW50KSl0aHJvdyBuZXcgUmFuZ2VFcnJvcigiSW52YWxpZCBjb250ZW50IGZvciBub2RlICIrdGhpcy50eXBlLm5hbWUrIjogIit0aGlzLmNvbnRlbnQudG9TdHJpbmcoKS5zbGljZSgwLDUwKSk7dGhpcy5jb250ZW50LmZvckVhY2goKGZ1bmN0aW9uKHQpe3JldHVybiB0LmNoZWNrKCl9KSl9LF8ucHJvdG90eXBlLnRvSlNPTj1mdW5jdGlvbigpe3ZhciB0PXRoaXMsZT17dHlwZTp0aGlzLnR5cGUubmFtZX07Zm9yKHZhciBuIGluIHQuYXR0cnMpe2UuYXR0cnM9dC5hdHRyczticmVha31yZXR1cm4gdGhpcy5jb250ZW50LnNpemUmJihlLmNvbnRlbnQ9dGhpcy5jb250ZW50LnRvSlNPTigpKSx0aGlzLm1hcmtzLmxlbmd0aCYmKGUubWFya3M9dGhpcy5tYXJrcy5tYXAoKGZ1bmN0aW9uKHQpe3JldHVybiB0LnRvSlNPTigpfSkpKSxlfSxfLmZyb21KU09OPWZ1bmN0aW9uKHQsZSl7aWYoIWUpdGhyb3cgbmV3IFJhbmdlRXJyb3IoIkludmFsaWQgaW5wdXQgZm9yIE5vZGUuZnJvbUpTT04iKTt2YXIgbj1udWxsO2lmKGUubWFya3Mpe2lmKCFBcnJheS5pc0FycmF5KGUubWFya3MpKXRocm93IG5ldyBSYW5nZUVycm9yKCJJbnZhbGlkIG1hcmsgZGF0YSBmb3IgTm9kZS5mcm9tSlNPTiIpO249ZS5tYXJrcy5tYXAodC5tYXJrRnJvbUpTT04pfWlmKCJ0ZXh0Ij09ZS50eXBlKXtpZigic3RyaW5nIiE9dHlwZW9mIGUudGV4dCl0aHJvdyBuZXcgUmFuZ2VFcnJvcigiSW52YWxpZCB0ZXh0IG5vZGUgaW4gSlNPTiIpO3JldHVybiB0LnRleHQoZS50ZXh0LG4pfXZhciByPWEuZnJvbUpTT04odCxlLmNvbnRlbnQpO3JldHVybiB0Lm5vZGVUeXBlKGUudHlwZSkuY3JlYXRlKGUuYXR0cnMscixuKX0sT2JqZWN0LmRlZmluZVByb3BlcnRpZXMoXy5wcm90b3R5cGUsRik7dmFyIEI9ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZShlLG4scixvKXtpZih0LmNhbGwodGhpcyxlLG4sbnVsbCxvKSwhcil0aHJvdyBuZXcgUmFuZ2VFcnJvcigiRW1wdHkgdGV4dCBub2RlcyBhcmUgbm90IGFsbG93ZWQiKTt0aGlzLnRleHQ9cn10JiYoZS5fX3Byb3RvX189dCksZS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZSh0JiZ0LnByb3RvdHlwZSksZS5wcm90b3R5cGUuY29uc3RydWN0b3I9ZTt2YXIgbj17dGV4dENvbnRlbnQ6e30sbm9kZVNpemU6e319O3JldHVybiBlLnByb3RvdHlwZS50b1N0cmluZz1mdW5jdGlvbigpe3JldHVybiB0aGlzLnR5cGUuc3BlYy50b0RlYnVnU3RyaW5nP3RoaXMudHlwZS5zcGVjLnRvRGVidWdTdHJpbmcodGhpcyk6aih0aGlzLm1hcmtzLEpTT04uc3RyaW5naWZ5KHRoaXMudGV4dCkpfSxuLnRleHRDb250ZW50LmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLnRleHR9LGUucHJvdG90eXBlLnRleHRCZXR3ZWVuPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIHRoaXMudGV4dC5zbGljZSh0LGUpfSxuLm5vZGVTaXplLmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLnRleHQubGVuZ3RofSxlLnByb3RvdHlwZS5tYXJrPWZ1bmN0aW9uKHQpe3JldHVybiB0PT10aGlzLm1hcmtzP3RoaXM6bmV3IGUodGhpcy50eXBlLHRoaXMuYXR0cnMsdGhpcy50ZXh0LHQpfSxlLnByb3RvdHlwZS53aXRoVGV4dD1mdW5jdGlvbih0KXtyZXR1cm4gdD09dGhpcy50ZXh0P3RoaXM6bmV3IGUodGhpcy50eXBlLHRoaXMuYXR0cnMsdCx0aGlzLm1hcmtzKX0sZS5wcm90b3R5cGUuY3V0PWZ1bmN0aW9uKHQsZSl7cmV0dXJuIHZvaWQgMD09PXQmJih0PTApLHZvaWQgMD09PWUmJihlPXRoaXMudGV4dC5sZW5ndGgpLDA9PXQmJmU9PXRoaXMudGV4dC5sZW5ndGg/dGhpczp0aGlzLndpdGhUZXh0KHRoaXMudGV4dC5zbGljZSh0LGUpKX0sZS5wcm90b3R5cGUuZXE9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuc2FtZU1hcmt1cCh0KSYmdGhpcy50ZXh0PT10LnRleHR9LGUucHJvdG90eXBlLnRvSlNPTj1mdW5jdGlvbigpe3ZhciBlPXQucHJvdG90eXBlLnRvSlNPTi5jYWxsKHRoaXMpO3JldHVybiBlLnRleHQ9dGhpcy50ZXh0LGV9LE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKGUucHJvdG90eXBlLG4pLGV9KF8pO2Z1bmN0aW9uIGoodCxlKXtmb3IodmFyIG49dC5sZW5ndGgtMTtuPj0wO24tLSllPXRbbl0udHlwZS5uYW1lKyIoIitlKyIpIjtyZXR1cm4gZX12YXIgJD1mdW5jdGlvbih0KXt0aGlzLnZhbGlkRW5kPXQsdGhpcy5uZXh0PVtdLHRoaXMud3JhcENhY2hlPVtdfSxWPXtpbmxpbmVDb250ZW50Ont9LGRlZmF1bHRUeXBlOnt9LGVkZ2VDb3VudDp7fX07JC5wYXJzZT1mdW5jdGlvbih0LGUpe3ZhciBuPW5ldyBMKHQsZSk7aWYobnVsbD09bi5uZXh0KXJldHVybiAkLmVtcHR5O3ZhciByPXEobik7bi5uZXh0JiZuLmVycigiVW5leHBlY3RlZCB0cmFpbGluZyB0ZXh0Iik7dmFyIG89dHQoWShyKSk7cmV0dXJuIGV0KG8sbiksb30sJC5wcm90b3R5cGUubWF0Y2hUeXBlPWZ1bmN0aW9uKHQpe2Zvcih2YXIgZT10aGlzLG49MDtuPHRoaXMubmV4dC5sZW5ndGg7bis9MilpZihlLm5leHRbbl09PXQpcmV0dXJuIGUubmV4dFtuKzFdO3JldHVybiBudWxsfSwkLnByb3RvdHlwZS5tYXRjaEZyYWdtZW50PWZ1bmN0aW9uKHQsZSxuKXt2b2lkIDA9PT1lJiYoZT0wKSx2b2lkIDA9PT1uJiYobj10LmNoaWxkQ291bnQpO2Zvcih2YXIgcj10aGlzLG89ZTtyJiZvPG47bysrKXI9ci5tYXRjaFR5cGUodC5jaGlsZChvKS50eXBlKTtyZXR1cm4gcn0sVi5pbmxpbmVDb250ZW50LmdldD1mdW5jdGlvbigpe3ZhciB0PXRoaXMubmV4dFswXTtyZXR1cm4hIXQmJnQuaXNJbmxpbmV9LFYuZGVmYXVsdFR5cGUuZ2V0PWZ1bmN0aW9uKCl7Zm9yKHZhciB0PXRoaXMsZT0wO2U8dGhpcy5uZXh0Lmxlbmd0aDtlKz0yKXt2YXIgbj10Lm5leHRbZV07aWYoIW4uaXNUZXh0JiYhbi5oYXNSZXF1aXJlZEF0dHJzKCkpcmV0dXJuIG59fSwkLnByb3RvdHlwZS5jb21wYXRpYmxlPWZ1bmN0aW9uKHQpe2Zvcih2YXIgZT10aGlzLG49MDtuPHRoaXMubmV4dC5sZW5ndGg7bis9Milmb3IodmFyIHI9MDtyPHQubmV4dC5sZW5ndGg7cis9MilpZihlLm5leHRbbl09PXQubmV4dFtyXSlyZXR1cm4hMDtyZXR1cm4hMX0sJC5wcm90b3R5cGUuZmlsbEJlZm9yZT1mdW5jdGlvbih0LGUsbil7dm9pZCAwPT09ZSYmKGU9ITEpLHZvaWQgMD09PW4mJihuPTApO3ZhciByPVt0aGlzXTtmdW5jdGlvbiBvKGkscyl7dmFyIGM9aS5tYXRjaEZyYWdtZW50KHQsbik7aWYoYyYmKCFlfHxjLnZhbGlkRW5kKSlyZXR1cm4gYS5mcm9tKHMubWFwKChmdW5jdGlvbih0KXtyZXR1cm4gdC5jcmVhdGVBbmRGaWxsKCl9KSkpO2Zvcih2YXIgbD0wO2w8aS5uZXh0Lmxlbmd0aDtsKz0yKXt2YXIgcD1pLm5leHRbbF0sdT1pLm5leHRbbCsxXTtpZighcC5pc1RleHQmJiFwLmhhc1JlcXVpcmVkQXR0cnMoKSYmLTE9PXIuaW5kZXhPZih1KSl7ci5wdXNoKHUpO3ZhciBoPW8odSxzLmNvbmNhdChwKSk7aWYoaClyZXR1cm4gaH19fXJldHVybiBvKHRoaXMsW10pfSwkLnByb3RvdHlwZS5maW5kV3JhcHBpbmc9ZnVuY3Rpb24odCl7Zm9yKHZhciBlPXRoaXMsbj0wO248dGhpcy53cmFwQ2FjaGUubGVuZ3RoO24rPTIpaWYoZS53cmFwQ2FjaGVbbl09PXQpcmV0dXJuIGUud3JhcENhY2hlW24rMV07dmFyIHI9dGhpcy5jb21wdXRlV3JhcHBpbmcodCk7cmV0dXJuIHRoaXMud3JhcENhY2hlLnB1c2godCxyKSxyfSwkLnByb3RvdHlwZS5jb21wdXRlV3JhcHBpbmc9ZnVuY3Rpb24odCl7dmFyIGU9T2JqZWN0LmNyZWF0ZShudWxsKSxuPVt7bWF0Y2g6dGhpcyx0eXBlOm51bGwsdmlhOm51bGx9XTt3aGlsZShuLmxlbmd0aCl7dmFyIHI9bi5zaGlmdCgpLG89ci5tYXRjaDtpZihvLm1hdGNoVHlwZSh0KSl7Zm9yKHZhciBpPVtdLHM9cjtzLnR5cGU7cz1zLnZpYSlpLnB1c2gocy50eXBlKTtyZXR1cm4gaS5yZXZlcnNlKCl9Zm9yKHZhciBhPTA7YTxvLm5leHQubGVuZ3RoO2ErPTIpe3ZhciBjPW8ubmV4dFthXTtjLmlzTGVhZnx8Yy5oYXNSZXF1aXJlZEF0dHJzKCl8fGMubmFtZSBpbiBlfHxyLnR5cGUmJiFvLm5leHRbYSsxXS52YWxpZEVuZHx8KG4ucHVzaCh7bWF0Y2g6Yy5jb250ZW50TWF0Y2gsdHlwZTpjLHZpYTpyfSksZVtjLm5hbWVdPSEwKX19fSxWLmVkZ2VDb3VudC5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5uZXh0Lmxlbmd0aD4+MX0sJC5wcm90b3R5cGUuZWRnZT1mdW5jdGlvbih0KXt2YXIgZT10PDwxO2lmKGU+dGhpcy5uZXh0Lmxlbmd0aCl0aHJvdyBuZXcgUmFuZ2VFcnJvcigiVGhlcmUncyBubyAiK3QrInRoIGVkZ2UgaW4gdGhpcyBjb250ZW50IG1hdGNoIik7cmV0dXJue3R5cGU6dGhpcy5uZXh0W2VdLG5leHQ6dGhpcy5uZXh0W2UrMV19fSwkLnByb3RvdHlwZS50b1N0cmluZz1mdW5jdGlvbigpe3ZhciB0PVtdO2Z1bmN0aW9uIGUobil7dC5wdXNoKG4pO2Zvcih2YXIgcj0xO3I8bi5uZXh0Lmxlbmd0aDtyKz0yKS0xPT10LmluZGV4T2Yobi5uZXh0W3JdKSYmZShuLm5leHRbcl0pfXJldHVybiBlKHRoaXMpLHQubWFwKChmdW5jdGlvbihlLG4pe2Zvcih2YXIgcj1uKyhlLnZhbGlkRW5kPyIqIjoiICIpKyIgIixvPTA7bzxlLm5leHQubGVuZ3RoO28rPTIpcis9KG8/IiwgIjoiIikrZS5uZXh0W29dLm5hbWUrIi0+Iit0LmluZGV4T2YoZS5uZXh0W28rMV0pO3JldHVybiByfSkpLmpvaW4oIlxuIil9LE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKCQucHJvdG90eXBlLFYpLCQuZW1wdHk9bmV3ICQoITApO3ZhciBMPWZ1bmN0aW9uKHQsZSl7dGhpcy5zdHJpbmc9dCx0aGlzLm5vZGVUeXBlcz1lLHRoaXMuaW5saW5lPW51bGwsdGhpcy5wb3M9MCx0aGlzLnRva2Vucz10LnNwbGl0KC9ccyooPz1cYnxcV3wkKS8pLCIiPT10aGlzLnRva2Vuc1t0aGlzLnRva2Vucy5sZW5ndGgtMV0mJnRoaXMudG9rZW5zLnBvcCgpLCIiPT10aGlzLnRva2Vuc1swXSYmdGhpcy50b2tlbnMudW5zaGlmdCgpfSxKPXtuZXh0Ont9fTtmdW5jdGlvbiBxKHQpe3ZhciBlPVtdO2Rve2UucHVzaChXKHQpKX13aGlsZSh0LmVhdCgifCIpKTtyZXR1cm4gMT09ZS5sZW5ndGg/ZVswXTp7dHlwZToiY2hvaWNlIixleHByczplfX1mdW5jdGlvbiBXKHQpe3ZhciBlPVtdO2Rve2UucHVzaChIKHQpKX13aGlsZSh0Lm5leHQmJiIpIiE9dC5uZXh0JiYifCIhPXQubmV4dCk7cmV0dXJuIDE9PWUubGVuZ3RoP2VbMF06e3R5cGU6InNlcSIsZXhwcnM6ZX19ZnVuY3Rpb24gSCh0KXtmb3IodmFyIGU9WCh0KTs7KWlmKHQuZWF0KCIrIikpZT17dHlwZToicGx1cyIsZXhwcjplfTtlbHNlIGlmKHQuZWF0KCIqIikpZT17dHlwZToic3RhciIsZXhwcjplfTtlbHNlIGlmKHQuZWF0KCI/IikpZT17dHlwZToib3B0IixleHByOmV9O2Vsc2V7aWYoIXQuZWF0KCJ7IikpYnJlYWs7ZT1VKHQsZSl9cmV0dXJuIGV9ZnVuY3Rpb24gSyh0KXsvXEQvLnRlc3QodC5uZXh0KSYmdC5lcnIoIkV4cGVjdGVkIG51bWJlciwgZ290ICciK3QubmV4dCsiJyIpO3ZhciBlPU51bWJlcih0Lm5leHQpO3JldHVybiB0LnBvcysrLGV9ZnVuY3Rpb24gVSh0LGUpe3ZhciBuPUsodCkscj1uO3JldHVybiB0LmVhdCgiLCIpJiYocj0ifSIhPXQubmV4dD9LKHQpOi0xKSx0LmVhdCgifSIpfHx0LmVycigiVW5jbG9zZWQgYnJhY2VkIHJhbmdlIikse3R5cGU6InJhbmdlIixtaW46bixtYXg6cixleHByOmV9fWZ1bmN0aW9uIEcodCxlKXt2YXIgbj10Lm5vZGVUeXBlcyxyPW5bZV07aWYocilyZXR1cm5bcl07dmFyIG89W107Zm9yKHZhciBpIGluIG4pe3ZhciBzPW5baV07cy5ncm91cHMuaW5kZXhPZihlKT4tMSYmby5wdXNoKHMpfXJldHVybiAwPT1vLmxlbmd0aCYmdC5lcnIoIk5vIG5vZGUgdHlwZSBvciBncm91cCAnIitlKyInIGZvdW5kIiksb31mdW5jdGlvbiBYKHQpe2lmKHQuZWF0KCIoIikpe3ZhciBlPXEodCk7cmV0dXJuIHQuZWF0KCIpIil8fHQuZXJyKCJNaXNzaW5nIGNsb3NpbmcgcGFyZW4iKSxlfWlmKCEvXFcvLnRlc3QodC5uZXh0KSl7dmFyIG49Ryh0LHQubmV4dCkubWFwKChmdW5jdGlvbihlKXtyZXR1cm4gbnVsbD09dC5pbmxpbmU/dC5pbmxpbmU9ZS5pc0lubGluZTp0LmlubGluZSE9ZS5pc0lubGluZSYmdC5lcnIoIk1peGluZyBpbmxpbmUgYW5kIGJsb2NrIGNvbnRlbnQiKSx7dHlwZToibmFtZSIsdmFsdWU6ZX19KSk7cmV0dXJuIHQucG9zKyssMT09bi5sZW5ndGg/blswXTp7dHlwZToiY2hvaWNlIixleHByczpufX10LmVycigiVW5leHBlY3RlZCB0b2tlbiAnIit0Lm5leHQrIiciKX1mdW5jdGlvbiBZKHQpe3ZhciBlPVtbXV07cmV0dXJuIG8oaSh0LDApLG4oKSksZTtmdW5jdGlvbiBuKCl7cmV0dXJuIGUucHVzaChbXSktMX1mdW5jdGlvbiByKHQsbixyKXt2YXIgbz17dGVybTpyLHRvOm59O3JldHVybiBlW3RdLnB1c2gobyksb31mdW5jdGlvbiBvKHQsZSl7dC5mb3JFYWNoKChmdW5jdGlvbih0KXtyZXR1cm4gdC50bz1lfSkpfWZ1bmN0aW9uIGkodCxlKXtpZigiY2hvaWNlIj09dC50eXBlKXJldHVybiB0LmV4cHJzLnJlZHVjZSgoZnVuY3Rpb24odCxuKXtyZXR1cm4gdC5jb25jYXQoaShuLGUpKX0pLFtdKTtpZigic2VxIj09dC50eXBlKWZvcih2YXIgcz0wOztzKyspe3ZhciBhPWkodC5leHByc1tzXSxlKTtpZihzPT10LmV4cHJzLmxlbmd0aC0xKXJldHVybiBhO28oYSxlPW4oKSl9ZWxzZXtpZigic3RhciI9PXQudHlwZSl7dmFyIGM9bigpO3JldHVybiByKGUsYyksbyhpKHQuZXhwcixjKSxjKSxbcihjKV19aWYoInBsdXMiPT10LnR5cGUpe3ZhciBsPW4oKTtyZXR1cm4gbyhpKHQuZXhwcixlKSxsKSxvKGkodC5leHByLGwpLGwpLFtyKGwpXX1pZigib3B0Ij09dC50eXBlKXJldHVybltyKGUpXS5jb25jYXQoaSh0LmV4cHIsZSkpO2lmKCJyYW5nZSI9PXQudHlwZSl7Zm9yKHZhciBwPWUsdT0wO3U8dC5taW47dSsrKXt2YXIgaD1uKCk7byhpKHQuZXhwcixwKSxoKSxwPWh9aWYoLTE9PXQubWF4KW8oaSh0LmV4cHIscCkscCk7ZWxzZSBmb3IodmFyIGY9dC5taW47Zjx0Lm1heDtmKyspe3ZhciBkPW4oKTtyKHAsZCksbyhpKHQuZXhwcixwKSxkKSxwPWR9cmV0dXJuW3IocCldfWlmKCJuYW1lIj09dC50eXBlKXJldHVybltyKGUsbnVsbCx0LnZhbHVlKV19fX1mdW5jdGlvbiBRKHQsZSl7cmV0dXJuIHQtZX1mdW5jdGlvbiBaKHQsZSl7dmFyIG49W107cmV0dXJuIHIoZSksbi5zb3J0KFEpO2Z1bmN0aW9uIHIoZSl7dmFyIG89dFtlXTtpZigxPT1vLmxlbmd0aCYmIW9bMF0udGVybSlyZXR1cm4gcihvWzBdLnRvKTtuLnB1c2goZSk7Zm9yKHZhciBpPTA7aTxvLmxlbmd0aDtpKyspe3ZhciBzPW9baV0sYT1zLnRlcm0sYz1zLnRvO2F8fC0xIT1uLmluZGV4T2YoYyl8fHIoYyl9fX1mdW5jdGlvbiB0dCh0KXt2YXIgZT1PYmplY3QuY3JlYXRlKG51bGwpO3JldHVybiBuKFoodCwwKSk7ZnVuY3Rpb24gbihyKXt2YXIgbz1bXTtyLmZvckVhY2goKGZ1bmN0aW9uKGUpe3RbZV0uZm9yRWFjaCgoZnVuY3Rpb24oZSl7dmFyIG49ZS50ZXJtLHI9ZS50bztpZihuKXt2YXIgaT1vLmluZGV4T2Yobikscz1pPi0xJiZvW2krMV07Wih0LHIpLmZvckVhY2goKGZ1bmN0aW9uKHQpe3N8fG8ucHVzaChuLHM9W10pLC0xPT1zLmluZGV4T2YodCkmJnMucHVzaCh0KX0pKX19KSl9KSk7Zm9yKHZhciBpPWVbci5qb2luKCIsIildPW5ldyAkKHIuaW5kZXhPZih0Lmxlbmd0aC0xKT4tMSkscz0wO3M8by5sZW5ndGg7cys9Mil7dmFyIGE9b1tzKzFdLnNvcnQoUSk7aS5uZXh0LnB1c2gob1tzXSxlW2Euam9pbigiLCIpXXx8bihhKSl9cmV0dXJuIGl9fWZ1bmN0aW9uIGV0KHQsZSl7Zm9yKHZhciBuPTAscj1bdF07bjxyLmxlbmd0aDtuKyspe2Zvcih2YXIgbz1yW25dLGk9IW8udmFsaWRFbmQscz1bXSxhPTA7YTxvLm5leHQubGVuZ3RoO2ErPTIpe3ZhciBjPW8ubmV4dFthXSxsPW8ubmV4dFthKzFdO3MucHVzaChjLm5hbWUpLCFpfHxjLmlzVGV4dHx8Yy5oYXNSZXF1aXJlZEF0dHJzKCl8fChpPSExKSwtMT09ci5pbmRleE9mKGwpJiZyLnB1c2gobCl9aSYmZS5lcnIoIk9ubHkgbm9uLWdlbmVyYXRhYmxlIG5vZGVzICgiK3Muam9pbigiLCAiKSsiKSBpbiBhIHJlcXVpcmVkIHBvc2l0aW9uIil9fWZ1bmN0aW9uIG50KHQpe3ZhciBlPU9iamVjdC5jcmVhdGUobnVsbCk7Zm9yKHZhciBuIGluIHQpe3ZhciByPXRbbl07aWYoIXIuaGFzRGVmYXVsdClyZXR1cm4gbnVsbDtlW25dPXIuZGVmYXVsdH1yZXR1cm4gZX1mdW5jdGlvbiBydCh0LGUpe3ZhciBuPU9iamVjdC5jcmVhdGUobnVsbCk7Zm9yKHZhciByIGluIHQpe3ZhciBvPWUmJmVbcl07aWYodm9pZCAwPT09byl7dmFyIGk9dFtyXTtpZighaS5oYXNEZWZhdWx0KXRocm93IG5ldyBSYW5nZUVycm9yKCJObyB2YWx1ZSBzdXBwbGllZCBmb3IgYXR0cmlidXRlICIrcik7bz1pLmRlZmF1bHR9bltyXT1vfXJldHVybiBufWZ1bmN0aW9uIG90KHQpe3ZhciBlPU9iamVjdC5jcmVhdGUobnVsbCk7aWYodClmb3IodmFyIG4gaW4gdCllW25dPW5ldyBhdCh0W25dKTtyZXR1cm4gZX1KLm5leHQuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudG9rZW5zW3RoaXMucG9zXX0sTC5wcm90b3R5cGUuZWF0PWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLm5leHQ9PXQmJih0aGlzLnBvcysrfHwhMCl9LEwucHJvdG90eXBlLmVycj1mdW5jdGlvbih0KXt0aHJvdyBuZXcgU3ludGF4RXJyb3IodCsiIChpbiBjb250ZW50IGV4cHJlc3Npb24gJyIrdGhpcy5zdHJpbmcrIicpIil9LE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKEwucHJvdG90eXBlLEopO3ZhciBpdD1mdW5jdGlvbih0LGUsbil7dGhpcy5uYW1lPXQsdGhpcy5zY2hlbWE9ZSx0aGlzLnNwZWM9bix0aGlzLmdyb3Vwcz1uLmdyb3VwP24uZ3JvdXAuc3BsaXQoIiAiKTpbXSx0aGlzLmF0dHJzPW90KG4uYXR0cnMpLHRoaXMuZGVmYXVsdEF0dHJzPW50KHRoaXMuYXR0cnMpLHRoaXMuY29udGVudE1hdGNoPW51bGwsdGhpcy5tYXJrU2V0PW51bGwsdGhpcy5pbmxpbmVDb250ZW50PW51bGwsdGhpcy5pc0Jsb2NrPSEobi5pbmxpbmV8fCJ0ZXh0Ij09dCksdGhpcy5pc1RleHQ9InRleHQiPT10fSxzdD17aXNJbmxpbmU6e30saXNUZXh0YmxvY2s6e30saXNMZWFmOnt9LGlzQXRvbTp7fX07c3QuaXNJbmxpbmUuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIXRoaXMuaXNCbG9ja30sc3QuaXNUZXh0YmxvY2suZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuaXNCbG9jayYmdGhpcy5pbmxpbmVDb250ZW50fSxzdC5pc0xlYWYuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY29udGVudE1hdGNoPT0kLmVtcHR5fSxzdC5pc0F0b20uZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuaXNMZWFmfHx0aGlzLnNwZWMuYXRvbX0saXQucHJvdG90eXBlLmhhc1JlcXVpcmVkQXR0cnM9ZnVuY3Rpb24odCl7dmFyIGU9dGhpcztmb3IodmFyIG4gaW4gZS5hdHRycylpZihlLmF0dHJzW25dLmlzUmVxdWlyZWQmJighdHx8IShuIGluIHQpKSlyZXR1cm4hMDtyZXR1cm4hMX0saXQucHJvdG90eXBlLmNvbXBhdGlibGVDb250ZW50PWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzPT10fHx0aGlzLmNvbnRlbnRNYXRjaC5jb21wYXRpYmxlKHQuY29udGVudE1hdGNoKX0saXQucHJvdG90eXBlLmNvbXB1dGVBdHRycz1mdW5jdGlvbih0KXtyZXR1cm4hdCYmdGhpcy5kZWZhdWx0QXR0cnM/dGhpcy5kZWZhdWx0QXR0cnM6cnQodGhpcy5hdHRycyx0KX0saXQucHJvdG90eXBlLmNyZWF0ZT1mdW5jdGlvbih0LGUsbil7aWYodGhpcy5pc1RleHQpdGhyb3cgbmV3IEVycm9yKCJOb2RlVHlwZS5jcmVhdGUgY2FuJ3QgY29uc3RydWN0IHRleHQgbm9kZXMiKTtyZXR1cm4gbmV3IF8odGhpcyx0aGlzLmNvbXB1dGVBdHRycyh0KSxhLmZyb20oZSksaC5zZXRGcm9tKG4pKX0saXQucHJvdG90eXBlLmNyZWF0ZUNoZWNrZWQ9ZnVuY3Rpb24odCxlLG4pe2lmKGU9YS5mcm9tKGUpLCF0aGlzLnZhbGlkQ29udGVudChlKSl0aHJvdyBuZXcgUmFuZ2VFcnJvcigiSW52YWxpZCBjb250ZW50IGZvciBub2RlICIrdGhpcy5uYW1lKTtyZXR1cm4gbmV3IF8odGhpcyx0aGlzLmNvbXB1dGVBdHRycyh0KSxlLGguc2V0RnJvbShuKSl9LGl0LnByb3RvdHlwZS5jcmVhdGVBbmRGaWxsPWZ1bmN0aW9uKHQsZSxuKXtpZih0PXRoaXMuY29tcHV0ZUF0dHJzKHQpLGU9YS5mcm9tKGUpLGUuc2l6ZSl7dmFyIHI9dGhpcy5jb250ZW50TWF0Y2guZmlsbEJlZm9yZShlKTtpZighcilyZXR1cm4gbnVsbDtlPXIuYXBwZW5kKGUpfXZhciBvPXRoaXMuY29udGVudE1hdGNoLm1hdGNoRnJhZ21lbnQoZSkuZmlsbEJlZm9yZShhLmVtcHR5LCEwKTtyZXR1cm4gbz9uZXcgXyh0aGlzLHQsZS5hcHBlbmQobyksaC5zZXRGcm9tKG4pKTpudWxsfSxpdC5wcm90b3R5cGUudmFsaWRDb250ZW50PWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMsbj10aGlzLmNvbnRlbnRNYXRjaC5tYXRjaEZyYWdtZW50KHQpO2lmKCFufHwhbi52YWxpZEVuZClyZXR1cm4hMTtmb3IodmFyIHI9MDtyPHQuY2hpbGRDb3VudDtyKyspaWYoIWUuYWxsb3dzTWFya3ModC5jaGlsZChyKS5tYXJrcykpcmV0dXJuITE7cmV0dXJuITB9LGl0LnByb3RvdHlwZS5hbGxvd3NNYXJrVHlwZT1mdW5jdGlvbih0KXtyZXR1cm4gbnVsbD09dGhpcy5tYXJrU2V0fHx0aGlzLm1hcmtTZXQuaW5kZXhPZih0KT4tMX0saXQucHJvdG90eXBlLmFsbG93c01hcmtzPWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXM7aWYobnVsbD09dGhpcy5tYXJrU2V0KXJldHVybiEwO2Zvcih2YXIgbj0wO248dC5sZW5ndGg7bisrKWlmKCFlLmFsbG93c01hcmtUeXBlKHRbbl0udHlwZSkpcmV0dXJuITE7cmV0dXJuITB9LGl0LnByb3RvdHlwZS5hbGxvd2VkTWFya3M9ZnVuY3Rpb24odCl7dmFyIGUsbj10aGlzO2lmKG51bGw9PXRoaXMubWFya1NldClyZXR1cm4gdDtmb3IodmFyIHI9MDtyPHQubGVuZ3RoO3IrKyluLmFsbG93c01hcmtUeXBlKHRbcl0udHlwZSk/ZSYmZS5wdXNoKHRbcl0pOmV8fChlPXQuc2xpY2UoMCxyKSk7cmV0dXJuIGU/ZS5sZW5ndGg/ZTpoLmVtcHR5OnR9LGl0LmNvbXBpbGU9ZnVuY3Rpb24odCxlKXt2YXIgbj1PYmplY3QuY3JlYXRlKG51bGwpO3QuZm9yRWFjaCgoZnVuY3Rpb24odCxyKXtyZXR1cm4gblt0XT1uZXcgaXQodCxlLHIpfSkpO3ZhciByPWUuc3BlYy50b3BOb2RlfHwiZG9jIjtpZighbltyXSl0aHJvdyBuZXcgUmFuZ2VFcnJvcigiU2NoZW1hIGlzIG1pc3NpbmcgaXRzIHRvcCBub2RlIHR5cGUgKCciK3IrIicpIik7aWYoIW4udGV4dCl0aHJvdyBuZXcgUmFuZ2VFcnJvcigiRXZlcnkgc2NoZW1hIG5lZWRzIGEgJ3RleHQnIHR5cGUiKTtmb3IodmFyIG8gaW4gbi50ZXh0LmF0dHJzKXRocm93IG5ldyBSYW5nZUVycm9yKCJUaGUgdGV4dCBub2RlIHR5cGUgc2hvdWxkIG5vdCBoYXZlIGF0dHJpYnV0ZXMiKTtyZXR1cm4gbn0sT2JqZWN0LmRlZmluZVByb3BlcnRpZXMoaXQucHJvdG90eXBlLHN0KTt2YXIgYXQ9ZnVuY3Rpb24odCl7dGhpcy5oYXNEZWZhdWx0PU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbCh0LCJkZWZhdWx0IiksdGhpcy5kZWZhdWx0PXQuZGVmYXVsdH0sY3Q9e2lzUmVxdWlyZWQ6e319O2N0LmlzUmVxdWlyZWQuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIXRoaXMuaGFzRGVmYXVsdH0sT2JqZWN0LmRlZmluZVByb3BlcnRpZXMoYXQucHJvdG90eXBlLGN0KTt2YXIgbHQ9ZnVuY3Rpb24odCxlLG4scil7dGhpcy5uYW1lPXQsdGhpcy5zY2hlbWE9bix0aGlzLnNwZWM9cix0aGlzLmF0dHJzPW90KHIuYXR0cnMpLHRoaXMucmFuaz1lLHRoaXMuZXhjbHVkZWQ9bnVsbDt2YXIgbz1udCh0aGlzLmF0dHJzKTt0aGlzLmluc3RhbmNlPW8mJm5ldyBoKHRoaXMsbyl9O2x0LnByb3RvdHlwZS5jcmVhdGU9ZnVuY3Rpb24odCl7cmV0dXJuIXQmJnRoaXMuaW5zdGFuY2U/dGhpcy5pbnN0YW5jZTpuZXcgaCh0aGlzLHJ0KHRoaXMuYXR0cnMsdCkpfSxsdC5jb21waWxlPWZ1bmN0aW9uKHQsZSl7dmFyIG49T2JqZWN0LmNyZWF0ZShudWxsKSxyPTA7cmV0dXJuIHQuZm9yRWFjaCgoZnVuY3Rpb24odCxvKXtyZXR1cm4gblt0XT1uZXcgbHQodCxyKyssZSxvKX0pKSxufSxsdC5wcm90b3R5cGUucmVtb3ZlRnJvbVNldD1mdW5jdGlvbih0KXtmb3IodmFyIGU9dGhpcyxuPTA7bjx0Lmxlbmd0aDtuKyspaWYodFtuXS50eXBlPT1lKXJldHVybiB0LnNsaWNlKDAsbikuY29uY2F0KHQuc2xpY2UobisxKSk7cmV0dXJuIHR9LGx0LnByb3RvdHlwZS5pc0luU2V0PWZ1bmN0aW9uKHQpe2Zvcih2YXIgZT10aGlzLG49MDtuPHQubGVuZ3RoO24rKylpZih0W25dLnR5cGU9PWUpcmV0dXJuIHRbbl19LGx0LnByb3RvdHlwZS5leGNsdWRlcz1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5leGNsdWRlZC5pbmRleE9mKHQpPi0xfTt2YXIgcHQ9ZnVuY3Rpb24odCl7dmFyIGU9dGhpcztmb3IodmFyIG4gaW4gdGhpcy5zcGVjPXt9LHQpZS5zcGVjW25dPXRbbl07dGhpcy5zcGVjLm5vZGVzPW8uZnJvbSh0Lm5vZGVzKSx0aGlzLnNwZWMubWFya3M9by5mcm9tKHQubWFya3MpLHRoaXMubm9kZXM9aXQuY29tcGlsZSh0aGlzLnNwZWMubm9kZXMsdGhpcyksdGhpcy5tYXJrcz1sdC5jb21waWxlKHRoaXMuc3BlYy5tYXJrcyx0aGlzKTt2YXIgcj1PYmplY3QuY3JlYXRlKG51bGwpO2Zvcih2YXIgaSBpbiBlLm5vZGVzKXtpZihpIGluIGUubWFya3MpdGhyb3cgbmV3IFJhbmdlRXJyb3IoaSsiIGNhbiBub3QgYmUgYm90aCBhIG5vZGUgYW5kIGEgbWFyayIpO3ZhciBzPWUubm9kZXNbaV0sYT1zLnNwZWMuY29udGVudHx8IiIsYz1zLnNwZWMubWFya3M7cy5jb250ZW50TWF0Y2g9clthXXx8KHJbYV09JC5wYXJzZShhLGUubm9kZXMpKSxzLmlubGluZUNvbnRlbnQ9cy5jb250ZW50TWF0Y2guaW5saW5lQ29udGVudCxzLm1hcmtTZXQ9Il8iPT1jP251bGw6Yz91dChlLGMuc3BsaXQoIiAiKSk6IiIhPWMmJnMuaW5saW5lQ29udGVudD9udWxsOltdfWZvcih2YXIgbCBpbiBlLm1hcmtzKXt2YXIgcD1lLm1hcmtzW2xdLHU9cC5zcGVjLmV4Y2x1ZGVzO3AuZXhjbHVkZWQ9bnVsbD09dT9bcF06IiI9PXU/W106dXQoZSx1LnNwbGl0KCIgIikpfXRoaXMubm9kZUZyb21KU09OPXRoaXMubm9kZUZyb21KU09OLmJpbmQodGhpcyksdGhpcy5tYXJrRnJvbUpTT049dGhpcy5tYXJrRnJvbUpTT04uYmluZCh0aGlzKSx0aGlzLnRvcE5vZGVUeXBlPXRoaXMubm9kZXNbdGhpcy5zcGVjLnRvcE5vZGV8fCJkb2MiXSx0aGlzLmNhY2hlZD1PYmplY3QuY3JlYXRlKG51bGwpLHRoaXMuY2FjaGVkLndyYXBwaW5ncz1PYmplY3QuY3JlYXRlKG51bGwpfTtmdW5jdGlvbiB1dCh0LGUpe2Zvcih2YXIgbj1bXSxyPTA7cjxlLmxlbmd0aDtyKyspe3ZhciBvPWVbcl0saT10Lm1hcmtzW29dLHM9aTtpZihpKW4ucHVzaChpKTtlbHNlIGZvcih2YXIgYSBpbiB0Lm1hcmtzKXt2YXIgYz10Lm1hcmtzW2FdOygiXyI9PW98fGMuc3BlYy5ncm91cCYmYy5zcGVjLmdyb3VwLnNwbGl0KCIgIikuaW5kZXhPZihvKT4tMSkmJm4ucHVzaChzPWMpfWlmKCFzKXRocm93IG5ldyBTeW50YXhFcnJvcigiVW5rbm93biBtYXJrIHR5cGU6ICciK2Vbcl0rIiciKX1yZXR1cm4gbn1wdC5wcm90b3R5cGUubm9kZT1mdW5jdGlvbih0LGUsbixyKXtpZigic3RyaW5nIj09dHlwZW9mIHQpdD10aGlzLm5vZGVUeXBlKHQpO2Vsc2V7aWYoISh0IGluc3RhbmNlb2YgaXQpKXRocm93IG5ldyBSYW5nZUVycm9yKCJJbnZhbGlkIG5vZGUgdHlwZTogIit0KTtpZih0LnNjaGVtYSE9dGhpcyl0aHJvdyBuZXcgUmFuZ2VFcnJvcigiTm9kZSB0eXBlIGZyb20gZGlmZmVyZW50IHNjaGVtYSB1c2VkICgiK3QubmFtZSsiKSIpfXJldHVybiB0LmNyZWF0ZUNoZWNrZWQoZSxuLHIpfSxwdC5wcm90b3R5cGUudGV4dD1mdW5jdGlvbih0LGUpe3ZhciBuPXRoaXMubm9kZXMudGV4dDtyZXR1cm4gbmV3IEIobixuLmRlZmF1bHRBdHRycyx0LGguc2V0RnJvbShlKSl9LHB0LnByb3RvdHlwZS5tYXJrPWZ1bmN0aW9uKHQsZSl7cmV0dXJuInN0cmluZyI9PXR5cGVvZiB0JiYodD10aGlzLm1hcmtzW3RdKSx0LmNyZWF0ZShlKX0scHQucHJvdG90eXBlLm5vZGVGcm9tSlNPTj1mdW5jdGlvbih0KXtyZXR1cm4gXy5mcm9tSlNPTih0aGlzLHQpfSxwdC5wcm90b3R5cGUubWFya0Zyb21KU09OPWZ1bmN0aW9uKHQpe3JldHVybiBoLmZyb21KU09OKHRoaXMsdCl9LHB0LnByb3RvdHlwZS5ub2RlVHlwZT1mdW5jdGlvbih0KXt2YXIgZT10aGlzLm5vZGVzW3RdO2lmKCFlKXRocm93IG5ldyBSYW5nZUVycm9yKCJVbmtub3duIG5vZGUgdHlwZTogIit0KTtyZXR1cm4gZX07dmFyIGh0PWZ1bmN0aW9uKHQsZSl7dmFyIG49dGhpczt0aGlzLnNjaGVtYT10LHRoaXMucnVsZXM9ZSx0aGlzLnRhZ3M9W10sdGhpcy5zdHlsZXM9W10sZS5mb3JFYWNoKChmdW5jdGlvbih0KXt0LnRhZz9uLnRhZ3MucHVzaCh0KTp0LnN0eWxlJiZuLnN0eWxlcy5wdXNoKHQpfSkpfTtodC5wcm90b3R5cGUucGFyc2U9ZnVuY3Rpb24odCxlKXt2b2lkIDA9PT1lJiYoZT17fSk7dmFyIG49bmV3IGJ0KHRoaXMsZSwhMSk7cmV0dXJuIG4uYWRkQWxsKHQsbnVsbCxlLmZyb20sZS50byksbi5maW5pc2goKX0saHQucHJvdG90eXBlLnBhcnNlU2xpY2U9ZnVuY3Rpb24odCxlKXt2b2lkIDA9PT1lJiYoZT17fSk7dmFyIG49bmV3IGJ0KHRoaXMsZSwhMCk7cmV0dXJuIG4uYWRkQWxsKHQsbnVsbCxlLmZyb20sZS50byksZC5tYXhPcGVuKG4uZmluaXNoKCkpfSxodC5wcm90b3R5cGUubWF0Y2hUYWc9ZnVuY3Rpb24odCxlKXtmb3IodmFyIG49dGhpcyxyPTA7cjx0aGlzLnRhZ3MubGVuZ3RoO3IrKyl7dmFyIG89bi50YWdzW3JdO2lmKEN0KHQsby50YWcpJiYodm9pZCAwPT09by5uYW1lc3BhY2V8fHQubmFtZXNwYWNlVVJJPT1vLm5hbWVzcGFjZSkmJighby5jb250ZXh0fHxlLm1hdGNoZXNDb250ZXh0KG8uY29udGV4dCkpKXtpZihvLmdldEF0dHJzKXt2YXIgaT1vLmdldEF0dHJzKHQpO2lmKCExPT09aSljb250aW51ZTtvLmF0dHJzPWl9cmV0dXJuIG99fX0saHQucHJvdG90eXBlLm1hdGNoU3R5bGU9ZnVuY3Rpb24odCxlLG4pe2Zvcih2YXIgcj10aGlzLG89MDtvPHRoaXMuc3R5bGVzLmxlbmd0aDtvKyspe3ZhciBpPXIuc3R5bGVzW29dO2lmKCEoMCE9aS5zdHlsZS5pbmRleE9mKHQpfHxpLmNvbnRleHQmJiFuLm1hdGNoZXNDb250ZXh0KGkuY29udGV4dCl8fGkuc3R5bGUubGVuZ3RoPnQubGVuZ3RoJiYoNjEhPWkuc3R5bGUuY2hhckNvZGVBdCh0Lmxlbmd0aCl8fGkuc3R5bGUuc2xpY2UodC5sZW5ndGgrMSkhPWUpKSl7aWYoaS5nZXRBdHRycyl7dmFyIHM9aS5nZXRBdHRycyhlKTtpZighMT09PXMpY29udGludWU7aS5hdHRycz1zfXJldHVybiBpfX19LGh0LnNjaGVtYVJ1bGVzPWZ1bmN0aW9uKHQpe3ZhciBlPVtdO2Z1bmN0aW9uIG4odCl7Zm9yKHZhciBuPW51bGw9PXQucHJpb3JpdHk/NTA6dC5wcmlvcml0eSxyPTA7cjxlLmxlbmd0aDtyKyspe3ZhciBvPWVbcl0saT1udWxsPT1vLnByaW9yaXR5PzUwOm8ucHJpb3JpdHk7aWYoaTxuKWJyZWFrfWUuc3BsaWNlKHIsMCx0KX12YXIgcj1mdW5jdGlvbihlKXt2YXIgcj10Lm1hcmtzW2VdLnNwZWMucGFyc2VET007ciYmci5mb3JFYWNoKChmdW5jdGlvbih0KXtuKHQ9TXQodCkpLHQubWFyaz1lfSkpfTtmb3IodmFyIG8gaW4gdC5tYXJrcylyKG8pO3ZhciBpPWZ1bmN0aW9uKGUpe3ZhciByPXQubm9kZXNbc10uc3BlYy5wYXJzZURPTTtyJiZyLmZvckVhY2goKGZ1bmN0aW9uKHQpe24odD1NdCh0KSksdC5ub2RlPXN9KSl9O2Zvcih2YXIgcyBpbiB0Lm5vZGVzKWkobyk7cmV0dXJuIGV9LGh0LmZyb21TY2hlbWE9ZnVuY3Rpb24odCl7cmV0dXJuIHQuY2FjaGVkLmRvbVBhcnNlcnx8KHQuY2FjaGVkLmRvbVBhcnNlcj1uZXcgaHQodCxodC5zY2hlbWFSdWxlcyh0KSkpfTt2YXIgZnQ9e2FkZHJlc3M6ITAsYXJ0aWNsZTohMCxhc2lkZTohMCxibG9ja3F1b3RlOiEwLGNhbnZhczohMCxkZDohMCxkaXY6ITAsZGw6ITAsZmllbGRzZXQ6ITAsZmlnY2FwdGlvbjohMCxmaWd1cmU6ITAsZm9vdGVyOiEwLGZvcm06ITAsaDE6ITAsaDI6ITAsaDM6ITAsaDQ6ITAsaDU6ITAsaDY6ITAsaGVhZGVyOiEwLGhncm91cDohMCxocjohMCxsaTohMCxub3NjcmlwdDohMCxvbDohMCxvdXRwdXQ6ITAscDohMCxwcmU6ITAsc2VjdGlvbjohMCx0YWJsZTohMCx0Zm9vdDohMCx1bDohMH0sZHQ9e2hlYWQ6ITAsbm9zY3JpcHQ6ITAsb2JqZWN0OiEwLHNjcmlwdDohMCxzdHlsZTohMCx0aXRsZTohMH0sdnQ9e29sOiEwLHVsOiEwfSxtdD0xLHl0PTIsZ3Q9NDtmdW5jdGlvbiB3dCh0KXtyZXR1cm4odD9tdDowKXwoImZ1bGwiPT09dD95dDowKX12YXIgeHQ9ZnVuY3Rpb24odCxlLG4scixvLGkpe3RoaXMudHlwZT10LHRoaXMuYXR0cnM9ZSx0aGlzLnNvbGlkPXIsdGhpcy5tYXRjaD1vfHwoaSZndD9udWxsOnQuY29udGVudE1hdGNoKSx0aGlzLm9wdGlvbnM9aSx0aGlzLmNvbnRlbnQ9W10sdGhpcy5tYXJrcz1uLHRoaXMuYWN0aXZlTWFya3M9aC5ub25lfTt4dC5wcm90b3R5cGUuZmluZFdyYXBwaW5nPWZ1bmN0aW9uKHQpe2lmKCF0aGlzLm1hdGNoKXtpZighdGhpcy50eXBlKXJldHVybltdO3ZhciBlPXRoaXMudHlwZS5jb250ZW50TWF0Y2guZmlsbEJlZm9yZShhLmZyb20odCkpO2lmKCFlKXt2YXIgbixyPXRoaXMudHlwZS5jb250ZW50TWF0Y2g7cmV0dXJuKG49ci5maW5kV3JhcHBpbmcodC50eXBlKSk/KHRoaXMubWF0Y2g9cixuKTpudWxsfXRoaXMubWF0Y2g9dGhpcy50eXBlLmNvbnRlbnRNYXRjaC5tYXRjaEZyYWdtZW50KGUpfXJldHVybiB0aGlzLm1hdGNoLmZpbmRXcmFwcGluZyh0LnR5cGUpfSx4dC5wcm90b3R5cGUuZmluaXNoPWZ1bmN0aW9uKHQpe2lmKCEodGhpcy5vcHRpb25zJm10KSl7dmFyIGUsbj10aGlzLmNvbnRlbnRbdGhpcy5jb250ZW50Lmxlbmd0aC0xXTtuJiZuLmlzVGV4dCYmKGU9L1xzKyQvLmV4ZWMobi50ZXh0KSkmJihuLnRleHQubGVuZ3RoPT1lWzBdLmxlbmd0aD90aGlzLmNvbnRlbnQucG9wKCk6dGhpcy5jb250ZW50W3RoaXMuY29udGVudC5sZW5ndGgtMV09bi53aXRoVGV4dChuLnRleHQuc2xpY2UoMCxuLnRleHQubGVuZ3RoLWVbMF0ubGVuZ3RoKSkpfXZhciByPWEuZnJvbSh0aGlzLmNvbnRlbnQpO3JldHVybiF0JiZ0aGlzLm1hdGNoJiYocj1yLmFwcGVuZCh0aGlzLm1hdGNoLmZpbGxCZWZvcmUoYS5lbXB0eSwhMCkpKSx0aGlzLnR5cGU/dGhpcy50eXBlLmNyZWF0ZSh0aGlzLmF0dHJzLHIsdGhpcy5tYXJrcyk6cn07dmFyIGJ0PWZ1bmN0aW9uKHQsZSxuKXt0aGlzLnBhcnNlcj10LHRoaXMub3B0aW9ucz1lLHRoaXMuaXNPcGVuPW4sdGhpcy5wZW5kaW5nTWFya3M9W107dmFyIHIsbz1lLnRvcE5vZGUsaT13dChlLnByZXNlcnZlV2hpdGVzcGFjZSl8KG4/Z3Q6MCk7cj1vP25ldyB4dChvLnR5cGUsby5hdHRycyxoLm5vbmUsITAsZS50b3BNYXRjaHx8by50eXBlLmNvbnRlbnRNYXRjaCxpKTpuZXcgeHQobj9udWxsOnQuc2NoZW1hLnRvcE5vZGVUeXBlLG51bGwsaC5ub25lLCEwLG51bGwsaSksdGhpcy5ub2Rlcz1bcl0sdGhpcy5vcGVuPTAsdGhpcy5maW5kPWUuZmluZFBvc2l0aW9ucyx0aGlzLm5lZWRzQmxvY2s9ITF9LGt0PXt0b3A6e30sY3VycmVudFBvczp7fX07ZnVuY3Rpb24gU3QodCl7Zm9yKHZhciBlPXQuZmlyc3RDaGlsZCxuPW51bGw7ZTtlPWUubmV4dFNpYmxpbmcpe3ZhciByPTE9PWUubm9kZVR5cGU/ZS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpOm51bGw7ciYmdnQuaGFzT3duUHJvcGVydHkocikmJm4/KG4uYXBwZW5kQ2hpbGQoZSksZT1uKToibGkiPT1yP249ZTpyJiYobj1udWxsKX19ZnVuY3Rpb24gQ3QodCxlKXtyZXR1cm4odC5tYXRjaGVzfHx0Lm1zTWF0Y2hlc1NlbGVjdG9yfHx0LndlYmtpdE1hdGNoZXNTZWxlY3Rvcnx8dC5tb3pNYXRjaGVzU2VsZWN0b3IpLmNhbGwodCxlKX1mdW5jdGlvbiBPdCh0KXt2YXIgZSxuPS9ccyooW1x3LV0rKVxzKjpccyooW147XSspL2cscj1bXTt3aGlsZShlPW4uZXhlYyh0KSlyLnB1c2goZVsxXSxlWzJdLnRyaW0oKSk7cmV0dXJuIHJ9ZnVuY3Rpb24gTXQodCl7dmFyIGU9e307Zm9yKHZhciBuIGluIHQpZVtuXT10W25dO3JldHVybiBlfWt0LnRvcC5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5ub2Rlc1t0aGlzLm9wZW5dfSxidC5wcm90b3R5cGUuYWRkRE9NPWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXM7aWYoMz09dC5ub2RlVHlwZSl0aGlzLmFkZFRleHROb2RlKHQpO2Vsc2UgaWYoMT09dC5ub2RlVHlwZSl7dmFyIG49dC5nZXRBdHRyaWJ1dGUoInN0eWxlIikscj1uP3RoaXMucmVhZFN0eWxlcyhPdChuKSk6bnVsbDtpZihudWxsIT1yKWZvcih2YXIgbz0wO288ci5sZW5ndGg7bysrKWUuYWRkUGVuZGluZ01hcmsocltvXSk7aWYodGhpcy5hZGRFbGVtZW50KHQpLG51bGwhPXIpZm9yKHZhciBpPTA7aTxyLmxlbmd0aDtpKyspZS5yZW1vdmVQZW5kaW5nTWFyayhyW2ldKX19LGJ0LnByb3RvdHlwZS5hZGRUZXh0Tm9kZT1mdW5jdGlvbih0KXt2YXIgZT10Lm5vZGVWYWx1ZSxuPXRoaXMudG9wO2lmKChuLnR5cGU/bi50eXBlLmlubGluZUNvbnRlbnQ6bi5jb250ZW50Lmxlbmd0aCYmbi5jb250ZW50WzBdLmlzSW5saW5lKXx8L1xTLy50ZXN0KGUpKXtpZihuLm9wdGlvbnMmbXQpbi5vcHRpb25zJnl0fHwoZT1lLnJlcGxhY2UoL1xyP1xufFxyL2csIiAiKSk7ZWxzZSBpZihlPWUucmVwbGFjZSgvXHMrL2csIiAiKSwvXlxzLy50ZXN0KGUpJiZ0aGlzLm9wZW49PXRoaXMubm9kZXMubGVuZ3RoLTEpe3ZhciByPW4uY29udGVudFtuLmNvbnRlbnQubGVuZ3RoLTFdLG89dC5wcmV2aW91c1NpYmxpbmc7KCFyfHxvJiYiQlIiPT1vLm5vZGVOYW1lfHxyLmlzVGV4dCYmL1xzJC8udGVzdChyLnRleHQpKSYmKGU9ZS5zbGljZSgxKSl9ZSYmdGhpcy5pbnNlcnROb2RlKHRoaXMucGFyc2VyLnNjaGVtYS50ZXh0KGUpKSx0aGlzLmZpbmRJblRleHQodCl9ZWxzZSB0aGlzLmZpbmRJbnNpZGUodCl9LGJ0LnByb3RvdHlwZS5hZGRFbGVtZW50PWZ1bmN0aW9uKHQpe3ZhciBlPXQubm9kZU5hbWUudG9Mb3dlckNhc2UoKTt2dC5oYXNPd25Qcm9wZXJ0eShlKSYmU3QodCk7dmFyIG49dGhpcy5vcHRpb25zLnJ1bGVGcm9tTm9kZSYmdGhpcy5vcHRpb25zLnJ1bGVGcm9tTm9kZSh0KXx8dGhpcy5wYXJzZXIubWF0Y2hUYWcodCx0aGlzKTtpZihuP24uaWdub3JlOmR0Lmhhc093blByb3BlcnR5KGUpKXRoaXMuZmluZEluc2lkZSh0KTtlbHNlIGlmKCFufHxuLnNraXApe24mJm4uc2tpcC5ub2RlVHlwZSYmKHQ9bi5za2lwKTt2YXIgcixvPXRoaXMudG9wLGk9dGhpcy5uZWVkc0Jsb2NrO2lmKGZ0Lmhhc093blByb3BlcnR5KGUpKXI9ITAsby50eXBlfHwodGhpcy5uZWVkc0Jsb2NrPSEwKTtlbHNlIGlmKCF0LmZpcnN0Q2hpbGQpcmV0dXJuIHZvaWQgdGhpcy5sZWFmRmFsbGJhY2sodCk7dGhpcy5hZGRBbGwodCksciYmdGhpcy5zeW5jKG8pLHRoaXMubmVlZHNCbG9jaz1pfWVsc2UgdGhpcy5hZGRFbGVtZW50QnlSdWxlKHQsbil9LGJ0LnByb3RvdHlwZS5sZWFmRmFsbGJhY2s9ZnVuY3Rpb24odCl7IkJSIj09dC5ub2RlTmFtZSYmdGhpcy50b3AudHlwZSYmdGhpcy50b3AudHlwZS5pbmxpbmVDb250ZW50JiZ0aGlzLmFkZFRleHROb2RlKHQub3duZXJEb2N1bWVudC5jcmVhdGVUZXh0Tm9kZSgiXG4iKSl9LGJ0LnByb3RvdHlwZS5yZWFkU3R5bGVzPWZ1bmN0aW9uKHQpe2Zvcih2YXIgZT10aGlzLG49aC5ub25lLHI9MDtyPHQubGVuZ3RoO3IrPTIpe3ZhciBvPWUucGFyc2VyLm1hdGNoU3R5bGUodFtyXSx0W3IrMV0sZSk7aWYobyl7aWYoby5pZ25vcmUpcmV0dXJuIG51bGw7bj1lLnBhcnNlci5zY2hlbWEubWFya3Nbby5tYXJrXS5jcmVhdGUoby5hdHRycykuYWRkVG9TZXQobil9fXJldHVybiBufSxidC5wcm90b3R5cGUuYWRkRWxlbWVudEJ5UnVsZT1mdW5jdGlvbih0LGUpe3ZhciBuLHIsbyxpLHM9dGhpcztlLm5vZGU/KHI9dGhpcy5wYXJzZXIuc2NoZW1hLm5vZGVzW2Uubm9kZV0sci5pc0xlYWY/dGhpcy5pbnNlcnROb2RlKHIuY3JlYXRlKGUuYXR0cnMpKXx8dGhpcy5sZWFmRmFsbGJhY2sodCk6bj10aGlzLmVudGVyKHIsZS5hdHRycyxlLnByZXNlcnZlV2hpdGVzcGFjZSkpOihvPXRoaXMucGFyc2VyLnNjaGVtYS5tYXJrc1tlLm1hcmtdLGk9by5jcmVhdGUoZS5hdHRycyksdGhpcy5hZGRQZW5kaW5nTWFyayhpKSk7dmFyIGE9dGhpcy50b3A7aWYociYmci5pc0xlYWYpdGhpcy5maW5kSW5zaWRlKHQpO2Vsc2UgaWYoZS5nZXRDb250ZW50KXRoaXMuZmluZEluc2lkZSh0KSxlLmdldENvbnRlbnQodCx0aGlzLnBhcnNlci5zY2hlbWEpLmZvckVhY2goKGZ1bmN0aW9uKHQpe3JldHVybiBzLmluc2VydE5vZGUodCl9KSk7ZWxzZXt2YXIgYz1lLmNvbnRlbnRFbGVtZW50OyJzdHJpbmciPT10eXBlb2YgYz9jPXQucXVlcnlTZWxlY3RvcihjKToiZnVuY3Rpb24iPT10eXBlb2YgYyYmKGM9Yyh0KSksY3x8KGM9dCksdGhpcy5maW5kQXJvdW5kKHQsYywhMCksdGhpcy5hZGRBbGwoYyxuKX1uJiYodGhpcy5zeW5jKGEpLHRoaXMub3Blbi0tKSxpJiZ0aGlzLnJlbW92ZVBlbmRpbmdNYXJrKGkpfSxidC5wcm90b3R5cGUuYWRkQWxsPWZ1bmN0aW9uKHQsZSxuLHIpe2Zvcih2YXIgbz10aGlzLGk9bnx8MCxzPW4/dC5jaGlsZE5vZGVzW25dOnQuZmlyc3RDaGlsZCxhPW51bGw9PXI/bnVsbDp0LmNoaWxkTm9kZXNbcl07cyE9YTtzPXMubmV4dFNpYmxpbmcsKytpKW8uZmluZEF0UG9pbnQodCxpKSxvLmFkZERPTShzKSxlJiZmdC5oYXNPd25Qcm9wZXJ0eShzLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCkpJiZvLnN5bmMoZSk7dGhpcy5maW5kQXRQb2ludCh0LGkpfSxidC5wcm90b3R5cGUuZmluZFBsYWNlPWZ1bmN0aW9uKHQpe2Zvcih2YXIgZSxuLHI9dGhpcyxvPXRoaXMub3BlbjtvPj0wO28tLSl7dmFyIGk9ci5ub2Rlc1tvXSxzPWkuZmluZFdyYXBwaW5nKHQpO2lmKHMmJighZXx8ZS5sZW5ndGg+cy5sZW5ndGgpJiYoZT1zLG49aSwhcy5sZW5ndGgpKWJyZWFrO2lmKGkuc29saWQpYnJlYWt9aWYoIWUpcmV0dXJuITE7dGhpcy5zeW5jKG4pO2Zvcih2YXIgYT0wO2E8ZS5sZW5ndGg7YSsrKXIuZW50ZXJJbm5lcihlW2FdLG51bGwsITEpO3JldHVybiEwfSxidC5wcm90b3R5cGUuaW5zZXJ0Tm9kZT1mdW5jdGlvbih0KXtpZih0LmlzSW5saW5lJiZ0aGlzLm5lZWRzQmxvY2smJiF0aGlzLnRvcC50eXBlKXt2YXIgZT10aGlzLnRleHRibG9ja0Zyb21Db250ZXh0KCk7ZSYmdGhpcy5lbnRlcklubmVyKGUpfWlmKHRoaXMuZmluZFBsYWNlKHQpKXt0aGlzLmNsb3NlRXh0cmEoKTt2YXIgbj10aGlzLnRvcDt0aGlzLmFwcGx5UGVuZGluZ01hcmtzKG4pLG4ubWF0Y2gmJihuLm1hdGNoPW4ubWF0Y2gubWF0Y2hUeXBlKHQudHlwZSkpO2Zvcih2YXIgcj1uLmFjdGl2ZU1hcmtzLG89MDtvPHQubWFya3MubGVuZ3RoO28rKyluLnR5cGUmJiFuLnR5cGUuYWxsb3dzTWFya1R5cGUodC5tYXJrc1tvXS50eXBlKXx8KHI9dC5tYXJrc1tvXS5hZGRUb1NldChyKSk7cmV0dXJuIG4uY29udGVudC5wdXNoKHQubWFyayhyKSksITB9cmV0dXJuITF9LGJ0LnByb3RvdHlwZS5hcHBseVBlbmRpbmdNYXJrcz1mdW5jdGlvbih0KXtmb3IodmFyIGU9dGhpcyxuPTA7bjx0aGlzLnBlbmRpbmdNYXJrcy5sZW5ndGg7bisrKXt2YXIgcj1lLnBlbmRpbmdNYXJrc1tuXTt0LnR5cGUmJiF0LnR5cGUuYWxsb3dzTWFya1R5cGUoci50eXBlKXx8ci5pc0luU2V0KHQuYWN0aXZlTWFya3MpfHwodC5hY3RpdmVNYXJrcz1yLmFkZFRvU2V0KHQuYWN0aXZlTWFya3MpLGUucGVuZGluZ01hcmtzLnNwbGljZShuLS0sMSkpfX0sYnQucHJvdG90eXBlLmVudGVyPWZ1bmN0aW9uKHQsZSxuKXt2YXIgcj10aGlzLmZpbmRQbGFjZSh0LmNyZWF0ZShlKSk7cmV0dXJuIHImJih0aGlzLmFwcGx5UGVuZGluZ01hcmtzKHRoaXMudG9wKSx0aGlzLmVudGVySW5uZXIodCxlLCEwLG4pKSxyfSxidC5wcm90b3R5cGUuZW50ZXJJbm5lcj1mdW5jdGlvbih0LGUsbixyKXt0aGlzLmNsb3NlRXh0cmEoKTt2YXIgbz10aGlzLnRvcDtvLm1hdGNoPW8ubWF0Y2gmJm8ubWF0Y2gubWF0Y2hUeXBlKHQsZSk7dmFyIGk9bnVsbD09cj9vLm9wdGlvbnMmfmd0Ond0KHIpO28ub3B0aW9ucyZndCYmMD09by5jb250ZW50Lmxlbmd0aCYmKGl8PWd0KSx0aGlzLm5vZGVzLnB1c2gobmV3IHh0KHQsZSxvLmFjdGl2ZU1hcmtzLG4sbnVsbCxpKSksdGhpcy5vcGVuKyt9LGJ0LnByb3RvdHlwZS5jbG9zZUV4dHJhPWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMsbj10aGlzLm5vZGVzLmxlbmd0aC0xO2lmKG4+dGhpcy5vcGVuKXtmb3IoO24+dGhpcy5vcGVuO24tLSllLm5vZGVzW24tMV0uY29udGVudC5wdXNoKGUubm9kZXNbbl0uZmluaXNoKHQpKTt0aGlzLm5vZGVzLmxlbmd0aD10aGlzLm9wZW4rMX19LGJ0LnByb3RvdHlwZS5maW5pc2g9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5vcGVuPTAsdGhpcy5jbG9zZUV4dHJhKHRoaXMuaXNPcGVuKSx0aGlzLm5vZGVzWzBdLmZpbmlzaCh0aGlzLmlzT3Blbnx8dGhpcy5vcHRpb25zLnRvcE9wZW4pfSxidC5wcm90b3R5cGUuc3luYz1mdW5jdGlvbih0KXtmb3IodmFyIGU9dGhpcyxuPXRoaXMub3BlbjtuPj0wO24tLSlpZihlLm5vZGVzW25dPT10KXJldHVybiB2b2lkKGUub3Blbj1uKX0sYnQucHJvdG90eXBlLmFkZFBlbmRpbmdNYXJrPWZ1bmN0aW9uKHQpe3RoaXMucGVuZGluZ01hcmtzLnB1c2godCl9LGJ0LnByb3RvdHlwZS5yZW1vdmVQZW5kaW5nTWFyaz1mdW5jdGlvbih0KXt2YXIgZT10aGlzLnBlbmRpbmdNYXJrcy5sYXN0SW5kZXhPZih0KTtpZihlPi0xKXRoaXMucGVuZGluZ01hcmtzLnNwbGljZShlLDEpO2Vsc2V7dmFyIG49dGhpcy50b3A7bi5hY3RpdmVNYXJrcz10LnJlbW92ZUZyb21TZXQobi5hY3RpdmVNYXJrcyl9fSxrdC5jdXJyZW50UG9zLmdldD1mdW5jdGlvbigpe3ZhciB0PXRoaXM7dGhpcy5jbG9zZUV4dHJhKCk7Zm9yKHZhciBlPTAsbj10aGlzLm9wZW47bj49MDtuLS0pe2Zvcih2YXIgcj10Lm5vZGVzW25dLmNvbnRlbnQsbz1yLmxlbmd0aC0xO28+PTA7by0tKWUrPXJbb10ubm9kZVNpemU7biYmZSsrfXJldHVybiBlfSxidC5wcm90b3R5cGUuZmluZEF0UG9pbnQ9ZnVuY3Rpb24odCxlKXt2YXIgbj10aGlzO2lmKHRoaXMuZmluZClmb3IodmFyIHI9MDtyPHRoaXMuZmluZC5sZW5ndGg7cisrKW4uZmluZFtyXS5ub2RlPT10JiZuLmZpbmRbcl0ub2Zmc2V0PT1lJiYobi5maW5kW3JdLnBvcz1uLmN1cnJlbnRQb3MpfSxidC5wcm90b3R5cGUuZmluZEluc2lkZT1mdW5jdGlvbih0KXt2YXIgZT10aGlzO2lmKHRoaXMuZmluZClmb3IodmFyIG49MDtuPHRoaXMuZmluZC5sZW5ndGg7bisrKW51bGw9PWUuZmluZFtuXS5wb3MmJjE9PXQubm9kZVR5cGUmJnQuY29udGFpbnMoZS5maW5kW25dLm5vZGUpJiYoZS5maW5kW25dLnBvcz1lLmN1cnJlbnRQb3MpfSxidC5wcm90b3R5cGUuZmluZEFyb3VuZD1mdW5jdGlvbih0LGUsbil7dmFyIHI9dGhpcztpZih0IT1lJiZ0aGlzLmZpbmQpZm9yKHZhciBvPTA7bzx0aGlzLmZpbmQubGVuZ3RoO28rKylpZihudWxsPT1yLmZpbmRbb10ucG9zJiYxPT10Lm5vZGVUeXBlJiZ0LmNvbnRhaW5zKHIuZmluZFtvXS5ub2RlKSl7dmFyIGk9ZS5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbihyLmZpbmRbb10ubm9kZSk7aSYobj8yOjQpJiYoci5maW5kW29dLnBvcz1yLmN1cnJlbnRQb3MpfX0sYnQucHJvdG90eXBlLmZpbmRJblRleHQ9ZnVuY3Rpb24odCl7dmFyIGU9dGhpcztpZih0aGlzLmZpbmQpZm9yKHZhciBuPTA7bjx0aGlzLmZpbmQubGVuZ3RoO24rKyllLmZpbmRbbl0ubm9kZT09dCYmKGUuZmluZFtuXS5wb3M9ZS5jdXJyZW50UG9zLSh0Lm5vZGVWYWx1ZS5sZW5ndGgtZS5maW5kW25dLm9mZnNldCkpfSxidC5wcm90b3R5cGUubWF0Y2hlc0NvbnRleHQ9ZnVuY3Rpb24odCl7dmFyIGU9dGhpcztpZih0LmluZGV4T2YoInwiKT4tMSlyZXR1cm4gdC5zcGxpdCgvXHMqXHxccyovKS5zb21lKHRoaXMubWF0Y2hlc0NvbnRleHQsdGhpcyk7dmFyIG49dC5zcGxpdCgiLyIpLHI9dGhpcy5vcHRpb25zLmNvbnRleHQsbz0hdGhpcy5pc09wZW4mJighcnx8ci5wYXJlbnQudHlwZT09dGhpcy5ub2Rlc1swXS50eXBlKSxpPS0ocj9yLmRlcHRoKzE6MCkrKG8/MDoxKSxzPWZ1bmN0aW9uKHQsYSl7Zm9yKDt0Pj0wO3QtLSl7dmFyIGM9blt0XTtpZigiIj09Yyl7aWYodD09bi5sZW5ndGgtMXx8MD09dCljb250aW51ZTtmb3IoO2E+PWk7YS0tKWlmKHModC0xLGEpKXJldHVybiEwO3JldHVybiExfXZhciBsPWE+MHx8MD09YSYmbz9lLm5vZGVzW2FdLnR5cGU6ciYmYT49aT9yLm5vZGUoYS1pKS50eXBlOm51bGw7aWYoIWx8fGwubmFtZSE9YyYmLTE9PWwuZ3JvdXBzLmluZGV4T2YoYykpcmV0dXJuITE7YS0tfXJldHVybiEwfTtyZXR1cm4gcyhuLmxlbmd0aC0xLHRoaXMub3Blbil9LGJ0LnByb3RvdHlwZS50ZXh0YmxvY2tGcm9tQ29udGV4dD1mdW5jdGlvbigpe3ZhciB0PXRoaXMsZT10aGlzLm9wdGlvbnMuY29udGV4dDtpZihlKWZvcih2YXIgbj1lLmRlcHRoO24+PTA7bi0tKXt2YXIgcj1lLm5vZGUobikuY29udGVudE1hdGNoQXQoZS5pbmRleEFmdGVyKG4pKS5kZWZhdWx0VHlwZTtpZihyJiZyLmlzVGV4dGJsb2NrJiZyLmRlZmF1bHRBdHRycylyZXR1cm4gcn1mb3IodmFyIG8gaW4gdC5wYXJzZXIuc2NoZW1hLm5vZGVzKXt2YXIgaT10LnBhcnNlci5zY2hlbWEubm9kZXNbb107aWYoaS5pc1RleHRibG9jayYmaS5kZWZhdWx0QXR0cnMpcmV0dXJuIGl9fSxPYmplY3QuZGVmaW5lUHJvcGVydGllcyhidC5wcm90b3R5cGUsa3QpO3ZhciBUdD1mdW5jdGlvbih0LGUpe3RoaXMubm9kZXM9dHx8e30sdGhpcy5tYXJrcz1lfHx7fX07ZnVuY3Rpb24gTnQodCl7dmFyIGU9e307Zm9yKHZhciBuIGluIHQpe3ZhciByPXRbbl0uc3BlYy50b0RPTTtyJiYoZVtuXT1yKX1yZXR1cm4gZX1mdW5jdGlvbiBFdCh0KXtyZXR1cm4gdC5kb2N1bWVudHx8d2luZG93LmRvY3VtZW50fVR0LnByb3RvdHlwZS5zZXJpYWxpemVGcmFnbWVudD1mdW5jdGlvbih0LGUsbil7dmFyIHI9dGhpczt2b2lkIDA9PT1lJiYoZT17fSksbnx8KG49RXQoZSkuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpKTt2YXIgbz1uLGk9bnVsbDtyZXR1cm4gdC5mb3JFYWNoKChmdW5jdGlvbih0KXtpZihpfHx0Lm1hcmtzLmxlbmd0aCl7aXx8KGk9W10pO3ZhciBuPTAscz0wO3doaWxlKG48aS5sZW5ndGgmJnM8dC5tYXJrcy5sZW5ndGgpe3ZhciBhPXQubWFya3Nbc107aWYoci5tYXJrc1thLnR5cGUubmFtZV0pe2lmKCFhLmVxKGlbbl0pfHwhMT09PWEudHlwZS5zcGVjLnNwYW5uaW5nKWJyZWFrO24rPTIscysrfWVsc2UgcysrfXdoaWxlKG48aS5sZW5ndGgpbz1pLnBvcCgpLGkucG9wKCk7d2hpbGUoczx0Lm1hcmtzLmxlbmd0aCl7dmFyIGM9dC5tYXJrc1tzKytdLGw9ci5zZXJpYWxpemVNYXJrKGMsdC5pc0lubGluZSxlKTtsJiYoaS5wdXNoKGMsbyksby5hcHBlbmRDaGlsZChsLmRvbSksbz1sLmNvbnRlbnRET018fGwuZG9tKX19by5hcHBlbmRDaGlsZChyLnNlcmlhbGl6ZU5vZGUodCxlKSl9KSksbn0sVHQucHJvdG90eXBlLnNlcmlhbGl6ZU5vZGU9ZnVuY3Rpb24odCxlKXt2b2lkIDA9PT1lJiYoZT17fSk7dmFyIG49VHQucmVuZGVyU3BlYyhFdChlKSx0aGlzLm5vZGVzW3QudHlwZS5uYW1lXSh0KSkscj1uLmRvbSxvPW4uY29udGVudERPTTtpZihvKXtpZih0LmlzTGVhZil0aHJvdyBuZXcgUmFuZ2VFcnJvcigiQ29udGVudCBob2xlIG5vdCBhbGxvd2VkIGluIGEgbGVhZiBub2RlIHNwZWMiKTtlLm9uQ29udGVudD9lLm9uQ29udGVudCh0LG8sZSk6dGhpcy5zZXJpYWxpemVGcmFnbWVudCh0LmNvbnRlbnQsZSxvKX1yZXR1cm4gcn0sVHQucHJvdG90eXBlLnNlcmlhbGl6ZU5vZGVBbmRNYXJrcz1mdW5jdGlvbih0LGUpe3ZhciBuPXRoaXM7dm9pZCAwPT09ZSYmKGU9e30pO2Zvcih2YXIgcj10aGlzLnNlcmlhbGl6ZU5vZGUodCxlKSxvPXQubWFya3MubGVuZ3RoLTE7bz49MDtvLS0pe3ZhciBpPW4uc2VyaWFsaXplTWFyayh0Lm1hcmtzW29dLHQuaXNJbmxpbmUsZSk7aSYmKChpLmNvbnRlbnRET018fGkuZG9tKS5hcHBlbmRDaGlsZChyKSxyPWkuZG9tKX1yZXR1cm4gcn0sVHQucHJvdG90eXBlLnNlcmlhbGl6ZU1hcms9ZnVuY3Rpb24odCxlLG4pe3ZvaWQgMD09PW4mJihuPXt9KTt2YXIgcj10aGlzLm1hcmtzW3QudHlwZS5uYW1lXTtyZXR1cm4gciYmVHQucmVuZGVyU3BlYyhFdChuKSxyKHQsZSkpfSxUdC5yZW5kZXJTcGVjPWZ1bmN0aW9uKHQsZSl7aWYoInN0cmluZyI9PXR5cGVvZiBlKXJldHVybntkb206dC5jcmVhdGVUZXh0Tm9kZShlKX07aWYobnVsbCE9ZS5ub2RlVHlwZSlyZXR1cm57ZG9tOmV9O3ZhciBuPXQuY3JlYXRlRWxlbWVudChlWzBdKSxyPW51bGwsbz1lWzFdLGk9MTtpZihvJiYib2JqZWN0Ij09dHlwZW9mIG8mJm51bGw9PW8ubm9kZVR5cGUmJiFBcnJheS5pc0FycmF5KG8pKWZvcih2YXIgcyBpbiBpPTIsbyludWxsIT1vW3NdJiZuLnNldEF0dHJpYnV0ZShzLG9bc10pO2Zvcih2YXIgYT1pO2E8ZS5sZW5ndGg7YSsrKXt2YXIgYz1lW2FdO2lmKDA9PT1jKXtpZihhPGUubGVuZ3RoLTF8fGE+aSl0aHJvdyBuZXcgUmFuZ2VFcnJvcigiQ29udGVudCBob2xlIG11c3QgYmUgdGhlIG9ubHkgY2hpbGQgb2YgaXRzIHBhcmVudCBub2RlIik7cmV0dXJue2RvbTpuLGNvbnRlbnRET006bn19dmFyIGw9VHQucmVuZGVyU3BlYyh0LGMpLHA9bC5kb20sdT1sLmNvbnRlbnRET007aWYobi5hcHBlbmRDaGlsZChwKSx1KXtpZihyKXRocm93IG5ldyBSYW5nZUVycm9yKCJNdWx0aXBsZSBjb250ZW50IGhvbGVzIik7cj11fX1yZXR1cm57ZG9tOm4sY29udGVudERPTTpyfX0sVHQuZnJvbVNjaGVtYT1mdW5jdGlvbih0KXtyZXR1cm4gdC5jYWNoZWQuZG9tU2VyaWFsaXplcnx8KHQuY2FjaGVkLmRvbVNlcmlhbGl6ZXI9bmV3IFR0KHRoaXMubm9kZXNGcm9tU2NoZW1hKHQpLHRoaXMubWFya3NGcm9tU2NoZW1hKHQpKSl9LFR0Lm5vZGVzRnJvbVNjaGVtYT1mdW5jdGlvbih0KXt2YXIgZT1OdCh0Lm5vZGVzKTtyZXR1cm4gZS50ZXh0fHwoZS50ZXh0PWZ1bmN0aW9uKHQpe3JldHVybiB0LnRleHR9KSxlfSxUdC5tYXJrc0Zyb21TY2hlbWE9ZnVuY3Rpb24odCl7cmV0dXJuIE50KHQubWFya3MpfSxlLk5vZGU9XyxlLlJlc29sdmVkUG9zPU4sZS5Ob2RlUmFuZ2U9eixlLkZyYWdtZW50PWEsZS5TbGljZT1kLGUuUmVwbGFjZUVycm9yPWYsZS5NYXJrPWgsZS5TY2hlbWE9cHQsZS5Ob2RlVHlwZT1pdCxlLk1hcmtUeXBlPWx0LGUuQ29udGVudE1hdGNoPSQsZS5ET01QYXJzZXI9aHQsZS5ET01TZXJpYWxpemVyPVR0fSwiOGJiZiI6ZnVuY3Rpb24oZSxuKXtlLmV4cG9ydHM9dH0sIjhlNjAiOmZ1bmN0aW9uKHQsZSxuKXt0LmV4cG9ydHM9IW4oIjI5NGMiKSgoZnVuY3Rpb24oKXtyZXR1cm4gNyE9T2JqZWN0LmRlZmluZVByb3BlcnR5KHt9LCJhIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIDd9fSkuYX0pKX0sIjhmNjAiOmZ1bmN0aW9uKHQsZSxuKXsidXNlIHN0cmljdCI7dmFyIHI9bigiYTE1OSIpLG89bigiYWViZCIpLGk9bigiNDVmMiIpLHM9e307bigiMzVlOCIpKHMsbigiNTE2OCIpKCJpdGVyYXRvciIpLChmdW5jdGlvbigpe3JldHVybiB0aGlzfSkpLHQuZXhwb3J0cz1mdW5jdGlvbih0LGUsbil7dC5wcm90b3R5cGU9cihzLHtuZXh0Om8oMSxuKX0pLGkodCxlKyIgSXRlcmF0b3IiKX19LDkwMDM6ZnVuY3Rpb24odCxlLG4pe3ZhciByPW4oIjZiNGMiKTt0LmV4cG9ydHM9QXJyYXkuaXNBcnJheXx8ZnVuY3Rpb24odCl7cmV0dXJuIkFycmF5Ij09cih0KX19LDkxMzg6ZnVuY3Rpb24odCxlLG4pe3QuZXhwb3J0cz1uKCIzNWU4Iil9LDk0NDg6ZnVuY3Rpb24odCxlLG4peyJ1c2Ugc3RyaWN0IjtPYmplY3QuZGVmaW5lUHJvcGVydHkoZSwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSk7dmFyIHI9bigiYzJmNyIpLG89NjU1MzUsaT1NYXRoLnBvdygyLDE2KTtmdW5jdGlvbiBzKHQsZSl7cmV0dXJuIHQrZSppfWZ1bmN0aW9uIGEodCl7cmV0dXJuIHQmb31mdW5jdGlvbiBjKHQpe3JldHVybih0LSh0Jm8pKS9pfXZhciBsPWZ1bmN0aW9uKHQsZSxuKXt2b2lkIDA9PT1lJiYoZT0hMSksdm9pZCAwPT09biYmKG49bnVsbCksdGhpcy5wb3M9dCx0aGlzLmRlbGV0ZWQ9ZSx0aGlzLnJlY292ZXI9bn0scD1mdW5jdGlvbih0LGUpe3ZvaWQgMD09PWUmJihlPSExKSx0aGlzLnJhbmdlcz10LHRoaXMuaW52ZXJ0ZWQ9ZX07cC5wcm90b3R5cGUucmVjb3Zlcj1mdW5jdGlvbih0KXt2YXIgZT10aGlzLG49MCxyPWEodCk7aWYoIXRoaXMuaW52ZXJ0ZWQpZm9yKHZhciBvPTA7bzxyO28rKyluKz1lLnJhbmdlc1szKm8rMl0tZS5yYW5nZXNbMypvKzFdO3JldHVybiB0aGlzLnJhbmdlc1szKnJdK24rYyh0KX0scC5wcm90b3R5cGUubWFwUmVzdWx0PWZ1bmN0aW9uKHQsZSl7cmV0dXJuIHZvaWQgMD09PWUmJihlPTEpLHRoaXMuX21hcCh0LGUsITEpfSxwLnByb3RvdHlwZS5tYXA9ZnVuY3Rpb24odCxlKXtyZXR1cm4gdm9pZCAwPT09ZSYmKGU9MSksdGhpcy5fbWFwKHQsZSwhMCl9LHAucHJvdG90eXBlLl9tYXA9ZnVuY3Rpb24odCxlLG4pe2Zvcih2YXIgcj10aGlzLG89MCxpPXRoaXMuaW52ZXJ0ZWQ/MjoxLGE9dGhpcy5pbnZlcnRlZD8xOjIsYz0wO2M8dGhpcy5yYW5nZXMubGVuZ3RoO2MrPTMpe3ZhciBwPXIucmFuZ2VzW2NdLShyLmludmVydGVkP286MCk7aWYocD50KWJyZWFrO3ZhciB1PXIucmFuZ2VzW2MraV0saD1yLnJhbmdlc1tjK2FdLGY9cCt1O2lmKHQ8PWYpe3ZhciBkPXU/dD09cD8tMTp0PT1mPzE6ZTplLHY9cCtvKyhkPDA/MDpoKTtpZihuKXJldHVybiB2O3ZhciBtPXMoYy8zLHQtcCk7cmV0dXJuIG5ldyBsKHYsZTwwP3QhPXA6dCE9ZixtKX1vKz1oLXV9cmV0dXJuIG4/dCtvOm5ldyBsKHQrbyl9LHAucHJvdG90eXBlLnRvdWNoZXM9ZnVuY3Rpb24odCxlKXtmb3IodmFyIG49dGhpcyxyPTAsbz1hKGUpLGk9dGhpcy5pbnZlcnRlZD8yOjEscz10aGlzLmludmVydGVkPzE6MixjPTA7Yzx0aGlzLnJhbmdlcy5sZW5ndGg7Yys9Myl7dmFyIGw9bi5yYW5nZXNbY10tKG4uaW52ZXJ0ZWQ/cjowKTtpZihsPnQpYnJlYWs7dmFyIHA9bi5yYW5nZXNbYytpXSx1PWwrcDtpZih0PD11JiZjPT0zKm8pcmV0dXJuITA7cis9bi5yYW5nZXNbYytzXS1wfXJldHVybiExfSxwLnByb3RvdHlwZS5mb3JFYWNoPWZ1bmN0aW9uKHQpe2Zvcih2YXIgZT10aGlzLG49dGhpcy5pbnZlcnRlZD8yOjEscj10aGlzLmludmVydGVkPzE6MixvPTAsaT0wO288dGhpcy5yYW5nZXMubGVuZ3RoO28rPTMpe3ZhciBzPWUucmFuZ2VzW29dLGE9cy0oZS5pbnZlcnRlZD9pOjApLGM9cysoZS5pbnZlcnRlZD8wOmkpLGw9ZS5yYW5nZXNbbytuXSxwPWUucmFuZ2VzW28rcl07dChhLGErbCxjLGMrcCksaSs9cC1sfX0scC5wcm90b3R5cGUuaW52ZXJ0PWZ1bmN0aW9uKCl7cmV0dXJuIG5ldyBwKHRoaXMucmFuZ2VzLCF0aGlzLmludmVydGVkKX0scC5wcm90b3R5cGUudG9TdHJpbmc9ZnVuY3Rpb24oKXtyZXR1cm4odGhpcy5pbnZlcnRlZD8iLSI6IiIpK0pTT04uc3RyaW5naWZ5KHRoaXMucmFuZ2VzKX0scC5vZmZzZXQ9ZnVuY3Rpb24odCl7cmV0dXJuIDA9PXQ/cC5lbXB0eTpuZXcgcCh0PDA/WzAsLXQsMF06WzAsMCx0XSl9LHAuZW1wdHk9bmV3IHAoW10pO3ZhciB1PWZ1bmN0aW9uKHQsZSxuLHIpe3RoaXMubWFwcz10fHxbXSx0aGlzLmZyb209bnx8MCx0aGlzLnRvPW51bGw9PXI/dGhpcy5tYXBzLmxlbmd0aDpyLHRoaXMubWlycm9yPWV9O2Z1bmN0aW9uIGgodCl7dmFyIGU9RXJyb3IuY2FsbCh0aGlzLHQpO3JldHVybiBlLl9fcHJvdG9fXz1oLnByb3RvdHlwZSxlfXUucHJvdG90eXBlLnNsaWNlPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIHZvaWQgMD09PXQmJih0PTApLHZvaWQgMD09PWUmJihlPXRoaXMubWFwcy5sZW5ndGgpLG5ldyB1KHRoaXMubWFwcyx0aGlzLm1pcnJvcix0LGUpfSx1LnByb3RvdHlwZS5jb3B5PWZ1bmN0aW9uKCl7cmV0dXJuIG5ldyB1KHRoaXMubWFwcy5zbGljZSgpLHRoaXMubWlycm9yJiZ0aGlzLm1pcnJvci5zbGljZSgpLHRoaXMuZnJvbSx0aGlzLnRvKX0sdS5wcm90b3R5cGUuYXBwZW5kTWFwPWZ1bmN0aW9uKHQsZSl7dGhpcy50bz10aGlzLm1hcHMucHVzaCh0KSxudWxsIT1lJiZ0aGlzLnNldE1pcnJvcih0aGlzLm1hcHMubGVuZ3RoLTEsZSl9LHUucHJvdG90eXBlLmFwcGVuZE1hcHBpbmc9ZnVuY3Rpb24odCl7Zm9yKHZhciBlPXRoaXMsbj0wLHI9dGhpcy5tYXBzLmxlbmd0aDtuPHQubWFwcy5sZW5ndGg7bisrKXt2YXIgbz10LmdldE1pcnJvcihuKTtlLmFwcGVuZE1hcCh0Lm1hcHNbbl0sbnVsbCE9byYmbzxuP3IrbzpudWxsKX19LHUucHJvdG90eXBlLmdldE1pcnJvcj1mdW5jdGlvbih0KXt2YXIgZT10aGlzO2lmKHRoaXMubWlycm9yKWZvcih2YXIgbj0wO248dGhpcy5taXJyb3IubGVuZ3RoO24rKylpZihlLm1pcnJvcltuXT09dClyZXR1cm4gZS5taXJyb3JbbisobiUyPy0xOjEpXX0sdS5wcm90b3R5cGUuc2V0TWlycm9yPWZ1bmN0aW9uKHQsZSl7dGhpcy5taXJyb3J8fCh0aGlzLm1pcnJvcj1bXSksdGhpcy5taXJyb3IucHVzaCh0LGUpfSx1LnByb3RvdHlwZS5hcHBlbmRNYXBwaW5nSW52ZXJ0ZWQ9ZnVuY3Rpb24odCl7Zm9yKHZhciBlPXRoaXMsbj10Lm1hcHMubGVuZ3RoLTEscj10aGlzLm1hcHMubGVuZ3RoK3QubWFwcy5sZW5ndGg7bj49MDtuLS0pe3ZhciBvPXQuZ2V0TWlycm9yKG4pO2UuYXBwZW5kTWFwKHQubWFwc1tuXS5pbnZlcnQoKSxudWxsIT1vJiZvPm4/ci1vLTE6bnVsbCl9fSx1LnByb3RvdHlwZS5pbnZlcnQ9ZnVuY3Rpb24oKXt2YXIgdD1uZXcgdTtyZXR1cm4gdC5hcHBlbmRNYXBwaW5nSW52ZXJ0ZWQodGhpcyksdH0sdS5wcm90b3R5cGUubWFwPWZ1bmN0aW9uKHQsZSl7dmFyIG49dGhpcztpZih2b2lkIDA9PT1lJiYoZT0xKSx0aGlzLm1pcnJvcilyZXR1cm4gdGhpcy5fbWFwKHQsZSwhMCk7Zm9yKHZhciByPXRoaXMuZnJvbTtyPHRoaXMudG87cisrKXQ9bi5tYXBzW3JdLm1hcCh0LGUpO3JldHVybiB0fSx1LnByb3RvdHlwZS5tYXBSZXN1bHQ9ZnVuY3Rpb24odCxlKXtyZXR1cm4gdm9pZCAwPT09ZSYmKGU9MSksdGhpcy5fbWFwKHQsZSwhMSl9LHUucHJvdG90eXBlLl9tYXA9ZnVuY3Rpb24odCxlLG4pe2Zvcih2YXIgcj10aGlzLG89ITEsaT1udWxsLHM9dGhpcy5mcm9tO3M8dGhpcy50bztzKyspe3ZhciBhPXIubWFwc1tzXSxjPWkmJmlbc107aWYobnVsbCE9YyYmYS50b3VjaGVzKHQsYykpdD1hLnJlY292ZXIoYyk7ZWxzZXt2YXIgcD1hLm1hcFJlc3VsdCh0LGUpO2lmKG51bGwhPXAucmVjb3Zlcil7dmFyIHU9ci5nZXRNaXJyb3Iocyk7aWYobnVsbCE9dSYmdT5zJiZ1PHIudG8pe2lmKHAuZGVsZXRlZCl7cz11LHQ9ci5tYXBzW3VdLnJlY292ZXIocC5yZWNvdmVyKTtjb250aW51ZX0oaXx8KGk9T2JqZWN0LmNyZWF0ZShudWxsKSkpW3VdPXAucmVjb3Zlcn19cC5kZWxldGVkJiYobz0hMCksdD1wLnBvc319cmV0dXJuIG4/dDpuZXcgbCh0LG8pfSxoLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKEVycm9yLnByb3RvdHlwZSksaC5wcm90b3R5cGUuY29uc3RydWN0b3I9aCxoLnByb3RvdHlwZS5uYW1lPSJUcmFuc2Zvcm1FcnJvciI7dmFyIGY9ZnVuY3Rpb24odCl7dGhpcy5kb2M9dCx0aGlzLnN0ZXBzPVtdLHRoaXMuZG9jcz1bXSx0aGlzLm1hcHBpbmc9bmV3IHV9LGQ9e2JlZm9yZTp7fSxkb2NDaGFuZ2VkOnt9fTtmdW5jdGlvbiB2KCl7dGhyb3cgbmV3IEVycm9yKCJPdmVycmlkZSBtZSIpfWQuYmVmb3JlLmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLmRvY3MubGVuZ3RoP3RoaXMuZG9jc1swXTp0aGlzLmRvY30sZi5wcm90b3R5cGUuc3RlcD1mdW5jdGlvbih0KXt2YXIgZT10aGlzLm1heWJlU3RlcCh0KTtpZihlLmZhaWxlZCl0aHJvdyBuZXcgaChlLmZhaWxlZCk7cmV0dXJuIHRoaXN9LGYucHJvdG90eXBlLm1heWJlU3RlcD1mdW5jdGlvbih0KXt2YXIgZT10LmFwcGx5KHRoaXMuZG9jKTtyZXR1cm4gZS5mYWlsZWR8fHRoaXMuYWRkU3RlcCh0LGUuZG9jKSxlfSxkLmRvY0NoYW5nZWQuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuc3RlcHMubGVuZ3RoPjB9LGYucHJvdG90eXBlLmFkZFN0ZXA9ZnVuY3Rpb24odCxlKXt0aGlzLmRvY3MucHVzaCh0aGlzLmRvYyksdGhpcy5zdGVwcy5wdXNoKHQpLHRoaXMubWFwcGluZy5hcHBlbmRNYXAodC5nZXRNYXAoKSksdGhpcy5kb2M9ZX0sT2JqZWN0LmRlZmluZVByb3BlcnRpZXMoZi5wcm90b3R5cGUsZCk7dmFyIG09T2JqZWN0LmNyZWF0ZShudWxsKSx5PWZ1bmN0aW9uKCl7fTt5LnByb3RvdHlwZS5hcHBseT1mdW5jdGlvbih0KXtyZXR1cm4gdigpfSx5LnByb3RvdHlwZS5nZXRNYXA9ZnVuY3Rpb24oKXtyZXR1cm4gcC5lbXB0eX0seS5wcm90b3R5cGUuaW52ZXJ0PWZ1bmN0aW9uKHQpe3JldHVybiB2KCl9LHkucHJvdG90eXBlLm1hcD1mdW5jdGlvbih0KXtyZXR1cm4gdigpfSx5LnByb3RvdHlwZS5tZXJnZT1mdW5jdGlvbih0KXtyZXR1cm4gbnVsbH0seS5wcm90b3R5cGUudG9KU09OPWZ1bmN0aW9uKCl7cmV0dXJuIHYoKX0seS5mcm9tSlNPTj1mdW5jdGlvbih0LGUpe2lmKCFlfHwhZS5zdGVwVHlwZSl0aHJvdyBuZXcgUmFuZ2VFcnJvcigiSW52YWxpZCBpbnB1dCBmb3IgU3RlcC5mcm9tSlNPTiIpO3ZhciBuPW1bZS5zdGVwVHlwZV07aWYoIW4pdGhyb3cgbmV3IFJhbmdlRXJyb3IoIk5vIHN0ZXAgdHlwZSAiK2Uuc3RlcFR5cGUrIiBkZWZpbmVkIik7cmV0dXJuIG4uZnJvbUpTT04odCxlKX0seS5qc29uSUQ9ZnVuY3Rpb24odCxlKXtpZih0IGluIG0pdGhyb3cgbmV3IFJhbmdlRXJyb3IoIkR1cGxpY2F0ZSB1c2Ugb2Ygc3RlcCBKU09OIElEICIrdCk7cmV0dXJuIG1bdF09ZSxlLnByb3RvdHlwZS5qc29uSUQ9dCxlfTt2YXIgZz1mdW5jdGlvbih0LGUpe3RoaXMuZG9jPXQsdGhpcy5mYWlsZWQ9ZX07Zy5vaz1mdW5jdGlvbih0KXtyZXR1cm4gbmV3IGcodCxudWxsKX0sZy5mYWlsPWZ1bmN0aW9uKHQpe3JldHVybiBuZXcgZyhudWxsLHQpfSxnLmZyb21SZXBsYWNlPWZ1bmN0aW9uKHQsZSxuLG8pe3RyeXtyZXR1cm4gZy5vayh0LnJlcGxhY2UoZSxuLG8pKX1jYXRjaChpKXtpZihpIGluc3RhbmNlb2Ygci5SZXBsYWNlRXJyb3IpcmV0dXJuIGcuZmFpbChpLm1lc3NhZ2UpO3Rocm93IGl9fTt2YXIgdz1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKGUsbixyLG8pe3QuY2FsbCh0aGlzKSx0aGlzLmZyb209ZSx0aGlzLnRvPW4sdGhpcy5zbGljZT1yLHRoaXMuc3RydWN0dXJlPSEhb31yZXR1cm4gdCYmKGUuX19wcm90b19fPXQpLGUucHJvdG90eXBlPU9iamVjdC5jcmVhdGUodCYmdC5wcm90b3R5cGUpLGUucHJvdG90eXBlLmNvbnN0cnVjdG9yPWUsZS5wcm90b3R5cGUuYXBwbHk9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuc3RydWN0dXJlJiZiKHQsdGhpcy5mcm9tLHRoaXMudG8pP2cuZmFpbCgiU3RydWN0dXJlIHJlcGxhY2Ugd291bGQgb3ZlcndyaXRlIGNvbnRlbnQiKTpnLmZyb21SZXBsYWNlKHQsdGhpcy5mcm9tLHRoaXMudG8sdGhpcy5zbGljZSl9LGUucHJvdG90eXBlLmdldE1hcD1mdW5jdGlvbigpe3JldHVybiBuZXcgcChbdGhpcy5mcm9tLHRoaXMudG8tdGhpcy5mcm9tLHRoaXMuc2xpY2Uuc2l6ZV0pfSxlLnByb3RvdHlwZS5pbnZlcnQ9ZnVuY3Rpb24odCl7cmV0dXJuIG5ldyBlKHRoaXMuZnJvbSx0aGlzLmZyb20rdGhpcy5zbGljZS5zaXplLHQuc2xpY2UodGhpcy5mcm9tLHRoaXMudG8pKX0sZS5wcm90b3R5cGUubWFwPWZ1bmN0aW9uKHQpe3ZhciBuPXQubWFwUmVzdWx0KHRoaXMuZnJvbSwxKSxyPXQubWFwUmVzdWx0KHRoaXMudG8sLTEpO3JldHVybiBuLmRlbGV0ZWQmJnIuZGVsZXRlZD9udWxsOm5ldyBlKG4ucG9zLE1hdGgubWF4KG4ucG9zLHIucG9zKSx0aGlzLnNsaWNlKX0sZS5wcm90b3R5cGUubWVyZ2U9ZnVuY3Rpb24odCl7aWYoISh0IGluc3RhbmNlb2YgZSl8fHQuc3RydWN0dXJlIT10aGlzLnN0cnVjdHVyZSlyZXR1cm4gbnVsbDtpZih0aGlzLmZyb20rdGhpcy5zbGljZS5zaXplIT10LmZyb218fHRoaXMuc2xpY2Uub3BlbkVuZHx8dC5zbGljZS5vcGVuU3RhcnQpe2lmKHQudG8hPXRoaXMuZnJvbXx8dGhpcy5zbGljZS5vcGVuU3RhcnR8fHQuc2xpY2Uub3BlbkVuZClyZXR1cm4gbnVsbDt2YXIgbj10aGlzLnNsaWNlLnNpemUrdC5zbGljZS5zaXplPT0wP3IuU2xpY2UuZW1wdHk6bmV3IHIuU2xpY2UodC5zbGljZS5jb250ZW50LmFwcGVuZCh0aGlzLnNsaWNlLmNvbnRlbnQpLHQuc2xpY2Uub3BlblN0YXJ0LHRoaXMuc2xpY2Uub3BlbkVuZCk7cmV0dXJuIG5ldyBlKHQuZnJvbSx0aGlzLnRvLG4sdGhpcy5zdHJ1Y3R1cmUpfXZhciBvPXRoaXMuc2xpY2Uuc2l6ZSt0LnNsaWNlLnNpemU9PTA/ci5TbGljZS5lbXB0eTpuZXcgci5TbGljZSh0aGlzLnNsaWNlLmNvbnRlbnQuYXBwZW5kKHQuc2xpY2UuY29udGVudCksdGhpcy5zbGljZS5vcGVuU3RhcnQsdC5zbGljZS5vcGVuRW5kKTtyZXR1cm4gbmV3IGUodGhpcy5mcm9tLHRoaXMudG8rKHQudG8tdC5mcm9tKSxvLHRoaXMuc3RydWN0dXJlKX0sZS5wcm90b3R5cGUudG9KU09OPWZ1bmN0aW9uKCl7dmFyIHQ9e3N0ZXBUeXBlOiJyZXBsYWNlIixmcm9tOnRoaXMuZnJvbSx0bzp0aGlzLnRvfTtyZXR1cm4gdGhpcy5zbGljZS5zaXplJiYodC5zbGljZT10aGlzLnNsaWNlLnRvSlNPTigpKSx0aGlzLnN0cnVjdHVyZSYmKHQuc3RydWN0dXJlPSEwKSx0fSxlLmZyb21KU09OPWZ1bmN0aW9uKHQsbil7aWYoIm51bWJlciIhPXR5cGVvZiBuLmZyb218fCJudW1iZXIiIT10eXBlb2Ygbi50byl0aHJvdyBuZXcgUmFuZ2VFcnJvcigiSW52YWxpZCBpbnB1dCBmb3IgUmVwbGFjZVN0ZXAuZnJvbUpTT04iKTtyZXR1cm4gbmV3IGUobi5mcm9tLG4udG8sci5TbGljZS5mcm9tSlNPTih0LG4uc2xpY2UpLCEhbi5zdHJ1Y3R1cmUpfSxlfSh5KTt5Lmpzb25JRCgicmVwbGFjZSIsdyk7dmFyIHg9ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZShlLG4scixvLGkscyxhKXt0LmNhbGwodGhpcyksdGhpcy5mcm9tPWUsdGhpcy50bz1uLHRoaXMuZ2FwRnJvbT1yLHRoaXMuZ2FwVG89byx0aGlzLnNsaWNlPWksdGhpcy5pbnNlcnQ9cyx0aGlzLnN0cnVjdHVyZT0hIWF9cmV0dXJuIHQmJihlLl9fcHJvdG9fXz10KSxlLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKHQmJnQucHJvdG90eXBlKSxlLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1lLGUucHJvdG90eXBlLmFwcGx5PWZ1bmN0aW9uKHQpe2lmKHRoaXMuc3RydWN0dXJlJiYoYih0LHRoaXMuZnJvbSx0aGlzLmdhcEZyb20pfHxiKHQsdGhpcy5nYXBUbyx0aGlzLnRvKSkpcmV0dXJuIGcuZmFpbCgiU3RydWN0dXJlIGdhcC1yZXBsYWNlIHdvdWxkIG92ZXJ3cml0ZSBjb250ZW50Iik7dmFyIGU9dC5zbGljZSh0aGlzLmdhcEZyb20sdGhpcy5nYXBUbyk7aWYoZS5vcGVuU3RhcnR8fGUub3BlbkVuZClyZXR1cm4gZy5mYWlsKCJHYXAgaXMgbm90IGEgZmxhdCByYW5nZSIpO3ZhciBuPXRoaXMuc2xpY2UuaW5zZXJ0QXQodGhpcy5pbnNlcnQsZS5jb250ZW50KTtyZXR1cm4gbj9nLmZyb21SZXBsYWNlKHQsdGhpcy5mcm9tLHRoaXMudG8sbik6Zy5mYWlsKCJDb250ZW50IGRvZXMgbm90IGZpdCBpbiBnYXAiKX0sZS5wcm90b3R5cGUuZ2V0TWFwPWZ1bmN0aW9uKCl7cmV0dXJuIG5ldyBwKFt0aGlzLmZyb20sdGhpcy5nYXBGcm9tLXRoaXMuZnJvbSx0aGlzLmluc2VydCx0aGlzLmdhcFRvLHRoaXMudG8tdGhpcy5nYXBUbyx0aGlzLnNsaWNlLnNpemUtdGhpcy5pbnNlcnRdKX0sZS5wcm90b3R5cGUuaW52ZXJ0PWZ1bmN0aW9uKHQpe3ZhciBuPXRoaXMuZ2FwVG8tdGhpcy5nYXBGcm9tO3JldHVybiBuZXcgZSh0aGlzLmZyb20sdGhpcy5mcm9tK3RoaXMuc2xpY2Uuc2l6ZStuLHRoaXMuZnJvbSt0aGlzLmluc2VydCx0aGlzLmZyb20rdGhpcy5pbnNlcnQrbix0LnNsaWNlKHRoaXMuZnJvbSx0aGlzLnRvKS5yZW1vdmVCZXR3ZWVuKHRoaXMuZ2FwRnJvbS10aGlzLmZyb20sdGhpcy5nYXBUby10aGlzLmZyb20pLHRoaXMuZ2FwRnJvbS10aGlzLmZyb20sdGhpcy5zdHJ1Y3R1cmUpfSxlLnByb3RvdHlwZS5tYXA9ZnVuY3Rpb24odCl7dmFyIG49dC5tYXBSZXN1bHQodGhpcy5mcm9tLDEpLHI9dC5tYXBSZXN1bHQodGhpcy50bywtMSksbz10Lm1hcCh0aGlzLmdhcEZyb20sLTEpLGk9dC5tYXAodGhpcy5nYXBUbywxKTtyZXR1cm4gbi5kZWxldGVkJiZyLmRlbGV0ZWR8fG88bi5wb3N8fGk+ci5wb3M/bnVsbDpuZXcgZShuLnBvcyxyLnBvcyxvLGksdGhpcy5zbGljZSx0aGlzLmluc2VydCx0aGlzLnN0cnVjdHVyZSl9LGUucHJvdG90eXBlLnRvSlNPTj1mdW5jdGlvbigpe3ZhciB0PXtzdGVwVHlwZToicmVwbGFjZUFyb3VuZCIsZnJvbTp0aGlzLmZyb20sdG86dGhpcy50byxnYXBGcm9tOnRoaXMuZ2FwRnJvbSxnYXBUbzp0aGlzLmdhcFRvLGluc2VydDp0aGlzLmluc2VydH07cmV0dXJuIHRoaXMuc2xpY2Uuc2l6ZSYmKHQuc2xpY2U9dGhpcy5zbGljZS50b0pTT04oKSksdGhpcy5zdHJ1Y3R1cmUmJih0LnN0cnVjdHVyZT0hMCksdH0sZS5mcm9tSlNPTj1mdW5jdGlvbih0LG4pe2lmKCJudW1iZXIiIT10eXBlb2Ygbi5mcm9tfHwibnVtYmVyIiE9dHlwZW9mIG4udG98fCJudW1iZXIiIT10eXBlb2Ygbi5nYXBGcm9tfHwibnVtYmVyIiE9dHlwZW9mIG4uZ2FwVG98fCJudW1iZXIiIT10eXBlb2Ygbi5pbnNlcnQpdGhyb3cgbmV3IFJhbmdlRXJyb3IoIkludmFsaWQgaW5wdXQgZm9yIFJlcGxhY2VBcm91bmRTdGVwLmZyb21KU09OIik7cmV0dXJuIG5ldyBlKG4uZnJvbSxuLnRvLG4uZ2FwRnJvbSxuLmdhcFRvLHIuU2xpY2UuZnJvbUpTT04odCxuLnNsaWNlKSxuLmluc2VydCwhIW4uc3RydWN0dXJlKX0sZX0oeSk7ZnVuY3Rpb24gYih0LGUsbil7dmFyIHI9dC5yZXNvbHZlKGUpLG89bi1lLGk9ci5kZXB0aDt3aGlsZShvPjAmJmk+MCYmci5pbmRleEFmdGVyKGkpPT1yLm5vZGUoaSkuY2hpbGRDb3VudClpLS0sby0tO2lmKG8+MCl7dmFyIHM9ci5ub2RlKGkpLm1heWJlQ2hpbGQoci5pbmRleEFmdGVyKGkpKTt3aGlsZShvPjApe2lmKCFzfHxzLmlzTGVhZilyZXR1cm4hMDtzPXMuZmlyc3RDaGlsZCxvLS19fXJldHVybiExfWZ1bmN0aW9uIGsodCxlLG4pe3JldHVybigwPT1lfHx0LmNhblJlcGxhY2UoZSx0LmNoaWxkQ291bnQpKSYmKG49PXQuY2hpbGRDb3VudHx8dC5jYW5SZXBsYWNlKDAsbikpfWZ1bmN0aW9uIFModCl7Zm9yKHZhciBlPXQucGFyZW50LG49ZS5jb250ZW50LmN1dEJ5SW5kZXgodC5zdGFydEluZGV4LHQuZW5kSW5kZXgpLHI9dC5kZXB0aDs7LS1yKXt2YXIgbz10LiRmcm9tLm5vZGUociksaT10LiRmcm9tLmluZGV4KHIpLHM9dC4kdG8uaW5kZXhBZnRlcihyKTtpZihyPHQuZGVwdGgmJm8uY2FuUmVwbGFjZShpLHMsbikpcmV0dXJuIHI7aWYoMD09cnx8by50eXBlLnNwZWMuaXNvbGF0aW5nfHwhayhvLGkscykpYnJlYWt9fWZ1bmN0aW9uIEModCxlLG4scil7dm9pZCAwPT09ciYmKHI9dCk7dmFyIG89TSh0LGUpLGk9byYmVChyLGUpO3JldHVybiBpP28ubWFwKE8pLmNvbmNhdCh7dHlwZTplLGF0dHJzOm59KS5jb25jYXQoaS5tYXAoTykpOm51bGx9ZnVuY3Rpb24gTyh0KXtyZXR1cm57dHlwZTp0LGF0dHJzOm51bGx9fWZ1bmN0aW9uIE0odCxlKXt2YXIgbj10LnBhcmVudCxyPXQuc3RhcnRJbmRleCxvPXQuZW5kSW5kZXgsaT1uLmNvbnRlbnRNYXRjaEF0KHIpLmZpbmRXcmFwcGluZyhlKTtpZighaSlyZXR1cm4gbnVsbDt2YXIgcz1pLmxlbmd0aD9pWzBdOmU7cmV0dXJuIG4uY2FuUmVwbGFjZVdpdGgocixvLHMpP2k6bnVsbH1mdW5jdGlvbiBUKHQsZSl7dmFyIG49dC5wYXJlbnQscj10LnN0YXJ0SW5kZXgsbz10LmVuZEluZGV4LGk9bi5jaGlsZChyKSxzPWUuY29udGVudE1hdGNoLmZpbmRXcmFwcGluZyhpLnR5cGUpO2lmKCFzKXJldHVybiBudWxsO2Zvcih2YXIgYT1zLmxlbmd0aD9zW3MubGVuZ3RoLTFdOmUsYz1hLmNvbnRlbnRNYXRjaCxsPXI7YyYmbDxvO2wrKyljPWMubWF0Y2hUeXBlKG4uY2hpbGQobCkudHlwZSk7cmV0dXJuIGMmJmMudmFsaWRFbmQ/czpudWxsfWZ1bmN0aW9uIE4odCxlLG4pe3ZhciByPXQucmVzb2x2ZShlKSxvPXIuaW5kZXgoKTtyZXR1cm4gci5wYXJlbnQuY2FuUmVwbGFjZVdpdGgobyxvKzEsbil9ZnVuY3Rpb24gRSh0LGUsbixyKXt2b2lkIDA9PT1uJiYobj0xKTt2YXIgbz10LnJlc29sdmUoZSksaT1vLmRlcHRoLW4scz1yJiZyW3IubGVuZ3RoLTFdfHxvLnBhcmVudDtpZihpPDB8fG8ucGFyZW50LnR5cGUuc3BlYy5pc29sYXRpbmd8fCFvLnBhcmVudC5jYW5SZXBsYWNlKG8uaW5kZXgoKSxvLnBhcmVudC5jaGlsZENvdW50KXx8IXMudHlwZS52YWxpZENvbnRlbnQoby5wYXJlbnQuY29udGVudC5jdXRCeUluZGV4KG8uaW5kZXgoKSxvLnBhcmVudC5jaGlsZENvdW50KSkpcmV0dXJuITE7Zm9yKHZhciBhPW8uZGVwdGgtMSxjPW4tMjthPmk7YS0tLGMtLSl7dmFyIGw9by5ub2RlKGEpLHA9by5pbmRleChhKTtpZihsLnR5cGUuc3BlYy5pc29sYXRpbmcpcmV0dXJuITE7dmFyIHU9bC5jb250ZW50LmN1dEJ5SW5kZXgocCxsLmNoaWxkQ291bnQpLGg9ciYmcltjXXx8bDtpZihoIT1sJiYodT11LnJlcGxhY2VDaGlsZCgwLGgudHlwZS5jcmVhdGUoaC5hdHRycykpKSwhbC5jYW5SZXBsYWNlKHArMSxsLmNoaWxkQ291bnQpfHwhaC50eXBlLnZhbGlkQ29udGVudCh1KSlyZXR1cm4hMX12YXIgZj1vLmluZGV4QWZ0ZXIoaSksZD1yJiZyWzBdO3JldHVybiBvLm5vZGUoaSkuY2FuUmVwbGFjZVdpdGgoZixmLGQ/ZC50eXBlOm8ubm9kZShpKzEpLnR5cGUpfWZ1bmN0aW9uIEEodCxlKXt2YXIgbj10LnJlc29sdmUoZSkscj1uLmluZGV4KCk7cmV0dXJuIFIobi5ub2RlQmVmb3JlLG4ubm9kZUFmdGVyKSYmbi5wYXJlbnQuY2FuUmVwbGFjZShyLHIrMSl9ZnVuY3Rpb24gUih0LGUpe3JldHVybiB0JiZlJiYhdC5pc0xlYWYmJnQuY2FuQXBwZW5kKGUpfWZ1bmN0aW9uIEQodCxlLG4pe3ZvaWQgMD09PW4mJihuPS0xKTtmb3IodmFyIHI9dC5yZXNvbHZlKGUpLG89ci5kZXB0aDs7by0tKXt2YXIgaT12b2lkIDAscz12b2lkIDA7aWYobz09ci5kZXB0aD8oaT1yLm5vZGVCZWZvcmUscz1yLm5vZGVBZnRlcik6bj4wPyhpPXIubm9kZShvKzEpLHM9ci5ub2RlKG8pLm1heWJlQ2hpbGQoci5pbmRleChvKSsxKSk6KGk9ci5ub2RlKG8pLm1heWJlQ2hpbGQoci5pbmRleChvKS0xKSxzPXIubm9kZShvKzEpKSxpJiYhaS5pc1RleHRibG9jayYmUihpLHMpKXJldHVybiBlO2lmKDA9PW8pYnJlYWs7ZT1uPDA/ci5iZWZvcmUobyk6ci5hZnRlcihvKX19ZnVuY3Rpb24geih0LGUsbil7dmFyIHI9dC5yZXNvbHZlKGUpO2lmKHIucGFyZW50LmNhblJlcGxhY2VXaXRoKHIuaW5kZXgoKSxyLmluZGV4KCksbikpcmV0dXJuIGU7aWYoMD09ci5wYXJlbnRPZmZzZXQpZm9yKHZhciBvPXIuZGVwdGgtMTtvPj0wO28tLSl7dmFyIGk9ci5pbmRleChvKTtpZihyLm5vZGUobykuY2FuUmVwbGFjZVdpdGgoaSxpLG4pKXJldHVybiByLmJlZm9yZShvKzEpO2lmKGk+MClyZXR1cm4gbnVsbH1pZihyLnBhcmVudE9mZnNldD09ci5wYXJlbnQuY29udGVudC5zaXplKWZvcih2YXIgcz1yLmRlcHRoLTE7cz49MDtzLS0pe3ZhciBhPXIuaW5kZXhBZnRlcihzKTtpZihyLm5vZGUocykuY2FuUmVwbGFjZVdpdGgoYSxhLG4pKXJldHVybiByLmFmdGVyKHMrMSk7aWYoYTxyLm5vZGUocykuY2hpbGRDb3VudClyZXR1cm4gbnVsbH19ZnVuY3Rpb24gUCh0LGUsbil7dmFyIHI9dC5yZXNvbHZlKGUpO2lmKCFuLmNvbnRlbnQuc2l6ZSlyZXR1cm4gZTtmb3IodmFyIG89bi5jb250ZW50LGk9MDtpPG4ub3BlblN0YXJ0O2krKylvPW8uZmlyc3RDaGlsZC5jb250ZW50O2Zvcih2YXIgcz0xO3M8PSgwPT1uLm9wZW5TdGFydCYmbi5zaXplPzI6MSk7cysrKWZvcih2YXIgYT1yLmRlcHRoO2E+PTA7YS0tKXt2YXIgYz1hPT1yLmRlcHRoPzA6ci5wb3M8PShyLnN0YXJ0KGErMSkrci5lbmQoYSsxKSkvMj8tMToxLGw9ci5pbmRleChhKSsoYz4wPzE6MCk7aWYoMT09cz9yLm5vZGUoYSkuY2FuUmVwbGFjZShsLGwsbyk6ci5ub2RlKGEpLmNvbnRlbnRNYXRjaEF0KGwpLmZpbmRXcmFwcGluZyhvLmZpcnN0Q2hpbGQudHlwZSkpcmV0dXJuIDA9PWM/ci5wb3M6YzwwP3IuYmVmb3JlKGErMSk6ci5hZnRlcihhKzEpfXJldHVybiBudWxsfWZ1bmN0aW9uIEkodCxlLG4pe2Zvcih2YXIgbz1bXSxpPTA7aTx0LmNoaWxkQ291bnQ7aSsrKXt2YXIgcz10LmNoaWxkKGkpO3MuY29udGVudC5zaXplJiYocz1zLmNvcHkoSShzLmNvbnRlbnQsZSxzKSkpLHMuaXNJbmxpbmUmJihzPWUocyxuLGkpKSxvLnB1c2gocyl9cmV0dXJuIHIuRnJhZ21lbnQuZnJvbUFycmF5KG8pfXkuanNvbklEKCJyZXBsYWNlQXJvdW5kIix4KSxmLnByb3RvdHlwZS5saWZ0PWZ1bmN0aW9uKHQsZSl7Zm9yKHZhciBuPXQuJGZyb20sbz10LiR0byxpPXQuZGVwdGgscz1uLmJlZm9yZShpKzEpLGE9by5hZnRlcihpKzEpLGM9cyxsPWEscD1yLkZyYWdtZW50LmVtcHR5LHU9MCxoPWksZj0hMTtoPmU7aC0tKWZ8fG4uaW5kZXgoaCk+MD8oZj0hMCxwPXIuRnJhZ21lbnQuZnJvbShuLm5vZGUoaCkuY29weShwKSksdSsrKTpjLS07Zm9yKHZhciBkPXIuRnJhZ21lbnQuZW1wdHksdj0wLG09aSx5PSExO20+ZTttLS0peXx8by5hZnRlcihtKzEpPG8uZW5kKG0pPyh5PSEwLGQ9ci5GcmFnbWVudC5mcm9tKG8ubm9kZShtKS5jb3B5KGQpKSx2KyspOmwrKztyZXR1cm4gdGhpcy5zdGVwKG5ldyB4KGMsbCxzLGEsbmV3IHIuU2xpY2UocC5hcHBlbmQoZCksdSx2KSxwLnNpemUtdSwhMCkpfSxmLnByb3RvdHlwZS53cmFwPWZ1bmN0aW9uKHQsZSl7Zm9yKHZhciBuPXIuRnJhZ21lbnQuZW1wdHksbz1lLmxlbmd0aC0xO28+PTA7by0tKW49ci5GcmFnbWVudC5mcm9tKGVbb10udHlwZS5jcmVhdGUoZVtvXS5hdHRycyxuKSk7dmFyIGk9dC5zdGFydCxzPXQuZW5kO3JldHVybiB0aGlzLnN0ZXAobmV3IHgoaSxzLGkscyxuZXcgci5TbGljZShuLDAsMCksZS5sZW5ndGgsITApKX0sZi5wcm90b3R5cGUuc2V0QmxvY2tUeXBlPWZ1bmN0aW9uKHQsZSxuLG8pe3ZhciBpPXRoaXM7aWYodm9pZCAwPT09ZSYmKGU9dCksIW4uaXNUZXh0YmxvY2spdGhyb3cgbmV3IFJhbmdlRXJyb3IoIlR5cGUgZ2l2ZW4gdG8gc2V0QmxvY2tUeXBlIHNob3VsZCBiZSBhIHRleHRibG9jayIpO3ZhciBzPXRoaXMuc3RlcHMubGVuZ3RoO3JldHVybiB0aGlzLmRvYy5ub2Rlc0JldHdlZW4odCxlLChmdW5jdGlvbih0LGUpe2lmKHQuaXNUZXh0YmxvY2smJiF0Lmhhc01hcmt1cChuLG8pJiZOKGkuZG9jLGkubWFwcGluZy5zbGljZShzKS5tYXAoZSksbikpe2kuY2xlYXJJbmNvbXBhdGlibGUoaS5tYXBwaW5nLnNsaWNlKHMpLm1hcChlLDEpLG4pO3ZhciBhPWkubWFwcGluZy5zbGljZShzKSxjPWEubWFwKGUsMSksbD1hLm1hcChlK3Qubm9kZVNpemUsMSk7cmV0dXJuIGkuc3RlcChuZXcgeChjLGwsYysxLGwtMSxuZXcgci5TbGljZShyLkZyYWdtZW50LmZyb20obi5jcmVhdGUobyxudWxsLHQubWFya3MpKSwwLDApLDEsITApKSwhMX19KSksdGhpc30sZi5wcm90b3R5cGUuc2V0Tm9kZU1hcmt1cD1mdW5jdGlvbih0LGUsbixvKXt2YXIgaT10aGlzLmRvYy5ub2RlQXQodCk7aWYoIWkpdGhyb3cgbmV3IFJhbmdlRXJyb3IoIk5vIG5vZGUgYXQgZ2l2ZW4gcG9zaXRpb24iKTtlfHwoZT1pLnR5cGUpO3ZhciBzPWUuY3JlYXRlKG4sbnVsbCxvfHxpLm1hcmtzKTtpZihpLmlzTGVhZilyZXR1cm4gdGhpcy5yZXBsYWNlV2l0aCh0LHQraS5ub2RlU2l6ZSxzKTtpZighZS52YWxpZENvbnRlbnQoaS5jb250ZW50KSl0aHJvdyBuZXcgUmFuZ2VFcnJvcigiSW52YWxpZCBjb250ZW50IGZvciBub2RlIHR5cGUgIitlLm5hbWUpO3JldHVybiB0aGlzLnN0ZXAobmV3IHgodCx0K2kubm9kZVNpemUsdCsxLHQraS5ub2RlU2l6ZS0xLG5ldyByLlNsaWNlKHIuRnJhZ21lbnQuZnJvbShzKSwwLDApLDEsITApKX0sZi5wcm90b3R5cGUuc3BsaXQ9ZnVuY3Rpb24odCxlLG4pe3ZvaWQgMD09PWUmJihlPTEpO2Zvcih2YXIgbz10aGlzLmRvYy5yZXNvbHZlKHQpLGk9ci5GcmFnbWVudC5lbXB0eSxzPXIuRnJhZ21lbnQuZW1wdHksYT1vLmRlcHRoLGM9by5kZXB0aC1lLGw9ZS0xO2E+YzthLS0sbC0tKXtpPXIuRnJhZ21lbnQuZnJvbShvLm5vZGUoYSkuY29weShpKSk7dmFyIHA9biYmbltsXTtzPXIuRnJhZ21lbnQuZnJvbShwP3AudHlwZS5jcmVhdGUocC5hdHRycyxzKTpvLm5vZGUoYSkuY29weShzKSl9cmV0dXJuIHRoaXMuc3RlcChuZXcgdyh0LHQsbmV3IHIuU2xpY2UoaS5hcHBlbmQocyksZSxlKSwhMCkpfSxmLnByb3RvdHlwZS5qb2luPWZ1bmN0aW9uKHQsZSl7dm9pZCAwPT09ZSYmKGU9MSk7dmFyIG49bmV3IHcodC1lLHQrZSxyLlNsaWNlLmVtcHR5LCEwKTtyZXR1cm4gdGhpcy5zdGVwKG4pfTt2YXIgXz1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKGUsbixyKXt0LmNhbGwodGhpcyksdGhpcy5mcm9tPWUsdGhpcy50bz1uLHRoaXMubWFyaz1yfXJldHVybiB0JiYoZS5fX3Byb3RvX189dCksZS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZSh0JiZ0LnByb3RvdHlwZSksZS5wcm90b3R5cGUuY29uc3RydWN0b3I9ZSxlLnByb3RvdHlwZS5hcHBseT1mdW5jdGlvbih0KXt2YXIgZT10aGlzLG49dC5zbGljZSh0aGlzLmZyb20sdGhpcy50byksbz10LnJlc29sdmUodGhpcy5mcm9tKSxpPW8ubm9kZShvLnNoYXJlZERlcHRoKHRoaXMudG8pKSxzPW5ldyByLlNsaWNlKEkobi5jb250ZW50LChmdW5jdGlvbih0LG4pe3JldHVybiBuLnR5cGUuYWxsb3dzTWFya1R5cGUoZS5tYXJrLnR5cGUpP3QubWFyayhlLm1hcmsuYWRkVG9TZXQodC5tYXJrcykpOnR9KSxpKSxuLm9wZW5TdGFydCxuLm9wZW5FbmQpO3JldHVybiBnLmZyb21SZXBsYWNlKHQsdGhpcy5mcm9tLHRoaXMudG8scyl9LGUucHJvdG90eXBlLmludmVydD1mdW5jdGlvbigpe3JldHVybiBuZXcgRih0aGlzLmZyb20sdGhpcy50byx0aGlzLm1hcmspfSxlLnByb3RvdHlwZS5tYXA9ZnVuY3Rpb24odCl7dmFyIG49dC5tYXBSZXN1bHQodGhpcy5mcm9tLDEpLHI9dC5tYXBSZXN1bHQodGhpcy50bywtMSk7cmV0dXJuIG4uZGVsZXRlZCYmci5kZWxldGVkfHxuLnBvcz49ci5wb3M/bnVsbDpuZXcgZShuLnBvcyxyLnBvcyx0aGlzLm1hcmspfSxlLnByb3RvdHlwZS5tZXJnZT1mdW5jdGlvbih0KXtpZih0IGluc3RhbmNlb2YgZSYmdC5tYXJrLmVxKHRoaXMubWFyaykmJnRoaXMuZnJvbTw9dC50byYmdGhpcy50bz49dC5mcm9tKXJldHVybiBuZXcgZShNYXRoLm1pbih0aGlzLmZyb20sdC5mcm9tKSxNYXRoLm1heCh0aGlzLnRvLHQudG8pLHRoaXMubWFyayl9LGUucHJvdG90eXBlLnRvSlNPTj1mdW5jdGlvbigpe3JldHVybntzdGVwVHlwZToiYWRkTWFyayIsbWFyazp0aGlzLm1hcmsudG9KU09OKCksZnJvbTp0aGlzLmZyb20sdG86dGhpcy50b319LGUuZnJvbUpTT049ZnVuY3Rpb24odCxuKXtpZigibnVtYmVyIiE9dHlwZW9mIG4uZnJvbXx8Im51bWJlciIhPXR5cGVvZiBuLnRvKXRocm93IG5ldyBSYW5nZUVycm9yKCJJbnZhbGlkIGlucHV0IGZvciBBZGRNYXJrU3RlcC5mcm9tSlNPTiIpO3JldHVybiBuZXcgZShuLmZyb20sbi50byx0Lm1hcmtGcm9tSlNPTihuLm1hcmspKX0sZX0oeSk7eS5qc29uSUQoImFkZE1hcmsiLF8pO3ZhciBGPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoZSxuLHIpe3QuY2FsbCh0aGlzKSx0aGlzLmZyb209ZSx0aGlzLnRvPW4sdGhpcy5tYXJrPXJ9cmV0dXJuIHQmJihlLl9fcHJvdG9fXz10KSxlLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKHQmJnQucHJvdG90eXBlKSxlLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1lLGUucHJvdG90eXBlLmFwcGx5PWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMsbj10LnNsaWNlKHRoaXMuZnJvbSx0aGlzLnRvKSxvPW5ldyByLlNsaWNlKEkobi5jb250ZW50LChmdW5jdGlvbih0KXtyZXR1cm4gdC5tYXJrKGUubWFyay5yZW1vdmVGcm9tU2V0KHQubWFya3MpKX0pKSxuLm9wZW5TdGFydCxuLm9wZW5FbmQpO3JldHVybiBnLmZyb21SZXBsYWNlKHQsdGhpcy5mcm9tLHRoaXMudG8sbyl9LGUucHJvdG90eXBlLmludmVydD1mdW5jdGlvbigpe3JldHVybiBuZXcgXyh0aGlzLmZyb20sdGhpcy50byx0aGlzLm1hcmspfSxlLnByb3RvdHlwZS5tYXA9ZnVuY3Rpb24odCl7dmFyIG49dC5tYXBSZXN1bHQodGhpcy5mcm9tLDEpLHI9dC5tYXBSZXN1bHQodGhpcy50bywtMSk7cmV0dXJuIG4uZGVsZXRlZCYmci5kZWxldGVkfHxuLnBvcz49ci5wb3M/bnVsbDpuZXcgZShuLnBvcyxyLnBvcyx0aGlzLm1hcmspfSxlLnByb3RvdHlwZS5tZXJnZT1mdW5jdGlvbih0KXtpZih0IGluc3RhbmNlb2YgZSYmdC5tYXJrLmVxKHRoaXMubWFyaykmJnRoaXMuZnJvbTw9dC50byYmdGhpcy50bz49dC5mcm9tKXJldHVybiBuZXcgZShNYXRoLm1pbih0aGlzLmZyb20sdC5mcm9tKSxNYXRoLm1heCh0aGlzLnRvLHQudG8pLHRoaXMubWFyayl9LGUucHJvdG90eXBlLnRvSlNPTj1mdW5jdGlvbigpe3JldHVybntzdGVwVHlwZToicmVtb3ZlTWFyayIsbWFyazp0aGlzLm1hcmsudG9KU09OKCksZnJvbTp0aGlzLmZyb20sdG86dGhpcy50b319LGUuZnJvbUpTT049ZnVuY3Rpb24odCxuKXtpZigibnVtYmVyIiE9dHlwZW9mIG4uZnJvbXx8Im51bWJlciIhPXR5cGVvZiBuLnRvKXRocm93IG5ldyBSYW5nZUVycm9yKCJJbnZhbGlkIGlucHV0IGZvciBSZW1vdmVNYXJrU3RlcC5mcm9tSlNPTiIpO3JldHVybiBuZXcgZShuLmZyb20sbi50byx0Lm1hcmtGcm9tSlNPTihuLm1hcmspKX0sZX0oeSk7ZnVuY3Rpb24gQih0LGUsbixvKXtpZih2b2lkIDA9PT1uJiYobj1lKSx2b2lkIDA9PT1vJiYobz1yLlNsaWNlLmVtcHR5KSxlPT1uJiYhby5zaXplKXJldHVybiBudWxsO3ZhciBpPXQucmVzb2x2ZShlKSxzPXQucmVzb2x2ZShuKTtpZihIKGkscyxvKSlyZXR1cm4gbmV3IHcoZSxuLG8pO3ZhciBhPUcoaSxvKSxjPSQoaSxhKSxsPVcoaSxzLGMpO2lmKCFsKXJldHVybiBudWxsO2lmKGMuc2l6ZSE9bC5zaXplJiZLKGkscyxjKSl7dmFyIHA9cy5kZXB0aCx1PXMuYWZ0ZXIocCk7d2hpbGUocD4xJiZ1PT1zLmVuZCgtLXApKSsrdTt2YXIgaD1XKGksdC5yZXNvbHZlKHUpLGMpO2lmKGgpcmV0dXJuIG5ldyB4KGUsdSxuLHMuZW5kKCksaCxjLnNpemUpfXJldHVybiBsLnNpemV8fGUhPW4/bmV3IHcoZSxuLGwpOm51bGx9ZnVuY3Rpb24gaih0LGUsbixvKXt2YXIgaT1yLkZyYWdtZW50LmVtcHR5LHM9MCxhPW5bZV07aWYodC5kZXB0aD5lKXt2YXIgYz1qKHQsZSsxLG4sb3x8YSk7cz1jLm9wZW5FbmQrMSxpPXIuRnJhZ21lbnQuZnJvbSh0Lm5vZGUoZSsxKS5jb3B5KGMuY29udGVudCkpfXJldHVybiBhJiYoaT1pLmFwcGVuZChhLmNvbnRlbnQpLHM9YS5vcGVuRW5kKSxvJiYoaT1pLmFwcGVuZCh0Lm5vZGUoZSkuY29udGVudE1hdGNoQXQodC5pbmRleEFmdGVyKGUpKS5maWxsQmVmb3JlKHIuRnJhZ21lbnQuZW1wdHksITApKSxzPTApLHtjb250ZW50Omksb3BlbkVuZDpzfX1mdW5jdGlvbiAkKHQsZSl7dmFyIG49aih0LDAsZSwhMSksbz1uLmNvbnRlbnQsaT1uLm9wZW5FbmQ7cmV0dXJuIG5ldyByLlNsaWNlKG8sdC5kZXB0aCxpfHwwKX1mdW5jdGlvbiBWKHQsZSxuLHIsbyxpLHMpe3ZhciBhLGM9dC5jaGlsZENvdW50LGw9Yy0ocz4wPzE6MCkscD1pPDA/ZTpuLm5vZGUobyk7YT1pPDA/cC5jb250ZW50TWF0Y2hBdChsKToxPT1jJiZzPjA/cC5jb250ZW50TWF0Y2hBdChpP24uaW5kZXgobyk6bi5pbmRleEFmdGVyKG8pKTpwLmNvbnRlbnRNYXRjaEF0KG4uaW5kZXhBZnRlcihvKSkubWF0Y2hGcmFnbWVudCh0LGM+MCYmaT8xOjAsbCk7dmFyIHU9ci5ub2RlKG8pO2lmKHM+MCYmbzxyLmRlcHRoKXt2YXIgaD11LmNvbnRlbnQuY3V0QnlJbmRleChyLmluZGV4QWZ0ZXIobykpLmFkZFRvU3RhcnQodC5sYXN0Q2hpbGQpLGY9YS5maWxsQmVmb3JlKGgsITApO2lmKGYmJmYuc2l6ZSYmaT4wJiYxPT1jJiYoZj1udWxsKSxmKXt2YXIgZD1WKHQubGFzdENoaWxkLmNvbnRlbnQsdC5sYXN0Q2hpbGQsbixyLG8rMSwxPT1jP2ktMTotMSxzLTEpO2lmKGQpe3ZhciB2PXQubGFzdENoaWxkLmNvcHkoZCk7cmV0dXJuIGYuc2l6ZT90LmN1dEJ5SW5kZXgoMCxjLTEpLmFwcGVuZChmKS5hZGRUb0VuZCh2KTp0LnJlcGxhY2VDaGlsZChjLTEsdil9fX1zPjAmJihhPWEubWF0Y2hUeXBlKCgxPT1jJiZpPjA/bi5ub2RlKG8rMSk6dC5sYXN0Q2hpbGQpLnR5cGUpKTt2YXIgbT1yLmluZGV4KG8pO2lmKG09PXUuY2hpbGRDb3VudCYmIXUudHlwZS5jb21wYXRpYmxlQ29udGVudChlLnR5cGUpKXJldHVybiBudWxsO2Zvcih2YXIgeT1hLmZpbGxCZWZvcmUodS5jb250ZW50LCEwLG0pLGc9bTt5JiZnPHUuY29udGVudC5jaGlsZENvdW50O2crKylwLnR5cGUuYWxsb3dzTWFya3ModS5jb250ZW50LmNoaWxkKGcpLm1hcmtzKXx8KHk9bnVsbCk7aWYoIXkpcmV0dXJuIG51bGw7aWYocz4wKXt2YXIgdz1MKHQubGFzdENoaWxkLHMtMSxuLG8rMSwxPT1jP2ktMTotMSk7dD10LnJlcGxhY2VDaGlsZChjLTEsdyl9cmV0dXJuIHQ9dC5hcHBlbmQoeSksci5kZXB0aD5vJiYodD10LmFkZFRvRW5kKEoocixvKzEpKSksdH1mdW5jdGlvbiBMKHQsZSxuLG8saSl7dmFyIHMsYT10LmNvbnRlbnQsYz1hLmNoaWxkQ291bnQ7aWYocz1pPj0wP24ubm9kZShvKS5jb250ZW50TWF0Y2hBdChuLmluZGV4QWZ0ZXIobykpLm1hdGNoRnJhZ21lbnQoYSxpPjA/MTowLGMpOnQuY29udGVudE1hdGNoQXQoYyksZT4wKXt2YXIgbD1MKGEubGFzdENoaWxkLGUtMSxuLG8rMSwxPT1jP2ktMTotMSk7YT1hLnJlcGxhY2VDaGlsZChjLTEsbCl9cmV0dXJuIHQuY29weShhLmFwcGVuZChzLmZpbGxCZWZvcmUoci5GcmFnbWVudC5lbXB0eSwhMCkpKX1mdW5jdGlvbiBKKHQsZSl7dmFyIG49dC5ub2RlKGUpLHI9bi5jb250ZW50TWF0Y2hBdCgwKS5maWxsQmVmb3JlKG4uY29udGVudCwhMCx0LmluZGV4KGUpKTtyZXR1cm4gdC5kZXB0aD5lJiYocj1yLmFkZFRvRW5kKEoodCxlKzEpKSksbi5jb3B5KHIpfWZ1bmN0aW9uIHEodCxlLG4pe3doaWxlKGU+MCYmbj4wJiYxPT10LmNoaWxkQ291bnQpdD10LmZpcnN0Q2hpbGQuY29udGVudCxlLS0sbi0tO3JldHVybiBuZXcgci5TbGljZSh0LGUsbil9ZnVuY3Rpb24gVyh0LGUsbil7dmFyIHI9VihuLmNvbnRlbnQsdC5ub2RlKDApLHQsZSwwLG4ub3BlblN0YXJ0LG4ub3BlbkVuZCk7cmV0dXJuIHI/cShyLG4ub3BlblN0YXJ0LGUuZGVwdGgpOm51bGx9ZnVuY3Rpb24gSCh0LGUsbil7cmV0dXJuIW4ub3BlblN0YXJ0JiYhbi5vcGVuRW5kJiZ0LnN0YXJ0KCk9PWUuc3RhcnQoKSYmdC5wYXJlbnQuY2FuUmVwbGFjZSh0LmluZGV4KCksZS5pbmRleCgpLG4uY29udGVudCl9ZnVuY3Rpb24gSyh0LGUsbil7aWYoIWUucGFyZW50LmlzVGV4dGJsb2NrKXJldHVybiExO3ZhciByLG89bi5vcGVuRW5kP1Uobi5jb250ZW50LG4ub3BlbkVuZCk6dC5ub2RlKHQuZGVwdGgtKG4ub3BlblN0YXJ0LW4ub3BlbkVuZCkpO2lmKCFvLmlzVGV4dGJsb2NrKXJldHVybiExO2Zvcih2YXIgaT1lLmluZGV4KCk7aTxlLnBhcmVudC5jaGlsZENvdW50O2krKylpZighby50eXBlLmFsbG93c01hcmtzKGUucGFyZW50LmNoaWxkKGkpLm1hcmtzKSlyZXR1cm4hMTtyZXR1cm4gbi5vcGVuRW5kP3I9by5jb250ZW50TWF0Y2hBdChvLmNoaWxkQ291bnQpOihyPW8uY29udGVudE1hdGNoQXQoby5jaGlsZENvdW50KSxuLnNpemUmJihyPXIubWF0Y2hGcmFnbWVudChuLmNvbnRlbnQsbi5vcGVuU3RhcnQ/MTowKSkpLHI9ci5tYXRjaEZyYWdtZW50KGUucGFyZW50LmNvbnRlbnQsZS5pbmRleCgpKSxyJiZyLnZhbGlkRW5kfWZ1bmN0aW9uIFUodCxlKXtmb3IodmFyIG49MTtuPGU7bisrKXQ9dC5sYXN0Q2hpbGQuY29udGVudDtyZXR1cm4gdC5sYXN0Q2hpbGR9ZnVuY3Rpb24gRyh0LGUpe2Zvcih2YXIgbj1uZXcgWCh0KSxyPTE7ZS5zaXplJiZyPD0zO3IrKyl7dmFyIG89bi5wbGFjZVNsaWNlKGUuY29udGVudCxlLm9wZW5TdGFydCxlLm9wZW5FbmQscik7Mz09ciYmbyE9ZSYmby5zaXplJiYocj0wKSxlPW99d2hpbGUobi5vcGVuLmxlbmd0aCluLmNsb3NlTm9kZSgpO3JldHVybiBuLnBsYWNlZH15Lmpzb25JRCgicmVtb3ZlTWFyayIsRiksZi5wcm90b3R5cGUuYWRkTWFyaz1mdW5jdGlvbih0LGUsbil7dmFyIHI9dGhpcyxvPVtdLGk9W10scz1udWxsLGE9bnVsbDtyZXR1cm4gdGhpcy5kb2Mubm9kZXNCZXR3ZWVuKHQsZSwoZnVuY3Rpb24ocixjLGwpe2lmKHIuaXNJbmxpbmUpe3ZhciBwPXIubWFya3M7aWYoIW4uaXNJblNldChwKSYmbC50eXBlLmFsbG93c01hcmtUeXBlKG4udHlwZSkpe2Zvcih2YXIgdT1NYXRoLm1heChjLHQpLGg9TWF0aC5taW4oYytyLm5vZGVTaXplLGUpLGY9bi5hZGRUb1NldChwKSxkPTA7ZDxwLmxlbmd0aDtkKyspcFtkXS5pc0luU2V0KGYpfHwocyYmcy50bz09dSYmcy5tYXJrLmVxKHBbZF0pP3MudG89aDpvLnB1c2gocz1uZXcgRih1LGgscFtkXSkpKTthJiZhLnRvPT11P2EudG89aDppLnB1c2goYT1uZXcgXyh1LGgsbikpfX19KSksby5mb3JFYWNoKChmdW5jdGlvbih0KXtyZXR1cm4gci5zdGVwKHQpfSkpLGkuZm9yRWFjaCgoZnVuY3Rpb24odCl7cmV0dXJuIHIuc3RlcCh0KX0pKSx0aGlzfSxmLnByb3RvdHlwZS5yZW1vdmVNYXJrPWZ1bmN0aW9uKHQsZSxuKXt2YXIgbz10aGlzO3ZvaWQgMD09PW4mJihuPW51bGwpO3ZhciBpPVtdLHM9MDtyZXR1cm4gdGhpcy5kb2Mubm9kZXNCZXR3ZWVuKHQsZSwoZnVuY3Rpb24obyxhKXtpZihvLmlzSW5saW5lKXtzKys7dmFyIGM9bnVsbDtpZihuIGluc3RhbmNlb2Ygci5NYXJrVHlwZSl7dmFyIGw9bi5pc0luU2V0KG8ubWFya3MpO2wmJihjPVtsXSl9ZWxzZSBuP24uaXNJblNldChvLm1hcmtzKSYmKGM9W25dKTpjPW8ubWFya3M7aWYoYyYmYy5sZW5ndGgpZm9yKHZhciBwPU1hdGgubWluKGErby5ub2RlU2l6ZSxlKSx1PTA7dTxjLmxlbmd0aDt1Kyspe2Zvcih2YXIgaD1jW3VdLGY9dm9pZCAwLGQ9MDtkPGkubGVuZ3RoO2QrKyl7dmFyIHY9aVtkXTt2LnN0ZXA9PXMtMSYmaC5lcShpW2RdLnN0eWxlKSYmKGY9dil9Zj8oZi50bz1wLGYuc3RlcD1zKTppLnB1c2goe3N0eWxlOmgsZnJvbTpNYXRoLm1heChhLHQpLHRvOnAsc3RlcDpzfSl9fX0pKSxpLmZvckVhY2goKGZ1bmN0aW9uKHQpe3JldHVybiBvLnN0ZXAobmV3IEYodC5mcm9tLHQudG8sdC5zdHlsZSkpfSkpLHRoaXN9LGYucHJvdG90eXBlLmNsZWFySW5jb21wYXRpYmxlPWZ1bmN0aW9uKHQsZSxuKXt2YXIgbz10aGlzO3ZvaWQgMD09PW4mJihuPWUuY29udGVudE1hdGNoKTtmb3IodmFyIGk9dGhpcy5kb2Mubm9kZUF0KHQpLHM9W10sYT10KzEsYz0wO2M8aS5jaGlsZENvdW50O2MrKyl7dmFyIGw9aS5jaGlsZChjKSxwPWErbC5ub2RlU2l6ZSx1PW4ubWF0Y2hUeXBlKGwudHlwZSxsLmF0dHJzKTtpZih1KXtuPXU7Zm9yKHZhciBoPTA7aDxsLm1hcmtzLmxlbmd0aDtoKyspZS5hbGxvd3NNYXJrVHlwZShsLm1hcmtzW2hdLnR5cGUpfHxvLnN0ZXAobmV3IEYoYSxwLGwubWFya3NbaF0pKX1lbHNlIHMucHVzaChuZXcgdyhhLHAsci5TbGljZS5lbXB0eSkpO2E9cH1pZighbi52YWxpZEVuZCl7dmFyIGY9bi5maWxsQmVmb3JlKHIuRnJhZ21lbnQuZW1wdHksITApO3RoaXMucmVwbGFjZShhLGEsbmV3IHIuU2xpY2UoZiwwLDApKX1mb3IodmFyIGQ9cy5sZW5ndGgtMTtkPj0wO2QtLSlvLnN0ZXAoc1tkXSk7cmV0dXJuIHRoaXN9LGYucHJvdG90eXBlLnJlcGxhY2U9ZnVuY3Rpb24odCxlLG4pe3ZvaWQgMD09PWUmJihlPXQpLHZvaWQgMD09PW4mJihuPXIuU2xpY2UuZW1wdHkpO3ZhciBvPUIodGhpcy5kb2MsdCxlLG4pO3JldHVybiBvJiZ0aGlzLnN0ZXAobyksdGhpc30sZi5wcm90b3R5cGUucmVwbGFjZVdpdGg9ZnVuY3Rpb24odCxlLG4pe3JldHVybiB0aGlzLnJlcGxhY2UodCxlLG5ldyByLlNsaWNlKHIuRnJhZ21lbnQuZnJvbShuKSwwLDApKX0sZi5wcm90b3R5cGUuZGVsZXRlPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIHRoaXMucmVwbGFjZSh0LGUsci5TbGljZS5lbXB0eSl9LGYucHJvdG90eXBlLmluc2VydD1mdW5jdGlvbih0LGUpe3JldHVybiB0aGlzLnJlcGxhY2VXaXRoKHQsdCxlKX07dmFyIFg9ZnVuY3Rpb24odCl7dmFyIGU9dGhpczt0aGlzLm9wZW49W107Zm9yKHZhciBuPTA7bjw9dC5kZXB0aDtuKyspe3ZhciBvPXQubm9kZShuKSxpPW8uY29udGVudE1hdGNoQXQodC5pbmRleEFmdGVyKG4pKTtlLm9wZW4ucHVzaCh7cGFyZW50Om8sbWF0Y2g6aSxjb250ZW50OnIuRnJhZ21lbnQuZW1wdHksd3JhcHBlcjohMSxvcGVuRW5kOjAsZGVwdGg6bn0pfXRoaXMucGxhY2VkPVtdfTtmdW5jdGlvbiBZKHQsZSxuKXt2YXIgcj10LmNvbnRlbnQ7aWYoZT4xKXt2YXIgbz1ZKHQuZmlyc3RDaGlsZCxlLTEsMT09dC5jaGlsZENvdW50P24tMTowKTtyPXQuY29udGVudC5yZXBsYWNlQ2hpbGQoMCxvKX12YXIgaT10LnR5cGUuY29udGVudE1hdGNoLmZpbGxCZWZvcmUociwwPT1uKTtyZXR1cm4gdC5jb3B5KGkuYXBwZW5kKHIpKX1mdW5jdGlvbiBRKHQsZSl7dmFyIG49dC5jb250ZW50O2lmKGU+MSl7dmFyIG89USh0Lmxhc3RDaGlsZCxlLTEpO249dC5jb250ZW50LnJlcGxhY2VDaGlsZCh0LmNoaWxkQ291bnQtMSxvKX12YXIgaT10LmNvbnRlbnRNYXRjaEF0KHQuY2hpbGRDb3VudCkuZmlsbEJlZm9yZShyLkZyYWdtZW50LmVtcHR5LCEwKTtyZXR1cm4gdC5jb3B5KG4uYXBwZW5kKGkpKX1mdW5jdGlvbiBaKHQsZSl7cmV0dXJuIGU/dC5yZXBsYWNlQ2hpbGQodC5jaGlsZENvdW50LTEsUSh0Lmxhc3RDaGlsZCxlKSk6dH1mdW5jdGlvbiB0dCh0LGUsbixvLGkpe2lmKGU8bil7dmFyIHM9dC5maXJzdENoaWxkO3Q9dC5yZXBsYWNlQ2hpbGQoMCxzLmNvcHkodHQocy5jb250ZW50LGUrMSxuLG8scykpKX1pZihlPm8pe3ZhciBhPWkuY29udGVudE1hdGNoQXQoMCksYz1hLmZpbGxCZWZvcmUodCkuYXBwZW5kKHQpO3Q9Yy5hcHBlbmQoYS5tYXRjaEZyYWdtZW50KGMpLmZpbGxCZWZvcmUoci5GcmFnbWVudC5lbXB0eSwhMCkpfXJldHVybiB0fWZ1bmN0aW9uIGV0KHQsZSl7Zm9yKHZhciBuPVtdLHI9TWF0aC5taW4odC5kZXB0aCxlLmRlcHRoKSxvPXI7bz49MDtvLS0pe3ZhciBpPXQuc3RhcnQobyk7aWYoaTx0LnBvcy0odC5kZXB0aC1vKXx8ZS5lbmQobyk+ZS5wb3MrKGUuZGVwdGgtbyl8fHQubm9kZShvKS50eXBlLnNwZWMuaXNvbGF0aW5nfHxlLm5vZGUobykudHlwZS5zcGVjLmlzb2xhdGluZylicmVhaztpPT1lLnN0YXJ0KG8pJiZuLnB1c2gobyl9cmV0dXJuIG59WC5wcm90b3R5cGUucGxhY2VTbGljZT1mdW5jdGlvbih0LGUsbixvLGkpe2lmKGU+MCl7dmFyIHM9dC5maXJzdENoaWxkLGE9dGhpcy5wbGFjZVNsaWNlKHMuY29udGVudCxNYXRoLm1heCgwLGUtMSksbiYmMT09dC5jaGlsZENvdW50P24tMTowLG8scyk7YS5jb250ZW50IT1zLmNvbnRlbnQmJihhLmNvbnRlbnQuc2l6ZT8odD10LnJlcGxhY2VDaGlsZCgwLHMuY29weShhLmNvbnRlbnQpKSxlPWEub3BlblN0YXJ0KzEpOigxPT10LmNoaWxkQ291bnQmJihuPTApLHQ9dC5jdXRCeUluZGV4KDEpLGU9MCkpfXZhciBjPXRoaXMucGxhY2VDb250ZW50KHQsZSxuLG8saSk7aWYobz4yJiZjLnNpemUmJjA9PWUpe3ZhciBsPWMuY29udGVudC5maXJzdENoaWxkLHA9MT09Yy5jb250ZW50LmNoaWxkQ291bnQ7dGhpcy5wbGFjZUNvbnRlbnQobC5jb250ZW50LDAsbiYmcD9uLTE6MCxvLGwpLGM9cD9yLkZyYWdtZW50LmVtcHR5Om5ldyByLlNsaWNlKGMuY29udGVudC5jdXRCeUluZGV4KDEpLDAsbil9cmV0dXJuIGN9LFgucHJvdG90eXBlLnBsYWNlQ29udGVudD1mdW5jdGlvbih0LGUsbixvLGkpe2Zvcih2YXIgcz10aGlzLGE9MDthPHQuY2hpbGRDb3VudDthKyspe2Zvcih2YXIgYz10LmNoaWxkKGEpLGw9ITEscD1hPT10LmNoaWxkQ291bnQtMSx1PXRoaXMub3Blbi5sZW5ndGgtMTt1Pj0wO3UtLSl7dmFyIGg9cy5vcGVuW3VdLGY9dm9pZCAwO2lmKG8+MSYmKGY9aC5tYXRjaC5maW5kV3JhcHBpbmcoYy50eXBlKSkmJighaXx8IWYubGVuZ3RofHxmW2YubGVuZ3RoLTFdIT1pLnR5cGUpKXt3aGlsZSh0aGlzLm9wZW4ubGVuZ3RoLTE+dSlzLmNsb3NlTm9kZSgpO2Zvcih2YXIgZD0wO2Q8Zi5sZW5ndGg7ZCsrKWgubWF0Y2g9aC5tYXRjaC5tYXRjaFR5cGUoZltkXSksdSsrLGg9e3BhcmVudDpmW2RdLmNyZWF0ZSgpLG1hdGNoOmZbZF0uY29udGVudE1hdGNoLGNvbnRlbnQ6ci5GcmFnbWVudC5lbXB0eSx3cmFwcGVyOiEwLG9wZW5FbmQ6MCxkZXB0aDp1K2R9LHMub3Blbi5wdXNoKGgpfXZhciB2PWgubWF0Y2gubWF0Y2hUeXBlKGMudHlwZSk7aWYoIXYpe3ZhciBtPWgubWF0Y2guZmlsbEJlZm9yZShyLkZyYWdtZW50LmZyb20oYykpO2lmKCFtKXtpZihpJiZoLm1hdGNoLm1hdGNoVHlwZShpLnR5cGUpKWJyZWFrO2NvbnRpbnVlfWZvcih2YXIgeT0wO3k8bS5jaGlsZENvdW50O3krKyl7dmFyIGc9bS5jaGlsZCh5KTtzLmFkZE5vZGUoaCxnLDApLHY9aC5tYXRjaC5tYXRjaEZyYWdtZW50KGcpfX13aGlsZSh0aGlzLm9wZW4ubGVuZ3RoLTE+dSlzLmNsb3NlTm9kZSgpO2M9Yy5tYXJrKGgucGFyZW50LnR5cGUuYWxsb3dlZE1hcmtzKGMubWFya3MpKSxlJiYoYz1ZKGMsZSxwP246MCksZT0wKSxzLmFkZE5vZGUoaCxjLHA/bjowKSxoLm1hdGNoPXYscCYmKG49MCksbD0hMDticmVha31pZighbClicmVha31yZXR1cm4gdGhpcy5vcGVuLmxlbmd0aD4xJiYoYT4wJiZhPT10LmNoaWxkQ291bnR8fGkmJnRoaXMub3Blblt0aGlzLm9wZW4ubGVuZ3RoLTFdLnBhcmVudC50eXBlPT1pLnR5cGUpJiZ0aGlzLmNsb3NlTm9kZSgpLG5ldyByLlNsaWNlKHQuY3V0QnlJbmRleChhKSxlLG4pfSxYLnByb3RvdHlwZS5hZGROb2RlPWZ1bmN0aW9uKHQsZSxuKXt0LmNvbnRlbnQ9Wih0LmNvbnRlbnQsdC5vcGVuRW5kKS5hZGRUb0VuZChlKSx0Lm9wZW5FbmQ9bn0sWC5wcm90b3R5cGUuY2xvc2VOb2RlPWZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5vcGVuLnBvcCgpOzA9PXQuY29udGVudC5zaXplfHwodC53cmFwcGVyP3RoaXMuYWRkTm9kZSh0aGlzLm9wZW5bdGhpcy5vcGVuLmxlbmd0aC0xXSx0LnBhcmVudC5jb3B5KHQuY29udGVudCksdC5vcGVuRW5kKzEpOnRoaXMucGxhY2VkW3QuZGVwdGhdPXtkZXB0aDp0LmRlcHRoLGNvbnRlbnQ6dC5jb250ZW50LG9wZW5FbmQ6dC5vcGVuRW5kfSl9LGYucHJvdG90eXBlLnJlcGxhY2VSYW5nZT1mdW5jdGlvbih0LGUsbil7dmFyIG89dGhpcztpZighbi5zaXplKXJldHVybiB0aGlzLmRlbGV0ZVJhbmdlKHQsZSk7dmFyIGk9dGhpcy5kb2MucmVzb2x2ZSh0KSxzPXRoaXMuZG9jLnJlc29sdmUoZSk7aWYoSChpLHMsbikpcmV0dXJuIHRoaXMuc3RlcChuZXcgdyh0LGUsbikpO3ZhciBhPWV0KGksdGhpcy5kb2MucmVzb2x2ZShlKSk7MD09YVthLmxlbmd0aC0xXSYmYS5wb3AoKTt2YXIgYz0tKGkuZGVwdGgrMSk7YS51bnNoaWZ0KGMpO2Zvcih2YXIgbD1pLmRlcHRoLHA9aS5wb3MtMTtsPjA7bC0tLHAtLSl7dmFyIHU9aS5ub2RlKGwpLnR5cGUuc3BlYztpZih1LmRlZmluaW5nfHx1Lmlzb2xhdGluZylicmVhazthLmluZGV4T2YobCk+LTE/Yz1sOmkuYmVmb3JlKGwpPT1wJiZhLnNwbGljZSgxLDAsLWwpfWZvcih2YXIgaD1hLmluZGV4T2YoYyksZj1bXSxkPW4ub3BlblN0YXJ0LHY9bi5jb250ZW50LG09MDs7bSsrKXt2YXIgeT12LmZpcnN0Q2hpbGQ7aWYoZi5wdXNoKHkpLG09PW4ub3BlblN0YXJ0KWJyZWFrO3Y9eS5jb250ZW50fWQ+MCYmZltkLTFdLnR5cGUuc3BlYy5kZWZpbmluZyYmaS5ub2RlKGgpLnR5cGUhPWZbZC0xXS50eXBlP2QtPTE6ZD49MiYmZltkLTFdLmlzVGV4dGJsb2NrJiZmW2QtMl0udHlwZS5zcGVjLmRlZmluaW5nJiZpLm5vZGUoaCkudHlwZSE9ZltkLTJdLnR5cGUmJihkLT0yKTtmb3IodmFyIGc9bi5vcGVuU3RhcnQ7Zz49MDtnLS0pe3ZhciB4PShnK2QrMSklKG4ub3BlblN0YXJ0KzEpLGI9Zlt4XTtpZihiKWZvcih2YXIgaz0wO2s8YS5sZW5ndGg7aysrKXt2YXIgUz1hWyhrK2gpJWEubGVuZ3RoXSxDPSEwO1M8MCYmKEM9ITEsUz0tUyk7dmFyIE89aS5ub2RlKFMtMSksTT1pLmluZGV4KFMtMSk7aWYoTy5jYW5SZXBsYWNlV2l0aChNLE0sYi50eXBlLGIubWFya3MpKXJldHVybiBvLnJlcGxhY2UoaS5iZWZvcmUoUyksQz9zLmFmdGVyKFMpOmUsbmV3IHIuU2xpY2UodHQobi5jb250ZW50LDAsbi5vcGVuU3RhcnQseCkseCxuLm9wZW5FbmQpKX19Zm9yKHZhciBUPXRoaXMuc3RlcHMubGVuZ3RoLE49YS5sZW5ndGgtMTtOPj0wO04tLSl7aWYoby5yZXBsYWNlKHQsZSxuKSxvLnN0ZXBzLmxlbmd0aD5UKWJyZWFrO3ZhciBFPWFbTl07TjwwfHwodD1pLmJlZm9yZShFKSxlPXMuYWZ0ZXIoRSkpfXJldHVybiB0aGlzfSxmLnByb3RvdHlwZS5yZXBsYWNlUmFuZ2VXaXRoPWZ1bmN0aW9uKHQsZSxuKXtpZighbi5pc0lubGluZSYmdD09ZSYmdGhpcy5kb2MucmVzb2x2ZSh0KS5wYXJlbnQuY29udGVudC5zaXplKXt2YXIgbz16KHRoaXMuZG9jLHQsbi50eXBlKTtudWxsIT1vJiYodD1lPW8pfXJldHVybiB0aGlzLnJlcGxhY2VSYW5nZSh0LGUsbmV3IHIuU2xpY2Uoci5GcmFnbWVudC5mcm9tKG4pLDAsMCkpfSxmLnByb3RvdHlwZS5kZWxldGVSYW5nZT1mdW5jdGlvbih0LGUpe2Zvcih2YXIgbj10aGlzLHI9dGhpcy5kb2MucmVzb2x2ZSh0KSxvPXRoaXMuZG9jLnJlc29sdmUoZSksaT1ldChyLG8pLHM9MDtzPGkubGVuZ3RoO3MrKyl7dmFyIGE9aVtzXSxjPXM9PWkubGVuZ3RoLTE7aWYoYyYmMD09YXx8ci5ub2RlKGEpLnR5cGUuY29udGVudE1hdGNoLnZhbGlkRW5kKXJldHVybiBuLmRlbGV0ZShyLnN0YXJ0KGEpLG8uZW5kKGEpKTtpZihhPjAmJihjfHxyLm5vZGUoYS0xKS5jYW5SZXBsYWNlKHIuaW5kZXgoYS0xKSxvLmluZGV4QWZ0ZXIoYS0xKSkpKXJldHVybiBuLmRlbGV0ZShyLmJlZm9yZShhKSxvLmFmdGVyKGEpKX1mb3IodmFyIGw9MTtsPD1yLmRlcHRoO2wrKylpZih0LXIuc3RhcnQobCk9PXIuZGVwdGgtbCYmZT5yLmVuZChsKSlyZXR1cm4gbi5kZWxldGUoci5iZWZvcmUobCksZSk7cmV0dXJuIHRoaXMuZGVsZXRlKHQsZSl9LGUuVHJhbnNmb3JtPWYsZS5UcmFuc2Zvcm1FcnJvcj1oLGUuU3RlcD15LGUuU3RlcFJlc3VsdD1nLGUuam9pblBvaW50PUQsZS5jYW5Kb2luPUEsZS5jYW5TcGxpdD1FLGUuaW5zZXJ0UG9pbnQ9eixlLmRyb3BQb2ludD1QLGUubGlmdFRhcmdldD1TLGUuZmluZFdyYXBwaW5nPUMsZS5TdGVwTWFwPXAsZS5NYXBSZXN1bHQ9bCxlLk1hcHBpbmc9dSxlLkFkZE1hcmtTdGVwPV8sZS5SZW1vdmVNYXJrU3RlcD1GLGUuUmVwbGFjZVN0ZXA9dyxlLlJlcGxhY2VBcm91bmRTdGVwPXgsZS5yZXBsYWNlU3RlcD1CfSwiOTVkNSI6ZnVuY3Rpb24odCxlLG4pe3ZhciByPW4oIjQwYzMiKSxvPW4oIjUxNjgiKSgiaXRlcmF0b3IiKSxpPW4oIjQ4MWIiKTt0LmV4cG9ydHM9bigiNTg0YSIpLmlzSXRlcmFibGU9ZnVuY3Rpb24odCl7dmFyIGU9T2JqZWN0KHQpO3JldHVybiB2b2lkIDAhPT1lW29dfHwiQEBpdGVyYXRvciJpbiBlfHxpLmhhc093blByb3BlcnR5KHIoZSkpfX0sIjliNDMiOmZ1bmN0aW9uKHQsZSxuKXt2YXIgcj1uKCJkOGU4Iik7dC5leHBvcnRzPWZ1bmN0aW9uKHQsZSxuKXtpZihyKHQpLHZvaWQgMD09PWUpcmV0dXJuIHQ7c3dpdGNoKG4pe2Nhc2UgMTpyZXR1cm4gZnVuY3Rpb24obil7cmV0dXJuIHQuY2FsbChlLG4pfTtjYXNlIDI6cmV0dXJuIGZ1bmN0aW9uKG4scil7cmV0dXJuIHQuY2FsbChlLG4scil9O2Nhc2UgMzpyZXR1cm4gZnVuY3Rpb24obixyLG8pe3JldHVybiB0LmNhbGwoZSxuLHIsbyl9fXJldHVybiBmdW5jdGlvbigpe3JldHVybiB0LmFwcGx5KGUsYXJndW1lbnRzKX19fSwiOWM2YyI6ZnVuY3Rpb24odCxlLG4pe3ZhciByPW4oIjJiNGMiKSgidW5zY29wYWJsZXMiKSxvPUFycmF5LnByb3RvdHlwZTt2b2lkIDA9PW9bcl0mJm4oIjMyZTkiKShvLHIse30pLHQuZXhwb3J0cz1mdW5jdGlvbih0KXtvW3JdW3RdPSEwfX0sIjlkZWYiOmZ1bmN0aW9uKHQsZSxuKXt2YXIgcj1uKCI0NTg4Iiksbz1NYXRoLm1pbjt0LmV4cG9ydHM9ZnVuY3Rpb24odCl7cmV0dXJuIHQ+MD9vKHIodCksOTAwNzE5OTI1NDc0MDk5MSk6MH19LCI5ZTFlIjpmdW5jdGlvbih0LGUsbil7dC5leHBvcnRzPSFuKCI3OWU1IikoKGZ1bmN0aW9uKCl7cmV0dXJuIDchPU9iamVjdC5kZWZpbmVQcm9wZXJ0eSh7fSwiYSIse2dldDpmdW5jdGlvbigpe3JldHVybiA3fX0pLmF9KSl9LCI5ZmRkIjpmdW5jdGlvbih0LGUsbil7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIHIodCl7cmV0dXJuIHQmJiJvYmplY3QiPT09dHlwZW9mIHQmJiJkZWZhdWx0ImluIHQ/dFsiZGVmYXVsdCJdOnR9T2JqZWN0LmRlZmluZVByb3BlcnR5KGUsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pO3ZhciBvPXIobigiZmFhMSIpKTtmdW5jdGlvbiBpKHQsZSxuKXtmb3IodmFyIHI9MDs7cisrKXtpZihyPT10LmNoaWxkQ291bnR8fHI9PWUuY2hpbGRDb3VudClyZXR1cm4gdC5jaGlsZENvdW50PT1lLmNoaWxkQ291bnQ/bnVsbDpuO3ZhciBvPXQuY2hpbGQocikscz1lLmNoaWxkKHIpO2lmKG8hPXMpe2lmKCFvLnNhbWVNYXJrdXAocykpcmV0dXJuIG47aWYoby5pc1RleHQmJm8udGV4dCE9cy50ZXh0KXtmb3IodmFyIGE9MDtvLnRleHRbYV09PXMudGV4dFthXTthKyspbisrO3JldHVybiBufWlmKG8uY29udGVudC5zaXplfHxzLmNvbnRlbnQuc2l6ZSl7dmFyIGM9aShvLmNvbnRlbnQscy5jb250ZW50LG4rMSk7aWYobnVsbCE9YylyZXR1cm4gY31uKz1vLm5vZGVTaXplfWVsc2Ugbis9by5ub2RlU2l6ZX19ZnVuY3Rpb24gcyh0LGUsbixyKXtmb3IodmFyIG89dC5jaGlsZENvdW50LGk9ZS5jaGlsZENvdW50Ozspe2lmKDA9PW98fDA9PWkpcmV0dXJuIG89PWk/bnVsbDp7YTpuLGI6cn07dmFyIGE9dC5jaGlsZCgtLW8pLGM9ZS5jaGlsZCgtLWkpLGw9YS5ub2RlU2l6ZTtpZihhIT1jKXtpZighYS5zYW1lTWFya3VwKGMpKXJldHVybnthOm4sYjpyfTtpZihhLmlzVGV4dCYmYS50ZXh0IT1jLnRleHQpe3ZhciBwPTAsdT1NYXRoLm1pbihhLnRleHQubGVuZ3RoLGMudGV4dC5sZW5ndGgpO3doaWxlKHA8dSYmYS50ZXh0W2EudGV4dC5sZW5ndGgtcC0xXT09Yy50ZXh0W2MudGV4dC5sZW5ndGgtcC0xXSlwKyssbi0tLHItLTtyZXR1cm57YTpuLGI6cn19aWYoYS5jb250ZW50LnNpemV8fGMuY29udGVudC5zaXplKXt2YXIgaD1zKGEuY29udGVudCxjLmNvbnRlbnQsbi0xLHItMSk7aWYoaClyZXR1cm4gaH1uLT1sLHItPWx9ZWxzZSBuLT1sLHItPWx9fXZhciBhPWZ1bmN0aW9uKHQsZSl7dmFyIG49dGhpcztpZih0aGlzLmNvbnRlbnQ9dCx0aGlzLnNpemU9ZXx8MCxudWxsPT1lKWZvcih2YXIgcj0wO3I8dC5sZW5ndGg7cisrKW4uc2l6ZSs9dFtyXS5ub2RlU2l6ZX0sYz17Zmlyc3RDaGlsZDp7fSxsYXN0Q2hpbGQ6e30sY2hpbGRDb3VudDp7fX07YS5wcm90b3R5cGUubm9kZXNCZXR3ZWVuPWZ1bmN0aW9uKHQsZSxuLHIsbyl7dmFyIGk9dGhpczt2b2lkIDA9PT1yJiYocj0wKTtmb3IodmFyIHM9MCxhPTA7YTxlO3MrKyl7dmFyIGM9aS5jb250ZW50W3NdLGw9YStjLm5vZGVTaXplO2lmKGw+dCYmITEhPT1uKGMscithLG8scykmJmMuY29udGVudC5zaXplKXt2YXIgcD1hKzE7Yy5ub2Rlc0JldHdlZW4oTWF0aC5tYXgoMCx0LXApLE1hdGgubWluKGMuY29udGVudC5zaXplLGUtcCksbixyK3ApfWE9bH19LGEucHJvdG90eXBlLmRlc2NlbmRhbnRzPWZ1bmN0aW9uKHQpe3RoaXMubm9kZXNCZXR3ZWVuKDAsdGhpcy5zaXplLHQpfSxhLnByb3RvdHlwZS50ZXh0QmV0d2Vlbj1mdW5jdGlvbih0LGUsbixyKXt2YXIgbz0iIixpPSEwO3JldHVybiB0aGlzLm5vZGVzQmV0d2Vlbih0LGUsKGZ1bmN0aW9uKHMsYSl7cy5pc1RleHQ/KG8rPXMudGV4dC5zbGljZShNYXRoLm1heCh0LGEpLWEsZS1hKSxpPSFuKTpzLmlzTGVhZiYmcj8obys9cixpPSFuKTohaSYmcy5pc0Jsb2NrJiYobys9bixpPSEwKX0pLDApLG99LGEucHJvdG90eXBlLmFwcGVuZD1mdW5jdGlvbih0KXtpZighdC5zaXplKXJldHVybiB0aGlzO2lmKCF0aGlzLnNpemUpcmV0dXJuIHQ7dmFyIGU9dGhpcy5sYXN0Q2hpbGQsbj10LmZpcnN0Q2hpbGQscj10aGlzLmNvbnRlbnQuc2xpY2UoKSxvPTA7Zm9yKGUuaXNUZXh0JiZlLnNhbWVNYXJrdXAobikmJihyW3IubGVuZ3RoLTFdPWUud2l0aFRleHQoZS50ZXh0K24udGV4dCksbz0xKTtvPHQuY29udGVudC5sZW5ndGg7bysrKXIucHVzaCh0LmNvbnRlbnRbb10pO3JldHVybiBuZXcgYShyLHRoaXMuc2l6ZSt0LnNpemUpfSxhLnByb3RvdHlwZS5jdXQ9ZnVuY3Rpb24odCxlKXt2YXIgbj10aGlzO2lmKG51bGw9PWUmJihlPXRoaXMuc2l6ZSksMD09dCYmZT09dGhpcy5zaXplKXJldHVybiB0aGlzO3ZhciByPVtdLG89MDtpZihlPnQpZm9yKHZhciBpPTAscz0wO3M8ZTtpKyspe3ZhciBjPW4uY29udGVudFtpXSxsPXMrYy5ub2RlU2l6ZTtsPnQmJigoczx0fHxsPmUpJiYoYz1jLmlzVGV4dD9jLmN1dChNYXRoLm1heCgwLHQtcyksTWF0aC5taW4oYy50ZXh0Lmxlbmd0aCxlLXMpKTpjLmN1dChNYXRoLm1heCgwLHQtcy0xKSxNYXRoLm1pbihjLmNvbnRlbnQuc2l6ZSxlLXMtMSkpKSxyLnB1c2goYyksbys9Yy5ub2RlU2l6ZSkscz1sfXJldHVybiBuZXcgYShyLG8pfSxhLnByb3RvdHlwZS5jdXRCeUluZGV4PWZ1bmN0aW9uKHQsZSl7cmV0dXJuIHQ9PWU/YS5lbXB0eTowPT10JiZlPT10aGlzLmNvbnRlbnQubGVuZ3RoP3RoaXM6bmV3IGEodGhpcy5jb250ZW50LnNsaWNlKHQsZSkpfSxhLnByb3RvdHlwZS5yZXBsYWNlQ2hpbGQ9ZnVuY3Rpb24odCxlKXt2YXIgbj10aGlzLmNvbnRlbnRbdF07aWYobj09ZSlyZXR1cm4gdGhpczt2YXIgcj10aGlzLmNvbnRlbnQuc2xpY2UoKSxvPXRoaXMuc2l6ZStlLm5vZGVTaXplLW4ubm9kZVNpemU7cmV0dXJuIHJbdF09ZSxuZXcgYShyLG8pfSxhLnByb3RvdHlwZS5hZGRUb1N0YXJ0PWZ1bmN0aW9uKHQpe3JldHVybiBuZXcgYShbdF0uY29uY2F0KHRoaXMuY29udGVudCksdGhpcy5zaXplK3Qubm9kZVNpemUpfSxhLnByb3RvdHlwZS5hZGRUb0VuZD1mdW5jdGlvbih0KXtyZXR1cm4gbmV3IGEodGhpcy5jb250ZW50LmNvbmNhdCh0KSx0aGlzLnNpemUrdC5ub2RlU2l6ZSl9LGEucHJvdG90eXBlLmVxPWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXM7aWYodGhpcy5jb250ZW50Lmxlbmd0aCE9dC5jb250ZW50Lmxlbmd0aClyZXR1cm4hMTtmb3IodmFyIG49MDtuPHRoaXMuY29udGVudC5sZW5ndGg7bisrKWlmKCFlLmNvbnRlbnRbbl0uZXEodC5jb250ZW50W25dKSlyZXR1cm4hMTtyZXR1cm4hMH0sYy5maXJzdENoaWxkLmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLmNvbnRlbnQubGVuZ3RoP3RoaXMuY29udGVudFswXTpudWxsfSxjLmxhc3RDaGlsZC5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jb250ZW50Lmxlbmd0aD90aGlzLmNvbnRlbnRbdGhpcy5jb250ZW50Lmxlbmd0aC0xXTpudWxsfSxjLmNoaWxkQ291bnQuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY29udGVudC5sZW5ndGh9LGEucHJvdG90eXBlLmNoaWxkPWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMuY29udGVudFt0XTtpZighZSl0aHJvdyBuZXcgUmFuZ2VFcnJvcigiSW5kZXggIit0KyIgb3V0IG9mIHJhbmdlIGZvciAiK3RoaXMpO3JldHVybiBlfSxhLnByb3RvdHlwZS5tYXliZUNoaWxkPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLmNvbnRlbnRbdF19LGEucHJvdG90eXBlLmZvckVhY2g9ZnVuY3Rpb24odCl7Zm9yKHZhciBlPXRoaXMsbj0wLHI9MDtuPHRoaXMuY29udGVudC5sZW5ndGg7bisrKXt2YXIgbz1lLmNvbnRlbnRbbl07dChvLHIsbikscis9by5ub2RlU2l6ZX19LGEucHJvdG90eXBlLmZpbmREaWZmU3RhcnQ9ZnVuY3Rpb24odCxlKXtyZXR1cm4gdm9pZCAwPT09ZSYmKGU9MCksaSh0aGlzLHQsZSl9LGEucHJvdG90eXBlLmZpbmREaWZmRW5kPWZ1bmN0aW9uKHQsZSxuKXtyZXR1cm4gdm9pZCAwPT09ZSYmKGU9dGhpcy5zaXplKSx2b2lkIDA9PT1uJiYobj10LnNpemUpLHModGhpcyx0LGUsbil9LGEucHJvdG90eXBlLmZpbmRJbmRleD1mdW5jdGlvbih0LGUpe3ZhciBuPXRoaXM7aWYodm9pZCAwPT09ZSYmKGU9LTEpLDA9PXQpcmV0dXJuIHAoMCx0KTtpZih0PT10aGlzLnNpemUpcmV0dXJuIHAodGhpcy5jb250ZW50Lmxlbmd0aCx0KTtpZih0PnRoaXMuc2l6ZXx8dDwwKXRocm93IG5ldyBSYW5nZUVycm9yKCJQb3NpdGlvbiAiK3QrIiBvdXRzaWRlIG9mIGZyYWdtZW50ICgiK3RoaXMrIikiKTtmb3IodmFyIHI9MCxvPTA7O3IrKyl7dmFyIGk9bi5jaGlsZChyKSxzPW8raS5ub2RlU2l6ZTtpZihzPj10KXJldHVybiBzPT10fHxlPjA/cChyKzEscyk6cChyLG8pO289c319LGEucHJvdG90eXBlLnRvU3RyaW5nPWZ1bmN0aW9uKCl7cmV0dXJuIjwiK3RoaXMudG9TdHJpbmdJbm5lcigpKyI+In0sYS5wcm90b3R5cGUudG9TdHJpbmdJbm5lcj1mdW5jdGlvbigpe3JldHVybiB0aGlzLmNvbnRlbnQuam9pbigiLCAiKX0sYS5wcm90b3R5cGUudG9KU09OPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY29udGVudC5sZW5ndGg/dGhpcy5jb250ZW50Lm1hcCgoZnVuY3Rpb24odCl7cmV0dXJuIHQudG9KU09OKCl9KSk6bnVsbH0sYS5mcm9tSlNPTj1mdW5jdGlvbih0LGUpe2lmKCFlKXJldHVybiBhLmVtcHR5O2lmKCFBcnJheS5pc0FycmF5KGUpKXRocm93IG5ldyBSYW5nZUVycm9yKCJJbnZhbGlkIGlucHV0IGZvciBGcmFnbWVudC5mcm9tSlNPTiIpO3JldHVybiBuZXcgYShlLm1hcCh0Lm5vZGVGcm9tSlNPTikpfSxhLmZyb21BcnJheT1mdW5jdGlvbih0KXtpZighdC5sZW5ndGgpcmV0dXJuIGEuZW1wdHk7Zm9yKHZhciBlLG49MCxyPTA7cjx0Lmxlbmd0aDtyKyspe3ZhciBvPXRbcl07bis9by5ub2RlU2l6ZSxyJiZvLmlzVGV4dCYmdFtyLTFdLnNhbWVNYXJrdXAobyk/KGV8fChlPXQuc2xpY2UoMCxyKSksZVtlLmxlbmd0aC0xXT1vLndpdGhUZXh0KGVbZS5sZW5ndGgtMV0udGV4dCtvLnRleHQpKTplJiZlLnB1c2gobyl9cmV0dXJuIG5ldyBhKGV8fHQsbil9LGEuZnJvbT1mdW5jdGlvbih0KXtpZighdClyZXR1cm4gYS5lbXB0eTtpZih0IGluc3RhbmNlb2YgYSlyZXR1cm4gdDtpZihBcnJheS5pc0FycmF5KHQpKXJldHVybiB0aGlzLmZyb21BcnJheSh0KTtpZih0LmF0dHJzKXJldHVybiBuZXcgYShbdF0sdC5ub2RlU2l6ZSk7dGhyb3cgbmV3IFJhbmdlRXJyb3IoIkNhbiBub3QgY29udmVydCAiK3QrIiB0byBhIEZyYWdtZW50IisodC5ub2Rlc0JldHdlZW4/IiAobG9va3MgbGlrZSBtdWx0aXBsZSB2ZXJzaW9ucyBvZiBwcm9zZW1pcnJvci1tb2RlbCB3ZXJlIGxvYWRlZCkiOiIiKSl9LE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKGEucHJvdG90eXBlLGMpO3ZhciBsPXtpbmRleDowLG9mZnNldDowfTtmdW5jdGlvbiBwKHQsZSl7cmV0dXJuIGwuaW5kZXg9dCxsLm9mZnNldD1lLGx9ZnVuY3Rpb24gdSh0LGUpe2lmKHQ9PT1lKXJldHVybiEwO2lmKCF0fHwib2JqZWN0IiE9dHlwZW9mIHR8fCFlfHwib2JqZWN0IiE9dHlwZW9mIGUpcmV0dXJuITE7dmFyIG49QXJyYXkuaXNBcnJheSh0KTtpZihBcnJheS5pc0FycmF5KGUpIT1uKXJldHVybiExO2lmKG4pe2lmKHQubGVuZ3RoIT1lLmxlbmd0aClyZXR1cm4hMTtmb3IodmFyIHI9MDtyPHQubGVuZ3RoO3IrKylpZighdSh0W3JdLGVbcl0pKXJldHVybiExfWVsc2V7Zm9yKHZhciBvIGluIHQpaWYoIShvIGluIGUpfHwhdSh0W29dLGVbb10pKXJldHVybiExO2Zvcih2YXIgaSBpbiBlKWlmKCEoaSBpbiB0KSlyZXR1cm4hMX1yZXR1cm4hMH1hLmVtcHR5PW5ldyBhKFtdLDApO3ZhciBoPWZ1bmN0aW9uKHQsZSl7dGhpcy50eXBlPXQsdGhpcy5hdHRycz1lfTtmdW5jdGlvbiBmKHQpe3ZhciBlPUVycm9yLmNhbGwodGhpcyx0KTtyZXR1cm4gZS5fX3Byb3RvX189Zi5wcm90b3R5cGUsZX1oLnByb3RvdHlwZS5hZGRUb1NldD1mdW5jdGlvbih0KXtmb3IodmFyIGUsbj10aGlzLHI9ITEsbz0wO288dC5sZW5ndGg7bysrKXt2YXIgaT10W29dO2lmKG4uZXEoaSkpcmV0dXJuIHQ7aWYobi50eXBlLmV4Y2x1ZGVzKGkudHlwZSkpZXx8KGU9dC5zbGljZSgwLG8pKTtlbHNle2lmKGkudHlwZS5leGNsdWRlcyhuLnR5cGUpKXJldHVybiB0OyFyJiZpLnR5cGUucmFuaz5uLnR5cGUucmFuayYmKGV8fChlPXQuc2xpY2UoMCxvKSksZS5wdXNoKG4pLHI9ITApLGUmJmUucHVzaChpKX19cmV0dXJuIGV8fChlPXQuc2xpY2UoKSkscnx8ZS5wdXNoKHRoaXMpLGV9LGgucHJvdG90eXBlLnJlbW92ZUZyb21TZXQ9ZnVuY3Rpb24odCl7Zm9yKHZhciBlPXRoaXMsbj0wO248dC5sZW5ndGg7bisrKWlmKGUuZXEodFtuXSkpcmV0dXJuIHQuc2xpY2UoMCxuKS5jb25jYXQodC5zbGljZShuKzEpKTtyZXR1cm4gdH0saC5wcm90b3R5cGUuaXNJblNldD1mdW5jdGlvbih0KXtmb3IodmFyIGU9dGhpcyxuPTA7bjx0Lmxlbmd0aDtuKyspaWYoZS5lcSh0W25dKSlyZXR1cm4hMDtyZXR1cm4hMX0saC5wcm90b3R5cGUuZXE9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXM9PXR8fHRoaXMudHlwZT09dC50eXBlJiZ1KHRoaXMuYXR0cnMsdC5hdHRycyl9LGgucHJvdG90eXBlLnRvSlNPTj1mdW5jdGlvbigpe3ZhciB0PXRoaXMsZT17dHlwZTp0aGlzLnR5cGUubmFtZX07Zm9yKHZhciBuIGluIHQuYXR0cnMpe2UuYXR0cnM9dC5hdHRyczticmVha31yZXR1cm4gZX0saC5mcm9tSlNPTj1mdW5jdGlvbih0LGUpe2lmKCFlKXRocm93IG5ldyBSYW5nZUVycm9yKCJJbnZhbGlkIGlucHV0IGZvciBNYXJrLmZyb21KU09OIik7dmFyIG49dC5tYXJrc1tlLnR5cGVdO2lmKCFuKXRocm93IG5ldyBSYW5nZUVycm9yKCJUaGVyZSBpcyBubyBtYXJrIHR5cGUgIitlLnR5cGUrIiBpbiB0aGlzIHNjaGVtYSIpO3JldHVybiBuLmNyZWF0ZShlLmF0dHJzKX0saC5zYW1lU2V0PWZ1bmN0aW9uKHQsZSl7aWYodD09ZSlyZXR1cm4hMDtpZih0Lmxlbmd0aCE9ZS5sZW5ndGgpcmV0dXJuITE7Zm9yKHZhciBuPTA7bjx0Lmxlbmd0aDtuKyspaWYoIXRbbl0uZXEoZVtuXSkpcmV0dXJuITE7cmV0dXJuITB9LGguc2V0RnJvbT1mdW5jdGlvbih0KXtpZighdHx8MD09dC5sZW5ndGgpcmV0dXJuIGgubm9uZTtpZih0IGluc3RhbmNlb2YgaClyZXR1cm5bdF07dmFyIGU9dC5zbGljZSgpO3JldHVybiBlLnNvcnQoKGZ1bmN0aW9uKHQsZSl7cmV0dXJuIHQudHlwZS5yYW5rLWUudHlwZS5yYW5rfSkpLGV9LGgubm9uZT1bXSxmLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKEVycm9yLnByb3RvdHlwZSksZi5wcm90b3R5cGUuY29uc3RydWN0b3I9ZixmLnByb3RvdHlwZS5uYW1lPSJSZXBsYWNlRXJyb3IiO3ZhciBkPWZ1bmN0aW9uKHQsZSxuKXt0aGlzLmNvbnRlbnQ9dCx0aGlzLm9wZW5TdGFydD1lLHRoaXMub3BlbkVuZD1ufSx2PXtzaXplOnt9fTtmdW5jdGlvbiBtKHQsZSxuKXt2YXIgcj10LmZpbmRJbmRleChlKSxvPXIuaW5kZXgsaT1yLm9mZnNldCxzPXQubWF5YmVDaGlsZChvKSxhPXQuZmluZEluZGV4KG4pLGM9YS5pbmRleCxsPWEub2Zmc2V0O2lmKGk9PWV8fHMuaXNUZXh0KXtpZihsIT1uJiYhdC5jaGlsZChjKS5pc1RleHQpdGhyb3cgbmV3IFJhbmdlRXJyb3IoIlJlbW92aW5nIG5vbi1mbGF0IHJhbmdlIik7cmV0dXJuIHQuY3V0KDAsZSkuYXBwZW5kKHQuY3V0KG4pKX1pZihvIT1jKXRocm93IG5ldyBSYW5nZUVycm9yKCJSZW1vdmluZyBub24tZmxhdCByYW5nZSIpO3JldHVybiB0LnJlcGxhY2VDaGlsZChvLHMuY29weShtKHMuY29udGVudCxlLWktMSxuLWktMSkpKX1mdW5jdGlvbiB5KHQsZSxuLHIpe3ZhciBvPXQuZmluZEluZGV4KGUpLGk9by5pbmRleCxzPW8ub2Zmc2V0LGE9dC5tYXliZUNoaWxkKGkpO2lmKHM9PWV8fGEuaXNUZXh0KXJldHVybiByJiYhci5jYW5SZXBsYWNlKGksaSxuKT9udWxsOnQuY3V0KDAsZSkuYXBwZW5kKG4pLmFwcGVuZCh0LmN1dChlKSk7dmFyIGM9eShhLmNvbnRlbnQsZS1zLTEsbik7cmV0dXJuIGMmJnQucmVwbGFjZUNoaWxkKGksYS5jb3B5KGMpKX1mdW5jdGlvbiBnKHQsZSxuKXtpZihuLm9wZW5TdGFydD50LmRlcHRoKXRocm93IG5ldyBmKCJJbnNlcnRlZCBjb250ZW50IGRlZXBlciB0aGFuIGluc2VydGlvbiBwb3NpdGlvbiIpO2lmKHQuZGVwdGgtbi5vcGVuU3RhcnQhPWUuZGVwdGgtbi5vcGVuRW5kKXRocm93IG5ldyBmKCJJbmNvbnNpc3RlbnQgb3BlbiBkZXB0aHMiKTtyZXR1cm4gdyh0LGUsbiwwKX1mdW5jdGlvbiB3KHQsZSxuLHIpe3ZhciBvPXQuaW5kZXgociksaT10Lm5vZGUocik7aWYobz09ZS5pbmRleChyKSYmcjx0LmRlcHRoLW4ub3BlblN0YXJ0KXt2YXIgcz13KHQsZSxuLHIrMSk7cmV0dXJuIGkuY29weShpLmNvbnRlbnQucmVwbGFjZUNoaWxkKG8scykpfWlmKG4uY29udGVudC5zaXplKXtpZihuLm9wZW5TdGFydHx8bi5vcGVuRW5kfHx0LmRlcHRoIT1yfHxlLmRlcHRoIT1yKXt2YXIgYT1UKG4sdCksYz1hLnN0YXJ0LGw9YS5lbmQ7cmV0dXJuIEMoaSxPKHQsYyxsLGUscikpfXZhciBwPXQucGFyZW50LHU9cC5jb250ZW50O3JldHVybiBDKHAsdS5jdXQoMCx0LnBhcmVudE9mZnNldCkuYXBwZW5kKG4uY29udGVudCkuYXBwZW5kKHUuY3V0KGUucGFyZW50T2Zmc2V0KSkpfXJldHVybiBDKGksTSh0LGUscikpfWZ1bmN0aW9uIHgodCxlKXtpZighZS50eXBlLmNvbXBhdGlibGVDb250ZW50KHQudHlwZSkpdGhyb3cgbmV3IGYoIkNhbm5vdCBqb2luICIrZS50eXBlLm5hbWUrIiBvbnRvICIrdC50eXBlLm5hbWUpfWZ1bmN0aW9uIGIodCxlLG4pe3ZhciByPXQubm9kZShuKTtyZXR1cm4geChyLGUubm9kZShuKSkscn1mdW5jdGlvbiBrKHQsZSl7dmFyIG49ZS5sZW5ndGgtMTtuPj0wJiZ0LmlzVGV4dCYmdC5zYW1lTWFya3VwKGVbbl0pP2Vbbl09dC53aXRoVGV4dChlW25dLnRleHQrdC50ZXh0KTplLnB1c2godCl9ZnVuY3Rpb24gUyh0LGUsbixyKXt2YXIgbz0oZXx8dCkubm9kZShuKSxpPTAscz1lP2UuaW5kZXgobik6by5jaGlsZENvdW50O3QmJihpPXQuaW5kZXgobiksdC5kZXB0aD5uP2krKzp0LnRleHRPZmZzZXQmJihrKHQubm9kZUFmdGVyLHIpLGkrKykpO2Zvcih2YXIgYT1pO2E8czthKyspayhvLmNoaWxkKGEpLHIpO2UmJmUuZGVwdGg9PW4mJmUudGV4dE9mZnNldCYmayhlLm5vZGVCZWZvcmUscil9ZnVuY3Rpb24gQyh0LGUpe2lmKCF0LnR5cGUudmFsaWRDb250ZW50KGUpKXRocm93IG5ldyBmKCJJbnZhbGlkIGNvbnRlbnQgZm9yIG5vZGUgIit0LnR5cGUubmFtZSk7cmV0dXJuIHQuY29weShlKX1mdW5jdGlvbiBPKHQsZSxuLHIsbyl7dmFyIGk9dC5kZXB0aD5vJiZiKHQsZSxvKzEpLHM9ci5kZXB0aD5vJiZiKG4scixvKzEpLGM9W107cmV0dXJuIFMobnVsbCx0LG8sYyksaSYmcyYmZS5pbmRleChvKT09bi5pbmRleChvKT8oeChpLHMpLGsoQyhpLE8odCxlLG4scixvKzEpKSxjKSk6KGkmJmsoQyhpLE0odCxlLG8rMSkpLGMpLFMoZSxuLG8sYykscyYmayhDKHMsTShuLHIsbysxKSksYykpLFMocixudWxsLG8sYyksbmV3IGEoYyl9ZnVuY3Rpb24gTSh0LGUsbil7dmFyIHI9W107aWYoUyhudWxsLHQsbixyKSx0LmRlcHRoPm4pe3ZhciBvPWIodCxlLG4rMSk7ayhDKG8sTSh0LGUsbisxKSkscil9cmV0dXJuIFMoZSxudWxsLG4sciksbmV3IGEocil9ZnVuY3Rpb24gVCh0LGUpe2Zvcih2YXIgbj1lLmRlcHRoLXQub3BlblN0YXJ0LHI9ZS5ub2RlKG4pLG89ci5jb3B5KHQuY29udGVudCksaT1uLTE7aT49MDtpLS0pbz1lLm5vZGUoaSkuY29weShhLmZyb20obykpO3JldHVybntzdGFydDpvLnJlc29sdmVOb0NhY2hlKHQub3BlblN0YXJ0K24pLGVuZDpvLnJlc29sdmVOb0NhY2hlKG8uY29udGVudC5zaXplLXQub3BlbkVuZC1uKX19di5zaXplLmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLmNvbnRlbnQuc2l6ZS10aGlzLm9wZW5TdGFydC10aGlzLm9wZW5FbmR9LGQucHJvdG90eXBlLmluc2VydEF0PWZ1bmN0aW9uKHQsZSl7dmFyIG49eSh0aGlzLmNvbnRlbnQsdCt0aGlzLm9wZW5TdGFydCxlLG51bGwpO3JldHVybiBuJiZuZXcgZChuLHRoaXMub3BlblN0YXJ0LHRoaXMub3BlbkVuZCl9LGQucHJvdG90eXBlLnJlbW92ZUJldHdlZW49ZnVuY3Rpb24odCxlKXtyZXR1cm4gbmV3IGQobSh0aGlzLmNvbnRlbnQsdCt0aGlzLm9wZW5TdGFydCxlK3RoaXMub3BlblN0YXJ0KSx0aGlzLm9wZW5TdGFydCx0aGlzLm9wZW5FbmQpfSxkLnByb3RvdHlwZS5lcT1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5jb250ZW50LmVxKHQuY29udGVudCkmJnRoaXMub3BlblN0YXJ0PT10Lm9wZW5TdGFydCYmdGhpcy5vcGVuRW5kPT10Lm9wZW5FbmR9LGQucHJvdG90eXBlLnRvU3RyaW5nPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY29udGVudCsiKCIrdGhpcy5vcGVuU3RhcnQrIiwiK3RoaXMub3BlbkVuZCsiKSJ9LGQucHJvdG90eXBlLnRvSlNPTj1mdW5jdGlvbigpe2lmKCF0aGlzLmNvbnRlbnQuc2l6ZSlyZXR1cm4gbnVsbDt2YXIgdD17Y29udGVudDp0aGlzLmNvbnRlbnQudG9KU09OKCl9O3JldHVybiB0aGlzLm9wZW5TdGFydD4wJiYodC5vcGVuU3RhcnQ9dGhpcy5vcGVuU3RhcnQpLHRoaXMub3BlbkVuZD4wJiYodC5vcGVuRW5kPXRoaXMub3BlbkVuZCksdH0sZC5mcm9tSlNPTj1mdW5jdGlvbih0LGUpe2lmKCFlKXJldHVybiBkLmVtcHR5O3ZhciBuPWUub3BlblN0YXJ0fHwwLHI9ZS5vcGVuRW5kfHwwO2lmKCJudW1iZXIiIT10eXBlb2Ygbnx8Im51bWJlciIhPXR5cGVvZiByKXRocm93IG5ldyBSYW5nZUVycm9yKCJJbnZhbGlkIGlucHV0IGZvciBTbGljZS5mcm9tSlNPTiIpO3JldHVybiBuZXcgZChhLmZyb21KU09OKHQsZS5jb250ZW50KSxlLm9wZW5TdGFydHx8MCxlLm9wZW5FbmR8fDApfSxkLm1heE9wZW49ZnVuY3Rpb24odCxlKXt2b2lkIDA9PT1lJiYoZT0hMCk7Zm9yKHZhciBuPTAscj0wLG89dC5maXJzdENoaWxkO28mJiFvLmlzTGVhZiYmKGV8fCFvLnR5cGUuc3BlYy5pc29sYXRpbmcpO289by5maXJzdENoaWxkKW4rKztmb3IodmFyIGk9dC5sYXN0Q2hpbGQ7aSYmIWkuaXNMZWFmJiYoZXx8IWkudHlwZS5zcGVjLmlzb2xhdGluZyk7aT1pLmxhc3RDaGlsZClyKys7cmV0dXJuIG5ldyBkKHQsbixyKX0sT2JqZWN0LmRlZmluZVByb3BlcnRpZXMoZC5wcm90b3R5cGUsdiksZC5lbXB0eT1uZXcgZChhLmVtcHR5LDAsMCk7dmFyIE49ZnVuY3Rpb24odCxlLG4pe3RoaXMucG9zPXQsdGhpcy5wYXRoPWUsdGhpcy5kZXB0aD1lLmxlbmd0aC8zLTEsdGhpcy5wYXJlbnRPZmZzZXQ9bn0sRT17cGFyZW50Ont9LGRvYzp7fSx0ZXh0T2Zmc2V0Ont9LG5vZGVBZnRlcjp7fSxub2RlQmVmb3JlOnt9fTtOLnByb3RvdHlwZS5yZXNvbHZlRGVwdGg9ZnVuY3Rpb24odCl7cmV0dXJuIG51bGw9PXQ/dGhpcy5kZXB0aDp0PDA/dGhpcy5kZXB0aCt0OnR9LEUucGFyZW50LmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLm5vZGUodGhpcy5kZXB0aCl9LEUuZG9jLmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLm5vZGUoMCl9LE4ucHJvdG90eXBlLm5vZGU9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMucGF0aFszKnRoaXMucmVzb2x2ZURlcHRoKHQpXX0sTi5wcm90b3R5cGUuaW5kZXg9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMucGF0aFszKnRoaXMucmVzb2x2ZURlcHRoKHQpKzFdfSxOLnByb3RvdHlwZS5pbmRleEFmdGVyPWZ1bmN0aW9uKHQpe3JldHVybiB0PXRoaXMucmVzb2x2ZURlcHRoKHQpLHRoaXMuaW5kZXgodCkrKHQhPXRoaXMuZGVwdGh8fHRoaXMudGV4dE9mZnNldD8xOjApfSxOLnByb3RvdHlwZS5zdGFydD1mdW5jdGlvbih0KXtyZXR1cm4gdD10aGlzLnJlc29sdmVEZXB0aCh0KSwwPT10PzA6dGhpcy5wYXRoWzMqdC0xXSsxfSxOLnByb3RvdHlwZS5lbmQ9ZnVuY3Rpb24odCl7cmV0dXJuIHQ9dGhpcy5yZXNvbHZlRGVwdGgodCksdGhpcy5zdGFydCh0KSt0aGlzLm5vZGUodCkuY29udGVudC5zaXplfSxOLnByb3RvdHlwZS5iZWZvcmU9ZnVuY3Rpb24odCl7aWYodD10aGlzLnJlc29sdmVEZXB0aCh0KSwhdCl0aHJvdyBuZXcgUmFuZ2VFcnJvcigiVGhlcmUgaXMgbm8gcG9zaXRpb24gYmVmb3JlIHRoZSB0b3AtbGV2ZWwgbm9kZSIpO3JldHVybiB0PT10aGlzLmRlcHRoKzE/dGhpcy5wb3M6dGhpcy5wYXRoWzMqdC0xXX0sTi5wcm90b3R5cGUuYWZ0ZXI9ZnVuY3Rpb24odCl7aWYodD10aGlzLnJlc29sdmVEZXB0aCh0KSwhdCl0aHJvdyBuZXcgUmFuZ2VFcnJvcigiVGhlcmUgaXMgbm8gcG9zaXRpb24gYWZ0ZXIgdGhlIHRvcC1sZXZlbCBub2RlIik7cmV0dXJuIHQ9PXRoaXMuZGVwdGgrMT90aGlzLnBvczp0aGlzLnBhdGhbMyp0LTFdK3RoaXMucGF0aFszKnRdLm5vZGVTaXplfSxFLnRleHRPZmZzZXQuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucG9zLXRoaXMucGF0aFt0aGlzLnBhdGgubGVuZ3RoLTFdfSxFLm5vZGVBZnRlci5nZXQ9ZnVuY3Rpb24oKXt2YXIgdD10aGlzLnBhcmVudCxlPXRoaXMuaW5kZXgodGhpcy5kZXB0aCk7aWYoZT09dC5jaGlsZENvdW50KXJldHVybiBudWxsO3ZhciBuPXRoaXMucG9zLXRoaXMucGF0aFt0aGlzLnBhdGgubGVuZ3RoLTFdLHI9dC5jaGlsZChlKTtyZXR1cm4gbj90LmNoaWxkKGUpLmN1dChuKTpyfSxFLm5vZGVCZWZvcmUuZ2V0PWZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5pbmRleCh0aGlzLmRlcHRoKSxlPXRoaXMucG9zLXRoaXMucGF0aFt0aGlzLnBhdGgubGVuZ3RoLTFdO3JldHVybiBlP3RoaXMucGFyZW50LmNoaWxkKHQpLmN1dCgwLGUpOjA9PXQ/bnVsbDp0aGlzLnBhcmVudC5jaGlsZCh0LTEpfSxOLnByb3RvdHlwZS5tYXJrcz1mdW5jdGlvbigpe3ZhciB0PXRoaXMucGFyZW50LGU9dGhpcy5pbmRleCgpO2lmKDA9PXQuY29udGVudC5zaXplKXJldHVybiBoLm5vbmU7aWYodGhpcy50ZXh0T2Zmc2V0KXJldHVybiB0LmNoaWxkKGUpLm1hcmtzO3ZhciBuPXQubWF5YmVDaGlsZChlLTEpLHI9dC5tYXliZUNoaWxkKGUpO2lmKCFuKXt2YXIgbz1uO249cixyPW99Zm9yKHZhciBpPW4ubWFya3Mscz0wO3M8aS5sZW5ndGg7cysrKSExIT09aVtzXS50eXBlLnNwZWMuaW5jbHVzaXZlfHxyJiZpW3NdLmlzSW5TZXQoci5tYXJrcyl8fChpPWlbcy0tXS5yZW1vdmVGcm9tU2V0KGkpKTtyZXR1cm4gaX0sTi5wcm90b3R5cGUubWFya3NBY3Jvc3M9ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5wYXJlbnQubWF5YmVDaGlsZCh0aGlzLmluZGV4KCkpO2lmKCFlfHwhZS5pc0lubGluZSlyZXR1cm4gbnVsbDtmb3IodmFyIG49ZS5tYXJrcyxyPXQucGFyZW50Lm1heWJlQ2hpbGQodC5pbmRleCgpKSxvPTA7bzxuLmxlbmd0aDtvKyspITEhPT1uW29dLnR5cGUuc3BlYy5pbmNsdXNpdmV8fHImJm5bb10uaXNJblNldChyLm1hcmtzKXx8KG49bltvLS1dLnJlbW92ZUZyb21TZXQobikpO3JldHVybiBufSxOLnByb3RvdHlwZS5zaGFyZWREZXB0aD1mdW5jdGlvbih0KXtmb3IodmFyIGU9dGhpcyxuPXRoaXMuZGVwdGg7bj4wO24tLSlpZihlLnN0YXJ0KG4pPD10JiZlLmVuZChuKT49dClyZXR1cm4gbjtyZXR1cm4gMH0sTi5wcm90b3R5cGUuYmxvY2tSYW5nZT1mdW5jdGlvbih0LGUpe3ZhciBuPXRoaXM7aWYodm9pZCAwPT09dCYmKHQ9dGhpcyksdC5wb3M8dGhpcy5wb3MpcmV0dXJuIHQuYmxvY2tSYW5nZSh0aGlzKTtmb3IodmFyIHI9dGhpcy5kZXB0aC0odGhpcy5wYXJlbnQuaW5saW5lQ29udGVudHx8dGhpcy5wb3M9PXQucG9zPzE6MCk7cj49MDtyLS0paWYodC5wb3M8PW4uZW5kKHIpJiYoIWV8fGUobi5ub2RlKHIpKSkpcmV0dXJuIG5ldyB6KG4sdCxyKX0sTi5wcm90b3R5cGUuc2FtZVBhcmVudD1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5wb3MtdGhpcy5wYXJlbnRPZmZzZXQ9PXQucG9zLXQucGFyZW50T2Zmc2V0fSxOLnByb3RvdHlwZS5tYXg9ZnVuY3Rpb24odCl7cmV0dXJuIHQucG9zPnRoaXMucG9zP3Q6dGhpc30sTi5wcm90b3R5cGUubWluPWZ1bmN0aW9uKHQpe3JldHVybiB0LnBvczx0aGlzLnBvcz90OnRoaXN9LE4ucHJvdG90eXBlLnRvU3RyaW5nPWZ1bmN0aW9uKCl7Zm9yKHZhciB0PXRoaXMsZT0iIixuPTE7bjw9dGhpcy5kZXB0aDtuKyspZSs9KGU/Ii8iOiIiKSt0Lm5vZGUobikudHlwZS5uYW1lKyJfIit0LmluZGV4KG4tMSk7cmV0dXJuIGUrIjoiK3RoaXMucGFyZW50T2Zmc2V0fSxOLnJlc29sdmU9ZnVuY3Rpb24odCxlKXtpZighKGU+PTAmJmU8PXQuY29udGVudC5zaXplKSl0aHJvdyBuZXcgUmFuZ2VFcnJvcigiUG9zaXRpb24gIitlKyIgb3V0IG9mIHJhbmdlIik7Zm9yKHZhciBuPVtdLHI9MCxvPWUsaT10Ozspe3ZhciBzPWkuY29udGVudC5maW5kSW5kZXgobyksYT1zLmluZGV4LGM9cy5vZmZzZXQsbD1vLWM7aWYobi5wdXNoKGksYSxyK2MpLCFsKWJyZWFrO2lmKGk9aS5jaGlsZChhKSxpLmlzVGV4dClicmVhaztvPWwtMSxyKz1jKzF9cmV0dXJuIG5ldyBOKGUsbixvKX0sTi5yZXNvbHZlQ2FjaGVkPWZ1bmN0aW9uKHQsZSl7Zm9yKHZhciBuPTA7bjxBLmxlbmd0aDtuKyspe3ZhciByPUFbbl07aWYoci5wb3M9PWUmJnIuZG9jPT10KXJldHVybiByfXZhciBvPUFbUl09Ti5yZXNvbHZlKHQsZSk7cmV0dXJuIFI9KFIrMSklRCxvfSxPYmplY3QuZGVmaW5lUHJvcGVydGllcyhOLnByb3RvdHlwZSxFKTt2YXIgQT1bXSxSPTAsRD0xMix6PWZ1bmN0aW9uKHQsZSxuKXt0aGlzLiRmcm9tPXQsdGhpcy4kdG89ZSx0aGlzLmRlcHRoPW59LFA9e3N0YXJ0Ont9LGVuZDp7fSxwYXJlbnQ6e30sc3RhcnRJbmRleDp7fSxlbmRJbmRleDp7fX07UC5zdGFydC5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy4kZnJvbS5iZWZvcmUodGhpcy5kZXB0aCsxKX0sUC5lbmQuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuJHRvLmFmdGVyKHRoaXMuZGVwdGgrMSl9LFAucGFyZW50LmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLiRmcm9tLm5vZGUodGhpcy5kZXB0aCl9LFAuc3RhcnRJbmRleC5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy4kZnJvbS5pbmRleCh0aGlzLmRlcHRoKX0sUC5lbmRJbmRleC5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy4kdG8uaW5kZXhBZnRlcih0aGlzLmRlcHRoKX0sT2JqZWN0LmRlZmluZVByb3BlcnRpZXMoei5wcm90b3R5cGUsUCk7dmFyIEk9T2JqZWN0LmNyZWF0ZShudWxsKSxfPWZ1bmN0aW9uKHQsZSxuLHIpe3RoaXMudHlwZT10LHRoaXMuYXR0cnM9ZSx0aGlzLmNvbnRlbnQ9bnx8YS5lbXB0eSx0aGlzLm1hcmtzPXJ8fGgubm9uZX0sRj17bm9kZVNpemU6e30sY2hpbGRDb3VudDp7fSx0ZXh0Q29udGVudDp7fSxmaXJzdENoaWxkOnt9LGxhc3RDaGlsZDp7fSxpc0Jsb2NrOnt9LGlzVGV4dGJsb2NrOnt9LGlubGluZUNvbnRlbnQ6e30saXNJbmxpbmU6e30saXNUZXh0Ont9LGlzTGVhZjp7fSxpc0F0b206e319O0Yubm9kZVNpemUuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuaXNMZWFmPzE6Mit0aGlzLmNvbnRlbnQuc2l6ZX0sRi5jaGlsZENvdW50LmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLmNvbnRlbnQuY2hpbGRDb3VudH0sXy5wcm90b3R5cGUuY2hpbGQ9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuY29udGVudC5jaGlsZCh0KX0sXy5wcm90b3R5cGUubWF5YmVDaGlsZD1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5jb250ZW50Lm1heWJlQ2hpbGQodCl9LF8ucHJvdG90eXBlLmZvckVhY2g9ZnVuY3Rpb24odCl7dGhpcy5jb250ZW50LmZvckVhY2godCl9LF8ucHJvdG90eXBlLm5vZGVzQmV0d2Vlbj1mdW5jdGlvbih0LGUsbixyKXt2b2lkIDA9PT1yJiYocj0wKSx0aGlzLmNvbnRlbnQubm9kZXNCZXR3ZWVuKHQsZSxuLHIsdGhpcyl9LF8ucHJvdG90eXBlLmRlc2NlbmRhbnRzPWZ1bmN0aW9uKHQpe3RoaXMubm9kZXNCZXR3ZWVuKDAsdGhpcy5jb250ZW50LnNpemUsdCl9LEYudGV4dENvbnRlbnQuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudGV4dEJldHdlZW4oMCx0aGlzLmNvbnRlbnQuc2l6ZSwiIil9LF8ucHJvdG90eXBlLnRleHRCZXR3ZWVuPWZ1bmN0aW9uKHQsZSxuLHIpe3JldHVybiB0aGlzLmNvbnRlbnQudGV4dEJldHdlZW4odCxlLG4scil9LEYuZmlyc3RDaGlsZC5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jb250ZW50LmZpcnN0Q2hpbGR9LEYubGFzdENoaWxkLmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLmNvbnRlbnQubGFzdENoaWxkfSxfLnByb3RvdHlwZS5lcT1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcz09dHx8dGhpcy5zYW1lTWFya3VwKHQpJiZ0aGlzLmNvbnRlbnQuZXEodC5jb250ZW50KX0sXy5wcm90b3R5cGUuc2FtZU1hcmt1cD1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5oYXNNYXJrdXAodC50eXBlLHQuYXR0cnMsdC5tYXJrcyl9LF8ucHJvdG90eXBlLmhhc01hcmt1cD1mdW5jdGlvbih0LGUsbil7cmV0dXJuIHRoaXMudHlwZT09dCYmdSh0aGlzLmF0dHJzLGV8fHQuZGVmYXVsdEF0dHJzfHxJKSYmaC5zYW1lU2V0KHRoaXMubWFya3Msbnx8aC5ub25lKX0sXy5wcm90b3R5cGUuY29weT1mdW5jdGlvbih0KXtyZXR1cm4gdm9pZCAwPT09dCYmKHQ9bnVsbCksdD09dGhpcy5jb250ZW50P3RoaXM6bmV3IHRoaXMuY29uc3RydWN0b3IodGhpcy50eXBlLHRoaXMuYXR0cnMsdCx0aGlzLm1hcmtzKX0sXy5wcm90b3R5cGUubWFyaz1mdW5jdGlvbih0KXtyZXR1cm4gdD09dGhpcy5tYXJrcz90aGlzOm5ldyB0aGlzLmNvbnN0cnVjdG9yKHRoaXMudHlwZSx0aGlzLmF0dHJzLHRoaXMuY29udGVudCx0KX0sXy5wcm90b3R5cGUuY3V0PWZ1bmN0aW9uKHQsZSl7cmV0dXJuIDA9PXQmJmU9PXRoaXMuY29udGVudC5zaXplP3RoaXM6dGhpcy5jb3B5KHRoaXMuY29udGVudC5jdXQodCxlKSl9LF8ucHJvdG90eXBlLnNsaWNlPWZ1bmN0aW9uKHQsZSxuKXtpZih2b2lkIDA9PT1lJiYoZT10aGlzLmNvbnRlbnQuc2l6ZSksdm9pZCAwPT09biYmKG49ITEpLHQ9PWUpcmV0dXJuIGQuZW1wdHk7dmFyIHI9dGhpcy5yZXNvbHZlKHQpLG89dGhpcy5yZXNvbHZlKGUpLGk9bj8wOnIuc2hhcmVkRGVwdGgoZSkscz1yLnN0YXJ0KGkpLGE9ci5ub2RlKGkpLGM9YS5jb250ZW50LmN1dChyLnBvcy1zLG8ucG9zLXMpO3JldHVybiBuZXcgZChjLHIuZGVwdGgtaSxvLmRlcHRoLWkpfSxfLnByb3RvdHlwZS5yZXBsYWNlPWZ1bmN0aW9uKHQsZSxuKXtyZXR1cm4gZyh0aGlzLnJlc29sdmUodCksdGhpcy5yZXNvbHZlKGUpLG4pfSxfLnByb3RvdHlwZS5ub2RlQXQ9ZnVuY3Rpb24odCl7Zm9yKHZhciBlPXRoaXM7Oyl7dmFyIG49ZS5jb250ZW50LmZpbmRJbmRleCh0KSxyPW4uaW5kZXgsbz1uLm9mZnNldDtpZihlPWUubWF5YmVDaGlsZChyKSwhZSlyZXR1cm4gbnVsbDtpZihvPT10fHxlLmlzVGV4dClyZXR1cm4gZTt0LT1vKzF9fSxfLnByb3RvdHlwZS5jaGlsZEFmdGVyPWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMuY29udGVudC5maW5kSW5kZXgodCksbj1lLmluZGV4LHI9ZS5vZmZzZXQ7cmV0dXJue25vZGU6dGhpcy5jb250ZW50Lm1heWJlQ2hpbGQobiksaW5kZXg6bixvZmZzZXQ6cn19LF8ucHJvdG90eXBlLmNoaWxkQmVmb3JlPWZ1bmN0aW9uKHQpe2lmKDA9PXQpcmV0dXJue25vZGU6bnVsbCxpbmRleDowLG9mZnNldDowfTt2YXIgZT10aGlzLmNvbnRlbnQuZmluZEluZGV4KHQpLG49ZS5pbmRleCxyPWUub2Zmc2V0O2lmKHI8dClyZXR1cm57bm9kZTp0aGlzLmNvbnRlbnQuY2hpbGQobiksaW5kZXg6bixvZmZzZXQ6cn07dmFyIG89dGhpcy5jb250ZW50LmNoaWxkKG4tMSk7cmV0dXJue25vZGU6byxpbmRleDpuLTEsb2Zmc2V0OnItby5ub2RlU2l6ZX19LF8ucHJvdG90eXBlLnJlc29sdmU9ZnVuY3Rpb24odCl7cmV0dXJuIE4ucmVzb2x2ZUNhY2hlZCh0aGlzLHQpfSxfLnByb3RvdHlwZS5yZXNvbHZlTm9DYWNoZT1mdW5jdGlvbih0KXtyZXR1cm4gTi5yZXNvbHZlKHRoaXMsdCl9LF8ucHJvdG90eXBlLnJhbmdlSGFzTWFyaz1mdW5jdGlvbih0LGUsbil7dmFyIHI9ITE7cmV0dXJuIGU+dCYmdGhpcy5ub2Rlc0JldHdlZW4odCxlLChmdW5jdGlvbih0KXtyZXR1cm4gbi5pc0luU2V0KHQubWFya3MpJiYocj0hMCksIXJ9KSkscn0sRi5pc0Jsb2NrLmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLnR5cGUuaXNCbG9ja30sRi5pc1RleHRibG9jay5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy50eXBlLmlzVGV4dGJsb2NrfSxGLmlubGluZUNvbnRlbnQuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudHlwZS5pbmxpbmVDb250ZW50fSxGLmlzSW5saW5lLmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLnR5cGUuaXNJbmxpbmV9LEYuaXNUZXh0LmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLnR5cGUuaXNUZXh0fSxGLmlzTGVhZi5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy50eXBlLmlzTGVhZn0sRi5pc0F0b20uZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudHlwZS5pc0F0b219LF8ucHJvdG90eXBlLnRvU3RyaW5nPWZ1bmN0aW9uKCl7aWYodGhpcy50eXBlLnNwZWMudG9EZWJ1Z1N0cmluZylyZXR1cm4gdGhpcy50eXBlLnNwZWMudG9EZWJ1Z1N0cmluZyh0aGlzKTt2YXIgdD10aGlzLnR5cGUubmFtZTtyZXR1cm4gdGhpcy5jb250ZW50LnNpemUmJih0Kz0iKCIrdGhpcy5jb250ZW50LnRvU3RyaW5nSW5uZXIoKSsiKSIpLGoodGhpcy5tYXJrcyx0KX0sXy5wcm90b3R5cGUuY29udGVudE1hdGNoQXQ9ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy50eXBlLmNvbnRlbnRNYXRjaC5tYXRjaEZyYWdtZW50KHRoaXMuY29udGVudCwwLHQpO2lmKCFlKXRocm93IG5ldyBFcnJvcigiQ2FsbGVkIGNvbnRlbnRNYXRjaEF0IG9uIGEgbm9kZSB3aXRoIGludmFsaWQgY29udGVudCIpO3JldHVybiBlfSxfLnByb3RvdHlwZS5jYW5SZXBsYWNlPWZ1bmN0aW9uKHQsZSxuLHIsbyl7dmFyIGk9dGhpczt2b2lkIDA9PT1uJiYobj1hLmVtcHR5KSx2b2lkIDA9PT1yJiYocj0wKSx2b2lkIDA9PT1vJiYobz1uLmNoaWxkQ291bnQpO3ZhciBzPXRoaXMuY29udGVudE1hdGNoQXQodCkubWF0Y2hGcmFnbWVudChuLHIsbyksYz1zJiZzLm1hdGNoRnJhZ21lbnQodGhpcy5jb250ZW50LGUpO2lmKCFjfHwhYy52YWxpZEVuZClyZXR1cm4hMTtmb3IodmFyIGw9cjtsPG87bCsrKWlmKCFpLnR5cGUuYWxsb3dzTWFya3Mobi5jaGlsZChsKS5tYXJrcykpcmV0dXJuITE7cmV0dXJuITB9LF8ucHJvdG90eXBlLmNhblJlcGxhY2VXaXRoPWZ1bmN0aW9uKHQsZSxuLHIpe2lmKHImJiF0aGlzLnR5cGUuYWxsb3dzTWFya3MocikpcmV0dXJuITE7dmFyIG89dGhpcy5jb250ZW50TWF0Y2hBdCh0KS5tYXRjaFR5cGUobiksaT1vJiZvLm1hdGNoRnJhZ21lbnQodGhpcy5jb250ZW50LGUpO3JldHVybiEhaSYmaS52YWxpZEVuZH0sXy5wcm90b3R5cGUuY2FuQXBwZW5kPWZ1bmN0aW9uKHQpe3JldHVybiB0LmNvbnRlbnQuc2l6ZT90aGlzLmNhblJlcGxhY2UodGhpcy5jaGlsZENvdW50LHRoaXMuY2hpbGRDb3VudCx0LmNvbnRlbnQpOnRoaXMudHlwZS5jb21wYXRpYmxlQ29udGVudCh0LnR5cGUpfSxfLnByb3RvdHlwZS5kZWZhdWx0Q29udGVudFR5cGU9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuY29udGVudE1hdGNoQXQodCkuZGVmYXVsdFR5cGV9LF8ucHJvdG90eXBlLmNoZWNrPWZ1bmN0aW9uKCl7aWYoIXRoaXMudHlwZS52YWxpZENvbnRlbnQodGhpcy5jb250ZW50KSl0aHJvdyBuZXcgUmFuZ2VFcnJvcigiSW52YWxpZCBjb250ZW50IGZvciBub2RlICIrdGhpcy50eXBlLm5hbWUrIjogIit0aGlzLmNvbnRlbnQudG9TdHJpbmcoKS5zbGljZSgwLDUwKSk7dGhpcy5jb250ZW50LmZvckVhY2goKGZ1bmN0aW9uKHQpe3JldHVybiB0LmNoZWNrKCl9KSl9LF8ucHJvdG90eXBlLnRvSlNPTj1mdW5jdGlvbigpe3ZhciB0PXRoaXMsZT17dHlwZTp0aGlzLnR5cGUubmFtZX07Zm9yKHZhciBuIGluIHQuYXR0cnMpe2UuYXR0cnM9dC5hdHRyczticmVha31yZXR1cm4gdGhpcy5jb250ZW50LnNpemUmJihlLmNvbnRlbnQ9dGhpcy5jb250ZW50LnRvSlNPTigpKSx0aGlzLm1hcmtzLmxlbmd0aCYmKGUubWFya3M9dGhpcy5tYXJrcy5tYXAoKGZ1bmN0aW9uKHQpe3JldHVybiB0LnRvSlNPTigpfSkpKSxlfSxfLmZyb21KU09OPWZ1bmN0aW9uKHQsZSl7aWYoIWUpdGhyb3cgbmV3IFJhbmdlRXJyb3IoIkludmFsaWQgaW5wdXQgZm9yIE5vZGUuZnJvbUpTT04iKTt2YXIgbj1udWxsO2lmKGUubWFya3Mpe2lmKCFBcnJheS5pc0FycmF5KGUubWFya3MpKXRocm93IG5ldyBSYW5nZUVycm9yKCJJbnZhbGlkIG1hcmsgZGF0YSBmb3IgTm9kZS5mcm9tSlNPTiIpO249ZS5tYXJrcy5tYXAodC5tYXJrRnJvbUpTT04pfWlmKCJ0ZXh0Ij09ZS50eXBlKXtpZigic3RyaW5nIiE9dHlwZW9mIGUudGV4dCl0aHJvdyBuZXcgUmFuZ2VFcnJvcigiSW52YWxpZCB0ZXh0IG5vZGUgaW4gSlNPTiIpO3JldHVybiB0LnRleHQoZS50ZXh0LG4pfXZhciByPWEuZnJvbUpTT04odCxlLmNvbnRlbnQpO3JldHVybiB0Lm5vZGVUeXBlKGUudHlwZSkuY3JlYXRlKGUuYXR0cnMscixuKX0sT2JqZWN0LmRlZmluZVByb3BlcnRpZXMoXy5wcm90b3R5cGUsRik7dmFyIEI9ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZShlLG4scixvKXtpZih0LmNhbGwodGhpcyxlLG4sbnVsbCxvKSwhcil0aHJvdyBuZXcgUmFuZ2VFcnJvcigiRW1wdHkgdGV4dCBub2RlcyBhcmUgbm90IGFsbG93ZWQiKTt0aGlzLnRleHQ9cn10JiYoZS5fX3Byb3RvX189dCksZS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZSh0JiZ0LnByb3RvdHlwZSksZS5wcm90b3R5cGUuY29uc3RydWN0b3I9ZTt2YXIgbj17dGV4dENvbnRlbnQ6e30sbm9kZVNpemU6e319O3JldHVybiBlLnByb3RvdHlwZS50b1N0cmluZz1mdW5jdGlvbigpe3JldHVybiB0aGlzLnR5cGUuc3BlYy50b0RlYnVnU3RyaW5nP3RoaXMudHlwZS5zcGVjLnRvRGVidWdTdHJpbmcodGhpcyk6aih0aGlzLm1hcmtzLEpTT04uc3RyaW5naWZ5KHRoaXMudGV4dCkpfSxuLnRleHRDb250ZW50LmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLnRleHR9LGUucHJvdG90eXBlLnRleHRCZXR3ZWVuPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIHRoaXMudGV4dC5zbGljZSh0LGUpfSxuLm5vZGVTaXplLmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLnRleHQubGVuZ3RofSxlLnByb3RvdHlwZS5tYXJrPWZ1bmN0aW9uKHQpe3JldHVybiB0PT10aGlzLm1hcmtzP3RoaXM6bmV3IGUodGhpcy50eXBlLHRoaXMuYXR0cnMsdGhpcy50ZXh0LHQpfSxlLnByb3RvdHlwZS53aXRoVGV4dD1mdW5jdGlvbih0KXtyZXR1cm4gdD09dGhpcy50ZXh0P3RoaXM6bmV3IGUodGhpcy50eXBlLHRoaXMuYXR0cnMsdCx0aGlzLm1hcmtzKX0sZS5wcm90b3R5cGUuY3V0PWZ1bmN0aW9uKHQsZSl7cmV0dXJuIHZvaWQgMD09PXQmJih0PTApLHZvaWQgMD09PWUmJihlPXRoaXMudGV4dC5sZW5ndGgpLDA9PXQmJmU9PXRoaXMudGV4dC5sZW5ndGg/dGhpczp0aGlzLndpdGhUZXh0KHRoaXMudGV4dC5zbGljZSh0LGUpKX0sZS5wcm90b3R5cGUuZXE9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuc2FtZU1hcmt1cCh0KSYmdGhpcy50ZXh0PT10LnRleHR9LGUucHJvdG90eXBlLnRvSlNPTj1mdW5jdGlvbigpe3ZhciBlPXQucHJvdG90eXBlLnRvSlNPTi5jYWxsKHRoaXMpO3JldHVybiBlLnRleHQ9dGhpcy50ZXh0LGV9LE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKGUucHJvdG90eXBlLG4pLGV9KF8pO2Z1bmN0aW9uIGoodCxlKXtmb3IodmFyIG49dC5sZW5ndGgtMTtuPj0wO24tLSllPXRbbl0udHlwZS5uYW1lKyIoIitlKyIpIjtyZXR1cm4gZX12YXIgJD1mdW5jdGlvbih0KXt0aGlzLnZhbGlkRW5kPXQsdGhpcy5uZXh0PVtdLHRoaXMud3JhcENhY2hlPVtdfSxWPXtpbmxpbmVDb250ZW50Ont9LGRlZmF1bHRUeXBlOnt9LGVkZ2VDb3VudDp7fX07JC5wYXJzZT1mdW5jdGlvbih0LGUpe3ZhciBuPW5ldyBMKHQsZSk7aWYobnVsbD09bi5uZXh0KXJldHVybiAkLmVtcHR5O3ZhciByPXEobik7bi5uZXh0JiZuLmVycigiVW5leHBlY3RlZCB0cmFpbGluZyB0ZXh0Iik7dmFyIG89dHQoWShyKSk7cmV0dXJuIGV0KG8sbiksb30sJC5wcm90b3R5cGUubWF0Y2hUeXBlPWZ1bmN0aW9uKHQpe2Zvcih2YXIgZT10aGlzLG49MDtuPHRoaXMubmV4dC5sZW5ndGg7bis9MilpZihlLm5leHRbbl09PXQpcmV0dXJuIGUubmV4dFtuKzFdO3JldHVybiBudWxsfSwkLnByb3RvdHlwZS5tYXRjaEZyYWdtZW50PWZ1bmN0aW9uKHQsZSxuKXt2b2lkIDA9PT1lJiYoZT0wKSx2b2lkIDA9PT1uJiYobj10LmNoaWxkQ291bnQpO2Zvcih2YXIgcj10aGlzLG89ZTtyJiZvPG47bysrKXI9ci5tYXRjaFR5cGUodC5jaGlsZChvKS50eXBlKTtyZXR1cm4gcn0sVi5pbmxpbmVDb250ZW50LmdldD1mdW5jdGlvbigpe3ZhciB0PXRoaXMubmV4dFswXTtyZXR1cm4hIXQmJnQuaXNJbmxpbmV9LFYuZGVmYXVsdFR5cGUuZ2V0PWZ1bmN0aW9uKCl7Zm9yKHZhciB0PXRoaXMsZT0wO2U8dGhpcy5uZXh0Lmxlbmd0aDtlKz0yKXt2YXIgbj10Lm5leHRbZV07aWYoIW4uaXNUZXh0JiYhbi5oYXNSZXF1aXJlZEF0dHJzKCkpcmV0dXJuIG59fSwkLnByb3RvdHlwZS5jb21wYXRpYmxlPWZ1bmN0aW9uKHQpe2Zvcih2YXIgZT10aGlzLG49MDtuPHRoaXMubmV4dC5sZW5ndGg7bis9Milmb3IodmFyIHI9MDtyPHQubmV4dC5sZW5ndGg7cis9MilpZihlLm5leHRbbl09PXQubmV4dFtyXSlyZXR1cm4hMDtyZXR1cm4hMX0sJC5wcm90b3R5cGUuZmlsbEJlZm9yZT1mdW5jdGlvbih0LGUsbil7dm9pZCAwPT09ZSYmKGU9ITEpLHZvaWQgMD09PW4mJihuPTApO3ZhciByPVt0aGlzXTtmdW5jdGlvbiBvKGkscyl7dmFyIGM9aS5tYXRjaEZyYWdtZW50KHQsbik7aWYoYyYmKCFlfHxjLnZhbGlkRW5kKSlyZXR1cm4gYS5mcm9tKHMubWFwKChmdW5jdGlvbih0KXtyZXR1cm4gdC5jcmVhdGVBbmRGaWxsKCl9KSkpO2Zvcih2YXIgbD0wO2w8aS5uZXh0Lmxlbmd0aDtsKz0yKXt2YXIgcD1pLm5leHRbbF0sdT1pLm5leHRbbCsxXTtpZighcC5pc1RleHQmJiFwLmhhc1JlcXVpcmVkQXR0cnMoKSYmLTE9PXIuaW5kZXhPZih1KSl7ci5wdXNoKHUpO3ZhciBoPW8odSxzLmNvbmNhdChwKSk7aWYoaClyZXR1cm4gaH19fXJldHVybiBvKHRoaXMsW10pfSwkLnByb3RvdHlwZS5maW5kV3JhcHBpbmc9ZnVuY3Rpb24odCl7Zm9yKHZhciBlPXRoaXMsbj0wO248dGhpcy53cmFwQ2FjaGUubGVuZ3RoO24rPTIpaWYoZS53cmFwQ2FjaGVbbl09PXQpcmV0dXJuIGUud3JhcENhY2hlW24rMV07dmFyIHI9dGhpcy5jb21wdXRlV3JhcHBpbmcodCk7cmV0dXJuIHRoaXMud3JhcENhY2hlLnB1c2godCxyKSxyfSwkLnByb3RvdHlwZS5jb21wdXRlV3JhcHBpbmc9ZnVuY3Rpb24odCl7dmFyIGU9T2JqZWN0LmNyZWF0ZShudWxsKSxuPVt7bWF0Y2g6dGhpcyx0eXBlOm51bGwsdmlhOm51bGx9XTt3aGlsZShuLmxlbmd0aCl7dmFyIHI9bi5zaGlmdCgpLG89ci5tYXRjaDtpZihvLm1hdGNoVHlwZSh0KSl7Zm9yKHZhciBpPVtdLHM9cjtzLnR5cGU7cz1zLnZpYSlpLnB1c2gocy50eXBlKTtyZXR1cm4gaS5yZXZlcnNlKCl9Zm9yKHZhciBhPTA7YTxvLm5leHQubGVuZ3RoO2ErPTIpe3ZhciBjPW8ubmV4dFthXTtjLmlzTGVhZnx8Yy5oYXNSZXF1aXJlZEF0dHJzKCl8fGMubmFtZSBpbiBlfHxyLnR5cGUmJiFvLm5leHRbYSsxXS52YWxpZEVuZHx8KG4ucHVzaCh7bWF0Y2g6Yy5jb250ZW50TWF0Y2gsdHlwZTpjLHZpYTpyfSksZVtjLm5hbWVdPSEwKX19fSxWLmVkZ2VDb3VudC5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5uZXh0Lmxlbmd0aD4+MX0sJC5wcm90b3R5cGUuZWRnZT1mdW5jdGlvbih0KXt2YXIgZT10PDwxO2lmKGU+dGhpcy5uZXh0Lmxlbmd0aCl0aHJvdyBuZXcgUmFuZ2VFcnJvcigiVGhlcmUncyBubyAiK3QrInRoIGVkZ2UgaW4gdGhpcyBjb250ZW50IG1hdGNoIik7cmV0dXJue3R5cGU6dGhpcy5uZXh0W2VdLG5leHQ6dGhpcy5uZXh0W2UrMV19fSwkLnByb3RvdHlwZS50b1N0cmluZz1mdW5jdGlvbigpe3ZhciB0PVtdO2Z1bmN0aW9uIGUobil7dC5wdXNoKG4pO2Zvcih2YXIgcj0xO3I8bi5uZXh0Lmxlbmd0aDtyKz0yKS0xPT10LmluZGV4T2Yobi5uZXh0W3JdKSYmZShuLm5leHRbcl0pfXJldHVybiBlKHRoaXMpLHQubWFwKChmdW5jdGlvbihlLG4pe2Zvcih2YXIgcj1uKyhlLnZhbGlkRW5kPyIqIjoiICIpKyIgIixvPTA7bzxlLm5leHQubGVuZ3RoO28rPTIpcis9KG8/IiwgIjoiIikrZS5uZXh0W29dLm5hbWUrIi0+Iit0LmluZGV4T2YoZS5uZXh0W28rMV0pO3JldHVybiByfSkpLmpvaW4oIlxuIil9LE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKCQucHJvdG90eXBlLFYpLCQuZW1wdHk9bmV3ICQoITApO3ZhciBMPWZ1bmN0aW9uKHQsZSl7dGhpcy5zdHJpbmc9dCx0aGlzLm5vZGVUeXBlcz1lLHRoaXMuaW5saW5lPW51bGwsdGhpcy5wb3M9MCx0aGlzLnRva2Vucz10LnNwbGl0KC9ccyooPz1cYnxcV3wkKS8pLCIiPT10aGlzLnRva2Vuc1t0aGlzLnRva2Vucy5sZW5ndGgtMV0mJnRoaXMudG9rZW5zLnBvcCgpLCIiPT10aGlzLnRva2Vuc1swXSYmdGhpcy50b2tlbnMudW5zaGlmdCgpfSxKPXtuZXh0Ont9fTtmdW5jdGlvbiBxKHQpe3ZhciBlPVtdO2Rve2UucHVzaChXKHQpKX13aGlsZSh0LmVhdCgifCIpKTtyZXR1cm4gMT09ZS5sZW5ndGg/ZVswXTp7dHlwZToiY2hvaWNlIixleHByczplfX1mdW5jdGlvbiBXKHQpe3ZhciBlPVtdO2Rve2UucHVzaChIKHQpKX13aGlsZSh0Lm5leHQmJiIpIiE9dC5uZXh0JiYifCIhPXQubmV4dCk7cmV0dXJuIDE9PWUubGVuZ3RoP2VbMF06e3R5cGU6InNlcSIsZXhwcnM6ZX19ZnVuY3Rpb24gSCh0KXtmb3IodmFyIGU9WCh0KTs7KWlmKHQuZWF0KCIrIikpZT17dHlwZToicGx1cyIsZXhwcjplfTtlbHNlIGlmKHQuZWF0KCIqIikpZT17dHlwZToic3RhciIsZXhwcjplfTtlbHNlIGlmKHQuZWF0KCI/IikpZT17dHlwZToib3B0IixleHByOmV9O2Vsc2V7aWYoIXQuZWF0KCJ7IikpYnJlYWs7ZT1VKHQsZSl9cmV0dXJuIGV9ZnVuY3Rpb24gSyh0KXsvXEQvLnRlc3QodC5uZXh0KSYmdC5lcnIoIkV4cGVjdGVkIG51bWJlciwgZ290ICciK3QubmV4dCsiJyIpO3ZhciBlPU51bWJlcih0Lm5leHQpO3JldHVybiB0LnBvcysrLGV9ZnVuY3Rpb24gVSh0LGUpe3ZhciBuPUsodCkscj1uO3JldHVybiB0LmVhdCgiLCIpJiYocj0ifSIhPXQubmV4dD9LKHQpOi0xKSx0LmVhdCgifSIpfHx0LmVycigiVW5jbG9zZWQgYnJhY2VkIHJhbmdlIikse3R5cGU6InJhbmdlIixtaW46bixtYXg6cixleHByOmV9fWZ1bmN0aW9uIEcodCxlKXt2YXIgbj10Lm5vZGVUeXBlcyxyPW5bZV07aWYocilyZXR1cm5bcl07dmFyIG89W107Zm9yKHZhciBpIGluIG4pe3ZhciBzPW5baV07cy5ncm91cHMuaW5kZXhPZihlKT4tMSYmby5wdXNoKHMpfXJldHVybiAwPT1vLmxlbmd0aCYmdC5lcnIoIk5vIG5vZGUgdHlwZSBvciBncm91cCAnIitlKyInIGZvdW5kIiksb31mdW5jdGlvbiBYKHQpe2lmKHQuZWF0KCIoIikpe3ZhciBlPXEodCk7cmV0dXJuIHQuZWF0KCIpIil8fHQuZXJyKCJNaXNzaW5nIGNsb3NpbmcgcGFyZW4iKSxlfWlmKCEvXFcvLnRlc3QodC5uZXh0KSl7dmFyIG49Ryh0LHQubmV4dCkubWFwKChmdW5jdGlvbihlKXtyZXR1cm4gbnVsbD09dC5pbmxpbmU/dC5pbmxpbmU9ZS5pc0lubGluZTp0LmlubGluZSE9ZS5pc0lubGluZSYmdC5lcnIoIk1peGluZyBpbmxpbmUgYW5kIGJsb2NrIGNvbnRlbnQiKSx7dHlwZToibmFtZSIsdmFsdWU6ZX19KSk7cmV0dXJuIHQucG9zKyssMT09bi5sZW5ndGg/blswXTp7dHlwZToiY2hvaWNlIixleHByczpufX10LmVycigiVW5leHBlY3RlZCB0b2tlbiAnIit0Lm5leHQrIiciKX1mdW5jdGlvbiBZKHQpe3ZhciBlPVtbXV07cmV0dXJuIG8oaSh0LDApLG4oKSksZTtmdW5jdGlvbiBuKCl7cmV0dXJuIGUucHVzaChbXSktMX1mdW5jdGlvbiByKHQsbixyKXt2YXIgbz17dGVybTpyLHRvOm59O3JldHVybiBlW3RdLnB1c2gobyksb31mdW5jdGlvbiBvKHQsZSl7dC5mb3JFYWNoKChmdW5jdGlvbih0KXtyZXR1cm4gdC50bz1lfSkpfWZ1bmN0aW9uIGkodCxlKXtpZigiY2hvaWNlIj09dC50eXBlKXJldHVybiB0LmV4cHJzLnJlZHVjZSgoZnVuY3Rpb24odCxuKXtyZXR1cm4gdC5jb25jYXQoaShuLGUpKX0pLFtdKTtpZigic2VxIj09dC50eXBlKWZvcih2YXIgcz0wOztzKyspe3ZhciBhPWkodC5leHByc1tzXSxlKTtpZihzPT10LmV4cHJzLmxlbmd0aC0xKXJldHVybiBhO28oYSxlPW4oKSl9ZWxzZXtpZigic3RhciI9PXQudHlwZSl7dmFyIGM9bigpO3JldHVybiByKGUsYyksbyhpKHQuZXhwcixjKSxjKSxbcihjKV19aWYoInBsdXMiPT10LnR5cGUpe3ZhciBsPW4oKTtyZXR1cm4gbyhpKHQuZXhwcixlKSxsKSxvKGkodC5leHByLGwpLGwpLFtyKGwpXX1pZigib3B0Ij09dC50eXBlKXJldHVybltyKGUpXS5jb25jYXQoaSh0LmV4cHIsZSkpO2lmKCJyYW5nZSI9PXQudHlwZSl7Zm9yKHZhciBwPWUsdT0wO3U8dC5taW47dSsrKXt2YXIgaD1uKCk7byhpKHQuZXhwcixwKSxoKSxwPWh9aWYoLTE9PXQubWF4KW8oaSh0LmV4cHIscCkscCk7ZWxzZSBmb3IodmFyIGY9dC5taW47Zjx0Lm1heDtmKyspe3ZhciBkPW4oKTtyKHAsZCksbyhpKHQuZXhwcixwKSxkKSxwPWR9cmV0dXJuW3IocCldfWlmKCJuYW1lIj09dC50eXBlKXJldHVybltyKGUsbnVsbCx0LnZhbHVlKV19fX1mdW5jdGlvbiBRKHQsZSl7cmV0dXJuIHQtZX1mdW5jdGlvbiBaKHQsZSl7dmFyIG49W107cmV0dXJuIHIoZSksbi5zb3J0KFEpO2Z1bmN0aW9uIHIoZSl7dmFyIG89dFtlXTtpZigxPT1vLmxlbmd0aCYmIW9bMF0udGVybSlyZXR1cm4gcihvWzBdLnRvKTtuLnB1c2goZSk7Zm9yKHZhciBpPTA7aTxvLmxlbmd0aDtpKyspe3ZhciBzPW9baV0sYT1zLnRlcm0sYz1zLnRvO2F8fC0xIT1uLmluZGV4T2YoYyl8fHIoYyl9fX1mdW5jdGlvbiB0dCh0KXt2YXIgZT1PYmplY3QuY3JlYXRlKG51bGwpO3JldHVybiBuKFoodCwwKSk7ZnVuY3Rpb24gbihyKXt2YXIgbz1bXTtyLmZvckVhY2goKGZ1bmN0aW9uKGUpe3RbZV0uZm9yRWFjaCgoZnVuY3Rpb24oZSl7dmFyIG49ZS50ZXJtLHI9ZS50bztpZihuKXt2YXIgaT1vLmluZGV4T2Yobikscz1pPi0xJiZvW2krMV07Wih0LHIpLmZvckVhY2goKGZ1bmN0aW9uKHQpe3N8fG8ucHVzaChuLHM9W10pLC0xPT1zLmluZGV4T2YodCkmJnMucHVzaCh0KX0pKX19KSl9KSk7Zm9yKHZhciBpPWVbci5qb2luKCIsIildPW5ldyAkKHIuaW5kZXhPZih0Lmxlbmd0aC0xKT4tMSkscz0wO3M8by5sZW5ndGg7cys9Mil7dmFyIGE9b1tzKzFdLnNvcnQoUSk7aS5uZXh0LnB1c2gob1tzXSxlW2Euam9pbigiLCIpXXx8bihhKSl9cmV0dXJuIGl9fWZ1bmN0aW9uIGV0KHQsZSl7Zm9yKHZhciBuPTAscj1bdF07bjxyLmxlbmd0aDtuKyspe2Zvcih2YXIgbz1yW25dLGk9IW8udmFsaWRFbmQscz1bXSxhPTA7YTxvLm5leHQubGVuZ3RoO2ErPTIpe3ZhciBjPW8ubmV4dFthXSxsPW8ubmV4dFthKzFdO3MucHVzaChjLm5hbWUpLCFpfHxjLmlzVGV4dHx8Yy5oYXNSZXF1aXJlZEF0dHJzKCl8fChpPSExKSwtMT09ci5pbmRleE9mKGwpJiZyLnB1c2gobCl9aSYmZS5lcnIoIk9ubHkgbm9uLWdlbmVyYXRhYmxlIG5vZGVzICgiK3Muam9pbigiLCAiKSsiKSBpbiBhIHJlcXVpcmVkIHBvc2l0aW9uIil9fWZ1bmN0aW9uIG50KHQpe3ZhciBlPU9iamVjdC5jcmVhdGUobnVsbCk7Zm9yKHZhciBuIGluIHQpe3ZhciByPXRbbl07aWYoIXIuaGFzRGVmYXVsdClyZXR1cm4gbnVsbDtlW25dPXIuZGVmYXVsdH1yZXR1cm4gZX1mdW5jdGlvbiBydCh0LGUpe3ZhciBuPU9iamVjdC5jcmVhdGUobnVsbCk7Zm9yKHZhciByIGluIHQpe3ZhciBvPWUmJmVbcl07aWYodm9pZCAwPT09byl7dmFyIGk9dFtyXTtpZighaS5oYXNEZWZhdWx0KXRocm93IG5ldyBSYW5nZUVycm9yKCJObyB2YWx1ZSBzdXBwbGllZCBmb3IgYXR0cmlidXRlICIrcik7bz1pLmRlZmF1bHR9bltyXT1vfXJldHVybiBufWZ1bmN0aW9uIG90KHQpe3ZhciBlPU9iamVjdC5jcmVhdGUobnVsbCk7aWYodClmb3IodmFyIG4gaW4gdCllW25dPW5ldyBhdCh0W25dKTtyZXR1cm4gZX1KLm5leHQuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudG9rZW5zW3RoaXMucG9zXX0sTC5wcm90b3R5cGUuZWF0PWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLm5leHQ9PXQmJih0aGlzLnBvcysrfHwhMCl9LEwucHJvdG90eXBlLmVycj1mdW5jdGlvbih0KXt0aHJvdyBuZXcgU3ludGF4RXJyb3IodCsiIChpbiBjb250ZW50IGV4cHJlc3Npb24gJyIrdGhpcy5zdHJpbmcrIicpIil9LE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKEwucHJvdG90eXBlLEopO3ZhciBpdD1mdW5jdGlvbih0LGUsbil7dGhpcy5uYW1lPXQsdGhpcy5zY2hlbWE9ZSx0aGlzLnNwZWM9bix0aGlzLmdyb3Vwcz1uLmdyb3VwP24uZ3JvdXAuc3BsaXQoIiAiKTpbXSx0aGlzLmF0dHJzPW90KG4uYXR0cnMpLHRoaXMuZGVmYXVsdEF0dHJzPW50KHRoaXMuYXR0cnMpLHRoaXMuY29udGVudE1hdGNoPW51bGwsdGhpcy5tYXJrU2V0PW51bGwsdGhpcy5pbmxpbmVDb250ZW50PW51bGwsdGhpcy5pc0Jsb2NrPSEobi5pbmxpbmV8fCJ0ZXh0Ij09dCksdGhpcy5pc1RleHQ9InRleHQiPT10fSxzdD17aXNJbmxpbmU6e30saXNUZXh0YmxvY2s6e30saXNMZWFmOnt9LGlzQXRvbTp7fX07c3QuaXNJbmxpbmUuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIXRoaXMuaXNCbG9ja30sc3QuaXNUZXh0YmxvY2suZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuaXNCbG9jayYmdGhpcy5pbmxpbmVDb250ZW50fSxzdC5pc0xlYWYuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY29udGVudE1hdGNoPT0kLmVtcHR5fSxzdC5pc0F0b20uZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuaXNMZWFmfHx0aGlzLnNwZWMuYXRvbX0saXQucHJvdG90eXBlLmhhc1JlcXVpcmVkQXR0cnM9ZnVuY3Rpb24odCl7dmFyIGU9dGhpcztmb3IodmFyIG4gaW4gZS5hdHRycylpZihlLmF0dHJzW25dLmlzUmVxdWlyZWQmJighdHx8IShuIGluIHQpKSlyZXR1cm4hMDtyZXR1cm4hMX0saXQucHJvdG90eXBlLmNvbXBhdGlibGVDb250ZW50PWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzPT10fHx0aGlzLmNvbnRlbnRNYXRjaC5jb21wYXRpYmxlKHQuY29udGVudE1hdGNoKX0saXQucHJvdG90eXBlLmNvbXB1dGVBdHRycz1mdW5jdGlvbih0KXtyZXR1cm4hdCYmdGhpcy5kZWZhdWx0QXR0cnM/dGhpcy5kZWZhdWx0QXR0cnM6cnQodGhpcy5hdHRycyx0KX0saXQucHJvdG90eXBlLmNyZWF0ZT1mdW5jdGlvbih0LGUsbil7aWYodGhpcy5pc1RleHQpdGhyb3cgbmV3IEVycm9yKCJOb2RlVHlwZS5jcmVhdGUgY2FuJ3QgY29uc3RydWN0IHRleHQgbm9kZXMiKTtyZXR1cm4gbmV3IF8odGhpcyx0aGlzLmNvbXB1dGVBdHRycyh0KSxhLmZyb20oZSksaC5zZXRGcm9tKG4pKX0saXQucHJvdG90eXBlLmNyZWF0ZUNoZWNrZWQ9ZnVuY3Rpb24odCxlLG4pe2lmKGU9YS5mcm9tKGUpLCF0aGlzLnZhbGlkQ29udGVudChlKSl0aHJvdyBuZXcgUmFuZ2VFcnJvcigiSW52YWxpZCBjb250ZW50IGZvciBub2RlICIrdGhpcy5uYW1lKTtyZXR1cm4gbmV3IF8odGhpcyx0aGlzLmNvbXB1dGVBdHRycyh0KSxlLGguc2V0RnJvbShuKSl9LGl0LnByb3RvdHlwZS5jcmVhdGVBbmRGaWxsPWZ1bmN0aW9uKHQsZSxuKXtpZih0PXRoaXMuY29tcHV0ZUF0dHJzKHQpLGU9YS5mcm9tKGUpLGUuc2l6ZSl7dmFyIHI9dGhpcy5jb250ZW50TWF0Y2guZmlsbEJlZm9yZShlKTtpZighcilyZXR1cm4gbnVsbDtlPXIuYXBwZW5kKGUpfXZhciBvPXRoaXMuY29udGVudE1hdGNoLm1hdGNoRnJhZ21lbnQoZSkuZmlsbEJlZm9yZShhLmVtcHR5LCEwKTtyZXR1cm4gbz9uZXcgXyh0aGlzLHQsZS5hcHBlbmQobyksaC5zZXRGcm9tKG4pKTpudWxsfSxpdC5wcm90b3R5cGUudmFsaWRDb250ZW50PWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMsbj10aGlzLmNvbnRlbnRNYXRjaC5tYXRjaEZyYWdtZW50KHQpO2lmKCFufHwhbi52YWxpZEVuZClyZXR1cm4hMTtmb3IodmFyIHI9MDtyPHQuY2hpbGRDb3VudDtyKyspaWYoIWUuYWxsb3dzTWFya3ModC5jaGlsZChyKS5tYXJrcykpcmV0dXJuITE7cmV0dXJuITB9LGl0LnByb3RvdHlwZS5hbGxvd3NNYXJrVHlwZT1mdW5jdGlvbih0KXtyZXR1cm4gbnVsbD09dGhpcy5tYXJrU2V0fHx0aGlzLm1hcmtTZXQuaW5kZXhPZih0KT4tMX0saXQucHJvdG90eXBlLmFsbG93c01hcmtzPWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXM7aWYobnVsbD09dGhpcy5tYXJrU2V0KXJldHVybiEwO2Zvcih2YXIgbj0wO248dC5sZW5ndGg7bisrKWlmKCFlLmFsbG93c01hcmtUeXBlKHRbbl0udHlwZSkpcmV0dXJuITE7cmV0dXJuITB9LGl0LnByb3RvdHlwZS5hbGxvd2VkTWFya3M9ZnVuY3Rpb24odCl7dmFyIGUsbj10aGlzO2lmKG51bGw9PXRoaXMubWFya1NldClyZXR1cm4gdDtmb3IodmFyIHI9MDtyPHQubGVuZ3RoO3IrKyluLmFsbG93c01hcmtUeXBlKHRbcl0udHlwZSk/ZSYmZS5wdXNoKHRbcl0pOmV8fChlPXQuc2xpY2UoMCxyKSk7cmV0dXJuIGU/ZS5sZW5ndGg/ZTpoLmVtcHR5OnR9LGl0LmNvbXBpbGU9ZnVuY3Rpb24odCxlKXt2YXIgbj1PYmplY3QuY3JlYXRlKG51bGwpO3QuZm9yRWFjaCgoZnVuY3Rpb24odCxyKXtyZXR1cm4gblt0XT1uZXcgaXQodCxlLHIpfSkpO3ZhciByPWUuc3BlYy50b3BOb2RlfHwiZG9jIjtpZighbltyXSl0aHJvdyBuZXcgUmFuZ2VFcnJvcigiU2NoZW1hIGlzIG1pc3NpbmcgaXRzIHRvcCBub2RlIHR5cGUgKCciK3IrIicpIik7aWYoIW4udGV4dCl0aHJvdyBuZXcgUmFuZ2VFcnJvcigiRXZlcnkgc2NoZW1hIG5lZWRzIGEgJ3RleHQnIHR5cGUiKTtmb3IodmFyIG8gaW4gbi50ZXh0LmF0dHJzKXRocm93IG5ldyBSYW5nZUVycm9yKCJUaGUgdGV4dCBub2RlIHR5cGUgc2hvdWxkIG5vdCBoYXZlIGF0dHJpYnV0ZXMiKTtyZXR1cm4gbn0sT2JqZWN0LmRlZmluZVByb3BlcnRpZXMoaXQucHJvdG90eXBlLHN0KTt2YXIgYXQ9ZnVuY3Rpb24odCl7dGhpcy5oYXNEZWZhdWx0PU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbCh0LCJkZWZhdWx0IiksdGhpcy5kZWZhdWx0PXQuZGVmYXVsdH0sY3Q9e2lzUmVxdWlyZWQ6e319O2N0LmlzUmVxdWlyZWQuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIXRoaXMuaGFzRGVmYXVsdH0sT2JqZWN0LmRlZmluZVByb3BlcnRpZXMoYXQucHJvdG90eXBlLGN0KTt2YXIgbHQ9ZnVuY3Rpb24odCxlLG4scil7dGhpcy5uYW1lPXQsdGhpcy5zY2hlbWE9bix0aGlzLnNwZWM9cix0aGlzLmF0dHJzPW90KHIuYXR0cnMpLHRoaXMucmFuaz1lLHRoaXMuZXhjbHVkZWQ9bnVsbDt2YXIgbz1udCh0aGlzLmF0dHJzKTt0aGlzLmluc3RhbmNlPW8mJm5ldyBoKHRoaXMsbyl9O2x0LnByb3RvdHlwZS5jcmVhdGU9ZnVuY3Rpb24odCl7cmV0dXJuIXQmJnRoaXMuaW5zdGFuY2U/dGhpcy5pbnN0YW5jZTpuZXcgaCh0aGlzLHJ0KHRoaXMuYXR0cnMsdCkpfSxsdC5jb21waWxlPWZ1bmN0aW9uKHQsZSl7dmFyIG49T2JqZWN0LmNyZWF0ZShudWxsKSxyPTA7cmV0dXJuIHQuZm9yRWFjaCgoZnVuY3Rpb24odCxvKXtyZXR1cm4gblt0XT1uZXcgbHQodCxyKyssZSxvKX0pKSxufSxsdC5wcm90b3R5cGUucmVtb3ZlRnJvbVNldD1mdW5jdGlvbih0KXtmb3IodmFyIGU9dGhpcyxuPTA7bjx0Lmxlbmd0aDtuKyspaWYodFtuXS50eXBlPT1lKXJldHVybiB0LnNsaWNlKDAsbikuY29uY2F0KHQuc2xpY2UobisxKSk7cmV0dXJuIHR9LGx0LnByb3RvdHlwZS5pc0luU2V0PWZ1bmN0aW9uKHQpe2Zvcih2YXIgZT10aGlzLG49MDtuPHQubGVuZ3RoO24rKylpZih0W25dLnR5cGU9PWUpcmV0dXJuIHRbbl19LGx0LnByb3RvdHlwZS5leGNsdWRlcz1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5leGNsdWRlZC5pbmRleE9mKHQpPi0xfTt2YXIgcHQ9ZnVuY3Rpb24odCl7dmFyIGU9dGhpcztmb3IodmFyIG4gaW4gdGhpcy5zcGVjPXt9LHQpZS5zcGVjW25dPXRbbl07dGhpcy5zcGVjLm5vZGVzPW8uZnJvbSh0Lm5vZGVzKSx0aGlzLnNwZWMubWFya3M9by5mcm9tKHQubWFya3MpLHRoaXMubm9kZXM9aXQuY29tcGlsZSh0aGlzLnNwZWMubm9kZXMsdGhpcyksdGhpcy5tYXJrcz1sdC5jb21waWxlKHRoaXMuc3BlYy5tYXJrcyx0aGlzKTt2YXIgcj1PYmplY3QuY3JlYXRlKG51bGwpO2Zvcih2YXIgaSBpbiBlLm5vZGVzKXtpZihpIGluIGUubWFya3MpdGhyb3cgbmV3IFJhbmdlRXJyb3IoaSsiIGNhbiBub3QgYmUgYm90aCBhIG5vZGUgYW5kIGEgbWFyayIpO3ZhciBzPWUubm9kZXNbaV0sYT1zLnNwZWMuY29udGVudHx8IiIsYz1zLnNwZWMubWFya3M7cy5jb250ZW50TWF0Y2g9clthXXx8KHJbYV09JC5wYXJzZShhLGUubm9kZXMpKSxzLmlubGluZUNvbnRlbnQ9cy5jb250ZW50TWF0Y2guaW5saW5lQ29udGVudCxzLm1hcmtTZXQ9Il8iPT1jP251bGw6Yz91dChlLGMuc3BsaXQoIiAiKSk6IiIhPWMmJnMuaW5saW5lQ29udGVudD9udWxsOltdfWZvcih2YXIgbCBpbiBlLm1hcmtzKXt2YXIgcD1lLm1hcmtzW2xdLHU9cC5zcGVjLmV4Y2x1ZGVzO3AuZXhjbHVkZWQ9bnVsbD09dT9bcF06IiI9PXU/W106dXQoZSx1LnNwbGl0KCIgIikpfXRoaXMubm9kZUZyb21KU09OPXRoaXMubm9kZUZyb21KU09OLmJpbmQodGhpcyksdGhpcy5tYXJrRnJvbUpTT049dGhpcy5tYXJrRnJvbUpTT04uYmluZCh0aGlzKSx0aGlzLnRvcE5vZGVUeXBlPXRoaXMubm9kZXNbdGhpcy5zcGVjLnRvcE5vZGV8fCJkb2MiXSx0aGlzLmNhY2hlZD1PYmplY3QuY3JlYXRlKG51bGwpLHRoaXMuY2FjaGVkLndyYXBwaW5ncz1PYmplY3QuY3JlYXRlKG51bGwpfTtmdW5jdGlvbiB1dCh0LGUpe2Zvcih2YXIgbj1bXSxyPTA7cjxlLmxlbmd0aDtyKyspe3ZhciBvPWVbcl0saT10Lm1hcmtzW29dLHM9aTtpZihpKW4ucHVzaChpKTtlbHNlIGZvcih2YXIgYSBpbiB0Lm1hcmtzKXt2YXIgYz10Lm1hcmtzW2FdOygiXyI9PW98fGMuc3BlYy5ncm91cCYmYy5zcGVjLmdyb3VwLnNwbGl0KCIgIikuaW5kZXhPZihvKT4tMSkmJm4ucHVzaChzPWMpfWlmKCFzKXRocm93IG5ldyBTeW50YXhFcnJvcigiVW5rbm93biBtYXJrIHR5cGU6ICciK2Vbcl0rIiciKX1yZXR1cm4gbn1wdC5wcm90b3R5cGUubm9kZT1mdW5jdGlvbih0LGUsbixyKXtpZigic3RyaW5nIj09dHlwZW9mIHQpdD10aGlzLm5vZGVUeXBlKHQpO2Vsc2V7aWYoISh0IGluc3RhbmNlb2YgaXQpKXRocm93IG5ldyBSYW5nZUVycm9yKCJJbnZhbGlkIG5vZGUgdHlwZTogIit0KTtpZih0LnNjaGVtYSE9dGhpcyl0aHJvdyBuZXcgUmFuZ2VFcnJvcigiTm9kZSB0eXBlIGZyb20gZGlmZmVyZW50IHNjaGVtYSB1c2VkICgiK3QubmFtZSsiKSIpfXJldHVybiB0LmNyZWF0ZUNoZWNrZWQoZSxuLHIpfSxwdC5wcm90b3R5cGUudGV4dD1mdW5jdGlvbih0LGUpe3ZhciBuPXRoaXMubm9kZXMudGV4dDtyZXR1cm4gbmV3IEIobixuLmRlZmF1bHRBdHRycyx0LGguc2V0RnJvbShlKSl9LHB0LnByb3RvdHlwZS5tYXJrPWZ1bmN0aW9uKHQsZSl7cmV0dXJuInN0cmluZyI9PXR5cGVvZiB0JiYodD10aGlzLm1hcmtzW3RdKSx0LmNyZWF0ZShlKX0scHQucHJvdG90eXBlLm5vZGVGcm9tSlNPTj1mdW5jdGlvbih0KXtyZXR1cm4gXy5mcm9tSlNPTih0aGlzLHQpfSxwdC5wcm90b3R5cGUubWFya0Zyb21KU09OPWZ1bmN0aW9uKHQpe3JldHVybiBoLmZyb21KU09OKHRoaXMsdCl9LHB0LnByb3RvdHlwZS5ub2RlVHlwZT1mdW5jdGlvbih0KXt2YXIgZT10aGlzLm5vZGVzW3RdO2lmKCFlKXRocm93IG5ldyBSYW5nZUVycm9yKCJVbmtub3duIG5vZGUgdHlwZTogIit0KTtyZXR1cm4gZX07dmFyIGh0PWZ1bmN0aW9uKHQsZSl7dmFyIG49dGhpczt0aGlzLnNjaGVtYT10LHRoaXMucnVsZXM9ZSx0aGlzLnRhZ3M9W10sdGhpcy5zdHlsZXM9W10sZS5mb3JFYWNoKChmdW5jdGlvbih0KXt0LnRhZz9uLnRhZ3MucHVzaCh0KTp0LnN0eWxlJiZuLnN0eWxlcy5wdXNoKHQpfSkpfTtodC5wcm90b3R5cGUucGFyc2U9ZnVuY3Rpb24odCxlKXt2b2lkIDA9PT1lJiYoZT17fSk7dmFyIG49bmV3IGJ0KHRoaXMsZSwhMSk7cmV0dXJuIG4uYWRkQWxsKHQsbnVsbCxlLmZyb20sZS50byksbi5maW5pc2goKX0saHQucHJvdG90eXBlLnBhcnNlU2xpY2U9ZnVuY3Rpb24odCxlKXt2b2lkIDA9PT1lJiYoZT17fSk7dmFyIG49bmV3IGJ0KHRoaXMsZSwhMCk7cmV0dXJuIG4uYWRkQWxsKHQsbnVsbCxlLmZyb20sZS50byksZC5tYXhPcGVuKG4uZmluaXNoKCkpfSxodC5wcm90b3R5cGUubWF0Y2hUYWc9ZnVuY3Rpb24odCxlKXtmb3IodmFyIG49dGhpcyxyPTA7cjx0aGlzLnRhZ3MubGVuZ3RoO3IrKyl7dmFyIG89bi50YWdzW3JdO2lmKEN0KHQsby50YWcpJiYodm9pZCAwPT09by5uYW1lc3BhY2V8fHQubmFtZXNwYWNlVVJJPT1vLm5hbWVzcGFjZSkmJighby5jb250ZXh0fHxlLm1hdGNoZXNDb250ZXh0KG8uY29udGV4dCkpKXtpZihvLmdldEF0dHJzKXt2YXIgaT1vLmdldEF0dHJzKHQpO2lmKCExPT09aSljb250aW51ZTtvLmF0dHJzPWl9cmV0dXJuIG99fX0saHQucHJvdG90eXBlLm1hdGNoU3R5bGU9ZnVuY3Rpb24odCxlLG4pe2Zvcih2YXIgcj10aGlzLG89MDtvPHRoaXMuc3R5bGVzLmxlbmd0aDtvKyspe3ZhciBpPXIuc3R5bGVzW29dO2lmKCEoMCE9aS5zdHlsZS5pbmRleE9mKHQpfHxpLmNvbnRleHQmJiFuLm1hdGNoZXNDb250ZXh0KGkuY29udGV4dCl8fGkuc3R5bGUubGVuZ3RoPnQubGVuZ3RoJiYoNjEhPWkuc3R5bGUuY2hhckNvZGVBdCh0Lmxlbmd0aCl8fGkuc3R5bGUuc2xpY2UodC5sZW5ndGgrMSkhPWUpKSl7aWYoaS5nZXRBdHRycyl7dmFyIHM9aS5nZXRBdHRycyhlKTtpZighMT09PXMpY29udGludWU7aS5hdHRycz1zfXJldHVybiBpfX19LGh0LnNjaGVtYVJ1bGVzPWZ1bmN0aW9uKHQpe3ZhciBlPVtdO2Z1bmN0aW9uIG4odCl7Zm9yKHZhciBuPW51bGw9PXQucHJpb3JpdHk/NTA6dC5wcmlvcml0eSxyPTA7cjxlLmxlbmd0aDtyKyspe3ZhciBvPWVbcl0saT1udWxsPT1vLnByaW9yaXR5PzUwOm8ucHJpb3JpdHk7aWYoaTxuKWJyZWFrfWUuc3BsaWNlKHIsMCx0KX12YXIgcj1mdW5jdGlvbihlKXt2YXIgcj10Lm1hcmtzW2VdLnNwZWMucGFyc2VET007ciYmci5mb3JFYWNoKChmdW5jdGlvbih0KXtuKHQ9TXQodCkpLHQubWFyaz1lfSkpfTtmb3IodmFyIG8gaW4gdC5tYXJrcylyKG8pO3ZhciBpPWZ1bmN0aW9uKGUpe3ZhciByPXQubm9kZXNbc10uc3BlYy5wYXJzZURPTTtyJiZyLmZvckVhY2goKGZ1bmN0aW9uKHQpe24odD1NdCh0KSksdC5ub2RlPXN9KSl9O2Zvcih2YXIgcyBpbiB0Lm5vZGVzKWkobyk7cmV0dXJuIGV9LGh0LmZyb21TY2hlbWE9ZnVuY3Rpb24odCl7cmV0dXJuIHQuY2FjaGVkLmRvbVBhcnNlcnx8KHQuY2FjaGVkLmRvbVBhcnNlcj1uZXcgaHQodCxodC5zY2hlbWFSdWxlcyh0KSkpfTt2YXIgZnQ9e2FkZHJlc3M6ITAsYXJ0aWNsZTohMCxhc2lkZTohMCxibG9ja3F1b3RlOiEwLGNhbnZhczohMCxkZDohMCxkaXY6ITAsZGw6ITAsZmllbGRzZXQ6ITAsZmlnY2FwdGlvbjohMCxmaWd1cmU6ITAsZm9vdGVyOiEwLGZvcm06ITAsaDE6ITAsaDI6ITAsaDM6ITAsaDQ6ITAsaDU6ITAsaDY6ITAsaGVhZGVyOiEwLGhncm91cDohMCxocjohMCxsaTohMCxub3NjcmlwdDohMCxvbDohMCxvdXRwdXQ6ITAscDohMCxwcmU6ITAsc2VjdGlvbjohMCx0YWJsZTohMCx0Zm9vdDohMCx1bDohMH0sZHQ9e2hlYWQ6ITAsbm9zY3JpcHQ6ITAsb2JqZWN0OiEwLHNjcmlwdDohMCxzdHlsZTohMCx0aXRsZTohMH0sdnQ9e29sOiEwLHVsOiEwfSxtdD0xLHl0PTIsZ3Q9NDtmdW5jdGlvbiB3dCh0KXtyZXR1cm4odD9tdDowKXwoImZ1bGwiPT09dD95dDowKX12YXIgeHQ9ZnVuY3Rpb24odCxlLG4scixvLGkpe3RoaXMudHlwZT10LHRoaXMuYXR0cnM9ZSx0aGlzLnNvbGlkPXIsdGhpcy5tYXRjaD1vfHwoaSZndD9udWxsOnQuY29udGVudE1hdGNoKSx0aGlzLm9wdGlvbnM9aSx0aGlzLmNvbnRlbnQ9W10sdGhpcy5tYXJrcz1uLHRoaXMuYWN0aXZlTWFya3M9aC5ub25lfTt4dC5wcm90b3R5cGUuZmluZFdyYXBwaW5nPWZ1bmN0aW9uKHQpe2lmKCF0aGlzLm1hdGNoKXtpZighdGhpcy50eXBlKXJldHVybltdO3ZhciBlPXRoaXMudHlwZS5jb250ZW50TWF0Y2guZmlsbEJlZm9yZShhLmZyb20odCkpO2lmKCFlKXt2YXIgbixyPXRoaXMudHlwZS5jb250ZW50TWF0Y2g7cmV0dXJuKG49ci5maW5kV3JhcHBpbmcodC50eXBlKSk/KHRoaXMubWF0Y2g9cixuKTpudWxsfXRoaXMubWF0Y2g9dGhpcy50eXBlLmNvbnRlbnRNYXRjaC5tYXRjaEZyYWdtZW50KGUpfXJldHVybiB0aGlzLm1hdGNoLmZpbmRXcmFwcGluZyh0LnR5cGUpfSx4dC5wcm90b3R5cGUuZmluaXNoPWZ1bmN0aW9uKHQpe2lmKCEodGhpcy5vcHRpb25zJm10KSl7dmFyIGUsbj10aGlzLmNvbnRlbnRbdGhpcy5jb250ZW50Lmxlbmd0aC0xXTtuJiZuLmlzVGV4dCYmKGU9L1xzKyQvLmV4ZWMobi50ZXh0KSkmJihuLnRleHQubGVuZ3RoPT1lWzBdLmxlbmd0aD90aGlzLmNvbnRlbnQucG9wKCk6dGhpcy5jb250ZW50W3RoaXMuY29udGVudC5sZW5ndGgtMV09bi53aXRoVGV4dChuLnRleHQuc2xpY2UoMCxuLnRleHQubGVuZ3RoLWVbMF0ubGVuZ3RoKSkpfXZhciByPWEuZnJvbSh0aGlzLmNvbnRlbnQpO3JldHVybiF0JiZ0aGlzLm1hdGNoJiYocj1yLmFwcGVuZCh0aGlzLm1hdGNoLmZpbGxCZWZvcmUoYS5lbXB0eSwhMCkpKSx0aGlzLnR5cGU/dGhpcy50eXBlLmNyZWF0ZSh0aGlzLmF0dHJzLHIsdGhpcy5tYXJrcyk6cn07dmFyIGJ0PWZ1bmN0aW9uKHQsZSxuKXt0aGlzLnBhcnNlcj10LHRoaXMub3B0aW9ucz1lLHRoaXMuaXNPcGVuPW4sdGhpcy5wZW5kaW5nTWFya3M9W107dmFyIHIsbz1lLnRvcE5vZGUsaT13dChlLnByZXNlcnZlV2hpdGVzcGFjZSl8KG4/Z3Q6MCk7cj1vP25ldyB4dChvLnR5cGUsby5hdHRycyxoLm5vbmUsITAsZS50b3BNYXRjaHx8by50eXBlLmNvbnRlbnRNYXRjaCxpKTpuZXcgeHQobj9udWxsOnQuc2NoZW1hLnRvcE5vZGVUeXBlLG51bGwsaC5ub25lLCEwLG51bGwsaSksdGhpcy5ub2Rlcz1bcl0sdGhpcy5vcGVuPTAsdGhpcy5maW5kPWUuZmluZFBvc2l0aW9ucyx0aGlzLm5lZWRzQmxvY2s9ITF9LGt0PXt0b3A6e30sY3VycmVudFBvczp7fX07ZnVuY3Rpb24gU3QodCl7Zm9yKHZhciBlPXQuZmlyc3RDaGlsZCxuPW51bGw7ZTtlPWUubmV4dFNpYmxpbmcpe3ZhciByPTE9PWUubm9kZVR5cGU/ZS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpOm51bGw7ciYmdnQuaGFzT3duUHJvcGVydHkocikmJm4/KG4uYXBwZW5kQ2hpbGQoZSksZT1uKToibGkiPT1yP249ZTpyJiYobj1udWxsKX19ZnVuY3Rpb24gQ3QodCxlKXtyZXR1cm4odC5tYXRjaGVzfHx0Lm1zTWF0Y2hlc1NlbGVjdG9yfHx0LndlYmtpdE1hdGNoZXNTZWxlY3Rvcnx8dC5tb3pNYXRjaGVzU2VsZWN0b3IpLmNhbGwodCxlKX1mdW5jdGlvbiBPdCh0KXt2YXIgZSxuPS9ccyooW1x3LV0rKVxzKjpccyooW147XSspL2cscj1bXTt3aGlsZShlPW4uZXhlYyh0KSlyLnB1c2goZVsxXSxlWzJdLnRyaW0oKSk7cmV0dXJuIHJ9ZnVuY3Rpb24gTXQodCl7dmFyIGU9e307Zm9yKHZhciBuIGluIHQpZVtuXT10W25dO3JldHVybiBlfWt0LnRvcC5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5ub2Rlc1t0aGlzLm9wZW5dfSxidC5wcm90b3R5cGUuYWRkRE9NPWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXM7aWYoMz09dC5ub2RlVHlwZSl0aGlzLmFkZFRleHROb2RlKHQpO2Vsc2UgaWYoMT09dC5ub2RlVHlwZSl7dmFyIG49dC5nZXRBdHRyaWJ1dGUoInN0eWxlIikscj1uP3RoaXMucmVhZFN0eWxlcyhPdChuKSk6bnVsbDtpZihudWxsIT1yKWZvcih2YXIgbz0wO288ci5sZW5ndGg7bysrKWUuYWRkUGVuZGluZ01hcmsocltvXSk7aWYodGhpcy5hZGRFbGVtZW50KHQpLG51bGwhPXIpZm9yKHZhciBpPTA7aTxyLmxlbmd0aDtpKyspZS5yZW1vdmVQZW5kaW5nTWFyayhyW2ldKX19LGJ0LnByb3RvdHlwZS5hZGRUZXh0Tm9kZT1mdW5jdGlvbih0KXt2YXIgZT10Lm5vZGVWYWx1ZSxuPXRoaXMudG9wO2lmKChuLnR5cGU/bi50eXBlLmlubGluZUNvbnRlbnQ6bi5jb250ZW50Lmxlbmd0aCYmbi5jb250ZW50WzBdLmlzSW5saW5lKXx8L1xTLy50ZXN0KGUpKXtpZihuLm9wdGlvbnMmbXQpbi5vcHRpb25zJnl0fHwoZT1lLnJlcGxhY2UoL1xyP1xufFxyL2csIiAiKSk7ZWxzZSBpZihlPWUucmVwbGFjZSgvXHMrL2csIiAiKSwvXlxzLy50ZXN0KGUpJiZ0aGlzLm9wZW49PXRoaXMubm9kZXMubGVuZ3RoLTEpe3ZhciByPW4uY29udGVudFtuLmNvbnRlbnQubGVuZ3RoLTFdLG89dC5wcmV2aW91c1NpYmxpbmc7KCFyfHxvJiYiQlIiPT1vLm5vZGVOYW1lfHxyLmlzVGV4dCYmL1xzJC8udGVzdChyLnRleHQpKSYmKGU9ZS5zbGljZSgxKSl9ZSYmdGhpcy5pbnNlcnROb2RlKHRoaXMucGFyc2VyLnNjaGVtYS50ZXh0KGUpKSx0aGlzLmZpbmRJblRleHQodCl9ZWxzZSB0aGlzLmZpbmRJbnNpZGUodCl9LGJ0LnByb3RvdHlwZS5hZGRFbGVtZW50PWZ1bmN0aW9uKHQpe3ZhciBlPXQubm9kZU5hbWUudG9Mb3dlckNhc2UoKTt2dC5oYXNPd25Qcm9wZXJ0eShlKSYmU3QodCk7dmFyIG49dGhpcy5vcHRpb25zLnJ1bGVGcm9tTm9kZSYmdGhpcy5vcHRpb25zLnJ1bGVGcm9tTm9kZSh0KXx8dGhpcy5wYXJzZXIubWF0Y2hUYWcodCx0aGlzKTtpZihuP24uaWdub3JlOmR0Lmhhc093blByb3BlcnR5KGUpKXRoaXMuZmluZEluc2lkZSh0KTtlbHNlIGlmKCFufHxuLnNraXApe24mJm4uc2tpcC5ub2RlVHlwZSYmKHQ9bi5za2lwKTt2YXIgcixvPXRoaXMudG9wLGk9dGhpcy5uZWVkc0Jsb2NrO2lmKGZ0Lmhhc093blByb3BlcnR5KGUpKXI9ITAsby50eXBlfHwodGhpcy5uZWVkc0Jsb2NrPSEwKTtlbHNlIGlmKCF0LmZpcnN0Q2hpbGQpcmV0dXJuIHZvaWQgdGhpcy5sZWFmRmFsbGJhY2sodCk7dGhpcy5hZGRBbGwodCksciYmdGhpcy5zeW5jKG8pLHRoaXMubmVlZHNCbG9jaz1pfWVsc2UgdGhpcy5hZGRFbGVtZW50QnlSdWxlKHQsbil9LGJ0LnByb3RvdHlwZS5sZWFmRmFsbGJhY2s9ZnVuY3Rpb24odCl7IkJSIj09dC5ub2RlTmFtZSYmdGhpcy50b3AudHlwZSYmdGhpcy50b3AudHlwZS5pbmxpbmVDb250ZW50JiZ0aGlzLmFkZFRleHROb2RlKHQub3duZXJEb2N1bWVudC5jcmVhdGVUZXh0Tm9kZSgiXG4iKSl9LGJ0LnByb3RvdHlwZS5yZWFkU3R5bGVzPWZ1bmN0aW9uKHQpe2Zvcih2YXIgZT10aGlzLG49aC5ub25lLHI9MDtyPHQubGVuZ3RoO3IrPTIpe3ZhciBvPWUucGFyc2VyLm1hdGNoU3R5bGUodFtyXSx0W3IrMV0sZSk7aWYobyl7aWYoby5pZ25vcmUpcmV0dXJuIG51bGw7bj1lLnBhcnNlci5zY2hlbWEubWFya3Nbby5tYXJrXS5jcmVhdGUoby5hdHRycykuYWRkVG9TZXQobil9fXJldHVybiBufSxidC5wcm90b3R5cGUuYWRkRWxlbWVudEJ5UnVsZT1mdW5jdGlvbih0LGUpe3ZhciBuLHIsbyxpLHM9dGhpcztlLm5vZGU/KHI9dGhpcy5wYXJzZXIuc2NoZW1hLm5vZGVzW2Uubm9kZV0sci5pc0xlYWY/dGhpcy5pbnNlcnROb2RlKHIuY3JlYXRlKGUuYXR0cnMpKXx8dGhpcy5sZWFmRmFsbGJhY2sodCk6bj10aGlzLmVudGVyKHIsZS5hdHRycyxlLnByZXNlcnZlV2hpdGVzcGFjZSkpOihvPXRoaXMucGFyc2VyLnNjaGVtYS5tYXJrc1tlLm1hcmtdLGk9by5jcmVhdGUoZS5hdHRycyksdGhpcy5hZGRQZW5kaW5nTWFyayhpKSk7dmFyIGE9dGhpcy50b3A7aWYociYmci5pc0xlYWYpdGhpcy5maW5kSW5zaWRlKHQpO2Vsc2UgaWYoZS5nZXRDb250ZW50KXRoaXMuZmluZEluc2lkZSh0KSxlLmdldENvbnRlbnQodCx0aGlzLnBhcnNlci5zY2hlbWEpLmZvckVhY2goKGZ1bmN0aW9uKHQpe3JldHVybiBzLmluc2VydE5vZGUodCl9KSk7ZWxzZXt2YXIgYz1lLmNvbnRlbnRFbGVtZW50OyJzdHJpbmciPT10eXBlb2YgYz9jPXQucXVlcnlTZWxlY3RvcihjKToiZnVuY3Rpb24iPT10eXBlb2YgYyYmKGM9Yyh0KSksY3x8KGM9dCksdGhpcy5maW5kQXJvdW5kKHQsYywhMCksdGhpcy5hZGRBbGwoYyxuKX1uJiYodGhpcy5zeW5jKGEpLHRoaXMub3Blbi0tKSxpJiZ0aGlzLnJlbW92ZVBlbmRpbmdNYXJrKGkpfSxidC5wcm90b3R5cGUuYWRkQWxsPWZ1bmN0aW9uKHQsZSxuLHIpe2Zvcih2YXIgbz10aGlzLGk9bnx8MCxzPW4/dC5jaGlsZE5vZGVzW25dOnQuZmlyc3RDaGlsZCxhPW51bGw9PXI/bnVsbDp0LmNoaWxkTm9kZXNbcl07cyE9YTtzPXMubmV4dFNpYmxpbmcsKytpKW8uZmluZEF0UG9pbnQodCxpKSxvLmFkZERPTShzKSxlJiZmdC5oYXNPd25Qcm9wZXJ0eShzLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCkpJiZvLnN5bmMoZSk7dGhpcy5maW5kQXRQb2ludCh0LGkpfSxidC5wcm90b3R5cGUuZmluZFBsYWNlPWZ1bmN0aW9uKHQpe2Zvcih2YXIgZSxuLHI9dGhpcyxvPXRoaXMub3BlbjtvPj0wO28tLSl7dmFyIGk9ci5ub2Rlc1tvXSxzPWkuZmluZFdyYXBwaW5nKHQpO2lmKHMmJighZXx8ZS5sZW5ndGg+cy5sZW5ndGgpJiYoZT1zLG49aSwhcy5sZW5ndGgpKWJyZWFrO2lmKGkuc29saWQpYnJlYWt9aWYoIWUpcmV0dXJuITE7dGhpcy5zeW5jKG4pO2Zvcih2YXIgYT0wO2E8ZS5sZW5ndGg7YSsrKXIuZW50ZXJJbm5lcihlW2FdLG51bGwsITEpO3JldHVybiEwfSxidC5wcm90b3R5cGUuaW5zZXJ0Tm9kZT1mdW5jdGlvbih0KXtpZih0LmlzSW5saW5lJiZ0aGlzLm5lZWRzQmxvY2smJiF0aGlzLnRvcC50eXBlKXt2YXIgZT10aGlzLnRleHRibG9ja0Zyb21Db250ZXh0KCk7ZSYmdGhpcy5lbnRlcklubmVyKGUpfWlmKHRoaXMuZmluZFBsYWNlKHQpKXt0aGlzLmNsb3NlRXh0cmEoKTt2YXIgbj10aGlzLnRvcDt0aGlzLmFwcGx5UGVuZGluZ01hcmtzKG4pLG4ubWF0Y2gmJihuLm1hdGNoPW4ubWF0Y2gubWF0Y2hUeXBlKHQudHlwZSkpO2Zvcih2YXIgcj1uLmFjdGl2ZU1hcmtzLG89MDtvPHQubWFya3MubGVuZ3RoO28rKyluLnR5cGUmJiFuLnR5cGUuYWxsb3dzTWFya1R5cGUodC5tYXJrc1tvXS50eXBlKXx8KHI9dC5tYXJrc1tvXS5hZGRUb1NldChyKSk7cmV0dXJuIG4uY29udGVudC5wdXNoKHQubWFyayhyKSksITB9cmV0dXJuITF9LGJ0LnByb3RvdHlwZS5hcHBseVBlbmRpbmdNYXJrcz1mdW5jdGlvbih0KXtmb3IodmFyIGU9dGhpcyxuPTA7bjx0aGlzLnBlbmRpbmdNYXJrcy5sZW5ndGg7bisrKXt2YXIgcj1lLnBlbmRpbmdNYXJrc1tuXTt0LnR5cGUmJiF0LnR5cGUuYWxsb3dzTWFya1R5cGUoci50eXBlKXx8ci5pc0luU2V0KHQuYWN0aXZlTWFya3MpfHwodC5hY3RpdmVNYXJrcz1yLmFkZFRvU2V0KHQuYWN0aXZlTWFya3MpLGUucGVuZGluZ01hcmtzLnNwbGljZShuLS0sMSkpfX0sYnQucHJvdG90eXBlLmVudGVyPWZ1bmN0aW9uKHQsZSxuKXt2YXIgcj10aGlzLmZpbmRQbGFjZSh0LmNyZWF0ZShlKSk7cmV0dXJuIHImJih0aGlzLmFwcGx5UGVuZGluZ01hcmtzKHRoaXMudG9wKSx0aGlzLmVudGVySW5uZXIodCxlLCEwLG4pKSxyfSxidC5wcm90b3R5cGUuZW50ZXJJbm5lcj1mdW5jdGlvbih0LGUsbixyKXt0aGlzLmNsb3NlRXh0cmEoKTt2YXIgbz10aGlzLnRvcDtvLm1hdGNoPW8ubWF0Y2gmJm8ubWF0Y2gubWF0Y2hUeXBlKHQsZSk7dmFyIGk9bnVsbD09cj9vLm9wdGlvbnMmfmd0Ond0KHIpO28ub3B0aW9ucyZndCYmMD09by5jb250ZW50Lmxlbmd0aCYmKGl8PWd0KSx0aGlzLm5vZGVzLnB1c2gobmV3IHh0KHQsZSxvLmFjdGl2ZU1hcmtzLG4sbnVsbCxpKSksdGhpcy5vcGVuKyt9LGJ0LnByb3RvdHlwZS5jbG9zZUV4dHJhPWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMsbj10aGlzLm5vZGVzLmxlbmd0aC0xO2lmKG4+dGhpcy5vcGVuKXtmb3IoO24+dGhpcy5vcGVuO24tLSllLm5vZGVzW24tMV0uY29udGVudC5wdXNoKGUubm9kZXNbbl0uZmluaXNoKHQpKTt0aGlzLm5vZGVzLmxlbmd0aD10aGlzLm9wZW4rMX19LGJ0LnByb3RvdHlwZS5maW5pc2g9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5vcGVuPTAsdGhpcy5jbG9zZUV4dHJhKHRoaXMuaXNPcGVuKSx0aGlzLm5vZGVzWzBdLmZpbmlzaCh0aGlzLmlzT3Blbnx8dGhpcy5vcHRpb25zLnRvcE9wZW4pfSxidC5wcm90b3R5cGUuc3luYz1mdW5jdGlvbih0KXtmb3IodmFyIGU9dGhpcyxuPXRoaXMub3BlbjtuPj0wO24tLSlpZihlLm5vZGVzW25dPT10KXJldHVybiB2b2lkKGUub3Blbj1uKX0sYnQucHJvdG90eXBlLmFkZFBlbmRpbmdNYXJrPWZ1bmN0aW9uKHQpe3RoaXMucGVuZGluZ01hcmtzLnB1c2godCl9LGJ0LnByb3RvdHlwZS5yZW1vdmVQZW5kaW5nTWFyaz1mdW5jdGlvbih0KXt2YXIgZT10aGlzLnBlbmRpbmdNYXJrcy5sYXN0SW5kZXhPZih0KTtpZihlPi0xKXRoaXMucGVuZGluZ01hcmtzLnNwbGljZShlLDEpO2Vsc2V7dmFyIG49dGhpcy50b3A7bi5hY3RpdmVNYXJrcz10LnJlbW92ZUZyb21TZXQobi5hY3RpdmVNYXJrcyl9fSxrdC5jdXJyZW50UG9zLmdldD1mdW5jdGlvbigpe3ZhciB0PXRoaXM7dGhpcy5jbG9zZUV4dHJhKCk7Zm9yKHZhciBlPTAsbj10aGlzLm9wZW47bj49MDtuLS0pe2Zvcih2YXIgcj10Lm5vZGVzW25dLmNvbnRlbnQsbz1yLmxlbmd0aC0xO28+PTA7by0tKWUrPXJbb10ubm9kZVNpemU7biYmZSsrfXJldHVybiBlfSxidC5wcm90b3R5cGUuZmluZEF0UG9pbnQ9ZnVuY3Rpb24odCxlKXt2YXIgbj10aGlzO2lmKHRoaXMuZmluZClmb3IodmFyIHI9MDtyPHRoaXMuZmluZC5sZW5ndGg7cisrKW4uZmluZFtyXS5ub2RlPT10JiZuLmZpbmRbcl0ub2Zmc2V0PT1lJiYobi5maW5kW3JdLnBvcz1uLmN1cnJlbnRQb3MpfSxidC5wcm90b3R5cGUuZmluZEluc2lkZT1mdW5jdGlvbih0KXt2YXIgZT10aGlzO2lmKHRoaXMuZmluZClmb3IodmFyIG49MDtuPHRoaXMuZmluZC5sZW5ndGg7bisrKW51bGw9PWUuZmluZFtuXS5wb3MmJjE9PXQubm9kZVR5cGUmJnQuY29udGFpbnMoZS5maW5kW25dLm5vZGUpJiYoZS5maW5kW25dLnBvcz1lLmN1cnJlbnRQb3MpfSxidC5wcm90b3R5cGUuZmluZEFyb3VuZD1mdW5jdGlvbih0LGUsbil7dmFyIHI9dGhpcztpZih0IT1lJiZ0aGlzLmZpbmQpZm9yKHZhciBvPTA7bzx0aGlzLmZpbmQubGVuZ3RoO28rKylpZihudWxsPT1yLmZpbmRbb10ucG9zJiYxPT10Lm5vZGVUeXBlJiZ0LmNvbnRhaW5zKHIuZmluZFtvXS5ub2RlKSl7dmFyIGk9ZS5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbihyLmZpbmRbb10ubm9kZSk7aSYobj8yOjQpJiYoci5maW5kW29dLnBvcz1yLmN1cnJlbnRQb3MpfX0sYnQucHJvdG90eXBlLmZpbmRJblRleHQ9ZnVuY3Rpb24odCl7dmFyIGU9dGhpcztpZih0aGlzLmZpbmQpZm9yKHZhciBuPTA7bjx0aGlzLmZpbmQubGVuZ3RoO24rKyllLmZpbmRbbl0ubm9kZT09dCYmKGUuZmluZFtuXS5wb3M9ZS5jdXJyZW50UG9zLSh0Lm5vZGVWYWx1ZS5sZW5ndGgtZS5maW5kW25dLm9mZnNldCkpfSxidC5wcm90b3R5cGUubWF0Y2hlc0NvbnRleHQ9ZnVuY3Rpb24odCl7dmFyIGU9dGhpcztpZih0LmluZGV4T2YoInwiKT4tMSlyZXR1cm4gdC5zcGxpdCgvXHMqXHxccyovKS5zb21lKHRoaXMubWF0Y2hlc0NvbnRleHQsdGhpcyk7dmFyIG49dC5zcGxpdCgiLyIpLHI9dGhpcy5vcHRpb25zLmNvbnRleHQsbz0hdGhpcy5pc09wZW4mJighcnx8ci5wYXJlbnQudHlwZT09dGhpcy5ub2Rlc1swXS50eXBlKSxpPS0ocj9yLmRlcHRoKzE6MCkrKG8/MDoxKSxzPWZ1bmN0aW9uKHQsYSl7Zm9yKDt0Pj0wO3QtLSl7dmFyIGM9blt0XTtpZigiIj09Yyl7aWYodD09bi5sZW5ndGgtMXx8MD09dCljb250aW51ZTtmb3IoO2E+PWk7YS0tKWlmKHModC0xLGEpKXJldHVybiEwO3JldHVybiExfXZhciBsPWE+MHx8MD09YSYmbz9lLm5vZGVzW2FdLnR5cGU6ciYmYT49aT9yLm5vZGUoYS1pKS50eXBlOm51bGw7aWYoIWx8fGwubmFtZSE9YyYmLTE9PWwuZ3JvdXBzLmluZGV4T2YoYykpcmV0dXJuITE7YS0tfXJldHVybiEwfTtyZXR1cm4gcyhuLmxlbmd0aC0xLHRoaXMub3Blbil9LGJ0LnByb3RvdHlwZS50ZXh0YmxvY2tGcm9tQ29udGV4dD1mdW5jdGlvbigpe3ZhciB0PXRoaXMsZT10aGlzLm9wdGlvbnMuY29udGV4dDtpZihlKWZvcih2YXIgbj1lLmRlcHRoO24+PTA7bi0tKXt2YXIgcj1lLm5vZGUobikuY29udGVudE1hdGNoQXQoZS5pbmRleEFmdGVyKG4pKS5kZWZhdWx0VHlwZTtpZihyJiZyLmlzVGV4dGJsb2NrJiZyLmRlZmF1bHRBdHRycylyZXR1cm4gcn1mb3IodmFyIG8gaW4gdC5wYXJzZXIuc2NoZW1hLm5vZGVzKXt2YXIgaT10LnBhcnNlci5zY2hlbWEubm9kZXNbb107aWYoaS5pc1RleHRibG9jayYmaS5kZWZhdWx0QXR0cnMpcmV0dXJuIGl9fSxPYmplY3QuZGVmaW5lUHJvcGVydGllcyhidC5wcm90b3R5cGUsa3QpO3ZhciBUdD1mdW5jdGlvbih0LGUpe3RoaXMubm9kZXM9dHx8e30sdGhpcy5tYXJrcz1lfHx7fX07ZnVuY3Rpb24gTnQodCl7dmFyIGU9e307Zm9yKHZhciBuIGluIHQpe3ZhciByPXRbbl0uc3BlYy50b0RPTTtyJiYoZVtuXT1yKX1yZXR1cm4gZX1mdW5jdGlvbiBFdCh0KXtyZXR1cm4gdC5kb2N1bWVudHx8d2luZG93LmRvY3VtZW50fVR0LnByb3RvdHlwZS5zZXJpYWxpemVGcmFnbWVudD1mdW5jdGlvbih0LGUsbil7dmFyIHI9dGhpczt2b2lkIDA9PT1lJiYoZT17fSksbnx8KG49RXQoZSkuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpKTt2YXIgbz1uLGk9bnVsbDtyZXR1cm4gdC5mb3JFYWNoKChmdW5jdGlvbih0KXtpZihpfHx0Lm1hcmtzLmxlbmd0aCl7aXx8KGk9W10pO3ZhciBuPTAscz0wO3doaWxlKG48aS5sZW5ndGgmJnM8dC5tYXJrcy5sZW5ndGgpe3ZhciBhPXQubWFya3Nbc107aWYoci5tYXJrc1thLnR5cGUubmFtZV0pe2lmKCFhLmVxKGlbbl0pfHwhMT09PWEudHlwZS5zcGVjLnNwYW5uaW5nKWJyZWFrO24rPTIscysrfWVsc2UgcysrfXdoaWxlKG48aS5sZW5ndGgpbz1pLnBvcCgpLGkucG9wKCk7d2hpbGUoczx0Lm1hcmtzLmxlbmd0aCl7dmFyIGM9dC5tYXJrc1tzKytdLGw9ci5zZXJpYWxpemVNYXJrKGMsdC5pc0lubGluZSxlKTtsJiYoaS5wdXNoKGMsbyksby5hcHBlbmRDaGlsZChsLmRvbSksbz1sLmNvbnRlbnRET018fGwuZG9tKX19by5hcHBlbmRDaGlsZChyLnNlcmlhbGl6ZU5vZGUodCxlKSl9KSksbn0sVHQucHJvdG90eXBlLnNlcmlhbGl6ZU5vZGU9ZnVuY3Rpb24odCxlKXt2b2lkIDA9PT1lJiYoZT17fSk7dmFyIG49VHQucmVuZGVyU3BlYyhFdChlKSx0aGlzLm5vZGVzW3QudHlwZS5uYW1lXSh0KSkscj1uLmRvbSxvPW4uY29udGVudERPTTtpZihvKXtpZih0LmlzTGVhZil0aHJvdyBuZXcgUmFuZ2VFcnJvcigiQ29udGVudCBob2xlIG5vdCBhbGxvd2VkIGluIGEgbGVhZiBub2RlIHNwZWMiKTtlLm9uQ29udGVudD9lLm9uQ29udGVudCh0LG8sZSk6dGhpcy5zZXJpYWxpemVGcmFnbWVudCh0LmNvbnRlbnQsZSxvKX1yZXR1cm4gcn0sVHQucHJvdG90eXBlLnNlcmlhbGl6ZU5vZGVBbmRNYXJrcz1mdW5jdGlvbih0LGUpe3ZhciBuPXRoaXM7dm9pZCAwPT09ZSYmKGU9e30pO2Zvcih2YXIgcj10aGlzLnNlcmlhbGl6ZU5vZGUodCxlKSxvPXQubWFya3MubGVuZ3RoLTE7bz49MDtvLS0pe3ZhciBpPW4uc2VyaWFsaXplTWFyayh0Lm1hcmtzW29dLHQuaXNJbmxpbmUsZSk7aSYmKChpLmNvbnRlbnRET018fGkuZG9tKS5hcHBlbmRDaGlsZChyKSxyPWkuZG9tKX1yZXR1cm4gcn0sVHQucHJvdG90eXBlLnNlcmlhbGl6ZU1hcms9ZnVuY3Rpb24odCxlLG4pe3ZvaWQgMD09PW4mJihuPXt9KTt2YXIgcj10aGlzLm1hcmtzW3QudHlwZS5uYW1lXTtyZXR1cm4gciYmVHQucmVuZGVyU3BlYyhFdChuKSxyKHQsZSkpfSxUdC5yZW5kZXJTcGVjPWZ1bmN0aW9uKHQsZSl7aWYoInN0cmluZyI9PXR5cGVvZiBlKXJldHVybntkb206dC5jcmVhdGVUZXh0Tm9kZShlKX07aWYobnVsbCE9ZS5ub2RlVHlwZSlyZXR1cm57ZG9tOmV9O3ZhciBuPXQuY3JlYXRlRWxlbWVudChlWzBdKSxyPW51bGwsbz1lWzFdLGk9MTtpZihvJiYib2JqZWN0Ij09dHlwZW9mIG8mJm51bGw9PW8ubm9kZVR5cGUmJiFBcnJheS5pc0FycmF5KG8pKWZvcih2YXIgcyBpbiBpPTIsbyludWxsIT1vW3NdJiZuLnNldEF0dHJpYnV0ZShzLG9bc10pO2Zvcih2YXIgYT1pO2E8ZS5sZW5ndGg7YSsrKXt2YXIgYz1lW2FdO2lmKDA9PT1jKXtpZihhPGUubGVuZ3RoLTF8fGE+aSl0aHJvdyBuZXcgUmFuZ2VFcnJvcigiQ29udGVudCBob2xlIG11c3QgYmUgdGhlIG9ubHkgY2hpbGQgb2YgaXRzIHBhcmVudCBub2RlIik7cmV0dXJue2RvbTpuLGNvbnRlbnRET006bn19dmFyIGw9VHQucmVuZGVyU3BlYyh0LGMpLHA9bC5kb20sdT1sLmNvbnRlbnRET007aWYobi5hcHBlbmRDaGlsZChwKSx1KXtpZihyKXRocm93IG5ldyBSYW5nZUVycm9yKCJNdWx0aXBsZSBjb250ZW50IGhvbGVzIik7cj11fX1yZXR1cm57ZG9tOm4sY29udGVudERPTTpyfX0sVHQuZnJvbVNjaGVtYT1mdW5jdGlvbih0KXtyZXR1cm4gdC5jYWNoZWQuZG9tU2VyaWFsaXplcnx8KHQuY2FjaGVkLmRvbVNlcmlhbGl6ZXI9bmV3IFR0KHRoaXMubm9kZXNGcm9tU2NoZW1hKHQpLHRoaXMubWFya3NGcm9tU2NoZW1hKHQpKSl9LFR0Lm5vZGVzRnJvbVNjaGVtYT1mdW5jdGlvbih0KXt2YXIgZT1OdCh0Lm5vZGVzKTtyZXR1cm4gZS50ZXh0fHwoZS50ZXh0PWZ1bmN0aW9uKHQpe3JldHVybiB0LnRleHR9KSxlfSxUdC5tYXJrc0Zyb21TY2hlbWE9ZnVuY3Rpb24odCl7cmV0dXJuIE50KHQubWFya3MpfSxlLk5vZGU9XyxlLlJlc29sdmVkUG9zPU4sZS5Ob2RlUmFuZ2U9eixlLkZyYWdtZW50PWEsZS5TbGljZT1kLGUuUmVwbGFjZUVycm9yPWYsZS5NYXJrPWgsZS5TY2hlbWE9cHQsZS5Ob2RlVHlwZT1pdCxlLk1hcmtUeXBlPWx0LGUuQ29udGVudE1hdGNoPSQsZS5ET01QYXJzZXI9aHQsZS5ET01TZXJpYWxpemVyPVR0fSxhMDY4OmZ1bmN0aW9uKHQsZSxuKXt9LGExNTk6ZnVuY3Rpb24odCxlLG4pe3ZhciByPW4oImU0YWUiKSxvPW4oIjdlOTAiKSxpPW4oIjE2OTEiKSxzPW4oIjU1NTkiKSgiSUVfUFJPVE8iKSxhPWZ1bmN0aW9uKCl7fSxjPSJwcm90b3R5cGUiLGw9ZnVuY3Rpb24oKXt2YXIgdCxlPW4oIjFlYzkiKSgiaWZyYW1lIikscj1pLmxlbmd0aCxvPSI8IixzPSI+IjtlLnN0eWxlLmRpc3BsYXk9Im5vbmUiLG4oIjMyZmMiKS5hcHBlbmRDaGlsZChlKSxlLnNyYz0iamF2YXNjcmlwdDoiLHQ9ZS5jb250ZW50V2luZG93LmRvY3VtZW50LHQub3BlbigpLHQud3JpdGUobysic2NyaXB0IitzKyJkb2N1bWVudC5GPU9iamVjdCIrbysiL3NjcmlwdCIrcyksdC5jbG9zZSgpLGw9dC5GO3doaWxlKHItLSlkZWxldGUgbFtjXVtpW3JdXTtyZXR1cm4gbCgpfTt0LmV4cG9ydHM9T2JqZWN0LmNyZWF0ZXx8ZnVuY3Rpb24odCxlKXt2YXIgbjtyZXR1cm4gbnVsbCE9PXQ/KGFbY109cih0KSxuPW5ldyBhLGFbY109bnVsbCxuW3NdPXQpOm49bCgpLHZvaWQgMD09PWU/bjpvKG4sZSl9fSxhNzBlOmZ1bmN0aW9uKHQsZSxuKXt2YXIgcixvOyhmdW5jdGlvbihuKXt2YXIgaT0ib2JqZWN0Ij09PXR5cGVvZiB3aW5kb3cmJndpbmRvd3x8Im9iamVjdCI9PT10eXBlb2Ygc2VsZiYmc2VsZjtlLm5vZGVUeXBlP2kmJihpLmhsanM9bih7fSkscj1bXSxvPWZ1bmN0aW9uKCl7cmV0dXJuIGkuaGxqc30uYXBwbHkoZSxyKSx2b2lkIDA9PT1vfHwodC5leHBvcnRzPW8pKTpuKGUpfSkoKGZ1bmN0aW9uKHQpe3ZhciBlLG49W10scj1PYmplY3Qua2V5cyxvPXt9LGk9e30scz0vXihuby0/aGlnaGxpZ2h0fHBsYWlufHRleHQpJC9pLGE9L1xibGFuZyg/OnVhZ2UpPy0oW1x3LV0rKVxiL2ksYz0vKCheKDxbXj5dKz58XHR8KSt8KD86XG4pKSkvZ20sbD0iPC9zcGFuPiIscD17Y2xhc3NQcmVmaXg6ImhsanMtIix0YWJSZXBsYWNlOm51bGwsdXNlQlI6ITEsbGFuZ3VhZ2VzOnZvaWQgMH07ZnVuY3Rpb24gdSh0KXtyZXR1cm4gdC5yZXBsYWNlKC8mL2csIiZhbXA7IikucmVwbGFjZSgvPC9nLCImbHQ7IikucmVwbGFjZSgvPi9nLCImZ3Q7Iil9ZnVuY3Rpb24gaCh0KXtyZXR1cm4gdC5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpfWZ1bmN0aW9uIGYodCxlKXt2YXIgbj10JiZ0LmV4ZWMoZSk7cmV0dXJuIG4mJjA9PT1uLmluZGV4fWZ1bmN0aW9uIGQodCl7cmV0dXJuIHMudGVzdCh0KX1mdW5jdGlvbiB2KHQpe3ZhciBlLG4scixvLGk9dC5jbGFzc05hbWUrIiAiO2lmKGkrPXQucGFyZW50Tm9kZT90LnBhcmVudE5vZGUuY2xhc3NOYW1lOiIiLG49YS5leGVjKGkpLG4pcmV0dXJuIEQoblsxXSk/blsxXToibm8taGlnaGxpZ2h0Ijtmb3IoaT1pLnNwbGl0KC9ccysvKSxlPTAscj1pLmxlbmd0aDtlPHI7ZSsrKWlmKG89aVtlXSxkKG8pfHxEKG8pKXJldHVybiBvfWZ1bmN0aW9uIG0odCl7dmFyIGUsbj17fSxyPUFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cywxKTtmb3IoZSBpbiB0KW5bZV09dFtlXTtyZXR1cm4gci5mb3JFYWNoKChmdW5jdGlvbih0KXtmb3IoZSBpbiB0KW5bZV09dFtlXX0pKSxufWZ1bmN0aW9uIHkodCl7dmFyIGU9W107cmV0dXJuIGZ1bmN0aW9uIHQobixyKXtmb3IodmFyIG89bi5maXJzdENoaWxkO287bz1vLm5leHRTaWJsaW5nKTM9PT1vLm5vZGVUeXBlP3IrPW8ubm9kZVZhbHVlLmxlbmd0aDoxPT09by5ub2RlVHlwZSYmKGUucHVzaCh7ZXZlbnQ6InN0YXJ0IixvZmZzZXQ6cixub2RlOm99KSxyPXQobyxyKSxoKG8pLm1hdGNoKC9icnxocnxpbWd8aW5wdXQvKXx8ZS5wdXNoKHtldmVudDoic3RvcCIsb2Zmc2V0OnIsbm9kZTpvfSkpO3JldHVybiByfSh0LDApLGV9ZnVuY3Rpb24gZyh0LGUscil7dmFyIG89MCxpPSIiLHM9W107ZnVuY3Rpb24gYSgpe3JldHVybiB0Lmxlbmd0aCYmZS5sZW5ndGg/dFswXS5vZmZzZXQhPT1lWzBdLm9mZnNldD90WzBdLm9mZnNldDxlWzBdLm9mZnNldD90OmU6InN0YXJ0Ij09PWVbMF0uZXZlbnQ/dDplOnQubGVuZ3RoP3Q6ZX1mdW5jdGlvbiBjKHQpe2Z1bmN0aW9uIGUodCl7cmV0dXJuIiAiK3Qubm9kZU5hbWUrJz0iJyt1KHQudmFsdWUpLnJlcGxhY2UoJyInLCImcXVvdDsiKSsnIid9aSs9IjwiK2godCkrbi5tYXAuY2FsbCh0LmF0dHJpYnV0ZXMsZSkuam9pbigiIikrIj4ifWZ1bmN0aW9uIGwodCl7aSs9IjwvIitoKHQpKyI+In1mdW5jdGlvbiBwKHQpeygic3RhcnQiPT09dC5ldmVudD9jOmwpKHQubm9kZSl9d2hpbGUodC5sZW5ndGh8fGUubGVuZ3RoKXt2YXIgZj1hKCk7aWYoaSs9dShyLnN1YnN0cmluZyhvLGZbMF0ub2Zmc2V0KSksbz1mWzBdLm9mZnNldCxmPT09dCl7cy5yZXZlcnNlKCkuZm9yRWFjaChsKTtkb3twKGYuc3BsaWNlKDAsMSlbMF0pLGY9YSgpfXdoaWxlKGY9PT10JiZmLmxlbmd0aCYmZlswXS5vZmZzZXQ9PT1vKTtzLnJldmVyc2UoKS5mb3JFYWNoKGMpfWVsc2Uic3RhcnQiPT09ZlswXS5ldmVudD9zLnB1c2goZlswXS5ub2RlKTpzLnBvcCgpLHAoZi5zcGxpY2UoMCwxKVswXSl9cmV0dXJuIGkrdShyLnN1YnN0cihvKSl9ZnVuY3Rpb24gdyh0KXtyZXR1cm4gdC52YXJpYW50cyYmIXQuY2FjaGVkX3ZhcmlhbnRzJiYodC5jYWNoZWRfdmFyaWFudHM9dC52YXJpYW50cy5tYXAoKGZ1bmN0aW9uKGUpe3JldHVybiBtKHQse3ZhcmlhbnRzOm51bGx9LGUpfSkpKSx0LmNhY2hlZF92YXJpYW50c3x8dC5lbmRzV2l0aFBhcmVudCYmW20odCldfHxbdF19ZnVuY3Rpb24geCh0KXtpZihlJiYhdC5sYW5nQXBpUmVzdG9yZWQpe2Zvcih2YXIgbiBpbiB0LmxhbmdBcGlSZXN0b3JlZD0hMCxlKXRbbl0mJih0W2Vbbl1dPXRbbl0pOyh0LmNvbnRhaW5zfHxbXSkuY29uY2F0KHQudmFyaWFudHN8fFtdKS5mb3JFYWNoKHgpfX1mdW5jdGlvbiBiKHQpe2Z1bmN0aW9uIGUodCl7cmV0dXJuIHQmJnQuc291cmNlfHx0fWZ1bmN0aW9uIG4obixyKXtyZXR1cm4gbmV3IFJlZ0V4cChlKG4pLCJtIisodC5jYXNlX2luc2Vuc2l0aXZlPyJpIjoiIikrKHI/ImciOiIiKSl9ZnVuY3Rpb24gbyh0LG4pe2Zvcih2YXIgcj0vXFsoPzpbXlxcXF1dfFxcLikqXF18XChcPz98XFwoWzEtOV1bMC05XSopfFxcLi8sbz0wLGk9IiIscz0wO3M8dC5sZW5ndGg7cysrKXt2YXIgYT1vLGM9ZSh0W3NdKTtzPjAmJihpKz1uKTt3aGlsZShjLmxlbmd0aD4wKXt2YXIgbD1yLmV4ZWMoYyk7aWYobnVsbD09bCl7aSs9YzticmVha31pKz1jLnN1YnN0cmluZygwLGwuaW5kZXgpLGM9Yy5zdWJzdHJpbmcobC5pbmRleCtsWzBdLmxlbmd0aCksIlxcIj09bFswXVswXSYmbFsxXT9pKz0iXFwiK1N0cmluZyhOdW1iZXIobFsxXSkrYSk6KGkrPWxbMF0sIigiPT1sWzBdJiZvKyspfX1yZXR1cm4gaX1mdW5jdGlvbiBpKHMsYSl7aWYoIXMuY29tcGlsZWQpe2lmKHMuY29tcGlsZWQ9ITAscy5rZXl3b3Jkcz1zLmtleXdvcmRzfHxzLmJlZ2luS2V5d29yZHMscy5rZXl3b3Jkcyl7dmFyIGM9e30sbD1mdW5jdGlvbihlLG4pe3QuY2FzZV9pbnNlbnNpdGl2ZSYmKG49bi50b0xvd2VyQ2FzZSgpKSxuLnNwbGl0KCIgIikuZm9yRWFjaCgoZnVuY3Rpb24odCl7dmFyIG49dC5zcGxpdCgifCIpO2NbblswXV09W2UsblsxXT9OdW1iZXIoblsxXSk6MV19KSl9OyJzdHJpbmciPT09dHlwZW9mIHMua2V5d29yZHM/bCgia2V5d29yZCIscy5rZXl3b3Jkcyk6cihzLmtleXdvcmRzKS5mb3JFYWNoKChmdW5jdGlvbih0KXtsKHQscy5rZXl3b3Jkc1t0XSl9KSkscy5rZXl3b3Jkcz1jfXMubGV4ZW1lc1JlPW4ocy5sZXhlbWVzfHwvXHcrLywhMCksYSYmKHMuYmVnaW5LZXl3b3JkcyYmKHMuYmVnaW49IlxcYigiK3MuYmVnaW5LZXl3b3Jkcy5zcGxpdCgiICIpLmpvaW4oInwiKSsiKVxcYiIpLHMuYmVnaW58fChzLmJlZ2luPS9cQnxcYi8pLHMuYmVnaW5SZT1uKHMuYmVnaW4pLHMuZW5kU2FtZUFzQmVnaW4mJihzLmVuZD1zLmJlZ2luKSxzLmVuZHx8cy5lbmRzV2l0aFBhcmVudHx8KHMuZW5kPS9cQnxcYi8pLHMuZW5kJiYocy5lbmRSZT1uKHMuZW5kKSkscy50ZXJtaW5hdG9yX2VuZD1lKHMuZW5kKXx8IiIscy5lbmRzV2l0aFBhcmVudCYmYS50ZXJtaW5hdG9yX2VuZCYmKHMudGVybWluYXRvcl9lbmQrPShzLmVuZD8ifCI6IiIpK2EudGVybWluYXRvcl9lbmQpKSxzLmlsbGVnYWwmJihzLmlsbGVnYWxSZT1uKHMuaWxsZWdhbCkpLG51bGw9PXMucmVsZXZhbmNlJiYocy5yZWxldmFuY2U9MSkscy5jb250YWluc3x8KHMuY29udGFpbnM9W10pLHMuY29udGFpbnM9QXJyYXkucHJvdG90eXBlLmNvbmNhdC5hcHBseShbXSxzLmNvbnRhaW5zLm1hcCgoZnVuY3Rpb24odCl7cmV0dXJuIHcoInNlbGYiPT09dD9zOnQpfSkpKSxzLmNvbnRhaW5zLmZvckVhY2goKGZ1bmN0aW9uKHQpe2kodCxzKX0pKSxzLnN0YXJ0cyYmaShzLnN0YXJ0cyxhKTt2YXIgcD1zLmNvbnRhaW5zLm1hcCgoZnVuY3Rpb24odCl7cmV0dXJuIHQuYmVnaW5LZXl3b3Jkcz8iXFwuPyg/OiIrdC5iZWdpbisiKVxcLj8iOnQuYmVnaW59KSkuY29uY2F0KFtzLnRlcm1pbmF0b3JfZW5kLHMuaWxsZWdhbF0pLm1hcChlKS5maWx0ZXIoQm9vbGVhbik7cy50ZXJtaW5hdG9ycz1wLmxlbmd0aD9uKG8ocCwifCIpLCEwKTp7ZXhlYzpmdW5jdGlvbigpe3JldHVybiBudWxsfX19fWkodCl9ZnVuY3Rpb24gayh0LGUsbixyKXtmdW5jdGlvbiBpKHQpe3JldHVybiBuZXcgUmVnRXhwKHQucmVwbGFjZSgvWy1cL1xcXiQqKz8uKCl8W1xde31dL2csIlxcJCYiKSwibSIpfWZ1bmN0aW9uIHModCxlKXt2YXIgbixyO2ZvcihuPTAscj1lLmNvbnRhaW5zLmxlbmd0aDtuPHI7bisrKWlmKGYoZS5jb250YWluc1tuXS5iZWdpblJlLHQpKXJldHVybiBlLmNvbnRhaW5zW25dLmVuZFNhbWVBc0JlZ2luJiYoZS5jb250YWluc1tuXS5lbmRSZT1pKGUuY29udGFpbnNbbl0uYmVnaW5SZS5leGVjKHQpWzBdKSksZS5jb250YWluc1tuXX1mdW5jdGlvbiBhKHQsZSl7aWYoZih0LmVuZFJlLGUpKXt3aGlsZSh0LmVuZHNQYXJlbnQmJnQucGFyZW50KXQ9dC5wYXJlbnQ7cmV0dXJuIHR9aWYodC5lbmRzV2l0aFBhcmVudClyZXR1cm4gYSh0LnBhcmVudCxlKX1mdW5jdGlvbiBjKHQsZSl7cmV0dXJuIW4mJmYoZS5pbGxlZ2FsUmUsdCl9ZnVuY3Rpb24gaCh0LGUpe3ZhciBuPXguY2FzZV9pbnNlbnNpdGl2ZT9lWzBdLnRvTG93ZXJDYXNlKCk6ZVswXTtyZXR1cm4gdC5rZXl3b3Jkcy5oYXNPd25Qcm9wZXJ0eShuKSYmdC5rZXl3b3Jkc1tuXX1mdW5jdGlvbiBkKHQsZSxuLHIpe3ZhciBvPXI/IiI6cC5jbGFzc1ByZWZpeCxpPSc8c3BhbiBjbGFzcz0iJytvLHM9bj8iIjpsO3JldHVybiBpKz10KyciPicsdD9pK2UrczplfWZ1bmN0aW9uIHYoKXt2YXIgdCxlLG4scjtpZighTy5rZXl3b3JkcylyZXR1cm4gdShOKTtyPSIiLGU9MCxPLmxleGVtZXNSZS5sYXN0SW5kZXg9MCxuPU8ubGV4ZW1lc1JlLmV4ZWMoTik7d2hpbGUobilyKz11KE4uc3Vic3RyaW5nKGUsbi5pbmRleCkpLHQ9aChPLG4pLHQ/KEUrPXRbMV0scis9ZCh0WzBdLHUoblswXSkpKTpyKz11KG5bMF0pLGU9Ty5sZXhlbWVzUmUubGFzdEluZGV4LG49Ty5sZXhlbWVzUmUuZXhlYyhOKTtyZXR1cm4gcit1KE4uc3Vic3RyKGUpKX1mdW5jdGlvbiBtKCl7dmFyIHQ9InN0cmluZyI9PT10eXBlb2YgTy5zdWJMYW5ndWFnZTtpZih0JiYhb1tPLnN1Ykxhbmd1YWdlXSlyZXR1cm4gdShOKTt2YXIgZT10P2soTy5zdWJMYW5ndWFnZSxOLCEwLE1bTy5zdWJMYW5ndWFnZV0pOlMoTixPLnN1Ykxhbmd1YWdlLmxlbmd0aD9PLnN1Ykxhbmd1YWdlOnZvaWQgMCk7cmV0dXJuIE8ucmVsZXZhbmNlPjAmJihFKz1lLnJlbGV2YW5jZSksdCYmKE1bTy5zdWJMYW5ndWFnZV09ZS50b3ApLGQoZS5sYW5ndWFnZSxlLnZhbHVlLCExLCEwKX1mdW5jdGlvbiB5KCl7VCs9bnVsbCE9Ty5zdWJMYW5ndWFnZT9tKCk6digpLE49IiJ9ZnVuY3Rpb24gZyh0KXtUKz10LmNsYXNzTmFtZT9kKHQuY2xhc3NOYW1lLCIiLCEwKToiIixPPU9iamVjdC5jcmVhdGUodCx7cGFyZW50Ont2YWx1ZTpPfX0pfWZ1bmN0aW9uIHcodCxlKXtpZihOKz10LG51bGw9PWUpcmV0dXJuIHkoKSwwO3ZhciBuPXMoZSxPKTtpZihuKXJldHVybiBuLnNraXA/Tis9ZToobi5leGNsdWRlQmVnaW4mJihOKz1lKSx5KCksbi5yZXR1cm5CZWdpbnx8bi5leGNsdWRlQmVnaW58fChOPWUpKSxnKG4sZSksbi5yZXR1cm5CZWdpbj8wOmUubGVuZ3RoO3ZhciByPWEoTyxlKTtpZihyKXt2YXIgbz1PO28uc2tpcD9OKz1lOihvLnJldHVybkVuZHx8by5leGNsdWRlRW5kfHwoTis9ZSkseSgpLG8uZXhjbHVkZUVuZCYmKE49ZSkpO2Rve08uY2xhc3NOYW1lJiYoVCs9bCksTy5za2lwfHxPLnN1Ykxhbmd1YWdlfHwoRSs9Ty5yZWxldmFuY2UpLE89Ty5wYXJlbnR9d2hpbGUoTyE9PXIucGFyZW50KTtyZXR1cm4gci5zdGFydHMmJihyLmVuZFNhbWVBc0JlZ2luJiYoci5zdGFydHMuZW5kUmU9ci5lbmRSZSksZyhyLnN0YXJ0cywiIikpLG8ucmV0dXJuRW5kPzA6ZS5sZW5ndGh9aWYoYyhlLE8pKXRocm93IG5ldyBFcnJvcignSWxsZWdhbCBsZXhlbWUgIicrZSsnIiBmb3IgbW9kZSAiJysoTy5jbGFzc05hbWV8fCI8dW5uYW1lZD4iKSsnIicpO3JldHVybiBOKz1lLGUubGVuZ3RofHwxfXZhciB4PUQodCk7aWYoIXgpdGhyb3cgbmV3IEVycm9yKCdVbmtub3duIGxhbmd1YWdlOiAiJyt0KyciJyk7Yih4KTt2YXIgQyxPPXJ8fHgsTT17fSxUPSIiO2ZvcihDPU87QyE9PXg7Qz1DLnBhcmVudClDLmNsYXNzTmFtZSYmKFQ9ZChDLmNsYXNzTmFtZSwiIiwhMCkrVCk7dmFyIE49IiIsRT0wO3RyeXt2YXIgQSxSLHo9MDt3aGlsZSgxKXtpZihPLnRlcm1pbmF0b3JzLmxhc3RJbmRleD16LEE9Ty50ZXJtaW5hdG9ycy5leGVjKGUpLCFBKWJyZWFrO1I9dyhlLnN1YnN0cmluZyh6LEEuaW5kZXgpLEFbMF0pLHo9QS5pbmRleCtSfWZvcih3KGUuc3Vic3RyKHopKSxDPU87Qy5wYXJlbnQ7Qz1DLnBhcmVudClDLmNsYXNzTmFtZSYmKFQrPWwpO3JldHVybntyZWxldmFuY2U6RSx2YWx1ZTpULGxhbmd1YWdlOnQsdG9wOk99fWNhdGNoKFApe2lmKFAubWVzc2FnZSYmLTEhPT1QLm1lc3NhZ2UuaW5kZXhPZigiSWxsZWdhbCIpKXJldHVybntyZWxldmFuY2U6MCx2YWx1ZTp1KGUpfTt0aHJvdyBQfX1mdW5jdGlvbiBTKHQsZSl7ZT1lfHxwLmxhbmd1YWdlc3x8cihvKTt2YXIgbj17cmVsZXZhbmNlOjAsdmFsdWU6dSh0KX0saT1uO3JldHVybiBlLmZpbHRlcihEKS5maWx0ZXIoeikuZm9yRWFjaCgoZnVuY3Rpb24oZSl7dmFyIHI9ayhlLHQsITEpO3IubGFuZ3VhZ2U9ZSxyLnJlbGV2YW5jZT5pLnJlbGV2YW5jZSYmKGk9ciksci5yZWxldmFuY2U+bi5yZWxldmFuY2UmJihpPW4sbj1yKX0pKSxpLmxhbmd1YWdlJiYobi5zZWNvbmRfYmVzdD1pKSxufWZ1bmN0aW9uIEModCl7cmV0dXJuIHAudGFiUmVwbGFjZXx8cC51c2VCUj90LnJlcGxhY2UoYywoZnVuY3Rpb24odCxlKXtyZXR1cm4gcC51c2VCUiYmIlxuIj09PXQ/Ijxicj4iOnAudGFiUmVwbGFjZT9lLnJlcGxhY2UoL1x0L2cscC50YWJSZXBsYWNlKToiIn0pKTp0fWZ1bmN0aW9uIE8odCxlLG4pe3ZhciByPWU/aVtlXTpuLG89W3QudHJpbSgpXTtyZXR1cm4gdC5tYXRjaCgvXGJobGpzXGIvKXx8by5wdXNoKCJobGpzIiksLTE9PT10LmluZGV4T2YocikmJm8ucHVzaChyKSxvLmpvaW4oIiAiKS50cmltKCl9ZnVuY3Rpb24gTSh0KXt2YXIgZSxuLHIsbyxpLHM9dih0KTtkKHMpfHwocC51c2VCUj8oZT1kb2N1bWVudC5jcmVhdGVFbGVtZW50TlMoImh0dHA6Ly93d3cudzMub3JnLzE5OTkveGh0bWwiLCJkaXYiKSxlLmlubmVySFRNTD10LmlubmVySFRNTC5yZXBsYWNlKC9cbi9nLCIiKS5yZXBsYWNlKC88YnJbIFwvXSo+L2csIlxuIikpOmU9dCxpPWUudGV4dENvbnRlbnQscj1zP2socyxpLCEwKTpTKGkpLG49eShlKSxuLmxlbmd0aCYmKG89ZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKCJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hodG1sIiwiZGl2Iiksby5pbm5lckhUTUw9ci52YWx1ZSxyLnZhbHVlPWcobix5KG8pLGkpKSxyLnZhbHVlPUMoci52YWx1ZSksdC5pbm5lckhUTUw9ci52YWx1ZSx0LmNsYXNzTmFtZT1PKHQuY2xhc3NOYW1lLHMsci5sYW5ndWFnZSksdC5yZXN1bHQ9e2xhbmd1YWdlOnIubGFuZ3VhZ2UscmU6ci5yZWxldmFuY2V9LHIuc2Vjb25kX2Jlc3QmJih0LnNlY29uZF9iZXN0PXtsYW5ndWFnZTpyLnNlY29uZF9iZXN0Lmxhbmd1YWdlLHJlOnIuc2Vjb25kX2Jlc3QucmVsZXZhbmNlfSkpfWZ1bmN0aW9uIFQodCl7cD1tKHAsdCl9ZnVuY3Rpb24gTigpe2lmKCFOLmNhbGxlZCl7Ti5jYWxsZWQ9ITA7dmFyIHQ9ZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgicHJlIGNvZGUiKTtuLmZvckVhY2guY2FsbCh0LE0pfX1mdW5jdGlvbiBFKCl7YWRkRXZlbnRMaXN0ZW5lcigiRE9NQ29udGVudExvYWRlZCIsTiwhMSksYWRkRXZlbnRMaXN0ZW5lcigibG9hZCIsTiwhMSl9ZnVuY3Rpb24gQShlLG4pe3ZhciByPW9bZV09bih0KTt4KHIpLHIuYWxpYXNlcyYmci5hbGlhc2VzLmZvckVhY2goKGZ1bmN0aW9uKHQpe2lbdF09ZX0pKX1mdW5jdGlvbiBSKCl7cmV0dXJuIHIobyl9ZnVuY3Rpb24gRCh0KXtyZXR1cm4gdD0odHx8IiIpLnRvTG93ZXJDYXNlKCksb1t0XXx8b1tpW3RdXX1mdW5jdGlvbiB6KHQpe3ZhciBlPUQodCk7cmV0dXJuIGUmJiFlLmRpc2FibGVBdXRvZGV0ZWN0fXJldHVybiB0LmhpZ2hsaWdodD1rLHQuaGlnaGxpZ2h0QXV0bz1TLHQuZml4TWFya3VwPUMsdC5oaWdobGlnaHRCbG9jaz1NLHQuY29uZmlndXJlPVQsdC5pbml0SGlnaGxpZ2h0aW5nPU4sdC5pbml0SGlnaGxpZ2h0aW5nT25Mb2FkPUUsdC5yZWdpc3Rlckxhbmd1YWdlPUEsdC5saXN0TGFuZ3VhZ2VzPVIsdC5nZXRMYW5ndWFnZT1ELHQuYXV0b0RldGVjdGlvbj16LHQuaW5oZXJpdD1tLHQuSURFTlRfUkU9IlthLXpBLVpdXFx3KiIsdC5VTkRFUlNDT1JFX0lERU5UX1JFPSJbYS16QS1aX11cXHcqIix0Lk5VTUJFUl9SRT0iXFxiXFxkKyhcXC5cXGQrKT8iLHQuQ19OVU1CRVJfUkU9IigtPykoXFxiMFt4WF1bYS1mQS1GMC05XSt8KFxcYlxcZCsoXFwuXFxkKik/fFxcLlxcZCspKFtlRV1bLStdP1xcZCspPykiLHQuQklOQVJZX05VTUJFUl9SRT0iXFxiKDBiWzAxXSspIix0LlJFX1NUQVJURVJTX1JFPSIhfCE9fCE9PXwlfCU9fCZ8JiZ8Jj18XFwqfFxcKj18XFwrfFxcKz18LHwtfC09fC89fC98Onw7fDw8fDw8PXw8PXw8fD09PXw9PXw9fD4+Pj18Pj49fD49fD4+Pnw+Pnw+fFxcP3xcXFt8XFx7fFxcKHxcXF58XFxePXxcXHx8XFx8PXxcXHxcXHx8fiIsdC5CQUNLU0xBU0hfRVNDQVBFPXtiZWdpbjoiXFxcXFtcXHNcXFNdIixyZWxldmFuY2U6MH0sdC5BUE9TX1NUUklOR19NT0RFPXtjbGFzc05hbWU6InN0cmluZyIsYmVnaW46IiciLGVuZDoiJyIsaWxsZWdhbDoiXFxuIixjb250YWluczpbdC5CQUNLU0xBU0hfRVNDQVBFXX0sdC5RVU9URV9TVFJJTkdfTU9ERT17Y2xhc3NOYW1lOiJzdHJpbmciLGJlZ2luOiciJyxlbmQ6JyInLGlsbGVnYWw6IlxcbiIsY29udGFpbnM6W3QuQkFDS1NMQVNIX0VTQ0FQRV19LHQuUEhSQVNBTF9XT1JEU19NT0RFPXtiZWdpbjovXGIoYXxhbnx0aGV8YXJlfEknbXxpc24ndHxkb24ndHxkb2Vzbid0fHdvbid0fGJ1dHxqdXN0fHNob3VsZHxwcmV0dHl8c2ltcGx5fGVub3VnaHxnb25uYXxnb2luZ3x3dGZ8c298c3VjaHx3aWxsfHlvdXx5b3VyfHRoZXl8bGlrZXxtb3JlKVxiL30sdC5DT01NRU5UPWZ1bmN0aW9uKGUsbixyKXt2YXIgbz10LmluaGVyaXQoe2NsYXNzTmFtZToiY29tbWVudCIsYmVnaW46ZSxlbmQ6bixjb250YWluczpbXX0scnx8e30pO3JldHVybiBvLmNvbnRhaW5zLnB1c2godC5QSFJBU0FMX1dPUkRTX01PREUpLG8uY29udGFpbnMucHVzaCh7Y2xhc3NOYW1lOiJkb2N0YWciLGJlZ2luOiIoPzpUT0RPfEZJWE1FfE5PVEV8QlVHfFhYWCk6IixyZWxldmFuY2U6MH0pLG99LHQuQ19MSU5FX0NPTU1FTlRfTU9ERT10LkNPTU1FTlQoIi8vIiwiJCIpLHQuQ19CTE9DS19DT01NRU5UX01PREU9dC5DT01NRU5UKCIvXFwqIiwiXFwqLyIpLHQuSEFTSF9DT01NRU5UX01PREU9dC5DT01NRU5UKCIjIiwiJCIpLHQuTlVNQkVSX01PREU9e2NsYXNzTmFtZToibnVtYmVyIixiZWdpbjp0Lk5VTUJFUl9SRSxyZWxldmFuY2U6MH0sdC5DX05VTUJFUl9NT0RFPXtjbGFzc05hbWU6Im51bWJlciIsYmVnaW46dC5DX05VTUJFUl9SRSxyZWxldmFuY2U6MH0sdC5CSU5BUllfTlVNQkVSX01PREU9e2NsYXNzTmFtZToibnVtYmVyIixiZWdpbjp0LkJJTkFSWV9OVU1CRVJfUkUscmVsZXZhbmNlOjB9LHQuQ1NTX05VTUJFUl9NT0RFPXtjbGFzc05hbWU6Im51bWJlciIsYmVnaW46dC5OVU1CRVJfUkUrIiglfGVtfGV4fGNofHJlbXx2d3x2aHx2bWlufHZtYXh8Y218bW18aW58cHR8cGN8cHh8ZGVnfGdyYWR8cmFkfHR1cm58c3xtc3xIenxrSHp8ZHBpfGRwY218ZHBweCk/IixyZWxldmFuY2U6MH0sdC5SRUdFWFBfTU9ERT17Y2xhc3NOYW1lOiJyZWdleHAiLGJlZ2luOi9cLy8sZW5kOi9cL1tnaW11eV0qLyxpbGxlZ2FsOi9cbi8sY29udGFpbnM6W3QuQkFDS1NMQVNIX0VTQ0FQRSx7YmVnaW46L1xbLyxlbmQ6L1xdLyxyZWxldmFuY2U6MCxjb250YWluczpbdC5CQUNLU0xBU0hfRVNDQVBFXX1dfSx0LlRJVExFX01PREU9e2NsYXNzTmFtZToidGl0bGUiLGJlZ2luOnQuSURFTlRfUkUscmVsZXZhbmNlOjB9LHQuVU5ERVJTQ09SRV9USVRMRV9NT0RFPXtjbGFzc05hbWU6InRpdGxlIixiZWdpbjp0LlVOREVSU0NPUkVfSURFTlRfUkUscmVsZXZhbmNlOjB9LHQuTUVUSE9EX0dVQVJEPXtiZWdpbjoiXFwuXFxzKiIrdC5VTkRFUlNDT1JFX0lERU5UX1JFLHJlbGV2YW5jZTowfSx0fSkpfSxhNzQ1OmZ1bmN0aW9uKHQsZSxuKXt0LmV4cG9ydHM9bigiZjQxMCIpfSxhODBlOmZ1bmN0aW9uKHQsZSxuKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gcih0KXtyZXR1cm4gdCYmIm9iamVjdCI9PT10eXBlb2YgdCYmImRlZmF1bHQiaW4gdD90WyJkZWZhdWx0Il06dH1PYmplY3QuZGVmaW5lUHJvcGVydHkoZSwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSk7dmFyIG89cihuKCJmYWExIikpO2Z1bmN0aW9uIGkodCxlLG4pe2Zvcih2YXIgcj0wOztyKyspe2lmKHI9PXQuY2hpbGRDb3VudHx8cj09ZS5jaGlsZENvdW50KXJldHVybiB0LmNoaWxkQ291bnQ9PWUuY2hpbGRDb3VudD9udWxsOm47dmFyIG89dC5jaGlsZChyKSxzPWUuY2hpbGQocik7aWYobyE9cyl7aWYoIW8uc2FtZU1hcmt1cChzKSlyZXR1cm4gbjtpZihvLmlzVGV4dCYmby50ZXh0IT1zLnRleHQpe2Zvcih2YXIgYT0wO28udGV4dFthXT09cy50ZXh0W2FdO2ErKyluKys7cmV0dXJuIG59aWYoby5jb250ZW50LnNpemV8fHMuY29udGVudC5zaXplKXt2YXIgYz1pKG8uY29udGVudCxzLmNvbnRlbnQsbisxKTtpZihudWxsIT1jKXJldHVybiBjfW4rPW8ubm9kZVNpemV9ZWxzZSBuKz1vLm5vZGVTaXplfX1mdW5jdGlvbiBzKHQsZSxuLHIpe2Zvcih2YXIgbz10LmNoaWxkQ291bnQsaT1lLmNoaWxkQ291bnQ7Oyl7aWYoMD09b3x8MD09aSlyZXR1cm4gbz09aT9udWxsOnthOm4sYjpyfTt2YXIgYT10LmNoaWxkKC0tbyksYz1lLmNoaWxkKC0taSksbD1hLm5vZGVTaXplO2lmKGEhPWMpe2lmKCFhLnNhbWVNYXJrdXAoYykpcmV0dXJue2E6bixiOnJ9O2lmKGEuaXNUZXh0JiZhLnRleHQhPWMudGV4dCl7dmFyIHA9MCx1PU1hdGgubWluKGEudGV4dC5sZW5ndGgsYy50ZXh0Lmxlbmd0aCk7d2hpbGUocDx1JiZhLnRleHRbYS50ZXh0Lmxlbmd0aC1wLTFdPT1jLnRleHRbYy50ZXh0Lmxlbmd0aC1wLTFdKXArKyxuLS0sci0tO3JldHVybnthOm4sYjpyfX1pZihhLmNvbnRlbnQuc2l6ZXx8Yy5jb250ZW50LnNpemUpe3ZhciBoPXMoYS5jb250ZW50LGMuY29udGVudCxuLTEsci0xKTtpZihoKXJldHVybiBofW4tPWwsci09bH1lbHNlIG4tPWwsci09bH19dmFyIGE9ZnVuY3Rpb24odCxlKXt2YXIgbj10aGlzO2lmKHRoaXMuY29udGVudD10LHRoaXMuc2l6ZT1lfHwwLG51bGw9PWUpZm9yKHZhciByPTA7cjx0Lmxlbmd0aDtyKyspbi5zaXplKz10W3JdLm5vZGVTaXplfSxjPXtmaXJzdENoaWxkOnt9LGxhc3RDaGlsZDp7fSxjaGlsZENvdW50Ont9fTthLnByb3RvdHlwZS5ub2Rlc0JldHdlZW49ZnVuY3Rpb24odCxlLG4scixvKXt2YXIgaT10aGlzO3ZvaWQgMD09PXImJihyPTApO2Zvcih2YXIgcz0wLGE9MDthPGU7cysrKXt2YXIgYz1pLmNvbnRlbnRbc10sbD1hK2Mubm9kZVNpemU7aWYobD50JiYhMSE9PW4oYyxyK2EsbyxzKSYmYy5jb250ZW50LnNpemUpe3ZhciBwPWErMTtjLm5vZGVzQmV0d2VlbihNYXRoLm1heCgwLHQtcCksTWF0aC5taW4oYy5jb250ZW50LnNpemUsZS1wKSxuLHIrcCl9YT1sfX0sYS5wcm90b3R5cGUuZGVzY2VuZGFudHM9ZnVuY3Rpb24odCl7dGhpcy5ub2Rlc0JldHdlZW4oMCx0aGlzLnNpemUsdCl9LGEucHJvdG90eXBlLnRleHRCZXR3ZWVuPWZ1bmN0aW9uKHQsZSxuLHIpe3ZhciBvPSIiLGk9ITA7cmV0dXJuIHRoaXMubm9kZXNCZXR3ZWVuKHQsZSwoZnVuY3Rpb24ocyxhKXtzLmlzVGV4dD8obys9cy50ZXh0LnNsaWNlKE1hdGgubWF4KHQsYSktYSxlLWEpLGk9IW4pOnMuaXNMZWFmJiZyPyhvKz1yLGk9IW4pOiFpJiZzLmlzQmxvY2smJihvKz1uLGk9ITApfSksMCksb30sYS5wcm90b3R5cGUuYXBwZW5kPWZ1bmN0aW9uKHQpe2lmKCF0LnNpemUpcmV0dXJuIHRoaXM7aWYoIXRoaXMuc2l6ZSlyZXR1cm4gdDt2YXIgZT10aGlzLmxhc3RDaGlsZCxuPXQuZmlyc3RDaGlsZCxyPXRoaXMuY29udGVudC5zbGljZSgpLG89MDtmb3IoZS5pc1RleHQmJmUuc2FtZU1hcmt1cChuKSYmKHJbci5sZW5ndGgtMV09ZS53aXRoVGV4dChlLnRleHQrbi50ZXh0KSxvPTEpO288dC5jb250ZW50Lmxlbmd0aDtvKyspci5wdXNoKHQuY29udGVudFtvXSk7cmV0dXJuIG5ldyBhKHIsdGhpcy5zaXplK3Quc2l6ZSl9LGEucHJvdG90eXBlLmN1dD1mdW5jdGlvbih0LGUpe3ZhciBuPXRoaXM7aWYobnVsbD09ZSYmKGU9dGhpcy5zaXplKSwwPT10JiZlPT10aGlzLnNpemUpcmV0dXJuIHRoaXM7dmFyIHI9W10sbz0wO2lmKGU+dClmb3IodmFyIGk9MCxzPTA7czxlO2krKyl7dmFyIGM9bi5jb250ZW50W2ldLGw9cytjLm5vZGVTaXplO2w+dCYmKChzPHR8fGw+ZSkmJihjPWMuaXNUZXh0P2MuY3V0KE1hdGgubWF4KDAsdC1zKSxNYXRoLm1pbihjLnRleHQubGVuZ3RoLGUtcykpOmMuY3V0KE1hdGgubWF4KDAsdC1zLTEpLE1hdGgubWluKGMuY29udGVudC5zaXplLGUtcy0xKSkpLHIucHVzaChjKSxvKz1jLm5vZGVTaXplKSxzPWx9cmV0dXJuIG5ldyBhKHIsbyl9LGEucHJvdG90eXBlLmN1dEJ5SW5kZXg9ZnVuY3Rpb24odCxlKXtyZXR1cm4gdD09ZT9hLmVtcHR5OjA9PXQmJmU9PXRoaXMuY29udGVudC5sZW5ndGg/dGhpczpuZXcgYSh0aGlzLmNvbnRlbnQuc2xpY2UodCxlKSl9LGEucHJvdG90eXBlLnJlcGxhY2VDaGlsZD1mdW5jdGlvbih0LGUpe3ZhciBuPXRoaXMuY29udGVudFt0XTtpZihuPT1lKXJldHVybiB0aGlzO3ZhciByPXRoaXMuY29udGVudC5zbGljZSgpLG89dGhpcy5zaXplK2Uubm9kZVNpemUtbi5ub2RlU2l6ZTtyZXR1cm4gclt0XT1lLG5ldyBhKHIsbyl9LGEucHJvdG90eXBlLmFkZFRvU3RhcnQ9ZnVuY3Rpb24odCl7cmV0dXJuIG5ldyBhKFt0XS5jb25jYXQodGhpcy5jb250ZW50KSx0aGlzLnNpemUrdC5ub2RlU2l6ZSl9LGEucHJvdG90eXBlLmFkZFRvRW5kPWZ1bmN0aW9uKHQpe3JldHVybiBuZXcgYSh0aGlzLmNvbnRlbnQuY29uY2F0KHQpLHRoaXMuc2l6ZSt0Lm5vZGVTaXplKX0sYS5wcm90b3R5cGUuZXE9ZnVuY3Rpb24odCl7dmFyIGU9dGhpcztpZih0aGlzLmNvbnRlbnQubGVuZ3RoIT10LmNvbnRlbnQubGVuZ3RoKXJldHVybiExO2Zvcih2YXIgbj0wO248dGhpcy5jb250ZW50Lmxlbmd0aDtuKyspaWYoIWUuY29udGVudFtuXS5lcSh0LmNvbnRlbnRbbl0pKXJldHVybiExO3JldHVybiEwfSxjLmZpcnN0Q2hpbGQuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY29udGVudC5sZW5ndGg/dGhpcy5jb250ZW50WzBdOm51bGx9LGMubGFzdENoaWxkLmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLmNvbnRlbnQubGVuZ3RoP3RoaXMuY29udGVudFt0aGlzLmNvbnRlbnQubGVuZ3RoLTFdOm51bGx9LGMuY2hpbGRDb3VudC5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jb250ZW50Lmxlbmd0aH0sYS5wcm90b3R5cGUuY2hpbGQ9ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5jb250ZW50W3RdO2lmKCFlKXRocm93IG5ldyBSYW5nZUVycm9yKCJJbmRleCAiK3QrIiBvdXQgb2YgcmFuZ2UgZm9yICIrdGhpcyk7cmV0dXJuIGV9LGEucHJvdG90eXBlLm1heWJlQ2hpbGQ9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuY29udGVudFt0XX0sYS5wcm90b3R5cGUuZm9yRWFjaD1mdW5jdGlvbih0KXtmb3IodmFyIGU9dGhpcyxuPTAscj0wO248dGhpcy5jb250ZW50Lmxlbmd0aDtuKyspe3ZhciBvPWUuY29udGVudFtuXTt0KG8scixuKSxyKz1vLm5vZGVTaXplfX0sYS5wcm90b3R5cGUuZmluZERpZmZTdGFydD1mdW5jdGlvbih0LGUpe3JldHVybiB2b2lkIDA9PT1lJiYoZT0wKSxpKHRoaXMsdCxlKX0sYS5wcm90b3R5cGUuZmluZERpZmZFbmQ9ZnVuY3Rpb24odCxlLG4pe3JldHVybiB2b2lkIDA9PT1lJiYoZT10aGlzLnNpemUpLHZvaWQgMD09PW4mJihuPXQuc2l6ZSkscyh0aGlzLHQsZSxuKX0sYS5wcm90b3R5cGUuZmluZEluZGV4PWZ1bmN0aW9uKHQsZSl7dmFyIG49dGhpcztpZih2b2lkIDA9PT1lJiYoZT0tMSksMD09dClyZXR1cm4gcCgwLHQpO2lmKHQ9PXRoaXMuc2l6ZSlyZXR1cm4gcCh0aGlzLmNvbnRlbnQubGVuZ3RoLHQpO2lmKHQ+dGhpcy5zaXplfHx0PDApdGhyb3cgbmV3IFJhbmdlRXJyb3IoIlBvc2l0aW9uICIrdCsiIG91dHNpZGUgb2YgZnJhZ21lbnQgKCIrdGhpcysiKSIpO2Zvcih2YXIgcj0wLG89MDs7cisrKXt2YXIgaT1uLmNoaWxkKHIpLHM9bytpLm5vZGVTaXplO2lmKHM+PXQpcmV0dXJuIHM9PXR8fGU+MD9wKHIrMSxzKTpwKHIsbyk7bz1zfX0sYS5wcm90b3R5cGUudG9TdHJpbmc9ZnVuY3Rpb24oKXtyZXR1cm4iPCIrdGhpcy50b1N0cmluZ0lubmVyKCkrIj4ifSxhLnByb3RvdHlwZS50b1N0cmluZ0lubmVyPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY29udGVudC5qb2luKCIsICIpfSxhLnByb3RvdHlwZS50b0pTT049ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jb250ZW50Lmxlbmd0aD90aGlzLmNvbnRlbnQubWFwKChmdW5jdGlvbih0KXtyZXR1cm4gdC50b0pTT04oKX0pKTpudWxsfSxhLmZyb21KU09OPWZ1bmN0aW9uKHQsZSl7aWYoIWUpcmV0dXJuIGEuZW1wdHk7aWYoIUFycmF5LmlzQXJyYXkoZSkpdGhyb3cgbmV3IFJhbmdlRXJyb3IoIkludmFsaWQgaW5wdXQgZm9yIEZyYWdtZW50LmZyb21KU09OIik7cmV0dXJuIG5ldyBhKGUubWFwKHQubm9kZUZyb21KU09OKSl9LGEuZnJvbUFycmF5PWZ1bmN0aW9uKHQpe2lmKCF0Lmxlbmd0aClyZXR1cm4gYS5lbXB0eTtmb3IodmFyIGUsbj0wLHI9MDtyPHQubGVuZ3RoO3IrKyl7dmFyIG89dFtyXTtuKz1vLm5vZGVTaXplLHImJm8uaXNUZXh0JiZ0W3ItMV0uc2FtZU1hcmt1cChvKT8oZXx8KGU9dC5zbGljZSgwLHIpKSxlW2UubGVuZ3RoLTFdPW8ud2l0aFRleHQoZVtlLmxlbmd0aC0xXS50ZXh0K28udGV4dCkpOmUmJmUucHVzaChvKX1yZXR1cm4gbmV3IGEoZXx8dCxuKX0sYS5mcm9tPWZ1bmN0aW9uKHQpe2lmKCF0KXJldHVybiBhLmVtcHR5O2lmKHQgaW5zdGFuY2VvZiBhKXJldHVybiB0O2lmKEFycmF5LmlzQXJyYXkodCkpcmV0dXJuIHRoaXMuZnJvbUFycmF5KHQpO2lmKHQuYXR0cnMpcmV0dXJuIG5ldyBhKFt0XSx0Lm5vZGVTaXplKTt0aHJvdyBuZXcgUmFuZ2VFcnJvcigiQ2FuIG5vdCBjb252ZXJ0ICIrdCsiIHRvIGEgRnJhZ21lbnQiKyh0Lm5vZGVzQmV0d2Vlbj8iIChsb29rcyBsaWtlIG11bHRpcGxlIHZlcnNpb25zIG9mIHByb3NlbWlycm9yLW1vZGVsIHdlcmUgbG9hZGVkKSI6IiIpKX0sT2JqZWN0LmRlZmluZVByb3BlcnRpZXMoYS5wcm90b3R5cGUsYyk7dmFyIGw9e2luZGV4OjAsb2Zmc2V0OjB9O2Z1bmN0aW9uIHAodCxlKXtyZXR1cm4gbC5pbmRleD10LGwub2Zmc2V0PWUsbH1mdW5jdGlvbiB1KHQsZSl7aWYodD09PWUpcmV0dXJuITA7aWYoIXR8fCJvYmplY3QiIT10eXBlb2YgdHx8IWV8fCJvYmplY3QiIT10eXBlb2YgZSlyZXR1cm4hMTt2YXIgbj1BcnJheS5pc0FycmF5KHQpO2lmKEFycmF5LmlzQXJyYXkoZSkhPW4pcmV0dXJuITE7aWYobil7aWYodC5sZW5ndGghPWUubGVuZ3RoKXJldHVybiExO2Zvcih2YXIgcj0wO3I8dC5sZW5ndGg7cisrKWlmKCF1KHRbcl0sZVtyXSkpcmV0dXJuITF9ZWxzZXtmb3IodmFyIG8gaW4gdClpZighKG8gaW4gZSl8fCF1KHRbb10sZVtvXSkpcmV0dXJuITE7Zm9yKHZhciBpIGluIGUpaWYoIShpIGluIHQpKXJldHVybiExfXJldHVybiEwfWEuZW1wdHk9bmV3IGEoW10sMCk7dmFyIGg9ZnVuY3Rpb24odCxlKXt0aGlzLnR5cGU9dCx0aGlzLmF0dHJzPWV9O2Z1bmN0aW9uIGYodCl7dmFyIGU9RXJyb3IuY2FsbCh0aGlzLHQpO3JldHVybiBlLl9fcHJvdG9fXz1mLnByb3RvdHlwZSxlfWgucHJvdG90eXBlLmFkZFRvU2V0PWZ1bmN0aW9uKHQpe2Zvcih2YXIgZSxuPXRoaXMscj0hMSxvPTA7bzx0Lmxlbmd0aDtvKyspe3ZhciBpPXRbb107aWYobi5lcShpKSlyZXR1cm4gdDtpZihuLnR5cGUuZXhjbHVkZXMoaS50eXBlKSllfHwoZT10LnNsaWNlKDAsbykpO2Vsc2V7aWYoaS50eXBlLmV4Y2x1ZGVzKG4udHlwZSkpcmV0dXJuIHQ7IXImJmkudHlwZS5yYW5rPm4udHlwZS5yYW5rJiYoZXx8KGU9dC5zbGljZSgwLG8pKSxlLnB1c2gobikscj0hMCksZSYmZS5wdXNoKGkpfX1yZXR1cm4gZXx8KGU9dC5zbGljZSgpKSxyfHxlLnB1c2godGhpcyksZX0saC5wcm90b3R5cGUucmVtb3ZlRnJvbVNldD1mdW5jdGlvbih0KXtmb3IodmFyIGU9dGhpcyxuPTA7bjx0Lmxlbmd0aDtuKyspaWYoZS5lcSh0W25dKSlyZXR1cm4gdC5zbGljZSgwLG4pLmNvbmNhdCh0LnNsaWNlKG4rMSkpO3JldHVybiB0fSxoLnByb3RvdHlwZS5pc0luU2V0PWZ1bmN0aW9uKHQpe2Zvcih2YXIgZT10aGlzLG49MDtuPHQubGVuZ3RoO24rKylpZihlLmVxKHRbbl0pKXJldHVybiEwO3JldHVybiExfSxoLnByb3RvdHlwZS5lcT1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcz09dHx8dGhpcy50eXBlPT10LnR5cGUmJnUodGhpcy5hdHRycyx0LmF0dHJzKX0saC5wcm90b3R5cGUudG9KU09OPWZ1bmN0aW9uKCl7dmFyIHQ9dGhpcyxlPXt0eXBlOnRoaXMudHlwZS5uYW1lfTtmb3IodmFyIG4gaW4gdC5hdHRycyl7ZS5hdHRycz10LmF0dHJzO2JyZWFrfXJldHVybiBlfSxoLmZyb21KU09OPWZ1bmN0aW9uKHQsZSl7aWYoIWUpdGhyb3cgbmV3IFJhbmdlRXJyb3IoIkludmFsaWQgaW5wdXQgZm9yIE1hcmsuZnJvbUpTT04iKTt2YXIgbj10Lm1hcmtzW2UudHlwZV07aWYoIW4pdGhyb3cgbmV3IFJhbmdlRXJyb3IoIlRoZXJlIGlzIG5vIG1hcmsgdHlwZSAiK2UudHlwZSsiIGluIHRoaXMgc2NoZW1hIik7cmV0dXJuIG4uY3JlYXRlKGUuYXR0cnMpfSxoLnNhbWVTZXQ9ZnVuY3Rpb24odCxlKXtpZih0PT1lKXJldHVybiEwO2lmKHQubGVuZ3RoIT1lLmxlbmd0aClyZXR1cm4hMTtmb3IodmFyIG49MDtuPHQubGVuZ3RoO24rKylpZighdFtuXS5lcShlW25dKSlyZXR1cm4hMTtyZXR1cm4hMH0saC5zZXRGcm9tPWZ1bmN0aW9uKHQpe2lmKCF0fHwwPT10Lmxlbmd0aClyZXR1cm4gaC5ub25lO2lmKHQgaW5zdGFuY2VvZiBoKXJldHVyblt0XTt2YXIgZT10LnNsaWNlKCk7cmV0dXJuIGUuc29ydCgoZnVuY3Rpb24odCxlKXtyZXR1cm4gdC50eXBlLnJhbmstZS50eXBlLnJhbmt9KSksZX0saC5ub25lPVtdLGYucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoRXJyb3IucHJvdG90eXBlKSxmLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1mLGYucHJvdG90eXBlLm5hbWU9IlJlcGxhY2VFcnJvciI7dmFyIGQ9ZnVuY3Rpb24odCxlLG4pe3RoaXMuY29udGVudD10LHRoaXMub3BlblN0YXJ0PWUsdGhpcy5vcGVuRW5kPW59LHY9e3NpemU6e319O2Z1bmN0aW9uIG0odCxlLG4pe3ZhciByPXQuZmluZEluZGV4KGUpLG89ci5pbmRleCxpPXIub2Zmc2V0LHM9dC5tYXliZUNoaWxkKG8pLGE9dC5maW5kSW5kZXgobiksYz1hLmluZGV4LGw9YS5vZmZzZXQ7aWYoaT09ZXx8cy5pc1RleHQpe2lmKGwhPW4mJiF0LmNoaWxkKGMpLmlzVGV4dCl0aHJvdyBuZXcgUmFuZ2VFcnJvcigiUmVtb3Zpbmcgbm9uLWZsYXQgcmFuZ2UiKTtyZXR1cm4gdC5jdXQoMCxlKS5hcHBlbmQodC5jdXQobikpfWlmKG8hPWMpdGhyb3cgbmV3IFJhbmdlRXJyb3IoIlJlbW92aW5nIG5vbi1mbGF0IHJhbmdlIik7cmV0dXJuIHQucmVwbGFjZUNoaWxkKG8scy5jb3B5KG0ocy5jb250ZW50LGUtaS0xLG4taS0xKSkpfWZ1bmN0aW9uIHkodCxlLG4scil7dmFyIG89dC5maW5kSW5kZXgoZSksaT1vLmluZGV4LHM9by5vZmZzZXQsYT10Lm1heWJlQ2hpbGQoaSk7aWYocz09ZXx8YS5pc1RleHQpcmV0dXJuIHImJiFyLmNhblJlcGxhY2UoaSxpLG4pP251bGw6dC5jdXQoMCxlKS5hcHBlbmQobikuYXBwZW5kKHQuY3V0KGUpKTt2YXIgYz15KGEuY29udGVudCxlLXMtMSxuKTtyZXR1cm4gYyYmdC5yZXBsYWNlQ2hpbGQoaSxhLmNvcHkoYykpfWZ1bmN0aW9uIGcodCxlLG4pe2lmKG4ub3BlblN0YXJ0PnQuZGVwdGgpdGhyb3cgbmV3IGYoIkluc2VydGVkIGNvbnRlbnQgZGVlcGVyIHRoYW4gaW5zZXJ0aW9uIHBvc2l0aW9uIik7aWYodC5kZXB0aC1uLm9wZW5TdGFydCE9ZS5kZXB0aC1uLm9wZW5FbmQpdGhyb3cgbmV3IGYoIkluY29uc2lzdGVudCBvcGVuIGRlcHRocyIpO3JldHVybiB3KHQsZSxuLDApfWZ1bmN0aW9uIHcodCxlLG4scil7dmFyIG89dC5pbmRleChyKSxpPXQubm9kZShyKTtpZihvPT1lLmluZGV4KHIpJiZyPHQuZGVwdGgtbi5vcGVuU3RhcnQpe3ZhciBzPXcodCxlLG4scisxKTtyZXR1cm4gaS5jb3B5KGkuY29udGVudC5yZXBsYWNlQ2hpbGQobyxzKSl9aWYobi5jb250ZW50LnNpemUpe2lmKG4ub3BlblN0YXJ0fHxuLm9wZW5FbmR8fHQuZGVwdGghPXJ8fGUuZGVwdGghPXIpe3ZhciBhPVQobix0KSxjPWEuc3RhcnQsbD1hLmVuZDtyZXR1cm4gQyhpLE8odCxjLGwsZSxyKSl9dmFyIHA9dC5wYXJlbnQsdT1wLmNvbnRlbnQ7cmV0dXJuIEMocCx1LmN1dCgwLHQucGFyZW50T2Zmc2V0KS5hcHBlbmQobi5jb250ZW50KS5hcHBlbmQodS5jdXQoZS5wYXJlbnRPZmZzZXQpKSl9cmV0dXJuIEMoaSxNKHQsZSxyKSl9ZnVuY3Rpb24geCh0LGUpe2lmKCFlLnR5cGUuY29tcGF0aWJsZUNvbnRlbnQodC50eXBlKSl0aHJvdyBuZXcgZigiQ2Fubm90IGpvaW4gIitlLnR5cGUubmFtZSsiIG9udG8gIit0LnR5cGUubmFtZSl9ZnVuY3Rpb24gYih0LGUsbil7dmFyIHI9dC5ub2RlKG4pO3JldHVybiB4KHIsZS5ub2RlKG4pKSxyfWZ1bmN0aW9uIGsodCxlKXt2YXIgbj1lLmxlbmd0aC0xO24+PTAmJnQuaXNUZXh0JiZ0LnNhbWVNYXJrdXAoZVtuXSk/ZVtuXT10LndpdGhUZXh0KGVbbl0udGV4dCt0LnRleHQpOmUucHVzaCh0KX1mdW5jdGlvbiBTKHQsZSxuLHIpe3ZhciBvPShlfHx0KS5ub2RlKG4pLGk9MCxzPWU/ZS5pbmRleChuKTpvLmNoaWxkQ291bnQ7dCYmKGk9dC5pbmRleChuKSx0LmRlcHRoPm4/aSsrOnQudGV4dE9mZnNldCYmKGsodC5ub2RlQWZ0ZXIsciksaSsrKSk7Zm9yKHZhciBhPWk7YTxzO2ErKylrKG8uY2hpbGQoYSkscik7ZSYmZS5kZXB0aD09biYmZS50ZXh0T2Zmc2V0JiZrKGUubm9kZUJlZm9yZSxyKX1mdW5jdGlvbiBDKHQsZSl7aWYoIXQudHlwZS52YWxpZENvbnRlbnQoZSkpdGhyb3cgbmV3IGYoIkludmFsaWQgY29udGVudCBmb3Igbm9kZSAiK3QudHlwZS5uYW1lKTtyZXR1cm4gdC5jb3B5KGUpfWZ1bmN0aW9uIE8odCxlLG4scixvKXt2YXIgaT10LmRlcHRoPm8mJmIodCxlLG8rMSkscz1yLmRlcHRoPm8mJmIobixyLG8rMSksYz1bXTtyZXR1cm4gUyhudWxsLHQsbyxjKSxpJiZzJiZlLmluZGV4KG8pPT1uLmluZGV4KG8pPyh4KGkscyksayhDKGksTyh0LGUsbixyLG8rMSkpLGMpKTooaSYmayhDKGksTSh0LGUsbysxKSksYyksUyhlLG4sbyxjKSxzJiZrKEMocyxNKG4scixvKzEpKSxjKSksUyhyLG51bGwsbyxjKSxuZXcgYShjKX1mdW5jdGlvbiBNKHQsZSxuKXt2YXIgcj1bXTtpZihTKG51bGwsdCxuLHIpLHQuZGVwdGg+bil7dmFyIG89Yih0LGUsbisxKTtrKEMobyxNKHQsZSxuKzEpKSxyKX1yZXR1cm4gUyhlLG51bGwsbixyKSxuZXcgYShyKX1mdW5jdGlvbiBUKHQsZSl7Zm9yKHZhciBuPWUuZGVwdGgtdC5vcGVuU3RhcnQscj1lLm5vZGUobiksbz1yLmNvcHkodC5jb250ZW50KSxpPW4tMTtpPj0wO2ktLSlvPWUubm9kZShpKS5jb3B5KGEuZnJvbShvKSk7cmV0dXJue3N0YXJ0Om8ucmVzb2x2ZU5vQ2FjaGUodC5vcGVuU3RhcnQrbiksZW5kOm8ucmVzb2x2ZU5vQ2FjaGUoby5jb250ZW50LnNpemUtdC5vcGVuRW5kLW4pfX12LnNpemUuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY29udGVudC5zaXplLXRoaXMub3BlblN0YXJ0LXRoaXMub3BlbkVuZH0sZC5wcm90b3R5cGUuaW5zZXJ0QXQ9ZnVuY3Rpb24odCxlKXt2YXIgbj15KHRoaXMuY29udGVudCx0K3RoaXMub3BlblN0YXJ0LGUsbnVsbCk7cmV0dXJuIG4mJm5ldyBkKG4sdGhpcy5vcGVuU3RhcnQsdGhpcy5vcGVuRW5kKX0sZC5wcm90b3R5cGUucmVtb3ZlQmV0d2Vlbj1mdW5jdGlvbih0LGUpe3JldHVybiBuZXcgZChtKHRoaXMuY29udGVudCx0K3RoaXMub3BlblN0YXJ0LGUrdGhpcy5vcGVuU3RhcnQpLHRoaXMub3BlblN0YXJ0LHRoaXMub3BlbkVuZCl9LGQucHJvdG90eXBlLmVxPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLmNvbnRlbnQuZXEodC5jb250ZW50KSYmdGhpcy5vcGVuU3RhcnQ9PXQub3BlblN0YXJ0JiZ0aGlzLm9wZW5FbmQ9PXQub3BlbkVuZH0sZC5wcm90b3R5cGUudG9TdHJpbmc9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jb250ZW50KyIoIit0aGlzLm9wZW5TdGFydCsiLCIrdGhpcy5vcGVuRW5kKyIpIn0sZC5wcm90b3R5cGUudG9KU09OPWZ1bmN0aW9uKCl7aWYoIXRoaXMuY29udGVudC5zaXplKXJldHVybiBudWxsO3ZhciB0PXtjb250ZW50OnRoaXMuY29udGVudC50b0pTT04oKX07cmV0dXJuIHRoaXMub3BlblN0YXJ0PjAmJih0Lm9wZW5TdGFydD10aGlzLm9wZW5TdGFydCksdGhpcy5vcGVuRW5kPjAmJih0Lm9wZW5FbmQ9dGhpcy5vcGVuRW5kKSx0fSxkLmZyb21KU09OPWZ1bmN0aW9uKHQsZSl7aWYoIWUpcmV0dXJuIGQuZW1wdHk7dmFyIG49ZS5vcGVuU3RhcnR8fDAscj1lLm9wZW5FbmR8fDA7aWYoIm51bWJlciIhPXR5cGVvZiBufHwibnVtYmVyIiE9dHlwZW9mIHIpdGhyb3cgbmV3IFJhbmdlRXJyb3IoIkludmFsaWQgaW5wdXQgZm9yIFNsaWNlLmZyb21KU09OIik7cmV0dXJuIG5ldyBkKGEuZnJvbUpTT04odCxlLmNvbnRlbnQpLGUub3BlblN0YXJ0fHwwLGUub3BlbkVuZHx8MCl9LGQubWF4T3Blbj1mdW5jdGlvbih0LGUpe3ZvaWQgMD09PWUmJihlPSEwKTtmb3IodmFyIG49MCxyPTAsbz10LmZpcnN0Q2hpbGQ7byYmIW8uaXNMZWFmJiYoZXx8IW8udHlwZS5zcGVjLmlzb2xhdGluZyk7bz1vLmZpcnN0Q2hpbGQpbisrO2Zvcih2YXIgaT10Lmxhc3RDaGlsZDtpJiYhaS5pc0xlYWYmJihlfHwhaS50eXBlLnNwZWMuaXNvbGF0aW5nKTtpPWkubGFzdENoaWxkKXIrKztyZXR1cm4gbmV3IGQodCxuLHIpfSxPYmplY3QuZGVmaW5lUHJvcGVydGllcyhkLnByb3RvdHlwZSx2KSxkLmVtcHR5PW5ldyBkKGEuZW1wdHksMCwwKTt2YXIgTj1mdW5jdGlvbih0LGUsbil7dGhpcy5wb3M9dCx0aGlzLnBhdGg9ZSx0aGlzLmRlcHRoPWUubGVuZ3RoLzMtMSx0aGlzLnBhcmVudE9mZnNldD1ufSxFPXtwYXJlbnQ6e30sZG9jOnt9LHRleHRPZmZzZXQ6e30sbm9kZUFmdGVyOnt9LG5vZGVCZWZvcmU6e319O04ucHJvdG90eXBlLnJlc29sdmVEZXB0aD1mdW5jdGlvbih0KXtyZXR1cm4gbnVsbD09dD90aGlzLmRlcHRoOnQ8MD90aGlzLmRlcHRoK3Q6dH0sRS5wYXJlbnQuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubm9kZSh0aGlzLmRlcHRoKX0sRS5kb2MuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubm9kZSgwKX0sTi5wcm90b3R5cGUubm9kZT1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5wYXRoWzMqdGhpcy5yZXNvbHZlRGVwdGgodCldfSxOLnByb3RvdHlwZS5pbmRleD1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5wYXRoWzMqdGhpcy5yZXNvbHZlRGVwdGgodCkrMV19LE4ucHJvdG90eXBlLmluZGV4QWZ0ZXI9ZnVuY3Rpb24odCl7cmV0dXJuIHQ9dGhpcy5yZXNvbHZlRGVwdGgodCksdGhpcy5pbmRleCh0KSsodCE9dGhpcy5kZXB0aHx8dGhpcy50ZXh0T2Zmc2V0PzE6MCl9LE4ucHJvdG90eXBlLnN0YXJ0PWZ1bmN0aW9uKHQpe3JldHVybiB0PXRoaXMucmVzb2x2ZURlcHRoKHQpLDA9PXQ/MDp0aGlzLnBhdGhbMyp0LTFdKzF9LE4ucHJvdG90eXBlLmVuZD1mdW5jdGlvbih0KXtyZXR1cm4gdD10aGlzLnJlc29sdmVEZXB0aCh0KSx0aGlzLnN0YXJ0KHQpK3RoaXMubm9kZSh0KS5jb250ZW50LnNpemV9LE4ucHJvdG90eXBlLmJlZm9yZT1mdW5jdGlvbih0KXtpZih0PXRoaXMucmVzb2x2ZURlcHRoKHQpLCF0KXRocm93IG5ldyBSYW5nZUVycm9yKCJUaGVyZSBpcyBubyBwb3NpdGlvbiBiZWZvcmUgdGhlIHRvcC1sZXZlbCBub2RlIik7cmV0dXJuIHQ9PXRoaXMuZGVwdGgrMT90aGlzLnBvczp0aGlzLnBhdGhbMyp0LTFdfSxOLnByb3RvdHlwZS5hZnRlcj1mdW5jdGlvbih0KXtpZih0PXRoaXMucmVzb2x2ZURlcHRoKHQpLCF0KXRocm93IG5ldyBSYW5nZUVycm9yKCJUaGVyZSBpcyBubyBwb3NpdGlvbiBhZnRlciB0aGUgdG9wLWxldmVsIG5vZGUiKTtyZXR1cm4gdD09dGhpcy5kZXB0aCsxP3RoaXMucG9zOnRoaXMucGF0aFszKnQtMV0rdGhpcy5wYXRoWzMqdF0ubm9kZVNpemV9LEUudGV4dE9mZnNldC5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5wb3MtdGhpcy5wYXRoW3RoaXMucGF0aC5sZW5ndGgtMV19LEUubm9kZUFmdGVyLmdldD1mdW5jdGlvbigpe3ZhciB0PXRoaXMucGFyZW50LGU9dGhpcy5pbmRleCh0aGlzLmRlcHRoKTtpZihlPT10LmNoaWxkQ291bnQpcmV0dXJuIG51bGw7dmFyIG49dGhpcy5wb3MtdGhpcy5wYXRoW3RoaXMucGF0aC5sZW5ndGgtMV0scj10LmNoaWxkKGUpO3JldHVybiBuP3QuY2hpbGQoZSkuY3V0KG4pOnJ9LEUubm9kZUJlZm9yZS5nZXQ9ZnVuY3Rpb24oKXt2YXIgdD10aGlzLmluZGV4KHRoaXMuZGVwdGgpLGU9dGhpcy5wb3MtdGhpcy5wYXRoW3RoaXMucGF0aC5sZW5ndGgtMV07cmV0dXJuIGU/dGhpcy5wYXJlbnQuY2hpbGQodCkuY3V0KDAsZSk6MD09dD9udWxsOnRoaXMucGFyZW50LmNoaWxkKHQtMSl9LE4ucHJvdG90eXBlLm1hcmtzPWZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5wYXJlbnQsZT10aGlzLmluZGV4KCk7aWYoMD09dC5jb250ZW50LnNpemUpcmV0dXJuIGgubm9uZTtpZih0aGlzLnRleHRPZmZzZXQpcmV0dXJuIHQuY2hpbGQoZSkubWFya3M7dmFyIG49dC5tYXliZUNoaWxkKGUtMSkscj10Lm1heWJlQ2hpbGQoZSk7aWYoIW4pe3ZhciBvPW47bj1yLHI9b31mb3IodmFyIGk9bi5tYXJrcyxzPTA7czxpLmxlbmd0aDtzKyspITEhPT1pW3NdLnR5cGUuc3BlYy5pbmNsdXNpdmV8fHImJmlbc10uaXNJblNldChyLm1hcmtzKXx8KGk9aVtzLS1dLnJlbW92ZUZyb21TZXQoaSkpO3JldHVybiBpfSxOLnByb3RvdHlwZS5tYXJrc0Fjcm9zcz1mdW5jdGlvbih0KXt2YXIgZT10aGlzLnBhcmVudC5tYXliZUNoaWxkKHRoaXMuaW5kZXgoKSk7aWYoIWV8fCFlLmlzSW5saW5lKXJldHVybiBudWxsO2Zvcih2YXIgbj1lLm1hcmtzLHI9dC5wYXJlbnQubWF5YmVDaGlsZCh0LmluZGV4KCkpLG89MDtvPG4ubGVuZ3RoO28rKykhMSE9PW5bb10udHlwZS5zcGVjLmluY2x1c2l2ZXx8ciYmbltvXS5pc0luU2V0KHIubWFya3MpfHwobj1uW28tLV0ucmVtb3ZlRnJvbVNldChuKSk7cmV0dXJuIG59LE4ucHJvdG90eXBlLnNoYXJlZERlcHRoPWZ1bmN0aW9uKHQpe2Zvcih2YXIgZT10aGlzLG49dGhpcy5kZXB0aDtuPjA7bi0tKWlmKGUuc3RhcnQobik8PXQmJmUuZW5kKG4pPj10KXJldHVybiBuO3JldHVybiAwfSxOLnByb3RvdHlwZS5ibG9ja1JhbmdlPWZ1bmN0aW9uKHQsZSl7dmFyIG49dGhpcztpZih2b2lkIDA9PT10JiYodD10aGlzKSx0LnBvczx0aGlzLnBvcylyZXR1cm4gdC5ibG9ja1JhbmdlKHRoaXMpO2Zvcih2YXIgcj10aGlzLmRlcHRoLSh0aGlzLnBhcmVudC5pbmxpbmVDb250ZW50fHx0aGlzLnBvcz09dC5wb3M/MTowKTtyPj0wO3ItLSlpZih0LnBvczw9bi5lbmQocikmJighZXx8ZShuLm5vZGUocikpKSlyZXR1cm4gbmV3IHoobix0LHIpfSxOLnByb3RvdHlwZS5zYW1lUGFyZW50PWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLnBvcy10aGlzLnBhcmVudE9mZnNldD09dC5wb3MtdC5wYXJlbnRPZmZzZXR9LE4ucHJvdG90eXBlLm1heD1mdW5jdGlvbih0KXtyZXR1cm4gdC5wb3M+dGhpcy5wb3M/dDp0aGlzfSxOLnByb3RvdHlwZS5taW49ZnVuY3Rpb24odCl7cmV0dXJuIHQucG9zPHRoaXMucG9zP3Q6dGhpc30sTi5wcm90b3R5cGUudG9TdHJpbmc9ZnVuY3Rpb24oKXtmb3IodmFyIHQ9dGhpcyxlPSIiLG49MTtuPD10aGlzLmRlcHRoO24rKyllKz0oZT8iLyI6IiIpK3Qubm9kZShuKS50eXBlLm5hbWUrIl8iK3QuaW5kZXgobi0xKTtyZXR1cm4gZSsiOiIrdGhpcy5wYXJlbnRPZmZzZXR9LE4ucmVzb2x2ZT1mdW5jdGlvbih0LGUpe2lmKCEoZT49MCYmZTw9dC5jb250ZW50LnNpemUpKXRocm93IG5ldyBSYW5nZUVycm9yKCJQb3NpdGlvbiAiK2UrIiBvdXQgb2YgcmFuZ2UiKTtmb3IodmFyIG49W10scj0wLG89ZSxpPXQ7Oyl7dmFyIHM9aS5jb250ZW50LmZpbmRJbmRleChvKSxhPXMuaW5kZXgsYz1zLm9mZnNldCxsPW8tYztpZihuLnB1c2goaSxhLHIrYyksIWwpYnJlYWs7aWYoaT1pLmNoaWxkKGEpLGkuaXNUZXh0KWJyZWFrO289bC0xLHIrPWMrMX1yZXR1cm4gbmV3IE4oZSxuLG8pfSxOLnJlc29sdmVDYWNoZWQ9ZnVuY3Rpb24odCxlKXtmb3IodmFyIG49MDtuPEEubGVuZ3RoO24rKyl7dmFyIHI9QVtuXTtpZihyLnBvcz09ZSYmci5kb2M9PXQpcmV0dXJuIHJ9dmFyIG89QVtSXT1OLnJlc29sdmUodCxlKTtyZXR1cm4gUj0oUisxKSVELG99LE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKE4ucHJvdG90eXBlLEUpO3ZhciBBPVtdLFI9MCxEPTEyLHo9ZnVuY3Rpb24odCxlLG4pe3RoaXMuJGZyb209dCx0aGlzLiR0bz1lLHRoaXMuZGVwdGg9bn0sUD17c3RhcnQ6e30sZW5kOnt9LHBhcmVudDp7fSxzdGFydEluZGV4Ont9LGVuZEluZGV4Ont9fTtQLnN0YXJ0LmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLiRmcm9tLmJlZm9yZSh0aGlzLmRlcHRoKzEpfSxQLmVuZC5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy4kdG8uYWZ0ZXIodGhpcy5kZXB0aCsxKX0sUC5wYXJlbnQuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuJGZyb20ubm9kZSh0aGlzLmRlcHRoKX0sUC5zdGFydEluZGV4LmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLiRmcm9tLmluZGV4KHRoaXMuZGVwdGgpfSxQLmVuZEluZGV4LmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLiR0by5pbmRleEFmdGVyKHRoaXMuZGVwdGgpfSxPYmplY3QuZGVmaW5lUHJvcGVydGllcyh6LnByb3RvdHlwZSxQKTt2YXIgST1PYmplY3QuY3JlYXRlKG51bGwpLF89ZnVuY3Rpb24odCxlLG4scil7dGhpcy50eXBlPXQsdGhpcy5hdHRycz1lLHRoaXMuY29udGVudD1ufHxhLmVtcHR5LHRoaXMubWFya3M9cnx8aC5ub25lfSxGPXtub2RlU2l6ZTp7fSxjaGlsZENvdW50Ont9LHRleHRDb250ZW50Ont9LGZpcnN0Q2hpbGQ6e30sbGFzdENoaWxkOnt9LGlzQmxvY2s6e30saXNUZXh0YmxvY2s6e30saW5saW5lQ29udGVudDp7fSxpc0lubGluZTp7fSxpc1RleHQ6e30saXNMZWFmOnt9LGlzQXRvbTp7fX07Ri5ub2RlU2l6ZS5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5pc0xlYWY/MToyK3RoaXMuY29udGVudC5zaXplfSxGLmNoaWxkQ291bnQuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY29udGVudC5jaGlsZENvdW50fSxfLnByb3RvdHlwZS5jaGlsZD1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5jb250ZW50LmNoaWxkKHQpfSxfLnByb3RvdHlwZS5tYXliZUNoaWxkPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLmNvbnRlbnQubWF5YmVDaGlsZCh0KX0sXy5wcm90b3R5cGUuZm9yRWFjaD1mdW5jdGlvbih0KXt0aGlzLmNvbnRlbnQuZm9yRWFjaCh0KX0sXy5wcm90b3R5cGUubm9kZXNCZXR3ZWVuPWZ1bmN0aW9uKHQsZSxuLHIpe3ZvaWQgMD09PXImJihyPTApLHRoaXMuY29udGVudC5ub2Rlc0JldHdlZW4odCxlLG4scix0aGlzKX0sXy5wcm90b3R5cGUuZGVzY2VuZGFudHM9ZnVuY3Rpb24odCl7dGhpcy5ub2Rlc0JldHdlZW4oMCx0aGlzLmNvbnRlbnQuc2l6ZSx0KX0sRi50ZXh0Q29udGVudC5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy50ZXh0QmV0d2VlbigwLHRoaXMuY29udGVudC5zaXplLCIiKX0sXy5wcm90b3R5cGUudGV4dEJldHdlZW49ZnVuY3Rpb24odCxlLG4scil7cmV0dXJuIHRoaXMuY29udGVudC50ZXh0QmV0d2Vlbih0LGUsbixyKX0sRi5maXJzdENoaWxkLmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLmNvbnRlbnQuZmlyc3RDaGlsZH0sRi5sYXN0Q2hpbGQuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY29udGVudC5sYXN0Q2hpbGR9LF8ucHJvdG90eXBlLmVxPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzPT10fHx0aGlzLnNhbWVNYXJrdXAodCkmJnRoaXMuY29udGVudC5lcSh0LmNvbnRlbnQpfSxfLnByb3RvdHlwZS5zYW1lTWFya3VwPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLmhhc01hcmt1cCh0LnR5cGUsdC5hdHRycyx0Lm1hcmtzKX0sXy5wcm90b3R5cGUuaGFzTWFya3VwPWZ1bmN0aW9uKHQsZSxuKXtyZXR1cm4gdGhpcy50eXBlPT10JiZ1KHRoaXMuYXR0cnMsZXx8dC5kZWZhdWx0QXR0cnN8fEkpJiZoLnNhbWVTZXQodGhpcy5tYXJrcyxufHxoLm5vbmUpfSxfLnByb3RvdHlwZS5jb3B5PWZ1bmN0aW9uKHQpe3JldHVybiB2b2lkIDA9PT10JiYodD1udWxsKSx0PT10aGlzLmNvbnRlbnQ/dGhpczpuZXcgdGhpcy5jb25zdHJ1Y3Rvcih0aGlzLnR5cGUsdGhpcy5hdHRycyx0LHRoaXMubWFya3MpfSxfLnByb3RvdHlwZS5tYXJrPWZ1bmN0aW9uKHQpe3JldHVybiB0PT10aGlzLm1hcmtzP3RoaXM6bmV3IHRoaXMuY29uc3RydWN0b3IodGhpcy50eXBlLHRoaXMuYXR0cnMsdGhpcy5jb250ZW50LHQpfSxfLnByb3RvdHlwZS5jdXQ9ZnVuY3Rpb24odCxlKXtyZXR1cm4gMD09dCYmZT09dGhpcy5jb250ZW50LnNpemU/dGhpczp0aGlzLmNvcHkodGhpcy5jb250ZW50LmN1dCh0LGUpKX0sXy5wcm90b3R5cGUuc2xpY2U9ZnVuY3Rpb24odCxlLG4pe2lmKHZvaWQgMD09PWUmJihlPXRoaXMuY29udGVudC5zaXplKSx2b2lkIDA9PT1uJiYobj0hMSksdD09ZSlyZXR1cm4gZC5lbXB0eTt2YXIgcj10aGlzLnJlc29sdmUodCksbz10aGlzLnJlc29sdmUoZSksaT1uPzA6ci5zaGFyZWREZXB0aChlKSxzPXIuc3RhcnQoaSksYT1yLm5vZGUoaSksYz1hLmNvbnRlbnQuY3V0KHIucG9zLXMsby5wb3Mtcyk7cmV0dXJuIG5ldyBkKGMsci5kZXB0aC1pLG8uZGVwdGgtaSl9LF8ucHJvdG90eXBlLnJlcGxhY2U9ZnVuY3Rpb24odCxlLG4pe3JldHVybiBnKHRoaXMucmVzb2x2ZSh0KSx0aGlzLnJlc29sdmUoZSksbil9LF8ucHJvdG90eXBlLm5vZGVBdD1mdW5jdGlvbih0KXtmb3IodmFyIGU9dGhpczs7KXt2YXIgbj1lLmNvbnRlbnQuZmluZEluZGV4KHQpLHI9bi5pbmRleCxvPW4ub2Zmc2V0O2lmKGU9ZS5tYXliZUNoaWxkKHIpLCFlKXJldHVybiBudWxsO2lmKG89PXR8fGUuaXNUZXh0KXJldHVybiBlO3QtPW8rMX19LF8ucHJvdG90eXBlLmNoaWxkQWZ0ZXI9ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5jb250ZW50LmZpbmRJbmRleCh0KSxuPWUuaW5kZXgscj1lLm9mZnNldDtyZXR1cm57bm9kZTp0aGlzLmNvbnRlbnQubWF5YmVDaGlsZChuKSxpbmRleDpuLG9mZnNldDpyfX0sXy5wcm90b3R5cGUuY2hpbGRCZWZvcmU9ZnVuY3Rpb24odCl7aWYoMD09dClyZXR1cm57bm9kZTpudWxsLGluZGV4OjAsb2Zmc2V0OjB9O3ZhciBlPXRoaXMuY29udGVudC5maW5kSW5kZXgodCksbj1lLmluZGV4LHI9ZS5vZmZzZXQ7aWYocjx0KXJldHVybntub2RlOnRoaXMuY29udGVudC5jaGlsZChuKSxpbmRleDpuLG9mZnNldDpyfTt2YXIgbz10aGlzLmNvbnRlbnQuY2hpbGQobi0xKTtyZXR1cm57bm9kZTpvLGluZGV4Om4tMSxvZmZzZXQ6ci1vLm5vZGVTaXplfX0sXy5wcm90b3R5cGUucmVzb2x2ZT1mdW5jdGlvbih0KXtyZXR1cm4gTi5yZXNvbHZlQ2FjaGVkKHRoaXMsdCl9LF8ucHJvdG90eXBlLnJlc29sdmVOb0NhY2hlPWZ1bmN0aW9uKHQpe3JldHVybiBOLnJlc29sdmUodGhpcyx0KX0sXy5wcm90b3R5cGUucmFuZ2VIYXNNYXJrPWZ1bmN0aW9uKHQsZSxuKXt2YXIgcj0hMTtyZXR1cm4gZT50JiZ0aGlzLm5vZGVzQmV0d2Vlbih0LGUsKGZ1bmN0aW9uKHQpe3JldHVybiBuLmlzSW5TZXQodC5tYXJrcykmJihyPSEwKSwhcn0pKSxyfSxGLmlzQmxvY2suZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudHlwZS5pc0Jsb2NrfSxGLmlzVGV4dGJsb2NrLmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLnR5cGUuaXNUZXh0YmxvY2t9LEYuaW5saW5lQ29udGVudC5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy50eXBlLmlubGluZUNvbnRlbnR9LEYuaXNJbmxpbmUuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudHlwZS5pc0lubGluZX0sRi5pc1RleHQuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudHlwZS5pc1RleHR9LEYuaXNMZWFmLmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLnR5cGUuaXNMZWFmfSxGLmlzQXRvbS5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy50eXBlLmlzQXRvbX0sXy5wcm90b3R5cGUudG9TdHJpbmc9ZnVuY3Rpb24oKXtpZih0aGlzLnR5cGUuc3BlYy50b0RlYnVnU3RyaW5nKXJldHVybiB0aGlzLnR5cGUuc3BlYy50b0RlYnVnU3RyaW5nKHRoaXMpO3ZhciB0PXRoaXMudHlwZS5uYW1lO3JldHVybiB0aGlzLmNvbnRlbnQuc2l6ZSYmKHQrPSIoIit0aGlzLmNvbnRlbnQudG9TdHJpbmdJbm5lcigpKyIpIiksaih0aGlzLm1hcmtzLHQpfSxfLnByb3RvdHlwZS5jb250ZW50TWF0Y2hBdD1mdW5jdGlvbih0KXt2YXIgZT10aGlzLnR5cGUuY29udGVudE1hdGNoLm1hdGNoRnJhZ21lbnQodGhpcy5jb250ZW50LDAsdCk7aWYoIWUpdGhyb3cgbmV3IEVycm9yKCJDYWxsZWQgY29udGVudE1hdGNoQXQgb24gYSBub2RlIHdpdGggaW52YWxpZCBjb250ZW50Iik7cmV0dXJuIGV9LF8ucHJvdG90eXBlLmNhblJlcGxhY2U9ZnVuY3Rpb24odCxlLG4scixvKXt2YXIgaT10aGlzO3ZvaWQgMD09PW4mJihuPWEuZW1wdHkpLHZvaWQgMD09PXImJihyPTApLHZvaWQgMD09PW8mJihvPW4uY2hpbGRDb3VudCk7dmFyIHM9dGhpcy5jb250ZW50TWF0Y2hBdCh0KS5tYXRjaEZyYWdtZW50KG4scixvKSxjPXMmJnMubWF0Y2hGcmFnbWVudCh0aGlzLmNvbnRlbnQsZSk7aWYoIWN8fCFjLnZhbGlkRW5kKXJldHVybiExO2Zvcih2YXIgbD1yO2w8bztsKyspaWYoIWkudHlwZS5hbGxvd3NNYXJrcyhuLmNoaWxkKGwpLm1hcmtzKSlyZXR1cm4hMTtyZXR1cm4hMH0sXy5wcm90b3R5cGUuY2FuUmVwbGFjZVdpdGg9ZnVuY3Rpb24odCxlLG4scil7aWYociYmIXRoaXMudHlwZS5hbGxvd3NNYXJrcyhyKSlyZXR1cm4hMTt2YXIgbz10aGlzLmNvbnRlbnRNYXRjaEF0KHQpLm1hdGNoVHlwZShuKSxpPW8mJm8ubWF0Y2hGcmFnbWVudCh0aGlzLmNvbnRlbnQsZSk7cmV0dXJuISFpJiZpLnZhbGlkRW5kfSxfLnByb3RvdHlwZS5jYW5BcHBlbmQ9ZnVuY3Rpb24odCl7cmV0dXJuIHQuY29udGVudC5zaXplP3RoaXMuY2FuUmVwbGFjZSh0aGlzLmNoaWxkQ291bnQsdGhpcy5jaGlsZENvdW50LHQuY29udGVudCk6dGhpcy50eXBlLmNvbXBhdGlibGVDb250ZW50KHQudHlwZSl9LF8ucHJvdG90eXBlLmRlZmF1bHRDb250ZW50VHlwZT1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5jb250ZW50TWF0Y2hBdCh0KS5kZWZhdWx0VHlwZX0sXy5wcm90b3R5cGUuY2hlY2s9ZnVuY3Rpb24oKXtpZighdGhpcy50eXBlLnZhbGlkQ29udGVudCh0aGlzLmNvbnRlbnQpKXRocm93IG5ldyBSYW5nZUVycm9yKCJJbnZhbGlkIGNvbnRlbnQgZm9yIG5vZGUgIit0aGlzLnR5cGUubmFtZSsiOiAiK3RoaXMuY29udGVudC50b1N0cmluZygpLnNsaWNlKDAsNTApKTt0aGlzLmNvbnRlbnQuZm9yRWFjaCgoZnVuY3Rpb24odCl7cmV0dXJuIHQuY2hlY2soKX0pKX0sXy5wcm90b3R5cGUudG9KU09OPWZ1bmN0aW9uKCl7dmFyIHQ9dGhpcyxlPXt0eXBlOnRoaXMudHlwZS5uYW1lfTtmb3IodmFyIG4gaW4gdC5hdHRycyl7ZS5hdHRycz10LmF0dHJzO2JyZWFrfXJldHVybiB0aGlzLmNvbnRlbnQuc2l6ZSYmKGUuY29udGVudD10aGlzLmNvbnRlbnQudG9KU09OKCkpLHRoaXMubWFya3MubGVuZ3RoJiYoZS5tYXJrcz10aGlzLm1hcmtzLm1hcCgoZnVuY3Rpb24odCl7cmV0dXJuIHQudG9KU09OKCl9KSkpLGV9LF8uZnJvbUpTT049ZnVuY3Rpb24odCxlKXtpZighZSl0aHJvdyBuZXcgUmFuZ2VFcnJvcigiSW52YWxpZCBpbnB1dCBmb3IgTm9kZS5mcm9tSlNPTiIpO3ZhciBuPW51bGw7aWYoZS5tYXJrcyl7aWYoIUFycmF5LmlzQXJyYXkoZS5tYXJrcykpdGhyb3cgbmV3IFJhbmdlRXJyb3IoIkludmFsaWQgbWFyayBkYXRhIGZvciBOb2RlLmZyb21KU09OIik7bj1lLm1hcmtzLm1hcCh0Lm1hcmtGcm9tSlNPTil9aWYoInRleHQiPT1lLnR5cGUpe2lmKCJzdHJpbmciIT10eXBlb2YgZS50ZXh0KXRocm93IG5ldyBSYW5nZUVycm9yKCJJbnZhbGlkIHRleHQgbm9kZSBpbiBKU09OIik7cmV0dXJuIHQudGV4dChlLnRleHQsbil9dmFyIHI9YS5mcm9tSlNPTih0LGUuY29udGVudCk7cmV0dXJuIHQubm9kZVR5cGUoZS50eXBlKS5jcmVhdGUoZS5hdHRycyxyLG4pfSxPYmplY3QuZGVmaW5lUHJvcGVydGllcyhfLnByb3RvdHlwZSxGKTt2YXIgQj1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKGUsbixyLG8pe2lmKHQuY2FsbCh0aGlzLGUsbixudWxsLG8pLCFyKXRocm93IG5ldyBSYW5nZUVycm9yKCJFbXB0eSB0ZXh0IG5vZGVzIGFyZSBub3QgYWxsb3dlZCIpO3RoaXMudGV4dD1yfXQmJihlLl9fcHJvdG9fXz10KSxlLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKHQmJnQucHJvdG90eXBlKSxlLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1lO3ZhciBuPXt0ZXh0Q29udGVudDp7fSxub2RlU2l6ZTp7fX07cmV0dXJuIGUucHJvdG90eXBlLnRvU3RyaW5nPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudHlwZS5zcGVjLnRvRGVidWdTdHJpbmc/dGhpcy50eXBlLnNwZWMudG9EZWJ1Z1N0cmluZyh0aGlzKTpqKHRoaXMubWFya3MsSlNPTi5zdHJpbmdpZnkodGhpcy50ZXh0KSl9LG4udGV4dENvbnRlbnQuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudGV4dH0sZS5wcm90b3R5cGUudGV4dEJldHdlZW49ZnVuY3Rpb24odCxlKXtyZXR1cm4gdGhpcy50ZXh0LnNsaWNlKHQsZSl9LG4ubm9kZVNpemUuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudGV4dC5sZW5ndGh9LGUucHJvdG90eXBlLm1hcms9ZnVuY3Rpb24odCl7cmV0dXJuIHQ9PXRoaXMubWFya3M/dGhpczpuZXcgZSh0aGlzLnR5cGUsdGhpcy5hdHRycyx0aGlzLnRleHQsdCl9LGUucHJvdG90eXBlLndpdGhUZXh0PWZ1bmN0aW9uKHQpe3JldHVybiB0PT10aGlzLnRleHQ/dGhpczpuZXcgZSh0aGlzLnR5cGUsdGhpcy5hdHRycyx0LHRoaXMubWFya3MpfSxlLnByb3RvdHlwZS5jdXQ9ZnVuY3Rpb24odCxlKXtyZXR1cm4gdm9pZCAwPT09dCYmKHQ9MCksdm9pZCAwPT09ZSYmKGU9dGhpcy50ZXh0Lmxlbmd0aCksMD09dCYmZT09dGhpcy50ZXh0Lmxlbmd0aD90aGlzOnRoaXMud2l0aFRleHQodGhpcy50ZXh0LnNsaWNlKHQsZSkpfSxlLnByb3RvdHlwZS5lcT1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5zYW1lTWFya3VwKHQpJiZ0aGlzLnRleHQ9PXQudGV4dH0sZS5wcm90b3R5cGUudG9KU09OPWZ1bmN0aW9uKCl7dmFyIGU9dC5wcm90b3R5cGUudG9KU09OLmNhbGwodGhpcyk7cmV0dXJuIGUudGV4dD10aGlzLnRleHQsZX0sT2JqZWN0LmRlZmluZVByb3BlcnRpZXMoZS5wcm90b3R5cGUsbiksZX0oXyk7ZnVuY3Rpb24gaih0LGUpe2Zvcih2YXIgbj10Lmxlbmd0aC0xO24+PTA7bi0tKWU9dFtuXS50eXBlLm5hbWUrIigiK2UrIikiO3JldHVybiBlfXZhciAkPWZ1bmN0aW9uKHQpe3RoaXMudmFsaWRFbmQ9dCx0aGlzLm5leHQ9W10sdGhpcy53cmFwQ2FjaGU9W119LFY9e2lubGluZUNvbnRlbnQ6e30sZGVmYXVsdFR5cGU6e30sZWRnZUNvdW50Ont9fTskLnBhcnNlPWZ1bmN0aW9uKHQsZSl7dmFyIG49bmV3IEwodCxlKTtpZihudWxsPT1uLm5leHQpcmV0dXJuICQuZW1wdHk7dmFyIHI9cShuKTtuLm5leHQmJm4uZXJyKCJVbmV4cGVjdGVkIHRyYWlsaW5nIHRleHQiKTt2YXIgbz10dChZKHIpKTtyZXR1cm4gZXQobyxuKSxvfSwkLnByb3RvdHlwZS5tYXRjaFR5cGU9ZnVuY3Rpb24odCl7Zm9yKHZhciBlPXRoaXMsbj0wO248dGhpcy5uZXh0Lmxlbmd0aDtuKz0yKWlmKGUubmV4dFtuXT09dClyZXR1cm4gZS5uZXh0W24rMV07cmV0dXJuIG51bGx9LCQucHJvdG90eXBlLm1hdGNoRnJhZ21lbnQ9ZnVuY3Rpb24odCxlLG4pe3ZvaWQgMD09PWUmJihlPTApLHZvaWQgMD09PW4mJihuPXQuY2hpbGRDb3VudCk7Zm9yKHZhciByPXRoaXMsbz1lO3ImJm88bjtvKyspcj1yLm1hdGNoVHlwZSh0LmNoaWxkKG8pLnR5cGUpO3JldHVybiByfSxWLmlubGluZUNvbnRlbnQuZ2V0PWZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5uZXh0WzBdO3JldHVybiEhdCYmdC5pc0lubGluZX0sVi5kZWZhdWx0VHlwZS5nZXQ9ZnVuY3Rpb24oKXtmb3IodmFyIHQ9dGhpcyxlPTA7ZTx0aGlzLm5leHQubGVuZ3RoO2UrPTIpe3ZhciBuPXQubmV4dFtlXTtpZighbi5pc1RleHQmJiFuLmhhc1JlcXVpcmVkQXR0cnMoKSlyZXR1cm4gbn19LCQucHJvdG90eXBlLmNvbXBhdGlibGU9ZnVuY3Rpb24odCl7Zm9yKHZhciBlPXRoaXMsbj0wO248dGhpcy5uZXh0Lmxlbmd0aDtuKz0yKWZvcih2YXIgcj0wO3I8dC5uZXh0Lmxlbmd0aDtyKz0yKWlmKGUubmV4dFtuXT09dC5uZXh0W3JdKXJldHVybiEwO3JldHVybiExfSwkLnByb3RvdHlwZS5maWxsQmVmb3JlPWZ1bmN0aW9uKHQsZSxuKXt2b2lkIDA9PT1lJiYoZT0hMSksdm9pZCAwPT09biYmKG49MCk7dmFyIHI9W3RoaXNdO2Z1bmN0aW9uIG8oaSxzKXt2YXIgYz1pLm1hdGNoRnJhZ21lbnQodCxuKTtpZihjJiYoIWV8fGMudmFsaWRFbmQpKXJldHVybiBhLmZyb20ocy5tYXAoKGZ1bmN0aW9uKHQpe3JldHVybiB0LmNyZWF0ZUFuZEZpbGwoKX0pKSk7Zm9yKHZhciBsPTA7bDxpLm5leHQubGVuZ3RoO2wrPTIpe3ZhciBwPWkubmV4dFtsXSx1PWkubmV4dFtsKzFdO2lmKCFwLmlzVGV4dCYmIXAuaGFzUmVxdWlyZWRBdHRycygpJiYtMT09ci5pbmRleE9mKHUpKXtyLnB1c2godSk7dmFyIGg9byh1LHMuY29uY2F0KHApKTtpZihoKXJldHVybiBofX19cmV0dXJuIG8odGhpcyxbXSl9LCQucHJvdG90eXBlLmZpbmRXcmFwcGluZz1mdW5jdGlvbih0KXtmb3IodmFyIGU9dGhpcyxuPTA7bjx0aGlzLndyYXBDYWNoZS5sZW5ndGg7bis9MilpZihlLndyYXBDYWNoZVtuXT09dClyZXR1cm4gZS53cmFwQ2FjaGVbbisxXTt2YXIgcj10aGlzLmNvbXB1dGVXcmFwcGluZyh0KTtyZXR1cm4gdGhpcy53cmFwQ2FjaGUucHVzaCh0LHIpLHJ9LCQucHJvdG90eXBlLmNvbXB1dGVXcmFwcGluZz1mdW5jdGlvbih0KXt2YXIgZT1PYmplY3QuY3JlYXRlKG51bGwpLG49W3ttYXRjaDp0aGlzLHR5cGU6bnVsbCx2aWE6bnVsbH1dO3doaWxlKG4ubGVuZ3RoKXt2YXIgcj1uLnNoaWZ0KCksbz1yLm1hdGNoO2lmKG8ubWF0Y2hUeXBlKHQpKXtmb3IodmFyIGk9W10scz1yO3MudHlwZTtzPXMudmlhKWkucHVzaChzLnR5cGUpO3JldHVybiBpLnJldmVyc2UoKX1mb3IodmFyIGE9MDthPG8ubmV4dC5sZW5ndGg7YSs9Mil7dmFyIGM9by5uZXh0W2FdO2MuaXNMZWFmfHxjLmhhc1JlcXVpcmVkQXR0cnMoKXx8Yy5uYW1lIGluIGV8fHIudHlwZSYmIW8ubmV4dFthKzFdLnZhbGlkRW5kfHwobi5wdXNoKHttYXRjaDpjLmNvbnRlbnRNYXRjaCx0eXBlOmMsdmlhOnJ9KSxlW2MubmFtZV09ITApfX19LFYuZWRnZUNvdW50LmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLm5leHQubGVuZ3RoPj4xfSwkLnByb3RvdHlwZS5lZGdlPWZ1bmN0aW9uKHQpe3ZhciBlPXQ8PDE7aWYoZT50aGlzLm5leHQubGVuZ3RoKXRocm93IG5ldyBSYW5nZUVycm9yKCJUaGVyZSdzIG5vICIrdCsidGggZWRnZSBpbiB0aGlzIGNvbnRlbnQgbWF0Y2giKTtyZXR1cm57dHlwZTp0aGlzLm5leHRbZV0sbmV4dDp0aGlzLm5leHRbZSsxXX19LCQucHJvdG90eXBlLnRvU3RyaW5nPWZ1bmN0aW9uKCl7dmFyIHQ9W107ZnVuY3Rpb24gZShuKXt0LnB1c2gobik7Zm9yKHZhciByPTE7cjxuLm5leHQubGVuZ3RoO3IrPTIpLTE9PXQuaW5kZXhPZihuLm5leHRbcl0pJiZlKG4ubmV4dFtyXSl9cmV0dXJuIGUodGhpcyksdC5tYXAoKGZ1bmN0aW9uKGUsbil7Zm9yKHZhciByPW4rKGUudmFsaWRFbmQ/IioiOiIgIikrIiAiLG89MDtvPGUubmV4dC5sZW5ndGg7bys9MilyKz0obz8iLCAiOiIiKStlLm5leHRbb10ubmFtZSsiLT4iK3QuaW5kZXhPZihlLm5leHRbbysxXSk7cmV0dXJuIHJ9KSkuam9pbigiXG4iKX0sT2JqZWN0LmRlZmluZVByb3BlcnRpZXMoJC5wcm90b3R5cGUsViksJC5lbXB0eT1uZXcgJCghMCk7dmFyIEw9ZnVuY3Rpb24odCxlKXt0aGlzLnN0cmluZz10LHRoaXMubm9kZVR5cGVzPWUsdGhpcy5pbmxpbmU9bnVsbCx0aGlzLnBvcz0wLHRoaXMudG9rZW5zPXQuc3BsaXQoL1xzKig/PVxifFxXfCQpLyksIiI9PXRoaXMudG9rZW5zW3RoaXMudG9rZW5zLmxlbmd0aC0xXSYmdGhpcy50b2tlbnMucG9wKCksIiI9PXRoaXMudG9rZW5zWzBdJiZ0aGlzLnRva2Vucy51bnNoaWZ0KCl9LEo9e25leHQ6e319O2Z1bmN0aW9uIHEodCl7dmFyIGU9W107ZG97ZS5wdXNoKFcodCkpfXdoaWxlKHQuZWF0KCJ8IikpO3JldHVybiAxPT1lLmxlbmd0aD9lWzBdOnt0eXBlOiJjaG9pY2UiLGV4cHJzOmV9fWZ1bmN0aW9uIFcodCl7dmFyIGU9W107ZG97ZS5wdXNoKEgodCkpfXdoaWxlKHQubmV4dCYmIikiIT10Lm5leHQmJiJ8IiE9dC5uZXh0KTtyZXR1cm4gMT09ZS5sZW5ndGg/ZVswXTp7dHlwZToic2VxIixleHByczplfX1mdW5jdGlvbiBIKHQpe2Zvcih2YXIgZT1YKHQpOzspaWYodC5lYXQoIisiKSllPXt0eXBlOiJwbHVzIixleHByOmV9O2Vsc2UgaWYodC5lYXQoIioiKSllPXt0eXBlOiJzdGFyIixleHByOmV9O2Vsc2UgaWYodC5lYXQoIj8iKSllPXt0eXBlOiJvcHQiLGV4cHI6ZX07ZWxzZXtpZighdC5lYXQoInsiKSlicmVhaztlPVUodCxlKX1yZXR1cm4gZX1mdW5jdGlvbiBLKHQpey9cRC8udGVzdCh0Lm5leHQpJiZ0LmVycigiRXhwZWN0ZWQgbnVtYmVyLCBnb3QgJyIrdC5uZXh0KyInIik7dmFyIGU9TnVtYmVyKHQubmV4dCk7cmV0dXJuIHQucG9zKyssZX1mdW5jdGlvbiBVKHQsZSl7dmFyIG49Syh0KSxyPW47cmV0dXJuIHQuZWF0KCIsIikmJihyPSJ9IiE9dC5uZXh0P0sodCk6LTEpLHQuZWF0KCJ9Iil8fHQuZXJyKCJVbmNsb3NlZCBicmFjZWQgcmFuZ2UiKSx7dHlwZToicmFuZ2UiLG1pbjpuLG1heDpyLGV4cHI6ZX19ZnVuY3Rpb24gRyh0LGUpe3ZhciBuPXQubm9kZVR5cGVzLHI9bltlXTtpZihyKXJldHVybltyXTt2YXIgbz1bXTtmb3IodmFyIGkgaW4gbil7dmFyIHM9bltpXTtzLmdyb3Vwcy5pbmRleE9mKGUpPi0xJiZvLnB1c2gocyl9cmV0dXJuIDA9PW8ubGVuZ3RoJiZ0LmVycigiTm8gbm9kZSB0eXBlIG9yIGdyb3VwICciK2UrIicgZm91bmQiKSxvfWZ1bmN0aW9uIFgodCl7aWYodC5lYXQoIigiKSl7dmFyIGU9cSh0KTtyZXR1cm4gdC5lYXQoIikiKXx8dC5lcnIoIk1pc3NpbmcgY2xvc2luZyBwYXJlbiIpLGV9aWYoIS9cVy8udGVzdCh0Lm5leHQpKXt2YXIgbj1HKHQsdC5uZXh0KS5tYXAoKGZ1bmN0aW9uKGUpe3JldHVybiBudWxsPT10LmlubGluZT90LmlubGluZT1lLmlzSW5saW5lOnQuaW5saW5lIT1lLmlzSW5saW5lJiZ0LmVycigiTWl4aW5nIGlubGluZSBhbmQgYmxvY2sgY29udGVudCIpLHt0eXBlOiJuYW1lIix2YWx1ZTplfX0pKTtyZXR1cm4gdC5wb3MrKywxPT1uLmxlbmd0aD9uWzBdOnt0eXBlOiJjaG9pY2UiLGV4cHJzOm59fXQuZXJyKCJVbmV4cGVjdGVkIHRva2VuICciK3QubmV4dCsiJyIpfWZ1bmN0aW9uIFkodCl7dmFyIGU9W1tdXTtyZXR1cm4gbyhpKHQsMCksbigpKSxlO2Z1bmN0aW9uIG4oKXtyZXR1cm4gZS5wdXNoKFtdKS0xfWZ1bmN0aW9uIHIodCxuLHIpe3ZhciBvPXt0ZXJtOnIsdG86bn07cmV0dXJuIGVbdF0ucHVzaChvKSxvfWZ1bmN0aW9uIG8odCxlKXt0LmZvckVhY2goKGZ1bmN0aW9uKHQpe3JldHVybiB0LnRvPWV9KSl9ZnVuY3Rpb24gaSh0LGUpe2lmKCJjaG9pY2UiPT10LnR5cGUpcmV0dXJuIHQuZXhwcnMucmVkdWNlKChmdW5jdGlvbih0LG4pe3JldHVybiB0LmNvbmNhdChpKG4sZSkpfSksW10pO2lmKCJzZXEiPT10LnR5cGUpZm9yKHZhciBzPTA7O3MrKyl7dmFyIGE9aSh0LmV4cHJzW3NdLGUpO2lmKHM9PXQuZXhwcnMubGVuZ3RoLTEpcmV0dXJuIGE7byhhLGU9bigpKX1lbHNle2lmKCJzdGFyIj09dC50eXBlKXt2YXIgYz1uKCk7cmV0dXJuIHIoZSxjKSxvKGkodC5leHByLGMpLGMpLFtyKGMpXX1pZigicGx1cyI9PXQudHlwZSl7dmFyIGw9bigpO3JldHVybiBvKGkodC5leHByLGUpLGwpLG8oaSh0LmV4cHIsbCksbCksW3IobCldfWlmKCJvcHQiPT10LnR5cGUpcmV0dXJuW3IoZSldLmNvbmNhdChpKHQuZXhwcixlKSk7aWYoInJhbmdlIj09dC50eXBlKXtmb3IodmFyIHA9ZSx1PTA7dTx0Lm1pbjt1Kyspe3ZhciBoPW4oKTtvKGkodC5leHByLHApLGgpLHA9aH1pZigtMT09dC5tYXgpbyhpKHQuZXhwcixwKSxwKTtlbHNlIGZvcih2YXIgZj10Lm1pbjtmPHQubWF4O2YrKyl7dmFyIGQ9bigpO3IocCxkKSxvKGkodC5leHByLHApLGQpLHA9ZH1yZXR1cm5bcihwKV19aWYoIm5hbWUiPT10LnR5cGUpcmV0dXJuW3IoZSxudWxsLHQudmFsdWUpXX19fWZ1bmN0aW9uIFEodCxlKXtyZXR1cm4gdC1lfWZ1bmN0aW9uIFoodCxlKXt2YXIgbj1bXTtyZXR1cm4gcihlKSxuLnNvcnQoUSk7ZnVuY3Rpb24gcihlKXt2YXIgbz10W2VdO2lmKDE9PW8ubGVuZ3RoJiYhb1swXS50ZXJtKXJldHVybiByKG9bMF0udG8pO24ucHVzaChlKTtmb3IodmFyIGk9MDtpPG8ubGVuZ3RoO2krKyl7dmFyIHM9b1tpXSxhPXMudGVybSxjPXMudG87YXx8LTEhPW4uaW5kZXhPZihjKXx8cihjKX19fWZ1bmN0aW9uIHR0KHQpe3ZhciBlPU9iamVjdC5jcmVhdGUobnVsbCk7cmV0dXJuIG4oWih0LDApKTtmdW5jdGlvbiBuKHIpe3ZhciBvPVtdO3IuZm9yRWFjaCgoZnVuY3Rpb24oZSl7dFtlXS5mb3JFYWNoKChmdW5jdGlvbihlKXt2YXIgbj1lLnRlcm0scj1lLnRvO2lmKG4pe3ZhciBpPW8uaW5kZXhPZihuKSxzPWk+LTEmJm9baSsxXTtaKHQscikuZm9yRWFjaCgoZnVuY3Rpb24odCl7c3x8by5wdXNoKG4scz1bXSksLTE9PXMuaW5kZXhPZih0KSYmcy5wdXNoKHQpfSkpfX0pKX0pKTtmb3IodmFyIGk9ZVtyLmpvaW4oIiwiKV09bmV3ICQoci5pbmRleE9mKHQubGVuZ3RoLTEpPi0xKSxzPTA7czxvLmxlbmd0aDtzKz0yKXt2YXIgYT1vW3MrMV0uc29ydChRKTtpLm5leHQucHVzaChvW3NdLGVbYS5qb2luKCIsIildfHxuKGEpKX1yZXR1cm4gaX19ZnVuY3Rpb24gZXQodCxlKXtmb3IodmFyIG49MCxyPVt0XTtuPHIubGVuZ3RoO24rKyl7Zm9yKHZhciBvPXJbbl0saT0hby52YWxpZEVuZCxzPVtdLGE9MDthPG8ubmV4dC5sZW5ndGg7YSs9Mil7dmFyIGM9by5uZXh0W2FdLGw9by5uZXh0W2ErMV07cy5wdXNoKGMubmFtZSksIWl8fGMuaXNUZXh0fHxjLmhhc1JlcXVpcmVkQXR0cnMoKXx8KGk9ITEpLC0xPT1yLmluZGV4T2YobCkmJnIucHVzaChsKX1pJiZlLmVycigiT25seSBub24tZ2VuZXJhdGFibGUgbm9kZXMgKCIrcy5qb2luKCIsICIpKyIpIGluIGEgcmVxdWlyZWQgcG9zaXRpb24iKX19ZnVuY3Rpb24gbnQodCl7dmFyIGU9T2JqZWN0LmNyZWF0ZShudWxsKTtmb3IodmFyIG4gaW4gdCl7dmFyIHI9dFtuXTtpZighci5oYXNEZWZhdWx0KXJldHVybiBudWxsO2Vbbl09ci5kZWZhdWx0fXJldHVybiBlfWZ1bmN0aW9uIHJ0KHQsZSl7dmFyIG49T2JqZWN0LmNyZWF0ZShudWxsKTtmb3IodmFyIHIgaW4gdCl7dmFyIG89ZSYmZVtyXTtpZih2b2lkIDA9PT1vKXt2YXIgaT10W3JdO2lmKCFpLmhhc0RlZmF1bHQpdGhyb3cgbmV3IFJhbmdlRXJyb3IoIk5vIHZhbHVlIHN1cHBsaWVkIGZvciBhdHRyaWJ1dGUgIityKTtvPWkuZGVmYXVsdH1uW3JdPW99cmV0dXJuIG59ZnVuY3Rpb24gb3QodCl7dmFyIGU9T2JqZWN0LmNyZWF0ZShudWxsKTtpZih0KWZvcih2YXIgbiBpbiB0KWVbbl09bmV3IGF0KHRbbl0pO3JldHVybiBlfUoubmV4dC5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy50b2tlbnNbdGhpcy5wb3NdfSxMLnByb3RvdHlwZS5lYXQ9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMubmV4dD09dCYmKHRoaXMucG9zKyt8fCEwKX0sTC5wcm90b3R5cGUuZXJyPWZ1bmN0aW9uKHQpe3Rocm93IG5ldyBTeW50YXhFcnJvcih0KyIgKGluIGNvbnRlbnQgZXhwcmVzc2lvbiAnIit0aGlzLnN0cmluZysiJykiKX0sT2JqZWN0LmRlZmluZVByb3BlcnRpZXMoTC5wcm90b3R5cGUsSik7dmFyIGl0PWZ1bmN0aW9uKHQsZSxuKXt0aGlzLm5hbWU9dCx0aGlzLnNjaGVtYT1lLHRoaXMuc3BlYz1uLHRoaXMuZ3JvdXBzPW4uZ3JvdXA/bi5ncm91cC5zcGxpdCgiICIpOltdLHRoaXMuYXR0cnM9b3Qobi5hdHRycyksdGhpcy5kZWZhdWx0QXR0cnM9bnQodGhpcy5hdHRycyksdGhpcy5jb250ZW50TWF0Y2g9bnVsbCx0aGlzLm1hcmtTZXQ9bnVsbCx0aGlzLmlubGluZUNvbnRlbnQ9bnVsbCx0aGlzLmlzQmxvY2s9IShuLmlubGluZXx8InRleHQiPT10KSx0aGlzLmlzVGV4dD0idGV4dCI9PXR9LHN0PXtpc0lubGluZTp7fSxpc1RleHRibG9jazp7fSxpc0xlYWY6e30saXNBdG9tOnt9fTtzdC5pc0lubGluZS5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4hdGhpcy5pc0Jsb2NrfSxzdC5pc1RleHRibG9jay5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5pc0Jsb2NrJiZ0aGlzLmlubGluZUNvbnRlbnR9LHN0LmlzTGVhZi5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jb250ZW50TWF0Y2g9PSQuZW1wdHl9LHN0LmlzQXRvbS5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5pc0xlYWZ8fHRoaXMuc3BlYy5hdG9tfSxpdC5wcm90b3R5cGUuaGFzUmVxdWlyZWRBdHRycz1mdW5jdGlvbih0KXt2YXIgZT10aGlzO2Zvcih2YXIgbiBpbiBlLmF0dHJzKWlmKGUuYXR0cnNbbl0uaXNSZXF1aXJlZCYmKCF0fHwhKG4gaW4gdCkpKXJldHVybiEwO3JldHVybiExfSxpdC5wcm90b3R5cGUuY29tcGF0aWJsZUNvbnRlbnQ9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXM9PXR8fHRoaXMuY29udGVudE1hdGNoLmNvbXBhdGlibGUodC5jb250ZW50TWF0Y2gpfSxpdC5wcm90b3R5cGUuY29tcHV0ZUF0dHJzPWZ1bmN0aW9uKHQpe3JldHVybiF0JiZ0aGlzLmRlZmF1bHRBdHRycz90aGlzLmRlZmF1bHRBdHRyczpydCh0aGlzLmF0dHJzLHQpfSxpdC5wcm90b3R5cGUuY3JlYXRlPWZ1bmN0aW9uKHQsZSxuKXtpZih0aGlzLmlzVGV4dCl0aHJvdyBuZXcgRXJyb3IoIk5vZGVUeXBlLmNyZWF0ZSBjYW4ndCBjb25zdHJ1Y3QgdGV4dCBub2RlcyIpO3JldHVybiBuZXcgXyh0aGlzLHRoaXMuY29tcHV0ZUF0dHJzKHQpLGEuZnJvbShlKSxoLnNldEZyb20obikpfSxpdC5wcm90b3R5cGUuY3JlYXRlQ2hlY2tlZD1mdW5jdGlvbih0LGUsbil7aWYoZT1hLmZyb20oZSksIXRoaXMudmFsaWRDb250ZW50KGUpKXRocm93IG5ldyBSYW5nZUVycm9yKCJJbnZhbGlkIGNvbnRlbnQgZm9yIG5vZGUgIit0aGlzLm5hbWUpO3JldHVybiBuZXcgXyh0aGlzLHRoaXMuY29tcHV0ZUF0dHJzKHQpLGUsaC5zZXRGcm9tKG4pKX0saXQucHJvdG90eXBlLmNyZWF0ZUFuZEZpbGw9ZnVuY3Rpb24odCxlLG4pe2lmKHQ9dGhpcy5jb21wdXRlQXR0cnModCksZT1hLmZyb20oZSksZS5zaXplKXt2YXIgcj10aGlzLmNvbnRlbnRNYXRjaC5maWxsQmVmb3JlKGUpO2lmKCFyKXJldHVybiBudWxsO2U9ci5hcHBlbmQoZSl9dmFyIG89dGhpcy5jb250ZW50TWF0Y2gubWF0Y2hGcmFnbWVudChlKS5maWxsQmVmb3JlKGEuZW1wdHksITApO3JldHVybiBvP25ldyBfKHRoaXMsdCxlLmFwcGVuZChvKSxoLnNldEZyb20obikpOm51bGx9LGl0LnByb3RvdHlwZS52YWxpZENvbnRlbnQ9ZnVuY3Rpb24odCl7dmFyIGU9dGhpcyxuPXRoaXMuY29udGVudE1hdGNoLm1hdGNoRnJhZ21lbnQodCk7aWYoIW58fCFuLnZhbGlkRW5kKXJldHVybiExO2Zvcih2YXIgcj0wO3I8dC5jaGlsZENvdW50O3IrKylpZighZS5hbGxvd3NNYXJrcyh0LmNoaWxkKHIpLm1hcmtzKSlyZXR1cm4hMTtyZXR1cm4hMH0saXQucHJvdG90eXBlLmFsbG93c01hcmtUeXBlPWZ1bmN0aW9uKHQpe3JldHVybiBudWxsPT10aGlzLm1hcmtTZXR8fHRoaXMubWFya1NldC5pbmRleE9mKHQpPi0xfSxpdC5wcm90b3R5cGUuYWxsb3dzTWFya3M9ZnVuY3Rpb24odCl7dmFyIGU9dGhpcztpZihudWxsPT10aGlzLm1hcmtTZXQpcmV0dXJuITA7Zm9yKHZhciBuPTA7bjx0Lmxlbmd0aDtuKyspaWYoIWUuYWxsb3dzTWFya1R5cGUodFtuXS50eXBlKSlyZXR1cm4hMTtyZXR1cm4hMH0saXQucHJvdG90eXBlLmFsbG93ZWRNYXJrcz1mdW5jdGlvbih0KXt2YXIgZSxuPXRoaXM7aWYobnVsbD09dGhpcy5tYXJrU2V0KXJldHVybiB0O2Zvcih2YXIgcj0wO3I8dC5sZW5ndGg7cisrKW4uYWxsb3dzTWFya1R5cGUodFtyXS50eXBlKT9lJiZlLnB1c2godFtyXSk6ZXx8KGU9dC5zbGljZSgwLHIpKTtyZXR1cm4gZT9lLmxlbmd0aD9lOmguZW1wdHk6dH0saXQuY29tcGlsZT1mdW5jdGlvbih0LGUpe3ZhciBuPU9iamVjdC5jcmVhdGUobnVsbCk7dC5mb3JFYWNoKChmdW5jdGlvbih0LHIpe3JldHVybiBuW3RdPW5ldyBpdCh0LGUscil9KSk7dmFyIHI9ZS5zcGVjLnRvcE5vZGV8fCJkb2MiO2lmKCFuW3JdKXRocm93IG5ldyBSYW5nZUVycm9yKCJTY2hlbWEgaXMgbWlzc2luZyBpdHMgdG9wIG5vZGUgdHlwZSAoJyIrcisiJykiKTtpZighbi50ZXh0KXRocm93IG5ldyBSYW5nZUVycm9yKCJFdmVyeSBzY2hlbWEgbmVlZHMgYSAndGV4dCcgdHlwZSIpO2Zvcih2YXIgbyBpbiBuLnRleHQuYXR0cnMpdGhyb3cgbmV3IFJhbmdlRXJyb3IoIlRoZSB0ZXh0IG5vZGUgdHlwZSBzaG91bGQgbm90IGhhdmUgYXR0cmlidXRlcyIpO3JldHVybiBufSxPYmplY3QuZGVmaW5lUHJvcGVydGllcyhpdC5wcm90b3R5cGUsc3QpO3ZhciBhdD1mdW5jdGlvbih0KXt0aGlzLmhhc0RlZmF1bHQ9T2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHQsImRlZmF1bHQiKSx0aGlzLmRlZmF1bHQ9dC5kZWZhdWx0fSxjdD17aXNSZXF1aXJlZDp7fX07Y3QuaXNSZXF1aXJlZC5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4hdGhpcy5oYXNEZWZhdWx0fSxPYmplY3QuZGVmaW5lUHJvcGVydGllcyhhdC5wcm90b3R5cGUsY3QpO3ZhciBsdD1mdW5jdGlvbih0LGUsbixyKXt0aGlzLm5hbWU9dCx0aGlzLnNjaGVtYT1uLHRoaXMuc3BlYz1yLHRoaXMuYXR0cnM9b3Qoci5hdHRycyksdGhpcy5yYW5rPWUsdGhpcy5leGNsdWRlZD1udWxsO3ZhciBvPW50KHRoaXMuYXR0cnMpO3RoaXMuaW5zdGFuY2U9byYmbmV3IGgodGhpcyxvKX07bHQucHJvdG90eXBlLmNyZWF0ZT1mdW5jdGlvbih0KXtyZXR1cm4hdCYmdGhpcy5pbnN0YW5jZT90aGlzLmluc3RhbmNlOm5ldyBoKHRoaXMscnQodGhpcy5hdHRycyx0KSl9LGx0LmNvbXBpbGU9ZnVuY3Rpb24odCxlKXt2YXIgbj1PYmplY3QuY3JlYXRlKG51bGwpLHI9MDtyZXR1cm4gdC5mb3JFYWNoKChmdW5jdGlvbih0LG8pe3JldHVybiBuW3RdPW5ldyBsdCh0LHIrKyxlLG8pfSkpLG59LGx0LnByb3RvdHlwZS5yZW1vdmVGcm9tU2V0PWZ1bmN0aW9uKHQpe2Zvcih2YXIgZT10aGlzLG49MDtuPHQubGVuZ3RoO24rKylpZih0W25dLnR5cGU9PWUpcmV0dXJuIHQuc2xpY2UoMCxuKS5jb25jYXQodC5zbGljZShuKzEpKTtyZXR1cm4gdH0sbHQucHJvdG90eXBlLmlzSW5TZXQ9ZnVuY3Rpb24odCl7Zm9yKHZhciBlPXRoaXMsbj0wO248dC5sZW5ndGg7bisrKWlmKHRbbl0udHlwZT09ZSlyZXR1cm4gdFtuXX0sbHQucHJvdG90eXBlLmV4Y2x1ZGVzPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLmV4Y2x1ZGVkLmluZGV4T2YodCk+LTF9O3ZhciBwdD1mdW5jdGlvbih0KXt2YXIgZT10aGlzO2Zvcih2YXIgbiBpbiB0aGlzLnNwZWM9e30sdCllLnNwZWNbbl09dFtuXTt0aGlzLnNwZWMubm9kZXM9by5mcm9tKHQubm9kZXMpLHRoaXMuc3BlYy5tYXJrcz1vLmZyb20odC5tYXJrcyksdGhpcy5ub2Rlcz1pdC5jb21waWxlKHRoaXMuc3BlYy5ub2Rlcyx0aGlzKSx0aGlzLm1hcmtzPWx0LmNvbXBpbGUodGhpcy5zcGVjLm1hcmtzLHRoaXMpO3ZhciByPU9iamVjdC5jcmVhdGUobnVsbCk7Zm9yKHZhciBpIGluIGUubm9kZXMpe2lmKGkgaW4gZS5tYXJrcyl0aHJvdyBuZXcgUmFuZ2VFcnJvcihpKyIgY2FuIG5vdCBiZSBib3RoIGEgbm9kZSBhbmQgYSBtYXJrIik7dmFyIHM9ZS5ub2Rlc1tpXSxhPXMuc3BlYy5jb250ZW50fHwiIixjPXMuc3BlYy5tYXJrcztzLmNvbnRlbnRNYXRjaD1yW2FdfHwoclthXT0kLnBhcnNlKGEsZS5ub2RlcykpLHMuaW5saW5lQ29udGVudD1zLmNvbnRlbnRNYXRjaC5pbmxpbmVDb250ZW50LHMubWFya1NldD0iXyI9PWM/bnVsbDpjP3V0KGUsYy5zcGxpdCgiICIpKToiIiE9YyYmcy5pbmxpbmVDb250ZW50P251bGw6W119Zm9yKHZhciBsIGluIGUubWFya3Mpe3ZhciBwPWUubWFya3NbbF0sdT1wLnNwZWMuZXhjbHVkZXM7cC5leGNsdWRlZD1udWxsPT11P1twXToiIj09dT9bXTp1dChlLHUuc3BsaXQoIiAiKSl9dGhpcy5ub2RlRnJvbUpTT049dGhpcy5ub2RlRnJvbUpTT04uYmluZCh0aGlzKSx0aGlzLm1hcmtGcm9tSlNPTj10aGlzLm1hcmtGcm9tSlNPTi5iaW5kKHRoaXMpLHRoaXMudG9wTm9kZVR5cGU9dGhpcy5ub2Rlc1t0aGlzLnNwZWMudG9wTm9kZXx8ImRvYyJdLHRoaXMuY2FjaGVkPU9iamVjdC5jcmVhdGUobnVsbCksdGhpcy5jYWNoZWQud3JhcHBpbmdzPU9iamVjdC5jcmVhdGUobnVsbCl9O2Z1bmN0aW9uIHV0KHQsZSl7Zm9yKHZhciBuPVtdLHI9MDtyPGUubGVuZ3RoO3IrKyl7dmFyIG89ZVtyXSxpPXQubWFya3Nbb10scz1pO2lmKGkpbi5wdXNoKGkpO2Vsc2UgZm9yKHZhciBhIGluIHQubWFya3Mpe3ZhciBjPXQubWFya3NbYV07KCJfIj09b3x8Yy5zcGVjLmdyb3VwJiZjLnNwZWMuZ3JvdXAuc3BsaXQoIiAiKS5pbmRleE9mKG8pPi0xKSYmbi5wdXNoKHM9Yyl9aWYoIXMpdGhyb3cgbmV3IFN5bnRheEVycm9yKCJVbmtub3duIG1hcmsgdHlwZTogJyIrZVtyXSsiJyIpfXJldHVybiBufXB0LnByb3RvdHlwZS5ub2RlPWZ1bmN0aW9uKHQsZSxuLHIpe2lmKCJzdHJpbmciPT10eXBlb2YgdCl0PXRoaXMubm9kZVR5cGUodCk7ZWxzZXtpZighKHQgaW5zdGFuY2VvZiBpdCkpdGhyb3cgbmV3IFJhbmdlRXJyb3IoIkludmFsaWQgbm9kZSB0eXBlOiAiK3QpO2lmKHQuc2NoZW1hIT10aGlzKXRocm93IG5ldyBSYW5nZUVycm9yKCJOb2RlIHR5cGUgZnJvbSBkaWZmZXJlbnQgc2NoZW1hIHVzZWQgKCIrdC5uYW1lKyIpIil9cmV0dXJuIHQuY3JlYXRlQ2hlY2tlZChlLG4scil9LHB0LnByb3RvdHlwZS50ZXh0PWZ1bmN0aW9uKHQsZSl7dmFyIG49dGhpcy5ub2Rlcy50ZXh0O3JldHVybiBuZXcgQihuLG4uZGVmYXVsdEF0dHJzLHQsaC5zZXRGcm9tKGUpKX0scHQucHJvdG90eXBlLm1hcms9ZnVuY3Rpb24odCxlKXtyZXR1cm4ic3RyaW5nIj09dHlwZW9mIHQmJih0PXRoaXMubWFya3NbdF0pLHQuY3JlYXRlKGUpfSxwdC5wcm90b3R5cGUubm9kZUZyb21KU09OPWZ1bmN0aW9uKHQpe3JldHVybiBfLmZyb21KU09OKHRoaXMsdCl9LHB0LnByb3RvdHlwZS5tYXJrRnJvbUpTT049ZnVuY3Rpb24odCl7cmV0dXJuIGguZnJvbUpTT04odGhpcyx0KX0scHQucHJvdG90eXBlLm5vZGVUeXBlPWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMubm9kZXNbdF07aWYoIWUpdGhyb3cgbmV3IFJhbmdlRXJyb3IoIlVua25vd24gbm9kZSB0eXBlOiAiK3QpO3JldHVybiBlfTt2YXIgaHQ9ZnVuY3Rpb24odCxlKXt2YXIgbj10aGlzO3RoaXMuc2NoZW1hPXQsdGhpcy5ydWxlcz1lLHRoaXMudGFncz1bXSx0aGlzLnN0eWxlcz1bXSxlLmZvckVhY2goKGZ1bmN0aW9uKHQpe3QudGFnP24udGFncy5wdXNoKHQpOnQuc3R5bGUmJm4uc3R5bGVzLnB1c2godCl9KSl9O2h0LnByb3RvdHlwZS5wYXJzZT1mdW5jdGlvbih0LGUpe3ZvaWQgMD09PWUmJihlPXt9KTt2YXIgbj1uZXcgYnQodGhpcyxlLCExKTtyZXR1cm4gbi5hZGRBbGwodCxudWxsLGUuZnJvbSxlLnRvKSxuLmZpbmlzaCgpfSxodC5wcm90b3R5cGUucGFyc2VTbGljZT1mdW5jdGlvbih0LGUpe3ZvaWQgMD09PWUmJihlPXt9KTt2YXIgbj1uZXcgYnQodGhpcyxlLCEwKTtyZXR1cm4gbi5hZGRBbGwodCxudWxsLGUuZnJvbSxlLnRvKSxkLm1heE9wZW4obi5maW5pc2goKSl9LGh0LnByb3RvdHlwZS5tYXRjaFRhZz1mdW5jdGlvbih0LGUpe2Zvcih2YXIgbj10aGlzLHI9MDtyPHRoaXMudGFncy5sZW5ndGg7cisrKXt2YXIgbz1uLnRhZ3Nbcl07aWYoQ3QodCxvLnRhZykmJih2b2lkIDA9PT1vLm5hbWVzcGFjZXx8dC5uYW1lc3BhY2VVUkk9PW8ubmFtZXNwYWNlKSYmKCFvLmNvbnRleHR8fGUubWF0Y2hlc0NvbnRleHQoby5jb250ZXh0KSkpe2lmKG8uZ2V0QXR0cnMpe3ZhciBpPW8uZ2V0QXR0cnModCk7aWYoITE9PT1pKWNvbnRpbnVlO28uYXR0cnM9aX1yZXR1cm4gb319fSxodC5wcm90b3R5cGUubWF0Y2hTdHlsZT1mdW5jdGlvbih0LGUsbil7Zm9yKHZhciByPXRoaXMsbz0wO288dGhpcy5zdHlsZXMubGVuZ3RoO28rKyl7dmFyIGk9ci5zdHlsZXNbb107aWYoISgwIT1pLnN0eWxlLmluZGV4T2YodCl8fGkuY29udGV4dCYmIW4ubWF0Y2hlc0NvbnRleHQoaS5jb250ZXh0KXx8aS5zdHlsZS5sZW5ndGg+dC5sZW5ndGgmJig2MSE9aS5zdHlsZS5jaGFyQ29kZUF0KHQubGVuZ3RoKXx8aS5zdHlsZS5zbGljZSh0Lmxlbmd0aCsxKSE9ZSkpKXtpZihpLmdldEF0dHJzKXt2YXIgcz1pLmdldEF0dHJzKGUpO2lmKCExPT09cyljb250aW51ZTtpLmF0dHJzPXN9cmV0dXJuIGl9fX0saHQuc2NoZW1hUnVsZXM9ZnVuY3Rpb24odCl7dmFyIGU9W107ZnVuY3Rpb24gbih0KXtmb3IodmFyIG49bnVsbD09dC5wcmlvcml0eT81MDp0LnByaW9yaXR5LHI9MDtyPGUubGVuZ3RoO3IrKyl7dmFyIG89ZVtyXSxpPW51bGw9PW8ucHJpb3JpdHk/NTA6by5wcmlvcml0eTtpZihpPG4pYnJlYWt9ZS5zcGxpY2UociwwLHQpfXZhciByPWZ1bmN0aW9uKGUpe3ZhciByPXQubWFya3NbZV0uc3BlYy5wYXJzZURPTTtyJiZyLmZvckVhY2goKGZ1bmN0aW9uKHQpe24odD1NdCh0KSksdC5tYXJrPWV9KSl9O2Zvcih2YXIgbyBpbiB0Lm1hcmtzKXIobyk7dmFyIGk9ZnVuY3Rpb24oZSl7dmFyIHI9dC5ub2Rlc1tzXS5zcGVjLnBhcnNlRE9NO3ImJnIuZm9yRWFjaCgoZnVuY3Rpb24odCl7bih0PU10KHQpKSx0Lm5vZGU9c30pKX07Zm9yKHZhciBzIGluIHQubm9kZXMpaShvKTtyZXR1cm4gZX0saHQuZnJvbVNjaGVtYT1mdW5jdGlvbih0KXtyZXR1cm4gdC5jYWNoZWQuZG9tUGFyc2VyfHwodC5jYWNoZWQuZG9tUGFyc2VyPW5ldyBodCh0LGh0LnNjaGVtYVJ1bGVzKHQpKSl9O3ZhciBmdD17YWRkcmVzczohMCxhcnRpY2xlOiEwLGFzaWRlOiEwLGJsb2NrcXVvdGU6ITAsY2FudmFzOiEwLGRkOiEwLGRpdjohMCxkbDohMCxmaWVsZHNldDohMCxmaWdjYXB0aW9uOiEwLGZpZ3VyZTohMCxmb290ZXI6ITAsZm9ybTohMCxoMTohMCxoMjohMCxoMzohMCxoNDohMCxoNTohMCxoNjohMCxoZWFkZXI6ITAsaGdyb3VwOiEwLGhyOiEwLGxpOiEwLG5vc2NyaXB0OiEwLG9sOiEwLG91dHB1dDohMCxwOiEwLHByZTohMCxzZWN0aW9uOiEwLHRhYmxlOiEwLHRmb290OiEwLHVsOiEwfSxkdD17aGVhZDohMCxub3NjcmlwdDohMCxvYmplY3Q6ITAsc2NyaXB0OiEwLHN0eWxlOiEwLHRpdGxlOiEwfSx2dD17b2w6ITAsdWw6ITB9LG10PTEseXQ9MixndD00O2Z1bmN0aW9uIHd0KHQpe3JldHVybih0P210OjApfCgiZnVsbCI9PT10P3l0OjApfXZhciB4dD1mdW5jdGlvbih0LGUsbixyLG8saSl7dGhpcy50eXBlPXQsdGhpcy5hdHRycz1lLHRoaXMuc29saWQ9cix0aGlzLm1hdGNoPW98fChpJmd0P251bGw6dC5jb250ZW50TWF0Y2gpLHRoaXMub3B0aW9ucz1pLHRoaXMuY29udGVudD1bXSx0aGlzLm1hcmtzPW4sdGhpcy5hY3RpdmVNYXJrcz1oLm5vbmV9O3h0LnByb3RvdHlwZS5maW5kV3JhcHBpbmc9ZnVuY3Rpb24odCl7aWYoIXRoaXMubWF0Y2gpe2lmKCF0aGlzLnR5cGUpcmV0dXJuW107dmFyIGU9dGhpcy50eXBlLmNvbnRlbnRNYXRjaC5maWxsQmVmb3JlKGEuZnJvbSh0KSk7aWYoIWUpe3ZhciBuLHI9dGhpcy50eXBlLmNvbnRlbnRNYXRjaDtyZXR1cm4obj1yLmZpbmRXcmFwcGluZyh0LnR5cGUpKT8odGhpcy5tYXRjaD1yLG4pOm51bGx9dGhpcy5tYXRjaD10aGlzLnR5cGUuY29udGVudE1hdGNoLm1hdGNoRnJhZ21lbnQoZSl9cmV0dXJuIHRoaXMubWF0Y2guZmluZFdyYXBwaW5nKHQudHlwZSl9LHh0LnByb3RvdHlwZS5maW5pc2g9ZnVuY3Rpb24odCl7aWYoISh0aGlzLm9wdGlvbnMmbXQpKXt2YXIgZSxuPXRoaXMuY29udGVudFt0aGlzLmNvbnRlbnQubGVuZ3RoLTFdO24mJm4uaXNUZXh0JiYoZT0vWyBcdFxyXG5cdTAwMGNdKyQvLmV4ZWMobi50ZXh0KSkmJihuLnRleHQubGVuZ3RoPT1lWzBdLmxlbmd0aD90aGlzLmNvbnRlbnQucG9wKCk6dGhpcy5jb250ZW50W3RoaXMuY29udGVudC5sZW5ndGgtMV09bi53aXRoVGV4dChuLnRleHQuc2xpY2UoMCxuLnRleHQubGVuZ3RoLWVbMF0ubGVuZ3RoKSkpfXZhciByPWEuZnJvbSh0aGlzLmNvbnRlbnQpO3JldHVybiF0JiZ0aGlzLm1hdGNoJiYocj1yLmFwcGVuZCh0aGlzLm1hdGNoLmZpbGxCZWZvcmUoYS5lbXB0eSwhMCkpKSx0aGlzLnR5cGU/dGhpcy50eXBlLmNyZWF0ZSh0aGlzLmF0dHJzLHIsdGhpcy5tYXJrcyk6cn07dmFyIGJ0PWZ1bmN0aW9uKHQsZSxuKXt0aGlzLnBhcnNlcj10LHRoaXMub3B0aW9ucz1lLHRoaXMuaXNPcGVuPW4sdGhpcy5wZW5kaW5nTWFya3M9W107dmFyIHIsbz1lLnRvcE5vZGUsaT13dChlLnByZXNlcnZlV2hpdGVzcGFjZSl8KG4/Z3Q6MCk7cj1vP25ldyB4dChvLnR5cGUsby5hdHRycyxoLm5vbmUsITAsZS50b3BNYXRjaHx8by50eXBlLmNvbnRlbnRNYXRjaCxpKTpuZXcgeHQobj9udWxsOnQuc2NoZW1hLnRvcE5vZGVUeXBlLG51bGwsaC5ub25lLCEwLG51bGwsaSksdGhpcy5ub2Rlcz1bcl0sdGhpcy5vcGVuPTAsdGhpcy5maW5kPWUuZmluZFBvc2l0aW9ucyx0aGlzLm5lZWRzQmxvY2s9ITF9LGt0PXt0b3A6e30sY3VycmVudFBvczp7fX07ZnVuY3Rpb24gU3QodCl7Zm9yKHZhciBlPXQuZmlyc3RDaGlsZCxuPW51bGw7ZTtlPWUubmV4dFNpYmxpbmcpe3ZhciByPTE9PWUubm9kZVR5cGU/ZS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpOm51bGw7ciYmdnQuaGFzT3duUHJvcGVydHkocikmJm4/KG4uYXBwZW5kQ2hpbGQoZSksZT1uKToibGkiPT1yP249ZTpyJiYobj1udWxsKX19ZnVuY3Rpb24gQ3QodCxlKXtyZXR1cm4odC5tYXRjaGVzfHx0Lm1zTWF0Y2hlc1NlbGVjdG9yfHx0LndlYmtpdE1hdGNoZXNTZWxlY3Rvcnx8dC5tb3pNYXRjaGVzU2VsZWN0b3IpLmNhbGwodCxlKX1mdW5jdGlvbiBPdCh0KXt2YXIgZSxuPS9ccyooW1x3LV0rKVxzKjpccyooW147XSspL2cscj1bXTt3aGlsZShlPW4uZXhlYyh0KSlyLnB1c2goZVsxXSxlWzJdLnRyaW0oKSk7cmV0dXJuIHJ9ZnVuY3Rpb24gTXQodCl7dmFyIGU9e307Zm9yKHZhciBuIGluIHQpZVtuXT10W25dO3JldHVybiBlfWt0LnRvcC5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5ub2Rlc1t0aGlzLm9wZW5dfSxidC5wcm90b3R5cGUuYWRkRE9NPWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXM7aWYoMz09dC5ub2RlVHlwZSl0aGlzLmFkZFRleHROb2RlKHQpO2Vsc2UgaWYoMT09dC5ub2RlVHlwZSl7dmFyIG49dC5nZXRBdHRyaWJ1dGUoInN0eWxlIikscj1uP3RoaXMucmVhZFN0eWxlcyhPdChuKSk6bnVsbDtpZihudWxsIT1yKWZvcih2YXIgbz0wO288ci5sZW5ndGg7bysrKWUuYWRkUGVuZGluZ01hcmsocltvXSk7aWYodGhpcy5hZGRFbGVtZW50KHQpLG51bGwhPXIpZm9yKHZhciBpPTA7aTxyLmxlbmd0aDtpKyspZS5yZW1vdmVQZW5kaW5nTWFyayhyW2ldKX19LGJ0LnByb3RvdHlwZS5hZGRUZXh0Tm9kZT1mdW5jdGlvbih0KXt2YXIgZT10Lm5vZGVWYWx1ZSxuPXRoaXMudG9wO2lmKChuLnR5cGU/bi50eXBlLmlubGluZUNvbnRlbnQ6bi5jb250ZW50Lmxlbmd0aCYmbi5jb250ZW50WzBdLmlzSW5saW5lKXx8L1teIFx0XHJcblx1MDAwY10vLnRlc3QoZSkpe2lmKG4ub3B0aW9ucyZtdCluLm9wdGlvbnMmeXR8fChlPWUucmVwbGFjZSgvXHI/XG58XHIvZywiICIpKTtlbHNlIGlmKGU9ZS5yZXBsYWNlKC9bIFx0XHJcblx1MDAwY10rL2csIiAiKSwvXlsgXHRcclxuXHUwMDBjXS8udGVzdChlKSYmdGhpcy5vcGVuPT10aGlzLm5vZGVzLmxlbmd0aC0xKXt2YXIgcj1uLmNvbnRlbnRbbi5jb250ZW50Lmxlbmd0aC0xXSxvPXQucHJldmlvdXNTaWJsaW5nOyghcnx8byYmIkJSIj09by5ub2RlTmFtZXx8ci5pc1RleHQmJi9bIFx0XHJcblx1MDAwY10kLy50ZXN0KHIudGV4dCkpJiYoZT1lLnNsaWNlKDEpKX1lJiZ0aGlzLmluc2VydE5vZGUodGhpcy5wYXJzZXIuc2NoZW1hLnRleHQoZSkpLHRoaXMuZmluZEluVGV4dCh0KX1lbHNlIHRoaXMuZmluZEluc2lkZSh0KX0sYnQucHJvdG90eXBlLmFkZEVsZW1lbnQ9ZnVuY3Rpb24odCl7dmFyIGU9dC5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpO3Z0Lmhhc093blByb3BlcnR5KGUpJiZTdCh0KTt2YXIgbj10aGlzLm9wdGlvbnMucnVsZUZyb21Ob2RlJiZ0aGlzLm9wdGlvbnMucnVsZUZyb21Ob2RlKHQpfHx0aGlzLnBhcnNlci5tYXRjaFRhZyh0LHRoaXMpO2lmKG4/bi5pZ25vcmU6ZHQuaGFzT3duUHJvcGVydHkoZSkpdGhpcy5maW5kSW5zaWRlKHQpO2Vsc2UgaWYoIW58fG4uc2tpcCl7biYmbi5za2lwLm5vZGVUeXBlJiYodD1uLnNraXApO3ZhciByLG89dGhpcy50b3AsaT10aGlzLm5lZWRzQmxvY2s7aWYoZnQuaGFzT3duUHJvcGVydHkoZSkpcj0hMCxvLnR5cGV8fCh0aGlzLm5lZWRzQmxvY2s9ITApO2Vsc2UgaWYoIXQuZmlyc3RDaGlsZClyZXR1cm4gdm9pZCB0aGlzLmxlYWZGYWxsYmFjayh0KTt0aGlzLmFkZEFsbCh0KSxyJiZ0aGlzLnN5bmMobyksdGhpcy5uZWVkc0Jsb2NrPWl9ZWxzZSB0aGlzLmFkZEVsZW1lbnRCeVJ1bGUodCxuKX0sYnQucHJvdG90eXBlLmxlYWZGYWxsYmFjaz1mdW5jdGlvbih0KXsiQlIiPT10Lm5vZGVOYW1lJiZ0aGlzLnRvcC50eXBlJiZ0aGlzLnRvcC50eXBlLmlubGluZUNvbnRlbnQmJnRoaXMuYWRkVGV4dE5vZGUodC5vd25lckRvY3VtZW50LmNyZWF0ZVRleHROb2RlKCJcbiIpKX0sYnQucHJvdG90eXBlLnJlYWRTdHlsZXM9ZnVuY3Rpb24odCl7Zm9yKHZhciBlPXRoaXMsbj1oLm5vbmUscj0wO3I8dC5sZW5ndGg7cis9Mil7dmFyIG89ZS5wYXJzZXIubWF0Y2hTdHlsZSh0W3JdLHRbcisxXSxlKTtpZihvKXtpZihvLmlnbm9yZSlyZXR1cm4gbnVsbDtuPWUucGFyc2VyLnNjaGVtYS5tYXJrc1tvLm1hcmtdLmNyZWF0ZShvLmF0dHJzKS5hZGRUb1NldChuKX19cmV0dXJuIG59LGJ0LnByb3RvdHlwZS5hZGRFbGVtZW50QnlSdWxlPWZ1bmN0aW9uKHQsZSl7dmFyIG4scixvLGkscz10aGlzO2Uubm9kZT8ocj10aGlzLnBhcnNlci5zY2hlbWEubm9kZXNbZS5ub2RlXSxyLmlzTGVhZj90aGlzLmluc2VydE5vZGUoci5jcmVhdGUoZS5hdHRycykpfHx0aGlzLmxlYWZGYWxsYmFjayh0KTpuPXRoaXMuZW50ZXIocixlLmF0dHJzLGUucHJlc2VydmVXaGl0ZXNwYWNlKSk6KG89dGhpcy5wYXJzZXIuc2NoZW1hLm1hcmtzW2UubWFya10saT1vLmNyZWF0ZShlLmF0dHJzKSx0aGlzLmFkZFBlbmRpbmdNYXJrKGkpKTt2YXIgYT10aGlzLnRvcDtpZihyJiZyLmlzTGVhZil0aGlzLmZpbmRJbnNpZGUodCk7ZWxzZSBpZihlLmdldENvbnRlbnQpdGhpcy5maW5kSW5zaWRlKHQpLGUuZ2V0Q29udGVudCh0LHRoaXMucGFyc2VyLnNjaGVtYSkuZm9yRWFjaCgoZnVuY3Rpb24odCl7cmV0dXJuIHMuaW5zZXJ0Tm9kZSh0KX0pKTtlbHNle3ZhciBjPWUuY29udGVudEVsZW1lbnQ7InN0cmluZyI9PXR5cGVvZiBjP2M9dC5xdWVyeVNlbGVjdG9yKGMpOiJmdW5jdGlvbiI9PXR5cGVvZiBjJiYoYz1jKHQpKSxjfHwoYz10KSx0aGlzLmZpbmRBcm91bmQodCxjLCEwKSx0aGlzLmFkZEFsbChjLG4pfW4mJih0aGlzLnN5bmMoYSksdGhpcy5vcGVuLS0pLGkmJnRoaXMucmVtb3ZlUGVuZGluZ01hcmsoaSl9LGJ0LnByb3RvdHlwZS5hZGRBbGw9ZnVuY3Rpb24odCxlLG4scil7Zm9yKHZhciBvPXRoaXMsaT1ufHwwLHM9bj90LmNoaWxkTm9kZXNbbl06dC5maXJzdENoaWxkLGE9bnVsbD09cj9udWxsOnQuY2hpbGROb2Rlc1tyXTtzIT1hO3M9cy5uZXh0U2libGluZywrK2kpby5maW5kQXRQb2ludCh0LGkpLG8uYWRkRE9NKHMpLGUmJmZ0Lmhhc093blByb3BlcnR5KHMubm9kZU5hbWUudG9Mb3dlckNhc2UoKSkmJm8uc3luYyhlKTt0aGlzLmZpbmRBdFBvaW50KHQsaSl9LGJ0LnByb3RvdHlwZS5maW5kUGxhY2U9ZnVuY3Rpb24odCl7Zm9yKHZhciBlLG4scj10aGlzLG89dGhpcy5vcGVuO28+PTA7by0tKXt2YXIgaT1yLm5vZGVzW29dLHM9aS5maW5kV3JhcHBpbmcodCk7aWYocyYmKCFlfHxlLmxlbmd0aD5zLmxlbmd0aCkmJihlPXMsbj1pLCFzLmxlbmd0aCkpYnJlYWs7aWYoaS5zb2xpZClicmVha31pZighZSlyZXR1cm4hMTt0aGlzLnN5bmMobik7Zm9yKHZhciBhPTA7YTxlLmxlbmd0aDthKyspci5lbnRlcklubmVyKGVbYV0sbnVsbCwhMSk7cmV0dXJuITB9LGJ0LnByb3RvdHlwZS5pbnNlcnROb2RlPWZ1bmN0aW9uKHQpe2lmKHQuaXNJbmxpbmUmJnRoaXMubmVlZHNCbG9jayYmIXRoaXMudG9wLnR5cGUpe3ZhciBlPXRoaXMudGV4dGJsb2NrRnJvbUNvbnRleHQoKTtlJiZ0aGlzLmVudGVySW5uZXIoZSl9aWYodGhpcy5maW5kUGxhY2UodCkpe3RoaXMuY2xvc2VFeHRyYSgpO3ZhciBuPXRoaXMudG9wO3RoaXMuYXBwbHlQZW5kaW5nTWFya3Mobiksbi5tYXRjaCYmKG4ubWF0Y2g9bi5tYXRjaC5tYXRjaFR5cGUodC50eXBlKSk7Zm9yKHZhciByPW4uYWN0aXZlTWFya3Msbz0wO288dC5tYXJrcy5sZW5ndGg7bysrKW4udHlwZSYmIW4udHlwZS5hbGxvd3NNYXJrVHlwZSh0Lm1hcmtzW29dLnR5cGUpfHwocj10Lm1hcmtzW29dLmFkZFRvU2V0KHIpKTtyZXR1cm4gbi5jb250ZW50LnB1c2godC5tYXJrKHIpKSwhMH1yZXR1cm4hMX0sYnQucHJvdG90eXBlLmFwcGx5UGVuZGluZ01hcmtzPWZ1bmN0aW9uKHQpe2Zvcih2YXIgZT10aGlzLG49MDtuPHRoaXMucGVuZGluZ01hcmtzLmxlbmd0aDtuKyspe3ZhciByPWUucGVuZGluZ01hcmtzW25dO3QudHlwZSYmIXQudHlwZS5hbGxvd3NNYXJrVHlwZShyLnR5cGUpfHxyLmlzSW5TZXQodC5hY3RpdmVNYXJrcyl8fCh0LmFjdGl2ZU1hcmtzPXIuYWRkVG9TZXQodC5hY3RpdmVNYXJrcyksZS5wZW5kaW5nTWFya3Muc3BsaWNlKG4tLSwxKSl9fSxidC5wcm90b3R5cGUuZW50ZXI9ZnVuY3Rpb24odCxlLG4pe3ZhciByPXRoaXMuZmluZFBsYWNlKHQuY3JlYXRlKGUpKTtyZXR1cm4gciYmKHRoaXMuYXBwbHlQZW5kaW5nTWFya3ModGhpcy50b3ApLHRoaXMuZW50ZXJJbm5lcih0LGUsITAsbikpLHJ9LGJ0LnByb3RvdHlwZS5lbnRlcklubmVyPWZ1bmN0aW9uKHQsZSxuLHIpe3RoaXMuY2xvc2VFeHRyYSgpO3ZhciBvPXRoaXMudG9wO28ubWF0Y2g9by5tYXRjaCYmby5tYXRjaC5tYXRjaFR5cGUodCxlKTt2YXIgaT1udWxsPT1yP28ub3B0aW9ucyZ+Z3Q6d3Qocik7by5vcHRpb25zJmd0JiYwPT1vLmNvbnRlbnQubGVuZ3RoJiYoaXw9Z3QpLHRoaXMubm9kZXMucHVzaChuZXcgeHQodCxlLG8uYWN0aXZlTWFya3MsbixudWxsLGkpKSx0aGlzLm9wZW4rK30sYnQucHJvdG90eXBlLmNsb3NlRXh0cmE9ZnVuY3Rpb24odCl7dmFyIGU9dGhpcyxuPXRoaXMubm9kZXMubGVuZ3RoLTE7aWYobj50aGlzLm9wZW4pe2Zvcig7bj50aGlzLm9wZW47bi0tKWUubm9kZXNbbi0xXS5jb250ZW50LnB1c2goZS5ub2Rlc1tuXS5maW5pc2godCkpO3RoaXMubm9kZXMubGVuZ3RoPXRoaXMub3BlbisxfX0sYnQucHJvdG90eXBlLmZpbmlzaD1mdW5jdGlvbigpe3JldHVybiB0aGlzLm9wZW49MCx0aGlzLmNsb3NlRXh0cmEodGhpcy5pc09wZW4pLHRoaXMubm9kZXNbMF0uZmluaXNoKHRoaXMuaXNPcGVufHx0aGlzLm9wdGlvbnMudG9wT3Blbil9LGJ0LnByb3RvdHlwZS5zeW5jPWZ1bmN0aW9uKHQpe2Zvcih2YXIgZT10aGlzLG49dGhpcy5vcGVuO24+PTA7bi0tKWlmKGUubm9kZXNbbl09PXQpcmV0dXJuIHZvaWQoZS5vcGVuPW4pfSxidC5wcm90b3R5cGUuYWRkUGVuZGluZ01hcms9ZnVuY3Rpb24odCl7dGhpcy5wZW5kaW5nTWFya3MucHVzaCh0KX0sYnQucHJvdG90eXBlLnJlbW92ZVBlbmRpbmdNYXJrPWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMucGVuZGluZ01hcmtzLmxhc3RJbmRleE9mKHQpO2lmKGU+LTEpdGhpcy5wZW5kaW5nTWFya3Muc3BsaWNlKGUsMSk7ZWxzZXt2YXIgbj10aGlzLnRvcDtuLmFjdGl2ZU1hcmtzPXQucmVtb3ZlRnJvbVNldChuLmFjdGl2ZU1hcmtzKX19LGt0LmN1cnJlbnRQb3MuZ2V0PWZ1bmN0aW9uKCl7dmFyIHQ9dGhpczt0aGlzLmNsb3NlRXh0cmEoKTtmb3IodmFyIGU9MCxuPXRoaXMub3BlbjtuPj0wO24tLSl7Zm9yKHZhciByPXQubm9kZXNbbl0uY29udGVudCxvPXIubGVuZ3RoLTE7bz49MDtvLS0pZSs9cltvXS5ub2RlU2l6ZTtuJiZlKyt9cmV0dXJuIGV9LGJ0LnByb3RvdHlwZS5maW5kQXRQb2ludD1mdW5jdGlvbih0LGUpe3ZhciBuPXRoaXM7aWYodGhpcy5maW5kKWZvcih2YXIgcj0wO3I8dGhpcy5maW5kLmxlbmd0aDtyKyspbi5maW5kW3JdLm5vZGU9PXQmJm4uZmluZFtyXS5vZmZzZXQ9PWUmJihuLmZpbmRbcl0ucG9zPW4uY3VycmVudFBvcyl9LGJ0LnByb3RvdHlwZS5maW5kSW5zaWRlPWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXM7aWYodGhpcy5maW5kKWZvcih2YXIgbj0wO248dGhpcy5maW5kLmxlbmd0aDtuKyspbnVsbD09ZS5maW5kW25dLnBvcyYmMT09dC5ub2RlVHlwZSYmdC5jb250YWlucyhlLmZpbmRbbl0ubm9kZSkmJihlLmZpbmRbbl0ucG9zPWUuY3VycmVudFBvcyl9LGJ0LnByb3RvdHlwZS5maW5kQXJvdW5kPWZ1bmN0aW9uKHQsZSxuKXt2YXIgcj10aGlzO2lmKHQhPWUmJnRoaXMuZmluZClmb3IodmFyIG89MDtvPHRoaXMuZmluZC5sZW5ndGg7bysrKWlmKG51bGw9PXIuZmluZFtvXS5wb3MmJjE9PXQubm9kZVR5cGUmJnQuY29udGFpbnMoci5maW5kW29dLm5vZGUpKXt2YXIgaT1lLmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uKHIuZmluZFtvXS5ub2RlKTtpJihuPzI6NCkmJihyLmZpbmRbb10ucG9zPXIuY3VycmVudFBvcyl9fSxidC5wcm90b3R5cGUuZmluZEluVGV4dD1mdW5jdGlvbih0KXt2YXIgZT10aGlzO2lmKHRoaXMuZmluZClmb3IodmFyIG49MDtuPHRoaXMuZmluZC5sZW5ndGg7bisrKWUuZmluZFtuXS5ub2RlPT10JiYoZS5maW5kW25dLnBvcz1lLmN1cnJlbnRQb3MtKHQubm9kZVZhbHVlLmxlbmd0aC1lLmZpbmRbbl0ub2Zmc2V0KSl9LGJ0LnByb3RvdHlwZS5tYXRjaGVzQ29udGV4dD1mdW5jdGlvbih0KXt2YXIgZT10aGlzO2lmKHQuaW5kZXhPZigifCIpPi0xKXJldHVybiB0LnNwbGl0KC9ccypcfFxzKi8pLnNvbWUodGhpcy5tYXRjaGVzQ29udGV4dCx0aGlzKTt2YXIgbj10LnNwbGl0KCIvIikscj10aGlzLm9wdGlvbnMuY29udGV4dCxvPSF0aGlzLmlzT3BlbiYmKCFyfHxyLnBhcmVudC50eXBlPT10aGlzLm5vZGVzWzBdLnR5cGUpLGk9LShyP3IuZGVwdGgrMTowKSsobz8wOjEpLHM9ZnVuY3Rpb24odCxhKXtmb3IoO3Q+PTA7dC0tKXt2YXIgYz1uW3RdO2lmKCIiPT1jKXtpZih0PT1uLmxlbmd0aC0xfHwwPT10KWNvbnRpbnVlO2Zvcig7YT49aTthLS0paWYocyh0LTEsYSkpcmV0dXJuITA7cmV0dXJuITF9dmFyIGw9YT4wfHwwPT1hJiZvP2Uubm9kZXNbYV0udHlwZTpyJiZhPj1pP3Iubm9kZShhLWkpLnR5cGU6bnVsbDtpZighbHx8bC5uYW1lIT1jJiYtMT09bC5ncm91cHMuaW5kZXhPZihjKSlyZXR1cm4hMTthLS19cmV0dXJuITB9O3JldHVybiBzKG4ubGVuZ3RoLTEsdGhpcy5vcGVuKX0sYnQucHJvdG90eXBlLnRleHRibG9ja0Zyb21Db250ZXh0PWZ1bmN0aW9uKCl7dmFyIHQ9dGhpcyxlPXRoaXMub3B0aW9ucy5jb250ZXh0O2lmKGUpZm9yKHZhciBuPWUuZGVwdGg7bj49MDtuLS0pe3ZhciByPWUubm9kZShuKS5jb250ZW50TWF0Y2hBdChlLmluZGV4QWZ0ZXIobikpLmRlZmF1bHRUeXBlO2lmKHImJnIuaXNUZXh0YmxvY2smJnIuZGVmYXVsdEF0dHJzKXJldHVybiByfWZvcih2YXIgbyBpbiB0LnBhcnNlci5zY2hlbWEubm9kZXMpe3ZhciBpPXQucGFyc2VyLnNjaGVtYS5ub2Rlc1tvXTtpZihpLmlzVGV4dGJsb2NrJiZpLmRlZmF1bHRBdHRycylyZXR1cm4gaX19LE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKGJ0LnByb3RvdHlwZSxrdCk7dmFyIFR0PWZ1bmN0aW9uKHQsZSl7dGhpcy5ub2Rlcz10fHx7fSx0aGlzLm1hcmtzPWV8fHt9fTtmdW5jdGlvbiBOdCh0KXt2YXIgZT17fTtmb3IodmFyIG4gaW4gdCl7dmFyIHI9dFtuXS5zcGVjLnRvRE9NO3ImJihlW25dPXIpfXJldHVybiBlfWZ1bmN0aW9uIEV0KHQpe3JldHVybiB0LmRvY3VtZW50fHx3aW5kb3cuZG9jdW1lbnR9VHQucHJvdG90eXBlLnNlcmlhbGl6ZUZyYWdtZW50PWZ1bmN0aW9uKHQsZSxuKXt2YXIgcj10aGlzO3ZvaWQgMD09PWUmJihlPXt9KSxufHwobj1FdChlKS5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCkpO3ZhciBvPW4saT1udWxsO3JldHVybiB0LmZvckVhY2goKGZ1bmN0aW9uKHQpe2lmKGl8fHQubWFya3MubGVuZ3RoKXtpfHwoaT1bXSk7dmFyIG49MCxzPTA7d2hpbGUobjxpLmxlbmd0aCYmczx0Lm1hcmtzLmxlbmd0aCl7dmFyIGE9dC5tYXJrc1tzXTtpZihyLm1hcmtzW2EudHlwZS5uYW1lXSl7aWYoIWEuZXEoaVtuXSl8fCExPT09YS50eXBlLnNwZWMuc3Bhbm5pbmcpYnJlYWs7bis9MixzKyt9ZWxzZSBzKyt9d2hpbGUobjxpLmxlbmd0aClvPWkucG9wKCksaS5wb3AoKTt3aGlsZShzPHQubWFya3MubGVuZ3RoKXt2YXIgYz10Lm1hcmtzW3MrK10sbD1yLnNlcmlhbGl6ZU1hcmsoYyx0LmlzSW5saW5lLGUpO2wmJihpLnB1c2goYyxvKSxvLmFwcGVuZENoaWxkKGwuZG9tKSxvPWwuY29udGVudERPTXx8bC5kb20pfX1vLmFwcGVuZENoaWxkKHIuc2VyaWFsaXplTm9kZSh0LGUpKX0pKSxufSxUdC5wcm90b3R5cGUuc2VyaWFsaXplTm9kZT1mdW5jdGlvbih0LGUpe3ZvaWQgMD09PWUmJihlPXt9KTt2YXIgbj1UdC5yZW5kZXJTcGVjKEV0KGUpLHRoaXMubm9kZXNbdC50eXBlLm5hbWVdKHQpKSxyPW4uZG9tLG89bi5jb250ZW50RE9NO2lmKG8pe2lmKHQuaXNMZWFmKXRocm93IG5ldyBSYW5nZUVycm9yKCJDb250ZW50IGhvbGUgbm90IGFsbG93ZWQgaW4gYSBsZWFmIG5vZGUgc3BlYyIpO2Uub25Db250ZW50P2Uub25Db250ZW50KHQsbyxlKTp0aGlzLnNlcmlhbGl6ZUZyYWdtZW50KHQuY29udGVudCxlLG8pfXJldHVybiByfSxUdC5wcm90b3R5cGUuc2VyaWFsaXplTm9kZUFuZE1hcmtzPWZ1bmN0aW9uKHQsZSl7dmFyIG49dGhpczt2b2lkIDA9PT1lJiYoZT17fSk7Zm9yKHZhciByPXRoaXMuc2VyaWFsaXplTm9kZSh0LGUpLG89dC5tYXJrcy5sZW5ndGgtMTtvPj0wO28tLSl7dmFyIGk9bi5zZXJpYWxpemVNYXJrKHQubWFya3Nbb10sdC5pc0lubGluZSxlKTtpJiYoKGkuY29udGVudERPTXx8aS5kb20pLmFwcGVuZENoaWxkKHIpLHI9aS5kb20pfXJldHVybiByfSxUdC5wcm90b3R5cGUuc2VyaWFsaXplTWFyaz1mdW5jdGlvbih0LGUsbil7dm9pZCAwPT09biYmKG49e30pO3ZhciByPXRoaXMubWFya3NbdC50eXBlLm5hbWVdO3JldHVybiByJiZUdC5yZW5kZXJTcGVjKEV0KG4pLHIodCxlKSl9LFR0LnJlbmRlclNwZWM9ZnVuY3Rpb24odCxlKXtpZigic3RyaW5nIj09dHlwZW9mIGUpcmV0dXJue2RvbTp0LmNyZWF0ZVRleHROb2RlKGUpfTtpZihudWxsIT1lLm5vZGVUeXBlKXJldHVybntkb206ZX07dmFyIG49dC5jcmVhdGVFbGVtZW50KGVbMF0pLHI9bnVsbCxvPWVbMV0saT0xO2lmKG8mJiJvYmplY3QiPT10eXBlb2YgbyYmbnVsbD09by5ub2RlVHlwZSYmIUFycmF5LmlzQXJyYXkobykpZm9yKHZhciBzIGluIGk9MixvKW51bGwhPW9bc10mJm4uc2V0QXR0cmlidXRlKHMsb1tzXSk7Zm9yKHZhciBhPWk7YTxlLmxlbmd0aDthKyspe3ZhciBjPWVbYV07aWYoMD09PWMpe2lmKGE8ZS5sZW5ndGgtMXx8YT5pKXRocm93IG5ldyBSYW5nZUVycm9yKCJDb250ZW50IGhvbGUgbXVzdCBiZSB0aGUgb25seSBjaGlsZCBvZiBpdHMgcGFyZW50IG5vZGUiKTtyZXR1cm57ZG9tOm4sY29udGVudERPTTpufX12YXIgbD1UdC5yZW5kZXJTcGVjKHQsYykscD1sLmRvbSx1PWwuY29udGVudERPTTtpZihuLmFwcGVuZENoaWxkKHApLHUpe2lmKHIpdGhyb3cgbmV3IFJhbmdlRXJyb3IoIk11bHRpcGxlIGNvbnRlbnQgaG9sZXMiKTtyPXV9fXJldHVybntkb206bixjb250ZW50RE9NOnJ9fSxUdC5mcm9tU2NoZW1hPWZ1bmN0aW9uKHQpe3JldHVybiB0LmNhY2hlZC5kb21TZXJpYWxpemVyfHwodC5jYWNoZWQuZG9tU2VyaWFsaXplcj1uZXcgVHQodGhpcy5ub2Rlc0Zyb21TY2hlbWEodCksdGhpcy5tYXJrc0Zyb21TY2hlbWEodCkpKX0sVHQubm9kZXNGcm9tU2NoZW1hPWZ1bmN0aW9uKHQpe3ZhciBlPU50KHQubm9kZXMpO3JldHVybiBlLnRleHR8fChlLnRleHQ9ZnVuY3Rpb24odCl7cmV0dXJuIHQudGV4dH0pLGV9LFR0Lm1hcmtzRnJvbVNjaGVtYT1mdW5jdGlvbih0KXtyZXR1cm4gTnQodC5tYXJrcyl9LGUuTm9kZT1fLGUuUmVzb2x2ZWRQb3M9TixlLk5vZGVSYW5nZT16LGUuRnJhZ21lbnQ9YSxlLlNsaWNlPWQsZS5SZXBsYWNlRXJyb3I9ZixlLk1hcms9aCxlLlNjaGVtYT1wdCxlLk5vZGVUeXBlPWl0LGUuTWFya1R5cGU9bHQsZS5Db250ZW50TWF0Y2g9JCxlLkRPTVBhcnNlcj1odCxlLkRPTVNlcmlhbGl6ZXI9VHR9LGFjNmE6ZnVuY3Rpb24odCxlLG4pe2Zvcih2YXIgcj1uKCJjYWRmIiksbz1uKCIwZDU4IiksaT1uKCIyYWJhIikscz1uKCI3NzI2IiksYT1uKCIzMmU5IiksYz1uKCI4NGYyIiksbD1uKCIyYjRjIikscD1sKCJpdGVyYXRvciIpLHU9bCgidG9TdHJpbmdUYWciKSxoPWMuQXJyYXksZj17Q1NTUnVsZUxpc3Q6ITAsQ1NTU3R5bGVEZWNsYXJhdGlvbjohMSxDU1NWYWx1ZUxpc3Q6ITEsQ2xpZW50UmVjdExpc3Q6ITEsRE9NUmVjdExpc3Q6ITEsRE9NU3RyaW5nTGlzdDohMSxET01Ub2tlbkxpc3Q6ITAsRGF0YVRyYW5zZmVySXRlbUxpc3Q6ITEsRmlsZUxpc3Q6ITEsSFRNTEFsbENvbGxlY3Rpb246ITEsSFRNTENvbGxlY3Rpb246ITEsSFRNTEZvcm1FbGVtZW50OiExLEhUTUxTZWxlY3RFbGVtZW50OiExLE1lZGlhTGlzdDohMCxNaW1lVHlwZUFycmF5OiExLE5hbWVkTm9kZU1hcDohMSxOb2RlTGlzdDohMCxQYWludFJlcXVlc3RMaXN0OiExLFBsdWdpbjohMSxQbHVnaW5BcnJheTohMSxTVkdMZW5ndGhMaXN0OiExLFNWR051bWJlckxpc3Q6ITEsU1ZHUGF0aFNlZ0xpc3Q6ITEsU1ZHUG9pbnRMaXN0OiExLFNWR1N0cmluZ0xpc3Q6ITEsU1ZHVHJhbnNmb3JtTGlzdDohMSxTb3VyY2VCdWZmZXJMaXN0OiExLFN0eWxlU2hlZXRMaXN0OiEwLFRleHRUcmFja0N1ZUxpc3Q6ITEsVGV4dFRyYWNrTGlzdDohMSxUb3VjaExpc3Q6ITF9LGQ9byhmKSx2PTA7djxkLmxlbmd0aDt2Kyspe3ZhciBtLHk9ZFt2XSxnPWZbeV0sdz1zW3ldLHg9dyYmdy5wcm90b3R5cGU7aWYoeCYmKHhbcF18fGEoeCxwLGgpLHhbdV18fGEoeCx1LHkpLGNbeV09aCxnKSlmb3IobSBpbiByKXhbbV18fGkoeCxtLHJbbV0sITApfX0sYWViZDpmdW5jdGlvbih0LGUpe3QuZXhwb3J0cz1mdW5jdGlvbih0LGUpe3JldHVybntlbnVtZXJhYmxlOiEoMSZ0KSxjb25maWd1cmFibGU6ISgyJnQpLHdyaXRhYmxlOiEoNCZ0KSx2YWx1ZTplfX19LGI0NDc6ZnVuY3Rpb24odCxlLG4pe3ZhciByPW4oIjNhMzgiKSxvPU1hdGgubWluO3QuZXhwb3J0cz1mdW5jdGlvbih0KXtyZXR1cm4gdD4wP28ocih0KSw5MDA3MTk5MjU0NzQwOTkxKTowfX0sYjhlMzpmdW5jdGlvbih0LGUpe3QuZXhwb3J0cz0hMH0sYjkyMzpmdW5jdGlvbih0LGUsbil7InVzZSBzdHJpY3QiO09iamVjdC5kZWZpbmVQcm9wZXJ0eShlLCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KTt2YXIgcj1uKCI2ZjI3Iiksbz02NTUzNSxpPU1hdGgucG93KDIsMTYpO2Z1bmN0aW9uIHModCxlKXtyZXR1cm4gdCtlKml9ZnVuY3Rpb24gYSh0KXtyZXR1cm4gdCZvfWZ1bmN0aW9uIGModCl7cmV0dXJuKHQtKHQmbykpL2l9dmFyIGw9ZnVuY3Rpb24odCxlLG4pe3ZvaWQgMD09PWUmJihlPSExKSx2b2lkIDA9PT1uJiYobj1udWxsKSx0aGlzLnBvcz10LHRoaXMuZGVsZXRlZD1lLHRoaXMucmVjb3Zlcj1ufSxwPWZ1bmN0aW9uKHQsZSl7dm9pZCAwPT09ZSYmKGU9ITEpLHRoaXMucmFuZ2VzPXQsdGhpcy5pbnZlcnRlZD1lfTtwLnByb3RvdHlwZS5yZWNvdmVyPWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMsbj0wLHI9YSh0KTtpZighdGhpcy5pbnZlcnRlZClmb3IodmFyIG89MDtvPHI7bysrKW4rPWUucmFuZ2VzWzMqbysyXS1lLnJhbmdlc1szKm8rMV07cmV0dXJuIHRoaXMucmFuZ2VzWzMqcl0rbitjKHQpfSxwLnByb3RvdHlwZS5tYXBSZXN1bHQ9ZnVuY3Rpb24odCxlKXtyZXR1cm4gdm9pZCAwPT09ZSYmKGU9MSksdGhpcy5fbWFwKHQsZSwhMSl9LHAucHJvdG90eXBlLm1hcD1mdW5jdGlvbih0LGUpe3JldHVybiB2b2lkIDA9PT1lJiYoZT0xKSx0aGlzLl9tYXAodCxlLCEwKX0scC5wcm90b3R5cGUuX21hcD1mdW5jdGlvbih0LGUsbil7Zm9yKHZhciByPXRoaXMsbz0wLGk9dGhpcy5pbnZlcnRlZD8yOjEsYT10aGlzLmludmVydGVkPzE6MixjPTA7Yzx0aGlzLnJhbmdlcy5sZW5ndGg7Yys9Myl7dmFyIHA9ci5yYW5nZXNbY10tKHIuaW52ZXJ0ZWQ/bzowKTtpZihwPnQpYnJlYWs7dmFyIHU9ci5yYW5nZXNbYytpXSxoPXIucmFuZ2VzW2MrYV0sZj1wK3U7aWYodDw9Zil7dmFyIGQ9dT90PT1wPy0xOnQ9PWY/MTplOmUsdj1wK28rKGQ8MD8wOmgpO2lmKG4pcmV0dXJuIHY7dmFyIG09cyhjLzMsdC1wKTtyZXR1cm4gbmV3IGwodixlPDA/dCE9cDp0IT1mLG0pfW8rPWgtdX1yZXR1cm4gbj90K286bmV3IGwodCtvKX0scC5wcm90b3R5cGUudG91Y2hlcz1mdW5jdGlvbih0LGUpe2Zvcih2YXIgbj10aGlzLHI9MCxvPWEoZSksaT10aGlzLmludmVydGVkPzI6MSxzPXRoaXMuaW52ZXJ0ZWQ/MToyLGM9MDtjPHRoaXMucmFuZ2VzLmxlbmd0aDtjKz0zKXt2YXIgbD1uLnJhbmdlc1tjXS0obi5pbnZlcnRlZD9yOjApO2lmKGw+dClicmVhazt2YXIgcD1uLnJhbmdlc1tjK2ldLHU9bCtwO2lmKHQ8PXUmJmM9PTMqbylyZXR1cm4hMDtyKz1uLnJhbmdlc1tjK3NdLXB9cmV0dXJuITF9LHAucHJvdG90eXBlLmZvckVhY2g9ZnVuY3Rpb24odCl7Zm9yKHZhciBlPXRoaXMsbj10aGlzLmludmVydGVkPzI6MSxyPXRoaXMuaW52ZXJ0ZWQ/MToyLG89MCxpPTA7bzx0aGlzLnJhbmdlcy5sZW5ndGg7bys9Myl7dmFyIHM9ZS5yYW5nZXNbb10sYT1zLShlLmludmVydGVkP2k6MCksYz1zKyhlLmludmVydGVkPzA6aSksbD1lLnJhbmdlc1tvK25dLHA9ZS5yYW5nZXNbbytyXTt0KGEsYStsLGMsYytwKSxpKz1wLWx9fSxwLnByb3RvdHlwZS5pbnZlcnQ9ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IHAodGhpcy5yYW5nZXMsIXRoaXMuaW52ZXJ0ZWQpfSxwLnByb3RvdHlwZS50b1N0cmluZz1mdW5jdGlvbigpe3JldHVybih0aGlzLmludmVydGVkPyItIjoiIikrSlNPTi5zdHJpbmdpZnkodGhpcy5yYW5nZXMpfSxwLm9mZnNldD1mdW5jdGlvbih0KXtyZXR1cm4gMD09dD9wLmVtcHR5Om5ldyBwKHQ8MD9bMCwtdCwwXTpbMCwwLHRdKX0scC5lbXB0eT1uZXcgcChbXSk7dmFyIHU9ZnVuY3Rpb24odCxlLG4scil7dGhpcy5tYXBzPXR8fFtdLHRoaXMuZnJvbT1ufHwwLHRoaXMudG89bnVsbD09cj90aGlzLm1hcHMubGVuZ3RoOnIsdGhpcy5taXJyb3I9ZX07ZnVuY3Rpb24gaCh0KXt2YXIgZT1FcnJvci5jYWxsKHRoaXMsdCk7cmV0dXJuIGUuX19wcm90b19fPWgucHJvdG90eXBlLGV9dS5wcm90b3R5cGUuc2xpY2U9ZnVuY3Rpb24odCxlKXtyZXR1cm4gdm9pZCAwPT09dCYmKHQ9MCksdm9pZCAwPT09ZSYmKGU9dGhpcy5tYXBzLmxlbmd0aCksbmV3IHUodGhpcy5tYXBzLHRoaXMubWlycm9yLHQsZSl9LHUucHJvdG90eXBlLmNvcHk9ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IHUodGhpcy5tYXBzLnNsaWNlKCksdGhpcy5taXJyb3ImJnRoaXMubWlycm9yLnNsaWNlKCksdGhpcy5mcm9tLHRoaXMudG8pfSx1LnByb3RvdHlwZS5hcHBlbmRNYXA9ZnVuY3Rpb24odCxlKXt0aGlzLnRvPXRoaXMubWFwcy5wdXNoKHQpLG51bGwhPWUmJnRoaXMuc2V0TWlycm9yKHRoaXMubWFwcy5sZW5ndGgtMSxlKX0sdS5wcm90b3R5cGUuYXBwZW5kTWFwcGluZz1mdW5jdGlvbih0KXtmb3IodmFyIGU9dGhpcyxuPTAscj10aGlzLm1hcHMubGVuZ3RoO248dC5tYXBzLmxlbmd0aDtuKyspe3ZhciBvPXQuZ2V0TWlycm9yKG4pO2UuYXBwZW5kTWFwKHQubWFwc1tuXSxudWxsIT1vJiZvPG4/citvOm51bGwpfX0sdS5wcm90b3R5cGUuZ2V0TWlycm9yPWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXM7aWYodGhpcy5taXJyb3IpZm9yKHZhciBuPTA7bjx0aGlzLm1pcnJvci5sZW5ndGg7bisrKWlmKGUubWlycm9yW25dPT10KXJldHVybiBlLm1pcnJvcltuKyhuJTI/LTE6MSldfSx1LnByb3RvdHlwZS5zZXRNaXJyb3I9ZnVuY3Rpb24odCxlKXt0aGlzLm1pcnJvcnx8KHRoaXMubWlycm9yPVtdKSx0aGlzLm1pcnJvci5wdXNoKHQsZSl9LHUucHJvdG90eXBlLmFwcGVuZE1hcHBpbmdJbnZlcnRlZD1mdW5jdGlvbih0KXtmb3IodmFyIGU9dGhpcyxuPXQubWFwcy5sZW5ndGgtMSxyPXRoaXMubWFwcy5sZW5ndGgrdC5tYXBzLmxlbmd0aDtuPj0wO24tLSl7dmFyIG89dC5nZXRNaXJyb3Iobik7ZS5hcHBlbmRNYXAodC5tYXBzW25dLmludmVydCgpLG51bGwhPW8mJm8+bj9yLW8tMTpudWxsKX19LHUucHJvdG90eXBlLmludmVydD1mdW5jdGlvbigpe3ZhciB0PW5ldyB1O3JldHVybiB0LmFwcGVuZE1hcHBpbmdJbnZlcnRlZCh0aGlzKSx0fSx1LnByb3RvdHlwZS5tYXA9ZnVuY3Rpb24odCxlKXt2YXIgbj10aGlzO2lmKHZvaWQgMD09PWUmJihlPTEpLHRoaXMubWlycm9yKXJldHVybiB0aGlzLl9tYXAodCxlLCEwKTtmb3IodmFyIHI9dGhpcy5mcm9tO3I8dGhpcy50bztyKyspdD1uLm1hcHNbcl0ubWFwKHQsZSk7cmV0dXJuIHR9LHUucHJvdG90eXBlLm1hcFJlc3VsdD1mdW5jdGlvbih0LGUpe3JldHVybiB2b2lkIDA9PT1lJiYoZT0xKSx0aGlzLl9tYXAodCxlLCExKX0sdS5wcm90b3R5cGUuX21hcD1mdW5jdGlvbih0LGUsbil7Zm9yKHZhciByPXRoaXMsbz0hMSxpPW51bGwscz10aGlzLmZyb207czx0aGlzLnRvO3MrKyl7dmFyIGE9ci5tYXBzW3NdLGM9aSYmaVtzXTtpZihudWxsIT1jJiZhLnRvdWNoZXModCxjKSl0PWEucmVjb3ZlcihjKTtlbHNle3ZhciBwPWEubWFwUmVzdWx0KHQsZSk7aWYobnVsbCE9cC5yZWNvdmVyKXt2YXIgdT1yLmdldE1pcnJvcihzKTtpZihudWxsIT11JiZ1PnMmJnU8ci50byl7aWYocC5kZWxldGVkKXtzPXUsdD1yLm1hcHNbdV0ucmVjb3ZlcihwLnJlY292ZXIpO2NvbnRpbnVlfShpfHwoaT1PYmplY3QuY3JlYXRlKG51bGwpKSlbdV09cC5yZWNvdmVyfX1wLmRlbGV0ZWQmJihvPSEwKSx0PXAucG9zfX1yZXR1cm4gbj90Om5ldyBsKHQsbyl9LGgucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoRXJyb3IucHJvdG90eXBlKSxoLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1oLGgucHJvdG90eXBlLm5hbWU9IlRyYW5zZm9ybUVycm9yIjt2YXIgZj1mdW5jdGlvbih0KXt0aGlzLmRvYz10LHRoaXMuc3RlcHM9W10sdGhpcy5kb2NzPVtdLHRoaXMubWFwcGluZz1uZXcgdX0sZD17YmVmb3JlOnt9LGRvY0NoYW5nZWQ6e319O2Z1bmN0aW9uIHYoKXt0aHJvdyBuZXcgRXJyb3IoIk92ZXJyaWRlIG1lIil9ZC5iZWZvcmUuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZG9jcy5sZW5ndGg/dGhpcy5kb2NzWzBdOnRoaXMuZG9jfSxmLnByb3RvdHlwZS5zdGVwPWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMubWF5YmVTdGVwKHQpO2lmKGUuZmFpbGVkKXRocm93IG5ldyBoKGUuZmFpbGVkKTtyZXR1cm4gdGhpc30sZi5wcm90b3R5cGUubWF5YmVTdGVwPWZ1bmN0aW9uKHQpe3ZhciBlPXQuYXBwbHkodGhpcy5kb2MpO3JldHVybiBlLmZhaWxlZHx8dGhpcy5hZGRTdGVwKHQsZS5kb2MpLGV9LGQuZG9jQ2hhbmdlZC5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5zdGVwcy5sZW5ndGg+MH0sZi5wcm90b3R5cGUuYWRkU3RlcD1mdW5jdGlvbih0LGUpe3RoaXMuZG9jcy5wdXNoKHRoaXMuZG9jKSx0aGlzLnN0ZXBzLnB1c2godCksdGhpcy5tYXBwaW5nLmFwcGVuZE1hcCh0LmdldE1hcCgpKSx0aGlzLmRvYz1lfSxPYmplY3QuZGVmaW5lUHJvcGVydGllcyhmLnByb3RvdHlwZSxkKTt2YXIgbT1PYmplY3QuY3JlYXRlKG51bGwpLHk9ZnVuY3Rpb24oKXt9O3kucHJvdG90eXBlLmFwcGx5PWZ1bmN0aW9uKHQpe3JldHVybiB2KCl9LHkucHJvdG90eXBlLmdldE1hcD1mdW5jdGlvbigpe3JldHVybiBwLmVtcHR5fSx5LnByb3RvdHlwZS5pbnZlcnQ9ZnVuY3Rpb24odCl7cmV0dXJuIHYoKX0seS5wcm90b3R5cGUubWFwPWZ1bmN0aW9uKHQpe3JldHVybiB2KCl9LHkucHJvdG90eXBlLm1lcmdlPWZ1bmN0aW9uKHQpe3JldHVybiBudWxsfSx5LnByb3RvdHlwZS50b0pTT049ZnVuY3Rpb24oKXtyZXR1cm4gdigpfSx5LmZyb21KU09OPWZ1bmN0aW9uKHQsZSl7aWYoIWV8fCFlLnN0ZXBUeXBlKXRocm93IG5ldyBSYW5nZUVycm9yKCJJbnZhbGlkIGlucHV0IGZvciBTdGVwLmZyb21KU09OIik7dmFyIG49bVtlLnN0ZXBUeXBlXTtpZighbil0aHJvdyBuZXcgUmFuZ2VFcnJvcigiTm8gc3RlcCB0eXBlICIrZS5zdGVwVHlwZSsiIGRlZmluZWQiKTtyZXR1cm4gbi5mcm9tSlNPTih0LGUpfSx5Lmpzb25JRD1mdW5jdGlvbih0LGUpe2lmKHQgaW4gbSl0aHJvdyBuZXcgUmFuZ2VFcnJvcigiRHVwbGljYXRlIHVzZSBvZiBzdGVwIEpTT04gSUQgIit0KTtyZXR1cm4gbVt0XT1lLGUucHJvdG90eXBlLmpzb25JRD10LGV9O3ZhciBnPWZ1bmN0aW9uKHQsZSl7dGhpcy5kb2M9dCx0aGlzLmZhaWxlZD1lfTtnLm9rPWZ1bmN0aW9uKHQpe3JldHVybiBuZXcgZyh0LG51bGwpfSxnLmZhaWw9ZnVuY3Rpb24odCl7cmV0dXJuIG5ldyBnKG51bGwsdCl9LGcuZnJvbVJlcGxhY2U9ZnVuY3Rpb24odCxlLG4sbyl7dHJ5e3JldHVybiBnLm9rKHQucmVwbGFjZShlLG4sbykpfWNhdGNoKGkpe2lmKGkgaW5zdGFuY2VvZiByLlJlcGxhY2VFcnJvcilyZXR1cm4gZy5mYWlsKGkubWVzc2FnZSk7dGhyb3cgaX19O3ZhciB3PWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoZSxuLHIsbyl7dC5jYWxsKHRoaXMpLHRoaXMuZnJvbT1lLHRoaXMudG89bix0aGlzLnNsaWNlPXIsdGhpcy5zdHJ1Y3R1cmU9ISFvfXJldHVybiB0JiYoZS5fX3Byb3RvX189dCksZS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZSh0JiZ0LnByb3RvdHlwZSksZS5wcm90b3R5cGUuY29uc3RydWN0b3I9ZSxlLnByb3RvdHlwZS5hcHBseT1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5zdHJ1Y3R1cmUmJmIodCx0aGlzLmZyb20sdGhpcy50byk/Zy5mYWlsKCJTdHJ1Y3R1cmUgcmVwbGFjZSB3b3VsZCBvdmVyd3JpdGUgY29udGVudCIpOmcuZnJvbVJlcGxhY2UodCx0aGlzLmZyb20sdGhpcy50byx0aGlzLnNsaWNlKX0sZS5wcm90b3R5cGUuZ2V0TWFwPWZ1bmN0aW9uKCl7cmV0dXJuIG5ldyBwKFt0aGlzLmZyb20sdGhpcy50by10aGlzLmZyb20sdGhpcy5zbGljZS5zaXplXSl9LGUucHJvdG90eXBlLmludmVydD1mdW5jdGlvbih0KXtyZXR1cm4gbmV3IGUodGhpcy5mcm9tLHRoaXMuZnJvbSt0aGlzLnNsaWNlLnNpemUsdC5zbGljZSh0aGlzLmZyb20sdGhpcy50bykpfSxlLnByb3RvdHlwZS5tYXA9ZnVuY3Rpb24odCl7dmFyIG49dC5tYXBSZXN1bHQodGhpcy5mcm9tLDEpLHI9dC5tYXBSZXN1bHQodGhpcy50bywtMSk7cmV0dXJuIG4uZGVsZXRlZCYmci5kZWxldGVkP251bGw6bmV3IGUobi5wb3MsTWF0aC5tYXgobi5wb3Msci5wb3MpLHRoaXMuc2xpY2UpfSxlLnByb3RvdHlwZS5tZXJnZT1mdW5jdGlvbih0KXtpZighKHQgaW5zdGFuY2VvZiBlKXx8dC5zdHJ1Y3R1cmUhPXRoaXMuc3RydWN0dXJlKXJldHVybiBudWxsO2lmKHRoaXMuZnJvbSt0aGlzLnNsaWNlLnNpemUhPXQuZnJvbXx8dGhpcy5zbGljZS5vcGVuRW5kfHx0LnNsaWNlLm9wZW5TdGFydCl7aWYodC50byE9dGhpcy5mcm9tfHx0aGlzLnNsaWNlLm9wZW5TdGFydHx8dC5zbGljZS5vcGVuRW5kKXJldHVybiBudWxsO3ZhciBuPXRoaXMuc2xpY2Uuc2l6ZSt0LnNsaWNlLnNpemU9PTA/ci5TbGljZS5lbXB0eTpuZXcgci5TbGljZSh0LnNsaWNlLmNvbnRlbnQuYXBwZW5kKHRoaXMuc2xpY2UuY29udGVudCksdC5zbGljZS5vcGVuU3RhcnQsdGhpcy5zbGljZS5vcGVuRW5kKTtyZXR1cm4gbmV3IGUodC5mcm9tLHRoaXMudG8sbix0aGlzLnN0cnVjdHVyZSl9dmFyIG89dGhpcy5zbGljZS5zaXplK3Quc2xpY2Uuc2l6ZT09MD9yLlNsaWNlLmVtcHR5Om5ldyByLlNsaWNlKHRoaXMuc2xpY2UuY29udGVudC5hcHBlbmQodC5zbGljZS5jb250ZW50KSx0aGlzLnNsaWNlLm9wZW5TdGFydCx0LnNsaWNlLm9wZW5FbmQpO3JldHVybiBuZXcgZSh0aGlzLmZyb20sdGhpcy50bysodC50by10LmZyb20pLG8sdGhpcy5zdHJ1Y3R1cmUpfSxlLnByb3RvdHlwZS50b0pTT049ZnVuY3Rpb24oKXt2YXIgdD17c3RlcFR5cGU6InJlcGxhY2UiLGZyb206dGhpcy5mcm9tLHRvOnRoaXMudG99O3JldHVybiB0aGlzLnNsaWNlLnNpemUmJih0LnNsaWNlPXRoaXMuc2xpY2UudG9KU09OKCkpLHRoaXMuc3RydWN0dXJlJiYodC5zdHJ1Y3R1cmU9ITApLHR9LGUuZnJvbUpTT049ZnVuY3Rpb24odCxuKXtpZigibnVtYmVyIiE9dHlwZW9mIG4uZnJvbXx8Im51bWJlciIhPXR5cGVvZiBuLnRvKXRocm93IG5ldyBSYW5nZUVycm9yKCJJbnZhbGlkIGlucHV0IGZvciBSZXBsYWNlU3RlcC5mcm9tSlNPTiIpO3JldHVybiBuZXcgZShuLmZyb20sbi50byxyLlNsaWNlLmZyb21KU09OKHQsbi5zbGljZSksISFuLnN0cnVjdHVyZSl9LGV9KHkpO3kuanNvbklEKCJyZXBsYWNlIix3KTt2YXIgeD1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKGUsbixyLG8saSxzLGEpe3QuY2FsbCh0aGlzKSx0aGlzLmZyb209ZSx0aGlzLnRvPW4sdGhpcy5nYXBGcm9tPXIsdGhpcy5nYXBUbz1vLHRoaXMuc2xpY2U9aSx0aGlzLmluc2VydD1zLHRoaXMuc3RydWN0dXJlPSEhYX1yZXR1cm4gdCYmKGUuX19wcm90b19fPXQpLGUucHJvdG90eXBlPU9iamVjdC5jcmVhdGUodCYmdC5wcm90b3R5cGUpLGUucHJvdG90eXBlLmNvbnN0cnVjdG9yPWUsZS5wcm90b3R5cGUuYXBwbHk9ZnVuY3Rpb24odCl7aWYodGhpcy5zdHJ1Y3R1cmUmJihiKHQsdGhpcy5mcm9tLHRoaXMuZ2FwRnJvbSl8fGIodCx0aGlzLmdhcFRvLHRoaXMudG8pKSlyZXR1cm4gZy5mYWlsKCJTdHJ1Y3R1cmUgZ2FwLXJlcGxhY2Ugd291bGQgb3ZlcndyaXRlIGNvbnRlbnQiKTt2YXIgZT10LnNsaWNlKHRoaXMuZ2FwRnJvbSx0aGlzLmdhcFRvKTtpZihlLm9wZW5TdGFydHx8ZS5vcGVuRW5kKXJldHVybiBnLmZhaWwoIkdhcCBpcyBub3QgYSBmbGF0IHJhbmdlIik7dmFyIG49dGhpcy5zbGljZS5pbnNlcnRBdCh0aGlzLmluc2VydCxlLmNvbnRlbnQpO3JldHVybiBuP2cuZnJvbVJlcGxhY2UodCx0aGlzLmZyb20sdGhpcy50byxuKTpnLmZhaWwoIkNvbnRlbnQgZG9lcyBub3QgZml0IGluIGdhcCIpfSxlLnByb3RvdHlwZS5nZXRNYXA9ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IHAoW3RoaXMuZnJvbSx0aGlzLmdhcEZyb20tdGhpcy5mcm9tLHRoaXMuaW5zZXJ0LHRoaXMuZ2FwVG8sdGhpcy50by10aGlzLmdhcFRvLHRoaXMuc2xpY2Uuc2l6ZS10aGlzLmluc2VydF0pfSxlLnByb3RvdHlwZS5pbnZlcnQ9ZnVuY3Rpb24odCl7dmFyIG49dGhpcy5nYXBUby10aGlzLmdhcEZyb207cmV0dXJuIG5ldyBlKHRoaXMuZnJvbSx0aGlzLmZyb20rdGhpcy5zbGljZS5zaXplK24sdGhpcy5mcm9tK3RoaXMuaW5zZXJ0LHRoaXMuZnJvbSt0aGlzLmluc2VydCtuLHQuc2xpY2UodGhpcy5mcm9tLHRoaXMudG8pLnJlbW92ZUJldHdlZW4odGhpcy5nYXBGcm9tLXRoaXMuZnJvbSx0aGlzLmdhcFRvLXRoaXMuZnJvbSksdGhpcy5nYXBGcm9tLXRoaXMuZnJvbSx0aGlzLnN0cnVjdHVyZSl9LGUucHJvdG90eXBlLm1hcD1mdW5jdGlvbih0KXt2YXIgbj10Lm1hcFJlc3VsdCh0aGlzLmZyb20sMSkscj10Lm1hcFJlc3VsdCh0aGlzLnRvLC0xKSxvPXQubWFwKHRoaXMuZ2FwRnJvbSwtMSksaT10Lm1hcCh0aGlzLmdhcFRvLDEpO3JldHVybiBuLmRlbGV0ZWQmJnIuZGVsZXRlZHx8bzxuLnBvc3x8aT5yLnBvcz9udWxsOm5ldyBlKG4ucG9zLHIucG9zLG8saSx0aGlzLnNsaWNlLHRoaXMuaW5zZXJ0LHRoaXMuc3RydWN0dXJlKX0sZS5wcm90b3R5cGUudG9KU09OPWZ1bmN0aW9uKCl7dmFyIHQ9e3N0ZXBUeXBlOiJyZXBsYWNlQXJvdW5kIixmcm9tOnRoaXMuZnJvbSx0bzp0aGlzLnRvLGdhcEZyb206dGhpcy5nYXBGcm9tLGdhcFRvOnRoaXMuZ2FwVG8saW5zZXJ0OnRoaXMuaW5zZXJ0fTtyZXR1cm4gdGhpcy5zbGljZS5zaXplJiYodC5zbGljZT10aGlzLnNsaWNlLnRvSlNPTigpKSx0aGlzLnN0cnVjdHVyZSYmKHQuc3RydWN0dXJlPSEwKSx0fSxlLmZyb21KU09OPWZ1bmN0aW9uKHQsbil7aWYoIm51bWJlciIhPXR5cGVvZiBuLmZyb218fCJudW1iZXIiIT10eXBlb2Ygbi50b3x8Im51bWJlciIhPXR5cGVvZiBuLmdhcEZyb218fCJudW1iZXIiIT10eXBlb2Ygbi5nYXBUb3x8Im51bWJlciIhPXR5cGVvZiBuLmluc2VydCl0aHJvdyBuZXcgUmFuZ2VFcnJvcigiSW52YWxpZCBpbnB1dCBmb3IgUmVwbGFjZUFyb3VuZFN0ZXAuZnJvbUpTT04iKTtyZXR1cm4gbmV3IGUobi5mcm9tLG4udG8sbi5nYXBGcm9tLG4uZ2FwVG8sci5TbGljZS5mcm9tSlNPTih0LG4uc2xpY2UpLG4uaW5zZXJ0LCEhbi5zdHJ1Y3R1cmUpfSxlfSh5KTtmdW5jdGlvbiBiKHQsZSxuKXt2YXIgcj10LnJlc29sdmUoZSksbz1uLWUsaT1yLmRlcHRoO3doaWxlKG8+MCYmaT4wJiZyLmluZGV4QWZ0ZXIoaSk9PXIubm9kZShpKS5jaGlsZENvdW50KWktLSxvLS07aWYobz4wKXt2YXIgcz1yLm5vZGUoaSkubWF5YmVDaGlsZChyLmluZGV4QWZ0ZXIoaSkpO3doaWxlKG8+MCl7aWYoIXN8fHMuaXNMZWFmKXJldHVybiEwO3M9cy5maXJzdENoaWxkLG8tLX19cmV0dXJuITF9ZnVuY3Rpb24gayh0LGUsbil7cmV0dXJuKDA9PWV8fHQuY2FuUmVwbGFjZShlLHQuY2hpbGRDb3VudCkpJiYobj09dC5jaGlsZENvdW50fHx0LmNhblJlcGxhY2UoMCxuKSl9ZnVuY3Rpb24gUyh0KXtmb3IodmFyIGU9dC5wYXJlbnQsbj1lLmNvbnRlbnQuY3V0QnlJbmRleCh0LnN0YXJ0SW5kZXgsdC5lbmRJbmRleCkscj10LmRlcHRoOzstLXIpe3ZhciBvPXQuJGZyb20ubm9kZShyKSxpPXQuJGZyb20uaW5kZXgocikscz10LiR0by5pbmRleEFmdGVyKHIpO2lmKHI8dC5kZXB0aCYmby5jYW5SZXBsYWNlKGkscyxuKSlyZXR1cm4gcjtpZigwPT1yfHxvLnR5cGUuc3BlYy5pc29sYXRpbmd8fCFrKG8saSxzKSlicmVha319ZnVuY3Rpb24gQyh0LGUsbixyKXt2b2lkIDA9PT1yJiYocj10KTt2YXIgbz1NKHQsZSksaT1vJiZUKHIsZSk7cmV0dXJuIGk/by5tYXAoTykuY29uY2F0KHt0eXBlOmUsYXR0cnM6bn0pLmNvbmNhdChpLm1hcChPKSk6bnVsbH1mdW5jdGlvbiBPKHQpe3JldHVybnt0eXBlOnQsYXR0cnM6bnVsbH19ZnVuY3Rpb24gTSh0LGUpe3ZhciBuPXQucGFyZW50LHI9dC5zdGFydEluZGV4LG89dC5lbmRJbmRleCxpPW4uY29udGVudE1hdGNoQXQocikuZmluZFdyYXBwaW5nKGUpO2lmKCFpKXJldHVybiBudWxsO3ZhciBzPWkubGVuZ3RoP2lbMF06ZTtyZXR1cm4gbi5jYW5SZXBsYWNlV2l0aChyLG8scyk/aTpudWxsfWZ1bmN0aW9uIFQodCxlKXt2YXIgbj10LnBhcmVudCxyPXQuc3RhcnRJbmRleCxvPXQuZW5kSW5kZXgsaT1uLmNoaWxkKHIpLHM9ZS5jb250ZW50TWF0Y2guZmluZFdyYXBwaW5nKGkudHlwZSk7aWYoIXMpcmV0dXJuIG51bGw7Zm9yKHZhciBhPXMubGVuZ3RoP3Nbcy5sZW5ndGgtMV06ZSxjPWEuY29udGVudE1hdGNoLGw9cjtjJiZsPG87bCsrKWM9Yy5tYXRjaFR5cGUobi5jaGlsZChsKS50eXBlKTtyZXR1cm4gYyYmYy52YWxpZEVuZD9zOm51bGx9ZnVuY3Rpb24gTih0LGUsbil7dmFyIHI9dC5yZXNvbHZlKGUpLG89ci5pbmRleCgpO3JldHVybiByLnBhcmVudC5jYW5SZXBsYWNlV2l0aChvLG8rMSxuKX1mdW5jdGlvbiBFKHQsZSxuLHIpe3ZvaWQgMD09PW4mJihuPTEpO3ZhciBvPXQucmVzb2x2ZShlKSxpPW8uZGVwdGgtbixzPXImJnJbci5sZW5ndGgtMV18fG8ucGFyZW50O2lmKGk8MHx8by5wYXJlbnQudHlwZS5zcGVjLmlzb2xhdGluZ3x8IW8ucGFyZW50LmNhblJlcGxhY2Uoby5pbmRleCgpLG8ucGFyZW50LmNoaWxkQ291bnQpfHwhcy50eXBlLnZhbGlkQ29udGVudChvLnBhcmVudC5jb250ZW50LmN1dEJ5SW5kZXgoby5pbmRleCgpLG8ucGFyZW50LmNoaWxkQ291bnQpKSlyZXR1cm4hMTtmb3IodmFyIGE9by5kZXB0aC0xLGM9bi0yO2E+aTthLS0sYy0tKXt2YXIgbD1vLm5vZGUoYSkscD1vLmluZGV4KGEpO2lmKGwudHlwZS5zcGVjLmlzb2xhdGluZylyZXR1cm4hMTt2YXIgdT1sLmNvbnRlbnQuY3V0QnlJbmRleChwLGwuY2hpbGRDb3VudCksaD1yJiZyW2NdfHxsO2lmKGghPWwmJih1PXUucmVwbGFjZUNoaWxkKDAsaC50eXBlLmNyZWF0ZShoLmF0dHJzKSkpLCFsLmNhblJlcGxhY2UocCsxLGwuY2hpbGRDb3VudCl8fCFoLnR5cGUudmFsaWRDb250ZW50KHUpKXJldHVybiExfXZhciBmPW8uaW5kZXhBZnRlcihpKSxkPXImJnJbMF07cmV0dXJuIG8ubm9kZShpKS5jYW5SZXBsYWNlV2l0aChmLGYsZD9kLnR5cGU6by5ub2RlKGkrMSkudHlwZSl9ZnVuY3Rpb24gQSh0LGUpe3ZhciBuPXQucmVzb2x2ZShlKSxyPW4uaW5kZXgoKTtyZXR1cm4gUihuLm5vZGVCZWZvcmUsbi5ub2RlQWZ0ZXIpJiZuLnBhcmVudC5jYW5SZXBsYWNlKHIscisxKX1mdW5jdGlvbiBSKHQsZSl7cmV0dXJuIHQmJmUmJiF0LmlzTGVhZiYmdC5jYW5BcHBlbmQoZSl9ZnVuY3Rpb24gRCh0LGUsbil7dm9pZCAwPT09biYmKG49LTEpO2Zvcih2YXIgcj10LnJlc29sdmUoZSksbz1yLmRlcHRoOztvLS0pe3ZhciBpPXZvaWQgMCxzPXZvaWQgMDtpZihvPT1yLmRlcHRoPyhpPXIubm9kZUJlZm9yZSxzPXIubm9kZUFmdGVyKTpuPjA/KGk9ci5ub2RlKG8rMSkscz1yLm5vZGUobykubWF5YmVDaGlsZChyLmluZGV4KG8pKzEpKTooaT1yLm5vZGUobykubWF5YmVDaGlsZChyLmluZGV4KG8pLTEpLHM9ci5ub2RlKG8rMSkpLGkmJiFpLmlzVGV4dGJsb2NrJiZSKGkscykpcmV0dXJuIGU7aWYoMD09bylicmVhaztlPW48MD9yLmJlZm9yZShvKTpyLmFmdGVyKG8pfX1mdW5jdGlvbiB6KHQsZSxuKXt2YXIgcj10LnJlc29sdmUoZSk7aWYoci5wYXJlbnQuY2FuUmVwbGFjZVdpdGgoci5pbmRleCgpLHIuaW5kZXgoKSxuKSlyZXR1cm4gZTtpZigwPT1yLnBhcmVudE9mZnNldClmb3IodmFyIG89ci5kZXB0aC0xO28+PTA7by0tKXt2YXIgaT1yLmluZGV4KG8pO2lmKHIubm9kZShvKS5jYW5SZXBsYWNlV2l0aChpLGksbikpcmV0dXJuIHIuYmVmb3JlKG8rMSk7aWYoaT4wKXJldHVybiBudWxsfWlmKHIucGFyZW50T2Zmc2V0PT1yLnBhcmVudC5jb250ZW50LnNpemUpZm9yKHZhciBzPXIuZGVwdGgtMTtzPj0wO3MtLSl7dmFyIGE9ci5pbmRleEFmdGVyKHMpO2lmKHIubm9kZShzKS5jYW5SZXBsYWNlV2l0aChhLGEsbikpcmV0dXJuIHIuYWZ0ZXIocysxKTtpZihhPHIubm9kZShzKS5jaGlsZENvdW50KXJldHVybiBudWxsfX1mdW5jdGlvbiBQKHQsZSxuKXt2YXIgcj10LnJlc29sdmUoZSk7aWYoIW4uY29udGVudC5zaXplKXJldHVybiBlO2Zvcih2YXIgbz1uLmNvbnRlbnQsaT0wO2k8bi5vcGVuU3RhcnQ7aSsrKW89by5maXJzdENoaWxkLmNvbnRlbnQ7Zm9yKHZhciBzPTE7czw9KDA9PW4ub3BlblN0YXJ0JiZuLnNpemU/MjoxKTtzKyspZm9yKHZhciBhPXIuZGVwdGg7YT49MDthLS0pe3ZhciBjPWE9PXIuZGVwdGg/MDpyLnBvczw9KHIuc3RhcnQoYSsxKStyLmVuZChhKzEpKS8yPy0xOjEsbD1yLmluZGV4KGEpKyhjPjA/MTowKTtpZigxPT1zP3Iubm9kZShhKS5jYW5SZXBsYWNlKGwsbCxvKTpyLm5vZGUoYSkuY29udGVudE1hdGNoQXQobCkuZmluZFdyYXBwaW5nKG8uZmlyc3RDaGlsZC50eXBlKSlyZXR1cm4gMD09Yz9yLnBvczpjPDA/ci5iZWZvcmUoYSsxKTpyLmFmdGVyKGErMSl9cmV0dXJuIG51bGx9ZnVuY3Rpb24gSSh0LGUsbil7Zm9yKHZhciBvPVtdLGk9MDtpPHQuY2hpbGRDb3VudDtpKyspe3ZhciBzPXQuY2hpbGQoaSk7cy5jb250ZW50LnNpemUmJihzPXMuY29weShJKHMuY29udGVudCxlLHMpKSkscy5pc0lubGluZSYmKHM9ZShzLG4saSkpLG8ucHVzaChzKX1yZXR1cm4gci5GcmFnbWVudC5mcm9tQXJyYXkobyl9eS5qc29uSUQoInJlcGxhY2VBcm91bmQiLHgpLGYucHJvdG90eXBlLmxpZnQ9ZnVuY3Rpb24odCxlKXtmb3IodmFyIG49dC4kZnJvbSxvPXQuJHRvLGk9dC5kZXB0aCxzPW4uYmVmb3JlKGkrMSksYT1vLmFmdGVyKGkrMSksYz1zLGw9YSxwPXIuRnJhZ21lbnQuZW1wdHksdT0wLGg9aSxmPSExO2g+ZTtoLS0pZnx8bi5pbmRleChoKT4wPyhmPSEwLHA9ci5GcmFnbWVudC5mcm9tKG4ubm9kZShoKS5jb3B5KHApKSx1KyspOmMtLTtmb3IodmFyIGQ9ci5GcmFnbWVudC5lbXB0eSx2PTAsbT1pLHk9ITE7bT5lO20tLSl5fHxvLmFmdGVyKG0rMSk8by5lbmQobSk/KHk9ITAsZD1yLkZyYWdtZW50LmZyb20oby5ub2RlKG0pLmNvcHkoZCkpLHYrKyk6bCsrO3JldHVybiB0aGlzLnN0ZXAobmV3IHgoYyxsLHMsYSxuZXcgci5TbGljZShwLmFwcGVuZChkKSx1LHYpLHAuc2l6ZS11LCEwKSl9LGYucHJvdG90eXBlLndyYXA9ZnVuY3Rpb24odCxlKXtmb3IodmFyIG49ci5GcmFnbWVudC5lbXB0eSxvPWUubGVuZ3RoLTE7bz49MDtvLS0pbj1yLkZyYWdtZW50LmZyb20oZVtvXS50eXBlLmNyZWF0ZShlW29dLmF0dHJzLG4pKTt2YXIgaT10LnN0YXJ0LHM9dC5lbmQ7cmV0dXJuIHRoaXMuc3RlcChuZXcgeChpLHMsaSxzLG5ldyByLlNsaWNlKG4sMCwwKSxlLmxlbmd0aCwhMCkpfSxmLnByb3RvdHlwZS5zZXRCbG9ja1R5cGU9ZnVuY3Rpb24odCxlLG4sbyl7dmFyIGk9dGhpcztpZih2b2lkIDA9PT1lJiYoZT10KSwhbi5pc1RleHRibG9jayl0aHJvdyBuZXcgUmFuZ2VFcnJvcigiVHlwZSBnaXZlbiB0byBzZXRCbG9ja1R5cGUgc2hvdWxkIGJlIGEgdGV4dGJsb2NrIik7dmFyIHM9dGhpcy5zdGVwcy5sZW5ndGg7cmV0dXJuIHRoaXMuZG9jLm5vZGVzQmV0d2Vlbih0LGUsKGZ1bmN0aW9uKHQsZSl7aWYodC5pc1RleHRibG9jayYmIXQuaGFzTWFya3VwKG4sbykmJk4oaS5kb2MsaS5tYXBwaW5nLnNsaWNlKHMpLm1hcChlKSxuKSl7aS5jbGVhckluY29tcGF0aWJsZShpLm1hcHBpbmcuc2xpY2UocykubWFwKGUsMSksbik7dmFyIGE9aS5tYXBwaW5nLnNsaWNlKHMpLGM9YS5tYXAoZSwxKSxsPWEubWFwKGUrdC5ub2RlU2l6ZSwxKTtyZXR1cm4gaS5zdGVwKG5ldyB4KGMsbCxjKzEsbC0xLG5ldyByLlNsaWNlKHIuRnJhZ21lbnQuZnJvbShuLmNyZWF0ZShvLG51bGwsdC5tYXJrcykpLDAsMCksMSwhMCkpLCExfX0pKSx0aGlzfSxmLnByb3RvdHlwZS5zZXROb2RlTWFya3VwPWZ1bmN0aW9uKHQsZSxuLG8pe3ZhciBpPXRoaXMuZG9jLm5vZGVBdCh0KTtpZighaSl0aHJvdyBuZXcgUmFuZ2VFcnJvcigiTm8gbm9kZSBhdCBnaXZlbiBwb3NpdGlvbiIpO2V8fChlPWkudHlwZSk7dmFyIHM9ZS5jcmVhdGUobixudWxsLG98fGkubWFya3MpO2lmKGkuaXNMZWFmKXJldHVybiB0aGlzLnJlcGxhY2VXaXRoKHQsdCtpLm5vZGVTaXplLHMpO2lmKCFlLnZhbGlkQ29udGVudChpLmNvbnRlbnQpKXRocm93IG5ldyBSYW5nZUVycm9yKCJJbnZhbGlkIGNvbnRlbnQgZm9yIG5vZGUgdHlwZSAiK2UubmFtZSk7cmV0dXJuIHRoaXMuc3RlcChuZXcgeCh0LHQraS5ub2RlU2l6ZSx0KzEsdCtpLm5vZGVTaXplLTEsbmV3IHIuU2xpY2Uoci5GcmFnbWVudC5mcm9tKHMpLDAsMCksMSwhMCkpfSxmLnByb3RvdHlwZS5zcGxpdD1mdW5jdGlvbih0LGUsbil7dm9pZCAwPT09ZSYmKGU9MSk7Zm9yKHZhciBvPXRoaXMuZG9jLnJlc29sdmUodCksaT1yLkZyYWdtZW50LmVtcHR5LHM9ci5GcmFnbWVudC5lbXB0eSxhPW8uZGVwdGgsYz1vLmRlcHRoLWUsbD1lLTE7YT5jO2EtLSxsLS0pe2k9ci5GcmFnbWVudC5mcm9tKG8ubm9kZShhKS5jb3B5KGkpKTt2YXIgcD1uJiZuW2xdO3M9ci5GcmFnbWVudC5mcm9tKHA/cC50eXBlLmNyZWF0ZShwLmF0dHJzLHMpOm8ubm9kZShhKS5jb3B5KHMpKX1yZXR1cm4gdGhpcy5zdGVwKG5ldyB3KHQsdCxuZXcgci5TbGljZShpLmFwcGVuZChzKSxlLGUpLCEwKSl9LGYucHJvdG90eXBlLmpvaW49ZnVuY3Rpb24odCxlKXt2b2lkIDA9PT1lJiYoZT0xKTt2YXIgbj1uZXcgdyh0LWUsdCtlLHIuU2xpY2UuZW1wdHksITApO3JldHVybiB0aGlzLnN0ZXAobil9O3ZhciBfPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoZSxuLHIpe3QuY2FsbCh0aGlzKSx0aGlzLmZyb209ZSx0aGlzLnRvPW4sdGhpcy5tYXJrPXJ9cmV0dXJuIHQmJihlLl9fcHJvdG9fXz10KSxlLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKHQmJnQucHJvdG90eXBlKSxlLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1lLGUucHJvdG90eXBlLmFwcGx5PWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMsbj10LnNsaWNlKHRoaXMuZnJvbSx0aGlzLnRvKSxvPXQucmVzb2x2ZSh0aGlzLmZyb20pLGk9by5ub2RlKG8uc2hhcmVkRGVwdGgodGhpcy50bykpLHM9bmV3IHIuU2xpY2UoSShuLmNvbnRlbnQsKGZ1bmN0aW9uKHQsbil7cmV0dXJuIG4udHlwZS5hbGxvd3NNYXJrVHlwZShlLm1hcmsudHlwZSk/dC5tYXJrKGUubWFyay5hZGRUb1NldCh0Lm1hcmtzKSk6dH0pLGkpLG4ub3BlblN0YXJ0LG4ub3BlbkVuZCk7cmV0dXJuIGcuZnJvbVJlcGxhY2UodCx0aGlzLmZyb20sdGhpcy50byxzKX0sZS5wcm90b3R5cGUuaW52ZXJ0PWZ1bmN0aW9uKCl7cmV0dXJuIG5ldyBGKHRoaXMuZnJvbSx0aGlzLnRvLHRoaXMubWFyayl9LGUucHJvdG90eXBlLm1hcD1mdW5jdGlvbih0KXt2YXIgbj10Lm1hcFJlc3VsdCh0aGlzLmZyb20sMSkscj10Lm1hcFJlc3VsdCh0aGlzLnRvLC0xKTtyZXR1cm4gbi5kZWxldGVkJiZyLmRlbGV0ZWR8fG4ucG9zPj1yLnBvcz9udWxsOm5ldyBlKG4ucG9zLHIucG9zLHRoaXMubWFyayl9LGUucHJvdG90eXBlLm1lcmdlPWZ1bmN0aW9uKHQpe2lmKHQgaW5zdGFuY2VvZiBlJiZ0Lm1hcmsuZXEodGhpcy5tYXJrKSYmdGhpcy5mcm9tPD10LnRvJiZ0aGlzLnRvPj10LmZyb20pcmV0dXJuIG5ldyBlKE1hdGgubWluKHRoaXMuZnJvbSx0LmZyb20pLE1hdGgubWF4KHRoaXMudG8sdC50byksdGhpcy5tYXJrKX0sZS5wcm90b3R5cGUudG9KU09OPWZ1bmN0aW9uKCl7cmV0dXJue3N0ZXBUeXBlOiJhZGRNYXJrIixtYXJrOnRoaXMubWFyay50b0pTT04oKSxmcm9tOnRoaXMuZnJvbSx0bzp0aGlzLnRvfX0sZS5mcm9tSlNPTj1mdW5jdGlvbih0LG4pe2lmKCJudW1iZXIiIT10eXBlb2Ygbi5mcm9tfHwibnVtYmVyIiE9dHlwZW9mIG4udG8pdGhyb3cgbmV3IFJhbmdlRXJyb3IoIkludmFsaWQgaW5wdXQgZm9yIEFkZE1hcmtTdGVwLmZyb21KU09OIik7cmV0dXJuIG5ldyBlKG4uZnJvbSxuLnRvLHQubWFya0Zyb21KU09OKG4ubWFyaykpfSxlfSh5KTt5Lmpzb25JRCgiYWRkTWFyayIsXyk7dmFyIEY9ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZShlLG4scil7dC5jYWxsKHRoaXMpLHRoaXMuZnJvbT1lLHRoaXMudG89bix0aGlzLm1hcms9cn1yZXR1cm4gdCYmKGUuX19wcm90b19fPXQpLGUucHJvdG90eXBlPU9iamVjdC5jcmVhdGUodCYmdC5wcm90b3R5cGUpLGUucHJvdG90eXBlLmNvbnN0cnVjdG9yPWUsZS5wcm90b3R5cGUuYXBwbHk9ZnVuY3Rpb24odCl7dmFyIGU9dGhpcyxuPXQuc2xpY2UodGhpcy5mcm9tLHRoaXMudG8pLG89bmV3IHIuU2xpY2UoSShuLmNvbnRlbnQsKGZ1bmN0aW9uKHQpe3JldHVybiB0Lm1hcmsoZS5tYXJrLnJlbW92ZUZyb21TZXQodC5tYXJrcykpfSkpLG4ub3BlblN0YXJ0LG4ub3BlbkVuZCk7cmV0dXJuIGcuZnJvbVJlcGxhY2UodCx0aGlzLmZyb20sdGhpcy50byxvKX0sZS5wcm90b3R5cGUuaW52ZXJ0PWZ1bmN0aW9uKCl7cmV0dXJuIG5ldyBfKHRoaXMuZnJvbSx0aGlzLnRvLHRoaXMubWFyayl9LGUucHJvdG90eXBlLm1hcD1mdW5jdGlvbih0KXt2YXIgbj10Lm1hcFJlc3VsdCh0aGlzLmZyb20sMSkscj10Lm1hcFJlc3VsdCh0aGlzLnRvLC0xKTtyZXR1cm4gbi5kZWxldGVkJiZyLmRlbGV0ZWR8fG4ucG9zPj1yLnBvcz9udWxsOm5ldyBlKG4ucG9zLHIucG9zLHRoaXMubWFyayl9LGUucHJvdG90eXBlLm1lcmdlPWZ1bmN0aW9uKHQpe2lmKHQgaW5zdGFuY2VvZiBlJiZ0Lm1hcmsuZXEodGhpcy5tYXJrKSYmdGhpcy5mcm9tPD10LnRvJiZ0aGlzLnRvPj10LmZyb20pcmV0dXJuIG5ldyBlKE1hdGgubWluKHRoaXMuZnJvbSx0LmZyb20pLE1hdGgubWF4KHRoaXMudG8sdC50byksdGhpcy5tYXJrKX0sZS5wcm90b3R5cGUudG9KU09OPWZ1bmN0aW9uKCl7cmV0dXJue3N0ZXBUeXBlOiJyZW1vdmVNYXJrIixtYXJrOnRoaXMubWFyay50b0pTT04oKSxmcm9tOnRoaXMuZnJvbSx0bzp0aGlzLnRvfX0sZS5mcm9tSlNPTj1mdW5jdGlvbih0LG4pe2lmKCJudW1iZXIiIT10eXBlb2Ygbi5mcm9tfHwibnVtYmVyIiE9dHlwZW9mIG4udG8pdGhyb3cgbmV3IFJhbmdlRXJyb3IoIkludmFsaWQgaW5wdXQgZm9yIFJlbW92ZU1hcmtTdGVwLmZyb21KU09OIik7cmV0dXJuIG5ldyBlKG4uZnJvbSxuLnRvLHQubWFya0Zyb21KU09OKG4ubWFyaykpfSxlfSh5KTtmdW5jdGlvbiBCKHQsZSxuLG8pe2lmKHZvaWQgMD09PW4mJihuPWUpLHZvaWQgMD09PW8mJihvPXIuU2xpY2UuZW1wdHkpLGU9PW4mJiFvLnNpemUpcmV0dXJuIG51bGw7dmFyIGk9dC5yZXNvbHZlKGUpLHM9dC5yZXNvbHZlKG4pO2lmKEgoaSxzLG8pKXJldHVybiBuZXcgdyhlLG4sbyk7dmFyIGE9RyhpLG8pLGM9JChpLGEpLGw9VyhpLHMsYyk7aWYoIWwpcmV0dXJuIG51bGw7aWYoYy5zaXplIT1sLnNpemUmJksoaSxzLGMpKXt2YXIgcD1zLmRlcHRoLHU9cy5hZnRlcihwKTt3aGlsZShwPjEmJnU9PXMuZW5kKC0tcCkpKyt1O3ZhciBoPVcoaSx0LnJlc29sdmUodSksYyk7aWYoaClyZXR1cm4gbmV3IHgoZSx1LG4scy5lbmQoKSxoLGMuc2l6ZSl9cmV0dXJuIGwuc2l6ZXx8ZSE9bj9uZXcgdyhlLG4sbCk6bnVsbH1mdW5jdGlvbiBqKHQsZSxuLG8pe3ZhciBpPXIuRnJhZ21lbnQuZW1wdHkscz0wLGE9bltlXTtpZih0LmRlcHRoPmUpe3ZhciBjPWoodCxlKzEsbixvfHxhKTtzPWMub3BlbkVuZCsxLGk9ci5GcmFnbWVudC5mcm9tKHQubm9kZShlKzEpLmNvcHkoYy5jb250ZW50KSl9cmV0dXJuIGEmJihpPWkuYXBwZW5kKGEuY29udGVudCkscz1hLm9wZW5FbmQpLG8mJihpPWkuYXBwZW5kKHQubm9kZShlKS5jb250ZW50TWF0Y2hBdCh0LmluZGV4QWZ0ZXIoZSkpLmZpbGxCZWZvcmUoci5GcmFnbWVudC5lbXB0eSwhMCkpLHM9MCkse2NvbnRlbnQ6aSxvcGVuRW5kOnN9fWZ1bmN0aW9uICQodCxlKXt2YXIgbj1qKHQsMCxlLCExKSxvPW4uY29udGVudCxpPW4ub3BlbkVuZDtyZXR1cm4gbmV3IHIuU2xpY2Uobyx0LmRlcHRoLGl8fDApfWZ1bmN0aW9uIFYodCxlLG4scixvLGkscyl7dmFyIGEsYz10LmNoaWxkQ291bnQsbD1jLShzPjA/MTowKSxwPWk8MD9lOm4ubm9kZShvKTthPWk8MD9wLmNvbnRlbnRNYXRjaEF0KGwpOjE9PWMmJnM+MD9wLmNvbnRlbnRNYXRjaEF0KGk/bi5pbmRleChvKTpuLmluZGV4QWZ0ZXIobykpOnAuY29udGVudE1hdGNoQXQobi5pbmRleEFmdGVyKG8pKS5tYXRjaEZyYWdtZW50KHQsYz4wJiZpPzE6MCxsKTt2YXIgdT1yLm5vZGUobyk7aWYocz4wJiZvPHIuZGVwdGgpe3ZhciBoPXUuY29udGVudC5jdXRCeUluZGV4KHIuaW5kZXhBZnRlcihvKSkuYWRkVG9TdGFydCh0Lmxhc3RDaGlsZCksZj1hLmZpbGxCZWZvcmUoaCwhMCk7aWYoZiYmZi5zaXplJiZpPjAmJjE9PWMmJihmPW51bGwpLGYpe3ZhciBkPVYodC5sYXN0Q2hpbGQuY29udGVudCx0Lmxhc3RDaGlsZCxuLHIsbysxLDE9PWM/aS0xOi0xLHMtMSk7aWYoZCl7dmFyIHY9dC5sYXN0Q2hpbGQuY29weShkKTtyZXR1cm4gZi5zaXplP3QuY3V0QnlJbmRleCgwLGMtMSkuYXBwZW5kKGYpLmFkZFRvRW5kKHYpOnQucmVwbGFjZUNoaWxkKGMtMSx2KX19fXM+MCYmKGE9YS5tYXRjaFR5cGUoKDE9PWMmJmk+MD9uLm5vZGUobysxKTp0Lmxhc3RDaGlsZCkudHlwZSkpO3ZhciBtPXIuaW5kZXgobyk7aWYobT09dS5jaGlsZENvdW50JiYhdS50eXBlLmNvbXBhdGlibGVDb250ZW50KGUudHlwZSkpcmV0dXJuIG51bGw7Zm9yKHZhciB5PWEuZmlsbEJlZm9yZSh1LmNvbnRlbnQsITAsbSksZz1tO3kmJmc8dS5jb250ZW50LmNoaWxkQ291bnQ7ZysrKXAudHlwZS5hbGxvd3NNYXJrcyh1LmNvbnRlbnQuY2hpbGQoZykubWFya3MpfHwoeT1udWxsKTtpZigheSlyZXR1cm4gbnVsbDtpZihzPjApe3ZhciB3PUwodC5sYXN0Q2hpbGQscy0xLG4sbysxLDE9PWM/aS0xOi0xKTt0PXQucmVwbGFjZUNoaWxkKGMtMSx3KX1yZXR1cm4gdD10LmFwcGVuZCh5KSxyLmRlcHRoPm8mJih0PXQuYWRkVG9FbmQoSihyLG8rMSkpKSx0fWZ1bmN0aW9uIEwodCxlLG4sbyxpKXt2YXIgcyxhPXQuY29udGVudCxjPWEuY2hpbGRDb3VudDtpZihzPWk+PTA/bi5ub2RlKG8pLmNvbnRlbnRNYXRjaEF0KG4uaW5kZXhBZnRlcihvKSkubWF0Y2hGcmFnbWVudChhLGk+MD8xOjAsYyk6dC5jb250ZW50TWF0Y2hBdChjKSxlPjApe3ZhciBsPUwoYS5sYXN0Q2hpbGQsZS0xLG4sbysxLDE9PWM/aS0xOi0xKTthPWEucmVwbGFjZUNoaWxkKGMtMSxsKX1yZXR1cm4gdC5jb3B5KGEuYXBwZW5kKHMuZmlsbEJlZm9yZShyLkZyYWdtZW50LmVtcHR5LCEwKSkpfWZ1bmN0aW9uIEoodCxlKXt2YXIgbj10Lm5vZGUoZSkscj1uLmNvbnRlbnRNYXRjaEF0KDApLmZpbGxCZWZvcmUobi5jb250ZW50LCEwLHQuaW5kZXgoZSkpO3JldHVybiB0LmRlcHRoPmUmJihyPXIuYWRkVG9FbmQoSih0LGUrMSkpKSxuLmNvcHkocil9ZnVuY3Rpb24gcSh0LGUsbil7d2hpbGUoZT4wJiZuPjAmJjE9PXQuY2hpbGRDb3VudCl0PXQuZmlyc3RDaGlsZC5jb250ZW50LGUtLSxuLS07cmV0dXJuIG5ldyByLlNsaWNlKHQsZSxuKX1mdW5jdGlvbiBXKHQsZSxuKXt2YXIgcj1WKG4uY29udGVudCx0Lm5vZGUoMCksdCxlLDAsbi5vcGVuU3RhcnQsbi5vcGVuRW5kKTtyZXR1cm4gcj9xKHIsbi5vcGVuU3RhcnQsZS5kZXB0aCk6bnVsbH1mdW5jdGlvbiBIKHQsZSxuKXtyZXR1cm4hbi5vcGVuU3RhcnQmJiFuLm9wZW5FbmQmJnQuc3RhcnQoKT09ZS5zdGFydCgpJiZ0LnBhcmVudC5jYW5SZXBsYWNlKHQuaW5kZXgoKSxlLmluZGV4KCksbi5jb250ZW50KX1mdW5jdGlvbiBLKHQsZSxuKXtpZighZS5wYXJlbnQuaXNUZXh0YmxvY2spcmV0dXJuITE7dmFyIHIsbz1uLm9wZW5FbmQ/VShuLmNvbnRlbnQsbi5vcGVuRW5kKTp0Lm5vZGUodC5kZXB0aC0obi5vcGVuU3RhcnQtbi5vcGVuRW5kKSk7aWYoIW8uaXNUZXh0YmxvY2spcmV0dXJuITE7Zm9yKHZhciBpPWUuaW5kZXgoKTtpPGUucGFyZW50LmNoaWxkQ291bnQ7aSsrKWlmKCFvLnR5cGUuYWxsb3dzTWFya3MoZS5wYXJlbnQuY2hpbGQoaSkubWFya3MpKXJldHVybiExO3JldHVybiBuLm9wZW5FbmQ/cj1vLmNvbnRlbnRNYXRjaEF0KG8uY2hpbGRDb3VudCk6KHI9by5jb250ZW50TWF0Y2hBdChvLmNoaWxkQ291bnQpLG4uc2l6ZSYmKHI9ci5tYXRjaEZyYWdtZW50KG4uY29udGVudCxuLm9wZW5TdGFydD8xOjApKSkscj1yLm1hdGNoRnJhZ21lbnQoZS5wYXJlbnQuY29udGVudCxlLmluZGV4KCkpLHImJnIudmFsaWRFbmR9ZnVuY3Rpb24gVSh0LGUpe2Zvcih2YXIgbj0xO248ZTtuKyspdD10Lmxhc3RDaGlsZC5jb250ZW50O3JldHVybiB0Lmxhc3RDaGlsZH1mdW5jdGlvbiBHKHQsZSl7Zm9yKHZhciBuPW5ldyBYKHQpLHI9MTtlLnNpemUmJnI8PTM7cisrKXt2YXIgbz1uLnBsYWNlU2xpY2UoZS5jb250ZW50LGUub3BlblN0YXJ0LGUub3BlbkVuZCxyKTszPT1yJiZvIT1lJiZvLnNpemUmJihyPTApLGU9b313aGlsZShuLm9wZW4ubGVuZ3RoKW4uY2xvc2VOb2RlKCk7cmV0dXJuIG4ucGxhY2VkfXkuanNvbklEKCJyZW1vdmVNYXJrIixGKSxmLnByb3RvdHlwZS5hZGRNYXJrPWZ1bmN0aW9uKHQsZSxuKXt2YXIgcj10aGlzLG89W10saT1bXSxzPW51bGwsYT1udWxsO3JldHVybiB0aGlzLmRvYy5ub2Rlc0JldHdlZW4odCxlLChmdW5jdGlvbihyLGMsbCl7aWYoci5pc0lubGluZSl7dmFyIHA9ci5tYXJrcztpZighbi5pc0luU2V0KHApJiZsLnR5cGUuYWxsb3dzTWFya1R5cGUobi50eXBlKSl7Zm9yKHZhciB1PU1hdGgubWF4KGMsdCksaD1NYXRoLm1pbihjK3Iubm9kZVNpemUsZSksZj1uLmFkZFRvU2V0KHApLGQ9MDtkPHAubGVuZ3RoO2QrKylwW2RdLmlzSW5TZXQoZil8fChzJiZzLnRvPT11JiZzLm1hcmsuZXEocFtkXSk/cy50bz1oOm8ucHVzaChzPW5ldyBGKHUsaCxwW2RdKSkpO2EmJmEudG89PXU/YS50bz1oOmkucHVzaChhPW5ldyBfKHUsaCxuKSl9fX0pKSxvLmZvckVhY2goKGZ1bmN0aW9uKHQpe3JldHVybiByLnN0ZXAodCl9KSksaS5mb3JFYWNoKChmdW5jdGlvbih0KXtyZXR1cm4gci5zdGVwKHQpfSkpLHRoaXN9LGYucHJvdG90eXBlLnJlbW92ZU1hcms9ZnVuY3Rpb24odCxlLG4pe3ZhciBvPXRoaXM7dm9pZCAwPT09biYmKG49bnVsbCk7dmFyIGk9W10scz0wO3JldHVybiB0aGlzLmRvYy5ub2Rlc0JldHdlZW4odCxlLChmdW5jdGlvbihvLGEpe2lmKG8uaXNJbmxpbmUpe3MrKzt2YXIgYz1udWxsO2lmKG4gaW5zdGFuY2VvZiByLk1hcmtUeXBlKXt2YXIgbD1uLmlzSW5TZXQoby5tYXJrcyk7bCYmKGM9W2xdKX1lbHNlIG4/bi5pc0luU2V0KG8ubWFya3MpJiYoYz1bbl0pOmM9by5tYXJrcztpZihjJiZjLmxlbmd0aClmb3IodmFyIHA9TWF0aC5taW4oYStvLm5vZGVTaXplLGUpLHU9MDt1PGMubGVuZ3RoO3UrKyl7Zm9yKHZhciBoPWNbdV0sZj12b2lkIDAsZD0wO2Q8aS5sZW5ndGg7ZCsrKXt2YXIgdj1pW2RdO3Yuc3RlcD09cy0xJiZoLmVxKGlbZF0uc3R5bGUpJiYoZj12KX1mPyhmLnRvPXAsZi5zdGVwPXMpOmkucHVzaCh7c3R5bGU6aCxmcm9tOk1hdGgubWF4KGEsdCksdG86cCxzdGVwOnN9KX19fSkpLGkuZm9yRWFjaCgoZnVuY3Rpb24odCl7cmV0dXJuIG8uc3RlcChuZXcgRih0LmZyb20sdC50byx0LnN0eWxlKSl9KSksdGhpc30sZi5wcm90b3R5cGUuY2xlYXJJbmNvbXBhdGlibGU9ZnVuY3Rpb24odCxlLG4pe3ZhciBvPXRoaXM7dm9pZCAwPT09biYmKG49ZS5jb250ZW50TWF0Y2gpO2Zvcih2YXIgaT10aGlzLmRvYy5ub2RlQXQodCkscz1bXSxhPXQrMSxjPTA7YzxpLmNoaWxkQ291bnQ7YysrKXt2YXIgbD1pLmNoaWxkKGMpLHA9YStsLm5vZGVTaXplLHU9bi5tYXRjaFR5cGUobC50eXBlLGwuYXR0cnMpO2lmKHUpe249dTtmb3IodmFyIGg9MDtoPGwubWFya3MubGVuZ3RoO2grKyllLmFsbG93c01hcmtUeXBlKGwubWFya3NbaF0udHlwZSl8fG8uc3RlcChuZXcgRihhLHAsbC5tYXJrc1toXSkpfWVsc2Ugcy5wdXNoKG5ldyB3KGEscCxyLlNsaWNlLmVtcHR5KSk7YT1wfWlmKCFuLnZhbGlkRW5kKXt2YXIgZj1uLmZpbGxCZWZvcmUoci5GcmFnbWVudC5lbXB0eSwhMCk7dGhpcy5yZXBsYWNlKGEsYSxuZXcgci5TbGljZShmLDAsMCkpfWZvcih2YXIgZD1zLmxlbmd0aC0xO2Q+PTA7ZC0tKW8uc3RlcChzW2RdKTtyZXR1cm4gdGhpc30sZi5wcm90b3R5cGUucmVwbGFjZT1mdW5jdGlvbih0LGUsbil7dm9pZCAwPT09ZSYmKGU9dCksdm9pZCAwPT09biYmKG49ci5TbGljZS5lbXB0eSk7dmFyIG89Qih0aGlzLmRvYyx0LGUsbik7cmV0dXJuIG8mJnRoaXMuc3RlcChvKSx0aGlzfSxmLnByb3RvdHlwZS5yZXBsYWNlV2l0aD1mdW5jdGlvbih0LGUsbil7cmV0dXJuIHRoaXMucmVwbGFjZSh0LGUsbmV3IHIuU2xpY2Uoci5GcmFnbWVudC5mcm9tKG4pLDAsMCkpfSxmLnByb3RvdHlwZS5kZWxldGU9ZnVuY3Rpb24odCxlKXtyZXR1cm4gdGhpcy5yZXBsYWNlKHQsZSxyLlNsaWNlLmVtcHR5KX0sZi5wcm90b3R5cGUuaW5zZXJ0PWZ1bmN0aW9uKHQsZSl7cmV0dXJuIHRoaXMucmVwbGFjZVdpdGgodCx0LGUpfTt2YXIgWD1mdW5jdGlvbih0KXt2YXIgZT10aGlzO3RoaXMub3Blbj1bXTtmb3IodmFyIG49MDtuPD10LmRlcHRoO24rKyl7dmFyIG89dC5ub2RlKG4pLGk9by5jb250ZW50TWF0Y2hBdCh0LmluZGV4QWZ0ZXIobikpO2Uub3Blbi5wdXNoKHtwYXJlbnQ6byxtYXRjaDppLGNvbnRlbnQ6ci5GcmFnbWVudC5lbXB0eSx3cmFwcGVyOiExLG9wZW5FbmQ6MCxkZXB0aDpufSl9dGhpcy5wbGFjZWQ9W119O2Z1bmN0aW9uIFkodCxlLG4pe3ZhciByPXQuY29udGVudDtpZihlPjEpe3ZhciBvPVkodC5maXJzdENoaWxkLGUtMSwxPT10LmNoaWxkQ291bnQ/bi0xOjApO3I9dC5jb250ZW50LnJlcGxhY2VDaGlsZCgwLG8pfXZhciBpPXQudHlwZS5jb250ZW50TWF0Y2guZmlsbEJlZm9yZShyLDA9PW4pO3JldHVybiB0LmNvcHkoaS5hcHBlbmQocikpfWZ1bmN0aW9uIFEodCxlKXt2YXIgbj10LmNvbnRlbnQ7aWYoZT4xKXt2YXIgbz1RKHQubGFzdENoaWxkLGUtMSk7bj10LmNvbnRlbnQucmVwbGFjZUNoaWxkKHQuY2hpbGRDb3VudC0xLG8pfXZhciBpPXQuY29udGVudE1hdGNoQXQodC5jaGlsZENvdW50KS5maWxsQmVmb3JlKHIuRnJhZ21lbnQuZW1wdHksITApO3JldHVybiB0LmNvcHkobi5hcHBlbmQoaSkpfWZ1bmN0aW9uIFoodCxlKXtyZXR1cm4gZT90LnJlcGxhY2VDaGlsZCh0LmNoaWxkQ291bnQtMSxRKHQubGFzdENoaWxkLGUpKTp0fWZ1bmN0aW9uIHR0KHQsZSxuLHIsbyl7aWYoZTxuKXt2YXIgaT10LmZpcnN0Q2hpbGQ7dD10LnJlcGxhY2VDaGlsZCgwLGkuY29weSh0dChpLmNvbnRlbnQsZSsxLG4scixpKSkpfXJldHVybiBlPnImJih0PW8uY29udGVudE1hdGNoQXQoMCkuZmlsbEJlZm9yZSh0LCEwKS5hcHBlbmQodCkpLHR9ZnVuY3Rpb24gZXQodCxlKXtmb3IodmFyIG49W10scj1NYXRoLm1pbih0LmRlcHRoLGUuZGVwdGgpLG89cjtvPj0wO28tLSl7dmFyIGk9dC5zdGFydChvKTtpZihpPHQucG9zLSh0LmRlcHRoLW8pfHxlLmVuZChvKT5lLnBvcysoZS5kZXB0aC1vKXx8dC5ub2RlKG8pLnR5cGUuc3BlYy5pc29sYXRpbmd8fGUubm9kZShvKS50eXBlLnNwZWMuaXNvbGF0aW5nKWJyZWFrO2k9PWUuc3RhcnQobykmJm4ucHVzaChvKX1yZXR1cm4gbn1YLnByb3RvdHlwZS5wbGFjZVNsaWNlPWZ1bmN0aW9uKHQsZSxuLG8saSl7aWYoZT4wKXt2YXIgcz10LmZpcnN0Q2hpbGQsYT10aGlzLnBsYWNlU2xpY2Uocy5jb250ZW50LE1hdGgubWF4KDAsZS0xKSxuJiYxPT10LmNoaWxkQ291bnQ/bi0xOjAsbyxzKTthLmNvbnRlbnQhPXMuY29udGVudCYmKGEuY29udGVudC5zaXplPyh0PXQucmVwbGFjZUNoaWxkKDAscy5jb3B5KGEuY29udGVudCkpLGU9YS5vcGVuU3RhcnQrMSk6KDE9PXQuY2hpbGRDb3VudCYmKG49MCksdD10LmN1dEJ5SW5kZXgoMSksZT0wKSl9dmFyIGM9dGhpcy5wbGFjZUNvbnRlbnQodCxlLG4sbyxpKTtpZihvPjImJmMuc2l6ZSYmMD09ZSl7dmFyIGw9Yy5jb250ZW50LmZpcnN0Q2hpbGQscD0xPT1jLmNvbnRlbnQuY2hpbGRDb3VudDt0aGlzLnBsYWNlQ29udGVudChsLmNvbnRlbnQsMCxuJiZwP24tMTowLG8sbCksYz1wP3IuRnJhZ21lbnQuZW1wdHk6bmV3IHIuU2xpY2UoYy5jb250ZW50LmN1dEJ5SW5kZXgoMSksMCxuKX1yZXR1cm4gY30sWC5wcm90b3R5cGUucGxhY2VDb250ZW50PWZ1bmN0aW9uKHQsZSxuLG8saSl7Zm9yKHZhciBzPXRoaXMsYT0wO2E8dC5jaGlsZENvdW50O2ErKyl7Zm9yKHZhciBjPXQuY2hpbGQoYSksbD0hMSxwPWE9PXQuY2hpbGRDb3VudC0xLHU9dGhpcy5vcGVuLmxlbmd0aC0xO3U+PTA7dS0tKXt2YXIgaD1zLm9wZW5bdV0sZj12b2lkIDA7aWYobz4xJiYoZj1oLm1hdGNoLmZpbmRXcmFwcGluZyhjLnR5cGUpKSYmKCFpfHwhZi5sZW5ndGh8fGZbZi5sZW5ndGgtMV0hPWkudHlwZSkpe3doaWxlKHRoaXMub3Blbi5sZW5ndGgtMT51KXMuY2xvc2VOb2RlKCk7Zm9yKHZhciBkPTA7ZDxmLmxlbmd0aDtkKyspaC5tYXRjaD1oLm1hdGNoLm1hdGNoVHlwZShmW2RdKSx1KyssaD17cGFyZW50OmZbZF0uY3JlYXRlKCksbWF0Y2g6ZltkXS5jb250ZW50TWF0Y2gsY29udGVudDpyLkZyYWdtZW50LmVtcHR5LHdyYXBwZXI6ITAsb3BlbkVuZDowLGRlcHRoOnUrZH0scy5vcGVuLnB1c2goaCl9dmFyIHY9aC5tYXRjaC5tYXRjaFR5cGUoYy50eXBlKTtpZighdil7dmFyIG09aC5tYXRjaC5maWxsQmVmb3JlKHIuRnJhZ21lbnQuZnJvbShjKSk7aWYoIW0pe2lmKGkmJmgubWF0Y2gubWF0Y2hUeXBlKGkudHlwZSkpYnJlYWs7Y29udGludWV9Zm9yKHZhciB5PTA7eTxtLmNoaWxkQ291bnQ7eSsrKXt2YXIgZz1tLmNoaWxkKHkpO3MuYWRkTm9kZShoLGcsMCksdj1oLm1hdGNoLm1hdGNoRnJhZ21lbnQoZyl9fXdoaWxlKHRoaXMub3Blbi5sZW5ndGgtMT51KXMuY2xvc2VOb2RlKCk7Yz1jLm1hcmsoaC5wYXJlbnQudHlwZS5hbGxvd2VkTWFya3MoYy5tYXJrcykpLGUmJihjPVkoYyxlLHA/bjowKSxlPTApLHMuYWRkTm9kZShoLGMscD9uOjApLGgubWF0Y2g9dixwJiYobj0wKSxsPSEwO2JyZWFrfWlmKCFsKWJyZWFrfXJldHVybiB0aGlzLm9wZW4ubGVuZ3RoPjEmJihhPjAmJmE9PXQuY2hpbGRDb3VudHx8aSYmdGhpcy5vcGVuW3RoaXMub3Blbi5sZW5ndGgtMV0ucGFyZW50LnR5cGU9PWkudHlwZSkmJnRoaXMuY2xvc2VOb2RlKCksbmV3IHIuU2xpY2UodC5jdXRCeUluZGV4KGEpLGUsbil9LFgucHJvdG90eXBlLmFkZE5vZGU9ZnVuY3Rpb24odCxlLG4pe3QuY29udGVudD1aKHQuY29udGVudCx0Lm9wZW5FbmQpLmFkZFRvRW5kKGUpLHQub3BlbkVuZD1ufSxYLnByb3RvdHlwZS5jbG9zZU5vZGU9ZnVuY3Rpb24oKXt2YXIgdD10aGlzLm9wZW4ucG9wKCk7MD09dC5jb250ZW50LnNpemV8fCh0LndyYXBwZXI/dGhpcy5hZGROb2RlKHRoaXMub3Blblt0aGlzLm9wZW4ubGVuZ3RoLTFdLHQucGFyZW50LmNvcHkodC5jb250ZW50KSx0Lm9wZW5FbmQrMSk6dGhpcy5wbGFjZWRbdC5kZXB0aF09e2RlcHRoOnQuZGVwdGgsY29udGVudDp0LmNvbnRlbnQsb3BlbkVuZDp0Lm9wZW5FbmR9KX0sZi5wcm90b3R5cGUucmVwbGFjZVJhbmdlPWZ1bmN0aW9uKHQsZSxuKXt2YXIgbz10aGlzO2lmKCFuLnNpemUpcmV0dXJuIHRoaXMuZGVsZXRlUmFuZ2UodCxlKTt2YXIgaT10aGlzLmRvYy5yZXNvbHZlKHQpLHM9dGhpcy5kb2MucmVzb2x2ZShlKTtpZihIKGkscyxuKSlyZXR1cm4gdGhpcy5zdGVwKG5ldyB3KHQsZSxuKSk7dmFyIGE9ZXQoaSx0aGlzLmRvYy5yZXNvbHZlKGUpKTswPT1hW2EubGVuZ3RoLTFdJiZhLnBvcCgpO3ZhciBjPS0oaS5kZXB0aCsxKTthLnVuc2hpZnQoYyk7Zm9yKHZhciBsPWkuZGVwdGgscD1pLnBvcy0xO2w+MDtsLS0scC0tKXt2YXIgdT1pLm5vZGUobCkudHlwZS5zcGVjO2lmKHUuZGVmaW5pbmd8fHUuaXNvbGF0aW5nKWJyZWFrO2EuaW5kZXhPZihsKT4tMT9jPWw6aS5iZWZvcmUobCk9PXAmJmEuc3BsaWNlKDEsMCwtbCl9Zm9yKHZhciBoPWEuaW5kZXhPZihjKSxmPVtdLGQ9bi5vcGVuU3RhcnQsdj1uLmNvbnRlbnQsbT0wOzttKyspe3ZhciB5PXYuZmlyc3RDaGlsZDtpZihmLnB1c2goeSksbT09bi5vcGVuU3RhcnQpYnJlYWs7dj15LmNvbnRlbnR9ZD4wJiZmW2QtMV0udHlwZS5zcGVjLmRlZmluaW5nJiZpLm5vZGUoaCkudHlwZSE9ZltkLTFdLnR5cGU/ZC09MTpkPj0yJiZmW2QtMV0uaXNUZXh0YmxvY2smJmZbZC0yXS50eXBlLnNwZWMuZGVmaW5pbmcmJmkubm9kZShoKS50eXBlIT1mW2QtMl0udHlwZSYmKGQtPTIpO2Zvcih2YXIgZz1uLm9wZW5TdGFydDtnPj0wO2ctLSl7dmFyIHg9KGcrZCsxKSUobi5vcGVuU3RhcnQrMSksYj1mW3hdO2lmKGIpZm9yKHZhciBrPTA7azxhLmxlbmd0aDtrKyspe3ZhciBTPWFbKGsraCklYS5sZW5ndGhdLEM9ITA7UzwwJiYoQz0hMSxTPS1TKTt2YXIgTz1pLm5vZGUoUy0xKSxNPWkuaW5kZXgoUy0xKTtpZihPLmNhblJlcGxhY2VXaXRoKE0sTSxiLnR5cGUsYi5tYXJrcykpcmV0dXJuIG8ucmVwbGFjZShpLmJlZm9yZShTKSxDP3MuYWZ0ZXIoUyk6ZSxuZXcgci5TbGljZSh0dChuLmNvbnRlbnQsMCxuLm9wZW5TdGFydCx4KSx4LG4ub3BlbkVuZCkpfX1mb3IodmFyIFQ9dGhpcy5zdGVwcy5sZW5ndGgsTj1hLmxlbmd0aC0xO04+PTA7Ti0tKXtpZihvLnJlcGxhY2UodCxlLG4pLG8uc3RlcHMubGVuZ3RoPlQpYnJlYWs7dmFyIEU9YVtOXTtOPDB8fCh0PWkuYmVmb3JlKEUpLGU9cy5hZnRlcihFKSl9cmV0dXJuIHRoaXN9LGYucHJvdG90eXBlLnJlcGxhY2VSYW5nZVdpdGg9ZnVuY3Rpb24odCxlLG4pe2lmKCFuLmlzSW5saW5lJiZ0PT1lJiZ0aGlzLmRvYy5yZXNvbHZlKHQpLnBhcmVudC5jb250ZW50LnNpemUpe3ZhciBvPXoodGhpcy5kb2MsdCxuLnR5cGUpO251bGwhPW8mJih0PWU9byl9cmV0dXJuIHRoaXMucmVwbGFjZVJhbmdlKHQsZSxuZXcgci5TbGljZShyLkZyYWdtZW50LmZyb20obiksMCwwKSl9LGYucHJvdG90eXBlLmRlbGV0ZVJhbmdlPWZ1bmN0aW9uKHQsZSl7Zm9yKHZhciBuPXRoaXMscj10aGlzLmRvYy5yZXNvbHZlKHQpLG89dGhpcy5kb2MucmVzb2x2ZShlKSxpPWV0KHIsbykscz0wO3M8aS5sZW5ndGg7cysrKXt2YXIgYT1pW3NdLGM9cz09aS5sZW5ndGgtMTtpZihjJiYwPT1hfHxyLm5vZGUoYSkudHlwZS5jb250ZW50TWF0Y2gudmFsaWRFbmQpcmV0dXJuIG4uZGVsZXRlKHIuc3RhcnQoYSksby5lbmQoYSkpO2lmKGE+MCYmKGN8fHIubm9kZShhLTEpLmNhblJlcGxhY2Uoci5pbmRleChhLTEpLG8uaW5kZXhBZnRlcihhLTEpKSkpcmV0dXJuIG4uZGVsZXRlKHIuYmVmb3JlKGEpLG8uYWZ0ZXIoYSkpfWZvcih2YXIgbD0xO2w8PXIuZGVwdGg7bCsrKWlmKHQtci5zdGFydChsKT09ci5kZXB0aC1sJiZlPnIuZW5kKGwpKXJldHVybiBuLmRlbGV0ZShyLmJlZm9yZShsKSxlKTtyZXR1cm4gdGhpcy5kZWxldGUodCxlKX0sZS5UcmFuc2Zvcm09ZixlLlRyYW5zZm9ybUVycm9yPWgsZS5TdGVwPXksZS5TdGVwUmVzdWx0PWcsZS5qb2luUG9pbnQ9RCxlLmNhbkpvaW49QSxlLmNhblNwbGl0PUUsZS5pbnNlcnRQb2ludD16LGUuZHJvcFBvaW50PVAsZS5saWZ0VGFyZ2V0PVMsZS5maW5kV3JhcHBpbmc9QyxlLlN0ZXBNYXA9cCxlLk1hcFJlc3VsdD1sLGUuTWFwcGluZz11LGUuQWRkTWFya1N0ZXA9XyxlLlJlbW92ZU1hcmtTdGVwPUYsZS5SZXBsYWNlU3RlcD13LGUuUmVwbGFjZUFyb3VuZFN0ZXA9eCxlLnJlcGxhY2VTdGVwPUJ9LGJlMTM6ZnVuY3Rpb24odCxlKXt0LmV4cG9ydHM9ZnVuY3Rpb24odCl7aWYodm9pZCAwPT10KXRocm93IFR5cGVFcnJvcigiQ2FuJ3QgY2FsbCBtZXRob2Qgb24gICIrdCk7cmV0dXJuIHR9fSxjMmY3OmZ1bmN0aW9uKHQsZSxuKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gcih0KXtyZXR1cm4gdCYmIm9iamVjdCI9PT10eXBlb2YgdCYmImRlZmF1bHQiaW4gdD90WyJkZWZhdWx0Il06dH1PYmplY3QuZGVmaW5lUHJvcGVydHkoZSwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSk7dmFyIG89cihuKCJmYWExIikpO2Z1bmN0aW9uIGkodCxlLG4pe2Zvcih2YXIgcj0wOztyKyspe2lmKHI9PXQuY2hpbGRDb3VudHx8cj09ZS5jaGlsZENvdW50KXJldHVybiB0LmNoaWxkQ291bnQ9PWUuY2hpbGRDb3VudD9udWxsOm47dmFyIG89dC5jaGlsZChyKSxzPWUuY2hpbGQocik7aWYobyE9cyl7aWYoIW8uc2FtZU1hcmt1cChzKSlyZXR1cm4gbjtpZihvLmlzVGV4dCYmby50ZXh0IT1zLnRleHQpe2Zvcih2YXIgYT0wO28udGV4dFthXT09cy50ZXh0W2FdO2ErKyluKys7cmV0dXJuIG59aWYoby5jb250ZW50LnNpemV8fHMuY29udGVudC5zaXplKXt2YXIgYz1pKG8uY29udGVudCxzLmNvbnRlbnQsbisxKTtpZihudWxsIT1jKXJldHVybiBjfW4rPW8ubm9kZVNpemV9ZWxzZSBuKz1vLm5vZGVTaXplfX1mdW5jdGlvbiBzKHQsZSxuLHIpe2Zvcih2YXIgbz10LmNoaWxkQ291bnQsaT1lLmNoaWxkQ291bnQ7Oyl7aWYoMD09b3x8MD09aSlyZXR1cm4gbz09aT9udWxsOnthOm4sYjpyfTt2YXIgYT10LmNoaWxkKC0tbyksYz1lLmNoaWxkKC0taSksbD1hLm5vZGVTaXplO2lmKGEhPWMpe2lmKCFhLnNhbWVNYXJrdXAoYykpcmV0dXJue2E6bixiOnJ9O2lmKGEuaXNUZXh0JiZhLnRleHQhPWMudGV4dCl7dmFyIHA9MCx1PU1hdGgubWluKGEudGV4dC5sZW5ndGgsYy50ZXh0Lmxlbmd0aCk7d2hpbGUocDx1JiZhLnRleHRbYS50ZXh0Lmxlbmd0aC1wLTFdPT1jLnRleHRbYy50ZXh0Lmxlbmd0aC1wLTFdKXArKyxuLS0sci0tO3JldHVybnthOm4sYjpyfX1pZihhLmNvbnRlbnQuc2l6ZXx8Yy5jb250ZW50LnNpemUpe3ZhciBoPXMoYS5jb250ZW50LGMuY29udGVudCxuLTEsci0xKTtpZihoKXJldHVybiBofW4tPWwsci09bH1lbHNlIG4tPWwsci09bH19dmFyIGE9ZnVuY3Rpb24odCxlKXt2YXIgbj10aGlzO2lmKHRoaXMuY29udGVudD10LHRoaXMuc2l6ZT1lfHwwLG51bGw9PWUpZm9yKHZhciByPTA7cjx0Lmxlbmd0aDtyKyspbi5zaXplKz10W3JdLm5vZGVTaXplfSxjPXtmaXJzdENoaWxkOnt9LGxhc3RDaGlsZDp7fSxjaGlsZENvdW50Ont9fTthLnByb3RvdHlwZS5ub2Rlc0JldHdlZW49ZnVuY3Rpb24odCxlLG4scixvKXt2YXIgaT10aGlzO3ZvaWQgMD09PXImJihyPTApO2Zvcih2YXIgcz0wLGE9MDthPGU7cysrKXt2YXIgYz1pLmNvbnRlbnRbc10sbD1hK2Mubm9kZVNpemU7aWYobD50JiYhMSE9PW4oYyxyK2EsbyxzKSYmYy5jb250ZW50LnNpemUpe3ZhciBwPWErMTtjLm5vZGVzQmV0d2VlbihNYXRoLm1heCgwLHQtcCksTWF0aC5taW4oYy5jb250ZW50LnNpemUsZS1wKSxuLHIrcCl9YT1sfX0sYS5wcm90b3R5cGUuZGVzY2VuZGFudHM9ZnVuY3Rpb24odCl7dGhpcy5ub2Rlc0JldHdlZW4oMCx0aGlzLnNpemUsdCl9LGEucHJvdG90eXBlLnRleHRCZXR3ZWVuPWZ1bmN0aW9uKHQsZSxuLHIpe3ZhciBvPSIiLGk9ITA7cmV0dXJuIHRoaXMubm9kZXNCZXR3ZWVuKHQsZSwoZnVuY3Rpb24ocyxhKXtzLmlzVGV4dD8obys9cy50ZXh0LnNsaWNlKE1hdGgubWF4KHQsYSktYSxlLWEpLGk9IW4pOnMuaXNMZWFmJiZyPyhvKz1yLGk9IW4pOiFpJiZzLmlzQmxvY2smJihvKz1uLGk9ITApfSksMCksb30sYS5wcm90b3R5cGUuYXBwZW5kPWZ1bmN0aW9uKHQpe2lmKCF0LnNpemUpcmV0dXJuIHRoaXM7aWYoIXRoaXMuc2l6ZSlyZXR1cm4gdDt2YXIgZT10aGlzLmxhc3RDaGlsZCxuPXQuZmlyc3RDaGlsZCxyPXRoaXMuY29udGVudC5zbGljZSgpLG89MDtmb3IoZS5pc1RleHQmJmUuc2FtZU1hcmt1cChuKSYmKHJbci5sZW5ndGgtMV09ZS53aXRoVGV4dChlLnRleHQrbi50ZXh0KSxvPTEpO288dC5jb250ZW50Lmxlbmd0aDtvKyspci5wdXNoKHQuY29udGVudFtvXSk7cmV0dXJuIG5ldyBhKHIsdGhpcy5zaXplK3Quc2l6ZSl9LGEucHJvdG90eXBlLmN1dD1mdW5jdGlvbih0LGUpe3ZhciBuPXRoaXM7aWYobnVsbD09ZSYmKGU9dGhpcy5zaXplKSwwPT10JiZlPT10aGlzLnNpemUpcmV0dXJuIHRoaXM7dmFyIHI9W10sbz0wO2lmKGU+dClmb3IodmFyIGk9MCxzPTA7czxlO2krKyl7dmFyIGM9bi5jb250ZW50W2ldLGw9cytjLm5vZGVTaXplO2w+dCYmKChzPHR8fGw+ZSkmJihjPWMuaXNUZXh0P2MuY3V0KE1hdGgubWF4KDAsdC1zKSxNYXRoLm1pbihjLnRleHQubGVuZ3RoLGUtcykpOmMuY3V0KE1hdGgubWF4KDAsdC1zLTEpLE1hdGgubWluKGMuY29udGVudC5zaXplLGUtcy0xKSkpLHIucHVzaChjKSxvKz1jLm5vZGVTaXplKSxzPWx9cmV0dXJuIG5ldyBhKHIsbyl9LGEucHJvdG90eXBlLmN1dEJ5SW5kZXg9ZnVuY3Rpb24odCxlKXtyZXR1cm4gdD09ZT9hLmVtcHR5OjA9PXQmJmU9PXRoaXMuY29udGVudC5sZW5ndGg/dGhpczpuZXcgYSh0aGlzLmNvbnRlbnQuc2xpY2UodCxlKSl9LGEucHJvdG90eXBlLnJlcGxhY2VDaGlsZD1mdW5jdGlvbih0LGUpe3ZhciBuPXRoaXMuY29udGVudFt0XTtpZihuPT1lKXJldHVybiB0aGlzO3ZhciByPXRoaXMuY29udGVudC5zbGljZSgpLG89dGhpcy5zaXplK2Uubm9kZVNpemUtbi5ub2RlU2l6ZTtyZXR1cm4gclt0XT1lLG5ldyBhKHIsbyl9LGEucHJvdG90eXBlLmFkZFRvU3RhcnQ9ZnVuY3Rpb24odCl7cmV0dXJuIG5ldyBhKFt0XS5jb25jYXQodGhpcy5jb250ZW50KSx0aGlzLnNpemUrdC5ub2RlU2l6ZSl9LGEucHJvdG90eXBlLmFkZFRvRW5kPWZ1bmN0aW9uKHQpe3JldHVybiBuZXcgYSh0aGlzLmNvbnRlbnQuY29uY2F0KHQpLHRoaXMuc2l6ZSt0Lm5vZGVTaXplKX0sYS5wcm90b3R5cGUuZXE9ZnVuY3Rpb24odCl7dmFyIGU9dGhpcztpZih0aGlzLmNvbnRlbnQubGVuZ3RoIT10LmNvbnRlbnQubGVuZ3RoKXJldHVybiExO2Zvcih2YXIgbj0wO248dGhpcy5jb250ZW50Lmxlbmd0aDtuKyspaWYoIWUuY29udGVudFtuXS5lcSh0LmNvbnRlbnRbbl0pKXJldHVybiExO3JldHVybiEwfSxjLmZpcnN0Q2hpbGQuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY29udGVudC5sZW5ndGg/dGhpcy5jb250ZW50WzBdOm51bGx9LGMubGFzdENoaWxkLmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLmNvbnRlbnQubGVuZ3RoP3RoaXMuY29udGVudFt0aGlzLmNvbnRlbnQubGVuZ3RoLTFdOm51bGx9LGMuY2hpbGRDb3VudC5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jb250ZW50Lmxlbmd0aH0sYS5wcm90b3R5cGUuY2hpbGQ9ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5jb250ZW50W3RdO2lmKCFlKXRocm93IG5ldyBSYW5nZUVycm9yKCJJbmRleCAiK3QrIiBvdXQgb2YgcmFuZ2UgZm9yICIrdGhpcyk7cmV0dXJuIGV9LGEucHJvdG90eXBlLm1heWJlQ2hpbGQ9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuY29udGVudFt0XX0sYS5wcm90b3R5cGUuZm9yRWFjaD1mdW5jdGlvbih0KXtmb3IodmFyIGU9dGhpcyxuPTAscj0wO248dGhpcy5jb250ZW50Lmxlbmd0aDtuKyspe3ZhciBvPWUuY29udGVudFtuXTt0KG8scixuKSxyKz1vLm5vZGVTaXplfX0sYS5wcm90b3R5cGUuZmluZERpZmZTdGFydD1mdW5jdGlvbih0LGUpe3JldHVybiB2b2lkIDA9PT1lJiYoZT0wKSxpKHRoaXMsdCxlKX0sYS5wcm90b3R5cGUuZmluZERpZmZFbmQ9ZnVuY3Rpb24odCxlLG4pe3JldHVybiB2b2lkIDA9PT1lJiYoZT10aGlzLnNpemUpLHZvaWQgMD09PW4mJihuPXQuc2l6ZSkscyh0aGlzLHQsZSxuKX0sYS5wcm90b3R5cGUuZmluZEluZGV4PWZ1bmN0aW9uKHQsZSl7dmFyIG49dGhpcztpZih2b2lkIDA9PT1lJiYoZT0tMSksMD09dClyZXR1cm4gcCgwLHQpO2lmKHQ9PXRoaXMuc2l6ZSlyZXR1cm4gcCh0aGlzLmNvbnRlbnQubGVuZ3RoLHQpO2lmKHQ+dGhpcy5zaXplfHx0PDApdGhyb3cgbmV3IFJhbmdlRXJyb3IoIlBvc2l0aW9uICIrdCsiIG91dHNpZGUgb2YgZnJhZ21lbnQgKCIrdGhpcysiKSIpO2Zvcih2YXIgcj0wLG89MDs7cisrKXt2YXIgaT1uLmNoaWxkKHIpLHM9bytpLm5vZGVTaXplO2lmKHM+PXQpcmV0dXJuIHM9PXR8fGU+MD9wKHIrMSxzKTpwKHIsbyk7bz1zfX0sYS5wcm90b3R5cGUudG9TdHJpbmc9ZnVuY3Rpb24oKXtyZXR1cm4iPCIrdGhpcy50b1N0cmluZ0lubmVyKCkrIj4ifSxhLnByb3RvdHlwZS50b1N0cmluZ0lubmVyPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY29udGVudC5qb2luKCIsICIpfSxhLnByb3RvdHlwZS50b0pTT049ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jb250ZW50Lmxlbmd0aD90aGlzLmNvbnRlbnQubWFwKChmdW5jdGlvbih0KXtyZXR1cm4gdC50b0pTT04oKX0pKTpudWxsfSxhLmZyb21KU09OPWZ1bmN0aW9uKHQsZSl7aWYoIWUpcmV0dXJuIGEuZW1wdHk7aWYoIUFycmF5LmlzQXJyYXkoZSkpdGhyb3cgbmV3IFJhbmdlRXJyb3IoIkludmFsaWQgaW5wdXQgZm9yIEZyYWdtZW50LmZyb21KU09OIik7cmV0dXJuIG5ldyBhKGUubWFwKHQubm9kZUZyb21KU09OKSl9LGEuZnJvbUFycmF5PWZ1bmN0aW9uKHQpe2lmKCF0Lmxlbmd0aClyZXR1cm4gYS5lbXB0eTtmb3IodmFyIGUsbj0wLHI9MDtyPHQubGVuZ3RoO3IrKyl7dmFyIG89dFtyXTtuKz1vLm5vZGVTaXplLHImJm8uaXNUZXh0JiZ0W3ItMV0uc2FtZU1hcmt1cChvKT8oZXx8KGU9dC5zbGljZSgwLHIpKSxlW2UubGVuZ3RoLTFdPW8ud2l0aFRleHQoZVtlLmxlbmd0aC0xXS50ZXh0K28udGV4dCkpOmUmJmUucHVzaChvKX1yZXR1cm4gbmV3IGEoZXx8dCxuKX0sYS5mcm9tPWZ1bmN0aW9uKHQpe2lmKCF0KXJldHVybiBhLmVtcHR5O2lmKHQgaW5zdGFuY2VvZiBhKXJldHVybiB0O2lmKEFycmF5LmlzQXJyYXkodCkpcmV0dXJuIHRoaXMuZnJvbUFycmF5KHQpO2lmKHQuYXR0cnMpcmV0dXJuIG5ldyBhKFt0XSx0Lm5vZGVTaXplKTt0aHJvdyBuZXcgUmFuZ2VFcnJvcigiQ2FuIG5vdCBjb252ZXJ0ICIrdCsiIHRvIGEgRnJhZ21lbnQiKyh0Lm5vZGVzQmV0d2Vlbj8iIChsb29rcyBsaWtlIG11bHRpcGxlIHZlcnNpb25zIG9mIHByb3NlbWlycm9yLW1vZGVsIHdlcmUgbG9hZGVkKSI6IiIpKX0sT2JqZWN0LmRlZmluZVByb3BlcnRpZXMoYS5wcm90b3R5cGUsYyk7dmFyIGw9e2luZGV4OjAsb2Zmc2V0OjB9O2Z1bmN0aW9uIHAodCxlKXtyZXR1cm4gbC5pbmRleD10LGwub2Zmc2V0PWUsbH1mdW5jdGlvbiB1KHQsZSl7aWYodD09PWUpcmV0dXJuITA7aWYoIXR8fCJvYmplY3QiIT10eXBlb2YgdHx8IWV8fCJvYmplY3QiIT10eXBlb2YgZSlyZXR1cm4hMTt2YXIgbj1BcnJheS5pc0FycmF5KHQpO2lmKEFycmF5LmlzQXJyYXkoZSkhPW4pcmV0dXJuITE7aWYobil7aWYodC5sZW5ndGghPWUubGVuZ3RoKXJldHVybiExO2Zvcih2YXIgcj0wO3I8dC5sZW5ndGg7cisrKWlmKCF1KHRbcl0sZVtyXSkpcmV0dXJuITF9ZWxzZXtmb3IodmFyIG8gaW4gdClpZighKG8gaW4gZSl8fCF1KHRbb10sZVtvXSkpcmV0dXJuITE7Zm9yKHZhciBpIGluIGUpaWYoIShpIGluIHQpKXJldHVybiExfXJldHVybiEwfWEuZW1wdHk9bmV3IGEoW10sMCk7dmFyIGg9ZnVuY3Rpb24odCxlKXt0aGlzLnR5cGU9dCx0aGlzLmF0dHJzPWV9O2Z1bmN0aW9uIGYodCl7dmFyIGU9RXJyb3IuY2FsbCh0aGlzLHQpO3JldHVybiBlLl9fcHJvdG9fXz1mLnByb3RvdHlwZSxlfWgucHJvdG90eXBlLmFkZFRvU2V0PWZ1bmN0aW9uKHQpe2Zvcih2YXIgZSxuPXRoaXMscj0hMSxvPTA7bzx0Lmxlbmd0aDtvKyspe3ZhciBpPXRbb107aWYobi5lcShpKSlyZXR1cm4gdDtpZihuLnR5cGUuZXhjbHVkZXMoaS50eXBlKSllfHwoZT10LnNsaWNlKDAsbykpO2Vsc2V7aWYoaS50eXBlLmV4Y2x1ZGVzKG4udHlwZSkpcmV0dXJuIHQ7IXImJmkudHlwZS5yYW5rPm4udHlwZS5yYW5rJiYoZXx8KGU9dC5zbGljZSgwLG8pKSxlLnB1c2gobikscj0hMCksZSYmZS5wdXNoKGkpfX1yZXR1cm4gZXx8KGU9dC5zbGljZSgpKSxyfHxlLnB1c2godGhpcyksZX0saC5wcm90b3R5cGUucmVtb3ZlRnJvbVNldD1mdW5jdGlvbih0KXtmb3IodmFyIGU9dGhpcyxuPTA7bjx0Lmxlbmd0aDtuKyspaWYoZS5lcSh0W25dKSlyZXR1cm4gdC5zbGljZSgwLG4pLmNvbmNhdCh0LnNsaWNlKG4rMSkpO3JldHVybiB0fSxoLnByb3RvdHlwZS5pc0luU2V0PWZ1bmN0aW9uKHQpe2Zvcih2YXIgZT10aGlzLG49MDtuPHQubGVuZ3RoO24rKylpZihlLmVxKHRbbl0pKXJldHVybiEwO3JldHVybiExfSxoLnByb3RvdHlwZS5lcT1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcz09dHx8dGhpcy50eXBlPT10LnR5cGUmJnUodGhpcy5hdHRycyx0LmF0dHJzKX0saC5wcm90b3R5cGUudG9KU09OPWZ1bmN0aW9uKCl7dmFyIHQ9dGhpcyxlPXt0eXBlOnRoaXMudHlwZS5uYW1lfTtmb3IodmFyIG4gaW4gdC5hdHRycyl7ZS5hdHRycz10LmF0dHJzO2JyZWFrfXJldHVybiBlfSxoLmZyb21KU09OPWZ1bmN0aW9uKHQsZSl7aWYoIWUpdGhyb3cgbmV3IFJhbmdlRXJyb3IoIkludmFsaWQgaW5wdXQgZm9yIE1hcmsuZnJvbUpTT04iKTt2YXIgbj10Lm1hcmtzW2UudHlwZV07aWYoIW4pdGhyb3cgbmV3IFJhbmdlRXJyb3IoIlRoZXJlIGlzIG5vIG1hcmsgdHlwZSAiK2UudHlwZSsiIGluIHRoaXMgc2NoZW1hIik7cmV0dXJuIG4uY3JlYXRlKGUuYXR0cnMpfSxoLnNhbWVTZXQ9ZnVuY3Rpb24odCxlKXtpZih0PT1lKXJldHVybiEwO2lmKHQubGVuZ3RoIT1lLmxlbmd0aClyZXR1cm4hMTtmb3IodmFyIG49MDtuPHQubGVuZ3RoO24rKylpZighdFtuXS5lcShlW25dKSlyZXR1cm4hMTtyZXR1cm4hMH0saC5zZXRGcm9tPWZ1bmN0aW9uKHQpe2lmKCF0fHwwPT10Lmxlbmd0aClyZXR1cm4gaC5ub25lO2lmKHQgaW5zdGFuY2VvZiBoKXJldHVyblt0XTt2YXIgZT10LnNsaWNlKCk7cmV0dXJuIGUuc29ydCgoZnVuY3Rpb24odCxlKXtyZXR1cm4gdC50eXBlLnJhbmstZS50eXBlLnJhbmt9KSksZX0saC5ub25lPVtdLGYucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoRXJyb3IucHJvdG90eXBlKSxmLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1mLGYucHJvdG90eXBlLm5hbWU9IlJlcGxhY2VFcnJvciI7dmFyIGQ9ZnVuY3Rpb24odCxlLG4pe3RoaXMuY29udGVudD10LHRoaXMub3BlblN0YXJ0PWUsdGhpcy5vcGVuRW5kPW59LHY9e3NpemU6e319O2Z1bmN0aW9uIG0odCxlLG4pe3ZhciByPXQuZmluZEluZGV4KGUpLG89ci5pbmRleCxpPXIub2Zmc2V0LHM9dC5tYXliZUNoaWxkKG8pLGE9dC5maW5kSW5kZXgobiksYz1hLmluZGV4LGw9YS5vZmZzZXQ7aWYoaT09ZXx8cy5pc1RleHQpe2lmKGwhPW4mJiF0LmNoaWxkKGMpLmlzVGV4dCl0aHJvdyBuZXcgUmFuZ2VFcnJvcigiUmVtb3Zpbmcgbm9uLWZsYXQgcmFuZ2UiKTtyZXR1cm4gdC5jdXQoMCxlKS5hcHBlbmQodC5jdXQobikpfWlmKG8hPWMpdGhyb3cgbmV3IFJhbmdlRXJyb3IoIlJlbW92aW5nIG5vbi1mbGF0IHJhbmdlIik7cmV0dXJuIHQucmVwbGFjZUNoaWxkKG8scy5jb3B5KG0ocy5jb250ZW50LGUtaS0xLG4taS0xKSkpfWZ1bmN0aW9uIHkodCxlLG4scil7dmFyIG89dC5maW5kSW5kZXgoZSksaT1vLmluZGV4LHM9by5vZmZzZXQsYT10Lm1heWJlQ2hpbGQoaSk7aWYocz09ZXx8YS5pc1RleHQpcmV0dXJuIHImJiFyLmNhblJlcGxhY2UoaSxpLG4pP251bGw6dC5jdXQoMCxlKS5hcHBlbmQobikuYXBwZW5kKHQuY3V0KGUpKTt2YXIgYz15KGEuY29udGVudCxlLXMtMSxuKTtyZXR1cm4gYyYmdC5yZXBsYWNlQ2hpbGQoaSxhLmNvcHkoYykpfWZ1bmN0aW9uIGcodCxlLG4pe2lmKG4ub3BlblN0YXJ0PnQuZGVwdGgpdGhyb3cgbmV3IGYoIkluc2VydGVkIGNvbnRlbnQgZGVlcGVyIHRoYW4gaW5zZXJ0aW9uIHBvc2l0aW9uIik7aWYodC5kZXB0aC1uLm9wZW5TdGFydCE9ZS5kZXB0aC1uLm9wZW5FbmQpdGhyb3cgbmV3IGYoIkluY29uc2lzdGVudCBvcGVuIGRlcHRocyIpO3JldHVybiB3KHQsZSxuLDApfWZ1bmN0aW9uIHcodCxlLG4scil7dmFyIG89dC5pbmRleChyKSxpPXQubm9kZShyKTtpZihvPT1lLmluZGV4KHIpJiZyPHQuZGVwdGgtbi5vcGVuU3RhcnQpe3ZhciBzPXcodCxlLG4scisxKTtyZXR1cm4gaS5jb3B5KGkuY29udGVudC5yZXBsYWNlQ2hpbGQobyxzKSl9aWYobi5jb250ZW50LnNpemUpe2lmKG4ub3BlblN0YXJ0fHxuLm9wZW5FbmR8fHQuZGVwdGghPXJ8fGUuZGVwdGghPXIpe3ZhciBhPVQobix0KSxjPWEuc3RhcnQsbD1hLmVuZDtyZXR1cm4gQyhpLE8odCxjLGwsZSxyKSl9dmFyIHA9dC5wYXJlbnQsdT1wLmNvbnRlbnQ7cmV0dXJuIEMocCx1LmN1dCgwLHQucGFyZW50T2Zmc2V0KS5hcHBlbmQobi5jb250ZW50KS5hcHBlbmQodS5jdXQoZS5wYXJlbnRPZmZzZXQpKSl9cmV0dXJuIEMoaSxNKHQsZSxyKSl9ZnVuY3Rpb24geCh0LGUpe2lmKCFlLnR5cGUuY29tcGF0aWJsZUNvbnRlbnQodC50eXBlKSl0aHJvdyBuZXcgZigiQ2Fubm90IGpvaW4gIitlLnR5cGUubmFtZSsiIG9udG8gIit0LnR5cGUubmFtZSl9ZnVuY3Rpb24gYih0LGUsbil7dmFyIHI9dC5ub2RlKG4pO3JldHVybiB4KHIsZS5ub2RlKG4pKSxyfWZ1bmN0aW9uIGsodCxlKXt2YXIgbj1lLmxlbmd0aC0xO24+PTAmJnQuaXNUZXh0JiZ0LnNhbWVNYXJrdXAoZVtuXSk/ZVtuXT10LndpdGhUZXh0KGVbbl0udGV4dCt0LnRleHQpOmUucHVzaCh0KX1mdW5jdGlvbiBTKHQsZSxuLHIpe3ZhciBvPShlfHx0KS5ub2RlKG4pLGk9MCxzPWU/ZS5pbmRleChuKTpvLmNoaWxkQ291bnQ7dCYmKGk9dC5pbmRleChuKSx0LmRlcHRoPm4/aSsrOnQudGV4dE9mZnNldCYmKGsodC5ub2RlQWZ0ZXIsciksaSsrKSk7Zm9yKHZhciBhPWk7YTxzO2ErKylrKG8uY2hpbGQoYSkscik7ZSYmZS5kZXB0aD09biYmZS50ZXh0T2Zmc2V0JiZrKGUubm9kZUJlZm9yZSxyKX1mdW5jdGlvbiBDKHQsZSl7aWYoIXQudHlwZS52YWxpZENvbnRlbnQoZSkpdGhyb3cgbmV3IGYoIkludmFsaWQgY29udGVudCBmb3Igbm9kZSAiK3QudHlwZS5uYW1lKTtyZXR1cm4gdC5jb3B5KGUpfWZ1bmN0aW9uIE8odCxlLG4scixvKXt2YXIgaT10LmRlcHRoPm8mJmIodCxlLG8rMSkscz1yLmRlcHRoPm8mJmIobixyLG8rMSksYz1bXTtyZXR1cm4gUyhudWxsLHQsbyxjKSxpJiZzJiZlLmluZGV4KG8pPT1uLmluZGV4KG8pPyh4KGkscyksayhDKGksTyh0LGUsbixyLG8rMSkpLGMpKTooaSYmayhDKGksTSh0LGUsbysxKSksYyksUyhlLG4sbyxjKSxzJiZrKEMocyxNKG4scixvKzEpKSxjKSksUyhyLG51bGwsbyxjKSxuZXcgYShjKX1mdW5jdGlvbiBNKHQsZSxuKXt2YXIgcj1bXTtpZihTKG51bGwsdCxuLHIpLHQuZGVwdGg+bil7dmFyIG89Yih0LGUsbisxKTtrKEMobyxNKHQsZSxuKzEpKSxyKX1yZXR1cm4gUyhlLG51bGwsbixyKSxuZXcgYShyKX1mdW5jdGlvbiBUKHQsZSl7Zm9yKHZhciBuPWUuZGVwdGgtdC5vcGVuU3RhcnQscj1lLm5vZGUobiksbz1yLmNvcHkodC5jb250ZW50KSxpPW4tMTtpPj0wO2ktLSlvPWUubm9kZShpKS5jb3B5KGEuZnJvbShvKSk7cmV0dXJue3N0YXJ0Om8ucmVzb2x2ZU5vQ2FjaGUodC5vcGVuU3RhcnQrbiksZW5kOm8ucmVzb2x2ZU5vQ2FjaGUoby5jb250ZW50LnNpemUtdC5vcGVuRW5kLW4pfX12LnNpemUuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY29udGVudC5zaXplLXRoaXMub3BlblN0YXJ0LXRoaXMub3BlbkVuZH0sZC5wcm90b3R5cGUuaW5zZXJ0QXQ9ZnVuY3Rpb24odCxlKXt2YXIgbj15KHRoaXMuY29udGVudCx0K3RoaXMub3BlblN0YXJ0LGUsbnVsbCk7cmV0dXJuIG4mJm5ldyBkKG4sdGhpcy5vcGVuU3RhcnQsdGhpcy5vcGVuRW5kKX0sZC5wcm90b3R5cGUucmVtb3ZlQmV0d2Vlbj1mdW5jdGlvbih0LGUpe3JldHVybiBuZXcgZChtKHRoaXMuY29udGVudCx0K3RoaXMub3BlblN0YXJ0LGUrdGhpcy5vcGVuU3RhcnQpLHRoaXMub3BlblN0YXJ0LHRoaXMub3BlbkVuZCl9LGQucHJvdG90eXBlLmVxPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLmNvbnRlbnQuZXEodC5jb250ZW50KSYmdGhpcy5vcGVuU3RhcnQ9PXQub3BlblN0YXJ0JiZ0aGlzLm9wZW5FbmQ9PXQub3BlbkVuZH0sZC5wcm90b3R5cGUudG9TdHJpbmc9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jb250ZW50KyIoIit0aGlzLm9wZW5TdGFydCsiLCIrdGhpcy5vcGVuRW5kKyIpIn0sZC5wcm90b3R5cGUudG9KU09OPWZ1bmN0aW9uKCl7aWYoIXRoaXMuY29udGVudC5zaXplKXJldHVybiBudWxsO3ZhciB0PXtjb250ZW50OnRoaXMuY29udGVudC50b0pTT04oKX07cmV0dXJuIHRoaXMub3BlblN0YXJ0PjAmJih0Lm9wZW5TdGFydD10aGlzLm9wZW5TdGFydCksdGhpcy5vcGVuRW5kPjAmJih0Lm9wZW5FbmQ9dGhpcy5vcGVuRW5kKSx0fSxkLmZyb21KU09OPWZ1bmN0aW9uKHQsZSl7aWYoIWUpcmV0dXJuIGQuZW1wdHk7dmFyIG49ZS5vcGVuU3RhcnR8fDAscj1lLm9wZW5FbmR8fDA7aWYoIm51bWJlciIhPXR5cGVvZiBufHwibnVtYmVyIiE9dHlwZW9mIHIpdGhyb3cgbmV3IFJhbmdlRXJyb3IoIkludmFsaWQgaW5wdXQgZm9yIFNsaWNlLmZyb21KU09OIik7cmV0dXJuIG5ldyBkKGEuZnJvbUpTT04odCxlLmNvbnRlbnQpLGUub3BlblN0YXJ0fHwwLGUub3BlbkVuZHx8MCl9LGQubWF4T3Blbj1mdW5jdGlvbih0LGUpe3ZvaWQgMD09PWUmJihlPSEwKTtmb3IodmFyIG49MCxyPTAsbz10LmZpcnN0Q2hpbGQ7byYmIW8uaXNMZWFmJiYoZXx8IW8udHlwZS5zcGVjLmlzb2xhdGluZyk7bz1vLmZpcnN0Q2hpbGQpbisrO2Zvcih2YXIgaT10Lmxhc3RDaGlsZDtpJiYhaS5pc0xlYWYmJihlfHwhaS50eXBlLnNwZWMuaXNvbGF0aW5nKTtpPWkubGFzdENoaWxkKXIrKztyZXR1cm4gbmV3IGQodCxuLHIpfSxPYmplY3QuZGVmaW5lUHJvcGVydGllcyhkLnByb3RvdHlwZSx2KSxkLmVtcHR5PW5ldyBkKGEuZW1wdHksMCwwKTt2YXIgTj1mdW5jdGlvbih0LGUsbil7dGhpcy5wb3M9dCx0aGlzLnBhdGg9ZSx0aGlzLmRlcHRoPWUubGVuZ3RoLzMtMSx0aGlzLnBhcmVudE9mZnNldD1ufSxFPXtwYXJlbnQ6e30sZG9jOnt9LHRleHRPZmZzZXQ6e30sbm9kZUFmdGVyOnt9LG5vZGVCZWZvcmU6e319O04ucHJvdG90eXBlLnJlc29sdmVEZXB0aD1mdW5jdGlvbih0KXtyZXR1cm4gbnVsbD09dD90aGlzLmRlcHRoOnQ8MD90aGlzLmRlcHRoK3Q6dH0sRS5wYXJlbnQuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubm9kZSh0aGlzLmRlcHRoKX0sRS5kb2MuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubm9kZSgwKX0sTi5wcm90b3R5cGUubm9kZT1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5wYXRoWzMqdGhpcy5yZXNvbHZlRGVwdGgodCldfSxOLnByb3RvdHlwZS5pbmRleD1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5wYXRoWzMqdGhpcy5yZXNvbHZlRGVwdGgodCkrMV19LE4ucHJvdG90eXBlLmluZGV4QWZ0ZXI9ZnVuY3Rpb24odCl7cmV0dXJuIHQ9dGhpcy5yZXNvbHZlRGVwdGgodCksdGhpcy5pbmRleCh0KSsodCE9dGhpcy5kZXB0aHx8dGhpcy50ZXh0T2Zmc2V0PzE6MCl9LE4ucHJvdG90eXBlLnN0YXJ0PWZ1bmN0aW9uKHQpe3JldHVybiB0PXRoaXMucmVzb2x2ZURlcHRoKHQpLDA9PXQ/MDp0aGlzLnBhdGhbMyp0LTFdKzF9LE4ucHJvdG90eXBlLmVuZD1mdW5jdGlvbih0KXtyZXR1cm4gdD10aGlzLnJlc29sdmVEZXB0aCh0KSx0aGlzLnN0YXJ0KHQpK3RoaXMubm9kZSh0KS5jb250ZW50LnNpemV9LE4ucHJvdG90eXBlLmJlZm9yZT1mdW5jdGlvbih0KXtpZih0PXRoaXMucmVzb2x2ZURlcHRoKHQpLCF0KXRocm93IG5ldyBSYW5nZUVycm9yKCJUaGVyZSBpcyBubyBwb3NpdGlvbiBiZWZvcmUgdGhlIHRvcC1sZXZlbCBub2RlIik7cmV0dXJuIHQ9PXRoaXMuZGVwdGgrMT90aGlzLnBvczp0aGlzLnBhdGhbMyp0LTFdfSxOLnByb3RvdHlwZS5hZnRlcj1mdW5jdGlvbih0KXtpZih0PXRoaXMucmVzb2x2ZURlcHRoKHQpLCF0KXRocm93IG5ldyBSYW5nZUVycm9yKCJUaGVyZSBpcyBubyBwb3NpdGlvbiBhZnRlciB0aGUgdG9wLWxldmVsIG5vZGUiKTtyZXR1cm4gdD09dGhpcy5kZXB0aCsxP3RoaXMucG9zOnRoaXMucGF0aFszKnQtMV0rdGhpcy5wYXRoWzMqdF0ubm9kZVNpemV9LEUudGV4dE9mZnNldC5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5wb3MtdGhpcy5wYXRoW3RoaXMucGF0aC5sZW5ndGgtMV19LEUubm9kZUFmdGVyLmdldD1mdW5jdGlvbigpe3ZhciB0PXRoaXMucGFyZW50LGU9dGhpcy5pbmRleCh0aGlzLmRlcHRoKTtpZihlPT10LmNoaWxkQ291bnQpcmV0dXJuIG51bGw7dmFyIG49dGhpcy5wb3MtdGhpcy5wYXRoW3RoaXMucGF0aC5sZW5ndGgtMV0scj10LmNoaWxkKGUpO3JldHVybiBuP3QuY2hpbGQoZSkuY3V0KG4pOnJ9LEUubm9kZUJlZm9yZS5nZXQ9ZnVuY3Rpb24oKXt2YXIgdD10aGlzLmluZGV4KHRoaXMuZGVwdGgpLGU9dGhpcy5wb3MtdGhpcy5wYXRoW3RoaXMucGF0aC5sZW5ndGgtMV07cmV0dXJuIGU/dGhpcy5wYXJlbnQuY2hpbGQodCkuY3V0KDAsZSk6MD09dD9udWxsOnRoaXMucGFyZW50LmNoaWxkKHQtMSl9LE4ucHJvdG90eXBlLm1hcmtzPWZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5wYXJlbnQsZT10aGlzLmluZGV4KCk7aWYoMD09dC5jb250ZW50LnNpemUpcmV0dXJuIGgubm9uZTtpZih0aGlzLnRleHRPZmZzZXQpcmV0dXJuIHQuY2hpbGQoZSkubWFya3M7dmFyIG49dC5tYXliZUNoaWxkKGUtMSkscj10Lm1heWJlQ2hpbGQoZSk7aWYoIW4pe3ZhciBvPW47bj1yLHI9b31mb3IodmFyIGk9bi5tYXJrcyxzPTA7czxpLmxlbmd0aDtzKyspITEhPT1pW3NdLnR5cGUuc3BlYy5pbmNsdXNpdmV8fHImJmlbc10uaXNJblNldChyLm1hcmtzKXx8KGk9aVtzLS1dLnJlbW92ZUZyb21TZXQoaSkpO3JldHVybiBpfSxOLnByb3RvdHlwZS5tYXJrc0Fjcm9zcz1mdW5jdGlvbih0KXt2YXIgZT10aGlzLnBhcmVudC5tYXliZUNoaWxkKHRoaXMuaW5kZXgoKSk7aWYoIWV8fCFlLmlzSW5saW5lKXJldHVybiBudWxsO2Zvcih2YXIgbj1lLm1hcmtzLHI9dC5wYXJlbnQubWF5YmVDaGlsZCh0LmluZGV4KCkpLG89MDtvPG4ubGVuZ3RoO28rKykhMSE9PW5bb10udHlwZS5zcGVjLmluY2x1c2l2ZXx8ciYmbltvXS5pc0luU2V0KHIubWFya3MpfHwobj1uW28tLV0ucmVtb3ZlRnJvbVNldChuKSk7cmV0dXJuIG59LE4ucHJvdG90eXBlLnNoYXJlZERlcHRoPWZ1bmN0aW9uKHQpe2Zvcih2YXIgZT10aGlzLG49dGhpcy5kZXB0aDtuPjA7bi0tKWlmKGUuc3RhcnQobik8PXQmJmUuZW5kKG4pPj10KXJldHVybiBuO3JldHVybiAwfSxOLnByb3RvdHlwZS5ibG9ja1JhbmdlPWZ1bmN0aW9uKHQsZSl7dmFyIG49dGhpcztpZih2b2lkIDA9PT10JiYodD10aGlzKSx0LnBvczx0aGlzLnBvcylyZXR1cm4gdC5ibG9ja1JhbmdlKHRoaXMpO2Zvcih2YXIgcj10aGlzLmRlcHRoLSh0aGlzLnBhcmVudC5pbmxpbmVDb250ZW50fHx0aGlzLnBvcz09dC5wb3M/MTowKTtyPj0wO3ItLSlpZih0LnBvczw9bi5lbmQocikmJighZXx8ZShuLm5vZGUocikpKSlyZXR1cm4gbmV3IHoobix0LHIpfSxOLnByb3RvdHlwZS5zYW1lUGFyZW50PWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLnBvcy10aGlzLnBhcmVudE9mZnNldD09dC5wb3MtdC5wYXJlbnRPZmZzZXR9LE4ucHJvdG90eXBlLm1heD1mdW5jdGlvbih0KXtyZXR1cm4gdC5wb3M+dGhpcy5wb3M/dDp0aGlzfSxOLnByb3RvdHlwZS5taW49ZnVuY3Rpb24odCl7cmV0dXJuIHQucG9zPHRoaXMucG9zP3Q6dGhpc30sTi5wcm90b3R5cGUudG9TdHJpbmc9ZnVuY3Rpb24oKXtmb3IodmFyIHQ9dGhpcyxlPSIiLG49MTtuPD10aGlzLmRlcHRoO24rKyllKz0oZT8iLyI6IiIpK3Qubm9kZShuKS50eXBlLm5hbWUrIl8iK3QuaW5kZXgobi0xKTtyZXR1cm4gZSsiOiIrdGhpcy5wYXJlbnRPZmZzZXR9LE4ucmVzb2x2ZT1mdW5jdGlvbih0LGUpe2lmKCEoZT49MCYmZTw9dC5jb250ZW50LnNpemUpKXRocm93IG5ldyBSYW5nZUVycm9yKCJQb3NpdGlvbiAiK2UrIiBvdXQgb2YgcmFuZ2UiKTtmb3IodmFyIG49W10scj0wLG89ZSxpPXQ7Oyl7dmFyIHM9aS5jb250ZW50LmZpbmRJbmRleChvKSxhPXMuaW5kZXgsYz1zLm9mZnNldCxsPW8tYztpZihuLnB1c2goaSxhLHIrYyksIWwpYnJlYWs7aWYoaT1pLmNoaWxkKGEpLGkuaXNUZXh0KWJyZWFrO289bC0xLHIrPWMrMX1yZXR1cm4gbmV3IE4oZSxuLG8pfSxOLnJlc29sdmVDYWNoZWQ9ZnVuY3Rpb24odCxlKXtmb3IodmFyIG49MDtuPEEubGVuZ3RoO24rKyl7dmFyIHI9QVtuXTtpZihyLnBvcz09ZSYmci5kb2M9PXQpcmV0dXJuIHJ9dmFyIG89QVtSXT1OLnJlc29sdmUodCxlKTtyZXR1cm4gUj0oUisxKSVELG99LE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKE4ucHJvdG90eXBlLEUpO3ZhciBBPVtdLFI9MCxEPTEyLHo9ZnVuY3Rpb24odCxlLG4pe3RoaXMuJGZyb209dCx0aGlzLiR0bz1lLHRoaXMuZGVwdGg9bn0sUD17c3RhcnQ6e30sZW5kOnt9LHBhcmVudDp7fSxzdGFydEluZGV4Ont9LGVuZEluZGV4Ont9fTtQLnN0YXJ0LmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLiRmcm9tLmJlZm9yZSh0aGlzLmRlcHRoKzEpfSxQLmVuZC5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy4kdG8uYWZ0ZXIodGhpcy5kZXB0aCsxKX0sUC5wYXJlbnQuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuJGZyb20ubm9kZSh0aGlzLmRlcHRoKX0sUC5zdGFydEluZGV4LmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLiRmcm9tLmluZGV4KHRoaXMuZGVwdGgpfSxQLmVuZEluZGV4LmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLiR0by5pbmRleEFmdGVyKHRoaXMuZGVwdGgpfSxPYmplY3QuZGVmaW5lUHJvcGVydGllcyh6LnByb3RvdHlwZSxQKTt2YXIgST1PYmplY3QuY3JlYXRlKG51bGwpLF89ZnVuY3Rpb24odCxlLG4scil7dGhpcy50eXBlPXQsdGhpcy5hdHRycz1lLHRoaXMuY29udGVudD1ufHxhLmVtcHR5LHRoaXMubWFya3M9cnx8aC5ub25lfSxGPXtub2RlU2l6ZTp7fSxjaGlsZENvdW50Ont9LHRleHRDb250ZW50Ont9LGZpcnN0Q2hpbGQ6e30sbGFzdENoaWxkOnt9LGlzQmxvY2s6e30saXNUZXh0YmxvY2s6e30saW5saW5lQ29udGVudDp7fSxpc0lubGluZTp7fSxpc1RleHQ6e30saXNMZWFmOnt9LGlzQXRvbTp7fX07Ri5ub2RlU2l6ZS5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5pc0xlYWY/MToyK3RoaXMuY29udGVudC5zaXplfSxGLmNoaWxkQ291bnQuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY29udGVudC5jaGlsZENvdW50fSxfLnByb3RvdHlwZS5jaGlsZD1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5jb250ZW50LmNoaWxkKHQpfSxfLnByb3RvdHlwZS5tYXliZUNoaWxkPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLmNvbnRlbnQubWF5YmVDaGlsZCh0KX0sXy5wcm90b3R5cGUuZm9yRWFjaD1mdW5jdGlvbih0KXt0aGlzLmNvbnRlbnQuZm9yRWFjaCh0KX0sXy5wcm90b3R5cGUubm9kZXNCZXR3ZWVuPWZ1bmN0aW9uKHQsZSxuLHIpe3ZvaWQgMD09PXImJihyPTApLHRoaXMuY29udGVudC5ub2Rlc0JldHdlZW4odCxlLG4scix0aGlzKX0sXy5wcm90b3R5cGUuZGVzY2VuZGFudHM9ZnVuY3Rpb24odCl7dGhpcy5ub2Rlc0JldHdlZW4oMCx0aGlzLmNvbnRlbnQuc2l6ZSx0KX0sRi50ZXh0Q29udGVudC5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy50ZXh0QmV0d2VlbigwLHRoaXMuY29udGVudC5zaXplLCIiKX0sXy5wcm90b3R5cGUudGV4dEJldHdlZW49ZnVuY3Rpb24odCxlLG4scil7cmV0dXJuIHRoaXMuY29udGVudC50ZXh0QmV0d2Vlbih0LGUsbixyKX0sRi5maXJzdENoaWxkLmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLmNvbnRlbnQuZmlyc3RDaGlsZH0sRi5sYXN0Q2hpbGQuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY29udGVudC5sYXN0Q2hpbGR9LF8ucHJvdG90eXBlLmVxPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzPT10fHx0aGlzLnNhbWVNYXJrdXAodCkmJnRoaXMuY29udGVudC5lcSh0LmNvbnRlbnQpfSxfLnByb3RvdHlwZS5zYW1lTWFya3VwPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLmhhc01hcmt1cCh0LnR5cGUsdC5hdHRycyx0Lm1hcmtzKX0sXy5wcm90b3R5cGUuaGFzTWFya3VwPWZ1bmN0aW9uKHQsZSxuKXtyZXR1cm4gdGhpcy50eXBlPT10JiZ1KHRoaXMuYXR0cnMsZXx8dC5kZWZhdWx0QXR0cnN8fEkpJiZoLnNhbWVTZXQodGhpcy5tYXJrcyxufHxoLm5vbmUpfSxfLnByb3RvdHlwZS5jb3B5PWZ1bmN0aW9uKHQpe3JldHVybiB2b2lkIDA9PT10JiYodD1udWxsKSx0PT10aGlzLmNvbnRlbnQ/dGhpczpuZXcgdGhpcy5jb25zdHJ1Y3Rvcih0aGlzLnR5cGUsdGhpcy5hdHRycyx0LHRoaXMubWFya3MpfSxfLnByb3RvdHlwZS5tYXJrPWZ1bmN0aW9uKHQpe3JldHVybiB0PT10aGlzLm1hcmtzP3RoaXM6bmV3IHRoaXMuY29uc3RydWN0b3IodGhpcy50eXBlLHRoaXMuYXR0cnMsdGhpcy5jb250ZW50LHQpfSxfLnByb3RvdHlwZS5jdXQ9ZnVuY3Rpb24odCxlKXtyZXR1cm4gMD09dCYmZT09dGhpcy5jb250ZW50LnNpemU/dGhpczp0aGlzLmNvcHkodGhpcy5jb250ZW50LmN1dCh0LGUpKX0sXy5wcm90b3R5cGUuc2xpY2U9ZnVuY3Rpb24odCxlLG4pe2lmKHZvaWQgMD09PWUmJihlPXRoaXMuY29udGVudC5zaXplKSx2b2lkIDA9PT1uJiYobj0hMSksdD09ZSlyZXR1cm4gZC5lbXB0eTt2YXIgcj10aGlzLnJlc29sdmUodCksbz10aGlzLnJlc29sdmUoZSksaT1uPzA6ci5zaGFyZWREZXB0aChlKSxzPXIuc3RhcnQoaSksYT1yLm5vZGUoaSksYz1hLmNvbnRlbnQuY3V0KHIucG9zLXMsby5wb3Mtcyk7cmV0dXJuIG5ldyBkKGMsci5kZXB0aC1pLG8uZGVwdGgtaSl9LF8ucHJvdG90eXBlLnJlcGxhY2U9ZnVuY3Rpb24odCxlLG4pe3JldHVybiBnKHRoaXMucmVzb2x2ZSh0KSx0aGlzLnJlc29sdmUoZSksbil9LF8ucHJvdG90eXBlLm5vZGVBdD1mdW5jdGlvbih0KXtmb3IodmFyIGU9dGhpczs7KXt2YXIgbj1lLmNvbnRlbnQuZmluZEluZGV4KHQpLHI9bi5pbmRleCxvPW4ub2Zmc2V0O2lmKGU9ZS5tYXliZUNoaWxkKHIpLCFlKXJldHVybiBudWxsO2lmKG89PXR8fGUuaXNUZXh0KXJldHVybiBlO3QtPW8rMX19LF8ucHJvdG90eXBlLmNoaWxkQWZ0ZXI9ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5jb250ZW50LmZpbmRJbmRleCh0KSxuPWUuaW5kZXgscj1lLm9mZnNldDtyZXR1cm57bm9kZTp0aGlzLmNvbnRlbnQubWF5YmVDaGlsZChuKSxpbmRleDpuLG9mZnNldDpyfX0sXy5wcm90b3R5cGUuY2hpbGRCZWZvcmU9ZnVuY3Rpb24odCl7aWYoMD09dClyZXR1cm57bm9kZTpudWxsLGluZGV4OjAsb2Zmc2V0OjB9O3ZhciBlPXRoaXMuY29udGVudC5maW5kSW5kZXgodCksbj1lLmluZGV4LHI9ZS5vZmZzZXQ7aWYocjx0KXJldHVybntub2RlOnRoaXMuY29udGVudC5jaGlsZChuKSxpbmRleDpuLG9mZnNldDpyfTt2YXIgbz10aGlzLmNvbnRlbnQuY2hpbGQobi0xKTtyZXR1cm57bm9kZTpvLGluZGV4Om4tMSxvZmZzZXQ6ci1vLm5vZGVTaXplfX0sXy5wcm90b3R5cGUucmVzb2x2ZT1mdW5jdGlvbih0KXtyZXR1cm4gTi5yZXNvbHZlQ2FjaGVkKHRoaXMsdCl9LF8ucHJvdG90eXBlLnJlc29sdmVOb0NhY2hlPWZ1bmN0aW9uKHQpe3JldHVybiBOLnJlc29sdmUodGhpcyx0KX0sXy5wcm90b3R5cGUucmFuZ2VIYXNNYXJrPWZ1bmN0aW9uKHQsZSxuKXt2YXIgcj0hMTtyZXR1cm4gZT50JiZ0aGlzLm5vZGVzQmV0d2Vlbih0LGUsKGZ1bmN0aW9uKHQpe3JldHVybiBuLmlzSW5TZXQodC5tYXJrcykmJihyPSEwKSwhcn0pKSxyfSxGLmlzQmxvY2suZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudHlwZS5pc0Jsb2NrfSxGLmlzVGV4dGJsb2NrLmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLnR5cGUuaXNUZXh0YmxvY2t9LEYuaW5saW5lQ29udGVudC5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy50eXBlLmlubGluZUNvbnRlbnR9LEYuaXNJbmxpbmUuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudHlwZS5pc0lubGluZX0sRi5pc1RleHQuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudHlwZS5pc1RleHR9LEYuaXNMZWFmLmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLnR5cGUuaXNMZWFmfSxGLmlzQXRvbS5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy50eXBlLmlzQXRvbX0sXy5wcm90b3R5cGUudG9TdHJpbmc9ZnVuY3Rpb24oKXtpZih0aGlzLnR5cGUuc3BlYy50b0RlYnVnU3RyaW5nKXJldHVybiB0aGlzLnR5cGUuc3BlYy50b0RlYnVnU3RyaW5nKHRoaXMpO3ZhciB0PXRoaXMudHlwZS5uYW1lO3JldHVybiB0aGlzLmNvbnRlbnQuc2l6ZSYmKHQrPSIoIit0aGlzLmNvbnRlbnQudG9TdHJpbmdJbm5lcigpKyIpIiksaih0aGlzLm1hcmtzLHQpfSxfLnByb3RvdHlwZS5jb250ZW50TWF0Y2hBdD1mdW5jdGlvbih0KXt2YXIgZT10aGlzLnR5cGUuY29udGVudE1hdGNoLm1hdGNoRnJhZ21lbnQodGhpcy5jb250ZW50LDAsdCk7aWYoIWUpdGhyb3cgbmV3IEVycm9yKCJDYWxsZWQgY29udGVudE1hdGNoQXQgb24gYSBub2RlIHdpdGggaW52YWxpZCBjb250ZW50Iik7cmV0dXJuIGV9LF8ucHJvdG90eXBlLmNhblJlcGxhY2U9ZnVuY3Rpb24odCxlLG4scixvKXt2YXIgaT10aGlzO3ZvaWQgMD09PW4mJihuPWEuZW1wdHkpLHZvaWQgMD09PXImJihyPTApLHZvaWQgMD09PW8mJihvPW4uY2hpbGRDb3VudCk7dmFyIHM9dGhpcy5jb250ZW50TWF0Y2hBdCh0KS5tYXRjaEZyYWdtZW50KG4scixvKSxjPXMmJnMubWF0Y2hGcmFnbWVudCh0aGlzLmNvbnRlbnQsZSk7aWYoIWN8fCFjLnZhbGlkRW5kKXJldHVybiExO2Zvcih2YXIgbD1yO2w8bztsKyspaWYoIWkudHlwZS5hbGxvd3NNYXJrcyhuLmNoaWxkKGwpLm1hcmtzKSlyZXR1cm4hMTtyZXR1cm4hMH0sXy5wcm90b3R5cGUuY2FuUmVwbGFjZVdpdGg9ZnVuY3Rpb24odCxlLG4scil7aWYociYmIXRoaXMudHlwZS5hbGxvd3NNYXJrcyhyKSlyZXR1cm4hMTt2YXIgbz10aGlzLmNvbnRlbnRNYXRjaEF0KHQpLm1hdGNoVHlwZShuKSxpPW8mJm8ubWF0Y2hGcmFnbWVudCh0aGlzLmNvbnRlbnQsZSk7cmV0dXJuISFpJiZpLnZhbGlkRW5kfSxfLnByb3RvdHlwZS5jYW5BcHBlbmQ9ZnVuY3Rpb24odCl7cmV0dXJuIHQuY29udGVudC5zaXplP3RoaXMuY2FuUmVwbGFjZSh0aGlzLmNoaWxkQ291bnQsdGhpcy5jaGlsZENvdW50LHQuY29udGVudCk6dGhpcy50eXBlLmNvbXBhdGlibGVDb250ZW50KHQudHlwZSl9LF8ucHJvdG90eXBlLmRlZmF1bHRDb250ZW50VHlwZT1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5jb250ZW50TWF0Y2hBdCh0KS5kZWZhdWx0VHlwZX0sXy5wcm90b3R5cGUuY2hlY2s9ZnVuY3Rpb24oKXtpZighdGhpcy50eXBlLnZhbGlkQ29udGVudCh0aGlzLmNvbnRlbnQpKXRocm93IG5ldyBSYW5nZUVycm9yKCJJbnZhbGlkIGNvbnRlbnQgZm9yIG5vZGUgIit0aGlzLnR5cGUubmFtZSsiOiAiK3RoaXMuY29udGVudC50b1N0cmluZygpLnNsaWNlKDAsNTApKTt0aGlzLmNvbnRlbnQuZm9yRWFjaCgoZnVuY3Rpb24odCl7cmV0dXJuIHQuY2hlY2soKX0pKX0sXy5wcm90b3R5cGUudG9KU09OPWZ1bmN0aW9uKCl7dmFyIHQ9dGhpcyxlPXt0eXBlOnRoaXMudHlwZS5uYW1lfTtmb3IodmFyIG4gaW4gdC5hdHRycyl7ZS5hdHRycz10LmF0dHJzO2JyZWFrfXJldHVybiB0aGlzLmNvbnRlbnQuc2l6ZSYmKGUuY29udGVudD10aGlzLmNvbnRlbnQudG9KU09OKCkpLHRoaXMubWFya3MubGVuZ3RoJiYoZS5tYXJrcz10aGlzLm1hcmtzLm1hcCgoZnVuY3Rpb24odCl7cmV0dXJuIHQudG9KU09OKCl9KSkpLGV9LF8uZnJvbUpTT049ZnVuY3Rpb24odCxlKXtpZighZSl0aHJvdyBuZXcgUmFuZ2VFcnJvcigiSW52YWxpZCBpbnB1dCBmb3IgTm9kZS5mcm9tSlNPTiIpO3ZhciBuPW51bGw7aWYoZS5tYXJrcyl7aWYoIUFycmF5LmlzQXJyYXkoZS5tYXJrcykpdGhyb3cgbmV3IFJhbmdlRXJyb3IoIkludmFsaWQgbWFyayBkYXRhIGZvciBOb2RlLmZyb21KU09OIik7bj1lLm1hcmtzLm1hcCh0Lm1hcmtGcm9tSlNPTil9aWYoInRleHQiPT1lLnR5cGUpe2lmKCJzdHJpbmciIT10eXBlb2YgZS50ZXh0KXRocm93IG5ldyBSYW5nZUVycm9yKCJJbnZhbGlkIHRleHQgbm9kZSBpbiBKU09OIik7cmV0dXJuIHQudGV4dChlLnRleHQsbil9dmFyIHI9YS5mcm9tSlNPTih0LGUuY29udGVudCk7cmV0dXJuIHQubm9kZVR5cGUoZS50eXBlKS5jcmVhdGUoZS5hdHRycyxyLG4pfSxPYmplY3QuZGVmaW5lUHJvcGVydGllcyhfLnByb3RvdHlwZSxGKTt2YXIgQj1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKGUsbixyLG8pe2lmKHQuY2FsbCh0aGlzLGUsbixudWxsLG8pLCFyKXRocm93IG5ldyBSYW5nZUVycm9yKCJFbXB0eSB0ZXh0IG5vZGVzIGFyZSBub3QgYWxsb3dlZCIpO3RoaXMudGV4dD1yfXQmJihlLl9fcHJvdG9fXz10KSxlLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKHQmJnQucHJvdG90eXBlKSxlLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1lO3ZhciBuPXt0ZXh0Q29udGVudDp7fSxub2RlU2l6ZTp7fX07cmV0dXJuIGUucHJvdG90eXBlLnRvU3RyaW5nPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudHlwZS5zcGVjLnRvRGVidWdTdHJpbmc/dGhpcy50eXBlLnNwZWMudG9EZWJ1Z1N0cmluZyh0aGlzKTpqKHRoaXMubWFya3MsSlNPTi5zdHJpbmdpZnkodGhpcy50ZXh0KSl9LG4udGV4dENvbnRlbnQuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudGV4dH0sZS5wcm90b3R5cGUudGV4dEJldHdlZW49ZnVuY3Rpb24odCxlKXtyZXR1cm4gdGhpcy50ZXh0LnNsaWNlKHQsZSl9LG4ubm9kZVNpemUuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudGV4dC5sZW5ndGh9LGUucHJvdG90eXBlLm1hcms9ZnVuY3Rpb24odCl7cmV0dXJuIHQ9PXRoaXMubWFya3M/dGhpczpuZXcgZSh0aGlzLnR5cGUsdGhpcy5hdHRycyx0aGlzLnRleHQsdCl9LGUucHJvdG90eXBlLndpdGhUZXh0PWZ1bmN0aW9uKHQpe3JldHVybiB0PT10aGlzLnRleHQ/dGhpczpuZXcgZSh0aGlzLnR5cGUsdGhpcy5hdHRycyx0LHRoaXMubWFya3MpfSxlLnByb3RvdHlwZS5jdXQ9ZnVuY3Rpb24odCxlKXtyZXR1cm4gdm9pZCAwPT09dCYmKHQ9MCksdm9pZCAwPT09ZSYmKGU9dGhpcy50ZXh0Lmxlbmd0aCksMD09dCYmZT09dGhpcy50ZXh0Lmxlbmd0aD90aGlzOnRoaXMud2l0aFRleHQodGhpcy50ZXh0LnNsaWNlKHQsZSkpfSxlLnByb3RvdHlwZS5lcT1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5zYW1lTWFya3VwKHQpJiZ0aGlzLnRleHQ9PXQudGV4dH0sZS5wcm90b3R5cGUudG9KU09OPWZ1bmN0aW9uKCl7dmFyIGU9dC5wcm90b3R5cGUudG9KU09OLmNhbGwodGhpcyk7cmV0dXJuIGUudGV4dD10aGlzLnRleHQsZX0sT2JqZWN0LmRlZmluZVByb3BlcnRpZXMoZS5wcm90b3R5cGUsbiksZX0oXyk7ZnVuY3Rpb24gaih0LGUpe2Zvcih2YXIgbj10Lmxlbmd0aC0xO24+PTA7bi0tKWU9dFtuXS50eXBlLm5hbWUrIigiK2UrIikiO3JldHVybiBlfXZhciAkPWZ1bmN0aW9uKHQpe3RoaXMudmFsaWRFbmQ9dCx0aGlzLm5leHQ9W10sdGhpcy53cmFwQ2FjaGU9W119LFY9e2lubGluZUNvbnRlbnQ6e30sZGVmYXVsdFR5cGU6e30sZWRnZUNvdW50Ont9fTskLnBhcnNlPWZ1bmN0aW9uKHQsZSl7dmFyIG49bmV3IEwodCxlKTtpZihudWxsPT1uLm5leHQpcmV0dXJuICQuZW1wdHk7dmFyIHI9cShuKTtuLm5leHQmJm4uZXJyKCJVbmV4cGVjdGVkIHRyYWlsaW5nIHRleHQiKTt2YXIgbz10dChZKHIpKTtyZXR1cm4gZXQobyxuKSxvfSwkLnByb3RvdHlwZS5tYXRjaFR5cGU9ZnVuY3Rpb24odCl7Zm9yKHZhciBlPXRoaXMsbj0wO248dGhpcy5uZXh0Lmxlbmd0aDtuKz0yKWlmKGUubmV4dFtuXT09dClyZXR1cm4gZS5uZXh0W24rMV07cmV0dXJuIG51bGx9LCQucHJvdG90eXBlLm1hdGNoRnJhZ21lbnQ9ZnVuY3Rpb24odCxlLG4pe3ZvaWQgMD09PWUmJihlPTApLHZvaWQgMD09PW4mJihuPXQuY2hpbGRDb3VudCk7Zm9yKHZhciByPXRoaXMsbz1lO3ImJm88bjtvKyspcj1yLm1hdGNoVHlwZSh0LmNoaWxkKG8pLnR5cGUpO3JldHVybiByfSxWLmlubGluZUNvbnRlbnQuZ2V0PWZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5uZXh0WzBdO3JldHVybiEhdCYmdC5pc0lubGluZX0sVi5kZWZhdWx0VHlwZS5nZXQ9ZnVuY3Rpb24oKXtmb3IodmFyIHQ9dGhpcyxlPTA7ZTx0aGlzLm5leHQubGVuZ3RoO2UrPTIpe3ZhciBuPXQubmV4dFtlXTtpZighbi5pc1RleHQmJiFuLmhhc1JlcXVpcmVkQXR0cnMoKSlyZXR1cm4gbn19LCQucHJvdG90eXBlLmNvbXBhdGlibGU9ZnVuY3Rpb24odCl7Zm9yKHZhciBlPXRoaXMsbj0wO248dGhpcy5uZXh0Lmxlbmd0aDtuKz0yKWZvcih2YXIgcj0wO3I8dC5uZXh0Lmxlbmd0aDtyKz0yKWlmKGUubmV4dFtuXT09dC5uZXh0W3JdKXJldHVybiEwO3JldHVybiExfSwkLnByb3RvdHlwZS5maWxsQmVmb3JlPWZ1bmN0aW9uKHQsZSxuKXt2b2lkIDA9PT1lJiYoZT0hMSksdm9pZCAwPT09biYmKG49MCk7dmFyIHI9W3RoaXNdO2Z1bmN0aW9uIG8oaSxzKXt2YXIgYz1pLm1hdGNoRnJhZ21lbnQodCxuKTtpZihjJiYoIWV8fGMudmFsaWRFbmQpKXJldHVybiBhLmZyb20ocy5tYXAoKGZ1bmN0aW9uKHQpe3JldHVybiB0LmNyZWF0ZUFuZEZpbGwoKX0pKSk7Zm9yKHZhciBsPTA7bDxpLm5leHQubGVuZ3RoO2wrPTIpe3ZhciBwPWkubmV4dFtsXSx1PWkubmV4dFtsKzFdO2lmKCFwLmlzVGV4dCYmIXAuaGFzUmVxdWlyZWRBdHRycygpJiYtMT09ci5pbmRleE9mKHUpKXtyLnB1c2godSk7dmFyIGg9byh1LHMuY29uY2F0KHApKTtpZihoKXJldHVybiBofX19cmV0dXJuIG8odGhpcyxbXSl9LCQucHJvdG90eXBlLmZpbmRXcmFwcGluZz1mdW5jdGlvbih0KXtmb3IodmFyIGU9dGhpcyxuPTA7bjx0aGlzLndyYXBDYWNoZS5sZW5ndGg7bis9MilpZihlLndyYXBDYWNoZVtuXT09dClyZXR1cm4gZS53cmFwQ2FjaGVbbisxXTt2YXIgcj10aGlzLmNvbXB1dGVXcmFwcGluZyh0KTtyZXR1cm4gdGhpcy53cmFwQ2FjaGUucHVzaCh0LHIpLHJ9LCQucHJvdG90eXBlLmNvbXB1dGVXcmFwcGluZz1mdW5jdGlvbih0KXt2YXIgZT1PYmplY3QuY3JlYXRlKG51bGwpLG49W3ttYXRjaDp0aGlzLHR5cGU6bnVsbCx2aWE6bnVsbH1dO3doaWxlKG4ubGVuZ3RoKXt2YXIgcj1uLnNoaWZ0KCksbz1yLm1hdGNoO2lmKG8ubWF0Y2hUeXBlKHQpKXtmb3IodmFyIGk9W10scz1yO3MudHlwZTtzPXMudmlhKWkucHVzaChzLnR5cGUpO3JldHVybiBpLnJldmVyc2UoKX1mb3IodmFyIGE9MDthPG8ubmV4dC5sZW5ndGg7YSs9Mil7dmFyIGM9by5uZXh0W2FdO2MuaXNMZWFmfHxjLmhhc1JlcXVpcmVkQXR0cnMoKXx8Yy5uYW1lIGluIGV8fHIudHlwZSYmIW8ubmV4dFthKzFdLnZhbGlkRW5kfHwobi5wdXNoKHttYXRjaDpjLmNvbnRlbnRNYXRjaCx0eXBlOmMsdmlhOnJ9KSxlW2MubmFtZV09ITApfX19LFYuZWRnZUNvdW50LmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLm5leHQubGVuZ3RoPj4xfSwkLnByb3RvdHlwZS5lZGdlPWZ1bmN0aW9uKHQpe3ZhciBlPXQ8PDE7aWYoZT50aGlzLm5leHQubGVuZ3RoKXRocm93IG5ldyBSYW5nZUVycm9yKCJUaGVyZSdzIG5vICIrdCsidGggZWRnZSBpbiB0aGlzIGNvbnRlbnQgbWF0Y2giKTtyZXR1cm57dHlwZTp0aGlzLm5leHRbZV0sbmV4dDp0aGlzLm5leHRbZSsxXX19LCQucHJvdG90eXBlLnRvU3RyaW5nPWZ1bmN0aW9uKCl7dmFyIHQ9W107ZnVuY3Rpb24gZShuKXt0LnB1c2gobik7Zm9yKHZhciByPTE7cjxuLm5leHQubGVuZ3RoO3IrPTIpLTE9PXQuaW5kZXhPZihuLm5leHRbcl0pJiZlKG4ubmV4dFtyXSl9cmV0dXJuIGUodGhpcyksdC5tYXAoKGZ1bmN0aW9uKGUsbil7Zm9yKHZhciByPW4rKGUudmFsaWRFbmQ/IioiOiIgIikrIiAiLG89MDtvPGUubmV4dC5sZW5ndGg7bys9MilyKz0obz8iLCAiOiIiKStlLm5leHRbb10ubmFtZSsiLT4iK3QuaW5kZXhPZihlLm5leHRbbysxXSk7cmV0dXJuIHJ9KSkuam9pbigiXG4iKX0sT2JqZWN0LmRlZmluZVByb3BlcnRpZXMoJC5wcm90b3R5cGUsViksJC5lbXB0eT1uZXcgJCghMCk7dmFyIEw9ZnVuY3Rpb24odCxlKXt0aGlzLnN0cmluZz10LHRoaXMubm9kZVR5cGVzPWUsdGhpcy5pbmxpbmU9bnVsbCx0aGlzLnBvcz0wLHRoaXMudG9rZW5zPXQuc3BsaXQoL1xzKig/PVxifFxXfCQpLyksIiI9PXRoaXMudG9rZW5zW3RoaXMudG9rZW5zLmxlbmd0aC0xXSYmdGhpcy50b2tlbnMucG9wKCksIiI9PXRoaXMudG9rZW5zWzBdJiZ0aGlzLnRva2Vucy51bnNoaWZ0KCl9LEo9e25leHQ6e319O2Z1bmN0aW9uIHEodCl7dmFyIGU9W107ZG97ZS5wdXNoKFcodCkpfXdoaWxlKHQuZWF0KCJ8IikpO3JldHVybiAxPT1lLmxlbmd0aD9lWzBdOnt0eXBlOiJjaG9pY2UiLGV4cHJzOmV9fWZ1bmN0aW9uIFcodCl7dmFyIGU9W107ZG97ZS5wdXNoKEgodCkpfXdoaWxlKHQubmV4dCYmIikiIT10Lm5leHQmJiJ8IiE9dC5uZXh0KTtyZXR1cm4gMT09ZS5sZW5ndGg/ZVswXTp7dHlwZToic2VxIixleHByczplfX1mdW5jdGlvbiBIKHQpe2Zvcih2YXIgZT1YKHQpOzspaWYodC5lYXQoIisiKSllPXt0eXBlOiJwbHVzIixleHByOmV9O2Vsc2UgaWYodC5lYXQoIioiKSllPXt0eXBlOiJzdGFyIixleHByOmV9O2Vsc2UgaWYodC5lYXQoIj8iKSllPXt0eXBlOiJvcHQiLGV4cHI6ZX07ZWxzZXtpZighdC5lYXQoInsiKSlicmVhaztlPVUodCxlKX1yZXR1cm4gZX1mdW5jdGlvbiBLKHQpey9cRC8udGVzdCh0Lm5leHQpJiZ0LmVycigiRXhwZWN0ZWQgbnVtYmVyLCBnb3QgJyIrdC5uZXh0KyInIik7dmFyIGU9TnVtYmVyKHQubmV4dCk7cmV0dXJuIHQucG9zKyssZX1mdW5jdGlvbiBVKHQsZSl7dmFyIG49Syh0KSxyPW47cmV0dXJuIHQuZWF0KCIsIikmJihyPSJ9IiE9dC5uZXh0P0sodCk6LTEpLHQuZWF0KCJ9Iil8fHQuZXJyKCJVbmNsb3NlZCBicmFjZWQgcmFuZ2UiKSx7dHlwZToicmFuZ2UiLG1pbjpuLG1heDpyLGV4cHI6ZX19ZnVuY3Rpb24gRyh0LGUpe3ZhciBuPXQubm9kZVR5cGVzLHI9bltlXTtpZihyKXJldHVybltyXTt2YXIgbz1bXTtmb3IodmFyIGkgaW4gbil7dmFyIHM9bltpXTtzLmdyb3Vwcy5pbmRleE9mKGUpPi0xJiZvLnB1c2gocyl9cmV0dXJuIDA9PW8ubGVuZ3RoJiZ0LmVycigiTm8gbm9kZSB0eXBlIG9yIGdyb3VwICciK2UrIicgZm91bmQiKSxvfWZ1bmN0aW9uIFgodCl7aWYodC5lYXQoIigiKSl7dmFyIGU9cSh0KTtyZXR1cm4gdC5lYXQoIikiKXx8dC5lcnIoIk1pc3NpbmcgY2xvc2luZyBwYXJlbiIpLGV9aWYoIS9cVy8udGVzdCh0Lm5leHQpKXt2YXIgbj1HKHQsdC5uZXh0KS5tYXAoKGZ1bmN0aW9uKGUpe3JldHVybiBudWxsPT10LmlubGluZT90LmlubGluZT1lLmlzSW5saW5lOnQuaW5saW5lIT1lLmlzSW5saW5lJiZ0LmVycigiTWl4aW5nIGlubGluZSBhbmQgYmxvY2sgY29udGVudCIpLHt0eXBlOiJuYW1lIix2YWx1ZTplfX0pKTtyZXR1cm4gdC5wb3MrKywxPT1uLmxlbmd0aD9uWzBdOnt0eXBlOiJjaG9pY2UiLGV4cHJzOm59fXQuZXJyKCJVbmV4cGVjdGVkIHRva2VuICciK3QubmV4dCsiJyIpfWZ1bmN0aW9uIFkodCl7dmFyIGU9W1tdXTtyZXR1cm4gbyhpKHQsMCksbigpKSxlO2Z1bmN0aW9uIG4oKXtyZXR1cm4gZS5wdXNoKFtdKS0xfWZ1bmN0aW9uIHIodCxuLHIpe3ZhciBvPXt0ZXJtOnIsdG86bn07cmV0dXJuIGVbdF0ucHVzaChvKSxvfWZ1bmN0aW9uIG8odCxlKXt0LmZvckVhY2goKGZ1bmN0aW9uKHQpe3JldHVybiB0LnRvPWV9KSl9ZnVuY3Rpb24gaSh0LGUpe2lmKCJjaG9pY2UiPT10LnR5cGUpcmV0dXJuIHQuZXhwcnMucmVkdWNlKChmdW5jdGlvbih0LG4pe3JldHVybiB0LmNvbmNhdChpKG4sZSkpfSksW10pO2lmKCJzZXEiPT10LnR5cGUpZm9yKHZhciBzPTA7O3MrKyl7dmFyIGE9aSh0LmV4cHJzW3NdLGUpO2lmKHM9PXQuZXhwcnMubGVuZ3RoLTEpcmV0dXJuIGE7byhhLGU9bigpKX1lbHNle2lmKCJzdGFyIj09dC50eXBlKXt2YXIgYz1uKCk7cmV0dXJuIHIoZSxjKSxvKGkodC5leHByLGMpLGMpLFtyKGMpXX1pZigicGx1cyI9PXQudHlwZSl7dmFyIGw9bigpO3JldHVybiBvKGkodC5leHByLGUpLGwpLG8oaSh0LmV4cHIsbCksbCksW3IobCldfWlmKCJvcHQiPT10LnR5cGUpcmV0dXJuW3IoZSldLmNvbmNhdChpKHQuZXhwcixlKSk7aWYoInJhbmdlIj09dC50eXBlKXtmb3IodmFyIHA9ZSx1PTA7dTx0Lm1pbjt1Kyspe3ZhciBoPW4oKTtvKGkodC5leHByLHApLGgpLHA9aH1pZigtMT09dC5tYXgpbyhpKHQuZXhwcixwKSxwKTtlbHNlIGZvcih2YXIgZj10Lm1pbjtmPHQubWF4O2YrKyl7dmFyIGQ9bigpO3IocCxkKSxvKGkodC5leHByLHApLGQpLHA9ZH1yZXR1cm5bcihwKV19aWYoIm5hbWUiPT10LnR5cGUpcmV0dXJuW3IoZSxudWxsLHQudmFsdWUpXX19fWZ1bmN0aW9uIFEodCxlKXtyZXR1cm4gdC1lfWZ1bmN0aW9uIFoodCxlKXt2YXIgbj1bXTtyZXR1cm4gcihlKSxuLnNvcnQoUSk7ZnVuY3Rpb24gcihlKXt2YXIgbz10W2VdO2lmKDE9PW8ubGVuZ3RoJiYhb1swXS50ZXJtKXJldHVybiByKG9bMF0udG8pO24ucHVzaChlKTtmb3IodmFyIGk9MDtpPG8ubGVuZ3RoO2krKyl7dmFyIHM9b1tpXSxhPXMudGVybSxjPXMudG87YXx8LTEhPW4uaW5kZXhPZihjKXx8cihjKX19fWZ1bmN0aW9uIHR0KHQpe3ZhciBlPU9iamVjdC5jcmVhdGUobnVsbCk7cmV0dXJuIG4oWih0LDApKTtmdW5jdGlvbiBuKHIpe3ZhciBvPVtdO3IuZm9yRWFjaCgoZnVuY3Rpb24oZSl7dFtlXS5mb3JFYWNoKChmdW5jdGlvbihlKXt2YXIgbj1lLnRlcm0scj1lLnRvO2lmKG4pe3ZhciBpPW8uaW5kZXhPZihuKSxzPWk+LTEmJm9baSsxXTtaKHQscikuZm9yRWFjaCgoZnVuY3Rpb24odCl7c3x8by5wdXNoKG4scz1bXSksLTE9PXMuaW5kZXhPZih0KSYmcy5wdXNoKHQpfSkpfX0pKX0pKTtmb3IodmFyIGk9ZVtyLmpvaW4oIiwiKV09bmV3ICQoci5pbmRleE9mKHQubGVuZ3RoLTEpPi0xKSxzPTA7czxvLmxlbmd0aDtzKz0yKXt2YXIgYT1vW3MrMV0uc29ydChRKTtpLm5leHQucHVzaChvW3NdLGVbYS5qb2luKCIsIildfHxuKGEpKX1yZXR1cm4gaX19ZnVuY3Rpb24gZXQodCxlKXtmb3IodmFyIG49MCxyPVt0XTtuPHIubGVuZ3RoO24rKyl7Zm9yKHZhciBvPXJbbl0saT0hby52YWxpZEVuZCxzPVtdLGE9MDthPG8ubmV4dC5sZW5ndGg7YSs9Mil7dmFyIGM9by5uZXh0W2FdLGw9by5uZXh0W2ErMV07cy5wdXNoKGMubmFtZSksIWl8fGMuaXNUZXh0fHxjLmhhc1JlcXVpcmVkQXR0cnMoKXx8KGk9ITEpLC0xPT1yLmluZGV4T2YobCkmJnIucHVzaChsKX1pJiZlLmVycigiT25seSBub24tZ2VuZXJhdGFibGUgbm9kZXMgKCIrcy5qb2luKCIsICIpKyIpIGluIGEgcmVxdWlyZWQgcG9zaXRpb24iKX19ZnVuY3Rpb24gbnQodCl7dmFyIGU9T2JqZWN0LmNyZWF0ZShudWxsKTtmb3IodmFyIG4gaW4gdCl7dmFyIHI9dFtuXTtpZighci5oYXNEZWZhdWx0KXJldHVybiBudWxsO2Vbbl09ci5kZWZhdWx0fXJldHVybiBlfWZ1bmN0aW9uIHJ0KHQsZSl7dmFyIG49T2JqZWN0LmNyZWF0ZShudWxsKTtmb3IodmFyIHIgaW4gdCl7dmFyIG89ZSYmZVtyXTtpZih2b2lkIDA9PT1vKXt2YXIgaT10W3JdO2lmKCFpLmhhc0RlZmF1bHQpdGhyb3cgbmV3IFJhbmdlRXJyb3IoIk5vIHZhbHVlIHN1cHBsaWVkIGZvciBhdHRyaWJ1dGUgIityKTtvPWkuZGVmYXVsdH1uW3JdPW99cmV0dXJuIG59ZnVuY3Rpb24gb3QodCl7dmFyIGU9T2JqZWN0LmNyZWF0ZShudWxsKTtpZih0KWZvcih2YXIgbiBpbiB0KWVbbl09bmV3IGF0KHRbbl0pO3JldHVybiBlfUoubmV4dC5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy50b2tlbnNbdGhpcy5wb3NdfSxMLnByb3RvdHlwZS5lYXQ9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMubmV4dD09dCYmKHRoaXMucG9zKyt8fCEwKX0sTC5wcm90b3R5cGUuZXJyPWZ1bmN0aW9uKHQpe3Rocm93IG5ldyBTeW50YXhFcnJvcih0KyIgKGluIGNvbnRlbnQgZXhwcmVzc2lvbiAnIit0aGlzLnN0cmluZysiJykiKX0sT2JqZWN0LmRlZmluZVByb3BlcnRpZXMoTC5wcm90b3R5cGUsSik7dmFyIGl0PWZ1bmN0aW9uKHQsZSxuKXt0aGlzLm5hbWU9dCx0aGlzLnNjaGVtYT1lLHRoaXMuc3BlYz1uLHRoaXMuZ3JvdXBzPW4uZ3JvdXA/bi5ncm91cC5zcGxpdCgiICIpOltdLHRoaXMuYXR0cnM9b3Qobi5hdHRycyksdGhpcy5kZWZhdWx0QXR0cnM9bnQodGhpcy5hdHRycyksdGhpcy5jb250ZW50TWF0Y2g9bnVsbCx0aGlzLm1hcmtTZXQ9bnVsbCx0aGlzLmlubGluZUNvbnRlbnQ9bnVsbCx0aGlzLmlzQmxvY2s9IShuLmlubGluZXx8InRleHQiPT10KSx0aGlzLmlzVGV4dD0idGV4dCI9PXR9LHN0PXtpc0lubGluZTp7fSxpc1RleHRibG9jazp7fSxpc0xlYWY6e30saXNBdG9tOnt9fTtzdC5pc0lubGluZS5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4hdGhpcy5pc0Jsb2NrfSxzdC5pc1RleHRibG9jay5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5pc0Jsb2NrJiZ0aGlzLmlubGluZUNvbnRlbnR9LHN0LmlzTGVhZi5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jb250ZW50TWF0Y2g9PSQuZW1wdHl9LHN0LmlzQXRvbS5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5pc0xlYWZ8fHRoaXMuc3BlYy5hdG9tfSxpdC5wcm90b3R5cGUuaGFzUmVxdWlyZWRBdHRycz1mdW5jdGlvbih0KXt2YXIgZT10aGlzO2Zvcih2YXIgbiBpbiBlLmF0dHJzKWlmKGUuYXR0cnNbbl0uaXNSZXF1aXJlZCYmKCF0fHwhKG4gaW4gdCkpKXJldHVybiEwO3JldHVybiExfSxpdC5wcm90b3R5cGUuY29tcGF0aWJsZUNvbnRlbnQ9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXM9PXR8fHRoaXMuY29udGVudE1hdGNoLmNvbXBhdGlibGUodC5jb250ZW50TWF0Y2gpfSxpdC5wcm90b3R5cGUuY29tcHV0ZUF0dHJzPWZ1bmN0aW9uKHQpe3JldHVybiF0JiZ0aGlzLmRlZmF1bHRBdHRycz90aGlzLmRlZmF1bHRBdHRyczpydCh0aGlzLmF0dHJzLHQpfSxpdC5wcm90b3R5cGUuY3JlYXRlPWZ1bmN0aW9uKHQsZSxuKXtpZih0aGlzLmlzVGV4dCl0aHJvdyBuZXcgRXJyb3IoIk5vZGVUeXBlLmNyZWF0ZSBjYW4ndCBjb25zdHJ1Y3QgdGV4dCBub2RlcyIpO3JldHVybiBuZXcgXyh0aGlzLHRoaXMuY29tcHV0ZUF0dHJzKHQpLGEuZnJvbShlKSxoLnNldEZyb20obikpfSxpdC5wcm90b3R5cGUuY3JlYXRlQ2hlY2tlZD1mdW5jdGlvbih0LGUsbil7aWYoZT1hLmZyb20oZSksIXRoaXMudmFsaWRDb250ZW50KGUpKXRocm93IG5ldyBSYW5nZUVycm9yKCJJbnZhbGlkIGNvbnRlbnQgZm9yIG5vZGUgIit0aGlzLm5hbWUpO3JldHVybiBuZXcgXyh0aGlzLHRoaXMuY29tcHV0ZUF0dHJzKHQpLGUsaC5zZXRGcm9tKG4pKX0saXQucHJvdG90eXBlLmNyZWF0ZUFuZEZpbGw9ZnVuY3Rpb24odCxlLG4pe2lmKHQ9dGhpcy5jb21wdXRlQXR0cnModCksZT1hLmZyb20oZSksZS5zaXplKXt2YXIgcj10aGlzLmNvbnRlbnRNYXRjaC5maWxsQmVmb3JlKGUpO2lmKCFyKXJldHVybiBudWxsO2U9ci5hcHBlbmQoZSl9dmFyIG89dGhpcy5jb250ZW50TWF0Y2gubWF0Y2hGcmFnbWVudChlKS5maWxsQmVmb3JlKGEuZW1wdHksITApO3JldHVybiBvP25ldyBfKHRoaXMsdCxlLmFwcGVuZChvKSxoLnNldEZyb20obikpOm51bGx9LGl0LnByb3RvdHlwZS52YWxpZENvbnRlbnQ9ZnVuY3Rpb24odCl7dmFyIGU9dGhpcyxuPXRoaXMuY29udGVudE1hdGNoLm1hdGNoRnJhZ21lbnQodCk7aWYoIW58fCFuLnZhbGlkRW5kKXJldHVybiExO2Zvcih2YXIgcj0wO3I8dC5jaGlsZENvdW50O3IrKylpZighZS5hbGxvd3NNYXJrcyh0LmNoaWxkKHIpLm1hcmtzKSlyZXR1cm4hMTtyZXR1cm4hMH0saXQucHJvdG90eXBlLmFsbG93c01hcmtUeXBlPWZ1bmN0aW9uKHQpe3JldHVybiBudWxsPT10aGlzLm1hcmtTZXR8fHRoaXMubWFya1NldC5pbmRleE9mKHQpPi0xfSxpdC5wcm90b3R5cGUuYWxsb3dzTWFya3M9ZnVuY3Rpb24odCl7dmFyIGU9dGhpcztpZihudWxsPT10aGlzLm1hcmtTZXQpcmV0dXJuITA7Zm9yKHZhciBuPTA7bjx0Lmxlbmd0aDtuKyspaWYoIWUuYWxsb3dzTWFya1R5cGUodFtuXS50eXBlKSlyZXR1cm4hMTtyZXR1cm4hMH0saXQucHJvdG90eXBlLmFsbG93ZWRNYXJrcz1mdW5jdGlvbih0KXt2YXIgZSxuPXRoaXM7aWYobnVsbD09dGhpcy5tYXJrU2V0KXJldHVybiB0O2Zvcih2YXIgcj0wO3I8dC5sZW5ndGg7cisrKW4uYWxsb3dzTWFya1R5cGUodFtyXS50eXBlKT9lJiZlLnB1c2godFtyXSk6ZXx8KGU9dC5zbGljZSgwLHIpKTtyZXR1cm4gZT9lLmxlbmd0aD9lOmguZW1wdHk6dH0saXQuY29tcGlsZT1mdW5jdGlvbih0LGUpe3ZhciBuPU9iamVjdC5jcmVhdGUobnVsbCk7dC5mb3JFYWNoKChmdW5jdGlvbih0LHIpe3JldHVybiBuW3RdPW5ldyBpdCh0LGUscil9KSk7dmFyIHI9ZS5zcGVjLnRvcE5vZGV8fCJkb2MiO2lmKCFuW3JdKXRocm93IG5ldyBSYW5nZUVycm9yKCJTY2hlbWEgaXMgbWlzc2luZyBpdHMgdG9wIG5vZGUgdHlwZSAoJyIrcisiJykiKTtpZighbi50ZXh0KXRocm93IG5ldyBSYW5nZUVycm9yKCJFdmVyeSBzY2hlbWEgbmVlZHMgYSAndGV4dCcgdHlwZSIpO2Zvcih2YXIgbyBpbiBuLnRleHQuYXR0cnMpdGhyb3cgbmV3IFJhbmdlRXJyb3IoIlRoZSB0ZXh0IG5vZGUgdHlwZSBzaG91bGQgbm90IGhhdmUgYXR0cmlidXRlcyIpO3JldHVybiBufSxPYmplY3QuZGVmaW5lUHJvcGVydGllcyhpdC5wcm90b3R5cGUsc3QpO3ZhciBhdD1mdW5jdGlvbih0KXt0aGlzLmhhc0RlZmF1bHQ9T2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHQsImRlZmF1bHQiKSx0aGlzLmRlZmF1bHQ9dC5kZWZhdWx0fSxjdD17aXNSZXF1aXJlZDp7fX07Y3QuaXNSZXF1aXJlZC5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4hdGhpcy5oYXNEZWZhdWx0fSxPYmplY3QuZGVmaW5lUHJvcGVydGllcyhhdC5wcm90b3R5cGUsY3QpO3ZhciBsdD1mdW5jdGlvbih0LGUsbixyKXt0aGlzLm5hbWU9dCx0aGlzLnNjaGVtYT1uLHRoaXMuc3BlYz1yLHRoaXMuYXR0cnM9b3Qoci5hdHRycyksdGhpcy5yYW5rPWUsdGhpcy5leGNsdWRlZD1udWxsO3ZhciBvPW50KHRoaXMuYXR0cnMpO3RoaXMuaW5zdGFuY2U9byYmbmV3IGgodGhpcyxvKX07bHQucHJvdG90eXBlLmNyZWF0ZT1mdW5jdGlvbih0KXtyZXR1cm4hdCYmdGhpcy5pbnN0YW5jZT90aGlzLmluc3RhbmNlOm5ldyBoKHRoaXMscnQodGhpcy5hdHRycyx0KSl9LGx0LmNvbXBpbGU9ZnVuY3Rpb24odCxlKXt2YXIgbj1PYmplY3QuY3JlYXRlKG51bGwpLHI9MDtyZXR1cm4gdC5mb3JFYWNoKChmdW5jdGlvbih0LG8pe3JldHVybiBuW3RdPW5ldyBsdCh0LHIrKyxlLG8pfSkpLG59LGx0LnByb3RvdHlwZS5yZW1vdmVGcm9tU2V0PWZ1bmN0aW9uKHQpe2Zvcih2YXIgZT10aGlzLG49MDtuPHQubGVuZ3RoO24rKylpZih0W25dLnR5cGU9PWUpcmV0dXJuIHQuc2xpY2UoMCxuKS5jb25jYXQodC5zbGljZShuKzEpKTtyZXR1cm4gdH0sbHQucHJvdG90eXBlLmlzSW5TZXQ9ZnVuY3Rpb24odCl7Zm9yKHZhciBlPXRoaXMsbj0wO248dC5sZW5ndGg7bisrKWlmKHRbbl0udHlwZT09ZSlyZXR1cm4gdFtuXX0sbHQucHJvdG90eXBlLmV4Y2x1ZGVzPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLmV4Y2x1ZGVkLmluZGV4T2YodCk+LTF9O3ZhciBwdD1mdW5jdGlvbih0KXt2YXIgZT10aGlzO2Zvcih2YXIgbiBpbiB0aGlzLnNwZWM9e30sdCllLnNwZWNbbl09dFtuXTt0aGlzLnNwZWMubm9kZXM9by5mcm9tKHQubm9kZXMpLHRoaXMuc3BlYy5tYXJrcz1vLmZyb20odC5tYXJrcyksdGhpcy5ub2Rlcz1pdC5jb21waWxlKHRoaXMuc3BlYy5ub2Rlcyx0aGlzKSx0aGlzLm1hcmtzPWx0LmNvbXBpbGUodGhpcy5zcGVjLm1hcmtzLHRoaXMpO3ZhciByPU9iamVjdC5jcmVhdGUobnVsbCk7Zm9yKHZhciBpIGluIGUubm9kZXMpe2lmKGkgaW4gZS5tYXJrcyl0aHJvdyBuZXcgUmFuZ2VFcnJvcihpKyIgY2FuIG5vdCBiZSBib3RoIGEgbm9kZSBhbmQgYSBtYXJrIik7dmFyIHM9ZS5ub2Rlc1tpXSxhPXMuc3BlYy5jb250ZW50fHwiIixjPXMuc3BlYy5tYXJrcztzLmNvbnRlbnRNYXRjaD1yW2FdfHwoclthXT0kLnBhcnNlKGEsZS5ub2RlcykpLHMuaW5saW5lQ29udGVudD1zLmNvbnRlbnRNYXRjaC5pbmxpbmVDb250ZW50LHMubWFya1NldD0iXyI9PWM/bnVsbDpjP3V0KGUsYy5zcGxpdCgiICIpKToiIiE9YyYmcy5pbmxpbmVDb250ZW50P251bGw6W119Zm9yKHZhciBsIGluIGUubWFya3Mpe3ZhciBwPWUubWFya3NbbF0sdT1wLnNwZWMuZXhjbHVkZXM7cC5leGNsdWRlZD1udWxsPT11P1twXToiIj09dT9bXTp1dChlLHUuc3BsaXQoIiAiKSl9dGhpcy5ub2RlRnJvbUpTT049dGhpcy5ub2RlRnJvbUpTT04uYmluZCh0aGlzKSx0aGlzLm1hcmtGcm9tSlNPTj10aGlzLm1hcmtGcm9tSlNPTi5iaW5kKHRoaXMpLHRoaXMudG9wTm9kZVR5cGU9dGhpcy5ub2Rlc1t0aGlzLnNwZWMudG9wTm9kZXx8ImRvYyJdLHRoaXMuY2FjaGVkPU9iamVjdC5jcmVhdGUobnVsbCksdGhpcy5jYWNoZWQud3JhcHBpbmdzPU9iamVjdC5jcmVhdGUobnVsbCl9O2Z1bmN0aW9uIHV0KHQsZSl7Zm9yKHZhciBuPVtdLHI9MDtyPGUubGVuZ3RoO3IrKyl7dmFyIG89ZVtyXSxpPXQubWFya3Nbb10scz1pO2lmKGkpbi5wdXNoKGkpO2Vsc2UgZm9yKHZhciBhIGluIHQubWFya3Mpe3ZhciBjPXQubWFya3NbYV07KCJfIj09b3x8Yy5zcGVjLmdyb3VwJiZjLnNwZWMuZ3JvdXAuc3BsaXQoIiAiKS5pbmRleE9mKG8pPi0xKSYmbi5wdXNoKHM9Yyl9aWYoIXMpdGhyb3cgbmV3IFN5bnRheEVycm9yKCJVbmtub3duIG1hcmsgdHlwZTogJyIrZVtyXSsiJyIpfXJldHVybiBufXB0LnByb3RvdHlwZS5ub2RlPWZ1bmN0aW9uKHQsZSxuLHIpe2lmKCJzdHJpbmciPT10eXBlb2YgdCl0PXRoaXMubm9kZVR5cGUodCk7ZWxzZXtpZighKHQgaW5zdGFuY2VvZiBpdCkpdGhyb3cgbmV3IFJhbmdlRXJyb3IoIkludmFsaWQgbm9kZSB0eXBlOiAiK3QpO2lmKHQuc2NoZW1hIT10aGlzKXRocm93IG5ldyBSYW5nZUVycm9yKCJOb2RlIHR5cGUgZnJvbSBkaWZmZXJlbnQgc2NoZW1hIHVzZWQgKCIrdC5uYW1lKyIpIil9cmV0dXJuIHQuY3JlYXRlQ2hlY2tlZChlLG4scil9LHB0LnByb3RvdHlwZS50ZXh0PWZ1bmN0aW9uKHQsZSl7dmFyIG49dGhpcy5ub2Rlcy50ZXh0O3JldHVybiBuZXcgQihuLG4uZGVmYXVsdEF0dHJzLHQsaC5zZXRGcm9tKGUpKX0scHQucHJvdG90eXBlLm1hcms9ZnVuY3Rpb24odCxlKXtyZXR1cm4ic3RyaW5nIj09dHlwZW9mIHQmJih0PXRoaXMubWFya3NbdF0pLHQuY3JlYXRlKGUpfSxwdC5wcm90b3R5cGUubm9kZUZyb21KU09OPWZ1bmN0aW9uKHQpe3JldHVybiBfLmZyb21KU09OKHRoaXMsdCl9LHB0LnByb3RvdHlwZS5tYXJrRnJvbUpTT049ZnVuY3Rpb24odCl7cmV0dXJuIGguZnJvbUpTT04odGhpcyx0KX0scHQucHJvdG90eXBlLm5vZGVUeXBlPWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMubm9kZXNbdF07aWYoIWUpdGhyb3cgbmV3IFJhbmdlRXJyb3IoIlVua25vd24gbm9kZSB0eXBlOiAiK3QpO3JldHVybiBlfTt2YXIgaHQ9ZnVuY3Rpb24odCxlKXt2YXIgbj10aGlzO3RoaXMuc2NoZW1hPXQsdGhpcy5ydWxlcz1lLHRoaXMudGFncz1bXSx0aGlzLnN0eWxlcz1bXSxlLmZvckVhY2goKGZ1bmN0aW9uKHQpe3QudGFnP24udGFncy5wdXNoKHQpOnQuc3R5bGUmJm4uc3R5bGVzLnB1c2godCl9KSl9O2h0LnByb3RvdHlwZS5wYXJzZT1mdW5jdGlvbih0LGUpe3ZvaWQgMD09PWUmJihlPXt9KTt2YXIgbj1uZXcgYnQodGhpcyxlLCExKTtyZXR1cm4gbi5hZGRBbGwodCxudWxsLGUuZnJvbSxlLnRvKSxuLmZpbmlzaCgpfSxodC5wcm90b3R5cGUucGFyc2VTbGljZT1mdW5jdGlvbih0LGUpe3ZvaWQgMD09PWUmJihlPXt9KTt2YXIgbj1uZXcgYnQodGhpcyxlLCEwKTtyZXR1cm4gbi5hZGRBbGwodCxudWxsLGUuZnJvbSxlLnRvKSxkLm1heE9wZW4obi5maW5pc2goKSl9LGh0LnByb3RvdHlwZS5tYXRjaFRhZz1mdW5jdGlvbih0LGUpe2Zvcih2YXIgbj10aGlzLHI9MDtyPHRoaXMudGFncy5sZW5ndGg7cisrKXt2YXIgbz1uLnRhZ3Nbcl07aWYoQ3QodCxvLnRhZykmJih2b2lkIDA9PT1vLm5hbWVzcGFjZXx8dC5uYW1lc3BhY2VVUkk9PW8ubmFtZXNwYWNlKSYmKCFvLmNvbnRleHR8fGUubWF0Y2hlc0NvbnRleHQoby5jb250ZXh0KSkpe2lmKG8uZ2V0QXR0cnMpe3ZhciBpPW8uZ2V0QXR0cnModCk7aWYoITE9PT1pKWNvbnRpbnVlO28uYXR0cnM9aX1yZXR1cm4gb319fSxodC5wcm90b3R5cGUubWF0Y2hTdHlsZT1mdW5jdGlvbih0LGUsbil7Zm9yKHZhciByPXRoaXMsbz0wO288dGhpcy5zdHlsZXMubGVuZ3RoO28rKyl7dmFyIGk9ci5zdHlsZXNbb107aWYoISgwIT1pLnN0eWxlLmluZGV4T2YodCl8fGkuY29udGV4dCYmIW4ubWF0Y2hlc0NvbnRleHQoaS5jb250ZXh0KXx8aS5zdHlsZS5sZW5ndGg+dC5sZW5ndGgmJig2MSE9aS5zdHlsZS5jaGFyQ29kZUF0KHQubGVuZ3RoKXx8aS5zdHlsZS5zbGljZSh0Lmxlbmd0aCsxKSE9ZSkpKXtpZihpLmdldEF0dHJzKXt2YXIgcz1pLmdldEF0dHJzKGUpO2lmKCExPT09cyljb250aW51ZTtpLmF0dHJzPXN9cmV0dXJuIGl9fX0saHQuc2NoZW1hUnVsZXM9ZnVuY3Rpb24odCl7dmFyIGU9W107ZnVuY3Rpb24gbih0KXtmb3IodmFyIG49bnVsbD09dC5wcmlvcml0eT81MDp0LnByaW9yaXR5LHI9MDtyPGUubGVuZ3RoO3IrKyl7dmFyIG89ZVtyXSxpPW51bGw9PW8ucHJpb3JpdHk/NTA6by5wcmlvcml0eTtpZihpPG4pYnJlYWt9ZS5zcGxpY2UociwwLHQpfXZhciByPWZ1bmN0aW9uKGUpe3ZhciByPXQubWFya3NbZV0uc3BlYy5wYXJzZURPTTtyJiZyLmZvckVhY2goKGZ1bmN0aW9uKHQpe24odD1NdCh0KSksdC5tYXJrPWV9KSl9O2Zvcih2YXIgbyBpbiB0Lm1hcmtzKXIobyk7dmFyIGk9ZnVuY3Rpb24oZSl7dmFyIHI9dC5ub2Rlc1tzXS5zcGVjLnBhcnNlRE9NO3ImJnIuZm9yRWFjaCgoZnVuY3Rpb24odCl7bih0PU10KHQpKSx0Lm5vZGU9c30pKX07Zm9yKHZhciBzIGluIHQubm9kZXMpaShvKTtyZXR1cm4gZX0saHQuZnJvbVNjaGVtYT1mdW5jdGlvbih0KXtyZXR1cm4gdC5jYWNoZWQuZG9tUGFyc2VyfHwodC5jYWNoZWQuZG9tUGFyc2VyPW5ldyBodCh0LGh0LnNjaGVtYVJ1bGVzKHQpKSl9O3ZhciBmdD17YWRkcmVzczohMCxhcnRpY2xlOiEwLGFzaWRlOiEwLGJsb2NrcXVvdGU6ITAsY2FudmFzOiEwLGRkOiEwLGRpdjohMCxkbDohMCxmaWVsZHNldDohMCxmaWdjYXB0aW9uOiEwLGZpZ3VyZTohMCxmb290ZXI6ITAsZm9ybTohMCxoMTohMCxoMjohMCxoMzohMCxoNDohMCxoNTohMCxoNjohMCxoZWFkZXI6ITAsaGdyb3VwOiEwLGhyOiEwLGxpOiEwLG5vc2NyaXB0OiEwLG9sOiEwLG91dHB1dDohMCxwOiEwLHByZTohMCxzZWN0aW9uOiEwLHRhYmxlOiEwLHRmb290OiEwLHVsOiEwfSxkdD17aGVhZDohMCxub3NjcmlwdDohMCxvYmplY3Q6ITAsc2NyaXB0OiEwLHN0eWxlOiEwLHRpdGxlOiEwfSx2dD17b2w6ITAsdWw6ITB9LG10PTEseXQ9MixndD00O2Z1bmN0aW9uIHd0KHQpe3JldHVybih0P210OjApfCgiZnVsbCI9PT10P3l0OjApfXZhciB4dD1mdW5jdGlvbih0LGUsbixyLG8saSl7dGhpcy50eXBlPXQsdGhpcy5hdHRycz1lLHRoaXMuc29saWQ9cix0aGlzLm1hdGNoPW98fChpJmd0P251bGw6dC5jb250ZW50TWF0Y2gpLHRoaXMub3B0aW9ucz1pLHRoaXMuY29udGVudD1bXSx0aGlzLm1hcmtzPW4sdGhpcy5hY3RpdmVNYXJrcz1oLm5vbmV9O3h0LnByb3RvdHlwZS5maW5kV3JhcHBpbmc9ZnVuY3Rpb24odCl7aWYoIXRoaXMubWF0Y2gpe2lmKCF0aGlzLnR5cGUpcmV0dXJuW107dmFyIGU9dGhpcy50eXBlLmNvbnRlbnRNYXRjaC5maWxsQmVmb3JlKGEuZnJvbSh0KSk7aWYoIWUpe3ZhciBuLHI9dGhpcy50eXBlLmNvbnRlbnRNYXRjaDtyZXR1cm4obj1yLmZpbmRXcmFwcGluZyh0LnR5cGUpKT8odGhpcy5tYXRjaD1yLG4pOm51bGx9dGhpcy5tYXRjaD10aGlzLnR5cGUuY29udGVudE1hdGNoLm1hdGNoRnJhZ21lbnQoZSl9cmV0dXJuIHRoaXMubWF0Y2guZmluZFdyYXBwaW5nKHQudHlwZSl9LHh0LnByb3RvdHlwZS5maW5pc2g9ZnVuY3Rpb24odCl7aWYoISh0aGlzLm9wdGlvbnMmbXQpKXt2YXIgZSxuPXRoaXMuY29udGVudFt0aGlzLmNvbnRlbnQubGVuZ3RoLTFdO24mJm4uaXNUZXh0JiYoZT0vXHMrJC8uZXhlYyhuLnRleHQpKSYmKG4udGV4dC5sZW5ndGg9PWVbMF0ubGVuZ3RoP3RoaXMuY29udGVudC5wb3AoKTp0aGlzLmNvbnRlbnRbdGhpcy5jb250ZW50Lmxlbmd0aC0xXT1uLndpdGhUZXh0KG4udGV4dC5zbGljZSgwLG4udGV4dC5sZW5ndGgtZVswXS5sZW5ndGgpKSl9dmFyIHI9YS5mcm9tKHRoaXMuY29udGVudCk7cmV0dXJuIXQmJnRoaXMubWF0Y2gmJihyPXIuYXBwZW5kKHRoaXMubWF0Y2guZmlsbEJlZm9yZShhLmVtcHR5LCEwKSkpLHRoaXMudHlwZT90aGlzLnR5cGUuY3JlYXRlKHRoaXMuYXR0cnMscix0aGlzLm1hcmtzKTpyfTt2YXIgYnQ9ZnVuY3Rpb24odCxlLG4pe3RoaXMucGFyc2VyPXQsdGhpcy5vcHRpb25zPWUsdGhpcy5pc09wZW49bix0aGlzLnBlbmRpbmdNYXJrcz1bXTt2YXIgcixvPWUudG9wTm9kZSxpPXd0KGUucHJlc2VydmVXaGl0ZXNwYWNlKXwobj9ndDowKTtyPW8/bmV3IHh0KG8udHlwZSxvLmF0dHJzLGgubm9uZSwhMCxlLnRvcE1hdGNofHxvLnR5cGUuY29udGVudE1hdGNoLGkpOm5ldyB4dChuP251bGw6dC5zY2hlbWEudG9wTm9kZVR5cGUsbnVsbCxoLm5vbmUsITAsbnVsbCxpKSx0aGlzLm5vZGVzPVtyXSx0aGlzLm9wZW49MCx0aGlzLmZpbmQ9ZS5maW5kUG9zaXRpb25zLHRoaXMubmVlZHNCbG9jaz0hMX0sa3Q9e3RvcDp7fSxjdXJyZW50UG9zOnt9fTtmdW5jdGlvbiBTdCh0KXtmb3IodmFyIGU9dC5maXJzdENoaWxkLG49bnVsbDtlO2U9ZS5uZXh0U2libGluZyl7dmFyIHI9MT09ZS5ub2RlVHlwZT9lLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk6bnVsbDtyJiZ2dC5oYXNPd25Qcm9wZXJ0eShyKSYmbj8obi5hcHBlbmRDaGlsZChlKSxlPW4pOiJsaSI9PXI/bj1lOnImJihuPW51bGwpfX1mdW5jdGlvbiBDdCh0LGUpe3JldHVybih0Lm1hdGNoZXN8fHQubXNNYXRjaGVzU2VsZWN0b3J8fHQud2Via2l0TWF0Y2hlc1NlbGVjdG9yfHx0Lm1vek1hdGNoZXNTZWxlY3RvcikuY2FsbCh0LGUpfWZ1bmN0aW9uIE90KHQpe3ZhciBlLG49L1xzKihbXHctXSspXHMqOlxzKihbXjtdKykvZyxyPVtdO3doaWxlKGU9bi5leGVjKHQpKXIucHVzaChlWzFdLGVbMl0udHJpbSgpKTtyZXR1cm4gcn1mdW5jdGlvbiBNdCh0KXt2YXIgZT17fTtmb3IodmFyIG4gaW4gdCllW25dPXRbbl07cmV0dXJuIGV9a3QudG9wLmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLm5vZGVzW3RoaXMub3Blbl19LGJ0LnByb3RvdHlwZS5hZGRET009ZnVuY3Rpb24odCl7dmFyIGU9dGhpcztpZigzPT10Lm5vZGVUeXBlKXRoaXMuYWRkVGV4dE5vZGUodCk7ZWxzZSBpZigxPT10Lm5vZGVUeXBlKXt2YXIgbj10LmdldEF0dHJpYnV0ZSgic3R5bGUiKSxyPW4/dGhpcy5yZWFkU3R5bGVzKE90KG4pKTpudWxsO2lmKG51bGwhPXIpZm9yKHZhciBvPTA7bzxyLmxlbmd0aDtvKyspZS5hZGRQZW5kaW5nTWFyayhyW29dKTtpZih0aGlzLmFkZEVsZW1lbnQodCksbnVsbCE9cilmb3IodmFyIGk9MDtpPHIubGVuZ3RoO2krKyllLnJlbW92ZVBlbmRpbmdNYXJrKHJbaV0pfX0sYnQucHJvdG90eXBlLmFkZFRleHROb2RlPWZ1bmN0aW9uKHQpe3ZhciBlPXQubm9kZVZhbHVlLG49dGhpcy50b3A7aWYoKG4udHlwZT9uLnR5cGUuaW5saW5lQ29udGVudDpuLmNvbnRlbnQubGVuZ3RoJiZuLmNvbnRlbnRbMF0uaXNJbmxpbmUpfHwvXFMvLnRlc3QoZSkpe2lmKG4ub3B0aW9ucyZtdCluLm9wdGlvbnMmeXR8fChlPWUucmVwbGFjZSgvXHI/XG58XHIvZywiICIpKTtlbHNlIGlmKGU9ZS5yZXBsYWNlKC9ccysvZywiICIpLC9eXHMvLnRlc3QoZSkmJnRoaXMub3Blbj09dGhpcy5ub2Rlcy5sZW5ndGgtMSl7dmFyIHI9bi5jb250ZW50W24uY29udGVudC5sZW5ndGgtMV0sbz10LnByZXZpb3VzU2libGluZzsoIXJ8fG8mJiJCUiI9PW8ubm9kZU5hbWV8fHIuaXNUZXh0JiYvXHMkLy50ZXN0KHIudGV4dCkpJiYoZT1lLnNsaWNlKDEpKX1lJiZ0aGlzLmluc2VydE5vZGUodGhpcy5wYXJzZXIuc2NoZW1hLnRleHQoZSkpLHRoaXMuZmluZEluVGV4dCh0KX1lbHNlIHRoaXMuZmluZEluc2lkZSh0KX0sYnQucHJvdG90eXBlLmFkZEVsZW1lbnQ9ZnVuY3Rpb24odCl7dmFyIGU9dC5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpO3Z0Lmhhc093blByb3BlcnR5KGUpJiZTdCh0KTt2YXIgbj10aGlzLm9wdGlvbnMucnVsZUZyb21Ob2RlJiZ0aGlzLm9wdGlvbnMucnVsZUZyb21Ob2RlKHQpfHx0aGlzLnBhcnNlci5tYXRjaFRhZyh0LHRoaXMpO2lmKG4/bi5pZ25vcmU6ZHQuaGFzT3duUHJvcGVydHkoZSkpdGhpcy5maW5kSW5zaWRlKHQpO2Vsc2UgaWYoIW58fG4uc2tpcCl7biYmbi5za2lwLm5vZGVUeXBlJiYodD1uLnNraXApO3ZhciByLG89dGhpcy50b3AsaT10aGlzLm5lZWRzQmxvY2s7aWYoZnQuaGFzT3duUHJvcGVydHkoZSkpcj0hMCxvLnR5cGV8fCh0aGlzLm5lZWRzQmxvY2s9ITApO2Vsc2UgaWYoIXQuZmlyc3RDaGlsZClyZXR1cm4gdm9pZCB0aGlzLmxlYWZGYWxsYmFjayh0KTt0aGlzLmFkZEFsbCh0KSxyJiZ0aGlzLnN5bmMobyksdGhpcy5uZWVkc0Jsb2NrPWl9ZWxzZSB0aGlzLmFkZEVsZW1lbnRCeVJ1bGUodCxuKX0sYnQucHJvdG90eXBlLmxlYWZGYWxsYmFjaz1mdW5jdGlvbih0KXsiQlIiPT10Lm5vZGVOYW1lJiZ0aGlzLnRvcC50eXBlJiZ0aGlzLnRvcC50eXBlLmlubGluZUNvbnRlbnQmJnRoaXMuYWRkVGV4dE5vZGUodC5vd25lckRvY3VtZW50LmNyZWF0ZVRleHROb2RlKCJcbiIpKX0sYnQucHJvdG90eXBlLnJlYWRTdHlsZXM9ZnVuY3Rpb24odCl7Zm9yKHZhciBlPXRoaXMsbj1oLm5vbmUscj0wO3I8dC5sZW5ndGg7cis9Mil7dmFyIG89ZS5wYXJzZXIubWF0Y2hTdHlsZSh0W3JdLHRbcisxXSxlKTtpZihvKXtpZihvLmlnbm9yZSlyZXR1cm4gbnVsbDtuPWUucGFyc2VyLnNjaGVtYS5tYXJrc1tvLm1hcmtdLmNyZWF0ZShvLmF0dHJzKS5hZGRUb1NldChuKX19cmV0dXJuIG59LGJ0LnByb3RvdHlwZS5hZGRFbGVtZW50QnlSdWxlPWZ1bmN0aW9uKHQsZSl7dmFyIG4scixvLGkscz10aGlzO2Uubm9kZT8ocj10aGlzLnBhcnNlci5zY2hlbWEubm9kZXNbZS5ub2RlXSxyLmlzTGVhZj90aGlzLmluc2VydE5vZGUoci5jcmVhdGUoZS5hdHRycykpfHx0aGlzLmxlYWZGYWxsYmFjayh0KTpuPXRoaXMuZW50ZXIocixlLmF0dHJzLGUucHJlc2VydmVXaGl0ZXNwYWNlKSk6KG89dGhpcy5wYXJzZXIuc2NoZW1hLm1hcmtzW2UubWFya10saT1vLmNyZWF0ZShlLmF0dHJzKSx0aGlzLmFkZFBlbmRpbmdNYXJrKGkpKTt2YXIgYT10aGlzLnRvcDtpZihyJiZyLmlzTGVhZil0aGlzLmZpbmRJbnNpZGUodCk7ZWxzZSBpZihlLmdldENvbnRlbnQpdGhpcy5maW5kSW5zaWRlKHQpLGUuZ2V0Q29udGVudCh0LHRoaXMucGFyc2VyLnNjaGVtYSkuZm9yRWFjaCgoZnVuY3Rpb24odCl7cmV0dXJuIHMuaW5zZXJ0Tm9kZSh0KX0pKTtlbHNle3ZhciBjPWUuY29udGVudEVsZW1lbnQ7InN0cmluZyI9PXR5cGVvZiBjP2M9dC5xdWVyeVNlbGVjdG9yKGMpOiJmdW5jdGlvbiI9PXR5cGVvZiBjJiYoYz1jKHQpKSxjfHwoYz10KSx0aGlzLmZpbmRBcm91bmQodCxjLCEwKSx0aGlzLmFkZEFsbChjLG4pfW4mJih0aGlzLnN5bmMoYSksdGhpcy5vcGVuLS0pLGkmJnRoaXMucmVtb3ZlUGVuZGluZ01hcmsoaSl9LGJ0LnByb3RvdHlwZS5hZGRBbGw9ZnVuY3Rpb24odCxlLG4scil7Zm9yKHZhciBvPXRoaXMsaT1ufHwwLHM9bj90LmNoaWxkTm9kZXNbbl06dC5maXJzdENoaWxkLGE9bnVsbD09cj9udWxsOnQuY2hpbGROb2Rlc1tyXTtzIT1hO3M9cy5uZXh0U2libGluZywrK2kpby5maW5kQXRQb2ludCh0LGkpLG8uYWRkRE9NKHMpLGUmJmZ0Lmhhc093blByb3BlcnR5KHMubm9kZU5hbWUudG9Mb3dlckNhc2UoKSkmJm8uc3luYyhlKTt0aGlzLmZpbmRBdFBvaW50KHQsaSl9LGJ0LnByb3RvdHlwZS5maW5kUGxhY2U9ZnVuY3Rpb24odCl7Zm9yKHZhciBlLG4scj10aGlzLG89dGhpcy5vcGVuO28+PTA7by0tKXt2YXIgaT1yLm5vZGVzW29dLHM9aS5maW5kV3JhcHBpbmcodCk7aWYocyYmKCFlfHxlLmxlbmd0aD5zLmxlbmd0aCkmJihlPXMsbj1pLCFzLmxlbmd0aCkpYnJlYWs7aWYoaS5zb2xpZClicmVha31pZighZSlyZXR1cm4hMTt0aGlzLnN5bmMobik7Zm9yKHZhciBhPTA7YTxlLmxlbmd0aDthKyspci5lbnRlcklubmVyKGVbYV0sbnVsbCwhMSk7cmV0dXJuITB9LGJ0LnByb3RvdHlwZS5pbnNlcnROb2RlPWZ1bmN0aW9uKHQpe2lmKHQuaXNJbmxpbmUmJnRoaXMubmVlZHNCbG9jayYmIXRoaXMudG9wLnR5cGUpe3ZhciBlPXRoaXMudGV4dGJsb2NrRnJvbUNvbnRleHQoKTtlJiZ0aGlzLmVudGVySW5uZXIoZSl9aWYodGhpcy5maW5kUGxhY2UodCkpe3RoaXMuY2xvc2VFeHRyYSgpO3ZhciBuPXRoaXMudG9wO3RoaXMuYXBwbHlQZW5kaW5nTWFya3Mobiksbi5tYXRjaCYmKG4ubWF0Y2g9bi5tYXRjaC5tYXRjaFR5cGUodC50eXBlKSk7Zm9yKHZhciByPW4uYWN0aXZlTWFya3Msbz0wO288dC5tYXJrcy5sZW5ndGg7bysrKW4udHlwZSYmIW4udHlwZS5hbGxvd3NNYXJrVHlwZSh0Lm1hcmtzW29dLnR5cGUpfHwocj10Lm1hcmtzW29dLmFkZFRvU2V0KHIpKTtyZXR1cm4gbi5jb250ZW50LnB1c2godC5tYXJrKHIpKSwhMH1yZXR1cm4hMX0sYnQucHJvdG90eXBlLmFwcGx5UGVuZGluZ01hcmtzPWZ1bmN0aW9uKHQpe2Zvcih2YXIgZT10aGlzLG49MDtuPHRoaXMucGVuZGluZ01hcmtzLmxlbmd0aDtuKyspe3ZhciByPWUucGVuZGluZ01hcmtzW25dO3QudHlwZSYmIXQudHlwZS5hbGxvd3NNYXJrVHlwZShyLnR5cGUpfHxyLmlzSW5TZXQodC5hY3RpdmVNYXJrcyl8fCh0LmFjdGl2ZU1hcmtzPXIuYWRkVG9TZXQodC5hY3RpdmVNYXJrcyksZS5wZW5kaW5nTWFya3Muc3BsaWNlKG4tLSwxKSl9fSxidC5wcm90b3R5cGUuZW50ZXI9ZnVuY3Rpb24odCxlLG4pe3ZhciByPXRoaXMuZmluZFBsYWNlKHQuY3JlYXRlKGUpKTtyZXR1cm4gciYmKHRoaXMuYXBwbHlQZW5kaW5nTWFya3ModGhpcy50b3ApLHRoaXMuZW50ZXJJbm5lcih0LGUsITAsbikpLHJ9LGJ0LnByb3RvdHlwZS5lbnRlcklubmVyPWZ1bmN0aW9uKHQsZSxuLHIpe3RoaXMuY2xvc2VFeHRyYSgpO3ZhciBvPXRoaXMudG9wO28ubWF0Y2g9by5tYXRjaCYmby5tYXRjaC5tYXRjaFR5cGUodCxlKTt2YXIgaT1udWxsPT1yP28ub3B0aW9ucyZ+Z3Q6d3Qocik7by5vcHRpb25zJmd0JiYwPT1vLmNvbnRlbnQubGVuZ3RoJiYoaXw9Z3QpLHRoaXMubm9kZXMucHVzaChuZXcgeHQodCxlLG8uYWN0aXZlTWFya3MsbixudWxsLGkpKSx0aGlzLm9wZW4rK30sYnQucHJvdG90eXBlLmNsb3NlRXh0cmE9ZnVuY3Rpb24odCl7dmFyIGU9dGhpcyxuPXRoaXMubm9kZXMubGVuZ3RoLTE7aWYobj50aGlzLm9wZW4pe2Zvcig7bj50aGlzLm9wZW47bi0tKWUubm9kZXNbbi0xXS5jb250ZW50LnB1c2goZS5ub2Rlc1tuXS5maW5pc2godCkpO3RoaXMubm9kZXMubGVuZ3RoPXRoaXMub3BlbisxfX0sYnQucHJvdG90eXBlLmZpbmlzaD1mdW5jdGlvbigpe3JldHVybiB0aGlzLm9wZW49MCx0aGlzLmNsb3NlRXh0cmEodGhpcy5pc09wZW4pLHRoaXMubm9kZXNbMF0uZmluaXNoKHRoaXMuaXNPcGVufHx0aGlzLm9wdGlvbnMudG9wT3Blbil9LGJ0LnByb3RvdHlwZS5zeW5jPWZ1bmN0aW9uKHQpe2Zvcih2YXIgZT10aGlzLG49dGhpcy5vcGVuO24+PTA7bi0tKWlmKGUubm9kZXNbbl09PXQpcmV0dXJuIHZvaWQoZS5vcGVuPW4pfSxidC5wcm90b3R5cGUuYWRkUGVuZGluZ01hcms9ZnVuY3Rpb24odCl7dGhpcy5wZW5kaW5nTWFya3MucHVzaCh0KX0sYnQucHJvdG90eXBlLnJlbW92ZVBlbmRpbmdNYXJrPWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMucGVuZGluZ01hcmtzLmxhc3RJbmRleE9mKHQpO2lmKGU+LTEpdGhpcy5wZW5kaW5nTWFya3Muc3BsaWNlKGUsMSk7ZWxzZXt2YXIgbj10aGlzLnRvcDtuLmFjdGl2ZU1hcmtzPXQucmVtb3ZlRnJvbVNldChuLmFjdGl2ZU1hcmtzKX19LGt0LmN1cnJlbnRQb3MuZ2V0PWZ1bmN0aW9uKCl7dmFyIHQ9dGhpczt0aGlzLmNsb3NlRXh0cmEoKTtmb3IodmFyIGU9MCxuPXRoaXMub3BlbjtuPj0wO24tLSl7Zm9yKHZhciByPXQubm9kZXNbbl0uY29udGVudCxvPXIubGVuZ3RoLTE7bz49MDtvLS0pZSs9cltvXS5ub2RlU2l6ZTtuJiZlKyt9cmV0dXJuIGV9LGJ0LnByb3RvdHlwZS5maW5kQXRQb2ludD1mdW5jdGlvbih0LGUpe3ZhciBuPXRoaXM7aWYodGhpcy5maW5kKWZvcih2YXIgcj0wO3I8dGhpcy5maW5kLmxlbmd0aDtyKyspbi5maW5kW3JdLm5vZGU9PXQmJm4uZmluZFtyXS5vZmZzZXQ9PWUmJihuLmZpbmRbcl0ucG9zPW4uY3VycmVudFBvcyl9LGJ0LnByb3RvdHlwZS5maW5kSW5zaWRlPWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXM7aWYodGhpcy5maW5kKWZvcih2YXIgbj0wO248dGhpcy5maW5kLmxlbmd0aDtuKyspbnVsbD09ZS5maW5kW25dLnBvcyYmMT09dC5ub2RlVHlwZSYmdC5jb250YWlucyhlLmZpbmRbbl0ubm9kZSkmJihlLmZpbmRbbl0ucG9zPWUuY3VycmVudFBvcyl9LGJ0LnByb3RvdHlwZS5maW5kQXJvdW5kPWZ1bmN0aW9uKHQsZSxuKXt2YXIgcj10aGlzO2lmKHQhPWUmJnRoaXMuZmluZClmb3IodmFyIG89MDtvPHRoaXMuZmluZC5sZW5ndGg7bysrKWlmKG51bGw9PXIuZmluZFtvXS5wb3MmJjE9PXQubm9kZVR5cGUmJnQuY29udGFpbnMoci5maW5kW29dLm5vZGUpKXt2YXIgaT1lLmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uKHIuZmluZFtvXS5ub2RlKTtpJihuPzI6NCkmJihyLmZpbmRbb10ucG9zPXIuY3VycmVudFBvcyl9fSxidC5wcm90b3R5cGUuZmluZEluVGV4dD1mdW5jdGlvbih0KXt2YXIgZT10aGlzO2lmKHRoaXMuZmluZClmb3IodmFyIG49MDtuPHRoaXMuZmluZC5sZW5ndGg7bisrKWUuZmluZFtuXS5ub2RlPT10JiYoZS5maW5kW25dLnBvcz1lLmN1cnJlbnRQb3MtKHQubm9kZVZhbHVlLmxlbmd0aC1lLmZpbmRbbl0ub2Zmc2V0KSl9LGJ0LnByb3RvdHlwZS5tYXRjaGVzQ29udGV4dD1mdW5jdGlvbih0KXt2YXIgZT10aGlzO2lmKHQuaW5kZXhPZigifCIpPi0xKXJldHVybiB0LnNwbGl0KC9ccypcfFxzKi8pLnNvbWUodGhpcy5tYXRjaGVzQ29udGV4dCx0aGlzKTt2YXIgbj10LnNwbGl0KCIvIikscj10aGlzLm9wdGlvbnMuY29udGV4dCxvPSF0aGlzLmlzT3BlbiYmKCFyfHxyLnBhcmVudC50eXBlPT10aGlzLm5vZGVzWzBdLnR5cGUpLGk9LShyP3IuZGVwdGgrMTowKSsobz8wOjEpLHM9ZnVuY3Rpb24odCxhKXtmb3IoO3Q+PTA7dC0tKXt2YXIgYz1uW3RdO2lmKCIiPT1jKXtpZih0PT1uLmxlbmd0aC0xfHwwPT10KWNvbnRpbnVlO2Zvcig7YT49aTthLS0paWYocyh0LTEsYSkpcmV0dXJuITA7cmV0dXJuITF9dmFyIGw9YT4wfHwwPT1hJiZvP2Uubm9kZXNbYV0udHlwZTpyJiZhPj1pP3Iubm9kZShhLWkpLnR5cGU6bnVsbDtpZighbHx8bC5uYW1lIT1jJiYtMT09bC5ncm91cHMuaW5kZXhPZihjKSlyZXR1cm4hMTthLS19cmV0dXJuITB9O3JldHVybiBzKG4ubGVuZ3RoLTEsdGhpcy5vcGVuKX0sYnQucHJvdG90eXBlLnRleHRibG9ja0Zyb21Db250ZXh0PWZ1bmN0aW9uKCl7dmFyIHQ9dGhpcyxlPXRoaXMub3B0aW9ucy5jb250ZXh0O2lmKGUpZm9yKHZhciBuPWUuZGVwdGg7bj49MDtuLS0pe3ZhciByPWUubm9kZShuKS5jb250ZW50TWF0Y2hBdChlLmluZGV4QWZ0ZXIobikpLmRlZmF1bHRUeXBlO2lmKHImJnIuaXNUZXh0YmxvY2smJnIuZGVmYXVsdEF0dHJzKXJldHVybiByfWZvcih2YXIgbyBpbiB0LnBhcnNlci5zY2hlbWEubm9kZXMpe3ZhciBpPXQucGFyc2VyLnNjaGVtYS5ub2Rlc1tvXTtpZihpLmlzVGV4dGJsb2NrJiZpLmRlZmF1bHRBdHRycylyZXR1cm4gaX19LE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKGJ0LnByb3RvdHlwZSxrdCk7dmFyIFR0PWZ1bmN0aW9uKHQsZSl7dGhpcy5ub2Rlcz10fHx7fSx0aGlzLm1hcmtzPWV8fHt9fTtmdW5jdGlvbiBOdCh0KXt2YXIgZT17fTtmb3IodmFyIG4gaW4gdCl7dmFyIHI9dFtuXS5zcGVjLnRvRE9NO3ImJihlW25dPXIpfXJldHVybiBlfWZ1bmN0aW9uIEV0KHQpe3JldHVybiB0LmRvY3VtZW50fHx3aW5kb3cuZG9jdW1lbnR9VHQucHJvdG90eXBlLnNlcmlhbGl6ZUZyYWdtZW50PWZ1bmN0aW9uKHQsZSxuKXt2YXIgcj10aGlzO3ZvaWQgMD09PWUmJihlPXt9KSxufHwobj1FdChlKS5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCkpO3ZhciBvPW4saT1udWxsO3JldHVybiB0LmZvckVhY2goKGZ1bmN0aW9uKHQpe2lmKGl8fHQubWFya3MubGVuZ3RoKXtpfHwoaT1bXSk7dmFyIG49MCxzPTA7d2hpbGUobjxpLmxlbmd0aCYmczx0Lm1hcmtzLmxlbmd0aCl7dmFyIGE9dC5tYXJrc1tzXTtpZihyLm1hcmtzW2EudHlwZS5uYW1lXSl7aWYoIWEuZXEoaVtuXSl8fCExPT09YS50eXBlLnNwZWMuc3Bhbm5pbmcpYnJlYWs7bis9MixzKyt9ZWxzZSBzKyt9d2hpbGUobjxpLmxlbmd0aClvPWkucG9wKCksaS5wb3AoKTt3aGlsZShzPHQubWFya3MubGVuZ3RoKXt2YXIgYz10Lm1hcmtzW3MrK10sbD1yLnNlcmlhbGl6ZU1hcmsoYyx0LmlzSW5saW5lLGUpO2wmJihpLnB1c2goYyxvKSxvLmFwcGVuZENoaWxkKGwuZG9tKSxvPWwuY29udGVudERPTXx8bC5kb20pfX1vLmFwcGVuZENoaWxkKHIuc2VyaWFsaXplTm9kZSh0LGUpKX0pKSxufSxUdC5wcm90b3R5cGUuc2VyaWFsaXplTm9kZT1mdW5jdGlvbih0LGUpe3ZvaWQgMD09PWUmJihlPXt9KTt2YXIgbj1UdC5yZW5kZXJTcGVjKEV0KGUpLHRoaXMubm9kZXNbdC50eXBlLm5hbWVdKHQpKSxyPW4uZG9tLG89bi5jb250ZW50RE9NO2lmKG8pe2lmKHQuaXNMZWFmKXRocm93IG5ldyBSYW5nZUVycm9yKCJDb250ZW50IGhvbGUgbm90IGFsbG93ZWQgaW4gYSBsZWFmIG5vZGUgc3BlYyIpO2Uub25Db250ZW50P2Uub25Db250ZW50KHQsbyxlKTp0aGlzLnNlcmlhbGl6ZUZyYWdtZW50KHQuY29udGVudCxlLG8pfXJldHVybiByfSxUdC5wcm90b3R5cGUuc2VyaWFsaXplTm9kZUFuZE1hcmtzPWZ1bmN0aW9uKHQsZSl7dmFyIG49dGhpczt2b2lkIDA9PT1lJiYoZT17fSk7Zm9yKHZhciByPXRoaXMuc2VyaWFsaXplTm9kZSh0LGUpLG89dC5tYXJrcy5sZW5ndGgtMTtvPj0wO28tLSl7dmFyIGk9bi5zZXJpYWxpemVNYXJrKHQubWFya3Nbb10sdC5pc0lubGluZSxlKTtpJiYoKGkuY29udGVudERPTXx8aS5kb20pLmFwcGVuZENoaWxkKHIpLHI9aS5kb20pfXJldHVybiByfSxUdC5wcm90b3R5cGUuc2VyaWFsaXplTWFyaz1mdW5jdGlvbih0LGUsbil7dm9pZCAwPT09biYmKG49e30pO3ZhciByPXRoaXMubWFya3NbdC50eXBlLm5hbWVdO3JldHVybiByJiZUdC5yZW5kZXJTcGVjKEV0KG4pLHIodCxlKSl9LFR0LnJlbmRlclNwZWM9ZnVuY3Rpb24odCxlKXtpZigic3RyaW5nIj09dHlwZW9mIGUpcmV0dXJue2RvbTp0LmNyZWF0ZVRleHROb2RlKGUpfTtpZihudWxsIT1lLm5vZGVUeXBlKXJldHVybntkb206ZX07dmFyIG49dC5jcmVhdGVFbGVtZW50KGVbMF0pLHI9bnVsbCxvPWVbMV0saT0xO2lmKG8mJiJvYmplY3QiPT10eXBlb2YgbyYmbnVsbD09by5ub2RlVHlwZSYmIUFycmF5LmlzQXJyYXkobykpZm9yKHZhciBzIGluIGk9MixvKW51bGwhPW9bc10mJm4uc2V0QXR0cmlidXRlKHMsb1tzXSk7Zm9yKHZhciBhPWk7YTxlLmxlbmd0aDthKyspe3ZhciBjPWVbYV07aWYoMD09PWMpe2lmKGE8ZS5sZW5ndGgtMXx8YT5pKXRocm93IG5ldyBSYW5nZUVycm9yKCJDb250ZW50IGhvbGUgbXVzdCBiZSB0aGUgb25seSBjaGlsZCBvZiBpdHMgcGFyZW50IG5vZGUiKTtyZXR1cm57ZG9tOm4sY29udGVudERPTTpufX12YXIgbD1UdC5yZW5kZXJTcGVjKHQsYykscD1sLmRvbSx1PWwuY29udGVudERPTTtpZihuLmFwcGVuZENoaWxkKHApLHUpe2lmKHIpdGhyb3cgbmV3IFJhbmdlRXJyb3IoIk11bHRpcGxlIGNvbnRlbnQgaG9sZXMiKTtyPXV9fXJldHVybntkb206bixjb250ZW50RE9NOnJ9fSxUdC5mcm9tU2NoZW1hPWZ1bmN0aW9uKHQpe3JldHVybiB0LmNhY2hlZC5kb21TZXJpYWxpemVyfHwodC5jYWNoZWQuZG9tU2VyaWFsaXplcj1uZXcgVHQodGhpcy5ub2Rlc0Zyb21TY2hlbWEodCksdGhpcy5tYXJrc0Zyb21TY2hlbWEodCkpKX0sVHQubm9kZXNGcm9tU2NoZW1hPWZ1bmN0aW9uKHQpe3ZhciBlPU50KHQubm9kZXMpO3JldHVybiBlLnRleHR8fChlLnRleHQ9ZnVuY3Rpb24odCl7cmV0dXJuIHQudGV4dH0pLGV9LFR0Lm1hcmtzRnJvbVNjaGVtYT1mdW5jdGlvbih0KXtyZXR1cm4gTnQodC5tYXJrcyl9LGUuTm9kZT1fLGUuUmVzb2x2ZWRQb3M9TixlLk5vZGVSYW5nZT16LGUuRnJhZ21lbnQ9YSxlLlNsaWNlPWQsZS5SZXBsYWNlRXJyb3I9ZixlLk1hcms9aCxlLlNjaGVtYT1wdCxlLk5vZGVUeXBlPWl0LGUuTWFya1R5cGU9bHQsZS5Db250ZW50TWF0Y2g9JCxlLkRPTVBhcnNlcj1odCxlLkRPTVNlcmlhbGl6ZXI9VHR9LGMzNjY6ZnVuY3Rpb24odCxlLG4pe3ZhciByPW4oIjY4MjEiKSxvPW4oIjlkZWYiKSxpPW4oIjc3ZjEiKTt0LmV4cG9ydHM9ZnVuY3Rpb24odCl7cmV0dXJuIGZ1bmN0aW9uKGUsbixzKXt2YXIgYSxjPXIoZSksbD1vKGMubGVuZ3RoKSxwPWkocyxsKTtpZih0JiZuIT1uKXt3aGlsZShsPnApaWYoYT1jW3ArK10sYSE9YSlyZXR1cm4hMH1lbHNlIGZvcig7bD5wO3ArKylpZigodHx8cCBpbiBjKSYmY1twXT09PW4pcmV0dXJuIHR8fHB8fDA7cmV0dXJuIXQmJi0xfX19LGMzNjc6ZnVuY3Rpb24odCxlLG4peyJ1c2Ugc3RyaWN0Ijt2YXIgcj1uKCI4NDM2Iiksbz1uKCI1MGVkIiksaT1uKCI0ODFiIikscz1uKCIzNmMzIik7dC5leHBvcnRzPW4oIjMwZjEiKShBcnJheSwiQXJyYXkiLChmdW5jdGlvbih0LGUpe3RoaXMuX3Q9cyh0KSx0aGlzLl9pPTAsdGhpcy5faz1lfSksKGZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5fdCxlPXRoaXMuX2ssbj10aGlzLl9pKys7cmV0dXJuIXR8fG4+PXQubGVuZ3RoPyh0aGlzLl90PXZvaWQgMCxvKDEpKTpvKDAsImtleXMiPT1lP246InZhbHVlcyI9PWU/dFtuXTpbbix0W25dXSl9KSwidmFsdWVzIiksaS5Bcmd1bWVudHM9aS5BcnJheSxyKCJrZXlzIikscigidmFsdWVzIikscigiZW50cmllcyIpfSxjM2ExOmZ1bmN0aW9uKHQsZSxuKXt2YXIgcj1uKCJlNmYzIiksbz1uKCIxNjkxIik7dC5leHBvcnRzPU9iamVjdC5rZXlzfHxmdW5jdGlvbih0KXtyZXR1cm4gcih0LG8pfX0sYzY5YTpmdW5jdGlvbih0LGUsbil7dC5leHBvcnRzPSFuKCI5ZTFlIikmJiFuKCI3OWU1IikoKGZ1bmN0aW9uKCl7cmV0dXJuIDchPU9iamVjdC5kZWZpbmVQcm9wZXJ0eShuKCIyMzBlIikoImRpdiIpLCJhIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIDd9fSkuYX0pKX0sYzhiYjpmdW5jdGlvbih0LGUsbil7dC5leHBvcnRzPW4oIjU0YTEiKX0sY2E1YTpmdW5jdGlvbih0LGUpe3ZhciBuPTAscj1NYXRoLnJhbmRvbSgpO3QuZXhwb3J0cz1mdW5jdGlvbih0KXtyZXR1cm4iU3ltYm9sKCIuY29uY2F0KHZvaWQgMD09PXQ/IiI6dCwiKV8iLCgrK24rcikudG9TdHJpbmcoMzYpKX19LGNhZGY6ZnVuY3Rpb24odCxlLG4peyJ1c2Ugc3RyaWN0Ijt2YXIgcj1uKCI5YzZjIiksbz1uKCJkNTNiIiksaT1uKCI4NGYyIikscz1uKCI2ODIxIik7dC5leHBvcnRzPW4oIjAxZjkiKShBcnJheSwiQXJyYXkiLChmdW5jdGlvbih0LGUpe3RoaXMuX3Q9cyh0KSx0aGlzLl9pPTAsdGhpcy5faz1lfSksKGZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5fdCxlPXRoaXMuX2ssbj10aGlzLl9pKys7cmV0dXJuIXR8fG4+PXQubGVuZ3RoPyh0aGlzLl90PXZvaWQgMCxvKDEpKTpvKDAsImtleXMiPT1lP246InZhbHVlcyI9PWU/dFtuXTpbbix0W25dXSl9KSwidmFsdWVzIiksaS5Bcmd1bWVudHM9aS5BcnJheSxyKCJrZXlzIikscigidmFsdWVzIikscigiZW50cmllcyIpfSxjYjdjOmZ1bmN0aW9uKHQsZSxuKXt2YXIgcj1uKCJkM2Y0Iik7dC5leHBvcnRzPWZ1bmN0aW9uKHQpe2lmKCFyKHQpKXRocm93IFR5cGVFcnJvcih0KyIgaXMgbm90IGFuIG9iamVjdCEiKTtyZXR1cm4gdH19LGNkZDA6ZnVuY3Rpb24odCxlKXt2YXIgbj0yMDAscj1mdW5jdGlvbigpe307ci5wcm90b3R5cGUuYXBwZW5kPWZ1bmN0aW9uKHQpe3JldHVybiB0Lmxlbmd0aD8odD1yLmZyb20odCksIXRoaXMubGVuZ3RoJiZ0fHx0Lmxlbmd0aDxuJiZ0aGlzLmxlYWZBcHBlbmQodCl8fHRoaXMubGVuZ3RoPG4mJnQubGVhZlByZXBlbmQodGhpcyl8fHRoaXMuYXBwZW5kSW5uZXIodCkpOnRoaXN9LHIucHJvdG90eXBlLnByZXBlbmQ9ZnVuY3Rpb24odCl7cmV0dXJuIHQubGVuZ3RoP3IuZnJvbSh0KS5hcHBlbmQodGhpcyk6dGhpc30sci5wcm90b3R5cGUuYXBwZW5kSW5uZXI9ZnVuY3Rpb24odCl7cmV0dXJuIG5ldyBpKHRoaXMsdCl9LHIucHJvdG90eXBlLnNsaWNlPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIHZvaWQgMD09PXQmJih0PTApLHZvaWQgMD09PWUmJihlPXRoaXMubGVuZ3RoKSx0Pj1lP3IuZW1wdHk6dGhpcy5zbGljZUlubmVyKE1hdGgubWF4KDAsdCksTWF0aC5taW4odGhpcy5sZW5ndGgsZSkpfSxyLnByb3RvdHlwZS5nZXQ9ZnVuY3Rpb24odCl7aWYoISh0PDB8fHQ+PXRoaXMubGVuZ3RoKSlyZXR1cm4gdGhpcy5nZXRJbm5lcih0KX0sci5wcm90b3R5cGUuZm9yRWFjaD1mdW5jdGlvbih0LGUsbil7dm9pZCAwPT09ZSYmKGU9MCksdm9pZCAwPT09biYmKG49dGhpcy5sZW5ndGgpLGU8PW4/dGhpcy5mb3JFYWNoSW5uZXIodCxlLG4sMCk6dGhpcy5mb3JFYWNoSW52ZXJ0ZWRJbm5lcih0LGUsbiwwKX0sci5wcm90b3R5cGUubWFwPWZ1bmN0aW9uKHQsZSxuKXt2b2lkIDA9PT1lJiYoZT0wKSx2b2lkIDA9PT1uJiYobj10aGlzLmxlbmd0aCk7dmFyIHI9W107cmV0dXJuIHRoaXMuZm9yRWFjaCgoZnVuY3Rpb24oZSxuKXtyZXR1cm4gci5wdXNoKHQoZSxuKSl9KSxlLG4pLHJ9LHIuZnJvbT1mdW5jdGlvbih0KXtyZXR1cm4gdCBpbnN0YW5jZW9mIHI/dDp0JiZ0Lmxlbmd0aD9uZXcgbyh0KTpyLmVtcHR5fTt2YXIgbz1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKGUpe3QuY2FsbCh0aGlzKSx0aGlzLnZhbHVlcz1lfXQmJihlLl9fcHJvdG9fXz10KSxlLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKHQmJnQucHJvdG90eXBlKSxlLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1lO3ZhciByPXtsZW5ndGg6e30sZGVwdGg6e319O3JldHVybiBlLnByb3RvdHlwZS5mbGF0dGVuPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudmFsdWVzfSxlLnByb3RvdHlwZS5zbGljZUlubmVyPWZ1bmN0aW9uKHQsbil7cmV0dXJuIDA9PXQmJm49PXRoaXMubGVuZ3RoP3RoaXM6bmV3IGUodGhpcy52YWx1ZXMuc2xpY2UodCxuKSl9LGUucHJvdG90eXBlLmdldElubmVyPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLnZhbHVlc1t0XX0sZS5wcm90b3R5cGUuZm9yRWFjaElubmVyPWZ1bmN0aW9uKHQsZSxuLHIpe2Zvcih2YXIgbz10aGlzLGk9ZTtpPG47aSsrKWlmKCExPT09dChvLnZhbHVlc1tpXSxyK2kpKXJldHVybiExfSxlLnByb3RvdHlwZS5mb3JFYWNoSW52ZXJ0ZWRJbm5lcj1mdW5jdGlvbih0LGUsbixyKXtmb3IodmFyIG89dGhpcyxpPWUtMTtpPj1uO2ktLSlpZighMT09PXQoby52YWx1ZXNbaV0scitpKSlyZXR1cm4hMX0sZS5wcm90b3R5cGUubGVhZkFwcGVuZD1mdW5jdGlvbih0KXtpZih0aGlzLmxlbmd0aCt0Lmxlbmd0aDw9bilyZXR1cm4gbmV3IGUodGhpcy52YWx1ZXMuY29uY2F0KHQuZmxhdHRlbigpKSl9LGUucHJvdG90eXBlLmxlYWZQcmVwZW5kPWZ1bmN0aW9uKHQpe2lmKHRoaXMubGVuZ3RoK3QubGVuZ3RoPD1uKXJldHVybiBuZXcgZSh0LmZsYXR0ZW4oKS5jb25jYXQodGhpcy52YWx1ZXMpKX0sci5sZW5ndGguZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudmFsdWVzLmxlbmd0aH0sci5kZXB0aC5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gMH0sT2JqZWN0LmRlZmluZVByb3BlcnRpZXMoZS5wcm90b3R5cGUsciksZX0ocik7ci5lbXB0eT1uZXcgbyhbXSk7dmFyIGk9ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZShlLG4pe3QuY2FsbCh0aGlzKSx0aGlzLmxlZnQ9ZSx0aGlzLnJpZ2h0PW4sdGhpcy5sZW5ndGg9ZS5sZW5ndGgrbi5sZW5ndGgsdGhpcy5kZXB0aD1NYXRoLm1heChlLmRlcHRoLG4uZGVwdGgpKzF9cmV0dXJuIHQmJihlLl9fcHJvdG9fXz10KSxlLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKHQmJnQucHJvdG90eXBlKSxlLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1lLGUucHJvdG90eXBlLmZsYXR0ZW49ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5sZWZ0LmZsYXR0ZW4oKS5jb25jYXQodGhpcy5yaWdodC5mbGF0dGVuKCkpfSxlLnByb3RvdHlwZS5nZXRJbm5lcj1mdW5jdGlvbih0KXtyZXR1cm4gdDx0aGlzLmxlZnQubGVuZ3RoP3RoaXMubGVmdC5nZXQodCk6dGhpcy5yaWdodC5nZXQodC10aGlzLmxlZnQubGVuZ3RoKX0sZS5wcm90b3R5cGUuZm9yRWFjaElubmVyPWZ1bmN0aW9uKHQsZSxuLHIpe3ZhciBvPXRoaXMubGVmdC5sZW5ndGg7cmV0dXJuIShlPG8mJiExPT09dGhpcy5sZWZ0LmZvckVhY2hJbm5lcih0LGUsTWF0aC5taW4obixvKSxyKSkmJighKG4+byYmITE9PT10aGlzLnJpZ2h0LmZvckVhY2hJbm5lcih0LE1hdGgubWF4KGUtbywwKSxNYXRoLm1pbih0aGlzLmxlbmd0aCxuKS1vLHIrbykpJiZ2b2lkIDApfSxlLnByb3RvdHlwZS5mb3JFYWNoSW52ZXJ0ZWRJbm5lcj1mdW5jdGlvbih0LGUsbixyKXt2YXIgbz10aGlzLmxlZnQubGVuZ3RoO3JldHVybiEoZT5vJiYhMT09PXRoaXMucmlnaHQuZm9yRWFjaEludmVydGVkSW5uZXIodCxlLW8sTWF0aC5tYXgobixvKS1vLHIrbykpJiYoIShuPG8mJiExPT09dGhpcy5sZWZ0LmZvckVhY2hJbnZlcnRlZElubmVyKHQsTWF0aC5taW4oZSxvKSxuLHIpKSYmdm9pZCAwKX0sZS5wcm90b3R5cGUuc2xpY2VJbm5lcj1mdW5jdGlvbih0LGUpe2lmKDA9PXQmJmU9PXRoaXMubGVuZ3RoKXJldHVybiB0aGlzO3ZhciBuPXRoaXMubGVmdC5sZW5ndGg7cmV0dXJuIGU8PW4/dGhpcy5sZWZ0LnNsaWNlKHQsZSk6dD49bj90aGlzLnJpZ2h0LnNsaWNlKHQtbixlLW4pOnRoaXMubGVmdC5zbGljZSh0LG4pLmFwcGVuZCh0aGlzLnJpZ2h0LnNsaWNlKDAsZS1uKSl9LGUucHJvdG90eXBlLmxlYWZBcHBlbmQ9ZnVuY3Rpb24odCl7dmFyIG49dGhpcy5yaWdodC5sZWFmQXBwZW5kKHQpO2lmKG4pcmV0dXJuIG5ldyBlKHRoaXMubGVmdCxuKX0sZS5wcm90b3R5cGUubGVhZlByZXBlbmQ9ZnVuY3Rpb24odCl7dmFyIG49dGhpcy5sZWZ0LmxlYWZQcmVwZW5kKHQpO2lmKG4pcmV0dXJuIG5ldyBlKG4sdGhpcy5yaWdodCl9LGUucHJvdG90eXBlLmFwcGVuZElubmVyPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLmxlZnQuZGVwdGg+PU1hdGgubWF4KHRoaXMucmlnaHQuZGVwdGgsdC5kZXB0aCkrMT9uZXcgZSh0aGlzLmxlZnQsbmV3IGUodGhpcy5yaWdodCx0KSk6bmV3IGUodGhpcyx0KX0sZX0ocik7dC5leHBvcnRzPXJ9LGNlMTA6ZnVuY3Rpb24odCxlLG4pe3ZhciByPW4oIjY5YTgiKSxvPW4oIjY4MjEiKSxpPW4oImMzNjYiKSghMSkscz1uKCI2MTNiIikoIklFX1BST1RPIik7dC5leHBvcnRzPWZ1bmN0aW9uKHQsZSl7dmFyIG4sYT1vKHQpLGM9MCxsPVtdO2ZvcihuIGluIGEpbiE9cyYmcihhLG4pJiZsLnB1c2gobik7d2hpbGUoZS5sZW5ndGg+YylyKGEsbj1lW2MrK10pJiYofmkobCxuKXx8bC5wdXNoKG4pKTtyZXR1cm4gbH19LGQzZjQ6ZnVuY3Rpb24odCxlKXt0LmV4cG9ydHM9ZnVuY3Rpb24odCl7cmV0dXJuIm9iamVjdCI9PT10eXBlb2YgdD9udWxsIT09dDoiZnVuY3Rpb24iPT09dHlwZW9mIHR9fSxkNTNiOmZ1bmN0aW9uKHQsZSl7dC5leHBvcnRzPWZ1bmN0aW9uKHQsZSl7cmV0dXJue3ZhbHVlOmUsZG9uZTohIXR9fX0sZDg2NDpmdW5jdGlvbih0LGUsbil7dmFyIHI9bigiNzlhYSIpO3QuZXhwb3J0cz1mdW5jdGlvbih0LGUsbil7aWYocih0KSx2b2lkIDA9PT1lKXJldHVybiB0O3N3aXRjaChuKXtjYXNlIDE6cmV0dXJuIGZ1bmN0aW9uKG4pe3JldHVybiB0LmNhbGwoZSxuKX07Y2FzZSAyOnJldHVybiBmdW5jdGlvbihuLHIpe3JldHVybiB0LmNhbGwoZSxuLHIpfTtjYXNlIDM6cmV0dXJuIGZ1bmN0aW9uKG4scixvKXtyZXR1cm4gdC5jYWxsKGUsbixyLG8pfX1yZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gdC5hcHBseShlLGFyZ3VtZW50cyl9fX0sZDg4MTpmdW5jdGlvbih0LGUsbil7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIHIodCl7cmV0dXJuIHQmJiJvYmplY3QiPT09dHlwZW9mIHQmJiJkZWZhdWx0ImluIHQ/dFsiZGVmYXVsdCJdOnR9T2JqZWN0LmRlZmluZVByb3BlcnR5KGUsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pO3ZhciBvPXIobigiZmFhMSIpKTtmdW5jdGlvbiBpKHQsZSxuKXtmb3IodmFyIHI9MDs7cisrKXtpZihyPT10LmNoaWxkQ291bnR8fHI9PWUuY2hpbGRDb3VudClyZXR1cm4gdC5jaGlsZENvdW50PT1lLmNoaWxkQ291bnQ/bnVsbDpuO3ZhciBvPXQuY2hpbGQocikscz1lLmNoaWxkKHIpO2lmKG8hPXMpe2lmKCFvLnNhbWVNYXJrdXAocykpcmV0dXJuIG47aWYoby5pc1RleHQmJm8udGV4dCE9cy50ZXh0KXtmb3IodmFyIGE9MDtvLnRleHRbYV09PXMudGV4dFthXTthKyspbisrO3JldHVybiBufWlmKG8uY29udGVudC5zaXplfHxzLmNvbnRlbnQuc2l6ZSl7dmFyIGM9aShvLmNvbnRlbnQscy5jb250ZW50LG4rMSk7aWYobnVsbCE9YylyZXR1cm4gY31uKz1vLm5vZGVTaXplfWVsc2Ugbis9by5ub2RlU2l6ZX19ZnVuY3Rpb24gcyh0LGUsbixyKXtmb3IodmFyIG89dC5jaGlsZENvdW50LGk9ZS5jaGlsZENvdW50Ozspe2lmKDA9PW98fDA9PWkpcmV0dXJuIG89PWk/bnVsbDp7YTpuLGI6cn07dmFyIGE9dC5jaGlsZCgtLW8pLGM9ZS5jaGlsZCgtLWkpLGw9YS5ub2RlU2l6ZTtpZihhIT1jKXtpZighYS5zYW1lTWFya3VwKGMpKXJldHVybnthOm4sYjpyfTtpZihhLmlzVGV4dCYmYS50ZXh0IT1jLnRleHQpe3ZhciBwPTAsdT1NYXRoLm1pbihhLnRleHQubGVuZ3RoLGMudGV4dC5sZW5ndGgpO3doaWxlKHA8dSYmYS50ZXh0W2EudGV4dC5sZW5ndGgtcC0xXT09Yy50ZXh0W2MudGV4dC5sZW5ndGgtcC0xXSlwKyssbi0tLHItLTtyZXR1cm57YTpuLGI6cn19aWYoYS5jb250ZW50LnNpemV8fGMuY29udGVudC5zaXplKXt2YXIgaD1zKGEuY29udGVudCxjLmNvbnRlbnQsbi0xLHItMSk7aWYoaClyZXR1cm4gaH1uLT1sLHItPWx9ZWxzZSBuLT1sLHItPWx9fXZhciBhPWZ1bmN0aW9uKHQsZSl7dmFyIG49dGhpcztpZih0aGlzLmNvbnRlbnQ9dCx0aGlzLnNpemU9ZXx8MCxudWxsPT1lKWZvcih2YXIgcj0wO3I8dC5sZW5ndGg7cisrKW4uc2l6ZSs9dFtyXS5ub2RlU2l6ZX0sYz17Zmlyc3RDaGlsZDp7fSxsYXN0Q2hpbGQ6e30sY2hpbGRDb3VudDp7fX07YS5wcm90b3R5cGUubm9kZXNCZXR3ZWVuPWZ1bmN0aW9uKHQsZSxuLHIsbyl7dmFyIGk9dGhpczt2b2lkIDA9PT1yJiYocj0wKTtmb3IodmFyIHM9MCxhPTA7YTxlO3MrKyl7dmFyIGM9aS5jb250ZW50W3NdLGw9YStjLm5vZGVTaXplO2lmKGw+dCYmITEhPT1uKGMscithLG8scykmJmMuY29udGVudC5zaXplKXt2YXIgcD1hKzE7Yy5ub2Rlc0JldHdlZW4oTWF0aC5tYXgoMCx0LXApLE1hdGgubWluKGMuY29udGVudC5zaXplLGUtcCksbixyK3ApfWE9bH19LGEucHJvdG90eXBlLmRlc2NlbmRhbnRzPWZ1bmN0aW9uKHQpe3RoaXMubm9kZXNCZXR3ZWVuKDAsdGhpcy5zaXplLHQpfSxhLnByb3RvdHlwZS50ZXh0QmV0d2Vlbj1mdW5jdGlvbih0LGUsbixyKXt2YXIgbz0iIixpPSEwO3JldHVybiB0aGlzLm5vZGVzQmV0d2Vlbih0LGUsKGZ1bmN0aW9uKHMsYSl7cy5pc1RleHQ/KG8rPXMudGV4dC5zbGljZShNYXRoLm1heCh0LGEpLWEsZS1hKSxpPSFuKTpzLmlzTGVhZiYmcj8obys9cixpPSFuKTohaSYmcy5pc0Jsb2NrJiYobys9bixpPSEwKX0pLDApLG99LGEucHJvdG90eXBlLmFwcGVuZD1mdW5jdGlvbih0KXtpZighdC5zaXplKXJldHVybiB0aGlzO2lmKCF0aGlzLnNpemUpcmV0dXJuIHQ7dmFyIGU9dGhpcy5sYXN0Q2hpbGQsbj10LmZpcnN0Q2hpbGQscj10aGlzLmNvbnRlbnQuc2xpY2UoKSxvPTA7Zm9yKGUuaXNUZXh0JiZlLnNhbWVNYXJrdXAobikmJihyW3IubGVuZ3RoLTFdPWUud2l0aFRleHQoZS50ZXh0K24udGV4dCksbz0xKTtvPHQuY29udGVudC5sZW5ndGg7bysrKXIucHVzaCh0LmNvbnRlbnRbb10pO3JldHVybiBuZXcgYShyLHRoaXMuc2l6ZSt0LnNpemUpfSxhLnByb3RvdHlwZS5jdXQ9ZnVuY3Rpb24odCxlKXt2YXIgbj10aGlzO2lmKG51bGw9PWUmJihlPXRoaXMuc2l6ZSksMD09dCYmZT09dGhpcy5zaXplKXJldHVybiB0aGlzO3ZhciByPVtdLG89MDtpZihlPnQpZm9yKHZhciBpPTAscz0wO3M8ZTtpKyspe3ZhciBjPW4uY29udGVudFtpXSxsPXMrYy5ub2RlU2l6ZTtsPnQmJigoczx0fHxsPmUpJiYoYz1jLmlzVGV4dD9jLmN1dChNYXRoLm1heCgwLHQtcyksTWF0aC5taW4oYy50ZXh0Lmxlbmd0aCxlLXMpKTpjLmN1dChNYXRoLm1heCgwLHQtcy0xKSxNYXRoLm1pbihjLmNvbnRlbnQuc2l6ZSxlLXMtMSkpKSxyLnB1c2goYyksbys9Yy5ub2RlU2l6ZSkscz1sfXJldHVybiBuZXcgYShyLG8pfSxhLnByb3RvdHlwZS5jdXRCeUluZGV4PWZ1bmN0aW9uKHQsZSl7cmV0dXJuIHQ9PWU/YS5lbXB0eTowPT10JiZlPT10aGlzLmNvbnRlbnQubGVuZ3RoP3RoaXM6bmV3IGEodGhpcy5jb250ZW50LnNsaWNlKHQsZSkpfSxhLnByb3RvdHlwZS5yZXBsYWNlQ2hpbGQ9ZnVuY3Rpb24odCxlKXt2YXIgbj10aGlzLmNvbnRlbnRbdF07aWYobj09ZSlyZXR1cm4gdGhpczt2YXIgcj10aGlzLmNvbnRlbnQuc2xpY2UoKSxvPXRoaXMuc2l6ZStlLm5vZGVTaXplLW4ubm9kZVNpemU7cmV0dXJuIHJbdF09ZSxuZXcgYShyLG8pfSxhLnByb3RvdHlwZS5hZGRUb1N0YXJ0PWZ1bmN0aW9uKHQpe3JldHVybiBuZXcgYShbdF0uY29uY2F0KHRoaXMuY29udGVudCksdGhpcy5zaXplK3Qubm9kZVNpemUpfSxhLnByb3RvdHlwZS5hZGRUb0VuZD1mdW5jdGlvbih0KXtyZXR1cm4gbmV3IGEodGhpcy5jb250ZW50LmNvbmNhdCh0KSx0aGlzLnNpemUrdC5ub2RlU2l6ZSl9LGEucHJvdG90eXBlLmVxPWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXM7aWYodGhpcy5jb250ZW50Lmxlbmd0aCE9dC5jb250ZW50Lmxlbmd0aClyZXR1cm4hMTtmb3IodmFyIG49MDtuPHRoaXMuY29udGVudC5sZW5ndGg7bisrKWlmKCFlLmNvbnRlbnRbbl0uZXEodC5jb250ZW50W25dKSlyZXR1cm4hMTtyZXR1cm4hMH0sYy5maXJzdENoaWxkLmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLmNvbnRlbnQubGVuZ3RoP3RoaXMuY29udGVudFswXTpudWxsfSxjLmxhc3RDaGlsZC5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jb250ZW50Lmxlbmd0aD90aGlzLmNvbnRlbnRbdGhpcy5jb250ZW50Lmxlbmd0aC0xXTpudWxsfSxjLmNoaWxkQ291bnQuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY29udGVudC5sZW5ndGh9LGEucHJvdG90eXBlLmNoaWxkPWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMuY29udGVudFt0XTtpZighZSl0aHJvdyBuZXcgUmFuZ2VFcnJvcigiSW5kZXggIit0KyIgb3V0IG9mIHJhbmdlIGZvciAiK3RoaXMpO3JldHVybiBlfSxhLnByb3RvdHlwZS5tYXliZUNoaWxkPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLmNvbnRlbnRbdF19LGEucHJvdG90eXBlLmZvckVhY2g9ZnVuY3Rpb24odCl7Zm9yKHZhciBlPXRoaXMsbj0wLHI9MDtuPHRoaXMuY29udGVudC5sZW5ndGg7bisrKXt2YXIgbz1lLmNvbnRlbnRbbl07dChvLHIsbikscis9by5ub2RlU2l6ZX19LGEucHJvdG90eXBlLmZpbmREaWZmU3RhcnQ9ZnVuY3Rpb24odCxlKXtyZXR1cm4gdm9pZCAwPT09ZSYmKGU9MCksaSh0aGlzLHQsZSl9LGEucHJvdG90eXBlLmZpbmREaWZmRW5kPWZ1bmN0aW9uKHQsZSxuKXtyZXR1cm4gdm9pZCAwPT09ZSYmKGU9dGhpcy5zaXplKSx2b2lkIDA9PT1uJiYobj10LnNpemUpLHModGhpcyx0LGUsbil9LGEucHJvdG90eXBlLmZpbmRJbmRleD1mdW5jdGlvbih0LGUpe3ZhciBuPXRoaXM7aWYodm9pZCAwPT09ZSYmKGU9LTEpLDA9PXQpcmV0dXJuIHAoMCx0KTtpZih0PT10aGlzLnNpemUpcmV0dXJuIHAodGhpcy5jb250ZW50Lmxlbmd0aCx0KTtpZih0PnRoaXMuc2l6ZXx8dDwwKXRocm93IG5ldyBSYW5nZUVycm9yKCJQb3NpdGlvbiAiK3QrIiBvdXRzaWRlIG9mIGZyYWdtZW50ICgiK3RoaXMrIikiKTtmb3IodmFyIHI9MCxvPTA7O3IrKyl7dmFyIGk9bi5jaGlsZChyKSxzPW8raS5ub2RlU2l6ZTtpZihzPj10KXJldHVybiBzPT10fHxlPjA/cChyKzEscyk6cChyLG8pO289c319LGEucHJvdG90eXBlLnRvU3RyaW5nPWZ1bmN0aW9uKCl7cmV0dXJuIjwiK3RoaXMudG9TdHJpbmdJbm5lcigpKyI+In0sYS5wcm90b3R5cGUudG9TdHJpbmdJbm5lcj1mdW5jdGlvbigpe3JldHVybiB0aGlzLmNvbnRlbnQuam9pbigiLCAiKX0sYS5wcm90b3R5cGUudG9KU09OPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY29udGVudC5sZW5ndGg/dGhpcy5jb250ZW50Lm1hcCgoZnVuY3Rpb24odCl7cmV0dXJuIHQudG9KU09OKCl9KSk6bnVsbH0sYS5mcm9tSlNPTj1mdW5jdGlvbih0LGUpe2lmKCFlKXJldHVybiBhLmVtcHR5O2lmKCFBcnJheS5pc0FycmF5KGUpKXRocm93IG5ldyBSYW5nZUVycm9yKCJJbnZhbGlkIGlucHV0IGZvciBGcmFnbWVudC5mcm9tSlNPTiIpO3JldHVybiBuZXcgYShlLm1hcCh0Lm5vZGVGcm9tSlNPTikpfSxhLmZyb21BcnJheT1mdW5jdGlvbih0KXtpZighdC5sZW5ndGgpcmV0dXJuIGEuZW1wdHk7Zm9yKHZhciBlLG49MCxyPTA7cjx0Lmxlbmd0aDtyKyspe3ZhciBvPXRbcl07bis9by5ub2RlU2l6ZSxyJiZvLmlzVGV4dCYmdFtyLTFdLnNhbWVNYXJrdXAobyk/KGV8fChlPXQuc2xpY2UoMCxyKSksZVtlLmxlbmd0aC0xXT1vLndpdGhUZXh0KGVbZS5sZW5ndGgtMV0udGV4dCtvLnRleHQpKTplJiZlLnB1c2gobyl9cmV0dXJuIG5ldyBhKGV8fHQsbil9LGEuZnJvbT1mdW5jdGlvbih0KXtpZighdClyZXR1cm4gYS5lbXB0eTtpZih0IGluc3RhbmNlb2YgYSlyZXR1cm4gdDtpZihBcnJheS5pc0FycmF5KHQpKXJldHVybiB0aGlzLmZyb21BcnJheSh0KTtpZih0LmF0dHJzKXJldHVybiBuZXcgYShbdF0sdC5ub2RlU2l6ZSk7dGhyb3cgbmV3IFJhbmdlRXJyb3IoIkNhbiBub3QgY29udmVydCAiK3QrIiB0byBhIEZyYWdtZW50IisodC5ub2Rlc0JldHdlZW4/IiAobG9va3MgbGlrZSBtdWx0aXBsZSB2ZXJzaW9ucyBvZiBwcm9zZW1pcnJvci1tb2RlbCB3ZXJlIGxvYWRlZCkiOiIiKSl9LE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKGEucHJvdG90eXBlLGMpO3ZhciBsPXtpbmRleDowLG9mZnNldDowfTtmdW5jdGlvbiBwKHQsZSl7cmV0dXJuIGwuaW5kZXg9dCxsLm9mZnNldD1lLGx9ZnVuY3Rpb24gdSh0LGUpe2lmKHQ9PT1lKXJldHVybiEwO2lmKCF0fHwib2JqZWN0IiE9dHlwZW9mIHR8fCFlfHwib2JqZWN0IiE9dHlwZW9mIGUpcmV0dXJuITE7dmFyIG49QXJyYXkuaXNBcnJheSh0KTtpZihBcnJheS5pc0FycmF5KGUpIT1uKXJldHVybiExO2lmKG4pe2lmKHQubGVuZ3RoIT1lLmxlbmd0aClyZXR1cm4hMTtmb3IodmFyIHI9MDtyPHQubGVuZ3RoO3IrKylpZighdSh0W3JdLGVbcl0pKXJldHVybiExfWVsc2V7Zm9yKHZhciBvIGluIHQpaWYoIShvIGluIGUpfHwhdSh0W29dLGVbb10pKXJldHVybiExO2Zvcih2YXIgaSBpbiBlKWlmKCEoaSBpbiB0KSlyZXR1cm4hMX1yZXR1cm4hMH1hLmVtcHR5PW5ldyBhKFtdLDApO3ZhciBoPWZ1bmN0aW9uKHQsZSl7dGhpcy50eXBlPXQsdGhpcy5hdHRycz1lfTtmdW5jdGlvbiBmKHQpe3ZhciBlPUVycm9yLmNhbGwodGhpcyx0KTtyZXR1cm4gZS5fX3Byb3RvX189Zi5wcm90b3R5cGUsZX1oLnByb3RvdHlwZS5hZGRUb1NldD1mdW5jdGlvbih0KXtmb3IodmFyIGUsbj10aGlzLHI9ITEsbz0wO288dC5sZW5ndGg7bysrKXt2YXIgaT10W29dO2lmKG4uZXEoaSkpcmV0dXJuIHQ7aWYobi50eXBlLmV4Y2x1ZGVzKGkudHlwZSkpZXx8KGU9dC5zbGljZSgwLG8pKTtlbHNle2lmKGkudHlwZS5leGNsdWRlcyhuLnR5cGUpKXJldHVybiB0OyFyJiZpLnR5cGUucmFuaz5uLnR5cGUucmFuayYmKGV8fChlPXQuc2xpY2UoMCxvKSksZS5wdXNoKG4pLHI9ITApLGUmJmUucHVzaChpKX19cmV0dXJuIGV8fChlPXQuc2xpY2UoKSkscnx8ZS5wdXNoKHRoaXMpLGV9LGgucHJvdG90eXBlLnJlbW92ZUZyb21TZXQ9ZnVuY3Rpb24odCl7Zm9yKHZhciBlPXRoaXMsbj0wO248dC5sZW5ndGg7bisrKWlmKGUuZXEodFtuXSkpcmV0dXJuIHQuc2xpY2UoMCxuKS5jb25jYXQodC5zbGljZShuKzEpKTtyZXR1cm4gdH0saC5wcm90b3R5cGUuaXNJblNldD1mdW5jdGlvbih0KXtmb3IodmFyIGU9dGhpcyxuPTA7bjx0Lmxlbmd0aDtuKyspaWYoZS5lcSh0W25dKSlyZXR1cm4hMDtyZXR1cm4hMX0saC5wcm90b3R5cGUuZXE9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXM9PXR8fHRoaXMudHlwZT09dC50eXBlJiZ1KHRoaXMuYXR0cnMsdC5hdHRycyl9LGgucHJvdG90eXBlLnRvSlNPTj1mdW5jdGlvbigpe3ZhciB0PXRoaXMsZT17dHlwZTp0aGlzLnR5cGUubmFtZX07Zm9yKHZhciBuIGluIHQuYXR0cnMpe2UuYXR0cnM9dC5hdHRyczticmVha31yZXR1cm4gZX0saC5mcm9tSlNPTj1mdW5jdGlvbih0LGUpe2lmKCFlKXRocm93IG5ldyBSYW5nZUVycm9yKCJJbnZhbGlkIGlucHV0IGZvciBNYXJrLmZyb21KU09OIik7dmFyIG49dC5tYXJrc1tlLnR5cGVdO2lmKCFuKXRocm93IG5ldyBSYW5nZUVycm9yKCJUaGVyZSBpcyBubyBtYXJrIHR5cGUgIitlLnR5cGUrIiBpbiB0aGlzIHNjaGVtYSIpO3JldHVybiBuLmNyZWF0ZShlLmF0dHJzKX0saC5zYW1lU2V0PWZ1bmN0aW9uKHQsZSl7aWYodD09ZSlyZXR1cm4hMDtpZih0Lmxlbmd0aCE9ZS5sZW5ndGgpcmV0dXJuITE7Zm9yKHZhciBuPTA7bjx0Lmxlbmd0aDtuKyspaWYoIXRbbl0uZXEoZVtuXSkpcmV0dXJuITE7cmV0dXJuITB9LGguc2V0RnJvbT1mdW5jdGlvbih0KXtpZighdHx8MD09dC5sZW5ndGgpcmV0dXJuIGgubm9uZTtpZih0IGluc3RhbmNlb2YgaClyZXR1cm5bdF07dmFyIGU9dC5zbGljZSgpO3JldHVybiBlLnNvcnQoKGZ1bmN0aW9uKHQsZSl7cmV0dXJuIHQudHlwZS5yYW5rLWUudHlwZS5yYW5rfSkpLGV9LGgubm9uZT1bXSxmLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKEVycm9yLnByb3RvdHlwZSksZi5wcm90b3R5cGUuY29uc3RydWN0b3I9ZixmLnByb3RvdHlwZS5uYW1lPSJSZXBsYWNlRXJyb3IiO3ZhciBkPWZ1bmN0aW9uKHQsZSxuKXt0aGlzLmNvbnRlbnQ9dCx0aGlzLm9wZW5TdGFydD1lLHRoaXMub3BlbkVuZD1ufSx2PXtzaXplOnt9fTtmdW5jdGlvbiBtKHQsZSxuKXt2YXIgcj10LmZpbmRJbmRleChlKSxvPXIuaW5kZXgsaT1yLm9mZnNldCxzPXQubWF5YmVDaGlsZChvKSxhPXQuZmluZEluZGV4KG4pLGM9YS5pbmRleCxsPWEub2Zmc2V0O2lmKGk9PWV8fHMuaXNUZXh0KXtpZihsIT1uJiYhdC5jaGlsZChjKS5pc1RleHQpdGhyb3cgbmV3IFJhbmdlRXJyb3IoIlJlbW92aW5nIG5vbi1mbGF0IHJhbmdlIik7cmV0dXJuIHQuY3V0KDAsZSkuYXBwZW5kKHQuY3V0KG4pKX1pZihvIT1jKXRocm93IG5ldyBSYW5nZUVycm9yKCJSZW1vdmluZyBub24tZmxhdCByYW5nZSIpO3JldHVybiB0LnJlcGxhY2VDaGlsZChvLHMuY29weShtKHMuY29udGVudCxlLWktMSxuLWktMSkpKX1mdW5jdGlvbiB5KHQsZSxuLHIpe3ZhciBvPXQuZmluZEluZGV4KGUpLGk9by5pbmRleCxzPW8ub2Zmc2V0LGE9dC5tYXliZUNoaWxkKGkpO2lmKHM9PWV8fGEuaXNUZXh0KXJldHVybiByJiYhci5jYW5SZXBsYWNlKGksaSxuKT9udWxsOnQuY3V0KDAsZSkuYXBwZW5kKG4pLmFwcGVuZCh0LmN1dChlKSk7dmFyIGM9eShhLmNvbnRlbnQsZS1zLTEsbik7cmV0dXJuIGMmJnQucmVwbGFjZUNoaWxkKGksYS5jb3B5KGMpKX1mdW5jdGlvbiBnKHQsZSxuKXtpZihuLm9wZW5TdGFydD50LmRlcHRoKXRocm93IG5ldyBmKCJJbnNlcnRlZCBjb250ZW50IGRlZXBlciB0aGFuIGluc2VydGlvbiBwb3NpdGlvbiIpO2lmKHQuZGVwdGgtbi5vcGVuU3RhcnQhPWUuZGVwdGgtbi5vcGVuRW5kKXRocm93IG5ldyBmKCJJbmNvbnNpc3RlbnQgb3BlbiBkZXB0aHMiKTtyZXR1cm4gdyh0LGUsbiwwKX1mdW5jdGlvbiB3KHQsZSxuLHIpe3ZhciBvPXQuaW5kZXgociksaT10Lm5vZGUocik7aWYobz09ZS5pbmRleChyKSYmcjx0LmRlcHRoLW4ub3BlblN0YXJ0KXt2YXIgcz13KHQsZSxuLHIrMSk7cmV0dXJuIGkuY29weShpLmNvbnRlbnQucmVwbGFjZUNoaWxkKG8scykpfWlmKG4uY29udGVudC5zaXplKXtpZihuLm9wZW5TdGFydHx8bi5vcGVuRW5kfHx0LmRlcHRoIT1yfHxlLmRlcHRoIT1yKXt2YXIgYT1UKG4sdCksYz1hLnN0YXJ0LGw9YS5lbmQ7cmV0dXJuIEMoaSxPKHQsYyxsLGUscikpfXZhciBwPXQucGFyZW50LHU9cC5jb250ZW50O3JldHVybiBDKHAsdS5jdXQoMCx0LnBhcmVudE9mZnNldCkuYXBwZW5kKG4uY29udGVudCkuYXBwZW5kKHUuY3V0KGUucGFyZW50T2Zmc2V0KSkpfXJldHVybiBDKGksTSh0LGUscikpfWZ1bmN0aW9uIHgodCxlKXtpZighZS50eXBlLmNvbXBhdGlibGVDb250ZW50KHQudHlwZSkpdGhyb3cgbmV3IGYoIkNhbm5vdCBqb2luICIrZS50eXBlLm5hbWUrIiBvbnRvICIrdC50eXBlLm5hbWUpfWZ1bmN0aW9uIGIodCxlLG4pe3ZhciByPXQubm9kZShuKTtyZXR1cm4geChyLGUubm9kZShuKSkscn1mdW5jdGlvbiBrKHQsZSl7dmFyIG49ZS5sZW5ndGgtMTtuPj0wJiZ0LmlzVGV4dCYmdC5zYW1lTWFya3VwKGVbbl0pP2Vbbl09dC53aXRoVGV4dChlW25dLnRleHQrdC50ZXh0KTplLnB1c2godCl9ZnVuY3Rpb24gUyh0LGUsbixyKXt2YXIgbz0oZXx8dCkubm9kZShuKSxpPTAscz1lP2UuaW5kZXgobik6by5jaGlsZENvdW50O3QmJihpPXQuaW5kZXgobiksdC5kZXB0aD5uP2krKzp0LnRleHRPZmZzZXQmJihrKHQubm9kZUFmdGVyLHIpLGkrKykpO2Zvcih2YXIgYT1pO2E8czthKyspayhvLmNoaWxkKGEpLHIpO2UmJmUuZGVwdGg9PW4mJmUudGV4dE9mZnNldCYmayhlLm5vZGVCZWZvcmUscil9ZnVuY3Rpb24gQyh0LGUpe2lmKCF0LnR5cGUudmFsaWRDb250ZW50KGUpKXRocm93IG5ldyBmKCJJbnZhbGlkIGNvbnRlbnQgZm9yIG5vZGUgIit0LnR5cGUubmFtZSk7cmV0dXJuIHQuY29weShlKX1mdW5jdGlvbiBPKHQsZSxuLHIsbyl7dmFyIGk9dC5kZXB0aD5vJiZiKHQsZSxvKzEpLHM9ci5kZXB0aD5vJiZiKG4scixvKzEpLGM9W107cmV0dXJuIFMobnVsbCx0LG8sYyksaSYmcyYmZS5pbmRleChvKT09bi5pbmRleChvKT8oeChpLHMpLGsoQyhpLE8odCxlLG4scixvKzEpKSxjKSk6KGkmJmsoQyhpLE0odCxlLG8rMSkpLGMpLFMoZSxuLG8sYykscyYmayhDKHMsTShuLHIsbysxKSksYykpLFMocixudWxsLG8sYyksbmV3IGEoYyl9ZnVuY3Rpb24gTSh0LGUsbil7dmFyIHI9W107aWYoUyhudWxsLHQsbixyKSx0LmRlcHRoPm4pe3ZhciBvPWIodCxlLG4rMSk7ayhDKG8sTSh0LGUsbisxKSkscil9cmV0dXJuIFMoZSxudWxsLG4sciksbmV3IGEocil9ZnVuY3Rpb24gVCh0LGUpe2Zvcih2YXIgbj1lLmRlcHRoLXQub3BlblN0YXJ0LHI9ZS5ub2RlKG4pLG89ci5jb3B5KHQuY29udGVudCksaT1uLTE7aT49MDtpLS0pbz1lLm5vZGUoaSkuY29weShhLmZyb20obykpO3JldHVybntzdGFydDpvLnJlc29sdmVOb0NhY2hlKHQub3BlblN0YXJ0K24pLGVuZDpvLnJlc29sdmVOb0NhY2hlKG8uY29udGVudC5zaXplLXQub3BlbkVuZC1uKX19di5zaXplLmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLmNvbnRlbnQuc2l6ZS10aGlzLm9wZW5TdGFydC10aGlzLm9wZW5FbmR9LGQucHJvdG90eXBlLmluc2VydEF0PWZ1bmN0aW9uKHQsZSl7dmFyIG49eSh0aGlzLmNvbnRlbnQsdCt0aGlzLm9wZW5TdGFydCxlLG51bGwpO3JldHVybiBuJiZuZXcgZChuLHRoaXMub3BlblN0YXJ0LHRoaXMub3BlbkVuZCl9LGQucHJvdG90eXBlLnJlbW92ZUJldHdlZW49ZnVuY3Rpb24odCxlKXtyZXR1cm4gbmV3IGQobSh0aGlzLmNvbnRlbnQsdCt0aGlzLm9wZW5TdGFydCxlK3RoaXMub3BlblN0YXJ0KSx0aGlzLm9wZW5TdGFydCx0aGlzLm9wZW5FbmQpfSxkLnByb3RvdHlwZS5lcT1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5jb250ZW50LmVxKHQuY29udGVudCkmJnRoaXMub3BlblN0YXJ0PT10Lm9wZW5TdGFydCYmdGhpcy5vcGVuRW5kPT10Lm9wZW5FbmR9LGQucHJvdG90eXBlLnRvU3RyaW5nPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY29udGVudCsiKCIrdGhpcy5vcGVuU3RhcnQrIiwiK3RoaXMub3BlbkVuZCsiKSJ9LGQucHJvdG90eXBlLnRvSlNPTj1mdW5jdGlvbigpe2lmKCF0aGlzLmNvbnRlbnQuc2l6ZSlyZXR1cm4gbnVsbDt2YXIgdD17Y29udGVudDp0aGlzLmNvbnRlbnQudG9KU09OKCl9O3JldHVybiB0aGlzLm9wZW5TdGFydD4wJiYodC5vcGVuU3RhcnQ9dGhpcy5vcGVuU3RhcnQpLHRoaXMub3BlbkVuZD4wJiYodC5vcGVuRW5kPXRoaXMub3BlbkVuZCksdH0sZC5mcm9tSlNPTj1mdW5jdGlvbih0LGUpe2lmKCFlKXJldHVybiBkLmVtcHR5O3ZhciBuPWUub3BlblN0YXJ0fHwwLHI9ZS5vcGVuRW5kfHwwO2lmKCJudW1iZXIiIT10eXBlb2Ygbnx8Im51bWJlciIhPXR5cGVvZiByKXRocm93IG5ldyBSYW5nZUVycm9yKCJJbnZhbGlkIGlucHV0IGZvciBTbGljZS5mcm9tSlNPTiIpO3JldHVybiBuZXcgZChhLmZyb21KU09OKHQsZS5jb250ZW50KSxlLm9wZW5TdGFydHx8MCxlLm9wZW5FbmR8fDApfSxkLm1heE9wZW49ZnVuY3Rpb24odCxlKXt2b2lkIDA9PT1lJiYoZT0hMCk7Zm9yKHZhciBuPTAscj0wLG89dC5maXJzdENoaWxkO28mJiFvLmlzTGVhZiYmKGV8fCFvLnR5cGUuc3BlYy5pc29sYXRpbmcpO289by5maXJzdENoaWxkKW4rKztmb3IodmFyIGk9dC5sYXN0Q2hpbGQ7aSYmIWkuaXNMZWFmJiYoZXx8IWkudHlwZS5zcGVjLmlzb2xhdGluZyk7aT1pLmxhc3RDaGlsZClyKys7cmV0dXJuIG5ldyBkKHQsbixyKX0sT2JqZWN0LmRlZmluZVByb3BlcnRpZXMoZC5wcm90b3R5cGUsdiksZC5lbXB0eT1uZXcgZChhLmVtcHR5LDAsMCk7dmFyIE49ZnVuY3Rpb24odCxlLG4pe3RoaXMucG9zPXQsdGhpcy5wYXRoPWUsdGhpcy5kZXB0aD1lLmxlbmd0aC8zLTEsdGhpcy5wYXJlbnRPZmZzZXQ9bn0sRT17cGFyZW50Ont9LGRvYzp7fSx0ZXh0T2Zmc2V0Ont9LG5vZGVBZnRlcjp7fSxub2RlQmVmb3JlOnt9fTtOLnByb3RvdHlwZS5yZXNvbHZlRGVwdGg9ZnVuY3Rpb24odCl7cmV0dXJuIG51bGw9PXQ/dGhpcy5kZXB0aDp0PDA/dGhpcy5kZXB0aCt0OnR9LEUucGFyZW50LmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLm5vZGUodGhpcy5kZXB0aCl9LEUuZG9jLmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLm5vZGUoMCl9LE4ucHJvdG90eXBlLm5vZGU9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMucGF0aFszKnRoaXMucmVzb2x2ZURlcHRoKHQpXX0sTi5wcm90b3R5cGUuaW5kZXg9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMucGF0aFszKnRoaXMucmVzb2x2ZURlcHRoKHQpKzFdfSxOLnByb3RvdHlwZS5pbmRleEFmdGVyPWZ1bmN0aW9uKHQpe3JldHVybiB0PXRoaXMucmVzb2x2ZURlcHRoKHQpLHRoaXMuaW5kZXgodCkrKHQhPXRoaXMuZGVwdGh8fHRoaXMudGV4dE9mZnNldD8xOjApfSxOLnByb3RvdHlwZS5zdGFydD1mdW5jdGlvbih0KXtyZXR1cm4gdD10aGlzLnJlc29sdmVEZXB0aCh0KSwwPT10PzA6dGhpcy5wYXRoWzMqdC0xXSsxfSxOLnByb3RvdHlwZS5lbmQ9ZnVuY3Rpb24odCl7cmV0dXJuIHQ9dGhpcy5yZXNvbHZlRGVwdGgodCksdGhpcy5zdGFydCh0KSt0aGlzLm5vZGUodCkuY29udGVudC5zaXplfSxOLnByb3RvdHlwZS5iZWZvcmU9ZnVuY3Rpb24odCl7aWYodD10aGlzLnJlc29sdmVEZXB0aCh0KSwhdCl0aHJvdyBuZXcgUmFuZ2VFcnJvcigiVGhlcmUgaXMgbm8gcG9zaXRpb24gYmVmb3JlIHRoZSB0b3AtbGV2ZWwgbm9kZSIpO3JldHVybiB0PT10aGlzLmRlcHRoKzE/dGhpcy5wb3M6dGhpcy5wYXRoWzMqdC0xXX0sTi5wcm90b3R5cGUuYWZ0ZXI9ZnVuY3Rpb24odCl7aWYodD10aGlzLnJlc29sdmVEZXB0aCh0KSwhdCl0aHJvdyBuZXcgUmFuZ2VFcnJvcigiVGhlcmUgaXMgbm8gcG9zaXRpb24gYWZ0ZXIgdGhlIHRvcC1sZXZlbCBub2RlIik7cmV0dXJuIHQ9PXRoaXMuZGVwdGgrMT90aGlzLnBvczp0aGlzLnBhdGhbMyp0LTFdK3RoaXMucGF0aFszKnRdLm5vZGVTaXplfSxFLnRleHRPZmZzZXQuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucG9zLXRoaXMucGF0aFt0aGlzLnBhdGgubGVuZ3RoLTFdfSxFLm5vZGVBZnRlci5nZXQ9ZnVuY3Rpb24oKXt2YXIgdD10aGlzLnBhcmVudCxlPXRoaXMuaW5kZXgodGhpcy5kZXB0aCk7aWYoZT09dC5jaGlsZENvdW50KXJldHVybiBudWxsO3ZhciBuPXRoaXMucG9zLXRoaXMucGF0aFt0aGlzLnBhdGgubGVuZ3RoLTFdLHI9dC5jaGlsZChlKTtyZXR1cm4gbj90LmNoaWxkKGUpLmN1dChuKTpyfSxFLm5vZGVCZWZvcmUuZ2V0PWZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5pbmRleCh0aGlzLmRlcHRoKSxlPXRoaXMucG9zLXRoaXMucGF0aFt0aGlzLnBhdGgubGVuZ3RoLTFdO3JldHVybiBlP3RoaXMucGFyZW50LmNoaWxkKHQpLmN1dCgwLGUpOjA9PXQ/bnVsbDp0aGlzLnBhcmVudC5jaGlsZCh0LTEpfSxOLnByb3RvdHlwZS5tYXJrcz1mdW5jdGlvbigpe3ZhciB0PXRoaXMucGFyZW50LGU9dGhpcy5pbmRleCgpO2lmKDA9PXQuY29udGVudC5zaXplKXJldHVybiBoLm5vbmU7aWYodGhpcy50ZXh0T2Zmc2V0KXJldHVybiB0LmNoaWxkKGUpLm1hcmtzO3ZhciBuPXQubWF5YmVDaGlsZChlLTEpLHI9dC5tYXliZUNoaWxkKGUpO2lmKCFuKXt2YXIgbz1uO249cixyPW99Zm9yKHZhciBpPW4ubWFya3Mscz0wO3M8aS5sZW5ndGg7cysrKSExIT09aVtzXS50eXBlLnNwZWMuaW5jbHVzaXZlfHxyJiZpW3NdLmlzSW5TZXQoci5tYXJrcyl8fChpPWlbcy0tXS5yZW1vdmVGcm9tU2V0KGkpKTtyZXR1cm4gaX0sTi5wcm90b3R5cGUubWFya3NBY3Jvc3M9ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5wYXJlbnQubWF5YmVDaGlsZCh0aGlzLmluZGV4KCkpO2lmKCFlfHwhZS5pc0lubGluZSlyZXR1cm4gbnVsbDtmb3IodmFyIG49ZS5tYXJrcyxyPXQucGFyZW50Lm1heWJlQ2hpbGQodC5pbmRleCgpKSxvPTA7bzxuLmxlbmd0aDtvKyspITEhPT1uW29dLnR5cGUuc3BlYy5pbmNsdXNpdmV8fHImJm5bb10uaXNJblNldChyLm1hcmtzKXx8KG49bltvLS1dLnJlbW92ZUZyb21TZXQobikpO3JldHVybiBufSxOLnByb3RvdHlwZS5zaGFyZWREZXB0aD1mdW5jdGlvbih0KXtmb3IodmFyIGU9dGhpcyxuPXRoaXMuZGVwdGg7bj4wO24tLSlpZihlLnN0YXJ0KG4pPD10JiZlLmVuZChuKT49dClyZXR1cm4gbjtyZXR1cm4gMH0sTi5wcm90b3R5cGUuYmxvY2tSYW5nZT1mdW5jdGlvbih0LGUpe3ZhciBuPXRoaXM7aWYodm9pZCAwPT09dCYmKHQ9dGhpcyksdC5wb3M8dGhpcy5wb3MpcmV0dXJuIHQuYmxvY2tSYW5nZSh0aGlzKTtmb3IodmFyIHI9dGhpcy5kZXB0aC0odGhpcy5wYXJlbnQuaW5saW5lQ29udGVudHx8dGhpcy5wb3M9PXQucG9zPzE6MCk7cj49MDtyLS0paWYodC5wb3M8PW4uZW5kKHIpJiYoIWV8fGUobi5ub2RlKHIpKSkpcmV0dXJuIG5ldyB6KG4sdCxyKX0sTi5wcm90b3R5cGUuc2FtZVBhcmVudD1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5wb3MtdGhpcy5wYXJlbnRPZmZzZXQ9PXQucG9zLXQucGFyZW50T2Zmc2V0fSxOLnByb3RvdHlwZS5tYXg9ZnVuY3Rpb24odCl7cmV0dXJuIHQucG9zPnRoaXMucG9zP3Q6dGhpc30sTi5wcm90b3R5cGUubWluPWZ1bmN0aW9uKHQpe3JldHVybiB0LnBvczx0aGlzLnBvcz90OnRoaXN9LE4ucHJvdG90eXBlLnRvU3RyaW5nPWZ1bmN0aW9uKCl7Zm9yKHZhciB0PXRoaXMsZT0iIixuPTE7bjw9dGhpcy5kZXB0aDtuKyspZSs9KGU/Ii8iOiIiKSt0Lm5vZGUobikudHlwZS5uYW1lKyJfIit0LmluZGV4KG4tMSk7cmV0dXJuIGUrIjoiK3RoaXMucGFyZW50T2Zmc2V0fSxOLnJlc29sdmU9ZnVuY3Rpb24odCxlKXtpZighKGU+PTAmJmU8PXQuY29udGVudC5zaXplKSl0aHJvdyBuZXcgUmFuZ2VFcnJvcigiUG9zaXRpb24gIitlKyIgb3V0IG9mIHJhbmdlIik7Zm9yKHZhciBuPVtdLHI9MCxvPWUsaT10Ozspe3ZhciBzPWkuY29udGVudC5maW5kSW5kZXgobyksYT1zLmluZGV4LGM9cy5vZmZzZXQsbD1vLWM7aWYobi5wdXNoKGksYSxyK2MpLCFsKWJyZWFrO2lmKGk9aS5jaGlsZChhKSxpLmlzVGV4dClicmVhaztvPWwtMSxyKz1jKzF9cmV0dXJuIG5ldyBOKGUsbixvKX0sTi5yZXNvbHZlQ2FjaGVkPWZ1bmN0aW9uKHQsZSl7Zm9yKHZhciBuPTA7bjxBLmxlbmd0aDtuKyspe3ZhciByPUFbbl07aWYoci5wb3M9PWUmJnIuZG9jPT10KXJldHVybiByfXZhciBvPUFbUl09Ti5yZXNvbHZlKHQsZSk7cmV0dXJuIFI9KFIrMSklRCxvfSxPYmplY3QuZGVmaW5lUHJvcGVydGllcyhOLnByb3RvdHlwZSxFKTt2YXIgQT1bXSxSPTAsRD0xMix6PWZ1bmN0aW9uKHQsZSxuKXt0aGlzLiRmcm9tPXQsdGhpcy4kdG89ZSx0aGlzLmRlcHRoPW59LFA9e3N0YXJ0Ont9LGVuZDp7fSxwYXJlbnQ6e30sc3RhcnRJbmRleDp7fSxlbmRJbmRleDp7fX07UC5zdGFydC5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy4kZnJvbS5iZWZvcmUodGhpcy5kZXB0aCsxKX0sUC5lbmQuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuJHRvLmFmdGVyKHRoaXMuZGVwdGgrMSl9LFAucGFyZW50LmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLiRmcm9tLm5vZGUodGhpcy5kZXB0aCl9LFAuc3RhcnRJbmRleC5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy4kZnJvbS5pbmRleCh0aGlzLmRlcHRoKX0sUC5lbmRJbmRleC5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy4kdG8uaW5kZXhBZnRlcih0aGlzLmRlcHRoKX0sT2JqZWN0LmRlZmluZVByb3BlcnRpZXMoei5wcm90b3R5cGUsUCk7dmFyIEk9T2JqZWN0LmNyZWF0ZShudWxsKSxfPWZ1bmN0aW9uKHQsZSxuLHIpe3RoaXMudHlwZT10LHRoaXMuYXR0cnM9ZSx0aGlzLmNvbnRlbnQ9bnx8YS5lbXB0eSx0aGlzLm1hcmtzPXJ8fGgubm9uZX0sRj17bm9kZVNpemU6e30sY2hpbGRDb3VudDp7fSx0ZXh0Q29udGVudDp7fSxmaXJzdENoaWxkOnt9LGxhc3RDaGlsZDp7fSxpc0Jsb2NrOnt9LGlzVGV4dGJsb2NrOnt9LGlubGluZUNvbnRlbnQ6e30saXNJbmxpbmU6e30saXNUZXh0Ont9LGlzTGVhZjp7fSxpc0F0b206e319O0Yubm9kZVNpemUuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuaXNMZWFmPzE6Mit0aGlzLmNvbnRlbnQuc2l6ZX0sRi5jaGlsZENvdW50LmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLmNvbnRlbnQuY2hpbGRDb3VudH0sXy5wcm90b3R5cGUuY2hpbGQ9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuY29udGVudC5jaGlsZCh0KX0sXy5wcm90b3R5cGUubWF5YmVDaGlsZD1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5jb250ZW50Lm1heWJlQ2hpbGQodCl9LF8ucHJvdG90eXBlLmZvckVhY2g9ZnVuY3Rpb24odCl7dGhpcy5jb250ZW50LmZvckVhY2godCl9LF8ucHJvdG90eXBlLm5vZGVzQmV0d2Vlbj1mdW5jdGlvbih0LGUsbixyKXt2b2lkIDA9PT1yJiYocj0wKSx0aGlzLmNvbnRlbnQubm9kZXNCZXR3ZWVuKHQsZSxuLHIsdGhpcyl9LF8ucHJvdG90eXBlLmRlc2NlbmRhbnRzPWZ1bmN0aW9uKHQpe3RoaXMubm9kZXNCZXR3ZWVuKDAsdGhpcy5jb250ZW50LnNpemUsdCl9LEYudGV4dENvbnRlbnQuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudGV4dEJldHdlZW4oMCx0aGlzLmNvbnRlbnQuc2l6ZSwiIil9LF8ucHJvdG90eXBlLnRleHRCZXR3ZWVuPWZ1bmN0aW9uKHQsZSxuLHIpe3JldHVybiB0aGlzLmNvbnRlbnQudGV4dEJldHdlZW4odCxlLG4scil9LEYuZmlyc3RDaGlsZC5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jb250ZW50LmZpcnN0Q2hpbGR9LEYubGFzdENoaWxkLmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLmNvbnRlbnQubGFzdENoaWxkfSxfLnByb3RvdHlwZS5lcT1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcz09dHx8dGhpcy5zYW1lTWFya3VwKHQpJiZ0aGlzLmNvbnRlbnQuZXEodC5jb250ZW50KX0sXy5wcm90b3R5cGUuc2FtZU1hcmt1cD1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5oYXNNYXJrdXAodC50eXBlLHQuYXR0cnMsdC5tYXJrcyl9LF8ucHJvdG90eXBlLmhhc01hcmt1cD1mdW5jdGlvbih0LGUsbil7cmV0dXJuIHRoaXMudHlwZT09dCYmdSh0aGlzLmF0dHJzLGV8fHQuZGVmYXVsdEF0dHJzfHxJKSYmaC5zYW1lU2V0KHRoaXMubWFya3Msbnx8aC5ub25lKX0sXy5wcm90b3R5cGUuY29weT1mdW5jdGlvbih0KXtyZXR1cm4gdm9pZCAwPT09dCYmKHQ9bnVsbCksdD09dGhpcy5jb250ZW50P3RoaXM6bmV3IHRoaXMuY29uc3RydWN0b3IodGhpcy50eXBlLHRoaXMuYXR0cnMsdCx0aGlzLm1hcmtzKX0sXy5wcm90b3R5cGUubWFyaz1mdW5jdGlvbih0KXtyZXR1cm4gdD09dGhpcy5tYXJrcz90aGlzOm5ldyB0aGlzLmNvbnN0cnVjdG9yKHRoaXMudHlwZSx0aGlzLmF0dHJzLHRoaXMuY29udGVudCx0KX0sXy5wcm90b3R5cGUuY3V0PWZ1bmN0aW9uKHQsZSl7cmV0dXJuIDA9PXQmJmU9PXRoaXMuY29udGVudC5zaXplP3RoaXM6dGhpcy5jb3B5KHRoaXMuY29udGVudC5jdXQodCxlKSl9LF8ucHJvdG90eXBlLnNsaWNlPWZ1bmN0aW9uKHQsZSxuKXtpZih2b2lkIDA9PT1lJiYoZT10aGlzLmNvbnRlbnQuc2l6ZSksdm9pZCAwPT09biYmKG49ITEpLHQ9PWUpcmV0dXJuIGQuZW1wdHk7dmFyIHI9dGhpcy5yZXNvbHZlKHQpLG89dGhpcy5yZXNvbHZlKGUpLGk9bj8wOnIuc2hhcmVkRGVwdGgoZSkscz1yLnN0YXJ0KGkpLGE9ci5ub2RlKGkpLGM9YS5jb250ZW50LmN1dChyLnBvcy1zLG8ucG9zLXMpO3JldHVybiBuZXcgZChjLHIuZGVwdGgtaSxvLmRlcHRoLWkpfSxfLnByb3RvdHlwZS5yZXBsYWNlPWZ1bmN0aW9uKHQsZSxuKXtyZXR1cm4gZyh0aGlzLnJlc29sdmUodCksdGhpcy5yZXNvbHZlKGUpLG4pfSxfLnByb3RvdHlwZS5ub2RlQXQ9ZnVuY3Rpb24odCl7Zm9yKHZhciBlPXRoaXM7Oyl7dmFyIG49ZS5jb250ZW50LmZpbmRJbmRleCh0KSxyPW4uaW5kZXgsbz1uLm9mZnNldDtpZihlPWUubWF5YmVDaGlsZChyKSwhZSlyZXR1cm4gbnVsbDtpZihvPT10fHxlLmlzVGV4dClyZXR1cm4gZTt0LT1vKzF9fSxfLnByb3RvdHlwZS5jaGlsZEFmdGVyPWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMuY29udGVudC5maW5kSW5kZXgodCksbj1lLmluZGV4LHI9ZS5vZmZzZXQ7cmV0dXJue25vZGU6dGhpcy5jb250ZW50Lm1heWJlQ2hpbGQobiksaW5kZXg6bixvZmZzZXQ6cn19LF8ucHJvdG90eXBlLmNoaWxkQmVmb3JlPWZ1bmN0aW9uKHQpe2lmKDA9PXQpcmV0dXJue25vZGU6bnVsbCxpbmRleDowLG9mZnNldDowfTt2YXIgZT10aGlzLmNvbnRlbnQuZmluZEluZGV4KHQpLG49ZS5pbmRleCxyPWUub2Zmc2V0O2lmKHI8dClyZXR1cm57bm9kZTp0aGlzLmNvbnRlbnQuY2hpbGQobiksaW5kZXg6bixvZmZzZXQ6cn07dmFyIG89dGhpcy5jb250ZW50LmNoaWxkKG4tMSk7cmV0dXJue25vZGU6byxpbmRleDpuLTEsb2Zmc2V0OnItby5ub2RlU2l6ZX19LF8ucHJvdG90eXBlLnJlc29sdmU9ZnVuY3Rpb24odCl7cmV0dXJuIE4ucmVzb2x2ZUNhY2hlZCh0aGlzLHQpfSxfLnByb3RvdHlwZS5yZXNvbHZlTm9DYWNoZT1mdW5jdGlvbih0KXtyZXR1cm4gTi5yZXNvbHZlKHRoaXMsdCl9LF8ucHJvdG90eXBlLnJhbmdlSGFzTWFyaz1mdW5jdGlvbih0LGUsbil7dmFyIHI9ITE7cmV0dXJuIGU+dCYmdGhpcy5ub2Rlc0JldHdlZW4odCxlLChmdW5jdGlvbih0KXtyZXR1cm4gbi5pc0luU2V0KHQubWFya3MpJiYocj0hMCksIXJ9KSkscn0sRi5pc0Jsb2NrLmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLnR5cGUuaXNCbG9ja30sRi5pc1RleHRibG9jay5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy50eXBlLmlzVGV4dGJsb2NrfSxGLmlubGluZUNvbnRlbnQuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudHlwZS5pbmxpbmVDb250ZW50fSxGLmlzSW5saW5lLmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLnR5cGUuaXNJbmxpbmV9LEYuaXNUZXh0LmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLnR5cGUuaXNUZXh0fSxGLmlzTGVhZi5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy50eXBlLmlzTGVhZn0sRi5pc0F0b20uZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudHlwZS5pc0F0b219LF8ucHJvdG90eXBlLnRvU3RyaW5nPWZ1bmN0aW9uKCl7aWYodGhpcy50eXBlLnNwZWMudG9EZWJ1Z1N0cmluZylyZXR1cm4gdGhpcy50eXBlLnNwZWMudG9EZWJ1Z1N0cmluZyh0aGlzKTt2YXIgdD10aGlzLnR5cGUubmFtZTtyZXR1cm4gdGhpcy5jb250ZW50LnNpemUmJih0Kz0iKCIrdGhpcy5jb250ZW50LnRvU3RyaW5nSW5uZXIoKSsiKSIpLGoodGhpcy5tYXJrcyx0KX0sXy5wcm90b3R5cGUuY29udGVudE1hdGNoQXQ9ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy50eXBlLmNvbnRlbnRNYXRjaC5tYXRjaEZyYWdtZW50KHRoaXMuY29udGVudCwwLHQpO2lmKCFlKXRocm93IG5ldyBFcnJvcigiQ2FsbGVkIGNvbnRlbnRNYXRjaEF0IG9uIGEgbm9kZSB3aXRoIGludmFsaWQgY29udGVudCIpO3JldHVybiBlfSxfLnByb3RvdHlwZS5jYW5SZXBsYWNlPWZ1bmN0aW9uKHQsZSxuLHIsbyl7dmFyIGk9dGhpczt2b2lkIDA9PT1uJiYobj1hLmVtcHR5KSx2b2lkIDA9PT1yJiYocj0wKSx2b2lkIDA9PT1vJiYobz1uLmNoaWxkQ291bnQpO3ZhciBzPXRoaXMuY29udGVudE1hdGNoQXQodCkubWF0Y2hGcmFnbWVudChuLHIsbyksYz1zJiZzLm1hdGNoRnJhZ21lbnQodGhpcy5jb250ZW50LGUpO2lmKCFjfHwhYy52YWxpZEVuZClyZXR1cm4hMTtmb3IodmFyIGw9cjtsPG87bCsrKWlmKCFpLnR5cGUuYWxsb3dzTWFya3Mobi5jaGlsZChsKS5tYXJrcykpcmV0dXJuITE7cmV0dXJuITB9LF8ucHJvdG90eXBlLmNhblJlcGxhY2VXaXRoPWZ1bmN0aW9uKHQsZSxuLHIpe2lmKHImJiF0aGlzLnR5cGUuYWxsb3dzTWFya3MocikpcmV0dXJuITE7dmFyIG89dGhpcy5jb250ZW50TWF0Y2hBdCh0KS5tYXRjaFR5cGUobiksaT1vJiZvLm1hdGNoRnJhZ21lbnQodGhpcy5jb250ZW50LGUpO3JldHVybiEhaSYmaS52YWxpZEVuZH0sXy5wcm90b3R5cGUuY2FuQXBwZW5kPWZ1bmN0aW9uKHQpe3JldHVybiB0LmNvbnRlbnQuc2l6ZT90aGlzLmNhblJlcGxhY2UodGhpcy5jaGlsZENvdW50LHRoaXMuY2hpbGRDb3VudCx0LmNvbnRlbnQpOnRoaXMudHlwZS5jb21wYXRpYmxlQ29udGVudCh0LnR5cGUpfSxfLnByb3RvdHlwZS5kZWZhdWx0Q29udGVudFR5cGU9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuY29udGVudE1hdGNoQXQodCkuZGVmYXVsdFR5cGV9LF8ucHJvdG90eXBlLmNoZWNrPWZ1bmN0aW9uKCl7aWYoIXRoaXMudHlwZS52YWxpZENvbnRlbnQodGhpcy5jb250ZW50KSl0aHJvdyBuZXcgUmFuZ2VFcnJvcigiSW52YWxpZCBjb250ZW50IGZvciBub2RlICIrdGhpcy50eXBlLm5hbWUrIjogIit0aGlzLmNvbnRlbnQudG9TdHJpbmcoKS5zbGljZSgwLDUwKSk7dGhpcy5jb250ZW50LmZvckVhY2goKGZ1bmN0aW9uKHQpe3JldHVybiB0LmNoZWNrKCl9KSl9LF8ucHJvdG90eXBlLnRvSlNPTj1mdW5jdGlvbigpe3ZhciB0PXRoaXMsZT17dHlwZTp0aGlzLnR5cGUubmFtZX07Zm9yKHZhciBuIGluIHQuYXR0cnMpe2UuYXR0cnM9dC5hdHRyczticmVha31yZXR1cm4gdGhpcy5jb250ZW50LnNpemUmJihlLmNvbnRlbnQ9dGhpcy5jb250ZW50LnRvSlNPTigpKSx0aGlzLm1hcmtzLmxlbmd0aCYmKGUubWFya3M9dGhpcy5tYXJrcy5tYXAoKGZ1bmN0aW9uKHQpe3JldHVybiB0LnRvSlNPTigpfSkpKSxlfSxfLmZyb21KU09OPWZ1bmN0aW9uKHQsZSl7aWYoIWUpdGhyb3cgbmV3IFJhbmdlRXJyb3IoIkludmFsaWQgaW5wdXQgZm9yIE5vZGUuZnJvbUpTT04iKTt2YXIgbj1udWxsO2lmKGUubWFya3Mpe2lmKCFBcnJheS5pc0FycmF5KGUubWFya3MpKXRocm93IG5ldyBSYW5nZUVycm9yKCJJbnZhbGlkIG1hcmsgZGF0YSBmb3IgTm9kZS5mcm9tSlNPTiIpO249ZS5tYXJrcy5tYXAodC5tYXJrRnJvbUpTT04pfWlmKCJ0ZXh0Ij09ZS50eXBlKXtpZigic3RyaW5nIiE9dHlwZW9mIGUudGV4dCl0aHJvdyBuZXcgUmFuZ2VFcnJvcigiSW52YWxpZCB0ZXh0IG5vZGUgaW4gSlNPTiIpO3JldHVybiB0LnRleHQoZS50ZXh0LG4pfXZhciByPWEuZnJvbUpTT04odCxlLmNvbnRlbnQpO3JldHVybiB0Lm5vZGVUeXBlKGUudHlwZSkuY3JlYXRlKGUuYXR0cnMscixuKX0sT2JqZWN0LmRlZmluZVByb3BlcnRpZXMoXy5wcm90b3R5cGUsRik7dmFyIEI9ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZShlLG4scixvKXtpZih0LmNhbGwodGhpcyxlLG4sbnVsbCxvKSwhcil0aHJvdyBuZXcgUmFuZ2VFcnJvcigiRW1wdHkgdGV4dCBub2RlcyBhcmUgbm90IGFsbG93ZWQiKTt0aGlzLnRleHQ9cn10JiYoZS5fX3Byb3RvX189dCksZS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZSh0JiZ0LnByb3RvdHlwZSksZS5wcm90b3R5cGUuY29uc3RydWN0b3I9ZTt2YXIgbj17dGV4dENvbnRlbnQ6e30sbm9kZVNpemU6e319O3JldHVybiBlLnByb3RvdHlwZS50b1N0cmluZz1mdW5jdGlvbigpe3JldHVybiB0aGlzLnR5cGUuc3BlYy50b0RlYnVnU3RyaW5nP3RoaXMudHlwZS5zcGVjLnRvRGVidWdTdHJpbmcodGhpcyk6aih0aGlzLm1hcmtzLEpTT04uc3RyaW5naWZ5KHRoaXMudGV4dCkpfSxuLnRleHRDb250ZW50LmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLnRleHR9LGUucHJvdG90eXBlLnRleHRCZXR3ZWVuPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIHRoaXMudGV4dC5zbGljZSh0LGUpfSxuLm5vZGVTaXplLmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLnRleHQubGVuZ3RofSxlLnByb3RvdHlwZS5tYXJrPWZ1bmN0aW9uKHQpe3JldHVybiB0PT10aGlzLm1hcmtzP3RoaXM6bmV3IGUodGhpcy50eXBlLHRoaXMuYXR0cnMsdGhpcy50ZXh0LHQpfSxlLnByb3RvdHlwZS53aXRoVGV4dD1mdW5jdGlvbih0KXtyZXR1cm4gdD09dGhpcy50ZXh0P3RoaXM6bmV3IGUodGhpcy50eXBlLHRoaXMuYXR0cnMsdCx0aGlzLm1hcmtzKX0sZS5wcm90b3R5cGUuY3V0PWZ1bmN0aW9uKHQsZSl7cmV0dXJuIHZvaWQgMD09PXQmJih0PTApLHZvaWQgMD09PWUmJihlPXRoaXMudGV4dC5sZW5ndGgpLDA9PXQmJmU9PXRoaXMudGV4dC5sZW5ndGg/dGhpczp0aGlzLndpdGhUZXh0KHRoaXMudGV4dC5zbGljZSh0LGUpKX0sZS5wcm90b3R5cGUuZXE9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuc2FtZU1hcmt1cCh0KSYmdGhpcy50ZXh0PT10LnRleHR9LGUucHJvdG90eXBlLnRvSlNPTj1mdW5jdGlvbigpe3ZhciBlPXQucHJvdG90eXBlLnRvSlNPTi5jYWxsKHRoaXMpO3JldHVybiBlLnRleHQ9dGhpcy50ZXh0LGV9LE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKGUucHJvdG90eXBlLG4pLGV9KF8pO2Z1bmN0aW9uIGoodCxlKXtmb3IodmFyIG49dC5sZW5ndGgtMTtuPj0wO24tLSllPXRbbl0udHlwZS5uYW1lKyIoIitlKyIpIjtyZXR1cm4gZX12YXIgJD1mdW5jdGlvbih0KXt0aGlzLnZhbGlkRW5kPXQsdGhpcy5uZXh0PVtdLHRoaXMud3JhcENhY2hlPVtdfSxWPXtpbmxpbmVDb250ZW50Ont9LGRlZmF1bHRUeXBlOnt9LGVkZ2VDb3VudDp7fX07JC5wYXJzZT1mdW5jdGlvbih0LGUpe3ZhciBuPW5ldyBMKHQsZSk7aWYobnVsbD09bi5uZXh0KXJldHVybiAkLmVtcHR5O3ZhciByPXEobik7bi5uZXh0JiZuLmVycigiVW5leHBlY3RlZCB0cmFpbGluZyB0ZXh0Iik7dmFyIG89dHQoWShyKSk7cmV0dXJuIGV0KG8sbiksb30sJC5wcm90b3R5cGUubWF0Y2hUeXBlPWZ1bmN0aW9uKHQpe2Zvcih2YXIgZT10aGlzLG49MDtuPHRoaXMubmV4dC5sZW5ndGg7bis9MilpZihlLm5leHRbbl09PXQpcmV0dXJuIGUubmV4dFtuKzFdO3JldHVybiBudWxsfSwkLnByb3RvdHlwZS5tYXRjaEZyYWdtZW50PWZ1bmN0aW9uKHQsZSxuKXt2b2lkIDA9PT1lJiYoZT0wKSx2b2lkIDA9PT1uJiYobj10LmNoaWxkQ291bnQpO2Zvcih2YXIgcj10aGlzLG89ZTtyJiZvPG47bysrKXI9ci5tYXRjaFR5cGUodC5jaGlsZChvKS50eXBlKTtyZXR1cm4gcn0sVi5pbmxpbmVDb250ZW50LmdldD1mdW5jdGlvbigpe3ZhciB0PXRoaXMubmV4dFswXTtyZXR1cm4hIXQmJnQuaXNJbmxpbmV9LFYuZGVmYXVsdFR5cGUuZ2V0PWZ1bmN0aW9uKCl7Zm9yKHZhciB0PXRoaXMsZT0wO2U8dGhpcy5uZXh0Lmxlbmd0aDtlKz0yKXt2YXIgbj10Lm5leHRbZV07aWYoIW4uaXNUZXh0JiYhbi5oYXNSZXF1aXJlZEF0dHJzKCkpcmV0dXJuIG59fSwkLnByb3RvdHlwZS5jb21wYXRpYmxlPWZ1bmN0aW9uKHQpe2Zvcih2YXIgZT10aGlzLG49MDtuPHRoaXMubmV4dC5sZW5ndGg7bis9Milmb3IodmFyIHI9MDtyPHQubmV4dC5sZW5ndGg7cis9MilpZihlLm5leHRbbl09PXQubmV4dFtyXSlyZXR1cm4hMDtyZXR1cm4hMX0sJC5wcm90b3R5cGUuZmlsbEJlZm9yZT1mdW5jdGlvbih0LGUsbil7dm9pZCAwPT09ZSYmKGU9ITEpLHZvaWQgMD09PW4mJihuPTApO3ZhciByPVt0aGlzXTtmdW5jdGlvbiBvKGkscyl7dmFyIGM9aS5tYXRjaEZyYWdtZW50KHQsbik7aWYoYyYmKCFlfHxjLnZhbGlkRW5kKSlyZXR1cm4gYS5mcm9tKHMubWFwKChmdW5jdGlvbih0KXtyZXR1cm4gdC5jcmVhdGVBbmRGaWxsKCl9KSkpO2Zvcih2YXIgbD0wO2w8aS5uZXh0Lmxlbmd0aDtsKz0yKXt2YXIgcD1pLm5leHRbbF0sdT1pLm5leHRbbCsxXTtpZighcC5pc1RleHQmJiFwLmhhc1JlcXVpcmVkQXR0cnMoKSYmLTE9PXIuaW5kZXhPZih1KSl7ci5wdXNoKHUpO3ZhciBoPW8odSxzLmNvbmNhdChwKSk7aWYoaClyZXR1cm4gaH19fXJldHVybiBvKHRoaXMsW10pfSwkLnByb3RvdHlwZS5maW5kV3JhcHBpbmc9ZnVuY3Rpb24odCl7Zm9yKHZhciBlPXRoaXMsbj0wO248dGhpcy53cmFwQ2FjaGUubGVuZ3RoO24rPTIpaWYoZS53cmFwQ2FjaGVbbl09PXQpcmV0dXJuIGUud3JhcENhY2hlW24rMV07dmFyIHI9dGhpcy5jb21wdXRlV3JhcHBpbmcodCk7cmV0dXJuIHRoaXMud3JhcENhY2hlLnB1c2godCxyKSxyfSwkLnByb3RvdHlwZS5jb21wdXRlV3JhcHBpbmc9ZnVuY3Rpb24odCl7dmFyIGU9T2JqZWN0LmNyZWF0ZShudWxsKSxuPVt7bWF0Y2g6dGhpcyx0eXBlOm51bGwsdmlhOm51bGx9XTt3aGlsZShuLmxlbmd0aCl7dmFyIHI9bi5zaGlmdCgpLG89ci5tYXRjaDtpZihvLm1hdGNoVHlwZSh0KSl7Zm9yKHZhciBpPVtdLHM9cjtzLnR5cGU7cz1zLnZpYSlpLnB1c2gocy50eXBlKTtyZXR1cm4gaS5yZXZlcnNlKCl9Zm9yKHZhciBhPTA7YTxvLm5leHQubGVuZ3RoO2ErPTIpe3ZhciBjPW8ubmV4dFthXTtjLmlzTGVhZnx8Yy5oYXNSZXF1aXJlZEF0dHJzKCl8fGMubmFtZSBpbiBlfHxyLnR5cGUmJiFvLm5leHRbYSsxXS52YWxpZEVuZHx8KG4ucHVzaCh7bWF0Y2g6Yy5jb250ZW50TWF0Y2gsdHlwZTpjLHZpYTpyfSksZVtjLm5hbWVdPSEwKX19fSxWLmVkZ2VDb3VudC5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5uZXh0Lmxlbmd0aD4+MX0sJC5wcm90b3R5cGUuZWRnZT1mdW5jdGlvbih0KXt2YXIgZT10PDwxO2lmKGU+dGhpcy5uZXh0Lmxlbmd0aCl0aHJvdyBuZXcgUmFuZ2VFcnJvcigiVGhlcmUncyBubyAiK3QrInRoIGVkZ2UgaW4gdGhpcyBjb250ZW50IG1hdGNoIik7cmV0dXJue3R5cGU6dGhpcy5uZXh0W2VdLG5leHQ6dGhpcy5uZXh0W2UrMV19fSwkLnByb3RvdHlwZS50b1N0cmluZz1mdW5jdGlvbigpe3ZhciB0PVtdO2Z1bmN0aW9uIGUobil7dC5wdXNoKG4pO2Zvcih2YXIgcj0xO3I8bi5uZXh0Lmxlbmd0aDtyKz0yKS0xPT10LmluZGV4T2Yobi5uZXh0W3JdKSYmZShuLm5leHRbcl0pfXJldHVybiBlKHRoaXMpLHQubWFwKChmdW5jdGlvbihlLG4pe2Zvcih2YXIgcj1uKyhlLnZhbGlkRW5kPyIqIjoiICIpKyIgIixvPTA7bzxlLm5leHQubGVuZ3RoO28rPTIpcis9KG8/IiwgIjoiIikrZS5uZXh0W29dLm5hbWUrIi0+Iit0LmluZGV4T2YoZS5uZXh0W28rMV0pO3JldHVybiByfSkpLmpvaW4oIlxuIil9LE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKCQucHJvdG90eXBlLFYpLCQuZW1wdHk9bmV3ICQoITApO3ZhciBMPWZ1bmN0aW9uKHQsZSl7dGhpcy5zdHJpbmc9dCx0aGlzLm5vZGVUeXBlcz1lLHRoaXMuaW5saW5lPW51bGwsdGhpcy5wb3M9MCx0aGlzLnRva2Vucz10LnNwbGl0KC9ccyooPz1cYnxcV3wkKS8pLCIiPT10aGlzLnRva2Vuc1t0aGlzLnRva2Vucy5sZW5ndGgtMV0mJnRoaXMudG9rZW5zLnBvcCgpLCIiPT10aGlzLnRva2Vuc1swXSYmdGhpcy50b2tlbnMudW5zaGlmdCgpfSxKPXtuZXh0Ont9fTtmdW5jdGlvbiBxKHQpe3ZhciBlPVtdO2Rve2UucHVzaChXKHQpKX13aGlsZSh0LmVhdCgifCIpKTtyZXR1cm4gMT09ZS5sZW5ndGg/ZVswXTp7dHlwZToiY2hvaWNlIixleHByczplfX1mdW5jdGlvbiBXKHQpe3ZhciBlPVtdO2Rve2UucHVzaChIKHQpKX13aGlsZSh0Lm5leHQmJiIpIiE9dC5uZXh0JiYifCIhPXQubmV4dCk7cmV0dXJuIDE9PWUubGVuZ3RoP2VbMF06e3R5cGU6InNlcSIsZXhwcnM6ZX19ZnVuY3Rpb24gSCh0KXtmb3IodmFyIGU9WCh0KTs7KWlmKHQuZWF0KCIrIikpZT17dHlwZToicGx1cyIsZXhwcjplfTtlbHNlIGlmKHQuZWF0KCIqIikpZT17dHlwZToic3RhciIsZXhwcjplfTtlbHNlIGlmKHQuZWF0KCI/IikpZT17dHlwZToib3B0IixleHByOmV9O2Vsc2V7aWYoIXQuZWF0KCJ7IikpYnJlYWs7ZT1VKHQsZSl9cmV0dXJuIGV9ZnVuY3Rpb24gSyh0KXsvXEQvLnRlc3QodC5uZXh0KSYmdC5lcnIoIkV4cGVjdGVkIG51bWJlciwgZ290ICciK3QubmV4dCsiJyIpO3ZhciBlPU51bWJlcih0Lm5leHQpO3JldHVybiB0LnBvcysrLGV9ZnVuY3Rpb24gVSh0LGUpe3ZhciBuPUsodCkscj1uO3JldHVybiB0LmVhdCgiLCIpJiYocj0ifSIhPXQubmV4dD9LKHQpOi0xKSx0LmVhdCgifSIpfHx0LmVycigiVW5jbG9zZWQgYnJhY2VkIHJhbmdlIikse3R5cGU6InJhbmdlIixtaW46bixtYXg6cixleHByOmV9fWZ1bmN0aW9uIEcodCxlKXt2YXIgbj10Lm5vZGVUeXBlcyxyPW5bZV07aWYocilyZXR1cm5bcl07dmFyIG89W107Zm9yKHZhciBpIGluIG4pe3ZhciBzPW5baV07cy5ncm91cHMuaW5kZXhPZihlKT4tMSYmby5wdXNoKHMpfXJldHVybiAwPT1vLmxlbmd0aCYmdC5lcnIoIk5vIG5vZGUgdHlwZSBvciBncm91cCAnIitlKyInIGZvdW5kIiksb31mdW5jdGlvbiBYKHQpe2lmKHQuZWF0KCIoIikpe3ZhciBlPXEodCk7cmV0dXJuIHQuZWF0KCIpIil8fHQuZXJyKCJNaXNzaW5nIGNsb3NpbmcgcGFyZW4iKSxlfWlmKCEvXFcvLnRlc3QodC5uZXh0KSl7dmFyIG49Ryh0LHQubmV4dCkubWFwKChmdW5jdGlvbihlKXtyZXR1cm4gbnVsbD09dC5pbmxpbmU/dC5pbmxpbmU9ZS5pc0lubGluZTp0LmlubGluZSE9ZS5pc0lubGluZSYmdC5lcnIoIk1peGluZyBpbmxpbmUgYW5kIGJsb2NrIGNvbnRlbnQiKSx7dHlwZToibmFtZSIsdmFsdWU6ZX19KSk7cmV0dXJuIHQucG9zKyssMT09bi5sZW5ndGg/blswXTp7dHlwZToiY2hvaWNlIixleHByczpufX10LmVycigiVW5leHBlY3RlZCB0b2tlbiAnIit0Lm5leHQrIiciKX1mdW5jdGlvbiBZKHQpe3ZhciBlPVtbXV07cmV0dXJuIG8oaSh0LDApLG4oKSksZTtmdW5jdGlvbiBuKCl7cmV0dXJuIGUucHVzaChbXSktMX1mdW5jdGlvbiByKHQsbixyKXt2YXIgbz17dGVybTpyLHRvOm59O3JldHVybiBlW3RdLnB1c2gobyksb31mdW5jdGlvbiBvKHQsZSl7dC5mb3JFYWNoKChmdW5jdGlvbih0KXtyZXR1cm4gdC50bz1lfSkpfWZ1bmN0aW9uIGkodCxlKXtpZigiY2hvaWNlIj09dC50eXBlKXJldHVybiB0LmV4cHJzLnJlZHVjZSgoZnVuY3Rpb24odCxuKXtyZXR1cm4gdC5jb25jYXQoaShuLGUpKX0pLFtdKTtpZigic2VxIj09dC50eXBlKWZvcih2YXIgcz0wOztzKyspe3ZhciBhPWkodC5leHByc1tzXSxlKTtpZihzPT10LmV4cHJzLmxlbmd0aC0xKXJldHVybiBhO28oYSxlPW4oKSl9ZWxzZXtpZigic3RhciI9PXQudHlwZSl7dmFyIGM9bigpO3JldHVybiByKGUsYyksbyhpKHQuZXhwcixjKSxjKSxbcihjKV19aWYoInBsdXMiPT10LnR5cGUpe3ZhciBsPW4oKTtyZXR1cm4gbyhpKHQuZXhwcixlKSxsKSxvKGkodC5leHByLGwpLGwpLFtyKGwpXX1pZigib3B0Ij09dC50eXBlKXJldHVybltyKGUpXS5jb25jYXQoaSh0LmV4cHIsZSkpO2lmKCJyYW5nZSI9PXQudHlwZSl7Zm9yKHZhciBwPWUsdT0wO3U8dC5taW47dSsrKXt2YXIgaD1uKCk7byhpKHQuZXhwcixwKSxoKSxwPWh9aWYoLTE9PXQubWF4KW8oaSh0LmV4cHIscCkscCk7ZWxzZSBmb3IodmFyIGY9dC5taW47Zjx0Lm1heDtmKyspe3ZhciBkPW4oKTtyKHAsZCksbyhpKHQuZXhwcixwKSxkKSxwPWR9cmV0dXJuW3IocCldfWlmKCJuYW1lIj09dC50eXBlKXJldHVybltyKGUsbnVsbCx0LnZhbHVlKV19fX1mdW5jdGlvbiBRKHQsZSl7cmV0dXJuIHQtZX1mdW5jdGlvbiBaKHQsZSl7dmFyIG49W107cmV0dXJuIHIoZSksbi5zb3J0KFEpO2Z1bmN0aW9uIHIoZSl7dmFyIG89dFtlXTtpZigxPT1vLmxlbmd0aCYmIW9bMF0udGVybSlyZXR1cm4gcihvWzBdLnRvKTtuLnB1c2goZSk7Zm9yKHZhciBpPTA7aTxvLmxlbmd0aDtpKyspe3ZhciBzPW9baV0sYT1zLnRlcm0sYz1zLnRvO2F8fC0xIT1uLmluZGV4T2YoYyl8fHIoYyl9fX1mdW5jdGlvbiB0dCh0KXt2YXIgZT1PYmplY3QuY3JlYXRlKG51bGwpO3JldHVybiBuKFoodCwwKSk7ZnVuY3Rpb24gbihyKXt2YXIgbz1bXTtyLmZvckVhY2goKGZ1bmN0aW9uKGUpe3RbZV0uZm9yRWFjaCgoZnVuY3Rpb24oZSl7dmFyIG49ZS50ZXJtLHI9ZS50bztpZihuKXt2YXIgaT1vLmluZGV4T2Yobikscz1pPi0xJiZvW2krMV07Wih0LHIpLmZvckVhY2goKGZ1bmN0aW9uKHQpe3N8fG8ucHVzaChuLHM9W10pLC0xPT1zLmluZGV4T2YodCkmJnMucHVzaCh0KX0pKX19KSl9KSk7Zm9yKHZhciBpPWVbci5qb2luKCIsIildPW5ldyAkKHIuaW5kZXhPZih0Lmxlbmd0aC0xKT4tMSkscz0wO3M8by5sZW5ndGg7cys9Mil7dmFyIGE9b1tzKzFdLnNvcnQoUSk7aS5uZXh0LnB1c2gob1tzXSxlW2Euam9pbigiLCIpXXx8bihhKSl9cmV0dXJuIGl9fWZ1bmN0aW9uIGV0KHQsZSl7Zm9yKHZhciBuPTAscj1bdF07bjxyLmxlbmd0aDtuKyspe2Zvcih2YXIgbz1yW25dLGk9IW8udmFsaWRFbmQscz1bXSxhPTA7YTxvLm5leHQubGVuZ3RoO2ErPTIpe3ZhciBjPW8ubmV4dFthXSxsPW8ubmV4dFthKzFdO3MucHVzaChjLm5hbWUpLCFpfHxjLmlzVGV4dHx8Yy5oYXNSZXF1aXJlZEF0dHJzKCl8fChpPSExKSwtMT09ci5pbmRleE9mKGwpJiZyLnB1c2gobCl9aSYmZS5lcnIoIk9ubHkgbm9uLWdlbmVyYXRhYmxlIG5vZGVzICgiK3Muam9pbigiLCAiKSsiKSBpbiBhIHJlcXVpcmVkIHBvc2l0aW9uIil9fWZ1bmN0aW9uIG50KHQpe3ZhciBlPU9iamVjdC5jcmVhdGUobnVsbCk7Zm9yKHZhciBuIGluIHQpe3ZhciByPXRbbl07aWYoIXIuaGFzRGVmYXVsdClyZXR1cm4gbnVsbDtlW25dPXIuZGVmYXVsdH1yZXR1cm4gZX1mdW5jdGlvbiBydCh0LGUpe3ZhciBuPU9iamVjdC5jcmVhdGUobnVsbCk7Zm9yKHZhciByIGluIHQpe3ZhciBvPWUmJmVbcl07aWYodm9pZCAwPT09byl7dmFyIGk9dFtyXTtpZighaS5oYXNEZWZhdWx0KXRocm93IG5ldyBSYW5nZUVycm9yKCJObyB2YWx1ZSBzdXBwbGllZCBmb3IgYXR0cmlidXRlICIrcik7bz1pLmRlZmF1bHR9bltyXT1vfXJldHVybiBufWZ1bmN0aW9uIG90KHQpe3ZhciBlPU9iamVjdC5jcmVhdGUobnVsbCk7aWYodClmb3IodmFyIG4gaW4gdCllW25dPW5ldyBhdCh0W25dKTtyZXR1cm4gZX1KLm5leHQuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudG9rZW5zW3RoaXMucG9zXX0sTC5wcm90b3R5cGUuZWF0PWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLm5leHQ9PXQmJih0aGlzLnBvcysrfHwhMCl9LEwucHJvdG90eXBlLmVycj1mdW5jdGlvbih0KXt0aHJvdyBuZXcgU3ludGF4RXJyb3IodCsiIChpbiBjb250ZW50IGV4cHJlc3Npb24gJyIrdGhpcy5zdHJpbmcrIicpIil9LE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKEwucHJvdG90eXBlLEopO3ZhciBpdD1mdW5jdGlvbih0LGUsbil7dGhpcy5uYW1lPXQsdGhpcy5zY2hlbWE9ZSx0aGlzLnNwZWM9bix0aGlzLmdyb3Vwcz1uLmdyb3VwP24uZ3JvdXAuc3BsaXQoIiAiKTpbXSx0aGlzLmF0dHJzPW90KG4uYXR0cnMpLHRoaXMuZGVmYXVsdEF0dHJzPW50KHRoaXMuYXR0cnMpLHRoaXMuY29udGVudE1hdGNoPW51bGwsdGhpcy5tYXJrU2V0PW51bGwsdGhpcy5pbmxpbmVDb250ZW50PW51bGwsdGhpcy5pc0Jsb2NrPSEobi5pbmxpbmV8fCJ0ZXh0Ij09dCksdGhpcy5pc1RleHQ9InRleHQiPT10fSxzdD17aXNJbmxpbmU6e30saXNUZXh0YmxvY2s6e30saXNMZWFmOnt9LGlzQXRvbTp7fX07c3QuaXNJbmxpbmUuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIXRoaXMuaXNCbG9ja30sc3QuaXNUZXh0YmxvY2suZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuaXNCbG9jayYmdGhpcy5pbmxpbmVDb250ZW50fSxzdC5pc0xlYWYuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY29udGVudE1hdGNoPT0kLmVtcHR5fSxzdC5pc0F0b20uZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuaXNMZWFmfHx0aGlzLnNwZWMuYXRvbX0saXQucHJvdG90eXBlLmhhc1JlcXVpcmVkQXR0cnM9ZnVuY3Rpb24odCl7dmFyIGU9dGhpcztmb3IodmFyIG4gaW4gZS5hdHRycylpZihlLmF0dHJzW25dLmlzUmVxdWlyZWQmJighdHx8IShuIGluIHQpKSlyZXR1cm4hMDtyZXR1cm4hMX0saXQucHJvdG90eXBlLmNvbXBhdGlibGVDb250ZW50PWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzPT10fHx0aGlzLmNvbnRlbnRNYXRjaC5jb21wYXRpYmxlKHQuY29udGVudE1hdGNoKX0saXQucHJvdG90eXBlLmNvbXB1dGVBdHRycz1mdW5jdGlvbih0KXtyZXR1cm4hdCYmdGhpcy5kZWZhdWx0QXR0cnM/dGhpcy5kZWZhdWx0QXR0cnM6cnQodGhpcy5hdHRycyx0KX0saXQucHJvdG90eXBlLmNyZWF0ZT1mdW5jdGlvbih0LGUsbil7aWYodGhpcy5pc1RleHQpdGhyb3cgbmV3IEVycm9yKCJOb2RlVHlwZS5jcmVhdGUgY2FuJ3QgY29uc3RydWN0IHRleHQgbm9kZXMiKTtyZXR1cm4gbmV3IF8odGhpcyx0aGlzLmNvbXB1dGVBdHRycyh0KSxhLmZyb20oZSksaC5zZXRGcm9tKG4pKX0saXQucHJvdG90eXBlLmNyZWF0ZUNoZWNrZWQ9ZnVuY3Rpb24odCxlLG4pe2lmKGU9YS5mcm9tKGUpLCF0aGlzLnZhbGlkQ29udGVudChlKSl0aHJvdyBuZXcgUmFuZ2VFcnJvcigiSW52YWxpZCBjb250ZW50IGZvciBub2RlICIrdGhpcy5uYW1lKTtyZXR1cm4gbmV3IF8odGhpcyx0aGlzLmNvbXB1dGVBdHRycyh0KSxlLGguc2V0RnJvbShuKSl9LGl0LnByb3RvdHlwZS5jcmVhdGVBbmRGaWxsPWZ1bmN0aW9uKHQsZSxuKXtpZih0PXRoaXMuY29tcHV0ZUF0dHJzKHQpLGU9YS5mcm9tKGUpLGUuc2l6ZSl7dmFyIHI9dGhpcy5jb250ZW50TWF0Y2guZmlsbEJlZm9yZShlKTtpZighcilyZXR1cm4gbnVsbDtlPXIuYXBwZW5kKGUpfXZhciBvPXRoaXMuY29udGVudE1hdGNoLm1hdGNoRnJhZ21lbnQoZSkuZmlsbEJlZm9yZShhLmVtcHR5LCEwKTtyZXR1cm4gbz9uZXcgXyh0aGlzLHQsZS5hcHBlbmQobyksaC5zZXRGcm9tKG4pKTpudWxsfSxpdC5wcm90b3R5cGUudmFsaWRDb250ZW50PWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMsbj10aGlzLmNvbnRlbnRNYXRjaC5tYXRjaEZyYWdtZW50KHQpO2lmKCFufHwhbi52YWxpZEVuZClyZXR1cm4hMTtmb3IodmFyIHI9MDtyPHQuY2hpbGRDb3VudDtyKyspaWYoIWUuYWxsb3dzTWFya3ModC5jaGlsZChyKS5tYXJrcykpcmV0dXJuITE7cmV0dXJuITB9LGl0LnByb3RvdHlwZS5hbGxvd3NNYXJrVHlwZT1mdW5jdGlvbih0KXtyZXR1cm4gbnVsbD09dGhpcy5tYXJrU2V0fHx0aGlzLm1hcmtTZXQuaW5kZXhPZih0KT4tMX0saXQucHJvdG90eXBlLmFsbG93c01hcmtzPWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXM7aWYobnVsbD09dGhpcy5tYXJrU2V0KXJldHVybiEwO2Zvcih2YXIgbj0wO248dC5sZW5ndGg7bisrKWlmKCFlLmFsbG93c01hcmtUeXBlKHRbbl0udHlwZSkpcmV0dXJuITE7cmV0dXJuITB9LGl0LnByb3RvdHlwZS5hbGxvd2VkTWFya3M9ZnVuY3Rpb24odCl7dmFyIGUsbj10aGlzO2lmKG51bGw9PXRoaXMubWFya1NldClyZXR1cm4gdDtmb3IodmFyIHI9MDtyPHQubGVuZ3RoO3IrKyluLmFsbG93c01hcmtUeXBlKHRbcl0udHlwZSk/ZSYmZS5wdXNoKHRbcl0pOmV8fChlPXQuc2xpY2UoMCxyKSk7cmV0dXJuIGU/ZS5sZW5ndGg/ZTpoLmVtcHR5OnR9LGl0LmNvbXBpbGU9ZnVuY3Rpb24odCxlKXt2YXIgbj1PYmplY3QuY3JlYXRlKG51bGwpO3QuZm9yRWFjaCgoZnVuY3Rpb24odCxyKXtyZXR1cm4gblt0XT1uZXcgaXQodCxlLHIpfSkpO3ZhciByPWUuc3BlYy50b3BOb2RlfHwiZG9jIjtpZighbltyXSl0aHJvdyBuZXcgUmFuZ2VFcnJvcigiU2NoZW1hIGlzIG1pc3NpbmcgaXRzIHRvcCBub2RlIHR5cGUgKCciK3IrIicpIik7aWYoIW4udGV4dCl0aHJvdyBuZXcgUmFuZ2VFcnJvcigiRXZlcnkgc2NoZW1hIG5lZWRzIGEgJ3RleHQnIHR5cGUiKTtmb3IodmFyIG8gaW4gbi50ZXh0LmF0dHJzKXRocm93IG5ldyBSYW5nZUVycm9yKCJUaGUgdGV4dCBub2RlIHR5cGUgc2hvdWxkIG5vdCBoYXZlIGF0dHJpYnV0ZXMiKTtyZXR1cm4gbn0sT2JqZWN0LmRlZmluZVByb3BlcnRpZXMoaXQucHJvdG90eXBlLHN0KTt2YXIgYXQ9ZnVuY3Rpb24odCl7dGhpcy5oYXNEZWZhdWx0PU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbCh0LCJkZWZhdWx0IiksdGhpcy5kZWZhdWx0PXQuZGVmYXVsdH0sY3Q9e2lzUmVxdWlyZWQ6e319O2N0LmlzUmVxdWlyZWQuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIXRoaXMuaGFzRGVmYXVsdH0sT2JqZWN0LmRlZmluZVByb3BlcnRpZXMoYXQucHJvdG90eXBlLGN0KTt2YXIgbHQ9ZnVuY3Rpb24odCxlLG4scil7dGhpcy5uYW1lPXQsdGhpcy5zY2hlbWE9bix0aGlzLnNwZWM9cix0aGlzLmF0dHJzPW90KHIuYXR0cnMpLHRoaXMucmFuaz1lLHRoaXMuZXhjbHVkZWQ9bnVsbDt2YXIgbz1udCh0aGlzLmF0dHJzKTt0aGlzLmluc3RhbmNlPW8mJm5ldyBoKHRoaXMsbyl9O2x0LnByb3RvdHlwZS5jcmVhdGU9ZnVuY3Rpb24odCl7cmV0dXJuIXQmJnRoaXMuaW5zdGFuY2U/dGhpcy5pbnN0YW5jZTpuZXcgaCh0aGlzLHJ0KHRoaXMuYXR0cnMsdCkpfSxsdC5jb21waWxlPWZ1bmN0aW9uKHQsZSl7dmFyIG49T2JqZWN0LmNyZWF0ZShudWxsKSxyPTA7cmV0dXJuIHQuZm9yRWFjaCgoZnVuY3Rpb24odCxvKXtyZXR1cm4gblt0XT1uZXcgbHQodCxyKyssZSxvKX0pKSxufSxsdC5wcm90b3R5cGUucmVtb3ZlRnJvbVNldD1mdW5jdGlvbih0KXtmb3IodmFyIGU9dGhpcyxuPTA7bjx0Lmxlbmd0aDtuKyspaWYodFtuXS50eXBlPT1lKXJldHVybiB0LnNsaWNlKDAsbikuY29uY2F0KHQuc2xpY2UobisxKSk7cmV0dXJuIHR9LGx0LnByb3RvdHlwZS5pc0luU2V0PWZ1bmN0aW9uKHQpe2Zvcih2YXIgZT10aGlzLG49MDtuPHQubGVuZ3RoO24rKylpZih0W25dLnR5cGU9PWUpcmV0dXJuIHRbbl19LGx0LnByb3RvdHlwZS5leGNsdWRlcz1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5leGNsdWRlZC5pbmRleE9mKHQpPi0xfTt2YXIgcHQ9ZnVuY3Rpb24odCl7dmFyIGU9dGhpcztmb3IodmFyIG4gaW4gdGhpcy5zcGVjPXt9LHQpZS5zcGVjW25dPXRbbl07dGhpcy5zcGVjLm5vZGVzPW8uZnJvbSh0Lm5vZGVzKSx0aGlzLnNwZWMubWFya3M9by5mcm9tKHQubWFya3MpLHRoaXMubm9kZXM9aXQuY29tcGlsZSh0aGlzLnNwZWMubm9kZXMsdGhpcyksdGhpcy5tYXJrcz1sdC5jb21waWxlKHRoaXMuc3BlYy5tYXJrcyx0aGlzKTt2YXIgcj1PYmplY3QuY3JlYXRlKG51bGwpO2Zvcih2YXIgaSBpbiBlLm5vZGVzKXtpZihpIGluIGUubWFya3MpdGhyb3cgbmV3IFJhbmdlRXJyb3IoaSsiIGNhbiBub3QgYmUgYm90aCBhIG5vZGUgYW5kIGEgbWFyayIpO3ZhciBzPWUubm9kZXNbaV0sYT1zLnNwZWMuY29udGVudHx8IiIsYz1zLnNwZWMubWFya3M7cy5jb250ZW50TWF0Y2g9clthXXx8KHJbYV09JC5wYXJzZShhLGUubm9kZXMpKSxzLmlubGluZUNvbnRlbnQ9cy5jb250ZW50TWF0Y2guaW5saW5lQ29udGVudCxzLm1hcmtTZXQ9Il8iPT1jP251bGw6Yz91dChlLGMuc3BsaXQoIiAiKSk6IiIhPWMmJnMuaW5saW5lQ29udGVudD9udWxsOltdfWZvcih2YXIgbCBpbiBlLm1hcmtzKXt2YXIgcD1lLm1hcmtzW2xdLHU9cC5zcGVjLmV4Y2x1ZGVzO3AuZXhjbHVkZWQ9bnVsbD09dT9bcF06IiI9PXU/W106dXQoZSx1LnNwbGl0KCIgIikpfXRoaXMubm9kZUZyb21KU09OPXRoaXMubm9kZUZyb21KU09OLmJpbmQodGhpcyksdGhpcy5tYXJrRnJvbUpTT049dGhpcy5tYXJrRnJvbUpTT04uYmluZCh0aGlzKSx0aGlzLnRvcE5vZGVUeXBlPXRoaXMubm9kZXNbdGhpcy5zcGVjLnRvcE5vZGV8fCJkb2MiXSx0aGlzLmNhY2hlZD1PYmplY3QuY3JlYXRlKG51bGwpLHRoaXMuY2FjaGVkLndyYXBwaW5ncz1PYmplY3QuY3JlYXRlKG51bGwpfTtmdW5jdGlvbiB1dCh0LGUpe2Zvcih2YXIgbj1bXSxyPTA7cjxlLmxlbmd0aDtyKyspe3ZhciBvPWVbcl0saT10Lm1hcmtzW29dLHM9aTtpZihpKW4ucHVzaChpKTtlbHNlIGZvcih2YXIgYSBpbiB0Lm1hcmtzKXt2YXIgYz10Lm1hcmtzW2FdOygiXyI9PW98fGMuc3BlYy5ncm91cCYmYy5zcGVjLmdyb3VwLnNwbGl0KCIgIikuaW5kZXhPZihvKT4tMSkmJm4ucHVzaChzPWMpfWlmKCFzKXRocm93IG5ldyBTeW50YXhFcnJvcigiVW5rbm93biBtYXJrIHR5cGU6ICciK2Vbcl0rIiciKX1yZXR1cm4gbn1wdC5wcm90b3R5cGUubm9kZT1mdW5jdGlvbih0LGUsbixyKXtpZigic3RyaW5nIj09dHlwZW9mIHQpdD10aGlzLm5vZGVUeXBlKHQpO2Vsc2V7aWYoISh0IGluc3RhbmNlb2YgaXQpKXRocm93IG5ldyBSYW5nZUVycm9yKCJJbnZhbGlkIG5vZGUgdHlwZTogIit0KTtpZih0LnNjaGVtYSE9dGhpcyl0aHJvdyBuZXcgUmFuZ2VFcnJvcigiTm9kZSB0eXBlIGZyb20gZGlmZmVyZW50IHNjaGVtYSB1c2VkICgiK3QubmFtZSsiKSIpfXJldHVybiB0LmNyZWF0ZUNoZWNrZWQoZSxuLHIpfSxwdC5wcm90b3R5cGUudGV4dD1mdW5jdGlvbih0LGUpe3ZhciBuPXRoaXMubm9kZXMudGV4dDtyZXR1cm4gbmV3IEIobixuLmRlZmF1bHRBdHRycyx0LGguc2V0RnJvbShlKSl9LHB0LnByb3RvdHlwZS5tYXJrPWZ1bmN0aW9uKHQsZSl7cmV0dXJuInN0cmluZyI9PXR5cGVvZiB0JiYodD10aGlzLm1hcmtzW3RdKSx0LmNyZWF0ZShlKX0scHQucHJvdG90eXBlLm5vZGVGcm9tSlNPTj1mdW5jdGlvbih0KXtyZXR1cm4gXy5mcm9tSlNPTih0aGlzLHQpfSxwdC5wcm90b3R5cGUubWFya0Zyb21KU09OPWZ1bmN0aW9uKHQpe3JldHVybiBoLmZyb21KU09OKHRoaXMsdCl9LHB0LnByb3RvdHlwZS5ub2RlVHlwZT1mdW5jdGlvbih0KXt2YXIgZT10aGlzLm5vZGVzW3RdO2lmKCFlKXRocm93IG5ldyBSYW5nZUVycm9yKCJVbmtub3duIG5vZGUgdHlwZTogIit0KTtyZXR1cm4gZX07dmFyIGh0PWZ1bmN0aW9uKHQsZSl7dmFyIG49dGhpczt0aGlzLnNjaGVtYT10LHRoaXMucnVsZXM9ZSx0aGlzLnRhZ3M9W10sdGhpcy5zdHlsZXM9W10sZS5mb3JFYWNoKChmdW5jdGlvbih0KXt0LnRhZz9uLnRhZ3MucHVzaCh0KTp0LnN0eWxlJiZuLnN0eWxlcy5wdXNoKHQpfSkpfTtodC5wcm90b3R5cGUucGFyc2U9ZnVuY3Rpb24odCxlKXt2b2lkIDA9PT1lJiYoZT17fSk7dmFyIG49bmV3IGJ0KHRoaXMsZSwhMSk7cmV0dXJuIG4uYWRkQWxsKHQsbnVsbCxlLmZyb20sZS50byksbi5maW5pc2goKX0saHQucHJvdG90eXBlLnBhcnNlU2xpY2U9ZnVuY3Rpb24odCxlKXt2b2lkIDA9PT1lJiYoZT17fSk7dmFyIG49bmV3IGJ0KHRoaXMsZSwhMCk7cmV0dXJuIG4uYWRkQWxsKHQsbnVsbCxlLmZyb20sZS50byksZC5tYXhPcGVuKG4uZmluaXNoKCkpfSxodC5wcm90b3R5cGUubWF0Y2hUYWc9ZnVuY3Rpb24odCxlKXtmb3IodmFyIG49dGhpcyxyPTA7cjx0aGlzLnRhZ3MubGVuZ3RoO3IrKyl7dmFyIG89bi50YWdzW3JdO2lmKEN0KHQsby50YWcpJiYodm9pZCAwPT09by5uYW1lc3BhY2V8fHQubmFtZXNwYWNlVVJJPT1vLm5hbWVzcGFjZSkmJighby5jb250ZXh0fHxlLm1hdGNoZXNDb250ZXh0KG8uY29udGV4dCkpKXtpZihvLmdldEF0dHJzKXt2YXIgaT1vLmdldEF0dHJzKHQpO2lmKCExPT09aSljb250aW51ZTtvLmF0dHJzPWl9cmV0dXJuIG99fX0saHQucHJvdG90eXBlLm1hdGNoU3R5bGU9ZnVuY3Rpb24odCxlLG4pe2Zvcih2YXIgcj10aGlzLG89MDtvPHRoaXMuc3R5bGVzLmxlbmd0aDtvKyspe3ZhciBpPXIuc3R5bGVzW29dO2lmKCEoMCE9aS5zdHlsZS5pbmRleE9mKHQpfHxpLmNvbnRleHQmJiFuLm1hdGNoZXNDb250ZXh0KGkuY29udGV4dCl8fGkuc3R5bGUubGVuZ3RoPnQubGVuZ3RoJiYoNjEhPWkuc3R5bGUuY2hhckNvZGVBdCh0Lmxlbmd0aCl8fGkuc3R5bGUuc2xpY2UodC5sZW5ndGgrMSkhPWUpKSl7aWYoaS5nZXRBdHRycyl7dmFyIHM9aS5nZXRBdHRycyhlKTtpZighMT09PXMpY29udGludWU7aS5hdHRycz1zfXJldHVybiBpfX19LGh0LnNjaGVtYVJ1bGVzPWZ1bmN0aW9uKHQpe3ZhciBlPVtdO2Z1bmN0aW9uIG4odCl7Zm9yKHZhciBuPW51bGw9PXQucHJpb3JpdHk/NTA6dC5wcmlvcml0eSxyPTA7cjxlLmxlbmd0aDtyKyspe3ZhciBvPWVbcl0saT1udWxsPT1vLnByaW9yaXR5PzUwOm8ucHJpb3JpdHk7aWYoaTxuKWJyZWFrfWUuc3BsaWNlKHIsMCx0KX12YXIgcj1mdW5jdGlvbihlKXt2YXIgcj10Lm1hcmtzW2VdLnNwZWMucGFyc2VET007ciYmci5mb3JFYWNoKChmdW5jdGlvbih0KXtuKHQ9TXQodCkpLHQubWFyaz1lfSkpfTtmb3IodmFyIG8gaW4gdC5tYXJrcylyKG8pO3ZhciBpPWZ1bmN0aW9uKGUpe3ZhciByPXQubm9kZXNbc10uc3BlYy5wYXJzZURPTTtyJiZyLmZvckVhY2goKGZ1bmN0aW9uKHQpe24odD1NdCh0KSksdC5ub2RlPXN9KSl9O2Zvcih2YXIgcyBpbiB0Lm5vZGVzKWkobyk7cmV0dXJuIGV9LGh0LmZyb21TY2hlbWE9ZnVuY3Rpb24odCl7cmV0dXJuIHQuY2FjaGVkLmRvbVBhcnNlcnx8KHQuY2FjaGVkLmRvbVBhcnNlcj1uZXcgaHQodCxodC5zY2hlbWFSdWxlcyh0KSkpfTt2YXIgZnQ9e2FkZHJlc3M6ITAsYXJ0aWNsZTohMCxhc2lkZTohMCxibG9ja3F1b3RlOiEwLGNhbnZhczohMCxkZDohMCxkaXY6ITAsZGw6ITAsZmllbGRzZXQ6ITAsZmlnY2FwdGlvbjohMCxmaWd1cmU6ITAsZm9vdGVyOiEwLGZvcm06ITAsaDE6ITAsaDI6ITAsaDM6ITAsaDQ6ITAsaDU6ITAsaDY6ITAsaGVhZGVyOiEwLGhncm91cDohMCxocjohMCxsaTohMCxub3NjcmlwdDohMCxvbDohMCxvdXRwdXQ6ITAscDohMCxwcmU6ITAsc2VjdGlvbjohMCx0YWJsZTohMCx0Zm9vdDohMCx1bDohMH0sZHQ9e2hlYWQ6ITAsbm9zY3JpcHQ6ITAsb2JqZWN0OiEwLHNjcmlwdDohMCxzdHlsZTohMCx0aXRsZTohMH0sdnQ9e29sOiEwLHVsOiEwfSxtdD0xLHl0PTIsZ3Q9NDtmdW5jdGlvbiB3dCh0KXtyZXR1cm4odD9tdDowKXwoImZ1bGwiPT09dD95dDowKX12YXIgeHQ9ZnVuY3Rpb24odCxlLG4scixvLGkpe3RoaXMudHlwZT10LHRoaXMuYXR0cnM9ZSx0aGlzLnNvbGlkPXIsdGhpcy5tYXRjaD1vfHwoaSZndD9udWxsOnQuY29udGVudE1hdGNoKSx0aGlzLm9wdGlvbnM9aSx0aGlzLmNvbnRlbnQ9W10sdGhpcy5tYXJrcz1uLHRoaXMuYWN0aXZlTWFya3M9aC5ub25lfTt4dC5wcm90b3R5cGUuZmluZFdyYXBwaW5nPWZ1bmN0aW9uKHQpe2lmKCF0aGlzLm1hdGNoKXtpZighdGhpcy50eXBlKXJldHVybltdO3ZhciBlPXRoaXMudHlwZS5jb250ZW50TWF0Y2guZmlsbEJlZm9yZShhLmZyb20odCkpO2lmKCFlKXt2YXIgbixyPXRoaXMudHlwZS5jb250ZW50TWF0Y2g7cmV0dXJuKG49ci5maW5kV3JhcHBpbmcodC50eXBlKSk/KHRoaXMubWF0Y2g9cixuKTpudWxsfXRoaXMubWF0Y2g9dGhpcy50eXBlLmNvbnRlbnRNYXRjaC5tYXRjaEZyYWdtZW50KGUpfXJldHVybiB0aGlzLm1hdGNoLmZpbmRXcmFwcGluZyh0LnR5cGUpfSx4dC5wcm90b3R5cGUuZmluaXNoPWZ1bmN0aW9uKHQpe2lmKCEodGhpcy5vcHRpb25zJm10KSl7dmFyIGUsbj10aGlzLmNvbnRlbnRbdGhpcy5jb250ZW50Lmxlbmd0aC0xXTtuJiZuLmlzVGV4dCYmKGU9L1sgXHRcclxuXHUwMDBjXSskLy5leGVjKG4udGV4dCkpJiYobi50ZXh0Lmxlbmd0aD09ZVswXS5sZW5ndGg/dGhpcy5jb250ZW50LnBvcCgpOnRoaXMuY29udGVudFt0aGlzLmNvbnRlbnQubGVuZ3RoLTFdPW4ud2l0aFRleHQobi50ZXh0LnNsaWNlKDAsbi50ZXh0Lmxlbmd0aC1lWzBdLmxlbmd0aCkpKX12YXIgcj1hLmZyb20odGhpcy5jb250ZW50KTtyZXR1cm4hdCYmdGhpcy5tYXRjaCYmKHI9ci5hcHBlbmQodGhpcy5tYXRjaC5maWxsQmVmb3JlKGEuZW1wdHksITApKSksdGhpcy50eXBlP3RoaXMudHlwZS5jcmVhdGUodGhpcy5hdHRycyxyLHRoaXMubWFya3MpOnJ9O3ZhciBidD1mdW5jdGlvbih0LGUsbil7dGhpcy5wYXJzZXI9dCx0aGlzLm9wdGlvbnM9ZSx0aGlzLmlzT3Blbj1uLHRoaXMucGVuZGluZ01hcmtzPVtdO3ZhciByLG89ZS50b3BOb2RlLGk9d3QoZS5wcmVzZXJ2ZVdoaXRlc3BhY2UpfChuP2d0OjApO3I9bz9uZXcgeHQoby50eXBlLG8uYXR0cnMsaC5ub25lLCEwLGUudG9wTWF0Y2h8fG8udHlwZS5jb250ZW50TWF0Y2gsaSk6bmV3IHh0KG4/bnVsbDp0LnNjaGVtYS50b3BOb2RlVHlwZSxudWxsLGgubm9uZSwhMCxudWxsLGkpLHRoaXMubm9kZXM9W3JdLHRoaXMub3Blbj0wLHRoaXMuZmluZD1lLmZpbmRQb3NpdGlvbnMsdGhpcy5uZWVkc0Jsb2NrPSExfSxrdD17dG9wOnt9LGN1cnJlbnRQb3M6e319O2Z1bmN0aW9uIFN0KHQpe2Zvcih2YXIgZT10LmZpcnN0Q2hpbGQsbj1udWxsO2U7ZT1lLm5leHRTaWJsaW5nKXt2YXIgcj0xPT1lLm5vZGVUeXBlP2Uubm9kZU5hbWUudG9Mb3dlckNhc2UoKTpudWxsO3ImJnZ0Lmhhc093blByb3BlcnR5KHIpJiZuPyhuLmFwcGVuZENoaWxkKGUpLGU9bik6ImxpIj09cj9uPWU6ciYmKG49bnVsbCl9fWZ1bmN0aW9uIEN0KHQsZSl7cmV0dXJuKHQubWF0Y2hlc3x8dC5tc01hdGNoZXNTZWxlY3Rvcnx8dC53ZWJraXRNYXRjaGVzU2VsZWN0b3J8fHQubW96TWF0Y2hlc1NlbGVjdG9yKS5jYWxsKHQsZSl9ZnVuY3Rpb24gT3QodCl7dmFyIGUsbj0vXHMqKFtcdy1dKylccyo6XHMqKFteO10rKS9nLHI9W107d2hpbGUoZT1uLmV4ZWModCkpci5wdXNoKGVbMV0sZVsyXS50cmltKCkpO3JldHVybiByfWZ1bmN0aW9uIE10KHQpe3ZhciBlPXt9O2Zvcih2YXIgbiBpbiB0KWVbbl09dFtuXTtyZXR1cm4gZX1rdC50b3AuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubm9kZXNbdGhpcy5vcGVuXX0sYnQucHJvdG90eXBlLmFkZERPTT1mdW5jdGlvbih0KXt2YXIgZT10aGlzO2lmKDM9PXQubm9kZVR5cGUpdGhpcy5hZGRUZXh0Tm9kZSh0KTtlbHNlIGlmKDE9PXQubm9kZVR5cGUpe3ZhciBuPXQuZ2V0QXR0cmlidXRlKCJzdHlsZSIpLHI9bj90aGlzLnJlYWRTdHlsZXMoT3QobikpOm51bGw7aWYobnVsbCE9cilmb3IodmFyIG89MDtvPHIubGVuZ3RoO28rKyllLmFkZFBlbmRpbmdNYXJrKHJbb10pO2lmKHRoaXMuYWRkRWxlbWVudCh0KSxudWxsIT1yKWZvcih2YXIgaT0wO2k8ci5sZW5ndGg7aSsrKWUucmVtb3ZlUGVuZGluZ01hcmsocltpXSl9fSxidC5wcm90b3R5cGUuYWRkVGV4dE5vZGU9ZnVuY3Rpb24odCl7dmFyIGU9dC5ub2RlVmFsdWUsbj10aGlzLnRvcDtpZigobi50eXBlP24udHlwZS5pbmxpbmVDb250ZW50Om4uY29udGVudC5sZW5ndGgmJm4uY29udGVudFswXS5pc0lubGluZSl8fC9bXiBcdFxyXG5cdTAwMGNdLy50ZXN0KGUpKXtpZihuLm9wdGlvbnMmbXQpbi5vcHRpb25zJnl0fHwoZT1lLnJlcGxhY2UoL1xyP1xufFxyL2csIiAiKSk7ZWxzZSBpZihlPWUucmVwbGFjZSgvWyBcdFxyXG5cdTAwMGNdKy9nLCIgIiksL15bIFx0XHJcblx1MDAwY10vLnRlc3QoZSkmJnRoaXMub3Blbj09dGhpcy5ub2Rlcy5sZW5ndGgtMSl7dmFyIHI9bi5jb250ZW50W24uY29udGVudC5sZW5ndGgtMV0sbz10LnByZXZpb3VzU2libGluZzsoIXJ8fG8mJiJCUiI9PW8ubm9kZU5hbWV8fHIuaXNUZXh0JiYvWyBcdFxyXG5cdTAwMGNdJC8udGVzdChyLnRleHQpKSYmKGU9ZS5zbGljZSgxKSl9ZSYmdGhpcy5pbnNlcnROb2RlKHRoaXMucGFyc2VyLnNjaGVtYS50ZXh0KGUpKSx0aGlzLmZpbmRJblRleHQodCl9ZWxzZSB0aGlzLmZpbmRJbnNpZGUodCl9LGJ0LnByb3RvdHlwZS5hZGRFbGVtZW50PWZ1bmN0aW9uKHQpe3ZhciBlPXQubm9kZU5hbWUudG9Mb3dlckNhc2UoKTt2dC5oYXNPd25Qcm9wZXJ0eShlKSYmU3QodCk7dmFyIG49dGhpcy5vcHRpb25zLnJ1bGVGcm9tTm9kZSYmdGhpcy5vcHRpb25zLnJ1bGVGcm9tTm9kZSh0KXx8dGhpcy5wYXJzZXIubWF0Y2hUYWcodCx0aGlzKTtpZihuP24uaWdub3JlOmR0Lmhhc093blByb3BlcnR5KGUpKXRoaXMuZmluZEluc2lkZSh0KTtlbHNlIGlmKCFufHxuLnNraXApe24mJm4uc2tpcC5ub2RlVHlwZSYmKHQ9bi5za2lwKTt2YXIgcixvPXRoaXMudG9wLGk9dGhpcy5uZWVkc0Jsb2NrO2lmKGZ0Lmhhc093blByb3BlcnR5KGUpKXI9ITAsby50eXBlfHwodGhpcy5uZWVkc0Jsb2NrPSEwKTtlbHNlIGlmKCF0LmZpcnN0Q2hpbGQpcmV0dXJuIHZvaWQgdGhpcy5sZWFmRmFsbGJhY2sodCk7dGhpcy5hZGRBbGwodCksciYmdGhpcy5zeW5jKG8pLHRoaXMubmVlZHNCbG9jaz1pfWVsc2UgdGhpcy5hZGRFbGVtZW50QnlSdWxlKHQsbil9LGJ0LnByb3RvdHlwZS5sZWFmRmFsbGJhY2s9ZnVuY3Rpb24odCl7IkJSIj09dC5ub2RlTmFtZSYmdGhpcy50b3AudHlwZSYmdGhpcy50b3AudHlwZS5pbmxpbmVDb250ZW50JiZ0aGlzLmFkZFRleHROb2RlKHQub3duZXJEb2N1bWVudC5jcmVhdGVUZXh0Tm9kZSgiXG4iKSl9LGJ0LnByb3RvdHlwZS5yZWFkU3R5bGVzPWZ1bmN0aW9uKHQpe2Zvcih2YXIgZT10aGlzLG49aC5ub25lLHI9MDtyPHQubGVuZ3RoO3IrPTIpe3ZhciBvPWUucGFyc2VyLm1hdGNoU3R5bGUodFtyXSx0W3IrMV0sZSk7aWYobyl7aWYoby5pZ25vcmUpcmV0dXJuIG51bGw7bj1lLnBhcnNlci5zY2hlbWEubWFya3Nbby5tYXJrXS5jcmVhdGUoby5hdHRycykuYWRkVG9TZXQobil9fXJldHVybiBufSxidC5wcm90b3R5cGUuYWRkRWxlbWVudEJ5UnVsZT1mdW5jdGlvbih0LGUpe3ZhciBuLHIsbyxpLHM9dGhpcztlLm5vZGU/KHI9dGhpcy5wYXJzZXIuc2NoZW1hLm5vZGVzW2Uubm9kZV0sci5pc0xlYWY/dGhpcy5pbnNlcnROb2RlKHIuY3JlYXRlKGUuYXR0cnMpKXx8dGhpcy5sZWFmRmFsbGJhY2sodCk6bj10aGlzLmVudGVyKHIsZS5hdHRycyxlLnByZXNlcnZlV2hpdGVzcGFjZSkpOihvPXRoaXMucGFyc2VyLnNjaGVtYS5tYXJrc1tlLm1hcmtdLGk9by5jcmVhdGUoZS5hdHRycyksdGhpcy5hZGRQZW5kaW5nTWFyayhpKSk7dmFyIGE9dGhpcy50b3A7aWYociYmci5pc0xlYWYpdGhpcy5maW5kSW5zaWRlKHQpO2Vsc2UgaWYoZS5nZXRDb250ZW50KXRoaXMuZmluZEluc2lkZSh0KSxlLmdldENvbnRlbnQodCx0aGlzLnBhcnNlci5zY2hlbWEpLmZvckVhY2goKGZ1bmN0aW9uKHQpe3JldHVybiBzLmluc2VydE5vZGUodCl9KSk7ZWxzZXt2YXIgYz1lLmNvbnRlbnRFbGVtZW50OyJzdHJpbmciPT10eXBlb2YgYz9jPXQucXVlcnlTZWxlY3RvcihjKToiZnVuY3Rpb24iPT10eXBlb2YgYyYmKGM9Yyh0KSksY3x8KGM9dCksdGhpcy5maW5kQXJvdW5kKHQsYywhMCksdGhpcy5hZGRBbGwoYyxuKX1uJiYodGhpcy5zeW5jKGEpLHRoaXMub3Blbi0tKSxpJiZ0aGlzLnJlbW92ZVBlbmRpbmdNYXJrKGkpfSxidC5wcm90b3R5cGUuYWRkQWxsPWZ1bmN0aW9uKHQsZSxuLHIpe2Zvcih2YXIgbz10aGlzLGk9bnx8MCxzPW4/dC5jaGlsZE5vZGVzW25dOnQuZmlyc3RDaGlsZCxhPW51bGw9PXI/bnVsbDp0LmNoaWxkTm9kZXNbcl07cyE9YTtzPXMubmV4dFNpYmxpbmcsKytpKW8uZmluZEF0UG9pbnQodCxpKSxvLmFkZERPTShzKSxlJiZmdC5oYXNPd25Qcm9wZXJ0eShzLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCkpJiZvLnN5bmMoZSk7dGhpcy5maW5kQXRQb2ludCh0LGkpfSxidC5wcm90b3R5cGUuZmluZFBsYWNlPWZ1bmN0aW9uKHQpe2Zvcih2YXIgZSxuLHI9dGhpcyxvPXRoaXMub3BlbjtvPj0wO28tLSl7dmFyIGk9ci5ub2Rlc1tvXSxzPWkuZmluZFdyYXBwaW5nKHQpO2lmKHMmJighZXx8ZS5sZW5ndGg+cy5sZW5ndGgpJiYoZT1zLG49aSwhcy5sZW5ndGgpKWJyZWFrO2lmKGkuc29saWQpYnJlYWt9aWYoIWUpcmV0dXJuITE7dGhpcy5zeW5jKG4pO2Zvcih2YXIgYT0wO2E8ZS5sZW5ndGg7YSsrKXIuZW50ZXJJbm5lcihlW2FdLG51bGwsITEpO3JldHVybiEwfSxidC5wcm90b3R5cGUuaW5zZXJ0Tm9kZT1mdW5jdGlvbih0KXtpZih0LmlzSW5saW5lJiZ0aGlzLm5lZWRzQmxvY2smJiF0aGlzLnRvcC50eXBlKXt2YXIgZT10aGlzLnRleHRibG9ja0Zyb21Db250ZXh0KCk7ZSYmdGhpcy5lbnRlcklubmVyKGUpfWlmKHRoaXMuZmluZFBsYWNlKHQpKXt0aGlzLmNsb3NlRXh0cmEoKTt2YXIgbj10aGlzLnRvcDt0aGlzLmFwcGx5UGVuZGluZ01hcmtzKG4pLG4ubWF0Y2gmJihuLm1hdGNoPW4ubWF0Y2gubWF0Y2hUeXBlKHQudHlwZSkpO2Zvcih2YXIgcj1uLmFjdGl2ZU1hcmtzLG89MDtvPHQubWFya3MubGVuZ3RoO28rKyluLnR5cGUmJiFuLnR5cGUuYWxsb3dzTWFya1R5cGUodC5tYXJrc1tvXS50eXBlKXx8KHI9dC5tYXJrc1tvXS5hZGRUb1NldChyKSk7cmV0dXJuIG4uY29udGVudC5wdXNoKHQubWFyayhyKSksITB9cmV0dXJuITF9LGJ0LnByb3RvdHlwZS5hcHBseVBlbmRpbmdNYXJrcz1mdW5jdGlvbih0KXtmb3IodmFyIGU9dGhpcyxuPTA7bjx0aGlzLnBlbmRpbmdNYXJrcy5sZW5ndGg7bisrKXt2YXIgcj1lLnBlbmRpbmdNYXJrc1tuXTt0LnR5cGUmJiF0LnR5cGUuYWxsb3dzTWFya1R5cGUoci50eXBlKXx8ci5pc0luU2V0KHQuYWN0aXZlTWFya3MpfHwodC5hY3RpdmVNYXJrcz1yLmFkZFRvU2V0KHQuYWN0aXZlTWFya3MpLGUucGVuZGluZ01hcmtzLnNwbGljZShuLS0sMSkpfX0sYnQucHJvdG90eXBlLmVudGVyPWZ1bmN0aW9uKHQsZSxuKXt2YXIgcj10aGlzLmZpbmRQbGFjZSh0LmNyZWF0ZShlKSk7cmV0dXJuIHImJih0aGlzLmFwcGx5UGVuZGluZ01hcmtzKHRoaXMudG9wKSx0aGlzLmVudGVySW5uZXIodCxlLCEwLG4pKSxyfSxidC5wcm90b3R5cGUuZW50ZXJJbm5lcj1mdW5jdGlvbih0LGUsbixyKXt0aGlzLmNsb3NlRXh0cmEoKTt2YXIgbz10aGlzLnRvcDtvLm1hdGNoPW8ubWF0Y2gmJm8ubWF0Y2gubWF0Y2hUeXBlKHQsZSk7dmFyIGk9bnVsbD09cj9vLm9wdGlvbnMmfmd0Ond0KHIpO28ub3B0aW9ucyZndCYmMD09by5jb250ZW50Lmxlbmd0aCYmKGl8PWd0KSx0aGlzLm5vZGVzLnB1c2gobmV3IHh0KHQsZSxvLmFjdGl2ZU1hcmtzLG4sbnVsbCxpKSksdGhpcy5vcGVuKyt9LGJ0LnByb3RvdHlwZS5jbG9zZUV4dHJhPWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMsbj10aGlzLm5vZGVzLmxlbmd0aC0xO2lmKG4+dGhpcy5vcGVuKXtmb3IoO24+dGhpcy5vcGVuO24tLSllLm5vZGVzW24tMV0uY29udGVudC5wdXNoKGUubm9kZXNbbl0uZmluaXNoKHQpKTt0aGlzLm5vZGVzLmxlbmd0aD10aGlzLm9wZW4rMX19LGJ0LnByb3RvdHlwZS5maW5pc2g9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5vcGVuPTAsdGhpcy5jbG9zZUV4dHJhKHRoaXMuaXNPcGVuKSx0aGlzLm5vZGVzWzBdLmZpbmlzaCh0aGlzLmlzT3Blbnx8dGhpcy5vcHRpb25zLnRvcE9wZW4pfSxidC5wcm90b3R5cGUuc3luYz1mdW5jdGlvbih0KXtmb3IodmFyIGU9dGhpcyxuPXRoaXMub3BlbjtuPj0wO24tLSlpZihlLm5vZGVzW25dPT10KXJldHVybiB2b2lkKGUub3Blbj1uKX0sYnQucHJvdG90eXBlLmFkZFBlbmRpbmdNYXJrPWZ1bmN0aW9uKHQpe3RoaXMucGVuZGluZ01hcmtzLnB1c2godCl9LGJ0LnByb3RvdHlwZS5yZW1vdmVQZW5kaW5nTWFyaz1mdW5jdGlvbih0KXt2YXIgZT10aGlzLnBlbmRpbmdNYXJrcy5sYXN0SW5kZXhPZih0KTtpZihlPi0xKXRoaXMucGVuZGluZ01hcmtzLnNwbGljZShlLDEpO2Vsc2V7dmFyIG49dGhpcy50b3A7bi5hY3RpdmVNYXJrcz10LnJlbW92ZUZyb21TZXQobi5hY3RpdmVNYXJrcyl9fSxrdC5jdXJyZW50UG9zLmdldD1mdW5jdGlvbigpe3ZhciB0PXRoaXM7dGhpcy5jbG9zZUV4dHJhKCk7Zm9yKHZhciBlPTAsbj10aGlzLm9wZW47bj49MDtuLS0pe2Zvcih2YXIgcj10Lm5vZGVzW25dLmNvbnRlbnQsbz1yLmxlbmd0aC0xO28+PTA7by0tKWUrPXJbb10ubm9kZVNpemU7biYmZSsrfXJldHVybiBlfSxidC5wcm90b3R5cGUuZmluZEF0UG9pbnQ9ZnVuY3Rpb24odCxlKXt2YXIgbj10aGlzO2lmKHRoaXMuZmluZClmb3IodmFyIHI9MDtyPHRoaXMuZmluZC5sZW5ndGg7cisrKW4uZmluZFtyXS5ub2RlPT10JiZuLmZpbmRbcl0ub2Zmc2V0PT1lJiYobi5maW5kW3JdLnBvcz1uLmN1cnJlbnRQb3MpfSxidC5wcm90b3R5cGUuZmluZEluc2lkZT1mdW5jdGlvbih0KXt2YXIgZT10aGlzO2lmKHRoaXMuZmluZClmb3IodmFyIG49MDtuPHRoaXMuZmluZC5sZW5ndGg7bisrKW51bGw9PWUuZmluZFtuXS5wb3MmJjE9PXQubm9kZVR5cGUmJnQuY29udGFpbnMoZS5maW5kW25dLm5vZGUpJiYoZS5maW5kW25dLnBvcz1lLmN1cnJlbnRQb3MpfSxidC5wcm90b3R5cGUuZmluZEFyb3VuZD1mdW5jdGlvbih0LGUsbil7dmFyIHI9dGhpcztpZih0IT1lJiZ0aGlzLmZpbmQpZm9yKHZhciBvPTA7bzx0aGlzLmZpbmQubGVuZ3RoO28rKylpZihudWxsPT1yLmZpbmRbb10ucG9zJiYxPT10Lm5vZGVUeXBlJiZ0LmNvbnRhaW5zKHIuZmluZFtvXS5ub2RlKSl7dmFyIGk9ZS5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbihyLmZpbmRbb10ubm9kZSk7aSYobj8yOjQpJiYoci5maW5kW29dLnBvcz1yLmN1cnJlbnRQb3MpfX0sYnQucHJvdG90eXBlLmZpbmRJblRleHQ9ZnVuY3Rpb24odCl7dmFyIGU9dGhpcztpZih0aGlzLmZpbmQpZm9yKHZhciBuPTA7bjx0aGlzLmZpbmQubGVuZ3RoO24rKyllLmZpbmRbbl0ubm9kZT09dCYmKGUuZmluZFtuXS5wb3M9ZS5jdXJyZW50UG9zLSh0Lm5vZGVWYWx1ZS5sZW5ndGgtZS5maW5kW25dLm9mZnNldCkpfSxidC5wcm90b3R5cGUubWF0Y2hlc0NvbnRleHQ9ZnVuY3Rpb24odCl7dmFyIGU9dGhpcztpZih0LmluZGV4T2YoInwiKT4tMSlyZXR1cm4gdC5zcGxpdCgvXHMqXHxccyovKS5zb21lKHRoaXMubWF0Y2hlc0NvbnRleHQsdGhpcyk7dmFyIG49dC5zcGxpdCgiLyIpLHI9dGhpcy5vcHRpb25zLmNvbnRleHQsbz0hdGhpcy5pc09wZW4mJighcnx8ci5wYXJlbnQudHlwZT09dGhpcy5ub2Rlc1swXS50eXBlKSxpPS0ocj9yLmRlcHRoKzE6MCkrKG8/MDoxKSxzPWZ1bmN0aW9uKHQsYSl7Zm9yKDt0Pj0wO3QtLSl7dmFyIGM9blt0XTtpZigiIj09Yyl7aWYodD09bi5sZW5ndGgtMXx8MD09dCljb250aW51ZTtmb3IoO2E+PWk7YS0tKWlmKHModC0xLGEpKXJldHVybiEwO3JldHVybiExfXZhciBsPWE+MHx8MD09YSYmbz9lLm5vZGVzW2FdLnR5cGU6ciYmYT49aT9yLm5vZGUoYS1pKS50eXBlOm51bGw7aWYoIWx8fGwubmFtZSE9YyYmLTE9PWwuZ3JvdXBzLmluZGV4T2YoYykpcmV0dXJuITE7YS0tfXJldHVybiEwfTtyZXR1cm4gcyhuLmxlbmd0aC0xLHRoaXMub3Blbil9LGJ0LnByb3RvdHlwZS50ZXh0YmxvY2tGcm9tQ29udGV4dD1mdW5jdGlvbigpe3ZhciB0PXRoaXMsZT10aGlzLm9wdGlvbnMuY29udGV4dDtpZihlKWZvcih2YXIgbj1lLmRlcHRoO24+PTA7bi0tKXt2YXIgcj1lLm5vZGUobikuY29udGVudE1hdGNoQXQoZS5pbmRleEFmdGVyKG4pKS5kZWZhdWx0VHlwZTtpZihyJiZyLmlzVGV4dGJsb2NrJiZyLmRlZmF1bHRBdHRycylyZXR1cm4gcn1mb3IodmFyIG8gaW4gdC5wYXJzZXIuc2NoZW1hLm5vZGVzKXt2YXIgaT10LnBhcnNlci5zY2hlbWEubm9kZXNbb107aWYoaS5pc1RleHRibG9jayYmaS5kZWZhdWx0QXR0cnMpcmV0dXJuIGl9fSxPYmplY3QuZGVmaW5lUHJvcGVydGllcyhidC5wcm90b3R5cGUsa3QpO3ZhciBUdD1mdW5jdGlvbih0LGUpe3RoaXMubm9kZXM9dHx8e30sdGhpcy5tYXJrcz1lfHx7fX07ZnVuY3Rpb24gTnQodCl7dmFyIGU9e307Zm9yKHZhciBuIGluIHQpe3ZhciByPXRbbl0uc3BlYy50b0RPTTtyJiYoZVtuXT1yKX1yZXR1cm4gZX1mdW5jdGlvbiBFdCh0KXtyZXR1cm4gdC5kb2N1bWVudHx8d2luZG93LmRvY3VtZW50fVR0LnByb3RvdHlwZS5zZXJpYWxpemVGcmFnbWVudD1mdW5jdGlvbih0LGUsbil7dmFyIHI9dGhpczt2b2lkIDA9PT1lJiYoZT17fSksbnx8KG49RXQoZSkuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpKTt2YXIgbz1uLGk9bnVsbDtyZXR1cm4gdC5mb3JFYWNoKChmdW5jdGlvbih0KXtpZihpfHx0Lm1hcmtzLmxlbmd0aCl7aXx8KGk9W10pO3ZhciBuPTAscz0wO3doaWxlKG48aS5sZW5ndGgmJnM8dC5tYXJrcy5sZW5ndGgpe3ZhciBhPXQubWFya3Nbc107aWYoci5tYXJrc1thLnR5cGUubmFtZV0pe2lmKCFhLmVxKGlbbl0pfHwhMT09PWEudHlwZS5zcGVjLnNwYW5uaW5nKWJyZWFrO24rPTIscysrfWVsc2UgcysrfXdoaWxlKG48aS5sZW5ndGgpbz1pLnBvcCgpLGkucG9wKCk7d2hpbGUoczx0Lm1hcmtzLmxlbmd0aCl7dmFyIGM9dC5tYXJrc1tzKytdLGw9ci5zZXJpYWxpemVNYXJrKGMsdC5pc0lubGluZSxlKTtsJiYoaS5wdXNoKGMsbyksby5hcHBlbmRDaGlsZChsLmRvbSksbz1sLmNvbnRlbnRET018fGwuZG9tKX19by5hcHBlbmRDaGlsZChyLnNlcmlhbGl6ZU5vZGUodCxlKSl9KSksbn0sVHQucHJvdG90eXBlLnNlcmlhbGl6ZU5vZGU9ZnVuY3Rpb24odCxlKXt2b2lkIDA9PT1lJiYoZT17fSk7dmFyIG49VHQucmVuZGVyU3BlYyhFdChlKSx0aGlzLm5vZGVzW3QudHlwZS5uYW1lXSh0KSkscj1uLmRvbSxvPW4uY29udGVudERPTTtpZihvKXtpZih0LmlzTGVhZil0aHJvdyBuZXcgUmFuZ2VFcnJvcigiQ29udGVudCBob2xlIG5vdCBhbGxvd2VkIGluIGEgbGVhZiBub2RlIHNwZWMiKTtlLm9uQ29udGVudD9lLm9uQ29udGVudCh0LG8sZSk6dGhpcy5zZXJpYWxpemVGcmFnbWVudCh0LmNvbnRlbnQsZSxvKX1yZXR1cm4gcn0sVHQucHJvdG90eXBlLnNlcmlhbGl6ZU5vZGVBbmRNYXJrcz1mdW5jdGlvbih0LGUpe3ZhciBuPXRoaXM7dm9pZCAwPT09ZSYmKGU9e30pO2Zvcih2YXIgcj10aGlzLnNlcmlhbGl6ZU5vZGUodCxlKSxvPXQubWFya3MubGVuZ3RoLTE7bz49MDtvLS0pe3ZhciBpPW4uc2VyaWFsaXplTWFyayh0Lm1hcmtzW29dLHQuaXNJbmxpbmUsZSk7aSYmKChpLmNvbnRlbnRET018fGkuZG9tKS5hcHBlbmRDaGlsZChyKSxyPWkuZG9tKX1yZXR1cm4gcn0sVHQucHJvdG90eXBlLnNlcmlhbGl6ZU1hcms9ZnVuY3Rpb24odCxlLG4pe3ZvaWQgMD09PW4mJihuPXt9KTt2YXIgcj10aGlzLm1hcmtzW3QudHlwZS5uYW1lXTtyZXR1cm4gciYmVHQucmVuZGVyU3BlYyhFdChuKSxyKHQsZSkpfSxUdC5yZW5kZXJTcGVjPWZ1bmN0aW9uKHQsZSl7aWYoInN0cmluZyI9PXR5cGVvZiBlKXJldHVybntkb206dC5jcmVhdGVUZXh0Tm9kZShlKX07aWYobnVsbCE9ZS5ub2RlVHlwZSlyZXR1cm57ZG9tOmV9O3ZhciBuPXQuY3JlYXRlRWxlbWVudChlWzBdKSxyPW51bGwsbz1lWzFdLGk9MTtpZihvJiYib2JqZWN0Ij09dHlwZW9mIG8mJm51bGw9PW8ubm9kZVR5cGUmJiFBcnJheS5pc0FycmF5KG8pKWZvcih2YXIgcyBpbiBpPTIsbyludWxsIT1vW3NdJiZuLnNldEF0dHJpYnV0ZShzLG9bc10pO2Zvcih2YXIgYT1pO2E8ZS5sZW5ndGg7YSsrKXt2YXIgYz1lW2FdO2lmKDA9PT1jKXtpZihhPGUubGVuZ3RoLTF8fGE+aSl0aHJvdyBuZXcgUmFuZ2VFcnJvcigiQ29udGVudCBob2xlIG11c3QgYmUgdGhlIG9ubHkgY2hpbGQgb2YgaXRzIHBhcmVudCBub2RlIik7cmV0dXJue2RvbTpuLGNvbnRlbnRET006bn19dmFyIGw9VHQucmVuZGVyU3BlYyh0LGMpLHA9bC5kb20sdT1sLmNvbnRlbnRET007aWYobi5hcHBlbmRDaGlsZChwKSx1KXtpZihyKXRocm93IG5ldyBSYW5nZUVycm9yKCJNdWx0aXBsZSBjb250ZW50IGhvbGVzIik7cj11fX1yZXR1cm57ZG9tOm4sY29udGVudERPTTpyfX0sVHQuZnJvbVNjaGVtYT1mdW5jdGlvbih0KXtyZXR1cm4gdC5jYWNoZWQuZG9tU2VyaWFsaXplcnx8KHQuY2FjaGVkLmRvbVNlcmlhbGl6ZXI9bmV3IFR0KHRoaXMubm9kZXNGcm9tU2NoZW1hKHQpLHRoaXMubWFya3NGcm9tU2NoZW1hKHQpKSl9LFR0Lm5vZGVzRnJvbVNjaGVtYT1mdW5jdGlvbih0KXt2YXIgZT1OdCh0Lm5vZGVzKTtyZXR1cm4gZS50ZXh0fHwoZS50ZXh0PWZ1bmN0aW9uKHQpe3JldHVybiB0LnRleHR9KSxlfSxUdC5tYXJrc0Zyb21TY2hlbWE9ZnVuY3Rpb24odCl7cmV0dXJuIE50KHQubWFya3MpfSxlLk5vZGU9XyxlLlJlc29sdmVkUG9zPU4sZS5Ob2RlUmFuZ2U9eixlLkZyYWdtZW50PWEsZS5TbGljZT1kLGUuUmVwbGFjZUVycm9yPWYsZS5NYXJrPWgsZS5TY2hlbWE9cHQsZS5Ob2RlVHlwZT1pdCxlLk1hcmtUeXBlPWx0LGUuQ29udGVudE1hdGNoPSQsZS5ET01QYXJzZXI9aHQsZS5ET01TZXJpYWxpemVyPVR0fSxkOGU4OmZ1bmN0aW9uKHQsZSl7dC5leHBvcnRzPWZ1bmN0aW9uKHQpe2lmKCJmdW5jdGlvbiIhPXR5cGVvZiB0KXRocm93IFR5cGVFcnJvcih0KyIgaXMgbm90IGEgZnVuY3Rpb24hIik7cmV0dXJuIHR9fSxkOWY2OmZ1bmN0aW9uKHQsZSxuKXt2YXIgcj1uKCJlNGFlIiksbz1uKCI3OTRiIiksaT1uKCIxYmMzIikscz1PYmplY3QuZGVmaW5lUHJvcGVydHk7ZS5mPW4oIjhlNjAiKT9PYmplY3QuZGVmaW5lUHJvcGVydHk6ZnVuY3Rpb24odCxlLG4pe2lmKHIodCksZT1pKGUsITApLHIobiksbyl0cnl7cmV0dXJuIHModCxlLG4pfWNhdGNoKGEpe31pZigiZ2V0ImluIG58fCJzZXQiaW4gbil0aHJvdyBUeXBlRXJyb3IoIkFjY2Vzc29ycyBub3Qgc3VwcG9ydGVkISIpO3JldHVybiJ2YWx1ZSJpbiBuJiYodFtlXT1uLnZhbHVlKSx0fX0sZGJkYjpmdW5jdGlvbih0LGUsbil7dmFyIHI9bigiNTg0YSIpLG89bigiZTUzZCIpLGk9Il9fY29yZS1qc19zaGFyZWRfXyIscz1vW2ldfHwob1tpXT17fSk7KHQuZXhwb3J0cz1mdW5jdGlvbih0LGUpe3JldHVybiBzW3RdfHwoc1t0XT12b2lkIDAhPT1lP2U6e30pfSkoInZlcnNpb25zIixbXSkucHVzaCh7dmVyc2lvbjpyLnZlcnNpb24sbW9kZTpuKCJiOGUzIik/InB1cmUiOiJnbG9iYWwiLGNvcHlyaWdodDoiwqkgMjAxOSBEZW5pcyBQdXNoa2FyZXYgKHpsb2lyb2NrLnJ1KSJ9KX0sZGM0NDpmdW5jdGlvbih0LGUsbil7fSxlMTFlOmZ1bmN0aW9uKHQsZSl7dC5leHBvcnRzPSJjb25zdHJ1Y3RvcixoYXNPd25Qcm9wZXJ0eSxpc1Byb3RvdHlwZU9mLHByb3BlcnR5SXNFbnVtZXJhYmxlLHRvTG9jYWxlU3RyaW5nLHRvU3RyaW5nLHZhbHVlT2YiLnNwbGl0KCIsIil9LGU0YWU6ZnVuY3Rpb24odCxlLG4pe3ZhciByPW4oImY3NzIiKTt0LmV4cG9ydHM9ZnVuY3Rpb24odCl7aWYoIXIodCkpdGhyb3cgVHlwZUVycm9yKHQrIiBpcyBub3QgYW4gb2JqZWN0ISIpO3JldHVybiB0fX0sZTUzZDpmdW5jdGlvbih0LGUpe3ZhciBuPXQuZXhwb3J0cz0idW5kZWZpbmVkIiE9dHlwZW9mIHdpbmRvdyYmd2luZG93Lk1hdGg9PU1hdGg/d2luZG93OiJ1bmRlZmluZWQiIT10eXBlb2Ygc2VsZiYmc2VsZi5NYXRoPT1NYXRoP3NlbGY6RnVuY3Rpb24oInJldHVybiB0aGlzIikoKTsibnVtYmVyIj09dHlwZW9mIF9fZyYmKF9fZz1uKX0sZTZmMzpmdW5jdGlvbih0LGUsbil7dmFyIHI9bigiMDdlMyIpLG89bigiMzZjMyIpLGk9bigiNWI0ZSIpKCExKSxzPW4oIjU1NTkiKSgiSUVfUFJPVE8iKTt0LmV4cG9ydHM9ZnVuY3Rpb24odCxlKXt2YXIgbixhPW8odCksYz0wLGw9W107Zm9yKG4gaW4gYSluIT1zJiZyKGEsbikmJmwucHVzaChuKTt3aGlsZShlLmxlbmd0aD5jKXIoYSxuPWVbYysrXSkmJih+aShsLG4pfHxsLnB1c2gobikpO3JldHVybiBsfX0sZWU3ZjpmdW5jdGlvbih0LGUsbil7InVzZSBzdHJpY3QiO09iamVjdC5kZWZpbmVQcm9wZXJ0eShlLCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KTt2YXIgcj1uKCI2ZmZiIiksbz1uKCJhODBlIiksaT1uKCJmYzg4Iikscz1mdW5jdGlvbih0KXtyZXR1cm4gZnVuY3Rpb24oZSl7dmFyIG49Vih0KShlLnNlbGVjdGlvbik7cmV0dXJuIG4/UyhuLnBvcykoZSk6ZX19LGE9ZnVuY3Rpb24odCxlKXtyZXR1cm4gZnVuY3Rpb24obil7QXJyYXkuaXNBcnJheSh0KXx8KHQ9W3RdKTtmb3IodmFyIHI9MCxvPXQubGVuZ3RoO3I8bztyKyspe3ZhciBpPVYodFtyXSkobi5zZWxlY3Rpb24pO2lmKGkpe3ZhciBzPWIoaS5wb3MsZSkobik7aWYocyE9PW4pcmV0dXJuIHN9fXJldHVybiBufX0sYz1mdW5jdGlvbih0KXtpZihnKHQuc2VsZWN0aW9uKSl7dmFyIGU9dC5zZWxlY3Rpb24uJGZyb20ucG9zLG49dC5zZWxlY3Rpb24uJHRvLnBvcztyZXR1cm4geCh0LmRlbGV0ZShlLG4pKX1yZXR1cm4gdH0sbD1mdW5jdGlvbih0KXtyZXR1cm4gZnVuY3Rpb24oZSl7aWYoZyhlLnNlbGVjdGlvbikpe3ZhciBuPWUuc2VsZWN0aW9uLGk9bi4kZnJvbSxzPW4uJHRvO2lmKHQgaW5zdGFuY2VvZiBvLkZyYWdtZW50JiZpLnBhcmVudC5jYW5SZXBsYWNlKGkuaW5kZXgoKSxpLmluZGV4QWZ0ZXIoKSx0KXx8aS5wYXJlbnQuY2FuUmVwbGFjZVdpdGgoaS5pbmRleCgpLGkuaW5kZXhBZnRlcigpLHQudHlwZSkpcmV0dXJuIHgoZS5yZXBsYWNlV2l0aChpLnBvcyxzLnBvcyx0KS5zZXRTZWxlY3Rpb24obmV3IHIuTm9kZVNlbGVjdGlvbihlLmRvYy5yZXNvbHZlKGkucG9zKSkpKX1yZXR1cm4gZX19LHA9ZnVuY3Rpb24odCl7dmFyIGU9YXJndW1lbnRzLmxlbmd0aD4xJiZ2b2lkIDAhPT1hcmd1bWVudHNbMV0/YXJndW1lbnRzWzFdOjE7cmV0dXJuIGZ1bmN0aW9uKG4pe3ZhciBvPXIuU2VsZWN0aW9uLmZpbmRGcm9tKG4uZG9jLnJlc29sdmUodCksZSwhMCk7cmV0dXJuIG8/bi5zZXRTZWxlY3Rpb24obyk6bn19LHU9ZnVuY3Rpb24odCl7cmV0dXJuIHQudHlwZSYmdC50eXBlLnNwZWMuc2VsZWN0YWJsZX0saD1mdW5jdGlvbih0KXtyZXR1cm4gdSh0KSYmdC50eXBlLmlzTGVhZn0sZj1mdW5jdGlvbih0LGUsbil7cmV0dXJuIGgodCk/bi5zZXRTZWxlY3Rpb24obmV3IHIuTm9kZVNlbGVjdGlvbihuLmRvYy5yZXNvbHZlKGUpKSk6cChlKShuKX0sZD1mdW5jdGlvbih0LGUsbil7cmV0dXJuIGZ1bmN0aW9uKHIpe3ZhciBvPSJudW1iZXIiPT09dHlwZW9mIGUsaT1yLnNlbGVjdGlvbi4kZnJvbSxzPW8/ci5kb2MucmVzb2x2ZShlKTpnKHIuc2VsZWN0aW9uKT9yLmRvYy5yZXNvbHZlKGkucG9zKzEpOmksYz1zLnBhcmVudDtpZihnKHIuc2VsZWN0aW9uKSYmbil7dmFyIHA9cjtpZihyPWwodCkocikscCE9PXIpcmV0dXJuIHJ9aWYoTShjKSl7dmFyIGg9cjtpZihyPWEoYy50eXBlLHQpKHIpLGghPT1yKXt2YXIgZD11KHQpP3MuYmVmb3JlKHMuZGVwdGgpOnMucG9zO3JldHVybiBmKHQsZCxyKX19aWYoTyhzLHQpKXtyLmluc2VydChzLnBvcyx0KTt2YXIgdj1vP3MucG9zOnUodCk/ci5zZWxlY3Rpb24uJGFuY2hvci5wb3MtMTpyLnNlbGVjdGlvbi4kYW5jaG9yLnBvcztyZXR1cm4geChmKHQsdixyKSl9Zm9yKHZhciBtPXMuZGVwdGg7bT4wO20tLSl7dmFyIHk9cy5hZnRlcihtKSx3PXIuZG9jLnJlc29sdmUoeSk7aWYoTyh3LHQpKXJldHVybiByLmluc2VydCh5LHQpLHgoZih0LHkscikpfXJldHVybiByfX0sdj1mdW5jdGlvbih0LGUsbixyKXtyZXR1cm4gZnVuY3Rpb24obyl7dmFyIGk9Vih0KShvLnNlbGVjdGlvbik7cmV0dXJuIGk/eChvLnNldE5vZGVNYXJrdXAoaS5wb3MsZSxPYmplY3QuYXNzaWduKHt9LGkubm9kZS5hdHRycyxuKSxyKSk6b319LG09ZnVuY3Rpb24odCl7cmV0dXJuIGZ1bmN0aW9uKGUpe2lmKCFnKGUuc2VsZWN0aW9uKSl7dmFyIG49Vih0KShlLnNlbGVjdGlvbik7aWYobilyZXR1cm4geChlLnNldFNlbGVjdGlvbihyLk5vZGVTZWxlY3Rpb24uY3JlYXRlKGUuZG9jLG4ucG9zKSkpfXJldHVybiBlfX0seT1mdW5jdGlvbih0KXt2YXIgZT1IKHQuc2VsZWN0aW9uKTtyZXR1cm4ibnVtYmVyIj09PXR5cGVvZiBlP1MoZSkodCk6dH0sZz1mdW5jdGlvbih0KXtyZXR1cm4gdCBpbnN0YW5jZW9mIHIuTm9kZVNlbGVjdGlvbn0sdz1mdW5jdGlvbih0LGUpe3JldHVybiBBcnJheS5pc0FycmF5KHQpJiZ0LmluZGV4T2YoZS50eXBlKT4tMXx8ZS50eXBlPT09dH0seD1mdW5jdGlvbih0KXtyZXR1cm4gT2JqZWN0LmFzc2lnbihPYmplY3QuY3JlYXRlKHQpLHQpLnNldFRpbWUoRGF0ZS5ub3coKSl9LGI9ZnVuY3Rpb24odCxlKXtyZXR1cm4gZnVuY3Rpb24obil7dmFyIHI9bi5kb2Mubm9kZUF0KHQpLG89bi5kb2MucmVzb2x2ZSh0KTtpZihrKG8sZSkpe249bi5yZXBsYWNlV2l0aCh0LHQrci5ub2RlU2l6ZSxlKTt2YXIgaT1uLnNlbGVjdGlvbi4kZnJvbS5wb3MtMTtyZXR1cm4gbj1wKE1hdGgubWF4KGksMCksLTEpKG4pLG49cChuLnNlbGVjdGlvbi4kZnJvbS5zdGFydCgpKShuKSx4KG4pfXJldHVybiBufX0saz1mdW5jdGlvbih0LGUpe3ZhciBuPXQubm9kZSh0LmRlcHRoKTtyZXR1cm4gbiYmbi50eXBlLnZhbGlkQ29udGVudChlIGluc3RhbmNlb2Ygby5GcmFnbWVudD9lOm8uRnJhZ21lbnQuZnJvbShlKSl9LFM9ZnVuY3Rpb24odCl7cmV0dXJuIGZ1bmN0aW9uKGUpe3ZhciBuPWUuZG9jLm5vZGVBdCh0KTtyZXR1cm4geChlLmRlbGV0ZSh0LHQrbi5ub2RlU2l6ZSkpfX0sQz1mdW5jdGlvbih0KXtpZih0LmNhY2hlZC50YWJsZU5vZGVUeXBlcylyZXR1cm4gdC5jYWNoZWQudGFibGVOb2RlVHlwZXM7dmFyIGU9e307cmV0dXJuIE9iamVjdC5rZXlzKHQubm9kZXMpLmZvckVhY2goKGZ1bmN0aW9uKG4pe3ZhciByPXQubm9kZXNbbl07ci5zcGVjLnRhYmxlUm9sZSYmKGVbci5zcGVjLnRhYmxlUm9sZV09cil9KSksdC5jYWNoZWQudGFibGVOb2RlVHlwZXM9ZSxlfSxPPWZ1bmN0aW9uKHQsZSl7dmFyIG49dC5pbmRleCgpO3JldHVybiBlIGluc3RhbmNlb2Ygby5GcmFnbWVudD90LnBhcmVudC5jYW5SZXBsYWNlKG4sbixlKTplIGluc3RhbmNlb2Ygby5Ob2RlJiZ0LnBhcmVudC5jYW5SZXBsYWNlV2l0aChuLG4sZS50eXBlKX0sTT1mdW5jdGlvbih0KXtyZXR1cm4hdHx8InBhcmFncmFwaCI9PT10LnR5cGUubmFtZSYmMj09PXQubm9kZVNpemV9LFQ9ZnVuY3Rpb24odCl7dmFyIGU9ZnVuY3Rpb24odCl7cmV0dXJuIHQudHlwZS5zcGVjLnRhYmxlUm9sZSYmL3RhYmxlL2kudGVzdCh0LnR5cGUuc3BlYy50YWJsZVJvbGUpfTtyZXR1cm4gQih0LGUpfSxOPWZ1bmN0aW9uKHQpe3ZhciBlPWFyZ3VtZW50cy5sZW5ndGg+MSYmdm9pZCAwIT09YXJndW1lbnRzWzFdP2FyZ3VtZW50c1sxXTpudWxsO3JldHVybiBlP3QuY3JlYXRlQ2hlY2tlZChudWxsLGUpOnQuY3JlYXRlQW5kRmlsbCgpfSxFPWZ1bmN0aW9uKHQpe3JldHVybiBmdW5jdGlvbihlKXtmb3IodmFyIG49aS5UYWJsZU1hcC5nZXQoZS4kYW5jaG9yQ2VsbC5ub2RlKC0xKSkscj1lLiRhbmNob3JDZWxsLnN0YXJ0KC0xKSxvPW4uY2VsbHNJblJlY3QodCkscz1uLmNlbGxzSW5SZWN0KG4ucmVjdEJldHdlZW4oZS4kYW5jaG9yQ2VsbC5wb3MtcixlLiRoZWFkQ2VsbC5wb3MtcikpLGE9MCxjPW8ubGVuZ3RoO2E8YzthKyspaWYoLTE9PT1zLmluZGV4T2Yob1thXSkpcmV0dXJuITE7cmV0dXJuITB9fSxBPWZ1bmN0aW9uKHQpe3JldHVybiB0WzBdLm1hcCgoZnVuY3Rpb24oZSxuKXtyZXR1cm4gdC5tYXAoKGZ1bmN0aW9uKHQpe3JldHVybiB0W25dfSkpfSkpfSxSPWZ1bmN0aW9uKHQpe2Zvcih2YXIgZT1pLlRhYmxlTWFwLmdldCh0KSxuPVtdLHI9MDtyPGUuaGVpZ2h0O3IrKyl7Zm9yKHZhciBvPVtdLHM9e30sYT0wO2E8ZS53aWR0aDthKyspe3ZhciBjPWUubWFwW3IqZS53aWR0aCthXSxsPXQubm9kZUF0KGMpLHA9ZS5maW5kQ2VsbChjKTtzW2NdfHxwLnRvcCE9PXI/by5wdXNoKG51bGwpOihzW2NdPSEwLG8ucHVzaChsKSl9bi5wdXNoKG8pfXJldHVybiBufSxEPWZ1bmN0aW9uKHQsZSl7Zm9yKHZhciBuPVtdLHI9aS5UYWJsZU1hcC5nZXQodCksbz0wO288ci5oZWlnaHQ7bysrKXtmb3IodmFyIHM9dC5jaGlsZChvKSxhPVtdLGM9MDtjPHIud2lkdGg7YysrKWlmKGVbb11bY10pe3ZhciBsPXIubWFwW28qci53aWR0aCtjXSxwPWVbb11bY10sdT10Lm5vZGVBdChsKSxoPXUudHlwZS5jcmVhdGVDaGVja2VkKE9iamVjdC5hc3NpZ24oe30scC5hdHRycykscC5jb250ZW50LHAubWFya3MpO2EucHVzaChoKX1uLnB1c2gocy50eXBlLmNyZWF0ZUNoZWNrZWQocy5hdHRycyxhLHMubWFya3MpKX12YXIgZj10LnR5cGUuY3JlYXRlQ2hlY2tlZCh0LmF0dHJzLG4sdC5tYXJrcyk7cmV0dXJuIGZ9LHo9ZnVuY3Rpb24odCxlLG4scil7dmFyIG89QShSKHQubm9kZSkpO3JldHVybiBvPUkobyxlLG4sciksbz1BKG8pLEQodC5ub2RlLG8pfSxQPWZ1bmN0aW9uKHQsZSxuLHIpe3ZhciBvPVIodC5ub2RlKTtyZXR1cm4gbz1JKG8sZSxuLHIpLEQodC5ub2RlLG8pfSxJPWZ1bmN0aW9uKHQsZSxuLHIpe3ZhciBvPWVbMF0+blswXT8tMToxLGk9dC5zcGxpY2UoZVswXSxlLmxlbmd0aCkscz1pLmxlbmd0aCUyPT09MD8xOjAsYT12b2lkIDA7cmV0dXJuIGE9LTE9PT1yJiYxPT09bz9uWzBdLTE6MT09PXImJi0xPT09bz9uW24ubGVuZ3RoLTFdLXMrMTotMT09PW8/blswXTpuW24ubGVuZ3RoLTFdLXMsdC5zcGxpY2UuYXBwbHkodCxbYSwwXS5jb25jYXQoaSkpLHR9LF89ZnVuY3Rpb24odCxlLG4scil7dmFyIG89dD5lPy0xOjEsaT0iVGFyZ2V0IHBvc2l0aW9uIGlzIGludmFsaWQsIHlvdSBjYW4ndCBtb3ZlIHRoZSAiK3IrIiAiK3QrIiB0byAiK2UrIiwgdGhlIHRhcmdldCBjYW4ndCBiZSBzcGxpdC4gWW91IGNvdWxkIHVzZSB0cnlUb0ZpdCBvcHRpb24uIjtpZigxPT09byl7aWYoLTEhPT1uLnNsaWNlKDAsbi5sZW5ndGgtMSkuaW5kZXhPZihlKSl0aHJvdyBuZXcgRXJyb3IoaSl9ZWxzZSBpZigtMSE9PW4uc2xpY2UoMSkuaW5kZXhPZihlKSl0aHJvdyBuZXcgRXJyb3IoaSk7cmV0dXJuITB9LEY9ZnVuY3Rpb24odCl7cmV0dXJuIGZ1bmN0aW9uKGUpe3ZhciBuPWUuJGZyb207cmV0dXJuIEIobix0KX19LEI9ZnVuY3Rpb24odCxlKXtmb3IodmFyIG49dC5kZXB0aDtuPjA7bi0tKXt2YXIgcj10Lm5vZGUobik7aWYoZShyKSlyZXR1cm57cG9zOm4+MD90LmJlZm9yZShuKTowLHN0YXJ0OnQuc3RhcnQobiksZGVwdGg6bixub2RlOnJ9fX0saj1mdW5jdGlvbih0LGUpe3JldHVybiBmdW5jdGlvbihuKXt2YXIgcj1GKHQpKG4pO2lmKHIpcmV0dXJuIEsoci5wb3MsZSl9fSwkPWZ1bmN0aW9uKHQpe3JldHVybiBmdW5jdGlvbihlKXtyZXR1cm4hIUYodCkoZSl9fSxWPWZ1bmN0aW9uKHQpe3JldHVybiBmdW5jdGlvbihlKXtyZXR1cm4gRigoZnVuY3Rpb24oZSl7cmV0dXJuIHcodCxlKX0pKShlKX19LEw9ZnVuY3Rpb24odCxlKXtyZXR1cm4gQih0LChmdW5jdGlvbih0KXtyZXR1cm4gdyhlLHQpfSkpfSxKPWZ1bmN0aW9uKHQpe3JldHVybiBmdW5jdGlvbihlKXtyZXR1cm4gJCgoZnVuY3Rpb24oZSl7cmV0dXJuIHcodCxlKX0pKShlKX19LHE9ZnVuY3Rpb24odCxlKXtyZXR1cm4gZnVuY3Rpb24obil7cmV0dXJuIGooKGZ1bmN0aW9uKGUpe3JldHVybiB3KHQsZSl9KSxlKShuKX19LFc9ZnVuY3Rpb24odCl7cmV0dXJuIGZ1bmN0aW9uKGUpe2lmKGcoZSkpe3ZhciBuPWUubm9kZSxyPWUuJGZyb207aWYodyh0LG4pKXJldHVybntub2RlOm4scG9zOnIucG9zLGRlcHRoOnIuZGVwdGh9fX19LEg9ZnVuY3Rpb24odCl7dmFyIGU9dC4kZnJvbS5ub2RlQmVmb3JlLG49ci5TZWxlY3Rpb24uZmluZEZyb20odC4kZnJvbSwtMSk7aWYobiYmZSl7dmFyIG89VihlLnR5cGUpKG4pO3JldHVybiBvP28ucG9zOm4uJGZyb20ucG9zfX0sSz1mdW5jdGlvbih0LGUpe3ZhciBuPWUodCkscj1uLm5vZGUuY2hpbGROb2Rlc1tuLm9mZnNldF07cmV0dXJuIG4ubm9kZS5ub2RlVHlwZT09PU5vZGUuVEVYVF9OT0RFP24ubm9kZS5wYXJlbnROb2RlOnImJnIubm9kZVR5cGUhPT1Ob2RlLlRFWFRfTk9ERT9yOm4ubm9kZX0sVT1mdW5jdGlvbih0KXt2YXIgZT0hKGFyZ3VtZW50cy5sZW5ndGg+MSYmdm9pZCAwIT09YXJndW1lbnRzWzFdKXx8YXJndW1lbnRzWzFdO2lmKCF0KXRocm93IG5ldyBFcnJvcignSW52YWxpZCAibm9kZSIgcGFyYW1ldGVyJyk7dmFyIG49W107cmV0dXJuIHQuZGVzY2VuZGFudHMoKGZ1bmN0aW9uKHQscil7aWYobi5wdXNoKHtub2RlOnQscG9zOnJ9KSwhZSlyZXR1cm4hMX0pKSxufSxHPWZ1bmN0aW9uKHQsZSxuKXtpZighdCl0aHJvdyBuZXcgRXJyb3IoJ0ludmFsaWQgIm5vZGUiIHBhcmFtZXRlcicpO2lmKCFlKXRocm93IG5ldyBFcnJvcignSW52YWxpZCAicHJlZGljYXRlIiBwYXJhbWV0ZXInKTtyZXR1cm4gVSh0LG4pLmZpbHRlcigoZnVuY3Rpb24odCl7cmV0dXJuIGUodC5ub2RlKX0pKX0sWD1mdW5jdGlvbih0LGUpe3JldHVybiBHKHQsKGZ1bmN0aW9uKHQpe3JldHVybiB0LmlzVGV4dH0pLGUpfSxZPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIEcodCwoZnVuY3Rpb24odCl7cmV0dXJuIHQuaXNJbmxpbmV9KSxlKX0sUT1mdW5jdGlvbih0LGUpe3JldHVybiBHKHQsKGZ1bmN0aW9uKHQpe3JldHVybiB0LmlzQmxvY2t9KSxlKX0sWj1mdW5jdGlvbih0LGUsbil7cmV0dXJuIEcodCwoZnVuY3Rpb24odCl7cmV0dXJuISFlKHQuYXR0cnMpfSksbil9LHR0PWZ1bmN0aW9uKHQsZSxuKXtyZXR1cm4gRyh0LChmdW5jdGlvbih0KXtyZXR1cm4gdC50eXBlPT09ZX0pLG4pfSxldD1mdW5jdGlvbih0LGUsbil7cmV0dXJuIEcodCwoZnVuY3Rpb24odCl7cmV0dXJuIGUuaXNJblNldCh0Lm1hcmtzKX0pLG4pfSxudD1mdW5jdGlvbih0LGUpe3JldHVybiEhdHQodCxlKS5sZW5ndGh9O2Z1bmN0aW9uIHJ0KHQpe2lmKEFycmF5LmlzQXJyYXkodCkpe2Zvcih2YXIgZT0wLG49QXJyYXkodC5sZW5ndGgpO2U8dC5sZW5ndGg7ZSsrKW5bZV09dFtlXTtyZXR1cm4gbn1yZXR1cm4gQXJyYXkuZnJvbSh0KX12YXIgb3Q9ZnVuY3Rpb24odCl7cmV0dXJuIEYoKGZ1bmN0aW9uKHQpe3JldHVybiB0LnR5cGUuc3BlYy50YWJsZVJvbGUmJiJ0YWJsZSI9PT10LnR5cGUuc3BlYy50YWJsZVJvbGV9KSkodCl9LGl0PWZ1bmN0aW9uKHQpe3JldHVybiB0IGluc3RhbmNlb2YgaS5DZWxsU2VsZWN0aW9ufSxzdD1mdW5jdGlvbih0KXtpZihpdCh0KSl7dmFyIGU9dC4kYW5jaG9yQ2VsbC5zdGFydCgtMSksbj1pLlRhYmxlTWFwLmdldCh0LiRhbmNob3JDZWxsLm5vZGUoLTEpKTtyZXR1cm4gbi5yZWN0QmV0d2Vlbih0LiRhbmNob3JDZWxsLnBvcy1lLHQuJGhlYWRDZWxsLnBvcy1lKX19LGF0PWZ1bmN0aW9uKHQpe3JldHVybiBmdW5jdGlvbihlKXtpZihpdChlKSl7dmFyIG49aS5UYWJsZU1hcC5nZXQoZS4kYW5jaG9yQ2VsbC5ub2RlKC0xKSk7cmV0dXJuIEUoe2xlZnQ6dCxyaWdodDp0KzEsdG9wOjAsYm90dG9tOm4uaGVpZ2h0fSkoZSl9cmV0dXJuITF9fSxjdD1mdW5jdGlvbih0KXtyZXR1cm4gZnVuY3Rpb24oZSl7aWYoaXQoZSkpe3ZhciBuPWkuVGFibGVNYXAuZ2V0KGUuJGFuY2hvckNlbGwubm9kZSgtMSkpO3JldHVybiBFKHtsZWZ0OjAscmlnaHQ6bi53aWR0aCx0b3A6dCxib3R0b206dCsxfSkoZSl9cmV0dXJuITF9fSxsdD1mdW5jdGlvbih0KXtpZihpdCh0KSl7dmFyIGU9aS5UYWJsZU1hcC5nZXQodC4kYW5jaG9yQ2VsbC5ub2RlKC0xKSk7cmV0dXJuIEUoe2xlZnQ6MCxyaWdodDplLndpZHRoLHRvcDowLGJvdHRvbTplLmhlaWdodH0pKHQpfXJldHVybiExfSxwdD1mdW5jdGlvbih0KXtyZXR1cm4gZnVuY3Rpb24oZSl7dmFyIG49b3QoZSk7aWYobil7dmFyIHI9aS5UYWJsZU1hcC5nZXQobi5ub2RlKSxvPUFycmF5LmlzQXJyYXkodCk/dDpBcnJheS5mcm9tKFt0XSk7cmV0dXJuIG8ucmVkdWNlKChmdW5jdGlvbih0LGUpe2lmKGU+PTAmJmU8PXIud2lkdGgtMSl7dmFyIG89ci5jZWxsc0luUmVjdCh7bGVmdDplLHJpZ2h0OmUrMSx0b3A6MCxib3R0b206ci5oZWlnaHR9KTtyZXR1cm4gdC5jb25jYXQoby5tYXAoKGZ1bmN0aW9uKHQpe3ZhciBlPW4ubm9kZS5ub2RlQXQodCkscj10K24uc3RhcnQ7cmV0dXJue3BvczpyLHN0YXJ0OnIrMSxub2RlOmV9fSkpKX19KSxbXSl9fX0sdXQ9ZnVuY3Rpb24odCl7cmV0dXJuIGZ1bmN0aW9uKGUpe3ZhciBuPW90KGUpO2lmKG4pe3ZhciByPWkuVGFibGVNYXAuZ2V0KG4ubm9kZSksbz1BcnJheS5pc0FycmF5KHQpP3Q6QXJyYXkuZnJvbShbdF0pO3JldHVybiBvLnJlZHVjZSgoZnVuY3Rpb24odCxlKXtpZihlPj0wJiZlPD1yLmhlaWdodC0xKXt2YXIgbz1yLmNlbGxzSW5SZWN0KHtsZWZ0OjAscmlnaHQ6ci53aWR0aCx0b3A6ZSxib3R0b206ZSsxfSk7cmV0dXJuIHQuY29uY2F0KG8ubWFwKChmdW5jdGlvbih0KXt2YXIgZT1uLm5vZGUubm9kZUF0KHQpLHI9dCtuLnN0YXJ0O3JldHVybntwb3M6cixzdGFydDpyKzEsbm9kZTplfX0pKSl9fSksW10pfX19LGh0PWZ1bmN0aW9uKHQpe3ZhciBlPW90KHQpO2lmKGUpe3ZhciBuPWkuVGFibGVNYXAuZ2V0KGUubm9kZSkscj1uLmNlbGxzSW5SZWN0KHtsZWZ0OjAscmlnaHQ6bi53aWR0aCx0b3A6MCxib3R0b206bi5oZWlnaHR9KTtyZXR1cm4gci5tYXAoKGZ1bmN0aW9uKHQpe3ZhciBuPWUubm9kZS5ub2RlQXQodCkscj10K2Uuc3RhcnQ7cmV0dXJue3BvczpyLHN0YXJ0OnIrMSxub2RlOm59fSkpfX0sZnQ9ZnVuY3Rpb24odCl7cmV0dXJuIGZ1bmN0aW9uKGUsbil7cmV0dXJuIGZ1bmN0aW9uKHIpe3ZhciBvPW90KHIuc2VsZWN0aW9uKSxzPSJyb3ciPT09dDtpZihvKXt2YXIgYT1pLlRhYmxlTWFwLmdldChvLm5vZGUpO2lmKGU+PTAmJmU8KHM/YS5oZWlnaHQ6YS53aWR0aCkpe3ZhciBjPXM/MDplLGw9cz9lOjAscD1zP2Eud2lkdGg6ZSsxLHU9cz9lKzE6YS5oZWlnaHQ7aWYobil7dmFyIGg9UHQoci5zZWxlY3Rpb24uJGZyb20pO2lmKCFoKXJldHVybiByO3ZhciBmPWEuZmluZENlbGwoaC5wb3Mtby5zdGFydCk7cz8obD1NYXRoLm1pbihsLGYudG9wKSx1PU1hdGgubWF4KHUsZi5ib3R0b20pKTooYz1NYXRoLm1pbihjLGYubGVmdCkscD1NYXRoLm1heChwLGYucmlnaHQpKX12YXIgZD1hLmNlbGxzSW5SZWN0KHtsZWZ0OmMsdG9wOmwscmlnaHQ6cz9wOmMrMSxib3R0b206cz9sKzE6dX0pLHY9dS1sPT09MT9kOmEuY2VsbHNJblJlY3Qoe2xlZnQ6cz9jOnAtMSx0b3A6cz91LTE6bCxyaWdodDpwLGJvdHRvbTp1fSksbT1vLnN0YXJ0K2RbMF0seT1vLnN0YXJ0K3Zbdi5sZW5ndGgtMV0sZz1yLmRvYy5yZXNvbHZlKG0pLHc9ci5kb2MucmVzb2x2ZSh5KTtyZXR1cm4geChyLnNldFNlbGVjdGlvbihuZXcgaS5DZWxsU2VsZWN0aW9uKHcsZykpKX19cmV0dXJuIHJ9fX0sZHQ9ZnQoImNvbHVtbiIpLHZ0PWZ0KCJyb3ciKSxtdD1mdW5jdGlvbih0KXt2YXIgZT1vdCh0LnNlbGVjdGlvbik7aWYoZSl7dmFyIG49aS5UYWJsZU1hcC5nZXQoZS5ub2RlKSxyPW4ubWFwO2lmKHImJnIubGVuZ3RoKXt2YXIgbz1lLnN0YXJ0K3JbMF0scz1lLnN0YXJ0K3Jbci5sZW5ndGgtMV0sYT10LmRvYy5yZXNvbHZlKG8pLGM9dC5kb2MucmVzb2x2ZShzKTtyZXR1cm4geCh0LnNldFNlbGVjdGlvbihuZXcgaS5DZWxsU2VsZWN0aW9uKGMsYSkpKX19cmV0dXJuIHR9LHl0PWZ1bmN0aW9uKHQsZSl7cmV0dXJuIGZ1bmN0aW9uKG4pe2lmKHQpe3ZhciByPUMoZSkuY2VsbC5jcmVhdGVBbmRGaWxsKCksbz1yLmNvbnRlbnQ7aWYoIXQubm9kZS5jb250ZW50LmVxKG8pKXJldHVybiBuLnJlcGxhY2VXaXRoKHQucG9zKzEsdC5wb3MrdC5ub2RlLm5vZGVTaXplLG8pLHgobil9cmV0dXJuIG59fSxndD1mdW5jdGlvbih0KXtyZXR1cm4gZnVuY3Rpb24oZSl7dmFyIG49b3QoZS5zZWxlY3Rpb24pO2lmKG4pe3ZhciByPWkuVGFibGVNYXAuZ2V0KG4ubm9kZSk7aWYodD49MCYmdDw9ci53aWR0aClyZXR1cm4geChpLmFkZENvbHVtbihlLHttYXA6cix0YWJsZVN0YXJ0Om4uc3RhcnQsdGFibGU6bi5ub2RlfSx0KSl9cmV0dXJuIGV9fSx3dD1mdW5jdGlvbih0LGUsbil7cmV0dXJuIGZ1bmN0aW9uKHIpe3ZhciBvPXt0cnlUb0ZpdDohMSxkaXJlY3Rpb246MH0saT1PYmplY3QuYXNzaWduKG8sbikscz1vdChyLnNlbGVjdGlvbik7aWYoIXMpcmV0dXJuIHI7dmFyIGE9QnQodCkociksYz1hLmluZGV4ZXMsbD1CdChlKShyKSxwPWwuaW5kZXhlcztpZihjLmluZGV4T2YoZSk+LTEpcmV0dXJuIHI7IWkudHJ5VG9GaXQmJnAubGVuZ3RoPjEmJl8odCxlLHAsInJvdyIpO3ZhciB1PVAocyxjLHAsaS5kaXJlY3Rpb24pO3JldHVybiB4KHIpLnJlcGxhY2VXaXRoKHMucG9zLHMucG9zK3Mubm9kZS5ub2RlU2l6ZSx1KX19LHh0PWZ1bmN0aW9uKHQsZSxuKXtyZXR1cm4gZnVuY3Rpb24ocil7dmFyIG89e3RyeVRvRml0OiExLGRpcmVjdGlvbjowfSxpPU9iamVjdC5hc3NpZ24obyxuKSxzPW90KHIuc2VsZWN0aW9uKTtpZighcylyZXR1cm4gcjt2YXIgYT1GdCh0KShyKSxjPWEuaW5kZXhlcyxsPUZ0KGUpKHIpLHA9bC5pbmRleGVzO2lmKGMuaW5kZXhPZihlKT4tMSlyZXR1cm4gcjshaS50cnlUb0ZpdCYmcC5sZW5ndGg+MSYmXyh0LGUscCwiY29sdW1uIik7dmFyIHU9eihzLGMscCxpLmRpcmVjdGlvbik7cmV0dXJuIHgocikucmVwbGFjZVdpdGgocy5wb3Mscy5wb3Mrcy5ub2RlLm5vZGVTaXplLHUpfX0sYnQ9ZnVuY3Rpb24odCxlKXtyZXR1cm4gZnVuY3Rpb24obil7dmFyIHI9b3Qobi5zZWxlY3Rpb24pO2lmKHIpe3ZhciBvPWkuVGFibGVNYXAuZ2V0KHIubm9kZSkscz10LTE7aWYoZSYmcz49MClyZXR1cm4geChrdChzKShuKSk7aWYodD49MCYmdDw9by5oZWlnaHQpcmV0dXJuIHgoaS5hZGRSb3cobix7bWFwOm8sdGFibGVTdGFydDpyLnN0YXJ0LHRhYmxlOnIubm9kZX0sdCkpfXJldHVybiBufX0sa3Q9ZnVuY3Rpb24odCl7cmV0dXJuIGZ1bmN0aW9uKGUpe3ZhciBuPW90KGUuc2VsZWN0aW9uKTtpZihuKXt2YXIgcj1pLlRhYmxlTWFwLmdldChuLm5vZGUpO2lmKHQ+PTAmJnQ8PXIuaGVpZ2h0KXtmb3IodmFyIG89bi5ub2RlLHM9QyhvLnR5cGUuc2NoZW1hKSxhPW4uc3RhcnQsYz0wO2M8dCsxO2MrKylhKz1vLmNoaWxkKGMpLm5vZGVTaXplO3ZhciBsPW8uY2hpbGQodCkscD1bXSx1PTA7aWYobC5mb3JFYWNoKChmdW5jdGlvbih0KXsxPT09dC5hdHRycy5yb3dzcGFuJiYodSs9dC5hdHRycy5jb2xzcGFuLHAucHVzaChzW3QudHlwZS5zcGVjLnRhYmxlUm9sZV0uY3JlYXRlQW5kRmlsbCh0LmF0dHJzLHQubWFya3MpKSl9KSksdTxyLndpZHRoKXtmb3IodmFyIGg9W10sZj1mdW5jdGlvbihuKXt2YXIgcj1fdChuLChmdW5jdGlvbihlLHIpe3ZhciBvPWUubm9kZS5hdHRycy5yb3dzcGFuLGk9bitvO3JldHVybiBvPjEmJmk+dH0pKShlKTtoLnB1c2guYXBwbHkoaCxydChyKSl9LHY9dDt2Pj0wO3YtLSlmKHYpO2gubGVuZ3RoJiZoLmZvckVhY2goKGZ1bmN0aW9uKHQpe2U9RHQodCx7cm93c3Bhbjp0Lm5vZGUuYXR0cnMucm93c3BhbisxfSkoZSl9KSl9cmV0dXJuIGQocy5yb3cuY3JlYXRlKGwuYXR0cnMscCksYSkoZSl9fXJldHVybiBlfX0sU3Q9ZnVuY3Rpb24odCl7cmV0dXJuIGZ1bmN0aW9uKGUpe3ZhciBuPW90KGUuc2VsZWN0aW9uKTtpZihuKXt2YXIgcj1pLlRhYmxlTWFwLmdldChuLm5vZGUpO2lmKDA9PT10JiYxPT09ci53aWR0aClyZXR1cm4gT3QoZSk7aWYodD49MCYmdDw9ci53aWR0aClyZXR1cm4gaS5yZW1vdmVDb2x1bW4oZSx7bWFwOnIsdGFibGVTdGFydDpuLnN0YXJ0LHRhYmxlOm4ubm9kZX0sdCkseChlKX1yZXR1cm4gZX19LEN0PWZ1bmN0aW9uKHQpe3JldHVybiBmdW5jdGlvbihlKXt2YXIgbj1vdChlLnNlbGVjdGlvbik7aWYobil7dmFyIHI9aS5UYWJsZU1hcC5nZXQobi5ub2RlKTtpZigwPT09dCYmMT09PXIuaGVpZ2h0KXJldHVybiBPdChlKTtpZih0Pj0wJiZ0PD1yLmhlaWdodClyZXR1cm4gaS5yZW1vdmVSb3coZSx7bWFwOnIsdGFibGVTdGFydDpuLnN0YXJ0LHRhYmxlOm4ubm9kZX0sdCkseChlKX1yZXR1cm4gZX19LE90PWZ1bmN0aW9uKHQpe2Zvcih2YXIgZT10LnNlbGVjdGlvbi4kZnJvbSxuPWUuZGVwdGg7bj4wO24tLSl7dmFyIHI9ZS5ub2RlKG4pO2lmKCJ0YWJsZSI9PT1yLnR5cGUuc3BlYy50YWJsZVJvbGUpcmV0dXJuIHgodC5kZWxldGUoZS5iZWZvcmUobiksZS5hZnRlcihuKSkpfXJldHVybiB0fSxNdD1mdW5jdGlvbih0KXt2YXIgZT10LnNlbGVjdGlvbjtpZihsdChlKSlyZXR1cm4gT3QodCk7aWYoaXQoZSkpe3ZhciBuPW90KGUpO2lmKG4pe3ZhciByPWkuVGFibGVNYXAuZ2V0KG4ubm9kZSksbz1yLnJlY3RCZXR3ZWVuKGUuJGFuY2hvckNlbGwucG9zLW4uc3RhcnQsZS4kaGVhZENlbGwucG9zLW4uc3RhcnQpO2lmKDA9PW8ubGVmdCYmby5yaWdodD09ci53aWR0aClyZXR1cm4hMTtmb3IodmFyIHM9T2JqZWN0LmFzc2lnbih7fSxvLHttYXA6cix0YWJsZTpuLm5vZGUsdGFibGVTdGFydDpuLnN0YXJ0fSksYT1zLnJpZ2h0LTE7O2EtLSl7aWYoaS5yZW1vdmVDb2x1bW4odCxzLGEpLGE9PT1zLmxlZnQpYnJlYWs7cy50YWJsZT1zLnRhYmxlU3RhcnQ/dC5kb2Mubm9kZUF0KHMudGFibGVTdGFydC0xKTp0LmRvYyxzLm1hcD1pLlRhYmxlTWFwLmdldChzLnRhYmxlKX1yZXR1cm4geCh0KX19cmV0dXJuIHR9LFR0PWZ1bmN0aW9uKHQpe3ZhciBlPXQuc2VsZWN0aW9uO2lmKGx0KGUpKXJldHVybiBPdCh0KTtpZihpdChlKSl7dmFyIG49b3QoZSk7aWYobil7dmFyIHI9aS5UYWJsZU1hcC5nZXQobi5ub2RlKSxvPXIucmVjdEJldHdlZW4oZS4kYW5jaG9yQ2VsbC5wb3Mtbi5zdGFydCxlLiRoZWFkQ2VsbC5wb3Mtbi5zdGFydCk7aWYoMD09by50b3AmJm8uYm90dG9tPT1yLmhlaWdodClyZXR1cm4hMTtmb3IodmFyIHM9T2JqZWN0LmFzc2lnbih7fSxvLHttYXA6cix0YWJsZTpuLm5vZGUsdGFibGVTdGFydDpuLnN0YXJ0fSksYT1zLmJvdHRvbS0xOzthLS0pe2lmKGkucmVtb3ZlUm93KHQscyxhKSxhPT09cy50b3ApYnJlYWs7cy50YWJsZT1zLnRhYmxlU3RhcnQ/dC5kb2Mubm9kZUF0KHMudGFibGVTdGFydC0xKTp0LmRvYyxzLm1hcD1pLlRhYmxlTWFwLmdldChzLnRhYmxlKX1yZXR1cm4geCh0KX19cmV0dXJuIHR9LE50PWZ1bmN0aW9uKHQpe3JldHVybiBmdW5jdGlvbihlKXt2YXIgbj1JdCh0KTtyZXR1cm4gbj9TdChuLmxlZnQpKHAodC5wb3MpKGUpKTplfX0sRXQ9ZnVuY3Rpb24odCl7cmV0dXJuIGZ1bmN0aW9uKGUpe3ZhciBuPUl0KHQpO3JldHVybiBuP0N0KG4udG9wKShwKHQucG9zKShlKSk6ZX19LEF0PWZ1bmN0aW9uKHQsZSxuKXtyZXR1cm4gZnVuY3Rpb24obyl7dmFyIGk9cHQodCkoby5zZWxlY3Rpb24pO2lmKGkpe2Zvcih2YXIgcz1pLmxlbmd0aC0xO3M+PTA7cy0tKW89ZShpW3NdLG8pO2lmKG4pe3ZhciBhPW8uZG9jLnJlc29sdmUoby5tYXBwaW5nLm1hcChpW2kubGVuZ3RoLTFdLnBvcykpO28uc2V0U2VsZWN0aW9uKHIuU2VsZWN0aW9uLm5lYXIoYSkpfXJldHVybiB4KG8pfXJldHVybiBvfX0sUnQ9ZnVuY3Rpb24odCxlLG4pe3JldHVybiBmdW5jdGlvbihvKXt2YXIgaT11dCh0KShvLnNlbGVjdGlvbik7aWYoaSl7Zm9yKHZhciBzPWkubGVuZ3RoLTE7cz49MDtzLS0pbz1lKGlbc10sbyk7aWYobil7dmFyIGE9by5kb2MucmVzb2x2ZShvLm1hcHBpbmcubWFwKGlbaS5sZW5ndGgtMV0ucG9zKSk7by5zZXRTZWxlY3Rpb24oci5TZWxlY3Rpb24ubmVhcihhKSl9fXJldHVybiBvfX0sRHQ9ZnVuY3Rpb24odCxlKXtyZXR1cm4gZnVuY3Rpb24obil7cmV0dXJuIHQ/KG4uc2V0Tm9kZU1hcmt1cCh0LnBvcyxudWxsLE9iamVjdC5hc3NpZ24oe30sdC5ub2RlLmF0dHJzLGUpKSx4KG4pKTpufX0senQ9ZnVuY3Rpb24odCl7Zm9yKHZhciBlPWFyZ3VtZW50cy5sZW5ndGg+MSYmdm9pZCAwIT09YXJndW1lbnRzWzFdP2FyZ3VtZW50c1sxXTozLG49YXJndW1lbnRzLmxlbmd0aD4yJiZ2b2lkIDAhPT1hcmd1bWVudHNbMl0/YXJndW1lbnRzWzJdOjMscj0hKGFyZ3VtZW50cy5sZW5ndGg+MyYmdm9pZCAwIT09YXJndW1lbnRzWzNdKXx8YXJndW1lbnRzWzNdLG89YXJndW1lbnRzLmxlbmd0aD40JiZ2b2lkIDAhPT1hcmd1bWVudHNbNF0/YXJndW1lbnRzWzRdOm51bGwsaT1DKHQpLHM9aS5jZWxsLGE9aS5oZWFkZXJfY2VsbCxjPWkucm93LGw9aS50YWJsZSxwPVtdLHU9W10saD0wO2g8bjtoKyspcC5wdXNoKE4ocyxvKSksciYmdS5wdXNoKE4oYSxvKSk7Zm9yKHZhciBmPVtdLGQ9MDtkPGU7ZCsrKWYucHVzaChjLmNyZWF0ZUNoZWNrZWQobnVsbCxyJiYwPT09ZD91OnApKTtyZXR1cm4gbC5jcmVhdGVDaGVja2VkKG51bGwsZil9LFB0PWZ1bmN0aW9uKHQpe3ZhciBlPWZ1bmN0aW9uKHQpe3JldHVybiB0LnR5cGUuc3BlYy50YWJsZVJvbGUmJi9jZWxsL2kudGVzdCh0LnR5cGUuc3BlYy50YWJsZVJvbGUpfTtyZXR1cm4gQih0LGUpfSxJdD1mdW5jdGlvbih0KXt2YXIgZT1QdCh0KTtpZihlKXt2YXIgbj1UKHQpLHI9aS5UYWJsZU1hcC5nZXQobi5ub2RlKSxvPWUucG9zLW4uc3RhcnQ7cmV0dXJuIHIucmVjdEJldHdlZW4obyxvKX19LF90PWZ1bmN0aW9uKHQsZSl7cmV0dXJuIGZ1bmN0aW9uKG4pe3ZhciByPVtdLG89dXQodCkobi5zZWxlY3Rpb24pO2lmKG8pZm9yKHZhciBpPW8ubGVuZ3RoLTE7aT49MDtpLS0pZShvW2ldLG4pJiZyLnB1c2gob1tpXSk7cmV0dXJuIHJ9fSxGdD1mdW5jdGlvbih0KXtyZXR1cm4gZnVuY3Rpb24oZSl7Zm9yKHZhciBuPXQscj10LG89ZnVuY3Rpb24odCl7dmFyIG89cHQodCkoZS5zZWxlY3Rpb24pO28mJm8uZm9yRWFjaCgoZnVuY3Rpb24oZSl7dmFyIG89ZS5ub2RlLmF0dHJzLmNvbHNwYW4rdC0xO28+PW4mJihuPXQpLG8+ciYmKHI9byl9KSl9LGk9dDtpPj0wO2ktLSlvKGkpO3ZhciBzPWZ1bmN0aW9uKHQpe3ZhciBuPXB0KHQpKGUuc2VsZWN0aW9uKTtuJiZuLmZvckVhY2goKGZ1bmN0aW9uKGUpe3ZhciBuPWUubm9kZS5hdHRycy5jb2xzcGFuK3QtMTtlLm5vZGUuYXR0cnMuY29sc3Bhbj4xJiZuPnImJihyPW4pfSkpfTtmb3IoaT10O2k8PXI7aSsrKXMoaSk7dmFyIGE9W107Zm9yKGk9bjtpPD1yO2krKyl7dmFyIGM9cHQoaSkoZS5zZWxlY3Rpb24pO2MmJmMubGVuZ3RoJiZhLnB1c2goaSl9bj1hWzBdLHI9YVthLmxlbmd0aC0xXTtmb3IodmFyIGw9cHQobikoZS5zZWxlY3Rpb24pLHA9dXQoMCkoZS5zZWxlY3Rpb24pLHU9ZS5kb2MucmVzb2x2ZShsW2wubGVuZ3RoLTFdLnBvcyksaD12b2lkIDAsZj1yO2Y+PW47Zi0tKXt2YXIgZD1wdChmKShlLnNlbGVjdGlvbik7aWYoZCYmZC5sZW5ndGgpe2Zvcih2YXIgdj1wLmxlbmd0aC0xO3Y+PTA7di0tKWlmKHBbdl0ucG9zPT09ZFswXS5wb3Mpe2g9ZFswXTticmVha31pZihoKWJyZWFrfX12YXIgbT1lLmRvYy5yZXNvbHZlKGgucG9zKTtyZXR1cm57JGFuY2hvcjp1LCRoZWFkOm0saW5kZXhlczphfX19LEJ0PWZ1bmN0aW9uKHQpe3JldHVybiBmdW5jdGlvbihlKXtmb3IodmFyIG49dCxyPXQsbz1mdW5jdGlvbih0KXt2YXIgbz11dCh0KShlLnNlbGVjdGlvbik7by5mb3JFYWNoKChmdW5jdGlvbihlKXt2YXIgbz1lLm5vZGUuYXR0cnMucm93c3Bhbit0LTE7bz49biYmKG49dCksbz5yJiYocj1vKX0pKX0saT10O2k+PTA7aS0tKW8oaSk7dmFyIHM9ZnVuY3Rpb24odCl7dmFyIG49dXQodCkoZS5zZWxlY3Rpb24pO24uZm9yRWFjaCgoZnVuY3Rpb24oZSl7dmFyIG49ZS5ub2RlLmF0dHJzLnJvd3NwYW4rdC0xO2Uubm9kZS5hdHRycy5yb3dzcGFuPjEmJm4+ciYmKHI9bil9KSl9O2ZvcihpPXQ7aTw9cjtpKyspcyhpKTt2YXIgYT1bXTtmb3IoaT1uO2k8PXI7aSsrKXt2YXIgYz11dChpKShlLnNlbGVjdGlvbik7YyYmYy5sZW5ndGgmJmEucHVzaChpKX1uPWFbMF0scj1hW2EubGVuZ3RoLTFdO2Zvcih2YXIgbD11dChuKShlLnNlbGVjdGlvbikscD1wdCgwKShlLnNlbGVjdGlvbiksdT1lLmRvYy5yZXNvbHZlKGxbbC5sZW5ndGgtMV0ucG9zKSxoPXZvaWQgMCxmPXI7Zj49bjtmLS0pe3ZhciBkPXV0KGYpKGUuc2VsZWN0aW9uKTtpZihkJiZkLmxlbmd0aCl7Zm9yKHZhciB2PXAubGVuZ3RoLTE7dj49MDt2LS0paWYocFt2XS5wb3M9PT1kWzBdLnBvcyl7aD1kWzBdO2JyZWFrfWlmKGgpYnJlYWt9fXZhciBtPWUuZG9jLnJlc29sdmUoaC5wb3MpO3JldHVybnskYW5jaG9yOnUsJGhlYWQ6bSxpbmRleGVzOmF9fX07ZS5pc05vZGVTZWxlY3Rpb249ZyxlLmNhbkluc2VydD1PLGUuY29udmVydFRhYmxlTm9kZVRvQXJyYXlPZlJvd3M9UixlLmNvbnZlcnRBcnJheU9mUm93c1RvVGFibGVOb2RlPUQsZS5maW5kUGFyZW50Tm9kZT1GLGUuZmluZFBhcmVudE5vZGVDbG9zZXN0VG9Qb3M9QixlLmZpbmRQYXJlbnREb21SZWY9aixlLmhhc1BhcmVudE5vZGU9JCxlLmZpbmRQYXJlbnROb2RlT2ZUeXBlPVYsZS5maW5kUGFyZW50Tm9kZU9mVHlwZUNsb3Nlc3RUb1Bvcz1MLGUuaGFzUGFyZW50Tm9kZU9mVHlwZT1KLGUuZmluZFBhcmVudERvbVJlZk9mVHlwZT1xLGUuZmluZFNlbGVjdGVkTm9kZU9mVHlwZT1XLGUuZmluZFBvc2l0aW9uT2ZOb2RlQmVmb3JlPUgsZS5maW5kRG9tUmVmQXRQb3M9SyxlLmZsYXR0ZW49VSxlLmZpbmRDaGlsZHJlbj1HLGUuZmluZFRleHROb2Rlcz1YLGUuZmluZElubGluZU5vZGVzPVksZS5maW5kQmxvY2tOb2Rlcz1RLGUuZmluZENoaWxkcmVuQnlBdHRyPVosZS5maW5kQ2hpbGRyZW5CeVR5cGU9dHQsZS5maW5kQ2hpbGRyZW5CeU1hcms9ZXQsZS5jb250YWlucz1udCxlLmZpbmRUYWJsZT1vdCxlLmlzQ2VsbFNlbGVjdGlvbj1pdCxlLmdldFNlbGVjdGlvblJlY3Q9c3QsZS5pc0NvbHVtblNlbGVjdGVkPWF0LGUuaXNSb3dTZWxlY3RlZD1jdCxlLmlzVGFibGVTZWxlY3RlZD1sdCxlLmdldENlbGxzSW5Db2x1bW49cHQsZS5nZXRDZWxsc0luUm93PXV0LGUuZ2V0Q2VsbHNJblRhYmxlPWh0LGUuc2VsZWN0Q29sdW1uPWR0LGUuc2VsZWN0Um93PXZ0LGUuc2VsZWN0VGFibGU9bXQsZS5lbXB0eUNlbGw9eXQsZS5hZGRDb2x1bW5BdD1ndCxlLm1vdmVSb3c9d3QsZS5tb3ZlQ29sdW1uPXh0LGUuYWRkUm93QXQ9YnQsZS5jbG9uZVJvd0F0PWt0LGUucmVtb3ZlQ29sdW1uQXQ9U3QsZS5yZW1vdmVSb3dBdD1DdCxlLnJlbW92ZVRhYmxlPU90LGUucmVtb3ZlU2VsZWN0ZWRDb2x1bW5zPU10LGUucmVtb3ZlU2VsZWN0ZWRSb3dzPVR0LGUucmVtb3ZlQ29sdW1uQ2xvc2VzdFRvUG9zPU50LGUucmVtb3ZlUm93Q2xvc2VzdFRvUG9zPUV0LGUuZm9yRWFjaENlbGxJbkNvbHVtbj1BdCxlLmZvckVhY2hDZWxsSW5Sb3c9UnQsZS5zZXRDZWxsQXR0cnM9RHQsZS5jcmVhdGVUYWJsZT16dCxlLmZpbmRDZWxsQ2xvc2VzdFRvUG9zPVB0LGUuZmluZENlbGxSZWN0Q2xvc2VzdFRvUG9zPUl0LGUuZ2V0U2VsZWN0aW9uUmFuZ2VJbkNvbHVtbj1GdCxlLmdldFNlbGVjdGlvblJhbmdlSW5Sb3c9QnQsZS5yZW1vdmVQYXJlbnROb2RlT2ZUeXBlPXMsZS5yZXBsYWNlUGFyZW50Tm9kZU9mVHlwZT1hLGUucmVtb3ZlU2VsZWN0ZWROb2RlPWMsZS5yZXBsYWNlU2VsZWN0ZWROb2RlPWwsZS5zZXRUZXh0U2VsZWN0aW9uPXAsZS5zYWZlSW5zZXJ0PWQsZS5zZXRQYXJlbnROb2RlTWFya3VwPXYsZS5zZWxlY3RQYXJlbnROb2RlT2ZUeXBlPW0sZS5yZW1vdmVOb2RlQmVmb3JlPXl9LGVmZGY6ZnVuY3Rpb24odCxlLG4peyJ1c2Ugc3RyaWN0IjtPYmplY3QuZGVmaW5lUHJvcGVydHkoZSwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSk7dmFyIHI9bigiNmZmYiIpLG89bigiMzZkMCIpLGk9bigiZmM4OCIpLHM9ZnVuY3Rpb24odCl7cmV0dXJuIGZ1bmN0aW9uKGUpe3ZhciBuPVYodCkoZS5zZWxlY3Rpb24pO3JldHVybiBuP1Mobi5wb3MpKGUpOmV9fSxhPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIGZ1bmN0aW9uKG4pe0FycmF5LmlzQXJyYXkodCl8fCh0PVt0XSk7Zm9yKHZhciByPTAsbz10Lmxlbmd0aDtyPG87cisrKXt2YXIgaT1WKHRbcl0pKG4uc2VsZWN0aW9uKTtpZihpKXt2YXIgcz1iKGkucG9zLGUpKG4pO2lmKHMhPT1uKXJldHVybiBzfX1yZXR1cm4gbn19LGM9ZnVuY3Rpb24odCl7aWYoZyh0LnNlbGVjdGlvbikpe3ZhciBlPXQuc2VsZWN0aW9uLiRmcm9tLnBvcyxuPXQuc2VsZWN0aW9uLiR0by5wb3M7cmV0dXJuIHgodC5kZWxldGUoZSxuKSl9cmV0dXJuIHR9LGw9ZnVuY3Rpb24odCl7cmV0dXJuIGZ1bmN0aW9uKGUpe2lmKGcoZS5zZWxlY3Rpb24pKXt2YXIgbj1lLnNlbGVjdGlvbixpPW4uJGZyb20scz1uLiR0bztpZih0IGluc3RhbmNlb2Ygby5GcmFnbWVudCYmaS5wYXJlbnQuY2FuUmVwbGFjZShpLmluZGV4KCksaS5pbmRleEFmdGVyKCksdCl8fGkucGFyZW50LmNhblJlcGxhY2VXaXRoKGkuaW5kZXgoKSxpLmluZGV4QWZ0ZXIoKSx0LnR5cGUpKXJldHVybiB4KGUucmVwbGFjZVdpdGgoaS5wb3Mscy5wb3MsdCkuc2V0U2VsZWN0aW9uKG5ldyByLk5vZGVTZWxlY3Rpb24oZS5kb2MucmVzb2x2ZShpLnBvcykpKSl9cmV0dXJuIGV9fSxwPWZ1bmN0aW9uKHQpe3ZhciBlPWFyZ3VtZW50cy5sZW5ndGg+MSYmdm9pZCAwIT09YXJndW1lbnRzWzFdP2FyZ3VtZW50c1sxXToxO3JldHVybiBmdW5jdGlvbihuKXt2YXIgbz1yLlNlbGVjdGlvbi5maW5kRnJvbShuLmRvYy5yZXNvbHZlKHQpLGUsITApO3JldHVybiBvP24uc2V0U2VsZWN0aW9uKG8pOm59fSx1PWZ1bmN0aW9uKHQpe3JldHVybiB0LnR5cGUmJnQudHlwZS5zcGVjLnNlbGVjdGFibGV9LGg9ZnVuY3Rpb24odCl7cmV0dXJuIHUodCkmJnQudHlwZS5pc0xlYWZ9LGY9ZnVuY3Rpb24odCxlLG4pe3JldHVybiBoKHQpP24uc2V0U2VsZWN0aW9uKG5ldyByLk5vZGVTZWxlY3Rpb24obi5kb2MucmVzb2x2ZShlKSkpOnAoZSkobil9LGQ9ZnVuY3Rpb24odCxlLG4pe3JldHVybiBmdW5jdGlvbihyKXt2YXIgbz0ibnVtYmVyIj09PXR5cGVvZiBlLGk9ci5zZWxlY3Rpb24uJGZyb20scz1vP3IuZG9jLnJlc29sdmUoZSk6ZyhyLnNlbGVjdGlvbik/ci5kb2MucmVzb2x2ZShpLnBvcysxKTppLGM9cy5wYXJlbnQ7aWYoZyhyLnNlbGVjdGlvbikmJm4pe3ZhciBwPXI7aWYocj1sKHQpKHIpLHAhPT1yKXJldHVybiByfWlmKE0oYykpe3ZhciBoPXI7aWYocj1hKGMudHlwZSx0KShyKSxoIT09cil7dmFyIGQ9dSh0KT9zLmJlZm9yZShzLmRlcHRoKTpzLnBvcztyZXR1cm4gZih0LGQscil9fWlmKE8ocyx0KSl7ci5pbnNlcnQocy5wb3MsdCk7dmFyIHY9bz9zLnBvczp1KHQpP3Iuc2VsZWN0aW9uLiRhbmNob3IucG9zLTE6ci5zZWxlY3Rpb24uJGFuY2hvci5wb3M7cmV0dXJuIHgoZih0LHYscikpfWZvcih2YXIgbT1zLmRlcHRoO20+MDttLS0pe3ZhciB5PXMuYWZ0ZXIobSksdz1yLmRvYy5yZXNvbHZlKHkpO2lmKE8odyx0KSlyZXR1cm4gci5pbnNlcnQoeSx0KSx4KGYodCx5LHIpKX1yZXR1cm4gcn19LHY9ZnVuY3Rpb24odCxlLG4scil7cmV0dXJuIGZ1bmN0aW9uKG8pe3ZhciBpPVYodCkoby5zZWxlY3Rpb24pO3JldHVybiBpP3goby5zZXROb2RlTWFya3VwKGkucG9zLGUsT2JqZWN0LmFzc2lnbih7fSxpLm5vZGUuYXR0cnMsbikscikpOm99fSxtPWZ1bmN0aW9uKHQpe3JldHVybiBmdW5jdGlvbihlKXtpZighZyhlLnNlbGVjdGlvbikpe3ZhciBuPVYodCkoZS5zZWxlY3Rpb24pO2lmKG4pcmV0dXJuIHgoZS5zZXRTZWxlY3Rpb24oci5Ob2RlU2VsZWN0aW9uLmNyZWF0ZShlLmRvYyxuLnBvcykpKX1yZXR1cm4gZX19LHk9ZnVuY3Rpb24odCl7dmFyIGU9SCh0LnNlbGVjdGlvbik7cmV0dXJuIm51bWJlciI9PT10eXBlb2YgZT9TKGUpKHQpOnR9LGc9ZnVuY3Rpb24odCl7cmV0dXJuIHQgaW5zdGFuY2VvZiByLk5vZGVTZWxlY3Rpb259LHc9ZnVuY3Rpb24odCxlKXtyZXR1cm4gQXJyYXkuaXNBcnJheSh0KSYmdC5pbmRleE9mKGUudHlwZSk+LTF8fGUudHlwZT09PXR9LHg9ZnVuY3Rpb24odCl7cmV0dXJuIE9iamVjdC5hc3NpZ24oT2JqZWN0LmNyZWF0ZSh0KSx0KS5zZXRUaW1lKERhdGUubm93KCkpfSxiPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIGZ1bmN0aW9uKG4pe3ZhciByPW4uZG9jLm5vZGVBdCh0KSxvPW4uZG9jLnJlc29sdmUodCk7aWYoayhvLGUpKXtuPW4ucmVwbGFjZVdpdGgodCx0K3Iubm9kZVNpemUsZSk7dmFyIGk9bi5zZWxlY3Rpb24uJGZyb20ucG9zLTE7cmV0dXJuIG49cChNYXRoLm1heChpLDApLC0xKShuKSxuPXAobi5zZWxlY3Rpb24uJGZyb20uc3RhcnQoKSkobikseChuKX1yZXR1cm4gbn19LGs9ZnVuY3Rpb24odCxlKXt2YXIgbj10Lm5vZGUodC5kZXB0aCk7cmV0dXJuIG4mJm4udHlwZS52YWxpZENvbnRlbnQoZSBpbnN0YW5jZW9mIG8uRnJhZ21lbnQ/ZTpvLkZyYWdtZW50LmZyb20oZSkpfSxTPWZ1bmN0aW9uKHQpe3JldHVybiBmdW5jdGlvbihlKXt2YXIgbj1lLmRvYy5ub2RlQXQodCk7cmV0dXJuIHgoZS5kZWxldGUodCx0K24ubm9kZVNpemUpKX19LEM9ZnVuY3Rpb24odCl7aWYodC5jYWNoZWQudGFibGVOb2RlVHlwZXMpcmV0dXJuIHQuY2FjaGVkLnRhYmxlTm9kZVR5cGVzO3ZhciBlPXt9O3JldHVybiBPYmplY3Qua2V5cyh0Lm5vZGVzKS5mb3JFYWNoKChmdW5jdGlvbihuKXt2YXIgcj10Lm5vZGVzW25dO3Iuc3BlYy50YWJsZVJvbGUmJihlW3Iuc3BlYy50YWJsZVJvbGVdPXIpfSkpLHQuY2FjaGVkLnRhYmxlTm9kZVR5cGVzPWUsZX0sTz1mdW5jdGlvbih0LGUpe3ZhciBuPXQuaW5kZXgoKTtyZXR1cm4gZSBpbnN0YW5jZW9mIG8uRnJhZ21lbnQ/dC5wYXJlbnQuY2FuUmVwbGFjZShuLG4sZSk6ZSBpbnN0YW5jZW9mIG8uTm9kZSYmdC5wYXJlbnQuY2FuUmVwbGFjZVdpdGgobixuLGUudHlwZSl9LE09ZnVuY3Rpb24odCl7cmV0dXJuIXR8fCJwYXJhZ3JhcGgiPT09dC50eXBlLm5hbWUmJjI9PT10Lm5vZGVTaXplfSxUPWZ1bmN0aW9uKHQpe3ZhciBlPWZ1bmN0aW9uKHQpe3JldHVybiB0LnR5cGUuc3BlYy50YWJsZVJvbGUmJi90YWJsZS9pLnRlc3QodC50eXBlLnNwZWMudGFibGVSb2xlKX07cmV0dXJuIEIodCxlKX0sTj1mdW5jdGlvbih0KXt2YXIgZT1hcmd1bWVudHMubGVuZ3RoPjEmJnZvaWQgMCE9PWFyZ3VtZW50c1sxXT9hcmd1bWVudHNbMV06bnVsbDtyZXR1cm4gZT90LmNyZWF0ZUNoZWNrZWQobnVsbCxlKTp0LmNyZWF0ZUFuZEZpbGwoKX0sRT1mdW5jdGlvbih0KXtyZXR1cm4gZnVuY3Rpb24oZSl7Zm9yKHZhciBuPWkuVGFibGVNYXAuZ2V0KGUuJGFuY2hvckNlbGwubm9kZSgtMSkpLHI9ZS4kYW5jaG9yQ2VsbC5zdGFydCgtMSksbz1uLmNlbGxzSW5SZWN0KHQpLHM9bi5jZWxsc0luUmVjdChuLnJlY3RCZXR3ZWVuKGUuJGFuY2hvckNlbGwucG9zLXIsZS4kaGVhZENlbGwucG9zLXIpKSxhPTAsYz1vLmxlbmd0aDthPGM7YSsrKWlmKC0xPT09cy5pbmRleE9mKG9bYV0pKXJldHVybiExO3JldHVybiEwfX0sQT1mdW5jdGlvbih0KXtyZXR1cm4gdFswXS5tYXAoKGZ1bmN0aW9uKGUsbil7cmV0dXJuIHQubWFwKChmdW5jdGlvbih0KXtyZXR1cm4gdFtuXX0pKX0pKX0sUj1mdW5jdGlvbih0KXtmb3IodmFyIGU9aS5UYWJsZU1hcC5nZXQodCksbj1bXSxyPTA7cjxlLmhlaWdodDtyKyspe2Zvcih2YXIgbz1bXSxzPXt9LGE9MDthPGUud2lkdGg7YSsrKXt2YXIgYz1lLm1hcFtyKmUud2lkdGgrYV0sbD10Lm5vZGVBdChjKSxwPWUuZmluZENlbGwoYyk7c1tjXXx8cC50b3AhPT1yP28ucHVzaChudWxsKTooc1tjXT0hMCxvLnB1c2gobCkpfW4ucHVzaChvKX1yZXR1cm4gbn0sRD1mdW5jdGlvbih0LGUpe2Zvcih2YXIgbj1bXSxyPWkuVGFibGVNYXAuZ2V0KHQpLG89MDtvPHIuaGVpZ2h0O28rKyl7Zm9yKHZhciBzPXQuY2hpbGQobyksYT1bXSxjPTA7YzxyLndpZHRoO2MrKylpZihlW29dW2NdKXt2YXIgbD1yLm1hcFtvKnIud2lkdGgrY10scD1lW29dW2NdLHU9dC5ub2RlQXQobCksaD11LnR5cGUuY3JlYXRlQ2hlY2tlZChPYmplY3QuYXNzaWduKHt9LHAuYXR0cnMpLHAuY29udGVudCxwLm1hcmtzKTthLnB1c2goaCl9bi5wdXNoKHMudHlwZS5jcmVhdGVDaGVja2VkKHMuYXR0cnMsYSxzLm1hcmtzKSl9dmFyIGY9dC50eXBlLmNyZWF0ZUNoZWNrZWQodC5hdHRycyxuLHQubWFya3MpO3JldHVybiBmfSx6PWZ1bmN0aW9uKHQsZSxuLHIpe3ZhciBvPUEoUih0Lm5vZGUpKTtyZXR1cm4gbz1JKG8sZSxuLHIpLG89QShvKSxEKHQubm9kZSxvKX0sUD1mdW5jdGlvbih0LGUsbixyKXt2YXIgbz1SKHQubm9kZSk7cmV0dXJuIG89SShvLGUsbixyKSxEKHQubm9kZSxvKX0sST1mdW5jdGlvbih0LGUsbixyKXt2YXIgbz1lWzBdPm5bMF0/LTE6MSxpPXQuc3BsaWNlKGVbMF0sZS5sZW5ndGgpLHM9aS5sZW5ndGglMj09PTA/MTowLGE9dm9pZCAwO3JldHVybiBhPS0xPT09ciYmMT09PW8/blswXS0xOjE9PT1yJiYtMT09PW8/bltuLmxlbmd0aC0xXS1zKzE6LTE9PT1vP25bMF06bltuLmxlbmd0aC0xXS1zLHQuc3BsaWNlLmFwcGx5KHQsW2EsMF0uY29uY2F0KGkpKSx0fSxfPWZ1bmN0aW9uKHQsZSxuLHIpe3ZhciBvPXQ+ZT8tMToxLGk9IlRhcmdldCBwb3NpdGlvbiBpcyBpbnZhbGlkLCB5b3UgY2FuJ3QgbW92ZSB0aGUgIityKyIgIit0KyIgdG8gIitlKyIsIHRoZSB0YXJnZXQgY2FuJ3QgYmUgc3BsaXQuIFlvdSBjb3VsZCB1c2UgdHJ5VG9GaXQgb3B0aW9uLiI7aWYoMT09PW8pe2lmKC0xIT09bi5zbGljZSgwLG4ubGVuZ3RoLTEpLmluZGV4T2YoZSkpdGhyb3cgbmV3IEVycm9yKGkpfWVsc2UgaWYoLTEhPT1uLnNsaWNlKDEpLmluZGV4T2YoZSkpdGhyb3cgbmV3IEVycm9yKGkpO3JldHVybiEwfSxGPWZ1bmN0aW9uKHQpe3JldHVybiBmdW5jdGlvbihlKXt2YXIgbj1lLiRmcm9tO3JldHVybiBCKG4sdCl9fSxCPWZ1bmN0aW9uKHQsZSl7Zm9yKHZhciBuPXQuZGVwdGg7bj4wO24tLSl7dmFyIHI9dC5ub2RlKG4pO2lmKGUocikpcmV0dXJue3BvczpuPjA/dC5iZWZvcmUobik6MCxzdGFydDp0LnN0YXJ0KG4pLGRlcHRoOm4sbm9kZTpyfX19LGo9ZnVuY3Rpb24odCxlKXtyZXR1cm4gZnVuY3Rpb24obil7dmFyIHI9Rih0KShuKTtpZihyKXJldHVybiBLKHIucG9zLGUpfX0sJD1mdW5jdGlvbih0KXtyZXR1cm4gZnVuY3Rpb24oZSl7cmV0dXJuISFGKHQpKGUpfX0sVj1mdW5jdGlvbih0KXtyZXR1cm4gZnVuY3Rpb24oZSl7cmV0dXJuIEYoKGZ1bmN0aW9uKGUpe3JldHVybiB3KHQsZSl9KSkoZSl9fSxMPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIEIodCwoZnVuY3Rpb24odCl7cmV0dXJuIHcoZSx0KX0pKX0sSj1mdW5jdGlvbih0KXtyZXR1cm4gZnVuY3Rpb24oZSl7cmV0dXJuICQoKGZ1bmN0aW9uKGUpe3JldHVybiB3KHQsZSl9KSkoZSl9fSxxPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIGZ1bmN0aW9uKG4pe3JldHVybiBqKChmdW5jdGlvbihlKXtyZXR1cm4gdyh0LGUpfSksZSkobil9fSxXPWZ1bmN0aW9uKHQpe3JldHVybiBmdW5jdGlvbihlKXtpZihnKGUpKXt2YXIgbj1lLm5vZGUscj1lLiRmcm9tO2lmKHcodCxuKSlyZXR1cm57bm9kZTpuLHBvczpyLnBvcyxkZXB0aDpyLmRlcHRofX19fSxIPWZ1bmN0aW9uKHQpe3ZhciBlPXQuJGZyb20ubm9kZUJlZm9yZSxuPXIuU2VsZWN0aW9uLmZpbmRGcm9tKHQuJGZyb20sLTEpO2lmKG4mJmUpe3ZhciBvPVYoZS50eXBlKShuKTtyZXR1cm4gbz9vLnBvczpuLiRmcm9tLnBvc319LEs9ZnVuY3Rpb24odCxlKXt2YXIgbj1lKHQpLHI9bi5ub2RlLmNoaWxkTm9kZXNbbi5vZmZzZXRdO3JldHVybiBuLm5vZGUubm9kZVR5cGU9PT1Ob2RlLlRFWFRfTk9ERT9uLm5vZGUucGFyZW50Tm9kZTpyJiZyLm5vZGVUeXBlIT09Tm9kZS5URVhUX05PREU/cjpuLm5vZGV9LFU9ZnVuY3Rpb24odCl7dmFyIGU9IShhcmd1bWVudHMubGVuZ3RoPjEmJnZvaWQgMCE9PWFyZ3VtZW50c1sxXSl8fGFyZ3VtZW50c1sxXTtpZighdCl0aHJvdyBuZXcgRXJyb3IoJ0ludmFsaWQgIm5vZGUiIHBhcmFtZXRlcicpO3ZhciBuPVtdO3JldHVybiB0LmRlc2NlbmRhbnRzKChmdW5jdGlvbih0LHIpe2lmKG4ucHVzaCh7bm9kZTp0LHBvczpyfSksIWUpcmV0dXJuITF9KSksbn0sRz1mdW5jdGlvbih0LGUsbil7aWYoIXQpdGhyb3cgbmV3IEVycm9yKCdJbnZhbGlkICJub2RlIiBwYXJhbWV0ZXInKTtpZighZSl0aHJvdyBuZXcgRXJyb3IoJ0ludmFsaWQgInByZWRpY2F0ZSIgcGFyYW1ldGVyJyk7cmV0dXJuIFUodCxuKS5maWx0ZXIoKGZ1bmN0aW9uKHQpe3JldHVybiBlKHQubm9kZSl9KSl9LFg9ZnVuY3Rpb24odCxlKXtyZXR1cm4gRyh0LChmdW5jdGlvbih0KXtyZXR1cm4gdC5pc1RleHR9KSxlKX0sWT1mdW5jdGlvbih0LGUpe3JldHVybiBHKHQsKGZ1bmN0aW9uKHQpe3JldHVybiB0LmlzSW5saW5lfSksZSl9LFE9ZnVuY3Rpb24odCxlKXtyZXR1cm4gRyh0LChmdW5jdGlvbih0KXtyZXR1cm4gdC5pc0Jsb2NrfSksZSl9LFo9ZnVuY3Rpb24odCxlLG4pe3JldHVybiBHKHQsKGZ1bmN0aW9uKHQpe3JldHVybiEhZSh0LmF0dHJzKX0pLG4pfSx0dD1mdW5jdGlvbih0LGUsbil7cmV0dXJuIEcodCwoZnVuY3Rpb24odCl7cmV0dXJuIHQudHlwZT09PWV9KSxuKX0sZXQ9ZnVuY3Rpb24odCxlLG4pe3JldHVybiBHKHQsKGZ1bmN0aW9uKHQpe3JldHVybiBlLmlzSW5TZXQodC5tYXJrcyl9KSxuKX0sbnQ9ZnVuY3Rpb24odCxlKXtyZXR1cm4hIXR0KHQsZSkubGVuZ3RofTtmdW5jdGlvbiBydCh0KXtpZihBcnJheS5pc0FycmF5KHQpKXtmb3IodmFyIGU9MCxuPUFycmF5KHQubGVuZ3RoKTtlPHQubGVuZ3RoO2UrKyluW2VdPXRbZV07cmV0dXJuIG59cmV0dXJuIEFycmF5LmZyb20odCl9dmFyIG90PWZ1bmN0aW9uKHQpe3JldHVybiBGKChmdW5jdGlvbih0KXtyZXR1cm4gdC50eXBlLnNwZWMudGFibGVSb2xlJiYidGFibGUiPT09dC50eXBlLnNwZWMudGFibGVSb2xlfSkpKHQpfSxpdD1mdW5jdGlvbih0KXtyZXR1cm4gdCBpbnN0YW5jZW9mIGkuQ2VsbFNlbGVjdGlvbn0sc3Q9ZnVuY3Rpb24odCl7aWYoaXQodCkpe3ZhciBlPXQuJGFuY2hvckNlbGwuc3RhcnQoLTEpLG49aS5UYWJsZU1hcC5nZXQodC4kYW5jaG9yQ2VsbC5ub2RlKC0xKSk7cmV0dXJuIG4ucmVjdEJldHdlZW4odC4kYW5jaG9yQ2VsbC5wb3MtZSx0LiRoZWFkQ2VsbC5wb3MtZSl9fSxhdD1mdW5jdGlvbih0KXtyZXR1cm4gZnVuY3Rpb24oZSl7aWYoaXQoZSkpe3ZhciBuPWkuVGFibGVNYXAuZ2V0KGUuJGFuY2hvckNlbGwubm9kZSgtMSkpO3JldHVybiBFKHtsZWZ0OnQscmlnaHQ6dCsxLHRvcDowLGJvdHRvbTpuLmhlaWdodH0pKGUpfXJldHVybiExfX0sY3Q9ZnVuY3Rpb24odCl7cmV0dXJuIGZ1bmN0aW9uKGUpe2lmKGl0KGUpKXt2YXIgbj1pLlRhYmxlTWFwLmdldChlLiRhbmNob3JDZWxsLm5vZGUoLTEpKTtyZXR1cm4gRSh7bGVmdDowLHJpZ2h0Om4ud2lkdGgsdG9wOnQsYm90dG9tOnQrMX0pKGUpfXJldHVybiExfX0sbHQ9ZnVuY3Rpb24odCl7aWYoaXQodCkpe3ZhciBlPWkuVGFibGVNYXAuZ2V0KHQuJGFuY2hvckNlbGwubm9kZSgtMSkpO3JldHVybiBFKHtsZWZ0OjAscmlnaHQ6ZS53aWR0aCx0b3A6MCxib3R0b206ZS5oZWlnaHR9KSh0KX1yZXR1cm4hMX0scHQ9ZnVuY3Rpb24odCl7cmV0dXJuIGZ1bmN0aW9uKGUpe3ZhciBuPW90KGUpO2lmKG4pe3ZhciByPWkuVGFibGVNYXAuZ2V0KG4ubm9kZSksbz1BcnJheS5pc0FycmF5KHQpP3Q6QXJyYXkuZnJvbShbdF0pO3JldHVybiBvLnJlZHVjZSgoZnVuY3Rpb24odCxlKXtpZihlPj0wJiZlPD1yLndpZHRoLTEpe3ZhciBvPXIuY2VsbHNJblJlY3Qoe2xlZnQ6ZSxyaWdodDplKzEsdG9wOjAsYm90dG9tOnIuaGVpZ2h0fSk7cmV0dXJuIHQuY29uY2F0KG8ubWFwKChmdW5jdGlvbih0KXt2YXIgZT1uLm5vZGUubm9kZUF0KHQpLHI9dCtuLnN0YXJ0O3JldHVybntwb3M6cixzdGFydDpyKzEsbm9kZTplfX0pKSl9fSksW10pfX19LHV0PWZ1bmN0aW9uKHQpe3JldHVybiBmdW5jdGlvbihlKXt2YXIgbj1vdChlKTtpZihuKXt2YXIgcj1pLlRhYmxlTWFwLmdldChuLm5vZGUpLG89QXJyYXkuaXNBcnJheSh0KT90OkFycmF5LmZyb20oW3RdKTtyZXR1cm4gby5yZWR1Y2UoKGZ1bmN0aW9uKHQsZSl7aWYoZT49MCYmZTw9ci5oZWlnaHQtMSl7dmFyIG89ci5jZWxsc0luUmVjdCh7bGVmdDowLHJpZ2h0OnIud2lkdGgsdG9wOmUsYm90dG9tOmUrMX0pO3JldHVybiB0LmNvbmNhdChvLm1hcCgoZnVuY3Rpb24odCl7dmFyIGU9bi5ub2RlLm5vZGVBdCh0KSxyPXQrbi5zdGFydDtyZXR1cm57cG9zOnIsc3RhcnQ6cisxLG5vZGU6ZX19KSkpfX0pLFtdKX19fSxodD1mdW5jdGlvbih0KXt2YXIgZT1vdCh0KTtpZihlKXt2YXIgbj1pLlRhYmxlTWFwLmdldChlLm5vZGUpLHI9bi5jZWxsc0luUmVjdCh7bGVmdDowLHJpZ2h0Om4ud2lkdGgsdG9wOjAsYm90dG9tOm4uaGVpZ2h0fSk7cmV0dXJuIHIubWFwKChmdW5jdGlvbih0KXt2YXIgbj1lLm5vZGUubm9kZUF0KHQpLHI9dCtlLnN0YXJ0O3JldHVybntwb3M6cixzdGFydDpyKzEsbm9kZTpufX0pKX19LGZ0PWZ1bmN0aW9uKHQpe3JldHVybiBmdW5jdGlvbihlLG4pe3JldHVybiBmdW5jdGlvbihyKXt2YXIgbz1vdChyLnNlbGVjdGlvbikscz0icm93Ij09PXQ7aWYobyl7dmFyIGE9aS5UYWJsZU1hcC5nZXQoby5ub2RlKTtpZihlPj0wJiZlPChzP2EuaGVpZ2h0OmEud2lkdGgpKXt2YXIgYz1zPzA6ZSxsPXM/ZTowLHA9cz9hLndpZHRoOmUrMSx1PXM/ZSsxOmEuaGVpZ2h0O2lmKG4pe3ZhciBoPVB0KHIuc2VsZWN0aW9uLiRmcm9tKTtpZighaClyZXR1cm4gcjt2YXIgZj1hLmZpbmRDZWxsKGgucG9zLW8uc3RhcnQpO3M/KGw9TWF0aC5taW4obCxmLnRvcCksdT1NYXRoLm1heCh1LGYuYm90dG9tKSk6KGM9TWF0aC5taW4oYyxmLmxlZnQpLHA9TWF0aC5tYXgocCxmLnJpZ2h0KSl9dmFyIGQ9YS5jZWxsc0luUmVjdCh7bGVmdDpjLHRvcDpsLHJpZ2h0OnM/cDpjKzEsYm90dG9tOnM/bCsxOnV9KSx2PXUtbD09PTE/ZDphLmNlbGxzSW5SZWN0KHtsZWZ0OnM/YzpwLTEsdG9wOnM/dS0xOmwscmlnaHQ6cCxib3R0b206dX0pLG09by5zdGFydCtkWzBdLHk9by5zdGFydCt2W3YubGVuZ3RoLTFdLGc9ci5kb2MucmVzb2x2ZShtKSx3PXIuZG9jLnJlc29sdmUoeSk7cmV0dXJuIHgoci5zZXRTZWxlY3Rpb24obmV3IGkuQ2VsbFNlbGVjdGlvbih3LGcpKSl9fXJldHVybiByfX19LGR0PWZ0KCJjb2x1bW4iKSx2dD1mdCgicm93IiksbXQ9ZnVuY3Rpb24odCl7dmFyIGU9b3QodC5zZWxlY3Rpb24pO2lmKGUpe3ZhciBuPWkuVGFibGVNYXAuZ2V0KGUubm9kZSkscj1uLm1hcDtpZihyJiZyLmxlbmd0aCl7dmFyIG89ZS5zdGFydCtyWzBdLHM9ZS5zdGFydCtyW3IubGVuZ3RoLTFdLGE9dC5kb2MucmVzb2x2ZShvKSxjPXQuZG9jLnJlc29sdmUocyk7cmV0dXJuIHgodC5zZXRTZWxlY3Rpb24obmV3IGkuQ2VsbFNlbGVjdGlvbihjLGEpKSl9fXJldHVybiB0fSx5dD1mdW5jdGlvbih0LGUpe3JldHVybiBmdW5jdGlvbihuKXtpZih0KXt2YXIgcj1DKGUpLmNlbGwuY3JlYXRlQW5kRmlsbCgpLG89ci5jb250ZW50O2lmKCF0Lm5vZGUuY29udGVudC5lcShvKSlyZXR1cm4gbi5yZXBsYWNlV2l0aCh0LnBvcysxLHQucG9zK3Qubm9kZS5ub2RlU2l6ZSxvKSx4KG4pfXJldHVybiBufX0sZ3Q9ZnVuY3Rpb24odCl7cmV0dXJuIGZ1bmN0aW9uKGUpe3ZhciBuPW90KGUuc2VsZWN0aW9uKTtpZihuKXt2YXIgcj1pLlRhYmxlTWFwLmdldChuLm5vZGUpO2lmKHQ+PTAmJnQ8PXIud2lkdGgpcmV0dXJuIHgoaS5hZGRDb2x1bW4oZSx7bWFwOnIsdGFibGVTdGFydDpuLnN0YXJ0LHRhYmxlOm4ubm9kZX0sdCkpfXJldHVybiBlfX0sd3Q9ZnVuY3Rpb24odCxlLG4pe3JldHVybiBmdW5jdGlvbihyKXt2YXIgbz17dHJ5VG9GaXQ6ITEsZGlyZWN0aW9uOjB9LGk9T2JqZWN0LmFzc2lnbihvLG4pLHM9b3Qoci5zZWxlY3Rpb24pO2lmKCFzKXJldHVybiByO3ZhciBhPUJ0KHQpKHIpLGM9YS5pbmRleGVzLGw9QnQoZSkocikscD1sLmluZGV4ZXM7aWYoYy5pbmRleE9mKGUpPi0xKXJldHVybiByOyFpLnRyeVRvRml0JiZwLmxlbmd0aD4xJiZfKHQsZSxwLCJyb3ciKTt2YXIgdT1QKHMsYyxwLGkuZGlyZWN0aW9uKTtyZXR1cm4geChyKS5yZXBsYWNlV2l0aChzLnBvcyxzLnBvcytzLm5vZGUubm9kZVNpemUsdSl9fSx4dD1mdW5jdGlvbih0LGUsbil7cmV0dXJuIGZ1bmN0aW9uKHIpe3ZhciBvPXt0cnlUb0ZpdDohMSxkaXJlY3Rpb246MH0saT1PYmplY3QuYXNzaWduKG8sbikscz1vdChyLnNlbGVjdGlvbik7aWYoIXMpcmV0dXJuIHI7dmFyIGE9RnQodCkociksYz1hLmluZGV4ZXMsbD1GdChlKShyKSxwPWwuaW5kZXhlcztpZihjLmluZGV4T2YoZSk+LTEpcmV0dXJuIHI7IWkudHJ5VG9GaXQmJnAubGVuZ3RoPjEmJl8odCxlLHAsImNvbHVtbiIpO3ZhciB1PXoocyxjLHAsaS5kaXJlY3Rpb24pO3JldHVybiB4KHIpLnJlcGxhY2VXaXRoKHMucG9zLHMucG9zK3Mubm9kZS5ub2RlU2l6ZSx1KX19LGJ0PWZ1bmN0aW9uKHQsZSl7cmV0dXJuIGZ1bmN0aW9uKG4pe3ZhciByPW90KG4uc2VsZWN0aW9uKTtpZihyKXt2YXIgbz1pLlRhYmxlTWFwLmdldChyLm5vZGUpLHM9dC0xO2lmKGUmJnM+PTApcmV0dXJuIHgoa3QocykobikpO2lmKHQ+PTAmJnQ8PW8uaGVpZ2h0KXJldHVybiB4KGkuYWRkUm93KG4se21hcDpvLHRhYmxlU3RhcnQ6ci5zdGFydCx0YWJsZTpyLm5vZGV9LHQpKX1yZXR1cm4gbn19LGt0PWZ1bmN0aW9uKHQpe3JldHVybiBmdW5jdGlvbihlKXt2YXIgbj1vdChlLnNlbGVjdGlvbik7aWYobil7dmFyIHI9aS5UYWJsZU1hcC5nZXQobi5ub2RlKTtpZih0Pj0wJiZ0PD1yLmhlaWdodCl7Zm9yKHZhciBvPW4ubm9kZSxzPUMoby50eXBlLnNjaGVtYSksYT1uLnN0YXJ0LGM9MDtjPHQrMTtjKyspYSs9by5jaGlsZChjKS5ub2RlU2l6ZTt2YXIgbD1vLmNoaWxkKHQpLHA9W10sdT0wO2lmKGwuZm9yRWFjaCgoZnVuY3Rpb24odCl7MT09PXQuYXR0cnMucm93c3BhbiYmKHUrPXQuYXR0cnMuY29sc3BhbixwLnB1c2goc1t0LnR5cGUuc3BlYy50YWJsZVJvbGVdLmNyZWF0ZUFuZEZpbGwodC5hdHRycyx0Lm1hcmtzKSkpfSkpLHU8ci53aWR0aCl7Zm9yKHZhciBoPVtdLGY9ZnVuY3Rpb24obil7dmFyIHI9X3QobiwoZnVuY3Rpb24oZSxyKXt2YXIgbz1lLm5vZGUuYXR0cnMucm93c3BhbixpPW4rbztyZXR1cm4gbz4xJiZpPnR9KSkoZSk7aC5wdXNoLmFwcGx5KGgscnQocikpfSx2PXQ7dj49MDt2LS0pZih2KTtoLmxlbmd0aCYmaC5mb3JFYWNoKChmdW5jdGlvbih0KXtlPUR0KHQse3Jvd3NwYW46dC5ub2RlLmF0dHJzLnJvd3NwYW4rMX0pKGUpfSkpfXJldHVybiBkKHMucm93LmNyZWF0ZShsLmF0dHJzLHApLGEpKGUpfX1yZXR1cm4gZX19LFN0PWZ1bmN0aW9uKHQpe3JldHVybiBmdW5jdGlvbihlKXt2YXIgbj1vdChlLnNlbGVjdGlvbik7aWYobil7dmFyIHI9aS5UYWJsZU1hcC5nZXQobi5ub2RlKTtpZigwPT09dCYmMT09PXIud2lkdGgpcmV0dXJuIE90KGUpO2lmKHQ+PTAmJnQ8PXIud2lkdGgpcmV0dXJuIGkucmVtb3ZlQ29sdW1uKGUse21hcDpyLHRhYmxlU3RhcnQ6bi5zdGFydCx0YWJsZTpuLm5vZGV9LHQpLHgoZSl9cmV0dXJuIGV9fSxDdD1mdW5jdGlvbih0KXtyZXR1cm4gZnVuY3Rpb24oZSl7dmFyIG49b3QoZS5zZWxlY3Rpb24pO2lmKG4pe3ZhciByPWkuVGFibGVNYXAuZ2V0KG4ubm9kZSk7aWYoMD09PXQmJjE9PT1yLmhlaWdodClyZXR1cm4gT3QoZSk7aWYodD49MCYmdDw9ci5oZWlnaHQpcmV0dXJuIGkucmVtb3ZlUm93KGUse21hcDpyLHRhYmxlU3RhcnQ6bi5zdGFydCx0YWJsZTpuLm5vZGV9LHQpLHgoZSl9cmV0dXJuIGV9fSxPdD1mdW5jdGlvbih0KXtmb3IodmFyIGU9dC5zZWxlY3Rpb24uJGZyb20sbj1lLmRlcHRoO24+MDtuLS0pe3ZhciByPWUubm9kZShuKTtpZigidGFibGUiPT09ci50eXBlLnNwZWMudGFibGVSb2xlKXJldHVybiB4KHQuZGVsZXRlKGUuYmVmb3JlKG4pLGUuYWZ0ZXIobikpKX1yZXR1cm4gdH0sTXQ9ZnVuY3Rpb24odCl7dmFyIGU9dC5zZWxlY3Rpb247aWYobHQoZSkpcmV0dXJuIE90KHQpO2lmKGl0KGUpKXt2YXIgbj1vdChlKTtpZihuKXt2YXIgcj1pLlRhYmxlTWFwLmdldChuLm5vZGUpLG89ci5yZWN0QmV0d2VlbihlLiRhbmNob3JDZWxsLnBvcy1uLnN0YXJ0LGUuJGhlYWRDZWxsLnBvcy1uLnN0YXJ0KTtpZigwPT1vLmxlZnQmJm8ucmlnaHQ9PXIud2lkdGgpcmV0dXJuITE7Zm9yKHZhciBzPU9iamVjdC5hc3NpZ24oe30sbyx7bWFwOnIsdGFibGU6bi5ub2RlLHRhYmxlU3RhcnQ6bi5zdGFydH0pLGE9cy5yaWdodC0xOzthLS0pe2lmKGkucmVtb3ZlQ29sdW1uKHQscyxhKSxhPT09cy5sZWZ0KWJyZWFrO3MudGFibGU9cy50YWJsZVN0YXJ0P3QuZG9jLm5vZGVBdChzLnRhYmxlU3RhcnQtMSk6dC5kb2Mscy5tYXA9aS5UYWJsZU1hcC5nZXQocy50YWJsZSl9cmV0dXJuIHgodCl9fXJldHVybiB0fSxUdD1mdW5jdGlvbih0KXt2YXIgZT10LnNlbGVjdGlvbjtpZihsdChlKSlyZXR1cm4gT3QodCk7aWYoaXQoZSkpe3ZhciBuPW90KGUpO2lmKG4pe3ZhciByPWkuVGFibGVNYXAuZ2V0KG4ubm9kZSksbz1yLnJlY3RCZXR3ZWVuKGUuJGFuY2hvckNlbGwucG9zLW4uc3RhcnQsZS4kaGVhZENlbGwucG9zLW4uc3RhcnQpO2lmKDA9PW8udG9wJiZvLmJvdHRvbT09ci5oZWlnaHQpcmV0dXJuITE7Zm9yKHZhciBzPU9iamVjdC5hc3NpZ24oe30sbyx7bWFwOnIsdGFibGU6bi5ub2RlLHRhYmxlU3RhcnQ6bi5zdGFydH0pLGE9cy5ib3R0b20tMTs7YS0tKXtpZihpLnJlbW92ZVJvdyh0LHMsYSksYT09PXMudG9wKWJyZWFrO3MudGFibGU9cy50YWJsZVN0YXJ0P3QuZG9jLm5vZGVBdChzLnRhYmxlU3RhcnQtMSk6dC5kb2Mscy5tYXA9aS5UYWJsZU1hcC5nZXQocy50YWJsZSl9cmV0dXJuIHgodCl9fXJldHVybiB0fSxOdD1mdW5jdGlvbih0KXtyZXR1cm4gZnVuY3Rpb24oZSl7dmFyIG49SXQodCk7cmV0dXJuIG4/U3Qobi5sZWZ0KShwKHQucG9zKShlKSk6ZX19LEV0PWZ1bmN0aW9uKHQpe3JldHVybiBmdW5jdGlvbihlKXt2YXIgbj1JdCh0KTtyZXR1cm4gbj9DdChuLnRvcCkocCh0LnBvcykoZSkpOmV9fSxBdD1mdW5jdGlvbih0LGUsbil7cmV0dXJuIGZ1bmN0aW9uKG8pe3ZhciBpPXB0KHQpKG8uc2VsZWN0aW9uKTtpZihpKXtmb3IodmFyIHM9aS5sZW5ndGgtMTtzPj0wO3MtLSlvPWUoaVtzXSxvKTtpZihuKXt2YXIgYT1vLmRvYy5yZXNvbHZlKG8ubWFwcGluZy5tYXAoaVtpLmxlbmd0aC0xXS5wb3MpKTtvLnNldFNlbGVjdGlvbihyLlNlbGVjdGlvbi5uZWFyKGEpKX1yZXR1cm4geChvKX1yZXR1cm4gb319LFJ0PWZ1bmN0aW9uKHQsZSxuKXtyZXR1cm4gZnVuY3Rpb24obyl7dmFyIGk9dXQodCkoby5zZWxlY3Rpb24pO2lmKGkpe2Zvcih2YXIgcz1pLmxlbmd0aC0xO3M+PTA7cy0tKW89ZShpW3NdLG8pO2lmKG4pe3ZhciBhPW8uZG9jLnJlc29sdmUoby5tYXBwaW5nLm1hcChpW2kubGVuZ3RoLTFdLnBvcykpO28uc2V0U2VsZWN0aW9uKHIuU2VsZWN0aW9uLm5lYXIoYSkpfX1yZXR1cm4gb319LER0PWZ1bmN0aW9uKHQsZSl7cmV0dXJuIGZ1bmN0aW9uKG4pe3JldHVybiB0PyhuLnNldE5vZGVNYXJrdXAodC5wb3MsbnVsbCxPYmplY3QuYXNzaWduKHt9LHQubm9kZS5hdHRycyxlKSkseChuKSk6bn19LHp0PWZ1bmN0aW9uKHQpe2Zvcih2YXIgZT1hcmd1bWVudHMubGVuZ3RoPjEmJnZvaWQgMCE9PWFyZ3VtZW50c1sxXT9hcmd1bWVudHNbMV06MyxuPWFyZ3VtZW50cy5sZW5ndGg+MiYmdm9pZCAwIT09YXJndW1lbnRzWzJdP2FyZ3VtZW50c1syXTozLHI9IShhcmd1bWVudHMubGVuZ3RoPjMmJnZvaWQgMCE9PWFyZ3VtZW50c1szXSl8fGFyZ3VtZW50c1szXSxvPWFyZ3VtZW50cy5sZW5ndGg+NCYmdm9pZCAwIT09YXJndW1lbnRzWzRdP2FyZ3VtZW50c1s0XTpudWxsLGk9Qyh0KSxzPWkuY2VsbCxhPWkuaGVhZGVyX2NlbGwsYz1pLnJvdyxsPWkudGFibGUscD1bXSx1PVtdLGg9MDtoPG47aCsrKXAucHVzaChOKHMsbykpLHImJnUucHVzaChOKGEsbykpO2Zvcih2YXIgZj1bXSxkPTA7ZDxlO2QrKylmLnB1c2goYy5jcmVhdGVDaGVja2VkKG51bGwsciYmMD09PWQ/dTpwKSk7cmV0dXJuIGwuY3JlYXRlQ2hlY2tlZChudWxsLGYpfSxQdD1mdW5jdGlvbih0KXt2YXIgZT1mdW5jdGlvbih0KXtyZXR1cm4gdC50eXBlLnNwZWMudGFibGVSb2xlJiYvY2VsbC9pLnRlc3QodC50eXBlLnNwZWMudGFibGVSb2xlKX07cmV0dXJuIEIodCxlKX0sSXQ9ZnVuY3Rpb24odCl7dmFyIGU9UHQodCk7aWYoZSl7dmFyIG49VCh0KSxyPWkuVGFibGVNYXAuZ2V0KG4ubm9kZSksbz1lLnBvcy1uLnN0YXJ0O3JldHVybiByLnJlY3RCZXR3ZWVuKG8sbyl9fSxfdD1mdW5jdGlvbih0LGUpe3JldHVybiBmdW5jdGlvbihuKXt2YXIgcj1bXSxvPXV0KHQpKG4uc2VsZWN0aW9uKTtpZihvKWZvcih2YXIgaT1vLmxlbmd0aC0xO2k+PTA7aS0tKWUob1tpXSxuKSYmci5wdXNoKG9baV0pO3JldHVybiByfX0sRnQ9ZnVuY3Rpb24odCl7cmV0dXJuIGZ1bmN0aW9uKGUpe2Zvcih2YXIgbj10LHI9dCxvPWZ1bmN0aW9uKHQpe3ZhciBvPXB0KHQpKGUuc2VsZWN0aW9uKTtvJiZvLmZvckVhY2goKGZ1bmN0aW9uKGUpe3ZhciBvPWUubm9kZS5hdHRycy5jb2xzcGFuK3QtMTtvPj1uJiYobj10KSxvPnImJihyPW8pfSkpfSxpPXQ7aT49MDtpLS0pbyhpKTt2YXIgcz1mdW5jdGlvbih0KXt2YXIgbj1wdCh0KShlLnNlbGVjdGlvbik7biYmbi5mb3JFYWNoKChmdW5jdGlvbihlKXt2YXIgbj1lLm5vZGUuYXR0cnMuY29sc3Bhbit0LTE7ZS5ub2RlLmF0dHJzLmNvbHNwYW4+MSYmbj5yJiYocj1uKX0pKX07Zm9yKGk9dDtpPD1yO2krKylzKGkpO3ZhciBhPVtdO2ZvcihpPW47aTw9cjtpKyspe3ZhciBjPXB0KGkpKGUuc2VsZWN0aW9uKTtjJiZjLmxlbmd0aCYmYS5wdXNoKGkpfW49YVswXSxyPWFbYS5sZW5ndGgtMV07Zm9yKHZhciBsPXB0KG4pKGUuc2VsZWN0aW9uKSxwPXV0KDApKGUuc2VsZWN0aW9uKSx1PWUuZG9jLnJlc29sdmUobFtsLmxlbmd0aC0xXS5wb3MpLGg9dm9pZCAwLGY9cjtmPj1uO2YtLSl7dmFyIGQ9cHQoZikoZS5zZWxlY3Rpb24pO2lmKGQmJmQubGVuZ3RoKXtmb3IodmFyIHY9cC5sZW5ndGgtMTt2Pj0wO3YtLSlpZihwW3ZdLnBvcz09PWRbMF0ucG9zKXtoPWRbMF07YnJlYWt9aWYoaClicmVha319dmFyIG09ZS5kb2MucmVzb2x2ZShoLnBvcyk7cmV0dXJueyRhbmNob3I6dSwkaGVhZDptLGluZGV4ZXM6YX19fSxCdD1mdW5jdGlvbih0KXtyZXR1cm4gZnVuY3Rpb24oZSl7Zm9yKHZhciBuPXQscj10LG89ZnVuY3Rpb24odCl7dmFyIG89dXQodCkoZS5zZWxlY3Rpb24pO28uZm9yRWFjaCgoZnVuY3Rpb24oZSl7dmFyIG89ZS5ub2RlLmF0dHJzLnJvd3NwYW4rdC0xO28+PW4mJihuPXQpLG8+ciYmKHI9byl9KSl9LGk9dDtpPj0wO2ktLSlvKGkpO3ZhciBzPWZ1bmN0aW9uKHQpe3ZhciBuPXV0KHQpKGUuc2VsZWN0aW9uKTtuLmZvckVhY2goKGZ1bmN0aW9uKGUpe3ZhciBuPWUubm9kZS5hdHRycy5yb3dzcGFuK3QtMTtlLm5vZGUuYXR0cnMucm93c3Bhbj4xJiZuPnImJihyPW4pfSkpfTtmb3IoaT10O2k8PXI7aSsrKXMoaSk7dmFyIGE9W107Zm9yKGk9bjtpPD1yO2krKyl7dmFyIGM9dXQoaSkoZS5zZWxlY3Rpb24pO2MmJmMubGVuZ3RoJiZhLnB1c2goaSl9bj1hWzBdLHI9YVthLmxlbmd0aC0xXTtmb3IodmFyIGw9dXQobikoZS5zZWxlY3Rpb24pLHA9cHQoMCkoZS5zZWxlY3Rpb24pLHU9ZS5kb2MucmVzb2x2ZShsW2wubGVuZ3RoLTFdLnBvcyksaD12b2lkIDAsZj1yO2Y+PW47Zi0tKXt2YXIgZD11dChmKShlLnNlbGVjdGlvbik7aWYoZCYmZC5sZW5ndGgpe2Zvcih2YXIgdj1wLmxlbmd0aC0xO3Y+PTA7di0tKWlmKHBbdl0ucG9zPT09ZFswXS5wb3Mpe2g9ZFswXTticmVha31pZihoKWJyZWFrfX12YXIgbT1lLmRvYy5yZXNvbHZlKGgucG9zKTtyZXR1cm57JGFuY2hvcjp1LCRoZWFkOm0saW5kZXhlczphfX19O2UuaXNOb2RlU2VsZWN0aW9uPWcsZS5jYW5JbnNlcnQ9TyxlLmNvbnZlcnRUYWJsZU5vZGVUb0FycmF5T2ZSb3dzPVIsZS5jb252ZXJ0QXJyYXlPZlJvd3NUb1RhYmxlTm9kZT1ELGUuZmluZFBhcmVudE5vZGU9RixlLmZpbmRQYXJlbnROb2RlQ2xvc2VzdFRvUG9zPUIsZS5maW5kUGFyZW50RG9tUmVmPWosZS5oYXNQYXJlbnROb2RlPSQsZS5maW5kUGFyZW50Tm9kZU9mVHlwZT1WLGUuZmluZFBhcmVudE5vZGVPZlR5cGVDbG9zZXN0VG9Qb3M9TCxlLmhhc1BhcmVudE5vZGVPZlR5cGU9SixlLmZpbmRQYXJlbnREb21SZWZPZlR5cGU9cSxlLmZpbmRTZWxlY3RlZE5vZGVPZlR5cGU9VyxlLmZpbmRQb3NpdGlvbk9mTm9kZUJlZm9yZT1ILGUuZmluZERvbVJlZkF0UG9zPUssZS5mbGF0dGVuPVUsZS5maW5kQ2hpbGRyZW49RyxlLmZpbmRUZXh0Tm9kZXM9WCxlLmZpbmRJbmxpbmVOb2Rlcz1ZLGUuZmluZEJsb2NrTm9kZXM9USxlLmZpbmRDaGlsZHJlbkJ5QXR0cj1aLGUuZmluZENoaWxkcmVuQnlUeXBlPXR0LGUuZmluZENoaWxkcmVuQnlNYXJrPWV0LGUuY29udGFpbnM9bnQsZS5maW5kVGFibGU9b3QsZS5pc0NlbGxTZWxlY3Rpb249aXQsZS5nZXRTZWxlY3Rpb25SZWN0PXN0LGUuaXNDb2x1bW5TZWxlY3RlZD1hdCxlLmlzUm93U2VsZWN0ZWQ9Y3QsZS5pc1RhYmxlU2VsZWN0ZWQ9bHQsZS5nZXRDZWxsc0luQ29sdW1uPXB0LGUuZ2V0Q2VsbHNJblJvdz11dCxlLmdldENlbGxzSW5UYWJsZT1odCxlLnNlbGVjdENvbHVtbj1kdCxlLnNlbGVjdFJvdz12dCxlLnNlbGVjdFRhYmxlPW10LGUuZW1wdHlDZWxsPXl0LGUuYWRkQ29sdW1uQXQ9Z3QsZS5tb3ZlUm93PXd0LGUubW92ZUNvbHVtbj14dCxlLmFkZFJvd0F0PWJ0LGUuY2xvbmVSb3dBdD1rdCxlLnJlbW92ZUNvbHVtbkF0PVN0LGUucmVtb3ZlUm93QXQ9Q3QsZS5yZW1vdmVUYWJsZT1PdCxlLnJlbW92ZVNlbGVjdGVkQ29sdW1ucz1NdCxlLnJlbW92ZVNlbGVjdGVkUm93cz1UdCxlLnJlbW92ZUNvbHVtbkNsb3Nlc3RUb1Bvcz1OdCxlLnJlbW92ZVJvd0Nsb3Nlc3RUb1Bvcz1FdCxlLmZvckVhY2hDZWxsSW5Db2x1bW49QXQsZS5mb3JFYWNoQ2VsbEluUm93PVJ0LGUuc2V0Q2VsbEF0dHJzPUR0LGUuY3JlYXRlVGFibGU9enQsZS5maW5kQ2VsbENsb3Nlc3RUb1Bvcz1QdCxlLmZpbmRDZWxsUmVjdENsb3Nlc3RUb1Bvcz1JdCxlLmdldFNlbGVjdGlvblJhbmdlSW5Db2x1bW49RnQsZS5nZXRTZWxlY3Rpb25SYW5nZUluUm93PUJ0LGUucmVtb3ZlUGFyZW50Tm9kZU9mVHlwZT1zLGUucmVwbGFjZVBhcmVudE5vZGVPZlR5cGU9YSxlLnJlbW92ZVNlbGVjdGVkTm9kZT1jLGUucmVwbGFjZVNlbGVjdGVkTm9kZT1sLGUuc2V0VGV4dFNlbGVjdGlvbj1wLGUuc2FmZUluc2VydD1kLGUuc2V0UGFyZW50Tm9kZU1hcmt1cD12LGUuc2VsZWN0UGFyZW50Tm9kZU9mVHlwZT1tLGUucmVtb3ZlTm9kZUJlZm9yZT15fSxmNDEwOmZ1bmN0aW9uKHQsZSxuKXtuKCIxYWY2IiksdC5leHBvcnRzPW4oIjU4NGEiKS5BcnJheS5pc0FycmF5fSxmNmZkOmZ1bmN0aW9uKHQsZSl7KGZ1bmN0aW9uKHQpe3ZhciBlPSJjdXJyZW50U2NyaXB0IixuPXQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoInNjcmlwdCIpO2UgaW4gdHx8T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsZSx7Z2V0OmZ1bmN0aW9uKCl7dHJ5e3Rocm93IG5ldyBFcnJvcn1jYXRjaChyKXt2YXIgdCxlPSgvLiphdCBbXlwoXSpcKCguKik6Lis6LitcKSQvZ2kuZXhlYyhyLnN0YWNrKXx8WyExXSlbMV07Zm9yKHQgaW4gbilpZihuW3RdLnNyYz09ZXx8ImludGVyYWN0aXZlIj09blt0XS5yZWFkeVN0YXRlKXJldHVybiBuW3RdO3JldHVybiBudWxsfX19KX0pKGRvY3VtZW50KX0sZjc3MjpmdW5jdGlvbih0LGUpe3QuZXhwb3J0cz1mdW5jdGlvbih0KXtyZXR1cm4ib2JqZWN0Ij09PXR5cGVvZiB0P251bGwhPT10OiJmdW5jdGlvbiI9PT10eXBlb2YgdH19LGZhNWI6ZnVuY3Rpb24odCxlLG4pe3QuZXhwb3J0cz1uKCI1NTM3IikoIm5hdGl2ZS1mdW5jdGlvbi10by1zdHJpbmciLEZ1bmN0aW9uLnRvU3RyaW5nKX0sZmFhMTpmdW5jdGlvbih0LGUpe2Z1bmN0aW9uIG4odCl7dGhpcy5jb250ZW50PXR9bi5wcm90b3R5cGU9e2NvbnN0cnVjdG9yOm4sZmluZDpmdW5jdGlvbih0KXtmb3IodmFyIGU9MDtlPHRoaXMuY29udGVudC5sZW5ndGg7ZSs9MilpZih0aGlzLmNvbnRlbnRbZV09PT10KXJldHVybiBlO3JldHVybi0xfSxnZXQ6ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5maW5kKHQpO3JldHVybi0xPT1lP3ZvaWQgMDp0aGlzLmNvbnRlbnRbZSsxXX0sdXBkYXRlOmZ1bmN0aW9uKHQsZSxyKXt2YXIgbz1yJiZyIT10P3RoaXMucmVtb3ZlKHIpOnRoaXMsaT1vLmZpbmQodCkscz1vLmNvbnRlbnQuc2xpY2UoKTtyZXR1cm4tMT09aT9zLnB1c2gocnx8dCxlKTooc1tpKzFdPWUsciYmKHNbaV09cikpLG5ldyBuKHMpfSxyZW1vdmU6ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5maW5kKHQpO2lmKC0xPT1lKXJldHVybiB0aGlzO3ZhciByPXRoaXMuY29udGVudC5zbGljZSgpO3JldHVybiByLnNwbGljZShlLDIpLG5ldyBuKHIpfSxhZGRUb1N0YXJ0OmZ1bmN0aW9uKHQsZSl7cmV0dXJuIG5ldyBuKFt0LGVdLmNvbmNhdCh0aGlzLnJlbW92ZSh0KS5jb250ZW50KSl9LGFkZFRvRW5kOmZ1bmN0aW9uKHQsZSl7dmFyIHI9dGhpcy5yZW1vdmUodCkuY29udGVudC5zbGljZSgpO3JldHVybiByLnB1c2godCxlKSxuZXcgbihyKX0sYWRkQmVmb3JlOmZ1bmN0aW9uKHQsZSxyKXt2YXIgbz10aGlzLnJlbW92ZShlKSxpPW8uY29udGVudC5zbGljZSgpLHM9by5maW5kKHQpO3JldHVybiBpLnNwbGljZSgtMT09cz9pLmxlbmd0aDpzLDAsZSxyKSxuZXcgbihpKX0sZm9yRWFjaDpmdW5jdGlvbih0KXtmb3IodmFyIGU9MDtlPHRoaXMuY29udGVudC5sZW5ndGg7ZSs9Mil0KHRoaXMuY29udGVudFtlXSx0aGlzLmNvbnRlbnRbZSsxXSl9LHByZXBlbmQ6ZnVuY3Rpb24odCl7cmV0dXJuIHQ9bi5mcm9tKHQpLHQuc2l6ZT9uZXcgbih0LmNvbnRlbnQuY29uY2F0KHRoaXMuc3VidHJhY3QodCkuY29udGVudCkpOnRoaXN9LGFwcGVuZDpmdW5jdGlvbih0KXtyZXR1cm4gdD1uLmZyb20odCksdC5zaXplP25ldyBuKHRoaXMuc3VidHJhY3QodCkuY29udGVudC5jb25jYXQodC5jb250ZW50KSk6dGhpc30sc3VidHJhY3Q6ZnVuY3Rpb24odCl7dmFyIGU9dGhpczt0PW4uZnJvbSh0KTtmb3IodmFyIHI9MDtyPHQuY29udGVudC5sZW5ndGg7cis9MillPWUucmVtb3ZlKHQuY29udGVudFtyXSk7cmV0dXJuIGV9LGdldCBzaXplKCl7cmV0dXJuIHRoaXMuY29udGVudC5sZW5ndGg+PjF9fSxuLmZyb209ZnVuY3Rpb24odCl7aWYodCBpbnN0YW5jZW9mIG4pcmV0dXJuIHQ7dmFyIGU9W107aWYodClmb3IodmFyIHIgaW4gdCllLnB1c2gocix0W3JdKTtyZXR1cm4gbmV3IG4oZSl9LHQuZXhwb3J0cz1ufSxmYWIyOmZ1bmN0aW9uKHQsZSxuKXt2YXIgcj1uKCI3NzI2IikuZG9jdW1lbnQ7dC5leHBvcnRzPXImJnIuZG9jdW1lbnRFbGVtZW50fSxmYWUzOmZ1bmN0aW9uKHQsZSxuKXsidXNlIHN0cmljdCI7dmFyIHI7KG4ucihlKSwidW5kZWZpbmVkIiE9PXR5cGVvZiB3aW5kb3cpJiYobigiZjZmZCIpLChyPXdpbmRvdy5kb2N1bWVudC5jdXJyZW50U2NyaXB0KSYmKHI9ci5zcmMubWF0Y2goLyguK1wvKVteXC9dK1wuanMoXD8uKik/JC8pKSYmKG4ucD1yWzFdKSk7dmFyIG89ZnVuY3Rpb24oKXt2YXIgdD10aGlzLGU9dC4kY3JlYXRlRWxlbWVudCxuPXQuX3NlbGYuX2N8fGU7cmV0dXJuIG4oImRpdiIse3N0YXRpY0NsYXNzOiJ0aXB0YXAtZWRpdG9yIn0sW24oImVkaXRvci1tZW51LWJhciIse2F0dHJzOntlZGl0b3I6dC5lZGl0b3J9LHNjb3BlZFNsb3RzOnQuX3UoW3trZXk6ImRlZmF1bHQiLGZuOmZ1bmN0aW9uKGUpe3ZhciByPWUuY29tbWFuZHMsbz1lLmlzQWN0aXZlO3JldHVybltuKCJkaXYiLHtzdGF0aWNDbGFzczoibWVudWJhciJ9LFtuKCJkaXYiLHtzdGF0aWNDbGFzczoidG9vbGJhciJ9LFtuKCJidXR0b24iLHtzdGF0aWNDbGFzczoibWVudWJhcl9fYnV0dG9uIixjbGFzczp7ImlzLWFjdGl2ZSI6by5oZWFkaW5nKHtsZXZlbDoxfSl9LG9uOntjbGljazpmdW5jdGlvbih0KXtyZXR1cm4gci5oZWFkaW5nKHtsZXZlbDoxfSl9fX0sW3QuX3YoIlxuXHRcdFx0SDFcblx0XHQiKV0pLG4oImJ1dHRvbiIse3N0YXRpY0NsYXNzOiJtZW51YmFyX19idXR0b24iLGNsYXNzOnsiaXMtYWN0aXZlIjpvLmhlYWRpbmcoe2xldmVsOjJ9KX0sb246e2NsaWNrOmZ1bmN0aW9uKHQpe3JldHVybiByLmhlYWRpbmcoe2xldmVsOjJ9KX19fSxbdC5fdigiXG5cdFx0XHRIMlxuXHRcdCIpXSksbigiYnV0dG9uIix7c3RhdGljQ2xhc3M6Im1lbnViYXJfX2J1dHRvbiIsY2xhc3M6eyJpcy1hY3RpdmUiOm8uaGVhZGluZyh7bGV2ZWw6M30pfSxvbjp7Y2xpY2s6ZnVuY3Rpb24odCl7cmV0dXJuIHIuaGVhZGluZyh7bGV2ZWw6M30pfX19LFt0Ll92KCJcblx0XHRcdEgzXG5cdFx0IildKSxuKCJidXR0b24iLHtzdGF0aWNDbGFzczoibWVudWJhcl9fYnV0dG9uIixjbGFzczp7ImlzLWFjdGl2ZSI6by5idWxsZXRfbGlzdCgpfSxvbjp7Y2xpY2s6ci5idWxsZXRfbGlzdH19LFtuKCJpY29uIix7YXR0cnM6e25hbWU6InVsIn19KV0sMSksbigiYnV0dG9uIix7c3RhdGljQ2xhc3M6Im1lbnViYXJfX2J1dHRvbiIsY2xhc3M6eyJpcy1hY3RpdmUiOm8ub3JkZXJlZF9saXN0KCl9LG9uOntjbGljazpyLm9yZGVyZWRfbGlzdH19LFtuKCJpY29uIix7YXR0cnM6e25hbWU6Im9sIn19KV0sMSksbigiYnV0dG9uIix7c3RhdGljQ2xhc3M6Im1lbnViYXJfX2J1dHRvbiIsY2xhc3M6eyJpcy1hY3RpdmUiOm8uYm9sZCgpfSxvbjp7Y2xpY2s6ci5ib2xkfX0sW24oImljb24iLHthdHRyczp7bmFtZToiYm9sZCJ9fSldLDEpLG4oImJ1dHRvbiIse3N0YXRpY0NsYXNzOiJtZW51YmFyX19idXR0b24iLGNsYXNzOnsiaXMtYWN0aXZlIjpvLml0YWxpYygpfSxvbjp7Y2xpY2s6ci5pdGFsaWN9fSxbbigiaWNvbiIse2F0dHJzOntuYW1lOiJpdGFsaWMifX0pXSwxKSxuKCJidXR0b24iLHtzdGF0aWNDbGFzczoibWVudWJhcl9fYnV0dG9uIixjbGFzczp7ImlzLWFjdGl2ZSI6by5zdHJpa2UoKX0sb246e2NsaWNrOnIuc3RyaWtlfX0sW24oImljb24iLHthdHRyczp7bmFtZToic3RyaWtlIn19KV0sMSksbigiYnV0dG9uIix7c3RhdGljQ2xhc3M6Im1lbnViYXJfX2J1dHRvbiIsY2xhc3M6eyJpcy1hY3RpdmUiOm8udW5kZXJsaW5lKCl9LG9uOntjbGljazpyLnVuZGVybGluZX19LFtuKCJpY29uIix7YXR0cnM6e25hbWU6InVuZGVybGluZSJ9fSldLDEpLG4oImJ1dHRvbiIse3N0YXRpY0NsYXNzOiJtZW51YmFyX19idXR0b24iLGNsYXNzOnsiaXMtYWN0aXZlIjpvLmNvZGUoKX0sb246e2NsaWNrOnIuY29kZX19LFtuKCJpY29uIix7YXR0cnM6e25hbWU6ImNvZGUifX0pXSwxKSxuKCJidXR0b24iLHtzdGF0aWNDbGFzczoibWVudWJhcl9fYnV0dG9uIixjbGFzczp7ImlzLWFjdGl2ZSI6by5wYXJhZ3JhcGgoKX0sb246e2NsaWNrOnIucGFyYWdyYXBofX0sW24oImljb24iLHthdHRyczp7bmFtZToicGFyYWdyYXBoIn19KV0sMSksbigiYnV0dG9uIix7c3RhdGljQ2xhc3M6Im1lbnViYXJfX2J1dHRvbiIsY2xhc3M6eyJpcy1hY3RpdmUiOm8uYmxvY2txdW90ZSgpfSxvbjp7Y2xpY2s6ci5ibG9ja3F1b3RlfX0sW24oImljb24iLHthdHRyczp7bmFtZToicXVvdGUifX0pXSwxKSxuKCJidXR0b24iLHtzdGF0aWNDbGFzczoibWVudWJhcl9fYnV0dG9uIixjbGFzczp7ImlzLWFjdGl2ZSI6by5jb2RlX2Jsb2NrKCl9LG9uOntjbGljazpyLmNvZGVfYmxvY2t9fSxbbigiaWNvbiIse2F0dHJzOntuYW1lOiJjb2RlX2Jsb2NrIn19KV0sMSksbigiYnV0dG9uIix7c3RhdGljQ2xhc3M6Im1lbnViYXJfX2J1dHRvbiIsb246e2NsaWNrOmZ1bmN0aW9uKHQpe3JldHVybiByLmNyZWF0ZVRhYmxlKHtyb3dzQ291bnQ6Myxjb2xzQ291bnQ6Myx3aXRoSGVhZGVyUm93OiExfSl9fX0sW24oImljb24iLHthdHRyczp7bmFtZToidGFibGUifX0pXSwxKSxvLnRhYmxlKCk/bigic3BhbiIsW24oImJ1dHRvbiIse3N0YXRpY0NsYXNzOiJtZW51YmFyX19idXR0b24iLG9uOntjbGljazpyLmRlbGV0ZVRhYmxlfX0sW24oImljb24iLHthdHRyczp7bmFtZToiZGVsZXRlX3RhYmxlIn19KV0sMSksbigiYnV0dG9uIix7c3RhdGljQ2xhc3M6Im1lbnViYXJfX2J1dHRvbiIsb246e2NsaWNrOnIuYWRkQ29sdW1uQmVmb3JlfX0sW24oImljb24iLHthdHRyczp7bmFtZToiYWRkX2NvbF9iZWZvcmUifX0pXSwxKSxuKCJidXR0b24iLHtzdGF0aWNDbGFzczoibWVudWJhcl9fYnV0dG9uIixvbjp7Y2xpY2s6ci5hZGRDb2x1bW5BZnRlcn19LFtuKCJpY29uIix7YXR0cnM6e25hbWU6ImFkZF9jb2xfYWZ0ZXIifX0pXSwxKSxuKCJidXR0b24iLHtzdGF0aWNDbGFzczoibWVudWJhcl9fYnV0dG9uIixvbjp7Y2xpY2s6ci5kZWxldGVDb2x1bW59fSxbbigiaWNvbiIse2F0dHJzOntuYW1lOiJkZWxldGVfY29sIn19KV0sMSksbigiYnV0dG9uIix7c3RhdGljQ2xhc3M6Im1lbnViYXJfX2J1dHRvbiIsb246e2NsaWNrOnIuYWRkUm93QmVmb3JlfX0sW24oImljb24iLHthdHRyczp7bmFtZToiYWRkX3Jvd19iZWZvcmUifX0pXSwxKSxuKCJidXR0b24iLHtzdGF0aWNDbGFzczoibWVudWJhcl9fYnV0dG9uIixvbjp7Y2xpY2s6ci5hZGRSb3dBZnRlcn19LFtuKCJpY29uIix7YXR0cnM6e25hbWU6ImFkZF9yb3dfYWZ0ZXIifX0pXSwxKSxuKCJidXR0b24iLHtzdGF0aWNDbGFzczoibWVudWJhcl9fYnV0dG9uIixvbjp7Y2xpY2s6ci5kZWxldGVSb3d9fSxbbigiaWNvbiIse2F0dHJzOntuYW1lOiJkZWxldGVfcm93In19KV0sMSksbigiYnV0dG9uIix7c3RhdGljQ2xhc3M6Im1lbnViYXJfX2J1dHRvbiIsb246e2NsaWNrOnIudG9nZ2xlQ2VsbE1lcmdlfX0sW24oImljb24iLHthdHRyczp7bmFtZToiY29tYmluZV9jZWxscyJ9fSldLDEpXSk6dC5fZSgpXSldKV19fV0pfSksbigiZWRpdG9yLWNvbnRlbnQiLHtzdGF0aWNDbGFzczoidGlwdGFwLWVkaXRvcl9fY29udGVudCIsYXR0cnM6e2VkaXRvcjp0LmVkaXRvcn19KV0sMSl9LGk9W10scz0obigiZGM0NCIpLG4oIjZmZmIiKSksYT1uKCI1NDBjIiksYz1uKCJkODgxIiksbD1uKCIyZWM4IikscD1uKCIyMjRkIiksdT1uKCI1NmVjIiksaD1uKCJmYmVhIiksZj1uKCI3MmE4IiksZD1uKCJlZmRmIik7Ci8qIQogICAgKiB0aXB0YXAtdXRpbHMgdjEuOC4wCiAgICAqIChjKSAyMDE5IFNjcnVtcHkgVUcgKGxpbWl0ZWQgbGlhYmlsaXR5KQogICAgKiBAbGljZW5zZSBNSVQKICAgICovCmZ1bmN0aW9uIHYodCl7cmV0dXJuIG0odCl8fHkodCl8fGcoKX1mdW5jdGlvbiBtKHQpe2lmKEFycmF5LmlzQXJyYXkodCkpe2Zvcih2YXIgZT0wLG49bmV3IEFycmF5KHQubGVuZ3RoKTtlPHQubGVuZ3RoO2UrKyluW2VdPXRbZV07cmV0dXJuIG59fWZ1bmN0aW9uIHkodCl7aWYoU3ltYm9sLml0ZXJhdG9yIGluIE9iamVjdCh0KXx8IltvYmplY3QgQXJndW1lbnRzXSI9PT1PYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwodCkpcmV0dXJuIEFycmF5LmZyb20odCl9ZnVuY3Rpb24gZygpe3Rocm93IG5ldyBUeXBlRXJyb3IoIkludmFsaWQgYXR0ZW1wdCB0byBzcHJlYWQgbm9uLWl0ZXJhYmxlIGluc3RhbmNlIil9ZnVuY3Rpb24gdyh0LGUpe3ZhciBuPXQuc2VsZWN0aW9uLHI9bi5mcm9tLG89bi50byxpPVtdO3QuZG9jLm5vZGVzQmV0d2VlbihyLG8sKGZ1bmN0aW9uKHQpe2k9W10uY29uY2F0KHYoaSksdih0Lm1hcmtzKSl9KSk7dmFyIHM9aS5maW5kKChmdW5jdGlvbih0KXtyZXR1cm4gdC50eXBlLm5hbWU9PT1lLm5hbWV9KSk7cmV0dXJuIHM/cy5hdHRyczp7fX1mdW5jdGlvbiB4KCl7dmFyIHQ9YXJndW1lbnRzLmxlbmd0aD4wJiZ2b2lkIDAhPT1hcmd1bWVudHNbMF0/YXJndW1lbnRzWzBdOm51bGwsZT1hcmd1bWVudHMubGVuZ3RoPjEmJnZvaWQgMCE9PWFyZ3VtZW50c1sxXT9hcmd1bWVudHNbMV06bnVsbDtpZighdHx8IWUpcmV0dXJuITE7dmFyIG49dC5wYXJlbnQuY2hpbGRBZnRlcih0LnBhcmVudE9mZnNldCk7aWYoIW4ubm9kZSlyZXR1cm4hMTt2YXIgcj1uLm5vZGUubWFya3MuZmluZCgoZnVuY3Rpb24odCl7cmV0dXJuIHQudHlwZT09PWV9KSk7aWYoIXIpcmV0dXJuITE7dmFyIG89dC5pbmRleCgpLGk9dC5zdGFydCgpK24ub2Zmc2V0LHM9bysxLGE9aStuLm5vZGUubm9kZVNpemU7d2hpbGUobz4wJiZyLmlzSW5TZXQodC5wYXJlbnQuY2hpbGQoby0xKS5tYXJrcykpby09MSxpLT10LnBhcmVudC5jaGlsZChvKS5ub2RlU2l6ZTt3aGlsZShzPHQucGFyZW50LmNoaWxkQ291bnQmJnIuaXNJblNldCh0LnBhcmVudC5jaGlsZChzKS5tYXJrcykpYSs9dC5wYXJlbnQuY2hpbGQocykubm9kZVNpemUscys9MTtyZXR1cm57ZnJvbTppLHRvOmF9fWZ1bmN0aW9uIGIodCxlKXt2YXIgbj10LnNlbGVjdGlvbixyPW4uZnJvbSxvPW4uJGZyb20saT1uLnRvLHM9bi5lbXB0eTtyZXR1cm4gcz8hIWUuaXNJblNldCh0LnN0b3JlZE1hcmtzfHxvLm1hcmtzKCkpOiEhdC5kb2MucmFuZ2VIYXNNYXJrKHIsaSxlKX1mdW5jdGlvbiBrKHQsZSl7dmFyIG49YXJndW1lbnRzLmxlbmd0aD4yJiZ2b2lkIDAhPT1hcmd1bWVudHNbMl0/YXJndW1lbnRzWzJdOnt9LHI9ZnVuY3Rpb24odCl7cmV0dXJuIHQudHlwZT09PWV9LG89T2JqZWN0KGRbImZpbmRTZWxlY3RlZE5vZGVPZlR5cGUiXSkoZSkodC5zZWxlY3Rpb24pfHxPYmplY3QoZFsiZmluZFBhcmVudE5vZGUiXSkocikodC5zZWxlY3Rpb24pO3JldHVybiBPYmplY3Qua2V5cyhuKS5sZW5ndGgmJm8/by5ub2RlLmhhc01hcmt1cChlLG4pOiEhb312YXIgUz1uKCI4YmJmIiksQz1uLm4oUyksTz1uKCI3YTg3IiksTT1uKCJhODBlIiksVD1uKCJlZTdmIik7ZnVuY3Rpb24gTih0KXtyZXR1cm4gRSh0KXx8QSh0KXx8UigpfWZ1bmN0aW9uIEUodCl7aWYoQXJyYXkuaXNBcnJheSh0KSl7Zm9yKHZhciBlPTAsbj1uZXcgQXJyYXkodC5sZW5ndGgpO2U8dC5sZW5ndGg7ZSsrKW5bZV09dFtlXTtyZXR1cm4gbn19ZnVuY3Rpb24gQSh0KXtpZihTeW1ib2wuaXRlcmF0b3IgaW4gT2JqZWN0KHQpfHwiW29iamVjdCBBcmd1bWVudHNdIj09PU9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbCh0KSlyZXR1cm4gQXJyYXkuZnJvbSh0KX1mdW5jdGlvbiBSKCl7dGhyb3cgbmV3IFR5cGVFcnJvcigiSW52YWxpZCBhdHRlbXB0IHRvIHNwcmVhZCBub24taXRlcmFibGUgaW5zdGFuY2UiKX1mdW5jdGlvbiBEKHQsZSxuKXt2YXIgcj1bXTtyZXR1cm4gbi5kb2Mubm9kZXNCZXR3ZWVuKHQsZSwoZnVuY3Rpb24odCxlKXtyPVtdLmNvbmNhdChOKHIpLE4odC5tYXJrcy5tYXAoKGZ1bmN0aW9uKG4pe3JldHVybntzdGFydDplLGVuZDplK3Qubm9kZVNpemUsbWFyazpufX0pKSkpfSkpLHJ9ZnVuY3Rpb24geih0LGUsbil7cmV0dXJuIG5ldyBmWyJJbnB1dFJ1bGUiXSh0LChmdW5jdGlvbih0LHIsbyxpKXt2YXIgcz1uIGluc3RhbmNlb2YgRnVuY3Rpb24/bihyKTpuLGE9dC50cixjPXIubGVuZ3RoLTEsbD1pLHA9bztpZihyW2NdKXt2YXIgdT1vK3JbMF0uaW5kZXhPZihyW2MtMV0pLGg9dStyW2MtMV0ubGVuZ3RoLGY9dStyW2MtMV0ubGFzdEluZGV4T2YocltjXSksZD1mK3JbY10ubGVuZ3RoLHY9RChvLGksdCkuZmlsdGVyKChmdW5jdGlvbih0KXt2YXIgbj10Lm1hcmsudHlwZS5leGNsdWRlZDtyZXR1cm4gbi5maW5kKChmdW5jdGlvbih0KXtyZXR1cm4gdC5uYW1lPT09ZS5uYW1lfSkpfSkpLmZpbHRlcigoZnVuY3Rpb24odCl7cmV0dXJuIHQuZW5kPnV9KSk7aWYodi5sZW5ndGgpcmV0dXJuITE7ZDxoJiZhLmRlbGV0ZShkLGgpLGY+dSYmYS5kZWxldGUodSxmKSxwPXUsbD1wK3JbY10ubGVuZ3RofXJldHVybiBhLmFkZE1hcmsocCxsLGUuY3JlYXRlKHMpKSxhLnJlbW92ZVN0b3JlZE1hcmsoZSksYX0pKX1mdW5jdGlvbiBQKHQsZSxuKXt2YXIgcj1mdW5jdGlvbiByKG8pe3ZhciBpPVtdO3JldHVybiBvLmZvckVhY2goKGZ1bmN0aW9uKG8pe2lmKG8uaXNUZXh0KXt2YXIgcyxhPW8udGV4dCxjPTA7ZG97aWYocz10LmV4ZWMoYSkscyl7dmFyIGw9cy5pbmRleCxwPWwrc1swXS5sZW5ndGgsdT1uIGluc3RhbmNlb2YgRnVuY3Rpb24/bihzWzBdKTpuO2w+MCYmaS5wdXNoKG8uY3V0KGMsbCkpLGkucHVzaChvLmN1dChsLHApLm1hcmsoZS5jcmVhdGUodSkuYWRkVG9TZXQoby5tYXJrcykpKSxjPXB9fXdoaWxlKHMpO2M8YS5sZW5ndGgmJmkucHVzaChvLmN1dChjKSl9ZWxzZSBpLnB1c2goby5jb3B5KHIoby5jb250ZW50KSkpfSkpLE1bIkZyYWdtZW50Il0uZnJvbUFycmF5KGkpfTtyZXR1cm4gbmV3IHNbIlBsdWdpbiJdKHtwcm9wczp7dHJhbnNmb3JtUGFzdGVkOmZ1bmN0aW9uKHQpe3JldHVybiBuZXcgTVsiU2xpY2UiXShyKHQuY29udGVudCksdC5vcGVuU3RhcnQsdC5vcGVuRW5kKX19fSl9ZnVuY3Rpb24gSSh0LGUsbil7dmFyIHI9ZnVuY3Rpb24gcihvKXt2YXIgaT1bXTtyZXR1cm4gby5mb3JFYWNoKChmdW5jdGlvbihvKXtpZihvLmlzVGV4dCl7dmFyIHMsYT1vLnRleHQsYz1vLm1hcmtzLGw9MCxwPSEhYy5maWx0ZXIoKGZ1bmN0aW9uKHQpe3JldHVybiJsaW5rIj09PXQudHlwZS5uYW1lfSkpWzBdO3doaWxlKCFwJiZudWxsIT09KHM9dC5leGVjKGEpKSlpZihzWzFdKXt2YXIgdT1zLmluZGV4LGg9dStzWzBdLmxlbmd0aCxmPXUrc1swXS5pbmRleE9mKHNbMV0pLGQ9ZitzWzFdLmxlbmd0aCx2PW4gaW5zdGFuY2VvZiBGdW5jdGlvbj9uKHMpOm47dT4wJiZpLnB1c2goby5jdXQobCx1KSksaS5wdXNoKG8uY3V0KGYsZCkubWFyayhlLmNyZWF0ZSh2KS5hZGRUb1NldChvLm1hcmtzKSkpLGw9aH1sPGEubGVuZ3RoJiZpLnB1c2goby5jdXQobCkpfWVsc2UgaS5wdXNoKG8uY29weShyKG8uY29udGVudCkpKX0pKSxNWyJGcmFnbWVudCJdLmZyb21BcnJheShpKX07cmV0dXJuIG5ldyBzWyJQbHVnaW4iXSh7cHJvcHM6e3RyYW5zZm9ybVBhc3RlZDpmdW5jdGlvbih0KXtyZXR1cm4gbmV3IE1bIlNsaWNlIl0ocih0LmNvbnRlbnQpLHQub3BlblN0YXJ0LHQub3BlbkVuZCl9fX0pfWZ1bmN0aW9uIF8odCl7cmV0dXJuIGZ1bmN0aW9uKGUsbil7dmFyIHI9ZS50cixvPWUuc2VsZWN0aW9uLGk9by5mcm9tLHM9by50byxhPW8uJGZyb20sYz1vLmVtcHR5O2lmKGMpe3ZhciBsPXgoYSx0KTtpPWwuZnJvbSxzPWwudG99cmV0dXJuIHIucmVtb3ZlTWFyayhpLHMsdCksbihyKX19ZnVuY3Rpb24gRih0LGUpe3ZhciBuPWFyZ3VtZW50cy5sZW5ndGg+MiYmdm9pZCAwIT09YXJndW1lbnRzWzJdP2FyZ3VtZW50c1syXToxLHI9YXJndW1lbnRzLmxlbmd0aD4zP2FyZ3VtZW50c1szXTp2b2lkIDAsbz10LnJlc29sdmUoZSksaT1vLmRlcHRoLW4scz1yJiZyW3IubGVuZ3RoLTFdfHxvLnBhcmVudDtpZihpPDB8fG8ucGFyZW50LnR5cGUuc3BlYy5pc29sYXRpbmd8fCFvLnBhcmVudC5jYW5SZXBsYWNlKG8uaW5kZXgoKSxvLnBhcmVudC5jaGlsZENvdW50KXx8IXMudHlwZS52YWxpZENvbnRlbnQoby5wYXJlbnQuY29udGVudC5jdXRCeUluZGV4KG8uaW5kZXgoKSxvLnBhcmVudC5jaGlsZENvdW50KSkpcmV0dXJuITE7Zm9yKHZhciBhPW8uZGVwdGgtMSxjPW4tMjthPmk7YS0tLGMtLSl7dmFyIGw9by5ub2RlKGEpLHA9by5pbmRleChhKTtpZihsLnR5cGUuc3BlYy5pc29sYXRpbmcpcmV0dXJuITE7dmFyIHU9bC5jb250ZW50LmN1dEJ5SW5kZXgocCxsLmNoaWxkQ291bnQpLGg9ciYmcltjXXx8bDtpZihoIT1sJiYodT11LnJlcGxhY2VDaGlsZCgwLGgudHlwZS5jcmVhdGUoaC5hdHRycykpKSwhbC5jYW5SZXBsYWNlKHArMSxsLmNoaWxkQ291bnQpKXJldHVybiExfXZhciBmPW8uaW5kZXhBZnRlcihpKSxkPXImJnJbMF07cmV0dXJuIG8ubm9kZShpKS5jYW5SZXBsYWNlV2l0aChmLGYsZD9kLnR5cGU6by5ub2RlKGkrMSkudHlwZSl9ZnVuY3Rpb24gQih0KXtyZXR1cm4gZnVuY3Rpb24oZSxuKXt2YXIgcj1lLnNlbGVjdGlvbixvPXIuJGZyb20saT1yLiR0byxzPXIubm9kZTtpZihzJiZzLmlzQmxvY2t8fG8uZGVwdGg8Mnx8IW8uc2FtZVBhcmVudChpKSlyZXR1cm4hMTt2YXIgYT1vLm5vZGUoLTEpO2lmKGEudHlwZSE9dClyZXR1cm4hMTtpZigwPT1vLnBhcmVudC5jb250ZW50LnNpemUpe2lmKDI9PW8uZGVwdGh8fG8ubm9kZSgtMykudHlwZSE9dHx8by5pbmRleCgtMikhPW8ubm9kZSgtMikuY2hpbGRDb3VudC0xKXJldHVybiExO2lmKG4pe2Zvcih2YXIgYz1NWyJGcmFnbWVudCJdLmVtcHR5LGw9by5pbmRleCgtMSk+MCxwPW8uZGVwdGgtKGw/MToyKTtwPj1vLmRlcHRoLTM7cC0tKWM9TVsiRnJhZ21lbnQiXS5mcm9tKG8ubm9kZShwKS5jb3B5KGMpKTtjPWMuYXBwZW5kKE1bIkZyYWdtZW50Il0uZnJvbSh0LmNyZWF0ZUFuZEZpbGwoKSkpO3ZhciB1PWUudHIucmVwbGFjZShvLmJlZm9yZShsP251bGw6LTEpLG8uYWZ0ZXIoLTMpLG5ldyBNWyJTbGljZSJdKGMsbD8zOjIsMikpO3Uuc2V0U2VsZWN0aW9uKGUuc2VsZWN0aW9uLmNvbnN0cnVjdG9yLm5lYXIodS5kb2MucmVzb2x2ZShvLnBvcysobD8zOjIpKSkpLG4odS5zY3JvbGxJbnRvVmlldygpKX1yZXR1cm4hMH12YXIgaD1pLnBvcz09by5lbmQoKT9hLmNvbnRlbnRNYXRjaEF0KG8uaW5kZXhBZnRlcigtMSkpLmRlZmF1bHRUeXBlOm51bGwsZj1lLnRyLmRlbGV0ZShvLnBvcyxpLnBvcyksZD1oJiZbe3R5cGU6dH0se3R5cGU6aH1dO3JldHVybiBkfHwoZD1be3R5cGU6dH0sbnVsbF0pLCEhRihmLmRvYyxvLnBvcywyLGQpJiYobiYmbihmLnNwbGl0KG8ucG9zLDIsZCkuc2Nyb2xsSW50b1ZpZXcoKSksITApfX1mdW5jdGlvbiBqKHQsZSl7dmFyIG49YXJndW1lbnRzLmxlbmd0aD4yJiZ2b2lkIDAhPT1hcmd1bWVudHNbMl0/YXJndW1lbnRzWzJdOnt9O3JldHVybiBmdW5jdGlvbihyLG8saSl7dmFyIHM9ayhyLHQsbik7cmV0dXJuIHM/T2JqZWN0KGhbInNldEJsb2NrVHlwZSJdKShlKShyLG8saSk6T2JqZWN0KGhbInNldEJsb2NrVHlwZSJdKSh0LG4pKHIsbyxpKX19ZnVuY3Rpb24gJCh0LGUpe3JldHVybiB0LnR5cGU9PT1lLm5vZGVzLmJ1bGxldF9saXN0fHx0LnR5cGU9PT1lLm5vZGVzLm9yZGVyZWRfbGlzdHx8dC50eXBlPT09ZS5ub2Rlcy50b2RvX2xpc3R9ZnVuY3Rpb24gVih0LGUpe3JldHVybiBmdW5jdGlvbihuLHIsbyl7dmFyIGk9bi5zY2hlbWEscz1uLnNlbGVjdGlvbixhPXMuJGZyb20sYz1zLiR0byxsPWEuYmxvY2tSYW5nZShjKTtpZighbClyZXR1cm4hMTt2YXIgcD1PYmplY3QoVFsiZmluZFBhcmVudE5vZGUiXSkoKGZ1bmN0aW9uKHQpe3JldHVybiAkKHQsaSl9KSkocyk7aWYobC5kZXB0aD49MSYmcCYmbC5kZXB0aC1wLmRlcHRoPD0xKXtpZihwLm5vZGUudHlwZT09PXQpcmV0dXJuIE9iamVjdChPWyJsaWZ0TGlzdEl0ZW0iXSkoZSkobixyLG8pO2lmKCQocC5ub2RlLGkpJiZ0LnZhbGlkQ29udGVudChwLm5vZGUuY29udGVudCkpe3ZhciB1PW4udHI7cmV0dXJuIHUuc2V0Tm9kZU1hcmt1cChwLnBvcyx0KSxyJiZyKHUpLCExfX1yZXR1cm4gT2JqZWN0KE9bIndyYXBJbkxpc3QiXSkodCkobixyLG8pfX1mdW5jdGlvbiBMKHQpe3JldHVybiBmdW5jdGlvbihlLG4scil7dmFyIG89ayhlLHQpO3JldHVybiBvP09iamVjdChoWyJsaWZ0Il0pKGUsbik6T2JqZWN0KGhbIndyYXBJbiJdKSh0KShlLG4scil9fWZ1bmN0aW9uIEoodCxlKXtyZXR1cm4gZnVuY3Rpb24obixyKXt2YXIgbz1uLnRyLGk9bi5zZWxlY3Rpb24scz1uLmRvYyxhPWkuZnJvbSxjPWkudG8sbD1pLiRmcm9tLHA9aS5lbXB0eTtpZihwKXt2YXIgdT14KGwsdCk7YT11LmZyb20sYz11LnRvfXZhciBoPXMucmFuZ2VIYXNNYXJrKGEsYyx0KTtyZXR1cm4gaCYmby5yZW1vdmVNYXJrKGEsYyx0KSxvLmFkZE1hcmsoYSxjLHQuY3JlYXRlKGUpKSxyKG8pfX0KLyohCiAgICAqIHRpcHRhcCB2MS4yNi4yCiAgICAqIChjKSAyMDE5IFNjcnVtcHkgVUcgKGxpbWl0ZWQgbGlhYmlsaXR5KQogICAgKiBAbGljZW5zZSBNSVQKICAgICovZnVuY3Rpb24gcSh0KXtyZXR1cm4gcT0iZnVuY3Rpb24iPT09dHlwZW9mIFN5bWJvbCYmInN5bWJvbCI9PT10eXBlb2YgU3ltYm9sLml0ZXJhdG9yP2Z1bmN0aW9uKHQpe3JldHVybiB0eXBlb2YgdH06ZnVuY3Rpb24odCl7cmV0dXJuIHQmJiJmdW5jdGlvbiI9PT10eXBlb2YgU3ltYm9sJiZ0LmNvbnN0cnVjdG9yPT09U3ltYm9sJiZ0IT09U3ltYm9sLnByb3RvdHlwZT8ic3ltYm9sIjp0eXBlb2YgdH0scSh0KX1mdW5jdGlvbiBXKHQsZSl7aWYoISh0IGluc3RhbmNlb2YgZSkpdGhyb3cgbmV3IFR5cGVFcnJvcigiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uIil9ZnVuY3Rpb24gSCh0LGUpe2Zvcih2YXIgbj0wO248ZS5sZW5ndGg7bisrKXt2YXIgcj1lW25dO3IuZW51bWVyYWJsZT1yLmVudW1lcmFibGV8fCExLHIuY29uZmlndXJhYmxlPSEwLCJ2YWx1ZSJpbiByJiYoci53cml0YWJsZT0hMCksT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsci5rZXkscil9fWZ1bmN0aW9uIEsodCxlLG4pe3JldHVybiBlJiZIKHQucHJvdG90eXBlLGUpLG4mJkgodCxuKSx0fWZ1bmN0aW9uIFUodCxlLG4pe3JldHVybiBlIGluIHQ/T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsZSx7dmFsdWU6bixlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMCx3cml0YWJsZTohMH0pOnRbZV09bix0fWZ1bmN0aW9uIEcodCxlKXt2YXIgbj1PYmplY3Qua2V5cyh0KTtpZihPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKXt2YXIgcj1PYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKHQpO2UmJihyPXIuZmlsdGVyKChmdW5jdGlvbihlKXtyZXR1cm4gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0LGUpLmVudW1lcmFibGV9KSkpLG4ucHVzaC5hcHBseShuLHIpfXJldHVybiBufWZ1bmN0aW9uIFgodCl7Zm9yKHZhciBlPTE7ZTxhcmd1bWVudHMubGVuZ3RoO2UrKyl7dmFyIG49bnVsbCE9YXJndW1lbnRzW2VdP2FyZ3VtZW50c1tlXTp7fTtlJTI/RyhuLCEwKS5mb3JFYWNoKChmdW5jdGlvbihlKXtVKHQsZSxuW2VdKX0pKTpPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycz9PYmplY3QuZGVmaW5lUHJvcGVydGllcyh0LE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzKG4pKTpHKG4pLmZvckVhY2goKGZ1bmN0aW9uKGUpe09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LGUsT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihuLGUpKX0pKX1yZXR1cm4gdH1mdW5jdGlvbiBZKHQsZSl7aWYoImZ1bmN0aW9uIiE9PXR5cGVvZiBlJiZudWxsIT09ZSl0aHJvdyBuZXcgVHlwZUVycm9yKCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvbiIpO3QucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoZSYmZS5wcm90b3R5cGUse2NvbnN0cnVjdG9yOnt2YWx1ZTp0LHdyaXRhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH19KSxlJiZaKHQsZSl9ZnVuY3Rpb24gUSh0KXtyZXR1cm4gUT1PYmplY3Quc2V0UHJvdG90eXBlT2Y/T2JqZWN0LmdldFByb3RvdHlwZU9mOmZ1bmN0aW9uKHQpe3JldHVybiB0Ll9fcHJvdG9fX3x8T2JqZWN0LmdldFByb3RvdHlwZU9mKHQpfSxRKHQpfWZ1bmN0aW9uIFoodCxlKXtyZXR1cm4gWj1PYmplY3Quc2V0UHJvdG90eXBlT2Z8fGZ1bmN0aW9uKHQsZSl7cmV0dXJuIHQuX19wcm90b19fPWUsdH0sWih0LGUpfWZ1bmN0aW9uIHR0KHQpe2lmKHZvaWQgMD09PXQpdGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKCJ0aGlzIGhhc24ndCBiZWVuIGluaXRpYWxpc2VkIC0gc3VwZXIoKSBoYXNuJ3QgYmVlbiBjYWxsZWQiKTtyZXR1cm4gdH1mdW5jdGlvbiBldCh0LGUpe3JldHVybiFlfHwib2JqZWN0IiE9PXR5cGVvZiBlJiYiZnVuY3Rpb24iIT09dHlwZW9mIGU/dHQodCk6ZX1mdW5jdGlvbiBudCh0LGUpe3JldHVybiBpdCh0KXx8YXQodCxlKXx8bHQoKX1mdW5jdGlvbiBydCh0KXtyZXR1cm4gb3QodCl8fHN0KHQpfHxjdCgpfWZ1bmN0aW9uIG90KHQpe2lmKEFycmF5LmlzQXJyYXkodCkpe2Zvcih2YXIgZT0wLG49bmV3IEFycmF5KHQubGVuZ3RoKTtlPHQubGVuZ3RoO2UrKyluW2VdPXRbZV07cmV0dXJuIG59fWZ1bmN0aW9uIGl0KHQpe2lmKEFycmF5LmlzQXJyYXkodCkpcmV0dXJuIHR9ZnVuY3Rpb24gc3QodCl7aWYoU3ltYm9sLml0ZXJhdG9yIGluIE9iamVjdCh0KXx8IltvYmplY3QgQXJndW1lbnRzXSI9PT1PYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwodCkpcmV0dXJuIEFycmF5LmZyb20odCl9ZnVuY3Rpb24gYXQodCxlKXtpZihTeW1ib2wuaXRlcmF0b3IgaW4gT2JqZWN0KHQpfHwiW29iamVjdCBBcmd1bWVudHNdIj09PU9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbCh0KSl7dmFyIG49W10scj0hMCxvPSExLGk9dm9pZCAwO3RyeXtmb3IodmFyIHMsYT10W1N5bWJvbC5pdGVyYXRvcl0oKTshKHI9KHM9YS5uZXh0KCkpLmRvbmUpO3I9ITApaWYobi5wdXNoKHMudmFsdWUpLGUmJm4ubGVuZ3RoPT09ZSlicmVha31jYXRjaChjKXtvPSEwLGk9Y31maW5hbGx5e3RyeXtyfHxudWxsPT1hWyJyZXR1cm4iXXx8YVsicmV0dXJuIl0oKX1maW5hbGx5e2lmKG8pdGhyb3cgaX19cmV0dXJuIG59fWZ1bmN0aW9uIGN0KCl7dGhyb3cgbmV3IFR5cGVFcnJvcigiSW52YWxpZCBhdHRlbXB0IHRvIHNwcmVhZCBub24taXRlcmFibGUgaW5zdGFuY2UiKX1mdW5jdGlvbiBsdCgpe3Rocm93IG5ldyBUeXBlRXJyb3IoIkludmFsaWQgYXR0ZW1wdCB0byBkZXN0cnVjdHVyZSBub24taXRlcmFibGUgaW5zdGFuY2UiKX1mdW5jdGlvbiBwdCh0KXtyZXR1cm4gdC5yZXBsYWNlKC8oPzpeXHd8W0EtWl18XGJcdykvZywoZnVuY3Rpb24odCxlKXtyZXR1cm4gMD09PWU/dC50b0xvd2VyQ2FzZSgpOnQudG9VcHBlckNhc2UoKX0pKS5yZXBsYWNlKC9ccysvZywiIil9dmFyIHV0PWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdChlLG4pe3ZhciByPW4uZWRpdG9yLG89bi5leHRlbnNpb24saT1uLnBhcmVudCxzPW4ubm9kZSxhPW4udmlldyxjPW4uZGVjb3JhdGlvbnMsbD1uLmdldFBvcztXKHRoaXMsdCksdGhpcy5jb21wb25lbnQ9ZSx0aGlzLmVkaXRvcj1yLHRoaXMuZXh0ZW5zaW9uPW8sdGhpcy5wYXJlbnQ9aSx0aGlzLm5vZGU9cyx0aGlzLnZpZXc9YSx0aGlzLmRlY29yYXRpb25zPWMsdGhpcy5pc05vZGU9ISF0aGlzLm5vZGUubWFya3MsdGhpcy5pc01hcms9IXRoaXMuaXNOb2RlLHRoaXMuZ2V0UG9zPXRoaXMuaXNNYXJrP3RoaXMuZ2V0TWFya1BvczpsLHRoaXMuY2FwdHVyZUV2ZW50cz0hMCx0aGlzLmRvbT10aGlzLmNyZWF0ZURPTSgpLHRoaXMuY29udGVudERPTT10aGlzLnZtLiRyZWZzLmNvbnRlbnR9cmV0dXJuIEsodCxbe2tleToiY3JlYXRlRE9NIix2YWx1ZTpmdW5jdGlvbigpe3ZhciB0PXRoaXMsZT1DLmEuZXh0ZW5kKHRoaXMuY29tcG9uZW50KSxuPXtlZGl0b3I6dGhpcy5lZGl0b3Isbm9kZTp0aGlzLm5vZGUsdmlldzp0aGlzLnZpZXcsZ2V0UG9zOmZ1bmN0aW9uKCl7cmV0dXJuIHQuZ2V0UG9zKCl9LGRlY29yYXRpb25zOnRoaXMuZGVjb3JhdGlvbnMsc2VsZWN0ZWQ6ITEsb3B0aW9uczp0aGlzLmV4dGVuc2lvbi5vcHRpb25zLHVwZGF0ZUF0dHJzOmZ1bmN0aW9uKGUpe3JldHVybiB0LnVwZGF0ZUF0dHJzKGUpfX07cmV0dXJuImZ1bmN0aW9uIj09PXR5cGVvZiB0aGlzLmV4dGVuc2lvbi5zZXRTZWxlY3Rpb24mJih0aGlzLnNldFNlbGVjdGlvbj10aGlzLmV4dGVuc2lvbi5zZXRTZWxlY3Rpb24pLHRoaXMudm09bmV3IGUoe3BhcmVudDp0aGlzLnBhcmVudCxwcm9wc0RhdGE6bn0pLiRtb3VudCgpLHRoaXMudm0uJGVsfX0se2tleToidXBkYXRlIix2YWx1ZTpmdW5jdGlvbih0LGUpe3JldHVybiB0LnR5cGU9PT10aGlzLm5vZGUudHlwZSYmKHQ9PT10aGlzLm5vZGUmJnRoaXMuZGVjb3JhdGlvbnM9PT1lfHwodGhpcy5ub2RlPXQsdGhpcy5kZWNvcmF0aW9ucz1lLHRoaXMudXBkYXRlQ29tcG9uZW50UHJvcHMoe25vZGU6dCxkZWNvcmF0aW9uczplfSksITApKX19LHtrZXk6InVwZGF0ZUNvbXBvbmVudFByb3BzIix2YWx1ZTpmdW5jdGlvbih0KXt2YXIgZT10aGlzO2lmKHRoaXMudm0uX3Byb3BzKXt2YXIgbj1DLmEuY29uZmlnLnNpbGVudDtDLmEuY29uZmlnLnNpbGVudD0hMCxPYmplY3QuZW50cmllcyh0KS5mb3JFYWNoKChmdW5jdGlvbih0KXt2YXIgbj1udCh0LDIpLHI9blswXSxvPW5bMV07ZS52bS5fcHJvcHNbcl09b30pKSxDLmEuY29uZmlnLnNpbGVudD1ufX19LHtrZXk6InVwZGF0ZUF0dHJzIix2YWx1ZTpmdW5jdGlvbih0KXtpZih0aGlzLnZpZXcuZWRpdGFibGUpe3ZhciBlPXRoaXMudmlldy5zdGF0ZSxuPXRoaXMubm9kZS50eXBlLHI9dGhpcy5nZXRQb3MoKSxvPVgoe30sdGhpcy5ub2RlLmF0dHJzLHt9LHQpLGk9dGhpcy5pc01hcms/ZS50ci5yZW1vdmVNYXJrKHIuZnJvbSxyLnRvLG4pLmFkZE1hcmsoci5mcm9tLHIudG8sbi5jcmVhdGUobykpOmUudHIuc2V0Tm9kZU1hcmt1cChyLG51bGwsbyk7dGhpcy52aWV3LmRpc3BhdGNoKGkpfX19LHtrZXk6Imlnbm9yZU11dGF0aW9uIix2YWx1ZTpmdW5jdGlvbih0KXtyZXR1cm4hdGhpcy5jb250ZW50RE9NfHwhdGhpcy5jb250ZW50RE9NLmNvbnRhaW5zKHQudGFyZ2V0KX19LHtrZXk6InN0b3BFdmVudCIsdmFsdWU6ZnVuY3Rpb24odCl7dmFyIGU9dGhpcztpZigiZnVuY3Rpb24iPT09dHlwZW9mIHRoaXMuZXh0ZW5zaW9uLnN0b3BFdmVudClyZXR1cm4gdGhpcy5leHRlbnNpb24uc3RvcEV2ZW50KHQpO3ZhciBuPSEhdGhpcy5leHRlbnNpb24uc2NoZW1hLmRyYWdnYWJsZTtpZihuJiYibW91c2Vkb3duIj09PXQudHlwZSl7dmFyIHI9dC50YXJnZXQuY2xvc2VzdCYmdC50YXJnZXQuY2xvc2VzdCgiW2RhdGEtZHJhZy1oYW5kbGVdIiksbz1yJiYodGhpcy5kb209PT1yfHx0aGlzLmRvbS5jb250YWlucyhyKSk7byYmKHRoaXMuY2FwdHVyZUV2ZW50cz0hMSxkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCJkcmFnZW5kIiwoZnVuY3Rpb24oKXtlLmNhcHR1cmVFdmVudHM9ITB9KSx7b25jZTohMH0pKX12YXIgaT0iY29weSI9PT10LnR5cGUscz0icGFzdGUiPT09dC50eXBlLGE9ImN1dCI9PT10LnR5cGUsYz10LnR5cGUuc3RhcnRzV2l0aCgiZHJhZyIpfHwiZHJvcCI9PT10LnR5cGU7cmV0dXJuIShuJiZjfHxpfHxzfHxhKSYmdGhpcy5jYXB0dXJlRXZlbnRzfX0se2tleToic2VsZWN0Tm9kZSIsdmFsdWU6ZnVuY3Rpb24oKXt0aGlzLnVwZGF0ZUNvbXBvbmVudFByb3BzKHtzZWxlY3RlZDohMH0pfX0se2tleToiZGVzZWxlY3ROb2RlIix2YWx1ZTpmdW5jdGlvbigpe3RoaXMudXBkYXRlQ29tcG9uZW50UHJvcHMoe3NlbGVjdGVkOiExfSl9fSx7a2V5OiJnZXRNYXJrUG9zIix2YWx1ZTpmdW5jdGlvbigpe3ZhciB0PXRoaXMudmlldy5wb3NBdERPTSh0aGlzLmRvbSksZT10aGlzLnZpZXcuc3RhdGUuZG9jLnJlc29sdmUodCksbj14KGUsdGhpcy5ub2RlLnR5cGUpO3JldHVybiBufX0se2tleToiZGVzdHJveSIsdmFsdWU6ZnVuY3Rpb24oKXt0aGlzLnZtLiRkZXN0cm95KCl9fV0pLHR9KCksaHQ9ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KCl7Vyh0aGlzLHQpfXJldHVybiBLKHQsW3trZXk6Im9uIix2YWx1ZTpmdW5jdGlvbih0LGUpe3JldHVybiB0aGlzLl9jYWxsYmFja3M9dGhpcy5fY2FsbGJhY2tzfHx7fSx0aGlzLl9jYWxsYmFja3NbdF18fCh0aGlzLl9jYWxsYmFja3NbdF09W10pLHRoaXMuX2NhbGxiYWNrc1t0XS5wdXNoKGUpLHRoaXN9fSx7a2V5OiJlbWl0Iix2YWx1ZTpmdW5jdGlvbih0KXtmb3IodmFyIGU9dGhpcyxuPWFyZ3VtZW50cy5sZW5ndGgscj1uZXcgQXJyYXkobj4xP24tMTowKSxvPTE7bzxuO28rKylyW28tMV09YXJndW1lbnRzW29dO3RoaXMuX2NhbGxiYWNrcz10aGlzLl9jYWxsYmFja3N8fHt9O3ZhciBpPXRoaXMuX2NhbGxiYWNrc1t0XTtyZXR1cm4gaSYmaS5mb3JFYWNoKChmdW5jdGlvbih0KXtyZXR1cm4gdC5hcHBseShlLHIpfSkpLHRoaXN9fSx7a2V5OiJvZmYiLHZhbHVlOmZ1bmN0aW9uKHQsZSl7aWYoYXJndW1lbnRzLmxlbmd0aCl7dmFyIG49dGhpcy5fY2FsbGJhY2tzP3RoaXMuX2NhbGxiYWNrc1t0XTpudWxsO24mJihlP3RoaXMuX2NhbGxiYWNrc1t0XT1uLmZpbHRlcigoZnVuY3Rpb24odCl7cmV0dXJuIHQhPT1lfSkpOmRlbGV0ZSB0aGlzLl9jYWxsYmFja3NbdF0pfWVsc2UgdGhpcy5fY2FsbGJhY2tzPXt9O3JldHVybiB0aGlzfX1dKSx0fSgpLGZ0PWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCgpe3ZhciBlPWFyZ3VtZW50cy5sZW5ndGg+MCYmdm9pZCAwIT09YXJndW1lbnRzWzBdP2FyZ3VtZW50c1swXTp7fTtXKHRoaXMsdCksdGhpcy5vcHRpb25zPVgoe30sdGhpcy5kZWZhdWx0T3B0aW9ucyx7fSxlKX1yZXR1cm4gSyh0LFt7a2V5OiJpbml0Iix2YWx1ZTpmdW5jdGlvbigpe3JldHVybiBudWxsfX0se2tleToiYmluZEVkaXRvciIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgdD1hcmd1bWVudHMubGVuZ3RoPjAmJnZvaWQgMCE9PWFyZ3VtZW50c1swXT9hcmd1bWVudHNbMF06bnVsbDt0aGlzLmVkaXRvcj10fX0se2tleToiaW5wdXRSdWxlcyIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm5bXX19LHtrZXk6InBhc3RlUnVsZXMiLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuW119fSx7a2V5OiJrZXlzIix2YWx1ZTpmdW5jdGlvbigpe3JldHVybnt9fX0se2tleToibmFtZSIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIG51bGx9fSx7a2V5OiJ0eXBlIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4iZXh0ZW5zaW9uIn19LHtrZXk6InVwZGF0ZSIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKCl7fX19LHtrZXk6ImRlZmF1bHRPcHRpb25zIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm57fX19LHtrZXk6InBsdWdpbnMiLGdldDpmdW5jdGlvbigpe3JldHVybltdfX1dKSx0fSgpLGR0PWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCgpe3ZhciBlPWFyZ3VtZW50cy5sZW5ndGg+MCYmdm9pZCAwIT09YXJndW1lbnRzWzBdP2FyZ3VtZW50c1swXTpbXSxuPWFyZ3VtZW50cy5sZW5ndGg+MT9hcmd1bWVudHNbMV06dm9pZCAwO1codGhpcyx0KSxlLmZvckVhY2goKGZ1bmN0aW9uKHQpe3QuYmluZEVkaXRvcihuKSx0LmluaXQoKX0pKSx0aGlzLmV4dGVuc2lvbnM9ZX1yZXR1cm4gSyh0LFt7a2V5OiJrZXltYXBzIix2YWx1ZTpmdW5jdGlvbih0KXt2YXIgZT10LnNjaGVtYSxuPXRoaXMuZXh0ZW5zaW9ucy5maWx0ZXIoKGZ1bmN0aW9uKHQpe3JldHVyblsiZXh0ZW5zaW9uIl0uaW5jbHVkZXModC50eXBlKX0pKS5maWx0ZXIoKGZ1bmN0aW9uKHQpe3JldHVybiB0LmtleXN9KSkubWFwKChmdW5jdGlvbih0KXtyZXR1cm4gdC5rZXlzKHtzY2hlbWE6ZX0pfSkpLHI9dGhpcy5leHRlbnNpb25zLmZpbHRlcigoZnVuY3Rpb24odCl7cmV0dXJuWyJub2RlIiwibWFyayJdLmluY2x1ZGVzKHQudHlwZSl9KSkuZmlsdGVyKChmdW5jdGlvbih0KXtyZXR1cm4gdC5rZXlzfSkpLm1hcCgoZnVuY3Rpb24odCl7cmV0dXJuIHQua2V5cyh7dHlwZTplWyIiLmNvbmNhdCh0LnR5cGUsInMiKV1bdC5uYW1lXSxzY2hlbWE6ZX0pfSkpO3JldHVybltdLmNvbmNhdChydChuKSxydChyKSkubWFwKChmdW5jdGlvbih0KXtyZXR1cm4gT2JqZWN0KHVbImtleW1hcCJdKSh0KX0pKX19LHtrZXk6ImlucHV0UnVsZXMiLHZhbHVlOmZ1bmN0aW9uKHQpe3ZhciBlPXQuc2NoZW1hLG49dC5leGNsdWRlZEV4dGVuc2lvbnM7aWYoIShuIGluc3RhbmNlb2YgQXJyYXkpJiZuKXJldHVybltdO3ZhciByPW4gaW5zdGFuY2VvZiBBcnJheT90aGlzLmV4dGVuc2lvbnMuZmlsdGVyKChmdW5jdGlvbih0KXtyZXR1cm4hbi5pbmNsdWRlcyh0Lm5hbWUpfSkpOnRoaXMuZXh0ZW5zaW9ucyxvPXIuZmlsdGVyKChmdW5jdGlvbih0KXtyZXR1cm5bImV4dGVuc2lvbiJdLmluY2x1ZGVzKHQudHlwZSl9KSkuZmlsdGVyKChmdW5jdGlvbih0KXtyZXR1cm4gdC5pbnB1dFJ1bGVzfSkpLm1hcCgoZnVuY3Rpb24odCl7cmV0dXJuIHQuaW5wdXRSdWxlcyh7c2NoZW1hOmV9KX0pKSxpPXIuZmlsdGVyKChmdW5jdGlvbih0KXtyZXR1cm5bIm5vZGUiLCJtYXJrIl0uaW5jbHVkZXModC50eXBlKX0pKS5maWx0ZXIoKGZ1bmN0aW9uKHQpe3JldHVybiB0LmlucHV0UnVsZXN9KSkubWFwKChmdW5jdGlvbih0KXtyZXR1cm4gdC5pbnB1dFJ1bGVzKHt0eXBlOmVbIiIuY29uY2F0KHQudHlwZSwicyIpXVt0Lm5hbWVdLHNjaGVtYTplfSl9KSk7cmV0dXJuW10uY29uY2F0KHJ0KG8pLHJ0KGkpKS5yZWR1Y2UoKGZ1bmN0aW9uKHQsZSl7cmV0dXJuW10uY29uY2F0KHJ0KHQpLHJ0KGUpKX0pLFtdKX19LHtrZXk6InBhc3RlUnVsZXMiLHZhbHVlOmZ1bmN0aW9uKHQpe3ZhciBlPXQuc2NoZW1hLG49dC5leGNsdWRlZEV4dGVuc2lvbnM7aWYoIShuIGluc3RhbmNlb2YgQXJyYXkpJiZuKXJldHVybltdO3ZhciByPW4gaW5zdGFuY2VvZiBBcnJheT90aGlzLmV4dGVuc2lvbnMuZmlsdGVyKChmdW5jdGlvbih0KXtyZXR1cm4hbi5pbmNsdWRlcyh0Lm5hbWUpfSkpOnRoaXMuZXh0ZW5zaW9ucyxvPXIuZmlsdGVyKChmdW5jdGlvbih0KXtyZXR1cm5bImV4dGVuc2lvbiJdLmluY2x1ZGVzKHQudHlwZSl9KSkuZmlsdGVyKChmdW5jdGlvbih0KXtyZXR1cm4gdC5wYXN0ZVJ1bGVzfSkpLm1hcCgoZnVuY3Rpb24odCl7cmV0dXJuIHQucGFzdGVSdWxlcyh7c2NoZW1hOmV9KX0pKSxpPXIuZmlsdGVyKChmdW5jdGlvbih0KXtyZXR1cm5bIm5vZGUiLCJtYXJrIl0uaW5jbHVkZXModC50eXBlKX0pKS5maWx0ZXIoKGZ1bmN0aW9uKHQpe3JldHVybiB0LnBhc3RlUnVsZXN9KSkubWFwKChmdW5jdGlvbih0KXtyZXR1cm4gdC5wYXN0ZVJ1bGVzKHt0eXBlOmVbIiIuY29uY2F0KHQudHlwZSwicyIpXVt0Lm5hbWVdLHNjaGVtYTplfSl9KSk7cmV0dXJuW10uY29uY2F0KHJ0KG8pLHJ0KGkpKS5yZWR1Y2UoKGZ1bmN0aW9uKHQsZSl7cmV0dXJuW10uY29uY2F0KHJ0KHQpLHJ0KGUpKX0pLFtdKX19LHtrZXk6ImNvbW1hbmRzIix2YWx1ZTpmdW5jdGlvbih0KXt2YXIgZT10LnNjaGVtYSxuPXQudmlldztyZXR1cm4gdGhpcy5leHRlbnNpb25zLmZpbHRlcigoZnVuY3Rpb24odCl7cmV0dXJuIHQuY29tbWFuZHN9KSkucmVkdWNlKChmdW5jdGlvbih0LHIpe3ZhciBvPXIubmFtZSxpPXIudHlwZSxzPXt9LGE9ci5jb21tYW5kcyhYKHtzY2hlbWE6ZX0sWyJub2RlIiwibWFyayJdLmluY2x1ZGVzKGkpP3t0eXBlOmVbIiIuY29uY2F0KGksInMiKV1bb119Ont9KSksYz1mdW5jdGlvbih0LGUpe3JldHVybiEhbi5lZGl0YWJsZSYmKG4uZm9jdXMoKSx0KGUpKG4uc3RhdGUsbi5kaXNwYXRjaCxuKSl9LGw9ZnVuY3Rpb24odCxlKXtBcnJheS5pc0FycmF5KGUpP3NbdF09ZnVuY3Rpb24odCl7cmV0dXJuIGUuZm9yRWFjaCgoZnVuY3Rpb24oZSl7cmV0dXJuIGMoZSx0KX0pKX06ImZ1bmN0aW9uIj09PXR5cGVvZiBlJiYoc1t0XT1mdW5jdGlvbih0KXtyZXR1cm4gYyhlLHQpfSl9O3JldHVybiJvYmplY3QiPT09cShhKT9PYmplY3QuZW50cmllcyhhKS5mb3JFYWNoKChmdW5jdGlvbih0KXt2YXIgZT1udCh0LDIpLG49ZVswXSxyPWVbMV07bChuLHIpfSkpOmwobyxhKSxYKHt9LHQse30scyl9KSx7fSl9fSx7a2V5OiJub2RlcyIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZXh0ZW5zaW9ucy5maWx0ZXIoKGZ1bmN0aW9uKHQpe3JldHVybiJub2RlIj09PXQudHlwZX0pKS5yZWR1Y2UoKGZ1bmN0aW9uKHQsZSl7dmFyIG49ZS5uYW1lLHI9ZS5zY2hlbWE7cmV0dXJuIFgoe30sdCxVKHt9LG4scikpfSkse30pfX0se2tleToib3B0aW9ucyIsZ2V0OmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy52aWV3O3JldHVybiB0aGlzLmV4dGVuc2lvbnMucmVkdWNlKChmdW5jdGlvbihlLG4pe3JldHVybiBYKHt9LGUsVSh7fSxuLm5hbWUsbmV3IFByb3h5KG4ub3B0aW9ucyx7c2V0OmZ1bmN0aW9uKGUscixvKXt2YXIgaT1lW3JdIT09bztyZXR1cm4gT2JqZWN0LmFzc2lnbihlLFUoe30scixvKSksaSYmbi51cGRhdGUodCksITB9fSkpKX0pLHt9KX19LHtrZXk6Im1hcmtzIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5leHRlbnNpb25zLmZpbHRlcigoZnVuY3Rpb24odCl7cmV0dXJuIm1hcmsiPT09dC50eXBlfSkpLnJlZHVjZSgoZnVuY3Rpb24odCxlKXt2YXIgbj1lLm5hbWUscj1lLnNjaGVtYTtyZXR1cm4gWCh7fSx0LFUoe30sbixyKSl9KSx7fSl9fSx7a2V5OiJwbHVnaW5zIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5leHRlbnNpb25zLmZpbHRlcigoZnVuY3Rpb24odCl7cmV0dXJuIHQucGx1Z2luc30pKS5yZWR1Y2UoKGZ1bmN0aW9uKHQsZSl7dmFyIG49ZS5wbHVnaW5zO3JldHVybltdLmNvbmNhdChydCh0KSxydChuKSl9KSxbXSl9fV0pLHR9KCk7ZnVuY3Rpb24gdnQodCl7dmFyIGU9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgic3R5bGUiKTtlLnR5cGU9InRleHQvY3NzIixlLnRleHRDb250ZW50PXQ7dmFyIG49ZG9jdW1lbnQscj1uLmhlYWQsbz1yLmZpcnN0Q2hpbGQ7bz9yLmluc2VydEJlZm9yZShlLG8pOnIuYXBwZW5kQ2hpbGQoZSl9dmFyIG10PWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoKXt2YXIgdD1hcmd1bWVudHMubGVuZ3RoPjAmJnZvaWQgMCE9PWFyZ3VtZW50c1swXT9hcmd1bWVudHNbMF06e307cmV0dXJuIFcodGhpcyxlKSxldCh0aGlzLFEoZSkuY2FsbCh0aGlzLHQpKX1yZXR1cm4gWShlLHQpLEsoZSxbe2tleToiY29tbWFuZCIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oKXt9fX0se2tleToidHlwZSIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIm1hcmsifX0se2tleToidmlldyIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIG51bGx9fSx7a2V5OiJzY2hlbWEiLGdldDpmdW5jdGlvbigpe3JldHVybiBudWxsfX1dKSxlfShmdCk7ZnVuY3Rpb24geXQoKXt2YXIgdD1hcmd1bWVudHMubGVuZ3RoPjAmJnZvaWQgMCE9PWFyZ3VtZW50c1swXT9hcmd1bWVudHNbMF06MCxlPWFyZ3VtZW50cy5sZW5ndGg+MSYmdm9pZCAwIT09YXJndW1lbnRzWzFdP2FyZ3VtZW50c1sxXTowLG49YXJndW1lbnRzLmxlbmd0aD4yJiZ2b2lkIDAhPT1hcmd1bWVudHNbMl0/YXJndW1lbnRzWzJdOjA7cmV0dXJuIE1hdGgubWluKE1hdGgubWF4KHBhcnNlSW50KHQsMTApLGUpLG4pfXZhciBndD1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKCl7dmFyIHQ9YXJndW1lbnRzLmxlbmd0aD4wJiZ2b2lkIDAhPT1hcmd1bWVudHNbMF0/YXJndW1lbnRzWzBdOnt9O3JldHVybiBXKHRoaXMsZSksZXQodGhpcyxRKGUpLmNhbGwodGhpcyx0KSl9cmV0dXJuIFkoZSx0KSxLKGUsW3trZXk6ImNvbW1hbmQiLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKCl7fX19LHtrZXk6InR5cGUiLGdldDpmdW5jdGlvbigpe3JldHVybiJub2RlIn19LHtrZXk6InZpZXciLGdldDpmdW5jdGlvbigpe3JldHVybiBudWxsfX0se2tleToic2NoZW1hIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gbnVsbH19XSksZX0oZnQpLHd0PWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoKXtyZXR1cm4gVyh0aGlzLGUpLGV0KHRoaXMsUShlKS5hcHBseSh0aGlzLGFyZ3VtZW50cykpfXJldHVybiBZKGUsdCksSyhlLFt7a2V5OiJuYW1lIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4iZG9jIn19LHtrZXk6InNjaGVtYSIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJue2NvbnRlbnQ6ImJsb2NrKyJ9fX1dKSxlfShndCkseHQ9ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZSgpe3JldHVybiBXKHRoaXMsZSksZXQodGhpcyxRKGUpLmFwcGx5KHRoaXMsYXJndW1lbnRzKSl9cmV0dXJuIFkoZSx0KSxLKGUsW3trZXk6ImNvbW1hbmRzIix2YWx1ZTpmdW5jdGlvbih0KXt2YXIgZT10LnR5cGU7cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIE9iamVjdChoWyJzZXRCbG9ja1R5cGUiXSkoZSl9fX0se2tleToibmFtZSIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuInBhcmFncmFwaCJ9fSx7a2V5OiJzY2hlbWEiLGdldDpmdW5jdGlvbigpe3JldHVybntjb250ZW50OiJpbmxpbmUqIixncm91cDoiYmxvY2siLGRyYWdnYWJsZTohMSxwYXJzZURPTTpbe3RhZzoicCJ9XSx0b0RPTTpmdW5jdGlvbigpe3JldHVyblsicCIsMF19fX19XSksZX0oZ3QpLGJ0PWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoKXtyZXR1cm4gVyh0aGlzLGUpLGV0KHRoaXMsUShlKS5hcHBseSh0aGlzLGFyZ3VtZW50cykpfXJldHVybiBZKGUsdCksSyhlLFt7a2V5OiJuYW1lIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4idGV4dCJ9fSx7a2V5OiJzY2hlbWEiLGdldDpmdW5jdGlvbigpe3JldHVybntncm91cDoiaW5saW5lIn19fV0pLGV9KGd0KSxrdD0nLlByb3NlTWlycm9yIHtcbiAgcG9zaXRpb246IHJlbGF0aXZlO1xufVxuXG4uUHJvc2VNaXJyb3Ige1xuICB3b3JkLXdyYXA6IGJyZWFrLXdvcmQ7XG4gIHdoaXRlLXNwYWNlOiBwcmUtd3JhcDtcbiAgLXdlYmtpdC1mb250LXZhcmlhbnQtbGlnYXR1cmVzOiBub25lO1xuICBmb250LXZhcmlhbnQtbGlnYXR1cmVzOiBub25lO1xufVxuXG4uUHJvc2VNaXJyb3IgcHJlIHtcbiAgd2hpdGUtc3BhY2U6IHByZS13cmFwO1xufVxuXG4uUHJvc2VNaXJyb3ItZ2FwY3Vyc29yIHtcbiAgZGlzcGxheTogbm9uZTtcbiAgcG9pbnRlci1ldmVudHM6IG5vbmU7XG4gIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbn1cblxuLlByb3NlTWlycm9yLWdhcGN1cnNvcjphZnRlciB7XG4gIGNvbnRlbnQ6ICIiO1xuICBkaXNwbGF5OiBibG9jaztcbiAgcG9zaXRpb246IGFic29sdXRlO1xuICB0b3A6IC0ycHg7XG4gIHdpZHRoOiAyMHB4O1xuICBib3JkZXItdG9wOiAxcHggc29saWQgYmxhY2s7XG4gIGFuaW1hdGlvbjogUHJvc2VNaXJyb3ItY3Vyc29yLWJsaW5rIDEuMXMgc3RlcHMoMiwgc3RhcnQpIGluZmluaXRlO1xufVxuXG5Aa2V5ZnJhbWVzIFByb3NlTWlycm9yLWN1cnNvci1ibGluayB7XG4gIHRvIHtcbiAgICB2aXNpYmlsaXR5OiBoaWRkZW47XG4gIH1cbn1cblxuLlByb3NlTWlycm9yLWhpZGVzZWxlY3Rpb24gKjo6c2VsZWN0aW9uIHtcbiAgYmFja2dyb3VuZDogdHJhbnNwYXJlbnQ7XG59XG5cbi5Qcm9zZU1pcnJvci1oaWRlc2VsZWN0aW9uICo6Oi1tb3otc2VsZWN0aW9uIHtcbiAgYmFja2dyb3VuZDogdHJhbnNwYXJlbnQ7XG59XG5cbi5Qcm9zZU1pcnJvci1oaWRlc2VsZWN0aW9uICoge1xuICBjYXJldC1jb2xvcjogdHJhbnNwYXJlbnQ7XG59XG5cbi5Qcm9zZU1pcnJvci1mb2N1c2VkIC5Qcm9zZU1pcnJvci1nYXBjdXJzb3Ige1xuICBkaXNwbGF5OiBibG9jaztcbn1cbicsU3Q9ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZSgpe3ZhciB0LG49YXJndW1lbnRzLmxlbmd0aD4wJiZ2b2lkIDAhPT1hcmd1bWVudHNbMF0/YXJndW1lbnRzWzBdOnt9O3JldHVybiBXKHRoaXMsZSksdD1ldCh0aGlzLFEoZSkuY2FsbCh0aGlzKSksdC5kZWZhdWx0T3B0aW9ucz17ZWRpdG9yUHJvcHM6e30sZWRpdGFibGU6ITAsYXV0b0ZvY3VzOm51bGwsZXh0ZW5zaW9uczpbXSxjb250ZW50OiIiLHRvcE5vZGU6ImRvYyIsZW1wdHlEb2N1bWVudDp7dHlwZToiZG9jIixjb250ZW50Olt7dHlwZToicGFyYWdyYXBoIn1dfSx1c2VCdWlsdEluRXh0ZW5zaW9uczohMCxkaXNhYmxlSW5wdXRSdWxlczohMSxkaXNhYmxlUGFzdGVSdWxlczohMSxkcm9wQ3Vyc29yOnt9LHBhcnNlT3B0aW9uczp7fSxpbmplY3RDU1M6ITAsb25Jbml0OmZ1bmN0aW9uKCl7fSxvblRyYW5zYWN0aW9uOmZ1bmN0aW9uKCl7fSxvblVwZGF0ZTpmdW5jdGlvbigpe30sb25Gb2N1czpmdW5jdGlvbigpe30sb25CbHVyOmZ1bmN0aW9uKCl7fSxvblBhc3RlOmZ1bmN0aW9uKCl7fSxvbkRyb3A6ZnVuY3Rpb24oKXt9fSx0LmV2ZW50cz1bImluaXQiLCJ0cmFuc2FjdGlvbiIsInVwZGF0ZSIsImZvY3VzIiwiYmx1ciIsInBhc3RlIiwiZHJvcCJdLHQuaW5pdChuKSx0fXJldHVybiBZKGUsdCksSyhlLFt7a2V5OiJpbml0Iix2YWx1ZTpmdW5jdGlvbigpe3ZhciB0PXRoaXMsZT1hcmd1bWVudHMubGVuZ3RoPjAmJnZvaWQgMCE9PWFyZ3VtZW50c1swXT9hcmd1bWVudHNbMF06e307dGhpcy5zZXRPcHRpb25zKFgoe30sdGhpcy5kZWZhdWx0T3B0aW9ucyx7fSxlKSksdGhpcy5mb2N1c2VkPSExLHRoaXMuc2VsZWN0aW9uPXtmcm9tOjAsdG86MH0sdGhpcy5lbGVtZW50PWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpLHRoaXMuZXh0ZW5zaW9ucz10aGlzLmNyZWF0ZUV4dGVuc2lvbnMoKSx0aGlzLm5vZGVzPXRoaXMuY3JlYXRlTm9kZXMoKSx0aGlzLm1hcmtzPXRoaXMuY3JlYXRlTWFya3MoKSx0aGlzLnNjaGVtYT10aGlzLmNyZWF0ZVNjaGVtYSgpLHRoaXMucGx1Z2lucz10aGlzLmNyZWF0ZVBsdWdpbnMoKSx0aGlzLmtleW1hcHM9dGhpcy5jcmVhdGVLZXltYXBzKCksdGhpcy5pbnB1dFJ1bGVzPXRoaXMuY3JlYXRlSW5wdXRSdWxlcygpLHRoaXMucGFzdGVSdWxlcz10aGlzLmNyZWF0ZVBhc3RlUnVsZXMoKSx0aGlzLnZpZXc9dGhpcy5jcmVhdGVWaWV3KCksdGhpcy5jb21tYW5kcz10aGlzLmNyZWF0ZUNvbW1hbmRzKCksdGhpcy5zZXRBY3RpdmVOb2Rlc0FuZE1hcmtzKCksdGhpcy5vcHRpb25zLmluamVjdENTUyYmdnQoa3QpLG51bGwhPT10aGlzLm9wdGlvbnMuYXV0b0ZvY3VzJiZ0aGlzLmZvY3VzKHRoaXMub3B0aW9ucy5hdXRvRm9jdXMpLHRoaXMuZXZlbnRzLmZvckVhY2goKGZ1bmN0aW9uKGUpe3Qub24oZSx0Lm9wdGlvbnNbcHQoIm9uICIuY29uY2F0KGUpKV18fGZ1bmN0aW9uKCl7fSl9KSksdGhpcy5lbWl0KCJpbml0Iix7dmlldzp0aGlzLnZpZXcsc3RhdGU6dGhpcy5zdGF0ZX0pLHRoaXMuZXh0ZW5zaW9ucy52aWV3PXRoaXMudmlld319LHtrZXk6InNldE9wdGlvbnMiLHZhbHVlOmZ1bmN0aW9uKHQpe3RoaXMub3B0aW9ucz1YKHt9LHRoaXMub3B0aW9ucyx7fSx0KSx0aGlzLnZpZXcmJnRoaXMuc3RhdGUmJnRoaXMudmlldy51cGRhdGVTdGF0ZSh0aGlzLnN0YXRlKX19LHtrZXk6ImNyZWF0ZUV4dGVuc2lvbnMiLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIG5ldyBkdChbXS5jb25jYXQocnQodGhpcy5idWlsdEluRXh0ZW5zaW9ucykscnQodGhpcy5vcHRpb25zLmV4dGVuc2lvbnMpKSx0aGlzKX19LHtrZXk6ImNyZWF0ZVBsdWdpbnMiLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZXh0ZW5zaW9ucy5wbHVnaW5zfX0se2tleToiY3JlYXRlS2V5bWFwcyIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5leHRlbnNpb25zLmtleW1hcHMoe3NjaGVtYTp0aGlzLnNjaGVtYX0pfX0se2tleToiY3JlYXRlSW5wdXRSdWxlcyIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5leHRlbnNpb25zLmlucHV0UnVsZXMoe3NjaGVtYTp0aGlzLnNjaGVtYSxleGNsdWRlZEV4dGVuc2lvbnM6dGhpcy5vcHRpb25zLmRpc2FibGVJbnB1dFJ1bGVzfSl9fSx7a2V5OiJjcmVhdGVQYXN0ZVJ1bGVzIix2YWx1ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLmV4dGVuc2lvbnMucGFzdGVSdWxlcyh7c2NoZW1hOnRoaXMuc2NoZW1hLGV4Y2x1ZGVkRXh0ZW5zaW9uczp0aGlzLm9wdGlvbnMuZGlzYWJsZVBhc3RlUnVsZXN9KX19LHtrZXk6ImNyZWF0ZUNvbW1hbmRzIix2YWx1ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLmV4dGVuc2lvbnMuY29tbWFuZHMoe3NjaGVtYTp0aGlzLnNjaGVtYSx2aWV3OnRoaXMudmlld30pfX0se2tleToiY3JlYXRlTm9kZXMiLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZXh0ZW5zaW9ucy5ub2Rlc319LHtrZXk6ImNyZWF0ZU1hcmtzIix2YWx1ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLmV4dGVuc2lvbnMubWFya3N9fSx7a2V5OiJjcmVhdGVTY2hlbWEiLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIG5ldyBjWyJTY2hlbWEiXSh7dG9wTm9kZTp0aGlzLm9wdGlvbnMudG9wTm9kZSxub2Rlczp0aGlzLm5vZGVzLG1hcmtzOnRoaXMubWFya3N9KX19LHtrZXk6ImNyZWF0ZVN0YXRlIix2YWx1ZTpmdW5jdGlvbigpe3ZhciB0PXRoaXM7cmV0dXJuIHNbIkVkaXRvclN0YXRlIl0uY3JlYXRlKHtzY2hlbWE6dGhpcy5zY2hlbWEsZG9jOnRoaXMuY3JlYXRlRG9jdW1lbnQodGhpcy5vcHRpb25zLmNvbnRlbnQpLHBsdWdpbnM6W10uY29uY2F0KHJ0KHRoaXMucGx1Z2lucyksW09iamVjdChmWyJpbnB1dFJ1bGVzIl0pKHtydWxlczp0aGlzLmlucHV0UnVsZXN9KV0scnQodGhpcy5wYXN0ZVJ1bGVzKSxydCh0aGlzLmtleW1hcHMpLFtPYmplY3QodVsia2V5bWFwIl0pKHtCYWNrc3BhY2U6ZlsidW5kb0lucHV0UnVsZSJdfSksT2JqZWN0KHVbImtleW1hcCJdKShoWyJiYXNlS2V5bWFwIl0pLE9iamVjdChsWyJkcm9wQ3Vyc29yIl0pKHRoaXMub3B0aW9ucy5kcm9wQ3Vyc29yKSxPYmplY3QocFsiZ2FwQ3Vyc29yIl0pKCksbmV3IHNbIlBsdWdpbiJdKHtrZXk6bmV3IHNbIlBsdWdpbktleSJdKCJlZGl0YWJsZSIpLHByb3BzOntlZGl0YWJsZTpmdW5jdGlvbigpe3JldHVybiB0Lm9wdGlvbnMuZWRpdGFibGV9fX0pLG5ldyBzWyJQbHVnaW4iXSh7cHJvcHM6e2F0dHJpYnV0ZXM6e3RhYmluZGV4OjB9LGhhbmRsZURPTUV2ZW50czp7Zm9jdXM6ZnVuY3Rpb24oZSxuKXt0LmZvY3VzZWQ9ITAsdC5lbWl0KCJmb2N1cyIse2V2ZW50Om4sc3RhdGU6ZS5zdGF0ZSx2aWV3OmV9KTt2YXIgcj10LnN0YXRlLnRyLnNldE1ldGEoImZvY3VzZWQiLCEwKTt0LnZpZXcuZGlzcGF0Y2gocil9LGJsdXI6ZnVuY3Rpb24oZSxuKXt0LmZvY3VzZWQ9ITEsdC5lbWl0KCJibHVyIix7ZXZlbnQ6bixzdGF0ZTplLnN0YXRlLHZpZXc6ZX0pO3ZhciByPXQuc3RhdGUudHIuc2V0TWV0YSgiZm9jdXNlZCIsITEpO3Qudmlldy5kaXNwYXRjaChyKX19fX0pLG5ldyBzWyJQbHVnaW4iXSh7cHJvcHM6dGhpcy5vcHRpb25zLmVkaXRvclByb3BzfSldKX0pfX0se2tleToiY3JlYXRlRG9jdW1lbnQiLHZhbHVlOmZ1bmN0aW9uKHQpe3ZhciBlPWFyZ3VtZW50cy5sZW5ndGg+MSYmdm9pZCAwIT09YXJndW1lbnRzWzFdP2FyZ3VtZW50c1sxXTp0aGlzLm9wdGlvbnMucGFyc2VPcHRpb25zO2lmKG51bGw9PT10KXJldHVybiB0aGlzLnNjaGVtYS5ub2RlRnJvbUpTT04odGhpcy5vcHRpb25zLmVtcHR5RG9jdW1lbnQpO2lmKCJvYmplY3QiPT09cSh0KSl0cnl7cmV0dXJuIHRoaXMuc2NoZW1hLm5vZGVGcm9tSlNPTih0KX1jYXRjaChyKXtyZXR1cm4gY29uc29sZS53YXJuKCJbdGlwdGFwIHdhcm5dOiBJbnZhbGlkIGNvbnRlbnQuIiwiUGFzc2VkIHZhbHVlOiIsdCwiRXJyb3I6IixyKSx0aGlzLnNjaGVtYS5ub2RlRnJvbUpTT04odGhpcy5vcHRpb25zLmVtcHR5RG9jdW1lbnQpfWlmKCJzdHJpbmciPT09dHlwZW9mIHQpe3ZhciBuPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpO3JldHVybiBuLmlubmVySFRNTD10LnRyaW0oKSxjWyJET01QYXJzZXIiXS5mcm9tU2NoZW1hKHRoaXMuc2NoZW1hKS5wYXJzZShuLGUpfXJldHVybiExfX0se2tleToiY3JlYXRlVmlldyIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgdD10aGlzO3JldHVybiBuZXcgYVsiRWRpdG9yVmlldyJdKHRoaXMuZWxlbWVudCx7c3RhdGU6dGhpcy5jcmVhdGVTdGF0ZSgpLGhhbmRsZVBhc3RlOmZ1bmN0aW9uKCl7Zm9yKHZhciBlPWFyZ3VtZW50cy5sZW5ndGgsbj1uZXcgQXJyYXkoZSkscj0wO3I8ZTtyKyspbltyXT1hcmd1bWVudHNbcl07dC5lbWl0LmFwcGx5KHQsWyJwYXN0ZSJdLmNvbmNhdChuKSl9LGhhbmRsZURyb3A6ZnVuY3Rpb24oKXtmb3IodmFyIGU9YXJndW1lbnRzLmxlbmd0aCxuPW5ldyBBcnJheShlKSxyPTA7cjxlO3IrKyluW3JdPWFyZ3VtZW50c1tyXTt0LmVtaXQuYXBwbHkodCxbImRyb3AiXS5jb25jYXQobikpfSxkaXNwYXRjaFRyYW5zYWN0aW9uOnRoaXMuZGlzcGF0Y2hUcmFuc2FjdGlvbi5iaW5kKHRoaXMpfSl9fSx7a2V5OiJzZXRQYXJlbnRDb21wb25lbnQiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIHQ9YXJndW1lbnRzLmxlbmd0aD4wJiZ2b2lkIDAhPT1hcmd1bWVudHNbMF0/YXJndW1lbnRzWzBdOm51bGw7dCYmdGhpcy52aWV3LnNldFByb3BzKHtub2RlVmlld3M6dGhpcy5pbml0Tm9kZVZpZXdzKHtwYXJlbnQ6dCxleHRlbnNpb25zOltdLmNvbmNhdChydCh0aGlzLmJ1aWx0SW5FeHRlbnNpb25zKSxydCh0aGlzLm9wdGlvbnMuZXh0ZW5zaW9ucykpfSl9KX19LHtrZXk6ImluaXROb2RlVmlld3MiLHZhbHVlOmZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMsbj10LnBhcmVudCxyPXQuZXh0ZW5zaW9ucztyZXR1cm4gci5maWx0ZXIoKGZ1bmN0aW9uKHQpe3JldHVyblsibm9kZSIsIm1hcmsiXS5pbmNsdWRlcyh0LnR5cGUpfSkpLmZpbHRlcigoZnVuY3Rpb24odCl7cmV0dXJuIHQudmlld30pKS5yZWR1Y2UoKGZ1bmN0aW9uKHQscil7dmFyIG89ZnVuY3Rpb24odCxvLGkscyl7dmFyIGE9ci52aWV3O3JldHVybiBuZXcgdXQoYSx7ZWRpdG9yOmUsZXh0ZW5zaW9uOnIscGFyZW50Om4sbm9kZTp0LHZpZXc6byxnZXRQb3M6aSxkZWNvcmF0aW9uczpzfSl9O3JldHVybiBYKHt9LHQsVSh7fSxyLm5hbWUsbykpfSkse30pfX0se2tleToiZGlzcGF0Y2hUcmFuc2FjdGlvbiIsdmFsdWU6ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5zdGF0ZS5hcHBseSh0KTt0aGlzLnZpZXcudXBkYXRlU3RhdGUoZSksdGhpcy5zZWxlY3Rpb249e2Zyb206dGhpcy5zdGF0ZS5zZWxlY3Rpb24uZnJvbSx0bzp0aGlzLnN0YXRlLnNlbGVjdGlvbi50b30sdGhpcy5zZXRBY3RpdmVOb2Rlc0FuZE1hcmtzKCksdGhpcy5lbWl0KCJ0cmFuc2FjdGlvbiIse2dldEhUTUw6dGhpcy5nZXRIVE1MLmJpbmQodGhpcyksZ2V0SlNPTjp0aGlzLmdldEpTT04uYmluZCh0aGlzKSxzdGF0ZTp0aGlzLnN0YXRlLHRyYW5zYWN0aW9uOnR9KSx0LmRvY0NoYW5nZWQmJiF0LmdldE1ldGEoInByZXZlbnRVcGRhdGUiKSYmdGhpcy5lbWl0VXBkYXRlKHQpfX0se2tleToiZW1pdFVwZGF0ZSIsdmFsdWU6ZnVuY3Rpb24odCl7dGhpcy5lbWl0KCJ1cGRhdGUiLHtnZXRIVE1MOnRoaXMuZ2V0SFRNTC5iaW5kKHRoaXMpLGdldEpTT046dGhpcy5nZXRKU09OLmJpbmQodGhpcyksc3RhdGU6dGhpcy5zdGF0ZSx0cmFuc2FjdGlvbjp0fSl9fSx7a2V5OiJyZXNvbHZlU2VsZWN0aW9uIix2YWx1ZTpmdW5jdGlvbigpe3ZhciB0PWFyZ3VtZW50cy5sZW5ndGg+MCYmdm9pZCAwIT09YXJndW1lbnRzWzBdP2FyZ3VtZW50c1swXTpudWxsO2lmKHRoaXMuc2VsZWN0aW9uJiZudWxsPT09dClyZXR1cm4gdGhpcy5zZWxlY3Rpb247aWYoInN0YXJ0Ij09PXR8fCEwPT09dClyZXR1cm57ZnJvbTowLHRvOjB9O2lmKCJlbmQiPT09dCl7dmFyIGU9dGhpcy5zdGF0ZS5kb2M7cmV0dXJue2Zyb206ZS5jb250ZW50LnNpemUsdG86ZS5jb250ZW50LnNpemV9fXJldHVybntmcm9tOnQsdG86dH19fSx7a2V5OiJmb2N1cyIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgdD10aGlzLGU9YXJndW1lbnRzLmxlbmd0aD4wJiZ2b2lkIDAhPT1hcmd1bWVudHNbMF0/YXJndW1lbnRzWzBdOm51bGw7aWYoISh0aGlzLnZpZXcuZm9jdXNlZCYmbnVsbD09PWV8fCExPT09ZSkpe3ZhciBuPXRoaXMucmVzb2x2ZVNlbGVjdGlvbihlKSxyPW4uZnJvbSxvPW4udG87dGhpcy5zZXRTZWxlY3Rpb24ocixvKSxzZXRUaW1lb3V0KChmdW5jdGlvbigpe3JldHVybiB0LnZpZXcuZm9jdXMoKX0pLDEwKX19fSx7a2V5OiJzZXRTZWxlY3Rpb24iLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIHQ9YXJndW1lbnRzLmxlbmd0aD4wJiZ2b2lkIDAhPT1hcmd1bWVudHNbMF0/YXJndW1lbnRzWzBdOjAsZT1hcmd1bWVudHMubGVuZ3RoPjEmJnZvaWQgMCE9PWFyZ3VtZW50c1sxXT9hcmd1bWVudHNbMV06MCxuPXRoaXMuc3RhdGUscj1uLmRvYyxvPW4udHIsaT15dCh0LDAsci5jb250ZW50LnNpemUpLGE9eXQoZSwwLHIuY29udGVudC5zaXplKSxjPXNbIlRleHRTZWxlY3Rpb24iXS5jcmVhdGUocixpLGEpLGw9by5zZXRTZWxlY3Rpb24oYyk7dGhpcy52aWV3LmRpc3BhdGNoKGwpfX0se2tleToiYmx1ciIsdmFsdWU6ZnVuY3Rpb24oKXt0aGlzLnZpZXcuZG9tLmJsdXIoKX19LHtrZXk6ImdldFNjaGVtYUpTT04iLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkoe25vZGVzOnRoaXMuZXh0ZW5zaW9ucy5ub2RlcyxtYXJrczp0aGlzLmV4dGVuc2lvbnMubWFya3N9KSl9fSx7a2V5OiJnZXRIVE1MIix2YWx1ZTpmdW5jdGlvbigpe3ZhciB0PWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpLGU9Y1siRE9NU2VyaWFsaXplciJdLmZyb21TY2hlbWEodGhpcy5zY2hlbWEpLnNlcmlhbGl6ZUZyYWdtZW50KHRoaXMuc3RhdGUuZG9jLmNvbnRlbnQpO3JldHVybiB0LmFwcGVuZENoaWxkKGUpLHQuaW5uZXJIVE1MfX0se2tleToiZ2V0SlNPTiIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5zdGF0ZS5kb2MudG9KU09OKCl9fSx7a2V5OiJzZXRDb250ZW50Iix2YWx1ZTpmdW5jdGlvbigpe3ZhciB0PWFyZ3VtZW50cy5sZW5ndGg+MCYmdm9pZCAwIT09YXJndW1lbnRzWzBdP2FyZ3VtZW50c1swXTp7fSxlPWFyZ3VtZW50cy5sZW5ndGg+MSYmdm9pZCAwIT09YXJndW1lbnRzWzFdJiZhcmd1bWVudHNbMV0sbj1hcmd1bWVudHMubGVuZ3RoPjI/YXJndW1lbnRzWzJdOnZvaWQgMCxyPXRoaXMuc3RhdGUsbz1yLmRvYyxpPXIudHIsYT10aGlzLmNyZWF0ZURvY3VtZW50KHQsbiksYz1zWyJUZXh0U2VsZWN0aW9uIl0uY3JlYXRlKG8sMCxvLmNvbnRlbnQuc2l6ZSksbD1pLnNldFNlbGVjdGlvbihjKS5yZXBsYWNlU2VsZWN0aW9uV2l0aChhLCExKS5zZXRNZXRhKCJwcmV2ZW50VXBkYXRlIiwhZSk7dGhpcy52aWV3LmRpc3BhdGNoKGwpfX0se2tleToiY2xlYXJDb250ZW50Iix2YWx1ZTpmdW5jdGlvbigpe3ZhciB0PWFyZ3VtZW50cy5sZW5ndGg+MCYmdm9pZCAwIT09YXJndW1lbnRzWzBdJiZhcmd1bWVudHNbMF07dGhpcy5zZXRDb250ZW50KHRoaXMub3B0aW9ucy5lbXB0eURvY3VtZW50LHQpfX0se2tleToic2V0QWN0aXZlTm9kZXNBbmRNYXJrcyIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgdD10aGlzO3RoaXMuYWN0aXZlTWFya3M9T2JqZWN0LmVudHJpZXModGhpcy5zY2hlbWEubWFya3MpLnJlZHVjZSgoZnVuY3Rpb24oZSxuKXt2YXIgcj1udChuLDIpLG89clswXSxpPXJbMV07cmV0dXJuIFgoe30sZSxVKHt9LG8sKGZ1bmN0aW9uKCl7dmFyIGU9YXJndW1lbnRzLmxlbmd0aD4wJiZ2b2lkIDAhPT1hcmd1bWVudHNbMF0/YXJndW1lbnRzWzBdOnt9O3JldHVybiBiKHQuc3RhdGUsaSxlKX0pKSl9KSx7fSksdGhpcy5hY3RpdmVNYXJrQXR0cnM9T2JqZWN0LmVudHJpZXModGhpcy5zY2hlbWEubWFya3MpLnJlZHVjZSgoZnVuY3Rpb24oZSxuKXt2YXIgcj1udChuLDIpLG89clswXSxpPXJbMV07cmV0dXJuIFgoe30sZSxVKHt9LG8sdyh0LnN0YXRlLGkpKSl9KSx7fSksdGhpcy5hY3RpdmVOb2Rlcz1PYmplY3QuZW50cmllcyh0aGlzLnNjaGVtYS5ub2RlcykucmVkdWNlKChmdW5jdGlvbihlLG4pe3ZhciByPW50KG4sMiksbz1yWzBdLGk9clsxXTtyZXR1cm4gWCh7fSxlLFUoe30sbywoZnVuY3Rpb24oKXt2YXIgZT1hcmd1bWVudHMubGVuZ3RoPjAmJnZvaWQgMCE9PWFyZ3VtZW50c1swXT9hcmd1bWVudHNbMF06e307cmV0dXJuIGsodC5zdGF0ZSxpLGUpfSkpKX0pLHt9KX19LHtrZXk6ImdldE1hcmtBdHRycyIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgdD1hcmd1bWVudHMubGVuZ3RoPjAmJnZvaWQgMCE9PWFyZ3VtZW50c1swXT9hcmd1bWVudHNbMF06bnVsbDtyZXR1cm4gdGhpcy5hY3RpdmVNYXJrQXR0cnNbdF19fSx7a2V5OiJyZWdpc3RlclBsdWdpbiIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgdD1hcmd1bWVudHMubGVuZ3RoPjAmJnZvaWQgMCE9PWFyZ3VtZW50c1swXT9hcmd1bWVudHNbMF06bnVsbDtpZih0KXt2YXIgZT10aGlzLnN0YXRlLnJlY29uZmlndXJlKHtwbHVnaW5zOnRoaXMuc3RhdGUucGx1Z2lucy5jb25jYXQoW3RdKX0pO3RoaXMudmlldy51cGRhdGVTdGF0ZShlKX19fSx7a2V5OiJ1bnJlZ2lzdGVyUGx1Z2luIix2YWx1ZTpmdW5jdGlvbigpe3ZhciB0PWFyZ3VtZW50cy5sZW5ndGg+MCYmdm9pZCAwIT09YXJndW1lbnRzWzBdP2FyZ3VtZW50c1swXTpudWxsO2lmKHQmJnRoaXMudmlldy5kb2NWaWV3KXt2YXIgZT10aGlzLnN0YXRlLnJlY29uZmlndXJlKHtwbHVnaW5zOnRoaXMuc3RhdGUucGx1Z2lucy5maWx0ZXIoKGZ1bmN0aW9uKGUpe3JldHVybiFlLmtleS5zdGFydHNXaXRoKCIiLmNvbmNhdCh0LCIkIikpfSkpfSk7dGhpcy52aWV3LnVwZGF0ZVN0YXRlKGUpfX19LHtrZXk6ImRlc3Ryb3kiLHZhbHVlOmZ1bmN0aW9uKCl7dGhpcy52aWV3JiZ0aGlzLnZpZXcuZGVzdHJveSgpfX0se2tleToiYnVpbHRJbkV4dGVuc2lvbnMiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLm9wdGlvbnMudXNlQnVpbHRJbkV4dGVuc2lvbnM/W25ldyB3dCxuZXcgYnQsbmV3IHh0XTpbXX19LHtrZXk6InN0YXRlIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy52aWV3P3RoaXMudmlldy5zdGF0ZTpudWxsfX0se2tleToiaXNBY3RpdmUiLGdldDpmdW5jdGlvbigpe3JldHVybiBPYmplY3QuZW50cmllcyhYKHt9LHRoaXMuYWN0aXZlTWFya3Mse30sdGhpcy5hY3RpdmVOb2RlcykpLnJlZHVjZSgoZnVuY3Rpb24odCxlKXt2YXIgbj1udChlLDIpLHI9blswXSxvPW5bMV07cmV0dXJuIFgoe30sdCxVKHt9LHIsKGZ1bmN0aW9uKCl7dmFyIHQ9YXJndW1lbnRzLmxlbmd0aD4wJiZ2b2lkIDAhPT1hcmd1bWVudHNbMF0/YXJndW1lbnRzWzBdOnt9O3JldHVybiBvKHQpfSkpKX0pLHt9KX19XSksZX0oaHQpLEN0PXtwcm9wczp7ZWRpdG9yOntkZWZhdWx0Om51bGwsdHlwZTpPYmplY3R9fSx3YXRjaDp7ZWRpdG9yOntpbW1lZGlhdGU6ITAsaGFuZGxlcjpmdW5jdGlvbih0KXt2YXIgZT10aGlzO3QmJnQuZWxlbWVudCYmdGhpcy4kbmV4dFRpY2soKGZ1bmN0aW9uKCl7ZS4kZWwuYXBwZW5kQ2hpbGQodC5lbGVtZW50LmZpcnN0Q2hpbGQpLHQuc2V0UGFyZW50Q29tcG9uZW50KGUpfSkpfX19LHJlbmRlcjpmdW5jdGlvbih0KXtyZXR1cm4gdCgiZGl2Iil9LGJlZm9yZURlc3Ryb3k6ZnVuY3Rpb24oKXt0aGlzLmVkaXRvci5lbGVtZW50PXRoaXMuJGVsfX0sT3Q9ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KGUpe3ZhciBuPXRoaXMscj1lLm9wdGlvbnM7Vyh0aGlzLHQpLHRoaXMub3B0aW9ucz1yLHRoaXMucHJldmVudEhpZGU9ITEsdGhpcy5tb3VzZWRvd25IYW5kbGVyPXRoaXMuaGFuZGxlQ2xpY2suYmluZCh0aGlzKSx0aGlzLm9wdGlvbnMuZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCJtb3VzZWRvd24iLHRoaXMubW91c2Vkb3duSGFuZGxlciksdGhpcy5vcHRpb25zLmVkaXRvci5vbigiYmx1ciIsKGZ1bmN0aW9uKCl7bi5wcmV2ZW50SGlkZT9uLnByZXZlbnRIaWRlPSExOm4ub3B0aW9ucy5lZGl0b3IuZW1pdCgibWVudWJhcjpmb2N1c1VwZGF0ZSIsITEpfSkpfXJldHVybiBLKHQsW3trZXk6ImhhbmRsZUNsaWNrIix2YWx1ZTpmdW5jdGlvbigpe3RoaXMucHJldmVudEhpZGU9ITB9fSx7a2V5OiJkZXN0cm95Iix2YWx1ZTpmdW5jdGlvbigpe3RoaXMub3B0aW9ucy5lbGVtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoIm1vdXNlZG93biIsdGhpcy5tb3VzZWRvd25IYW5kbGVyKX19XSksdH0oKTtmdW5jdGlvbiBNdCh0KXtyZXR1cm4gbmV3IHNbIlBsdWdpbiJdKHtrZXk6bmV3IHNbIlBsdWdpbktleSJdKCJtZW51X2JhciIpLHZpZXc6ZnVuY3Rpb24oZSl7cmV0dXJuIG5ldyBPdCh7ZWRpdG9yVmlldzplLG9wdGlvbnM6dH0pfX0pfXZhciBUdD17cHJvcHM6e2VkaXRvcjp7ZGVmYXVsdDpudWxsLHR5cGU6T2JqZWN0fX0sZGF0YTpmdW5jdGlvbigpe3JldHVybntmb2N1c2VkOiExfX0sd2F0Y2g6e2VkaXRvcjp7aW1tZWRpYXRlOiEwLGhhbmRsZXI6ZnVuY3Rpb24odCl7dmFyIGU9dGhpczt0JiZ0aGlzLiRuZXh0VGljaygoZnVuY3Rpb24oKXt0LnJlZ2lzdGVyUGx1Z2luKE10KHtlZGl0b3I6dCxlbGVtZW50OmUuJGVsfSkpLGUuZm9jdXNlZD10LmZvY3VzZWQsdC5vbigiZm9jdXMiLChmdW5jdGlvbigpe2UuZm9jdXNlZD0hMH0pKSx0Lm9uKCJtZW51YmFyOmZvY3VzVXBkYXRlIiwoZnVuY3Rpb24odCl7ZS5mb2N1c2VkPXR9KSl9KSl9fX0scmVuZGVyOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZWRpdG9yP3RoaXMuJHNjb3BlZFNsb3RzLmRlZmF1bHQoe2ZvY3VzZWQ6dGhpcy5mb2N1c2VkLGZvY3VzOnRoaXMuZWRpdG9yLmZvY3VzLGNvbW1hbmRzOnRoaXMuZWRpdG9yLmNvbW1hbmRzLGlzQWN0aXZlOnRoaXMuZWRpdG9yLmlzQWN0aXZlLGdldE1hcmtBdHRyczp0aGlzLmVkaXRvci5nZXRNYXJrQXR0cnMuYmluZCh0aGlzLmVkaXRvcil9KTpudWxsfX07ZnVuY3Rpb24gTnQodCxlLG4pe3ZhciByPWRvY3VtZW50LmNyZWF0ZVJhbmdlKCk7cmV0dXJuIHIuc2V0RW5kKHQsbnVsbD09bj90Lm5vZGVWYWx1ZS5sZW5ndGg6biksci5zZXRTdGFydCh0LGV8fDApLHJ9ZnVuY3Rpb24gRXQodCxlKXt2YXIgbj10LmdldENsaWVudFJlY3RzKCk7cmV0dXJuIG4ubGVuZ3RoP25bZTwwPzA6bi5sZW5ndGgtMV06dC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKX1mdW5jdGlvbiBBdCh0LGUpe3ZhciBuLHIsbz1hcmd1bWVudHMubGVuZ3RoPjImJnZvaWQgMCE9PWFyZ3VtZW50c1syXSYmYXJndW1lbnRzWzJdLGk9dC5kb2NWaWV3LmRvbUZyb21Qb3MoZSkscz1pLm5vZGUsYT1pLm9mZnNldDtpZigzPT09cy5ub2RlVHlwZSlvJiZhPHMubm9kZVZhbHVlLmxlbmd0aD8ocj1FdChOdChzLGEtMSxhKSwtMSksbj0icmlnaHQiKTphPHMubm9kZVZhbHVlLmxlbmd0aCYmKHI9RXQoTnQocyxhLGErMSksLTEpLG49ImxlZnQiKTtlbHNlIGlmKHMuZmlyc3RDaGlsZCl7aWYoYTxzLmNoaWxkTm9kZXMubGVuZ3RoKXt2YXIgYz1zLmNoaWxkTm9kZXNbYV07cj1FdCgzPT09Yy5ub2RlVHlwZT9OdChjKTpjLC0xKSxuPSJsZWZ0In1pZigoIXJ8fHIudG9wPT09ci5ib3R0b20pJiZhKXt2YXIgbD1zLmNoaWxkTm9kZXNbYS0xXTtyPUV0KDM9PT1sLm5vZGVUeXBlP050KGwpOmwsMSksbj0icmlnaHQifX1lbHNlIHI9cy5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKSxuPSJsZWZ0Ijt2YXIgcD1yW25dO3JldHVybnt0b3A6ci50b3AsYm90dG9tOnIuYm90dG9tLGxlZnQ6cCxyaWdodDpwfX12YXIgUnQ9ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KGUpe3ZhciBuPXRoaXMscj1lLm9wdGlvbnMsbz1lLmVkaXRvclZpZXc7Vyh0aGlzLHQpLHRoaXMub3B0aW9ucz1YKHt9LHtlbGVtZW50Om51bGwsa2VlcEluQm91bmRzOiEwLG9uVXBkYXRlOmZ1bmN0aW9uKCl7cmV0dXJuITF9fSx7fSxyKSx0aGlzLmVkaXRvclZpZXc9byx0aGlzLmlzQWN0aXZlPSExLHRoaXMubGVmdD0wLHRoaXMuYm90dG9tPTAsdGhpcy50b3A9MCx0aGlzLnByZXZlbnRIaWRlPSExLHRoaXMubW91c2Vkb3duSGFuZGxlcj10aGlzLmhhbmRsZUNsaWNrLmJpbmQodGhpcyksdGhpcy5vcHRpb25zLmVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigibW91c2Vkb3duIix0aGlzLm1vdXNlZG93bkhhbmRsZXIpLHRoaXMub3B0aW9ucy5lZGl0b3Iub24oImZvY3VzIiwoZnVuY3Rpb24odCl7dmFyIGU9dC52aWV3O24udXBkYXRlKGUpfSkpLHRoaXMub3B0aW9ucy5lZGl0b3Iub24oImJsdXIiLChmdW5jdGlvbih0KXt2YXIgZT10LmV2ZW50O24ucHJldmVudEhpZGU/bi5wcmV2ZW50SGlkZT0hMTpuLmhpZGUoZSl9KSl9cmV0dXJuIEsodCxbe2tleToiaGFuZGxlQ2xpY2siLHZhbHVlOmZ1bmN0aW9uKCl7dGhpcy5wcmV2ZW50SGlkZT0hMH19LHtrZXk6InVwZGF0ZSIsdmFsdWU6ZnVuY3Rpb24odCxlKXt2YXIgbj10LnN0YXRlO2lmKCF0LmNvbXBvc2luZyYmIShlJiZlLmRvYy5lcShuLmRvYykmJmUuc2VsZWN0aW9uLmVxKG4uc2VsZWN0aW9uKSkpaWYobi5zZWxlY3Rpb24uZW1wdHkpdGhpcy5oaWRlKCk7ZWxzZXt2YXIgcj1uLnNlbGVjdGlvbixvPXIuZnJvbSxpPXIudG8scz1BdCh0LG8pLGE9QXQodCxpLCEwKSxjPXRoaXMub3B0aW9ucy5lbGVtZW50Lm9mZnNldFBhcmVudDtpZihjKXt2YXIgbD1jLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLHA9dGhpcy5vcHRpb25zLmVsZW1lbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCksdT0ocy5sZWZ0K2EubGVmdCkvMi1sLmxlZnQ7dGhpcy5sZWZ0PU1hdGgucm91bmQodGhpcy5vcHRpb25zLmtlZXBJbkJvdW5kcz9NYXRoLm1pbihsLndpZHRoLXAud2lkdGgvMixNYXRoLm1heCh1LHAud2lkdGgvMikpOnUpLHRoaXMuYm90dG9tPU1hdGgucm91bmQobC5ib3R0b20tcy50b3ApLHRoaXMudG9wPU1hdGgucm91bmQoYS5ib3R0b20tbC50b3ApLHRoaXMuaXNBY3RpdmU9ITAsdGhpcy5zZW5kVXBkYXRlKCl9ZWxzZSB0aGlzLmhpZGUoKX19fSx7a2V5OiJzZW5kVXBkYXRlIix2YWx1ZTpmdW5jdGlvbigpe3RoaXMub3B0aW9ucy5vblVwZGF0ZSh7aXNBY3RpdmU6dGhpcy5pc0FjdGl2ZSxsZWZ0OnRoaXMubGVmdCxib3R0b206dGhpcy5ib3R0b20sdG9wOnRoaXMudG9wfSl9fSx7a2V5OiJoaWRlIix2YWx1ZTpmdW5jdGlvbih0KXt0JiZ0LnJlbGF0ZWRUYXJnZXQmJnRoaXMub3B0aW9ucy5lbGVtZW50LnBhcmVudE5vZGUuY29udGFpbnModC5yZWxhdGVkVGFyZ2V0KXx8KHRoaXMuaXNBY3RpdmU9ITEsdGhpcy5zZW5kVXBkYXRlKCkpfX0se2tleToiZGVzdHJveSIsdmFsdWU6ZnVuY3Rpb24oKXt0aGlzLm9wdGlvbnMuZWxlbWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCJtb3VzZWRvd24iLHRoaXMubW91c2Vkb3duSGFuZGxlcil9fV0pLHR9KCk7ZnVuY3Rpb24gRHQodCl7cmV0dXJuIG5ldyBzWyJQbHVnaW4iXSh7a2V5Om5ldyBzWyJQbHVnaW5LZXkiXSgibWVudV9idWJibGUiKSx2aWV3OmZ1bmN0aW9uKGUpe3JldHVybiBuZXcgUnQoe2VkaXRvclZpZXc6ZSxvcHRpb25zOnR9KX19KX1PYmplY3QsQm9vbGVhbjt2YXIgenQ9ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KGUpe3ZhciBuPXRoaXMscj1lLm9wdGlvbnMsbz1lLmVkaXRvclZpZXc7Vyh0aGlzLHQpLHRoaXMub3B0aW9ucz1YKHt9LHtyZXNpemVPYnNlcnZlcjohMCxlbGVtZW50Om51bGwsb25VcGRhdGU6ZnVuY3Rpb24oKXtyZXR1cm4hMX19LHt9LHIpLHRoaXMucHJldmVudEhpZGU9ITEsdGhpcy5lZGl0b3JWaWV3PW8sdGhpcy5pc0FjdGl2ZT0hMSx0aGlzLnRvcD0wLHRoaXMubW91c2Vkb3duSGFuZGxlcj10aGlzLmhhbmRsZUNsaWNrLmJpbmQodGhpcyksdGhpcy5vcHRpb25zLmVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigibW91c2Vkb3duIix0aGlzLm1vdXNlZG93bkhhbmRsZXIpLHRoaXMub3B0aW9ucy5lZGl0b3Iub24oImZvY3VzIiwoZnVuY3Rpb24odCl7dmFyIGU9dC52aWV3O24udXBkYXRlKGUpfSkpLHRoaXMub3B0aW9ucy5lZGl0b3Iub24oImJsdXIiLChmdW5jdGlvbih0KXt2YXIgZT10LmV2ZW50O24ucHJldmVudEhpZGU/bi5wcmV2ZW50SGlkZT0hMTpuLmhpZGUoZSl9KSksdGhpcy5vcHRpb25zLnJlc2l6ZU9ic2VydmVyJiZ3aW5kb3cuUmVzaXplT2JzZXJ2ZXImJih0aGlzLnJlc2l6ZU9ic2VydmVyPW5ldyBSZXNpemVPYnNlcnZlcigoZnVuY3Rpb24oKXtuLmlzQWN0aXZlJiZuLnVwZGF0ZShuLmVkaXRvclZpZXcpfSkpLHRoaXMucmVzaXplT2JzZXJ2ZXIub2JzZXJ2ZSh0aGlzLmVkaXRvclZpZXcuZG9tKSl9cmV0dXJuIEsodCxbe2tleToiaGFuZGxlQ2xpY2siLHZhbHVlOmZ1bmN0aW9uKCl7dGhpcy5wcmV2ZW50SGlkZT0hMH19LHtrZXk6InVwZGF0ZSIsdmFsdWU6ZnVuY3Rpb24odCxlKXt2YXIgbj10LnN0YXRlO2lmKCEoZSYmZS5kb2MuZXEobi5kb2MpJiZlLnNlbGVjdGlvbi5lcShuLnNlbGVjdGlvbikpKWlmKG4uc2VsZWN0aW9uLmVtcHR5KXt2YXIgcj10LmRvbUF0UG9zKG4uc2VsZWN0aW9uLmFuY2hvciksbz0iPGJyPiI9PT1yLm5vZGUuaW5uZXJIVE1MJiYiUCI9PT1yLm5vZGUudGFnTmFtZSYmci5ub2RlLnBhcmVudE5vZGU9PT10LmRvbTtpZihvKXt2YXIgaT10aGlzLm9wdGlvbnMuZWxlbWVudC5vZmZzZXRQYXJlbnQ7aWYoaSl7dmFyIHM9aS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKSxhPXQuY29vcmRzQXRQb3Mobi5zZWxlY3Rpb24uYW5jaG9yKSxjPWEudG9wLXMudG9wO3RoaXMuaXNBY3RpdmU9ITAsdGhpcy50b3A9Yyx0aGlzLnNlbmRVcGRhdGUoKX1lbHNlIHRoaXMuaGlkZSgpfWVsc2UgdGhpcy5oaWRlKCl9ZWxzZSB0aGlzLmhpZGUoKX19LHtrZXk6InNlbmRVcGRhdGUiLHZhbHVlOmZ1bmN0aW9uKCl7dGhpcy5vcHRpb25zLm9uVXBkYXRlKHtpc0FjdGl2ZTp0aGlzLmlzQWN0aXZlLHRvcDp0aGlzLnRvcH0pfX0se2tleToiaGlkZSIsdmFsdWU6ZnVuY3Rpb24odCl7dCYmdC5yZWxhdGVkVGFyZ2V0JiZ0aGlzLm9wdGlvbnMuZWxlbWVudC5wYXJlbnROb2RlLmNvbnRhaW5zKHQucmVsYXRlZFRhcmdldCl8fCh0aGlzLmlzQWN0aXZlPSExLHRoaXMuc2VuZFVwZGF0ZSgpKX19LHtrZXk6ImRlc3Ryb3kiLHZhbHVlOmZ1bmN0aW9uKCl7dGhpcy5vcHRpb25zLmVsZW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcigibW91c2Vkb3duIix0aGlzLm1vdXNlZG93bkhhbmRsZXIpLHRoaXMucmVzaXplT2JzZXJ2ZXImJnRoaXMucmVzaXplT2JzZXJ2ZXIudW5vYnNlcnZlKHRoaXMuZWRpdG9yVmlldy5kb20pfX1dKSx0fSgpO2Z1bmN0aW9uIFB0KHQpe3JldHVybiBuZXcgc1siUGx1Z2luIl0oe2tleTpuZXcgc1siUGx1Z2luS2V5Il0oImZsb2F0aW5nX21lbnUiKSx2aWV3OmZ1bmN0aW9uKGUpe3JldHVybiBuZXcgenQoe2VkaXRvclZpZXc6ZSxvcHRpb25zOnR9KX19KX12YXIgSXQ9ZnVuY3Rpb24oKXt2YXIgdD10aGlzLGU9dC4kY3JlYXRlRWxlbWVudCxuPXQuX3NlbGYuX2N8fGU7cmV0dXJuIG4oImRpdiIse3N0YXRpY0NsYXNzOiJpY29uIixjbGFzczpbImljb24tLSIrdC5uYW1lLCJpY29uLS0iK3Quc2l6ZV19LFtuKHQuaWNvbix7dGFnOiJjb21wb25lbnQifSldLDEpfSxfdD1bXSxGdD1uKCJhNzQ1IiksQnQ9bi5uKEZ0KTtmdW5jdGlvbiBqdCh0KXtpZihCdCgpKHQpKXJldHVybiB0fXZhciAkdD1uKCI1ZDczIiksVnQ9bi5uKCR0KSxMdD1uKCJjOGJiIiksSnQ9bi5uKEx0KTtmdW5jdGlvbiBxdCh0LGUpe2lmKEp0KCkoT2JqZWN0KHQpKXx8IltvYmplY3QgQXJndW1lbnRzXSI9PT1PYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwodCkpe3ZhciBuPVtdLHI9ITAsbz0hMSxpPXZvaWQgMDt0cnl7Zm9yKHZhciBzLGE9VnQoKSh0KTshKHI9KHM9YS5uZXh0KCkpLmRvbmUpO3I9ITApaWYobi5wdXNoKHMudmFsdWUpLGUmJm4ubGVuZ3RoPT09ZSlicmVha31jYXRjaChjKXtvPSEwLGk9Y31maW5hbGx5e3RyeXtyfHxudWxsPT1hWyJyZXR1cm4iXXx8YVsicmV0dXJuIl0oKX1maW5hbGx5e2lmKG8pdGhyb3cgaX19cmV0dXJuIG59fWZ1bmN0aW9uIFd0KCl7dGhyb3cgbmV3IFR5cGVFcnJvcigiSW52YWxpZCBhdHRlbXB0IHRvIGRlc3RydWN0dXJlIG5vbi1pdGVyYWJsZSBpbnN0YW5jZSIpfWZ1bmN0aW9uIEh0KHQsZSl7cmV0dXJuIGp0KHQpfHxxdCh0LGUpfHxXdCgpfW4oImFjNmEiKSxuKCJjYWRmIiksbigiZmZjMSIpLG4oIjdmN2YiKTtmb3IodmFyIEt0PXtmdW5jdGlvbmFsOiEwLHJlbmRlcih0LGUpe2NvbnN0e19jOm4sX3Y6cixkYXRhOm8sY2hpbGRyZW46aT1bXX09ZSx7Y2xhc3M6cyxzdGF0aWNDbGFzczphLHN0eWxlOmMsc3RhdGljU3R5bGU6bCxhdHRyczpwPXt9LC4uLnV9PW87cmV0dXJuIG4oInN2ZyIse2NsYXNzOltzLGFdLHN0eWxlOltjLGxdLGF0dHJzOk9iamVjdC5hc3NpZ24oe3htbG5zOiJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIsdmlld0JveDoiMCAwIDI0IDI0In0scCksLi4udX0saS5jb25jYXQoW24oInBhdGgiLHthdHRyczp7ZDoiTTUgMTRhNSA1IDAgMTEwIDEwIDUgNSAwIDAxMC0xMHptMi41IDUuOTM4YS45MzcuOTM3IDAgMTAwLTEuODc1SDYuMjVhLjMxMi4zMTIgMCAwMS0uMzEzLS4zMTNWMTYuNWEuOTM3LjkzNyAwIDEwLTEuODc1IDB2MS4yNWMwIC4xNzMtLjE0LjMxMy0uMzEyLjMxM0gyLjVhLjkzNy45MzcgMCAxMDAgMS44NzVoMS4yNWMuMTczIDAgLjMxMy4xNC4zMTMuMzEydjEuMjVhLjkzNy45MzcgMCAxMDEuODc1IDB2LTEuMjVjMC0uMTczLjE0LS4zMTMuMzEyLS4zMTNINy41ek0xNiAxOWEzIDMgMCAwMDYgMFY1YTMgMyAwIDAwLTYgMHYxNHptLTIgMFY1YTUgNSAwIDAxMTAgMHYxNGE1IDUgMCAwMS0xMCAweiJ9fSldKSl9fSxVdD17ZnVuY3Rpb25hbDohMCxyZW5kZXIodCxlKXtjb25zdHtfYzpuLF92OnIsZGF0YTpvLGNoaWxkcmVuOmk9W119PWUse2NsYXNzOnMsc3RhdGljQ2xhc3M6YSxzdHlsZTpjLHN0YXRpY1N0eWxlOmwsYXR0cnM6cD17fSwuLi51fT1vO3JldHVybiBuKCJzdmciLHtjbGFzczpbcyxhXSxzdHlsZTpbYyxsXSxhdHRyczpPYmplY3QuYXNzaWduKHt4bWxuczoiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciLHZpZXdCb3g6IjAgMCAyNCAyNCJ9LHApLC4uLnV9LGkuY29uY2F0KFtuKCJwYXRoIix7YXR0cnM6e2Q6Ik0xOSAxNGE1IDUgMCAxMTAgMTAgNSA1IDAgMDEwLTEwem0yLjUgNS45MzhhLjkzNy45MzcgMCAxMDAtMS44NzVoLTEuMjVhLjMxMi4zMTIgMCAwMS0uMzEzLS4zMTNWMTYuNWEuOTM3LjkzNyAwIDEwLTEuODc1IDB2MS4yNWMwIC4xNzMtLjE0LjMxMy0uMzEyLjMxM0gxNi41YS45MzcuOTM3IDAgMTAwIDEuODc1aDEuMjVjLjE3MyAwIC4zMTMuMTQuMzEzLjMxMnYxLjI1YS45MzcuOTM3IDAgMTAxLjg3NSAwdi0xLjI1YzAtLjE3My4xNC0uMzEzLjMxMi0uMzEzaDEuMjV6TTIgMTlhMyAzIDAgMDA2IDBWNWEzIDMgMCAxMC02IDB2MTR6bS0yIDBWNWE1IDUgMCAxMTEwIDB2MTRhNSA1IDAgMDEtMTAgMHoifX0pXSkpfX0sR3Q9e2Z1bmN0aW9uYWw6ITAscmVuZGVyKHQsZSl7Y29uc3R7X2M6bixfdjpyLGRhdGE6byxjaGlsZHJlbjppPVtdfT1lLHtjbGFzczpzLHN0YXRpY0NsYXNzOmEsc3R5bGU6YyxzdGF0aWNTdHlsZTpsLGF0dHJzOnA9e30sLi4udX09bztyZXR1cm4gbigic3ZnIix7Y2xhc3M6W3MsYV0sc3R5bGU6W2MsbF0sYXR0cnM6T2JqZWN0LmFzc2lnbih7eG1sbnM6Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIix2aWV3Qm94OiIwIDAgMjQgMjQifSxwKSwuLi51fSxpLmNvbmNhdChbbigicGF0aCIse2F0dHJzOntkOiJNMTkgMGE1IDUgMCAxMTAgMTAgNSA1IDAgMDEwLTEwem0yLjUgNS45MzhhLjkzNy45MzcgMCAxMDAtMS44NzVoLTEuMjVhLjMxMi4zMTIgMCAwMS0uMzEzLS4zMTNWMi41YS45MzcuOTM3IDAgMTAtMS44NzUgMHYxLjI1YzAgLjE3My0uMTQuMzEzLS4zMTIuMzEzSDE2LjVhLjkzNy45MzcgMCAxMDAgMS44NzVoMS4yNWMuMTczIDAgLjMxMy4xNC4zMTMuMzEyVjcuNWEuOTM3LjkzNyAwIDEwMS44NzUgMFY2LjI1YzAtLjE3My4xNC0uMzEzLjMxMi0uMzEzaDEuMjV6TTUgMTZhMyAzIDAgMDAwIDZoMTRhMyAzIDAgMDAwLTZINXptMC0yaDE0YTUgNSAwIDAxMCAxMEg1YTUgNSAwIDAxMC0xMHoifX0pXSkpfX0sWHQ9e2Z1bmN0aW9uYWw6ITAscmVuZGVyKHQsZSl7Y29uc3R7X2M6bixfdjpyLGRhdGE6byxjaGlsZHJlbjppPVtdfT1lLHtjbGFzczpzLHN0YXRpY0NsYXNzOmEsc3R5bGU6YyxzdGF0aWNTdHlsZTpsLGF0dHJzOnA9e30sLi4udX09bztyZXR1cm4gbigic3ZnIix7Y2xhc3M6W3MsYV0sc3R5bGU6W2MsbF0sYXR0cnM6T2JqZWN0LmFzc2lnbih7eG1sbnM6Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIix2aWV3Qm94OiIwIDAgMjQgMjQifSxwKSwuLi51fSxpLmNvbmNhdChbbigicGF0aCIse2F0dHJzOntkOiJNMTkgMTRhNSA1IDAgMTEwIDEwIDUgNSAwIDAxMC0xMHptMi41IDUuOTM4YS45MzcuOTM3IDAgMTAwLTEuODc1aC0xLjI1YS4zMTIuMzEyIDAgMDEtLjMxMy0uMzEzVjE2LjVhLjkzNy45MzcgMCAxMC0xLjg3NSAwdjEuMjVjMCAuMTczLS4xNC4zMTMtLjMxMi4zMTNIMTYuNWEuOTM3LjkzNyAwIDEwMCAxLjg3NWgxLjI1Yy4xNzMgMCAuMzEzLjE0LjMxMy4zMTJ2MS4yNWEuOTM3LjkzNyAwIDEwMS44NzUgMHYtMS4yNWMwLS4xNzMuMTQtLjMxMy4zMTItLjMxM2gxLjI1ek01IDJhMyAzIDAgMTAwIDZoMTRhMyAzIDAgMDAwLTZINXptMC0yaDE0YTUgNSAwIDAxMCAxMEg1QTUgNSAwIDExNSAweiJ9fSldKSl9fSxZdD17ZnVuY3Rpb25hbDohMCxyZW5kZXIodCxlKXtjb25zdHtfYzpuLF92OnIsZGF0YTpvLGNoaWxkcmVuOmk9W119PWUse2NsYXNzOnMsc3RhdGljQ2xhc3M6YSxzdHlsZTpjLHN0YXRpY1N0eWxlOmwsYXR0cnM6cD17fSwuLi51fT1vO3JldHVybiBuKCJzdmciLHtjbGFzczpbcyxhXSxzdHlsZTpbYyxsXSxhdHRyczpPYmplY3QuYXNzaWduKHt4bWxuczoiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciLHZpZXdCb3g6IjAgMCAyNCAyNCJ9LHApLC4uLnV9LGkuY29uY2F0KFtuKCJwYXRoIix7YXR0cnM6e2Q6Ik0xNy4xOTQgMTAuOTYyQTYuMjcxIDYuMjcxIDAgMDAxMi44NDQuMjQ4SDQuM2ExLjI1IDEuMjUgMCAwMDAgMi41aDEuMDEzYS4yNS4yNSAwIDAxLjI1LjI1VjIxYS4yNS4yNSAwIDAxLS4yNS4yNUg0LjNhMS4yNSAxLjI1IDAgMTAwIDIuNWg5Ljk2M2E2Ljc0MiA2Ljc0MiAwIDAwMi45My0xMi43ODZ6bS00LjM1LTguMjE0YTMuNzYyIDMuNzYyIDAgMDEwIDcuNTIzSDguMzEzYS4yNS4yNSAwIDAxLS4yNS0uMjVWM2EuMjUuMjUgMCAwMS4yNS0uMjV6bTEuNDIgMTguNUg4LjMxM2EuMjUuMjUgMCAwMS0uMjUtLjI1di03Ljk3N2EuMjUuMjUgMCAwMS4yNS0uMjVIMTQuMjY0YTQuMjM5IDQuMjM5IDAgMDEwIDguNDc3eiJ9fSldKSl9fSxRdD17ZnVuY3Rpb25hbDohMCxyZW5kZXIodCxlKXtjb25zdHtfYzpuLF92OnIsZGF0YTpvLGNoaWxkcmVuOmk9W119PWUse2NsYXNzOnMsc3RhdGljQ2xhc3M6YSxzdHlsZTpjLHN0YXRpY1N0eWxlOmwsYXR0cnM6cD17fSwuLi51fT1vO3JldHVybiBuKCJzdmciLHtjbGFzczpbcyxhXSxzdHlsZTpbYyxsXSxhdHRyczpPYmplY3QuYXNzaWduKHt4bWxuczoiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciLHZpZXdCb3g6IjAgMCAyNCAyNCJ9LHApLC4uLnV9LGkuY29uY2F0KFtuKCJwYXRoIix7YXR0cnM6e2Q6Ik0yMSAwSDNhMyAzIDAgMDAtMyAzdjE4YTMgMyAwIDAwMyAzaDE4YTMgMyAwIDAwMy0zVjNhMyAzIDAgMDAtMy0zem0xIDIxYTEgMSAwIDAxLTEgMUgzYTEgMSAwIDAxLTEtMVYzYTEgMSAwIDAxMS0xaDE4YTEgMSAwIDAxMSAxeiJ9fSksbigicGF0aCIse2F0dHJzOntkOiJNMTEuMjQ5IDQuNWExLjI1MSAxLjI1MSAwIDAwLTEuNzUuMjVMNy4zNjUgNy42bC0uNDgyLS40ODFhMS4yNSAxLjI1IDAgMDAtMS43NjcgMS43NjRsMS41IDEuNWExLjI2MiAxLjI2MiAwIDAwMS44ODQtLjEzNGwzLTRhMS4yNSAxLjI1IDAgMDAtLjI1MS0xLjc0OXpNMTEuMjQ5IDEzLjVhMS4yNTEgMS4yNTEgMCAwMC0xLjc1LjI1TDcuMzY1IDE2LjZsLS40ODItLjQ4MWExLjI1IDEuMjUgMCAxMC0xLjc2NyAxLjc2OGwxLjUgMS41YTEuMjY1IDEuMjY1IDAgMDAxLjg4NC0uMTM4bDMtNGExLjI1IDEuMjUgMCAwMC0uMjUxLTEuNzQ5ek0xOC41IDcuNzQ5SDE0YTEuMjUgMS4yNSAwIDAwMCAyLjVoNC41YTEuMjUgMS4yNSAwIDAwMC0yLjV6TTE4LjUgMTUuNzQ5SDE0YTEuMjUgMS4yNSAwIDAwMCAyLjVoNC41YTEuMjUgMS4yNSAwIDEwMC0yLjV6In19KV0pKX19LFp0PXtmdW5jdGlvbmFsOiEwLHJlbmRlcih0LGUpe2NvbnN0e19jOm4sX3Y6cixkYXRhOm8sY2hpbGRyZW46aT1bXX09ZSx7Y2xhc3M6cyxzdGF0aWNDbGFzczphLHN0eWxlOmMsc3RhdGljU3R5bGU6bCxhdHRyczpwPXt9LC4uLnV9PW87cmV0dXJuIG4oInN2ZyIse2NsYXNzOltzLGFdLHN0eWxlOltjLGxdLGF0dHJzOk9iamVjdC5hc3NpZ24oe3htbG5zOiJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIsdmlld0JveDoiMCAwIDI0IDI0In0scCksLi4udX0saS5jb25jYXQoW24oInBhdGgiLHthdHRyczp7ZDoiTTkuMTQ3IDIxLjU1MmExLjI0NCAxLjI0NCAwIDAxLS44OTUtLjM3OEwuODQgMTMuNTYxYTIuMjU3IDIuMjU3IDAgMDEwLTMuMTI1bDcuNDEyLTcuNjEzYTEuMjUgMS4yNSAwIDAxMS43OTEgMS43NDRsLTYuOSA3LjA4M2EuNS41IDAgMDAwIC43bDYuOSA3LjA4MmExLjI1IDEuMjUgMCAwMS0uOSAyLjEyMnpNMTQuODU0IDIxLjU1MmExLjI1IDEuMjUgMCAwMS0uOS0yLjEyMmw2LjktNy4wODNhLjUuNSAwIDAwMC0uN2wtNi45LTcuMDgyYTEuMjUgMS4yNSAwIDAxMS43OTEtMS43NDRsNy40MTEgNy42MTJhMi4yNTcgMi4yNTcgMCAwMTAgMy4xMjVsLTcuNDEyIDcuNjE0YTEuMjQ0IDEuMjQ0IDAgMDEtLjg5LjM4em02LjUxNC05LjM3M3oifX0pXSkpfX0sdGU9e2Z1bmN0aW9uYWw6ITAscmVuZGVyKHQsZSl7Y29uc3R7X2M6bixfdjpyLGRhdGE6byxjaGlsZHJlbjppPVtdfT1lLHtjbGFzczpzLHN0YXRpY0NsYXNzOmEsc3R5bGU6YyxzdGF0aWNTdHlsZTpsLGF0dHJzOnA9e30sLi4udX09bztyZXR1cm4gbigic3ZnIix7Y2xhc3M6W3MsYV0sc3R5bGU6W2MsbF0sYXR0cnM6T2JqZWN0LmFzc2lnbih7eG1sbnM6Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIix2aWV3Qm94OiIwIDAgNDc0LjU1NyA0NzQuNTU3Iix3aWR0aDoiMjQiLGhlaWdodDoiMjQifSxwKSwuLi51fSxpLmNvbmNhdChbbigicGF0aCIse2F0dHJzOntkOiJNMCAyLjAyOFY0NzIuNTNoNDc0LjU1N1YyLjAyOEgwem00MzUuNDcxIDQzMS40MzdIMzkuMTA4VjQxLjEzNmgzOTYuMzYzdjM5Mi4zMjl6In19KSxuKCJwYXRoIix7YXR0cnM6e2Q6Ik0xMjQuOTE2IDI3My42MjVjMS4yOTQgNC41MyAyLjAwNiAxNC40MDkgMi4wMDYgMjkuNTc0IDAgMTMuMDA3LjY2OSAyMi41NjMgMi4wNzEgMjguNjI0IDEuNDAyIDYuMDE4IDQuMTQyIDExLjE3NCA4LjI0IDE1LjI3MiA0LjA3NyA0LjA5OCA5LjA4MSA3LjA3NSAxNS4wMTMgOC44NjYgNS45NTQgMS43NjkgMTQuNDk2IDIuNjUzIDI1LjYwNSAyLjY1M2g2LjU3OXYtMjkuNjZjLTguODY2IDAtMTQuNjI1LS41NjEtMTcuMy0xLjY4Mi0yLjY1My0xLjE0My00LjYzOC0yLjcxOC01Ljk1NC00Ljg5Ny0xLjI5NC0yLjE1Ny0xLjk0MS01LjkxLTEuOTQxLTExLjMyNSAwLTMuODQtLjM0NS0xMi41NzYtLjk5Mi0yNi4yOTUtLjQ5Ni04Ljk3My0xLjU3NS0xNi4xMzUtMy4yMzYtMjEuNDg0LTEuNjM5LTUuMzkzLTQuMDEyLTkuOTQ0LTcuMTE4LTEzLjY5Ny0zLjA4NS0zLjc3NS03LjA1NC03LjAzMi0xMS45MDctOS44MTUgNS41MDEtMy41ODEgOS41NzctNi45NjcgMTIuMjc0LTEwLjMxMSAyLjY3NS0zLjI1NyA0Ljg3NS03LjQ0MiA2LjYwMS0xMi41MTEgMS43MDQtNS4wNjkgMi43ODMtMTEuNjkxIDMuMjE0LTE5Ljg0NS43MzMtMTQuNDUyIDEuMTQzLTI0LjI4OSAxLjE0My0yOS40ODcgMC01LjA5MS42MjYtOC43MTUgMS44NTUtMTAuODA3IDEuMjUxLTIuMDcxIDMuMTQ5LTMuNjQ1IDUuNzM4LTQuNzAyIDIuNTg4LTEuMDE0IDguNDc3LTEuNTMyIDE3LjYyMy0xLjUzMnYtMjkuNTA5aC02LjU3OWMtMTAuODA3IDAtMTguNzIzLjc1NS0yMy43MjggMi4yNDMtNy40MiAyLjIyMi0xMy4wNzIgNS4yNDItMTYuOTc2IDkuMDYtMy44ODMgMy44NC02LjU1OCA4LjkwOS04LjA0NiAxNS4yMjktMS40NjcgNi4yNzctMi4xNzkgMTcuNDI5LTIuMTc5IDMzLjM0OCAwIDkuODU4LS4zNjcgMTYuNjc0LTEuMDM1IDIwLjY0My0uODIgNS4yNjMtMi4zNTEgOS42NDItNC41NTEgMTMuMTU4LTIuMjQzIDMuNTE2LTQuODMyIDUuOTk3LTcuOTE2IDcuNDg1LTMuMDIgMS40NDUtNy41MjggMi4zNzMtMTMuNTY4IDIuNzM5djI5LjY4MWM3LjU5My4zODggMTMuMjAxIDIuMDI4IDE2Ljg5IDQuODk3IDMuNjQ1IDIuODA2IDYuMzg0IDcuNDg3IDguMTc0IDE0LjA4N3pNMjEyLjA4NCAzMzEuMzkybDYuNzMgMTQuMzY2YzcuNDItMi42NTMgMTMuNTY4LTYuMzIgMTguNC0xMC45MTUgNC44MzItNC41OTUgOC4wODktOS44MTUgOS44MTUtMTUuNjE3IDEuNzQ3LTUuODQ2IDIuNjEtMTMuODA1IDIuNjEtMjMuODE0di0yNC43ODVoLTM0Ljc1MXYzNC43MjloMTYuNzYxYy0uMTI5IDYuODM4LTEuNzI2IDEyLjI5NS00LjY1OSAxNi40OC0yLjk1NiA0LjAzNC03LjkzOSA3LjI2OS0xNC45MDYgOS41NTZ6TTIxNC44ODggMTc0LjAxMmgzNC43NTF2MzQuNzcyaC0zNC43NTF6TTMxMS4xOCAzNTYuMzQ5YzcuNDY0LTIuMjQzIDEzLjIwMS01LjIyIDE3LjEwNi05LjA4MSAzLjg4My0zLjgxOCA2LjUzNi04LjkzIDcuOTM4LTE1LjI3MiAxLjQwMi02LjM2MyAyLjE3OS0xNy41MTUgMi4xNzktMzMuNDk5IDAtOS43NS4zNjctMTYuNjA5IDEuMDE0LTIwLjU1Ny44ODQtNS4yNjMgMi40MzgtOS42NDIgNC42NTktMTMuMTM3IDIuMTc5LTMuNDk0IDQuNzY3LTYuMDE4IDcuODA5LTcuNDg1IDMuMDQyLTEuNDY3IDcuNTUtMi4zNzMgMTMuNTY4LTIuNjk2aC0uMDQzdi0yOS42NmMtNy42MTUtLjQ1My0xMy4xOC0yLjA3MS0xNi45MzMtNC45MTgtMy42NjctMi44MjYtNi40MDctNy41NzEtOC4yNjItMTQuMTA3LTEuMjUxLTQuNjE2LTEuODU1LTE0LjQ1Mi0xLjg1NS0yOS41MDkgMC0xMy4wMjktLjcxMi0yMi41NDEtMi4xNTctMjguNTYtMS40MjQtNi4xMDUtNC4xNjMtMTEuMTk1LTguMTk3LTE1LjM1OC00LjA1NS00LjE0Mi05LjAzOC03LjA1NC0xNC45Ny04LjgwMS01Ljk3NS0xLjcyNi0xNC41MTctMi42MS0yNS42MjYtMi42MWgtNi41NTd2MjkuNDY2YzkuMzQgMCAxNS4zMzcuNTYxIDE3Ljk5IDEuNjgzIDIuNjk2IDEuMSA0LjU1MSAyLjY3NSA1LjU2NSA0LjcyNCAxLjA1NyAyLjA0OSAxLjU1MyA2LjE2OSAxLjYzOSAxMi4zNi40NTMgMTkuNjA4IDEuMTg2IDMyLjI5MSAyLjA3MSAzOC4wNzIgMS4zODEgOC4zNjkgNC4wNTUgMTUuMjk0IDcuODczIDIwLjY4NiAyLjgyNiAzLjg0IDcuMjQ4IDcuNjU4IDEzLjM1MiAxMS42MjctNC43MDIgMi42OTYtOC41MiA1Ljg0Ni0xMS41NCA5LjQ0OC0zLjA0MSAzLjU1OS01LjQzNiA3Ljk2LTcuMjA1IDEzLjA3Mi0xLjgxMiA1LjE3Ny0yLjk1NSAxMi4wOC0zLjMyMiAyMC42LS42NjkgMTQuMTcyLTEuMSAyMy44MTQtMS4xIDI4LjgxOS0uMDg2IDUuMDI2LS42NjkgOC41ODUtMS45ODQgMTAuNjk5LTEuMzE2IDIuMTM2LTMuMjc5IDMuNzEtNS45NzUgNC44NTMtMi43MTggMS4xMjItOC41MiAxLjYzOS0xNy4zNjQgMS42Mzl2MjkuNjZoNi42MjJjMTAuNzQxLjA2NCAxOC42NzktLjcxMiAyMy43MDUtMi4xNTh6In19KV0pKX19LGVlPXtmdW5jdGlvbmFsOiEwLHJlbmRlcih0LGUpe2NvbnN0e19jOm4sX3Y6cixkYXRhOm8sY2hpbGRyZW46aT1bXX09ZSx7Y2xhc3M6cyxzdGF0aWNDbGFzczphLHN0eWxlOmMsc3RhdGljU3R5bGU6bCxhdHRyczpwPXt9LC4uLnV9PW87cmV0dXJuIG4oInN2ZyIse2NsYXNzOltzLGFdLHN0eWxlOltjLGxdLGF0dHJzOk9iamVjdC5hc3NpZ24oe3htbG5zOiJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIsdmlld0JveDoiMCAwIDI0IDI0In0scCksLi4udX0saS5jb25jYXQoW24oInBhdGgiLHthdHRyczp7ZDoiTTIgMTlhMyAzIDAgMDAzIDNoMTRhMyAzIDAgMDAzLTNWNWEzIDMgMCAwMC0zLTNINWEzIDMgMCAwMC0zIDN2MTR6bS0yIDBWNWE1IDUgMCAwMTUtNWgxNGE1IDUgMCAwMTUgNXYxNGE1IDUgMCAwMS01IDVINWE1IDUgMCAwMS01LTV6bTEyLTlhMSAxIDAgMDExIDF2MmExIDEgMCAwMS0yIDB2LTJhMSAxIDAgMDExLTF6bTAgNmExIDEgMCAwMTEgMXYzYTEgMSAwIDAxLTIgMHYtM2ExIDEgMCAwMTEtMXptMC0xM2ExIDEgMCAwMTEgMXYzYTEgMSAwIDAxLTIgMFY0YTEgMSAwIDAxMS0xeiJ9fSldKSl9fSxuZT17ZnVuY3Rpb25hbDohMCxyZW5kZXIodCxlKXtjb25zdHtfYzpuLF92OnIsZGF0YTpvLGNoaWxkcmVuOmk9W119PWUse2NsYXNzOnMsc3RhdGljQ2xhc3M6YSxzdHlsZTpjLHN0YXRpY1N0eWxlOmwsYXR0cnM6cD17fSwuLi51fT1vO3JldHVybiBuKCJzdmciLHtjbGFzczpbcyxhXSxzdHlsZTpbYyxsXSxhdHRyczpPYmplY3QuYXNzaWduKHt4bWxuczoiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciLHZpZXdCb3g6IjAgMCAyNCAyNCJ9LHApLC4uLnV9LGkuY29uY2F0KFtuKCJwYXRoIix7YXR0cnM6e2Q6Ik0xMi42NDEgMjEuOTMxYTcuMDEgNy4wMSAwIDAwMS4xNDYgMS43NEE1IDUgMCAwMTcgMTlWNWE1IDUgMCAxMTEwIDB2Ny4yOWE2Ljk3MiA2Ljk3MiAwIDAwLTIgLjk2NVY1YTMgMyAwIDAwLTYgMHYxNGEzIDMgMCAwMDMuNjQxIDIuOTMxek0xOSAxNGE1IDUgMCAxMTAgMTAgNSA1IDAgMDEwLTEwem0tMi41IDUuOTM4aDVhLjkzNy45MzcgMCAxMDAtMS44NzVoLTVhLjkzNy45MzcgMCAxMDAgMS44NzV6In19KV0pKX19LHJlPXtmdW5jdGlvbmFsOiEwLHJlbmRlcih0LGUpe2NvbnN0e19jOm4sX3Y6cixkYXRhOm8sY2hpbGRyZW46aT1bXX09ZSx7Y2xhc3M6cyxzdGF0aWNDbGFzczphLHN0eWxlOmMsc3RhdGljU3R5bGU6bCxhdHRyczpwPXt9LC4uLnV9PW87cmV0dXJuIG4oInN2ZyIse2NsYXNzOltzLGFdLHN0eWxlOltjLGxdLGF0dHJzOk9iamVjdC5hc3NpZ24oe3htbG5zOiJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIsdmlld0JveDoiMCAwIDI0IDI0In0scCksLi4udX0saS5jb25jYXQoW24oInBhdGgiLHthdHRyczp7ZDoiTTEzLjI1NSAxNWE2Ljk3MiA2Ljk3MiAwIDAwLS45NjUgMkg1QTUgNSAwIDAxNSA3aDE0YTUgNSAwIDAxNC42NzEgNi43ODcgNy4wMSA3LjAxIDAgMDAtMS43NC0xLjE0NkEzIDMgMCAwMDE5IDlINWEzIDMgMCAwMDAgNmg4LjI1NXpNMTkgMTRhNSA1IDAgMTEwIDEwIDUgNSAwIDAxMC0xMHptLTIuNSA1LjkzOGg1YS45MzcuOTM3IDAgMTAwLTEuODc1aC01YS45MzcuOTM3IDAgMTAwIDEuODc1eiJ9fSldKSl9fSxvZT17ZnVuY3Rpb25hbDohMCxyZW5kZXIodCxlKXtjb25zdHtfYzpuLF92OnIsZGF0YTpvLGNoaWxkcmVuOmk9W119PWUse2NsYXNzOnMsc3RhdGljQ2xhc3M6YSxzdHlsZTpjLHN0YXRpY1N0eWxlOmwsYXR0cnM6cD17fSwuLi51fT1vO3JldHVybiBuKCJzdmciLHtjbGFzczpbcyxhXSxzdHlsZTpbYyxsXSxhdHRyczpPYmplY3QuYXNzaWduKHt4bWxuczoiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciLHZpZXdCb3g6IjAgMCAyNCAyNCJ9LHApLC4uLnV9LGkuY29uY2F0KFtuKCJwYXRoIix7YXR0cnM6e2Q6Ik0xOSAxNGE1IDUgMCAxMTAgMTAgNSA1IDAgMDEwLTEwem0tMi41IDUuOTM4aDVhLjkzNy45MzcgMCAxMDAtMS44NzVoLTVhLjkzNy45MzcgMCAxMDAgMS44NzV6TTEyLjI5IDE3SDl2NWgzLjY3NGMuMzU2Ljc1Ljg0MSAxLjQyNiAxLjQyNyAySDVhNSA1IDAgMDEtNS01VjVhNSA1IDAgMDE1LTVoMTRhNSA1IDAgMDE1IDV2Mi44MjNhLjg0My44NDMgMCAwMTAgLjM1NFYxNC4xYTcuMDE4IDcuMDE4IDAgMDAtMi0xLjQyN1Y5aC01djMuMjlhNi45NzIgNi45NzIgMCAwMC0yIC45NjVWOUg5djZoNC4yNTVhNi45NzIgNi45NzIgMCAwMC0uOTY1IDJ6TTE3IDdoNVY1YTMgMyAwIDAwLTMtM2gtMnY1em0tMiAwVjJIOXY1aDZ6TTcgMkg1YTMgMyAwIDAwLTMgM3YyaDVWMnpNMiA5djZoNVY5SDJ6bTAgOHYyYTMgMyAwIDAwMyAzaDJ2LTVIMnoifX0pXSkpfX0saWU9e2Z1bmN0aW9uYWw6ITAscmVuZGVyKHQsZSl7Y29uc3R7X2M6bixfdjpyLGRhdGE6byxjaGlsZHJlbjppPVtdfT1lLHtjbGFzczpzLHN0YXRpY0NsYXNzOmEsc3R5bGU6YyxzdGF0aWNTdHlsZTpsLGF0dHJzOnA9e30sLi4udX09bztyZXR1cm4gbigic3ZnIix7Y2xhc3M6W3MsYV0sc3R5bGU6W2MsbF0sYXR0cnM6T2JqZWN0LmFzc2lnbih7eG1sbnM6Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIix2aWV3Qm94OiIwIDAgMjQgMjQifSxwKSwuLi51fSxpLmNvbmNhdChbbigicGF0aCIse2F0dHJzOntkOiJNMTEuOTk5LjVDNS42NDkuNS41IDUuNjQ4LjUgMTJjMCA1LjA4MiAzLjI5NCA5LjM5MiA3Ljg2NSAxMC45MTQuNTc0LjEwMy43NTYtLjIzNi43NTYtLjU0MSAwLS4yNzQuMDA2LTEuMDM3IDAtMS45OTctMy4xOTguNjk0LTMuODYxLTEuNTE1LTMuODYxLTEuNTE1LS41MjMtMS4zMjktMS4yNzUtMS42ODItMS4yNzUtMS42ODItMS4wNDUtLjcxNC4wNzctLjY5OS4wNzctLjY5OSAxLjE1My4wOCAxLjc2MiAxLjE4NCAxLjc2MiAxLjE4NCAxLjAyNiAxLjc1OCAyLjY5MSAxLjI1IDMuMzQ2Ljk1Ni4xMDYtLjc0Mi40MDItMS4yNTEuNzMxLTEuNTM2LTIuNTU0LS4yOTItNS4yMzgtMS4yNzctNS4yMzgtNS42ODYgMC0xLjI1NS40NDgtMi4yODEgMS4xODQtMy4wODYtLjExOC0uMjg5LS41MTQtMS40Ni4xMTItMy4wNDMgMCAwIC45NjctLjMwOSAzLjE2MiAxLjE4YTExLjAxMSAxMS4wMTEgMCAwMTIuODgtLjM4OGMuOTc2LjAwNSAxLjk2LjEzMiAyLjg4LjM4OCAyLjE5NS0xLjQ4OCAzLjE1OS0xLjE4IDMuMTU5LTEuMTguNjI3IDEuNTgzLjIzMiAyLjc1NC4xMTQgMy4wNDMuNzM2LjgwNSAxLjE4MyAxLjgzMSAxLjE4MyAzLjA4NiAwIDQuNDItMi42ODkgNS4zOTEtNS4yNTEgNS42NzQuNDEyLjM1Ny43ODcgMS4wNDcuNzg3IDIuMTJ2My4xODRjMCAuMzA4LjE4Ni42NDcuNzcuNTM2QzIwLjIwOSAyMS4zODkgMjMuNSAxNy4wOCAyMy41IDEyIDIzLjUgNS42NDggMTguMzUyLjUgMTEuOTk5LjV6In19KV0pKX19LHNlPXtmdW5jdGlvbmFsOiEwLHJlbmRlcih0LGUpe2NvbnN0e19jOm4sX3Y6cixkYXRhOm8sY2hpbGRyZW46aT1bXX09ZSx7Y2xhc3M6cyxzdGF0aWNDbGFzczphLHN0eWxlOmMsc3RhdGljU3R5bGU6bCxhdHRyczpwPXt9LC4uLnV9PW87cmV0dXJuIG4oInN2ZyIse2NsYXNzOltzLGFdLHN0eWxlOltjLGxdLGF0dHJzOk9iamVjdC5hc3NpZ24oe3htbG5zOiJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIsdmlld0JveDoiMCAwIDI0IDI0In0scCksLi4udX0saS5jb25jYXQoW24oInBhdGgiLHthdHRyczp7ZDoiTTUgMTNhMSAxIDAgMDEwLTJoMTRhMSAxIDAgMDEwIDJINXoifX0pXSkpfX0sYWU9e2Z1bmN0aW9uYWw6ITAscmVuZGVyKHQsZSl7Y29uc3R7X2M6bixfdjpyLGRhdGE6byxjaGlsZHJlbjppPVtdfT1lLHtjbGFzczpzLHN0YXRpY0NsYXNzOmEsc3R5bGU6YyxzdGF0aWNTdHlsZTpsLGF0dHJzOnA9e30sLi4udX09bztyZXR1cm4gbigic3ZnIix7Y2xhc3M6W3MsYV0sc3R5bGU6W2MsbF0sYXR0cnM6T2JqZWN0LmFzc2lnbih7eG1sbnM6Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIix2aWV3Qm94OiIwIDAgMjQgMjQifSxwKSwuLi51fSxpLmNvbmNhdChbbigiY2lyY2xlIix7YXR0cnM6e2N4OiI5Ljc1IixjeToiNi4yNDciLHI6IjIuMjUifX0pLG4oInBhdGgiLHthdHRyczp7ZDoiTTE2LjkxNiA4LjcxQTEuMDI3IDEuMDI3IDAgMDAxNiA4LjE1OGExLjAwNyAxLjAwNyAwIDAwLS44OTIuNTg2bC0xLjU1OCAzLjQzNGEuMjQ5LjI0OSAwIDAxLS40MjIuMDUzbC0uODItMS4wMjRhMSAxIDAgMDAtLjgxMy0uMzc2IDEuMDA3IDEuMDA3IDAgMDAtLjc4Ny40MjZMNy41OSAxNS43MWEuNS41IDAgMDAuNDEuNzloMTJhLjUuNSAwIDAwLjQyNS0uMjM3LjUuNSAwIDAwLjAyMi0uNDg2eiJ9fSksbigicGF0aCIse2F0dHJzOntkOiJNMjIgMEg1LjVhMiAyIDAgMDAtMiAydjE2LjVhMiAyIDAgMDAyIDJIMjJhMiAyIDAgMDAyLTJWMmEyIDIgMCAwMC0yLTJ6bS0uMTQ1IDE4LjM1NGEuNS41IDAgMDEtLjM1NC4xNDZINmEuNS41IDAgMDEtLjUtLjVWMi41QS41LjUgMCAwMTYgMmgxNS41YS41LjUgMCAwMS41LjVWMThhLjUuNSAwIDAxLS4xNDUuMzUxeiJ9fSksbigicGF0aCIse2F0dHJzOntkOiJNMTkuNSAyMmgtMTdhLjUuNSAwIDAxLS41LS41di0xN2ExIDEgMCAwMC0yIDBWMjJhMiAyIDAgMDAyIDJoMTcuNWExIDEgMCAwMDAtMnoifX0pXSkpfX0sY2U9e2Z1bmN0aW9uYWw6ITAscmVuZGVyKHQsZSl7Y29uc3R7X2M6bixfdjpyLGRhdGE6byxjaGlsZHJlbjppPVtdfT1lLHtjbGFzczpzLHN0YXRpY0NsYXNzOmEsc3R5bGU6YyxzdGF0aWNTdHlsZTpsLGF0dHJzOnA9e30sLi4udX09bztyZXR1cm4gbigic3ZnIix7Y2xhc3M6W3MsYV0sc3R5bGU6W2MsbF0sYXR0cnM6T2JqZWN0LmFzc2lnbih7eG1sbnM6Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIix2aWV3Qm94OiIwIDAgMjQgMjQifSxwKSwuLi51fSxpLmNvbmNhdChbbigicGF0aCIse2F0dHJzOntkOiJNMjIuNS4yNDhoLTcuNjM3YTEuMjUgMS4yNSAwIDAwMCAyLjVoMS4wODZhLjI1LjI1IDAgMDEuMjExLjM4NEw0Ljc4IDIxLjAxN2EuNS41IDAgMDEtLjQyMi4yMzFIMS41YTEuMjUgMS4yNSAwIDAwMCAyLjVoNy42MzdhMS4yNSAxLjI1IDAgMDAwLTIuNUg4LjA1MWEuMjUuMjUgMCAwMS0uMjExLS4zODRMMTkuMjIgMi45OGEuNS41IDAgMDEuNDIyLS4yMzJIMjIuNWExLjI1IDEuMjUgMCAwMDAtMi41eiJ9fSldKSl9fSxsZT17ZnVuY3Rpb25hbDohMCxyZW5kZXIodCxlKXtjb25zdHtfYzpuLF92OnIsZGF0YTpvLGNoaWxkcmVuOmk9W119PWUse2NsYXNzOnMsc3RhdGljQ2xhc3M6YSxzdHlsZTpjLHN0YXRpY1N0eWxlOmwsYXR0cnM6cD17fSwuLi51fT1vO3JldHVybiBuKCJzdmciLHtjbGFzczpbcyxhXSxzdHlsZTpbYyxsXSxhdHRyczpPYmplY3QuYXNzaWduKHt4bWxuczoiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciLHZpZXdCb3g6IjAgMCAyNCAyNCJ9LHApLC4uLnV9LGkuY29uY2F0KFtuKCJwYXRoIix7YXR0cnM6e2Q6Ik0xMi40MDYgMTQuOTA1YTEgMSAwIDAwLS41NDMgMS4zMDcgMSAxIDAgMDEtLjIxNyAxLjA5bC0yLjgyOCAyLjgyOWEyIDIgMCAwMS0yLjgyOCAwTDMuODY4IDE4LjAxYTIgMiAwIDAxMC0yLjgyOUw2LjcgMTIuMzUzYTEuMDEzIDEuMDEzIDAgMDExLjA5MS0uMjE3IDEgMSAwIDAwLjc2My0xLjg0OSAzLjAzNCAzLjAzNCAwIDAwLTMuMjY4LjY1MmwtMi44MzIgMi44MjhhNC4wMDYgNC4wMDYgMCAwMDAgNS42NTdsMi4xMjIgMi4xMjFhNCA0IDAgMDA1LjY1NiAwbDIuODI5LTIuODI4YTMuMDA4IDMuMDA4IDAgMDAuNjUxLTMuMjcgMSAxIDAgMDAtMS4zMDYtLjU0MnoifX0pLG4oInBhdGgiLHthdHRyczp7ZDoiTTcuNzU3IDE2LjI0MWExLjAxMSAxLjAxMSAwIDAwMS40MTQgMGw3Ljc3OS03Ljc3OGExIDEgMCAwMC0xLjQxNC0xLjQxNGwtNy43NzkgNy43NzhhMSAxIDAgMDAwIDEuNDE0eiJ9fSksbigicGF0aCIse2F0dHJzOntkOiJNMjEuNTQ2IDQuNTc0bC0yLjEyMS0yLjEyMWE0LjAwNiA0LjAwNiAwIDAwLTUuNjU3IDBsLTIuODI5IDIuODI4YTMuMDA2IDMuMDA2IDAgMDAtLjY1MSAzLjI2OSAxIDEgMCAxMDEuODQ5LS43NjQgMSAxIDAgMDEuMjE3LTEuMDg2bDIuODI4LTIuODI4YTIgMiAwIDAxMi44MjkgMGwyLjEyMSAyLjEyMWEyIDIgMCAwMTAgMi44MjlMMTcuMyAxMS42NDVhMS4wMTUgMS4wMTUgMCAwMS0xLjA5MS4yMTcgMSAxIDAgMDAtLjc2NSAxLjg0OSAzLjAyNiAzLjAyNiAwIDAwMy4yNy0uNjUxbDIuODI4LTIuODI4YTQuMDA3IDQuMDA3IDAgMDAuMDA0LTUuNjU4eiJ9fSldKSl9fSxwZT17ZnVuY3Rpb25hbDohMCxyZW5kZXIodCxlKXtjb25zdHtfYzpuLF92OnIsZGF0YTpvLGNoaWxkcmVuOmk9W119PWUse2NsYXNzOnMsc3RhdGljQ2xhc3M6YSxzdHlsZTpjLHN0YXRpY1N0eWxlOmwsYXR0cnM6cD17fSwuLi51fT1vO3JldHVybiBuKCJzdmciLHtjbGFzczpbcyxhXSxzdHlsZTpbYyxsXSxhdHRyczpPYmplY3QuYXNzaWduKHt4bWxuczoiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciLHZpZXdCb3g6IjAgMCAyNCAyNCJ9LHApLC4uLnV9LGkuY29uY2F0KFtuKCJwYXRoIix7YXR0cnM6e2Q6Ik0xMiAuNUExMS42MzQgMTEuNjM0IDAgMDAuMjYyIDEyIDExLjYzNCAxMS42MzQgMCAwMDEyIDIzLjVhMTEuODM2IDExLjgzNiAwIDAwNi42MjQtMiAxLjI1IDEuMjUgMCAxMC0xLjM5My0yLjA3NkE5LjM0IDkuMzQgMCAwMTEyIDIxYTkuMTMyIDkuMTMyIDAgMDEtOS4yMzgtOUE5LjEzMiA5LjEzMiAwIDAxMTIgM2E5LjEzMiA5LjEzMiAwIDAxOS4yMzggOXYuODkxYTEuOTQzIDEuOTQzIDAgMDEtMy44ODQgMFYxMkE1LjM1NSA1LjM1NSAwIDEwMTIgMTcuMjYxYTUuMzc2IDUuMzc2IDAgMDAzLjg2MS0xLjYzNCA0LjQzOCA0LjQzOCAwIDAwNy44NzctMi43MzZWMTJBMTEuNjM0IDExLjYzNCAwIDAwMTIgLjV6bTAgMTQuMjYxQTIuNzYzIDIuNzYzIDAgMTExNC44NTQgMTIgMi44MTIgMi44MTIgMCAwMTEyIDE0Ljc2MXoifX0pXSkpfX0sdWU9e2Z1bmN0aW9uYWw6ITAscmVuZGVyKHQsZSl7Y29uc3R7X2M6bixfdjpyLGRhdGE6byxjaGlsZHJlbjppPVtdfT1lLHtjbGFzczpzLHN0YXRpY0NsYXNzOmEsc3R5bGU6YyxzdGF0aWNTdHlsZTpsLGF0dHJzOnA9e30sLi4udX09bztyZXR1cm4gbigic3ZnIix7Y2xhc3M6W3MsYV0sc3R5bGU6W2MsbF0sYXR0cnM6T2JqZWN0LmFzc2lnbih7eG1sbnM6Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIix2aWV3Qm94OiIwIDAgMjQgMjQifSxwKSwuLi51fSxpLmNvbmNhdChbbigicGF0aCIse2F0dHJzOntkOiJNNy43NSA0LjVoMTVhMSAxIDAgMDAwLTJoLTE1YTEgMSAwIDAwMCAyek0yMi43NSAxMWgtMTVhMSAxIDAgMTAwIDJoMTVhMSAxIDAgMDAwLTJ6TTIyLjc1IDE5LjVoLTE1YTEgMSAwIDAwMCAyaDE1YTEgMSAwIDAwMC0yek0yLjIxMiAxNy4yNDhhMiAyIDAgMDAtMS45MzMgMS40ODQuNzUuNzUgMCAxMDEuNDUuMzg2LjUuNSAwIDExLjQ4My42My43NS43NSAwIDEwMCAxLjUuNS41IDAgMTEtLjQ4Mi42MzUuNzUuNzUgMCAxMC0xLjQ0NS40IDIgMiAwIDEwMy41ODktMS42NDguMjUxLjI1MSAwIDAxMC0uMjc4IDIgMiAwIDAwLTEuNjYyLTMuMTExek00LjI1IDEwLjc0OGEyIDIgMCAwMC00IDAgLjc1Ljc1IDAgMDAxLjUgMCAuNS41IDAgMDExIDAgMS4wMzEgMS4wMzEgMCAwMS0uMjI3LjY0NUwuNDE0IDE0LjAyOUEuNzUuNzUgMCAwMDEgMTUuMjQ4aDIuNWEuNzUuNzUgMCAwMDAtMS41aC0uNDE5YS4yNDkuMjQ5IDAgMDEtLjE5NS0uNDA2TDMuNyAxMi4zM2EyLjU0NCAyLjU0NCAwIDAwLjU1LTEuNTgyek00IDUuMjQ4aC0uMjVBLjI1LjI1IDAgMDEzLjUgNVYxLjYyM0ExLjM3NyAxLjM3NyAwIDAwMi4xMjUuMjQ4SDEuNWEuNzUuNzUgMCAwMDAgMS41aC4yNUEuMjUuMjUgMCAwMTIgMnYzYS4yNS4yNSAwIDAxLS4yNS4yNUgxLjVhLjc1Ljc1IDAgMDAwIDEuNUg0YS43NS43NSAwIDAwMC0xLjV6In19KV0pKX19LGhlPXtmdW5jdGlvbmFsOiEwLHJlbmRlcih0LGUpe2NvbnN0e19jOm4sX3Y6cixkYXRhOm8sY2hpbGRyZW46aT1bXX09ZSx7Y2xhc3M6cyxzdGF0aWNDbGFzczphLHN0eWxlOmMsc3RhdGljU3R5bGU6bCxhdHRyczpwPXt9LC4uLnV9PW87cmV0dXJuIG4oInN2ZyIse2NsYXNzOltzLGFdLHN0eWxlOltjLGxdLGF0dHJzOk9iamVjdC5hc3NpZ24oe3htbG5zOiJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIsdmlld0JveDoiMCAwIDI0IDI0In0scCksLi4udX0saS5jb25jYXQoW24oInBhdGgiLHthdHRyczp7ZDoiTTIyLjUuMjQ4SDcuMjI4YTYuOTc3IDYuOTc3IDAgMTAwIDEzLjk1NGgyLjMxOGEuMjUuMjUgMCAwMS4yNS4yNVYyMi41YTEuMjUgMS4yNSAwIDAwMi41IDBWM2EuMjUuMjUgMCAwMS4yNS0uMjVoMy42ODJhLjI1LjI1IDAgMDEuMjUuMjV2MTkuNWExLjI1IDEuMjUgMCAwMDIuNSAwVjNhLjI0OS4yNDkgMCAwMS4yNS0uMjVIMjIuNWExLjI1IDEuMjUgMCAwMDAtMi41ek05LjggMTEuNDUyYS4yNS4yNSAwIDAxLS4yNS4yNUg3LjIyOGE0LjQ3NyA0LjQ3NyAwIDExMC04Ljk1NGgyLjMxOEEuMjUuMjUgMCAwMTkuOCAzeiJ9fSldKSl9fSxmZT17ZnVuY3Rpb25hbDohMCxyZW5kZXIodCxlKXtjb25zdHtfYzpuLF92OnIsZGF0YTpvLGNoaWxkcmVuOmk9W119PWUse2NsYXNzOnMsc3RhdGljQ2xhc3M6YSxzdHlsZTpjLHN0YXRpY1N0eWxlOmwsYXR0cnM6cD17fSwuLi51fT1vO3JldHVybiBuKCJzdmciLHtjbGFzczpbcyxhXSxzdHlsZTpbYyxsXSxhdHRyczpPYmplY3QuYXNzaWduKHt4bWxuczoiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciLHZpZXdCb3g6IjAgMCAyNCAyNCJ9LHApLC4uLnV9LGkuY29uY2F0KFtuKCJwYXRoIix7YXR0cnM6e2Q6Ik0xOC41NTkgMy45MzJhNC45NDIgNC45NDIgMCAxMDAgOS44ODMgNC42MDkgNC42MDkgMCAwMDEuMTE1LS4xNDEuMjUuMjUgMCAwMS4yNzYuMzY4IDYuODMgNi44MyAwIDAxLTUuODc4IDMuNTIzIDEuMjUgMS4yNSAwIDAwMCAyLjUgOS43MSA5LjcxIDAgMDA5LjQyOC05Ljk1VjguODczYTQuOTQ3IDQuOTQ3IDAgMDAtNC45NDEtNC45NDF6TTYuMjM2IDMuOTMyYTQuOTQyIDQuOTQyIDAgMDAwIDkuODgzIDQuNiA0LjYgMCAwMDEuMTE1LS4xNDEuMjUuMjUgMCAwMS4yNzcuMzY4IDYuODMgNi44MyAwIDAxLTUuODc4IDMuNTIzIDEuMjUgMS4yNSAwIDAwMCAyLjUgOS43MTEgOS43MTEgMCAwMDkuNDI4LTkuOTVWOC44NzNhNC45NDcgNC45NDcgMCAwMC00Ljk0Mi00Ljk0MXoifX0pXSkpfX0sZGU9e2Z1bmN0aW9uYWw6ITAscmVuZGVyKHQsZSl7Y29uc3R7X2M6bixfdjpyLGRhdGE6byxjaGlsZHJlbjppPVtdfT1lLHtjbGFzczpzLHN0YXRpY0NsYXNzOmEsc3R5bGU6YyxzdGF0aWNTdHlsZTpsLGF0dHJzOnA9e30sLi4udX09bztyZXR1cm4gbigic3ZnIix7Y2xhc3M6W3MsYV0sc3R5bGU6W2MsbF0sYXR0cnM6T2JqZWN0LmFzc2lnbih7eG1sbnM6Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIix2aWV3Qm94OiIwIDAgMjQgMjQifSxwKSwuLi51fSxpLmNvbmNhdChbbigicGF0aCIse2F0dHJzOntkOiJNMjIuNjA4LjE2MWEuNS41IDAgMDAtLjU0NS4xMDhMMTkuNDcyIDIuODZhLjI1LjI1IDAgMDEtLjI5Mi4wNDUgMTIuNTM3IDEyLjUzNyAwIDAwLTEyLjk2Ni44NjVBMTIuMjU5IDEyLjI1OSAwIDAwNi4xIDIzLjYzMmExLjI1IDEuMjUgMCAwMDEuNDc2LTIuMDE4IDkuNzU5IDkuNzU5IDAgMDEuMDkxLTE1LjgwOSAxMCAxMCAwIDAxOS40NjYtMS4xLjI1LjI1IDAgMDEuMDg0LjQwOWwtMS44NSAxLjg1YS41LjUgMCAwMC4zNTQuODUzaDYuN2EuNS41IDAgMDAuNS0uNVYuNjIzYS41LjUgMCAwMC0uMzEzLS40NjJ6In19KV0pKX19LHZlPXtmdW5jdGlvbmFsOiEwLHJlbmRlcih0LGUpe2NvbnN0e19jOm4sX3Y6cixkYXRhOm8sY2hpbGRyZW46aT1bXX09ZSx7Y2xhc3M6cyxzdGF0aWNDbGFzczphLHN0eWxlOmMsc3RhdGljU3R5bGU6bCxhdHRyczpwPXt9LC4uLnV9PW87cmV0dXJuIG4oInN2ZyIse2NsYXNzOltzLGFdLHN0eWxlOltjLGxdLGF0dHJzOk9iamVjdC5hc3NpZ24oe3htbG5zOiJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIsdmlld0JveDoiMCAwIDI0IDI0In0scCksLi4udX0saS5jb25jYXQoW24oInBhdGgiLHthdHRyczp7ZDoiTTIwLjQ4NSAzLjUxMUExMi4wMSAxMi4wMSAwIDEwMjQgMTJhMTIuMDA5IDEyLjAwOSAwIDAwLTMuNTE1LTguNDg5em0tMS43NjcgMTUuMjFBOS41MSA5LjUxIDAgMTEyMS41IDEyYTkuNTA4IDkuNTA4IDAgMDEtMi43ODIgNi43MjF6In19KSxuKCJwYXRoIix7YXR0cnM6e2Q6Ik0xNi45ODcgNy4wMWExLjI3NSAxLjI3NSAwIDAwLTEuOCAwbC0zLjE3NyAzLjE3N0w4LjgyOSA3LjAxYTEuMjc3IDEuMjc3IDAgMDAtMS44MDUgMS44MDZsMy4xNzYgMy4xNzctMy4xNzYgMy4xNzhhMS4yNzcgMS4yNzcgMCAwMDEuODA1IDEuODA2bDMuMTc2LTMuMTc3IDMuMTc3IDMuMTc4YTEuMjc3IDEuMjc3IDAgMDAxLjgtMS44MDZsLTMuMTc2LTMuMTc4IDMuMTc2LTMuMTc3YTEuMjc4IDEuMjc4IDAgMDAuMDA1LTEuODA3eiJ9fSldKSl9fSxtZT17ZnVuY3Rpb25hbDohMCxyZW5kZXIodCxlKXtjb25zdHtfYzpuLF92OnIsZGF0YTpvLGNoaWxkcmVuOmk9W119PWUse2NsYXNzOnMsc3RhdGljQ2xhc3M6YSxzdHlsZTpjLHN0YXRpY1N0eWxlOmwsYXR0cnM6cD17fSwuLi51fT1vO3JldHVybiBuKCJzdmciLHtjbGFzczpbcyxhXSxzdHlsZTpbYyxsXSxhdHRyczpPYmplY3QuYXNzaWduKHt4bWxuczoiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciLHZpZXdCb3g6IjAgMCAyNCAyNCJ9LHApLC4uLnV9LGkuY29uY2F0KFtuKCJwYXRoIix7YXR0cnM6e2Q6Ik0yMy43NSAxMi45NTJBMS4yNSAxLjI1IDAgMDAyMi41IDExLjdoLTguOTM2YS40OTIuNDkyIDAgMDEtLjI4Mi0uMDljLS43MjItLjUxMy0xLjQ4Mi0uOTgxLTIuMjE4LTEuNDMyLTIuOC0xLjcxNS00LjUtMi45LTQuNS00Ljg2MyAwLTIuMjM1IDIuMjA3LTIuNTY5IDMuNTIzLTIuNTY5YTQuNTQgNC41NCAwIDAxMy4wODEuNzY0IDIuNjYyIDIuNjYyIDAgMDEuNDQ3IDEuOTl2LjNhMS4yNSAxLjI1IDAgMTAyLjUgMHYtLjI2OGE0Ljg4NyA0Ljg4NyAwIDAwLTEuMTY1LTMuNzc3QzEzLjk0OS43NDEgMTIuMzU5LjI0OCAxMC4wOTEuMjQ4Yy0zLjY1OCAwLTYuMDIzIDEuOTg5LTYuMDIzIDUuMDY5IDAgMi43NzMgMS44OTIgNC41MTIgNCA1LjkyN2EuMjUuMjUgMCAwMS0uMTM5LjQ1OEgxLjVhMS4yNSAxLjI1IDAgMDAwIDIuNWgxMC45NzdhLjI1MS4yNTEgMCAwMS4xNTkuMDU4IDQuMzM5IDQuMzM5IDAgMDExLjkzMiAzLjQ2NmMwIDMuMjY4LTMuNDI2IDMuNTIyLTQuNDc3IDMuNTIyLTEuODE0IDAtMy4xMzktLjQwNS0zLjgzNC0xLjE3M2EzLjM5NCAzLjM5NCAwIDAxLS42NS0yLjcgMS4yNSAxLjI1IDAgMDAtMi40ODgtLjI0NkE1Ljc2IDUuNzYgMCAwMDQuNCAyMS43NTNjMS4yIDEuMzI0IDMuMTE0IDIgNS42ODggMiA0LjE3NCAwIDYuOTc3LTIuNDIgNi45NzctNi4wMjJhNi4wNTkgNi4wNTkgMCAwMC0uODQ5LTMuMTQ3LjI1LjI1IDAgMDEuMjE2LS4zNzdIMjIuNWExLjI1IDEuMjUgMCAwMDEuMjUtMS4yNTV6In19KV0pKX19LHllPXtmdW5jdGlvbmFsOiEwLHJlbmRlcih0LGUpe2NvbnN0e19jOm4sX3Y6cixkYXRhOm8sY2hpbGRyZW46aT1bXX09ZSx7Y2xhc3M6cyxzdGF0aWNDbGFzczphLHN0eWxlOmMsc3RhdGljU3R5bGU6bCxhdHRyczpwPXt9LC4uLnV9PW87cmV0dXJuIG4oInN2ZyIse2NsYXNzOltzLGFdLHN0eWxlOltjLGxdLGF0dHJzOk9iamVjdC5hc3NpZ24oe3htbG5zOiJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIsdmlld0JveDoiMCAwIDI0IDI0In0scCksLi4udX0saS5jb25jYXQoW24oInBhdGgiLHthdHRyczp7ImZpbGwtcnVsZSI6ImV2ZW5vZGQiLGQ6Ik0xNyAxN3Y1aDJhMyAzIDAgMDAzLTN2LTJoLTV6bS0yIDBIOXY1aDZ2LTV6bTItMmg1VjloLTV2NnptLTIgMFY5SDl2Nmg2em0yLThoNVY1YTMgMyAwIDAwLTMtM2gtMnY1em0tMiAwVjJIOXY1aDZ6bTkgOS4xNzdWMTlhNSA1IDAgMDEtNSA1SDVhNSA1IDAgMDEtNS01VjVhNSA1IDAgMDE1LTVoMTRhNSA1IDAgMDE1IDV2Mi44MjNhLjg0My44NDMgMCAwMTAgLjM1NHY3LjY0NmEuODQzLjg0MyAwIDAxMCAuMzU0ek03IDJINWEzIDMgMCAwMC0zIDN2Mmg1VjJ6TTIgOXY2aDVWOUgyem0wIDh2MmEzIDMgMCAwMDMgM2gydi01SDJ6In19KV0pKX19LGdlPXtmdW5jdGlvbmFsOiEwLHJlbmRlcih0LGUpe2NvbnN0e19jOm4sX3Y6cixkYXRhOm8sY2hpbGRyZW46aT1bXX09ZSx7Y2xhc3M6cyxzdGF0aWNDbGFzczphLHN0eWxlOmMsc3RhdGljU3R5bGU6bCxhdHRyczpwPXt9LC4uLnV9PW87cmV0dXJuIG4oInN2ZyIse2NsYXNzOltzLGFdLHN0eWxlOltjLGxdLGF0dHJzOk9iamVjdC5hc3NpZ24oe3htbG5zOiJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIsdmlld0JveDoiMCAwIDI0IDI0In0scCksLi4udX0saS5jb25jYXQoW24oImNpcmNsZSIse2F0dHJzOntjeDoiMi41IixjeToiMy45OTgiLHI6IjIuNSJ9fSksbigicGF0aCIse2F0dHJzOntkOiJNOC41IDVIMjNhMSAxIDAgMDAwLTJIOC41YTEgMSAwIDAwMCAyeiJ9fSksbigiY2lyY2xlIix7YXR0cnM6e2N4OiIyLjUiLGN5OiIxMS45OTgiLHI6IjIuNSJ9fSksbigicGF0aCIse2F0dHJzOntkOiJNMjMgMTFIOC41YTEgMSAwIDAwMCAySDIzYTEgMSAwIDAwMC0yeiJ9fSksbigiY2lyY2xlIix7YXR0cnM6e2N4OiIyLjUiLGN5OiIxOS45OTgiLHI6IjIuNSJ9fSksbigicGF0aCIse2F0dHJzOntkOiJNMjMgMTlIOC41YTEgMSAwIDAwMCAySDIzYTEgMSAwIDAwMC0yeiJ9fSldKSl9fSx3ZT17ZnVuY3Rpb25hbDohMCxyZW5kZXIodCxlKXtjb25zdHtfYzpuLF92OnIsZGF0YTpvLGNoaWxkcmVuOmk9W119PWUse2NsYXNzOnMsc3RhdGljQ2xhc3M6YSxzdHlsZTpjLHN0YXRpY1N0eWxlOmwsYXR0cnM6cD17fSwuLi51fT1vO3JldHVybiBuKCJzdmciLHtjbGFzczpbcyxhXSxzdHlsZTpbYyxsXSxhdHRyczpPYmplY3QuYXNzaWduKHt4bWxuczoiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciLHZpZXdCb3g6IjAgMCAyNCAyNCJ9LHApLC4uLnV9LGkuY29uY2F0KFtuKCJwYXRoIix7YXR0cnM6e2Q6Ik0yMi41IDIxLjI0OGgtMjFhMS4yNSAxLjI1IDAgMDAwIDIuNWgyMWExLjI1IDEuMjUgMCAwMDAtMi41ek0xLjk3OCAyLjc0OGgxLjM2M2EuMjUuMjUgMCAwMS4yNS4yNXY4LjUyM2E4LjQwOSA4LjQwOSAwIDAwMTYuODE4IDBWM2EuMjUuMjUgMCAwMS4yNS0uMjVoMS4zNjNhMS4yNSAxLjI1IDAgMDAwLTIuNUgxNi4zYTEuMjUgMS4yNSAwIDAwMCAyLjVoMS4zNjNhLjI1LjI1IDAgMDEuMjUuMjV2OC41MjNhNS45MDkgNS45MDkgMCAwMS0xMS44MTggMFYzYS4yNS4yNSAwIDAxLjI1LS4yNUg3LjdhMS4yNSAxLjI1IDAgMTAwLTIuNUgxLjk3OGExLjI1IDEuMjUgMCAwMDAgMi41eiJ9fSldKSl9fSx4ZT17ZnVuY3Rpb25hbDohMCxyZW5kZXIodCxlKXtjb25zdHtfYzpuLF92OnIsZGF0YTpvLGNoaWxkcmVuOmk9W119PWUse2NsYXNzOnMsc3RhdGljQ2xhc3M6YSxzdHlsZTpjLHN0YXRpY1N0eWxlOmwsYXR0cnM6cD17fSwuLi51fT1vO3JldHVybiBuKCJzdmciLHtjbGFzczpbcyxhXSxzdHlsZTpbYyxsXSxhdHRyczpPYmplY3QuYXNzaWduKHt4bWxuczoiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciLHZpZXdCb3g6IjAgMCAyNCAyNCJ9LHApLC4uLnV9LGkuY29uY2F0KFtuKCJwYXRoIix7YXR0cnM6e2Q6Ik0xNy43ODYgMy43N2ExMi41NDIgMTIuNTQyIDAgMDAtMTIuOTY1LS44NjUuMjQ5LjI0OSAwIDAxLS4yOTItLjA0NUwxLjkzNy4yNjlBLjUwNy41MDcgMCAwMDEuMzkyLjE2YS41LjUgMCAwMC0uMzA4LjQ2MnY2LjdhLjUuNSAwIDAwLjUuNWg2LjdhLjUuNSAwIDAwLjM1NC0uODU0TDYuNzgzIDUuMTE1YS4yNTMuMjUzIDAgMDEtLjA2OC0uMjI4LjI0OS4yNDkgMCAwMS4xNTItLjE4MSAxMCAxMCAwIDAxOS40NjYgMS4xIDkuNzU5IDkuNzU5IDAgMDEuMDk0IDE1LjgwOSAxLjI1IDEuMjUgMCAwMDEuNDczIDIuMDE2IDEyLjEyMiAxMi4xMjIgMCAwMDUuMDEzLTkuOTYxIDEyLjEyNSAxMi4xMjUgMCAwMC01LjEyNy05Ljl6In19KV0pKX19LGJlPXthZGRfY29sX2FmdGVyOkt0LGFkZF9jb2xfYmVmb3JlOlV0LGFkZF9yb3dfYWZ0ZXI6R3QsYWRkX3Jvd19iZWZvcmU6WHQsYm9sZDpZdCxjaGVja2xpc3Q6UXQsY29kZTpadCxjb2RlX2Jsb2NrOnRlLGNvbWJpbmVfY2VsbHM6ZWUsZGVsZXRlX2NvbDpuZSxkZWxldGVfcm93OnJlLGRlbGV0ZV90YWJsZTpvZSxnaXRodWI6aWUsaHI6c2UsaW1hZ2U6YWUsaXRhbGljOmNlLGxpbms6bGUsbWVudGlvbjpwZSxvbDp1ZSxwYXJhZ3JhcGg6aGUscXVvdGU6ZmUscmVkbzpkZSxyZW1vdmU6dmUsc3RyaWtlOm1lLHRhYmxlOnllLHVsOmdlLHVuZGVybGluZTp3ZSx1bmRvOnhlfSxrZT17fSxTZT0wLENlPU9iamVjdC5lbnRyaWVzKGJlKTtTZTxDZS5sZW5ndGg7U2UrKyl7dmFyIE9lPUh0KENlW1NlXSwyKSxNZT1PZVswXSxUZT1PZVsxXTtrZVsiaWNvbl8iK01lXT1UZX12YXIgTmU9e2NvbXBvbmVudHM6a2UscHJvcHM6e25hbWU6e30sc2l6ZTp7ZGVmYXVsdDoibm9ybWFsIn0sbW9kaWZpZXI6e2RlZmF1bHQ6bnVsbH0sZml4QWxpZ246e2RlZmF1bHQ6ITB9fSxjb21wdXRlZDp7aWNvbjpmdW5jdGlvbigpe3JldHVybiJpY29uXyIrdGhpcy5uYW1lfX19LEVlPU5lO24oIjFhZmEiKTtmdW5jdGlvbiBBZSh0LGUsbixyLG8saSxzLGEpe3ZhciBjLGw9ImZ1bmN0aW9uIj09PXR5cGVvZiB0P3Qub3B0aW9uczp0O2lmKGUmJihsLnJlbmRlcj1lLGwuc3RhdGljUmVuZGVyRm5zPW4sbC5fY29tcGlsZWQ9ITApLHImJihsLmZ1bmN0aW9uYWw9ITApLGkmJihsLl9zY29wZUlkPSJkYXRhLXYtIitpKSxzPyhjPWZ1bmN0aW9uKHQpe3Q9dHx8dGhpcy4kdm5vZGUmJnRoaXMuJHZub2RlLnNzckNvbnRleHR8fHRoaXMucGFyZW50JiZ0aGlzLnBhcmVudC4kdm5vZGUmJnRoaXMucGFyZW50LiR2bm9kZS5zc3JDb250ZXh0LHR8fCJ1bmRlZmluZWQiPT09dHlwZW9mIF9fVlVFX1NTUl9DT05URVhUX198fCh0PV9fVlVFX1NTUl9DT05URVhUX18pLG8mJm8uY2FsbCh0aGlzLHQpLHQmJnQuX3JlZ2lzdGVyZWRDb21wb25lbnRzJiZ0Ll9yZWdpc3RlcmVkQ29tcG9uZW50cy5hZGQocyl9LGwuX3NzclJlZ2lzdGVyPWMpOm8mJihjPWE/ZnVuY3Rpb24oKXtvLmNhbGwodGhpcyx0aGlzLiRyb290LiRvcHRpb25zLnNoYWRvd1Jvb3QpfTpvKSxjKWlmKGwuZnVuY3Rpb25hbCl7bC5faW5qZWN0U3R5bGVzPWM7dmFyIHA9bC5yZW5kZXI7bC5yZW5kZXI9ZnVuY3Rpb24odCxlKXtyZXR1cm4gYy5jYWxsKGUpLHAodCxlKX19ZWxzZXt2YXIgdT1sLmJlZm9yZUNyZWF0ZTtsLmJlZm9yZUNyZWF0ZT11P1tdLmNvbmNhdCh1LGMpOltjXX1yZXR1cm57ZXhwb3J0czp0LG9wdGlvbnM6bH19dmFyIFJlPUFlKEVlLEl0LF90LCExLG51bGwsImU1OWY3ODMyIixudWxsKSxEZT1SZS5leHBvcnRzLHplPShuKCIzY2U0IiksbigiNzI3ZCIpLG4oIjQwZjciKSksUGU9bigiZmM4OCIpLEllPShuKCI5NDQ4IiksbigiM2I1MiIpLG4oIjMyMWEiKSk7Ci8qIQogICAgKiB0aXB0YXAtZXh0ZW5zaW9ucyB2MS4yOC4yCiAgICAqIChjKSAyMDE5IFNjcnVtcHkgVUcgKGxpbWl0ZWQgbGlhYmlsaXR5KQogICAgKiBAbGljZW5zZSBNSVQKICAgICovCmZ1bmN0aW9uIF9lKHQsZSl7aWYoISh0IGluc3RhbmNlb2YgZSkpdGhyb3cgbmV3IFR5cGVFcnJvcigiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uIil9ZnVuY3Rpb24gRmUodCxlKXtmb3IodmFyIG49MDtuPGUubGVuZ3RoO24rKyl7dmFyIHI9ZVtuXTtyLmVudW1lcmFibGU9ci5lbnVtZXJhYmxlfHwhMSxyLmNvbmZpZ3VyYWJsZT0hMCwidmFsdWUiaW4gciYmKHIud3JpdGFibGU9ITApLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LHIua2V5LHIpfX1mdW5jdGlvbiBCZSh0LGUsbil7cmV0dXJuIGUmJkZlKHQucHJvdG90eXBlLGUpLG4mJkZlKHQsbiksdH1mdW5jdGlvbiBqZSh0LGUsbil7cmV0dXJuIGUgaW4gdD9PYmplY3QuZGVmaW5lUHJvcGVydHkodCxlLHt2YWx1ZTpuLGVudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwLHdyaXRhYmxlOiEwfSk6dFtlXT1uLHR9ZnVuY3Rpb24gJGUodCxlKXt2YXIgbj1PYmplY3Qua2V5cyh0KTtpZihPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKXt2YXIgcj1PYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKHQpO2UmJihyPXIuZmlsdGVyKChmdW5jdGlvbihlKXtyZXR1cm4gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0LGUpLmVudW1lcmFibGV9KSkpLG4ucHVzaC5hcHBseShuLHIpfXJldHVybiBufWZ1bmN0aW9uIFZlKHQpe2Zvcih2YXIgZT0xO2U8YXJndW1lbnRzLmxlbmd0aDtlKyspe3ZhciBuPW51bGwhPWFyZ3VtZW50c1tlXT9hcmd1bWVudHNbZV06e307ZSUyPyRlKG4sITApLmZvckVhY2goKGZ1bmN0aW9uKGUpe2plKHQsZSxuW2VdKX0pKTpPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycz9PYmplY3QuZGVmaW5lUHJvcGVydGllcyh0LE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzKG4pKTokZShuKS5mb3JFYWNoKChmdW5jdGlvbihlKXtPYmplY3QuZGVmaW5lUHJvcGVydHkodCxlLE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IobixlKSl9KSl9cmV0dXJuIHR9ZnVuY3Rpb24gTGUodCxlKXtpZigiZnVuY3Rpb24iIT09dHlwZW9mIGUmJm51bGwhPT1lKXRocm93IG5ldyBUeXBlRXJyb3IoIlN1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uIik7dC5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShlJiZlLnByb3RvdHlwZSx7Y29uc3RydWN0b3I6e3ZhbHVlOnQsd3JpdGFibGU6ITAsY29uZmlndXJhYmxlOiEwfX0pLGUmJnFlKHQsZSl9ZnVuY3Rpb24gSmUodCl7cmV0dXJuIEplPU9iamVjdC5zZXRQcm90b3R5cGVPZj9PYmplY3QuZ2V0UHJvdG90eXBlT2Y6ZnVuY3Rpb24odCl7cmV0dXJuIHQuX19wcm90b19ffHxPYmplY3QuZ2V0UHJvdG90eXBlT2YodCl9LEplKHQpfWZ1bmN0aW9uIHFlKHQsZSl7cmV0dXJuIHFlPU9iamVjdC5zZXRQcm90b3R5cGVPZnx8ZnVuY3Rpb24odCxlKXtyZXR1cm4gdC5fX3Byb3RvX189ZSx0fSxxZSh0LGUpfWZ1bmN0aW9uIFdlKHQpe2lmKHZvaWQgMD09PXQpdGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKCJ0aGlzIGhhc24ndCBiZWVuIGluaXRpYWxpc2VkIC0gc3VwZXIoKSBoYXNuJ3QgYmVlbiBjYWxsZWQiKTtyZXR1cm4gdH1mdW5jdGlvbiBIZSh0LGUpe3JldHVybiFlfHwib2JqZWN0IiE9PXR5cGVvZiBlJiYiZnVuY3Rpb24iIT09dHlwZW9mIGU/V2UodCk6ZX1mdW5jdGlvbiBLZSh0KXtyZXR1cm4gVWUodCl8fEdlKHQpfHxYZSgpfWZ1bmN0aW9uIFVlKHQpe2lmKEFycmF5LmlzQXJyYXkodCkpe2Zvcih2YXIgZT0wLG49bmV3IEFycmF5KHQubGVuZ3RoKTtlPHQubGVuZ3RoO2UrKyluW2VdPXRbZV07cmV0dXJuIG59fWZ1bmN0aW9uIEdlKHQpe2lmKFN5bWJvbC5pdGVyYXRvciBpbiBPYmplY3QodCl8fCJbb2JqZWN0IEFyZ3VtZW50c10iPT09T2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKHQpKXJldHVybiBBcnJheS5mcm9tKHQpfWZ1bmN0aW9uIFhlKCl7dGhyb3cgbmV3IFR5cGVFcnJvcigiSW52YWxpZCBhdHRlbXB0IHRvIHNwcmVhZCBub24taXRlcmFibGUgaW5zdGFuY2UiKX12YXIgWWU9ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZSgpe3JldHVybiBfZSh0aGlzLGUpLEhlKHRoaXMsSmUoZSkuYXBwbHkodGhpcyxhcmd1bWVudHMpKX1yZXR1cm4gTGUoZSx0KSxCZShlLFt7a2V5OiJjb21tYW5kcyIsdmFsdWU6ZnVuY3Rpb24odCl7dmFyIGU9dC50eXBlLG49dC5zY2hlbWE7cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIEwoZSxuLm5vZGVzLnBhcmFncmFwaCl9fX0se2tleToia2V5cyIsdmFsdWU6ZnVuY3Rpb24odCl7dmFyIGU9dC50eXBlO3JldHVybnsiQ3RybC0+IjpMKGUpfX19LHtrZXk6ImlucHV0UnVsZXMiLHZhbHVlOmZ1bmN0aW9uKHQpe3ZhciBlPXQudHlwZTtyZXR1cm5bT2JqZWN0KGZbIndyYXBwaW5nSW5wdXRSdWxlIl0pKC9eXHMqPlxzJC8sZSldfX0se2tleToibmFtZSIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuImJsb2NrcXVvdGUifX0se2tleToic2NoZW1hIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm57Y29udGVudDoiYmxvY2sqIixncm91cDoiYmxvY2siLGRlZmluaW5nOiEwLGRyYWdnYWJsZTohMSxwYXJzZURPTTpbe3RhZzoiYmxvY2txdW90ZSJ9XSx0b0RPTTpmdW5jdGlvbigpe3JldHVyblsiYmxvY2txdW90ZSIsMF19fX19XSksZX0oZ3QpLFFlPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoKXtyZXR1cm4gX2UodGhpcyxlKSxIZSh0aGlzLEplKGUpLmFwcGx5KHRoaXMsYXJndW1lbnRzKSl9cmV0dXJuIExlKGUsdCksQmUoZSxbe2tleToiY29tbWFuZHMiLHZhbHVlOmZ1bmN0aW9uKHQpe3ZhciBlPXQudHlwZSxuPXQuc2NoZW1hO3JldHVybiBmdW5jdGlvbigpe3JldHVybiBWKGUsbi5ub2Rlcy5saXN0X2l0ZW0pfX19LHtrZXk6ImtleXMiLHZhbHVlOmZ1bmN0aW9uKHQpe3ZhciBlPXQudHlwZSxuPXQuc2NoZW1hO3JldHVybnsiU2hpZnQtQ3RybC04IjpWKGUsbi5ub2Rlcy5saXN0X2l0ZW0pfX19LHtrZXk6ImlucHV0UnVsZXMiLHZhbHVlOmZ1bmN0aW9uKHQpe3ZhciBlPXQudHlwZTtyZXR1cm5bT2JqZWN0KGZbIndyYXBwaW5nSW5wdXRSdWxlIl0pKC9eXHMqKFstKypdKVxzJC8sZSldfX0se2tleToibmFtZSIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuImJ1bGxldF9saXN0In19LHtrZXk6InNjaGVtYSIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJue2NvbnRlbnQ6Imxpc3RfaXRlbSsiLGdyb3VwOiJibG9jayIscGFyc2VET006W3t0YWc6InVsIn1dLHRvRE9NOmZ1bmN0aW9uKCl7cmV0dXJuWyJ1bCIsMF19fX19XSksZX0oZ3QpLFplPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoKXtyZXR1cm4gX2UodGhpcyxlKSxIZSh0aGlzLEplKGUpLmFwcGx5KHRoaXMsYXJndW1lbnRzKSl9cmV0dXJuIExlKGUsdCksQmUoZSxbe2tleToiY29tbWFuZHMiLHZhbHVlOmZ1bmN0aW9uKHQpe3ZhciBlPXQudHlwZSxuPXQuc2NoZW1hO3JldHVybiBmdW5jdGlvbigpe3JldHVybiBqKGUsbi5ub2Rlcy5wYXJhZ3JhcGgpfX19LHtrZXk6ImtleXMiLHZhbHVlOmZ1bmN0aW9uKHQpe3ZhciBlPXQudHlwZTtyZXR1cm57IlNoaWZ0LUN0cmwtXFwiOk9iamVjdChoWyJzZXRCbG9ja1R5cGUiXSkoZSl9fX0se2tleToiaW5wdXRSdWxlcyIsdmFsdWU6ZnVuY3Rpb24odCl7dmFyIGU9dC50eXBlO3JldHVybltPYmplY3QoZlsidGV4dGJsb2NrVHlwZUlucHV0UnVsZSJdKSgvXmBgYCQvLGUpXX19LHtrZXk6Im5hbWUiLGdldDpmdW5jdGlvbigpe3JldHVybiJjb2RlX2Jsb2NrIn19LHtrZXk6InNjaGVtYSIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJue2NvbnRlbnQ6InRleHQqIixtYXJrczoiIixncm91cDoiYmxvY2siLGNvZGU6ITAsZGVmaW5pbmc6ITAsZHJhZ2dhYmxlOiExLHBhcnNlRE9NOlt7dGFnOiJwcmUiLHByZXNlcnZlV2hpdGVzcGFjZToiZnVsbCJ9XSx0b0RPTTpmdW5jdGlvbigpe3JldHVyblsicHJlIixbImNvZGUiLDBdXX19fX1dKSxlfShndCk7dmFyIHRuPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoKXtyZXR1cm4gX2UodGhpcyxlKSxIZSh0aGlzLEplKGUpLmFwcGx5KHRoaXMsYXJndW1lbnRzKSl9cmV0dXJuIExlKGUsdCksQmUoZSxbe2tleToia2V5cyIsdmFsdWU6ZnVuY3Rpb24odCl7dmFyIGU9dC50eXBlLG49T2JqZWN0KGhbImNoYWluQ29tbWFuZHMiXSkoaFsiZXhpdENvZGUiXSwoZnVuY3Rpb24odCxuKXtyZXR1cm4gbih0LnRyLnJlcGxhY2VTZWxlY3Rpb25XaXRoKGUuY3JlYXRlKCkpLnNjcm9sbEludG9WaWV3KCkpLCEwfSkpO3JldHVybnsiTW9kLUVudGVyIjpuLCJTaGlmdC1FbnRlciI6bn19fSx7a2V5OiJuYW1lIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4iaGFyZF9icmVhayJ9fSx7a2V5OiJzY2hlbWEiLGdldDpmdW5jdGlvbigpe3JldHVybntpbmxpbmU6ITAsZ3JvdXA6ImlubGluZSIsc2VsZWN0YWJsZTohMSxwYXJzZURPTTpbe3RhZzoiYnIifV0sdG9ET006ZnVuY3Rpb24oKXtyZXR1cm5bImJyIl19fX19XSksZX0oZ3QpLGVuPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoKXtyZXR1cm4gX2UodGhpcyxlKSxIZSh0aGlzLEplKGUpLmFwcGx5KHRoaXMsYXJndW1lbnRzKSl9cmV0dXJuIExlKGUsdCksQmUoZSxbe2tleToiY29tbWFuZHMiLHZhbHVlOmZ1bmN0aW9uKHQpe3ZhciBlPXQudHlwZSxuPXQuc2NoZW1hO3JldHVybiBmdW5jdGlvbih0KXtyZXR1cm4gaihlLG4ubm9kZXMucGFyYWdyYXBoLHQpfX19LHtrZXk6ImtleXMiLHZhbHVlOmZ1bmN0aW9uKHQpe3ZhciBlPXQudHlwZTtyZXR1cm4gdGhpcy5vcHRpb25zLmxldmVscy5yZWR1Y2UoKGZ1bmN0aW9uKHQsbil7cmV0dXJuIFZlKHt9LHQse30samUoe30sIlNoaWZ0LUN0cmwtIi5jb25jYXQobiksT2JqZWN0KGhbInNldEJsb2NrVHlwZSJdKShlLHtsZXZlbDpufSkpKX0pLHt9KX19LHtrZXk6ImlucHV0UnVsZXMiLHZhbHVlOmZ1bmN0aW9uKHQpe3ZhciBlPXQudHlwZTtyZXR1cm4gdGhpcy5vcHRpb25zLmxldmVscy5tYXAoKGZ1bmN0aW9uKHQpe3JldHVybiBPYmplY3QoZlsidGV4dGJsb2NrVHlwZUlucHV0UnVsZSJdKShuZXcgUmVnRXhwKCJeKCN7MSwiLmNvbmNhdCh0LCJ9KVxccyQiKSksZSwoZnVuY3Rpb24oKXtyZXR1cm57bGV2ZWw6dH19KSl9KSl9fSx7a2V5OiJuYW1lIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4iaGVhZGluZyJ9fSx7a2V5OiJkZWZhdWx0T3B0aW9ucyIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJue2xldmVsczpbMSwyLDMsNCw1LDZdfX19LHtrZXk6InNjaGVtYSIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJue2F0dHJzOntsZXZlbDp7ZGVmYXVsdDoxfX0sY29udGVudDoiaW5saW5lKiIsZ3JvdXA6ImJsb2NrIixkZWZpbmluZzohMCxkcmFnZ2FibGU6ITEscGFyc2VET006dGhpcy5vcHRpb25zLmxldmVscy5tYXAoKGZ1bmN0aW9uKHQpe3JldHVybnt0YWc6ImgiLmNvbmNhdCh0KSxhdHRyczp7bGV2ZWw6dH19fSkpLHRvRE9NOmZ1bmN0aW9uKHQpe3JldHVyblsiaCIuY29uY2F0KHQuYXR0cnMubGV2ZWwpLDBdfX19fV0pLGV9KGd0KSxubj1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKCl7cmV0dXJuIF9lKHRoaXMsZSksSGUodGhpcyxKZShlKS5hcHBseSh0aGlzLGFyZ3VtZW50cykpfXJldHVybiBMZShlLHQpLEJlKGUsW3trZXk6ImtleXMiLHZhbHVlOmZ1bmN0aW9uKHQpe3ZhciBlPXQudHlwZTtyZXR1cm57RW50ZXI6T2JqZWN0KE9bInNwbGl0TGlzdEl0ZW0iXSkoZSksVGFiOk9iamVjdChPWyJzaW5rTGlzdEl0ZW0iXSkoZSksIlNoaWZ0LVRhYiI6T2JqZWN0KE9bImxpZnRMaXN0SXRlbSJdKShlKX19fSx7a2V5OiJuYW1lIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4ibGlzdF9pdGVtIn19LHtrZXk6InNjaGVtYSIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJue2NvbnRlbnQ6InBhcmFncmFwaCBibG9jayoiLGRlZmluaW5nOiEwLGRyYWdnYWJsZTohMSxwYXJzZURPTTpbe3RhZzoibGkifV0sdG9ET006ZnVuY3Rpb24oKXtyZXR1cm5bImxpIiwwXX19fX1dKSxlfShndCk7dmFyIHJuPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoKXtyZXR1cm4gX2UodGhpcyxlKSxIZSh0aGlzLEplKGUpLmFwcGx5KHRoaXMsYXJndW1lbnRzKSl9cmV0dXJuIExlKGUsdCksQmUoZSxbe2tleToiY29tbWFuZHMiLHZhbHVlOmZ1bmN0aW9uKHQpe3ZhciBlPXQudHlwZSxuPXQuc2NoZW1hO3JldHVybiBmdW5jdGlvbigpe3JldHVybiBWKGUsbi5ub2Rlcy5saXN0X2l0ZW0pfX19LHtrZXk6ImtleXMiLHZhbHVlOmZ1bmN0aW9uKHQpe3ZhciBlPXQudHlwZSxuPXQuc2NoZW1hO3JldHVybnsiU2hpZnQtQ3RybC05IjpWKGUsbi5ub2Rlcy5saXN0X2l0ZW0pfX19LHtrZXk6ImlucHV0UnVsZXMiLHZhbHVlOmZ1bmN0aW9uKHQpe3ZhciBlPXQudHlwZTtyZXR1cm5bT2JqZWN0KGZbIndyYXBwaW5nSW5wdXRSdWxlIl0pKC9eKFxkKylcLlxzJC8sZSwoZnVuY3Rpb24odCl7cmV0dXJue29yZGVyOit0WzFdfX0pLChmdW5jdGlvbih0LGUpe3JldHVybiBlLmNoaWxkQ291bnQrZS5hdHRycy5vcmRlcj09PSt0WzFdfSkpXX19LHtrZXk6Im5hbWUiLGdldDpmdW5jdGlvbigpe3JldHVybiJvcmRlcmVkX2xpc3QifX0se2tleToic2NoZW1hIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm57YXR0cnM6e29yZGVyOntkZWZhdWx0OjF9fSxjb250ZW50OiJsaXN0X2l0ZW0rIixncm91cDoiYmxvY2siLHBhcnNlRE9NOlt7dGFnOiJvbCIsZ2V0QXR0cnM6ZnVuY3Rpb24odCl7cmV0dXJue29yZGVyOnQuaGFzQXR0cmlidXRlKCJzdGFydCIpPyt0LmdldEF0dHJpYnV0ZSgic3RhcnQiKToxfX19XSx0b0RPTTpmdW5jdGlvbih0KXtyZXR1cm4gMT09PXQuYXR0cnMub3JkZXI/WyJvbCIsMF06WyJvbCIse3N0YXJ0OnQuYXR0cnMub3JkZXJ9LDBdfX19fV0pLGV9KGd0KSxvbj1PYmplY3QoUGVbInRhYmxlTm9kZXMiXSkoe3RhYmxlR3JvdXA6ImJsb2NrIixjZWxsQ29udGVudDoiYmxvY2srIixjZWxsQXR0cmlidXRlczp7YmFja2dyb3VuZDp7ZGVmYXVsdDpudWxsLGdldEZyb21ET006ZnVuY3Rpb24odCl7cmV0dXJuIHQuc3R5bGUuYmFja2dyb3VuZENvbG9yfHxudWxsfSxzZXRET01BdHRyOmZ1bmN0aW9uKHQsZSl7aWYodCl7dmFyIG49e3N0eWxlOiIiLmNvbmNhdChlLnN0eWxlfHwiIiwiYmFja2dyb3VuZC1jb2xvcjogIikuY29uY2F0KHQsIjsiKX07T2JqZWN0LmFzc2lnbihlLG4pfX19fX0pLHNuPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoKXtyZXR1cm4gX2UodGhpcyxlKSxIZSh0aGlzLEplKGUpLmFwcGx5KHRoaXMsYXJndW1lbnRzKSl9cmV0dXJuIExlKGUsdCksQmUoZSxbe2tleToiY29tbWFuZHMiLHZhbHVlOmZ1bmN0aW9uKHQpe3ZhciBlPXQuc2NoZW1hO3JldHVybntjcmVhdGVUYWJsZTpmdW5jdGlvbih0KXt2YXIgbj10LnJvd3NDb3VudCxyPXQuY29sc0NvdW50LG89dC53aXRoSGVhZGVyUm93O3JldHVybiBmdW5jdGlvbih0LGkpe3ZhciBhPU9iamVjdCh6ZVsiY3JlYXRlVGFibGUiXSkoZSxuLHIsbyksYz10LnRyLnJlcGxhY2VTZWxlY3Rpb25XaXRoKGEpLnNjcm9sbEludG9WaWV3KCksbD1jLmRvYy5yZXNvbHZlKGMuc2VsZWN0aW9uLmFuY2hvci1hLmNvbnRlbnQuc2l6ZSk7Yy5zZXRTZWxlY3Rpb24oc1siVGV4dFNlbGVjdGlvbiJdLm5lYXIobCkpLGkoYyl9fSxhZGRDb2x1bW5CZWZvcmU6ZnVuY3Rpb24oKXtyZXR1cm4gUGVbImFkZENvbHVtbkJlZm9yZSJdfSxhZGRDb2x1bW5BZnRlcjpmdW5jdGlvbigpe3JldHVybiBQZVsiYWRkQ29sdW1uQWZ0ZXIiXX0sZGVsZXRlQ29sdW1uOmZ1bmN0aW9uKCl7cmV0dXJuIFBlWyJkZWxldGVDb2x1bW4iXX0sYWRkUm93QmVmb3JlOmZ1bmN0aW9uKCl7cmV0dXJuIFBlWyJhZGRSb3dCZWZvcmUiXX0sYWRkUm93QWZ0ZXI6ZnVuY3Rpb24oKXtyZXR1cm4gUGVbImFkZFJvd0FmdGVyIl19LGRlbGV0ZVJvdzpmdW5jdGlvbigpe3JldHVybiBQZVsiZGVsZXRlUm93Il19LGRlbGV0ZVRhYmxlOmZ1bmN0aW9uKCl7cmV0dXJuIFBlWyJkZWxldGVUYWJsZSJdfSx0b2dnbGVDZWxsTWVyZ2U6ZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24odCxlKXtPYmplY3QoUGVbIm1lcmdlQ2VsbHMiXSkodCxlKXx8T2JqZWN0KFBlWyJzcGxpdENlbGwiXSkodCxlKX19LG1lcmdlQ2VsbHM6ZnVuY3Rpb24oKXtyZXR1cm4gUGVbIm1lcmdlQ2VsbHMiXX0sc3BsaXRDZWxsOmZ1bmN0aW9uKCl7cmV0dXJuIFBlWyJzcGxpdENlbGwiXX0sdG9nZ2xlSGVhZGVyQ29sdW1uOmZ1bmN0aW9uKCl7cmV0dXJuIFBlWyJ0b2dnbGVIZWFkZXJDb2x1bW4iXX0sdG9nZ2xlSGVhZGVyUm93OmZ1bmN0aW9uKCl7cmV0dXJuIFBlWyJ0b2dnbGVIZWFkZXJSb3ciXX0sdG9nZ2xlSGVhZGVyQ2VsbDpmdW5jdGlvbigpe3JldHVybiBQZVsidG9nZ2xlSGVhZGVyQ2VsbCJdfSxzZXRDZWxsQXR0cjpmdW5jdGlvbigpe3JldHVybiBQZVsic2V0Q2VsbEF0dHIiXX0sZml4VGFibGVzOmZ1bmN0aW9uKCl7cmV0dXJuIFBlWyJmaXhUYWJsZXMiXX19fX0se2tleToia2V5cyIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm57VGFiOk9iamVjdChQZVsiZ29Ub05leHRDZWxsIl0pKDEpLCJTaGlmdC1UYWIiOk9iamVjdChQZVsiZ29Ub05leHRDZWxsIl0pKC0xKX19fSx7a2V5OiJuYW1lIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4idGFibGUifX0se2tleToiZGVmYXVsdE9wdGlvbnMiLGdldDpmdW5jdGlvbigpe3JldHVybntyZXNpemFibGU6ITF9fX0se2tleToic2NoZW1hIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gb24udGFibGV9fSx7a2V5OiJwbHVnaW5zIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm5bXS5jb25jYXQoS2UodGhpcy5vcHRpb25zLnJlc2l6YWJsZT9bT2JqZWN0KFBlWyJjb2x1bW5SZXNpemluZyJdKSgpXTpbXSksW09iamVjdChQZVsidGFibGVFZGl0aW5nIl0pKCldKX19XSksZX0oZ3QpLGFuPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoKXtyZXR1cm4gX2UodGhpcyxlKSxIZSh0aGlzLEplKGUpLmFwcGx5KHRoaXMsYXJndW1lbnRzKSl9cmV0dXJuIExlKGUsdCksQmUoZSxbe2tleToibmFtZSIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuInRhYmxlX2hlYWRlciJ9fSx7a2V5OiJzY2hlbWEiLGdldDpmdW5jdGlvbigpe3JldHVybiBvbi50YWJsZV9oZWFkZXJ9fV0pLGV9KGd0KSxjbj1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKCl7cmV0dXJuIF9lKHRoaXMsZSksSGUodGhpcyxKZShlKS5hcHBseSh0aGlzLGFyZ3VtZW50cykpfXJldHVybiBMZShlLHQpLEJlKGUsW3trZXk6Im5hbWUiLGdldDpmdW5jdGlvbigpe3JldHVybiJ0YWJsZV9jZWxsIn19LHtrZXk6InNjaGVtYSIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIG9uLnRhYmxlX2NlbGx9fV0pLGV9KGd0KSxsbj1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKCl7cmV0dXJuIF9lKHRoaXMsZSksSGUodGhpcyxKZShlKS5hcHBseSh0aGlzLGFyZ3VtZW50cykpfXJldHVybiBMZShlLHQpLEJlKGUsW3trZXk6Im5hbWUiLGdldDpmdW5jdGlvbigpe3JldHVybiJ0YWJsZV9yb3cifX0se2tleToic2NoZW1hIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gb24udGFibGVfcm93fX1dKSxlfShndCkscG49ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZSgpe3JldHVybiBfZSh0aGlzLGUpLEhlKHRoaXMsSmUoZSkuYXBwbHkodGhpcyxhcmd1bWVudHMpKX1yZXR1cm4gTGUoZSx0KSxCZShlLFt7a2V5OiJrZXlzIix2YWx1ZTpmdW5jdGlvbih0KXt2YXIgZT10LnR5cGU7cmV0dXJue0VudGVyOkIoZSksVGFiOnRoaXMub3B0aW9ucy5uZXN0ZWQ/T2JqZWN0KE9bInNpbmtMaXN0SXRlbSJdKShlKTpmdW5jdGlvbigpe30sIlNoaWZ0LVRhYiI6T2JqZWN0KE9bImxpZnRMaXN0SXRlbSJdKShlKX19fSx7a2V5OiJuYW1lIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4idG9kb19pdGVtIn19LHtrZXk6ImRlZmF1bHRPcHRpb25zIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm57bmVzdGVkOiExfX19LHtrZXk6InZpZXciLGdldDpmdW5jdGlvbigpe3JldHVybntwcm9wczpbIm5vZGUiLCJ1cGRhdGVBdHRycyIsInZpZXciXSxtZXRob2RzOntvbkNoYW5nZTpmdW5jdGlvbigpe3RoaXMudXBkYXRlQXR0cnMoe2RvbmU6IXRoaXMubm9kZS5hdHRycy5kb25lfSl9fSx0ZW1wbGF0ZTonXG4gICAgICAgIDxsaSA6ZGF0YS10eXBlPSJub2RlLnR5cGUubmFtZSIgOmRhdGEtZG9uZT0ibm9kZS5hdHRycy5kb25lLnRvU3RyaW5nKCkiIGRhdGEtZHJhZy1oYW5kbGU+XG4gICAgICAgICAgPHNwYW4gY2xhc3M9InRvZG8tY2hlY2tib3giIGNvbnRlbnRlZGl0YWJsZT0iZmFsc2UiIEBjbGljaz0ib25DaGFuZ2UiPjwvc3Bhbj5cbiAgICAgICAgICA8ZGl2IGNsYXNzPSJ0b2RvLWNvbnRlbnQiIHJlZj0iY29udGVudCIgOmNvbnRlbnRlZGl0YWJsZT0idmlldy5lZGl0YWJsZS50b1N0cmluZygpIj48L2Rpdj5cbiAgICAgICAgPC9saT5cbiAgICAgICd9fX0se2tleToic2NoZW1hIixnZXQ6ZnVuY3Rpb24oKXt2YXIgdD10aGlzO3JldHVybnthdHRyczp7ZG9uZTp7ZGVmYXVsdDohMX19LGRyYWdnYWJsZTohMCxjb250ZW50OnRoaXMub3B0aW9ucy5uZXN0ZWQ/IihwYXJhZ3JhcGh8dG9kb19saXN0KSsiOiJwYXJhZ3JhcGgrIix0b0RPTTpmdW5jdGlvbihlKXt2YXIgbj1lLmF0dHJzLmRvbmU7cmV0dXJuWyJsaSIseyJkYXRhLXR5cGUiOnQubmFtZSwiZGF0YS1kb25lIjpuLnRvU3RyaW5nKCl9LFsic3BhbiIse2NsYXNzOiJ0b2RvLWNoZWNrYm94Iixjb250ZW50ZWRpdGFibGU6ImZhbHNlIn1dLFsiZGl2Iix7Y2xhc3M6InRvZG8tY29udGVudCJ9LDBdXX0scGFyc2VET006W3twcmlvcml0eTo1MSx0YWc6J1tkYXRhLXR5cGU9IicuY29uY2F0KHRoaXMubmFtZSwnIl0nKSxnZXRBdHRyczpmdW5jdGlvbih0KXtyZXR1cm57ZG9uZToidHJ1ZSI9PT10LmdldEF0dHJpYnV0ZSgiZGF0YS1kb25lIil9fX1dfX19XSksZX0oZ3QpLHVuPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoKXtyZXR1cm4gX2UodGhpcyxlKSxIZSh0aGlzLEplKGUpLmFwcGx5KHRoaXMsYXJndW1lbnRzKSl9cmV0dXJuIExlKGUsdCksQmUoZSxbe2tleToiY29tbWFuZHMiLHZhbHVlOmZ1bmN0aW9uKHQpe3ZhciBlPXQudHlwZSxuPXQuc2NoZW1hO3JldHVybiBmdW5jdGlvbigpe3JldHVybiBWKGUsbi5ub2Rlcy50b2RvX2l0ZW0pfX19LHtrZXk6ImlucHV0UnVsZXMiLHZhbHVlOmZ1bmN0aW9uKHQpe3ZhciBlPXQudHlwZTtyZXR1cm5bT2JqZWN0KGZbIndyYXBwaW5nSW5wdXRSdWxlIl0pKC9eXHMqKFxbIFxdKVxzJC8sZSldfX0se2tleToibmFtZSIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuInRvZG9fbGlzdCJ9fSx7a2V5OiJzY2hlbWEiLGdldDpmdW5jdGlvbigpe3ZhciB0PXRoaXM7cmV0dXJue2dyb3VwOiJibG9jayIsY29udGVudDoidG9kb19pdGVtKyIsdG9ET006ZnVuY3Rpb24oKXtyZXR1cm5bInVsIix7ImRhdGEtdHlwZSI6dC5uYW1lfSwwXX0scGFyc2VET006W3twcmlvcml0eTo1MSx0YWc6J1tkYXRhLXR5cGU9IicuY29uY2F0KHRoaXMubmFtZSwnIl0nKX1dfX19XSksZX0oZ3QpLGhuPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoKXtyZXR1cm4gX2UodGhpcyxlKSxIZSh0aGlzLEplKGUpLmFwcGx5KHRoaXMsYXJndW1lbnRzKSl9cmV0dXJuIExlKGUsdCksQmUoZSxbe2tleToia2V5cyIsdmFsdWU6ZnVuY3Rpb24odCl7dmFyIGU9dC50eXBlO3JldHVybnsiTW9kLWIiOk9iamVjdChoWyJ0b2dnbGVNYXJrIl0pKGUpfX19LHtrZXk6ImNvbW1hbmRzIix2YWx1ZTpmdW5jdGlvbih0KXt2YXIgZT10LnR5cGU7cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIE9iamVjdChoWyJ0b2dnbGVNYXJrIl0pKGUpfX19LHtrZXk6ImlucHV0UnVsZXMiLHZhbHVlOmZ1bmN0aW9uKHQpe3ZhciBlPXQudHlwZTtyZXR1cm5beigvKD86XCpcKnxfXykoW14qX10rKSg/OlwqXCp8X18pJC8sZSldfX0se2tleToicGFzdGVSdWxlcyIsdmFsdWU6ZnVuY3Rpb24odCl7dmFyIGU9dC50eXBlO3JldHVybltJKC8oPzpcKlwqfF9fKShbXipfXSspKD86XCpcKnxfXykvZyxlKV19fSx7a2V5OiJuYW1lIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4iYm9sZCJ9fSx7a2V5OiJzY2hlbWEiLGdldDpmdW5jdGlvbigpe3JldHVybntwYXJzZURPTTpbe3RhZzoic3Ryb25nIn0se3RhZzoiYiIsZ2V0QXR0cnM6ZnVuY3Rpb24odCl7cmV0dXJuIm5vcm1hbCIhPT10LnN0eWxlLmZvbnRXZWlnaHQmJm51bGx9fSx7c3R5bGU6ImZvbnQtd2VpZ2h0IixnZXRBdHRyczpmdW5jdGlvbih0KXtyZXR1cm4vXihib2xkKGVyKT98WzUtOV1cZHsyLH0pJC8udGVzdCh0KSYmbnVsbH19XSx0b0RPTTpmdW5jdGlvbigpe3JldHVyblsic3Ryb25nIiwwXX19fX1dKSxlfShtdCksZm49ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZSgpe3JldHVybiBfZSh0aGlzLGUpLEhlKHRoaXMsSmUoZSkuYXBwbHkodGhpcyxhcmd1bWVudHMpKX1yZXR1cm4gTGUoZSx0KSxCZShlLFt7a2V5OiJrZXlzIix2YWx1ZTpmdW5jdGlvbih0KXt2YXIgZT10LnR5cGU7cmV0dXJueyJNb2QtYCI6T2JqZWN0KGhbInRvZ2dsZU1hcmsiXSkoZSl9fX0se2tleToiY29tbWFuZHMiLHZhbHVlOmZ1bmN0aW9uKHQpe3ZhciBlPXQudHlwZTtyZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gT2JqZWN0KGhbInRvZ2dsZU1hcmsiXSkoZSl9fX0se2tleToiaW5wdXRSdWxlcyIsdmFsdWU6ZnVuY3Rpb24odCl7dmFyIGU9dC50eXBlO3JldHVyblt6KC8oPzpgKShbXmBdKykoPzpgKSQvLGUpXX19LHtrZXk6InBhc3RlUnVsZXMiLHZhbHVlOmZ1bmN0aW9uKHQpe3ZhciBlPXQudHlwZTtyZXR1cm5bSSgvKD86YCkoW15gXSspKD86YCkvZyxlKV19fSx7a2V5OiJuYW1lIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4iY29kZSJ9fSx7a2V5OiJzY2hlbWEiLGdldDpmdW5jdGlvbigpe3JldHVybntleGNsdWRlczoiXyIscGFyc2VET006W3t0YWc6ImNvZGUifV0sdG9ET006ZnVuY3Rpb24oKXtyZXR1cm5bImNvZGUiLDBdfX19fV0pLGV9KG10KSxkbj1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKCl7cmV0dXJuIF9lKHRoaXMsZSksSGUodGhpcyxKZShlKS5hcHBseSh0aGlzLGFyZ3VtZW50cykpfXJldHVybiBMZShlLHQpLEJlKGUsW3trZXk6ImtleXMiLHZhbHVlOmZ1bmN0aW9uKHQpe3ZhciBlPXQudHlwZTtyZXR1cm57Ik1vZC1pIjpPYmplY3QoaFsidG9nZ2xlTWFyayJdKShlKX19fSx7a2V5OiJjb21tYW5kcyIsdmFsdWU6ZnVuY3Rpb24odCl7dmFyIGU9dC50eXBlO3JldHVybiBmdW5jdGlvbigpe3JldHVybiBPYmplY3QoaFsidG9nZ2xlTWFyayJdKShlKX19fSx7a2V5OiJpbnB1dFJ1bGVzIix2YWx1ZTpmdW5jdGlvbih0KXt2YXIgZT10LnR5cGU7cmV0dXJuW3ooLyg/Ol58W15fXSkoXyhbXl9dKylfKSQvLGUpLHooLyg/Ol58W14qXSkoXCooW14qXSspXCopJC8sZSldfX0se2tleToicGFzdGVSdWxlcyIsdmFsdWU6ZnVuY3Rpb24odCl7dmFyIGU9dC50eXBlO3JldHVybltJKC9fKFteX10rKV8vZyxlKSxJKC9cKihbXipdKylcKi9nLGUpXX19LHtrZXk6Im5hbWUiLGdldDpmdW5jdGlvbigpe3JldHVybiJpdGFsaWMifX0se2tleToic2NoZW1hIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm57cGFyc2VET006W3t0YWc6ImkifSx7dGFnOiJlbSJ9LHtzdHlsZToiZm9udC1zdHlsZT1pdGFsaWMifV0sdG9ET006ZnVuY3Rpb24oKXtyZXR1cm5bImVtIiwwXX19fX1dKSxlfShtdCksdm49ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZSgpe3JldHVybiBfZSh0aGlzLGUpLEhlKHRoaXMsSmUoZSkuYXBwbHkodGhpcyxhcmd1bWVudHMpKX1yZXR1cm4gTGUoZSx0KSxCZShlLFt7a2V5OiJjb21tYW5kcyIsdmFsdWU6ZnVuY3Rpb24odCl7dmFyIGU9dC50eXBlO3JldHVybiBmdW5jdGlvbih0KXtyZXR1cm4gdC5ocmVmP0ooZSx0KTpfKGUpfX19LHtrZXk6InBhc3RlUnVsZXMiLHZhbHVlOmZ1bmN0aW9uKHQpe3ZhciBlPXQudHlwZTtyZXR1cm5bUCgvaHR0cHM/OlwvXC8od3d3XC4pP1stYS16QS1aMC05QDolLl8rfiM9XXsyLDI1Nn1cLlthLXpBLVpdezIsfVxiKFstYS16QS1aMC05QDolXysufiM/JlwvXC89XSopL2csZSwoZnVuY3Rpb24odCl7cmV0dXJue2hyZWY6dH19KSldfX0se2tleToibmFtZSIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuImxpbmsifX0se2tleToiZGVmYXVsdE9wdGlvbnMiLGdldDpmdW5jdGlvbigpe3JldHVybntvcGVuT25DbGljazohMH19fSx7a2V5OiJzY2hlbWEiLGdldDpmdW5jdGlvbigpe3JldHVybnthdHRyczp7aHJlZjp7ZGVmYXVsdDpudWxsfX0saW5jbHVzaXZlOiExLHBhcnNlRE9NOlt7dGFnOiJhW2hyZWZdIixnZXRBdHRyczpmdW5jdGlvbih0KXtyZXR1cm57aHJlZjp0LmdldEF0dHJpYnV0ZSgiaHJlZiIpfX19XSx0b0RPTTpmdW5jdGlvbih0KXtyZXR1cm5bImEiLFZlKHt9LHQuYXR0cnMse3JlbDoibm9vcGVuZXIgbm9yZWZlcnJlciBub2ZvbGxvdyJ9KSwwXX19fX0se2tleToicGx1Z2lucyIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMub3B0aW9ucy5vcGVuT25DbGljaz9bbmV3IHNbIlBsdWdpbiJdKHtwcm9wczp7aGFuZGxlQ2xpY2s6ZnVuY3Rpb24odCxlLG4pe3ZhciByPXQuc3RhdGUuc2NoZW1hLG89dyh0LnN0YXRlLHIubWFya3MubGluayk7by5ocmVmJiZuLnRhcmdldCBpbnN0YW5jZW9mIEhUTUxBbmNob3JFbGVtZW50JiYobi5zdG9wUHJvcGFnYXRpb24oKSx3aW5kb3cub3BlbihvLmhyZWYpKX19fSldOltdfX1dKSxlfShtdCksbW49ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZSgpe3JldHVybiBfZSh0aGlzLGUpLEhlKHRoaXMsSmUoZSkuYXBwbHkodGhpcyxhcmd1bWVudHMpKX1yZXR1cm4gTGUoZSx0KSxCZShlLFt7a2V5OiJrZXlzIix2YWx1ZTpmdW5jdGlvbih0KXt2YXIgZT10LnR5cGU7cmV0dXJueyJNb2QtZCI6T2JqZWN0KGhbInRvZ2dsZU1hcmsiXSkoZSl9fX0se2tleToiY29tbWFuZHMiLHZhbHVlOmZ1bmN0aW9uKHQpe3ZhciBlPXQudHlwZTtyZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gT2JqZWN0KGhbInRvZ2dsZU1hcmsiXSkoZSl9fX0se2tleToiaW5wdXRSdWxlcyIsdmFsdWU6ZnVuY3Rpb24odCl7dmFyIGU9dC50eXBlO3JldHVyblt6KC9+KFtefl0rKX4kLyxlKV19fSx7a2V5OiJwYXN0ZVJ1bGVzIix2YWx1ZTpmdW5jdGlvbih0KXt2YXIgZT10LnR5cGU7cmV0dXJuW0koL34oW15+XSspfi9nLGUpXX19LHtrZXk6Im5hbWUiLGdldDpmdW5jdGlvbigpe3JldHVybiJzdHJpa2UifX0se2tleToic2NoZW1hIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm57cGFyc2VET006W3t0YWc6InMifSx7dGFnOiJkZWwifSx7dGFnOiJzdHJpa2UifSx7c3R5bGU6InRleHQtZGVjb3JhdGlvbiIsZ2V0QXR0cnM6ZnVuY3Rpb24odCl7cmV0dXJuImxpbmUtdGhyb3VnaCI9PT10fX1dLHRvRE9NOmZ1bmN0aW9uKCl7cmV0dXJuWyJzIiwwXX19fX1dKSxlfShtdCkseW49ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZSgpe3JldHVybiBfZSh0aGlzLGUpLEhlKHRoaXMsSmUoZSkuYXBwbHkodGhpcyxhcmd1bWVudHMpKX1yZXR1cm4gTGUoZSx0KSxCZShlLFt7a2V5OiJrZXlzIix2YWx1ZTpmdW5jdGlvbih0KXt2YXIgZT10LnR5cGU7cmV0dXJueyJNb2QtdSI6T2JqZWN0KGhbInRvZ2dsZU1hcmsiXSkoZSl9fX0se2tleToiY29tbWFuZHMiLHZhbHVlOmZ1bmN0aW9uKHQpe3ZhciBlPXQudHlwZTtyZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gT2JqZWN0KGhbInRvZ2dsZU1hcmsiXSkoZSl9fX0se2tleToibmFtZSIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuInVuZGVybGluZSJ9fSx7a2V5OiJzY2hlbWEiLGdldDpmdW5jdGlvbigpe3JldHVybntwYXJzZURPTTpbe3RhZzoidSJ9LHtzdHlsZToidGV4dC1kZWNvcmF0aW9uIixnZXRBdHRyczpmdW5jdGlvbih0KXtyZXR1cm4idW5kZXJsaW5lIj09PXR9fV0sdG9ET006ZnVuY3Rpb24oKXtyZXR1cm5bInUiLDBdfX19fV0pLGV9KG10KSxnbj1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKCl7cmV0dXJuIF9lKHRoaXMsZSksSGUodGhpcyxKZShlKS5hcHBseSh0aGlzLGFyZ3VtZW50cykpfXJldHVybiBMZShlLHQpLEJlKGUsW3trZXk6ImtleXMiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIHQ9eyJNb2QteiI6SWVbInVuZG8iXSwiTW9kLXkiOkllWyJyZWRvIl0sIlNoaWZ0LU1vZC16IjpJZVsicmVkbyJdfTtyZXR1cm4gdH19LHtrZXk6ImNvbW1hbmRzIix2YWx1ZTpmdW5jdGlvbigpe3JldHVybnt1bmRvOmZ1bmN0aW9uKCl7cmV0dXJuIEllWyJ1bmRvIl19LHJlZG86ZnVuY3Rpb24oKXtyZXR1cm4gSWVbInJlZG8iXX19fX0se2tleToibmFtZSIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuImhpc3RvcnkifX0se2tleToiZGVmYXVsdE9wdGlvbnMiLGdldDpmdW5jdGlvbigpe3JldHVybntkZXB0aDoiIixuZXdHcm91cERlbGF5OiIifX19LHtrZXk6InBsdWdpbnMiLGdldDpmdW5jdGlvbigpe3JldHVybltPYmplY3QoSWVbImhpc3RvcnkiXSkoe2RlcHRoOnRoaXMub3B0aW9ucy5kZXB0aCxuZXdHcm91cERlbGF5OnRoaXMub3B0aW9ucy5uZXdHcm91cERlbGF5fSldfX1dKSxlfShmdCk7ZnVuY3Rpb24gd24oKXtyZXR1cm5bbmV3IFllLG5ldyBRZSxuZXcgWmUsbmV3IHRuLG5ldyBlbixuZXcgbm4sbmV3IHJuLG5ldyBwbixuZXcgdW4sbmV3IHZuLG5ldyBzbih7cmVzaXphYmxlOiEwfSksbmV3IGFuLG5ldyBjbixuZXcgbG4sbmV3IGhuLG5ldyBmbixuZXcgZG4sbmV3IG1uLG5ldyB5bixuZXcgZ25dfXZhciB4bj17aW5qZWN0OlsiY29yZSJdLGNvbXBvbmVudHM6e0VkaXRvckNvbnRlbnQ6Q3QsRWRpdG9yTWVudUJhcjpUdCxJY29uOkRlfSxwcm9wczp7ZmllbGROYW1lOlN0cmluZyx2YWx1ZTpTdHJpbmd9LG1vdW50ZWQ6ZnVuY3Rpb24oKXt2YXIgdD10aGlzLiRwcm9wcyxlPXQudmFsdWUsbj10LmZpZWxkTmFtZTt0aGlzLmNvcmUuc2V0Rm9ybVZhbHVlKG4sZSl9LGRhdGE6ZnVuY3Rpb24oKXt2YXIgdD10aGlzLGU9dC4kcHJvcHMuZmllbGROYW1lO3JldHVybntlZGl0b3I6bmV3IFN0KHtjb250ZW50OnRoaXMuJHByb3BzLnZhbHVlLGV4dGVuc2lvbnM6d24oKSxvblVwZGF0ZTpmdW5jdGlvbihuKXt2YXIgcj1uLmdldEhUTUwsbz1yKCk7ZSYmMCE9ZS5sZW5ndGgmJnQuY29yZS5zZXRGb3JtVmFsdWUoZSxvKX19KX19LGJlZm9yZURlc3Ryb3k6ZnVuY3Rpb24oKXt0aGlzLmVkaXRvci5kZXN0cm95KCl9fSxibj14bixrbj1BZShibixvLGksITEsbnVsbCxudWxsLG51bGwpLFNuPWtuLmV4cG9ydHM7KHdpbmRvdy5fX2dvcGxhaWRWdWVDb21wb25lbnRSZWdpc3RlcnM9d2luZG93Ll9fZ29wbGFpZFZ1ZUNvbXBvbmVudFJlZ2lzdGVyc3x8W10pLnB1c2goKGZ1bmN0aW9uKHQpe3QuY29tcG9uZW50KCJ0aXB0YXAtZWRpdG9yIixTbil9KSl9LGZiZWE6ZnVuY3Rpb24odCxlLG4peyJ1c2Ugc3RyaWN0IjtPYmplY3QuZGVmaW5lUHJvcGVydHkoZSwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSk7dmFyIHI9bigiYjkyMyIpLG89bigiNmYyNyIpLGk9bigiNmZmYiIpO2Z1bmN0aW9uIHModCxlKXtyZXR1cm4hdC5zZWxlY3Rpb24uZW1wdHkmJihlJiZlKHQudHIuZGVsZXRlU2VsZWN0aW9uKCkuc2Nyb2xsSW50b1ZpZXcoKSksITApfWZ1bmN0aW9uIGEodCxlLG4pe3ZhciBvPXQuc2VsZWN0aW9uLHM9by4kY3Vyc29yO2lmKCFzfHwobj8hbi5lbmRPZlRleHRibG9jaygiYmFja3dhcmQiLHQpOnMucGFyZW50T2Zmc2V0PjApKXJldHVybiExO3ZhciBhPXAocyk7aWYoIWEpe3ZhciBsPXMuYmxvY2tSYW5nZSgpLHU9bCYmci5saWZ0VGFyZ2V0KGwpO3JldHVybiBudWxsIT11JiYoZSYmZSh0LnRyLmxpZnQobCx1KS5zY3JvbGxJbnRvVmlldygpKSwhMCl9dmFyIGg9YS5ub2RlQmVmb3JlO2lmKCFoLnR5cGUuc3BlYy5pc29sYXRpbmcmJk0odCxhLGUpKXJldHVybiEwO2lmKDA9PXMucGFyZW50LmNvbnRlbnQuc2l6ZSYmKGMoaCwiZW5kIil8fGkuTm9kZVNlbGVjdGlvbi5pc1NlbGVjdGFibGUoaCkpKXtpZihlKXt2YXIgZj10LnRyLmRlbGV0ZVJhbmdlKHMuYmVmb3JlKCkscy5hZnRlcigpKTtmLnNldFNlbGVjdGlvbihjKGgsImVuZCIpP2kuU2VsZWN0aW9uLmZpbmRGcm9tKGYuZG9jLnJlc29sdmUoZi5tYXBwaW5nLm1hcChhLnBvcywtMSkpLC0xKTppLk5vZGVTZWxlY3Rpb24uY3JlYXRlKGYuZG9jLGEucG9zLWgubm9kZVNpemUpKSxlKGYuc2Nyb2xsSW50b1ZpZXcoKSl9cmV0dXJuITB9cmV0dXJuISghaC5pc0F0b218fGEuZGVwdGghPXMuZGVwdGgtMSkmJihlJiZlKHQudHIuZGVsZXRlKGEucG9zLWgubm9kZVNpemUsYS5wb3MpLnNjcm9sbEludG9WaWV3KCkpLCEwKX1mdW5jdGlvbiBjKHQsZSl7Zm9yKDt0O3Q9InN0YXJ0Ij09ZT90LmZpcnN0Q2hpbGQ6dC5sYXN0Q2hpbGQpaWYodC5pc1RleHRibG9jaylyZXR1cm4hMDtyZXR1cm4hMX1mdW5jdGlvbiBsKHQsZSxuKXt2YXIgcj10LnNlbGVjdGlvbixvPXIuJGN1cnNvcjtpZighb3x8KG4/IW4uZW5kT2ZUZXh0YmxvY2soImJhY2t3YXJkIix0KTpvLnBhcmVudE9mZnNldD4wKSlyZXR1cm4hMTt2YXIgcz1wKG8pLGE9cyYmcy5ub2RlQmVmb3JlO3JldHVybiEoIWF8fCFpLk5vZGVTZWxlY3Rpb24uaXNTZWxlY3RhYmxlKGEpKSYmKGUmJmUodC50ci5zZXRTZWxlY3Rpb24oaS5Ob2RlU2VsZWN0aW9uLmNyZWF0ZSh0LmRvYyxzLnBvcy1hLm5vZGVTaXplKSkuc2Nyb2xsSW50b1ZpZXcoKSksITApfWZ1bmN0aW9uIHAodCl7aWYoIXQucGFyZW50LnR5cGUuc3BlYy5pc29sYXRpbmcpZm9yKHZhciBlPXQuZGVwdGgtMTtlPj0wO2UtLSl7aWYodC5pbmRleChlKT4wKXJldHVybiB0LmRvYy5yZXNvbHZlKHQuYmVmb3JlKGUrMSkpO2lmKHQubm9kZShlKS50eXBlLnNwZWMuaXNvbGF0aW5nKWJyZWFrfXJldHVybiBudWxsfWZ1bmN0aW9uIHUodCxlLG4pe3ZhciByPXQuc2VsZWN0aW9uLG89ci4kY3Vyc29yO2lmKCFvfHwobj8hbi5lbmRPZlRleHRibG9jaygiZm9yd2FyZCIsdCk6by5wYXJlbnRPZmZzZXQ8by5wYXJlbnQuY29udGVudC5zaXplKSlyZXR1cm4hMTt2YXIgcz1mKG8pO2lmKCFzKXJldHVybiExO3ZhciBhPXMubm9kZUFmdGVyO2lmKE0odCxzLGUpKXJldHVybiEwO2lmKDA9PW8ucGFyZW50LmNvbnRlbnQuc2l6ZSYmKGMoYSwic3RhcnQiKXx8aS5Ob2RlU2VsZWN0aW9uLmlzU2VsZWN0YWJsZShhKSkpe2lmKGUpe3ZhciBsPXQudHIuZGVsZXRlUmFuZ2Uoby5iZWZvcmUoKSxvLmFmdGVyKCkpO2wuc2V0U2VsZWN0aW9uKGMoYSwic3RhcnQiKT9pLlNlbGVjdGlvbi5maW5kRnJvbShsLmRvYy5yZXNvbHZlKGwubWFwcGluZy5tYXAocy5wb3MpKSwxKTppLk5vZGVTZWxlY3Rpb24uY3JlYXRlKGwuZG9jLGwubWFwcGluZy5tYXAocy5wb3MpKSksZShsLnNjcm9sbEludG9WaWV3KCkpfXJldHVybiEwfXJldHVybiEoIWEuaXNBdG9tfHxzLmRlcHRoIT1vLmRlcHRoLTEpJiYoZSYmZSh0LnRyLmRlbGV0ZShzLnBvcyxzLnBvcythLm5vZGVTaXplKS5zY3JvbGxJbnRvVmlldygpKSwhMCl9ZnVuY3Rpb24gaCh0LGUsbil7dmFyIHI9dC5zZWxlY3Rpb24sbz1yLiRjdXJzb3I7aWYoIW98fChuPyFuLmVuZE9mVGV4dGJsb2NrKCJmb3J3YXJkIix0KTpvLnBhcmVudE9mZnNldDxvLnBhcmVudC5jb250ZW50LnNpemUpKXJldHVybiExO3ZhciBzPWYobyksYT1zJiZzLm5vZGVBZnRlcjtyZXR1cm4hKCFhfHwhaS5Ob2RlU2VsZWN0aW9uLmlzU2VsZWN0YWJsZShhKSkmJihlJiZlKHQudHIuc2V0U2VsZWN0aW9uKGkuTm9kZVNlbGVjdGlvbi5jcmVhdGUodC5kb2Mscy5wb3MpKS5zY3JvbGxJbnRvVmlldygpKSwhMCl9ZnVuY3Rpb24gZih0KXtpZighdC5wYXJlbnQudHlwZS5zcGVjLmlzb2xhdGluZylmb3IodmFyIGU9dC5kZXB0aC0xO2U+PTA7ZS0tKXt2YXIgbj10Lm5vZGUoZSk7aWYodC5pbmRleChlKSsxPG4uY2hpbGRDb3VudClyZXR1cm4gdC5kb2MucmVzb2x2ZSh0LmFmdGVyKGUrMSkpO2lmKG4udHlwZS5zcGVjLmlzb2xhdGluZylicmVha31yZXR1cm4gbnVsbH1mdW5jdGlvbiBkKHQsZSl7dmFyIG4sbz10LnNlbGVjdGlvbixzPW8gaW5zdGFuY2VvZiBpLk5vZGVTZWxlY3Rpb247aWYocyl7aWYoby5ub2RlLmlzVGV4dGJsb2NrfHwhci5jYW5Kb2luKHQuZG9jLG8uZnJvbSkpcmV0dXJuITE7bj1vLmZyb219ZWxzZSBpZihuPXIuam9pblBvaW50KHQuZG9jLG8uZnJvbSwtMSksbnVsbD09bilyZXR1cm4hMTtpZihlKXt2YXIgYT10LnRyLmpvaW4obik7cyYmYS5zZXRTZWxlY3Rpb24oaS5Ob2RlU2VsZWN0aW9uLmNyZWF0ZShhLmRvYyxuLXQuZG9jLnJlc29sdmUobikubm9kZUJlZm9yZS5ub2RlU2l6ZSkpLGUoYS5zY3JvbGxJbnRvVmlldygpKX1yZXR1cm4hMH1mdW5jdGlvbiB2KHQsZSl7dmFyIG4sbz10LnNlbGVjdGlvbjtpZihvIGluc3RhbmNlb2YgaS5Ob2RlU2VsZWN0aW9uKXtpZihvLm5vZGUuaXNUZXh0YmxvY2t8fCFyLmNhbkpvaW4odC5kb2Msby50bykpcmV0dXJuITE7bj1vLnRvfWVsc2UgaWYobj1yLmpvaW5Qb2ludCh0LmRvYyxvLnRvLDEpLG51bGw9PW4pcmV0dXJuITE7cmV0dXJuIGUmJmUodC50ci5qb2luKG4pLnNjcm9sbEludG9WaWV3KCkpLCEwfWZ1bmN0aW9uIG0odCxlKXt2YXIgbj10LnNlbGVjdGlvbixvPW4uJGZyb20saT1uLiR0byxzPW8uYmxvY2tSYW5nZShpKSxhPXMmJnIubGlmdFRhcmdldChzKTtyZXR1cm4gbnVsbCE9YSYmKGUmJmUodC50ci5saWZ0KHMsYSkuc2Nyb2xsSW50b1ZpZXcoKSksITApfWZ1bmN0aW9uIHkodCxlKXt2YXIgbj10LnNlbGVjdGlvbixyPW4uJGhlYWQsbz1uLiRhbmNob3I7cmV0dXJuISghci5wYXJlbnQudHlwZS5zcGVjLmNvZGV8fCFyLnNhbWVQYXJlbnQobykpJiYoZSYmZSh0LnRyLmluc2VydFRleHQoIlxuIikuc2Nyb2xsSW50b1ZpZXcoKSksITApfWZ1bmN0aW9uIGcodCxlKXt2YXIgbj10LnNlbGVjdGlvbixyPW4uJGhlYWQsbz1uLiRhbmNob3I7aWYoIXIucGFyZW50LnR5cGUuc3BlYy5jb2RlfHwhci5zYW1lUGFyZW50KG8pKXJldHVybiExO3ZhciBzPXIubm9kZSgtMSksYT1yLmluZGV4QWZ0ZXIoLTEpLGM9cy5jb250ZW50TWF0Y2hBdChhKS5kZWZhdWx0VHlwZTtpZighcy5jYW5SZXBsYWNlV2l0aChhLGEsYykpcmV0dXJuITE7aWYoZSl7dmFyIGw9ci5hZnRlcigpLHA9dC50ci5yZXBsYWNlV2l0aChsLGwsYy5jcmVhdGVBbmRGaWxsKCkpO3Auc2V0U2VsZWN0aW9uKGkuU2VsZWN0aW9uLm5lYXIocC5kb2MucmVzb2x2ZShsKSwxKSksZShwLnNjcm9sbEludG9WaWV3KCkpfXJldHVybiEwfWZ1bmN0aW9uIHcodCxlKXt2YXIgbj10LnNlbGVjdGlvbixyPW4uJGZyb20sbz1uLiR0bztpZihyLnBhcmVudC5pbmxpbmVDb250ZW50fHxvLnBhcmVudC5pbmxpbmVDb250ZW50KXJldHVybiExO3ZhciBzPXIucGFyZW50LmNvbnRlbnRNYXRjaEF0KG8uaW5kZXhBZnRlcigpKS5kZWZhdWx0VHlwZTtpZighc3x8IXMuaXNUZXh0YmxvY2spcmV0dXJuITE7aWYoZSl7dmFyIGE9KCFyLnBhcmVudE9mZnNldCYmby5pbmRleCgpPG8ucGFyZW50LmNoaWxkQ291bnQ/cjpvKS5wb3MsYz10LnRyLmluc2VydChhLHMuY3JlYXRlQW5kRmlsbCgpKTtjLnNldFNlbGVjdGlvbihpLlRleHRTZWxlY3Rpb24uY3JlYXRlKGMuZG9jLGErMSkpLGUoYy5zY3JvbGxJbnRvVmlldygpKX1yZXR1cm4hMH1mdW5jdGlvbiB4KHQsZSl7dmFyIG49dC5zZWxlY3Rpb24sbz1uLiRjdXJzb3I7aWYoIW98fG8ucGFyZW50LmNvbnRlbnQuc2l6ZSlyZXR1cm4hMTtpZihvLmRlcHRoPjEmJm8uYWZ0ZXIoKSE9by5lbmQoLTEpKXt2YXIgaT1vLmJlZm9yZSgpO2lmKHIuY2FuU3BsaXQodC5kb2MsaSkpcmV0dXJuIGUmJmUodC50ci5zcGxpdChpKS5zY3JvbGxJbnRvVmlldygpKSwhMH12YXIgcz1vLmJsb2NrUmFuZ2UoKSxhPXMmJnIubGlmdFRhcmdldChzKTtyZXR1cm4gbnVsbCE9YSYmKGUmJmUodC50ci5saWZ0KHMsYSkuc2Nyb2xsSW50b1ZpZXcoKSksITApfWZ1bmN0aW9uIGIodCxlKXt2YXIgbj10LnNlbGVjdGlvbixzPW4uJGZyb20sYT1uLiR0bztpZih0LnNlbGVjdGlvbiBpbnN0YW5jZW9mIGkuTm9kZVNlbGVjdGlvbiYmdC5zZWxlY3Rpb24ubm9kZS5pc0Jsb2NrKXJldHVybiEoIXMucGFyZW50T2Zmc2V0fHwhci5jYW5TcGxpdCh0LmRvYyxzLnBvcykpJiYoZSYmZSh0LnRyLnNwbGl0KHMucG9zKS5zY3JvbGxJbnRvVmlldygpKSwhMCk7aWYoIXMucGFyZW50LmlzQmxvY2spcmV0dXJuITE7aWYoZSl7dmFyIGM9YS5wYXJlbnRPZmZzZXQ9PWEucGFyZW50LmNvbnRlbnQuc2l6ZSxsPXQudHI7dC5zZWxlY3Rpb24gaW5zdGFuY2VvZiBpLlRleHRTZWxlY3Rpb24mJmwuZGVsZXRlU2VsZWN0aW9uKCk7dmFyIHA9MD09cy5kZXB0aD9udWxsOnMubm9kZSgtMSkuY29udGVudE1hdGNoQXQocy5pbmRleEFmdGVyKC0xKSkuZGVmYXVsdFR5cGUsdT1jJiZwP1t7dHlwZTpwfV06bnVsbCxoPXIuY2FuU3BsaXQobC5kb2MsbC5tYXBwaW5nLm1hcChzLnBvcyksMSx1KTt1fHxofHwhci5jYW5TcGxpdChsLmRvYyxsLm1hcHBpbmcubWFwKHMucG9zKSwxLHAmJlt7dHlwZTpwfV0pfHwodT1be3R5cGU6cH1dLGg9ITApLGgmJihsLnNwbGl0KGwubWFwcGluZy5tYXAocy5wb3MpLDEsdSksY3x8cy5wYXJlbnRPZmZzZXR8fHMucGFyZW50LnR5cGU9PXB8fCFzLm5vZGUoLTEpLmNhblJlcGxhY2Uocy5pbmRleCgtMSkscy5pbmRleEFmdGVyKC0xKSxvLkZyYWdtZW50LmZyb20ocC5jcmVhdGUoKSxzLnBhcmVudCkpfHxsLnNldE5vZGVNYXJrdXAobC5tYXBwaW5nLm1hcChzLmJlZm9yZSgpKSxwKSksZShsLnNjcm9sbEludG9WaWV3KCkpfXJldHVybiEwfWZ1bmN0aW9uIGsodCxlKXtyZXR1cm4gYih0LGUmJmZ1bmN0aW9uKG4pe3ZhciByPXQuc3RvcmVkTWFya3N8fHQuc2VsZWN0aW9uLiR0by5wYXJlbnRPZmZzZXQmJnQuc2VsZWN0aW9uLiRmcm9tLm1hcmtzKCk7ciYmbi5lbnN1cmVNYXJrcyhyKSxlKG4pfSl9ZnVuY3Rpb24gUyh0LGUpe3ZhciBuLHI9dC5zZWxlY3Rpb24sbz1yLiRmcm9tLHM9ci50byxhPW8uc2hhcmVkRGVwdGgocyk7cmV0dXJuIDAhPWEmJihuPW8uYmVmb3JlKGEpLGUmJmUodC50ci5zZXRTZWxlY3Rpb24oaS5Ob2RlU2VsZWN0aW9uLmNyZWF0ZSh0LmRvYyxuKSkpLCEwKX1mdW5jdGlvbiBDKHQsZSl7cmV0dXJuIGUmJmUodC50ci5zZXRTZWxlY3Rpb24obmV3IGkuQWxsU2VsZWN0aW9uKHQuZG9jKSkpLCEwfWZ1bmN0aW9uIE8odCxlLG4pe3ZhciBvPWUubm9kZUJlZm9yZSxpPWUubm9kZUFmdGVyLHM9ZS5pbmRleCgpO3JldHVybiEhKG8mJmkmJm8udHlwZS5jb21wYXRpYmxlQ29udGVudChpLnR5cGUpKSYmKCFvLmNvbnRlbnQuc2l6ZSYmZS5wYXJlbnQuY2FuUmVwbGFjZShzLTEscyk/KG4mJm4odC50ci5kZWxldGUoZS5wb3Mtby5ub2RlU2l6ZSxlLnBvcykuc2Nyb2xsSW50b1ZpZXcoKSksITApOiEoIWUucGFyZW50LmNhblJlcGxhY2UocyxzKzEpfHwhaS5pc1RleHRibG9jayYmIXIuY2FuSm9pbih0LmRvYyxlLnBvcykpJiYobiYmbih0LnRyLmNsZWFySW5jb21wYXRpYmxlKGUucG9zLG8udHlwZSxvLmNvbnRlbnRNYXRjaEF0KG8uY2hpbGRDb3VudCkpLmpvaW4oZS5wb3MpLnNjcm9sbEludG9WaWV3KCkpLCEwKSl9ZnVuY3Rpb24gTSh0LGUsbil7dmFyIHMsYSxjPWUubm9kZUJlZm9yZSxsPWUubm9kZUFmdGVyO2lmKGMudHlwZS5zcGVjLmlzb2xhdGluZ3x8bC50eXBlLnNwZWMuaXNvbGF0aW5nKXJldHVybiExO2lmKE8odCxlLG4pKXJldHVybiEwO2lmKGUucGFyZW50LmNhblJlcGxhY2UoZS5pbmRleCgpLGUuaW5kZXgoKSsxKSYmKHM9KGE9Yy5jb250ZW50TWF0Y2hBdChjLmNoaWxkQ291bnQpKS5maW5kV3JhcHBpbmcobC50eXBlKSkmJmEubWF0Y2hUeXBlKHNbMF18fGwudHlwZSkudmFsaWRFbmQpe2lmKG4pe2Zvcih2YXIgcD1lLnBvcytsLm5vZGVTaXplLHU9by5GcmFnbWVudC5lbXB0eSxoPXMubGVuZ3RoLTE7aD49MDtoLS0pdT1vLkZyYWdtZW50LmZyb20oc1toXS5jcmVhdGUobnVsbCx1KSk7dT1vLkZyYWdtZW50LmZyb20oYy5jb3B5KHUpKTt2YXIgZj10LnRyLnN0ZXAobmV3IHIuUmVwbGFjZUFyb3VuZFN0ZXAoZS5wb3MtMSxwLGUucG9zLHAsbmV3IG8uU2xpY2UodSwxLDApLHMubGVuZ3RoLCEwKSksZD1wKzIqcy5sZW5ndGg7ci5jYW5Kb2luKGYuZG9jLGQpJiZmLmpvaW4oZCksbihmLnNjcm9sbEludG9WaWV3KCkpfXJldHVybiEwfXZhciB2PWkuU2VsZWN0aW9uLmZpbmRGcm9tKGUsMSksbT12JiZ2LiRmcm9tLmJsb2NrUmFuZ2Uodi4kdG8pLHk9bSYmci5saWZ0VGFyZ2V0KG0pO3JldHVybiBudWxsIT15JiZ5Pj1lLmRlcHRoJiYobiYmbih0LnRyLmxpZnQobSx5KS5zY3JvbGxJbnRvVmlldygpKSwhMCl9ZnVuY3Rpb24gVCh0LGUpe3JldHVybiBmdW5jdGlvbihuLG8pe3ZhciBpPW4uc2VsZWN0aW9uLHM9aS4kZnJvbSxhPWkuJHRvLGM9cy5ibG9ja1JhbmdlKGEpLGw9YyYmci5maW5kV3JhcHBpbmcoYyx0LGUpO3JldHVybiEhbCYmKG8mJm8obi50ci53cmFwKGMsbCkuc2Nyb2xsSW50b1ZpZXcoKSksITApfX1mdW5jdGlvbiBOKHQsZSl7cmV0dXJuIGZ1bmN0aW9uKG4scil7dmFyIG89bi5zZWxlY3Rpb24saT1vLmZyb20scz1vLnRvLGE9ITE7cmV0dXJuIG4uZG9jLm5vZGVzQmV0d2VlbihpLHMsKGZ1bmN0aW9uKHIsbyl7aWYoYSlyZXR1cm4hMTtpZihyLmlzVGV4dGJsb2NrJiYhci5oYXNNYXJrdXAodCxlKSlpZihyLnR5cGU9PXQpYT0hMDtlbHNle3ZhciBpPW4uZG9jLnJlc29sdmUobykscz1pLmluZGV4KCk7YT1pLnBhcmVudC5jYW5SZXBsYWNlV2l0aChzLHMrMSx0KX19KSksISFhJiYociYmcihuLnRyLnNldEJsb2NrVHlwZShpLHMsdCxlKS5zY3JvbGxJbnRvVmlldygpKSwhMCl9fWZ1bmN0aW9uIEUodCxlLG4pe2Zvcih2YXIgcj1mdW5jdGlvbihyKXt2YXIgbz1lW3JdLGk9by4kZnJvbSxzPW8uJHRvLGE9MD09aS5kZXB0aCYmdC50eXBlLmFsbG93c01hcmtUeXBlKG4pO2lmKHQubm9kZXNCZXR3ZWVuKGkucG9zLHMucG9zLChmdW5jdGlvbih0KXtpZihhKXJldHVybiExO2E9dC5pbmxpbmVDb250ZW50JiZ0LnR5cGUuYWxsb3dzTWFya1R5cGUobil9KSksYSlyZXR1cm57djohMH19LG89MDtvPGUubGVuZ3RoO28rKyl7dmFyIGk9cihvKTtpZihpKXJldHVybiBpLnZ9cmV0dXJuITF9ZnVuY3Rpb24gQSh0LGUpe3JldHVybiBmdW5jdGlvbihuLHIpe3ZhciBvPW4uc2VsZWN0aW9uLGk9by5lbXB0eSxzPW8uJGN1cnNvcixhPW8ucmFuZ2VzO2lmKGkmJiFzfHwhRShuLmRvYyxhLHQpKXJldHVybiExO2lmKHIpaWYocyl0LmlzSW5TZXQobi5zdG9yZWRNYXJrc3x8cy5tYXJrcygpKT9yKG4udHIucmVtb3ZlU3RvcmVkTWFyayh0KSk6cihuLnRyLmFkZFN0b3JlZE1hcmsodC5jcmVhdGUoZSkpKTtlbHNle2Zvcih2YXIgYz0hMSxsPW4udHIscD0wOyFjJiZwPGEubGVuZ3RoO3ArKyl7dmFyIHU9YVtwXSxoPXUuJGZyb20sZj11LiR0bztjPW4uZG9jLnJhbmdlSGFzTWFyayhoLnBvcyxmLnBvcyx0KX1mb3IodmFyIGQ9MDtkPGEubGVuZ3RoO2QrKyl7dmFyIHY9YVtkXSxtPXYuJGZyb20seT12LiR0bztjP2wucmVtb3ZlTWFyayhtLnBvcyx5LnBvcyx0KTpsLmFkZE1hcmsobS5wb3MseS5wb3MsdC5jcmVhdGUoZSkpfXIobC5zY3JvbGxJbnRvVmlldygpKX1yZXR1cm4hMH19ZnVuY3Rpb24gUih0LGUpe3JldHVybiBmdW5jdGlvbihuKXtpZighbi5pc0dlbmVyaWMpcmV0dXJuIHQobik7Zm9yKHZhciBvPVtdLGk9MDtpPG4ubWFwcGluZy5tYXBzLmxlbmd0aDtpKyspe2Zvcih2YXIgcz1uLm1hcHBpbmcubWFwc1tpXSxhPTA7YTxvLmxlbmd0aDthKyspb1thXT1zLm1hcChvW2FdKTtzLmZvckVhY2goKGZ1bmN0aW9uKHQsZSxuLHIpe3JldHVybiBvLnB1c2gobixyKX0pKX1mb3IodmFyIGM9W10sbD0wO2w8by5sZW5ndGg7bCs9Milmb3IodmFyIHA9b1tsXSx1PW9bbCsxXSxoPW4uZG9jLnJlc29sdmUocCksZj1oLnNoYXJlZERlcHRoKHUpLGQ9aC5ub2RlKGYpLHY9aC5pbmRleEFmdGVyKGYpLG09aC5hZnRlcihmKzEpO208PXU7Kyt2KXt2YXIgeT1kLm1heWJlQ2hpbGQodik7aWYoIXkpYnJlYWs7aWYodiYmLTE9PWMuaW5kZXhPZihtKSl7dmFyIGc9ZC5jaGlsZCh2LTEpO2cudHlwZT09eS50eXBlJiZlKGcseSkmJmMucHVzaChtKX1tKz15Lm5vZGVTaXplfWMuc29ydCgoZnVuY3Rpb24odCxlKXtyZXR1cm4gdC1lfSkpO2Zvcih2YXIgdz1jLmxlbmd0aC0xO3c+PTA7dy0tKXIuY2FuSm9pbihuLmRvYyxjW3ddKSYmbi5qb2luKGNbd10pO3Qobil9fWZ1bmN0aW9uIEQodCxlKXtpZihBcnJheS5pc0FycmF5KGUpKXt2YXIgbj1lO2U9ZnVuY3Rpb24odCl7cmV0dXJuIG4uaW5kZXhPZih0LnR5cGUubmFtZSk+LTF9fXJldHVybiBmdW5jdGlvbihuLHIpe3JldHVybiB0KG4sciYmUihyLGUpKX19ZnVuY3Rpb24geigpe3ZhciB0PVtdLGU9YXJndW1lbnRzLmxlbmd0aDt3aGlsZShlLS0pdFtlXT1hcmd1bWVudHNbZV07cmV0dXJuIGZ1bmN0aW9uKGUsbixyKXtmb3IodmFyIG89MDtvPHQubGVuZ3RoO28rKylpZih0W29dKGUsbixyKSlyZXR1cm4hMDtyZXR1cm4hMX19dmFyIFA9eihzLGEsbCksST16KHMsdSxoKSxfPXtFbnRlcjp6KHksdyx4LGIpLCJNb2QtRW50ZXIiOmcsQmFja3NwYWNlOlAsIk1vZC1CYWNrc3BhY2UiOlAsRGVsZXRlOkksIk1vZC1EZWxldGUiOkksIk1vZC1hIjpDfSxGPXsiQ3RybC1oIjpfWyJCYWNrc3BhY2UiXSwiQWx0LUJhY2tzcGFjZSI6X1siTW9kLUJhY2tzcGFjZSJdLCJDdHJsLWQiOl9bIkRlbGV0ZSJdLCJDdHJsLUFsdC1CYWNrc3BhY2UiOl9bIk1vZC1EZWxldGUiXSwiQWx0LURlbGV0ZSI6X1siTW9kLURlbGV0ZSJdLCJBbHQtZCI6X1siTW9kLURlbGV0ZSJdfTtmb3IodmFyIEIgaW4gXylGW0JdPV9bQl07dmFyIGo9InVuZGVmaW5lZCIhPXR5cGVvZiBuYXZpZ2F0b3I/L01hYy8udGVzdChuYXZpZ2F0b3IucGxhdGZvcm0pOiJ1bmRlZmluZWQiIT10eXBlb2Ygb3MmJiJkYXJ3aW4iPT1vcy5wbGF0Zm9ybSgpLCQ9aj9GOl87ZS5kZWxldGVTZWxlY3Rpb249cyxlLmpvaW5CYWNrd2FyZD1hLGUuc2VsZWN0Tm9kZUJhY2t3YXJkPWwsZS5qb2luRm9yd2FyZD11LGUuc2VsZWN0Tm9kZUZvcndhcmQ9aCxlLmpvaW5VcD1kLGUuam9pbkRvd249dixlLmxpZnQ9bSxlLm5ld2xpbmVJbkNvZGU9eSxlLmV4aXRDb2RlPWcsZS5jcmVhdGVQYXJhZ3JhcGhOZWFyPXcsZS5saWZ0RW1wdHlCbG9jaz14LGUuc3BsaXRCbG9jaz1iLGUuc3BsaXRCbG9ja0tlZXBNYXJrcz1rLGUuc2VsZWN0UGFyZW50Tm9kZT1TLGUuc2VsZWN0QWxsPUMsZS53cmFwSW49VCxlLnNldEJsb2NrVHlwZT1OLGUudG9nZ2xlTWFyaz1BLGUuYXV0b0pvaW49RCxlLmNoYWluQ29tbWFuZHM9eixlLnBjQmFzZUtleW1hcD1fLGUubWFjQmFzZUtleW1hcD1GLGUuYmFzZUtleW1hcD0kfSxmYzg4OmZ1bmN0aW9uKHQsZSxuKXsidXNlIHN0cmljdCI7T2JqZWN0LmRlZmluZVByb3BlcnR5KGUsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pO3ZhciByLG8saT1uKCI2ZmZiIikscz1uKCI3MDNmIiksYT1uKCI2ZjI3IiksYz1uKCJiOTIzIiksbD1uKCI1NmVjIik7aWYoInVuZGVmaW5lZCIhPXR5cGVvZiBXZWFrTWFwKXt2YXIgcD1uZXcgV2Vha01hcDtyPWZ1bmN0aW9uKHQpe3JldHVybiBwLmdldCh0KX0sbz1mdW5jdGlvbih0LGUpe3JldHVybiBwLnNldCh0LGUpLGV9fWVsc2V7dmFyIHU9W10saD0xMCxmPTA7cj1mdW5jdGlvbih0KXtmb3IodmFyIGU9MDtlPHUubGVuZ3RoO2UrPTIpaWYodVtlXT09dClyZXR1cm4gdVtlKzFdfSxvPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIGY9PWgmJihmPTApLHVbZisrXT10LHVbZisrXT1lfX12YXIgZD1mdW5jdGlvbih0LGUsbixyKXt0aGlzLmxlZnQ9dCx0aGlzLnRvcD1lLHRoaXMucmlnaHQ9bix0aGlzLmJvdHRvbT1yfSx2PWZ1bmN0aW9uKHQsZSxuLHIpe3RoaXMud2lkdGg9dCx0aGlzLmhlaWdodD1lLHRoaXMubWFwPW4sdGhpcy5wcm9ibGVtcz1yfTtmdW5jdGlvbiBtKHQpe2lmKCJ0YWJsZSIhPXQudHlwZS5zcGVjLnRhYmxlUm9sZSl0aHJvdyBuZXcgUmFuZ2VFcnJvcigiTm90IGEgdGFibGUgbm9kZTogIit0LnR5cGUubmFtZSk7Zm9yKHZhciBlPXkodCksbj10LmNoaWxkQ291bnQscj1bXSxvPTAsaT1udWxsLHM9W10sYT0wLGM9ZSpuO2E8YzthKyspclthXT0wO2Zvcih2YXIgbD0wLHA9MDtsPG47bCsrKXt2YXIgdT10LmNoaWxkKGwpO3ArKztmb3IodmFyIGg9MDs7aCsrKXt3aGlsZShvPHIubGVuZ3RoJiYwIT1yW29dKW8rKztpZihoPT11LmNoaWxkQ291bnQpYnJlYWs7Zm9yKHZhciBmPXUuY2hpbGQoaCksZD1mLmF0dHJzLG09ZC5jb2xzcGFuLHc9ZC5yb3dzcGFuLHg9ZC5jb2x3aWR0aCxiPTA7Yjx3O2IrKyl7aWYoYitsPj1uKXsoaXx8KGk9W10pKS5wdXNoKHt0eXBlOiJvdmVybG9uZ19yb3dzcGFuIixwb3M6cCxuOnctYn0pO2JyZWFrfWZvcih2YXIgaz1vK2IqZSxTPTA7UzxtO1MrKyl7MD09cltrK1NdP3JbaytTXT1wOihpfHwoaT1bXSkpLnB1c2goe3R5cGU6ImNvbGxpc2lvbiIscm93OmwscG9zOnAsbjptLVN9KTt2YXIgQz14JiZ4W1NdO2lmKEMpe3ZhciBPPShrK1MpJWUqMixNPXNbT107bnVsbD09TXx8TSE9QyYmMT09c1tPKzFdPyhzW09dPUMsc1tPKzFdPTEpOk09PUMmJnNbTysxXSsrfX19bys9bSxwKz1mLm5vZGVTaXplfXZhciBUPShsKzEpKmUsTj0wO3doaWxlKG88VCkwPT1yW28rK10mJk4rKztOJiYoaXx8KGk9W10pKS5wdXNoKHt0eXBlOiJtaXNzaW5nIixyb3c6bCxuOk59KSxwKyt9Zm9yKHZhciBFPW5ldyB2KGUsbixyLGkpLEE9ITEsUj0wOyFBJiZSPHMubGVuZ3RoO1IrPTIpbnVsbCE9c1tSXSYmc1tSKzFdPG4mJihBPSEwKTtyZXR1cm4gQSYmZyhFLHMsdCksRX1mdW5jdGlvbiB5KHQpe2Zvcih2YXIgZT0tMSxuPSExLHI9MDtyPHQuY2hpbGRDb3VudDtyKyspe3ZhciBvPXQuY2hpbGQociksaT0wO2lmKG4pZm9yKHZhciBzPTA7czxyO3MrKylmb3IodmFyIGE9dC5jaGlsZChzKSxjPTA7YzxhLmNoaWxkQ291bnQ7YysrKXt2YXIgbD1hLmNoaWxkKGMpO3MrbC5hdHRycy5yb3dzcGFuPnImJihpKz1sLmF0dHJzLmNvbHNwYW4pfWZvcih2YXIgcD0wO3A8by5jaGlsZENvdW50O3ArKyl7dmFyIHU9by5jaGlsZChwKTtpKz11LmF0dHJzLmNvbHNwYW4sdS5hdHRycy5yb3dzcGFuPjEmJihuPSEwKX0tMT09ZT9lPWk6ZSE9aSYmKGU9TWF0aC5tYXgoZSxpKSl9cmV0dXJuIGV9ZnVuY3Rpb24gZyh0LGUsbil7dC5wcm9ibGVtc3x8KHQucHJvYmxlbXM9W10pO2Zvcih2YXIgcj0wLG89e307cjx0Lm1hcC5sZW5ndGg7cisrKXt2YXIgaT10Lm1hcFtyXTtpZighb1tpXSl7b1tpXT0hMDtmb3IodmFyIHM9bi5ub2RlQXQoaSksYT1udWxsLGM9MDtjPHMuYXR0cnMuY29sc3BhbjtjKyspe3ZhciBsPShyK2MpJXQud2lkdGgscD1lWzIqbF07bnVsbD09cHx8cy5hdHRycy5jb2x3aWR0aCYmcy5hdHRycy5jb2x3aWR0aFtjXT09cHx8KChhfHwoYT13KHMuYXR0cnMpKSlbY109cCl9YSYmdC5wcm9ibGVtcy51bnNoaWZ0KHt0eXBlOiJjb2x3aWR0aCBtaXNtYXRjaCIscG9zOmksY29sd2lkdGg6YX0pfX19ZnVuY3Rpb24gdyh0KXtpZih0LmNvbHdpZHRoKXJldHVybiB0LmNvbHdpZHRoLnNsaWNlKCk7Zm9yKHZhciBlPVtdLG49MDtuPHQuY29sc3BhbjtuKyspZS5wdXNoKDApO3JldHVybiBlfXYucHJvdG90eXBlLmZpbmRDZWxsPWZ1bmN0aW9uKHQpe2Zvcih2YXIgZT10aGlzLG49MDtuPHRoaXMubWFwLmxlbmd0aDtuKyspe3ZhciByPWUubWFwW25dO2lmKHI9PXQpe2Zvcih2YXIgbz1uJWUud2lkdGgsaT1uL2Uud2lkdGh8MCxzPW8rMSxhPWkrMSxjPTE7czx0aGlzLndpZHRoJiZ0aGlzLm1hcFtuK2NdPT1yO2MrKylzKys7Zm9yKHZhciBsPTE7YTx0aGlzLmhlaWdodCYmdGhpcy5tYXBbbit0aGlzLndpZHRoKmxdPT1yO2wrKylhKys7cmV0dXJuIG5ldyBkKG8saSxzLGEpfX10aHJvdyBuZXcgUmFuZ2VFcnJvcigiTm8gY2VsbCB3aXRoIG9mZnNldCAiK3QrIiBmb3VuZCIpfSx2LnByb3RvdHlwZS5jb2xDb3VudD1mdW5jdGlvbih0KXtmb3IodmFyIGU9dGhpcyxuPTA7bjx0aGlzLm1hcC5sZW5ndGg7bisrKWlmKGUubWFwW25dPT10KXJldHVybiBuJWUud2lkdGg7dGhyb3cgbmV3IFJhbmdlRXJyb3IoIk5vIGNlbGwgd2l0aCBvZmZzZXQgIit0KyIgZm91bmQiKX0sdi5wcm90b3R5cGUubmV4dENlbGw9ZnVuY3Rpb24odCxlLG4pe3ZhciByPXRoaXMuZmluZENlbGwodCksbz1yLmxlZnQsaT1yLnJpZ2h0LHM9ci50b3AsYT1yLmJvdHRvbTtyZXR1cm4iaG9yaXoiPT1lPyhuPDA/MD09bzppPT10aGlzLndpZHRoKT9udWxsOnRoaXMubWFwW3MqdGhpcy53aWR0aCsobjwwP28tMTppKV06KG48MD8wPT1zOmE9PXRoaXMuaGVpZ2h0KT9udWxsOnRoaXMubWFwW28rdGhpcy53aWR0aCoobjwwP3MtMTphKV19LHYucHJvdG90eXBlLnJlY3RCZXR3ZWVuPWZ1bmN0aW9uKHQsZSl7dmFyIG49dGhpcy5maW5kQ2VsbCh0KSxyPW4ubGVmdCxvPW4ucmlnaHQsaT1uLnRvcCxzPW4uYm90dG9tLGE9dGhpcy5maW5kQ2VsbChlKSxjPWEubGVmdCxsPWEucmlnaHQscD1hLnRvcCx1PWEuYm90dG9tO3JldHVybiBuZXcgZChNYXRoLm1pbihyLGMpLE1hdGgubWluKGkscCksTWF0aC5tYXgobyxsKSxNYXRoLm1heChzLHUpKX0sdi5wcm90b3R5cGUuY2VsbHNJblJlY3Q9ZnVuY3Rpb24odCl7Zm9yKHZhciBlPXRoaXMsbj1bXSxyPXt9LG89dC50b3A7bzx0LmJvdHRvbTtvKyspZm9yKHZhciBpPXQubGVmdDtpPHQucmlnaHQ7aSsrKXt2YXIgcz1vKmUud2lkdGgraSxhPWUubWFwW3NdO3JbYV18fChyW2FdPSEwLGk9PXQubGVmdCYmaSYmZS5tYXBbcy0xXT09YXx8bz09dC50b3AmJm8mJmUubWFwW3MtZS53aWR0aF09PWF8fG4ucHVzaChhKSl9cmV0dXJuIG59LHYucHJvdG90eXBlLnBvc2l0aW9uQXQ9ZnVuY3Rpb24odCxlLG4pe2Zvcih2YXIgcj10aGlzLG89MCxpPTA7O28rKyl7dmFyIHM9aStuLmNoaWxkKG8pLm5vZGVTaXplO2lmKG89PXQpe3ZhciBhPWUrdCpyLndpZHRoLGM9KHQrMSkqci53aWR0aDt3aGlsZShhPGMmJnRoaXMubWFwW2FdPGkpYSsrO3JldHVybiBhPT1jP3MtMTpyLm1hcFthXX1pPXN9fSx2LmdldD1mdW5jdGlvbih0KXtyZXR1cm4gcih0KXx8byh0LG0odCkpfTt2YXIgeD1uZXcgaS5QbHVnaW5LZXkoInNlbGVjdGluZ0NlbGxzIik7ZnVuY3Rpb24gYih0KXtmb3IodmFyIGU9dC5kZXB0aC0xO2U+MDtlLS0paWYoInJvdyI9PXQubm9kZShlKS50eXBlLnNwZWMudGFibGVSb2xlKXJldHVybiB0Lm5vZGUoMCkucmVzb2x2ZSh0LmJlZm9yZShlKzEpKTtyZXR1cm4gbnVsbH1mdW5jdGlvbiBrKHQpe2Zvcih2YXIgZT10LmRlcHRoO2U+MDtlLS0pe3ZhciBuPXQubm9kZShlKS50eXBlLnNwZWMudGFibGVSb2xlO2lmKCJjZWxsIj09PW58fCJoZWFkZXJfY2VsbCI9PT1uKXJldHVybiB0Lm5vZGUoZSl9cmV0dXJuIG51bGx9ZnVuY3Rpb24gUyh0KXtmb3IodmFyIGU9dC5zZWxlY3Rpb24uJGhlYWQsbj1lLmRlcHRoO24+MDtuLS0paWYoInJvdyI9PWUubm9kZShuKS50eXBlLnNwZWMudGFibGVSb2xlKXJldHVybiEwO3JldHVybiExfWZ1bmN0aW9uIEModCl7dmFyIGU9dC5zZWxlY3Rpb247cmV0dXJuIGUuJGFuY2hvckNlbGw/ZS4kYW5jaG9yQ2VsbC5wb3M+ZS4kaGVhZENlbGwucG9zP2UuJGFuY2hvckNlbGw6ZS4kaGVhZENlbGw6ZS5ub2RlJiYiY2VsbCI9PWUubm9kZS50eXBlLnNwZWMudGFibGVSb2xlP2UuJGFuY2hvcjpiKGUuJGhlYWQpfHxPKGUuJGhlYWQpfWZ1bmN0aW9uIE8odCl7Zm9yKHZhciBlPXQubm9kZUFmdGVyLG49dC5wb3M7ZTtlPWUuZmlyc3RDaGlsZCxuKyspe3ZhciByPWUudHlwZS5zcGVjLnRhYmxlUm9sZTtpZigiY2VsbCI9PXJ8fCJoZWFkZXJfY2VsbCI9PXIpcmV0dXJuIHQuZG9jLnJlc29sdmUobil9Zm9yKHZhciBvPXQubm9kZUJlZm9yZSxpPXQucG9zO287bz1vLmxhc3RDaGlsZCxpLS0pe3ZhciBzPW8udHlwZS5zcGVjLnRhYmxlUm9sZTtpZigiY2VsbCI9PXN8fCJoZWFkZXJfY2VsbCI9PXMpcmV0dXJuIHQuZG9jLnJlc29sdmUoaS1vLm5vZGVTaXplKX19ZnVuY3Rpb24gTSh0KXtyZXR1cm4icm93Ij09dC5wYXJlbnQudHlwZS5zcGVjLnRhYmxlUm9sZSYmdC5ub2RlQWZ0ZXJ9ZnVuY3Rpb24gVCh0KXtyZXR1cm4gdC5ub2RlKDApLnJlc29sdmUodC5wb3MrdC5ub2RlQWZ0ZXIubm9kZVNpemUpfWZ1bmN0aW9uIE4odCxlKXtyZXR1cm4gdC5kZXB0aD09ZS5kZXB0aCYmdC5wb3M+PWUuc3RhcnQoLTEpJiZ0LnBvczw9ZS5lbmQoLTEpfWZ1bmN0aW9uIEUodCl7cmV0dXJuIHYuZ2V0KHQubm9kZSgtMSkpLmZpbmRDZWxsKHQucG9zLXQuc3RhcnQoLTEpKX1mdW5jdGlvbiBBKHQpe3JldHVybiB2LmdldCh0Lm5vZGUoLTEpKS5jb2xDb3VudCh0LnBvcy10LnN0YXJ0KC0xKSl9ZnVuY3Rpb24gUih0LGUsbil7dmFyIHI9dC5zdGFydCgtMSksbz12LmdldCh0Lm5vZGUoLTEpKSxpPW8ubmV4dENlbGwodC5wb3MtcixlLG4pO3JldHVybiBudWxsPT1pP251bGw6dC5ub2RlKDApLnJlc29sdmUocitpKX1mdW5jdGlvbiBEKHQsZSxuKXt2YXIgcj17fTtmb3IodmFyIG8gaW4gdClyW29dPXRbb107cmV0dXJuIHJbZV09bixyfWZ1bmN0aW9uIHoodCxlLG4pe3ZvaWQgMD09PW4mJihuPTEpO3ZhciByPUQodCwiY29sc3BhbiIsdC5jb2xzcGFuLW4pO3JldHVybiByLmNvbHdpZHRoJiYoci5jb2x3aWR0aD1yLmNvbHdpZHRoLnNsaWNlKCksci5jb2x3aWR0aC5zcGxpY2UoZSxuKSxyLmNvbHdpZHRoLnNvbWUoKGZ1bmN0aW9uKHQpe3JldHVybiB0PjB9KSl8fChyLmNvbHdpZHRoPW51bGwpKSxyfWZ1bmN0aW9uIFAodCxlLG4pe3ZvaWQgMD09PW4mJihuPTEpO3ZhciByPUQodCwiY29sc3BhbiIsdC5jb2xzcGFuK24pO2lmKHIuY29sd2lkdGgpe3IuY29sd2lkdGg9ci5jb2x3aWR0aC5zbGljZSgpO2Zvcih2YXIgbz0wO288bjtvKyspci5jb2x3aWR0aC5zcGxpY2UoZSwwLDApfXJldHVybiByfXZhciBJPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoZSxuKXt2b2lkIDA9PT1uJiYobj1lKTt2YXIgcj1lLm5vZGUoLTEpLG89di5nZXQocikscz1lLnN0YXJ0KC0xKSxhPW8ucmVjdEJldHdlZW4oZS5wb3MtcyxuLnBvcy1zKSxjPWUubm9kZSgwKSxsPW8uY2VsbHNJblJlY3QoYSkuZmlsdGVyKChmdW5jdGlvbih0KXtyZXR1cm4gdCE9bi5wb3Mtc30pKTtsLnVuc2hpZnQobi5wb3Mtcyk7dmFyIHA9bC5tYXAoKGZ1bmN0aW9uKHQpe3ZhciBlPXIubm9kZUF0KHQpLG49dCtzKzE7cmV0dXJuIG5ldyBpLlNlbGVjdGlvblJhbmdlKGMucmVzb2x2ZShuKSxjLnJlc29sdmUobitlLmNvbnRlbnQuc2l6ZSkpfSkpO3QuY2FsbCh0aGlzLHBbMF0uJGZyb20scFswXS4kdG8scCksdGhpcy4kYW5jaG9yQ2VsbD1lLHRoaXMuJGhlYWRDZWxsPW59cmV0dXJuIHQmJihlLl9fcHJvdG9fXz10KSxlLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKHQmJnQucHJvdG90eXBlKSxlLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1lLGUucHJvdG90eXBlLm1hcD1mdW5jdGlvbih0LG4pe3ZhciByPXQucmVzb2x2ZShuLm1hcCh0aGlzLiRhbmNob3JDZWxsLnBvcykpLG89dC5yZXNvbHZlKG4ubWFwKHRoaXMuJGhlYWRDZWxsLnBvcykpO2lmKE0ocikmJk0obykmJk4ocixvKSl7dmFyIHM9dGhpcy4kYW5jaG9yQ2VsbC5ub2RlKC0xKSE9ci5ub2RlKC0xKTtyZXR1cm4gcyYmdGhpcy5pc1Jvd1NlbGVjdGlvbigpP2Uucm93U2VsZWN0aW9uKHIsbyk6cyYmdGhpcy5pc0NvbFNlbGVjdGlvbigpP2UuY29sU2VsZWN0aW9uKHIsbyk6bmV3IGUocixvKX1yZXR1cm4gaS5UZXh0U2VsZWN0aW9uLmJldHdlZW4ocixvKX0sZS5wcm90b3R5cGUuY29udGVudD1mdW5jdGlvbigpe2Zvcih2YXIgdD10aGlzLiRhbmNob3JDZWxsLm5vZGUoLTEpLGU9di5nZXQodCksbj10aGlzLiRhbmNob3JDZWxsLnN0YXJ0KC0xKSxyPWUucmVjdEJldHdlZW4odGhpcy4kYW5jaG9yQ2VsbC5wb3Mtbix0aGlzLiRoZWFkQ2VsbC5wb3Mtbiksbz17fSxpPVtdLHM9ci50b3A7czxyLmJvdHRvbTtzKyspe2Zvcih2YXIgYz1bXSxsPXMqZS53aWR0aCtyLmxlZnQscD1yLmxlZnQ7cDxyLnJpZ2h0O3ArKyxsKyspe3ZhciB1PWUubWFwW2xdO2lmKCFvW3VdKXtvW3VdPSEwO3ZhciBoPWUuZmluZENlbGwodSksZj10Lm5vZGVBdCh1KSxkPXIubGVmdC1oLmxlZnQsbT1oLnJpZ2h0LXIucmlnaHQ7aWYoZD4wfHxtPjApe3ZhciB5PWYuYXR0cnM7ZD4wJiYoeT16KHksMCxkKSksbT4wJiYoeT16KHkseS5jb2xzcGFuLW0sbSkpLGY9aC5sZWZ0PHIubGVmdD9mLnR5cGUuY3JlYXRlQW5kRmlsbCh5KTpmLnR5cGUuY3JlYXRlKHksZi5jb250ZW50KX1pZihoLnRvcDxyLnRvcHx8aC5ib3R0b20+ci5ib3R0b20pe3ZhciBnPUQoZi5hdHRycywicm93c3BhbiIsTWF0aC5taW4oaC5ib3R0b20sci5ib3R0b20pLU1hdGgubWF4KGgudG9wLHIudG9wKSk7Zj1oLnRvcDxyLnRvcD9mLnR5cGUuY3JlYXRlQW5kRmlsbChnKTpmLnR5cGUuY3JlYXRlKGcsZi5jb250ZW50KX1jLnB1c2goZil9fWkucHVzaCh0LmNoaWxkKHMpLmNvcHkoYS5GcmFnbWVudC5mcm9tKGMpKSl9dmFyIHc9dGhpcy5pc0NvbFNlbGVjdGlvbigpJiZ0aGlzLmlzUm93U2VsZWN0aW9uKCk/dDppO3JldHVybiBuZXcgYS5TbGljZShhLkZyYWdtZW50LmZyb20odyksMSwxKX0sZS5wcm90b3R5cGUucmVwbGFjZT1mdW5jdGlvbihlLG4pe3ZvaWQgMD09PW4mJihuPWEuU2xpY2UuZW1wdHkpO2Zvcih2YXIgcj1lLnN0ZXBzLmxlbmd0aCxvPXRoaXMucmFuZ2VzLGk9MDtpPG8ubGVuZ3RoO2krKyl7dmFyIHM9b1tpXSxjPXMuJGZyb20sbD1zLiR0byxwPWUubWFwcGluZy5zbGljZShyKTtlLnJlcGxhY2UocC5tYXAoYy5wb3MpLHAubWFwKGwucG9zKSxpP2EuU2xpY2UuZW1wdHk6bil9dmFyIHU9dC5maW5kRnJvbShlLmRvYy5yZXNvbHZlKGUubWFwcGluZy5zbGljZShyKS5tYXAodGhpcy50bykpLC0xKTt1JiZlLnNldFNlbGVjdGlvbih1KX0sZS5wcm90b3R5cGUucmVwbGFjZVdpdGg9ZnVuY3Rpb24odCxlKXt0aGlzLnJlcGxhY2UodCxuZXcgYS5TbGljZShhLkZyYWdtZW50LmZyb20oZSksMCwwKSl9LGUucHJvdG90eXBlLmZvckVhY2hDZWxsPWZ1bmN0aW9uKHQpe2Zvcih2YXIgZT10aGlzLiRhbmNob3JDZWxsLm5vZGUoLTEpLG49di5nZXQoZSkscj10aGlzLiRhbmNob3JDZWxsLnN0YXJ0KC0xKSxvPW4uY2VsbHNJblJlY3Qobi5yZWN0QmV0d2Vlbih0aGlzLiRhbmNob3JDZWxsLnBvcy1yLHRoaXMuJGhlYWRDZWxsLnBvcy1yKSksaT0wO2k8by5sZW5ndGg7aSsrKXQoZS5ub2RlQXQob1tpXSkscitvW2ldKX0sZS5wcm90b3R5cGUuaXNDb2xTZWxlY3Rpb249ZnVuY3Rpb24oKXt2YXIgdD10aGlzLiRhbmNob3JDZWxsLmluZGV4KC0xKSxlPXRoaXMuJGhlYWRDZWxsLmluZGV4KC0xKTtpZihNYXRoLm1pbih0LGUpPjApcmV0dXJuITE7dmFyIG49dCt0aGlzLiRhbmNob3JDZWxsLm5vZGVBZnRlci5hdHRycy5yb3dzcGFuLHI9ZSt0aGlzLiRoZWFkQ2VsbC5ub2RlQWZ0ZXIuYXR0cnMucm93c3BhbjtyZXR1cm4gTWF0aC5tYXgobixyKT09dGhpcy4kaGVhZENlbGwubm9kZSgtMSkuY2hpbGRDb3VudH0sZS5jb2xTZWxlY3Rpb249ZnVuY3Rpb24odCxuKXt2b2lkIDA9PT1uJiYobj10KTt2YXIgcj12LmdldCh0Lm5vZGUoLTEpKSxvPXQuc3RhcnQoLTEpLGk9ci5maW5kQ2VsbCh0LnBvcy1vKSxzPXIuZmluZENlbGwobi5wb3MtbyksYT10Lm5vZGUoMCk7cmV0dXJuIGkudG9wPD1zLnRvcD8oaS50b3A+MCYmKHQ9YS5yZXNvbHZlKG8rci5tYXBbaS5sZWZ0XSkpLHMuYm90dG9tPHIuaGVpZ2h0JiYobj1hLnJlc29sdmUobytyLm1hcFtyLndpZHRoKihyLmhlaWdodC0xKStzLnJpZ2h0LTFdKSkpOihzLnRvcD4wJiYobj1hLnJlc29sdmUobytyLm1hcFtzLmxlZnRdKSksaS5ib3R0b208ci5oZWlnaHQmJih0PWEucmVzb2x2ZShvK3IubWFwW3Iud2lkdGgqKHIuaGVpZ2h0LTEpK2kucmlnaHQtMV0pKSksbmV3IGUodCxuKX0sZS5wcm90b3R5cGUuaXNSb3dTZWxlY3Rpb249ZnVuY3Rpb24oKXt2YXIgdD12LmdldCh0aGlzLiRhbmNob3JDZWxsLm5vZGUoLTEpKSxlPXRoaXMuJGFuY2hvckNlbGwuc3RhcnQoLTEpLG49dC5jb2xDb3VudCh0aGlzLiRhbmNob3JDZWxsLnBvcy1lKSxyPXQuY29sQ291bnQodGhpcy4kaGVhZENlbGwucG9zLWUpO2lmKE1hdGgubWluKG4scik+MClyZXR1cm4hMTt2YXIgbz1uK3RoaXMuJGFuY2hvckNlbGwubm9kZUFmdGVyLmF0dHJzLmNvbHNwYW4saT1yK3RoaXMuJGhlYWRDZWxsLm5vZGVBZnRlci5hdHRycy5jb2xzcGFuO3JldHVybiBNYXRoLm1heChvLGkpPT10LndpZHRofSxlLnByb3RvdHlwZS5lcT1mdW5jdGlvbih0KXtyZXR1cm4gdCBpbnN0YW5jZW9mIGUmJnQuJGFuY2hvckNlbGwucG9zPT10aGlzLiRhbmNob3JDZWxsLnBvcyYmdC4kaGVhZENlbGwucG9zPT10aGlzLiRoZWFkQ2VsbC5wb3N9LGUucm93U2VsZWN0aW9uPWZ1bmN0aW9uKHQsbil7dm9pZCAwPT09biYmKG49dCk7dmFyIHI9di5nZXQodC5ub2RlKC0xKSksbz10LnN0YXJ0KC0xKSxpPXIuZmluZENlbGwodC5wb3Mtbykscz1yLmZpbmRDZWxsKG4ucG9zLW8pLGE9dC5ub2RlKDApO3JldHVybiBpLmxlZnQ8PXMubGVmdD8oaS5sZWZ0PjAmJih0PWEucmVzb2x2ZShvK3IubWFwW2kudG9wKnIud2lkdGhdKSkscy5yaWdodDxyLndpZHRoJiYobj1hLnJlc29sdmUobytyLm1hcFtyLndpZHRoKihzLnRvcCsxKS0xXSkpKToocy5sZWZ0PjAmJihuPWEucmVzb2x2ZShvK3IubWFwW3MudG9wKnIud2lkdGhdKSksaS5yaWdodDxyLndpZHRoJiYodD1hLnJlc29sdmUobytyLm1hcFtyLndpZHRoKihpLnRvcCsxKS0xXSkpKSxuZXcgZSh0LG4pfSxlLnByb3RvdHlwZS50b0pTT049ZnVuY3Rpb24oKXtyZXR1cm57dHlwZToiY2VsbCIsYW5jaG9yOnRoaXMuJGFuY2hvckNlbGwucG9zLGhlYWQ6dGhpcy4kaGVhZENlbGwucG9zfX0sZS5mcm9tSlNPTj1mdW5jdGlvbih0LG4pe3JldHVybiBuZXcgZSh0LnJlc29sdmUobi5hbmNob3IpLHQucmVzb2x2ZShuLmhlYWQpKX0sZS5jcmVhdGU9ZnVuY3Rpb24odCxuLHIpe3JldHVybiB2b2lkIDA9PT1yJiYocj1uKSxuZXcgZSh0LnJlc29sdmUobiksdC5yZXNvbHZlKHIpKX0sZS5wcm90b3R5cGUuZ2V0Qm9va21hcms9ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IF8odGhpcy4kYW5jaG9yQ2VsbC5wb3MsdGhpcy4kaGVhZENlbGwucG9zKX0sZX0oaS5TZWxlY3Rpb24pO0kucHJvdG90eXBlLnZpc2libGU9ITEsaS5TZWxlY3Rpb24uanNvbklEKCJjZWxsIixJKTt2YXIgXz1mdW5jdGlvbih0LGUpe3RoaXMuYW5jaG9yPXQsdGhpcy5oZWFkPWV9O2Z1bmN0aW9uIEYodCl7aWYoISh0LnNlbGVjdGlvbiBpbnN0YW5jZW9mIEkpKXJldHVybiBudWxsO3ZhciBlPVtdO3JldHVybiB0LnNlbGVjdGlvbi5mb3JFYWNoQ2VsbCgoZnVuY3Rpb24odCxuKXtlLnB1c2gocy5EZWNvcmF0aW9uLm5vZGUobixuK3Qubm9kZVNpemUse2NsYXNzOiJzZWxlY3RlZENlbGwifSkpfSkpLHMuRGVjb3JhdGlvblNldC5jcmVhdGUodC5kb2MsZSl9ZnVuY3Rpb24gQih0KXt2YXIgZT10LiRmcm9tLG49dC4kdG87aWYoZS5wb3M9PW4ucG9zfHxlLnBvczxlLnBvcy02KXJldHVybiExO2Zvcih2YXIgcj1lLnBvcyxvPW4ucG9zLGk9ZS5kZXB0aDtpPj0wO2ktLSxyKyspaWYoZS5hZnRlcihpKzEpPGUuZW5kKGkpKWJyZWFrO2Zvcih2YXIgcz1uLmRlcHRoO3M+PTA7cy0tLG8tLSlpZihuLmJlZm9yZShzKzEpPm4uc3RhcnQocykpYnJlYWs7cmV0dXJuIHI9PW8mJi9yb3d8dGFibGUvLnRlc3QoZS5ub2RlKGkpLnR5cGUuc3BlYy50YWJsZVJvbGUpfWZ1bmN0aW9uIGoodCl7Zm9yKHZhciBlLG4scj10LiRmcm9tLG89dC4kdG8saT1yLmRlcHRoO2k+MDtpLS0pe3ZhciBzPXIubm9kZShpKTtpZigiY2VsbCI9PT1zLnR5cGUuc3BlYy50YWJsZVJvbGV8fCJoZWFkZXJfY2VsbCI9PT1zLnR5cGUuc3BlYy50YWJsZVJvbGUpe2U9czticmVha319Zm9yKHZhciBhPW8uZGVwdGg7YT4wO2EtLSl7dmFyIGM9by5ub2RlKGEpO2lmKCJjZWxsIj09PWMudHlwZS5zcGVjLnRhYmxlUm9sZXx8ImhlYWRlcl9jZWxsIj09PWMudHlwZS5zcGVjLnRhYmxlUm9sZSl7bj1jO2JyZWFrfX1yZXR1cm4gZSE9PW4mJjA9PT1vLnBhcmVudE9mZnNldH1mdW5jdGlvbiAkKHQsZSxuKXt2YXIgcixvLHM9KGV8fHQpLnNlbGVjdGlvbixhPShlfHx0KS5kb2M7aWYocyBpbnN0YW5jZW9mIGkuTm9kZVNlbGVjdGlvbiYmKG89cy5ub2RlLnR5cGUuc3BlYy50YWJsZVJvbGUpKXtpZigiY2VsbCI9PW98fCJoZWFkZXJfY2VsbCI9PW8pcj1JLmNyZWF0ZShhLHMuZnJvbSk7ZWxzZSBpZigicm93Ij09byl7dmFyIGM9YS5yZXNvbHZlKHMuZnJvbSsxKTtyPUkucm93U2VsZWN0aW9uKGMsYyl9ZWxzZSBpZighbil7dmFyIGw9di5nZXQocy5ub2RlKSxwPXMuZnJvbSsxLHU9cCtsLm1hcFtsLndpZHRoKmwuaGVpZ2h0LTFdO3I9SS5jcmVhdGUoYSxwKzEsdSl9fWVsc2UgcyBpbnN0YW5jZW9mIGkuVGV4dFNlbGVjdGlvbiYmQihzKT9yPWkuVGV4dFNlbGVjdGlvbi5jcmVhdGUoYSxzLmZyb20pOnMgaW5zdGFuY2VvZiBpLlRleHRTZWxlY3Rpb24mJmoocykmJihyPWkuVGV4dFNlbGVjdGlvbi5jcmVhdGUoYSxzLiRmcm9tLnN0YXJ0KCkscy4kZnJvbS5lbmQoKSkpO3JldHVybiByJiYoZXx8KGU9dC50cikpLnNldFNlbGVjdGlvbihyKSxlfWZ1bmN0aW9uIFYodCxlKXt2YXIgbj10LmdldEF0dHJpYnV0ZSgiZGF0YS1jb2x3aWR0aCIpLHI9biYmL15cZCsoLFxkKykqJC8udGVzdChuKT9uLnNwbGl0KCIsIikubWFwKChmdW5jdGlvbih0KXtyZXR1cm4gTnVtYmVyKHQpfSkpOm51bGwsbz1OdW1iZXIodC5nZXRBdHRyaWJ1dGUoImNvbHNwYW4iKXx8MSksaT17Y29sc3BhbjpvLHJvd3NwYW46TnVtYmVyKHQuZ2V0QXR0cmlidXRlKCJyb3dzcGFuIil8fDEpLGNvbHdpZHRoOnImJnIubGVuZ3RoPT1vP3I6bnVsbH07Zm9yKHZhciBzIGluIGUpe3ZhciBhPWVbc10uZ2V0RnJvbURPTSxjPWEmJmEodCk7bnVsbCE9YyYmKGlbc109Yyl9cmV0dXJuIGl9ZnVuY3Rpb24gTCh0LGUpe3ZhciBuPXt9O2Zvcih2YXIgciBpbiAxIT10LmF0dHJzLmNvbHNwYW4mJihuLmNvbHNwYW49dC5hdHRycy5jb2xzcGFuKSwxIT10LmF0dHJzLnJvd3NwYW4mJihuLnJvd3NwYW49dC5hdHRycy5yb3dzcGFuKSx0LmF0dHJzLmNvbHdpZHRoJiYoblsiZGF0YS1jb2x3aWR0aCJdPXQuYXR0cnMuY29sd2lkdGguam9pbigiLCIpKSxlKXt2YXIgbz1lW3JdLnNldERPTUF0dHI7byYmbyh0LmF0dHJzW3JdLG4pfXJldHVybiBufWZ1bmN0aW9uIEoodCl7dmFyIGU9dC5jZWxsQXR0cmlidXRlc3x8e30sbj17Y29sc3Bhbjp7ZGVmYXVsdDoxfSxyb3dzcGFuOntkZWZhdWx0OjF9LGNvbHdpZHRoOntkZWZhdWx0Om51bGx9fTtmb3IodmFyIHIgaW4gZSluW3JdPXtkZWZhdWx0OmVbcl0uZGVmYXVsdH07cmV0dXJue3RhYmxlOntjb250ZW50OiJ0YWJsZV9yb3crIix0YWJsZVJvbGU6InRhYmxlIixpc29sYXRpbmc6ITAsZ3JvdXA6dC50YWJsZUdyb3VwLHBhcnNlRE9NOlt7dGFnOiJ0YWJsZSJ9XSx0b0RPTTpmdW5jdGlvbigpe3JldHVyblsidGFibGUiLFsidGJvZHkiLDBdXX19LHRhYmxlX3Jvdzp7Y29udGVudDoiKHRhYmxlX2NlbGwgfCB0YWJsZV9oZWFkZXIpKiIsdGFibGVSb2xlOiJyb3ciLHBhcnNlRE9NOlt7dGFnOiJ0ciJ9XSx0b0RPTTpmdW5jdGlvbigpe3JldHVyblsidHIiLDBdfX0sdGFibGVfY2VsbDp7Y29udGVudDp0LmNlbGxDb250ZW50LGF0dHJzOm4sdGFibGVSb2xlOiJjZWxsIixpc29sYXRpbmc6ITAscGFyc2VET006W3t0YWc6InRkIixnZXRBdHRyczpmdW5jdGlvbih0KXtyZXR1cm4gVih0LGUpfX1dLHRvRE9NOmZ1bmN0aW9uKHQpe3JldHVyblsidGQiLEwodCxlKSwwXX19LHRhYmxlX2hlYWRlcjp7Y29udGVudDp0LmNlbGxDb250ZW50LGF0dHJzOm4sdGFibGVSb2xlOiJoZWFkZXJfY2VsbCIsaXNvbGF0aW5nOiEwLHBhcnNlRE9NOlt7dGFnOiJ0aCIsZ2V0QXR0cnM6ZnVuY3Rpb24odCl7cmV0dXJuIFYodCxlKX19XSx0b0RPTTpmdW5jdGlvbih0KXtyZXR1cm5bInRoIixMKHQsZSksMF19fX19ZnVuY3Rpb24gcSh0KXt2YXIgZT10LmNhY2hlZC50YWJsZU5vZGVUeXBlcztpZighZSlmb3IodmFyIG4gaW4gZT10LmNhY2hlZC50YWJsZU5vZGVUeXBlcz17fSx0Lm5vZGVzKXt2YXIgcj10Lm5vZGVzW25dLG89ci5zcGVjLnRhYmxlUm9sZTtvJiYoZVtvXT1yKX1yZXR1cm4gZX1mdW5jdGlvbiBXKHQpe2lmKCF0LnNpemUpcmV0dXJuIG51bGw7dmFyIGU9dC5jb250ZW50LG49dC5vcGVuU3RhcnQscj10Lm9wZW5FbmQ7d2hpbGUoMT09ZS5jaGlsZENvdW50JiYobj4wJiZyPjB8fCJ0YWJsZSI9PWUuZmlyc3RDaGlsZC50eXBlLnNwZWMudGFibGVSb2xlKSluLS0sci0tLGU9ZS5maXJzdENoaWxkLmNvbnRlbnQ7dmFyIG89ZS5maXJzdENoaWxkLGk9by50eXBlLnNwZWMudGFibGVSb2xlLHM9by50eXBlLnNjaGVtYSxjPVtdO2lmKCJyb3ciPT1pKWZvcih2YXIgbD0wO2w8ZS5jaGlsZENvdW50O2wrKyl7dmFyIHA9ZS5jaGlsZChsKS5jb250ZW50LHU9bD8wOk1hdGgubWF4KDAsbi0xKSxoPWw8ZS5jaGlsZENvdW50LTE/MDpNYXRoLm1heCgwLHItMSk7KHV8fGgpJiYocD1LKHEocykucm93LG5ldyBhLlNsaWNlKHAsdSxoKSkuY29udGVudCksYy5wdXNoKHApfWVsc2V7aWYoImNlbGwiIT1pJiYiaGVhZGVyX2NlbGwiIT1pKXJldHVybiBudWxsO2MucHVzaChufHxyP0socShzKS5yb3csbmV3IGEuU2xpY2UoZSxuLHIpKS5jb250ZW50OmUpfXJldHVybiBIKHMsYyl9ZnVuY3Rpb24gSCh0LGUpe2Zvcih2YXIgbj1bXSxyPTA7cjxlLmxlbmd0aDtyKyspZm9yKHZhciBvPWVbcl0saT1vLmNoaWxkQ291bnQtMTtpPj0wO2ktLSlmb3IodmFyIHM9by5jaGlsZChpKS5hdHRycyxjPXMucm93c3BhbixsPXMuY29sc3BhbixwPXI7cDxyK2M7cCsrKW5bcF09KG5bcF18fDApK2w7Zm9yKHZhciB1PTAsaD0wO2g8bi5sZW5ndGg7aCsrKXU9TWF0aC5tYXgodSxuW2hdKTtmb3IodmFyIGY9MDtmPG4ubGVuZ3RoO2YrKylpZihmPj1lLmxlbmd0aCYmZS5wdXNoKGEuRnJhZ21lbnQuZW1wdHkpLG5bZl08dSl7Zm9yKHZhciBkPXEodCkuY2VsbC5jcmVhdGVBbmRGaWxsKCksdj1bXSxtPW5bZl07bTx1O20rKyl2LnB1c2goZCk7ZVtmXT1lW2ZdLmFwcGVuZChhLkZyYWdtZW50LmZyb20odikpfXJldHVybntoZWlnaHQ6ZS5sZW5ndGgsd2lkdGg6dSxyb3dzOmV9fWZ1bmN0aW9uIEsodCxlKXt2YXIgbj10LmNyZWF0ZUFuZEZpbGwoKSxyPW5ldyBjLlRyYW5zZm9ybShuKS5yZXBsYWNlKDAsbi5jb250ZW50LnNpemUsZSk7cmV0dXJuIHIuZG9jfWZ1bmN0aW9uIFUodCxlLG4pe3ZhciByPXQud2lkdGgsbz10LmhlaWdodCxpPXQucm93cztpZihyIT1lKXtmb3IodmFyIHM9W10sYz1bXSxsPTA7bDxpLmxlbmd0aDtsKyspe2Zvcih2YXIgcD1pW2xdLHU9W10saD1zW2xdfHwwLGY9MDtoPGU7ZisrKXt2YXIgZD1wLmNoaWxkKGYlcC5jaGlsZENvdW50KTtoK2QuYXR0cnMuY29sc3Bhbj5lJiYoZD1kLnR5cGUuY3JlYXRlKHooZC5hdHRycyxkLmF0dHJzLmNvbHNwYW4saCtkLmF0dHJzLmNvbHNwYW4tZSksZC5jb250ZW50KSksdS5wdXNoKGQpLGgrPWQuYXR0cnMuY29sc3Bhbjtmb3IodmFyIHY9MTt2PGQuYXR0cnMucm93c3Bhbjt2Kyspc1tsK3ZdPShzW2wrdl18fDApK2QuYXR0cnMuY29sc3Bhbn1jLnB1c2goYS5GcmFnbWVudC5mcm9tKHUpKX1pPWMscj1lfWlmKG8hPW4pe2Zvcih2YXIgbT1bXSx5PTAsZz0wO3k8bjt5KyssZysrKXtmb3IodmFyIHc9W10seD1pW2clb10sYj0wO2I8eC5jaGlsZENvdW50O2IrKyl7dmFyIGs9eC5jaGlsZChiKTt5K2suYXR0cnMucm93c3Bhbj5uJiYoaz1rLnR5cGUuY3JlYXRlKEQoay5hdHRycywicm93c3BhbiIsbi1rLmF0dHJzLnJvd3NwYW4pLGsuY29udGVudCkpLHcucHVzaChrKX1tLnB1c2goYS5GcmFnbWVudC5mcm9tKHcpKX1pPW0sbz1ufXJldHVybnt3aWR0aDpyLGhlaWdodDpvLHJvd3M6aX19ZnVuY3Rpb24gRyh0LGUsbixyLG8saSxzKXt2YXIgYyxsLHA9dC5kb2MudHlwZS5zY2hlbWEsdT1xKHApO2lmKG8+ZS53aWR0aClmb3IodmFyIGg9MCxmPTA7aDxlLmhlaWdodDtoKyspe3ZhciBkPW4uY2hpbGQoaCk7Zis9ZC5ub2RlU2l6ZTt2YXIgdj1bXSxtPXZvaWQgMDttPW51bGw9PWQubGFzdENoaWxkfHxkLmxhc3RDaGlsZC50eXBlPT11LmNlbGw/Y3x8KGM9dS5jZWxsLmNyZWF0ZUFuZEZpbGwoKSk6bHx8KGw9dS5oZWFkZXJfY2VsbC5jcmVhdGVBbmRGaWxsKCkpO2Zvcih2YXIgeT1lLndpZHRoO3k8bzt5Kyspdi5wdXNoKG0pO3QuaW5zZXJ0KHQubWFwcGluZy5zbGljZShzKS5tYXAoZi0xK3IpLHYpfWlmKGk+ZS5oZWlnaHQpe2Zvcih2YXIgZz1bXSx3PTAseD0oZS5oZWlnaHQtMSkqZS53aWR0aDt3PE1hdGgubWF4KGUud2lkdGgsbyk7dysrKXt2YXIgYj0hKHc+PWUud2lkdGgpJiZuLm5vZGVBdChlLm1hcFt4K3ddKS50eXBlPT11LmhlYWRlcl9jZWxsO2cucHVzaChiP2x8fChsPXUuaGVhZGVyX2NlbGwuY3JlYXRlQW5kRmlsbCgpKTpjfHwoYz11LmNlbGwuY3JlYXRlQW5kRmlsbCgpKSl9Zm9yKHZhciBrPXUucm93LmNyZWF0ZShudWxsLGEuRnJhZ21lbnQuZnJvbShnKSksUz1bXSxDPWUuaGVpZ2h0O0M8aTtDKyspUy5wdXNoKGspO3QuaW5zZXJ0KHQubWFwcGluZy5zbGljZShzKS5tYXAocituLm5vZGVTaXplLTIpLFMpfXJldHVybiEoIWMmJiFsKX1mdW5jdGlvbiBYKHQsZSxuLHIsbyxpLHMsYSl7aWYoMD09c3x8cz09ZS5oZWlnaHQpcmV0dXJuITE7Zm9yKHZhciBjPSExLGw9bztsPGk7bCsrKXt2YXIgcD1zKmUud2lkdGgrbCx1PWUubWFwW3BdO2lmKGUubWFwW3AtZS53aWR0aF09PXUpe2M9ITA7dmFyIGg9bi5ub2RlQXQodSksZj1lLmZpbmRDZWxsKHUpLGQ9Zi50b3Asdj1mLmxlZnQ7dC5zZXROb2RlTWFya3VwKHQubWFwcGluZy5zbGljZShhKS5tYXAodStyKSxudWxsLEQoaC5hdHRycywicm93c3BhbiIscy1kKSksdC5pbnNlcnQodC5tYXBwaW5nLnNsaWNlKGEpLm1hcChlLnBvc2l0aW9uQXQocyx2LG4pKSxoLnR5cGUuY3JlYXRlQW5kRmlsbChEKGguYXR0cnMsInJvd3NwYW4iLGQraC5hdHRycy5yb3dzcGFuLXMpKSksbCs9aC5hdHRycy5jb2xzcGFuLTF9fXJldHVybiBjfWZ1bmN0aW9uIFkodCxlLG4scixvLGkscyxhKXtpZigwPT1zfHxzPT1lLndpZHRoKXJldHVybiExO2Zvcih2YXIgYz0hMSxsPW87bDxpO2wrKyl7dmFyIHA9bCplLndpZHRoK3MsdT1lLm1hcFtwXTtpZihlLm1hcFtwLTFdPT11KXtjPSEwO3ZhciBoPW4ubm9kZUF0KHUpLGY9ZS5jb2xDb3VudCh1KSxkPXQubWFwcGluZy5zbGljZShhKS5tYXAodStyKTt0LnNldE5vZGVNYXJrdXAoZCxudWxsLHooaC5hdHRycyxzLWYsaC5hdHRycy5jb2xzcGFuLShzLWYpKSksdC5pbnNlcnQoZCtoLm5vZGVTaXplLGgudHlwZS5jcmVhdGVBbmRGaWxsKHooaC5hdHRycywwLHMtZikpKSxsKz1oLmF0dHJzLnJvd3NwYW4tMX19cmV0dXJuIGN9ZnVuY3Rpb24gUSh0LGUsbixyLG8pe3ZhciBpPW4/dC5kb2Mubm9kZUF0KG4tMSk6dC5kb2Mscz12LmdldChpKSxjPXIudG9wLGw9ci5sZWZ0LHA9bCtvLndpZHRoLHU9YytvLmhlaWdodCxoPXQudHIsZj0wO2Z1bmN0aW9uIGQoKXtpPW4/aC5kb2Mubm9kZUF0KG4tMSk6aC5kb2Mscz12LmdldChpKSxmPWgubWFwcGluZy5tYXBzLmxlbmd0aH1HKGgscyxpLG4scCx1LGYpJiZkKCksWChoLHMsaSxuLGwscCxjLGYpJiZkKCksWChoLHMsaSxuLGwscCx1LGYpJiZkKCksWShoLHMsaSxuLGMsdSxsLGYpJiZkKCksWShoLHMsaSxuLGMsdSxwLGYpJiZkKCk7Zm9yKHZhciBtPWM7bTx1O20rKyl7dmFyIHk9cy5wb3NpdGlvbkF0KG0sbCxpKSxnPXMucG9zaXRpb25BdChtLHAsaSk7aC5yZXBsYWNlKGgubWFwcGluZy5zbGljZShmKS5tYXAoeStuKSxoLm1hcHBpbmcuc2xpY2UoZikubWFwKGcrbiksbmV3IGEuU2xpY2Uoby5yb3dzW20tY10sMCwwKSl9ZCgpLGguc2V0U2VsZWN0aW9uKG5ldyBJKGguZG9jLnJlc29sdmUobitzLnBvc2l0aW9uQXQoYyxsLGkpKSxoLmRvYy5yZXNvbHZlKG4rcy5wb3NpdGlvbkF0KHUtMSxwLTEsaSkpKSksZShoKX1fLnByb3RvdHlwZS5tYXA9ZnVuY3Rpb24odCl7cmV0dXJuIG5ldyBfKHQubWFwKHRoaXMuYW5jaG9yKSx0Lm1hcCh0aGlzLmhlYWQpKX0sXy5wcm90b3R5cGUucmVzb2x2ZT1mdW5jdGlvbih0KXt2YXIgZT10LnJlc29sdmUodGhpcy5hbmNob3IpLG49dC5yZXNvbHZlKHRoaXMuaGVhZCk7cmV0dXJuInJvdyI9PWUucGFyZW50LnR5cGUuc3BlYy50YWJsZVJvbGUmJiJyb3ciPT1uLnBhcmVudC50eXBlLnNwZWMudGFibGVSb2xlJiZlLmluZGV4KCk8ZS5wYXJlbnQuY2hpbGRDb3VudCYmbi5pbmRleCgpPG4ucGFyZW50LmNoaWxkQ291bnQmJk4oZSxuKT9uZXcgSShlLG4pOmkuU2VsZWN0aW9uLm5lYXIobiwxKX07dmFyIFo9bC5rZXlkb3duSGFuZGxlcih7QXJyb3dMZWZ0OmV0KCJob3JpeiIsLTEpLEFycm93UmlnaHQ6ZXQoImhvcml6IiwxKSxBcnJvd1VwOmV0KCJ2ZXJ0IiwtMSksQXJyb3dEb3duOmV0KCJ2ZXJ0IiwxKSwiU2hpZnQtQXJyb3dMZWZ0IjpudCgiaG9yaXoiLC0xKSwiU2hpZnQtQXJyb3dSaWdodCI6bnQoImhvcml6IiwxKSwiU2hpZnQtQXJyb3dVcCI6bnQoInZlcnQiLC0xKSwiU2hpZnQtQXJyb3dEb3duIjpudCgidmVydCIsMSksQmFja3NwYWNlOnJ0LCJNb2QtQmFja3NwYWNlIjpydCxEZWxldGU6cnQsIk1vZC1EZWxldGUiOnJ0fSk7ZnVuY3Rpb24gdHQodCxlLG4pe3JldHVybiFuLmVxKHQuc2VsZWN0aW9uKSYmKGUmJmUodC50ci5zZXRTZWxlY3Rpb24obikuc2Nyb2xsSW50b1ZpZXcoKSksITApfWZ1bmN0aW9uIGV0KHQsZSl7cmV0dXJuIGZ1bmN0aW9uKG4scixvKXt2YXIgcz1uLnNlbGVjdGlvbjtpZihzIGluc3RhbmNlb2YgSSlyZXR1cm4gdHQobixyLGkuU2VsZWN0aW9uLm5lYXIocy4kaGVhZENlbGwsZSkpO2lmKCJob3JpeiIhPXQmJiFzLmVtcHR5KXJldHVybiExO3ZhciBhPWF0KG8sdCxlKTtpZihudWxsPT1hKXJldHVybiExO2lmKCJob3JpeiI9PXQpcmV0dXJuIHR0KG4scixpLlNlbGVjdGlvbi5uZWFyKG4uZG9jLnJlc29sdmUocy5oZWFkK2UpLGUpKTt2YXIgYyxsPW4uZG9jLnJlc29sdmUoYSkscD1SKGwsdCxlKTtyZXR1cm4gYz1wP2kuU2VsZWN0aW9uLm5lYXIocCwxKTplPDA/aS5TZWxlY3Rpb24ubmVhcihuLmRvYy5yZXNvbHZlKGwuYmVmb3JlKC0xKSksLTEpOmkuU2VsZWN0aW9uLm5lYXIobi5kb2MucmVzb2x2ZShsLmFmdGVyKC0xKSksMSksdHQobixyLGMpfX1mdW5jdGlvbiBudCh0LGUpe3JldHVybiBmdW5jdGlvbihuLHIsbyl7dmFyIGk9bi5zZWxlY3Rpb247aWYoIShpIGluc3RhbmNlb2YgSSkpe3ZhciBzPWF0KG8sdCxlKTtpZihudWxsPT1zKXJldHVybiExO2k9bmV3IEkobi5kb2MucmVzb2x2ZShzKSl9dmFyIGE9UihpLiRoZWFkQ2VsbCx0LGUpO3JldHVybiEhYSYmdHQobixyLG5ldyBJKGkuJGFuY2hvckNlbGwsYSkpfX1mdW5jdGlvbiBydCh0LGUpe3ZhciBuPXQuc2VsZWN0aW9uO2lmKCEobiBpbnN0YW5jZW9mIEkpKXJldHVybiExO2lmKGUpe3ZhciByPXQudHIsbz1xKHQuc2NoZW1hKS5jZWxsLmNyZWF0ZUFuZEZpbGwoKS5jb250ZW50O24uZm9yRWFjaENlbGwoKGZ1bmN0aW9uKHQsZSl7dC5jb250ZW50LmVxKG8pfHxyLnJlcGxhY2Uoci5tYXBwaW5nLm1hcChlKzEpLHIubWFwcGluZy5tYXAoZSt0Lm5vZGVTaXplLTEpLG5ldyBhLlNsaWNlKG8sMCwwKSl9KSksci5kb2NDaGFuZ2VkJiZlKHIpfXJldHVybiEwfWZ1bmN0aW9uIG90KHQsZSl7dmFyIG49dC5zdGF0ZS5kb2Mscj1iKG4ucmVzb2x2ZShlKSk7cmV0dXJuISFyJiYodC5kaXNwYXRjaCh0LnN0YXRlLnRyLnNldFNlbGVjdGlvbihuZXcgSShyKSkpLCEwKX1mdW5jdGlvbiBpdCh0LGUsbil7aWYoIVModC5zdGF0ZSkpcmV0dXJuITE7dmFyIHI9VyhuKSxvPXQuc3RhdGUuc2VsZWN0aW9uO2lmKG8gaW5zdGFuY2VvZiBJKXtyfHwocj17d2lkdGg6MSxoZWlnaHQ6MSxyb3dzOlthLkZyYWdtZW50LmZyb20oSyhxKHQuc3RhdGUuc2NoZW1hKS5jZWxsLG4pKV19KTt2YXIgaT1vLiRhbmNob3JDZWxsLm5vZGUoLTEpLHM9by4kYW5jaG9yQ2VsbC5zdGFydCgtMSksYz12LmdldChpKS5yZWN0QmV0d2VlbihvLiRhbmNob3JDZWxsLnBvcy1zLG8uJGhlYWRDZWxsLnBvcy1zKTtyZXR1cm4gcj1VKHIsYy5yaWdodC1jLmxlZnQsYy5ib3R0b20tYy50b3ApLFEodC5zdGF0ZSx0LmRpc3BhdGNoLHMsYyxyKSwhMH1pZihyKXt2YXIgbD1DKHQuc3RhdGUpLHA9bC5zdGFydCgtMSk7cmV0dXJuIFEodC5zdGF0ZSx0LmRpc3BhdGNoLHAsdi5nZXQobC5ub2RlKC0xKSkuZmluZENlbGwobC5wb3MtcCksciksITB9cmV0dXJuITF9ZnVuY3Rpb24gc3QodCxlKXtpZighZS5jdHJsS2V5JiYhZS5tZXRhS2V5KXt2YXIgbixyPWN0KHQsZS50YXJnZXQpO2lmKGUuc2hpZnRLZXkmJnQuc3RhdGUuc2VsZWN0aW9uIGluc3RhbmNlb2YgSSlvKHQuc3RhdGUuc2VsZWN0aW9uLiRhbmNob3JDZWxsLGUpLGUucHJldmVudERlZmF1bHQoKTtlbHNlIGlmKGUuc2hpZnRLZXkmJnImJm51bGwhPShuPWIodC5zdGF0ZS5zZWxlY3Rpb24uJGFuY2hvcikpJiZsdCh0LGUpLnBvcyE9bi5wb3MpbyhuLGUpLGUucHJldmVudERlZmF1bHQoKTtlbHNlIGlmKCFyKXJldHVybjt0LnJvb3QuYWRkRXZlbnRMaXN0ZW5lcigibW91c2V1cCIsaSksdC5yb290LmFkZEV2ZW50TGlzdGVuZXIoImRyYWdzdGFydCIsaSksdC5yb290LmFkZEV2ZW50TGlzdGVuZXIoIm1vdXNlbW92ZSIscyl9ZnVuY3Rpb24gbyhlLG4pe3ZhciByPWx0KHQsbiksbz1udWxsPT14LmdldFN0YXRlKHQuc3RhdGUpO2lmKCFyfHwhTihlLHIpKXtpZighbylyZXR1cm47cj1lfXZhciBpPW5ldyBJKGUscik7aWYob3x8IXQuc3RhdGUuc2VsZWN0aW9uLmVxKGkpKXt2YXIgcz10LnN0YXRlLnRyLnNldFNlbGVjdGlvbihpKTtvJiZzLnNldE1ldGEoeCxlLnBvcyksdC5kaXNwYXRjaChzKX19ZnVuY3Rpb24gaSgpe3Qucm9vdC5yZW1vdmVFdmVudExpc3RlbmVyKCJtb3VzZXVwIixpKSx0LnJvb3QucmVtb3ZlRXZlbnRMaXN0ZW5lcigiZHJhZ3N0YXJ0IixpKSx0LnJvb3QucmVtb3ZlRXZlbnRMaXN0ZW5lcigibW91c2Vtb3ZlIixzKSxudWxsIT14LmdldFN0YXRlKHQuc3RhdGUpJiZ0LmRpc3BhdGNoKHQuc3RhdGUudHIuc2V0TWV0YSh4LC0xKSl9ZnVuY3Rpb24gcyhuKXt2YXIgcyxhPXguZ2V0U3RhdGUodC5zdGF0ZSk7aWYobnVsbCE9YSlzPXQuc3RhdGUuZG9jLnJlc29sdmUoYSk7ZWxzZSBpZihjdCh0LG4udGFyZ2V0KSE9ciYmKHM9bHQodCxlKSwhcykpcmV0dXJuIGkoKTtzJiZvKHMsbil9fWZ1bmN0aW9uIGF0KHQsZSxuKXtpZighKHQuc3RhdGUuc2VsZWN0aW9uIGluc3RhbmNlb2YgaS5UZXh0U2VsZWN0aW9uKSlyZXR1cm4gbnVsbDtmb3IodmFyIHI9dC5zdGF0ZS5zZWxlY3Rpb24sbz1yLiRoZWFkLHM9by5kZXB0aC0xO3M+PTA7cy0tKXt2YXIgYT1vLm5vZGUocyksYz1uPDA/by5pbmRleChzKTpvLmluZGV4QWZ0ZXIocyk7aWYoYyE9KG48MD8wOmEuY2hpbGRDb3VudCkpcmV0dXJuIG51bGw7aWYoImNlbGwiPT1hLnR5cGUuc3BlYy50YWJsZVJvbGV8fCJoZWFkZXJfY2VsbCI9PWEudHlwZS5zcGVjLnRhYmxlUm9sZSl7dmFyIGw9by5iZWZvcmUocykscD0idmVydCI9PWU/bj4wPyJkb3duIjoidXAiOm4+MD8icmlnaHQiOiJsZWZ0IjtyZXR1cm4gdC5lbmRPZlRleHRibG9jayhwKT9sOm51bGx9fXJldHVybiBudWxsfWZ1bmN0aW9uIGN0KHQsZSl7Zm9yKDtlJiZlIT10LmRvbTtlPWUucGFyZW50Tm9kZSlpZigiVEQiPT1lLm5vZGVOYW1lfHwiVEgiPT1lLm5vZGVOYW1lKXJldHVybiBlfWZ1bmN0aW9uIGx0KHQsZSl7dmFyIG49dC5wb3NBdENvb3Jkcyh7bGVmdDplLmNsaWVudFgsdG9wOmUuY2xpZW50WX0pO3JldHVybiBuJiZuP2IodC5zdGF0ZS5kb2MucmVzb2x2ZShuLnBvcykpOm51bGx9dmFyIHB0PW5ldyBpLlBsdWdpbktleSgiZml4LXRhYmxlcyIpO2Z1bmN0aW9uIHV0KHQsZSxuLHIpe3ZhciBvPXQuY2hpbGRDb3VudCxpPWUuY2hpbGRDb3VudDt0OmZvcih2YXIgcz0wLGE9MDtzPGk7cysrKXtmb3IodmFyIGM9ZS5jaGlsZChzKSxsPWEscD1NYXRoLm1pbihvLHMrMyk7bDxwO2wrKylpZih0LmNoaWxkKGwpPT1jKXthPWwrMSxuKz1jLm5vZGVTaXplO2NvbnRpbnVlIHR9cihjLG4pLGE8byYmdC5jaGlsZChhKS5zYW1lTWFya3VwKGMpP3V0KHQuY2hpbGQoYSksYyxuKzEscik6Yy5ub2Rlc0JldHdlZW4oMCxjLmNvbnRlbnQuc2l6ZSxyLG4rMSksbis9Yy5ub2RlU2l6ZX19ZnVuY3Rpb24gaHQodCxlKXt2YXIgbixyPWZ1bmN0aW9uKGUscil7InRhYmxlIj09ZS50eXBlLnNwZWMudGFibGVSb2xlJiYobj1mdCh0LGUscixuKSl9O3JldHVybiBlP2UuZG9jIT10LmRvYyYmdXQoZS5kb2MsdC5kb2MsMCxyKTp0LmRvYy5kZXNjZW5kYW50cyhyKSxufWZ1bmN0aW9uIGZ0KHQsZSxuLHIpe3ZhciBvPXYuZ2V0KGUpO2lmKCFvLnByb2JsZW1zKXJldHVybiByO3J8fChyPXQudHIpO2Zvcih2YXIgaSxzLGE9W10sYz0wO2M8by5oZWlnaHQ7YysrKWEucHVzaCgwKTtmb3IodmFyIGw9MDtsPG8ucHJvYmxlbXMubGVuZ3RoO2wrKyl7dmFyIHA9by5wcm9ibGVtc1tsXTtpZigiY29sbGlzaW9uIj09cC50eXBlKXtmb3IodmFyIHU9ZS5ub2RlQXQocC5wb3MpLGg9MDtoPHUuYXR0cnMucm93c3BhbjtoKyspYVtwLnJvdytoXSs9cC5uO3Iuc2V0Tm9kZU1hcmt1cChyLm1hcHBpbmcubWFwKG4rMStwLnBvcyksbnVsbCx6KHUuYXR0cnMsdS5hdHRycy5jb2xzcGFuLXAubixwLm4pKX1lbHNlIGlmKCJtaXNzaW5nIj09cC50eXBlKWFbcC5yb3ddKz1wLm47ZWxzZSBpZigib3Zlcmxvbmdfcm93c3BhbiI9PXAudHlwZSl7dmFyIGY9ZS5ub2RlQXQocC5wb3MpO3Iuc2V0Tm9kZU1hcmt1cChyLm1hcHBpbmcubWFwKG4rMStwLnBvcyksbnVsbCxEKGYuYXR0cnMsInJvd3NwYW4iLGYuYXR0cnMucm93c3Bhbi1wLm4pKX1lbHNlIGlmKCJjb2x3aWR0aCBtaXNtYXRjaCI9PXAudHlwZSl7dmFyIGQ9ZS5ub2RlQXQocC5wb3MpO3Iuc2V0Tm9kZU1hcmt1cChyLm1hcHBpbmcubWFwKG4rMStwLnBvcyksbnVsbCxEKGQuYXR0cnMsImNvbHdpZHRoIixwLmNvbHdpZHRoKSl9fWZvcih2YXIgbT0wO208YS5sZW5ndGg7bSsrKWFbbV0mJihudWxsPT1pJiYoaT1tKSxzPW0pO2Zvcih2YXIgeT0wLGc9bisxO3k8by5oZWlnaHQ7eSsrKXt2YXIgdz1lLmNoaWxkKHkpLHg9Zyt3Lm5vZGVTaXplLGI9YVt5XTtpZihiPjApe3ZhciBrPSJjZWxsIjt3LmZpcnN0Q2hpbGQmJihrPXcuZmlyc3RDaGlsZC50eXBlLnNwZWMudGFibGVSb2xlKTtmb3IodmFyIFM9W10sQz0wO0M8YjtDKyspUy5wdXNoKHEodC5zY2hlbWEpW2tdLmNyZWF0ZUFuZEZpbGwoKSk7dmFyIE89MCE9eSYmaSE9eS0xfHxzIT15P3gtMTpnKzE7ci5pbnNlcnQoci5tYXBwaW5nLm1hcChPKSxTKX1nPXh9cmV0dXJuIHIuc2V0TWV0YShwdCx7Zml4VGFibGVzOiEwfSl9ZnVuY3Rpb24gZHQodCl7dmFyIGUsbj10LnNlbGVjdGlvbixyPUModCksbz1yLm5vZGUoLTEpLGk9ci5zdGFydCgtMSkscz12LmdldChvKTtyZXR1cm4gZT1uIGluc3RhbmNlb2YgST9zLnJlY3RCZXR3ZWVuKG4uJGFuY2hvckNlbGwucG9zLWksbi4kaGVhZENlbGwucG9zLWkpOnMuZmluZENlbGwoci5wb3MtaSksZS50YWJsZVN0YXJ0PWksZS5tYXA9cyxlLnRhYmxlPW8sZX1mdW5jdGlvbiB2dCh0LGUsbil7Zm9yKHZhciByPXEoZS50eXBlLnNjaGVtYSkuaGVhZGVyX2NlbGwsbz0wO288dC5oZWlnaHQ7bysrKWlmKGUubm9kZUF0KHQubWFwW24rbyp0LndpZHRoXSkudHlwZSE9cilyZXR1cm4hMTtyZXR1cm4hMH1mdW5jdGlvbiBtdCh0LGUsbil7dmFyIHI9ZS5tYXAsbz1lLnRhYmxlU3RhcnQsaT1lLnRhYmxlLHM9bj4wPy0xOjA7dnQocixpLG4rcykmJihzPTA9PW58fG49PXIud2lkdGg/bnVsbDowKTtmb3IodmFyIGE9MDthPHIuaGVpZ2h0O2ErKyl7dmFyIGM9YSpyLndpZHRoK247aWYobj4wJiZuPHIud2lkdGgmJnIubWFwW2MtMV09PXIubWFwW2NdKXt2YXIgbD1yLm1hcFtjXSxwPWkubm9kZUF0KGwpO3Quc2V0Tm9kZU1hcmt1cCh0Lm1hcHBpbmcubWFwKG8rbCksbnVsbCxQKHAuYXR0cnMsbi1yLmNvbENvdW50KGwpKSksYSs9cC5hdHRycy5yb3dzcGFuLTF9ZWxzZXt2YXIgdT1udWxsPT1zP3EoaS50eXBlLnNjaGVtYSkuY2VsbDppLm5vZGVBdChyLm1hcFtjK3NdKS50eXBlLGg9ci5wb3NpdGlvbkF0KGEsbixpKTt0Lmluc2VydCh0Lm1hcHBpbmcubWFwKG8raCksdS5jcmVhdGVBbmRGaWxsKCkpfX1yZXR1cm4gdH1mdW5jdGlvbiB5dCh0LGUpe2lmKCFTKHQpKXJldHVybiExO2lmKGUpe3ZhciBuPWR0KHQpO2UobXQodC50cixuLG4ubGVmdCkpfXJldHVybiEwfWZ1bmN0aW9uIGd0KHQsZSl7aWYoIVModCkpcmV0dXJuITE7aWYoZSl7dmFyIG49ZHQodCk7ZShtdCh0LnRyLG4sbi5yaWdodCkpfXJldHVybiEwfWZ1bmN0aW9uIHd0KHQsZSxuKXtmb3IodmFyIHI9ZS5tYXAsbz1lLnRhYmxlLGk9ZS50YWJsZVN0YXJ0LHM9dC5tYXBwaW5nLm1hcHMubGVuZ3RoLGE9MDthPHIuaGVpZ2h0Oyl7dmFyIGM9YSpyLndpZHRoK24sbD1yLm1hcFtjXSxwPW8ubm9kZUF0KGwpO2lmKG4+MCYmci5tYXBbYy0xXT09bHx8bjxyLndpZHRoLTEmJnIubWFwW2MrMV09PWwpdC5zZXROb2RlTWFya3VwKHQubWFwcGluZy5zbGljZShzKS5tYXAoaStsKSxudWxsLHoocC5hdHRycyxuLXIuY29sQ291bnQobCkpKTtlbHNle3ZhciB1PXQubWFwcGluZy5zbGljZShzKS5tYXAoaStsKTt0LmRlbGV0ZSh1LHUrcC5ub2RlU2l6ZSl9YSs9cC5hdHRycy5yb3dzcGFufX1mdW5jdGlvbiB4dCh0LGUpe2lmKCFTKHQpKXJldHVybiExO2lmKGUpe3ZhciBuPWR0KHQpLHI9dC50cjtpZigwPT1uLmxlZnQmJm4ucmlnaHQ9PW4ubWFwLndpZHRoKXJldHVybiExO2Zvcih2YXIgbz1uLnJpZ2h0LTE7O28tLSl7aWYod3QocixuLG8pLG89PW4ubGVmdClicmVhaztuLnRhYmxlPW4udGFibGVTdGFydD9yLmRvYy5ub2RlQXQobi50YWJsZVN0YXJ0LTEpOnIuZG9jLG4ubWFwPXYuZ2V0KG4udGFibGUpfWUocil9cmV0dXJuITB9ZnVuY3Rpb24gYnQodCxlLG4pe2Zvcih2YXIgcj1xKGUudHlwZS5zY2hlbWEpLmhlYWRlcl9jZWxsLG89MDtvPHQud2lkdGg7bysrKWlmKGUubm9kZUF0KHQubWFwW28rbip0LndpZHRoXSkudHlwZSE9cilyZXR1cm4hMTtyZXR1cm4hMH1mdW5jdGlvbiBrdCh0LGUsbil7Zm9yKHZhciByPWUubWFwLG89ZS50YWJsZVN0YXJ0LGk9ZS50YWJsZSxzPW8sYT0wO2E8bjthKyspcys9aS5jaGlsZChhKS5ub2RlU2l6ZTt2YXIgYz1bXSxsPW4+MD8tMTowO2J0KHIsaSxuK2wpJiYobD0wPT1ufHxuPT1yLmhlaWdodD9udWxsOjApO2Zvcih2YXIgcD0wLHU9ci53aWR0aCpuO3A8ci53aWR0aDtwKyssdSsrKWlmKG4+MCYmbjxyLmhlaWdodCYmci5tYXBbdV09PXIubWFwW3Utci53aWR0aF0pe3ZhciBoPXIubWFwW3VdLGY9aS5ub2RlQXQoaCkuYXR0cnM7dC5zZXROb2RlTWFya3VwKG8raCxudWxsLEQoZiwicm93c3BhbiIsZi5yb3dzcGFuKzEpKSxwKz1mLmNvbHNwYW4tMX1lbHNle3ZhciBkPW51bGw9PWw/cShpLnR5cGUuc2NoZW1hKS5jZWxsOmkubm9kZUF0KHIubWFwW3UrbCpyLndpZHRoXSkudHlwZTtjLnB1c2goZC5jcmVhdGVBbmRGaWxsKCkpfXJldHVybiB0Lmluc2VydChzLHEoaS50eXBlLnNjaGVtYSkucm93LmNyZWF0ZShudWxsLGMpKSx0fWZ1bmN0aW9uIFN0KHQsZSl7aWYoIVModCkpcmV0dXJuITE7aWYoZSl7dmFyIG49ZHQodCk7ZShrdCh0LnRyLG4sbi50b3ApKX1yZXR1cm4hMH1mdW5jdGlvbiBDdCh0LGUpe2lmKCFTKHQpKXJldHVybiExO2lmKGUpe3ZhciBuPWR0KHQpO2Uoa3QodC50cixuLG4uYm90dG9tKSl9cmV0dXJuITB9ZnVuY3Rpb24gT3QodCxlLG4pe2Zvcih2YXIgcj1lLm1hcCxvPWUudGFibGUsaT1lLnRhYmxlU3RhcnQscz0wLGE9MDthPG47YSsrKXMrPW8uY2hpbGQoYSkubm9kZVNpemU7dmFyIGM9cytvLmNoaWxkKG4pLm5vZGVTaXplLGw9dC5tYXBwaW5nLm1hcHMubGVuZ3RoO3QuZGVsZXRlKHMraSxjK2kpO2Zvcih2YXIgcD0wLHU9bipyLndpZHRoO3A8ci53aWR0aDtwKyssdSsrKXt2YXIgaD1yLm1hcFt1XTtpZihuPjAmJmg9PXIubWFwW3Utci53aWR0aF0pe3ZhciBmPW8ubm9kZUF0KGgpLmF0dHJzO3Quc2V0Tm9kZU1hcmt1cCh0Lm1hcHBpbmcuc2xpY2UobCkubWFwKGgraSksbnVsbCxEKGYsInJvd3NwYW4iLGYucm93c3Bhbi0xKSkscCs9Zi5jb2xzcGFuLTF9ZWxzZSBpZihuPHIud2lkdGgmJmg9PXIubWFwW3Urci53aWR0aF0pe3ZhciBkPW8ubm9kZUF0KGgpLHY9ZC50eXBlLmNyZWF0ZShEKGQuYXR0cnMsInJvd3NwYW4iLGQuYXR0cnMucm93c3Bhbi0xKSxkLmNvbnRlbnQpLG09ci5wb3NpdGlvbkF0KG4rMSxwLG8pO3QuaW5zZXJ0KHQubWFwcGluZy5zbGljZShsKS5tYXAoaSttKSx2KSxwKz1kLmF0dHJzLmNvbHNwYW4tMX19fWZ1bmN0aW9uIE10KHQsZSl7aWYoIVModCkpcmV0dXJuITE7aWYoZSl7dmFyIG49ZHQodCkscj10LnRyO2lmKDA9PW4udG9wJiZuLmJvdHRvbT09bi5tYXAuaGVpZ2h0KXJldHVybiExO2Zvcih2YXIgbz1uLmJvdHRvbS0xOztvLS0pe2lmKE90KHIsbixvKSxvPT1uLnRvcClicmVhaztuLnRhYmxlPW4udGFibGVTdGFydD9yLmRvYy5ub2RlQXQobi50YWJsZVN0YXJ0LTEpOnIuZG9jLG4ubWFwPXYuZ2V0KG4udGFibGUpfWUocil9cmV0dXJuITB9ZnVuY3Rpb24gVHQodCl7dmFyIGU9dC5jb250ZW50O3JldHVybiAxPT1lLmNoaWxkQ291bnQmJmUuZmlyc3RDaGlsZC5pc1RleHRibG9jayYmMD09ZS5maXJzdENoaWxkLmNoaWxkQ291bnR9ZnVuY3Rpb24gTnQodCxlKXtmb3IodmFyIG49dC53aWR0aCxyPXQuaGVpZ2h0LG89dC5tYXAsaT1lLnRvcCpuK2UubGVmdCxzPWksYT0oZS5ib3R0b20tMSkqbitlLmxlZnQsYz1pKyhlLnJpZ2h0LWUubGVmdC0xKSxsPWUudG9wO2w8ZS5ib3R0b207bCsrKXtpZihlLmxlZnQ+MCYmb1tzXT09b1tzLTFdfHxlLnJpZ2h0PG4mJm9bY109PW9bYysxXSlyZXR1cm4hMDtzKz1uLGMrPW59Zm9yKHZhciBwPWUubGVmdDtwPGUucmlnaHQ7cCsrKXtpZihlLnRvcD4wJiZvW2ldPT1vW2ktbl18fGUuYm90dG9tPHImJm9bYV09PW9bYStuXSlyZXR1cm4hMDtpKyssYSsrfXJldHVybiExfWZ1bmN0aW9uIEV0KHQsZSl7dmFyIG49dC5zZWxlY3Rpb247aWYoIShuIGluc3RhbmNlb2YgSSl8fG4uJGFuY2hvckNlbGwucG9zPT1uLiRoZWFkQ2VsbC5wb3MpcmV0dXJuITE7dmFyIHI9ZHQodCksbz1yLm1hcDtpZihOdChvLHIpKXJldHVybiExO2lmKGUpe2Zvcih2YXIgaSxzLGM9dC50cixsPXt9LHA9YS5GcmFnbWVudC5lbXB0eSx1PXIudG9wO3U8ci5ib3R0b207dSsrKWZvcih2YXIgaD1yLmxlZnQ7aDxyLnJpZ2h0O2grKyl7dmFyIGY9by5tYXBbdSpvLndpZHRoK2hdLGQ9ci50YWJsZS5ub2RlQXQoZik7aWYoIWxbZl0paWYobFtmXT0hMCxudWxsPT1pKWk9ZixzPWQ7ZWxzZXtUdChkKXx8KHA9cC5hcHBlbmQoZC5jb250ZW50KSk7dmFyIHY9Yy5tYXBwaW5nLm1hcChmK3IudGFibGVTdGFydCk7Yy5kZWxldGUodix2K2Qubm9kZVNpemUpfX1pZihjLnNldE5vZGVNYXJrdXAoaStyLnRhYmxlU3RhcnQsbnVsbCxEKFAocy5hdHRycyxzLmF0dHJzLmNvbHNwYW4sci5yaWdodC1yLmxlZnQtcy5hdHRycy5jb2xzcGFuKSwicm93c3BhbiIsci5ib3R0b20tci50b3ApKSxwLnNpemUpe3ZhciBtPWkrMStzLmNvbnRlbnQuc2l6ZSx5PVR0KHMpP2krMTptO2MucmVwbGFjZVdpdGgoeStyLnRhYmxlU3RhcnQsbStyLnRhYmxlU3RhcnQscCl9Yy5zZXRTZWxlY3Rpb24obmV3IEkoYy5kb2MucmVzb2x2ZShpK3IudGFibGVTdGFydCkpKSxlKGMpfXJldHVybiEwfWZ1bmN0aW9uIEF0KHQsZSl7dmFyIG49cSh0LnNjaGVtYSk7cmV0dXJuIFJ0KChmdW5jdGlvbih0KXt2YXIgZT10Lm5vZGU7cmV0dXJuIG5bZS50eXBlLnNwZWMudGFibGVSb2xlXX0pKSh0LGUpfWZ1bmN0aW9uIFJ0KHQpe3JldHVybiBmdW5jdGlvbihlLG4pe3ZhciByLG8saT1lLnNlbGVjdGlvbjtpZihpIGluc3RhbmNlb2YgSSl7aWYoaS4kYW5jaG9yQ2VsbC5wb3MhPWkuJGhlYWRDZWxsLnBvcylyZXR1cm4hMTtyPWkuJGFuY2hvckNlbGwubm9kZUFmdGVyLG89aS4kYW5jaG9yQ2VsbC5wb3N9ZWxzZXtpZihyPWsoaS4kZnJvbSksIXIpcmV0dXJuITE7bz1iKGkuJGZyb20pLnBvc31pZigxPT1yLmF0dHJzLmNvbHNwYW4mJjE9PXIuYXR0cnMucm93c3BhbilyZXR1cm4hMTtpZihuKXt2YXIgcz1yLmF0dHJzLGE9W10sYz1zLmNvbHdpZHRoO3Mucm93c3Bhbj4xJiYocz1EKHMsInJvd3NwYW4iLDEpKSxzLmNvbHNwYW4+MSYmKHM9RChzLCJjb2xzcGFuIiwxKSk7Zm9yKHZhciBsLHA9ZHQoZSksdT1lLnRyLGg9MDtoPHAucmlnaHQtcC5sZWZ0O2grKylhLnB1c2goYz9EKHMsImNvbHdpZHRoIixjJiZjW2hdP1tjW2hdXTpudWxsKTpzKTtmb3IodmFyIGY9cC50b3A7ZjxwLmJvdHRvbTtmKyspe3ZhciBkPXAubWFwLnBvc2l0aW9uQXQoZixwLmxlZnQscC50YWJsZSk7Zj09cC50b3AmJihkKz1yLm5vZGVTaXplKTtmb3IodmFyIHY9cC5sZWZ0LG09MDt2PHAucmlnaHQ7disrLG0rKyl2PT1wLmxlZnQmJmY9PXAudG9wfHx1Lmluc2VydChsPXUubWFwcGluZy5tYXAoZCtwLnRhYmxlU3RhcnQsMSksdCh7bm9kZTpyLHJvdzpmLGNvbDp2fSkuY3JlYXRlQW5kRmlsbChhW21dKSl9dS5zZXROb2RlTWFya3VwKG8sdCh7bm9kZTpyLHJvdzpwLnRvcCxjb2w6cC5sZWZ0fSksYVswXSksaSBpbnN0YW5jZW9mIEkmJnUuc2V0U2VsZWN0aW9uKG5ldyBJKHUuZG9jLnJlc29sdmUoaS4kYW5jaG9yQ2VsbC5wb3MpLGwmJnUuZG9jLnJlc29sdmUobCkpKSxuKHUpfXJldHVybiEwfX1mdW5jdGlvbiBEdCh0LGUpe3JldHVybiBmdW5jdGlvbihuLHIpe2lmKCFTKG4pKXJldHVybiExO3ZhciBvPUMobik7aWYoby5ub2RlQWZ0ZXIuYXR0cnNbdF09PT1lKXJldHVybiExO2lmKHIpe3ZhciBpPW4udHI7bi5zZWxlY3Rpb24gaW5zdGFuY2VvZiBJP24uc2VsZWN0aW9uLmZvckVhY2hDZWxsKChmdW5jdGlvbihuLHIpe24uYXR0cnNbdF0hPT1lJiZpLnNldE5vZGVNYXJrdXAocixudWxsLEQobi5hdHRycyx0LGUpKX0pKTppLnNldE5vZGVNYXJrdXAoby5wb3MsbnVsbCxEKG8ubm9kZUFmdGVyLmF0dHJzLHQsZSkpLHIoaSl9cmV0dXJuITB9fWZ1bmN0aW9uIHp0KHQpe3JldHVybiBmdW5jdGlvbihlLG4pe2lmKCFTKGUpKXJldHVybiExO2lmKG4pe2Zvcih2YXIgcj1xKGUuc2NoZW1hKSxvPWR0KGUpLGk9ZS50cixzPW8ubWFwLmNlbGxzSW5SZWN0KCJjb2x1bW4iPT10P25ldyBkKG8ubGVmdCwwLG8ucmlnaHQsby5tYXAuaGVpZ2h0KToicm93Ij09dD9uZXcgZCgwLG8udG9wLG8ubWFwLndpZHRoLG8uYm90dG9tKTpvKSxhPXMubWFwKChmdW5jdGlvbih0KXtyZXR1cm4gby50YWJsZS5ub2RlQXQodCl9KSksYz0wO2M8cy5sZW5ndGg7YysrKWFbY10udHlwZT09ci5oZWFkZXJfY2VsbCYmaS5zZXROb2RlTWFya3VwKG8udGFibGVTdGFydCtzW2NdLHIuY2VsbCxhW2NdLmF0dHJzKTtpZigwPT1pLnN0ZXBzLmxlbmd0aClmb3IodmFyIGw9MDtsPHMubGVuZ3RoO2wrKylpLnNldE5vZGVNYXJrdXAoby50YWJsZVN0YXJ0K3NbbF0sci5oZWFkZXJfY2VsbCxhW2xdLmF0dHJzKTtuKGkpfXJldHVybiEwfX1mdW5jdGlvbiBQdCh0LGUsbil7Zm9yKHZhciByPWUubWFwLmNlbGxzSW5SZWN0KHtsZWZ0OjAsdG9wOjAscmlnaHQ6InJvdyI9PXQ/ZS5tYXAud2lkdGg6MSxib3R0b206ImNvbHVtbiI9PXQ/ZS5tYXAuaGVpZ2h0OjF9KSxvPTA7bzxyLmxlbmd0aDtvKyspe3ZhciBpPWUudGFibGUubm9kZUF0KHJbb10pO2lmKGkmJmkudHlwZSE9PW4uaGVhZGVyX2NlbGwpcmV0dXJuITF9cmV0dXJuITB9ZnVuY3Rpb24gSXQodCxlKXtyZXR1cm4gZT1lfHx7dXNlRGVwcmVjYXRlZExvZ2ljOiExfSxlLnVzZURlcHJlY2F0ZWRMb2dpYz96dCh0KTpmdW5jdGlvbihlLG4pe2lmKCFTKGUpKXJldHVybiExO2lmKG4pe3ZhciByPXEoZS5zY2hlbWEpLG89ZHQoZSksaT1lLnRyLHM9UHQoInJvdyIsbyxyKSxhPVB0KCJjb2x1bW4iLG8sciksYz0iY29sdW1uIj09PXQ/czoicm93Ij09PXQmJmEsbD1jPzE6MCxwPSJjb2x1bW4iPT10P25ldyBkKDAsbCwxLG8ubWFwLmhlaWdodCk6InJvdyI9PXQ/bmV3IGQobCwwLG8ubWFwLndpZHRoLDEpOm8sdT0iY29sdW1uIj09dD9hP3IuY2VsbDpyLmhlYWRlcl9jZWxsOiJyb3ciPT10P3M/ci5jZWxsOnIuaGVhZGVyX2NlbGw6ci5jZWxsO28ubWFwLmNlbGxzSW5SZWN0KHApLmZvckVhY2goKGZ1bmN0aW9uKHQpe3ZhciBlPXQrby50YWJsZVN0YXJ0LG49aS5kb2Mubm9kZUF0KGUpO24mJmkuc2V0Tm9kZU1hcmt1cChlLHUsbi5hdHRycyl9KSksbihpKX1yZXR1cm4hMH19dmFyIF90PUl0KCJyb3ciLHt1c2VEZXByZWNhdGVkTG9naWM6ITB9KSxGdD1JdCgiY29sdW1uIix7dXNlRGVwcmVjYXRlZExvZ2ljOiEwfSksQnQ9SXQoImNlbGwiLHt1c2VEZXByZWNhdGVkTG9naWM6ITB9KTtmdW5jdGlvbiBqdCh0LGUpe2lmKGU8MCl7dmFyIG49dC5ub2RlQmVmb3JlO2lmKG4pcmV0dXJuIHQucG9zLW4ubm9kZVNpemU7Zm9yKHZhciByPXQuaW5kZXgoLTEpLTEsbz10LmJlZm9yZSgpO3I+PTA7ci0tKXt2YXIgaT10Lm5vZGUoLTEpLmNoaWxkKHIpO2lmKGkuY2hpbGRDb3VudClyZXR1cm4gby0xLWkubGFzdENoaWxkLm5vZGVTaXplO28tPWkubm9kZVNpemV9fWVsc2V7aWYodC5pbmRleCgpPHQucGFyZW50LmNoaWxkQ291bnQtMSlyZXR1cm4gdC5wb3MrdC5ub2RlQWZ0ZXIubm9kZVNpemU7Zm9yKHZhciBzPXQubm9kZSgtMSksYT10LmluZGV4QWZ0ZXIoLTEpLGM9dC5hZnRlcigpO2E8cy5jaGlsZENvdW50O2ErKyl7dmFyIGw9cy5jaGlsZChhKTtpZihsLmNoaWxkQ291bnQpcmV0dXJuIGMrMTtjKz1sLm5vZGVTaXplfX19ZnVuY3Rpb24gJHQodCl7cmV0dXJuIGZ1bmN0aW9uKGUsbil7aWYoIVMoZSkpcmV0dXJuITE7dmFyIHI9anQoQyhlKSx0KTtpZihudWxsIT1yKXtpZihuKXt2YXIgbz1lLmRvYy5yZXNvbHZlKHIpO24oZS50ci5zZXRTZWxlY3Rpb24oaS5UZXh0U2VsZWN0aW9uLmJldHdlZW4obyxUKG8pKSkuc2Nyb2xsSW50b1ZpZXcoKSl9cmV0dXJuITB9fX1mdW5jdGlvbiBWdCh0LGUpe2Zvcih2YXIgbj10LnNlbGVjdGlvbi4kYW5jaG9yLHI9bi5kZXB0aDtyPjA7ci0tKXt2YXIgbz1uLm5vZGUocik7aWYoInRhYmxlIj09by50eXBlLnNwZWMudGFibGVSb2xlKXJldHVybiBlJiZlKHQudHIuZGVsZXRlKG4uYmVmb3JlKHIpLG4uYWZ0ZXIocikpLnNjcm9sbEludG9WaWV3KCkpLCEwfXJldHVybiExfXZhciBMdD1mdW5jdGlvbih0LGUpe3RoaXMubm9kZT10LHRoaXMuY2VsbE1pbldpZHRoPWUsdGhpcy5kb209ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2IiksdGhpcy5kb20uY2xhc3NOYW1lPSJ0YWJsZVdyYXBwZXIiLHRoaXMudGFibGU9dGhpcy5kb20uYXBwZW5kQ2hpbGQoZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgidGFibGUiKSksdGhpcy5jb2xncm91cD10aGlzLnRhYmxlLmFwcGVuZENoaWxkKGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImNvbGdyb3VwIikpLEp0KHQsdGhpcy5jb2xncm91cCx0aGlzLnRhYmxlLGUpLHRoaXMuY29udGVudERPTT10aGlzLnRhYmxlLmFwcGVuZENoaWxkKGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoInRib2R5IikpfTtmdW5jdGlvbiBKdCh0LGUsbixyLG8saSl7Zm9yKHZhciBzPTAsYT0hMCxjPWUuZmlyc3RDaGlsZCxsPXQuZmlyc3RDaGlsZCxwPTAsdT0wO3A8bC5jaGlsZENvdW50O3ArKylmb3IodmFyIGg9bC5jaGlsZChwKS5hdHRycyxmPWguY29sc3BhbixkPWguY29sd2lkdGgsdj0wO3Y8Zjt2KyssdSsrKXt2YXIgbT1vPT11P2k6ZCYmZFt2XSx5PW0/bSsicHgiOiIiO3MrPW18fHIsbXx8KGE9ITEpLGM/KGMuc3R5bGUud2lkdGghPXkmJihjLnN0eWxlLndpZHRoPXkpLGM9Yy5uZXh0U2libGluZyk6ZS5hcHBlbmRDaGlsZChkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJjb2wiKSkuc3R5bGUud2lkdGg9eX13aGlsZShjKXt2YXIgZz1jLm5leHRTaWJsaW5nO2MucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChjKSxjPWd9YT8obi5zdHlsZS53aWR0aD1zKyJweCIsbi5zdHlsZS5taW5XaWR0aD0iIik6KG4uc3R5bGUud2lkdGg9IiIsbi5zdHlsZS5taW5XaWR0aD1zKyJweCIpfUx0LnByb3RvdHlwZS51cGRhdGU9ZnVuY3Rpb24odCl7cmV0dXJuIHQudHlwZT09dGhpcy5ub2RlLnR5cGUmJih0aGlzLm5vZGU9dCxKdCh0LHRoaXMuY29sZ3JvdXAsdGhpcy50YWJsZSx0aGlzLmNlbGxNaW5XaWR0aCksITApfSxMdC5wcm90b3R5cGUuaWdub3JlTXV0YXRpb249ZnVuY3Rpb24odCl7cmV0dXJuImF0dHJpYnV0ZXMiPT10LnR5cGUmJih0LnRhcmdldD09dGhpcy50YWJsZXx8dGhpcy5jb2xncm91cC5jb250YWlucyh0LnRhcmdldCkpfTt2YXIgcXQ9bmV3IGkuUGx1Z2luS2V5KCJ0YWJsZUNvbHVtblJlc2l6aW5nIik7ZnVuY3Rpb24gV3QodCl7dm9pZCAwPT09dCYmKHQ9e30pO3ZhciBlPXQuaGFuZGxlV2lkdGg7dm9pZCAwPT09ZSYmKGU9NSk7dmFyIG49dC5jZWxsTWluV2lkdGg7dm9pZCAwPT09biYmKG49MjUpO3ZhciByPXQuVmlldzt2b2lkIDA9PT1yJiYocj1MdCk7dmFyIG89dC5sYXN0Q29sdW1uUmVzaXphYmxlO3ZvaWQgMD09PW8mJihvPSEwKTt2YXIgcz1uZXcgaS5QbHVnaW4oe2tleTpxdCxzdGF0ZTp7aW5pdDpmdW5jdGlvbih0LGUpe3JldHVybiB0aGlzLnNwZWMucHJvcHMubm9kZVZpZXdzW3EoZS5zY2hlbWEpLnRhYmxlLm5hbWVdPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIG5ldyByKHQsbixlKX0sbmV3IEh0KC0xLCExKX0sYXBwbHk6ZnVuY3Rpb24odCxlKXtyZXR1cm4gZS5hcHBseSh0KX19LHByb3BzOnthdHRyaWJ1dGVzOmZ1bmN0aW9uKHQpe3ZhciBlPXF0LmdldFN0YXRlKHQpO3JldHVybiBlLmFjdGl2ZUhhbmRsZT4tMT97Y2xhc3M6InJlc2l6ZS1jdXJzb3IifTpudWxsfSxoYW5kbGVET01FdmVudHM6e21vdXNlbW92ZTpmdW5jdGlvbih0LHIpe0t0KHQscixlLG4sbyl9LG1vdXNlbGVhdmU6ZnVuY3Rpb24odCl7VXQodCl9LG1vdXNlZG93bjpmdW5jdGlvbih0LGUpe0d0KHQsZSxuKX19LGRlY29yYXRpb25zOmZ1bmN0aW9uKHQpe3ZhciBlPXF0LmdldFN0YXRlKHQpO2lmKGUuYWN0aXZlSGFuZGxlPi0xKXJldHVybiBvZSh0LGUuYWN0aXZlSGFuZGxlKX0sbm9kZVZpZXdzOnt9fX0pO3JldHVybiBzfXZhciBIdD1mdW5jdGlvbih0LGUpe3RoaXMuYWN0aXZlSGFuZGxlPXQsdGhpcy5kcmFnZ2luZz1lfTtmdW5jdGlvbiBLdCh0LGUsbixyLG8pe3ZhciBpPXF0LmdldFN0YXRlKHQuc3RhdGUpO2lmKCFpLmRyYWdnaW5nKXt2YXIgcz1ZdChlLnRhcmdldCksYT0tMTtpZihzKXt2YXIgYz1zLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLGw9Yy5sZWZ0LHA9Yy5yaWdodDtlLmNsaWVudFgtbDw9bj9hPVF0KHQsZSwibGVmdCIpOnAtZS5jbGllbnRYPD1uJiYoYT1RdCh0LGUsInJpZ2h0IikpfWlmKGEhPWkuYWN0aXZlSGFuZGxlKXtpZighbyYmLTEhPT1hKXt2YXIgdT10LnN0YXRlLmRvYy5yZXNvbHZlKGEpLGg9dS5ub2RlKC0xKSxmPXYuZ2V0KGgpLGQ9dS5zdGFydCgtMSksbT1mLmNvbENvdW50KHUucG9zLWQpK3Uubm9kZUFmdGVyLmF0dHJzLmNvbHNwYW4tMTtpZihtPT1mLndpZHRoLTEpcmV0dXJufXRlKHQsYSl9fX1mdW5jdGlvbiBVdCh0KXt2YXIgZT1xdC5nZXRTdGF0ZSh0LnN0YXRlKTtlLmFjdGl2ZUhhbmRsZT4tMSYmIWUuZHJhZ2dpbmcmJnRlKHQsLTEpfWZ1bmN0aW9uIEd0KHQsZSxuKXt2YXIgcj1xdC5nZXRTdGF0ZSh0LnN0YXRlKTtpZigtMT09ci5hY3RpdmVIYW5kbGV8fHIuZHJhZ2dpbmcpcmV0dXJuITE7dmFyIG89dC5zdGF0ZS5kb2Mubm9kZUF0KHIuYWN0aXZlSGFuZGxlKSxpPVh0KHQsci5hY3RpdmVIYW5kbGUsby5hdHRycyk7ZnVuY3Rpb24gcyhlKXt3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcigibW91c2V1cCIscyksd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoIm1vdXNlbW92ZSIsYSk7dmFyIHI9cXQuZ2V0U3RhdGUodC5zdGF0ZSk7ci5kcmFnZ2luZyYmKGVlKHQsci5hY3RpdmVIYW5kbGUsWnQoci5kcmFnZ2luZyxlLG4pKSx0LmRpc3BhdGNoKHQuc3RhdGUudHIuc2V0TWV0YShxdCx7c2V0RHJhZ2dpbmc6bnVsbH0pKSl9ZnVuY3Rpb24gYShlKXtpZighZS53aGljaClyZXR1cm4gcyhlKTt2YXIgcj1xdC5nZXRTdGF0ZSh0LnN0YXRlKSxvPVp0KHIuZHJhZ2dpbmcsZSxuKTtuZSh0LHIuYWN0aXZlSGFuZGxlLG8sbil9cmV0dXJuIHQuZGlzcGF0Y2godC5zdGF0ZS50ci5zZXRNZXRhKHF0LHtzZXREcmFnZ2luZzp7c3RhcnRYOmUuY2xpZW50WCxzdGFydFdpZHRoOml9fSkpLHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCJtb3VzZXVwIixzKSx3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigibW91c2Vtb3ZlIixhKSxlLnByZXZlbnREZWZhdWx0KCksITB9ZnVuY3Rpb24gWHQodCxlLG4pe3ZhciByPW4uY29sc3BhbixvPW4uY29sd2lkdGgsaT1vJiZvW28ubGVuZ3RoLTFdO2lmKGkpcmV0dXJuIGk7dmFyIHM9dC5kb21BdFBvcyhlKSxhPXMubm9kZS5jaGlsZE5vZGVzW3Mub2Zmc2V0XSxjPWEub2Zmc2V0V2lkdGgsbD1yO2lmKG8pZm9yKHZhciBwPTA7cDxyO3ArKylvW3BdJiYoYy09b1twXSxsLS0pO3JldHVybiBjL2x9ZnVuY3Rpb24gWXQodCl7d2hpbGUodCYmIlREIiE9dC5ub2RlTmFtZSYmIlRIIiE9dC5ub2RlTmFtZSl0PXQuY2xhc3NMaXN0LmNvbnRhaW5zKCJQcm9zZU1pcnJvciIpP251bGw6dC5wYXJlbnROb2RlO3JldHVybiB0fWZ1bmN0aW9uIFF0KHQsZSxuKXt2YXIgcj10LnBvc0F0Q29vcmRzKHtsZWZ0OmUuY2xpZW50WCx0b3A6ZS5jbGllbnRZfSksbz1yLnBvcyxpPWIodC5zdGF0ZS5kb2MucmVzb2x2ZShvKSk7aWYoIWkpcmV0dXJuLTE7aWYoInJpZ2h0Ij09bilyZXR1cm4gaS5wb3M7dmFyIHM9di5nZXQoaS5ub2RlKC0xKSksYT1pLnN0YXJ0KC0xKSxjPXMubWFwLmluZGV4T2YoaS5wb3MtYSk7cmV0dXJuIGMlcy53aWR0aD09MD8tMTphK3MubWFwW2MtMV19ZnVuY3Rpb24gWnQodCxlLG4pe3ZhciByPWUuY2xpZW50WC10LnN0YXJ0WDtyZXR1cm4gTWF0aC5tYXgobix0LnN0YXJ0V2lkdGgrcil9ZnVuY3Rpb24gdGUodCxlKXt0LmRpc3BhdGNoKHQuc3RhdGUudHIuc2V0TWV0YShxdCx7c2V0SGFuZGxlOmV9KSl9ZnVuY3Rpb24gZWUodCxlLG4pe2Zvcih2YXIgcj10LnN0YXRlLmRvYy5yZXNvbHZlKGUpLG89ci5ub2RlKC0xKSxpPXYuZ2V0KG8pLHM9ci5zdGFydCgtMSksYT1pLmNvbENvdW50KHIucG9zLXMpK3Iubm9kZUFmdGVyLmF0dHJzLmNvbHNwYW4tMSxjPXQuc3RhdGUudHIsbD0wO2w8aS5oZWlnaHQ7bCsrKXt2YXIgcD1sKmkud2lkdGgrYTtpZighbHx8aS5tYXBbcF0hPWkubWFwW3AtaS53aWR0aF0pe3ZhciB1PWkubWFwW3BdLGg9by5ub2RlQXQodSksZj1oLmF0dHJzLGQ9MT09Zi5jb2xzcGFuPzA6YS1pLmNvbENvdW50KHUpO2lmKCFmLmNvbHdpZHRofHxmLmNvbHdpZHRoW2RdIT1uKXt2YXIgbT1mLmNvbHdpZHRoP2YuY29sd2lkdGguc2xpY2UoKTpyZShmLmNvbHNwYW4pO21bZF09bixjLnNldE5vZGVNYXJrdXAocyt1LG51bGwsRChmLCJjb2x3aWR0aCIsbSkpfX19Yy5kb2NDaGFuZ2VkJiZ0LmRpc3BhdGNoKGMpfWZ1bmN0aW9uIG5lKHQsZSxuLHIpe3ZhciBvPXQuc3RhdGUuZG9jLnJlc29sdmUoZSksaT1vLm5vZGUoLTEpLHM9by5zdGFydCgtMSksYT12LmdldChpKS5jb2xDb3VudChvLnBvcy1zKStvLm5vZGVBZnRlci5hdHRycy5jb2xzcGFuLTEsYz10LmRvbUF0UG9zKG8uc3RhcnQoLTEpKS5ub2RlO3doaWxlKCJUQUJMRSIhPWMubm9kZU5hbWUpYz1jLnBhcmVudE5vZGU7SnQoaSxjLmZpcnN0Q2hpbGQsYyxyLGEsbil9ZnVuY3Rpb24gcmUodCl7Zm9yKHZhciBlPVtdLG49MDtuPHQ7bisrKWUucHVzaCgwKTtyZXR1cm4gZX1mdW5jdGlvbiBvZSh0LGUpe2Zvcih2YXIgbj1bXSxyPXQuZG9jLnJlc29sdmUoZSksbz1yLm5vZGUoLTEpLGk9di5nZXQobyksYT1yLnN0YXJ0KC0xKSxjPWkuY29sQ291bnQoci5wb3MtYSkrci5ub2RlQWZ0ZXIuYXR0cnMuY29sc3BhbixsPTA7bDxpLmhlaWdodDtsKyspe3ZhciBwPWMrbCppLndpZHRoLTE7aWYoKGM9PWkud2lkdGh8fGkubWFwW3BdIT1pLm1hcFtwKzFdKSYmKDA9PWx8fGkubWFwW3AtMV0hPWkubWFwW3AtMS1pLndpZHRoXSkpe3ZhciB1PWkubWFwW3BdLGg9YSt1K28ubm9kZUF0KHUpLm5vZGVTaXplLTEsZj1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKTtmLmNsYXNzTmFtZT0iY29sdW1uLXJlc2l6ZS1oYW5kbGUiLG4ucHVzaChzLkRlY29yYXRpb24ud2lkZ2V0KGgsZikpfX1yZXR1cm4gcy5EZWNvcmF0aW9uU2V0LmNyZWF0ZSh0LmRvYyxuKX1mdW5jdGlvbiBpZSh0KXt2b2lkIDA9PT10JiYodD17fSk7dmFyIGU9dC5hbGxvd1RhYmxlTm9kZVNlbGVjdGlvbjtyZXR1cm4gdm9pZCAwPT09ZSYmKGU9ITEpLG5ldyBpLlBsdWdpbih7a2V5Ongsc3RhdGU6e2luaXQ6ZnVuY3Rpb24oKXtyZXR1cm4gbnVsbH0sYXBwbHk6ZnVuY3Rpb24odCxlKXt2YXIgbj10LmdldE1ldGEoeCk7aWYobnVsbCE9bilyZXR1cm4tMT09bj9udWxsOm47aWYobnVsbD09ZXx8IXQuZG9jQ2hhbmdlZClyZXR1cm4gZTt2YXIgcj10Lm1hcHBpbmcubWFwUmVzdWx0KGUpLG89ci5kZWxldGVkLGk9ci5wb3M7cmV0dXJuIG8/bnVsbDppfX0scHJvcHM6e2RlY29yYXRpb25zOkYsaGFuZGxlRE9NRXZlbnRzOnttb3VzZWRvd246c3R9LGNyZWF0ZVNlbGVjdGlvbkJldHdlZW46ZnVuY3Rpb24odCl7aWYobnVsbCE9eC5nZXRTdGF0ZSh0LnN0YXRlKSlyZXR1cm4gdC5zdGF0ZS5zZWxlY3Rpb259LGhhbmRsZVRyaXBsZUNsaWNrOm90LGhhbmRsZUtleURvd246WixoYW5kbGVQYXN0ZTppdH0sYXBwZW5kVHJhbnNhY3Rpb246ZnVuY3Rpb24odCxuLHIpe3JldHVybiAkKHIsaHQocixuKSxlKX19KX1IdC5wcm90b3R5cGUuYXBwbHk9ZnVuY3Rpb24odCl7dmFyIGU9dGhpcyxuPXQuZ2V0TWV0YShxdCk7aWYobiYmbnVsbCE9bi5zZXRIYW5kbGUpcmV0dXJuIG5ldyBIdChuLnNldEhhbmRsZSxudWxsKTtpZihuJiZ2b2lkIDAhPT1uLnNldERyYWdnaW5nKXJldHVybiBuZXcgSHQoZS5hY3RpdmVIYW5kbGUsbi5zZXREcmFnZ2luZyk7aWYoZS5hY3RpdmVIYW5kbGU+LTEmJnQuZG9jQ2hhbmdlZCl7dmFyIHI9dC5tYXBwaW5nLm1hcChlLmFjdGl2ZUhhbmRsZSwtMSk7TSh0LmRvYy5yZXNvbHZlKHIpKXx8KHI9bnVsbCksZT1uZXcgSHQocixlLmRyYWdnaW5nKX1yZXR1cm4gZX0sZS50YWJsZUVkaXRpbmc9aWUsZS5maXhUYWJsZXM9aHQsZS5oYW5kbGVQYXN0ZT1pdCxlLmZpeFRhYmxlc0tleT1wdCxlLnRhYmxlRWRpdGluZ0tleT14LGUuY2VsbEFyb3VuZD1iLGUuaXNJblRhYmxlPVMsZS5zZWxlY3Rpb25DZWxsPUMsZS5tb3ZlQ2VsbEZvcndhcmQ9VCxlLmluU2FtZVRhYmxlPU4sZS5maW5kQ2VsbD1FLGUuY29sQ291bnQ9QSxlLm5leHRDZWxsPVIsZS50YWJsZU5vZGVzPUosZS5DZWxsU2VsZWN0aW9uPUksZS5UYWJsZU1hcD12LGUuY29sdW1uUmVzaXppbmc9V3QsZS5jb2x1bW5SZXNpemluZ1BsdWdpbktleT1xdCxlLnVwZGF0ZUNvbHVtbnNPblJlc2l6ZT1KdCxlLl9fcGFzdGVkQ2VsbHM9VyxlLl9faW5zZXJ0Q2VsbHM9USxlLl9fY2xpcENlbGxzPVUsZS5hZGRDb2x1bW49bXQsZS5hZGRDb2x1bW5CZWZvcmU9eXQsZS5hZGRDb2x1bW5BZnRlcj1ndCxlLnJlbW92ZUNvbHVtbj13dCxlLmRlbGV0ZUNvbHVtbj14dCxlLmFkZFJvdz1rdCxlLmFkZFJvd0JlZm9yZT1TdCxlLmFkZFJvd0FmdGVyPUN0LGUucmVtb3ZlUm93PU90LGUuZGVsZXRlUm93PU10LGUubWVyZ2VDZWxscz1FdCxlLnNwbGl0Q2VsbD1BdCxlLnNwbGl0Q2VsbFdpdGhUeXBlPVJ0LGUuc2V0Q2VsbEF0dHI9RHQsZS50b2dnbGVIZWFkZXI9SXQsZS50b2dnbGVIZWFkZXJSb3c9X3QsZS50b2dnbGVIZWFkZXJDb2x1bW49RnQsZS50b2dnbGVIZWFkZXJDZWxsPUJ0LGUuZ29Ub05leHRDZWxsPSR0LGUuZGVsZXRlVGFibGU9VnR9LGZmYzE6ZnVuY3Rpb24odCxlLG4pe3ZhciByPW4oIjVjYTEiKSxvPW4oIjUwNGMiKSghMCk7cihyLlMsIk9iamVjdCIse2VudHJpZXM6ZnVuY3Rpb24odCl7cmV0dXJuIG8odCl9fSl9fSlbImRlZmF1bHQiXX0pKTs=\"")
}
