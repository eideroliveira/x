// Code generated by github.com/gobuffalo/packr. DO NOT EDIT.

package tiptap

import "github.com/gobuffalo/packr"

// You can use the "packr clean" command to clean up this,
// and any other packr generated files.
func init() {
	_ = packr.PackJSONBytes("./tiptapjs/dist/", "tiptap.css", "\"LnRpcHRhcC1lZGl0b3J7cG9zaXRpb246cmVsYXRpdmV9LnRpcHRhcC1lZGl0b3JfX2NvbnRlbnR7b3ZlcmZsb3ctd3JhcDpicmVhay13b3JkO3dvcmQtd3JhcDpicmVhay13b3JkO3dvcmQtYnJlYWs6YnJlYWstd29yZH0udGlwdGFwLWVkaXRvcl9fY29udGVudCAqe2NhcmV0LWNvbG9yOmN1cnJlbnRDb2xvcn0udGlwdGFwLWVkaXRvcl9fY29udGVudCBibG9ja3F1b3RlLC50aXB0YXAtZWRpdG9yX19jb250ZW50IGgxLC50aXB0YXAtZWRpdG9yX19jb250ZW50IGgyLC50aXB0YXAtZWRpdG9yX19jb250ZW50IGgzLC50aXB0YXAtZWRpdG9yX19jb250ZW50IG9sLC50aXB0YXAtZWRpdG9yX19jb250ZW50IHAsLnRpcHRhcC1lZGl0b3JfX2NvbnRlbnQgcHJlLC50aXB0YXAtZWRpdG9yX19jb250ZW50IHVse21hcmdpbjoxcmVtIDB9LnRpcHRhcC1lZGl0b3JfX2NvbnRlbnQgYmxvY2txdW90ZTpmaXJzdC1jaGlsZCwudGlwdGFwLWVkaXRvcl9fY29udGVudCBoMTpmaXJzdC1jaGlsZCwudGlwdGFwLWVkaXRvcl9fY29udGVudCBoMjpmaXJzdC1jaGlsZCwudGlwdGFwLWVkaXRvcl9fY29udGVudCBoMzpmaXJzdC1jaGlsZCwudGlwdGFwLWVkaXRvcl9fY29udGVudCBvbDpmaXJzdC1jaGlsZCwudGlwdGFwLWVkaXRvcl9fY29udGVudCBwOmZpcnN0LWNoaWxkLC50aXB0YXAtZWRpdG9yX19jb250ZW50IHByZTpmaXJzdC1jaGlsZCwudGlwdGFwLWVkaXRvcl9fY29udGVudCB1bDpmaXJzdC1jaGlsZHttYXJnaW4tdG9wOjB9LnRpcHRhcC1lZGl0b3JfX2NvbnRlbnQgYmxvY2txdW90ZTpsYXN0LWNoaWxkLC50aXB0YXAtZWRpdG9yX19jb250ZW50IGgxOmxhc3QtY2hpbGQsLnRpcHRhcC1lZGl0b3JfX2NvbnRlbnQgaDI6bGFzdC1jaGlsZCwudGlwdGFwLWVkaXRvcl9fY29udGVudCBoMzpsYXN0LWNoaWxkLC50aXB0YXAtZWRpdG9yX19jb250ZW50IG9sOmxhc3QtY2hpbGQsLnRpcHRhcC1lZGl0b3JfX2NvbnRlbnQgcDpsYXN0LWNoaWxkLC50aXB0YXAtZWRpdG9yX19jb250ZW50IHByZTpsYXN0LWNoaWxkLC50aXB0YXAtZWRpdG9yX19jb250ZW50IHVsOmxhc3QtY2hpbGR7bWFyZ2luLWJvdHRvbTowfS50aXB0YXAtZWRpdG9yX19jb250ZW50IGgxLC50aXB0YXAtZWRpdG9yX19jb250ZW50IGgyLC50aXB0YXAtZWRpdG9yX19jb250ZW50IGgze2xpbmUtaGVpZ2h0OjEuM30udGlwdGFwLWVkaXRvcl9fY29udGVudCBwcmV7cGFkZGluZzouN3JlbSAxcmVtO2JvcmRlci1yYWRpdXM6NXB4O2JhY2tncm91bmQ6IzAwMDtjb2xvcjojZmZmO2ZvbnQtc2l6ZTouOHJlbTtvdmVyZmxvdy14OmF1dG99LnRpcHRhcC1lZGl0b3JfX2NvbnRlbnQgcHJlIGNvZGV7ZGlzcGxheTpibG9ja30udGlwdGFwLWVkaXRvcl9fY29udGVudCBwIGNvZGV7ZGlzcGxheTppbmxpbmUtYmxvY2s7cGFkZGluZzowIC40cmVtO2JvcmRlci1yYWRpdXM6NXB4O2ZvbnQtc2l6ZTouOHJlbTtmb250LXdlaWdodDo3MDA7YmFja2dyb3VuZDpyZ2JhKDAsMCwwLC4xKTtjb2xvcjpyZ2JhKDAsMCwwLC44KX0udGlwdGFwLWVkaXRvcl9fY29udGVudCBvbCwudGlwdGFwLWVkaXRvcl9fY29udGVudCB1bHtwYWRkaW5nLWxlZnQ6MXJlbX0udGlwdGFwLWVkaXRvcl9fY29udGVudCBsaT5vbCwudGlwdGFwLWVkaXRvcl9fY29udGVudCBsaT5wLC50aXB0YXAtZWRpdG9yX19jb250ZW50IGxpPnVse21hcmdpbjowfS50aXB0YXAtZWRpdG9yX19jb250ZW50IGF7Y29sb3I6aW5oZXJpdH0udGlwdGFwLWVkaXRvcl9fY29udGVudCBibG9ja3F1b3Rle2JvcmRlci1sZWZ0OjNweCBzb2xpZCByZ2JhKDAsMCwwLC4xKTtjb2xvcjpyZ2JhKDAsMCwwLC44KTtwYWRkaW5nLWxlZnQ6LjhyZW07Zm9udC1zdHlsZTppdGFsaWN9LnRpcHRhcC1lZGl0b3JfX2NvbnRlbnQgYmxvY2txdW90ZSBwe21hcmdpbjowfS50aXB0YXAtZWRpdG9yX19jb250ZW50IGltZ3ttYXgtd2lkdGg6MTAwJTtib3JkZXItcmFkaXVzOjNweH0udGlwdGFwLWVkaXRvcl9fY29udGVudCB0YWJsZXtib3JkZXItY29sbGFwc2U6Y29sbGFwc2U7dGFibGUtbGF5b3V0OmZpeGVkO3dpZHRoOjEwMCU7bWFyZ2luOjA7b3ZlcmZsb3c6aGlkZGVufS50aXB0YXAtZWRpdG9yX19jb250ZW50IHRhYmxlIHRkLC50aXB0YXAtZWRpdG9yX19jb250ZW50IHRhYmxlIHRoe21pbi13aWR0aDoxZW07Ym9yZGVyOjJweCBzb2xpZCAjZGRkO3BhZGRpbmc6M3B4IDVweDt2ZXJ0aWNhbC1hbGlnbjp0b3A7LXdlYmtpdC1ib3gtc2l6aW5nOmJvcmRlci1ib3g7Ym94LXNpemluZzpib3JkZXItYm94O3Bvc2l0aW9uOnJlbGF0aXZlfS50aXB0YXAtZWRpdG9yX19jb250ZW50IHRhYmxlIHRkPiosLnRpcHRhcC1lZGl0b3JfX2NvbnRlbnQgdGFibGUgdGg+KnttYXJnaW4tYm90dG9tOjB9LnRpcHRhcC1lZGl0b3JfX2NvbnRlbnQgdGFibGUgdGh7Zm9udC13ZWlnaHQ6NzAwO3RleHQtYWxpZ246bGVmdH0udGlwdGFwLWVkaXRvcl9fY29udGVudCB0YWJsZSAuc2VsZWN0ZWRDZWxsOmFmdGVye3otaW5kZXg6Mjtwb3NpdGlvbjphYnNvbHV0ZTtjb250ZW50OiIiO2xlZnQ6MDtyaWdodDowO3RvcDowO2JvdHRvbTowO2JhY2tncm91bmQ6cmdiYSgyMDAsMjAwLDI1NSwuNCk7cG9pbnRlci1ldmVudHM6bm9uZX0udGlwdGFwLWVkaXRvcl9fY29udGVudCB0YWJsZSAuY29sdW1uLXJlc2l6ZS1oYW5kbGV7cG9zaXRpb246YWJzb2x1dGU7cmlnaHQ6LTJweDt0b3A6MDtib3R0b206MDt3aWR0aDo0cHg7ei1pbmRleDoyMDtiYWNrZ3JvdW5kLWNvbG9yOiNhZGY7cG9pbnRlci1ldmVudHM6bm9uZX0udGlwdGFwLWVkaXRvcl9fY29udGVudCAudGFibGVXcmFwcGVye21hcmdpbjoxZW0gMDtvdmVyZmxvdy14OmF1dG99LnRpcHRhcC1lZGl0b3JfX2NvbnRlbnQgLnJlc2l6ZS1jdXJzb3J7Y3Vyc29yOmV3LXJlc2l6ZTtjdXJzb3I6Y29sLXJlc2l6ZX0ubWVudWJhcnttYXJnaW4tYm90dG9tOjFyZW07LXdlYmtpdC10cmFuc2l0aW9uOnZpc2liaWxpdHkgLjJzIC40cyxvcGFjaXR5IC4ycyAuNHM7dHJhbnNpdGlvbjp2aXNpYmlsaXR5IC4ycyAuNHMsb3BhY2l0eSAuMnMgLjRzfS5tZW51YmFyLmlzLWhpZGRlbnt2aXNpYmlsaXR5OmhpZGRlbjtvcGFjaXR5OjB9Lm1lbnViYXIuaXMtZm9jdXNlZHt2aXNpYmlsaXR5OnZpc2libGU7b3BhY2l0eToxOy13ZWJraXQtdHJhbnNpdGlvbjp2aXNpYmlsaXR5IC4ycyxvcGFjaXR5IC4yczt0cmFuc2l0aW9uOnZpc2liaWxpdHkgLjJzLG9wYWNpdHkgLjJzfS5tZW51YmFyX19idXR0b257Zm9udC13ZWlnaHQ6NzAwO2Rpc3BsYXk6LXdlYmtpdC1pbmxpbmUtYm94O2Rpc3BsYXk6LW1zLWlubGluZS1mbGV4Ym94O2Rpc3BsYXk6aW5saW5lLWZsZXg7YmFja2dyb3VuZDp0cmFuc3BhcmVudDtib3JkZXI6MDtjb2xvcjojMDAwO3BhZGRpbmc6LjJyZW0gLjVyZW07bWFyZ2luLXJpZ2h0Oi4ycmVtO2JvcmRlci1yYWRpdXM6M3B4O2N1cnNvcjpwb2ludGVyfS5tZW51YmFyX19idXR0b246aG92ZXJ7YmFja2dyb3VuZC1jb2xvcjpyZ2JhKDAsMCwwLC4wNSl9Lm1lbnViYXJfX2J1dHRvbi5pcy1hY3RpdmV7YmFja2dyb3VuZC1jb2xvcjpyZ2JhKDAsMCwwLC4xKX0ubWVudWJhciBzcGFuLm1lbnViYXJfX2J1dHRvbntmb250LXNpemU6MTMuMzMzM3B4fS5tZW51YnViYmxle3Bvc2l0aW9uOmFic29sdXRlO2Rpc3BsYXk6LXdlYmtpdC1ib3g7ZGlzcGxheTotbXMtZmxleGJveDtkaXNwbGF5OmZsZXg7ei1pbmRleDoyMDtiYWNrZ3JvdW5kOiMwMDA7Ym9yZGVyLXJhZGl1czo1cHg7cGFkZGluZzouM3JlbTttYXJnaW4tYm90dG9tOi41cmVtOy13ZWJraXQtdHJhbnNmb3JtOnRyYW5zbGF0ZVgoLTUwJSk7dHJhbnNmb3JtOnRyYW5zbGF0ZVgoLTUwJSk7dmlzaWJpbGl0eTpoaWRkZW47b3BhY2l0eTowOy13ZWJraXQtdHJhbnNpdGlvbjpvcGFjaXR5IC4ycyx2aXNpYmlsaXR5IC4yczt0cmFuc2l0aW9uOm9wYWNpdHkgLjJzLHZpc2liaWxpdHkgLjJzfS5tZW51YnViYmxlLmlzLWFjdGl2ZXtvcGFjaXR5OjE7dmlzaWJpbGl0eTp2aXNpYmxlfS5tZW51YnViYmxlX19idXR0b257ZGlzcGxheTotd2Via2l0LWlubGluZS1ib3g7ZGlzcGxheTotbXMtaW5saW5lLWZsZXhib3g7ZGlzcGxheTppbmxpbmUtZmxleDtiYWNrZ3JvdW5kOnRyYW5zcGFyZW50O2JvcmRlcjowO2NvbG9yOiNmZmY7cGFkZGluZzouMnJlbSAuNXJlbTttYXJnaW4tcmlnaHQ6LjJyZW07Ym9yZGVyLXJhZGl1czozcHg7Y3Vyc29yOnBvaW50ZXJ9Lm1lbnVidWJibGVfX2J1dHRvbjpsYXN0LWNoaWxke21hcmdpbi1yaWdodDowfS5tZW51YnViYmxlX19idXR0b246aG92ZXJ7YmFja2dyb3VuZC1jb2xvcjpoc2xhKDAsMCUsMTAwJSwuMSl9Lm1lbnVidWJibGVfX2J1dHRvbi5pcy1hY3RpdmV7YmFja2dyb3VuZC1jb2xvcjpoc2xhKDAsMCUsMTAwJSwuMil9Lm1lbnVidWJibGVfX2Zvcm17ZGlzcGxheTotd2Via2l0LWJveDtkaXNwbGF5Oi1tcy1mbGV4Ym94O2Rpc3BsYXk6ZmxleDstd2Via2l0LWJveC1hbGlnbjpjZW50ZXI7LW1zLWZsZXgtYWxpZ246Y2VudGVyO2FsaWduLWl0ZW1zOmNlbnRlcn0ubWVudWJ1YmJsZV9faW5wdXR7Zm9udDppbmhlcml0O2JvcmRlcjpub25lO2JhY2tncm91bmQ6dHJhbnNwYXJlbnQ7Y29sb3I6I2ZmZn0uaWNvbltkYXRhLXYtZTU5Zjc4MzJde3Bvc2l0aW9uOnJlbGF0aXZlO2Rpc3BsYXk6aW5saW5lLWJsb2NrO3ZlcnRpY2FsLWFsaWduOm1pZGRsZTt3aWR0aDouOHJlbTtoZWlnaHQ6LjhyZW07bWFyZ2luOjAgLjNyZW07dG9wOi4wNXJlbTtmaWxsOmN1cnJlbnRDb2xvcn0uaWNvbiBzdmdbZGF0YS12LWU1OWY3ODMyXXtkaXNwbGF5OmlubGluZS1ibG9jazt2ZXJ0aWNhbC1hbGlnbjp0b3A7d2lkdGg6MTAwJTtoZWlnaHQ6MTAwJX0uaWNvbltkYXRhLXYtZTU5Zjc4MzJdOmZpcnN0LWNoaWxke21hcmdpbi1sZWZ0OjB9Lmljb25bZGF0YS12LWU1OWY3ODMyXTpsYXN0LWNoaWxke21hcmdpbi1yaWdodDowfQ==\"")
	_ = packr.PackJSONBytes("./tiptapjs/dist/", "tiptap.umd.min.js", "\"KGZ1bmN0aW9uKHQsZSl7Im9iamVjdCI9PT10eXBlb2YgZXhwb3J0cyYmIm9iamVjdCI9PT10eXBlb2YgbW9kdWxlP21vZHVsZS5leHBvcnRzPWUocmVxdWlyZSgiVnVlIikpOiJmdW5jdGlvbiI9PT10eXBlb2YgZGVmaW5lJiZkZWZpbmUuYW1kP2RlZmluZShbIlZ1ZSJdLGUpOiJvYmplY3QiPT09dHlwZW9mIGV4cG9ydHM/ZXhwb3J0c1sidGlwdGFwIl09ZShyZXF1aXJlKCJWdWUiKSk6dFsidGlwdGFwIl09ZSh0WyJWdWUiXSl9KSgidW5kZWZpbmVkIiE9PXR5cGVvZiBzZWxmP3NlbGY6dGhpcywoZnVuY3Rpb24odCl7cmV0dXJuIGZ1bmN0aW9uKHQpe3ZhciBlPXt9O2Z1bmN0aW9uIG4ocil7aWYoZVtyXSlyZXR1cm4gZVtyXS5leHBvcnRzO3ZhciBvPWVbcl09e2k6cixsOiExLGV4cG9ydHM6e319O3JldHVybiB0W3JdLmNhbGwoby5leHBvcnRzLG8sby5leHBvcnRzLG4pLG8ubD0hMCxvLmV4cG9ydHN9cmV0dXJuIG4ubT10LG4uYz1lLG4uZD1mdW5jdGlvbih0LGUscil7bi5vKHQsZSl8fE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LGUse2VudW1lcmFibGU6ITAsZ2V0OnJ9KX0sbi5yPWZ1bmN0aW9uKHQpeyJ1bmRlZmluZWQiIT09dHlwZW9mIFN5bWJvbCYmU3ltYm9sLnRvU3RyaW5nVGFnJiZPYmplY3QuZGVmaW5lUHJvcGVydHkodCxTeW1ib2wudG9TdHJpbmdUYWcse3ZhbHVlOiJNb2R1bGUifSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pfSxuLnQ9ZnVuY3Rpb24odCxlKXtpZigxJmUmJih0PW4odCkpLDgmZSlyZXR1cm4gdDtpZig0JmUmJiJvYmplY3QiPT09dHlwZW9mIHQmJnQmJnQuX19lc01vZHVsZSlyZXR1cm4gdDt2YXIgcj1PYmplY3QuY3JlYXRlKG51bGwpO2lmKG4ucihyKSxPYmplY3QuZGVmaW5lUHJvcGVydHkociwiZGVmYXVsdCIse2VudW1lcmFibGU6ITAsdmFsdWU6dH0pLDImZSYmInN0cmluZyIhPXR5cGVvZiB0KWZvcih2YXIgbyBpbiB0KW4uZChyLG8sZnVuY3Rpb24oZSl7cmV0dXJuIHRbZV19LmJpbmQobnVsbCxvKSk7cmV0dXJuIHJ9LG4ubj1mdW5jdGlvbih0KXt2YXIgZT10JiZ0Ll9fZXNNb2R1bGU/ZnVuY3Rpb24oKXtyZXR1cm4gdFsiZGVmYXVsdCJdfTpmdW5jdGlvbigpe3JldHVybiB0fTtyZXR1cm4gbi5kKGUsImEiLGUpLGV9LG4ubz1mdW5jdGlvbih0LGUpe3JldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwodCxlKX0sbi5wPSIiLG4obi5zPSJmYWUzIil9KHsiMDBlZSI6ZnVuY3Rpb24odCxlLG4pe3ZhciByPW4oImI2MjIiKSxvPXIoInRvU3RyaW5nVGFnIiksaT17fTtpW29dPSJ6Iix0LmV4cG9ydHM9IltvYmplY3Qgel0iPT09U3RyaW5nKGkpfSwiMDEwOSI6ZnVuY3Rpb24odCxlKXt0LmV4cG9ydHM9e2Z1bmN0aW9uYWw6ITAscmVuZGVyKHQsZSl7Y29uc3R7X2M6bixfdjpyLGRhdGE6byxjaGlsZHJlbjppPVtdfT1lLHtjbGFzczpzLHN0YXRpY0NsYXNzOmEsc3R5bGU6YyxzdGF0aWNTdHlsZTp1LGF0dHJzOmw9e30sLi4uaH09bztyZXR1cm4gbigic3ZnIix7Y2xhc3M6W3MsYV0sc3R5bGU6W2MsdV0sYXR0cnM6T2JqZWN0LmFzc2lnbih7eG1sbnM6Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIix2aWV3Qm94OiIwIDAgMjQgMjQifSxsKSwuLi5ofSxpLmNvbmNhdChbbigiY2lyY2xlIix7YXR0cnM6e2N4OiIyLjUiLGN5OiIzLjk5OCIscjoiMi41In19KSxuKCJwYXRoIix7YXR0cnM6e2Q6Ik04LjUgNUgyM2ExIDEgMCAwMDAtMkg4LjVhMSAxIDAgMDAwIDJ6In19KSxuKCJjaXJjbGUiLHthdHRyczp7Y3g6IjIuNSIsY3k6IjExLjk5OCIscjoiMi41In19KSxuKCJwYXRoIix7YXR0cnM6e2Q6Ik0yMyAxMUg4LjVhMSAxIDAgMDAwIDJIMjNhMSAxIDAgMDAwLTJ6In19KSxuKCJjaXJjbGUiLHthdHRyczp7Y3g6IjIuNSIsY3k6IjE5Ljk5OCIscjoiMi41In19KSxuKCJwYXRoIix7YXR0cnM6e2Q6Ik0yMyAxOUg4LjVhMSAxIDAgMDAwIDJIMjNhMSAxIDAgMDAwLTJ6In19KV0pKX19fSwiMDM2NiI6ZnVuY3Rpb24odCxlLG4pe3ZhciByPW4oIjFjMGIiKTt0LmV4cG9ydHM9ZnVuY3Rpb24odCxlLG4pe2lmKHIodCksdm9pZCAwPT09ZSlyZXR1cm4gdDtzd2l0Y2gobil7Y2FzZSAwOnJldHVybiBmdW5jdGlvbigpe3JldHVybiB0LmNhbGwoZSl9O2Nhc2UgMTpyZXR1cm4gZnVuY3Rpb24obil7cmV0dXJuIHQuY2FsbChlLG4pfTtjYXNlIDI6cmV0dXJuIGZ1bmN0aW9uKG4scil7cmV0dXJuIHQuY2FsbChlLG4scil9O2Nhc2UgMzpyZXR1cm4gZnVuY3Rpb24obixyLG8pe3JldHVybiB0LmNhbGwoZSxuLHIsbyl9fXJldHVybiBmdW5jdGlvbigpe3JldHVybiB0LmFwcGx5KGUsYXJndW1lbnRzKX19fSwiMDU3ZiI6ZnVuY3Rpb24odCxlLG4pe3ZhciByPW4oImZjNmEiKSxvPW4oIjI0MWMiKS5mLGk9e30udG9TdHJpbmcscz0ib2JqZWN0Ij09dHlwZW9mIHdpbmRvdyYmd2luZG93JiZPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcz9PYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyh3aW5kb3cpOltdLGE9ZnVuY3Rpb24odCl7dHJ5e3JldHVybiBvKHQpfWNhdGNoKGUpe3JldHVybiBzLnNsaWNlKCl9fTt0LmV4cG9ydHMuZj1mdW5jdGlvbih0KXtyZXR1cm4gcyYmIltvYmplY3QgV2luZG93XSI9PWkuY2FsbCh0KT9hKHQpOm8ocih0KSl9fSwiMDZjZiI6ZnVuY3Rpb24odCxlLG4pe3ZhciByPW4oIjgzYWIiKSxvPW4oImQxZTciKSxpPW4oIjVjNmMiKSxzPW4oImZjNmEiKSxhPW4oImMwNGUiKSxjPW4oIjUxMzUiKSx1PW4oIjBjZmIiKSxsPU9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3I7ZS5mPXI/bDpmdW5jdGlvbih0LGUpe2lmKHQ9cyh0KSxlPWEoZSwhMCksdSl0cnl7cmV0dXJuIGwodCxlKX1jYXRjaChuKXt9aWYoYyh0LGUpKXJldHVybiBpKCFvLmYuY2FsbCh0LGUpLHRbZV0pfX0sIjA3M2UiOmZ1bmN0aW9uKHQsZSxuKXsidXNlIHN0cmljdCI7dmFyIHI9bigiNWRiZSIpLG89aShFcnJvcik7ZnVuY3Rpb24gaSh0KXtyZXR1cm4gZS5kaXNwbGF5TmFtZT10LmRpc3BsYXlOYW1lfHx0Lm5hbWUsZTtmdW5jdGlvbiBlKGUpe3JldHVybiBlJiYoZT1yLmFwcGx5KG51bGwsYXJndW1lbnRzKSksbmV3IHQoZSl9fXQuZXhwb3J0cz1vLG8uZXZhbD1pKEV2YWxFcnJvciksby5yYW5nZT1pKFJhbmdlRXJyb3IpLG8ucmVmZXJlbmNlPWkoUmVmZXJlbmNlRXJyb3IpLG8uc3ludGF4PWkoU3ludGF4RXJyb3IpLG8udHlwZT1pKFR5cGVFcnJvciksby51cmk9aShVUklFcnJvciksby5jcmVhdGU9aX0sIjBhYzAiOmZ1bmN0aW9uKHQsZSxuKXsidXNlIHN0cmljdCI7bi5kKGUsImEiLChmdW5jdGlvbigpe3JldHVybiBofSkpLG4uZChlLCJiIiwoZnVuY3Rpb24oKXtyZXR1cm4gYn0pKSxuLmQoZSwiYyIsKGZ1bmN0aW9uKCl7cmV0dXJuIHd9KSksbi5kKGUsImQiLChmdW5jdGlvbigpe3JldHVybiBnfSkpLG4uZChlLCJlIiwoZnVuY3Rpb24oKXtyZXR1cm4gcH0pKSxuLmQoZSwiZiIsKGZ1bmN0aW9uKCl7cmV0dXJuIEV9KSksbi5kKGUsImciLChmdW5jdGlvbigpe3JldHVybiBBfSkpLG4uZChlLCJoIiwoZnVuY3Rpb24oKXtyZXR1cm4gUH0pKSxuLmQoZSwiaSIsKGZ1bmN0aW9uKCl7cmV0dXJuIEN9KSksbi5kKGUsImoiLChmdW5jdGlvbigpe3JldHVybiBSfSkpLG4uZChlLCJrIiwoZnVuY3Rpb24oKXtyZXR1cm4gU30pKTt2YXIgcj1uKCIzMDRhIiksbz02NTUzNSxpPU1hdGgucG93KDIsMTYpO2Z1bmN0aW9uIHModCxlKXtyZXR1cm4gdCtlKml9ZnVuY3Rpb24gYSh0KXtyZXR1cm4gdCZvfWZ1bmN0aW9uIGModCl7cmV0dXJuKHQtKHQmbykpL2l9dmFyIHU9ZnVuY3Rpb24odCxlLG4pe3ZvaWQgMD09PWUmJihlPSExKSx2b2lkIDA9PT1uJiYobj1udWxsKSx0aGlzLnBvcz10LHRoaXMuZGVsZXRlZD1lLHRoaXMucmVjb3Zlcj1ufSxsPWZ1bmN0aW9uKHQsZSl7dm9pZCAwPT09ZSYmKGU9ITEpLHRoaXMucmFuZ2VzPXQsdGhpcy5pbnZlcnRlZD1lfTtsLnByb3RvdHlwZS5yZWNvdmVyPWZ1bmN0aW9uKHQpe3ZhciBlPTAsbj1hKHQpO2lmKCF0aGlzLmludmVydGVkKWZvcih2YXIgcj0wO3I8bjtyKyspZSs9dGhpcy5yYW5nZXNbMypyKzJdLXRoaXMucmFuZ2VzWzMqcisxXTtyZXR1cm4gdGhpcy5yYW5nZXNbMypuXStlK2ModCl9LGwucHJvdG90eXBlLm1hcFJlc3VsdD1mdW5jdGlvbih0LGUpe3JldHVybiB2b2lkIDA9PT1lJiYoZT0xKSx0aGlzLl9tYXAodCxlLCExKX0sbC5wcm90b3R5cGUubWFwPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIHZvaWQgMD09PWUmJihlPTEpLHRoaXMuX21hcCh0LGUsITApfSxsLnByb3RvdHlwZS5fbWFwPWZ1bmN0aW9uKHQsZSxuKXtmb3IodmFyIHI9MCxvPXRoaXMuaW52ZXJ0ZWQ/MjoxLGk9dGhpcy5pbnZlcnRlZD8xOjIsYT0wO2E8dGhpcy5yYW5nZXMubGVuZ3RoO2ErPTMpe3ZhciBjPXRoaXMucmFuZ2VzW2FdLSh0aGlzLmludmVydGVkP3I6MCk7aWYoYz50KWJyZWFrO3ZhciBsPXRoaXMucmFuZ2VzW2Erb10saD10aGlzLnJhbmdlc1thK2ldLGY9YytsO2lmKHQ8PWYpe3ZhciBwPWw/dD09Yz8tMTp0PT1mPzE6ZTplLGQ9YytyKyhwPDA/MDpoKTtpZihuKXJldHVybiBkO3ZhciB2PXMoYS8zLHQtYyk7cmV0dXJuIG5ldyB1KGQsZTwwP3QhPWM6dCE9Zix2KX1yKz1oLWx9cmV0dXJuIG4/dCtyOm5ldyB1KHQrcil9LGwucHJvdG90eXBlLnRvdWNoZXM9ZnVuY3Rpb24odCxlKXtmb3IodmFyIG49MCxyPWEoZSksbz10aGlzLmludmVydGVkPzI6MSxpPXRoaXMuaW52ZXJ0ZWQ/MToyLHM9MDtzPHRoaXMucmFuZ2VzLmxlbmd0aDtzKz0zKXt2YXIgYz10aGlzLnJhbmdlc1tzXS0odGhpcy5pbnZlcnRlZD9uOjApO2lmKGM+dClicmVhazt2YXIgdT10aGlzLnJhbmdlc1tzK29dLGw9Yyt1O2lmKHQ8PWwmJnM9PTMqcilyZXR1cm4hMDtuKz10aGlzLnJhbmdlc1tzK2ldLXV9cmV0dXJuITF9LGwucHJvdG90eXBlLmZvckVhY2g9ZnVuY3Rpb24odCl7Zm9yKHZhciBlPXRoaXMuaW52ZXJ0ZWQ/MjoxLG49dGhpcy5pbnZlcnRlZD8xOjIscj0wLG89MDtyPHRoaXMucmFuZ2VzLmxlbmd0aDtyKz0zKXt2YXIgaT10aGlzLnJhbmdlc1tyXSxzPWktKHRoaXMuaW52ZXJ0ZWQ/bzowKSxhPWkrKHRoaXMuaW52ZXJ0ZWQ/MDpvKSxjPXRoaXMucmFuZ2VzW3IrZV0sdT10aGlzLnJhbmdlc1tyK25dO3QocyxzK2MsYSxhK3UpLG8rPXUtY319LGwucHJvdG90eXBlLmludmVydD1mdW5jdGlvbigpe3JldHVybiBuZXcgbCh0aGlzLnJhbmdlcywhdGhpcy5pbnZlcnRlZCl9LGwucHJvdG90eXBlLnRvU3RyaW5nPWZ1bmN0aW9uKCl7cmV0dXJuKHRoaXMuaW52ZXJ0ZWQ/Ii0iOiIiKStKU09OLnN0cmluZ2lmeSh0aGlzLnJhbmdlcyl9LGwub2Zmc2V0PWZ1bmN0aW9uKHQpe3JldHVybiAwPT10P2wuZW1wdHk6bmV3IGwodDwwP1swLC10LDBdOlswLDAsdF0pfSxsLmVtcHR5PW5ldyBsKFtdKTt2YXIgaD1mdW5jdGlvbih0LGUsbixyKXt0aGlzLm1hcHM9dHx8W10sdGhpcy5mcm9tPW58fDAsdGhpcy50bz1udWxsPT1yP3RoaXMubWFwcy5sZW5ndGg6cix0aGlzLm1pcnJvcj1lfTtmdW5jdGlvbiBmKHQpe3ZhciBlPUVycm9yLmNhbGwodGhpcyx0KTtyZXR1cm4gZS5fX3Byb3RvX189Zi5wcm90b3R5cGUsZX1oLnByb3RvdHlwZS5zbGljZT1mdW5jdGlvbih0LGUpe3JldHVybiB2b2lkIDA9PT10JiYodD0wKSx2b2lkIDA9PT1lJiYoZT10aGlzLm1hcHMubGVuZ3RoKSxuZXcgaCh0aGlzLm1hcHMsdGhpcy5taXJyb3IsdCxlKX0saC5wcm90b3R5cGUuY29weT1mdW5jdGlvbigpe3JldHVybiBuZXcgaCh0aGlzLm1hcHMuc2xpY2UoKSx0aGlzLm1pcnJvciYmdGhpcy5taXJyb3Iuc2xpY2UoKSx0aGlzLmZyb20sdGhpcy50byl9LGgucHJvdG90eXBlLmFwcGVuZE1hcD1mdW5jdGlvbih0LGUpe3RoaXMudG89dGhpcy5tYXBzLnB1c2godCksbnVsbCE9ZSYmdGhpcy5zZXRNaXJyb3IodGhpcy5tYXBzLmxlbmd0aC0xLGUpfSxoLnByb3RvdHlwZS5hcHBlbmRNYXBwaW5nPWZ1bmN0aW9uKHQpe2Zvcih2YXIgZT0wLG49dGhpcy5tYXBzLmxlbmd0aDtlPHQubWFwcy5sZW5ndGg7ZSsrKXt2YXIgcj10LmdldE1pcnJvcihlKTt0aGlzLmFwcGVuZE1hcCh0Lm1hcHNbZV0sbnVsbCE9ciYmcjxlP24rcjpudWxsKX19LGgucHJvdG90eXBlLmdldE1pcnJvcj1mdW5jdGlvbih0KXtpZih0aGlzLm1pcnJvcilmb3IodmFyIGU9MDtlPHRoaXMubWlycm9yLmxlbmd0aDtlKyspaWYodGhpcy5taXJyb3JbZV09PXQpcmV0dXJuIHRoaXMubWlycm9yW2UrKGUlMj8tMToxKV19LGgucHJvdG90eXBlLnNldE1pcnJvcj1mdW5jdGlvbih0LGUpe3RoaXMubWlycm9yfHwodGhpcy5taXJyb3I9W10pLHRoaXMubWlycm9yLnB1c2godCxlKX0saC5wcm90b3R5cGUuYXBwZW5kTWFwcGluZ0ludmVydGVkPWZ1bmN0aW9uKHQpe2Zvcih2YXIgZT10Lm1hcHMubGVuZ3RoLTEsbj10aGlzLm1hcHMubGVuZ3RoK3QubWFwcy5sZW5ndGg7ZT49MDtlLS0pe3ZhciByPXQuZ2V0TWlycm9yKGUpO3RoaXMuYXBwZW5kTWFwKHQubWFwc1tlXS5pbnZlcnQoKSxudWxsIT1yJiZyPmU/bi1yLTE6bnVsbCl9fSxoLnByb3RvdHlwZS5pbnZlcnQ9ZnVuY3Rpb24oKXt2YXIgdD1uZXcgaDtyZXR1cm4gdC5hcHBlbmRNYXBwaW5nSW52ZXJ0ZWQodGhpcyksdH0saC5wcm90b3R5cGUubWFwPWZ1bmN0aW9uKHQsZSl7aWYodm9pZCAwPT09ZSYmKGU9MSksdGhpcy5taXJyb3IpcmV0dXJuIHRoaXMuX21hcCh0LGUsITApO2Zvcih2YXIgbj10aGlzLmZyb207bjx0aGlzLnRvO24rKyl0PXRoaXMubWFwc1tuXS5tYXAodCxlKTtyZXR1cm4gdH0saC5wcm90b3R5cGUubWFwUmVzdWx0PWZ1bmN0aW9uKHQsZSl7cmV0dXJuIHZvaWQgMD09PWUmJihlPTEpLHRoaXMuX21hcCh0LGUsITEpfSxoLnByb3RvdHlwZS5fbWFwPWZ1bmN0aW9uKHQsZSxuKXtmb3IodmFyIHI9ITEsbz1udWxsLGk9dGhpcy5mcm9tO2k8dGhpcy50bztpKyspe3ZhciBzPXRoaXMubWFwc1tpXSxhPW8mJm9baV07aWYobnVsbCE9YSYmcy50b3VjaGVzKHQsYSkpdD1zLnJlY292ZXIoYSk7ZWxzZXt2YXIgYz1zLm1hcFJlc3VsdCh0LGUpO2lmKG51bGwhPWMucmVjb3Zlcil7dmFyIGw9dGhpcy5nZXRNaXJyb3IoaSk7aWYobnVsbCE9bCYmbD5pJiZsPHRoaXMudG8pe2lmKGMuZGVsZXRlZCl7aT1sLHQ9dGhpcy5tYXBzW2xdLnJlY292ZXIoYy5yZWNvdmVyKTtjb250aW51ZX0ob3x8KG89T2JqZWN0LmNyZWF0ZShudWxsKSkpW2xdPWMucmVjb3Zlcn19Yy5kZWxldGVkJiYocj0hMCksdD1jLnBvc319cmV0dXJuIG4/dDpuZXcgdSh0LHIpfSxmLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKEVycm9yLnByb3RvdHlwZSksZi5wcm90b3R5cGUuY29uc3RydWN0b3I9ZixmLnByb3RvdHlwZS5uYW1lPSJUcmFuc2Zvcm1FcnJvciI7dmFyIHA9ZnVuY3Rpb24odCl7dGhpcy5kb2M9dCx0aGlzLnN0ZXBzPVtdLHRoaXMuZG9jcz1bXSx0aGlzLm1hcHBpbmc9bmV3IGh9LGQ9e2JlZm9yZTp7Y29uZmlndXJhYmxlOiEwfSxkb2NDaGFuZ2VkOntjb25maWd1cmFibGU6ITB9fTtmdW5jdGlvbiB2KCl7dGhyb3cgbmV3IEVycm9yKCJPdmVycmlkZSBtZSIpfWQuYmVmb3JlLmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLmRvY3MubGVuZ3RoP3RoaXMuZG9jc1swXTp0aGlzLmRvY30scC5wcm90b3R5cGUuc3RlcD1mdW5jdGlvbih0KXt2YXIgZT10aGlzLm1heWJlU3RlcCh0KTtpZihlLmZhaWxlZCl0aHJvdyBuZXcgZihlLmZhaWxlZCk7cmV0dXJuIHRoaXN9LHAucHJvdG90eXBlLm1heWJlU3RlcD1mdW5jdGlvbih0KXt2YXIgZT10LmFwcGx5KHRoaXMuZG9jKTtyZXR1cm4gZS5mYWlsZWR8fHRoaXMuYWRkU3RlcCh0LGUuZG9jKSxlfSxkLmRvY0NoYW5nZWQuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuc3RlcHMubGVuZ3RoPjB9LHAucHJvdG90eXBlLmFkZFN0ZXA9ZnVuY3Rpb24odCxlKXt0aGlzLmRvY3MucHVzaCh0aGlzLmRvYyksdGhpcy5zdGVwcy5wdXNoKHQpLHRoaXMubWFwcGluZy5hcHBlbmRNYXAodC5nZXRNYXAoKSksdGhpcy5kb2M9ZX0sT2JqZWN0LmRlZmluZVByb3BlcnRpZXMocC5wcm90b3R5cGUsZCk7dmFyIG09T2JqZWN0LmNyZWF0ZShudWxsKSxnPWZ1bmN0aW9uKCl7fTtnLnByb3RvdHlwZS5hcHBseT1mdW5jdGlvbih0KXtyZXR1cm4gdigpfSxnLnByb3RvdHlwZS5nZXRNYXA9ZnVuY3Rpb24oKXtyZXR1cm4gbC5lbXB0eX0sZy5wcm90b3R5cGUuaW52ZXJ0PWZ1bmN0aW9uKHQpe3JldHVybiB2KCl9LGcucHJvdG90eXBlLm1hcD1mdW5jdGlvbih0KXtyZXR1cm4gdigpfSxnLnByb3RvdHlwZS5tZXJnZT1mdW5jdGlvbih0KXtyZXR1cm4gbnVsbH0sZy5wcm90b3R5cGUudG9KU09OPWZ1bmN0aW9uKCl7cmV0dXJuIHYoKX0sZy5mcm9tSlNPTj1mdW5jdGlvbih0LGUpe2lmKCFlfHwhZS5zdGVwVHlwZSl0aHJvdyBuZXcgUmFuZ2VFcnJvcigiSW52YWxpZCBpbnB1dCBmb3IgU3RlcC5mcm9tSlNPTiIpO3ZhciBuPW1bZS5zdGVwVHlwZV07aWYoIW4pdGhyb3cgbmV3IFJhbmdlRXJyb3IoIk5vIHN0ZXAgdHlwZSAiK2Uuc3RlcFR5cGUrIiBkZWZpbmVkIik7cmV0dXJuIG4uZnJvbUpTT04odCxlKX0sZy5qc29uSUQ9ZnVuY3Rpb24odCxlKXtpZih0IGluIG0pdGhyb3cgbmV3IFJhbmdlRXJyb3IoIkR1cGxpY2F0ZSB1c2Ugb2Ygc3RlcCBKU09OIElEICIrdCk7cmV0dXJuIG1bdF09ZSxlLnByb3RvdHlwZS5qc29uSUQ9dCxlfTt2YXIgeT1mdW5jdGlvbih0LGUpe3RoaXMuZG9jPXQsdGhpcy5mYWlsZWQ9ZX07eS5vaz1mdW5jdGlvbih0KXtyZXR1cm4gbmV3IHkodCxudWxsKX0seS5mYWlsPWZ1bmN0aW9uKHQpe3JldHVybiBuZXcgeShudWxsLHQpfSx5LmZyb21SZXBsYWNlPWZ1bmN0aW9uKHQsZSxuLG8pe3RyeXtyZXR1cm4geS5vayh0LnJlcGxhY2UoZSxuLG8pKX1jYXRjaChpKXtpZihpIGluc3RhbmNlb2YgclsiaCJdKXJldHVybiB5LmZhaWwoaS5tZXNzYWdlKTt0aHJvdyBpfX07dmFyIHc9ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZShlLG4scixvKXt0LmNhbGwodGhpcyksdGhpcy5mcm9tPWUsdGhpcy50bz1uLHRoaXMuc2xpY2U9cix0aGlzLnN0cnVjdHVyZT0hIW99cmV0dXJuIHQmJihlLl9fcHJvdG9fXz10KSxlLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKHQmJnQucHJvdG90eXBlKSxlLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1lLGUucHJvdG90eXBlLmFwcGx5PWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLnN0cnVjdHVyZSYmeCh0LHRoaXMuZnJvbSx0aGlzLnRvKT95LmZhaWwoIlN0cnVjdHVyZSByZXBsYWNlIHdvdWxkIG92ZXJ3cml0ZSBjb250ZW50Iik6eS5mcm9tUmVwbGFjZSh0LHRoaXMuZnJvbSx0aGlzLnRvLHRoaXMuc2xpY2UpfSxlLnByb3RvdHlwZS5nZXRNYXA9ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IGwoW3RoaXMuZnJvbSx0aGlzLnRvLXRoaXMuZnJvbSx0aGlzLnNsaWNlLnNpemVdKX0sZS5wcm90b3R5cGUuaW52ZXJ0PWZ1bmN0aW9uKHQpe3JldHVybiBuZXcgZSh0aGlzLmZyb20sdGhpcy5mcm9tK3RoaXMuc2xpY2Uuc2l6ZSx0LnNsaWNlKHRoaXMuZnJvbSx0aGlzLnRvKSl9LGUucHJvdG90eXBlLm1hcD1mdW5jdGlvbih0KXt2YXIgbj10Lm1hcFJlc3VsdCh0aGlzLmZyb20sMSkscj10Lm1hcFJlc3VsdCh0aGlzLnRvLC0xKTtyZXR1cm4gbi5kZWxldGVkJiZyLmRlbGV0ZWQ/bnVsbDpuZXcgZShuLnBvcyxNYXRoLm1heChuLnBvcyxyLnBvcyksdGhpcy5zbGljZSl9LGUucHJvdG90eXBlLm1lcmdlPWZ1bmN0aW9uKHQpe2lmKCEodCBpbnN0YW5jZW9mIGUpfHx0LnN0cnVjdHVyZSE9dGhpcy5zdHJ1Y3R1cmUpcmV0dXJuIG51bGw7aWYodGhpcy5mcm9tK3RoaXMuc2xpY2Uuc2l6ZSE9dC5mcm9tfHx0aGlzLnNsaWNlLm9wZW5FbmR8fHQuc2xpY2Uub3BlblN0YXJ0KXtpZih0LnRvIT10aGlzLmZyb218fHRoaXMuc2xpY2Uub3BlblN0YXJ0fHx0LnNsaWNlLm9wZW5FbmQpcmV0dXJuIG51bGw7dmFyIG49dGhpcy5zbGljZS5zaXplK3Quc2xpY2Uuc2l6ZT09MD9yWyJpIl0uZW1wdHk6bmV3IHJbImkiXSh0LnNsaWNlLmNvbnRlbnQuYXBwZW5kKHRoaXMuc2xpY2UuY29udGVudCksdC5zbGljZS5vcGVuU3RhcnQsdGhpcy5zbGljZS5vcGVuRW5kKTtyZXR1cm4gbmV3IGUodC5mcm9tLHRoaXMudG8sbix0aGlzLnN0cnVjdHVyZSl9dmFyIG89dGhpcy5zbGljZS5zaXplK3Quc2xpY2Uuc2l6ZT09MD9yWyJpIl0uZW1wdHk6bmV3IHJbImkiXSh0aGlzLnNsaWNlLmNvbnRlbnQuYXBwZW5kKHQuc2xpY2UuY29udGVudCksdGhpcy5zbGljZS5vcGVuU3RhcnQsdC5zbGljZS5vcGVuRW5kKTtyZXR1cm4gbmV3IGUodGhpcy5mcm9tLHRoaXMudG8rKHQudG8tdC5mcm9tKSxvLHRoaXMuc3RydWN0dXJlKX0sZS5wcm90b3R5cGUudG9KU09OPWZ1bmN0aW9uKCl7dmFyIHQ9e3N0ZXBUeXBlOiJyZXBsYWNlIixmcm9tOnRoaXMuZnJvbSx0bzp0aGlzLnRvfTtyZXR1cm4gdGhpcy5zbGljZS5zaXplJiYodC5zbGljZT10aGlzLnNsaWNlLnRvSlNPTigpKSx0aGlzLnN0cnVjdHVyZSYmKHQuc3RydWN0dXJlPSEwKSx0fSxlLmZyb21KU09OPWZ1bmN0aW9uKHQsbil7aWYoIm51bWJlciIhPXR5cGVvZiBuLmZyb218fCJudW1iZXIiIT10eXBlb2Ygbi50byl0aHJvdyBuZXcgUmFuZ2VFcnJvcigiSW52YWxpZCBpbnB1dCBmb3IgUmVwbGFjZVN0ZXAuZnJvbUpTT04iKTtyZXR1cm4gbmV3IGUobi5mcm9tLG4udG8sclsiaSJdLmZyb21KU09OKHQsbi5zbGljZSksISFuLnN0cnVjdHVyZSl9LGV9KGcpO2cuanNvbklEKCJyZXBsYWNlIix3KTt2YXIgYj1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKGUsbixyLG8saSxzLGEpe3QuY2FsbCh0aGlzKSx0aGlzLmZyb209ZSx0aGlzLnRvPW4sdGhpcy5nYXBGcm9tPXIsdGhpcy5nYXBUbz1vLHRoaXMuc2xpY2U9aSx0aGlzLmluc2VydD1zLHRoaXMuc3RydWN0dXJlPSEhYX1yZXR1cm4gdCYmKGUuX19wcm90b19fPXQpLGUucHJvdG90eXBlPU9iamVjdC5jcmVhdGUodCYmdC5wcm90b3R5cGUpLGUucHJvdG90eXBlLmNvbnN0cnVjdG9yPWUsZS5wcm90b3R5cGUuYXBwbHk9ZnVuY3Rpb24odCl7aWYodGhpcy5zdHJ1Y3R1cmUmJih4KHQsdGhpcy5mcm9tLHRoaXMuZ2FwRnJvbSl8fHgodCx0aGlzLmdhcFRvLHRoaXMudG8pKSlyZXR1cm4geS5mYWlsKCJTdHJ1Y3R1cmUgZ2FwLXJlcGxhY2Ugd291bGQgb3ZlcndyaXRlIGNvbnRlbnQiKTt2YXIgZT10LnNsaWNlKHRoaXMuZ2FwRnJvbSx0aGlzLmdhcFRvKTtpZihlLm9wZW5TdGFydHx8ZS5vcGVuRW5kKXJldHVybiB5LmZhaWwoIkdhcCBpcyBub3QgYSBmbGF0IHJhbmdlIik7dmFyIG49dGhpcy5zbGljZS5pbnNlcnRBdCh0aGlzLmluc2VydCxlLmNvbnRlbnQpO3JldHVybiBuP3kuZnJvbVJlcGxhY2UodCx0aGlzLmZyb20sdGhpcy50byxuKTp5LmZhaWwoIkNvbnRlbnQgZG9lcyBub3QgZml0IGluIGdhcCIpfSxlLnByb3RvdHlwZS5nZXRNYXA9ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IGwoW3RoaXMuZnJvbSx0aGlzLmdhcEZyb20tdGhpcy5mcm9tLHRoaXMuaW5zZXJ0LHRoaXMuZ2FwVG8sdGhpcy50by10aGlzLmdhcFRvLHRoaXMuc2xpY2Uuc2l6ZS10aGlzLmluc2VydF0pfSxlLnByb3RvdHlwZS5pbnZlcnQ9ZnVuY3Rpb24odCl7dmFyIG49dGhpcy5nYXBUby10aGlzLmdhcEZyb207cmV0dXJuIG5ldyBlKHRoaXMuZnJvbSx0aGlzLmZyb20rdGhpcy5zbGljZS5zaXplK24sdGhpcy5mcm9tK3RoaXMuaW5zZXJ0LHRoaXMuZnJvbSt0aGlzLmluc2VydCtuLHQuc2xpY2UodGhpcy5mcm9tLHRoaXMudG8pLnJlbW92ZUJldHdlZW4odGhpcy5nYXBGcm9tLXRoaXMuZnJvbSx0aGlzLmdhcFRvLXRoaXMuZnJvbSksdGhpcy5nYXBGcm9tLXRoaXMuZnJvbSx0aGlzLnN0cnVjdHVyZSl9LGUucHJvdG90eXBlLm1hcD1mdW5jdGlvbih0KXt2YXIgbj10Lm1hcFJlc3VsdCh0aGlzLmZyb20sMSkscj10Lm1hcFJlc3VsdCh0aGlzLnRvLC0xKSxvPXQubWFwKHRoaXMuZ2FwRnJvbSwtMSksaT10Lm1hcCh0aGlzLmdhcFRvLDEpO3JldHVybiBuLmRlbGV0ZWQmJnIuZGVsZXRlZHx8bzxuLnBvc3x8aT5yLnBvcz9udWxsOm5ldyBlKG4ucG9zLHIucG9zLG8saSx0aGlzLnNsaWNlLHRoaXMuaW5zZXJ0LHRoaXMuc3RydWN0dXJlKX0sZS5wcm90b3R5cGUudG9KU09OPWZ1bmN0aW9uKCl7dmFyIHQ9e3N0ZXBUeXBlOiJyZXBsYWNlQXJvdW5kIixmcm9tOnRoaXMuZnJvbSx0bzp0aGlzLnRvLGdhcEZyb206dGhpcy5nYXBGcm9tLGdhcFRvOnRoaXMuZ2FwVG8saW5zZXJ0OnRoaXMuaW5zZXJ0fTtyZXR1cm4gdGhpcy5zbGljZS5zaXplJiYodC5zbGljZT10aGlzLnNsaWNlLnRvSlNPTigpKSx0aGlzLnN0cnVjdHVyZSYmKHQuc3RydWN0dXJlPSEwKSx0fSxlLmZyb21KU09OPWZ1bmN0aW9uKHQsbil7aWYoIm51bWJlciIhPXR5cGVvZiBuLmZyb218fCJudW1iZXIiIT10eXBlb2Ygbi50b3x8Im51bWJlciIhPXR5cGVvZiBuLmdhcEZyb218fCJudW1iZXIiIT10eXBlb2Ygbi5nYXBUb3x8Im51bWJlciIhPXR5cGVvZiBuLmluc2VydCl0aHJvdyBuZXcgUmFuZ2VFcnJvcigiSW52YWxpZCBpbnB1dCBmb3IgUmVwbGFjZUFyb3VuZFN0ZXAuZnJvbUpTT04iKTtyZXR1cm4gbmV3IGUobi5mcm9tLG4udG8sbi5nYXBGcm9tLG4uZ2FwVG8sclsiaSJdLmZyb21KU09OKHQsbi5zbGljZSksbi5pbnNlcnQsISFuLnN0cnVjdHVyZSl9LGV9KGcpO2Z1bmN0aW9uIHgodCxlLG4pe3ZhciByPXQucmVzb2x2ZShlKSxvPW4tZSxpPXIuZGVwdGg7d2hpbGUobz4wJiZpPjAmJnIuaW5kZXhBZnRlcihpKT09ci5ub2RlKGkpLmNoaWxkQ291bnQpaS0tLG8tLTtpZihvPjApe3ZhciBzPXIubm9kZShpKS5tYXliZUNoaWxkKHIuaW5kZXhBZnRlcihpKSk7d2hpbGUobz4wKXtpZighc3x8cy5pc0xlYWYpcmV0dXJuITA7cz1zLmZpcnN0Q2hpbGQsby0tfX1yZXR1cm4hMX1mdW5jdGlvbiBrKHQsZSxuKXtyZXR1cm4oMD09ZXx8dC5jYW5SZXBsYWNlKGUsdC5jaGlsZENvdW50KSkmJihuPT10LmNoaWxkQ291bnR8fHQuY2FuUmVwbGFjZSgwLG4pKX1mdW5jdGlvbiBTKHQpe2Zvcih2YXIgZT10LnBhcmVudCxuPWUuY29udGVudC5jdXRCeUluZGV4KHQuc3RhcnRJbmRleCx0LmVuZEluZGV4KSxyPXQuZGVwdGg7Oy0tcil7dmFyIG89dC4kZnJvbS5ub2RlKHIpLGk9dC4kZnJvbS5pbmRleChyKSxzPXQuJHRvLmluZGV4QWZ0ZXIocik7aWYocjx0LmRlcHRoJiZvLmNhblJlcGxhY2UoaSxzLG4pKXJldHVybiByO2lmKDA9PXJ8fG8udHlwZS5zcGVjLmlzb2xhdGluZ3x8IWsobyxpLHMpKWJyZWFrfX1mdW5jdGlvbiBDKHQsZSxuLHIpe3ZvaWQgMD09PXImJihyPXQpO3ZhciBvPU0odCxlKSxpPW8mJk4ocixlKTtyZXR1cm4gaT9vLm1hcChPKS5jb25jYXQoe3R5cGU6ZSxhdHRyczpufSkuY29uY2F0KGkubWFwKE8pKTpudWxsfWZ1bmN0aW9uIE8odCl7cmV0dXJue3R5cGU6dCxhdHRyczpudWxsfX1mdW5jdGlvbiBNKHQsZSl7dmFyIG49dC5wYXJlbnQscj10LnN0YXJ0SW5kZXgsbz10LmVuZEluZGV4LGk9bi5jb250ZW50TWF0Y2hBdChyKS5maW5kV3JhcHBpbmcoZSk7aWYoIWkpcmV0dXJuIG51bGw7dmFyIHM9aS5sZW5ndGg/aVswXTplO3JldHVybiBuLmNhblJlcGxhY2VXaXRoKHIsbyxzKT9pOm51bGx9ZnVuY3Rpb24gTih0LGUpe3ZhciBuPXQucGFyZW50LHI9dC5zdGFydEluZGV4LG89dC5lbmRJbmRleCxpPW4uY2hpbGQocikscz1lLmNvbnRlbnRNYXRjaC5maW5kV3JhcHBpbmcoaS50eXBlKTtpZighcylyZXR1cm4gbnVsbDtmb3IodmFyIGE9cy5sZW5ndGg/c1tzLmxlbmd0aC0xXTplLGM9YS5jb250ZW50TWF0Y2gsdT1yO2MmJnU8bzt1KyspYz1jLm1hdGNoVHlwZShuLmNoaWxkKHUpLnR5cGUpO3JldHVybiBjJiZjLnZhbGlkRW5kP3M6bnVsbH1mdW5jdGlvbiBUKHQsZSxuKXt2YXIgcj10LnJlc29sdmUoZSksbz1yLmluZGV4KCk7cmV0dXJuIHIucGFyZW50LmNhblJlcGxhY2VXaXRoKG8sbysxLG4pfWZ1bmN0aW9uIEEodCxlLG4scil7dm9pZCAwPT09biYmKG49MSk7dmFyIG89dC5yZXNvbHZlKGUpLGk9by5kZXB0aC1uLHM9ciYmcltyLmxlbmd0aC0xXXx8by5wYXJlbnQ7aWYoaTwwfHxvLnBhcmVudC50eXBlLnNwZWMuaXNvbGF0aW5nfHwhby5wYXJlbnQuY2FuUmVwbGFjZShvLmluZGV4KCksby5wYXJlbnQuY2hpbGRDb3VudCl8fCFzLnR5cGUudmFsaWRDb250ZW50KG8ucGFyZW50LmNvbnRlbnQuY3V0QnlJbmRleChvLmluZGV4KCksby5wYXJlbnQuY2hpbGRDb3VudCkpKXJldHVybiExO2Zvcih2YXIgYT1vLmRlcHRoLTEsYz1uLTI7YT5pO2EtLSxjLS0pe3ZhciB1PW8ubm9kZShhKSxsPW8uaW5kZXgoYSk7aWYodS50eXBlLnNwZWMuaXNvbGF0aW5nKXJldHVybiExO3ZhciBoPXUuY29udGVudC5jdXRCeUluZGV4KGwsdS5jaGlsZENvdW50KSxmPXImJnJbY118fHU7aWYoZiE9dSYmKGg9aC5yZXBsYWNlQ2hpbGQoMCxmLnR5cGUuY3JlYXRlKGYuYXR0cnMpKSksIXUuY2FuUmVwbGFjZShsKzEsdS5jaGlsZENvdW50KXx8IWYudHlwZS52YWxpZENvbnRlbnQoaCkpcmV0dXJuITF9dmFyIHA9by5pbmRleEFmdGVyKGkpLGQ9ciYmclswXTtyZXR1cm4gby5ub2RlKGkpLmNhblJlcGxhY2VXaXRoKHAscCxkP2QudHlwZTpvLm5vZGUoaSsxKS50eXBlKX1mdW5jdGlvbiBFKHQsZSl7dmFyIG49dC5yZXNvbHZlKGUpLHI9bi5pbmRleCgpO3JldHVybiBEKG4ubm9kZUJlZm9yZSxuLm5vZGVBZnRlcikmJm4ucGFyZW50LmNhblJlcGxhY2UocixyKzEpfWZ1bmN0aW9uIEQodCxlKXtyZXR1cm4gdCYmZSYmIXQuaXNMZWFmJiZ0LmNhbkFwcGVuZChlKX1mdW5jdGlvbiBSKHQsZSxuKXt2b2lkIDA9PT1uJiYobj0tMSk7Zm9yKHZhciByPXQucmVzb2x2ZShlKSxvPXIuZGVwdGg7O28tLSl7dmFyIGk9dm9pZCAwLHM9dm9pZCAwLGE9ci5pbmRleChvKTtpZihvPT1yLmRlcHRoPyhpPXIubm9kZUJlZm9yZSxzPXIubm9kZUFmdGVyKTpuPjA/KGk9ci5ub2RlKG8rMSksYSsrLHM9ci5ub2RlKG8pLm1heWJlQ2hpbGQoYSkpOihpPXIubm9kZShvKS5tYXliZUNoaWxkKGEtMSkscz1yLm5vZGUobysxKSksaSYmIWkuaXNUZXh0YmxvY2smJkQoaSxzKSYmci5ub2RlKG8pLmNhblJlcGxhY2UoYSxhKzEpKXJldHVybiBlO2lmKDA9PW8pYnJlYWs7ZT1uPDA/ci5iZWZvcmUobyk6ci5hZnRlcihvKX19ZnVuY3Rpb24geih0LGUsbil7dmFyIHI9dC5yZXNvbHZlKGUpO2lmKHIucGFyZW50LmNhblJlcGxhY2VXaXRoKHIuaW5kZXgoKSxyLmluZGV4KCksbikpcmV0dXJuIGU7aWYoMD09ci5wYXJlbnRPZmZzZXQpZm9yKHZhciBvPXIuZGVwdGgtMTtvPj0wO28tLSl7dmFyIGk9ci5pbmRleChvKTtpZihyLm5vZGUobykuY2FuUmVwbGFjZVdpdGgoaSxpLG4pKXJldHVybiByLmJlZm9yZShvKzEpO2lmKGk+MClyZXR1cm4gbnVsbH1pZihyLnBhcmVudE9mZnNldD09ci5wYXJlbnQuY29udGVudC5zaXplKWZvcih2YXIgcz1yLmRlcHRoLTE7cz49MDtzLS0pe3ZhciBhPXIuaW5kZXhBZnRlcihzKTtpZihyLm5vZGUocykuY2FuUmVwbGFjZVdpdGgoYSxhLG4pKXJldHVybiByLmFmdGVyKHMrMSk7aWYoYTxyLm5vZGUocykuY2hpbGRDb3VudClyZXR1cm4gbnVsbH19ZnVuY3Rpb24gUCh0LGUsbil7dmFyIHI9dC5yZXNvbHZlKGUpO2lmKCFuLmNvbnRlbnQuc2l6ZSlyZXR1cm4gZTtmb3IodmFyIG89bi5jb250ZW50LGk9MDtpPG4ub3BlblN0YXJ0O2krKylvPW8uZmlyc3RDaGlsZC5jb250ZW50O2Zvcih2YXIgcz0xO3M8PSgwPT1uLm9wZW5TdGFydCYmbi5zaXplPzI6MSk7cysrKWZvcih2YXIgYT1yLmRlcHRoO2E+PTA7YS0tKXt2YXIgYz1hPT1yLmRlcHRoPzA6ci5wb3M8PShyLnN0YXJ0KGErMSkrci5lbmQoYSsxKSkvMj8tMToxLHU9ci5pbmRleChhKSsoYz4wPzE6MCk7aWYoMT09cz9yLm5vZGUoYSkuY2FuUmVwbGFjZSh1LHUsbyk6ci5ub2RlKGEpLmNvbnRlbnRNYXRjaEF0KHUpLmZpbmRXcmFwcGluZyhvLmZpcnN0Q2hpbGQudHlwZSkpcmV0dXJuIDA9PWM/ci5wb3M6YzwwP3IuYmVmb3JlKGErMSk6ci5hZnRlcihhKzEpfXJldHVybiBudWxsfWZ1bmN0aW9uIEkodCxlLG4pe2Zvcih2YXIgbz1bXSxpPTA7aTx0LmNoaWxkQ291bnQ7aSsrKXt2YXIgcz10LmNoaWxkKGkpO3MuY29udGVudC5zaXplJiYocz1zLmNvcHkoSShzLmNvbnRlbnQsZSxzKSkpLHMuaXNJbmxpbmUmJihzPWUocyxuLGkpKSxvLnB1c2gocyl9cmV0dXJuIHJbImMiXS5mcm9tQXJyYXkobyl9Zy5qc29uSUQoInJlcGxhY2VBcm91bmQiLGIpLHAucHJvdG90eXBlLmxpZnQ9ZnVuY3Rpb24odCxlKXtmb3IodmFyIG49dC4kZnJvbSxvPXQuJHRvLGk9dC5kZXB0aCxzPW4uYmVmb3JlKGkrMSksYT1vLmFmdGVyKGkrMSksYz1zLHU9YSxsPXJbImMiXS5lbXB0eSxoPTAsZj1pLHA9ITE7Zj5lO2YtLSlwfHxuLmluZGV4KGYpPjA/KHA9ITAsbD1yWyJjIl0uZnJvbShuLm5vZGUoZikuY29weShsKSksaCsrKTpjLS07Zm9yKHZhciBkPXJbImMiXS5lbXB0eSx2PTAsbT1pLGc9ITE7bT5lO20tLSlnfHxvLmFmdGVyKG0rMSk8by5lbmQobSk/KGc9ITAsZD1yWyJjIl0uZnJvbShvLm5vZGUobSkuY29weShkKSksdisrKTp1Kys7cmV0dXJuIHRoaXMuc3RlcChuZXcgYihjLHUscyxhLG5ldyByWyJpIl0obC5hcHBlbmQoZCksaCx2KSxsLnNpemUtaCwhMCkpfSxwLnByb3RvdHlwZS53cmFwPWZ1bmN0aW9uKHQsZSl7Zm9yKHZhciBuPXJbImMiXS5lbXB0eSxvPWUubGVuZ3RoLTE7bz49MDtvLS0pbj1yWyJjIl0uZnJvbShlW29dLnR5cGUuY3JlYXRlKGVbb10uYXR0cnMsbikpO3ZhciBpPXQuc3RhcnQscz10LmVuZDtyZXR1cm4gdGhpcy5zdGVwKG5ldyBiKGkscyxpLHMsbmV3IHJbImkiXShuLDAsMCksZS5sZW5ndGgsITApKX0scC5wcm90b3R5cGUuc2V0QmxvY2tUeXBlPWZ1bmN0aW9uKHQsZSxuLG8pe3ZhciBpPXRoaXM7aWYodm9pZCAwPT09ZSYmKGU9dCksIW4uaXNUZXh0YmxvY2spdGhyb3cgbmV3IFJhbmdlRXJyb3IoIlR5cGUgZ2l2ZW4gdG8gc2V0QmxvY2tUeXBlIHNob3VsZCBiZSBhIHRleHRibG9jayIpO3ZhciBzPXRoaXMuc3RlcHMubGVuZ3RoO3JldHVybiB0aGlzLmRvYy5ub2Rlc0JldHdlZW4odCxlLChmdW5jdGlvbih0LGUpe2lmKHQuaXNUZXh0YmxvY2smJiF0Lmhhc01hcmt1cChuLG8pJiZUKGkuZG9jLGkubWFwcGluZy5zbGljZShzKS5tYXAoZSksbikpe2kuY2xlYXJJbmNvbXBhdGlibGUoaS5tYXBwaW5nLnNsaWNlKHMpLm1hcChlLDEpLG4pO3ZhciBhPWkubWFwcGluZy5zbGljZShzKSxjPWEubWFwKGUsMSksdT1hLm1hcChlK3Qubm9kZVNpemUsMSk7cmV0dXJuIGkuc3RlcChuZXcgYihjLHUsYysxLHUtMSxuZXcgclsiaSJdKHJbImMiXS5mcm9tKG4uY3JlYXRlKG8sbnVsbCx0Lm1hcmtzKSksMCwwKSwxLCEwKSksITF9fSkpLHRoaXN9LHAucHJvdG90eXBlLnNldE5vZGVNYXJrdXA9ZnVuY3Rpb24odCxlLG4sbyl7dmFyIGk9dGhpcy5kb2Mubm9kZUF0KHQpO2lmKCFpKXRocm93IG5ldyBSYW5nZUVycm9yKCJObyBub2RlIGF0IGdpdmVuIHBvc2l0aW9uIik7ZXx8KGU9aS50eXBlKTt2YXIgcz1lLmNyZWF0ZShuLG51bGwsb3x8aS5tYXJrcyk7aWYoaS5pc0xlYWYpcmV0dXJuIHRoaXMucmVwbGFjZVdpdGgodCx0K2kubm9kZVNpemUscyk7aWYoIWUudmFsaWRDb250ZW50KGkuY29udGVudCkpdGhyb3cgbmV3IFJhbmdlRXJyb3IoIkludmFsaWQgY29udGVudCBmb3Igbm9kZSB0eXBlICIrZS5uYW1lKTtyZXR1cm4gdGhpcy5zdGVwKG5ldyBiKHQsdCtpLm5vZGVTaXplLHQrMSx0K2kubm9kZVNpemUtMSxuZXcgclsiaSJdKHJbImMiXS5mcm9tKHMpLDAsMCksMSwhMCkpfSxwLnByb3RvdHlwZS5zcGxpdD1mdW5jdGlvbih0LGUsbil7dm9pZCAwPT09ZSYmKGU9MSk7Zm9yKHZhciBvPXRoaXMuZG9jLnJlc29sdmUodCksaT1yWyJjIl0uZW1wdHkscz1yWyJjIl0uZW1wdHksYT1vLmRlcHRoLGM9by5kZXB0aC1lLHU9ZS0xO2E+YzthLS0sdS0tKXtpPXJbImMiXS5mcm9tKG8ubm9kZShhKS5jb3B5KGkpKTt2YXIgbD1uJiZuW3VdO3M9clsiYyJdLmZyb20obD9sLnR5cGUuY3JlYXRlKGwuYXR0cnMscyk6by5ub2RlKGEpLmNvcHkocykpfXJldHVybiB0aGlzLnN0ZXAobmV3IHcodCx0LG5ldyByWyJpIl0oaS5hcHBlbmQocyksZSxlKSwhMCkpfSxwLnByb3RvdHlwZS5qb2luPWZ1bmN0aW9uKHQsZSl7dm9pZCAwPT09ZSYmKGU9MSk7dmFyIG49bmV3IHcodC1lLHQrZSxyWyJpIl0uZW1wdHksITApO3JldHVybiB0aGlzLnN0ZXAobil9O3ZhciBCPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoZSxuLHIpe3QuY2FsbCh0aGlzKSx0aGlzLmZyb209ZSx0aGlzLnRvPW4sdGhpcy5tYXJrPXJ9cmV0dXJuIHQmJihlLl9fcHJvdG9fXz10KSxlLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKHQmJnQucHJvdG90eXBlKSxlLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1lLGUucHJvdG90eXBlLmFwcGx5PWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMsbj10LnNsaWNlKHRoaXMuZnJvbSx0aGlzLnRvKSxvPXQucmVzb2x2ZSh0aGlzLmZyb20pLGk9by5ub2RlKG8uc2hhcmVkRGVwdGgodGhpcy50bykpLHM9bmV3IHJbImkiXShJKG4uY29udGVudCwoZnVuY3Rpb24odCxuKXtyZXR1cm4gbi50eXBlLmFsbG93c01hcmtUeXBlKGUubWFyay50eXBlKT90Lm1hcmsoZS5tYXJrLmFkZFRvU2V0KHQubWFya3MpKTp0fSksaSksbi5vcGVuU3RhcnQsbi5vcGVuRW5kKTtyZXR1cm4geS5mcm9tUmVwbGFjZSh0LHRoaXMuZnJvbSx0aGlzLnRvLHMpfSxlLnByb3RvdHlwZS5pbnZlcnQ9ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IF8odGhpcy5mcm9tLHRoaXMudG8sdGhpcy5tYXJrKX0sZS5wcm90b3R5cGUubWFwPWZ1bmN0aW9uKHQpe3ZhciBuPXQubWFwUmVzdWx0KHRoaXMuZnJvbSwxKSxyPXQubWFwUmVzdWx0KHRoaXMudG8sLTEpO3JldHVybiBuLmRlbGV0ZWQmJnIuZGVsZXRlZHx8bi5wb3M+PXIucG9zP251bGw6bmV3IGUobi5wb3Msci5wb3MsdGhpcy5tYXJrKX0sZS5wcm90b3R5cGUubWVyZ2U9ZnVuY3Rpb24odCl7aWYodCBpbnN0YW5jZW9mIGUmJnQubWFyay5lcSh0aGlzLm1hcmspJiZ0aGlzLmZyb208PXQudG8mJnRoaXMudG8+PXQuZnJvbSlyZXR1cm4gbmV3IGUoTWF0aC5taW4odGhpcy5mcm9tLHQuZnJvbSksTWF0aC5tYXgodGhpcy50byx0LnRvKSx0aGlzLm1hcmspfSxlLnByb3RvdHlwZS50b0pTT049ZnVuY3Rpb24oKXtyZXR1cm57c3RlcFR5cGU6ImFkZE1hcmsiLG1hcms6dGhpcy5tYXJrLnRvSlNPTigpLGZyb206dGhpcy5mcm9tLHRvOnRoaXMudG99fSxlLmZyb21KU09OPWZ1bmN0aW9uKHQsbil7aWYoIm51bWJlciIhPXR5cGVvZiBuLmZyb218fCJudW1iZXIiIT10eXBlb2Ygbi50byl0aHJvdyBuZXcgUmFuZ2VFcnJvcigiSW52YWxpZCBpbnB1dCBmb3IgQWRkTWFya1N0ZXAuZnJvbUpTT04iKTtyZXR1cm4gbmV3IGUobi5mcm9tLG4udG8sdC5tYXJrRnJvbUpTT04obi5tYXJrKSl9LGV9KGcpO2cuanNvbklEKCJhZGRNYXJrIixCKTt2YXIgXz1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKGUsbixyKXt0LmNhbGwodGhpcyksdGhpcy5mcm9tPWUsdGhpcy50bz1uLHRoaXMubWFyaz1yfXJldHVybiB0JiYoZS5fX3Byb3RvX189dCksZS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZSh0JiZ0LnByb3RvdHlwZSksZS5wcm90b3R5cGUuY29uc3RydWN0b3I9ZSxlLnByb3RvdHlwZS5hcHBseT1mdW5jdGlvbih0KXt2YXIgZT10aGlzLG49dC5zbGljZSh0aGlzLmZyb20sdGhpcy50byksbz1uZXcgclsiaSJdKEkobi5jb250ZW50LChmdW5jdGlvbih0KXtyZXR1cm4gdC5tYXJrKGUubWFyay5yZW1vdmVGcm9tU2V0KHQubWFya3MpKX0pKSxuLm9wZW5TdGFydCxuLm9wZW5FbmQpO3JldHVybiB5LmZyb21SZXBsYWNlKHQsdGhpcy5mcm9tLHRoaXMudG8sbyl9LGUucHJvdG90eXBlLmludmVydD1mdW5jdGlvbigpe3JldHVybiBuZXcgQih0aGlzLmZyb20sdGhpcy50byx0aGlzLm1hcmspfSxlLnByb3RvdHlwZS5tYXA9ZnVuY3Rpb24odCl7dmFyIG49dC5tYXBSZXN1bHQodGhpcy5mcm9tLDEpLHI9dC5tYXBSZXN1bHQodGhpcy50bywtMSk7cmV0dXJuIG4uZGVsZXRlZCYmci5kZWxldGVkfHxuLnBvcz49ci5wb3M/bnVsbDpuZXcgZShuLnBvcyxyLnBvcyx0aGlzLm1hcmspfSxlLnByb3RvdHlwZS5tZXJnZT1mdW5jdGlvbih0KXtpZih0IGluc3RhbmNlb2YgZSYmdC5tYXJrLmVxKHRoaXMubWFyaykmJnRoaXMuZnJvbTw9dC50byYmdGhpcy50bz49dC5mcm9tKXJldHVybiBuZXcgZShNYXRoLm1pbih0aGlzLmZyb20sdC5mcm9tKSxNYXRoLm1heCh0aGlzLnRvLHQudG8pLHRoaXMubWFyayl9LGUucHJvdG90eXBlLnRvSlNPTj1mdW5jdGlvbigpe3JldHVybntzdGVwVHlwZToicmVtb3ZlTWFyayIsbWFyazp0aGlzLm1hcmsudG9KU09OKCksZnJvbTp0aGlzLmZyb20sdG86dGhpcy50b319LGUuZnJvbUpTT049ZnVuY3Rpb24odCxuKXtpZigibnVtYmVyIiE9dHlwZW9mIG4uZnJvbXx8Im51bWJlciIhPXR5cGVvZiBuLnRvKXRocm93IG5ldyBSYW5nZUVycm9yKCJJbnZhbGlkIGlucHV0IGZvciBSZW1vdmVNYXJrU3RlcC5mcm9tSlNPTiIpO3JldHVybiBuZXcgZShuLmZyb20sbi50byx0Lm1hcmtGcm9tSlNPTihuLm1hcmspKX0sZX0oZyk7ZnVuY3Rpb24gRih0LGUsbixvKXtpZih2b2lkIDA9PT1uJiYobj1lKSx2b2lkIDA9PT1vJiYobz1yWyJpIl0uZW1wdHkpLGU9PW4mJiFvLnNpemUpcmV0dXJuIG51bGw7dmFyIGk9dC5yZXNvbHZlKGUpLHM9dC5yZXNvbHZlKG4pO3JldHVybiBqKGkscyxvKT9uZXcgdyhlLG4sbyk6bmV3ICQoaSxzLG8pLmZpdCgpfWZ1bmN0aW9uIGoodCxlLG4pe3JldHVybiFuLm9wZW5TdGFydCYmIW4ub3BlbkVuZCYmdC5zdGFydCgpPT1lLnN0YXJ0KCkmJnQucGFyZW50LmNhblJlcGxhY2UodC5pbmRleCgpLGUuaW5kZXgoKSxuLmNvbnRlbnQpfWcuanNvbklEKCJyZW1vdmVNYXJrIixfKSxwLnByb3RvdHlwZS5hZGRNYXJrPWZ1bmN0aW9uKHQsZSxuKXt2YXIgcj10aGlzLG89W10saT1bXSxzPW51bGwsYT1udWxsO3JldHVybiB0aGlzLmRvYy5ub2Rlc0JldHdlZW4odCxlLChmdW5jdGlvbihyLGMsdSl7aWYoci5pc0lubGluZSl7dmFyIGw9ci5tYXJrcztpZighbi5pc0luU2V0KGwpJiZ1LnR5cGUuYWxsb3dzTWFya1R5cGUobi50eXBlKSl7Zm9yKHZhciBoPU1hdGgubWF4KGMsdCksZj1NYXRoLm1pbihjK3Iubm9kZVNpemUsZSkscD1uLmFkZFRvU2V0KGwpLGQ9MDtkPGwubGVuZ3RoO2QrKylsW2RdLmlzSW5TZXQocCl8fChzJiZzLnRvPT1oJiZzLm1hcmsuZXEobFtkXSk/cy50bz1mOm8ucHVzaChzPW5ldyBfKGgsZixsW2RdKSkpO2EmJmEudG89PWg/YS50bz1mOmkucHVzaChhPW5ldyBCKGgsZixuKSl9fX0pKSxvLmZvckVhY2goKGZ1bmN0aW9uKHQpe3JldHVybiByLnN0ZXAodCl9KSksaS5mb3JFYWNoKChmdW5jdGlvbih0KXtyZXR1cm4gci5zdGVwKHQpfSkpLHRoaXN9LHAucHJvdG90eXBlLnJlbW92ZU1hcms9ZnVuY3Rpb24odCxlLG4pe3ZhciBvPXRoaXM7dm9pZCAwPT09biYmKG49bnVsbCk7dmFyIGk9W10scz0wO3JldHVybiB0aGlzLmRvYy5ub2Rlc0JldHdlZW4odCxlLChmdW5jdGlvbihvLGEpe2lmKG8uaXNJbmxpbmUpe3MrKzt2YXIgYz1udWxsO2lmKG4gaW5zdGFuY2VvZiByWyJlIl0pe3ZhciB1PW4uaXNJblNldChvLm1hcmtzKTt1JiYoYz1bdV0pfWVsc2Ugbj9uLmlzSW5TZXQoby5tYXJrcykmJihjPVtuXSk6Yz1vLm1hcmtzO2lmKGMmJmMubGVuZ3RoKWZvcih2YXIgbD1NYXRoLm1pbihhK28ubm9kZVNpemUsZSksaD0wO2g8Yy5sZW5ndGg7aCsrKXtmb3IodmFyIGY9Y1toXSxwPXZvaWQgMCxkPTA7ZDxpLmxlbmd0aDtkKyspe3ZhciB2PWlbZF07di5zdGVwPT1zLTEmJmYuZXEoaVtkXS5zdHlsZSkmJihwPXYpfXA/KHAudG89bCxwLnN0ZXA9cyk6aS5wdXNoKHtzdHlsZTpmLGZyb206TWF0aC5tYXgoYSx0KSx0bzpsLHN0ZXA6c30pfX19KSksaS5mb3JFYWNoKChmdW5jdGlvbih0KXtyZXR1cm4gby5zdGVwKG5ldyBfKHQuZnJvbSx0LnRvLHQuc3R5bGUpKX0pKSx0aGlzfSxwLnByb3RvdHlwZS5jbGVhckluY29tcGF0aWJsZT1mdW5jdGlvbih0LGUsbil7dm9pZCAwPT09biYmKG49ZS5jb250ZW50TWF0Y2gpO2Zvcih2YXIgbz10aGlzLmRvYy5ub2RlQXQodCksaT1bXSxzPXQrMSxhPTA7YTxvLmNoaWxkQ291bnQ7YSsrKXt2YXIgYz1vLmNoaWxkKGEpLHU9cytjLm5vZGVTaXplLGw9bi5tYXRjaFR5cGUoYy50eXBlLGMuYXR0cnMpO2lmKGwpe249bDtmb3IodmFyIGg9MDtoPGMubWFya3MubGVuZ3RoO2grKyllLmFsbG93c01hcmtUeXBlKGMubWFya3NbaF0udHlwZSl8fHRoaXMuc3RlcChuZXcgXyhzLHUsYy5tYXJrc1toXSkpfWVsc2UgaS5wdXNoKG5ldyB3KHMsdSxyWyJpIl0uZW1wdHkpKTtzPXV9aWYoIW4udmFsaWRFbmQpe3ZhciBmPW4uZmlsbEJlZm9yZShyWyJjIl0uZW1wdHksITApO3RoaXMucmVwbGFjZShzLHMsbmV3IHJbImkiXShmLDAsMCkpfWZvcih2YXIgcD1pLmxlbmd0aC0xO3A+PTA7cC0tKXRoaXMuc3RlcChpW3BdKTtyZXR1cm4gdGhpc30scC5wcm90b3R5cGUucmVwbGFjZT1mdW5jdGlvbih0LGUsbil7dm9pZCAwPT09ZSYmKGU9dCksdm9pZCAwPT09biYmKG49clsiaSJdLmVtcHR5KTt2YXIgbz1GKHRoaXMuZG9jLHQsZSxuKTtyZXR1cm4gbyYmdGhpcy5zdGVwKG8pLHRoaXN9LHAucHJvdG90eXBlLnJlcGxhY2VXaXRoPWZ1bmN0aW9uKHQsZSxuKXtyZXR1cm4gdGhpcy5yZXBsYWNlKHQsZSxuZXcgclsiaSJdKHJbImMiXS5mcm9tKG4pLDAsMCkpfSxwLnByb3RvdHlwZS5kZWxldGU9ZnVuY3Rpb24odCxlKXtyZXR1cm4gdGhpcy5yZXBsYWNlKHQsZSxyWyJpIl0uZW1wdHkpfSxwLnByb3RvdHlwZS5pbnNlcnQ9ZnVuY3Rpb24odCxlKXtyZXR1cm4gdGhpcy5yZXBsYWNlV2l0aCh0LHQsZSl9O3ZhciAkPWZ1bmN0aW9uKHQsZSxuKXt0aGlzLiR0bz1lLHRoaXMuJGZyb209dCx0aGlzLnVucGxhY2VkPW4sdGhpcy5mcm9udGllcj1bXTtmb3IodmFyIG89MDtvPD10LmRlcHRoO28rKyl7dmFyIGk9dC5ub2RlKG8pO3RoaXMuZnJvbnRpZXIucHVzaCh7dHlwZTppLnR5cGUsbWF0Y2g6aS5jb250ZW50TWF0Y2hBdCh0LmluZGV4QWZ0ZXIobykpfSl9dGhpcy5wbGFjZWQ9clsiYyJdLmVtcHR5O2Zvcih2YXIgcz10LmRlcHRoO3M+MDtzLS0pdGhpcy5wbGFjZWQ9clsiYyJdLmZyb20odC5ub2RlKHMpLmNvcHkodGhpcy5wbGFjZWQpKX0sVj17ZGVwdGg6e2NvbmZpZ3VyYWJsZTohMH19O2Z1bmN0aW9uIEwodCxlLG4pe3JldHVybiAwPT1lP3QuY3V0QnlJbmRleChuKTp0LnJlcGxhY2VDaGlsZCgwLHQuZmlyc3RDaGlsZC5jb3B5KEwodC5maXJzdENoaWxkLmNvbnRlbnQsZS0xLG4pKSl9ZnVuY3Rpb24gcSh0LGUsbil7cmV0dXJuIDA9PWU/dC5hcHBlbmQobik6dC5yZXBsYWNlQ2hpbGQodC5jaGlsZENvdW50LTEsdC5sYXN0Q2hpbGQuY29weShxKHQubGFzdENoaWxkLmNvbnRlbnQsZS0xLG4pKSl9ZnVuY3Rpb24gSih0LGUpe2Zvcih2YXIgbj0wO248ZTtuKyspdD10LmZpcnN0Q2hpbGQuY29udGVudDtyZXR1cm4gdH1mdW5jdGlvbiBXKHQsZSxuKXtpZihlPD0wKXJldHVybiB0O3ZhciBvPXQuY29udGVudDtyZXR1cm4gZT4xJiYobz1vLnJlcGxhY2VDaGlsZCgwLFcoby5maXJzdENoaWxkLGUtMSwxPT1vLmNoaWxkQ291bnQ/bi0xOjApKSksZT4wJiYobz10LnR5cGUuY29udGVudE1hdGNoLmZpbGxCZWZvcmUobykuYXBwZW5kKG8pLG48PTAmJihvPW8uYXBwZW5kKHQudHlwZS5jb250ZW50TWF0Y2gubWF0Y2hGcmFnbWVudChvKS5maWxsQmVmb3JlKHJbImMiXS5lbXB0eSwhMCkpKSksdC5jb3B5KG8pfWZ1bmN0aW9uIEgodCxlLG4scixvKXt2YXIgaT10Lm5vZGUoZSkscz1vP3QuaW5kZXhBZnRlcihlKTp0LmluZGV4KGUpO2lmKHM9PWkuY2hpbGRDb3VudCYmIW4uY29tcGF0aWJsZUNvbnRlbnQoaS50eXBlKSlyZXR1cm4gbnVsbDt2YXIgYT1yLmZpbGxCZWZvcmUoaS5jb250ZW50LCEwLHMpO3JldHVybiBhJiYhSyhuLGkuY29udGVudCxzKT9hOm51bGx9ZnVuY3Rpb24gSyh0LGUsbil7Zm9yKHZhciByPW47cjxlLmNoaWxkQ291bnQ7cisrKWlmKCF0LmFsbG93c01hcmtzKGUuY2hpbGQocikubWFya3MpKXJldHVybiEwO3JldHVybiExfWZ1bmN0aW9uIFUodCxlLG4sbyxpKXtpZihlPG4pe3ZhciBzPXQuZmlyc3RDaGlsZDt0PXQucmVwbGFjZUNoaWxkKDAscy5jb3B5KFUocy5jb250ZW50LGUrMSxuLG8scykpKX1pZihlPm8pe3ZhciBhPWkuY29udGVudE1hdGNoQXQoMCksYz1hLmZpbGxCZWZvcmUodCkuYXBwZW5kKHQpO3Q9Yy5hcHBlbmQoYS5tYXRjaEZyYWdtZW50KGMpLmZpbGxCZWZvcmUoclsiYyJdLmVtcHR5LCEwKSl9cmV0dXJuIHR9ZnVuY3Rpb24gRyh0LGUpe2Zvcih2YXIgbj1bXSxyPU1hdGgubWluKHQuZGVwdGgsZS5kZXB0aCksbz1yO28+PTA7by0tKXt2YXIgaT10LnN0YXJ0KG8pO2lmKGk8dC5wb3MtKHQuZGVwdGgtbyl8fGUuZW5kKG8pPmUucG9zKyhlLmRlcHRoLW8pfHx0Lm5vZGUobykudHlwZS5zcGVjLmlzb2xhdGluZ3x8ZS5ub2RlKG8pLnR5cGUuc3BlYy5pc29sYXRpbmcpYnJlYWs7aT09ZS5zdGFydChvKSYmbi5wdXNoKG8pfXJldHVybiBufVYuZGVwdGguZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZnJvbnRpZXIubGVuZ3RoLTF9LCQucHJvdG90eXBlLmZpdD1mdW5jdGlvbigpe3doaWxlKHRoaXMudW5wbGFjZWQuc2l6ZSl7dmFyIHQ9dGhpcy5maW5kRml0dGFibGUoKTt0P3RoaXMucGxhY2VOb2Rlcyh0KTp0aGlzLm9wZW5Nb3JlKCl8fHRoaXMuZHJvcE5vZGUoKX12YXIgZT10aGlzLm11c3RNb3ZlSW5saW5lKCksbj10aGlzLnBsYWNlZC5zaXplLXRoaXMuZGVwdGgtdGhpcy4kZnJvbS5kZXB0aCxvPXRoaXMuJGZyb20saT1lPDA/dGhpcy4kdG86by5kb2MucmVzb2x2ZShlKTtpZih0aGlzLmNsb3NlKGkpKXt2YXIgcz10aGlzLnBsYWNlZCxhPW8uZGVwdGgsYz1pLmRlcHRoO3doaWxlKGEmJmMmJjE9PXMuY2hpbGRDb3VudClzPXMuZmlyc3RDaGlsZC5jb250ZW50LGEtLSxjLS07dmFyIHU9bmV3IHJbImkiXShzLGEsYyk7aWYoZT4tMSlyZXR1cm4gbmV3IGIoby5wb3MsZSx0aGlzLiR0by5wb3MsdGhpcy4kdG8uZW5kKCksdSxuKTtpZih1LnNpemV8fG8ucG9zIT10aGlzLiR0by5wb3MpcmV0dXJuIG5ldyB3KG8ucG9zLGkucG9zLHUpfXJldHVybiBudWxsfSwkLnByb3RvdHlwZS5maW5kRml0dGFibGU9ZnVuY3Rpb24oKXtmb3IodmFyIHQ9MTt0PD0yO3QrKylmb3IodmFyIGU9dGhpcy51bnBsYWNlZC5vcGVuU3RhcnQ7ZT49MDtlLS0pe3ZhciBuPXZvaWQgMCxvPXZvaWQgMDtlPyhvPUoodGhpcy51bnBsYWNlZC5jb250ZW50LGUtMSkuZmlyc3RDaGlsZCxuPW8uY29udGVudCk6bj10aGlzLnVucGxhY2VkLmNvbnRlbnQ7Zm9yKHZhciBpPW4uZmlyc3RDaGlsZCxzPXRoaXMuZGVwdGg7cz49MDtzLS0pe3ZhciBhPXRoaXMuZnJvbnRpZXJbc10sYz1hLnR5cGUsdT1hLm1hdGNoLGw9dm9pZCAwLGg9dm9pZCAwO2lmKDE9PXQmJihpP3UubWF0Y2hUeXBlKGkudHlwZSl8fChoPXUuZmlsbEJlZm9yZShyWyJjIl0uZnJvbShpKSwhMSkpOmMuY29tcGF0aWJsZUNvbnRlbnQoby50eXBlKSkpcmV0dXJue3NsaWNlRGVwdGg6ZSxmcm9udGllckRlcHRoOnMscGFyZW50Om8saW5qZWN0Omh9O2lmKDI9PXQmJmkmJihsPXUuZmluZFdyYXBwaW5nKGkudHlwZSkpKXJldHVybntzbGljZURlcHRoOmUsZnJvbnRpZXJEZXB0aDpzLHBhcmVudDpvLHdyYXA6bH07aWYobyYmdS5tYXRjaFR5cGUoby50eXBlKSlicmVha319fSwkLnByb3RvdHlwZS5vcGVuTW9yZT1mdW5jdGlvbigpe3ZhciB0PXRoaXMudW5wbGFjZWQsZT10LmNvbnRlbnQsbj10Lm9wZW5TdGFydCxvPXQub3BlbkVuZCxpPUooZSxuKTtyZXR1cm4hKCFpLmNoaWxkQ291bnR8fGkuZmlyc3RDaGlsZC5pc0xlYWYpJiYodGhpcy51bnBsYWNlZD1uZXcgclsiaSJdKGUsbisxLE1hdGgubWF4KG8saS5zaXplK24+PWUuc2l6ZS1vP24rMTowKSksITApfSwkLnByb3RvdHlwZS5kcm9wTm9kZT1mdW5jdGlvbigpe3ZhciB0PXRoaXMudW5wbGFjZWQsZT10LmNvbnRlbnQsbj10Lm9wZW5TdGFydCxvPXQub3BlbkVuZCxpPUooZSxuKTtpZihpLmNoaWxkQ291bnQ8PTEmJm4+MCl7dmFyIHM9ZS5zaXplLW48PW4raS5zaXplO3RoaXMudW5wbGFjZWQ9bmV3IHJbImkiXShMKGUsbi0xLDEpLG4tMSxzP24tMTpvKX1lbHNlIHRoaXMudW5wbGFjZWQ9bmV3IHJbImkiXShMKGUsbiwxKSxuLG8pfSwkLnByb3RvdHlwZS5wbGFjZU5vZGVzPWZ1bmN0aW9uKHQpe3ZhciBlPXQuc2xpY2VEZXB0aCxuPXQuZnJvbnRpZXJEZXB0aCxvPXQucGFyZW50LGk9dC5pbmplY3Qscz10LndyYXA7d2hpbGUodGhpcy5kZXB0aD5uKXRoaXMuY2xvc2VGcm9udGllck5vZGUoKTtpZihzKWZvcih2YXIgYT0wO2E8cy5sZW5ndGg7YSsrKXRoaXMub3BlbkZyb250aWVyTm9kZShzW2FdKTt2YXIgYz10aGlzLnVucGxhY2VkLHU9bz9vLmNvbnRlbnQ6Yy5jb250ZW50LGw9Yy5vcGVuU3RhcnQtZSxoPTAsZj1bXSxwPXRoaXMuZnJvbnRpZXJbbl0sZD1wLm1hdGNoLHY9cC50eXBlO2lmKGkpe2Zvcih2YXIgbT0wO208aS5jaGlsZENvdW50O20rKylmLnB1c2goaS5jaGlsZChtKSk7ZD1kLm1hdGNoRnJhZ21lbnQoaSl9dmFyIGc9dS5zaXplK2UtKGMuY29udGVudC5zaXplLWMub3BlbkVuZCk7d2hpbGUoaDx1LmNoaWxkQ291bnQpe3ZhciB5PXUuY2hpbGQoaCksdz1kLm1hdGNoVHlwZSh5LnR5cGUpO2lmKCF3KWJyZWFrO2grKywoaD4xfHwwPT1sfHx5LmNvbnRlbnQuc2l6ZSkmJihkPXcsZi5wdXNoKFcoeS5tYXJrKHYuYWxsb3dlZE1hcmtzKHkubWFya3MpKSwxPT1oP2w6MCxoPT11LmNoaWxkQ291bnQ/ZzotMSkpKX12YXIgYj1oPT11LmNoaWxkQ291bnQ7Ynx8KGc9LTEpLGImJmc8MCYmbyYmby50eXBlPT10aGlzLmZyb250aWVyW3RoaXMuZGVwdGhdLnR5cGU/dGhpcy5jbG9zZUZyb250aWVyTm9kZSgpOnRoaXMuZnJvbnRpZXJbbl0ubWF0Y2g9ZDtmb3IodmFyIHg9MCxrPXU7eDxnO3grKyl7dmFyIFM9ay5sYXN0Q2hpbGQ7dGhpcy5mcm9udGllci5wdXNoKHt0eXBlOlMudHlwZSxtYXRjaDpTLmNvbnRlbnRNYXRjaEF0KFMuY2hpbGRDb3VudCl9KSxrPVMuY29udGVudH10aGlzLnVucGxhY2VkPWI/MD09ZT9yWyJpIl0uZW1wdHk6bmV3IHJbImkiXShMKGMuY29udGVudCxlLTEsMSksZS0xLGc8MD9jLm9wZW5FbmQ6ZS0xKTpuZXcgclsiaSJdKEwoYy5jb250ZW50LGUsaCksYy5vcGVuU3RhcnQsYy5vcGVuRW5kKSx0aGlzLnBsYWNlZD1xKHRoaXMucGxhY2VkLG4sclsiYyJdLmZyb20oZikpfSwkLnByb3RvdHlwZS5tdXN0TW92ZUlubGluZT1mdW5jdGlvbigpe2lmKCF0aGlzLiR0by5wYXJlbnQuaXNUZXh0YmxvY2spcmV0dXJuLTE7dmFyIHQsZT10aGlzLmZyb250aWVyW3RoaXMuZGVwdGhdO2lmKCFlLnR5cGUuaXNUZXh0YmxvY2t8fCFIKHRoaXMuJHRvLHRoaXMuJHRvLmRlcHRoLGUudHlwZSxlLm1hdGNoLCExKXx8dGhpcy4kdG8uZGVwdGg9PXRoaXMuZGVwdGgmJih0PXRoaXMuZmluZENsb3NlTGV2ZWwodGhpcy4kdG8pKSYmdC5kZXB0aD09dGhpcy5kZXB0aClyZXR1cm4tMTt2YXIgbj10aGlzLiR0byxyPW4uZGVwdGgsbz10aGlzLiR0by5hZnRlcihyKTt3aGlsZShyPjEmJm89PXRoaXMuJHRvLmVuZCgtLXIpKSsrbztyZXR1cm4gb30sJC5wcm90b3R5cGUuZmluZENsb3NlTGV2ZWw9ZnVuY3Rpb24odCl7dDpmb3IodmFyIGU9TWF0aC5taW4odGhpcy5kZXB0aCx0LmRlcHRoKTtlPj0wO2UtLSl7dmFyIG49dGhpcy5mcm9udGllcltlXSxyPW4ubWF0Y2gsbz1uLnR5cGUsaT1IKHQsZSxvLHIsITEpO2lmKGkpe2Zvcih2YXIgcz1lLTE7cz49MDtzLS0pe3ZhciBhPXRoaXMuZnJvbnRpZXJbc10sYz1hLm1hdGNoLHU9YS50eXBlLGw9SCh0LHMsdSxjLCEwKTtpZighbHx8bC5jaGlsZENvdW50KWNvbnRpbnVlIHR9cmV0dXJue2RlcHRoOmUsZml0Oml9fX19LCQucHJvdG90eXBlLmNsb3NlPWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMuZmluZENsb3NlTGV2ZWwodCk7aWYoIWUpcmV0dXJuITE7d2hpbGUodGhpcy5kZXB0aD5lLmRlcHRoKXRoaXMuY2xvc2VGcm9udGllck5vZGUoKTtlLmZpdC5jaGlsZENvdW50JiYodGhpcy5wbGFjZWQ9cSh0aGlzLnBsYWNlZCxlLmRlcHRoLGUuZml0KSk7Zm9yKHZhciBuPWUuZGVwdGgrMTtuPD10LmRlcHRoO24rKyl7dmFyIHI9dC5ub2RlKG4pLG89ci50eXBlLmNvbnRlbnRNYXRjaC5maWxsQmVmb3JlKHIuY29udGVudCwhMCx0LmluZGV4KG4pKTt0aGlzLm9wZW5Gcm9udGllck5vZGUoci50eXBlLHIuYXR0cnMsbyl9cmV0dXJuITB9LCQucHJvdG90eXBlLm9wZW5Gcm9udGllck5vZGU9ZnVuY3Rpb24odCxlLG4pe3ZhciBvPXRoaXMuZnJvbnRpZXJbdGhpcy5kZXB0aF07by5tYXRjaD1vLm1hdGNoLm1hdGNoVHlwZSh0KSx0aGlzLnBsYWNlZD1xKHRoaXMucGxhY2VkLHRoaXMuZGVwdGgsclsiYyJdLmZyb20odC5jcmVhdGUoZSxuKSkpLHRoaXMuZnJvbnRpZXIucHVzaCh7dHlwZTp0LG1hdGNoOnQuY29udGVudE1hdGNofSl9LCQucHJvdG90eXBlLmNsb3NlRnJvbnRpZXJOb2RlPWZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5mcm9udGllci5wb3AoKSxlPXQubWF0Y2guZmlsbEJlZm9yZShyWyJjIl0uZW1wdHksITApO2UuY2hpbGRDb3VudCYmKHRoaXMucGxhY2VkPXEodGhpcy5wbGFjZWQsdGhpcy5mcm9udGllci5sZW5ndGgsZSkpfSxPYmplY3QuZGVmaW5lUHJvcGVydGllcygkLnByb3RvdHlwZSxWKSxwLnByb3RvdHlwZS5yZXBsYWNlUmFuZ2U9ZnVuY3Rpb24odCxlLG4pe2lmKCFuLnNpemUpcmV0dXJuIHRoaXMuZGVsZXRlUmFuZ2UodCxlKTt2YXIgbz10aGlzLmRvYy5yZXNvbHZlKHQpLGk9dGhpcy5kb2MucmVzb2x2ZShlKTtpZihqKG8saSxuKSlyZXR1cm4gdGhpcy5zdGVwKG5ldyB3KHQsZSxuKSk7dmFyIHM9RyhvLHRoaXMuZG9jLnJlc29sdmUoZSkpOzA9PXNbcy5sZW5ndGgtMV0mJnMucG9wKCk7dmFyIGE9LShvLmRlcHRoKzEpO3MudW5zaGlmdChhKTtmb3IodmFyIGM9by5kZXB0aCx1PW8ucG9zLTE7Yz4wO2MtLSx1LS0pe3ZhciBsPW8ubm9kZShjKS50eXBlLnNwZWM7aWYobC5kZWZpbmluZ3x8bC5pc29sYXRpbmcpYnJlYWs7cy5pbmRleE9mKGMpPi0xP2E9YzpvLmJlZm9yZShjKT09dSYmcy5zcGxpY2UoMSwwLC1jKX1mb3IodmFyIGg9cy5pbmRleE9mKGEpLGY9W10scD1uLm9wZW5TdGFydCxkPW4uY29udGVudCx2PTA7O3YrKyl7dmFyIG09ZC5maXJzdENoaWxkO2lmKGYucHVzaChtKSx2PT1uLm9wZW5TdGFydClicmVhaztkPW0uY29udGVudH1wPjAmJmZbcC0xXS50eXBlLnNwZWMuZGVmaW5pbmcmJm8ubm9kZShoKS50eXBlIT1mW3AtMV0udHlwZT9wLT0xOnA+PTImJmZbcC0xXS5pc1RleHRibG9jayYmZltwLTJdLnR5cGUuc3BlYy5kZWZpbmluZyYmby5ub2RlKGgpLnR5cGUhPWZbcC0yXS50eXBlJiYocC09Mik7Zm9yKHZhciBnPW4ub3BlblN0YXJ0O2c+PTA7Zy0tKXt2YXIgeT0oZytwKzEpJShuLm9wZW5TdGFydCsxKSxiPWZbeV07aWYoYilmb3IodmFyIHg9MDt4PHMubGVuZ3RoO3grKyl7dmFyIGs9c1soeCtoKSVzLmxlbmd0aF0sUz0hMDtrPDAmJihTPSExLGs9LWspO3ZhciBDPW8ubm9kZShrLTEpLE89by5pbmRleChrLTEpO2lmKEMuY2FuUmVwbGFjZVdpdGgoTyxPLGIudHlwZSxiLm1hcmtzKSlyZXR1cm4gdGhpcy5yZXBsYWNlKG8uYmVmb3JlKGspLFM/aS5hZnRlcihrKTplLG5ldyByWyJpIl0oVShuLmNvbnRlbnQsMCxuLm9wZW5TdGFydCx5KSx5LG4ub3BlbkVuZCkpfX1mb3IodmFyIE09dGhpcy5zdGVwcy5sZW5ndGgsTj1zLmxlbmd0aC0xO04+PTA7Ti0tKXtpZih0aGlzLnJlcGxhY2UodCxlLG4pLHRoaXMuc3RlcHMubGVuZ3RoPk0pYnJlYWs7dmFyIFQ9c1tOXTtOPDB8fCh0PW8uYmVmb3JlKFQpLGU9aS5hZnRlcihUKSl9cmV0dXJuIHRoaXN9LHAucHJvdG90eXBlLnJlcGxhY2VSYW5nZVdpdGg9ZnVuY3Rpb24odCxlLG4pe2lmKCFuLmlzSW5saW5lJiZ0PT1lJiZ0aGlzLmRvYy5yZXNvbHZlKHQpLnBhcmVudC5jb250ZW50LnNpemUpe3ZhciBvPXoodGhpcy5kb2MsdCxuLnR5cGUpO251bGwhPW8mJih0PWU9byl9cmV0dXJuIHRoaXMucmVwbGFjZVJhbmdlKHQsZSxuZXcgclsiaSJdKHJbImMiXS5mcm9tKG4pLDAsMCkpfSxwLnByb3RvdHlwZS5kZWxldGVSYW5nZT1mdW5jdGlvbih0LGUpe2Zvcih2YXIgbj10aGlzLmRvYy5yZXNvbHZlKHQpLHI9dGhpcy5kb2MucmVzb2x2ZShlKSxvPUcobixyKSxpPTA7aTxvLmxlbmd0aDtpKyspe3ZhciBzPW9baV0sYT1pPT1vLmxlbmd0aC0xO2lmKGEmJjA9PXN8fG4ubm9kZShzKS50eXBlLmNvbnRlbnRNYXRjaC52YWxpZEVuZClyZXR1cm4gdGhpcy5kZWxldGUobi5zdGFydChzKSxyLmVuZChzKSk7aWYocz4wJiYoYXx8bi5ub2RlKHMtMSkuY2FuUmVwbGFjZShuLmluZGV4KHMtMSksci5pbmRleEFmdGVyKHMtMSkpKSlyZXR1cm4gdGhpcy5kZWxldGUobi5iZWZvcmUocyksci5hZnRlcihzKSl9Zm9yKHZhciBjPTE7Yzw9bi5kZXB0aCYmYzw9ci5kZXB0aDtjKyspaWYodC1uLnN0YXJ0KGMpPT1uLmRlcHRoLWMmJmU+bi5lbmQoYykmJnIuZW5kKGMpLWUhPXIuZGVwdGgtYylyZXR1cm4gdGhpcy5kZWxldGUobi5iZWZvcmUoYyksZSk7cmV0dXJuIHRoaXMuZGVsZXRlKHQsZSl9fSwiMGNmYiI6ZnVuY3Rpb24odCxlLG4pe3ZhciByPW4oIjgzYWIiKSxvPW4oImQwMzkiKSxpPW4oImNjMTIiKTt0LmV4cG9ydHM9IXImJiFvKChmdW5jdGlvbigpe3JldHVybiA3IT1PYmplY3QuZGVmaW5lUHJvcGVydHkoaSgiZGl2IiksImEiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gN319KS5hfSkpfSwiMTU1YyI6ZnVuY3Rpb24odCxlLG4peyJ1c2Ugc3RyaWN0IjtuLnIoZSksbi5kKGUsIkNvbnRlbnRNYXRjaCIsKGZ1bmN0aW9uKCl7cmV0dXJuIGp9KSksbi5kKGUsIkRPTVBhcnNlciIsKGZ1bmN0aW9uKCl7cmV0dXJuIGh0fSkpLG4uZChlLCJET01TZXJpYWxpemVyIiwoZnVuY3Rpb24oKXtyZXR1cm4gTnR9KSksbi5kKGUsIkZyYWdtZW50IiwoZnVuY3Rpb24oKXtyZXR1cm4gc30pKSxuLmQoZSwiTWFyayIsKGZ1bmN0aW9uKCl7cmV0dXJuIGh9KSksbi5kKGUsIk1hcmtUeXBlIiwoZnVuY3Rpb24oKXtyZXR1cm4gY3R9KSksbi5kKGUsIk5vZGUiLChmdW5jdGlvbigpe3JldHVybiBJfSkpLG4uZChlLCJOb2RlUmFuZ2UiLChmdW5jdGlvbigpe3JldHVybiBSfSkpLG4uZChlLCJOb2RlVHlwZSIsKGZ1bmN0aW9uKCl7cmV0dXJuIG90fSkpLG4uZChlLCJSZXBsYWNlRXJyb3IiLChmdW5jdGlvbigpe3JldHVybiBmfSkpLG4uZChlLCJSZXNvbHZlZFBvcyIsKGZ1bmN0aW9uKCl7cmV0dXJuIE59KSksbi5kKGUsIlNjaGVtYSIsKGZ1bmN0aW9uKCl7cmV0dXJuIHV0fSkpLG4uZChlLCJTbGljZSIsKGZ1bmN0aW9uKCl7cmV0dXJuIHB9KSk7dmFyIHI9bigiODg0YyIpO2Z1bmN0aW9uIG8odCxlLG4pe2Zvcih2YXIgcj0wOztyKyspe2lmKHI9PXQuY2hpbGRDb3VudHx8cj09ZS5jaGlsZENvdW50KXJldHVybiB0LmNoaWxkQ291bnQ9PWUuY2hpbGRDb3VudD9udWxsOm47dmFyIGk9dC5jaGlsZChyKSxzPWUuY2hpbGQocik7aWYoaSE9cyl7aWYoIWkuc2FtZU1hcmt1cChzKSlyZXR1cm4gbjtpZihpLmlzVGV4dCYmaS50ZXh0IT1zLnRleHQpe2Zvcih2YXIgYT0wO2kudGV4dFthXT09cy50ZXh0W2FdO2ErKyluKys7cmV0dXJuIG59aWYoaS5jb250ZW50LnNpemV8fHMuY29udGVudC5zaXplKXt2YXIgYz1vKGkuY29udGVudCxzLmNvbnRlbnQsbisxKTtpZihudWxsIT1jKXJldHVybiBjfW4rPWkubm9kZVNpemV9ZWxzZSBuKz1pLm5vZGVTaXplfX1mdW5jdGlvbiBpKHQsZSxuLHIpe2Zvcih2YXIgbz10LmNoaWxkQ291bnQscz1lLmNoaWxkQ291bnQ7Oyl7aWYoMD09b3x8MD09cylyZXR1cm4gbz09cz9udWxsOnthOm4sYjpyfTt2YXIgYT10LmNoaWxkKC0tbyksYz1lLmNoaWxkKC0tcyksdT1hLm5vZGVTaXplO2lmKGEhPWMpe2lmKCFhLnNhbWVNYXJrdXAoYykpcmV0dXJue2E6bixiOnJ9O2lmKGEuaXNUZXh0JiZhLnRleHQhPWMudGV4dCl7dmFyIGw9MCxoPU1hdGgubWluKGEudGV4dC5sZW5ndGgsYy50ZXh0Lmxlbmd0aCk7d2hpbGUobDxoJiZhLnRleHRbYS50ZXh0Lmxlbmd0aC1sLTFdPT1jLnRleHRbYy50ZXh0Lmxlbmd0aC1sLTFdKWwrKyxuLS0sci0tO3JldHVybnthOm4sYjpyfX1pZihhLmNvbnRlbnQuc2l6ZXx8Yy5jb250ZW50LnNpemUpe3ZhciBmPWkoYS5jb250ZW50LGMuY29udGVudCxuLTEsci0xKTtpZihmKXJldHVybiBmfW4tPXUsci09dX1lbHNlIG4tPXUsci09dX19dmFyIHM9ZnVuY3Rpb24odCxlKXtpZih0aGlzLmNvbnRlbnQ9dCx0aGlzLnNpemU9ZXx8MCxudWxsPT1lKWZvcih2YXIgbj0wO248dC5sZW5ndGg7bisrKXRoaXMuc2l6ZSs9dFtuXS5ub2RlU2l6ZX0sYT17Zmlyc3RDaGlsZDp7Y29uZmlndXJhYmxlOiEwfSxsYXN0Q2hpbGQ6e2NvbmZpZ3VyYWJsZTohMH0sY2hpbGRDb3VudDp7Y29uZmlndXJhYmxlOiEwfX07cy5wcm90b3R5cGUubm9kZXNCZXR3ZWVuPWZ1bmN0aW9uKHQsZSxuLHIsbyl7dm9pZCAwPT09ciYmKHI9MCk7Zm9yKHZhciBpPTAscz0wO3M8ZTtpKyspe3ZhciBhPXRoaXMuY29udGVudFtpXSxjPXMrYS5ub2RlU2l6ZTtpZihjPnQmJiExIT09bihhLHIrcyxvLGkpJiZhLmNvbnRlbnQuc2l6ZSl7dmFyIHU9cysxO2Eubm9kZXNCZXR3ZWVuKE1hdGgubWF4KDAsdC11KSxNYXRoLm1pbihhLmNvbnRlbnQuc2l6ZSxlLXUpLG4scit1KX1zPWN9fSxzLnByb3RvdHlwZS5kZXNjZW5kYW50cz1mdW5jdGlvbih0KXt0aGlzLm5vZGVzQmV0d2VlbigwLHRoaXMuc2l6ZSx0KX0scy5wcm90b3R5cGUudGV4dEJldHdlZW49ZnVuY3Rpb24odCxlLG4scil7dmFyIG89IiIsaT0hMDtyZXR1cm4gdGhpcy5ub2Rlc0JldHdlZW4odCxlLChmdW5jdGlvbihzLGEpe3MuaXNUZXh0PyhvKz1zLnRleHQuc2xpY2UoTWF0aC5tYXgodCxhKS1hLGUtYSksaT0hbik6cy5pc0xlYWYmJnI/KG8rPXIsaT0hbik6IWkmJnMuaXNCbG9jayYmKG8rPW4saT0hMCl9KSwwKSxvfSxzLnByb3RvdHlwZS5hcHBlbmQ9ZnVuY3Rpb24odCl7aWYoIXQuc2l6ZSlyZXR1cm4gdGhpcztpZighdGhpcy5zaXplKXJldHVybiB0O3ZhciBlPXRoaXMubGFzdENoaWxkLG49dC5maXJzdENoaWxkLHI9dGhpcy5jb250ZW50LnNsaWNlKCksbz0wO2ZvcihlLmlzVGV4dCYmZS5zYW1lTWFya3VwKG4pJiYocltyLmxlbmd0aC0xXT1lLndpdGhUZXh0KGUudGV4dCtuLnRleHQpLG89MSk7bzx0LmNvbnRlbnQubGVuZ3RoO28rKylyLnB1c2godC5jb250ZW50W29dKTtyZXR1cm4gbmV3IHMocix0aGlzLnNpemUrdC5zaXplKX0scy5wcm90b3R5cGUuY3V0PWZ1bmN0aW9uKHQsZSl7aWYobnVsbD09ZSYmKGU9dGhpcy5zaXplKSwwPT10JiZlPT10aGlzLnNpemUpcmV0dXJuIHRoaXM7dmFyIG49W10scj0wO2lmKGU+dClmb3IodmFyIG89MCxpPTA7aTxlO28rKyl7dmFyIGE9dGhpcy5jb250ZW50W29dLGM9aSthLm5vZGVTaXplO2M+dCYmKChpPHR8fGM+ZSkmJihhPWEuaXNUZXh0P2EuY3V0KE1hdGgubWF4KDAsdC1pKSxNYXRoLm1pbihhLnRleHQubGVuZ3RoLGUtaSkpOmEuY3V0KE1hdGgubWF4KDAsdC1pLTEpLE1hdGgubWluKGEuY29udGVudC5zaXplLGUtaS0xKSkpLG4ucHVzaChhKSxyKz1hLm5vZGVTaXplKSxpPWN9cmV0dXJuIG5ldyBzKG4scil9LHMucHJvdG90eXBlLmN1dEJ5SW5kZXg9ZnVuY3Rpb24odCxlKXtyZXR1cm4gdD09ZT9zLmVtcHR5OjA9PXQmJmU9PXRoaXMuY29udGVudC5sZW5ndGg/dGhpczpuZXcgcyh0aGlzLmNvbnRlbnQuc2xpY2UodCxlKSl9LHMucHJvdG90eXBlLnJlcGxhY2VDaGlsZD1mdW5jdGlvbih0LGUpe3ZhciBuPXRoaXMuY29udGVudFt0XTtpZihuPT1lKXJldHVybiB0aGlzO3ZhciByPXRoaXMuY29udGVudC5zbGljZSgpLG89dGhpcy5zaXplK2Uubm9kZVNpemUtbi5ub2RlU2l6ZTtyZXR1cm4gclt0XT1lLG5ldyBzKHIsbyl9LHMucHJvdG90eXBlLmFkZFRvU3RhcnQ9ZnVuY3Rpb24odCl7cmV0dXJuIG5ldyBzKFt0XS5jb25jYXQodGhpcy5jb250ZW50KSx0aGlzLnNpemUrdC5ub2RlU2l6ZSl9LHMucHJvdG90eXBlLmFkZFRvRW5kPWZ1bmN0aW9uKHQpe3JldHVybiBuZXcgcyh0aGlzLmNvbnRlbnQuY29uY2F0KHQpLHRoaXMuc2l6ZSt0Lm5vZGVTaXplKX0scy5wcm90b3R5cGUuZXE9ZnVuY3Rpb24odCl7aWYodGhpcy5jb250ZW50Lmxlbmd0aCE9dC5jb250ZW50Lmxlbmd0aClyZXR1cm4hMTtmb3IodmFyIGU9MDtlPHRoaXMuY29udGVudC5sZW5ndGg7ZSsrKWlmKCF0aGlzLmNvbnRlbnRbZV0uZXEodC5jb250ZW50W2VdKSlyZXR1cm4hMTtyZXR1cm4hMH0sYS5maXJzdENoaWxkLmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLmNvbnRlbnQubGVuZ3RoP3RoaXMuY29udGVudFswXTpudWxsfSxhLmxhc3RDaGlsZC5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jb250ZW50Lmxlbmd0aD90aGlzLmNvbnRlbnRbdGhpcy5jb250ZW50Lmxlbmd0aC0xXTpudWxsfSxhLmNoaWxkQ291bnQuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY29udGVudC5sZW5ndGh9LHMucHJvdG90eXBlLmNoaWxkPWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMuY29udGVudFt0XTtpZighZSl0aHJvdyBuZXcgUmFuZ2VFcnJvcigiSW5kZXggIit0KyIgb3V0IG9mIHJhbmdlIGZvciAiK3RoaXMpO3JldHVybiBlfSxzLnByb3RvdHlwZS5tYXliZUNoaWxkPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLmNvbnRlbnRbdF19LHMucHJvdG90eXBlLmZvckVhY2g9ZnVuY3Rpb24odCl7Zm9yKHZhciBlPTAsbj0wO2U8dGhpcy5jb250ZW50Lmxlbmd0aDtlKyspe3ZhciByPXRoaXMuY29udGVudFtlXTt0KHIsbixlKSxuKz1yLm5vZGVTaXplfX0scy5wcm90b3R5cGUuZmluZERpZmZTdGFydD1mdW5jdGlvbih0LGUpe3JldHVybiB2b2lkIDA9PT1lJiYoZT0wKSxvKHRoaXMsdCxlKX0scy5wcm90b3R5cGUuZmluZERpZmZFbmQ9ZnVuY3Rpb24odCxlLG4pe3JldHVybiB2b2lkIDA9PT1lJiYoZT10aGlzLnNpemUpLHZvaWQgMD09PW4mJihuPXQuc2l6ZSksaSh0aGlzLHQsZSxuKX0scy5wcm90b3R5cGUuZmluZEluZGV4PWZ1bmN0aW9uKHQsZSl7aWYodm9pZCAwPT09ZSYmKGU9LTEpLDA9PXQpcmV0dXJuIHUoMCx0KTtpZih0PT10aGlzLnNpemUpcmV0dXJuIHUodGhpcy5jb250ZW50Lmxlbmd0aCx0KTtpZih0PnRoaXMuc2l6ZXx8dDwwKXRocm93IG5ldyBSYW5nZUVycm9yKCJQb3NpdGlvbiAiK3QrIiBvdXRzaWRlIG9mIGZyYWdtZW50ICgiK3RoaXMrIikiKTtmb3IodmFyIG49MCxyPTA7O24rKyl7dmFyIG89dGhpcy5jaGlsZChuKSxpPXIrby5ub2RlU2l6ZTtpZihpPj10KXJldHVybiBpPT10fHxlPjA/dShuKzEsaSk6dShuLHIpO3I9aX19LHMucHJvdG90eXBlLnRvU3RyaW5nPWZ1bmN0aW9uKCl7cmV0dXJuIjwiK3RoaXMudG9TdHJpbmdJbm5lcigpKyI+In0scy5wcm90b3R5cGUudG9TdHJpbmdJbm5lcj1mdW5jdGlvbigpe3JldHVybiB0aGlzLmNvbnRlbnQuam9pbigiLCAiKX0scy5wcm90b3R5cGUudG9KU09OPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY29udGVudC5sZW5ndGg/dGhpcy5jb250ZW50Lm1hcCgoZnVuY3Rpb24odCl7cmV0dXJuIHQudG9KU09OKCl9KSk6bnVsbH0scy5mcm9tSlNPTj1mdW5jdGlvbih0LGUpe2lmKCFlKXJldHVybiBzLmVtcHR5O2lmKCFBcnJheS5pc0FycmF5KGUpKXRocm93IG5ldyBSYW5nZUVycm9yKCJJbnZhbGlkIGlucHV0IGZvciBGcmFnbWVudC5mcm9tSlNPTiIpO3JldHVybiBuZXcgcyhlLm1hcCh0Lm5vZGVGcm9tSlNPTikpfSxzLmZyb21BcnJheT1mdW5jdGlvbih0KXtpZighdC5sZW5ndGgpcmV0dXJuIHMuZW1wdHk7Zm9yKHZhciBlLG49MCxyPTA7cjx0Lmxlbmd0aDtyKyspe3ZhciBvPXRbcl07bis9by5ub2RlU2l6ZSxyJiZvLmlzVGV4dCYmdFtyLTFdLnNhbWVNYXJrdXAobyk/KGV8fChlPXQuc2xpY2UoMCxyKSksZVtlLmxlbmd0aC0xXT1vLndpdGhUZXh0KGVbZS5sZW5ndGgtMV0udGV4dCtvLnRleHQpKTplJiZlLnB1c2gobyl9cmV0dXJuIG5ldyBzKGV8fHQsbil9LHMuZnJvbT1mdW5jdGlvbih0KXtpZighdClyZXR1cm4gcy5lbXB0eTtpZih0IGluc3RhbmNlb2YgcylyZXR1cm4gdDtpZihBcnJheS5pc0FycmF5KHQpKXJldHVybiB0aGlzLmZyb21BcnJheSh0KTtpZih0LmF0dHJzKXJldHVybiBuZXcgcyhbdF0sdC5ub2RlU2l6ZSk7dGhyb3cgbmV3IFJhbmdlRXJyb3IoIkNhbiBub3QgY29udmVydCAiK3QrIiB0byBhIEZyYWdtZW50IisodC5ub2Rlc0JldHdlZW4/IiAobG9va3MgbGlrZSBtdWx0aXBsZSB2ZXJzaW9ucyBvZiBwcm9zZW1pcnJvci1tb2RlbCB3ZXJlIGxvYWRlZCkiOiIiKSl9LE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKHMucHJvdG90eXBlLGEpO3ZhciBjPXtpbmRleDowLG9mZnNldDowfTtmdW5jdGlvbiB1KHQsZSl7cmV0dXJuIGMuaW5kZXg9dCxjLm9mZnNldD1lLGN9ZnVuY3Rpb24gbCh0LGUpe2lmKHQ9PT1lKXJldHVybiEwO2lmKCF0fHwib2JqZWN0IiE9dHlwZW9mIHR8fCFlfHwib2JqZWN0IiE9dHlwZW9mIGUpcmV0dXJuITE7dmFyIG49QXJyYXkuaXNBcnJheSh0KTtpZihBcnJheS5pc0FycmF5KGUpIT1uKXJldHVybiExO2lmKG4pe2lmKHQubGVuZ3RoIT1lLmxlbmd0aClyZXR1cm4hMTtmb3IodmFyIHI9MDtyPHQubGVuZ3RoO3IrKylpZighbCh0W3JdLGVbcl0pKXJldHVybiExfWVsc2V7Zm9yKHZhciBvIGluIHQpaWYoIShvIGluIGUpfHwhbCh0W29dLGVbb10pKXJldHVybiExO2Zvcih2YXIgaSBpbiBlKWlmKCEoaSBpbiB0KSlyZXR1cm4hMX1yZXR1cm4hMH1zLmVtcHR5PW5ldyBzKFtdLDApO3ZhciBoPWZ1bmN0aW9uKHQsZSl7dGhpcy50eXBlPXQsdGhpcy5hdHRycz1lfTtmdW5jdGlvbiBmKHQpe3ZhciBlPUVycm9yLmNhbGwodGhpcyx0KTtyZXR1cm4gZS5fX3Byb3RvX189Zi5wcm90b3R5cGUsZX1oLnByb3RvdHlwZS5hZGRUb1NldD1mdW5jdGlvbih0KXtmb3IodmFyIGUsbj0hMSxyPTA7cjx0Lmxlbmd0aDtyKyspe3ZhciBvPXRbcl07aWYodGhpcy5lcShvKSlyZXR1cm4gdDtpZih0aGlzLnR5cGUuZXhjbHVkZXMoby50eXBlKSllfHwoZT10LnNsaWNlKDAscikpO2Vsc2V7aWYoby50eXBlLmV4Y2x1ZGVzKHRoaXMudHlwZSkpcmV0dXJuIHQ7IW4mJm8udHlwZS5yYW5rPnRoaXMudHlwZS5yYW5rJiYoZXx8KGU9dC5zbGljZSgwLHIpKSxlLnB1c2godGhpcyksbj0hMCksZSYmZS5wdXNoKG8pfX1yZXR1cm4gZXx8KGU9dC5zbGljZSgpKSxufHxlLnB1c2godGhpcyksZX0saC5wcm90b3R5cGUucmVtb3ZlRnJvbVNldD1mdW5jdGlvbih0KXtmb3IodmFyIGU9MDtlPHQubGVuZ3RoO2UrKylpZih0aGlzLmVxKHRbZV0pKXJldHVybiB0LnNsaWNlKDAsZSkuY29uY2F0KHQuc2xpY2UoZSsxKSk7cmV0dXJuIHR9LGgucHJvdG90eXBlLmlzSW5TZXQ9ZnVuY3Rpb24odCl7Zm9yKHZhciBlPTA7ZTx0Lmxlbmd0aDtlKyspaWYodGhpcy5lcSh0W2VdKSlyZXR1cm4hMDtyZXR1cm4hMX0saC5wcm90b3R5cGUuZXE9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXM9PXR8fHRoaXMudHlwZT09dC50eXBlJiZsKHRoaXMuYXR0cnMsdC5hdHRycyl9LGgucHJvdG90eXBlLnRvSlNPTj1mdW5jdGlvbigpe3ZhciB0PXt0eXBlOnRoaXMudHlwZS5uYW1lfTtmb3IodmFyIGUgaW4gdGhpcy5hdHRycyl7dC5hdHRycz10aGlzLmF0dHJzO2JyZWFrfXJldHVybiB0fSxoLmZyb21KU09OPWZ1bmN0aW9uKHQsZSl7aWYoIWUpdGhyb3cgbmV3IFJhbmdlRXJyb3IoIkludmFsaWQgaW5wdXQgZm9yIE1hcmsuZnJvbUpTT04iKTt2YXIgbj10Lm1hcmtzW2UudHlwZV07aWYoIW4pdGhyb3cgbmV3IFJhbmdlRXJyb3IoIlRoZXJlIGlzIG5vIG1hcmsgdHlwZSAiK2UudHlwZSsiIGluIHRoaXMgc2NoZW1hIik7cmV0dXJuIG4uY3JlYXRlKGUuYXR0cnMpfSxoLnNhbWVTZXQ9ZnVuY3Rpb24odCxlKXtpZih0PT1lKXJldHVybiEwO2lmKHQubGVuZ3RoIT1lLmxlbmd0aClyZXR1cm4hMTtmb3IodmFyIG49MDtuPHQubGVuZ3RoO24rKylpZighdFtuXS5lcShlW25dKSlyZXR1cm4hMTtyZXR1cm4hMH0saC5zZXRGcm9tPWZ1bmN0aW9uKHQpe2lmKCF0fHwwPT10Lmxlbmd0aClyZXR1cm4gaC5ub25lO2lmKHQgaW5zdGFuY2VvZiBoKXJldHVyblt0XTt2YXIgZT10LnNsaWNlKCk7cmV0dXJuIGUuc29ydCgoZnVuY3Rpb24odCxlKXtyZXR1cm4gdC50eXBlLnJhbmstZS50eXBlLnJhbmt9KSksZX0saC5ub25lPVtdLGYucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoRXJyb3IucHJvdG90eXBlKSxmLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1mLGYucHJvdG90eXBlLm5hbWU9IlJlcGxhY2VFcnJvciI7dmFyIHA9ZnVuY3Rpb24odCxlLG4pe3RoaXMuY29udGVudD10LHRoaXMub3BlblN0YXJ0PWUsdGhpcy5vcGVuRW5kPW59LGQ9e3NpemU6e2NvbmZpZ3VyYWJsZTohMH19O2Z1bmN0aW9uIHYodCxlLG4pe3ZhciByPXQuZmluZEluZGV4KGUpLG89ci5pbmRleCxpPXIub2Zmc2V0LHM9dC5tYXliZUNoaWxkKG8pLGE9dC5maW5kSW5kZXgobiksYz1hLmluZGV4LHU9YS5vZmZzZXQ7aWYoaT09ZXx8cy5pc1RleHQpe2lmKHUhPW4mJiF0LmNoaWxkKGMpLmlzVGV4dCl0aHJvdyBuZXcgUmFuZ2VFcnJvcigiUmVtb3Zpbmcgbm9uLWZsYXQgcmFuZ2UiKTtyZXR1cm4gdC5jdXQoMCxlKS5hcHBlbmQodC5jdXQobikpfWlmKG8hPWMpdGhyb3cgbmV3IFJhbmdlRXJyb3IoIlJlbW92aW5nIG5vbi1mbGF0IHJhbmdlIik7cmV0dXJuIHQucmVwbGFjZUNoaWxkKG8scy5jb3B5KHYocy5jb250ZW50LGUtaS0xLG4taS0xKSkpfWZ1bmN0aW9uIG0odCxlLG4scil7dmFyIG89dC5maW5kSW5kZXgoZSksaT1vLmluZGV4LHM9by5vZmZzZXQsYT10Lm1heWJlQ2hpbGQoaSk7aWYocz09ZXx8YS5pc1RleHQpcmV0dXJuIHImJiFyLmNhblJlcGxhY2UoaSxpLG4pP251bGw6dC5jdXQoMCxlKS5hcHBlbmQobikuYXBwZW5kKHQuY3V0KGUpKTt2YXIgYz1tKGEuY29udGVudCxlLXMtMSxuKTtyZXR1cm4gYyYmdC5yZXBsYWNlQ2hpbGQoaSxhLmNvcHkoYykpfWZ1bmN0aW9uIGcodCxlLG4pe2lmKG4ub3BlblN0YXJ0PnQuZGVwdGgpdGhyb3cgbmV3IGYoIkluc2VydGVkIGNvbnRlbnQgZGVlcGVyIHRoYW4gaW5zZXJ0aW9uIHBvc2l0aW9uIik7aWYodC5kZXB0aC1uLm9wZW5TdGFydCE9ZS5kZXB0aC1uLm9wZW5FbmQpdGhyb3cgbmV3IGYoIkluY29uc2lzdGVudCBvcGVuIGRlcHRocyIpO3JldHVybiB5KHQsZSxuLDApfWZ1bmN0aW9uIHkodCxlLG4scil7dmFyIG89dC5pbmRleChyKSxpPXQubm9kZShyKTtpZihvPT1lLmluZGV4KHIpJiZyPHQuZGVwdGgtbi5vcGVuU3RhcnQpe3ZhciBzPXkodCxlLG4scisxKTtyZXR1cm4gaS5jb3B5KGkuY29udGVudC5yZXBsYWNlQ2hpbGQobyxzKSl9aWYobi5jb250ZW50LnNpemUpe2lmKG4ub3BlblN0YXJ0fHxuLm9wZW5FbmR8fHQuZGVwdGghPXJ8fGUuZGVwdGghPXIpe3ZhciBhPU0obix0KSxjPWEuc3RhcnQsdT1hLmVuZDtyZXR1cm4gUyhpLEModCxjLHUsZSxyKSl9dmFyIGw9dC5wYXJlbnQsaD1sLmNvbnRlbnQ7cmV0dXJuIFMobCxoLmN1dCgwLHQucGFyZW50T2Zmc2V0KS5hcHBlbmQobi5jb250ZW50KS5hcHBlbmQoaC5jdXQoZS5wYXJlbnRPZmZzZXQpKSl9cmV0dXJuIFMoaSxPKHQsZSxyKSl9ZnVuY3Rpb24gdyh0LGUpe2lmKCFlLnR5cGUuY29tcGF0aWJsZUNvbnRlbnQodC50eXBlKSl0aHJvdyBuZXcgZigiQ2Fubm90IGpvaW4gIitlLnR5cGUubmFtZSsiIG9udG8gIit0LnR5cGUubmFtZSl9ZnVuY3Rpb24gYih0LGUsbil7dmFyIHI9dC5ub2RlKG4pO3JldHVybiB3KHIsZS5ub2RlKG4pKSxyfWZ1bmN0aW9uIHgodCxlKXt2YXIgbj1lLmxlbmd0aC0xO24+PTAmJnQuaXNUZXh0JiZ0LnNhbWVNYXJrdXAoZVtuXSk/ZVtuXT10LndpdGhUZXh0KGVbbl0udGV4dCt0LnRleHQpOmUucHVzaCh0KX1mdW5jdGlvbiBrKHQsZSxuLHIpe3ZhciBvPShlfHx0KS5ub2RlKG4pLGk9MCxzPWU/ZS5pbmRleChuKTpvLmNoaWxkQ291bnQ7dCYmKGk9dC5pbmRleChuKSx0LmRlcHRoPm4/aSsrOnQudGV4dE9mZnNldCYmKHgodC5ub2RlQWZ0ZXIsciksaSsrKSk7Zm9yKHZhciBhPWk7YTxzO2ErKyl4KG8uY2hpbGQoYSkscik7ZSYmZS5kZXB0aD09biYmZS50ZXh0T2Zmc2V0JiZ4KGUubm9kZUJlZm9yZSxyKX1mdW5jdGlvbiBTKHQsZSl7aWYoIXQudHlwZS52YWxpZENvbnRlbnQoZSkpdGhyb3cgbmV3IGYoIkludmFsaWQgY29udGVudCBmb3Igbm9kZSAiK3QudHlwZS5uYW1lKTtyZXR1cm4gdC5jb3B5KGUpfWZ1bmN0aW9uIEModCxlLG4scixvKXt2YXIgaT10LmRlcHRoPm8mJmIodCxlLG8rMSksYT1yLmRlcHRoPm8mJmIobixyLG8rMSksYz1bXTtyZXR1cm4gayhudWxsLHQsbyxjKSxpJiZhJiZlLmluZGV4KG8pPT1uLmluZGV4KG8pPyh3KGksYSkseChTKGksQyh0LGUsbixyLG8rMSkpLGMpKTooaSYmeChTKGksTyh0LGUsbysxKSksYyksayhlLG4sbyxjKSxhJiZ4KFMoYSxPKG4scixvKzEpKSxjKSksayhyLG51bGwsbyxjKSxuZXcgcyhjKX1mdW5jdGlvbiBPKHQsZSxuKXt2YXIgcj1bXTtpZihrKG51bGwsdCxuLHIpLHQuZGVwdGg+bil7dmFyIG89Yih0LGUsbisxKTt4KFMobyxPKHQsZSxuKzEpKSxyKX1yZXR1cm4gayhlLG51bGwsbixyKSxuZXcgcyhyKX1mdW5jdGlvbiBNKHQsZSl7Zm9yKHZhciBuPWUuZGVwdGgtdC5vcGVuU3RhcnQscj1lLm5vZGUobiksbz1yLmNvcHkodC5jb250ZW50KSxpPW4tMTtpPj0wO2ktLSlvPWUubm9kZShpKS5jb3B5KHMuZnJvbShvKSk7cmV0dXJue3N0YXJ0Om8ucmVzb2x2ZU5vQ2FjaGUodC5vcGVuU3RhcnQrbiksZW5kOm8ucmVzb2x2ZU5vQ2FjaGUoby5jb250ZW50LnNpemUtdC5vcGVuRW5kLW4pfX1kLnNpemUuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY29udGVudC5zaXplLXRoaXMub3BlblN0YXJ0LXRoaXMub3BlbkVuZH0scC5wcm90b3R5cGUuaW5zZXJ0QXQ9ZnVuY3Rpb24odCxlKXt2YXIgbj1tKHRoaXMuY29udGVudCx0K3RoaXMub3BlblN0YXJ0LGUsbnVsbCk7cmV0dXJuIG4mJm5ldyBwKG4sdGhpcy5vcGVuU3RhcnQsdGhpcy5vcGVuRW5kKX0scC5wcm90b3R5cGUucmVtb3ZlQmV0d2Vlbj1mdW5jdGlvbih0LGUpe3JldHVybiBuZXcgcCh2KHRoaXMuY29udGVudCx0K3RoaXMub3BlblN0YXJ0LGUrdGhpcy5vcGVuU3RhcnQpLHRoaXMub3BlblN0YXJ0LHRoaXMub3BlbkVuZCl9LHAucHJvdG90eXBlLmVxPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLmNvbnRlbnQuZXEodC5jb250ZW50KSYmdGhpcy5vcGVuU3RhcnQ9PXQub3BlblN0YXJ0JiZ0aGlzLm9wZW5FbmQ9PXQub3BlbkVuZH0scC5wcm90b3R5cGUudG9TdHJpbmc9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jb250ZW50KyIoIit0aGlzLm9wZW5TdGFydCsiLCIrdGhpcy5vcGVuRW5kKyIpIn0scC5wcm90b3R5cGUudG9KU09OPWZ1bmN0aW9uKCl7aWYoIXRoaXMuY29udGVudC5zaXplKXJldHVybiBudWxsO3ZhciB0PXtjb250ZW50OnRoaXMuY29udGVudC50b0pTT04oKX07cmV0dXJuIHRoaXMub3BlblN0YXJ0PjAmJih0Lm9wZW5TdGFydD10aGlzLm9wZW5TdGFydCksdGhpcy5vcGVuRW5kPjAmJih0Lm9wZW5FbmQ9dGhpcy5vcGVuRW5kKSx0fSxwLmZyb21KU09OPWZ1bmN0aW9uKHQsZSl7aWYoIWUpcmV0dXJuIHAuZW1wdHk7dmFyIG49ZS5vcGVuU3RhcnR8fDAscj1lLm9wZW5FbmR8fDA7aWYoIm51bWJlciIhPXR5cGVvZiBufHwibnVtYmVyIiE9dHlwZW9mIHIpdGhyb3cgbmV3IFJhbmdlRXJyb3IoIkludmFsaWQgaW5wdXQgZm9yIFNsaWNlLmZyb21KU09OIik7cmV0dXJuIG5ldyBwKHMuZnJvbUpTT04odCxlLmNvbnRlbnQpLGUub3BlblN0YXJ0fHwwLGUub3BlbkVuZHx8MCl9LHAubWF4T3Blbj1mdW5jdGlvbih0LGUpe3ZvaWQgMD09PWUmJihlPSEwKTtmb3IodmFyIG49MCxyPTAsbz10LmZpcnN0Q2hpbGQ7byYmIW8uaXNMZWFmJiYoZXx8IW8udHlwZS5zcGVjLmlzb2xhdGluZyk7bz1vLmZpcnN0Q2hpbGQpbisrO2Zvcih2YXIgaT10Lmxhc3RDaGlsZDtpJiYhaS5pc0xlYWYmJihlfHwhaS50eXBlLnNwZWMuaXNvbGF0aW5nKTtpPWkubGFzdENoaWxkKXIrKztyZXR1cm4gbmV3IHAodCxuLHIpfSxPYmplY3QuZGVmaW5lUHJvcGVydGllcyhwLnByb3RvdHlwZSxkKSxwLmVtcHR5PW5ldyBwKHMuZW1wdHksMCwwKTt2YXIgTj1mdW5jdGlvbih0LGUsbil7dGhpcy5wb3M9dCx0aGlzLnBhdGg9ZSx0aGlzLmRlcHRoPWUubGVuZ3RoLzMtMSx0aGlzLnBhcmVudE9mZnNldD1ufSxUPXtwYXJlbnQ6e2NvbmZpZ3VyYWJsZTohMH0sZG9jOntjb25maWd1cmFibGU6ITB9LHRleHRPZmZzZXQ6e2NvbmZpZ3VyYWJsZTohMH0sbm9kZUFmdGVyOntjb25maWd1cmFibGU6ITB9LG5vZGVCZWZvcmU6e2NvbmZpZ3VyYWJsZTohMH19O04ucHJvdG90eXBlLnJlc29sdmVEZXB0aD1mdW5jdGlvbih0KXtyZXR1cm4gbnVsbD09dD90aGlzLmRlcHRoOnQ8MD90aGlzLmRlcHRoK3Q6dH0sVC5wYXJlbnQuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubm9kZSh0aGlzLmRlcHRoKX0sVC5kb2MuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubm9kZSgwKX0sTi5wcm90b3R5cGUubm9kZT1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5wYXRoWzMqdGhpcy5yZXNvbHZlRGVwdGgodCldfSxOLnByb3RvdHlwZS5pbmRleD1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5wYXRoWzMqdGhpcy5yZXNvbHZlRGVwdGgodCkrMV19LE4ucHJvdG90eXBlLmluZGV4QWZ0ZXI9ZnVuY3Rpb24odCl7cmV0dXJuIHQ9dGhpcy5yZXNvbHZlRGVwdGgodCksdGhpcy5pbmRleCh0KSsodCE9dGhpcy5kZXB0aHx8dGhpcy50ZXh0T2Zmc2V0PzE6MCl9LE4ucHJvdG90eXBlLnN0YXJ0PWZ1bmN0aW9uKHQpe3JldHVybiB0PXRoaXMucmVzb2x2ZURlcHRoKHQpLDA9PXQ/MDp0aGlzLnBhdGhbMyp0LTFdKzF9LE4ucHJvdG90eXBlLmVuZD1mdW5jdGlvbih0KXtyZXR1cm4gdD10aGlzLnJlc29sdmVEZXB0aCh0KSx0aGlzLnN0YXJ0KHQpK3RoaXMubm9kZSh0KS5jb250ZW50LnNpemV9LE4ucHJvdG90eXBlLmJlZm9yZT1mdW5jdGlvbih0KXtpZih0PXRoaXMucmVzb2x2ZURlcHRoKHQpLCF0KXRocm93IG5ldyBSYW5nZUVycm9yKCJUaGVyZSBpcyBubyBwb3NpdGlvbiBiZWZvcmUgdGhlIHRvcC1sZXZlbCBub2RlIik7cmV0dXJuIHQ9PXRoaXMuZGVwdGgrMT90aGlzLnBvczp0aGlzLnBhdGhbMyp0LTFdfSxOLnByb3RvdHlwZS5hZnRlcj1mdW5jdGlvbih0KXtpZih0PXRoaXMucmVzb2x2ZURlcHRoKHQpLCF0KXRocm93IG5ldyBSYW5nZUVycm9yKCJUaGVyZSBpcyBubyBwb3NpdGlvbiBhZnRlciB0aGUgdG9wLWxldmVsIG5vZGUiKTtyZXR1cm4gdD09dGhpcy5kZXB0aCsxP3RoaXMucG9zOnRoaXMucGF0aFszKnQtMV0rdGhpcy5wYXRoWzMqdF0ubm9kZVNpemV9LFQudGV4dE9mZnNldC5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5wb3MtdGhpcy5wYXRoW3RoaXMucGF0aC5sZW5ndGgtMV19LFQubm9kZUFmdGVyLmdldD1mdW5jdGlvbigpe3ZhciB0PXRoaXMucGFyZW50LGU9dGhpcy5pbmRleCh0aGlzLmRlcHRoKTtpZihlPT10LmNoaWxkQ291bnQpcmV0dXJuIG51bGw7dmFyIG49dGhpcy5wb3MtdGhpcy5wYXRoW3RoaXMucGF0aC5sZW5ndGgtMV0scj10LmNoaWxkKGUpO3JldHVybiBuP3QuY2hpbGQoZSkuY3V0KG4pOnJ9LFQubm9kZUJlZm9yZS5nZXQ9ZnVuY3Rpb24oKXt2YXIgdD10aGlzLmluZGV4KHRoaXMuZGVwdGgpLGU9dGhpcy5wb3MtdGhpcy5wYXRoW3RoaXMucGF0aC5sZW5ndGgtMV07cmV0dXJuIGU/dGhpcy5wYXJlbnQuY2hpbGQodCkuY3V0KDAsZSk6MD09dD9udWxsOnRoaXMucGFyZW50LmNoaWxkKHQtMSl9LE4ucHJvdG90eXBlLm1hcmtzPWZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5wYXJlbnQsZT10aGlzLmluZGV4KCk7aWYoMD09dC5jb250ZW50LnNpemUpcmV0dXJuIGgubm9uZTtpZih0aGlzLnRleHRPZmZzZXQpcmV0dXJuIHQuY2hpbGQoZSkubWFya3M7dmFyIG49dC5tYXliZUNoaWxkKGUtMSkscj10Lm1heWJlQ2hpbGQoZSk7aWYoIW4pe3ZhciBvPW47bj1yLHI9b31mb3IodmFyIGk9bi5tYXJrcyxzPTA7czxpLmxlbmd0aDtzKyspITEhPT1pW3NdLnR5cGUuc3BlYy5pbmNsdXNpdmV8fHImJmlbc10uaXNJblNldChyLm1hcmtzKXx8KGk9aVtzLS1dLnJlbW92ZUZyb21TZXQoaSkpO3JldHVybiBpfSxOLnByb3RvdHlwZS5tYXJrc0Fjcm9zcz1mdW5jdGlvbih0KXt2YXIgZT10aGlzLnBhcmVudC5tYXliZUNoaWxkKHRoaXMuaW5kZXgoKSk7aWYoIWV8fCFlLmlzSW5saW5lKXJldHVybiBudWxsO2Zvcih2YXIgbj1lLm1hcmtzLHI9dC5wYXJlbnQubWF5YmVDaGlsZCh0LmluZGV4KCkpLG89MDtvPG4ubGVuZ3RoO28rKykhMSE9PW5bb10udHlwZS5zcGVjLmluY2x1c2l2ZXx8ciYmbltvXS5pc0luU2V0KHIubWFya3MpfHwobj1uW28tLV0ucmVtb3ZlRnJvbVNldChuKSk7cmV0dXJuIG59LE4ucHJvdG90eXBlLnNoYXJlZERlcHRoPWZ1bmN0aW9uKHQpe2Zvcih2YXIgZT10aGlzLmRlcHRoO2U+MDtlLS0paWYodGhpcy5zdGFydChlKTw9dCYmdGhpcy5lbmQoZSk+PXQpcmV0dXJuIGU7cmV0dXJuIDB9LE4ucHJvdG90eXBlLmJsb2NrUmFuZ2U9ZnVuY3Rpb24odCxlKXtpZih2b2lkIDA9PT10JiYodD10aGlzKSx0LnBvczx0aGlzLnBvcylyZXR1cm4gdC5ibG9ja1JhbmdlKHRoaXMpO2Zvcih2YXIgbj10aGlzLmRlcHRoLSh0aGlzLnBhcmVudC5pbmxpbmVDb250ZW50fHx0aGlzLnBvcz09dC5wb3M/MTowKTtuPj0wO24tLSlpZih0LnBvczw9dGhpcy5lbmQobikmJighZXx8ZSh0aGlzLm5vZGUobikpKSlyZXR1cm4gbmV3IFIodGhpcyx0LG4pfSxOLnByb3RvdHlwZS5zYW1lUGFyZW50PWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLnBvcy10aGlzLnBhcmVudE9mZnNldD09dC5wb3MtdC5wYXJlbnRPZmZzZXR9LE4ucHJvdG90eXBlLm1heD1mdW5jdGlvbih0KXtyZXR1cm4gdC5wb3M+dGhpcy5wb3M/dDp0aGlzfSxOLnByb3RvdHlwZS5taW49ZnVuY3Rpb24odCl7cmV0dXJuIHQucG9zPHRoaXMucG9zP3Q6dGhpc30sTi5wcm90b3R5cGUudG9TdHJpbmc9ZnVuY3Rpb24oKXtmb3IodmFyIHQ9IiIsZT0xO2U8PXRoaXMuZGVwdGg7ZSsrKXQrPSh0PyIvIjoiIikrdGhpcy5ub2RlKGUpLnR5cGUubmFtZSsiXyIrdGhpcy5pbmRleChlLTEpO3JldHVybiB0KyI6Iit0aGlzLnBhcmVudE9mZnNldH0sTi5yZXNvbHZlPWZ1bmN0aW9uKHQsZSl7aWYoIShlPj0wJiZlPD10LmNvbnRlbnQuc2l6ZSkpdGhyb3cgbmV3IFJhbmdlRXJyb3IoIlBvc2l0aW9uICIrZSsiIG91dCBvZiByYW5nZSIpO2Zvcih2YXIgbj1bXSxyPTAsbz1lLGk9dDs7KXt2YXIgcz1pLmNvbnRlbnQuZmluZEluZGV4KG8pLGE9cy5pbmRleCxjPXMub2Zmc2V0LHU9by1jO2lmKG4ucHVzaChpLGEscitjKSwhdSlicmVhaztpZihpPWkuY2hpbGQoYSksaS5pc1RleHQpYnJlYWs7bz11LTEscis9YysxfXJldHVybiBuZXcgTihlLG4sbyl9LE4ucmVzb2x2ZUNhY2hlZD1mdW5jdGlvbih0LGUpe2Zvcih2YXIgbj0wO248QS5sZW5ndGg7bisrKXt2YXIgcj1BW25dO2lmKHIucG9zPT1lJiZyLmRvYz09dClyZXR1cm4gcn12YXIgbz1BW0VdPU4ucmVzb2x2ZSh0LGUpO3JldHVybiBFPShFKzEpJUQsb30sT2JqZWN0LmRlZmluZVByb3BlcnRpZXMoTi5wcm90b3R5cGUsVCk7dmFyIEE9W10sRT0wLEQ9MTIsUj1mdW5jdGlvbih0LGUsbil7dGhpcy4kZnJvbT10LHRoaXMuJHRvPWUsdGhpcy5kZXB0aD1ufSx6PXtzdGFydDp7Y29uZmlndXJhYmxlOiEwfSxlbmQ6e2NvbmZpZ3VyYWJsZTohMH0scGFyZW50Ontjb25maWd1cmFibGU6ITB9LHN0YXJ0SW5kZXg6e2NvbmZpZ3VyYWJsZTohMH0sZW5kSW5kZXg6e2NvbmZpZ3VyYWJsZTohMH19O3ouc3RhcnQuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuJGZyb20uYmVmb3JlKHRoaXMuZGVwdGgrMSl9LHouZW5kLmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLiR0by5hZnRlcih0aGlzLmRlcHRoKzEpfSx6LnBhcmVudC5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy4kZnJvbS5ub2RlKHRoaXMuZGVwdGgpfSx6LnN0YXJ0SW5kZXguZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuJGZyb20uaW5kZXgodGhpcy5kZXB0aCl9LHouZW5kSW5kZXguZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuJHRvLmluZGV4QWZ0ZXIodGhpcy5kZXB0aCl9LE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKFIucHJvdG90eXBlLHopO3ZhciBQPU9iamVjdC5jcmVhdGUobnVsbCksST1mdW5jdGlvbih0LGUsbixyKXt0aGlzLnR5cGU9dCx0aGlzLmF0dHJzPWUsdGhpcy5jb250ZW50PW58fHMuZW1wdHksdGhpcy5tYXJrcz1yfHxoLm5vbmV9LEI9e25vZGVTaXplOntjb25maWd1cmFibGU6ITB9LGNoaWxkQ291bnQ6e2NvbmZpZ3VyYWJsZTohMH0sdGV4dENvbnRlbnQ6e2NvbmZpZ3VyYWJsZTohMH0sZmlyc3RDaGlsZDp7Y29uZmlndXJhYmxlOiEwfSxsYXN0Q2hpbGQ6e2NvbmZpZ3VyYWJsZTohMH0saXNCbG9jazp7Y29uZmlndXJhYmxlOiEwfSxpc1RleHRibG9jazp7Y29uZmlndXJhYmxlOiEwfSxpbmxpbmVDb250ZW50Ontjb25maWd1cmFibGU6ITB9LGlzSW5saW5lOntjb25maWd1cmFibGU6ITB9LGlzVGV4dDp7Y29uZmlndXJhYmxlOiEwfSxpc0xlYWY6e2NvbmZpZ3VyYWJsZTohMH0saXNBdG9tOntjb25maWd1cmFibGU6ITB9fTtCLm5vZGVTaXplLmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLmlzTGVhZj8xOjIrdGhpcy5jb250ZW50LnNpemV9LEIuY2hpbGRDb3VudC5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jb250ZW50LmNoaWxkQ291bnR9LEkucHJvdG90eXBlLmNoaWxkPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLmNvbnRlbnQuY2hpbGQodCl9LEkucHJvdG90eXBlLm1heWJlQ2hpbGQ9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuY29udGVudC5tYXliZUNoaWxkKHQpfSxJLnByb3RvdHlwZS5mb3JFYWNoPWZ1bmN0aW9uKHQpe3RoaXMuY29udGVudC5mb3JFYWNoKHQpfSxJLnByb3RvdHlwZS5ub2Rlc0JldHdlZW49ZnVuY3Rpb24odCxlLG4scil7dm9pZCAwPT09ciYmKHI9MCksdGhpcy5jb250ZW50Lm5vZGVzQmV0d2Vlbih0LGUsbixyLHRoaXMpfSxJLnByb3RvdHlwZS5kZXNjZW5kYW50cz1mdW5jdGlvbih0KXt0aGlzLm5vZGVzQmV0d2VlbigwLHRoaXMuY29udGVudC5zaXplLHQpfSxCLnRleHRDb250ZW50LmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLnRleHRCZXR3ZWVuKDAsdGhpcy5jb250ZW50LnNpemUsIiIpfSxJLnByb3RvdHlwZS50ZXh0QmV0d2Vlbj1mdW5jdGlvbih0LGUsbixyKXtyZXR1cm4gdGhpcy5jb250ZW50LnRleHRCZXR3ZWVuKHQsZSxuLHIpfSxCLmZpcnN0Q2hpbGQuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY29udGVudC5maXJzdENoaWxkfSxCLmxhc3RDaGlsZC5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jb250ZW50Lmxhc3RDaGlsZH0sSS5wcm90b3R5cGUuZXE9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXM9PXR8fHRoaXMuc2FtZU1hcmt1cCh0KSYmdGhpcy5jb250ZW50LmVxKHQuY29udGVudCl9LEkucHJvdG90eXBlLnNhbWVNYXJrdXA9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuaGFzTWFya3VwKHQudHlwZSx0LmF0dHJzLHQubWFya3MpfSxJLnByb3RvdHlwZS5oYXNNYXJrdXA9ZnVuY3Rpb24odCxlLG4pe3JldHVybiB0aGlzLnR5cGU9PXQmJmwodGhpcy5hdHRycyxlfHx0LmRlZmF1bHRBdHRyc3x8UCkmJmguc2FtZVNldCh0aGlzLm1hcmtzLG58fGgubm9uZSl9LEkucHJvdG90eXBlLmNvcHk9ZnVuY3Rpb24odCl7cmV0dXJuIHZvaWQgMD09PXQmJih0PW51bGwpLHQ9PXRoaXMuY29udGVudD90aGlzOm5ldyB0aGlzLmNvbnN0cnVjdG9yKHRoaXMudHlwZSx0aGlzLmF0dHJzLHQsdGhpcy5tYXJrcyl9LEkucHJvdG90eXBlLm1hcms9ZnVuY3Rpb24odCl7cmV0dXJuIHQ9PXRoaXMubWFya3M/dGhpczpuZXcgdGhpcy5jb25zdHJ1Y3Rvcih0aGlzLnR5cGUsdGhpcy5hdHRycyx0aGlzLmNvbnRlbnQsdCl9LEkucHJvdG90eXBlLmN1dD1mdW5jdGlvbih0LGUpe3JldHVybiAwPT10JiZlPT10aGlzLmNvbnRlbnQuc2l6ZT90aGlzOnRoaXMuY29weSh0aGlzLmNvbnRlbnQuY3V0KHQsZSkpfSxJLnByb3RvdHlwZS5zbGljZT1mdW5jdGlvbih0LGUsbil7aWYodm9pZCAwPT09ZSYmKGU9dGhpcy5jb250ZW50LnNpemUpLHZvaWQgMD09PW4mJihuPSExKSx0PT1lKXJldHVybiBwLmVtcHR5O3ZhciByPXRoaXMucmVzb2x2ZSh0KSxvPXRoaXMucmVzb2x2ZShlKSxpPW4/MDpyLnNoYXJlZERlcHRoKGUpLHM9ci5zdGFydChpKSxhPXIubm9kZShpKSxjPWEuY29udGVudC5jdXQoci5wb3MtcyxvLnBvcy1zKTtyZXR1cm4gbmV3IHAoYyxyLmRlcHRoLWksby5kZXB0aC1pKX0sSS5wcm90b3R5cGUucmVwbGFjZT1mdW5jdGlvbih0LGUsbil7cmV0dXJuIGcodGhpcy5yZXNvbHZlKHQpLHRoaXMucmVzb2x2ZShlKSxuKX0sSS5wcm90b3R5cGUubm9kZUF0PWZ1bmN0aW9uKHQpe2Zvcih2YXIgZT10aGlzOzspe3ZhciBuPWUuY29udGVudC5maW5kSW5kZXgodCkscj1uLmluZGV4LG89bi5vZmZzZXQ7aWYoZT1lLm1heWJlQ2hpbGQociksIWUpcmV0dXJuIG51bGw7aWYobz09dHx8ZS5pc1RleHQpcmV0dXJuIGU7dC09bysxfX0sSS5wcm90b3R5cGUuY2hpbGRBZnRlcj1mdW5jdGlvbih0KXt2YXIgZT10aGlzLmNvbnRlbnQuZmluZEluZGV4KHQpLG49ZS5pbmRleCxyPWUub2Zmc2V0O3JldHVybntub2RlOnRoaXMuY29udGVudC5tYXliZUNoaWxkKG4pLGluZGV4Om4sb2Zmc2V0OnJ9fSxJLnByb3RvdHlwZS5jaGlsZEJlZm9yZT1mdW5jdGlvbih0KXtpZigwPT10KXJldHVybntub2RlOm51bGwsaW5kZXg6MCxvZmZzZXQ6MH07dmFyIGU9dGhpcy5jb250ZW50LmZpbmRJbmRleCh0KSxuPWUuaW5kZXgscj1lLm9mZnNldDtpZihyPHQpcmV0dXJue25vZGU6dGhpcy5jb250ZW50LmNoaWxkKG4pLGluZGV4Om4sb2Zmc2V0OnJ9O3ZhciBvPXRoaXMuY29udGVudC5jaGlsZChuLTEpO3JldHVybntub2RlOm8saW5kZXg6bi0xLG9mZnNldDpyLW8ubm9kZVNpemV9fSxJLnByb3RvdHlwZS5yZXNvbHZlPWZ1bmN0aW9uKHQpe3JldHVybiBOLnJlc29sdmVDYWNoZWQodGhpcyx0KX0sSS5wcm90b3R5cGUucmVzb2x2ZU5vQ2FjaGU9ZnVuY3Rpb24odCl7cmV0dXJuIE4ucmVzb2x2ZSh0aGlzLHQpfSxJLnByb3RvdHlwZS5yYW5nZUhhc01hcms9ZnVuY3Rpb24odCxlLG4pe3ZhciByPSExO3JldHVybiBlPnQmJnRoaXMubm9kZXNCZXR3ZWVuKHQsZSwoZnVuY3Rpb24odCl7cmV0dXJuIG4uaXNJblNldCh0Lm1hcmtzKSYmKHI9ITApLCFyfSkpLHJ9LEIuaXNCbG9jay5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy50eXBlLmlzQmxvY2t9LEIuaXNUZXh0YmxvY2suZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudHlwZS5pc1RleHRibG9ja30sQi5pbmxpbmVDb250ZW50LmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLnR5cGUuaW5saW5lQ29udGVudH0sQi5pc0lubGluZS5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy50eXBlLmlzSW5saW5lfSxCLmlzVGV4dC5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy50eXBlLmlzVGV4dH0sQi5pc0xlYWYuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudHlwZS5pc0xlYWZ9LEIuaXNBdG9tLmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLnR5cGUuaXNBdG9tfSxJLnByb3RvdHlwZS50b1N0cmluZz1mdW5jdGlvbigpe2lmKHRoaXMudHlwZS5zcGVjLnRvRGVidWdTdHJpbmcpcmV0dXJuIHRoaXMudHlwZS5zcGVjLnRvRGVidWdTdHJpbmcodGhpcyk7dmFyIHQ9dGhpcy50eXBlLm5hbWU7cmV0dXJuIHRoaXMuY29udGVudC5zaXplJiYodCs9IigiK3RoaXMuY29udGVudC50b1N0cmluZ0lubmVyKCkrIikiKSxGKHRoaXMubWFya3MsdCl9LEkucHJvdG90eXBlLmNvbnRlbnRNYXRjaEF0PWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMudHlwZS5jb250ZW50TWF0Y2gubWF0Y2hGcmFnbWVudCh0aGlzLmNvbnRlbnQsMCx0KTtpZighZSl0aHJvdyBuZXcgRXJyb3IoIkNhbGxlZCBjb250ZW50TWF0Y2hBdCBvbiBhIG5vZGUgd2l0aCBpbnZhbGlkIGNvbnRlbnQiKTtyZXR1cm4gZX0sSS5wcm90b3R5cGUuY2FuUmVwbGFjZT1mdW5jdGlvbih0LGUsbixyLG8pe3ZvaWQgMD09PW4mJihuPXMuZW1wdHkpLHZvaWQgMD09PXImJihyPTApLHZvaWQgMD09PW8mJihvPW4uY2hpbGRDb3VudCk7dmFyIGk9dGhpcy5jb250ZW50TWF0Y2hBdCh0KS5tYXRjaEZyYWdtZW50KG4scixvKSxhPWkmJmkubWF0Y2hGcmFnbWVudCh0aGlzLmNvbnRlbnQsZSk7aWYoIWF8fCFhLnZhbGlkRW5kKXJldHVybiExO2Zvcih2YXIgYz1yO2M8bztjKyspaWYoIXRoaXMudHlwZS5hbGxvd3NNYXJrcyhuLmNoaWxkKGMpLm1hcmtzKSlyZXR1cm4hMTtyZXR1cm4hMH0sSS5wcm90b3R5cGUuY2FuUmVwbGFjZVdpdGg9ZnVuY3Rpb24odCxlLG4scil7aWYociYmIXRoaXMudHlwZS5hbGxvd3NNYXJrcyhyKSlyZXR1cm4hMTt2YXIgbz10aGlzLmNvbnRlbnRNYXRjaEF0KHQpLm1hdGNoVHlwZShuKSxpPW8mJm8ubWF0Y2hGcmFnbWVudCh0aGlzLmNvbnRlbnQsZSk7cmV0dXJuISFpJiZpLnZhbGlkRW5kfSxJLnByb3RvdHlwZS5jYW5BcHBlbmQ9ZnVuY3Rpb24odCl7cmV0dXJuIHQuY29udGVudC5zaXplP3RoaXMuY2FuUmVwbGFjZSh0aGlzLmNoaWxkQ291bnQsdGhpcy5jaGlsZENvdW50LHQuY29udGVudCk6dGhpcy50eXBlLmNvbXBhdGlibGVDb250ZW50KHQudHlwZSl9LEkucHJvdG90eXBlLmNoZWNrPWZ1bmN0aW9uKCl7aWYoIXRoaXMudHlwZS52YWxpZENvbnRlbnQodGhpcy5jb250ZW50KSl0aHJvdyBuZXcgUmFuZ2VFcnJvcigiSW52YWxpZCBjb250ZW50IGZvciBub2RlICIrdGhpcy50eXBlLm5hbWUrIjogIit0aGlzLmNvbnRlbnQudG9TdHJpbmcoKS5zbGljZSgwLDUwKSk7dGhpcy5jb250ZW50LmZvckVhY2goKGZ1bmN0aW9uKHQpe3JldHVybiB0LmNoZWNrKCl9KSl9LEkucHJvdG90eXBlLnRvSlNPTj1mdW5jdGlvbigpe3ZhciB0PXt0eXBlOnRoaXMudHlwZS5uYW1lfTtmb3IodmFyIGUgaW4gdGhpcy5hdHRycyl7dC5hdHRycz10aGlzLmF0dHJzO2JyZWFrfXJldHVybiB0aGlzLmNvbnRlbnQuc2l6ZSYmKHQuY29udGVudD10aGlzLmNvbnRlbnQudG9KU09OKCkpLHRoaXMubWFya3MubGVuZ3RoJiYodC5tYXJrcz10aGlzLm1hcmtzLm1hcCgoZnVuY3Rpb24odCl7cmV0dXJuIHQudG9KU09OKCl9KSkpLHR9LEkuZnJvbUpTT049ZnVuY3Rpb24odCxlKXtpZighZSl0aHJvdyBuZXcgUmFuZ2VFcnJvcigiSW52YWxpZCBpbnB1dCBmb3IgTm9kZS5mcm9tSlNPTiIpO3ZhciBuPW51bGw7aWYoZS5tYXJrcyl7aWYoIUFycmF5LmlzQXJyYXkoZS5tYXJrcykpdGhyb3cgbmV3IFJhbmdlRXJyb3IoIkludmFsaWQgbWFyayBkYXRhIGZvciBOb2RlLmZyb21KU09OIik7bj1lLm1hcmtzLm1hcCh0Lm1hcmtGcm9tSlNPTil9aWYoInRleHQiPT1lLnR5cGUpe2lmKCJzdHJpbmciIT10eXBlb2YgZS50ZXh0KXRocm93IG5ldyBSYW5nZUVycm9yKCJJbnZhbGlkIHRleHQgbm9kZSBpbiBKU09OIik7cmV0dXJuIHQudGV4dChlLnRleHQsbil9dmFyIHI9cy5mcm9tSlNPTih0LGUuY29udGVudCk7cmV0dXJuIHQubm9kZVR5cGUoZS50eXBlKS5jcmVhdGUoZS5hdHRycyxyLG4pfSxPYmplY3QuZGVmaW5lUHJvcGVydGllcyhJLnByb3RvdHlwZSxCKTt2YXIgXz1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKGUsbixyLG8pe2lmKHQuY2FsbCh0aGlzLGUsbixudWxsLG8pLCFyKXRocm93IG5ldyBSYW5nZUVycm9yKCJFbXB0eSB0ZXh0IG5vZGVzIGFyZSBub3QgYWxsb3dlZCIpO3RoaXMudGV4dD1yfXQmJihlLl9fcHJvdG9fXz10KSxlLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKHQmJnQucHJvdG90eXBlKSxlLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1lO3ZhciBuPXt0ZXh0Q29udGVudDp7Y29uZmlndXJhYmxlOiEwfSxub2RlU2l6ZTp7Y29uZmlndXJhYmxlOiEwfX07cmV0dXJuIGUucHJvdG90eXBlLnRvU3RyaW5nPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudHlwZS5zcGVjLnRvRGVidWdTdHJpbmc/dGhpcy50eXBlLnNwZWMudG9EZWJ1Z1N0cmluZyh0aGlzKTpGKHRoaXMubWFya3MsSlNPTi5zdHJpbmdpZnkodGhpcy50ZXh0KSl9LG4udGV4dENvbnRlbnQuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudGV4dH0sZS5wcm90b3R5cGUudGV4dEJldHdlZW49ZnVuY3Rpb24odCxlKXtyZXR1cm4gdGhpcy50ZXh0LnNsaWNlKHQsZSl9LG4ubm9kZVNpemUuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudGV4dC5sZW5ndGh9LGUucHJvdG90eXBlLm1hcms9ZnVuY3Rpb24odCl7cmV0dXJuIHQ9PXRoaXMubWFya3M/dGhpczpuZXcgZSh0aGlzLnR5cGUsdGhpcy5hdHRycyx0aGlzLnRleHQsdCl9LGUucHJvdG90eXBlLndpdGhUZXh0PWZ1bmN0aW9uKHQpe3JldHVybiB0PT10aGlzLnRleHQ/dGhpczpuZXcgZSh0aGlzLnR5cGUsdGhpcy5hdHRycyx0LHRoaXMubWFya3MpfSxlLnByb3RvdHlwZS5jdXQ9ZnVuY3Rpb24odCxlKXtyZXR1cm4gdm9pZCAwPT09dCYmKHQ9MCksdm9pZCAwPT09ZSYmKGU9dGhpcy50ZXh0Lmxlbmd0aCksMD09dCYmZT09dGhpcy50ZXh0Lmxlbmd0aD90aGlzOnRoaXMud2l0aFRleHQodGhpcy50ZXh0LnNsaWNlKHQsZSkpfSxlLnByb3RvdHlwZS5lcT1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5zYW1lTWFya3VwKHQpJiZ0aGlzLnRleHQ9PXQudGV4dH0sZS5wcm90b3R5cGUudG9KU09OPWZ1bmN0aW9uKCl7dmFyIGU9dC5wcm90b3R5cGUudG9KU09OLmNhbGwodGhpcyk7cmV0dXJuIGUudGV4dD10aGlzLnRleHQsZX0sT2JqZWN0LmRlZmluZVByb3BlcnRpZXMoZS5wcm90b3R5cGUsbiksZX0oSSk7ZnVuY3Rpb24gRih0LGUpe2Zvcih2YXIgbj10Lmxlbmd0aC0xO24+PTA7bi0tKWU9dFtuXS50eXBlLm5hbWUrIigiK2UrIikiO3JldHVybiBlfXZhciBqPWZ1bmN0aW9uKHQpe3RoaXMudmFsaWRFbmQ9dCx0aGlzLm5leHQ9W10sdGhpcy53cmFwQ2FjaGU9W119LCQ9e2lubGluZUNvbnRlbnQ6e2NvbmZpZ3VyYWJsZTohMH0sZGVmYXVsdFR5cGU6e2NvbmZpZ3VyYWJsZTohMH0sZWRnZUNvdW50Ontjb25maWd1cmFibGU6ITB9fTtqLnBhcnNlPWZ1bmN0aW9uKHQsZSl7dmFyIG49bmV3IFYodCxlKTtpZihudWxsPT1uLm5leHQpcmV0dXJuIGouZW1wdHk7dmFyIHI9cShuKTtuLm5leHQmJm4uZXJyKCJVbmV4cGVjdGVkIHRyYWlsaW5nIHRleHQiKTt2YXIgbz1RKFgocikpO3JldHVybiB0dChvLG4pLG99LGoucHJvdG90eXBlLm1hdGNoVHlwZT1mdW5jdGlvbih0KXtmb3IodmFyIGU9MDtlPHRoaXMubmV4dC5sZW5ndGg7ZSs9MilpZih0aGlzLm5leHRbZV09PXQpcmV0dXJuIHRoaXMubmV4dFtlKzFdO3JldHVybiBudWxsfSxqLnByb3RvdHlwZS5tYXRjaEZyYWdtZW50PWZ1bmN0aW9uKHQsZSxuKXt2b2lkIDA9PT1lJiYoZT0wKSx2b2lkIDA9PT1uJiYobj10LmNoaWxkQ291bnQpO2Zvcih2YXIgcj10aGlzLG89ZTtyJiZvPG47bysrKXI9ci5tYXRjaFR5cGUodC5jaGlsZChvKS50eXBlKTtyZXR1cm4gcn0sJC5pbmxpbmVDb250ZW50LmdldD1mdW5jdGlvbigpe3ZhciB0PXRoaXMubmV4dFswXTtyZXR1cm4hIXQmJnQuaXNJbmxpbmV9LCQuZGVmYXVsdFR5cGUuZ2V0PWZ1bmN0aW9uKCl7Zm9yKHZhciB0PTA7dDx0aGlzLm5leHQubGVuZ3RoO3QrPTIpe3ZhciBlPXRoaXMubmV4dFt0XTtpZighZS5pc1RleHQmJiFlLmhhc1JlcXVpcmVkQXR0cnMoKSlyZXR1cm4gZX19LGoucHJvdG90eXBlLmNvbXBhdGlibGU9ZnVuY3Rpb24odCl7Zm9yKHZhciBlPTA7ZTx0aGlzLm5leHQubGVuZ3RoO2UrPTIpZm9yKHZhciBuPTA7bjx0Lm5leHQubGVuZ3RoO24rPTIpaWYodGhpcy5uZXh0W2VdPT10Lm5leHRbbl0pcmV0dXJuITA7cmV0dXJuITF9LGoucHJvdG90eXBlLmZpbGxCZWZvcmU9ZnVuY3Rpb24odCxlLG4pe3ZvaWQgMD09PWUmJihlPSExKSx2b2lkIDA9PT1uJiYobj0wKTt2YXIgcj1bdGhpc107ZnVuY3Rpb24gbyhpLGEpe3ZhciBjPWkubWF0Y2hGcmFnbWVudCh0LG4pO2lmKGMmJighZXx8Yy52YWxpZEVuZCkpcmV0dXJuIHMuZnJvbShhLm1hcCgoZnVuY3Rpb24odCl7cmV0dXJuIHQuY3JlYXRlQW5kRmlsbCgpfSkpKTtmb3IodmFyIHU9MDt1PGkubmV4dC5sZW5ndGg7dSs9Mil7dmFyIGw9aS5uZXh0W3VdLGg9aS5uZXh0W3UrMV07aWYoIWwuaXNUZXh0JiYhbC5oYXNSZXF1aXJlZEF0dHJzKCkmJi0xPT1yLmluZGV4T2YoaCkpe3IucHVzaChoKTt2YXIgZj1vKGgsYS5jb25jYXQobCkpO2lmKGYpcmV0dXJuIGZ9fX1yZXR1cm4gbyh0aGlzLFtdKX0sai5wcm90b3R5cGUuZmluZFdyYXBwaW5nPWZ1bmN0aW9uKHQpe2Zvcih2YXIgZT0wO2U8dGhpcy53cmFwQ2FjaGUubGVuZ3RoO2UrPTIpaWYodGhpcy53cmFwQ2FjaGVbZV09PXQpcmV0dXJuIHRoaXMud3JhcENhY2hlW2UrMV07dmFyIG49dGhpcy5jb21wdXRlV3JhcHBpbmcodCk7cmV0dXJuIHRoaXMud3JhcENhY2hlLnB1c2godCxuKSxufSxqLnByb3RvdHlwZS5jb21wdXRlV3JhcHBpbmc9ZnVuY3Rpb24odCl7dmFyIGU9T2JqZWN0LmNyZWF0ZShudWxsKSxuPVt7bWF0Y2g6dGhpcyx0eXBlOm51bGwsdmlhOm51bGx9XTt3aGlsZShuLmxlbmd0aCl7dmFyIHI9bi5zaGlmdCgpLG89ci5tYXRjaDtpZihvLm1hdGNoVHlwZSh0KSl7Zm9yKHZhciBpPVtdLHM9cjtzLnR5cGU7cz1zLnZpYSlpLnB1c2gocy50eXBlKTtyZXR1cm4gaS5yZXZlcnNlKCl9Zm9yKHZhciBhPTA7YTxvLm5leHQubGVuZ3RoO2ErPTIpe3ZhciBjPW8ubmV4dFthXTtjLmlzTGVhZnx8Yy5oYXNSZXF1aXJlZEF0dHJzKCl8fGMubmFtZSBpbiBlfHxyLnR5cGUmJiFvLm5leHRbYSsxXS52YWxpZEVuZHx8KG4ucHVzaCh7bWF0Y2g6Yy5jb250ZW50TWF0Y2gsdHlwZTpjLHZpYTpyfSksZVtjLm5hbWVdPSEwKX19fSwkLmVkZ2VDb3VudC5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5uZXh0Lmxlbmd0aD4+MX0sai5wcm90b3R5cGUuZWRnZT1mdW5jdGlvbih0KXt2YXIgZT10PDwxO2lmKGU+PXRoaXMubmV4dC5sZW5ndGgpdGhyb3cgbmV3IFJhbmdlRXJyb3IoIlRoZXJlJ3Mgbm8gIit0KyJ0aCBlZGdlIGluIHRoaXMgY29udGVudCBtYXRjaCIpO3JldHVybnt0eXBlOnRoaXMubmV4dFtlXSxuZXh0OnRoaXMubmV4dFtlKzFdfX0sai5wcm90b3R5cGUudG9TdHJpbmc9ZnVuY3Rpb24oKXt2YXIgdD1bXTtmdW5jdGlvbiBlKG4pe3QucHVzaChuKTtmb3IodmFyIHI9MTtyPG4ubmV4dC5sZW5ndGg7cis9MiktMT09dC5pbmRleE9mKG4ubmV4dFtyXSkmJmUobi5uZXh0W3JdKX1yZXR1cm4gZSh0aGlzKSx0Lm1hcCgoZnVuY3Rpb24oZSxuKXtmb3IodmFyIHI9bisoZS52YWxpZEVuZD8iKiI6IiAiKSsiICIsbz0wO288ZS5uZXh0Lmxlbmd0aDtvKz0yKXIrPShvPyIsICI6IiIpK2UubmV4dFtvXS5uYW1lKyItPiIrdC5pbmRleE9mKGUubmV4dFtvKzFdKTtyZXR1cm4gcn0pKS5qb2luKCJcbiIpfSxPYmplY3QuZGVmaW5lUHJvcGVydGllcyhqLnByb3RvdHlwZSwkKSxqLmVtcHR5PW5ldyBqKCEwKTt2YXIgVj1mdW5jdGlvbih0LGUpe3RoaXMuc3RyaW5nPXQsdGhpcy5ub2RlVHlwZXM9ZSx0aGlzLmlubGluZT1udWxsLHRoaXMucG9zPTAsdGhpcy50b2tlbnM9dC5zcGxpdCgvXHMqKD89XGJ8XFd8JCkvKSwiIj09dGhpcy50b2tlbnNbdGhpcy50b2tlbnMubGVuZ3RoLTFdJiZ0aGlzLnRva2Vucy5wb3AoKSwiIj09dGhpcy50b2tlbnNbMF0mJnRoaXMudG9rZW5zLnVuc2hpZnQoKX0sTD17bmV4dDp7Y29uZmlndXJhYmxlOiEwfX07ZnVuY3Rpb24gcSh0KXt2YXIgZT1bXTtkb3tlLnB1c2goSih0KSl9d2hpbGUodC5lYXQoInwiKSk7cmV0dXJuIDE9PWUubGVuZ3RoP2VbMF06e3R5cGU6ImNob2ljZSIsZXhwcnM6ZX19ZnVuY3Rpb24gSih0KXt2YXIgZT1bXTtkb3tlLnB1c2goVyh0KSl9d2hpbGUodC5uZXh0JiYiKSIhPXQubmV4dCYmInwiIT10Lm5leHQpO3JldHVybiAxPT1lLmxlbmd0aD9lWzBdOnt0eXBlOiJzZXEiLGV4cHJzOmV9fWZ1bmN0aW9uIFcodCl7Zm9yKHZhciBlPUcodCk7OylpZih0LmVhdCgiKyIpKWU9e3R5cGU6InBsdXMiLGV4cHI6ZX07ZWxzZSBpZih0LmVhdCgiKiIpKWU9e3R5cGU6InN0YXIiLGV4cHI6ZX07ZWxzZSBpZih0LmVhdCgiPyIpKWU9e3R5cGU6Im9wdCIsZXhwcjplfTtlbHNle2lmKCF0LmVhdCgieyIpKWJyZWFrO2U9Syh0LGUpfXJldHVybiBlfWZ1bmN0aW9uIEgodCl7L1xELy50ZXN0KHQubmV4dCkmJnQuZXJyKCJFeHBlY3RlZCBudW1iZXIsIGdvdCAnIit0Lm5leHQrIiciKTt2YXIgZT1OdW1iZXIodC5uZXh0KTtyZXR1cm4gdC5wb3MrKyxlfWZ1bmN0aW9uIEsodCxlKXt2YXIgbj1IKHQpLHI9bjtyZXR1cm4gdC5lYXQoIiwiKSYmKHI9In0iIT10Lm5leHQ/SCh0KTotMSksdC5lYXQoIn0iKXx8dC5lcnIoIlVuY2xvc2VkIGJyYWNlZCByYW5nZSIpLHt0eXBlOiJyYW5nZSIsbWluOm4sbWF4OnIsZXhwcjplfX1mdW5jdGlvbiBVKHQsZSl7dmFyIG49dC5ub2RlVHlwZXMscj1uW2VdO2lmKHIpcmV0dXJuW3JdO3ZhciBvPVtdO2Zvcih2YXIgaSBpbiBuKXt2YXIgcz1uW2ldO3MuZ3JvdXBzLmluZGV4T2YoZSk+LTEmJm8ucHVzaChzKX1yZXR1cm4gMD09by5sZW5ndGgmJnQuZXJyKCJObyBub2RlIHR5cGUgb3IgZ3JvdXAgJyIrZSsiJyBmb3VuZCIpLG99ZnVuY3Rpb24gRyh0KXtpZih0LmVhdCgiKCIpKXt2YXIgZT1xKHQpO3JldHVybiB0LmVhdCgiKSIpfHx0LmVycigiTWlzc2luZyBjbG9zaW5nIHBhcmVuIiksZX1pZighL1xXLy50ZXN0KHQubmV4dCkpe3ZhciBuPVUodCx0Lm5leHQpLm1hcCgoZnVuY3Rpb24oZSl7cmV0dXJuIG51bGw9PXQuaW5saW5lP3QuaW5saW5lPWUuaXNJbmxpbmU6dC5pbmxpbmUhPWUuaXNJbmxpbmUmJnQuZXJyKCJNaXhpbmcgaW5saW5lIGFuZCBibG9jayBjb250ZW50Iikse3R5cGU6Im5hbWUiLHZhbHVlOmV9fSkpO3JldHVybiB0LnBvcysrLDE9PW4ubGVuZ3RoP25bMF06e3R5cGU6ImNob2ljZSIsZXhwcnM6bn19dC5lcnIoIlVuZXhwZWN0ZWQgdG9rZW4gJyIrdC5uZXh0KyInIil9ZnVuY3Rpb24gWCh0KXt2YXIgZT1bW11dO3JldHVybiBvKGkodCwwKSxuKCkpLGU7ZnVuY3Rpb24gbigpe3JldHVybiBlLnB1c2goW10pLTF9ZnVuY3Rpb24gcih0LG4scil7dmFyIG89e3Rlcm06cix0bzpufTtyZXR1cm4gZVt0XS5wdXNoKG8pLG99ZnVuY3Rpb24gbyh0LGUpe3QuZm9yRWFjaCgoZnVuY3Rpb24odCl7cmV0dXJuIHQudG89ZX0pKX1mdW5jdGlvbiBpKHQsZSl7aWYoImNob2ljZSI9PXQudHlwZSlyZXR1cm4gdC5leHBycy5yZWR1Y2UoKGZ1bmN0aW9uKHQsbil7cmV0dXJuIHQuY29uY2F0KGkobixlKSl9KSxbXSk7aWYoInNlcSI9PXQudHlwZSlmb3IodmFyIHM9MDs7cysrKXt2YXIgYT1pKHQuZXhwcnNbc10sZSk7aWYocz09dC5leHBycy5sZW5ndGgtMSlyZXR1cm4gYTtvKGEsZT1uKCkpfWVsc2V7aWYoInN0YXIiPT10LnR5cGUpe3ZhciBjPW4oKTtyZXR1cm4gcihlLGMpLG8oaSh0LmV4cHIsYyksYyksW3IoYyldfWlmKCJwbHVzIj09dC50eXBlKXt2YXIgdT1uKCk7cmV0dXJuIG8oaSh0LmV4cHIsZSksdSksbyhpKHQuZXhwcix1KSx1KSxbcih1KV19aWYoIm9wdCI9PXQudHlwZSlyZXR1cm5bcihlKV0uY29uY2F0KGkodC5leHByLGUpKTtpZigicmFuZ2UiPT10LnR5cGUpe2Zvcih2YXIgbD1lLGg9MDtoPHQubWluO2grKyl7dmFyIGY9bigpO28oaSh0LmV4cHIsbCksZiksbD1mfWlmKC0xPT10Lm1heClvKGkodC5leHByLGwpLGwpO2Vsc2UgZm9yKHZhciBwPXQubWluO3A8dC5tYXg7cCsrKXt2YXIgZD1uKCk7cihsLGQpLG8oaSh0LmV4cHIsbCksZCksbD1kfXJldHVybltyKGwpXX1pZigibmFtZSI9PXQudHlwZSlyZXR1cm5bcihlLG51bGwsdC52YWx1ZSldfX19ZnVuY3Rpb24gWSh0LGUpe3JldHVybiBlLXR9ZnVuY3Rpb24gWih0LGUpe3ZhciBuPVtdO3JldHVybiByKGUpLG4uc29ydChZKTtmdW5jdGlvbiByKGUpe3ZhciBvPXRbZV07aWYoMT09by5sZW5ndGgmJiFvWzBdLnRlcm0pcmV0dXJuIHIob1swXS50byk7bi5wdXNoKGUpO2Zvcih2YXIgaT0wO2k8by5sZW5ndGg7aSsrKXt2YXIgcz1vW2ldLGE9cy50ZXJtLGM9cy50bzthfHwtMSE9bi5pbmRleE9mKGMpfHxyKGMpfX19ZnVuY3Rpb24gUSh0KXt2YXIgZT1PYmplY3QuY3JlYXRlKG51bGwpO3JldHVybiBuKFoodCwwKSk7ZnVuY3Rpb24gbihyKXt2YXIgbz1bXTtyLmZvckVhY2goKGZ1bmN0aW9uKGUpe3RbZV0uZm9yRWFjaCgoZnVuY3Rpb24oZSl7dmFyIG49ZS50ZXJtLHI9ZS50bztpZihuKXt2YXIgaT1vLmluZGV4T2Yobikscz1pPi0xJiZvW2krMV07Wih0LHIpLmZvckVhY2goKGZ1bmN0aW9uKHQpe3N8fG8ucHVzaChuLHM9W10pLC0xPT1zLmluZGV4T2YodCkmJnMucHVzaCh0KX0pKX19KSl9KSk7Zm9yKHZhciBpPWVbci5qb2luKCIsIildPW5ldyBqKHIuaW5kZXhPZih0Lmxlbmd0aC0xKT4tMSkscz0wO3M8by5sZW5ndGg7cys9Mil7dmFyIGE9b1tzKzFdLnNvcnQoWSk7aS5uZXh0LnB1c2gob1tzXSxlW2Euam9pbigiLCIpXXx8bihhKSl9cmV0dXJuIGl9fWZ1bmN0aW9uIHR0KHQsZSl7Zm9yKHZhciBuPTAscj1bdF07bjxyLmxlbmd0aDtuKyspe2Zvcih2YXIgbz1yW25dLGk9IW8udmFsaWRFbmQscz1bXSxhPTA7YTxvLm5leHQubGVuZ3RoO2ErPTIpe3ZhciBjPW8ubmV4dFthXSx1PW8ubmV4dFthKzFdO3MucHVzaChjLm5hbWUpLCFpfHxjLmlzVGV4dHx8Yy5oYXNSZXF1aXJlZEF0dHJzKCl8fChpPSExKSwtMT09ci5pbmRleE9mKHUpJiZyLnB1c2godSl9aSYmZS5lcnIoIk9ubHkgbm9uLWdlbmVyYXRhYmxlIG5vZGVzICgiK3Muam9pbigiLCAiKSsiKSBpbiBhIHJlcXVpcmVkIHBvc2l0aW9uIil9fWZ1bmN0aW9uIGV0KHQpe3ZhciBlPU9iamVjdC5jcmVhdGUobnVsbCk7Zm9yKHZhciBuIGluIHQpe3ZhciByPXRbbl07aWYoIXIuaGFzRGVmYXVsdClyZXR1cm4gbnVsbDtlW25dPXIuZGVmYXVsdH1yZXR1cm4gZX1mdW5jdGlvbiBudCh0LGUpe3ZhciBuPU9iamVjdC5jcmVhdGUobnVsbCk7Zm9yKHZhciByIGluIHQpe3ZhciBvPWUmJmVbcl07aWYodm9pZCAwPT09byl7dmFyIGk9dFtyXTtpZighaS5oYXNEZWZhdWx0KXRocm93IG5ldyBSYW5nZUVycm9yKCJObyB2YWx1ZSBzdXBwbGllZCBmb3IgYXR0cmlidXRlICIrcik7bz1pLmRlZmF1bHR9bltyXT1vfXJldHVybiBufWZ1bmN0aW9uIHJ0KHQpe3ZhciBlPU9iamVjdC5jcmVhdGUobnVsbCk7aWYodClmb3IodmFyIG4gaW4gdCllW25dPW5ldyBzdCh0W25dKTtyZXR1cm4gZX1MLm5leHQuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudG9rZW5zW3RoaXMucG9zXX0sVi5wcm90b3R5cGUuZWF0PWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLm5leHQ9PXQmJih0aGlzLnBvcysrfHwhMCl9LFYucHJvdG90eXBlLmVycj1mdW5jdGlvbih0KXt0aHJvdyBuZXcgU3ludGF4RXJyb3IodCsiIChpbiBjb250ZW50IGV4cHJlc3Npb24gJyIrdGhpcy5zdHJpbmcrIicpIil9LE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKFYucHJvdG90eXBlLEwpO3ZhciBvdD1mdW5jdGlvbih0LGUsbil7dGhpcy5uYW1lPXQsdGhpcy5zY2hlbWE9ZSx0aGlzLnNwZWM9bix0aGlzLmdyb3Vwcz1uLmdyb3VwP24uZ3JvdXAuc3BsaXQoIiAiKTpbXSx0aGlzLmF0dHJzPXJ0KG4uYXR0cnMpLHRoaXMuZGVmYXVsdEF0dHJzPWV0KHRoaXMuYXR0cnMpLHRoaXMuY29udGVudE1hdGNoPW51bGwsdGhpcy5tYXJrU2V0PW51bGwsdGhpcy5pbmxpbmVDb250ZW50PW51bGwsdGhpcy5pc0Jsb2NrPSEobi5pbmxpbmV8fCJ0ZXh0Ij09dCksdGhpcy5pc1RleHQ9InRleHQiPT10fSxpdD17aXNJbmxpbmU6e2NvbmZpZ3VyYWJsZTohMH0saXNUZXh0YmxvY2s6e2NvbmZpZ3VyYWJsZTohMH0saXNMZWFmOntjb25maWd1cmFibGU6ITB9LGlzQXRvbTp7Y29uZmlndXJhYmxlOiEwfX07aXQuaXNJbmxpbmUuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIXRoaXMuaXNCbG9ja30saXQuaXNUZXh0YmxvY2suZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuaXNCbG9jayYmdGhpcy5pbmxpbmVDb250ZW50fSxpdC5pc0xlYWYuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY29udGVudE1hdGNoPT1qLmVtcHR5fSxpdC5pc0F0b20uZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuaXNMZWFmfHx0aGlzLnNwZWMuYXRvbX0sb3QucHJvdG90eXBlLmhhc1JlcXVpcmVkQXR0cnM9ZnVuY3Rpb24oKXtmb3IodmFyIHQgaW4gdGhpcy5hdHRycylpZih0aGlzLmF0dHJzW3RdLmlzUmVxdWlyZWQpcmV0dXJuITA7cmV0dXJuITF9LG90LnByb3RvdHlwZS5jb21wYXRpYmxlQ29udGVudD1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcz09dHx8dGhpcy5jb250ZW50TWF0Y2guY29tcGF0aWJsZSh0LmNvbnRlbnRNYXRjaCl9LG90LnByb3RvdHlwZS5jb21wdXRlQXR0cnM9ZnVuY3Rpb24odCl7cmV0dXJuIXQmJnRoaXMuZGVmYXVsdEF0dHJzP3RoaXMuZGVmYXVsdEF0dHJzOm50KHRoaXMuYXR0cnMsdCl9LG90LnByb3RvdHlwZS5jcmVhdGU9ZnVuY3Rpb24odCxlLG4pe2lmKHRoaXMuaXNUZXh0KXRocm93IG5ldyBFcnJvcigiTm9kZVR5cGUuY3JlYXRlIGNhbid0IGNvbnN0cnVjdCB0ZXh0IG5vZGVzIik7cmV0dXJuIG5ldyBJKHRoaXMsdGhpcy5jb21wdXRlQXR0cnModCkscy5mcm9tKGUpLGguc2V0RnJvbShuKSl9LG90LnByb3RvdHlwZS5jcmVhdGVDaGVja2VkPWZ1bmN0aW9uKHQsZSxuKXtpZihlPXMuZnJvbShlKSwhdGhpcy52YWxpZENvbnRlbnQoZSkpdGhyb3cgbmV3IFJhbmdlRXJyb3IoIkludmFsaWQgY29udGVudCBmb3Igbm9kZSAiK3RoaXMubmFtZSk7cmV0dXJuIG5ldyBJKHRoaXMsdGhpcy5jb21wdXRlQXR0cnModCksZSxoLnNldEZyb20obikpfSxvdC5wcm90b3R5cGUuY3JlYXRlQW5kRmlsbD1mdW5jdGlvbih0LGUsbil7aWYodD10aGlzLmNvbXB1dGVBdHRycyh0KSxlPXMuZnJvbShlKSxlLnNpemUpe3ZhciByPXRoaXMuY29udGVudE1hdGNoLmZpbGxCZWZvcmUoZSk7aWYoIXIpcmV0dXJuIG51bGw7ZT1yLmFwcGVuZChlKX12YXIgbz10aGlzLmNvbnRlbnRNYXRjaC5tYXRjaEZyYWdtZW50KGUpLmZpbGxCZWZvcmUocy5lbXB0eSwhMCk7cmV0dXJuIG8/bmV3IEkodGhpcyx0LGUuYXBwZW5kKG8pLGguc2V0RnJvbShuKSk6bnVsbH0sb3QucHJvdG90eXBlLnZhbGlkQ29udGVudD1mdW5jdGlvbih0KXt2YXIgZT10aGlzLmNvbnRlbnRNYXRjaC5tYXRjaEZyYWdtZW50KHQpO2lmKCFlfHwhZS52YWxpZEVuZClyZXR1cm4hMTtmb3IodmFyIG49MDtuPHQuY2hpbGRDb3VudDtuKyspaWYoIXRoaXMuYWxsb3dzTWFya3ModC5jaGlsZChuKS5tYXJrcykpcmV0dXJuITE7cmV0dXJuITB9LG90LnByb3RvdHlwZS5hbGxvd3NNYXJrVHlwZT1mdW5jdGlvbih0KXtyZXR1cm4gbnVsbD09dGhpcy5tYXJrU2V0fHx0aGlzLm1hcmtTZXQuaW5kZXhPZih0KT4tMX0sb3QucHJvdG90eXBlLmFsbG93c01hcmtzPWZ1bmN0aW9uKHQpe2lmKG51bGw9PXRoaXMubWFya1NldClyZXR1cm4hMDtmb3IodmFyIGU9MDtlPHQubGVuZ3RoO2UrKylpZighdGhpcy5hbGxvd3NNYXJrVHlwZSh0W2VdLnR5cGUpKXJldHVybiExO3JldHVybiEwfSxvdC5wcm90b3R5cGUuYWxsb3dlZE1hcmtzPWZ1bmN0aW9uKHQpe2lmKG51bGw9PXRoaXMubWFya1NldClyZXR1cm4gdDtmb3IodmFyIGUsbj0wO248dC5sZW5ndGg7bisrKXRoaXMuYWxsb3dzTWFya1R5cGUodFtuXS50eXBlKT9lJiZlLnB1c2godFtuXSk6ZXx8KGU9dC5zbGljZSgwLG4pKTtyZXR1cm4gZT9lLmxlbmd0aD9lOmguZW1wdHk6dH0sb3QuY29tcGlsZT1mdW5jdGlvbih0LGUpe3ZhciBuPU9iamVjdC5jcmVhdGUobnVsbCk7dC5mb3JFYWNoKChmdW5jdGlvbih0LHIpe3JldHVybiBuW3RdPW5ldyBvdCh0LGUscil9KSk7dmFyIHI9ZS5zcGVjLnRvcE5vZGV8fCJkb2MiO2lmKCFuW3JdKXRocm93IG5ldyBSYW5nZUVycm9yKCJTY2hlbWEgaXMgbWlzc2luZyBpdHMgdG9wIG5vZGUgdHlwZSAoJyIrcisiJykiKTtpZighbi50ZXh0KXRocm93IG5ldyBSYW5nZUVycm9yKCJFdmVyeSBzY2hlbWEgbmVlZHMgYSAndGV4dCcgdHlwZSIpO2Zvcih2YXIgbyBpbiBuLnRleHQuYXR0cnMpdGhyb3cgbmV3IFJhbmdlRXJyb3IoIlRoZSB0ZXh0IG5vZGUgdHlwZSBzaG91bGQgbm90IGhhdmUgYXR0cmlidXRlcyIpO3JldHVybiBufSxPYmplY3QuZGVmaW5lUHJvcGVydGllcyhvdC5wcm90b3R5cGUsaXQpO3ZhciBzdD1mdW5jdGlvbih0KXt0aGlzLmhhc0RlZmF1bHQ9T2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHQsImRlZmF1bHQiKSx0aGlzLmRlZmF1bHQ9dC5kZWZhdWx0fSxhdD17aXNSZXF1aXJlZDp7Y29uZmlndXJhYmxlOiEwfX07YXQuaXNSZXF1aXJlZC5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4hdGhpcy5oYXNEZWZhdWx0fSxPYmplY3QuZGVmaW5lUHJvcGVydGllcyhzdC5wcm90b3R5cGUsYXQpO3ZhciBjdD1mdW5jdGlvbih0LGUsbixyKXt0aGlzLm5hbWU9dCx0aGlzLnNjaGVtYT1uLHRoaXMuc3BlYz1yLHRoaXMuYXR0cnM9cnQoci5hdHRycyksdGhpcy5yYW5rPWUsdGhpcy5leGNsdWRlZD1udWxsO3ZhciBvPWV0KHRoaXMuYXR0cnMpO3RoaXMuaW5zdGFuY2U9byYmbmV3IGgodGhpcyxvKX07Y3QucHJvdG90eXBlLmNyZWF0ZT1mdW5jdGlvbih0KXtyZXR1cm4hdCYmdGhpcy5pbnN0YW5jZT90aGlzLmluc3RhbmNlOm5ldyBoKHRoaXMsbnQodGhpcy5hdHRycyx0KSl9LGN0LmNvbXBpbGU9ZnVuY3Rpb24odCxlKXt2YXIgbj1PYmplY3QuY3JlYXRlKG51bGwpLHI9MDtyZXR1cm4gdC5mb3JFYWNoKChmdW5jdGlvbih0LG8pe3JldHVybiBuW3RdPW5ldyBjdCh0LHIrKyxlLG8pfSkpLG59LGN0LnByb3RvdHlwZS5yZW1vdmVGcm9tU2V0PWZ1bmN0aW9uKHQpe2Zvcih2YXIgZT0wO2U8dC5sZW5ndGg7ZSsrKWlmKHRbZV0udHlwZT09dGhpcylyZXR1cm4gdC5zbGljZSgwLGUpLmNvbmNhdCh0LnNsaWNlKGUrMSkpO3JldHVybiB0fSxjdC5wcm90b3R5cGUuaXNJblNldD1mdW5jdGlvbih0KXtmb3IodmFyIGU9MDtlPHQubGVuZ3RoO2UrKylpZih0W2VdLnR5cGU9PXRoaXMpcmV0dXJuIHRbZV19LGN0LnByb3RvdHlwZS5leGNsdWRlcz1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5leGNsdWRlZC5pbmRleE9mKHQpPi0xfTt2YXIgdXQ9ZnVuY3Rpb24odCl7Zm9yKHZhciBlIGluIHRoaXMuc3BlYz17fSx0KXRoaXMuc3BlY1tlXT10W2VdO3RoaXMuc3BlYy5ub2Rlcz1yWyJhIl0uZnJvbSh0Lm5vZGVzKSx0aGlzLnNwZWMubWFya3M9clsiYSJdLmZyb20odC5tYXJrcyksdGhpcy5ub2Rlcz1vdC5jb21waWxlKHRoaXMuc3BlYy5ub2Rlcyx0aGlzKSx0aGlzLm1hcmtzPWN0LmNvbXBpbGUodGhpcy5zcGVjLm1hcmtzLHRoaXMpO3ZhciBuPU9iamVjdC5jcmVhdGUobnVsbCk7Zm9yKHZhciBvIGluIHRoaXMubm9kZXMpe2lmKG8gaW4gdGhpcy5tYXJrcyl0aHJvdyBuZXcgUmFuZ2VFcnJvcihvKyIgY2FuIG5vdCBiZSBib3RoIGEgbm9kZSBhbmQgYSBtYXJrIik7dmFyIGk9dGhpcy5ub2Rlc1tvXSxzPWkuc3BlYy5jb250ZW50fHwiIixhPWkuc3BlYy5tYXJrcztpLmNvbnRlbnRNYXRjaD1uW3NdfHwobltzXT1qLnBhcnNlKHMsdGhpcy5ub2RlcykpLGkuaW5saW5lQ29udGVudD1pLmNvbnRlbnRNYXRjaC5pbmxpbmVDb250ZW50LGkubWFya1NldD0iXyI9PWE/bnVsbDphP2x0KHRoaXMsYS5zcGxpdCgiICIpKToiIiE9YSYmaS5pbmxpbmVDb250ZW50P251bGw6W119Zm9yKHZhciBjIGluIHRoaXMubWFya3Mpe3ZhciB1PXRoaXMubWFya3NbY10sbD11LnNwZWMuZXhjbHVkZXM7dS5leGNsdWRlZD1udWxsPT1sP1t1XToiIj09bD9bXTpsdCh0aGlzLGwuc3BsaXQoIiAiKSl9dGhpcy5ub2RlRnJvbUpTT049dGhpcy5ub2RlRnJvbUpTT04uYmluZCh0aGlzKSx0aGlzLm1hcmtGcm9tSlNPTj10aGlzLm1hcmtGcm9tSlNPTi5iaW5kKHRoaXMpLHRoaXMudG9wTm9kZVR5cGU9dGhpcy5ub2Rlc1t0aGlzLnNwZWMudG9wTm9kZXx8ImRvYyJdLHRoaXMuY2FjaGVkPU9iamVjdC5jcmVhdGUobnVsbCksdGhpcy5jYWNoZWQud3JhcHBpbmdzPU9iamVjdC5jcmVhdGUobnVsbCl9O2Z1bmN0aW9uIGx0KHQsZSl7Zm9yKHZhciBuPVtdLHI9MDtyPGUubGVuZ3RoO3IrKyl7dmFyIG89ZVtyXSxpPXQubWFya3Nbb10scz1pO2lmKGkpbi5wdXNoKGkpO2Vsc2UgZm9yKHZhciBhIGluIHQubWFya3Mpe3ZhciBjPXQubWFya3NbYV07KCJfIj09b3x8Yy5zcGVjLmdyb3VwJiZjLnNwZWMuZ3JvdXAuc3BsaXQoIiAiKS5pbmRleE9mKG8pPi0xKSYmbi5wdXNoKHM9Yyl9aWYoIXMpdGhyb3cgbmV3IFN5bnRheEVycm9yKCJVbmtub3duIG1hcmsgdHlwZTogJyIrZVtyXSsiJyIpfXJldHVybiBufXV0LnByb3RvdHlwZS5ub2RlPWZ1bmN0aW9uKHQsZSxuLHIpe2lmKCJzdHJpbmciPT10eXBlb2YgdCl0PXRoaXMubm9kZVR5cGUodCk7ZWxzZXtpZighKHQgaW5zdGFuY2VvZiBvdCkpdGhyb3cgbmV3IFJhbmdlRXJyb3IoIkludmFsaWQgbm9kZSB0eXBlOiAiK3QpO2lmKHQuc2NoZW1hIT10aGlzKXRocm93IG5ldyBSYW5nZUVycm9yKCJOb2RlIHR5cGUgZnJvbSBkaWZmZXJlbnQgc2NoZW1hIHVzZWQgKCIrdC5uYW1lKyIpIil9cmV0dXJuIHQuY3JlYXRlQ2hlY2tlZChlLG4scil9LHV0LnByb3RvdHlwZS50ZXh0PWZ1bmN0aW9uKHQsZSl7dmFyIG49dGhpcy5ub2Rlcy50ZXh0O3JldHVybiBuZXcgXyhuLG4uZGVmYXVsdEF0dHJzLHQsaC5zZXRGcm9tKGUpKX0sdXQucHJvdG90eXBlLm1hcms9ZnVuY3Rpb24odCxlKXtyZXR1cm4ic3RyaW5nIj09dHlwZW9mIHQmJih0PXRoaXMubWFya3NbdF0pLHQuY3JlYXRlKGUpfSx1dC5wcm90b3R5cGUubm9kZUZyb21KU09OPWZ1bmN0aW9uKHQpe3JldHVybiBJLmZyb21KU09OKHRoaXMsdCl9LHV0LnByb3RvdHlwZS5tYXJrRnJvbUpTT049ZnVuY3Rpb24odCl7cmV0dXJuIGguZnJvbUpTT04odGhpcyx0KX0sdXQucHJvdG90eXBlLm5vZGVUeXBlPWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMubm9kZXNbdF07aWYoIWUpdGhyb3cgbmV3IFJhbmdlRXJyb3IoIlVua25vd24gbm9kZSB0eXBlOiAiK3QpO3JldHVybiBlfTt2YXIgaHQ9ZnVuY3Rpb24odCxlKXt2YXIgbj10aGlzO3RoaXMuc2NoZW1hPXQsdGhpcy5ydWxlcz1lLHRoaXMudGFncz1bXSx0aGlzLnN0eWxlcz1bXSxlLmZvckVhY2goKGZ1bmN0aW9uKHQpe3QudGFnP24udGFncy5wdXNoKHQpOnQuc3R5bGUmJm4uc3R5bGVzLnB1c2godCl9KSl9O2h0LnByb3RvdHlwZS5wYXJzZT1mdW5jdGlvbih0LGUpe3ZvaWQgMD09PWUmJihlPXt9KTt2YXIgbj1uZXcgYnQodGhpcyxlLCExKTtyZXR1cm4gbi5hZGRBbGwodCxudWxsLGUuZnJvbSxlLnRvKSxuLmZpbmlzaCgpfSxodC5wcm90b3R5cGUucGFyc2VTbGljZT1mdW5jdGlvbih0LGUpe3ZvaWQgMD09PWUmJihlPXt9KTt2YXIgbj1uZXcgYnQodGhpcyxlLCEwKTtyZXR1cm4gbi5hZGRBbGwodCxudWxsLGUuZnJvbSxlLnRvKSxwLm1heE9wZW4obi5maW5pc2goKSl9LGh0LnByb3RvdHlwZS5tYXRjaFRhZz1mdW5jdGlvbih0LGUpe2Zvcih2YXIgbj0wO248dGhpcy50YWdzLmxlbmd0aDtuKyspe3ZhciByPXRoaXMudGFnc1tuXTtpZihTdCh0LHIudGFnKSYmKHZvaWQgMD09PXIubmFtZXNwYWNlfHx0Lm5hbWVzcGFjZVVSST09ci5uYW1lc3BhY2UpJiYoIXIuY29udGV4dHx8ZS5tYXRjaGVzQ29udGV4dChyLmNvbnRleHQpKSl7aWYoci5nZXRBdHRycyl7dmFyIG89ci5nZXRBdHRycyh0KTtpZighMT09PW8pY29udGludWU7ci5hdHRycz1vfXJldHVybiByfX19LGh0LnByb3RvdHlwZS5tYXRjaFN0eWxlPWZ1bmN0aW9uKHQsZSxuKXtmb3IodmFyIHI9MDtyPHRoaXMuc3R5bGVzLmxlbmd0aDtyKyspe3ZhciBvPXRoaXMuc3R5bGVzW3JdO2lmKCEoMCE9by5zdHlsZS5pbmRleE9mKHQpfHxvLmNvbnRleHQmJiFuLm1hdGNoZXNDb250ZXh0KG8uY29udGV4dCl8fG8uc3R5bGUubGVuZ3RoPnQubGVuZ3RoJiYoNjEhPW8uc3R5bGUuY2hhckNvZGVBdCh0Lmxlbmd0aCl8fG8uc3R5bGUuc2xpY2UodC5sZW5ndGgrMSkhPWUpKSl7aWYoby5nZXRBdHRycyl7dmFyIGk9by5nZXRBdHRycyhlKTtpZighMT09PWkpY29udGludWU7by5hdHRycz1pfXJldHVybiBvfX19LGh0LnNjaGVtYVJ1bGVzPWZ1bmN0aW9uKHQpe3ZhciBlPVtdO2Z1bmN0aW9uIG4odCl7Zm9yKHZhciBuPW51bGw9PXQucHJpb3JpdHk/NTA6dC5wcmlvcml0eSxyPTA7cjxlLmxlbmd0aDtyKyspe3ZhciBvPWVbcl0saT1udWxsPT1vLnByaW9yaXR5PzUwOm8ucHJpb3JpdHk7aWYoaTxuKWJyZWFrfWUuc3BsaWNlKHIsMCx0KX12YXIgcj1mdW5jdGlvbihlKXt2YXIgcj10Lm1hcmtzW2VdLnNwZWMucGFyc2VET007ciYmci5mb3JFYWNoKChmdW5jdGlvbih0KXtuKHQ9T3QodCkpLHQubWFyaz1lfSkpfTtmb3IodmFyIG8gaW4gdC5tYXJrcylyKG8pO3ZhciBpPWZ1bmN0aW9uKGUpe3ZhciByPXQubm9kZXNbc10uc3BlYy5wYXJzZURPTTtyJiZyLmZvckVhY2goKGZ1bmN0aW9uKHQpe24odD1PdCh0KSksdC5ub2RlPXN9KSl9O2Zvcih2YXIgcyBpbiB0Lm5vZGVzKWkoKTtyZXR1cm4gZX0saHQuZnJvbVNjaGVtYT1mdW5jdGlvbih0KXtyZXR1cm4gdC5jYWNoZWQuZG9tUGFyc2VyfHwodC5jYWNoZWQuZG9tUGFyc2VyPW5ldyBodCh0LGh0LnNjaGVtYVJ1bGVzKHQpKSl9O3ZhciBmdD17YWRkcmVzczohMCxhcnRpY2xlOiEwLGFzaWRlOiEwLGJsb2NrcXVvdGU6ITAsY2FudmFzOiEwLGRkOiEwLGRpdjohMCxkbDohMCxmaWVsZHNldDohMCxmaWdjYXB0aW9uOiEwLGZpZ3VyZTohMCxmb290ZXI6ITAsZm9ybTohMCxoMTohMCxoMjohMCxoMzohMCxoNDohMCxoNTohMCxoNjohMCxoZWFkZXI6ITAsaGdyb3VwOiEwLGhyOiEwLGxpOiEwLG5vc2NyaXB0OiEwLG9sOiEwLG91dHB1dDohMCxwOiEwLHByZTohMCxzZWN0aW9uOiEwLHRhYmxlOiEwLHRmb290OiEwLHVsOiEwfSxwdD17aGVhZDohMCxub3NjcmlwdDohMCxvYmplY3Q6ITAsc2NyaXB0OiEwLHN0eWxlOiEwLHRpdGxlOiEwfSxkdD17b2w6ITAsdWw6ITB9LHZ0PTEsbXQ9MixndD00O2Z1bmN0aW9uIHl0KHQpe3JldHVybih0P3Z0OjApfCgiZnVsbCI9PT10P210OjApfXZhciB3dD1mdW5jdGlvbih0LGUsbixyLG8saSxzKXt0aGlzLnR5cGU9dCx0aGlzLmF0dHJzPWUsdGhpcy5zb2xpZD1vLHRoaXMubWF0Y2g9aXx8KHMmZ3Q/bnVsbDp0LmNvbnRlbnRNYXRjaCksdGhpcy5vcHRpb25zPXMsdGhpcy5jb250ZW50PVtdLHRoaXMubWFya3M9bix0aGlzLmFjdGl2ZU1hcmtzPWgubm9uZSx0aGlzLnBlbmRpbmdNYXJrcz1yfTt3dC5wcm90b3R5cGUuZmluZFdyYXBwaW5nPWZ1bmN0aW9uKHQpe2lmKCF0aGlzLm1hdGNoKXtpZighdGhpcy50eXBlKXJldHVybltdO3ZhciBlPXRoaXMudHlwZS5jb250ZW50TWF0Y2guZmlsbEJlZm9yZShzLmZyb20odCkpO2lmKCFlKXt2YXIgbixyPXRoaXMudHlwZS5jb250ZW50TWF0Y2g7cmV0dXJuKG49ci5maW5kV3JhcHBpbmcodC50eXBlKSk/KHRoaXMubWF0Y2g9cixuKTpudWxsfXRoaXMubWF0Y2g9dGhpcy50eXBlLmNvbnRlbnRNYXRjaC5tYXRjaEZyYWdtZW50KGUpfXJldHVybiB0aGlzLm1hdGNoLmZpbmRXcmFwcGluZyh0LnR5cGUpfSx3dC5wcm90b3R5cGUuZmluaXNoPWZ1bmN0aW9uKHQpe2lmKCEodGhpcy5vcHRpb25zJnZ0KSl7dmFyIGUsbj10aGlzLmNvbnRlbnRbdGhpcy5jb250ZW50Lmxlbmd0aC0xXTtuJiZuLmlzVGV4dCYmKGU9L1sgXHRcclxuXHUwMDBjXSskLy5leGVjKG4udGV4dCkpJiYobi50ZXh0Lmxlbmd0aD09ZVswXS5sZW5ndGg/dGhpcy5jb250ZW50LnBvcCgpOnRoaXMuY29udGVudFt0aGlzLmNvbnRlbnQubGVuZ3RoLTFdPW4ud2l0aFRleHQobi50ZXh0LnNsaWNlKDAsbi50ZXh0Lmxlbmd0aC1lWzBdLmxlbmd0aCkpKX12YXIgcj1zLmZyb20odGhpcy5jb250ZW50KTtyZXR1cm4hdCYmdGhpcy5tYXRjaCYmKHI9ci5hcHBlbmQodGhpcy5tYXRjaC5maWxsQmVmb3JlKHMuZW1wdHksITApKSksdGhpcy50eXBlP3RoaXMudHlwZS5jcmVhdGUodGhpcy5hdHRycyxyLHRoaXMubWFya3MpOnJ9LHd0LnByb3RvdHlwZS5hcHBseVBlbmRpbmc9ZnVuY3Rpb24odCl7Zm9yKHZhciBlPTAsbj10aGlzLnBlbmRpbmdNYXJrcztlPG4ubGVuZ3RoO2UrKyl7dmFyIHI9bltlXTsodGhpcy50eXBlP3RoaXMudHlwZS5hbGxvd3NNYXJrVHlwZShyLnR5cGUpOk10KHIudHlwZSx0KSkmJiFyLmlzSW5TZXQodGhpcy5hY3RpdmVNYXJrcykmJih0aGlzLmFjdGl2ZU1hcmtzPXIuYWRkVG9TZXQodGhpcy5hY3RpdmVNYXJrcyksdGhpcy5wZW5kaW5nTWFya3M9ci5yZW1vdmVGcm9tU2V0KHRoaXMucGVuZGluZ01hcmtzKSl9fTt2YXIgYnQ9ZnVuY3Rpb24odCxlLG4pe3RoaXMucGFyc2VyPXQsdGhpcy5vcHRpb25zPWUsdGhpcy5pc09wZW49bjt2YXIgcixvPWUudG9wTm9kZSxpPXl0KGUucHJlc2VydmVXaGl0ZXNwYWNlKXwobj9ndDowKTtyPW8/bmV3IHd0KG8udHlwZSxvLmF0dHJzLGgubm9uZSxoLm5vbmUsITAsZS50b3BNYXRjaHx8by50eXBlLmNvbnRlbnRNYXRjaCxpKTpuZXcgd3Qobj9udWxsOnQuc2NoZW1hLnRvcE5vZGVUeXBlLG51bGwsaC5ub25lLGgubm9uZSwhMCxudWxsLGkpLHRoaXMubm9kZXM9W3JdLHRoaXMub3Blbj0wLHRoaXMuZmluZD1lLmZpbmRQb3NpdGlvbnMsdGhpcy5uZWVkc0Jsb2NrPSExfSx4dD17dG9wOntjb25maWd1cmFibGU6ITB9LGN1cnJlbnRQb3M6e2NvbmZpZ3VyYWJsZTohMH19O2Z1bmN0aW9uIGt0KHQpe2Zvcih2YXIgZT10LmZpcnN0Q2hpbGQsbj1udWxsO2U7ZT1lLm5leHRTaWJsaW5nKXt2YXIgcj0xPT1lLm5vZGVUeXBlP2Uubm9kZU5hbWUudG9Mb3dlckNhc2UoKTpudWxsO3ImJmR0Lmhhc093blByb3BlcnR5KHIpJiZuPyhuLmFwcGVuZENoaWxkKGUpLGU9bik6ImxpIj09cj9uPWU6ciYmKG49bnVsbCl9fWZ1bmN0aW9uIFN0KHQsZSl7cmV0dXJuKHQubWF0Y2hlc3x8dC5tc01hdGNoZXNTZWxlY3Rvcnx8dC53ZWJraXRNYXRjaGVzU2VsZWN0b3J8fHQubW96TWF0Y2hlc1NlbGVjdG9yKS5jYWxsKHQsZSl9ZnVuY3Rpb24gQ3QodCl7dmFyIGUsbj0vXHMqKFtcdy1dKylccyo6XHMqKFteO10rKS9nLHI9W107d2hpbGUoZT1uLmV4ZWModCkpci5wdXNoKGVbMV0sZVsyXS50cmltKCkpO3JldHVybiByfWZ1bmN0aW9uIE90KHQpe3ZhciBlPXt9O2Zvcih2YXIgbiBpbiB0KWVbbl09dFtuXTtyZXR1cm4gZX1mdW5jdGlvbiBNdCh0LGUpe3ZhciBuPWUuc2NoZW1hLm5vZGVzLHI9ZnVuY3Rpb24ocil7dmFyIG89bltyXTtpZihvLmFsbG93c01hcmtUeXBlKHQpKXt2YXIgaT1bXSxzPWZ1bmN0aW9uKHQpe2kucHVzaCh0KTtmb3IodmFyIG49MDtuPHQuZWRnZUNvdW50O24rKyl7dmFyIHI9dC5lZGdlKG4pLG89ci50eXBlLGE9ci5uZXh0O2lmKG89PWUpcmV0dXJuITA7aWYoaS5pbmRleE9mKGEpPDAmJnMoYSkpcmV0dXJuITB9fTtyZXR1cm4gcyhvLmNvbnRlbnRNYXRjaCk/e3Y6ITB9OnZvaWQgMH19O2Zvcih2YXIgbyBpbiBuKXt2YXIgaT1yKG8pO2lmKGkpcmV0dXJuIGkudn19eHQudG9wLmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLm5vZGVzW3RoaXMub3Blbl19LGJ0LnByb3RvdHlwZS5hZGRET009ZnVuY3Rpb24odCl7aWYoMz09dC5ub2RlVHlwZSl0aGlzLmFkZFRleHROb2RlKHQpO2Vsc2UgaWYoMT09dC5ub2RlVHlwZSl7dmFyIGU9dC5nZXRBdHRyaWJ1dGUoInN0eWxlIiksbj1lP3RoaXMucmVhZFN0eWxlcyhDdChlKSk6bnVsbCxyPXRoaXMudG9wO2lmKG51bGwhPW4pZm9yKHZhciBvPTA7bzxuLmxlbmd0aDtvKyspdGhpcy5hZGRQZW5kaW5nTWFyayhuW29dKTtpZih0aGlzLmFkZEVsZW1lbnQodCksbnVsbCE9bilmb3IodmFyIGk9MDtpPG4ubGVuZ3RoO2krKyl0aGlzLnJlbW92ZVBlbmRpbmdNYXJrKG5baV0scil9fSxidC5wcm90b3R5cGUuYWRkVGV4dE5vZGU9ZnVuY3Rpb24odCl7dmFyIGU9dC5ub2RlVmFsdWUsbj10aGlzLnRvcDtpZigobi50eXBlP24udHlwZS5pbmxpbmVDb250ZW50Om4uY29udGVudC5sZW5ndGgmJm4uY29udGVudFswXS5pc0lubGluZSl8fC9bXiBcdFxyXG5cdTAwMGNdLy50ZXN0KGUpKXtpZihuLm9wdGlvbnMmdnQpbi5vcHRpb25zJm10fHwoZT1lLnJlcGxhY2UoL1xyP1xufFxyL2csIiAiKSk7ZWxzZSBpZihlPWUucmVwbGFjZSgvWyBcdFxyXG5cdTAwMGNdKy9nLCIgIiksL15bIFx0XHJcblx1MDAwY10vLnRlc3QoZSkmJnRoaXMub3Blbj09dGhpcy5ub2Rlcy5sZW5ndGgtMSl7dmFyIHI9bi5jb250ZW50W24uY29udGVudC5sZW5ndGgtMV0sbz10LnByZXZpb3VzU2libGluZzsoIXJ8fG8mJiJCUiI9PW8ubm9kZU5hbWV8fHIuaXNUZXh0JiYvWyBcdFxyXG5cdTAwMGNdJC8udGVzdChyLnRleHQpKSYmKGU9ZS5zbGljZSgxKSl9ZSYmdGhpcy5pbnNlcnROb2RlKHRoaXMucGFyc2VyLnNjaGVtYS50ZXh0KGUpKSx0aGlzLmZpbmRJblRleHQodCl9ZWxzZSB0aGlzLmZpbmRJbnNpZGUodCl9LGJ0LnByb3RvdHlwZS5hZGRFbGVtZW50PWZ1bmN0aW9uKHQpe3ZhciBlPXQubm9kZU5hbWUudG9Mb3dlckNhc2UoKTtkdC5oYXNPd25Qcm9wZXJ0eShlKSYma3QodCk7dmFyIG49dGhpcy5vcHRpb25zLnJ1bGVGcm9tTm9kZSYmdGhpcy5vcHRpb25zLnJ1bGVGcm9tTm9kZSh0KXx8dGhpcy5wYXJzZXIubWF0Y2hUYWcodCx0aGlzKTtpZihuP24uaWdub3JlOnB0Lmhhc093blByb3BlcnR5KGUpKXRoaXMuZmluZEluc2lkZSh0KTtlbHNlIGlmKCFufHxuLnNraXApe24mJm4uc2tpcC5ub2RlVHlwZSYmKHQ9bi5za2lwKTt2YXIgcixvPXRoaXMudG9wLGk9dGhpcy5uZWVkc0Jsb2NrO2lmKGZ0Lmhhc093blByb3BlcnR5KGUpKXI9ITAsby50eXBlfHwodGhpcy5uZWVkc0Jsb2NrPSEwKTtlbHNlIGlmKCF0LmZpcnN0Q2hpbGQpcmV0dXJuIHZvaWQgdGhpcy5sZWFmRmFsbGJhY2sodCk7dGhpcy5hZGRBbGwodCksciYmdGhpcy5zeW5jKG8pLHRoaXMubmVlZHNCbG9jaz1pfWVsc2UgdGhpcy5hZGRFbGVtZW50QnlSdWxlKHQsbil9LGJ0LnByb3RvdHlwZS5sZWFmRmFsbGJhY2s9ZnVuY3Rpb24odCl7IkJSIj09dC5ub2RlTmFtZSYmdGhpcy50b3AudHlwZSYmdGhpcy50b3AudHlwZS5pbmxpbmVDb250ZW50JiZ0aGlzLmFkZFRleHROb2RlKHQub3duZXJEb2N1bWVudC5jcmVhdGVUZXh0Tm9kZSgiXG4iKSl9LGJ0LnByb3RvdHlwZS5yZWFkU3R5bGVzPWZ1bmN0aW9uKHQpe2Zvcih2YXIgZT1oLm5vbmUsbj0wO248dC5sZW5ndGg7bis9Mil7dmFyIHI9dGhpcy5wYXJzZXIubWF0Y2hTdHlsZSh0W25dLHRbbisxXSx0aGlzKTtpZihyKXtpZihyLmlnbm9yZSlyZXR1cm4gbnVsbDtlPXRoaXMucGFyc2VyLnNjaGVtYS5tYXJrc1tyLm1hcmtdLmNyZWF0ZShyLmF0dHJzKS5hZGRUb1NldChlKX19cmV0dXJuIGV9LGJ0LnByb3RvdHlwZS5hZGRFbGVtZW50QnlSdWxlPWZ1bmN0aW9uKHQsZSl7dmFyIG4scixvLGkscz10aGlzO2Uubm9kZT8ocj10aGlzLnBhcnNlci5zY2hlbWEubm9kZXNbZS5ub2RlXSxyLmlzTGVhZj90aGlzLmluc2VydE5vZGUoci5jcmVhdGUoZS5hdHRycykpfHx0aGlzLmxlYWZGYWxsYmFjayh0KTpuPXRoaXMuZW50ZXIocixlLmF0dHJzLGUucHJlc2VydmVXaGl0ZXNwYWNlKSk6KG89dGhpcy5wYXJzZXIuc2NoZW1hLm1hcmtzW2UubWFya10saT1vLmNyZWF0ZShlLmF0dHJzKSx0aGlzLmFkZFBlbmRpbmdNYXJrKGkpKTt2YXIgYT10aGlzLnRvcDtpZihyJiZyLmlzTGVhZil0aGlzLmZpbmRJbnNpZGUodCk7ZWxzZSBpZihlLmdldENvbnRlbnQpdGhpcy5maW5kSW5zaWRlKHQpLGUuZ2V0Q29udGVudCh0LHRoaXMucGFyc2VyLnNjaGVtYSkuZm9yRWFjaCgoZnVuY3Rpb24odCl7cmV0dXJuIHMuaW5zZXJ0Tm9kZSh0KX0pKTtlbHNle3ZhciBjPWUuY29udGVudEVsZW1lbnQ7InN0cmluZyI9PXR5cGVvZiBjP2M9dC5xdWVyeVNlbGVjdG9yKGMpOiJmdW5jdGlvbiI9PXR5cGVvZiBjJiYoYz1jKHQpKSxjfHwoYz10KSx0aGlzLmZpbmRBcm91bmQodCxjLCEwKSx0aGlzLmFkZEFsbChjLG4pfW4mJih0aGlzLnN5bmMoYSksdGhpcy5vcGVuLS0pLGkmJnRoaXMucmVtb3ZlUGVuZGluZ01hcmsoaSxhKX0sYnQucHJvdG90eXBlLmFkZEFsbD1mdW5jdGlvbih0LGUsbixyKXtmb3IodmFyIG89bnx8MCxpPW4/dC5jaGlsZE5vZGVzW25dOnQuZmlyc3RDaGlsZCxzPW51bGw9PXI/bnVsbDp0LmNoaWxkTm9kZXNbcl07aSE9cztpPWkubmV4dFNpYmxpbmcsKytvKXRoaXMuZmluZEF0UG9pbnQodCxvKSx0aGlzLmFkZERPTShpKSxlJiZmdC5oYXNPd25Qcm9wZXJ0eShpLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCkpJiZ0aGlzLnN5bmMoZSk7dGhpcy5maW5kQXRQb2ludCh0LG8pfSxidC5wcm90b3R5cGUuZmluZFBsYWNlPWZ1bmN0aW9uKHQpe2Zvcih2YXIgZSxuLHI9dGhpcy5vcGVuO3I+PTA7ci0tKXt2YXIgbz10aGlzLm5vZGVzW3JdLGk9by5maW5kV3JhcHBpbmcodCk7aWYoaSYmKCFlfHxlLmxlbmd0aD5pLmxlbmd0aCkmJihlPWksbj1vLCFpLmxlbmd0aCkpYnJlYWs7aWYoby5zb2xpZClicmVha31pZighZSlyZXR1cm4hMTt0aGlzLnN5bmMobik7Zm9yKHZhciBzPTA7czxlLmxlbmd0aDtzKyspdGhpcy5lbnRlcklubmVyKGVbc10sbnVsbCwhMSk7cmV0dXJuITB9LGJ0LnByb3RvdHlwZS5pbnNlcnROb2RlPWZ1bmN0aW9uKHQpe2lmKHQuaXNJbmxpbmUmJnRoaXMubmVlZHNCbG9jayYmIXRoaXMudG9wLnR5cGUpe3ZhciBlPXRoaXMudGV4dGJsb2NrRnJvbUNvbnRleHQoKTtlJiZ0aGlzLmVudGVySW5uZXIoZSl9aWYodGhpcy5maW5kUGxhY2UodCkpe3RoaXMuY2xvc2VFeHRyYSgpO3ZhciBuPXRoaXMudG9wO24uYXBwbHlQZW5kaW5nKHQudHlwZSksbi5tYXRjaCYmKG4ubWF0Y2g9bi5tYXRjaC5tYXRjaFR5cGUodC50eXBlKSk7Zm9yKHZhciByPW4uYWN0aXZlTWFya3Msbz0wO288dC5tYXJrcy5sZW5ndGg7bysrKW4udHlwZSYmIW4udHlwZS5hbGxvd3NNYXJrVHlwZSh0Lm1hcmtzW29dLnR5cGUpfHwocj10Lm1hcmtzW29dLmFkZFRvU2V0KHIpKTtyZXR1cm4gbi5jb250ZW50LnB1c2godC5tYXJrKHIpKSwhMH1yZXR1cm4hMX0sYnQucHJvdG90eXBlLmVudGVyPWZ1bmN0aW9uKHQsZSxuKXt2YXIgcj10aGlzLmZpbmRQbGFjZSh0LmNyZWF0ZShlKSk7cmV0dXJuIHImJnRoaXMuZW50ZXJJbm5lcih0LGUsITAsbikscn0sYnQucHJvdG90eXBlLmVudGVySW5uZXI9ZnVuY3Rpb24odCxlLG4scil7dGhpcy5jbG9zZUV4dHJhKCk7dmFyIG89dGhpcy50b3A7by5hcHBseVBlbmRpbmcodCksby5tYXRjaD1vLm1hdGNoJiZvLm1hdGNoLm1hdGNoVHlwZSh0LGUpO3ZhciBpPW51bGw9PXI/by5vcHRpb25zJn5ndDp5dChyKTtvLm9wdGlvbnMmZ3QmJjA9PW8uY29udGVudC5sZW5ndGgmJihpfD1ndCksdGhpcy5ub2Rlcy5wdXNoKG5ldyB3dCh0LGUsby5hY3RpdmVNYXJrcyxvLnBlbmRpbmdNYXJrcyxuLG51bGwsaSkpLHRoaXMub3BlbisrfSxidC5wcm90b3R5cGUuY2xvc2VFeHRyYT1mdW5jdGlvbih0KXt2YXIgZT10aGlzLm5vZGVzLmxlbmd0aC0xO2lmKGU+dGhpcy5vcGVuKXtmb3IoO2U+dGhpcy5vcGVuO2UtLSl0aGlzLm5vZGVzW2UtMV0uY29udGVudC5wdXNoKHRoaXMubm9kZXNbZV0uZmluaXNoKHQpKTt0aGlzLm5vZGVzLmxlbmd0aD10aGlzLm9wZW4rMX19LGJ0LnByb3RvdHlwZS5maW5pc2g9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5vcGVuPTAsdGhpcy5jbG9zZUV4dHJhKHRoaXMuaXNPcGVuKSx0aGlzLm5vZGVzWzBdLmZpbmlzaCh0aGlzLmlzT3Blbnx8dGhpcy5vcHRpb25zLnRvcE9wZW4pfSxidC5wcm90b3R5cGUuc3luYz1mdW5jdGlvbih0KXtmb3IodmFyIGU9dGhpcy5vcGVuO2U+PTA7ZS0tKWlmKHRoaXMubm9kZXNbZV09PXQpcmV0dXJuIHZvaWQodGhpcy5vcGVuPWUpfSx4dC5jdXJyZW50UG9zLmdldD1mdW5jdGlvbigpe3RoaXMuY2xvc2VFeHRyYSgpO2Zvcih2YXIgdD0wLGU9dGhpcy5vcGVuO2U+PTA7ZS0tKXtmb3IodmFyIG49dGhpcy5ub2Rlc1tlXS5jb250ZW50LHI9bi5sZW5ndGgtMTtyPj0wO3ItLSl0Kz1uW3JdLm5vZGVTaXplO2UmJnQrK31yZXR1cm4gdH0sYnQucHJvdG90eXBlLmZpbmRBdFBvaW50PWZ1bmN0aW9uKHQsZSl7aWYodGhpcy5maW5kKWZvcih2YXIgbj0wO248dGhpcy5maW5kLmxlbmd0aDtuKyspdGhpcy5maW5kW25dLm5vZGU9PXQmJnRoaXMuZmluZFtuXS5vZmZzZXQ9PWUmJih0aGlzLmZpbmRbbl0ucG9zPXRoaXMuY3VycmVudFBvcyl9LGJ0LnByb3RvdHlwZS5maW5kSW5zaWRlPWZ1bmN0aW9uKHQpe2lmKHRoaXMuZmluZClmb3IodmFyIGU9MDtlPHRoaXMuZmluZC5sZW5ndGg7ZSsrKW51bGw9PXRoaXMuZmluZFtlXS5wb3MmJjE9PXQubm9kZVR5cGUmJnQuY29udGFpbnModGhpcy5maW5kW2VdLm5vZGUpJiYodGhpcy5maW5kW2VdLnBvcz10aGlzLmN1cnJlbnRQb3MpfSxidC5wcm90b3R5cGUuZmluZEFyb3VuZD1mdW5jdGlvbih0LGUsbil7aWYodCE9ZSYmdGhpcy5maW5kKWZvcih2YXIgcj0wO3I8dGhpcy5maW5kLmxlbmd0aDtyKyspaWYobnVsbD09dGhpcy5maW5kW3JdLnBvcyYmMT09dC5ub2RlVHlwZSYmdC5jb250YWlucyh0aGlzLmZpbmRbcl0ubm9kZSkpe3ZhciBvPWUuY29tcGFyZURvY3VtZW50UG9zaXRpb24odGhpcy5maW5kW3JdLm5vZGUpO28mKG4/Mjo0KSYmKHRoaXMuZmluZFtyXS5wb3M9dGhpcy5jdXJyZW50UG9zKX19LGJ0LnByb3RvdHlwZS5maW5kSW5UZXh0PWZ1bmN0aW9uKHQpe2lmKHRoaXMuZmluZClmb3IodmFyIGU9MDtlPHRoaXMuZmluZC5sZW5ndGg7ZSsrKXRoaXMuZmluZFtlXS5ub2RlPT10JiYodGhpcy5maW5kW2VdLnBvcz10aGlzLmN1cnJlbnRQb3MtKHQubm9kZVZhbHVlLmxlbmd0aC10aGlzLmZpbmRbZV0ub2Zmc2V0KSl9LGJ0LnByb3RvdHlwZS5tYXRjaGVzQ29udGV4dD1mdW5jdGlvbih0KXt2YXIgZT10aGlzO2lmKHQuaW5kZXhPZigifCIpPi0xKXJldHVybiB0LnNwbGl0KC9ccypcfFxzKi8pLnNvbWUodGhpcy5tYXRjaGVzQ29udGV4dCx0aGlzKTt2YXIgbj10LnNwbGl0KCIvIikscj10aGlzLm9wdGlvbnMuY29udGV4dCxvPSF0aGlzLmlzT3BlbiYmKCFyfHxyLnBhcmVudC50eXBlPT10aGlzLm5vZGVzWzBdLnR5cGUpLGk9LShyP3IuZGVwdGgrMTowKSsobz8wOjEpLHM9ZnVuY3Rpb24odCxhKXtmb3IoO3Q+PTA7dC0tKXt2YXIgYz1uW3RdO2lmKCIiPT1jKXtpZih0PT1uLmxlbmd0aC0xfHwwPT10KWNvbnRpbnVlO2Zvcig7YT49aTthLS0paWYocyh0LTEsYSkpcmV0dXJuITA7cmV0dXJuITF9dmFyIHU9YT4wfHwwPT1hJiZvP2Uubm9kZXNbYV0udHlwZTpyJiZhPj1pP3Iubm9kZShhLWkpLnR5cGU6bnVsbDtpZighdXx8dS5uYW1lIT1jJiYtMT09dS5ncm91cHMuaW5kZXhPZihjKSlyZXR1cm4hMTthLS19cmV0dXJuITB9O3JldHVybiBzKG4ubGVuZ3RoLTEsdGhpcy5vcGVuKX0sYnQucHJvdG90eXBlLnRleHRibG9ja0Zyb21Db250ZXh0PWZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5vcHRpb25zLmNvbnRleHQ7aWYodClmb3IodmFyIGU9dC5kZXB0aDtlPj0wO2UtLSl7dmFyIG49dC5ub2RlKGUpLmNvbnRlbnRNYXRjaEF0KHQuaW5kZXhBZnRlcihlKSkuZGVmYXVsdFR5cGU7aWYobiYmbi5pc1RleHRibG9jayYmbi5kZWZhdWx0QXR0cnMpcmV0dXJuIG59Zm9yKHZhciByIGluIHRoaXMucGFyc2VyLnNjaGVtYS5ub2Rlcyl7dmFyIG89dGhpcy5wYXJzZXIuc2NoZW1hLm5vZGVzW3JdO2lmKG8uaXNUZXh0YmxvY2smJm8uZGVmYXVsdEF0dHJzKXJldHVybiBvfX0sYnQucHJvdG90eXBlLmFkZFBlbmRpbmdNYXJrPWZ1bmN0aW9uKHQpe3RoaXMudG9wLnBlbmRpbmdNYXJrcz10LmFkZFRvU2V0KHRoaXMudG9wLnBlbmRpbmdNYXJrcyl9LGJ0LnByb3RvdHlwZS5yZW1vdmVQZW5kaW5nTWFyaz1mdW5jdGlvbih0LGUpe2Zvcih2YXIgbj10aGlzLm9wZW47bj49MDtuLS0pe3ZhciByPXRoaXMubm9kZXNbbl0sbz1yLnBlbmRpbmdNYXJrcy5sYXN0SW5kZXhPZih0KTtpZihvPi0xP3IucGVuZGluZ01hcmtzPXQucmVtb3ZlRnJvbVNldChyLnBlbmRpbmdNYXJrcyk6ci5hY3RpdmVNYXJrcz10LnJlbW92ZUZyb21TZXQoci5hY3RpdmVNYXJrcykscj09ZSlicmVha319LE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKGJ0LnByb3RvdHlwZSx4dCk7dmFyIE50PWZ1bmN0aW9uKHQsZSl7dGhpcy5ub2Rlcz10fHx7fSx0aGlzLm1hcmtzPWV8fHt9fTtmdW5jdGlvbiBUdCh0KXt2YXIgZT17fTtmb3IodmFyIG4gaW4gdCl7dmFyIHI9dFtuXS5zcGVjLnRvRE9NO3ImJihlW25dPXIpfXJldHVybiBlfWZ1bmN0aW9uIEF0KHQpe3JldHVybiB0LmRvY3VtZW50fHx3aW5kb3cuZG9jdW1lbnR9TnQucHJvdG90eXBlLnNlcmlhbGl6ZUZyYWdtZW50PWZ1bmN0aW9uKHQsZSxuKXt2YXIgcj10aGlzO3ZvaWQgMD09PWUmJihlPXt9KSxufHwobj1BdChlKS5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCkpO3ZhciBvPW4saT1udWxsO3JldHVybiB0LmZvckVhY2goKGZ1bmN0aW9uKHQpe2lmKGl8fHQubWFya3MubGVuZ3RoKXtpfHwoaT1bXSk7dmFyIG49MCxzPTA7d2hpbGUobjxpLmxlbmd0aCYmczx0Lm1hcmtzLmxlbmd0aCl7dmFyIGE9dC5tYXJrc1tzXTtpZihyLm1hcmtzW2EudHlwZS5uYW1lXSl7aWYoIWEuZXEoaVtuXSl8fCExPT09YS50eXBlLnNwZWMuc3Bhbm5pbmcpYnJlYWs7bis9MixzKyt9ZWxzZSBzKyt9d2hpbGUobjxpLmxlbmd0aClvPWkucG9wKCksaS5wb3AoKTt3aGlsZShzPHQubWFya3MubGVuZ3RoKXt2YXIgYz10Lm1hcmtzW3MrK10sdT1yLnNlcmlhbGl6ZU1hcmsoYyx0LmlzSW5saW5lLGUpO3UmJihpLnB1c2goYyxvKSxvLmFwcGVuZENoaWxkKHUuZG9tKSxvPXUuY29udGVudERPTXx8dS5kb20pfX1vLmFwcGVuZENoaWxkKHIuc2VyaWFsaXplTm9kZSh0LGUpKX0pKSxufSxOdC5wcm90b3R5cGUuc2VyaWFsaXplTm9kZT1mdW5jdGlvbih0LGUpe3ZvaWQgMD09PWUmJihlPXt9KTt2YXIgbj1OdC5yZW5kZXJTcGVjKEF0KGUpLHRoaXMubm9kZXNbdC50eXBlLm5hbWVdKHQpKSxyPW4uZG9tLG89bi5jb250ZW50RE9NO2lmKG8pe2lmKHQuaXNMZWFmKXRocm93IG5ldyBSYW5nZUVycm9yKCJDb250ZW50IGhvbGUgbm90IGFsbG93ZWQgaW4gYSBsZWFmIG5vZGUgc3BlYyIpO2Uub25Db250ZW50P2Uub25Db250ZW50KHQsbyxlKTp0aGlzLnNlcmlhbGl6ZUZyYWdtZW50KHQuY29udGVudCxlLG8pfXJldHVybiByfSxOdC5wcm90b3R5cGUuc2VyaWFsaXplTm9kZUFuZE1hcmtzPWZ1bmN0aW9uKHQsZSl7dm9pZCAwPT09ZSYmKGU9e30pO2Zvcih2YXIgbj10aGlzLnNlcmlhbGl6ZU5vZGUodCxlKSxyPXQubWFya3MubGVuZ3RoLTE7cj49MDtyLS0pe3ZhciBvPXRoaXMuc2VyaWFsaXplTWFyayh0Lm1hcmtzW3JdLHQuaXNJbmxpbmUsZSk7byYmKChvLmNvbnRlbnRET018fG8uZG9tKS5hcHBlbmRDaGlsZChuKSxuPW8uZG9tKX1yZXR1cm4gbn0sTnQucHJvdG90eXBlLnNlcmlhbGl6ZU1hcms9ZnVuY3Rpb24odCxlLG4pe3ZvaWQgMD09PW4mJihuPXt9KTt2YXIgcj10aGlzLm1hcmtzW3QudHlwZS5uYW1lXTtyZXR1cm4gciYmTnQucmVuZGVyU3BlYyhBdChuKSxyKHQsZSkpfSxOdC5yZW5kZXJTcGVjPWZ1bmN0aW9uKHQsZSxuKXtpZih2b2lkIDA9PT1uJiYobj1udWxsKSwic3RyaW5nIj09dHlwZW9mIGUpcmV0dXJue2RvbTp0LmNyZWF0ZVRleHROb2RlKGUpfTtpZihudWxsIT1lLm5vZGVUeXBlKXJldHVybntkb206ZX07dmFyIHI9ZVswXSxvPXIuaW5kZXhPZigiICIpO28+MCYmKG49ci5zbGljZSgwLG8pLHI9ci5zbGljZShvKzEpKTt2YXIgaT1udWxsLHM9bj90LmNyZWF0ZUVsZW1lbnROUyhuLHIpOnQuY3JlYXRlRWxlbWVudChyKSxhPWVbMV0sYz0xO2lmKGEmJiJvYmplY3QiPT10eXBlb2YgYSYmbnVsbD09YS5ub2RlVHlwZSYmIUFycmF5LmlzQXJyYXkoYSkpZm9yKHZhciB1IGluIGM9MixhKWlmKG51bGwhPWFbdV0pe3ZhciBsPXUuaW5kZXhPZigiICIpO2w+MD9zLnNldEF0dHJpYnV0ZU5TKHUuc2xpY2UoMCxsKSx1LnNsaWNlKGwrMSksYVt1XSk6cy5zZXRBdHRyaWJ1dGUodSxhW3VdKX1mb3IodmFyIGg9YztoPGUubGVuZ3RoO2grKyl7dmFyIGY9ZVtoXTtpZigwPT09Zil7aWYoaDxlLmxlbmd0aC0xfHxoPmMpdGhyb3cgbmV3IFJhbmdlRXJyb3IoIkNvbnRlbnQgaG9sZSBtdXN0IGJlIHRoZSBvbmx5IGNoaWxkIG9mIGl0cyBwYXJlbnQgbm9kZSIpO3JldHVybntkb206cyxjb250ZW50RE9NOnN9fXZhciBwPU50LnJlbmRlclNwZWModCxmLG4pLGQ9cC5kb20sdj1wLmNvbnRlbnRET007aWYocy5hcHBlbmRDaGlsZChkKSx2KXtpZihpKXRocm93IG5ldyBSYW5nZUVycm9yKCJNdWx0aXBsZSBjb250ZW50IGhvbGVzIik7aT12fX1yZXR1cm57ZG9tOnMsY29udGVudERPTTppfX0sTnQuZnJvbVNjaGVtYT1mdW5jdGlvbih0KXtyZXR1cm4gdC5jYWNoZWQuZG9tU2VyaWFsaXplcnx8KHQuY2FjaGVkLmRvbVNlcmlhbGl6ZXI9bmV3IE50KHRoaXMubm9kZXNGcm9tU2NoZW1hKHQpLHRoaXMubWFya3NGcm9tU2NoZW1hKHQpKSl9LE50Lm5vZGVzRnJvbVNjaGVtYT1mdW5jdGlvbih0KXt2YXIgZT1UdCh0Lm5vZGVzKTtyZXR1cm4gZS50ZXh0fHwoZS50ZXh0PWZ1bmN0aW9uKHQpe3JldHVybiB0LnRleHR9KSxlfSxOdC5tYXJrc0Zyb21TY2hlbWE9ZnVuY3Rpb24odCl7cmV0dXJuIFR0KHQubWFya3MpfX0sIjFhZmEiOmZ1bmN0aW9uKHQsZSxuKXsidXNlIHN0cmljdCI7dmFyIHI9bigiZTc2YyIpLG89bi5uKHIpO28uYX0sIjFiZTQiOmZ1bmN0aW9uKHQsZSxuKXt2YXIgcj1uKCJkMDY2Iik7dC5leHBvcnRzPXIoImRvY3VtZW50IiwiZG9jdW1lbnRFbGVtZW50Iil9LCIxYzBiIjpmdW5jdGlvbih0LGUpe3QuZXhwb3J0cz1mdW5jdGlvbih0KXtpZigiZnVuY3Rpb24iIT10eXBlb2YgdCl0aHJvdyBUeXBlRXJyb3IoU3RyaW5nKHQpKyIgaXMgbm90IGEgZnVuY3Rpb24iKTtyZXR1cm4gdH19LCIxYzRmIjpmdW5jdGlvbih0LGUsbil7InVzZSBzdHJpY3QiO24ucihlKSxuLmQoZSwiQ29udGVudE1hdGNoIiwoZnVuY3Rpb24oKXtyZXR1cm4gan0pKSxuLmQoZSwiRE9NUGFyc2VyIiwoZnVuY3Rpb24oKXtyZXR1cm4gaHR9KSksbi5kKGUsIkRPTVNlcmlhbGl6ZXIiLChmdW5jdGlvbigpe3JldHVybiBOdH0pKSxuLmQoZSwiRnJhZ21lbnQiLChmdW5jdGlvbigpe3JldHVybiBzfSkpLG4uZChlLCJNYXJrIiwoZnVuY3Rpb24oKXtyZXR1cm4gaH0pKSxuLmQoZSwiTWFya1R5cGUiLChmdW5jdGlvbigpe3JldHVybiBjdH0pKSxuLmQoZSwiTm9kZSIsKGZ1bmN0aW9uKCl7cmV0dXJuIEl9KSksbi5kKGUsIk5vZGVSYW5nZSIsKGZ1bmN0aW9uKCl7cmV0dXJuIFJ9KSksbi5kKGUsIk5vZGVUeXBlIiwoZnVuY3Rpb24oKXtyZXR1cm4gb3R9KSksbi5kKGUsIlJlcGxhY2VFcnJvciIsKGZ1bmN0aW9uKCl7cmV0dXJuIGZ9KSksbi5kKGUsIlJlc29sdmVkUG9zIiwoZnVuY3Rpb24oKXtyZXR1cm4gTn0pKSxuLmQoZSwiU2NoZW1hIiwoZnVuY3Rpb24oKXtyZXR1cm4gdXR9KSksbi5kKGUsIlNsaWNlIiwoZnVuY3Rpb24oKXtyZXR1cm4gcH0pKTt2YXIgcj1uKCI4ODRjIik7ZnVuY3Rpb24gbyh0LGUsbil7Zm9yKHZhciByPTA7O3IrKyl7aWYocj09dC5jaGlsZENvdW50fHxyPT1lLmNoaWxkQ291bnQpcmV0dXJuIHQuY2hpbGRDb3VudD09ZS5jaGlsZENvdW50P251bGw6bjt2YXIgaT10LmNoaWxkKHIpLHM9ZS5jaGlsZChyKTtpZihpIT1zKXtpZighaS5zYW1lTWFya3VwKHMpKXJldHVybiBuO2lmKGkuaXNUZXh0JiZpLnRleHQhPXMudGV4dCl7Zm9yKHZhciBhPTA7aS50ZXh0W2FdPT1zLnRleHRbYV07YSsrKW4rKztyZXR1cm4gbn1pZihpLmNvbnRlbnQuc2l6ZXx8cy5jb250ZW50LnNpemUpe3ZhciBjPW8oaS5jb250ZW50LHMuY29udGVudCxuKzEpO2lmKG51bGwhPWMpcmV0dXJuIGN9bis9aS5ub2RlU2l6ZX1lbHNlIG4rPWkubm9kZVNpemV9fWZ1bmN0aW9uIGkodCxlLG4scil7Zm9yKHZhciBvPXQuY2hpbGRDb3VudCxzPWUuY2hpbGRDb3VudDs7KXtpZigwPT1vfHwwPT1zKXJldHVybiBvPT1zP251bGw6e2E6bixiOnJ9O3ZhciBhPXQuY2hpbGQoLS1vKSxjPWUuY2hpbGQoLS1zKSx1PWEubm9kZVNpemU7aWYoYSE9Yyl7aWYoIWEuc2FtZU1hcmt1cChjKSlyZXR1cm57YTpuLGI6cn07aWYoYS5pc1RleHQmJmEudGV4dCE9Yy50ZXh0KXt2YXIgbD0wLGg9TWF0aC5taW4oYS50ZXh0Lmxlbmd0aCxjLnRleHQubGVuZ3RoKTt3aGlsZShsPGgmJmEudGV4dFthLnRleHQubGVuZ3RoLWwtMV09PWMudGV4dFtjLnRleHQubGVuZ3RoLWwtMV0pbCsrLG4tLSxyLS07cmV0dXJue2E6bixiOnJ9fWlmKGEuY29udGVudC5zaXplfHxjLmNvbnRlbnQuc2l6ZSl7dmFyIGY9aShhLmNvbnRlbnQsYy5jb250ZW50LG4tMSxyLTEpO2lmKGYpcmV0dXJuIGZ9bi09dSxyLT11fWVsc2Ugbi09dSxyLT11fX12YXIgcz1mdW5jdGlvbih0LGUpe2lmKHRoaXMuY29udGVudD10LHRoaXMuc2l6ZT1lfHwwLG51bGw9PWUpZm9yKHZhciBuPTA7bjx0Lmxlbmd0aDtuKyspdGhpcy5zaXplKz10W25dLm5vZGVTaXplfSxhPXtmaXJzdENoaWxkOntjb25maWd1cmFibGU6ITB9LGxhc3RDaGlsZDp7Y29uZmlndXJhYmxlOiEwfSxjaGlsZENvdW50Ontjb25maWd1cmFibGU6ITB9fTtzLnByb3RvdHlwZS5ub2Rlc0JldHdlZW49ZnVuY3Rpb24odCxlLG4scixvKXt2b2lkIDA9PT1yJiYocj0wKTtmb3IodmFyIGk9MCxzPTA7czxlO2krKyl7dmFyIGE9dGhpcy5jb250ZW50W2ldLGM9cythLm5vZGVTaXplO2lmKGM+dCYmITEhPT1uKGEscitzLG8saSkmJmEuY29udGVudC5zaXplKXt2YXIgdT1zKzE7YS5ub2Rlc0JldHdlZW4oTWF0aC5tYXgoMCx0LXUpLE1hdGgubWluKGEuY29udGVudC5zaXplLGUtdSksbixyK3UpfXM9Y319LHMucHJvdG90eXBlLmRlc2NlbmRhbnRzPWZ1bmN0aW9uKHQpe3RoaXMubm9kZXNCZXR3ZWVuKDAsdGhpcy5zaXplLHQpfSxzLnByb3RvdHlwZS50ZXh0QmV0d2Vlbj1mdW5jdGlvbih0LGUsbixyKXt2YXIgbz0iIixpPSEwO3JldHVybiB0aGlzLm5vZGVzQmV0d2Vlbih0LGUsKGZ1bmN0aW9uKHMsYSl7cy5pc1RleHQ/KG8rPXMudGV4dC5zbGljZShNYXRoLm1heCh0LGEpLWEsZS1hKSxpPSFuKTpzLmlzTGVhZiYmcj8obys9cixpPSFuKTohaSYmcy5pc0Jsb2NrJiYobys9bixpPSEwKX0pLDApLG99LHMucHJvdG90eXBlLmFwcGVuZD1mdW5jdGlvbih0KXtpZighdC5zaXplKXJldHVybiB0aGlzO2lmKCF0aGlzLnNpemUpcmV0dXJuIHQ7dmFyIGU9dGhpcy5sYXN0Q2hpbGQsbj10LmZpcnN0Q2hpbGQscj10aGlzLmNvbnRlbnQuc2xpY2UoKSxvPTA7Zm9yKGUuaXNUZXh0JiZlLnNhbWVNYXJrdXAobikmJihyW3IubGVuZ3RoLTFdPWUud2l0aFRleHQoZS50ZXh0K24udGV4dCksbz0xKTtvPHQuY29udGVudC5sZW5ndGg7bysrKXIucHVzaCh0LmNvbnRlbnRbb10pO3JldHVybiBuZXcgcyhyLHRoaXMuc2l6ZSt0LnNpemUpfSxzLnByb3RvdHlwZS5jdXQ9ZnVuY3Rpb24odCxlKXtpZihudWxsPT1lJiYoZT10aGlzLnNpemUpLDA9PXQmJmU9PXRoaXMuc2l6ZSlyZXR1cm4gdGhpczt2YXIgbj1bXSxyPTA7aWYoZT50KWZvcih2YXIgbz0wLGk9MDtpPGU7bysrKXt2YXIgYT10aGlzLmNvbnRlbnRbb10sYz1pK2Eubm9kZVNpemU7Yz50JiYoKGk8dHx8Yz5lKSYmKGE9YS5pc1RleHQ/YS5jdXQoTWF0aC5tYXgoMCx0LWkpLE1hdGgubWluKGEudGV4dC5sZW5ndGgsZS1pKSk6YS5jdXQoTWF0aC5tYXgoMCx0LWktMSksTWF0aC5taW4oYS5jb250ZW50LnNpemUsZS1pLTEpKSksbi5wdXNoKGEpLHIrPWEubm9kZVNpemUpLGk9Y31yZXR1cm4gbmV3IHMobixyKX0scy5wcm90b3R5cGUuY3V0QnlJbmRleD1mdW5jdGlvbih0LGUpe3JldHVybiB0PT1lP3MuZW1wdHk6MD09dCYmZT09dGhpcy5jb250ZW50Lmxlbmd0aD90aGlzOm5ldyBzKHRoaXMuY29udGVudC5zbGljZSh0LGUpKX0scy5wcm90b3R5cGUucmVwbGFjZUNoaWxkPWZ1bmN0aW9uKHQsZSl7dmFyIG49dGhpcy5jb250ZW50W3RdO2lmKG49PWUpcmV0dXJuIHRoaXM7dmFyIHI9dGhpcy5jb250ZW50LnNsaWNlKCksbz10aGlzLnNpemUrZS5ub2RlU2l6ZS1uLm5vZGVTaXplO3JldHVybiByW3RdPWUsbmV3IHMocixvKX0scy5wcm90b3R5cGUuYWRkVG9TdGFydD1mdW5jdGlvbih0KXtyZXR1cm4gbmV3IHMoW3RdLmNvbmNhdCh0aGlzLmNvbnRlbnQpLHRoaXMuc2l6ZSt0Lm5vZGVTaXplKX0scy5wcm90b3R5cGUuYWRkVG9FbmQ9ZnVuY3Rpb24odCl7cmV0dXJuIG5ldyBzKHRoaXMuY29udGVudC5jb25jYXQodCksdGhpcy5zaXplK3Qubm9kZVNpemUpfSxzLnByb3RvdHlwZS5lcT1mdW5jdGlvbih0KXtpZih0aGlzLmNvbnRlbnQubGVuZ3RoIT10LmNvbnRlbnQubGVuZ3RoKXJldHVybiExO2Zvcih2YXIgZT0wO2U8dGhpcy5jb250ZW50Lmxlbmd0aDtlKyspaWYoIXRoaXMuY29udGVudFtlXS5lcSh0LmNvbnRlbnRbZV0pKXJldHVybiExO3JldHVybiEwfSxhLmZpcnN0Q2hpbGQuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY29udGVudC5sZW5ndGg/dGhpcy5jb250ZW50WzBdOm51bGx9LGEubGFzdENoaWxkLmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLmNvbnRlbnQubGVuZ3RoP3RoaXMuY29udGVudFt0aGlzLmNvbnRlbnQubGVuZ3RoLTFdOm51bGx9LGEuY2hpbGRDb3VudC5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jb250ZW50Lmxlbmd0aH0scy5wcm90b3R5cGUuY2hpbGQ9ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5jb250ZW50W3RdO2lmKCFlKXRocm93IG5ldyBSYW5nZUVycm9yKCJJbmRleCAiK3QrIiBvdXQgb2YgcmFuZ2UgZm9yICIrdGhpcyk7cmV0dXJuIGV9LHMucHJvdG90eXBlLm1heWJlQ2hpbGQ9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuY29udGVudFt0XX0scy5wcm90b3R5cGUuZm9yRWFjaD1mdW5jdGlvbih0KXtmb3IodmFyIGU9MCxuPTA7ZTx0aGlzLmNvbnRlbnQubGVuZ3RoO2UrKyl7dmFyIHI9dGhpcy5jb250ZW50W2VdO3QocixuLGUpLG4rPXIubm9kZVNpemV9fSxzLnByb3RvdHlwZS5maW5kRGlmZlN0YXJ0PWZ1bmN0aW9uKHQsZSl7cmV0dXJuIHZvaWQgMD09PWUmJihlPTApLG8odGhpcyx0LGUpfSxzLnByb3RvdHlwZS5maW5kRGlmZkVuZD1mdW5jdGlvbih0LGUsbil7cmV0dXJuIHZvaWQgMD09PWUmJihlPXRoaXMuc2l6ZSksdm9pZCAwPT09biYmKG49dC5zaXplKSxpKHRoaXMsdCxlLG4pfSxzLnByb3RvdHlwZS5maW5kSW5kZXg9ZnVuY3Rpb24odCxlKXtpZih2b2lkIDA9PT1lJiYoZT0tMSksMD09dClyZXR1cm4gdSgwLHQpO2lmKHQ9PXRoaXMuc2l6ZSlyZXR1cm4gdSh0aGlzLmNvbnRlbnQubGVuZ3RoLHQpO2lmKHQ+dGhpcy5zaXplfHx0PDApdGhyb3cgbmV3IFJhbmdlRXJyb3IoIlBvc2l0aW9uICIrdCsiIG91dHNpZGUgb2YgZnJhZ21lbnQgKCIrdGhpcysiKSIpO2Zvcih2YXIgbj0wLHI9MDs7bisrKXt2YXIgbz10aGlzLmNoaWxkKG4pLGk9citvLm5vZGVTaXplO2lmKGk+PXQpcmV0dXJuIGk9PXR8fGU+MD91KG4rMSxpKTp1KG4scik7cj1pfX0scy5wcm90b3R5cGUudG9TdHJpbmc9ZnVuY3Rpb24oKXtyZXR1cm4iPCIrdGhpcy50b1N0cmluZ0lubmVyKCkrIj4ifSxzLnByb3RvdHlwZS50b1N0cmluZ0lubmVyPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY29udGVudC5qb2luKCIsICIpfSxzLnByb3RvdHlwZS50b0pTT049ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jb250ZW50Lmxlbmd0aD90aGlzLmNvbnRlbnQubWFwKChmdW5jdGlvbih0KXtyZXR1cm4gdC50b0pTT04oKX0pKTpudWxsfSxzLmZyb21KU09OPWZ1bmN0aW9uKHQsZSl7aWYoIWUpcmV0dXJuIHMuZW1wdHk7aWYoIUFycmF5LmlzQXJyYXkoZSkpdGhyb3cgbmV3IFJhbmdlRXJyb3IoIkludmFsaWQgaW5wdXQgZm9yIEZyYWdtZW50LmZyb21KU09OIik7cmV0dXJuIG5ldyBzKGUubWFwKHQubm9kZUZyb21KU09OKSl9LHMuZnJvbUFycmF5PWZ1bmN0aW9uKHQpe2lmKCF0Lmxlbmd0aClyZXR1cm4gcy5lbXB0eTtmb3IodmFyIGUsbj0wLHI9MDtyPHQubGVuZ3RoO3IrKyl7dmFyIG89dFtyXTtuKz1vLm5vZGVTaXplLHImJm8uaXNUZXh0JiZ0W3ItMV0uc2FtZU1hcmt1cChvKT8oZXx8KGU9dC5zbGljZSgwLHIpKSxlW2UubGVuZ3RoLTFdPW8ud2l0aFRleHQoZVtlLmxlbmd0aC0xXS50ZXh0K28udGV4dCkpOmUmJmUucHVzaChvKX1yZXR1cm4gbmV3IHMoZXx8dCxuKX0scy5mcm9tPWZ1bmN0aW9uKHQpe2lmKCF0KXJldHVybiBzLmVtcHR5O2lmKHQgaW5zdGFuY2VvZiBzKXJldHVybiB0O2lmKEFycmF5LmlzQXJyYXkodCkpcmV0dXJuIHRoaXMuZnJvbUFycmF5KHQpO2lmKHQuYXR0cnMpcmV0dXJuIG5ldyBzKFt0XSx0Lm5vZGVTaXplKTt0aHJvdyBuZXcgUmFuZ2VFcnJvcigiQ2FuIG5vdCBjb252ZXJ0ICIrdCsiIHRvIGEgRnJhZ21lbnQiKyh0Lm5vZGVzQmV0d2Vlbj8iIChsb29rcyBsaWtlIG11bHRpcGxlIHZlcnNpb25zIG9mIHByb3NlbWlycm9yLW1vZGVsIHdlcmUgbG9hZGVkKSI6IiIpKX0sT2JqZWN0LmRlZmluZVByb3BlcnRpZXMocy5wcm90b3R5cGUsYSk7dmFyIGM9e2luZGV4OjAsb2Zmc2V0OjB9O2Z1bmN0aW9uIHUodCxlKXtyZXR1cm4gYy5pbmRleD10LGMub2Zmc2V0PWUsY31mdW5jdGlvbiBsKHQsZSl7aWYodD09PWUpcmV0dXJuITA7aWYoIXR8fCJvYmplY3QiIT10eXBlb2YgdHx8IWV8fCJvYmplY3QiIT10eXBlb2YgZSlyZXR1cm4hMTt2YXIgbj1BcnJheS5pc0FycmF5KHQpO2lmKEFycmF5LmlzQXJyYXkoZSkhPW4pcmV0dXJuITE7aWYobil7aWYodC5sZW5ndGghPWUubGVuZ3RoKXJldHVybiExO2Zvcih2YXIgcj0wO3I8dC5sZW5ndGg7cisrKWlmKCFsKHRbcl0sZVtyXSkpcmV0dXJuITF9ZWxzZXtmb3IodmFyIG8gaW4gdClpZighKG8gaW4gZSl8fCFsKHRbb10sZVtvXSkpcmV0dXJuITE7Zm9yKHZhciBpIGluIGUpaWYoIShpIGluIHQpKXJldHVybiExfXJldHVybiEwfXMuZW1wdHk9bmV3IHMoW10sMCk7dmFyIGg9ZnVuY3Rpb24odCxlKXt0aGlzLnR5cGU9dCx0aGlzLmF0dHJzPWV9O2Z1bmN0aW9uIGYodCl7dmFyIGU9RXJyb3IuY2FsbCh0aGlzLHQpO3JldHVybiBlLl9fcHJvdG9fXz1mLnByb3RvdHlwZSxlfWgucHJvdG90eXBlLmFkZFRvU2V0PWZ1bmN0aW9uKHQpe2Zvcih2YXIgZSxuPSExLHI9MDtyPHQubGVuZ3RoO3IrKyl7dmFyIG89dFtyXTtpZih0aGlzLmVxKG8pKXJldHVybiB0O2lmKHRoaXMudHlwZS5leGNsdWRlcyhvLnR5cGUpKWV8fChlPXQuc2xpY2UoMCxyKSk7ZWxzZXtpZihvLnR5cGUuZXhjbHVkZXModGhpcy50eXBlKSlyZXR1cm4gdDshbiYmby50eXBlLnJhbms+dGhpcy50eXBlLnJhbmsmJihlfHwoZT10LnNsaWNlKDAscikpLGUucHVzaCh0aGlzKSxuPSEwKSxlJiZlLnB1c2gobyl9fXJldHVybiBlfHwoZT10LnNsaWNlKCkpLG58fGUucHVzaCh0aGlzKSxlfSxoLnByb3RvdHlwZS5yZW1vdmVGcm9tU2V0PWZ1bmN0aW9uKHQpe2Zvcih2YXIgZT0wO2U8dC5sZW5ndGg7ZSsrKWlmKHRoaXMuZXEodFtlXSkpcmV0dXJuIHQuc2xpY2UoMCxlKS5jb25jYXQodC5zbGljZShlKzEpKTtyZXR1cm4gdH0saC5wcm90b3R5cGUuaXNJblNldD1mdW5jdGlvbih0KXtmb3IodmFyIGU9MDtlPHQubGVuZ3RoO2UrKylpZih0aGlzLmVxKHRbZV0pKXJldHVybiEwO3JldHVybiExfSxoLnByb3RvdHlwZS5lcT1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcz09dHx8dGhpcy50eXBlPT10LnR5cGUmJmwodGhpcy5hdHRycyx0LmF0dHJzKX0saC5wcm90b3R5cGUudG9KU09OPWZ1bmN0aW9uKCl7dmFyIHQ9e3R5cGU6dGhpcy50eXBlLm5hbWV9O2Zvcih2YXIgZSBpbiB0aGlzLmF0dHJzKXt0LmF0dHJzPXRoaXMuYXR0cnM7YnJlYWt9cmV0dXJuIHR9LGguZnJvbUpTT049ZnVuY3Rpb24odCxlKXtpZighZSl0aHJvdyBuZXcgUmFuZ2VFcnJvcigiSW52YWxpZCBpbnB1dCBmb3IgTWFyay5mcm9tSlNPTiIpO3ZhciBuPXQubWFya3NbZS50eXBlXTtpZighbil0aHJvdyBuZXcgUmFuZ2VFcnJvcigiVGhlcmUgaXMgbm8gbWFyayB0eXBlICIrZS50eXBlKyIgaW4gdGhpcyBzY2hlbWEiKTtyZXR1cm4gbi5jcmVhdGUoZS5hdHRycyl9LGguc2FtZVNldD1mdW5jdGlvbih0LGUpe2lmKHQ9PWUpcmV0dXJuITA7aWYodC5sZW5ndGghPWUubGVuZ3RoKXJldHVybiExO2Zvcih2YXIgbj0wO248dC5sZW5ndGg7bisrKWlmKCF0W25dLmVxKGVbbl0pKXJldHVybiExO3JldHVybiEwfSxoLnNldEZyb209ZnVuY3Rpb24odCl7aWYoIXR8fDA9PXQubGVuZ3RoKXJldHVybiBoLm5vbmU7aWYodCBpbnN0YW5jZW9mIGgpcmV0dXJuW3RdO3ZhciBlPXQuc2xpY2UoKTtyZXR1cm4gZS5zb3J0KChmdW5jdGlvbih0LGUpe3JldHVybiB0LnR5cGUucmFuay1lLnR5cGUucmFua30pKSxlfSxoLm5vbmU9W10sZi5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShFcnJvci5wcm90b3R5cGUpLGYucHJvdG90eXBlLmNvbnN0cnVjdG9yPWYsZi5wcm90b3R5cGUubmFtZT0iUmVwbGFjZUVycm9yIjt2YXIgcD1mdW5jdGlvbih0LGUsbil7dGhpcy5jb250ZW50PXQsdGhpcy5vcGVuU3RhcnQ9ZSx0aGlzLm9wZW5FbmQ9bn0sZD17c2l6ZTp7Y29uZmlndXJhYmxlOiEwfX07ZnVuY3Rpb24gdih0LGUsbil7dmFyIHI9dC5maW5kSW5kZXgoZSksbz1yLmluZGV4LGk9ci5vZmZzZXQscz10Lm1heWJlQ2hpbGQobyksYT10LmZpbmRJbmRleChuKSxjPWEuaW5kZXgsdT1hLm9mZnNldDtpZihpPT1lfHxzLmlzVGV4dCl7aWYodSE9biYmIXQuY2hpbGQoYykuaXNUZXh0KXRocm93IG5ldyBSYW5nZUVycm9yKCJSZW1vdmluZyBub24tZmxhdCByYW5nZSIpO3JldHVybiB0LmN1dCgwLGUpLmFwcGVuZCh0LmN1dChuKSl9aWYobyE9Yyl0aHJvdyBuZXcgUmFuZ2VFcnJvcigiUmVtb3Zpbmcgbm9uLWZsYXQgcmFuZ2UiKTtyZXR1cm4gdC5yZXBsYWNlQ2hpbGQobyxzLmNvcHkodihzLmNvbnRlbnQsZS1pLTEsbi1pLTEpKSl9ZnVuY3Rpb24gbSh0LGUsbixyKXt2YXIgbz10LmZpbmRJbmRleChlKSxpPW8uaW5kZXgscz1vLm9mZnNldCxhPXQubWF5YmVDaGlsZChpKTtpZihzPT1lfHxhLmlzVGV4dClyZXR1cm4gciYmIXIuY2FuUmVwbGFjZShpLGksbik/bnVsbDp0LmN1dCgwLGUpLmFwcGVuZChuKS5hcHBlbmQodC5jdXQoZSkpO3ZhciBjPW0oYS5jb250ZW50LGUtcy0xLG4pO3JldHVybiBjJiZ0LnJlcGxhY2VDaGlsZChpLGEuY29weShjKSl9ZnVuY3Rpb24gZyh0LGUsbil7aWYobi5vcGVuU3RhcnQ+dC5kZXB0aCl0aHJvdyBuZXcgZigiSW5zZXJ0ZWQgY29udGVudCBkZWVwZXIgdGhhbiBpbnNlcnRpb24gcG9zaXRpb24iKTtpZih0LmRlcHRoLW4ub3BlblN0YXJ0IT1lLmRlcHRoLW4ub3BlbkVuZCl0aHJvdyBuZXcgZigiSW5jb25zaXN0ZW50IG9wZW4gZGVwdGhzIik7cmV0dXJuIHkodCxlLG4sMCl9ZnVuY3Rpb24geSh0LGUsbixyKXt2YXIgbz10LmluZGV4KHIpLGk9dC5ub2RlKHIpO2lmKG89PWUuaW5kZXgocikmJnI8dC5kZXB0aC1uLm9wZW5TdGFydCl7dmFyIHM9eSh0LGUsbixyKzEpO3JldHVybiBpLmNvcHkoaS5jb250ZW50LnJlcGxhY2VDaGlsZChvLHMpKX1pZihuLmNvbnRlbnQuc2l6ZSl7aWYobi5vcGVuU3RhcnR8fG4ub3BlbkVuZHx8dC5kZXB0aCE9cnx8ZS5kZXB0aCE9cil7dmFyIGE9TShuLHQpLGM9YS5zdGFydCx1PWEuZW5kO3JldHVybiBTKGksQyh0LGMsdSxlLHIpKX12YXIgbD10LnBhcmVudCxoPWwuY29udGVudDtyZXR1cm4gUyhsLGguY3V0KDAsdC5wYXJlbnRPZmZzZXQpLmFwcGVuZChuLmNvbnRlbnQpLmFwcGVuZChoLmN1dChlLnBhcmVudE9mZnNldCkpKX1yZXR1cm4gUyhpLE8odCxlLHIpKX1mdW5jdGlvbiB3KHQsZSl7aWYoIWUudHlwZS5jb21wYXRpYmxlQ29udGVudCh0LnR5cGUpKXRocm93IG5ldyBmKCJDYW5ub3Qgam9pbiAiK2UudHlwZS5uYW1lKyIgb250byAiK3QudHlwZS5uYW1lKX1mdW5jdGlvbiBiKHQsZSxuKXt2YXIgcj10Lm5vZGUobik7cmV0dXJuIHcocixlLm5vZGUobikpLHJ9ZnVuY3Rpb24geCh0LGUpe3ZhciBuPWUubGVuZ3RoLTE7bj49MCYmdC5pc1RleHQmJnQuc2FtZU1hcmt1cChlW25dKT9lW25dPXQud2l0aFRleHQoZVtuXS50ZXh0K3QudGV4dCk6ZS5wdXNoKHQpfWZ1bmN0aW9uIGsodCxlLG4scil7dmFyIG89KGV8fHQpLm5vZGUobiksaT0wLHM9ZT9lLmluZGV4KG4pOm8uY2hpbGRDb3VudDt0JiYoaT10LmluZGV4KG4pLHQuZGVwdGg+bj9pKys6dC50ZXh0T2Zmc2V0JiYoeCh0Lm5vZGVBZnRlcixyKSxpKyspKTtmb3IodmFyIGE9aTthPHM7YSsrKXgoby5jaGlsZChhKSxyKTtlJiZlLmRlcHRoPT1uJiZlLnRleHRPZmZzZXQmJngoZS5ub2RlQmVmb3JlLHIpfWZ1bmN0aW9uIFModCxlKXtpZighdC50eXBlLnZhbGlkQ29udGVudChlKSl0aHJvdyBuZXcgZigiSW52YWxpZCBjb250ZW50IGZvciBub2RlICIrdC50eXBlLm5hbWUpO3JldHVybiB0LmNvcHkoZSl9ZnVuY3Rpb24gQyh0LGUsbixyLG8pe3ZhciBpPXQuZGVwdGg+byYmYih0LGUsbysxKSxhPXIuZGVwdGg+byYmYihuLHIsbysxKSxjPVtdO3JldHVybiBrKG51bGwsdCxvLGMpLGkmJmEmJmUuaW5kZXgobyk9PW4uaW5kZXgobyk/KHcoaSxhKSx4KFMoaSxDKHQsZSxuLHIsbysxKSksYykpOihpJiZ4KFMoaSxPKHQsZSxvKzEpKSxjKSxrKGUsbixvLGMpLGEmJngoUyhhLE8obixyLG8rMSkpLGMpKSxrKHIsbnVsbCxvLGMpLG5ldyBzKGMpfWZ1bmN0aW9uIE8odCxlLG4pe3ZhciByPVtdO2lmKGsobnVsbCx0LG4sciksdC5kZXB0aD5uKXt2YXIgbz1iKHQsZSxuKzEpO3goUyhvLE8odCxlLG4rMSkpLHIpfXJldHVybiBrKGUsbnVsbCxuLHIpLG5ldyBzKHIpfWZ1bmN0aW9uIE0odCxlKXtmb3IodmFyIG49ZS5kZXB0aC10Lm9wZW5TdGFydCxyPWUubm9kZShuKSxvPXIuY29weSh0LmNvbnRlbnQpLGk9bi0xO2k+PTA7aS0tKW89ZS5ub2RlKGkpLmNvcHkocy5mcm9tKG8pKTtyZXR1cm57c3RhcnQ6by5yZXNvbHZlTm9DYWNoZSh0Lm9wZW5TdGFydCtuKSxlbmQ6by5yZXNvbHZlTm9DYWNoZShvLmNvbnRlbnQuc2l6ZS10Lm9wZW5FbmQtbil9fWQuc2l6ZS5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jb250ZW50LnNpemUtdGhpcy5vcGVuU3RhcnQtdGhpcy5vcGVuRW5kfSxwLnByb3RvdHlwZS5pbnNlcnRBdD1mdW5jdGlvbih0LGUpe3ZhciBuPW0odGhpcy5jb250ZW50LHQrdGhpcy5vcGVuU3RhcnQsZSxudWxsKTtyZXR1cm4gbiYmbmV3IHAobix0aGlzLm9wZW5TdGFydCx0aGlzLm9wZW5FbmQpfSxwLnByb3RvdHlwZS5yZW1vdmVCZXR3ZWVuPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIG5ldyBwKHYodGhpcy5jb250ZW50LHQrdGhpcy5vcGVuU3RhcnQsZSt0aGlzLm9wZW5TdGFydCksdGhpcy5vcGVuU3RhcnQsdGhpcy5vcGVuRW5kKX0scC5wcm90b3R5cGUuZXE9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuY29udGVudC5lcSh0LmNvbnRlbnQpJiZ0aGlzLm9wZW5TdGFydD09dC5vcGVuU3RhcnQmJnRoaXMub3BlbkVuZD09dC5vcGVuRW5kfSxwLnByb3RvdHlwZS50b1N0cmluZz1mdW5jdGlvbigpe3JldHVybiB0aGlzLmNvbnRlbnQrIigiK3RoaXMub3BlblN0YXJ0KyIsIit0aGlzLm9wZW5FbmQrIikifSxwLnByb3RvdHlwZS50b0pTT049ZnVuY3Rpb24oKXtpZighdGhpcy5jb250ZW50LnNpemUpcmV0dXJuIG51bGw7dmFyIHQ9e2NvbnRlbnQ6dGhpcy5jb250ZW50LnRvSlNPTigpfTtyZXR1cm4gdGhpcy5vcGVuU3RhcnQ+MCYmKHQub3BlblN0YXJ0PXRoaXMub3BlblN0YXJ0KSx0aGlzLm9wZW5FbmQ+MCYmKHQub3BlbkVuZD10aGlzLm9wZW5FbmQpLHR9LHAuZnJvbUpTT049ZnVuY3Rpb24odCxlKXtpZighZSlyZXR1cm4gcC5lbXB0eTt2YXIgbj1lLm9wZW5TdGFydHx8MCxyPWUub3BlbkVuZHx8MDtpZigibnVtYmVyIiE9dHlwZW9mIG58fCJudW1iZXIiIT10eXBlb2Ygcil0aHJvdyBuZXcgUmFuZ2VFcnJvcigiSW52YWxpZCBpbnB1dCBmb3IgU2xpY2UuZnJvbUpTT04iKTtyZXR1cm4gbmV3IHAocy5mcm9tSlNPTih0LGUuY29udGVudCksZS5vcGVuU3RhcnR8fDAsZS5vcGVuRW5kfHwwKX0scC5tYXhPcGVuPWZ1bmN0aW9uKHQsZSl7dm9pZCAwPT09ZSYmKGU9ITApO2Zvcih2YXIgbj0wLHI9MCxvPXQuZmlyc3RDaGlsZDtvJiYhby5pc0xlYWYmJihlfHwhby50eXBlLnNwZWMuaXNvbGF0aW5nKTtvPW8uZmlyc3RDaGlsZCluKys7Zm9yKHZhciBpPXQubGFzdENoaWxkO2kmJiFpLmlzTGVhZiYmKGV8fCFpLnR5cGUuc3BlYy5pc29sYXRpbmcpO2k9aS5sYXN0Q2hpbGQpcisrO3JldHVybiBuZXcgcCh0LG4scil9LE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKHAucHJvdG90eXBlLGQpLHAuZW1wdHk9bmV3IHAocy5lbXB0eSwwLDApO3ZhciBOPWZ1bmN0aW9uKHQsZSxuKXt0aGlzLnBvcz10LHRoaXMucGF0aD1lLHRoaXMuZGVwdGg9ZS5sZW5ndGgvMy0xLHRoaXMucGFyZW50T2Zmc2V0PW59LFQ9e3BhcmVudDp7Y29uZmlndXJhYmxlOiEwfSxkb2M6e2NvbmZpZ3VyYWJsZTohMH0sdGV4dE9mZnNldDp7Y29uZmlndXJhYmxlOiEwfSxub2RlQWZ0ZXI6e2NvbmZpZ3VyYWJsZTohMH0sbm9kZUJlZm9yZTp7Y29uZmlndXJhYmxlOiEwfX07Ti5wcm90b3R5cGUucmVzb2x2ZURlcHRoPWZ1bmN0aW9uKHQpe3JldHVybiBudWxsPT10P3RoaXMuZGVwdGg6dDwwP3RoaXMuZGVwdGgrdDp0fSxULnBhcmVudC5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5ub2RlKHRoaXMuZGVwdGgpfSxULmRvYy5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5ub2RlKDApfSxOLnByb3RvdHlwZS5ub2RlPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLnBhdGhbMyp0aGlzLnJlc29sdmVEZXB0aCh0KV19LE4ucHJvdG90eXBlLmluZGV4PWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLnBhdGhbMyp0aGlzLnJlc29sdmVEZXB0aCh0KSsxXX0sTi5wcm90b3R5cGUuaW5kZXhBZnRlcj1mdW5jdGlvbih0KXtyZXR1cm4gdD10aGlzLnJlc29sdmVEZXB0aCh0KSx0aGlzLmluZGV4KHQpKyh0IT10aGlzLmRlcHRofHx0aGlzLnRleHRPZmZzZXQ/MTowKX0sTi5wcm90b3R5cGUuc3RhcnQ9ZnVuY3Rpb24odCl7cmV0dXJuIHQ9dGhpcy5yZXNvbHZlRGVwdGgodCksMD09dD8wOnRoaXMucGF0aFszKnQtMV0rMX0sTi5wcm90b3R5cGUuZW5kPWZ1bmN0aW9uKHQpe3JldHVybiB0PXRoaXMucmVzb2x2ZURlcHRoKHQpLHRoaXMuc3RhcnQodCkrdGhpcy5ub2RlKHQpLmNvbnRlbnQuc2l6ZX0sTi5wcm90b3R5cGUuYmVmb3JlPWZ1bmN0aW9uKHQpe2lmKHQ9dGhpcy5yZXNvbHZlRGVwdGgodCksIXQpdGhyb3cgbmV3IFJhbmdlRXJyb3IoIlRoZXJlIGlzIG5vIHBvc2l0aW9uIGJlZm9yZSB0aGUgdG9wLWxldmVsIG5vZGUiKTtyZXR1cm4gdD09dGhpcy5kZXB0aCsxP3RoaXMucG9zOnRoaXMucGF0aFszKnQtMV19LE4ucHJvdG90eXBlLmFmdGVyPWZ1bmN0aW9uKHQpe2lmKHQ9dGhpcy5yZXNvbHZlRGVwdGgodCksIXQpdGhyb3cgbmV3IFJhbmdlRXJyb3IoIlRoZXJlIGlzIG5vIHBvc2l0aW9uIGFmdGVyIHRoZSB0b3AtbGV2ZWwgbm9kZSIpO3JldHVybiB0PT10aGlzLmRlcHRoKzE/dGhpcy5wb3M6dGhpcy5wYXRoWzMqdC0xXSt0aGlzLnBhdGhbMyp0XS5ub2RlU2l6ZX0sVC50ZXh0T2Zmc2V0LmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLnBvcy10aGlzLnBhdGhbdGhpcy5wYXRoLmxlbmd0aC0xXX0sVC5ub2RlQWZ0ZXIuZ2V0PWZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5wYXJlbnQsZT10aGlzLmluZGV4KHRoaXMuZGVwdGgpO2lmKGU9PXQuY2hpbGRDb3VudClyZXR1cm4gbnVsbDt2YXIgbj10aGlzLnBvcy10aGlzLnBhdGhbdGhpcy5wYXRoLmxlbmd0aC0xXSxyPXQuY2hpbGQoZSk7cmV0dXJuIG4/dC5jaGlsZChlKS5jdXQobik6cn0sVC5ub2RlQmVmb3JlLmdldD1mdW5jdGlvbigpe3ZhciB0PXRoaXMuaW5kZXgodGhpcy5kZXB0aCksZT10aGlzLnBvcy10aGlzLnBhdGhbdGhpcy5wYXRoLmxlbmd0aC0xXTtyZXR1cm4gZT90aGlzLnBhcmVudC5jaGlsZCh0KS5jdXQoMCxlKTowPT10P251bGw6dGhpcy5wYXJlbnQuY2hpbGQodC0xKX0sTi5wcm90b3R5cGUubWFya3M9ZnVuY3Rpb24oKXt2YXIgdD10aGlzLnBhcmVudCxlPXRoaXMuaW5kZXgoKTtpZigwPT10LmNvbnRlbnQuc2l6ZSlyZXR1cm4gaC5ub25lO2lmKHRoaXMudGV4dE9mZnNldClyZXR1cm4gdC5jaGlsZChlKS5tYXJrczt2YXIgbj10Lm1heWJlQ2hpbGQoZS0xKSxyPXQubWF5YmVDaGlsZChlKTtpZighbil7dmFyIG89bjtuPXIscj1vfWZvcih2YXIgaT1uLm1hcmtzLHM9MDtzPGkubGVuZ3RoO3MrKykhMSE9PWlbc10udHlwZS5zcGVjLmluY2x1c2l2ZXx8ciYmaVtzXS5pc0luU2V0KHIubWFya3MpfHwoaT1pW3MtLV0ucmVtb3ZlRnJvbVNldChpKSk7cmV0dXJuIGl9LE4ucHJvdG90eXBlLm1hcmtzQWNyb3NzPWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMucGFyZW50Lm1heWJlQ2hpbGQodGhpcy5pbmRleCgpKTtpZighZXx8IWUuaXNJbmxpbmUpcmV0dXJuIG51bGw7Zm9yKHZhciBuPWUubWFya3Mscj10LnBhcmVudC5tYXliZUNoaWxkKHQuaW5kZXgoKSksbz0wO288bi5sZW5ndGg7bysrKSExIT09bltvXS50eXBlLnNwZWMuaW5jbHVzaXZlfHxyJiZuW29dLmlzSW5TZXQoci5tYXJrcyl8fChuPW5bby0tXS5yZW1vdmVGcm9tU2V0KG4pKTtyZXR1cm4gbn0sTi5wcm90b3R5cGUuc2hhcmVkRGVwdGg9ZnVuY3Rpb24odCl7Zm9yKHZhciBlPXRoaXMuZGVwdGg7ZT4wO2UtLSlpZih0aGlzLnN0YXJ0KGUpPD10JiZ0aGlzLmVuZChlKT49dClyZXR1cm4gZTtyZXR1cm4gMH0sTi5wcm90b3R5cGUuYmxvY2tSYW5nZT1mdW5jdGlvbih0LGUpe2lmKHZvaWQgMD09PXQmJih0PXRoaXMpLHQucG9zPHRoaXMucG9zKXJldHVybiB0LmJsb2NrUmFuZ2UodGhpcyk7Zm9yKHZhciBuPXRoaXMuZGVwdGgtKHRoaXMucGFyZW50LmlubGluZUNvbnRlbnR8fHRoaXMucG9zPT10LnBvcz8xOjApO24+PTA7bi0tKWlmKHQucG9zPD10aGlzLmVuZChuKSYmKCFlfHxlKHRoaXMubm9kZShuKSkpKXJldHVybiBuZXcgUih0aGlzLHQsbil9LE4ucHJvdG90eXBlLnNhbWVQYXJlbnQ9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMucG9zLXRoaXMucGFyZW50T2Zmc2V0PT10LnBvcy10LnBhcmVudE9mZnNldH0sTi5wcm90b3R5cGUubWF4PWZ1bmN0aW9uKHQpe3JldHVybiB0LnBvcz50aGlzLnBvcz90OnRoaXN9LE4ucHJvdG90eXBlLm1pbj1mdW5jdGlvbih0KXtyZXR1cm4gdC5wb3M8dGhpcy5wb3M/dDp0aGlzfSxOLnByb3RvdHlwZS50b1N0cmluZz1mdW5jdGlvbigpe2Zvcih2YXIgdD0iIixlPTE7ZTw9dGhpcy5kZXB0aDtlKyspdCs9KHQ/Ii8iOiIiKSt0aGlzLm5vZGUoZSkudHlwZS5uYW1lKyJfIit0aGlzLmluZGV4KGUtMSk7cmV0dXJuIHQrIjoiK3RoaXMucGFyZW50T2Zmc2V0fSxOLnJlc29sdmU9ZnVuY3Rpb24odCxlKXtpZighKGU+PTAmJmU8PXQuY29udGVudC5zaXplKSl0aHJvdyBuZXcgUmFuZ2VFcnJvcigiUG9zaXRpb24gIitlKyIgb3V0IG9mIHJhbmdlIik7Zm9yKHZhciBuPVtdLHI9MCxvPWUsaT10Ozspe3ZhciBzPWkuY29udGVudC5maW5kSW5kZXgobyksYT1zLmluZGV4LGM9cy5vZmZzZXQsdT1vLWM7aWYobi5wdXNoKGksYSxyK2MpLCF1KWJyZWFrO2lmKGk9aS5jaGlsZChhKSxpLmlzVGV4dClicmVhaztvPXUtMSxyKz1jKzF9cmV0dXJuIG5ldyBOKGUsbixvKX0sTi5yZXNvbHZlQ2FjaGVkPWZ1bmN0aW9uKHQsZSl7Zm9yKHZhciBuPTA7bjxBLmxlbmd0aDtuKyspe3ZhciByPUFbbl07aWYoci5wb3M9PWUmJnIuZG9jPT10KXJldHVybiByfXZhciBvPUFbRV09Ti5yZXNvbHZlKHQsZSk7cmV0dXJuIEU9KEUrMSklRCxvfSxPYmplY3QuZGVmaW5lUHJvcGVydGllcyhOLnByb3RvdHlwZSxUKTt2YXIgQT1bXSxFPTAsRD0xMixSPWZ1bmN0aW9uKHQsZSxuKXt0aGlzLiRmcm9tPXQsdGhpcy4kdG89ZSx0aGlzLmRlcHRoPW59LHo9e3N0YXJ0Ontjb25maWd1cmFibGU6ITB9LGVuZDp7Y29uZmlndXJhYmxlOiEwfSxwYXJlbnQ6e2NvbmZpZ3VyYWJsZTohMH0sc3RhcnRJbmRleDp7Y29uZmlndXJhYmxlOiEwfSxlbmRJbmRleDp7Y29uZmlndXJhYmxlOiEwfX07ei5zdGFydC5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy4kZnJvbS5iZWZvcmUodGhpcy5kZXB0aCsxKX0sei5lbmQuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuJHRvLmFmdGVyKHRoaXMuZGVwdGgrMSl9LHoucGFyZW50LmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLiRmcm9tLm5vZGUodGhpcy5kZXB0aCl9LHouc3RhcnRJbmRleC5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy4kZnJvbS5pbmRleCh0aGlzLmRlcHRoKX0sei5lbmRJbmRleC5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy4kdG8uaW5kZXhBZnRlcih0aGlzLmRlcHRoKX0sT2JqZWN0LmRlZmluZVByb3BlcnRpZXMoUi5wcm90b3R5cGUseik7dmFyIFA9T2JqZWN0LmNyZWF0ZShudWxsKSxJPWZ1bmN0aW9uKHQsZSxuLHIpe3RoaXMudHlwZT10LHRoaXMuYXR0cnM9ZSx0aGlzLmNvbnRlbnQ9bnx8cy5lbXB0eSx0aGlzLm1hcmtzPXJ8fGgubm9uZX0sQj17bm9kZVNpemU6e2NvbmZpZ3VyYWJsZTohMH0sY2hpbGRDb3VudDp7Y29uZmlndXJhYmxlOiEwfSx0ZXh0Q29udGVudDp7Y29uZmlndXJhYmxlOiEwfSxmaXJzdENoaWxkOntjb25maWd1cmFibGU6ITB9LGxhc3RDaGlsZDp7Y29uZmlndXJhYmxlOiEwfSxpc0Jsb2NrOntjb25maWd1cmFibGU6ITB9LGlzVGV4dGJsb2NrOntjb25maWd1cmFibGU6ITB9LGlubGluZUNvbnRlbnQ6e2NvbmZpZ3VyYWJsZTohMH0saXNJbmxpbmU6e2NvbmZpZ3VyYWJsZTohMH0saXNUZXh0Ontjb25maWd1cmFibGU6ITB9LGlzTGVhZjp7Y29uZmlndXJhYmxlOiEwfSxpc0F0b206e2NvbmZpZ3VyYWJsZTohMH19O0Iubm9kZVNpemUuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuaXNMZWFmPzE6Mit0aGlzLmNvbnRlbnQuc2l6ZX0sQi5jaGlsZENvdW50LmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLmNvbnRlbnQuY2hpbGRDb3VudH0sSS5wcm90b3R5cGUuY2hpbGQ9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuY29udGVudC5jaGlsZCh0KX0sSS5wcm90b3R5cGUubWF5YmVDaGlsZD1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5jb250ZW50Lm1heWJlQ2hpbGQodCl9LEkucHJvdG90eXBlLmZvckVhY2g9ZnVuY3Rpb24odCl7dGhpcy5jb250ZW50LmZvckVhY2godCl9LEkucHJvdG90eXBlLm5vZGVzQmV0d2Vlbj1mdW5jdGlvbih0LGUsbixyKXt2b2lkIDA9PT1yJiYocj0wKSx0aGlzLmNvbnRlbnQubm9kZXNCZXR3ZWVuKHQsZSxuLHIsdGhpcyl9LEkucHJvdG90eXBlLmRlc2NlbmRhbnRzPWZ1bmN0aW9uKHQpe3RoaXMubm9kZXNCZXR3ZWVuKDAsdGhpcy5jb250ZW50LnNpemUsdCl9LEIudGV4dENvbnRlbnQuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudGV4dEJldHdlZW4oMCx0aGlzLmNvbnRlbnQuc2l6ZSwiIil9LEkucHJvdG90eXBlLnRleHRCZXR3ZWVuPWZ1bmN0aW9uKHQsZSxuLHIpe3JldHVybiB0aGlzLmNvbnRlbnQudGV4dEJldHdlZW4odCxlLG4scil9LEIuZmlyc3RDaGlsZC5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jb250ZW50LmZpcnN0Q2hpbGR9LEIubGFzdENoaWxkLmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLmNvbnRlbnQubGFzdENoaWxkfSxJLnByb3RvdHlwZS5lcT1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcz09dHx8dGhpcy5zYW1lTWFya3VwKHQpJiZ0aGlzLmNvbnRlbnQuZXEodC5jb250ZW50KX0sSS5wcm90b3R5cGUuc2FtZU1hcmt1cD1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5oYXNNYXJrdXAodC50eXBlLHQuYXR0cnMsdC5tYXJrcyl9LEkucHJvdG90eXBlLmhhc01hcmt1cD1mdW5jdGlvbih0LGUsbil7cmV0dXJuIHRoaXMudHlwZT09dCYmbCh0aGlzLmF0dHJzLGV8fHQuZGVmYXVsdEF0dHJzfHxQKSYmaC5zYW1lU2V0KHRoaXMubWFya3Msbnx8aC5ub25lKX0sSS5wcm90b3R5cGUuY29weT1mdW5jdGlvbih0KXtyZXR1cm4gdm9pZCAwPT09dCYmKHQ9bnVsbCksdD09dGhpcy5jb250ZW50P3RoaXM6bmV3IHRoaXMuY29uc3RydWN0b3IodGhpcy50eXBlLHRoaXMuYXR0cnMsdCx0aGlzLm1hcmtzKX0sSS5wcm90b3R5cGUubWFyaz1mdW5jdGlvbih0KXtyZXR1cm4gdD09dGhpcy5tYXJrcz90aGlzOm5ldyB0aGlzLmNvbnN0cnVjdG9yKHRoaXMudHlwZSx0aGlzLmF0dHJzLHRoaXMuY29udGVudCx0KX0sSS5wcm90b3R5cGUuY3V0PWZ1bmN0aW9uKHQsZSl7cmV0dXJuIDA9PXQmJmU9PXRoaXMuY29udGVudC5zaXplP3RoaXM6dGhpcy5jb3B5KHRoaXMuY29udGVudC5jdXQodCxlKSl9LEkucHJvdG90eXBlLnNsaWNlPWZ1bmN0aW9uKHQsZSxuKXtpZih2b2lkIDA9PT1lJiYoZT10aGlzLmNvbnRlbnQuc2l6ZSksdm9pZCAwPT09biYmKG49ITEpLHQ9PWUpcmV0dXJuIHAuZW1wdHk7dmFyIHI9dGhpcy5yZXNvbHZlKHQpLG89dGhpcy5yZXNvbHZlKGUpLGk9bj8wOnIuc2hhcmVkRGVwdGgoZSkscz1yLnN0YXJ0KGkpLGE9ci5ub2RlKGkpLGM9YS5jb250ZW50LmN1dChyLnBvcy1zLG8ucG9zLXMpO3JldHVybiBuZXcgcChjLHIuZGVwdGgtaSxvLmRlcHRoLWkpfSxJLnByb3RvdHlwZS5yZXBsYWNlPWZ1bmN0aW9uKHQsZSxuKXtyZXR1cm4gZyh0aGlzLnJlc29sdmUodCksdGhpcy5yZXNvbHZlKGUpLG4pfSxJLnByb3RvdHlwZS5ub2RlQXQ9ZnVuY3Rpb24odCl7Zm9yKHZhciBlPXRoaXM7Oyl7dmFyIG49ZS5jb250ZW50LmZpbmRJbmRleCh0KSxyPW4uaW5kZXgsbz1uLm9mZnNldDtpZihlPWUubWF5YmVDaGlsZChyKSwhZSlyZXR1cm4gbnVsbDtpZihvPT10fHxlLmlzVGV4dClyZXR1cm4gZTt0LT1vKzF9fSxJLnByb3RvdHlwZS5jaGlsZEFmdGVyPWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMuY29udGVudC5maW5kSW5kZXgodCksbj1lLmluZGV4LHI9ZS5vZmZzZXQ7cmV0dXJue25vZGU6dGhpcy5jb250ZW50Lm1heWJlQ2hpbGQobiksaW5kZXg6bixvZmZzZXQ6cn19LEkucHJvdG90eXBlLmNoaWxkQmVmb3JlPWZ1bmN0aW9uKHQpe2lmKDA9PXQpcmV0dXJue25vZGU6bnVsbCxpbmRleDowLG9mZnNldDowfTt2YXIgZT10aGlzLmNvbnRlbnQuZmluZEluZGV4KHQpLG49ZS5pbmRleCxyPWUub2Zmc2V0O2lmKHI8dClyZXR1cm57bm9kZTp0aGlzLmNvbnRlbnQuY2hpbGQobiksaW5kZXg6bixvZmZzZXQ6cn07dmFyIG89dGhpcy5jb250ZW50LmNoaWxkKG4tMSk7cmV0dXJue25vZGU6byxpbmRleDpuLTEsb2Zmc2V0OnItby5ub2RlU2l6ZX19LEkucHJvdG90eXBlLnJlc29sdmU9ZnVuY3Rpb24odCl7cmV0dXJuIE4ucmVzb2x2ZUNhY2hlZCh0aGlzLHQpfSxJLnByb3RvdHlwZS5yZXNvbHZlTm9DYWNoZT1mdW5jdGlvbih0KXtyZXR1cm4gTi5yZXNvbHZlKHRoaXMsdCl9LEkucHJvdG90eXBlLnJhbmdlSGFzTWFyaz1mdW5jdGlvbih0LGUsbil7dmFyIHI9ITE7cmV0dXJuIGU+dCYmdGhpcy5ub2Rlc0JldHdlZW4odCxlLChmdW5jdGlvbih0KXtyZXR1cm4gbi5pc0luU2V0KHQubWFya3MpJiYocj0hMCksIXJ9KSkscn0sQi5pc0Jsb2NrLmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLnR5cGUuaXNCbG9ja30sQi5pc1RleHRibG9jay5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy50eXBlLmlzVGV4dGJsb2NrfSxCLmlubGluZUNvbnRlbnQuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudHlwZS5pbmxpbmVDb250ZW50fSxCLmlzSW5saW5lLmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLnR5cGUuaXNJbmxpbmV9LEIuaXNUZXh0LmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLnR5cGUuaXNUZXh0fSxCLmlzTGVhZi5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy50eXBlLmlzTGVhZn0sQi5pc0F0b20uZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudHlwZS5pc0F0b219LEkucHJvdG90eXBlLnRvU3RyaW5nPWZ1bmN0aW9uKCl7aWYodGhpcy50eXBlLnNwZWMudG9EZWJ1Z1N0cmluZylyZXR1cm4gdGhpcy50eXBlLnNwZWMudG9EZWJ1Z1N0cmluZyh0aGlzKTt2YXIgdD10aGlzLnR5cGUubmFtZTtyZXR1cm4gdGhpcy5jb250ZW50LnNpemUmJih0Kz0iKCIrdGhpcy5jb250ZW50LnRvU3RyaW5nSW5uZXIoKSsiKSIpLEYodGhpcy5tYXJrcyx0KX0sSS5wcm90b3R5cGUuY29udGVudE1hdGNoQXQ9ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy50eXBlLmNvbnRlbnRNYXRjaC5tYXRjaEZyYWdtZW50KHRoaXMuY29udGVudCwwLHQpO2lmKCFlKXRocm93IG5ldyBFcnJvcigiQ2FsbGVkIGNvbnRlbnRNYXRjaEF0IG9uIGEgbm9kZSB3aXRoIGludmFsaWQgY29udGVudCIpO3JldHVybiBlfSxJLnByb3RvdHlwZS5jYW5SZXBsYWNlPWZ1bmN0aW9uKHQsZSxuLHIsbyl7dm9pZCAwPT09biYmKG49cy5lbXB0eSksdm9pZCAwPT09ciYmKHI9MCksdm9pZCAwPT09byYmKG89bi5jaGlsZENvdW50KTt2YXIgaT10aGlzLmNvbnRlbnRNYXRjaEF0KHQpLm1hdGNoRnJhZ21lbnQobixyLG8pLGE9aSYmaS5tYXRjaEZyYWdtZW50KHRoaXMuY29udGVudCxlKTtpZighYXx8IWEudmFsaWRFbmQpcmV0dXJuITE7Zm9yKHZhciBjPXI7YzxvO2MrKylpZighdGhpcy50eXBlLmFsbG93c01hcmtzKG4uY2hpbGQoYykubWFya3MpKXJldHVybiExO3JldHVybiEwfSxJLnByb3RvdHlwZS5jYW5SZXBsYWNlV2l0aD1mdW5jdGlvbih0LGUsbixyKXtpZihyJiYhdGhpcy50eXBlLmFsbG93c01hcmtzKHIpKXJldHVybiExO3ZhciBvPXRoaXMuY29udGVudE1hdGNoQXQodCkubWF0Y2hUeXBlKG4pLGk9byYmby5tYXRjaEZyYWdtZW50KHRoaXMuY29udGVudCxlKTtyZXR1cm4hIWkmJmkudmFsaWRFbmR9LEkucHJvdG90eXBlLmNhbkFwcGVuZD1mdW5jdGlvbih0KXtyZXR1cm4gdC5jb250ZW50LnNpemU/dGhpcy5jYW5SZXBsYWNlKHRoaXMuY2hpbGRDb3VudCx0aGlzLmNoaWxkQ291bnQsdC5jb250ZW50KTp0aGlzLnR5cGUuY29tcGF0aWJsZUNvbnRlbnQodC50eXBlKX0sSS5wcm90b3R5cGUuY2hlY2s9ZnVuY3Rpb24oKXtpZighdGhpcy50eXBlLnZhbGlkQ29udGVudCh0aGlzLmNvbnRlbnQpKXRocm93IG5ldyBSYW5nZUVycm9yKCJJbnZhbGlkIGNvbnRlbnQgZm9yIG5vZGUgIit0aGlzLnR5cGUubmFtZSsiOiAiK3RoaXMuY29udGVudC50b1N0cmluZygpLnNsaWNlKDAsNTApKTt0aGlzLmNvbnRlbnQuZm9yRWFjaCgoZnVuY3Rpb24odCl7cmV0dXJuIHQuY2hlY2soKX0pKX0sSS5wcm90b3R5cGUudG9KU09OPWZ1bmN0aW9uKCl7dmFyIHQ9e3R5cGU6dGhpcy50eXBlLm5hbWV9O2Zvcih2YXIgZSBpbiB0aGlzLmF0dHJzKXt0LmF0dHJzPXRoaXMuYXR0cnM7YnJlYWt9cmV0dXJuIHRoaXMuY29udGVudC5zaXplJiYodC5jb250ZW50PXRoaXMuY29udGVudC50b0pTT04oKSksdGhpcy5tYXJrcy5sZW5ndGgmJih0Lm1hcmtzPXRoaXMubWFya3MubWFwKChmdW5jdGlvbih0KXtyZXR1cm4gdC50b0pTT04oKX0pKSksdH0sSS5mcm9tSlNPTj1mdW5jdGlvbih0LGUpe2lmKCFlKXRocm93IG5ldyBSYW5nZUVycm9yKCJJbnZhbGlkIGlucHV0IGZvciBOb2RlLmZyb21KU09OIik7dmFyIG49bnVsbDtpZihlLm1hcmtzKXtpZighQXJyYXkuaXNBcnJheShlLm1hcmtzKSl0aHJvdyBuZXcgUmFuZ2VFcnJvcigiSW52YWxpZCBtYXJrIGRhdGEgZm9yIE5vZGUuZnJvbUpTT04iKTtuPWUubWFya3MubWFwKHQubWFya0Zyb21KU09OKX1pZigidGV4dCI9PWUudHlwZSl7aWYoInN0cmluZyIhPXR5cGVvZiBlLnRleHQpdGhyb3cgbmV3IFJhbmdlRXJyb3IoIkludmFsaWQgdGV4dCBub2RlIGluIEpTT04iKTtyZXR1cm4gdC50ZXh0KGUudGV4dCxuKX12YXIgcj1zLmZyb21KU09OKHQsZS5jb250ZW50KTtyZXR1cm4gdC5ub2RlVHlwZShlLnR5cGUpLmNyZWF0ZShlLmF0dHJzLHIsbil9LE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKEkucHJvdG90eXBlLEIpO3ZhciBfPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoZSxuLHIsbyl7aWYodC5jYWxsKHRoaXMsZSxuLG51bGwsbyksIXIpdGhyb3cgbmV3IFJhbmdlRXJyb3IoIkVtcHR5IHRleHQgbm9kZXMgYXJlIG5vdCBhbGxvd2VkIik7dGhpcy50ZXh0PXJ9dCYmKGUuX19wcm90b19fPXQpLGUucHJvdG90eXBlPU9iamVjdC5jcmVhdGUodCYmdC5wcm90b3R5cGUpLGUucHJvdG90eXBlLmNvbnN0cnVjdG9yPWU7dmFyIG49e3RleHRDb250ZW50Ontjb25maWd1cmFibGU6ITB9LG5vZGVTaXplOntjb25maWd1cmFibGU6ITB9fTtyZXR1cm4gZS5wcm90b3R5cGUudG9TdHJpbmc9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy50eXBlLnNwZWMudG9EZWJ1Z1N0cmluZz90aGlzLnR5cGUuc3BlYy50b0RlYnVnU3RyaW5nKHRoaXMpOkYodGhpcy5tYXJrcyxKU09OLnN0cmluZ2lmeSh0aGlzLnRleHQpKX0sbi50ZXh0Q29udGVudC5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy50ZXh0fSxlLnByb3RvdHlwZS50ZXh0QmV0d2Vlbj1mdW5jdGlvbih0LGUpe3JldHVybiB0aGlzLnRleHQuc2xpY2UodCxlKX0sbi5ub2RlU2l6ZS5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy50ZXh0Lmxlbmd0aH0sZS5wcm90b3R5cGUubWFyaz1mdW5jdGlvbih0KXtyZXR1cm4gdD09dGhpcy5tYXJrcz90aGlzOm5ldyBlKHRoaXMudHlwZSx0aGlzLmF0dHJzLHRoaXMudGV4dCx0KX0sZS5wcm90b3R5cGUud2l0aFRleHQ9ZnVuY3Rpb24odCl7cmV0dXJuIHQ9PXRoaXMudGV4dD90aGlzOm5ldyBlKHRoaXMudHlwZSx0aGlzLmF0dHJzLHQsdGhpcy5tYXJrcyl9LGUucHJvdG90eXBlLmN1dD1mdW5jdGlvbih0LGUpe3JldHVybiB2b2lkIDA9PT10JiYodD0wKSx2b2lkIDA9PT1lJiYoZT10aGlzLnRleHQubGVuZ3RoKSwwPT10JiZlPT10aGlzLnRleHQubGVuZ3RoP3RoaXM6dGhpcy53aXRoVGV4dCh0aGlzLnRleHQuc2xpY2UodCxlKSl9LGUucHJvdG90eXBlLmVxPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLnNhbWVNYXJrdXAodCkmJnRoaXMudGV4dD09dC50ZXh0fSxlLnByb3RvdHlwZS50b0pTT049ZnVuY3Rpb24oKXt2YXIgZT10LnByb3RvdHlwZS50b0pTT04uY2FsbCh0aGlzKTtyZXR1cm4gZS50ZXh0PXRoaXMudGV4dCxlfSxPYmplY3QuZGVmaW5lUHJvcGVydGllcyhlLnByb3RvdHlwZSxuKSxlfShJKTtmdW5jdGlvbiBGKHQsZSl7Zm9yKHZhciBuPXQubGVuZ3RoLTE7bj49MDtuLS0pZT10W25dLnR5cGUubmFtZSsiKCIrZSsiKSI7cmV0dXJuIGV9dmFyIGo9ZnVuY3Rpb24odCl7dGhpcy52YWxpZEVuZD10LHRoaXMubmV4dD1bXSx0aGlzLndyYXBDYWNoZT1bXX0sJD17aW5saW5lQ29udGVudDp7Y29uZmlndXJhYmxlOiEwfSxkZWZhdWx0VHlwZTp7Y29uZmlndXJhYmxlOiEwfSxlZGdlQ291bnQ6e2NvbmZpZ3VyYWJsZTohMH19O2oucGFyc2U9ZnVuY3Rpb24odCxlKXt2YXIgbj1uZXcgVih0LGUpO2lmKG51bGw9PW4ubmV4dClyZXR1cm4gai5lbXB0eTt2YXIgcj1xKG4pO24ubmV4dCYmbi5lcnIoIlVuZXhwZWN0ZWQgdHJhaWxpbmcgdGV4dCIpO3ZhciBvPVEoWChyKSk7cmV0dXJuIHR0KG8sbiksb30sai5wcm90b3R5cGUubWF0Y2hUeXBlPWZ1bmN0aW9uKHQpe2Zvcih2YXIgZT0wO2U8dGhpcy5uZXh0Lmxlbmd0aDtlKz0yKWlmKHRoaXMubmV4dFtlXT09dClyZXR1cm4gdGhpcy5uZXh0W2UrMV07cmV0dXJuIG51bGx9LGoucHJvdG90eXBlLm1hdGNoRnJhZ21lbnQ9ZnVuY3Rpb24odCxlLG4pe3ZvaWQgMD09PWUmJihlPTApLHZvaWQgMD09PW4mJihuPXQuY2hpbGRDb3VudCk7Zm9yKHZhciByPXRoaXMsbz1lO3ImJm88bjtvKyspcj1yLm1hdGNoVHlwZSh0LmNoaWxkKG8pLnR5cGUpO3JldHVybiByfSwkLmlubGluZUNvbnRlbnQuZ2V0PWZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5uZXh0WzBdO3JldHVybiEhdCYmdC5pc0lubGluZX0sJC5kZWZhdWx0VHlwZS5nZXQ9ZnVuY3Rpb24oKXtmb3IodmFyIHQ9MDt0PHRoaXMubmV4dC5sZW5ndGg7dCs9Mil7dmFyIGU9dGhpcy5uZXh0W3RdO2lmKCFlLmlzVGV4dCYmIWUuaGFzUmVxdWlyZWRBdHRycygpKXJldHVybiBlfX0sai5wcm90b3R5cGUuY29tcGF0aWJsZT1mdW5jdGlvbih0KXtmb3IodmFyIGU9MDtlPHRoaXMubmV4dC5sZW5ndGg7ZSs9Milmb3IodmFyIG49MDtuPHQubmV4dC5sZW5ndGg7bis9MilpZih0aGlzLm5leHRbZV09PXQubmV4dFtuXSlyZXR1cm4hMDtyZXR1cm4hMX0sai5wcm90b3R5cGUuZmlsbEJlZm9yZT1mdW5jdGlvbih0LGUsbil7dm9pZCAwPT09ZSYmKGU9ITEpLHZvaWQgMD09PW4mJihuPTApO3ZhciByPVt0aGlzXTtmdW5jdGlvbiBvKGksYSl7dmFyIGM9aS5tYXRjaEZyYWdtZW50KHQsbik7aWYoYyYmKCFlfHxjLnZhbGlkRW5kKSlyZXR1cm4gcy5mcm9tKGEubWFwKChmdW5jdGlvbih0KXtyZXR1cm4gdC5jcmVhdGVBbmRGaWxsKCl9KSkpO2Zvcih2YXIgdT0wO3U8aS5uZXh0Lmxlbmd0aDt1Kz0yKXt2YXIgbD1pLm5leHRbdV0saD1pLm5leHRbdSsxXTtpZighbC5pc1RleHQmJiFsLmhhc1JlcXVpcmVkQXR0cnMoKSYmLTE9PXIuaW5kZXhPZihoKSl7ci5wdXNoKGgpO3ZhciBmPW8oaCxhLmNvbmNhdChsKSk7aWYoZilyZXR1cm4gZn19fXJldHVybiBvKHRoaXMsW10pfSxqLnByb3RvdHlwZS5maW5kV3JhcHBpbmc9ZnVuY3Rpb24odCl7Zm9yKHZhciBlPTA7ZTx0aGlzLndyYXBDYWNoZS5sZW5ndGg7ZSs9MilpZih0aGlzLndyYXBDYWNoZVtlXT09dClyZXR1cm4gdGhpcy53cmFwQ2FjaGVbZSsxXTt2YXIgbj10aGlzLmNvbXB1dGVXcmFwcGluZyh0KTtyZXR1cm4gdGhpcy53cmFwQ2FjaGUucHVzaCh0LG4pLG59LGoucHJvdG90eXBlLmNvbXB1dGVXcmFwcGluZz1mdW5jdGlvbih0KXt2YXIgZT1PYmplY3QuY3JlYXRlKG51bGwpLG49W3ttYXRjaDp0aGlzLHR5cGU6bnVsbCx2aWE6bnVsbH1dO3doaWxlKG4ubGVuZ3RoKXt2YXIgcj1uLnNoaWZ0KCksbz1yLm1hdGNoO2lmKG8ubWF0Y2hUeXBlKHQpKXtmb3IodmFyIGk9W10scz1yO3MudHlwZTtzPXMudmlhKWkucHVzaChzLnR5cGUpO3JldHVybiBpLnJldmVyc2UoKX1mb3IodmFyIGE9MDthPG8ubmV4dC5sZW5ndGg7YSs9Mil7dmFyIGM9by5uZXh0W2FdO2MuaXNMZWFmfHxjLmhhc1JlcXVpcmVkQXR0cnMoKXx8Yy5uYW1lIGluIGV8fHIudHlwZSYmIW8ubmV4dFthKzFdLnZhbGlkRW5kfHwobi5wdXNoKHttYXRjaDpjLmNvbnRlbnRNYXRjaCx0eXBlOmMsdmlhOnJ9KSxlW2MubmFtZV09ITApfX19LCQuZWRnZUNvdW50LmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLm5leHQubGVuZ3RoPj4xfSxqLnByb3RvdHlwZS5lZGdlPWZ1bmN0aW9uKHQpe3ZhciBlPXQ8PDE7aWYoZT49dGhpcy5uZXh0Lmxlbmd0aCl0aHJvdyBuZXcgUmFuZ2VFcnJvcigiVGhlcmUncyBubyAiK3QrInRoIGVkZ2UgaW4gdGhpcyBjb250ZW50IG1hdGNoIik7cmV0dXJue3R5cGU6dGhpcy5uZXh0W2VdLG5leHQ6dGhpcy5uZXh0W2UrMV19fSxqLnByb3RvdHlwZS50b1N0cmluZz1mdW5jdGlvbigpe3ZhciB0PVtdO2Z1bmN0aW9uIGUobil7dC5wdXNoKG4pO2Zvcih2YXIgcj0xO3I8bi5uZXh0Lmxlbmd0aDtyKz0yKS0xPT10LmluZGV4T2Yobi5uZXh0W3JdKSYmZShuLm5leHRbcl0pfXJldHVybiBlKHRoaXMpLHQubWFwKChmdW5jdGlvbihlLG4pe2Zvcih2YXIgcj1uKyhlLnZhbGlkRW5kPyIqIjoiICIpKyIgIixvPTA7bzxlLm5leHQubGVuZ3RoO28rPTIpcis9KG8/IiwgIjoiIikrZS5uZXh0W29dLm5hbWUrIi0+Iit0LmluZGV4T2YoZS5uZXh0W28rMV0pO3JldHVybiByfSkpLmpvaW4oIlxuIil9LE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKGoucHJvdG90eXBlLCQpLGouZW1wdHk9bmV3IGooITApO3ZhciBWPWZ1bmN0aW9uKHQsZSl7dGhpcy5zdHJpbmc9dCx0aGlzLm5vZGVUeXBlcz1lLHRoaXMuaW5saW5lPW51bGwsdGhpcy5wb3M9MCx0aGlzLnRva2Vucz10LnNwbGl0KC9ccyooPz1cYnxcV3wkKS8pLCIiPT10aGlzLnRva2Vuc1t0aGlzLnRva2Vucy5sZW5ndGgtMV0mJnRoaXMudG9rZW5zLnBvcCgpLCIiPT10aGlzLnRva2Vuc1swXSYmdGhpcy50b2tlbnMudW5zaGlmdCgpfSxMPXtuZXh0Ontjb25maWd1cmFibGU6ITB9fTtmdW5jdGlvbiBxKHQpe3ZhciBlPVtdO2Rve2UucHVzaChKKHQpKX13aGlsZSh0LmVhdCgifCIpKTtyZXR1cm4gMT09ZS5sZW5ndGg/ZVswXTp7dHlwZToiY2hvaWNlIixleHByczplfX1mdW5jdGlvbiBKKHQpe3ZhciBlPVtdO2Rve2UucHVzaChXKHQpKX13aGlsZSh0Lm5leHQmJiIpIiE9dC5uZXh0JiYifCIhPXQubmV4dCk7cmV0dXJuIDE9PWUubGVuZ3RoP2VbMF06e3R5cGU6InNlcSIsZXhwcnM6ZX19ZnVuY3Rpb24gVyh0KXtmb3IodmFyIGU9Ryh0KTs7KWlmKHQuZWF0KCIrIikpZT17dHlwZToicGx1cyIsZXhwcjplfTtlbHNlIGlmKHQuZWF0KCIqIikpZT17dHlwZToic3RhciIsZXhwcjplfTtlbHNlIGlmKHQuZWF0KCI/IikpZT17dHlwZToib3B0IixleHByOmV9O2Vsc2V7aWYoIXQuZWF0KCJ7IikpYnJlYWs7ZT1LKHQsZSl9cmV0dXJuIGV9ZnVuY3Rpb24gSCh0KXsvXEQvLnRlc3QodC5uZXh0KSYmdC5lcnIoIkV4cGVjdGVkIG51bWJlciwgZ290ICciK3QubmV4dCsiJyIpO3ZhciBlPU51bWJlcih0Lm5leHQpO3JldHVybiB0LnBvcysrLGV9ZnVuY3Rpb24gSyh0LGUpe3ZhciBuPUgodCkscj1uO3JldHVybiB0LmVhdCgiLCIpJiYocj0ifSIhPXQubmV4dD9IKHQpOi0xKSx0LmVhdCgifSIpfHx0LmVycigiVW5jbG9zZWQgYnJhY2VkIHJhbmdlIikse3R5cGU6InJhbmdlIixtaW46bixtYXg6cixleHByOmV9fWZ1bmN0aW9uIFUodCxlKXt2YXIgbj10Lm5vZGVUeXBlcyxyPW5bZV07aWYocilyZXR1cm5bcl07dmFyIG89W107Zm9yKHZhciBpIGluIG4pe3ZhciBzPW5baV07cy5ncm91cHMuaW5kZXhPZihlKT4tMSYmby5wdXNoKHMpfXJldHVybiAwPT1vLmxlbmd0aCYmdC5lcnIoIk5vIG5vZGUgdHlwZSBvciBncm91cCAnIitlKyInIGZvdW5kIiksb31mdW5jdGlvbiBHKHQpe2lmKHQuZWF0KCIoIikpe3ZhciBlPXEodCk7cmV0dXJuIHQuZWF0KCIpIil8fHQuZXJyKCJNaXNzaW5nIGNsb3NpbmcgcGFyZW4iKSxlfWlmKCEvXFcvLnRlc3QodC5uZXh0KSl7dmFyIG49VSh0LHQubmV4dCkubWFwKChmdW5jdGlvbihlKXtyZXR1cm4gbnVsbD09dC5pbmxpbmU/dC5pbmxpbmU9ZS5pc0lubGluZTp0LmlubGluZSE9ZS5pc0lubGluZSYmdC5lcnIoIk1peGluZyBpbmxpbmUgYW5kIGJsb2NrIGNvbnRlbnQiKSx7dHlwZToibmFtZSIsdmFsdWU6ZX19KSk7cmV0dXJuIHQucG9zKyssMT09bi5sZW5ndGg/blswXTp7dHlwZToiY2hvaWNlIixleHByczpufX10LmVycigiVW5leHBlY3RlZCB0b2tlbiAnIit0Lm5leHQrIiciKX1mdW5jdGlvbiBYKHQpe3ZhciBlPVtbXV07cmV0dXJuIG8oaSh0LDApLG4oKSksZTtmdW5jdGlvbiBuKCl7cmV0dXJuIGUucHVzaChbXSktMX1mdW5jdGlvbiByKHQsbixyKXt2YXIgbz17dGVybTpyLHRvOm59O3JldHVybiBlW3RdLnB1c2gobyksb31mdW5jdGlvbiBvKHQsZSl7dC5mb3JFYWNoKChmdW5jdGlvbih0KXtyZXR1cm4gdC50bz1lfSkpfWZ1bmN0aW9uIGkodCxlKXtpZigiY2hvaWNlIj09dC50eXBlKXJldHVybiB0LmV4cHJzLnJlZHVjZSgoZnVuY3Rpb24odCxuKXtyZXR1cm4gdC5jb25jYXQoaShuLGUpKX0pLFtdKTtpZigic2VxIj09dC50eXBlKWZvcih2YXIgcz0wOztzKyspe3ZhciBhPWkodC5leHByc1tzXSxlKTtpZihzPT10LmV4cHJzLmxlbmd0aC0xKXJldHVybiBhO28oYSxlPW4oKSl9ZWxzZXtpZigic3RhciI9PXQudHlwZSl7dmFyIGM9bigpO3JldHVybiByKGUsYyksbyhpKHQuZXhwcixjKSxjKSxbcihjKV19aWYoInBsdXMiPT10LnR5cGUpe3ZhciB1PW4oKTtyZXR1cm4gbyhpKHQuZXhwcixlKSx1KSxvKGkodC5leHByLHUpLHUpLFtyKHUpXX1pZigib3B0Ij09dC50eXBlKXJldHVybltyKGUpXS5jb25jYXQoaSh0LmV4cHIsZSkpO2lmKCJyYW5nZSI9PXQudHlwZSl7Zm9yKHZhciBsPWUsaD0wO2g8dC5taW47aCsrKXt2YXIgZj1uKCk7byhpKHQuZXhwcixsKSxmKSxsPWZ9aWYoLTE9PXQubWF4KW8oaSh0LmV4cHIsbCksbCk7ZWxzZSBmb3IodmFyIHA9dC5taW47cDx0Lm1heDtwKyspe3ZhciBkPW4oKTtyKGwsZCksbyhpKHQuZXhwcixsKSxkKSxsPWR9cmV0dXJuW3IobCldfWlmKCJuYW1lIj09dC50eXBlKXJldHVybltyKGUsbnVsbCx0LnZhbHVlKV19fX1mdW5jdGlvbiBZKHQsZSl7cmV0dXJuIGUtdH1mdW5jdGlvbiBaKHQsZSl7dmFyIG49W107cmV0dXJuIHIoZSksbi5zb3J0KFkpO2Z1bmN0aW9uIHIoZSl7dmFyIG89dFtlXTtpZigxPT1vLmxlbmd0aCYmIW9bMF0udGVybSlyZXR1cm4gcihvWzBdLnRvKTtuLnB1c2goZSk7Zm9yKHZhciBpPTA7aTxvLmxlbmd0aDtpKyspe3ZhciBzPW9baV0sYT1zLnRlcm0sYz1zLnRvO2F8fC0xIT1uLmluZGV4T2YoYyl8fHIoYyl9fX1mdW5jdGlvbiBRKHQpe3ZhciBlPU9iamVjdC5jcmVhdGUobnVsbCk7cmV0dXJuIG4oWih0LDApKTtmdW5jdGlvbiBuKHIpe3ZhciBvPVtdO3IuZm9yRWFjaCgoZnVuY3Rpb24oZSl7dFtlXS5mb3JFYWNoKChmdW5jdGlvbihlKXt2YXIgbj1lLnRlcm0scj1lLnRvO2lmKG4pe3ZhciBpPW8uaW5kZXhPZihuKSxzPWk+LTEmJm9baSsxXTtaKHQscikuZm9yRWFjaCgoZnVuY3Rpb24odCl7c3x8by5wdXNoKG4scz1bXSksLTE9PXMuaW5kZXhPZih0KSYmcy5wdXNoKHQpfSkpfX0pKX0pKTtmb3IodmFyIGk9ZVtyLmpvaW4oIiwiKV09bmV3IGooci5pbmRleE9mKHQubGVuZ3RoLTEpPi0xKSxzPTA7czxvLmxlbmd0aDtzKz0yKXt2YXIgYT1vW3MrMV0uc29ydChZKTtpLm5leHQucHVzaChvW3NdLGVbYS5qb2luKCIsIildfHxuKGEpKX1yZXR1cm4gaX19ZnVuY3Rpb24gdHQodCxlKXtmb3IodmFyIG49MCxyPVt0XTtuPHIubGVuZ3RoO24rKyl7Zm9yKHZhciBvPXJbbl0saT0hby52YWxpZEVuZCxzPVtdLGE9MDthPG8ubmV4dC5sZW5ndGg7YSs9Mil7dmFyIGM9by5uZXh0W2FdLHU9by5uZXh0W2ErMV07cy5wdXNoKGMubmFtZSksIWl8fGMuaXNUZXh0fHxjLmhhc1JlcXVpcmVkQXR0cnMoKXx8KGk9ITEpLC0xPT1yLmluZGV4T2YodSkmJnIucHVzaCh1KX1pJiZlLmVycigiT25seSBub24tZ2VuZXJhdGFibGUgbm9kZXMgKCIrcy5qb2luKCIsICIpKyIpIGluIGEgcmVxdWlyZWQgcG9zaXRpb24iKX19ZnVuY3Rpb24gZXQodCl7dmFyIGU9T2JqZWN0LmNyZWF0ZShudWxsKTtmb3IodmFyIG4gaW4gdCl7dmFyIHI9dFtuXTtpZighci5oYXNEZWZhdWx0KXJldHVybiBudWxsO2Vbbl09ci5kZWZhdWx0fXJldHVybiBlfWZ1bmN0aW9uIG50KHQsZSl7dmFyIG49T2JqZWN0LmNyZWF0ZShudWxsKTtmb3IodmFyIHIgaW4gdCl7dmFyIG89ZSYmZVtyXTtpZih2b2lkIDA9PT1vKXt2YXIgaT10W3JdO2lmKCFpLmhhc0RlZmF1bHQpdGhyb3cgbmV3IFJhbmdlRXJyb3IoIk5vIHZhbHVlIHN1cHBsaWVkIGZvciBhdHRyaWJ1dGUgIityKTtvPWkuZGVmYXVsdH1uW3JdPW99cmV0dXJuIG59ZnVuY3Rpb24gcnQodCl7dmFyIGU9T2JqZWN0LmNyZWF0ZShudWxsKTtpZih0KWZvcih2YXIgbiBpbiB0KWVbbl09bmV3IHN0KHRbbl0pO3JldHVybiBlfUwubmV4dC5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy50b2tlbnNbdGhpcy5wb3NdfSxWLnByb3RvdHlwZS5lYXQ9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMubmV4dD09dCYmKHRoaXMucG9zKyt8fCEwKX0sVi5wcm90b3R5cGUuZXJyPWZ1bmN0aW9uKHQpe3Rocm93IG5ldyBTeW50YXhFcnJvcih0KyIgKGluIGNvbnRlbnQgZXhwcmVzc2lvbiAnIit0aGlzLnN0cmluZysiJykiKX0sT2JqZWN0LmRlZmluZVByb3BlcnRpZXMoVi5wcm90b3R5cGUsTCk7dmFyIG90PWZ1bmN0aW9uKHQsZSxuKXt0aGlzLm5hbWU9dCx0aGlzLnNjaGVtYT1lLHRoaXMuc3BlYz1uLHRoaXMuZ3JvdXBzPW4uZ3JvdXA/bi5ncm91cC5zcGxpdCgiICIpOltdLHRoaXMuYXR0cnM9cnQobi5hdHRycyksdGhpcy5kZWZhdWx0QXR0cnM9ZXQodGhpcy5hdHRycyksdGhpcy5jb250ZW50TWF0Y2g9bnVsbCx0aGlzLm1hcmtTZXQ9bnVsbCx0aGlzLmlubGluZUNvbnRlbnQ9bnVsbCx0aGlzLmlzQmxvY2s9IShuLmlubGluZXx8InRleHQiPT10KSx0aGlzLmlzVGV4dD0idGV4dCI9PXR9LGl0PXtpc0lubGluZTp7Y29uZmlndXJhYmxlOiEwfSxpc1RleHRibG9jazp7Y29uZmlndXJhYmxlOiEwfSxpc0xlYWY6e2NvbmZpZ3VyYWJsZTohMH0saXNBdG9tOntjb25maWd1cmFibGU6ITB9fTtpdC5pc0lubGluZS5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4hdGhpcy5pc0Jsb2NrfSxpdC5pc1RleHRibG9jay5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5pc0Jsb2NrJiZ0aGlzLmlubGluZUNvbnRlbnR9LGl0LmlzTGVhZi5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jb250ZW50TWF0Y2g9PWouZW1wdHl9LGl0LmlzQXRvbS5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5pc0xlYWZ8fHRoaXMuc3BlYy5hdG9tfSxvdC5wcm90b3R5cGUuaGFzUmVxdWlyZWRBdHRycz1mdW5jdGlvbigpe2Zvcih2YXIgdCBpbiB0aGlzLmF0dHJzKWlmKHRoaXMuYXR0cnNbdF0uaXNSZXF1aXJlZClyZXR1cm4hMDtyZXR1cm4hMX0sb3QucHJvdG90eXBlLmNvbXBhdGlibGVDb250ZW50PWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzPT10fHx0aGlzLmNvbnRlbnRNYXRjaC5jb21wYXRpYmxlKHQuY29udGVudE1hdGNoKX0sb3QucHJvdG90eXBlLmNvbXB1dGVBdHRycz1mdW5jdGlvbih0KXtyZXR1cm4hdCYmdGhpcy5kZWZhdWx0QXR0cnM/dGhpcy5kZWZhdWx0QXR0cnM6bnQodGhpcy5hdHRycyx0KX0sb3QucHJvdG90eXBlLmNyZWF0ZT1mdW5jdGlvbih0LGUsbil7aWYodGhpcy5pc1RleHQpdGhyb3cgbmV3IEVycm9yKCJOb2RlVHlwZS5jcmVhdGUgY2FuJ3QgY29uc3RydWN0IHRleHQgbm9kZXMiKTtyZXR1cm4gbmV3IEkodGhpcyx0aGlzLmNvbXB1dGVBdHRycyh0KSxzLmZyb20oZSksaC5zZXRGcm9tKG4pKX0sb3QucHJvdG90eXBlLmNyZWF0ZUNoZWNrZWQ9ZnVuY3Rpb24odCxlLG4pe2lmKGU9cy5mcm9tKGUpLCF0aGlzLnZhbGlkQ29udGVudChlKSl0aHJvdyBuZXcgUmFuZ2VFcnJvcigiSW52YWxpZCBjb250ZW50IGZvciBub2RlICIrdGhpcy5uYW1lKTtyZXR1cm4gbmV3IEkodGhpcyx0aGlzLmNvbXB1dGVBdHRycyh0KSxlLGguc2V0RnJvbShuKSl9LG90LnByb3RvdHlwZS5jcmVhdGVBbmRGaWxsPWZ1bmN0aW9uKHQsZSxuKXtpZih0PXRoaXMuY29tcHV0ZUF0dHJzKHQpLGU9cy5mcm9tKGUpLGUuc2l6ZSl7dmFyIHI9dGhpcy5jb250ZW50TWF0Y2guZmlsbEJlZm9yZShlKTtpZighcilyZXR1cm4gbnVsbDtlPXIuYXBwZW5kKGUpfXZhciBvPXRoaXMuY29udGVudE1hdGNoLm1hdGNoRnJhZ21lbnQoZSkuZmlsbEJlZm9yZShzLmVtcHR5LCEwKTtyZXR1cm4gbz9uZXcgSSh0aGlzLHQsZS5hcHBlbmQobyksaC5zZXRGcm9tKG4pKTpudWxsfSxvdC5wcm90b3R5cGUudmFsaWRDb250ZW50PWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMuY29udGVudE1hdGNoLm1hdGNoRnJhZ21lbnQodCk7aWYoIWV8fCFlLnZhbGlkRW5kKXJldHVybiExO2Zvcih2YXIgbj0wO248dC5jaGlsZENvdW50O24rKylpZighdGhpcy5hbGxvd3NNYXJrcyh0LmNoaWxkKG4pLm1hcmtzKSlyZXR1cm4hMTtyZXR1cm4hMH0sb3QucHJvdG90eXBlLmFsbG93c01hcmtUeXBlPWZ1bmN0aW9uKHQpe3JldHVybiBudWxsPT10aGlzLm1hcmtTZXR8fHRoaXMubWFya1NldC5pbmRleE9mKHQpPi0xfSxvdC5wcm90b3R5cGUuYWxsb3dzTWFya3M9ZnVuY3Rpb24odCl7aWYobnVsbD09dGhpcy5tYXJrU2V0KXJldHVybiEwO2Zvcih2YXIgZT0wO2U8dC5sZW5ndGg7ZSsrKWlmKCF0aGlzLmFsbG93c01hcmtUeXBlKHRbZV0udHlwZSkpcmV0dXJuITE7cmV0dXJuITB9LG90LnByb3RvdHlwZS5hbGxvd2VkTWFya3M9ZnVuY3Rpb24odCl7aWYobnVsbD09dGhpcy5tYXJrU2V0KXJldHVybiB0O2Zvcih2YXIgZSxuPTA7bjx0Lmxlbmd0aDtuKyspdGhpcy5hbGxvd3NNYXJrVHlwZSh0W25dLnR5cGUpP2UmJmUucHVzaCh0W25dKTplfHwoZT10LnNsaWNlKDAsbikpO3JldHVybiBlP2UubGVuZ3RoP2U6aC5lbXB0eTp0fSxvdC5jb21waWxlPWZ1bmN0aW9uKHQsZSl7dmFyIG49T2JqZWN0LmNyZWF0ZShudWxsKTt0LmZvckVhY2goKGZ1bmN0aW9uKHQscil7cmV0dXJuIG5bdF09bmV3IG90KHQsZSxyKX0pKTt2YXIgcj1lLnNwZWMudG9wTm9kZXx8ImRvYyI7aWYoIW5bcl0pdGhyb3cgbmV3IFJhbmdlRXJyb3IoIlNjaGVtYSBpcyBtaXNzaW5nIGl0cyB0b3Agbm9kZSB0eXBlICgnIityKyInKSIpO2lmKCFuLnRleHQpdGhyb3cgbmV3IFJhbmdlRXJyb3IoIkV2ZXJ5IHNjaGVtYSBuZWVkcyBhICd0ZXh0JyB0eXBlIik7Zm9yKHZhciBvIGluIG4udGV4dC5hdHRycyl0aHJvdyBuZXcgUmFuZ2VFcnJvcigiVGhlIHRleHQgbm9kZSB0eXBlIHNob3VsZCBub3QgaGF2ZSBhdHRyaWJ1dGVzIik7cmV0dXJuIG59LE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKG90LnByb3RvdHlwZSxpdCk7dmFyIHN0PWZ1bmN0aW9uKHQpe3RoaXMuaGFzRGVmYXVsdD1PYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwodCwiZGVmYXVsdCIpLHRoaXMuZGVmYXVsdD10LmRlZmF1bHR9LGF0PXtpc1JlcXVpcmVkOntjb25maWd1cmFibGU6ITB9fTthdC5pc1JlcXVpcmVkLmdldD1mdW5jdGlvbigpe3JldHVybiF0aGlzLmhhc0RlZmF1bHR9LE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKHN0LnByb3RvdHlwZSxhdCk7dmFyIGN0PWZ1bmN0aW9uKHQsZSxuLHIpe3RoaXMubmFtZT10LHRoaXMuc2NoZW1hPW4sdGhpcy5zcGVjPXIsdGhpcy5hdHRycz1ydChyLmF0dHJzKSx0aGlzLnJhbms9ZSx0aGlzLmV4Y2x1ZGVkPW51bGw7dmFyIG89ZXQodGhpcy5hdHRycyk7dGhpcy5pbnN0YW5jZT1vJiZuZXcgaCh0aGlzLG8pfTtjdC5wcm90b3R5cGUuY3JlYXRlPWZ1bmN0aW9uKHQpe3JldHVybiF0JiZ0aGlzLmluc3RhbmNlP3RoaXMuaW5zdGFuY2U6bmV3IGgodGhpcyxudCh0aGlzLmF0dHJzLHQpKX0sY3QuY29tcGlsZT1mdW5jdGlvbih0LGUpe3ZhciBuPU9iamVjdC5jcmVhdGUobnVsbCkscj0wO3JldHVybiB0LmZvckVhY2goKGZ1bmN0aW9uKHQsbyl7cmV0dXJuIG5bdF09bmV3IGN0KHQscisrLGUsbyl9KSksbn0sY3QucHJvdG90eXBlLnJlbW92ZUZyb21TZXQ9ZnVuY3Rpb24odCl7Zm9yKHZhciBlPTA7ZTx0Lmxlbmd0aDtlKyspaWYodFtlXS50eXBlPT10aGlzKXJldHVybiB0LnNsaWNlKDAsZSkuY29uY2F0KHQuc2xpY2UoZSsxKSk7cmV0dXJuIHR9LGN0LnByb3RvdHlwZS5pc0luU2V0PWZ1bmN0aW9uKHQpe2Zvcih2YXIgZT0wO2U8dC5sZW5ndGg7ZSsrKWlmKHRbZV0udHlwZT09dGhpcylyZXR1cm4gdFtlXX0sY3QucHJvdG90eXBlLmV4Y2x1ZGVzPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLmV4Y2x1ZGVkLmluZGV4T2YodCk+LTF9O3ZhciB1dD1mdW5jdGlvbih0KXtmb3IodmFyIGUgaW4gdGhpcy5zcGVjPXt9LHQpdGhpcy5zcGVjW2VdPXRbZV07dGhpcy5zcGVjLm5vZGVzPXJbImEiXS5mcm9tKHQubm9kZXMpLHRoaXMuc3BlYy5tYXJrcz1yWyJhIl0uZnJvbSh0Lm1hcmtzKSx0aGlzLm5vZGVzPW90LmNvbXBpbGUodGhpcy5zcGVjLm5vZGVzLHRoaXMpLHRoaXMubWFya3M9Y3QuY29tcGlsZSh0aGlzLnNwZWMubWFya3MsdGhpcyk7dmFyIG49T2JqZWN0LmNyZWF0ZShudWxsKTtmb3IodmFyIG8gaW4gdGhpcy5ub2Rlcyl7aWYobyBpbiB0aGlzLm1hcmtzKXRocm93IG5ldyBSYW5nZUVycm9yKG8rIiBjYW4gbm90IGJlIGJvdGggYSBub2RlIGFuZCBhIG1hcmsiKTt2YXIgaT10aGlzLm5vZGVzW29dLHM9aS5zcGVjLmNvbnRlbnR8fCIiLGE9aS5zcGVjLm1hcmtzO2kuY29udGVudE1hdGNoPW5bc118fChuW3NdPWoucGFyc2Uocyx0aGlzLm5vZGVzKSksaS5pbmxpbmVDb250ZW50PWkuY29udGVudE1hdGNoLmlubGluZUNvbnRlbnQsaS5tYXJrU2V0PSJfIj09YT9udWxsOmE/bHQodGhpcyxhLnNwbGl0KCIgIikpOiIiIT1hJiZpLmlubGluZUNvbnRlbnQ/bnVsbDpbXX1mb3IodmFyIGMgaW4gdGhpcy5tYXJrcyl7dmFyIHU9dGhpcy5tYXJrc1tjXSxsPXUuc3BlYy5leGNsdWRlczt1LmV4Y2x1ZGVkPW51bGw9PWw/W3VdOiIiPT1sP1tdOmx0KHRoaXMsbC5zcGxpdCgiICIpKX10aGlzLm5vZGVGcm9tSlNPTj10aGlzLm5vZGVGcm9tSlNPTi5iaW5kKHRoaXMpLHRoaXMubWFya0Zyb21KU09OPXRoaXMubWFya0Zyb21KU09OLmJpbmQodGhpcyksdGhpcy50b3BOb2RlVHlwZT10aGlzLm5vZGVzW3RoaXMuc3BlYy50b3BOb2RlfHwiZG9jIl0sdGhpcy5jYWNoZWQ9T2JqZWN0LmNyZWF0ZShudWxsKSx0aGlzLmNhY2hlZC53cmFwcGluZ3M9T2JqZWN0LmNyZWF0ZShudWxsKX07ZnVuY3Rpb24gbHQodCxlKXtmb3IodmFyIG49W10scj0wO3I8ZS5sZW5ndGg7cisrKXt2YXIgbz1lW3JdLGk9dC5tYXJrc1tvXSxzPWk7aWYoaSluLnB1c2goaSk7ZWxzZSBmb3IodmFyIGEgaW4gdC5tYXJrcyl7dmFyIGM9dC5tYXJrc1thXTsoIl8iPT1vfHxjLnNwZWMuZ3JvdXAmJmMuc3BlYy5ncm91cC5zcGxpdCgiICIpLmluZGV4T2Yobyk+LTEpJiZuLnB1c2gocz1jKX1pZighcyl0aHJvdyBuZXcgU3ludGF4RXJyb3IoIlVua25vd24gbWFyayB0eXBlOiAnIitlW3JdKyInIil9cmV0dXJuIG59dXQucHJvdG90eXBlLm5vZGU9ZnVuY3Rpb24odCxlLG4scil7aWYoInN0cmluZyI9PXR5cGVvZiB0KXQ9dGhpcy5ub2RlVHlwZSh0KTtlbHNle2lmKCEodCBpbnN0YW5jZW9mIG90KSl0aHJvdyBuZXcgUmFuZ2VFcnJvcigiSW52YWxpZCBub2RlIHR5cGU6ICIrdCk7aWYodC5zY2hlbWEhPXRoaXMpdGhyb3cgbmV3IFJhbmdlRXJyb3IoIk5vZGUgdHlwZSBmcm9tIGRpZmZlcmVudCBzY2hlbWEgdXNlZCAoIit0Lm5hbWUrIikiKX1yZXR1cm4gdC5jcmVhdGVDaGVja2VkKGUsbixyKX0sdXQucHJvdG90eXBlLnRleHQ9ZnVuY3Rpb24odCxlKXt2YXIgbj10aGlzLm5vZGVzLnRleHQ7cmV0dXJuIG5ldyBfKG4sbi5kZWZhdWx0QXR0cnMsdCxoLnNldEZyb20oZSkpfSx1dC5wcm90b3R5cGUubWFyaz1mdW5jdGlvbih0LGUpe3JldHVybiJzdHJpbmciPT10eXBlb2YgdCYmKHQ9dGhpcy5tYXJrc1t0XSksdC5jcmVhdGUoZSl9LHV0LnByb3RvdHlwZS5ub2RlRnJvbUpTT049ZnVuY3Rpb24odCl7cmV0dXJuIEkuZnJvbUpTT04odGhpcyx0KX0sdXQucHJvdG90eXBlLm1hcmtGcm9tSlNPTj1mdW5jdGlvbih0KXtyZXR1cm4gaC5mcm9tSlNPTih0aGlzLHQpfSx1dC5wcm90b3R5cGUubm9kZVR5cGU9ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5ub2Rlc1t0XTtpZighZSl0aHJvdyBuZXcgUmFuZ2VFcnJvcigiVW5rbm93biBub2RlIHR5cGU6ICIrdCk7cmV0dXJuIGV9O3ZhciBodD1mdW5jdGlvbih0LGUpe3ZhciBuPXRoaXM7dGhpcy5zY2hlbWE9dCx0aGlzLnJ1bGVzPWUsdGhpcy50YWdzPVtdLHRoaXMuc3R5bGVzPVtdLGUuZm9yRWFjaCgoZnVuY3Rpb24odCl7dC50YWc/bi50YWdzLnB1c2godCk6dC5zdHlsZSYmbi5zdHlsZXMucHVzaCh0KX0pKX07aHQucHJvdG90eXBlLnBhcnNlPWZ1bmN0aW9uKHQsZSl7dm9pZCAwPT09ZSYmKGU9e30pO3ZhciBuPW5ldyBidCh0aGlzLGUsITEpO3JldHVybiBuLmFkZEFsbCh0LG51bGwsZS5mcm9tLGUudG8pLG4uZmluaXNoKCl9LGh0LnByb3RvdHlwZS5wYXJzZVNsaWNlPWZ1bmN0aW9uKHQsZSl7dm9pZCAwPT09ZSYmKGU9e30pO3ZhciBuPW5ldyBidCh0aGlzLGUsITApO3JldHVybiBuLmFkZEFsbCh0LG51bGwsZS5mcm9tLGUudG8pLHAubWF4T3BlbihuLmZpbmlzaCgpKX0saHQucHJvdG90eXBlLm1hdGNoVGFnPWZ1bmN0aW9uKHQsZSl7Zm9yKHZhciBuPTA7bjx0aGlzLnRhZ3MubGVuZ3RoO24rKyl7dmFyIHI9dGhpcy50YWdzW25dO2lmKFN0KHQsci50YWcpJiYodm9pZCAwPT09ci5uYW1lc3BhY2V8fHQubmFtZXNwYWNlVVJJPT1yLm5hbWVzcGFjZSkmJighci5jb250ZXh0fHxlLm1hdGNoZXNDb250ZXh0KHIuY29udGV4dCkpKXtpZihyLmdldEF0dHJzKXt2YXIgbz1yLmdldEF0dHJzKHQpO2lmKCExPT09byljb250aW51ZTtyLmF0dHJzPW99cmV0dXJuIHJ9fX0saHQucHJvdG90eXBlLm1hdGNoU3R5bGU9ZnVuY3Rpb24odCxlLG4pe2Zvcih2YXIgcj0wO3I8dGhpcy5zdHlsZXMubGVuZ3RoO3IrKyl7dmFyIG89dGhpcy5zdHlsZXNbcl07aWYoISgwIT1vLnN0eWxlLmluZGV4T2YodCl8fG8uY29udGV4dCYmIW4ubWF0Y2hlc0NvbnRleHQoby5jb250ZXh0KXx8by5zdHlsZS5sZW5ndGg+dC5sZW5ndGgmJig2MSE9by5zdHlsZS5jaGFyQ29kZUF0KHQubGVuZ3RoKXx8by5zdHlsZS5zbGljZSh0Lmxlbmd0aCsxKSE9ZSkpKXtpZihvLmdldEF0dHJzKXt2YXIgaT1vLmdldEF0dHJzKGUpO2lmKCExPT09aSljb250aW51ZTtvLmF0dHJzPWl9cmV0dXJuIG99fX0saHQuc2NoZW1hUnVsZXM9ZnVuY3Rpb24odCl7dmFyIGU9W107ZnVuY3Rpb24gbih0KXtmb3IodmFyIG49bnVsbD09dC5wcmlvcml0eT81MDp0LnByaW9yaXR5LHI9MDtyPGUubGVuZ3RoO3IrKyl7dmFyIG89ZVtyXSxpPW51bGw9PW8ucHJpb3JpdHk/NTA6by5wcmlvcml0eTtpZihpPG4pYnJlYWt9ZS5zcGxpY2UociwwLHQpfXZhciByPWZ1bmN0aW9uKGUpe3ZhciByPXQubWFya3NbZV0uc3BlYy5wYXJzZURPTTtyJiZyLmZvckVhY2goKGZ1bmN0aW9uKHQpe24odD1PdCh0KSksdC5tYXJrPWV9KSl9O2Zvcih2YXIgbyBpbiB0Lm1hcmtzKXIobyk7dmFyIGk9ZnVuY3Rpb24oZSl7dmFyIHI9dC5ub2Rlc1tzXS5zcGVjLnBhcnNlRE9NO3ImJnIuZm9yRWFjaCgoZnVuY3Rpb24odCl7bih0PU90KHQpKSx0Lm5vZGU9c30pKX07Zm9yKHZhciBzIGluIHQubm9kZXMpaSgpO3JldHVybiBlfSxodC5mcm9tU2NoZW1hPWZ1bmN0aW9uKHQpe3JldHVybiB0LmNhY2hlZC5kb21QYXJzZXJ8fCh0LmNhY2hlZC5kb21QYXJzZXI9bmV3IGh0KHQsaHQuc2NoZW1hUnVsZXModCkpKX07dmFyIGZ0PXthZGRyZXNzOiEwLGFydGljbGU6ITAsYXNpZGU6ITAsYmxvY2txdW90ZTohMCxjYW52YXM6ITAsZGQ6ITAsZGl2OiEwLGRsOiEwLGZpZWxkc2V0OiEwLGZpZ2NhcHRpb246ITAsZmlndXJlOiEwLGZvb3RlcjohMCxmb3JtOiEwLGgxOiEwLGgyOiEwLGgzOiEwLGg0OiEwLGg1OiEwLGg2OiEwLGhlYWRlcjohMCxoZ3JvdXA6ITAsaHI6ITAsbGk6ITAsbm9zY3JpcHQ6ITAsb2w6ITAsb3V0cHV0OiEwLHA6ITAscHJlOiEwLHNlY3Rpb246ITAsdGFibGU6ITAsdGZvb3Q6ITAsdWw6ITB9LHB0PXtoZWFkOiEwLG5vc2NyaXB0OiEwLG9iamVjdDohMCxzY3JpcHQ6ITAsc3R5bGU6ITAsdGl0bGU6ITB9LGR0PXtvbDohMCx1bDohMH0sdnQ9MSxtdD0yLGd0PTQ7ZnVuY3Rpb24geXQodCl7cmV0dXJuKHQ/dnQ6MCl8KCJmdWxsIj09PXQ/bXQ6MCl9dmFyIHd0PWZ1bmN0aW9uKHQsZSxuLHIsbyxpLHMpe3RoaXMudHlwZT10LHRoaXMuYXR0cnM9ZSx0aGlzLnNvbGlkPW8sdGhpcy5tYXRjaD1pfHwocyZndD9udWxsOnQuY29udGVudE1hdGNoKSx0aGlzLm9wdGlvbnM9cyx0aGlzLmNvbnRlbnQ9W10sdGhpcy5tYXJrcz1uLHRoaXMuYWN0aXZlTWFya3M9aC5ub25lLHRoaXMucGVuZGluZ01hcmtzPXJ9O3d0LnByb3RvdHlwZS5maW5kV3JhcHBpbmc9ZnVuY3Rpb24odCl7aWYoIXRoaXMubWF0Y2gpe2lmKCF0aGlzLnR5cGUpcmV0dXJuW107dmFyIGU9dGhpcy50eXBlLmNvbnRlbnRNYXRjaC5maWxsQmVmb3JlKHMuZnJvbSh0KSk7aWYoIWUpe3ZhciBuLHI9dGhpcy50eXBlLmNvbnRlbnRNYXRjaDtyZXR1cm4obj1yLmZpbmRXcmFwcGluZyh0LnR5cGUpKT8odGhpcy5tYXRjaD1yLG4pOm51bGx9dGhpcy5tYXRjaD10aGlzLnR5cGUuY29udGVudE1hdGNoLm1hdGNoRnJhZ21lbnQoZSl9cmV0dXJuIHRoaXMubWF0Y2guZmluZFdyYXBwaW5nKHQudHlwZSl9LHd0LnByb3RvdHlwZS5maW5pc2g9ZnVuY3Rpb24odCl7aWYoISh0aGlzLm9wdGlvbnMmdnQpKXt2YXIgZSxuPXRoaXMuY29udGVudFt0aGlzLmNvbnRlbnQubGVuZ3RoLTFdO24mJm4uaXNUZXh0JiYoZT0vWyBcdFxyXG5cdTAwMGNdKyQvLmV4ZWMobi50ZXh0KSkmJihuLnRleHQubGVuZ3RoPT1lWzBdLmxlbmd0aD90aGlzLmNvbnRlbnQucG9wKCk6dGhpcy5jb250ZW50W3RoaXMuY29udGVudC5sZW5ndGgtMV09bi53aXRoVGV4dChuLnRleHQuc2xpY2UoMCxuLnRleHQubGVuZ3RoLWVbMF0ubGVuZ3RoKSkpfXZhciByPXMuZnJvbSh0aGlzLmNvbnRlbnQpO3JldHVybiF0JiZ0aGlzLm1hdGNoJiYocj1yLmFwcGVuZCh0aGlzLm1hdGNoLmZpbGxCZWZvcmUocy5lbXB0eSwhMCkpKSx0aGlzLnR5cGU/dGhpcy50eXBlLmNyZWF0ZSh0aGlzLmF0dHJzLHIsdGhpcy5tYXJrcyk6cn0sd3QucHJvdG90eXBlLmFwcGx5UGVuZGluZz1mdW5jdGlvbih0KXtmb3IodmFyIGU9MCxuPXRoaXMucGVuZGluZ01hcmtzO2U8bi5sZW5ndGg7ZSsrKXt2YXIgcj1uW2VdOyh0aGlzLnR5cGU/dGhpcy50eXBlLmFsbG93c01hcmtUeXBlKHIudHlwZSk6TXQoci50eXBlLHQpKSYmIXIuaXNJblNldCh0aGlzLmFjdGl2ZU1hcmtzKSYmKHRoaXMuYWN0aXZlTWFya3M9ci5hZGRUb1NldCh0aGlzLmFjdGl2ZU1hcmtzKSx0aGlzLnBlbmRpbmdNYXJrcz1yLnJlbW92ZUZyb21TZXQodGhpcy5wZW5kaW5nTWFya3MpKX19O3ZhciBidD1mdW5jdGlvbih0LGUsbil7dGhpcy5wYXJzZXI9dCx0aGlzLm9wdGlvbnM9ZSx0aGlzLmlzT3Blbj1uO3ZhciByLG89ZS50b3BOb2RlLGk9eXQoZS5wcmVzZXJ2ZVdoaXRlc3BhY2UpfChuP2d0OjApO3I9bz9uZXcgd3Qoby50eXBlLG8uYXR0cnMsaC5ub25lLGgubm9uZSwhMCxlLnRvcE1hdGNofHxvLnR5cGUuY29udGVudE1hdGNoLGkpOm5ldyB3dChuP251bGw6dC5zY2hlbWEudG9wTm9kZVR5cGUsbnVsbCxoLm5vbmUsaC5ub25lLCEwLG51bGwsaSksdGhpcy5ub2Rlcz1bcl0sdGhpcy5vcGVuPTAsdGhpcy5maW5kPWUuZmluZFBvc2l0aW9ucyx0aGlzLm5lZWRzQmxvY2s9ITF9LHh0PXt0b3A6e2NvbmZpZ3VyYWJsZTohMH0sY3VycmVudFBvczp7Y29uZmlndXJhYmxlOiEwfX07ZnVuY3Rpb24ga3QodCl7Zm9yKHZhciBlPXQuZmlyc3RDaGlsZCxuPW51bGw7ZTtlPWUubmV4dFNpYmxpbmcpe3ZhciByPTE9PWUubm9kZVR5cGU/ZS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpOm51bGw7ciYmZHQuaGFzT3duUHJvcGVydHkocikmJm4/KG4uYXBwZW5kQ2hpbGQoZSksZT1uKToibGkiPT1yP249ZTpyJiYobj1udWxsKX19ZnVuY3Rpb24gU3QodCxlKXtyZXR1cm4odC5tYXRjaGVzfHx0Lm1zTWF0Y2hlc1NlbGVjdG9yfHx0LndlYmtpdE1hdGNoZXNTZWxlY3Rvcnx8dC5tb3pNYXRjaGVzU2VsZWN0b3IpLmNhbGwodCxlKX1mdW5jdGlvbiBDdCh0KXt2YXIgZSxuPS9ccyooW1x3LV0rKVxzKjpccyooW147XSspL2cscj1bXTt3aGlsZShlPW4uZXhlYyh0KSlyLnB1c2goZVsxXSxlWzJdLnRyaW0oKSk7cmV0dXJuIHJ9ZnVuY3Rpb24gT3QodCl7dmFyIGU9e307Zm9yKHZhciBuIGluIHQpZVtuXT10W25dO3JldHVybiBlfWZ1bmN0aW9uIE10KHQsZSl7dmFyIG49ZS5zY2hlbWEubm9kZXMscj1mdW5jdGlvbihyKXt2YXIgbz1uW3JdO2lmKG8uYWxsb3dzTWFya1R5cGUodCkpe3ZhciBpPVtdLHM9ZnVuY3Rpb24odCl7aS5wdXNoKHQpO2Zvcih2YXIgbj0wO248dC5lZGdlQ291bnQ7bisrKXt2YXIgcj10LmVkZ2Uobiksbz1yLnR5cGUsYT1yLm5leHQ7aWYobz09ZSlyZXR1cm4hMDtpZihpLmluZGV4T2YoYSk8MCYmcyhhKSlyZXR1cm4hMH19O3JldHVybiBzKG8uY29udGVudE1hdGNoKT97djohMH06dm9pZCAwfX07Zm9yKHZhciBvIGluIG4pe3ZhciBpPXIobyk7aWYoaSlyZXR1cm4gaS52fX14dC50b3AuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubm9kZXNbdGhpcy5vcGVuXX0sYnQucHJvdG90eXBlLmFkZERPTT1mdW5jdGlvbih0KXtpZigzPT10Lm5vZGVUeXBlKXRoaXMuYWRkVGV4dE5vZGUodCk7ZWxzZSBpZigxPT10Lm5vZGVUeXBlKXt2YXIgZT10LmdldEF0dHJpYnV0ZSgic3R5bGUiKSxuPWU/dGhpcy5yZWFkU3R5bGVzKEN0KGUpKTpudWxsLHI9dGhpcy50b3A7aWYobnVsbCE9bilmb3IodmFyIG89MDtvPG4ubGVuZ3RoO28rKyl0aGlzLmFkZFBlbmRpbmdNYXJrKG5bb10pO2lmKHRoaXMuYWRkRWxlbWVudCh0KSxudWxsIT1uKWZvcih2YXIgaT0wO2k8bi5sZW5ndGg7aSsrKXRoaXMucmVtb3ZlUGVuZGluZ01hcmsobltpXSxyKX19LGJ0LnByb3RvdHlwZS5hZGRUZXh0Tm9kZT1mdW5jdGlvbih0KXt2YXIgZT10Lm5vZGVWYWx1ZSxuPXRoaXMudG9wO2lmKChuLnR5cGU/bi50eXBlLmlubGluZUNvbnRlbnQ6bi5jb250ZW50Lmxlbmd0aCYmbi5jb250ZW50WzBdLmlzSW5saW5lKXx8L1teIFx0XHJcblx1MDAwY10vLnRlc3QoZSkpe2lmKG4ub3B0aW9ucyZ2dCluLm9wdGlvbnMmbXR8fChlPWUucmVwbGFjZSgvXHI/XG58XHIvZywiICIpKTtlbHNlIGlmKGU9ZS5yZXBsYWNlKC9bIFx0XHJcblx1MDAwY10rL2csIiAiKSwvXlsgXHRcclxuXHUwMDBjXS8udGVzdChlKSYmdGhpcy5vcGVuPT10aGlzLm5vZGVzLmxlbmd0aC0xKXt2YXIgcj1uLmNvbnRlbnRbbi5jb250ZW50Lmxlbmd0aC0xXSxvPXQucHJldmlvdXNTaWJsaW5nOyghcnx8byYmIkJSIj09by5ub2RlTmFtZXx8ci5pc1RleHQmJi9bIFx0XHJcblx1MDAwY10kLy50ZXN0KHIudGV4dCkpJiYoZT1lLnNsaWNlKDEpKX1lJiZ0aGlzLmluc2VydE5vZGUodGhpcy5wYXJzZXIuc2NoZW1hLnRleHQoZSkpLHRoaXMuZmluZEluVGV4dCh0KX1lbHNlIHRoaXMuZmluZEluc2lkZSh0KX0sYnQucHJvdG90eXBlLmFkZEVsZW1lbnQ9ZnVuY3Rpb24odCl7dmFyIGU9dC5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpO2R0Lmhhc093blByb3BlcnR5KGUpJiZrdCh0KTt2YXIgbj10aGlzLm9wdGlvbnMucnVsZUZyb21Ob2RlJiZ0aGlzLm9wdGlvbnMucnVsZUZyb21Ob2RlKHQpfHx0aGlzLnBhcnNlci5tYXRjaFRhZyh0LHRoaXMpO2lmKG4/bi5pZ25vcmU6cHQuaGFzT3duUHJvcGVydHkoZSkpdGhpcy5maW5kSW5zaWRlKHQpO2Vsc2UgaWYoIW58fG4uc2tpcCl7biYmbi5za2lwLm5vZGVUeXBlJiYodD1uLnNraXApO3ZhciByLG89dGhpcy50b3AsaT10aGlzLm5lZWRzQmxvY2s7aWYoZnQuaGFzT3duUHJvcGVydHkoZSkpcj0hMCxvLnR5cGV8fCh0aGlzLm5lZWRzQmxvY2s9ITApO2Vsc2UgaWYoIXQuZmlyc3RDaGlsZClyZXR1cm4gdm9pZCB0aGlzLmxlYWZGYWxsYmFjayh0KTt0aGlzLmFkZEFsbCh0KSxyJiZ0aGlzLnN5bmMobyksdGhpcy5uZWVkc0Jsb2NrPWl9ZWxzZSB0aGlzLmFkZEVsZW1lbnRCeVJ1bGUodCxuKX0sYnQucHJvdG90eXBlLmxlYWZGYWxsYmFjaz1mdW5jdGlvbih0KXsiQlIiPT10Lm5vZGVOYW1lJiZ0aGlzLnRvcC50eXBlJiZ0aGlzLnRvcC50eXBlLmlubGluZUNvbnRlbnQmJnRoaXMuYWRkVGV4dE5vZGUodC5vd25lckRvY3VtZW50LmNyZWF0ZVRleHROb2RlKCJcbiIpKX0sYnQucHJvdG90eXBlLnJlYWRTdHlsZXM9ZnVuY3Rpb24odCl7Zm9yKHZhciBlPWgubm9uZSxuPTA7bjx0Lmxlbmd0aDtuKz0yKXt2YXIgcj10aGlzLnBhcnNlci5tYXRjaFN0eWxlKHRbbl0sdFtuKzFdLHRoaXMpO2lmKHIpe2lmKHIuaWdub3JlKXJldHVybiBudWxsO2U9dGhpcy5wYXJzZXIuc2NoZW1hLm1hcmtzW3IubWFya10uY3JlYXRlKHIuYXR0cnMpLmFkZFRvU2V0KGUpfX1yZXR1cm4gZX0sYnQucHJvdG90eXBlLmFkZEVsZW1lbnRCeVJ1bGU9ZnVuY3Rpb24odCxlKXt2YXIgbixyLG8saSxzPXRoaXM7ZS5ub2RlPyhyPXRoaXMucGFyc2VyLnNjaGVtYS5ub2Rlc1tlLm5vZGVdLHIuaXNMZWFmP3RoaXMuaW5zZXJ0Tm9kZShyLmNyZWF0ZShlLmF0dHJzKSl8fHRoaXMubGVhZkZhbGxiYWNrKHQpOm49dGhpcy5lbnRlcihyLGUuYXR0cnMsZS5wcmVzZXJ2ZVdoaXRlc3BhY2UpKToobz10aGlzLnBhcnNlci5zY2hlbWEubWFya3NbZS5tYXJrXSxpPW8uY3JlYXRlKGUuYXR0cnMpLHRoaXMuYWRkUGVuZGluZ01hcmsoaSkpO3ZhciBhPXRoaXMudG9wO2lmKHImJnIuaXNMZWFmKXRoaXMuZmluZEluc2lkZSh0KTtlbHNlIGlmKGUuZ2V0Q29udGVudCl0aGlzLmZpbmRJbnNpZGUodCksZS5nZXRDb250ZW50KHQsdGhpcy5wYXJzZXIuc2NoZW1hKS5mb3JFYWNoKChmdW5jdGlvbih0KXtyZXR1cm4gcy5pbnNlcnROb2RlKHQpfSkpO2Vsc2V7dmFyIGM9ZS5jb250ZW50RWxlbWVudDsic3RyaW5nIj09dHlwZW9mIGM/Yz10LnF1ZXJ5U2VsZWN0b3IoYyk6ImZ1bmN0aW9uIj09dHlwZW9mIGMmJihjPWModCkpLGN8fChjPXQpLHRoaXMuZmluZEFyb3VuZCh0LGMsITApLHRoaXMuYWRkQWxsKGMsbil9biYmKHRoaXMuc3luYyhhKSx0aGlzLm9wZW4tLSksaSYmdGhpcy5yZW1vdmVQZW5kaW5nTWFyayhpLGEpfSxidC5wcm90b3R5cGUuYWRkQWxsPWZ1bmN0aW9uKHQsZSxuLHIpe2Zvcih2YXIgbz1ufHwwLGk9bj90LmNoaWxkTm9kZXNbbl06dC5maXJzdENoaWxkLHM9bnVsbD09cj9udWxsOnQuY2hpbGROb2Rlc1tyXTtpIT1zO2k9aS5uZXh0U2libGluZywrK28pdGhpcy5maW5kQXRQb2ludCh0LG8pLHRoaXMuYWRkRE9NKGkpLGUmJmZ0Lmhhc093blByb3BlcnR5KGkubm9kZU5hbWUudG9Mb3dlckNhc2UoKSkmJnRoaXMuc3luYyhlKTt0aGlzLmZpbmRBdFBvaW50KHQsbyl9LGJ0LnByb3RvdHlwZS5maW5kUGxhY2U9ZnVuY3Rpb24odCl7Zm9yKHZhciBlLG4scj10aGlzLm9wZW47cj49MDtyLS0pe3ZhciBvPXRoaXMubm9kZXNbcl0saT1vLmZpbmRXcmFwcGluZyh0KTtpZihpJiYoIWV8fGUubGVuZ3RoPmkubGVuZ3RoKSYmKGU9aSxuPW8sIWkubGVuZ3RoKSlicmVhaztpZihvLnNvbGlkKWJyZWFrfWlmKCFlKXJldHVybiExO3RoaXMuc3luYyhuKTtmb3IodmFyIHM9MDtzPGUubGVuZ3RoO3MrKyl0aGlzLmVudGVySW5uZXIoZVtzXSxudWxsLCExKTtyZXR1cm4hMH0sYnQucHJvdG90eXBlLmluc2VydE5vZGU9ZnVuY3Rpb24odCl7aWYodC5pc0lubGluZSYmdGhpcy5uZWVkc0Jsb2NrJiYhdGhpcy50b3AudHlwZSl7dmFyIGU9dGhpcy50ZXh0YmxvY2tGcm9tQ29udGV4dCgpO2UmJnRoaXMuZW50ZXJJbm5lcihlKX1pZih0aGlzLmZpbmRQbGFjZSh0KSl7dGhpcy5jbG9zZUV4dHJhKCk7dmFyIG49dGhpcy50b3A7bi5hcHBseVBlbmRpbmcodC50eXBlKSxuLm1hdGNoJiYobi5tYXRjaD1uLm1hdGNoLm1hdGNoVHlwZSh0LnR5cGUpKTtmb3IodmFyIHI9bi5hY3RpdmVNYXJrcyxvPTA7bzx0Lm1hcmtzLmxlbmd0aDtvKyspbi50eXBlJiYhbi50eXBlLmFsbG93c01hcmtUeXBlKHQubWFya3Nbb10udHlwZSl8fChyPXQubWFya3Nbb10uYWRkVG9TZXQocikpO3JldHVybiBuLmNvbnRlbnQucHVzaCh0Lm1hcmsocikpLCEwfXJldHVybiExfSxidC5wcm90b3R5cGUuZW50ZXI9ZnVuY3Rpb24odCxlLG4pe3ZhciByPXRoaXMuZmluZFBsYWNlKHQuY3JlYXRlKGUpKTtyZXR1cm4gciYmdGhpcy5lbnRlcklubmVyKHQsZSwhMCxuKSxyfSxidC5wcm90b3R5cGUuZW50ZXJJbm5lcj1mdW5jdGlvbih0LGUsbixyKXt0aGlzLmNsb3NlRXh0cmEoKTt2YXIgbz10aGlzLnRvcDtvLmFwcGx5UGVuZGluZyh0KSxvLm1hdGNoPW8ubWF0Y2gmJm8ubWF0Y2gubWF0Y2hUeXBlKHQsZSk7dmFyIGk9bnVsbD09cj9vLm9wdGlvbnMmfmd0Onl0KHIpO28ub3B0aW9ucyZndCYmMD09by5jb250ZW50Lmxlbmd0aCYmKGl8PWd0KSx0aGlzLm5vZGVzLnB1c2gobmV3IHd0KHQsZSxvLmFjdGl2ZU1hcmtzLG8ucGVuZGluZ01hcmtzLG4sbnVsbCxpKSksdGhpcy5vcGVuKyt9LGJ0LnByb3RvdHlwZS5jbG9zZUV4dHJhPWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMubm9kZXMubGVuZ3RoLTE7aWYoZT50aGlzLm9wZW4pe2Zvcig7ZT50aGlzLm9wZW47ZS0tKXRoaXMubm9kZXNbZS0xXS5jb250ZW50LnB1c2godGhpcy5ub2Rlc1tlXS5maW5pc2godCkpO3RoaXMubm9kZXMubGVuZ3RoPXRoaXMub3BlbisxfX0sYnQucHJvdG90eXBlLmZpbmlzaD1mdW5jdGlvbigpe3JldHVybiB0aGlzLm9wZW49MCx0aGlzLmNsb3NlRXh0cmEodGhpcy5pc09wZW4pLHRoaXMubm9kZXNbMF0uZmluaXNoKHRoaXMuaXNPcGVufHx0aGlzLm9wdGlvbnMudG9wT3Blbil9LGJ0LnByb3RvdHlwZS5zeW5jPWZ1bmN0aW9uKHQpe2Zvcih2YXIgZT10aGlzLm9wZW47ZT49MDtlLS0paWYodGhpcy5ub2Rlc1tlXT09dClyZXR1cm4gdm9pZCh0aGlzLm9wZW49ZSl9LHh0LmN1cnJlbnRQb3MuZ2V0PWZ1bmN0aW9uKCl7dGhpcy5jbG9zZUV4dHJhKCk7Zm9yKHZhciB0PTAsZT10aGlzLm9wZW47ZT49MDtlLS0pe2Zvcih2YXIgbj10aGlzLm5vZGVzW2VdLmNvbnRlbnQscj1uLmxlbmd0aC0xO3I+PTA7ci0tKXQrPW5bcl0ubm9kZVNpemU7ZSYmdCsrfXJldHVybiB0fSxidC5wcm90b3R5cGUuZmluZEF0UG9pbnQ9ZnVuY3Rpb24odCxlKXtpZih0aGlzLmZpbmQpZm9yKHZhciBuPTA7bjx0aGlzLmZpbmQubGVuZ3RoO24rKyl0aGlzLmZpbmRbbl0ubm9kZT09dCYmdGhpcy5maW5kW25dLm9mZnNldD09ZSYmKHRoaXMuZmluZFtuXS5wb3M9dGhpcy5jdXJyZW50UG9zKX0sYnQucHJvdG90eXBlLmZpbmRJbnNpZGU9ZnVuY3Rpb24odCl7aWYodGhpcy5maW5kKWZvcih2YXIgZT0wO2U8dGhpcy5maW5kLmxlbmd0aDtlKyspbnVsbD09dGhpcy5maW5kW2VdLnBvcyYmMT09dC5ub2RlVHlwZSYmdC5jb250YWlucyh0aGlzLmZpbmRbZV0ubm9kZSkmJih0aGlzLmZpbmRbZV0ucG9zPXRoaXMuY3VycmVudFBvcyl9LGJ0LnByb3RvdHlwZS5maW5kQXJvdW5kPWZ1bmN0aW9uKHQsZSxuKXtpZih0IT1lJiZ0aGlzLmZpbmQpZm9yKHZhciByPTA7cjx0aGlzLmZpbmQubGVuZ3RoO3IrKylpZihudWxsPT10aGlzLmZpbmRbcl0ucG9zJiYxPT10Lm5vZGVUeXBlJiZ0LmNvbnRhaW5zKHRoaXMuZmluZFtyXS5ub2RlKSl7dmFyIG89ZS5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbih0aGlzLmZpbmRbcl0ubm9kZSk7byYobj8yOjQpJiYodGhpcy5maW5kW3JdLnBvcz10aGlzLmN1cnJlbnRQb3MpfX0sYnQucHJvdG90eXBlLmZpbmRJblRleHQ9ZnVuY3Rpb24odCl7aWYodGhpcy5maW5kKWZvcih2YXIgZT0wO2U8dGhpcy5maW5kLmxlbmd0aDtlKyspdGhpcy5maW5kW2VdLm5vZGU9PXQmJih0aGlzLmZpbmRbZV0ucG9zPXRoaXMuY3VycmVudFBvcy0odC5ub2RlVmFsdWUubGVuZ3RoLXRoaXMuZmluZFtlXS5vZmZzZXQpKX0sYnQucHJvdG90eXBlLm1hdGNoZXNDb250ZXh0PWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXM7aWYodC5pbmRleE9mKCJ8Iik+LTEpcmV0dXJuIHQuc3BsaXQoL1xzKlx8XHMqLykuc29tZSh0aGlzLm1hdGNoZXNDb250ZXh0LHRoaXMpO3ZhciBuPXQuc3BsaXQoIi8iKSxyPXRoaXMub3B0aW9ucy5jb250ZXh0LG89IXRoaXMuaXNPcGVuJiYoIXJ8fHIucGFyZW50LnR5cGU9PXRoaXMubm9kZXNbMF0udHlwZSksaT0tKHI/ci5kZXB0aCsxOjApKyhvPzA6MSkscz1mdW5jdGlvbih0LGEpe2Zvcig7dD49MDt0LS0pe3ZhciBjPW5bdF07aWYoIiI9PWMpe2lmKHQ9PW4ubGVuZ3RoLTF8fDA9PXQpY29udGludWU7Zm9yKDthPj1pO2EtLSlpZihzKHQtMSxhKSlyZXR1cm4hMDtyZXR1cm4hMX12YXIgdT1hPjB8fDA9PWEmJm8/ZS5ub2Rlc1thXS50eXBlOnImJmE+PWk/ci5ub2RlKGEtaSkudHlwZTpudWxsO2lmKCF1fHx1Lm5hbWUhPWMmJi0xPT11Lmdyb3Vwcy5pbmRleE9mKGMpKXJldHVybiExO2EtLX1yZXR1cm4hMH07cmV0dXJuIHMobi5sZW5ndGgtMSx0aGlzLm9wZW4pfSxidC5wcm90b3R5cGUudGV4dGJsb2NrRnJvbUNvbnRleHQ9ZnVuY3Rpb24oKXt2YXIgdD10aGlzLm9wdGlvbnMuY29udGV4dDtpZih0KWZvcih2YXIgZT10LmRlcHRoO2U+PTA7ZS0tKXt2YXIgbj10Lm5vZGUoZSkuY29udGVudE1hdGNoQXQodC5pbmRleEFmdGVyKGUpKS5kZWZhdWx0VHlwZTtpZihuJiZuLmlzVGV4dGJsb2NrJiZuLmRlZmF1bHRBdHRycylyZXR1cm4gbn1mb3IodmFyIHIgaW4gdGhpcy5wYXJzZXIuc2NoZW1hLm5vZGVzKXt2YXIgbz10aGlzLnBhcnNlci5zY2hlbWEubm9kZXNbcl07aWYoby5pc1RleHRibG9jayYmby5kZWZhdWx0QXR0cnMpcmV0dXJuIG99fSxidC5wcm90b3R5cGUuYWRkUGVuZGluZ01hcms9ZnVuY3Rpb24odCl7dGhpcy50b3AucGVuZGluZ01hcmtzPXQuYWRkVG9TZXQodGhpcy50b3AucGVuZGluZ01hcmtzKX0sYnQucHJvdG90eXBlLnJlbW92ZVBlbmRpbmdNYXJrPWZ1bmN0aW9uKHQsZSl7Zm9yKHZhciBuPXRoaXMub3BlbjtuPj0wO24tLSl7dmFyIHI9dGhpcy5ub2Rlc1tuXSxvPXIucGVuZGluZ01hcmtzLmxhc3RJbmRleE9mKHQpO2lmKG8+LTE/ci5wZW5kaW5nTWFya3M9dC5yZW1vdmVGcm9tU2V0KHIucGVuZGluZ01hcmtzKTpyLmFjdGl2ZU1hcmtzPXQucmVtb3ZlRnJvbVNldChyLmFjdGl2ZU1hcmtzKSxyPT1lKWJyZWFrfX0sT2JqZWN0LmRlZmluZVByb3BlcnRpZXMoYnQucHJvdG90eXBlLHh0KTt2YXIgTnQ9ZnVuY3Rpb24odCxlKXt0aGlzLm5vZGVzPXR8fHt9LHRoaXMubWFya3M9ZXx8e319O2Z1bmN0aW9uIFR0KHQpe3ZhciBlPXt9O2Zvcih2YXIgbiBpbiB0KXt2YXIgcj10W25dLnNwZWMudG9ET007ciYmKGVbbl09cil9cmV0dXJuIGV9ZnVuY3Rpb24gQXQodCl7cmV0dXJuIHQuZG9jdW1lbnR8fHdpbmRvdy5kb2N1bWVudH1OdC5wcm90b3R5cGUuc2VyaWFsaXplRnJhZ21lbnQ9ZnVuY3Rpb24odCxlLG4pe3ZhciByPXRoaXM7dm9pZCAwPT09ZSYmKGU9e30pLG58fChuPUF0KGUpLmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKSk7dmFyIG89bixpPW51bGw7cmV0dXJuIHQuZm9yRWFjaCgoZnVuY3Rpb24odCl7aWYoaXx8dC5tYXJrcy5sZW5ndGgpe2l8fChpPVtdKTt2YXIgbj0wLHM9MDt3aGlsZShuPGkubGVuZ3RoJiZzPHQubWFya3MubGVuZ3RoKXt2YXIgYT10Lm1hcmtzW3NdO2lmKHIubWFya3NbYS50eXBlLm5hbWVdKXtpZighYS5lcShpW25dKXx8ITE9PT1hLnR5cGUuc3BlYy5zcGFubmluZylicmVhaztuKz0yLHMrK31lbHNlIHMrK313aGlsZShuPGkubGVuZ3RoKW89aS5wb3AoKSxpLnBvcCgpO3doaWxlKHM8dC5tYXJrcy5sZW5ndGgpe3ZhciBjPXQubWFya3NbcysrXSx1PXIuc2VyaWFsaXplTWFyayhjLHQuaXNJbmxpbmUsZSk7dSYmKGkucHVzaChjLG8pLG8uYXBwZW5kQ2hpbGQodS5kb20pLG89dS5jb250ZW50RE9NfHx1LmRvbSl9fW8uYXBwZW5kQ2hpbGQoci5zZXJpYWxpemVOb2RlKHQsZSkpfSkpLG59LE50LnByb3RvdHlwZS5zZXJpYWxpemVOb2RlPWZ1bmN0aW9uKHQsZSl7dm9pZCAwPT09ZSYmKGU9e30pO3ZhciBuPU50LnJlbmRlclNwZWMoQXQoZSksdGhpcy5ub2Rlc1t0LnR5cGUubmFtZV0odCkpLHI9bi5kb20sbz1uLmNvbnRlbnRET007aWYobyl7aWYodC5pc0xlYWYpdGhyb3cgbmV3IFJhbmdlRXJyb3IoIkNvbnRlbnQgaG9sZSBub3QgYWxsb3dlZCBpbiBhIGxlYWYgbm9kZSBzcGVjIik7ZS5vbkNvbnRlbnQ/ZS5vbkNvbnRlbnQodCxvLGUpOnRoaXMuc2VyaWFsaXplRnJhZ21lbnQodC5jb250ZW50LGUsbyl9cmV0dXJuIHJ9LE50LnByb3RvdHlwZS5zZXJpYWxpemVOb2RlQW5kTWFya3M9ZnVuY3Rpb24odCxlKXt2b2lkIDA9PT1lJiYoZT17fSk7Zm9yKHZhciBuPXRoaXMuc2VyaWFsaXplTm9kZSh0LGUpLHI9dC5tYXJrcy5sZW5ndGgtMTtyPj0wO3ItLSl7dmFyIG89dGhpcy5zZXJpYWxpemVNYXJrKHQubWFya3Nbcl0sdC5pc0lubGluZSxlKTtvJiYoKG8uY29udGVudERPTXx8by5kb20pLmFwcGVuZENoaWxkKG4pLG49by5kb20pfXJldHVybiBufSxOdC5wcm90b3R5cGUuc2VyaWFsaXplTWFyaz1mdW5jdGlvbih0LGUsbil7dm9pZCAwPT09biYmKG49e30pO3ZhciByPXRoaXMubWFya3NbdC50eXBlLm5hbWVdO3JldHVybiByJiZOdC5yZW5kZXJTcGVjKEF0KG4pLHIodCxlKSl9LE50LnJlbmRlclNwZWM9ZnVuY3Rpb24odCxlLG4pe2lmKHZvaWQgMD09PW4mJihuPW51bGwpLCJzdHJpbmciPT10eXBlb2YgZSlyZXR1cm57ZG9tOnQuY3JlYXRlVGV4dE5vZGUoZSl9O2lmKG51bGwhPWUubm9kZVR5cGUpcmV0dXJue2RvbTplfTt2YXIgcj1lWzBdLG89ci5pbmRleE9mKCIgIik7bz4wJiYobj1yLnNsaWNlKDAsbykscj1yLnNsaWNlKG8rMSkpO3ZhciBpPW51bGwscz1uP3QuY3JlYXRlRWxlbWVudE5TKG4scik6dC5jcmVhdGVFbGVtZW50KHIpLGE9ZVsxXSxjPTE7aWYoYSYmIm9iamVjdCI9PXR5cGVvZiBhJiZudWxsPT1hLm5vZGVUeXBlJiYhQXJyYXkuaXNBcnJheShhKSlmb3IodmFyIHUgaW4gYz0yLGEpaWYobnVsbCE9YVt1XSl7dmFyIGw9dS5pbmRleE9mKCIgIik7bD4wP3Muc2V0QXR0cmlidXRlTlModS5zbGljZSgwLGwpLHUuc2xpY2UobCsxKSxhW3VdKTpzLnNldEF0dHJpYnV0ZSh1LGFbdV0pfWZvcih2YXIgaD1jO2g8ZS5sZW5ndGg7aCsrKXt2YXIgZj1lW2hdO2lmKDA9PT1mKXtpZihoPGUubGVuZ3RoLTF8fGg+Yyl0aHJvdyBuZXcgUmFuZ2VFcnJvcigiQ29udGVudCBob2xlIG11c3QgYmUgdGhlIG9ubHkgY2hpbGQgb2YgaXRzIHBhcmVudCBub2RlIik7cmV0dXJue2RvbTpzLGNvbnRlbnRET006c319dmFyIHA9TnQucmVuZGVyU3BlYyh0LGYsbiksZD1wLmRvbSx2PXAuY29udGVudERPTTtpZihzLmFwcGVuZENoaWxkKGQpLHYpe2lmKGkpdGhyb3cgbmV3IFJhbmdlRXJyb3IoIk11bHRpcGxlIGNvbnRlbnQgaG9sZXMiKTtpPXZ9fXJldHVybntkb206cyxjb250ZW50RE9NOml9fSxOdC5mcm9tU2NoZW1hPWZ1bmN0aW9uKHQpe3JldHVybiB0LmNhY2hlZC5kb21TZXJpYWxpemVyfHwodC5jYWNoZWQuZG9tU2VyaWFsaXplcj1uZXcgTnQodGhpcy5ub2Rlc0Zyb21TY2hlbWEodCksdGhpcy5tYXJrc0Zyb21TY2hlbWEodCkpKX0sTnQubm9kZXNGcm9tU2NoZW1hPWZ1bmN0aW9uKHQpe3ZhciBlPVR0KHQubm9kZXMpO3JldHVybiBlLnRleHR8fChlLnRleHQ9ZnVuY3Rpb24odCl7cmV0dXJuIHQudGV4dH0pLGV9LE50Lm1hcmtzRnJvbVNjaGVtYT1mdW5jdGlvbih0KXtyZXR1cm4gVHQodC5tYXJrcyl9fSwiMWM3ZSI6ZnVuY3Rpb24odCxlLG4pe3ZhciByPW4oImI2MjIiKSxvPXIoIml0ZXJhdG9yIiksaT0hMTt0cnl7dmFyIHM9MCxhPXtuZXh0OmZ1bmN0aW9uKCl7cmV0dXJue2RvbmU6ISFzKyt9fSxyZXR1cm46ZnVuY3Rpb24oKXtpPSEwfX07YVtvXT1mdW5jdGlvbigpe3JldHVybiB0aGlzfSxBcnJheS5mcm9tKGEsKGZ1bmN0aW9uKCl7dGhyb3cgMn0pKX1jYXRjaChjKXt9dC5leHBvcnRzPWZ1bmN0aW9uKHQsZSl7aWYoIWUmJiFpKXJldHVybiExO3ZhciBuPSExO3RyeXt2YXIgcj17fTtyW29dPWZ1bmN0aW9uKCl7cmV0dXJue25leHQ6ZnVuY3Rpb24oKXtyZXR1cm57ZG9uZTpuPSEwfX19fSx0KHIpfWNhdGNoKGMpe31yZXR1cm4gbn19LCIxZDgwIjpmdW5jdGlvbih0LGUpe3QuZXhwb3J0cz1mdW5jdGlvbih0KXtpZih2b2lkIDA9PXQpdGhyb3cgVHlwZUVycm9yKCJDYW4ndCBjYWxsIG1ldGhvZCBvbiAiK3QpO3JldHVybiB0fX0sIjFkZGUiOmZ1bmN0aW9uKHQsZSxuKXt2YXIgcj1uKCJkMDM5Iiksbz1uKCJiNjIyIiksaT1uKCIyZDAwIikscz1vKCJzcGVjaWVzIik7dC5leHBvcnRzPWZ1bmN0aW9uKHQpe3JldHVybiBpPj01MXx8IXIoKGZ1bmN0aW9uKCl7dmFyIGU9W10sbj1lLmNvbnN0cnVjdG9yPXt9O3JldHVybiBuW3NdPWZ1bmN0aW9uKCl7cmV0dXJue2ZvbzoxfX0sMSE9PWVbdF0oQm9vbGVhbikuZm9vfSkpfX0sIjIzY2IiOmZ1bmN0aW9uKHQsZSxuKXt2YXIgcj1uKCJhNjkxIiksbz1NYXRoLm1heCxpPU1hdGgubWluO3QuZXhwb3J0cz1mdW5jdGlvbih0LGUpe3ZhciBuPXIodCk7cmV0dXJuIG48MD9vKG4rZSwwKTppKG4sZSl9fSwiMjNlNyI6ZnVuY3Rpb24odCxlLG4pe3ZhciByPW4oImRhODQiKSxvPW4oIjA2Y2YiKS5mLGk9bigiOTExMiIpLHM9bigiNmVlYiIpLGE9bigiY2U0ZSIpLGM9bigiZTg5MyIpLHU9bigiOTRjYSIpO3QuZXhwb3J0cz1mdW5jdGlvbih0LGUpe3ZhciBuLGwsaCxmLHAsZCx2PXQudGFyZ2V0LG09dC5nbG9iYWwsZz10LnN0YXQ7aWYobD1tP3I6Zz9yW3ZdfHxhKHYse30pOihyW3ZdfHx7fSkucHJvdG90eXBlLGwpZm9yKGggaW4gZSl7aWYocD1lW2hdLHQubm9UYXJnZXRHZXQ/KGQ9byhsLGgpLGY9ZCYmZC52YWx1ZSk6Zj1sW2hdLG49dShtP2g6disoZz8iLiI6IiMiKStoLHQuZm9yY2VkKSwhbiYmdm9pZCAwIT09Zil7aWYodHlwZW9mIHA9PT10eXBlb2YgZiljb250aW51ZTtjKHAsZil9KHQuc2hhbXx8ZiYmZi5zaGFtKSYmaShwLCJzaGFtIiwhMCkscyhsLGgscCx0KX19fSwiMjQxYyI6ZnVuY3Rpb24odCxlLG4pe3ZhciByPW4oImNhODQiKSxvPW4oIjc4MzkiKSxpPW8uY29uY2F0KCJsZW5ndGgiLCJwcm90b3R5cGUiKTtlLmY9T2JqZWN0LmdldE93blByb3BlcnR5TmFtZXN8fGZ1bmN0aW9uKHQpe3JldHVybiByKHQsaSl9fSwiMjVmMCI6ZnVuY3Rpb24odCxlLG4peyJ1c2Ugc3RyaWN0Ijt2YXIgcj1uKCI2ZWViIiksbz1uKCI4MjVhIiksaT1uKCJkMDM5Iikscz1uKCJhZDZkIiksYT0idG9TdHJpbmciLGM9UmVnRXhwLnByb3RvdHlwZSx1PWNbYV0sbD1pKChmdW5jdGlvbigpe3JldHVybiIvYS9iIiE9dS5jYWxsKHtzb3VyY2U6ImEiLGZsYWdzOiJiIn0pfSkpLGg9dS5uYW1lIT1hOyhsfHxoKSYmcihSZWdFeHAucHJvdG90eXBlLGEsKGZ1bmN0aW9uKCl7dmFyIHQ9byh0aGlzKSxlPVN0cmluZyh0LnNvdXJjZSksbj10LmZsYWdzLHI9U3RyaW5nKHZvaWQgMD09PW4mJnQgaW5zdGFuY2VvZiBSZWdFeHAmJiEoImZsYWdzImluIGMpP3MuY2FsbCh0KTpuKTtyZXR1cm4iLyIrZSsiLyIrcn0pLHt1bnNhZmU6ITB9KX0sIjJkMDAiOmZ1bmN0aW9uKHQsZSxuKXt2YXIgcixvLGk9bigiZGE4NCIpLHM9bigiMzQyZiIpLGE9aS5wcm9jZXNzLGM9YSYmYS52ZXJzaW9ucyx1PWMmJmMudjg7dT8ocj11LnNwbGl0KCIuIiksbz1yWzBdK3JbMV0pOnMmJihyPXMubWF0Y2goL0VkZ2VcLyhcZCspLyksKCFyfHxyWzFdPj03NCkmJihyPXMubWF0Y2goL0Nocm9tZVwvKFxkKykvKSxyJiYobz1yWzFdKSkpLHQuZXhwb3J0cz1vJiYrb30sIjJkMWIiOmZ1bmN0aW9uKHQsZSl7dC5leHBvcnRzPXtmdW5jdGlvbmFsOiEwLHJlbmRlcih0LGUpe2NvbnN0e19jOm4sX3Y6cixkYXRhOm8sY2hpbGRyZW46aT1bXX09ZSx7Y2xhc3M6cyxzdGF0aWNDbGFzczphLHN0eWxlOmMsc3RhdGljU3R5bGU6dSxhdHRyczpsPXt9LC4uLmh9PW87cmV0dXJuIG4oInN2ZyIse2NsYXNzOltzLGFdLHN0eWxlOltjLHVdLGF0dHJzOk9iamVjdC5hc3NpZ24oe3htbG5zOiJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIsdmlld0JveDoiMCAwIDI0IDI0In0sbCksLi4uaH0saS5jb25jYXQoW24oInBhdGgiLHthdHRyczp7ZDoiTTE4LjU1OSAzLjkzMmE0Ljk0MiA0Ljk0MiAwIDEwMCA5Ljg4MyA0LjYwOSA0LjYwOSAwIDAwMS4xMTUtLjE0MS4yNS4yNSAwIDAxLjI3Ni4zNjggNi44MyA2LjgzIDAgMDEtNS44NzggMy41MjMgMS4yNSAxLjI1IDAgMDAwIDIuNSA5LjcxIDkuNzEgMCAwMDkuNDI4LTkuOTVWOC44NzNhNC45NDcgNC45NDcgMCAwMC00Ljk0MS00Ljk0MXpNNi4yMzYgMy45MzJhNC45NDIgNC45NDIgMCAwMDAgOS44ODMgNC42IDQuNiAwIDAwMS4xMTUtLjE0MS4yNS4yNSAwIDAxLjI3Ny4zNjggNi44MyA2LjgzIDAgMDEtNS44NzggMy41MjMgMS4yNSAxLjI1IDAgMDAwIDIuNSA5LjcxMSA5LjcxMSAwIDAwOS40MjgtOS45NVY4Ljg3M2E0Ljk0NyA0Ljk0NyAwIDAwLTQuOTQyLTQuOTQxeiJ9fSldKSl9fX0sIjMwNGEiOmZ1bmN0aW9uKHQsZSxuKXsidXNlIHN0cmljdCI7bi5kKGUsImEiLChmdW5jdGlvbigpe3JldHVybiBodH0pKSxuLmQoZSwiYiIsKGZ1bmN0aW9uKCl7cmV0dXJuIE50fSkpLG4uZChlLCJjIiwoZnVuY3Rpb24oKXtyZXR1cm4gc30pKSxuLmQoZSwiZCIsKGZ1bmN0aW9uKCl7cmV0dXJuIGh9KSksbi5kKGUsImUiLChmdW5jdGlvbigpe3JldHVybiBjdH0pKSxuLmQoZSwiZiIsKGZ1bmN0aW9uKCl7cmV0dXJuIEl9KSksbi5kKGUsImciLChmdW5jdGlvbigpe3JldHVybiBSfSkpLG4uZChlLCJoIiwoZnVuY3Rpb24oKXtyZXR1cm4gZn0pKSxuLmQoZSwiaSIsKGZ1bmN0aW9uKCl7cmV0dXJuIHB9KSk7dmFyIHI9bigiODg0YyIpO2Z1bmN0aW9uIG8odCxlLG4pe2Zvcih2YXIgcj0wOztyKyspe2lmKHI9PXQuY2hpbGRDb3VudHx8cj09ZS5jaGlsZENvdW50KXJldHVybiB0LmNoaWxkQ291bnQ9PWUuY2hpbGRDb3VudD9udWxsOm47dmFyIGk9dC5jaGlsZChyKSxzPWUuY2hpbGQocik7aWYoaSE9cyl7aWYoIWkuc2FtZU1hcmt1cChzKSlyZXR1cm4gbjtpZihpLmlzVGV4dCYmaS50ZXh0IT1zLnRleHQpe2Zvcih2YXIgYT0wO2kudGV4dFthXT09cy50ZXh0W2FdO2ErKyluKys7cmV0dXJuIG59aWYoaS5jb250ZW50LnNpemV8fHMuY29udGVudC5zaXplKXt2YXIgYz1vKGkuY29udGVudCxzLmNvbnRlbnQsbisxKTtpZihudWxsIT1jKXJldHVybiBjfW4rPWkubm9kZVNpemV9ZWxzZSBuKz1pLm5vZGVTaXplfX1mdW5jdGlvbiBpKHQsZSxuLHIpe2Zvcih2YXIgbz10LmNoaWxkQ291bnQscz1lLmNoaWxkQ291bnQ7Oyl7aWYoMD09b3x8MD09cylyZXR1cm4gbz09cz9udWxsOnthOm4sYjpyfTt2YXIgYT10LmNoaWxkKC0tbyksYz1lLmNoaWxkKC0tcyksdT1hLm5vZGVTaXplO2lmKGEhPWMpe2lmKCFhLnNhbWVNYXJrdXAoYykpcmV0dXJue2E6bixiOnJ9O2lmKGEuaXNUZXh0JiZhLnRleHQhPWMudGV4dCl7dmFyIGw9MCxoPU1hdGgubWluKGEudGV4dC5sZW5ndGgsYy50ZXh0Lmxlbmd0aCk7d2hpbGUobDxoJiZhLnRleHRbYS50ZXh0Lmxlbmd0aC1sLTFdPT1jLnRleHRbYy50ZXh0Lmxlbmd0aC1sLTFdKWwrKyxuLS0sci0tO3JldHVybnthOm4sYjpyfX1pZihhLmNvbnRlbnQuc2l6ZXx8Yy5jb250ZW50LnNpemUpe3ZhciBmPWkoYS5jb250ZW50LGMuY29udGVudCxuLTEsci0xKTtpZihmKXJldHVybiBmfW4tPXUsci09dX1lbHNlIG4tPXUsci09dX19dmFyIHM9ZnVuY3Rpb24odCxlKXtpZih0aGlzLmNvbnRlbnQ9dCx0aGlzLnNpemU9ZXx8MCxudWxsPT1lKWZvcih2YXIgbj0wO248dC5sZW5ndGg7bisrKXRoaXMuc2l6ZSs9dFtuXS5ub2RlU2l6ZX0sYT17Zmlyc3RDaGlsZDp7Y29uZmlndXJhYmxlOiEwfSxsYXN0Q2hpbGQ6e2NvbmZpZ3VyYWJsZTohMH0sY2hpbGRDb3VudDp7Y29uZmlndXJhYmxlOiEwfX07cy5wcm90b3R5cGUubm9kZXNCZXR3ZWVuPWZ1bmN0aW9uKHQsZSxuLHIsbyl7dm9pZCAwPT09ciYmKHI9MCk7Zm9yKHZhciBpPTAscz0wO3M8ZTtpKyspe3ZhciBhPXRoaXMuY29udGVudFtpXSxjPXMrYS5ub2RlU2l6ZTtpZihjPnQmJiExIT09bihhLHIrcyxvLGkpJiZhLmNvbnRlbnQuc2l6ZSl7dmFyIHU9cysxO2Eubm9kZXNCZXR3ZWVuKE1hdGgubWF4KDAsdC11KSxNYXRoLm1pbihhLmNvbnRlbnQuc2l6ZSxlLXUpLG4scit1KX1zPWN9fSxzLnByb3RvdHlwZS5kZXNjZW5kYW50cz1mdW5jdGlvbih0KXt0aGlzLm5vZGVzQmV0d2VlbigwLHRoaXMuc2l6ZSx0KX0scy5wcm90b3R5cGUudGV4dEJldHdlZW49ZnVuY3Rpb24odCxlLG4scil7dmFyIG89IiIsaT0hMDtyZXR1cm4gdGhpcy5ub2Rlc0JldHdlZW4odCxlLChmdW5jdGlvbihzLGEpe3MuaXNUZXh0PyhvKz1zLnRleHQuc2xpY2UoTWF0aC5tYXgodCxhKS1hLGUtYSksaT0hbik6cy5pc0xlYWYmJnI/KG8rPXIsaT0hbik6IWkmJnMuaXNCbG9jayYmKG8rPW4saT0hMCl9KSwwKSxvfSxzLnByb3RvdHlwZS5hcHBlbmQ9ZnVuY3Rpb24odCl7aWYoIXQuc2l6ZSlyZXR1cm4gdGhpcztpZighdGhpcy5zaXplKXJldHVybiB0O3ZhciBlPXRoaXMubGFzdENoaWxkLG49dC5maXJzdENoaWxkLHI9dGhpcy5jb250ZW50LnNsaWNlKCksbz0wO2ZvcihlLmlzVGV4dCYmZS5zYW1lTWFya3VwKG4pJiYocltyLmxlbmd0aC0xXT1lLndpdGhUZXh0KGUudGV4dCtuLnRleHQpLG89MSk7bzx0LmNvbnRlbnQubGVuZ3RoO28rKylyLnB1c2godC5jb250ZW50W29dKTtyZXR1cm4gbmV3IHMocix0aGlzLnNpemUrdC5zaXplKX0scy5wcm90b3R5cGUuY3V0PWZ1bmN0aW9uKHQsZSl7aWYobnVsbD09ZSYmKGU9dGhpcy5zaXplKSwwPT10JiZlPT10aGlzLnNpemUpcmV0dXJuIHRoaXM7dmFyIG49W10scj0wO2lmKGU+dClmb3IodmFyIG89MCxpPTA7aTxlO28rKyl7dmFyIGE9dGhpcy5jb250ZW50W29dLGM9aSthLm5vZGVTaXplO2M+dCYmKChpPHR8fGM+ZSkmJihhPWEuaXNUZXh0P2EuY3V0KE1hdGgubWF4KDAsdC1pKSxNYXRoLm1pbihhLnRleHQubGVuZ3RoLGUtaSkpOmEuY3V0KE1hdGgubWF4KDAsdC1pLTEpLE1hdGgubWluKGEuY29udGVudC5zaXplLGUtaS0xKSkpLG4ucHVzaChhKSxyKz1hLm5vZGVTaXplKSxpPWN9cmV0dXJuIG5ldyBzKG4scil9LHMucHJvdG90eXBlLmN1dEJ5SW5kZXg9ZnVuY3Rpb24odCxlKXtyZXR1cm4gdD09ZT9zLmVtcHR5OjA9PXQmJmU9PXRoaXMuY29udGVudC5sZW5ndGg/dGhpczpuZXcgcyh0aGlzLmNvbnRlbnQuc2xpY2UodCxlKSl9LHMucHJvdG90eXBlLnJlcGxhY2VDaGlsZD1mdW5jdGlvbih0LGUpe3ZhciBuPXRoaXMuY29udGVudFt0XTtpZihuPT1lKXJldHVybiB0aGlzO3ZhciByPXRoaXMuY29udGVudC5zbGljZSgpLG89dGhpcy5zaXplK2Uubm9kZVNpemUtbi5ub2RlU2l6ZTtyZXR1cm4gclt0XT1lLG5ldyBzKHIsbyl9LHMucHJvdG90eXBlLmFkZFRvU3RhcnQ9ZnVuY3Rpb24odCl7cmV0dXJuIG5ldyBzKFt0XS5jb25jYXQodGhpcy5jb250ZW50KSx0aGlzLnNpemUrdC5ub2RlU2l6ZSl9LHMucHJvdG90eXBlLmFkZFRvRW5kPWZ1bmN0aW9uKHQpe3JldHVybiBuZXcgcyh0aGlzLmNvbnRlbnQuY29uY2F0KHQpLHRoaXMuc2l6ZSt0Lm5vZGVTaXplKX0scy5wcm90b3R5cGUuZXE9ZnVuY3Rpb24odCl7aWYodGhpcy5jb250ZW50Lmxlbmd0aCE9dC5jb250ZW50Lmxlbmd0aClyZXR1cm4hMTtmb3IodmFyIGU9MDtlPHRoaXMuY29udGVudC5sZW5ndGg7ZSsrKWlmKCF0aGlzLmNvbnRlbnRbZV0uZXEodC5jb250ZW50W2VdKSlyZXR1cm4hMTtyZXR1cm4hMH0sYS5maXJzdENoaWxkLmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLmNvbnRlbnQubGVuZ3RoP3RoaXMuY29udGVudFswXTpudWxsfSxhLmxhc3RDaGlsZC5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jb250ZW50Lmxlbmd0aD90aGlzLmNvbnRlbnRbdGhpcy5jb250ZW50Lmxlbmd0aC0xXTpudWxsfSxhLmNoaWxkQ291bnQuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY29udGVudC5sZW5ndGh9LHMucHJvdG90eXBlLmNoaWxkPWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMuY29udGVudFt0XTtpZighZSl0aHJvdyBuZXcgUmFuZ2VFcnJvcigiSW5kZXggIit0KyIgb3V0IG9mIHJhbmdlIGZvciAiK3RoaXMpO3JldHVybiBlfSxzLnByb3RvdHlwZS5tYXliZUNoaWxkPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLmNvbnRlbnRbdF19LHMucHJvdG90eXBlLmZvckVhY2g9ZnVuY3Rpb24odCl7Zm9yKHZhciBlPTAsbj0wO2U8dGhpcy5jb250ZW50Lmxlbmd0aDtlKyspe3ZhciByPXRoaXMuY29udGVudFtlXTt0KHIsbixlKSxuKz1yLm5vZGVTaXplfX0scy5wcm90b3R5cGUuZmluZERpZmZTdGFydD1mdW5jdGlvbih0LGUpe3JldHVybiB2b2lkIDA9PT1lJiYoZT0wKSxvKHRoaXMsdCxlKX0scy5wcm90b3R5cGUuZmluZERpZmZFbmQ9ZnVuY3Rpb24odCxlLG4pe3JldHVybiB2b2lkIDA9PT1lJiYoZT10aGlzLnNpemUpLHZvaWQgMD09PW4mJihuPXQuc2l6ZSksaSh0aGlzLHQsZSxuKX0scy5wcm90b3R5cGUuZmluZEluZGV4PWZ1bmN0aW9uKHQsZSl7aWYodm9pZCAwPT09ZSYmKGU9LTEpLDA9PXQpcmV0dXJuIHUoMCx0KTtpZih0PT10aGlzLnNpemUpcmV0dXJuIHUodGhpcy5jb250ZW50Lmxlbmd0aCx0KTtpZih0PnRoaXMuc2l6ZXx8dDwwKXRocm93IG5ldyBSYW5nZUVycm9yKCJQb3NpdGlvbiAiK3QrIiBvdXRzaWRlIG9mIGZyYWdtZW50ICgiK3RoaXMrIikiKTtmb3IodmFyIG49MCxyPTA7O24rKyl7dmFyIG89dGhpcy5jaGlsZChuKSxpPXIrby5ub2RlU2l6ZTtpZihpPj10KXJldHVybiBpPT10fHxlPjA/dShuKzEsaSk6dShuLHIpO3I9aX19LHMucHJvdG90eXBlLnRvU3RyaW5nPWZ1bmN0aW9uKCl7cmV0dXJuIjwiK3RoaXMudG9TdHJpbmdJbm5lcigpKyI+In0scy5wcm90b3R5cGUudG9TdHJpbmdJbm5lcj1mdW5jdGlvbigpe3JldHVybiB0aGlzLmNvbnRlbnQuam9pbigiLCAiKX0scy5wcm90b3R5cGUudG9KU09OPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY29udGVudC5sZW5ndGg/dGhpcy5jb250ZW50Lm1hcCgoZnVuY3Rpb24odCl7cmV0dXJuIHQudG9KU09OKCl9KSk6bnVsbH0scy5mcm9tSlNPTj1mdW5jdGlvbih0LGUpe2lmKCFlKXJldHVybiBzLmVtcHR5O2lmKCFBcnJheS5pc0FycmF5KGUpKXRocm93IG5ldyBSYW5nZUVycm9yKCJJbnZhbGlkIGlucHV0IGZvciBGcmFnbWVudC5mcm9tSlNPTiIpO3JldHVybiBuZXcgcyhlLm1hcCh0Lm5vZGVGcm9tSlNPTikpfSxzLmZyb21BcnJheT1mdW5jdGlvbih0KXtpZighdC5sZW5ndGgpcmV0dXJuIHMuZW1wdHk7Zm9yKHZhciBlLG49MCxyPTA7cjx0Lmxlbmd0aDtyKyspe3ZhciBvPXRbcl07bis9by5ub2RlU2l6ZSxyJiZvLmlzVGV4dCYmdFtyLTFdLnNhbWVNYXJrdXAobyk/KGV8fChlPXQuc2xpY2UoMCxyKSksZVtlLmxlbmd0aC0xXT1vLndpdGhUZXh0KGVbZS5sZW5ndGgtMV0udGV4dCtvLnRleHQpKTplJiZlLnB1c2gobyl9cmV0dXJuIG5ldyBzKGV8fHQsbil9LHMuZnJvbT1mdW5jdGlvbih0KXtpZighdClyZXR1cm4gcy5lbXB0eTtpZih0IGluc3RhbmNlb2YgcylyZXR1cm4gdDtpZihBcnJheS5pc0FycmF5KHQpKXJldHVybiB0aGlzLmZyb21BcnJheSh0KTtpZih0LmF0dHJzKXJldHVybiBuZXcgcyhbdF0sdC5ub2RlU2l6ZSk7dGhyb3cgbmV3IFJhbmdlRXJyb3IoIkNhbiBub3QgY29udmVydCAiK3QrIiB0byBhIEZyYWdtZW50IisodC5ub2Rlc0JldHdlZW4/IiAobG9va3MgbGlrZSBtdWx0aXBsZSB2ZXJzaW9ucyBvZiBwcm9zZW1pcnJvci1tb2RlbCB3ZXJlIGxvYWRlZCkiOiIiKSl9LE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKHMucHJvdG90eXBlLGEpO3ZhciBjPXtpbmRleDowLG9mZnNldDowfTtmdW5jdGlvbiB1KHQsZSl7cmV0dXJuIGMuaW5kZXg9dCxjLm9mZnNldD1lLGN9ZnVuY3Rpb24gbCh0LGUpe2lmKHQ9PT1lKXJldHVybiEwO2lmKCF0fHwib2JqZWN0IiE9dHlwZW9mIHR8fCFlfHwib2JqZWN0IiE9dHlwZW9mIGUpcmV0dXJuITE7dmFyIG49QXJyYXkuaXNBcnJheSh0KTtpZihBcnJheS5pc0FycmF5KGUpIT1uKXJldHVybiExO2lmKG4pe2lmKHQubGVuZ3RoIT1lLmxlbmd0aClyZXR1cm4hMTtmb3IodmFyIHI9MDtyPHQubGVuZ3RoO3IrKylpZighbCh0W3JdLGVbcl0pKXJldHVybiExfWVsc2V7Zm9yKHZhciBvIGluIHQpaWYoIShvIGluIGUpfHwhbCh0W29dLGVbb10pKXJldHVybiExO2Zvcih2YXIgaSBpbiBlKWlmKCEoaSBpbiB0KSlyZXR1cm4hMX1yZXR1cm4hMH1zLmVtcHR5PW5ldyBzKFtdLDApO3ZhciBoPWZ1bmN0aW9uKHQsZSl7dGhpcy50eXBlPXQsdGhpcy5hdHRycz1lfTtmdW5jdGlvbiBmKHQpe3ZhciBlPUVycm9yLmNhbGwodGhpcyx0KTtyZXR1cm4gZS5fX3Byb3RvX189Zi5wcm90b3R5cGUsZX1oLnByb3RvdHlwZS5hZGRUb1NldD1mdW5jdGlvbih0KXtmb3IodmFyIGUsbj0hMSxyPTA7cjx0Lmxlbmd0aDtyKyspe3ZhciBvPXRbcl07aWYodGhpcy5lcShvKSlyZXR1cm4gdDtpZih0aGlzLnR5cGUuZXhjbHVkZXMoby50eXBlKSllfHwoZT10LnNsaWNlKDAscikpO2Vsc2V7aWYoby50eXBlLmV4Y2x1ZGVzKHRoaXMudHlwZSkpcmV0dXJuIHQ7IW4mJm8udHlwZS5yYW5rPnRoaXMudHlwZS5yYW5rJiYoZXx8KGU9dC5zbGljZSgwLHIpKSxlLnB1c2godGhpcyksbj0hMCksZSYmZS5wdXNoKG8pfX1yZXR1cm4gZXx8KGU9dC5zbGljZSgpKSxufHxlLnB1c2godGhpcyksZX0saC5wcm90b3R5cGUucmVtb3ZlRnJvbVNldD1mdW5jdGlvbih0KXtmb3IodmFyIGU9MDtlPHQubGVuZ3RoO2UrKylpZih0aGlzLmVxKHRbZV0pKXJldHVybiB0LnNsaWNlKDAsZSkuY29uY2F0KHQuc2xpY2UoZSsxKSk7cmV0dXJuIHR9LGgucHJvdG90eXBlLmlzSW5TZXQ9ZnVuY3Rpb24odCl7Zm9yKHZhciBlPTA7ZTx0Lmxlbmd0aDtlKyspaWYodGhpcy5lcSh0W2VdKSlyZXR1cm4hMDtyZXR1cm4hMX0saC5wcm90b3R5cGUuZXE9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXM9PXR8fHRoaXMudHlwZT09dC50eXBlJiZsKHRoaXMuYXR0cnMsdC5hdHRycyl9LGgucHJvdG90eXBlLnRvSlNPTj1mdW5jdGlvbigpe3ZhciB0PXt0eXBlOnRoaXMudHlwZS5uYW1lfTtmb3IodmFyIGUgaW4gdGhpcy5hdHRycyl7dC5hdHRycz10aGlzLmF0dHJzO2JyZWFrfXJldHVybiB0fSxoLmZyb21KU09OPWZ1bmN0aW9uKHQsZSl7aWYoIWUpdGhyb3cgbmV3IFJhbmdlRXJyb3IoIkludmFsaWQgaW5wdXQgZm9yIE1hcmsuZnJvbUpTT04iKTt2YXIgbj10Lm1hcmtzW2UudHlwZV07aWYoIW4pdGhyb3cgbmV3IFJhbmdlRXJyb3IoIlRoZXJlIGlzIG5vIG1hcmsgdHlwZSAiK2UudHlwZSsiIGluIHRoaXMgc2NoZW1hIik7cmV0dXJuIG4uY3JlYXRlKGUuYXR0cnMpfSxoLnNhbWVTZXQ9ZnVuY3Rpb24odCxlKXtpZih0PT1lKXJldHVybiEwO2lmKHQubGVuZ3RoIT1lLmxlbmd0aClyZXR1cm4hMTtmb3IodmFyIG49MDtuPHQubGVuZ3RoO24rKylpZighdFtuXS5lcShlW25dKSlyZXR1cm4hMTtyZXR1cm4hMH0saC5zZXRGcm9tPWZ1bmN0aW9uKHQpe2lmKCF0fHwwPT10Lmxlbmd0aClyZXR1cm4gaC5ub25lO2lmKHQgaW5zdGFuY2VvZiBoKXJldHVyblt0XTt2YXIgZT10LnNsaWNlKCk7cmV0dXJuIGUuc29ydCgoZnVuY3Rpb24odCxlKXtyZXR1cm4gdC50eXBlLnJhbmstZS50eXBlLnJhbmt9KSksZX0saC5ub25lPVtdLGYucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoRXJyb3IucHJvdG90eXBlKSxmLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1mLGYucHJvdG90eXBlLm5hbWU9IlJlcGxhY2VFcnJvciI7dmFyIHA9ZnVuY3Rpb24odCxlLG4pe3RoaXMuY29udGVudD10LHRoaXMub3BlblN0YXJ0PWUsdGhpcy5vcGVuRW5kPW59LGQ9e3NpemU6e2NvbmZpZ3VyYWJsZTohMH19O2Z1bmN0aW9uIHYodCxlLG4pe3ZhciByPXQuZmluZEluZGV4KGUpLG89ci5pbmRleCxpPXIub2Zmc2V0LHM9dC5tYXliZUNoaWxkKG8pLGE9dC5maW5kSW5kZXgobiksYz1hLmluZGV4LHU9YS5vZmZzZXQ7aWYoaT09ZXx8cy5pc1RleHQpe2lmKHUhPW4mJiF0LmNoaWxkKGMpLmlzVGV4dCl0aHJvdyBuZXcgUmFuZ2VFcnJvcigiUmVtb3Zpbmcgbm9uLWZsYXQgcmFuZ2UiKTtyZXR1cm4gdC5jdXQoMCxlKS5hcHBlbmQodC5jdXQobikpfWlmKG8hPWMpdGhyb3cgbmV3IFJhbmdlRXJyb3IoIlJlbW92aW5nIG5vbi1mbGF0IHJhbmdlIik7cmV0dXJuIHQucmVwbGFjZUNoaWxkKG8scy5jb3B5KHYocy5jb250ZW50LGUtaS0xLG4taS0xKSkpfWZ1bmN0aW9uIG0odCxlLG4scil7dmFyIG89dC5maW5kSW5kZXgoZSksaT1vLmluZGV4LHM9by5vZmZzZXQsYT10Lm1heWJlQ2hpbGQoaSk7aWYocz09ZXx8YS5pc1RleHQpcmV0dXJuIHImJiFyLmNhblJlcGxhY2UoaSxpLG4pP251bGw6dC5jdXQoMCxlKS5hcHBlbmQobikuYXBwZW5kKHQuY3V0KGUpKTt2YXIgYz1tKGEuY29udGVudCxlLXMtMSxuKTtyZXR1cm4gYyYmdC5yZXBsYWNlQ2hpbGQoaSxhLmNvcHkoYykpfWZ1bmN0aW9uIGcodCxlLG4pe2lmKG4ub3BlblN0YXJ0PnQuZGVwdGgpdGhyb3cgbmV3IGYoIkluc2VydGVkIGNvbnRlbnQgZGVlcGVyIHRoYW4gaW5zZXJ0aW9uIHBvc2l0aW9uIik7aWYodC5kZXB0aC1uLm9wZW5TdGFydCE9ZS5kZXB0aC1uLm9wZW5FbmQpdGhyb3cgbmV3IGYoIkluY29uc2lzdGVudCBvcGVuIGRlcHRocyIpO3JldHVybiB5KHQsZSxuLDApfWZ1bmN0aW9uIHkodCxlLG4scil7dmFyIG89dC5pbmRleChyKSxpPXQubm9kZShyKTtpZihvPT1lLmluZGV4KHIpJiZyPHQuZGVwdGgtbi5vcGVuU3RhcnQpe3ZhciBzPXkodCxlLG4scisxKTtyZXR1cm4gaS5jb3B5KGkuY29udGVudC5yZXBsYWNlQ2hpbGQobyxzKSl9aWYobi5jb250ZW50LnNpemUpe2lmKG4ub3BlblN0YXJ0fHxuLm9wZW5FbmR8fHQuZGVwdGghPXJ8fGUuZGVwdGghPXIpe3ZhciBhPU0obix0KSxjPWEuc3RhcnQsdT1hLmVuZDtyZXR1cm4gUyhpLEModCxjLHUsZSxyKSl9dmFyIGw9dC5wYXJlbnQsaD1sLmNvbnRlbnQ7cmV0dXJuIFMobCxoLmN1dCgwLHQucGFyZW50T2Zmc2V0KS5hcHBlbmQobi5jb250ZW50KS5hcHBlbmQoaC5jdXQoZS5wYXJlbnRPZmZzZXQpKSl9cmV0dXJuIFMoaSxPKHQsZSxyKSl9ZnVuY3Rpb24gdyh0LGUpe2lmKCFlLnR5cGUuY29tcGF0aWJsZUNvbnRlbnQodC50eXBlKSl0aHJvdyBuZXcgZigiQ2Fubm90IGpvaW4gIitlLnR5cGUubmFtZSsiIG9udG8gIit0LnR5cGUubmFtZSl9ZnVuY3Rpb24gYih0LGUsbil7dmFyIHI9dC5ub2RlKG4pO3JldHVybiB3KHIsZS5ub2RlKG4pKSxyfWZ1bmN0aW9uIHgodCxlKXt2YXIgbj1lLmxlbmd0aC0xO24+PTAmJnQuaXNUZXh0JiZ0LnNhbWVNYXJrdXAoZVtuXSk/ZVtuXT10LndpdGhUZXh0KGVbbl0udGV4dCt0LnRleHQpOmUucHVzaCh0KX1mdW5jdGlvbiBrKHQsZSxuLHIpe3ZhciBvPShlfHx0KS5ub2RlKG4pLGk9MCxzPWU/ZS5pbmRleChuKTpvLmNoaWxkQ291bnQ7dCYmKGk9dC5pbmRleChuKSx0LmRlcHRoPm4/aSsrOnQudGV4dE9mZnNldCYmKHgodC5ub2RlQWZ0ZXIsciksaSsrKSk7Zm9yKHZhciBhPWk7YTxzO2ErKyl4KG8uY2hpbGQoYSkscik7ZSYmZS5kZXB0aD09biYmZS50ZXh0T2Zmc2V0JiZ4KGUubm9kZUJlZm9yZSxyKX1mdW5jdGlvbiBTKHQsZSl7aWYoIXQudHlwZS52YWxpZENvbnRlbnQoZSkpdGhyb3cgbmV3IGYoIkludmFsaWQgY29udGVudCBmb3Igbm9kZSAiK3QudHlwZS5uYW1lKTtyZXR1cm4gdC5jb3B5KGUpfWZ1bmN0aW9uIEModCxlLG4scixvKXt2YXIgaT10LmRlcHRoPm8mJmIodCxlLG8rMSksYT1yLmRlcHRoPm8mJmIobixyLG8rMSksYz1bXTtyZXR1cm4gayhudWxsLHQsbyxjKSxpJiZhJiZlLmluZGV4KG8pPT1uLmluZGV4KG8pPyh3KGksYSkseChTKGksQyh0LGUsbixyLG8rMSkpLGMpKTooaSYmeChTKGksTyh0LGUsbysxKSksYyksayhlLG4sbyxjKSxhJiZ4KFMoYSxPKG4scixvKzEpKSxjKSksayhyLG51bGwsbyxjKSxuZXcgcyhjKX1mdW5jdGlvbiBPKHQsZSxuKXt2YXIgcj1bXTtpZihrKG51bGwsdCxuLHIpLHQuZGVwdGg+bil7dmFyIG89Yih0LGUsbisxKTt4KFMobyxPKHQsZSxuKzEpKSxyKX1yZXR1cm4gayhlLG51bGwsbixyKSxuZXcgcyhyKX1mdW5jdGlvbiBNKHQsZSl7Zm9yKHZhciBuPWUuZGVwdGgtdC5vcGVuU3RhcnQscj1lLm5vZGUobiksbz1yLmNvcHkodC5jb250ZW50KSxpPW4tMTtpPj0wO2ktLSlvPWUubm9kZShpKS5jb3B5KHMuZnJvbShvKSk7cmV0dXJue3N0YXJ0Om8ucmVzb2x2ZU5vQ2FjaGUodC5vcGVuU3RhcnQrbiksZW5kOm8ucmVzb2x2ZU5vQ2FjaGUoby5jb250ZW50LnNpemUtdC5vcGVuRW5kLW4pfX1kLnNpemUuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY29udGVudC5zaXplLXRoaXMub3BlblN0YXJ0LXRoaXMub3BlbkVuZH0scC5wcm90b3R5cGUuaW5zZXJ0QXQ9ZnVuY3Rpb24odCxlKXt2YXIgbj1tKHRoaXMuY29udGVudCx0K3RoaXMub3BlblN0YXJ0LGUsbnVsbCk7cmV0dXJuIG4mJm5ldyBwKG4sdGhpcy5vcGVuU3RhcnQsdGhpcy5vcGVuRW5kKX0scC5wcm90b3R5cGUucmVtb3ZlQmV0d2Vlbj1mdW5jdGlvbih0LGUpe3JldHVybiBuZXcgcCh2KHRoaXMuY29udGVudCx0K3RoaXMub3BlblN0YXJ0LGUrdGhpcy5vcGVuU3RhcnQpLHRoaXMub3BlblN0YXJ0LHRoaXMub3BlbkVuZCl9LHAucHJvdG90eXBlLmVxPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLmNvbnRlbnQuZXEodC5jb250ZW50KSYmdGhpcy5vcGVuU3RhcnQ9PXQub3BlblN0YXJ0JiZ0aGlzLm9wZW5FbmQ9PXQub3BlbkVuZH0scC5wcm90b3R5cGUudG9TdHJpbmc9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jb250ZW50KyIoIit0aGlzLm9wZW5TdGFydCsiLCIrdGhpcy5vcGVuRW5kKyIpIn0scC5wcm90b3R5cGUudG9KU09OPWZ1bmN0aW9uKCl7aWYoIXRoaXMuY29udGVudC5zaXplKXJldHVybiBudWxsO3ZhciB0PXtjb250ZW50OnRoaXMuY29udGVudC50b0pTT04oKX07cmV0dXJuIHRoaXMub3BlblN0YXJ0PjAmJih0Lm9wZW5TdGFydD10aGlzLm9wZW5TdGFydCksdGhpcy5vcGVuRW5kPjAmJih0Lm9wZW5FbmQ9dGhpcy5vcGVuRW5kKSx0fSxwLmZyb21KU09OPWZ1bmN0aW9uKHQsZSl7aWYoIWUpcmV0dXJuIHAuZW1wdHk7dmFyIG49ZS5vcGVuU3RhcnR8fDAscj1lLm9wZW5FbmR8fDA7aWYoIm51bWJlciIhPXR5cGVvZiBufHwibnVtYmVyIiE9dHlwZW9mIHIpdGhyb3cgbmV3IFJhbmdlRXJyb3IoIkludmFsaWQgaW5wdXQgZm9yIFNsaWNlLmZyb21KU09OIik7cmV0dXJuIG5ldyBwKHMuZnJvbUpTT04odCxlLmNvbnRlbnQpLGUub3BlblN0YXJ0fHwwLGUub3BlbkVuZHx8MCl9LHAubWF4T3Blbj1mdW5jdGlvbih0LGUpe3ZvaWQgMD09PWUmJihlPSEwKTtmb3IodmFyIG49MCxyPTAsbz10LmZpcnN0Q2hpbGQ7byYmIW8uaXNMZWFmJiYoZXx8IW8udHlwZS5zcGVjLmlzb2xhdGluZyk7bz1vLmZpcnN0Q2hpbGQpbisrO2Zvcih2YXIgaT10Lmxhc3RDaGlsZDtpJiYhaS5pc0xlYWYmJihlfHwhaS50eXBlLnNwZWMuaXNvbGF0aW5nKTtpPWkubGFzdENoaWxkKXIrKztyZXR1cm4gbmV3IHAodCxuLHIpfSxPYmplY3QuZGVmaW5lUHJvcGVydGllcyhwLnByb3RvdHlwZSxkKSxwLmVtcHR5PW5ldyBwKHMuZW1wdHksMCwwKTt2YXIgTj1mdW5jdGlvbih0LGUsbil7dGhpcy5wb3M9dCx0aGlzLnBhdGg9ZSx0aGlzLmRlcHRoPWUubGVuZ3RoLzMtMSx0aGlzLnBhcmVudE9mZnNldD1ufSxUPXtwYXJlbnQ6e2NvbmZpZ3VyYWJsZTohMH0sZG9jOntjb25maWd1cmFibGU6ITB9LHRleHRPZmZzZXQ6e2NvbmZpZ3VyYWJsZTohMH0sbm9kZUFmdGVyOntjb25maWd1cmFibGU6ITB9LG5vZGVCZWZvcmU6e2NvbmZpZ3VyYWJsZTohMH19O04ucHJvdG90eXBlLnJlc29sdmVEZXB0aD1mdW5jdGlvbih0KXtyZXR1cm4gbnVsbD09dD90aGlzLmRlcHRoOnQ8MD90aGlzLmRlcHRoK3Q6dH0sVC5wYXJlbnQuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubm9kZSh0aGlzLmRlcHRoKX0sVC5kb2MuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubm9kZSgwKX0sTi5wcm90b3R5cGUubm9kZT1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5wYXRoWzMqdGhpcy5yZXNvbHZlRGVwdGgodCldfSxOLnByb3RvdHlwZS5pbmRleD1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5wYXRoWzMqdGhpcy5yZXNvbHZlRGVwdGgodCkrMV19LE4ucHJvdG90eXBlLmluZGV4QWZ0ZXI9ZnVuY3Rpb24odCl7cmV0dXJuIHQ9dGhpcy5yZXNvbHZlRGVwdGgodCksdGhpcy5pbmRleCh0KSsodCE9dGhpcy5kZXB0aHx8dGhpcy50ZXh0T2Zmc2V0PzE6MCl9LE4ucHJvdG90eXBlLnN0YXJ0PWZ1bmN0aW9uKHQpe3JldHVybiB0PXRoaXMucmVzb2x2ZURlcHRoKHQpLDA9PXQ/MDp0aGlzLnBhdGhbMyp0LTFdKzF9LE4ucHJvdG90eXBlLmVuZD1mdW5jdGlvbih0KXtyZXR1cm4gdD10aGlzLnJlc29sdmVEZXB0aCh0KSx0aGlzLnN0YXJ0KHQpK3RoaXMubm9kZSh0KS5jb250ZW50LnNpemV9LE4ucHJvdG90eXBlLmJlZm9yZT1mdW5jdGlvbih0KXtpZih0PXRoaXMucmVzb2x2ZURlcHRoKHQpLCF0KXRocm93IG5ldyBSYW5nZUVycm9yKCJUaGVyZSBpcyBubyBwb3NpdGlvbiBiZWZvcmUgdGhlIHRvcC1sZXZlbCBub2RlIik7cmV0dXJuIHQ9PXRoaXMuZGVwdGgrMT90aGlzLnBvczp0aGlzLnBhdGhbMyp0LTFdfSxOLnByb3RvdHlwZS5hZnRlcj1mdW5jdGlvbih0KXtpZih0PXRoaXMucmVzb2x2ZURlcHRoKHQpLCF0KXRocm93IG5ldyBSYW5nZUVycm9yKCJUaGVyZSBpcyBubyBwb3NpdGlvbiBhZnRlciB0aGUgdG9wLWxldmVsIG5vZGUiKTtyZXR1cm4gdD09dGhpcy5kZXB0aCsxP3RoaXMucG9zOnRoaXMucGF0aFszKnQtMV0rdGhpcy5wYXRoWzMqdF0ubm9kZVNpemV9LFQudGV4dE9mZnNldC5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5wb3MtdGhpcy5wYXRoW3RoaXMucGF0aC5sZW5ndGgtMV19LFQubm9kZUFmdGVyLmdldD1mdW5jdGlvbigpe3ZhciB0PXRoaXMucGFyZW50LGU9dGhpcy5pbmRleCh0aGlzLmRlcHRoKTtpZihlPT10LmNoaWxkQ291bnQpcmV0dXJuIG51bGw7dmFyIG49dGhpcy5wb3MtdGhpcy5wYXRoW3RoaXMucGF0aC5sZW5ndGgtMV0scj10LmNoaWxkKGUpO3JldHVybiBuP3QuY2hpbGQoZSkuY3V0KG4pOnJ9LFQubm9kZUJlZm9yZS5nZXQ9ZnVuY3Rpb24oKXt2YXIgdD10aGlzLmluZGV4KHRoaXMuZGVwdGgpLGU9dGhpcy5wb3MtdGhpcy5wYXRoW3RoaXMucGF0aC5sZW5ndGgtMV07cmV0dXJuIGU/dGhpcy5wYXJlbnQuY2hpbGQodCkuY3V0KDAsZSk6MD09dD9udWxsOnRoaXMucGFyZW50LmNoaWxkKHQtMSl9LE4ucHJvdG90eXBlLm1hcmtzPWZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5wYXJlbnQsZT10aGlzLmluZGV4KCk7aWYoMD09dC5jb250ZW50LnNpemUpcmV0dXJuIGgubm9uZTtpZih0aGlzLnRleHRPZmZzZXQpcmV0dXJuIHQuY2hpbGQoZSkubWFya3M7dmFyIG49dC5tYXliZUNoaWxkKGUtMSkscj10Lm1heWJlQ2hpbGQoZSk7aWYoIW4pe3ZhciBvPW47bj1yLHI9b31mb3IodmFyIGk9bi5tYXJrcyxzPTA7czxpLmxlbmd0aDtzKyspITEhPT1pW3NdLnR5cGUuc3BlYy5pbmNsdXNpdmV8fHImJmlbc10uaXNJblNldChyLm1hcmtzKXx8KGk9aVtzLS1dLnJlbW92ZUZyb21TZXQoaSkpO3JldHVybiBpfSxOLnByb3RvdHlwZS5tYXJrc0Fjcm9zcz1mdW5jdGlvbih0KXt2YXIgZT10aGlzLnBhcmVudC5tYXliZUNoaWxkKHRoaXMuaW5kZXgoKSk7aWYoIWV8fCFlLmlzSW5saW5lKXJldHVybiBudWxsO2Zvcih2YXIgbj1lLm1hcmtzLHI9dC5wYXJlbnQubWF5YmVDaGlsZCh0LmluZGV4KCkpLG89MDtvPG4ubGVuZ3RoO28rKykhMSE9PW5bb10udHlwZS5zcGVjLmluY2x1c2l2ZXx8ciYmbltvXS5pc0luU2V0KHIubWFya3MpfHwobj1uW28tLV0ucmVtb3ZlRnJvbVNldChuKSk7cmV0dXJuIG59LE4ucHJvdG90eXBlLnNoYXJlZERlcHRoPWZ1bmN0aW9uKHQpe2Zvcih2YXIgZT10aGlzLmRlcHRoO2U+MDtlLS0paWYodGhpcy5zdGFydChlKTw9dCYmdGhpcy5lbmQoZSk+PXQpcmV0dXJuIGU7cmV0dXJuIDB9LE4ucHJvdG90eXBlLmJsb2NrUmFuZ2U9ZnVuY3Rpb24odCxlKXtpZih2b2lkIDA9PT10JiYodD10aGlzKSx0LnBvczx0aGlzLnBvcylyZXR1cm4gdC5ibG9ja1JhbmdlKHRoaXMpO2Zvcih2YXIgbj10aGlzLmRlcHRoLSh0aGlzLnBhcmVudC5pbmxpbmVDb250ZW50fHx0aGlzLnBvcz09dC5wb3M/MTowKTtuPj0wO24tLSlpZih0LnBvczw9dGhpcy5lbmQobikmJighZXx8ZSh0aGlzLm5vZGUobikpKSlyZXR1cm4gbmV3IFIodGhpcyx0LG4pfSxOLnByb3RvdHlwZS5zYW1lUGFyZW50PWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLnBvcy10aGlzLnBhcmVudE9mZnNldD09dC5wb3MtdC5wYXJlbnRPZmZzZXR9LE4ucHJvdG90eXBlLm1heD1mdW5jdGlvbih0KXtyZXR1cm4gdC5wb3M+dGhpcy5wb3M/dDp0aGlzfSxOLnByb3RvdHlwZS5taW49ZnVuY3Rpb24odCl7cmV0dXJuIHQucG9zPHRoaXMucG9zP3Q6dGhpc30sTi5wcm90b3R5cGUudG9TdHJpbmc9ZnVuY3Rpb24oKXtmb3IodmFyIHQ9IiIsZT0xO2U8PXRoaXMuZGVwdGg7ZSsrKXQrPSh0PyIvIjoiIikrdGhpcy5ub2RlKGUpLnR5cGUubmFtZSsiXyIrdGhpcy5pbmRleChlLTEpO3JldHVybiB0KyI6Iit0aGlzLnBhcmVudE9mZnNldH0sTi5yZXNvbHZlPWZ1bmN0aW9uKHQsZSl7aWYoIShlPj0wJiZlPD10LmNvbnRlbnQuc2l6ZSkpdGhyb3cgbmV3IFJhbmdlRXJyb3IoIlBvc2l0aW9uICIrZSsiIG91dCBvZiByYW5nZSIpO2Zvcih2YXIgbj1bXSxyPTAsbz1lLGk9dDs7KXt2YXIgcz1pLmNvbnRlbnQuZmluZEluZGV4KG8pLGE9cy5pbmRleCxjPXMub2Zmc2V0LHU9by1jO2lmKG4ucHVzaChpLGEscitjKSwhdSlicmVhaztpZihpPWkuY2hpbGQoYSksaS5pc1RleHQpYnJlYWs7bz11LTEscis9YysxfXJldHVybiBuZXcgTihlLG4sbyl9LE4ucmVzb2x2ZUNhY2hlZD1mdW5jdGlvbih0LGUpe2Zvcih2YXIgbj0wO248QS5sZW5ndGg7bisrKXt2YXIgcj1BW25dO2lmKHIucG9zPT1lJiZyLmRvYz09dClyZXR1cm4gcn12YXIgbz1BW0VdPU4ucmVzb2x2ZSh0LGUpO3JldHVybiBFPShFKzEpJUQsb30sT2JqZWN0LmRlZmluZVByb3BlcnRpZXMoTi5wcm90b3R5cGUsVCk7dmFyIEE9W10sRT0wLEQ9MTIsUj1mdW5jdGlvbih0LGUsbil7dGhpcy4kZnJvbT10LHRoaXMuJHRvPWUsdGhpcy5kZXB0aD1ufSx6PXtzdGFydDp7Y29uZmlndXJhYmxlOiEwfSxlbmQ6e2NvbmZpZ3VyYWJsZTohMH0scGFyZW50Ontjb25maWd1cmFibGU6ITB9LHN0YXJ0SW5kZXg6e2NvbmZpZ3VyYWJsZTohMH0sZW5kSW5kZXg6e2NvbmZpZ3VyYWJsZTohMH19O3ouc3RhcnQuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuJGZyb20uYmVmb3JlKHRoaXMuZGVwdGgrMSl9LHouZW5kLmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLiR0by5hZnRlcih0aGlzLmRlcHRoKzEpfSx6LnBhcmVudC5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy4kZnJvbS5ub2RlKHRoaXMuZGVwdGgpfSx6LnN0YXJ0SW5kZXguZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuJGZyb20uaW5kZXgodGhpcy5kZXB0aCl9LHouZW5kSW5kZXguZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuJHRvLmluZGV4QWZ0ZXIodGhpcy5kZXB0aCl9LE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKFIucHJvdG90eXBlLHopO3ZhciBQPU9iamVjdC5jcmVhdGUobnVsbCksST1mdW5jdGlvbih0LGUsbixyKXt0aGlzLnR5cGU9dCx0aGlzLmF0dHJzPWUsdGhpcy5jb250ZW50PW58fHMuZW1wdHksdGhpcy5tYXJrcz1yfHxoLm5vbmV9LEI9e25vZGVTaXplOntjb25maWd1cmFibGU6ITB9LGNoaWxkQ291bnQ6e2NvbmZpZ3VyYWJsZTohMH0sdGV4dENvbnRlbnQ6e2NvbmZpZ3VyYWJsZTohMH0sZmlyc3RDaGlsZDp7Y29uZmlndXJhYmxlOiEwfSxsYXN0Q2hpbGQ6e2NvbmZpZ3VyYWJsZTohMH0saXNCbG9jazp7Y29uZmlndXJhYmxlOiEwfSxpc1RleHRibG9jazp7Y29uZmlndXJhYmxlOiEwfSxpbmxpbmVDb250ZW50Ontjb25maWd1cmFibGU6ITB9LGlzSW5saW5lOntjb25maWd1cmFibGU6ITB9LGlzVGV4dDp7Y29uZmlndXJhYmxlOiEwfSxpc0xlYWY6e2NvbmZpZ3VyYWJsZTohMH0saXNBdG9tOntjb25maWd1cmFibGU6ITB9fTtCLm5vZGVTaXplLmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLmlzTGVhZj8xOjIrdGhpcy5jb250ZW50LnNpemV9LEIuY2hpbGRDb3VudC5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jb250ZW50LmNoaWxkQ291bnR9LEkucHJvdG90eXBlLmNoaWxkPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLmNvbnRlbnQuY2hpbGQodCl9LEkucHJvdG90eXBlLm1heWJlQ2hpbGQ9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuY29udGVudC5tYXliZUNoaWxkKHQpfSxJLnByb3RvdHlwZS5mb3JFYWNoPWZ1bmN0aW9uKHQpe3RoaXMuY29udGVudC5mb3JFYWNoKHQpfSxJLnByb3RvdHlwZS5ub2Rlc0JldHdlZW49ZnVuY3Rpb24odCxlLG4scil7dm9pZCAwPT09ciYmKHI9MCksdGhpcy5jb250ZW50Lm5vZGVzQmV0d2Vlbih0LGUsbixyLHRoaXMpfSxJLnByb3RvdHlwZS5kZXNjZW5kYW50cz1mdW5jdGlvbih0KXt0aGlzLm5vZGVzQmV0d2VlbigwLHRoaXMuY29udGVudC5zaXplLHQpfSxCLnRleHRDb250ZW50LmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLnRleHRCZXR3ZWVuKDAsdGhpcy5jb250ZW50LnNpemUsIiIpfSxJLnByb3RvdHlwZS50ZXh0QmV0d2Vlbj1mdW5jdGlvbih0LGUsbixyKXtyZXR1cm4gdGhpcy5jb250ZW50LnRleHRCZXR3ZWVuKHQsZSxuLHIpfSxCLmZpcnN0Q2hpbGQuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY29udGVudC5maXJzdENoaWxkfSxCLmxhc3RDaGlsZC5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jb250ZW50Lmxhc3RDaGlsZH0sSS5wcm90b3R5cGUuZXE9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXM9PXR8fHRoaXMuc2FtZU1hcmt1cCh0KSYmdGhpcy5jb250ZW50LmVxKHQuY29udGVudCl9LEkucHJvdG90eXBlLnNhbWVNYXJrdXA9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuaGFzTWFya3VwKHQudHlwZSx0LmF0dHJzLHQubWFya3MpfSxJLnByb3RvdHlwZS5oYXNNYXJrdXA9ZnVuY3Rpb24odCxlLG4pe3JldHVybiB0aGlzLnR5cGU9PXQmJmwodGhpcy5hdHRycyxlfHx0LmRlZmF1bHRBdHRyc3x8UCkmJmguc2FtZVNldCh0aGlzLm1hcmtzLG58fGgubm9uZSl9LEkucHJvdG90eXBlLmNvcHk9ZnVuY3Rpb24odCl7cmV0dXJuIHZvaWQgMD09PXQmJih0PW51bGwpLHQ9PXRoaXMuY29udGVudD90aGlzOm5ldyB0aGlzLmNvbnN0cnVjdG9yKHRoaXMudHlwZSx0aGlzLmF0dHJzLHQsdGhpcy5tYXJrcyl9LEkucHJvdG90eXBlLm1hcms9ZnVuY3Rpb24odCl7cmV0dXJuIHQ9PXRoaXMubWFya3M/dGhpczpuZXcgdGhpcy5jb25zdHJ1Y3Rvcih0aGlzLnR5cGUsdGhpcy5hdHRycyx0aGlzLmNvbnRlbnQsdCl9LEkucHJvdG90eXBlLmN1dD1mdW5jdGlvbih0LGUpe3JldHVybiAwPT10JiZlPT10aGlzLmNvbnRlbnQuc2l6ZT90aGlzOnRoaXMuY29weSh0aGlzLmNvbnRlbnQuY3V0KHQsZSkpfSxJLnByb3RvdHlwZS5zbGljZT1mdW5jdGlvbih0LGUsbil7aWYodm9pZCAwPT09ZSYmKGU9dGhpcy5jb250ZW50LnNpemUpLHZvaWQgMD09PW4mJihuPSExKSx0PT1lKXJldHVybiBwLmVtcHR5O3ZhciByPXRoaXMucmVzb2x2ZSh0KSxvPXRoaXMucmVzb2x2ZShlKSxpPW4/MDpyLnNoYXJlZERlcHRoKGUpLHM9ci5zdGFydChpKSxhPXIubm9kZShpKSxjPWEuY29udGVudC5jdXQoci5wb3MtcyxvLnBvcy1zKTtyZXR1cm4gbmV3IHAoYyxyLmRlcHRoLWksby5kZXB0aC1pKX0sSS5wcm90b3R5cGUucmVwbGFjZT1mdW5jdGlvbih0LGUsbil7cmV0dXJuIGcodGhpcy5yZXNvbHZlKHQpLHRoaXMucmVzb2x2ZShlKSxuKX0sSS5wcm90b3R5cGUubm9kZUF0PWZ1bmN0aW9uKHQpe2Zvcih2YXIgZT10aGlzOzspe3ZhciBuPWUuY29udGVudC5maW5kSW5kZXgodCkscj1uLmluZGV4LG89bi5vZmZzZXQ7aWYoZT1lLm1heWJlQ2hpbGQociksIWUpcmV0dXJuIG51bGw7aWYobz09dHx8ZS5pc1RleHQpcmV0dXJuIGU7dC09bysxfX0sSS5wcm90b3R5cGUuY2hpbGRBZnRlcj1mdW5jdGlvbih0KXt2YXIgZT10aGlzLmNvbnRlbnQuZmluZEluZGV4KHQpLG49ZS5pbmRleCxyPWUub2Zmc2V0O3JldHVybntub2RlOnRoaXMuY29udGVudC5tYXliZUNoaWxkKG4pLGluZGV4Om4sb2Zmc2V0OnJ9fSxJLnByb3RvdHlwZS5jaGlsZEJlZm9yZT1mdW5jdGlvbih0KXtpZigwPT10KXJldHVybntub2RlOm51bGwsaW5kZXg6MCxvZmZzZXQ6MH07dmFyIGU9dGhpcy5jb250ZW50LmZpbmRJbmRleCh0KSxuPWUuaW5kZXgscj1lLm9mZnNldDtpZihyPHQpcmV0dXJue25vZGU6dGhpcy5jb250ZW50LmNoaWxkKG4pLGluZGV4Om4sb2Zmc2V0OnJ9O3ZhciBvPXRoaXMuY29udGVudC5jaGlsZChuLTEpO3JldHVybntub2RlOm8saW5kZXg6bi0xLG9mZnNldDpyLW8ubm9kZVNpemV9fSxJLnByb3RvdHlwZS5yZXNvbHZlPWZ1bmN0aW9uKHQpe3JldHVybiBOLnJlc29sdmVDYWNoZWQodGhpcyx0KX0sSS5wcm90b3R5cGUucmVzb2x2ZU5vQ2FjaGU9ZnVuY3Rpb24odCl7cmV0dXJuIE4ucmVzb2x2ZSh0aGlzLHQpfSxJLnByb3RvdHlwZS5yYW5nZUhhc01hcms9ZnVuY3Rpb24odCxlLG4pe3ZhciByPSExO3JldHVybiBlPnQmJnRoaXMubm9kZXNCZXR3ZWVuKHQsZSwoZnVuY3Rpb24odCl7cmV0dXJuIG4uaXNJblNldCh0Lm1hcmtzKSYmKHI9ITApLCFyfSkpLHJ9LEIuaXNCbG9jay5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy50eXBlLmlzQmxvY2t9LEIuaXNUZXh0YmxvY2suZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudHlwZS5pc1RleHRibG9ja30sQi5pbmxpbmVDb250ZW50LmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLnR5cGUuaW5saW5lQ29udGVudH0sQi5pc0lubGluZS5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy50eXBlLmlzSW5saW5lfSxCLmlzVGV4dC5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy50eXBlLmlzVGV4dH0sQi5pc0xlYWYuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudHlwZS5pc0xlYWZ9LEIuaXNBdG9tLmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLnR5cGUuaXNBdG9tfSxJLnByb3RvdHlwZS50b1N0cmluZz1mdW5jdGlvbigpe2lmKHRoaXMudHlwZS5zcGVjLnRvRGVidWdTdHJpbmcpcmV0dXJuIHRoaXMudHlwZS5zcGVjLnRvRGVidWdTdHJpbmcodGhpcyk7dmFyIHQ9dGhpcy50eXBlLm5hbWU7cmV0dXJuIHRoaXMuY29udGVudC5zaXplJiYodCs9IigiK3RoaXMuY29udGVudC50b1N0cmluZ0lubmVyKCkrIikiKSxGKHRoaXMubWFya3MsdCl9LEkucHJvdG90eXBlLmNvbnRlbnRNYXRjaEF0PWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMudHlwZS5jb250ZW50TWF0Y2gubWF0Y2hGcmFnbWVudCh0aGlzLmNvbnRlbnQsMCx0KTtpZighZSl0aHJvdyBuZXcgRXJyb3IoIkNhbGxlZCBjb250ZW50TWF0Y2hBdCBvbiBhIG5vZGUgd2l0aCBpbnZhbGlkIGNvbnRlbnQiKTtyZXR1cm4gZX0sSS5wcm90b3R5cGUuY2FuUmVwbGFjZT1mdW5jdGlvbih0LGUsbixyLG8pe3ZvaWQgMD09PW4mJihuPXMuZW1wdHkpLHZvaWQgMD09PXImJihyPTApLHZvaWQgMD09PW8mJihvPW4uY2hpbGRDb3VudCk7dmFyIGk9dGhpcy5jb250ZW50TWF0Y2hBdCh0KS5tYXRjaEZyYWdtZW50KG4scixvKSxhPWkmJmkubWF0Y2hGcmFnbWVudCh0aGlzLmNvbnRlbnQsZSk7aWYoIWF8fCFhLnZhbGlkRW5kKXJldHVybiExO2Zvcih2YXIgYz1yO2M8bztjKyspaWYoIXRoaXMudHlwZS5hbGxvd3NNYXJrcyhuLmNoaWxkKGMpLm1hcmtzKSlyZXR1cm4hMTtyZXR1cm4hMH0sSS5wcm90b3R5cGUuY2FuUmVwbGFjZVdpdGg9ZnVuY3Rpb24odCxlLG4scil7aWYociYmIXRoaXMudHlwZS5hbGxvd3NNYXJrcyhyKSlyZXR1cm4hMTt2YXIgbz10aGlzLmNvbnRlbnRNYXRjaEF0KHQpLm1hdGNoVHlwZShuKSxpPW8mJm8ubWF0Y2hGcmFnbWVudCh0aGlzLmNvbnRlbnQsZSk7cmV0dXJuISFpJiZpLnZhbGlkRW5kfSxJLnByb3RvdHlwZS5jYW5BcHBlbmQ9ZnVuY3Rpb24odCl7cmV0dXJuIHQuY29udGVudC5zaXplP3RoaXMuY2FuUmVwbGFjZSh0aGlzLmNoaWxkQ291bnQsdGhpcy5jaGlsZENvdW50LHQuY29udGVudCk6dGhpcy50eXBlLmNvbXBhdGlibGVDb250ZW50KHQudHlwZSl9LEkucHJvdG90eXBlLmNoZWNrPWZ1bmN0aW9uKCl7aWYoIXRoaXMudHlwZS52YWxpZENvbnRlbnQodGhpcy5jb250ZW50KSl0aHJvdyBuZXcgUmFuZ2VFcnJvcigiSW52YWxpZCBjb250ZW50IGZvciBub2RlICIrdGhpcy50eXBlLm5hbWUrIjogIit0aGlzLmNvbnRlbnQudG9TdHJpbmcoKS5zbGljZSgwLDUwKSk7dGhpcy5jb250ZW50LmZvckVhY2goKGZ1bmN0aW9uKHQpe3JldHVybiB0LmNoZWNrKCl9KSl9LEkucHJvdG90eXBlLnRvSlNPTj1mdW5jdGlvbigpe3ZhciB0PXt0eXBlOnRoaXMudHlwZS5uYW1lfTtmb3IodmFyIGUgaW4gdGhpcy5hdHRycyl7dC5hdHRycz10aGlzLmF0dHJzO2JyZWFrfXJldHVybiB0aGlzLmNvbnRlbnQuc2l6ZSYmKHQuY29udGVudD10aGlzLmNvbnRlbnQudG9KU09OKCkpLHRoaXMubWFya3MubGVuZ3RoJiYodC5tYXJrcz10aGlzLm1hcmtzLm1hcCgoZnVuY3Rpb24odCl7cmV0dXJuIHQudG9KU09OKCl9KSkpLHR9LEkuZnJvbUpTT049ZnVuY3Rpb24odCxlKXtpZighZSl0aHJvdyBuZXcgUmFuZ2VFcnJvcigiSW52YWxpZCBpbnB1dCBmb3IgTm9kZS5mcm9tSlNPTiIpO3ZhciBuPW51bGw7aWYoZS5tYXJrcyl7aWYoIUFycmF5LmlzQXJyYXkoZS5tYXJrcykpdGhyb3cgbmV3IFJhbmdlRXJyb3IoIkludmFsaWQgbWFyayBkYXRhIGZvciBOb2RlLmZyb21KU09OIik7bj1lLm1hcmtzLm1hcCh0Lm1hcmtGcm9tSlNPTil9aWYoInRleHQiPT1lLnR5cGUpe2lmKCJzdHJpbmciIT10eXBlb2YgZS50ZXh0KXRocm93IG5ldyBSYW5nZUVycm9yKCJJbnZhbGlkIHRleHQgbm9kZSBpbiBKU09OIik7cmV0dXJuIHQudGV4dChlLnRleHQsbil9dmFyIHI9cy5mcm9tSlNPTih0LGUuY29udGVudCk7cmV0dXJuIHQubm9kZVR5cGUoZS50eXBlKS5jcmVhdGUoZS5hdHRycyxyLG4pfSxPYmplY3QuZGVmaW5lUHJvcGVydGllcyhJLnByb3RvdHlwZSxCKTt2YXIgXz1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKGUsbixyLG8pe2lmKHQuY2FsbCh0aGlzLGUsbixudWxsLG8pLCFyKXRocm93IG5ldyBSYW5nZUVycm9yKCJFbXB0eSB0ZXh0IG5vZGVzIGFyZSBub3QgYWxsb3dlZCIpO3RoaXMudGV4dD1yfXQmJihlLl9fcHJvdG9fXz10KSxlLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKHQmJnQucHJvdG90eXBlKSxlLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1lO3ZhciBuPXt0ZXh0Q29udGVudDp7Y29uZmlndXJhYmxlOiEwfSxub2RlU2l6ZTp7Y29uZmlndXJhYmxlOiEwfX07cmV0dXJuIGUucHJvdG90eXBlLnRvU3RyaW5nPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudHlwZS5zcGVjLnRvRGVidWdTdHJpbmc/dGhpcy50eXBlLnNwZWMudG9EZWJ1Z1N0cmluZyh0aGlzKTpGKHRoaXMubWFya3MsSlNPTi5zdHJpbmdpZnkodGhpcy50ZXh0KSl9LG4udGV4dENvbnRlbnQuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudGV4dH0sZS5wcm90b3R5cGUudGV4dEJldHdlZW49ZnVuY3Rpb24odCxlKXtyZXR1cm4gdGhpcy50ZXh0LnNsaWNlKHQsZSl9LG4ubm9kZVNpemUuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudGV4dC5sZW5ndGh9LGUucHJvdG90eXBlLm1hcms9ZnVuY3Rpb24odCl7cmV0dXJuIHQ9PXRoaXMubWFya3M/dGhpczpuZXcgZSh0aGlzLnR5cGUsdGhpcy5hdHRycyx0aGlzLnRleHQsdCl9LGUucHJvdG90eXBlLndpdGhUZXh0PWZ1bmN0aW9uKHQpe3JldHVybiB0PT10aGlzLnRleHQ/dGhpczpuZXcgZSh0aGlzLnR5cGUsdGhpcy5hdHRycyx0LHRoaXMubWFya3MpfSxlLnByb3RvdHlwZS5jdXQ9ZnVuY3Rpb24odCxlKXtyZXR1cm4gdm9pZCAwPT09dCYmKHQ9MCksdm9pZCAwPT09ZSYmKGU9dGhpcy50ZXh0Lmxlbmd0aCksMD09dCYmZT09dGhpcy50ZXh0Lmxlbmd0aD90aGlzOnRoaXMud2l0aFRleHQodGhpcy50ZXh0LnNsaWNlKHQsZSkpfSxlLnByb3RvdHlwZS5lcT1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5zYW1lTWFya3VwKHQpJiZ0aGlzLnRleHQ9PXQudGV4dH0sZS5wcm90b3R5cGUudG9KU09OPWZ1bmN0aW9uKCl7dmFyIGU9dC5wcm90b3R5cGUudG9KU09OLmNhbGwodGhpcyk7cmV0dXJuIGUudGV4dD10aGlzLnRleHQsZX0sT2JqZWN0LmRlZmluZVByb3BlcnRpZXMoZS5wcm90b3R5cGUsbiksZX0oSSk7ZnVuY3Rpb24gRih0LGUpe2Zvcih2YXIgbj10Lmxlbmd0aC0xO24+PTA7bi0tKWU9dFtuXS50eXBlLm5hbWUrIigiK2UrIikiO3JldHVybiBlfXZhciBqPWZ1bmN0aW9uKHQpe3RoaXMudmFsaWRFbmQ9dCx0aGlzLm5leHQ9W10sdGhpcy53cmFwQ2FjaGU9W119LCQ9e2lubGluZUNvbnRlbnQ6e2NvbmZpZ3VyYWJsZTohMH0sZGVmYXVsdFR5cGU6e2NvbmZpZ3VyYWJsZTohMH0sZWRnZUNvdW50Ontjb25maWd1cmFibGU6ITB9fTtqLnBhcnNlPWZ1bmN0aW9uKHQsZSl7dmFyIG49bmV3IFYodCxlKTtpZihudWxsPT1uLm5leHQpcmV0dXJuIGouZW1wdHk7dmFyIHI9cShuKTtuLm5leHQmJm4uZXJyKCJVbmV4cGVjdGVkIHRyYWlsaW5nIHRleHQiKTt2YXIgbz1RKFgocikpO3JldHVybiB0dChvLG4pLG99LGoucHJvdG90eXBlLm1hdGNoVHlwZT1mdW5jdGlvbih0KXtmb3IodmFyIGU9MDtlPHRoaXMubmV4dC5sZW5ndGg7ZSs9MilpZih0aGlzLm5leHRbZV09PXQpcmV0dXJuIHRoaXMubmV4dFtlKzFdO3JldHVybiBudWxsfSxqLnByb3RvdHlwZS5tYXRjaEZyYWdtZW50PWZ1bmN0aW9uKHQsZSxuKXt2b2lkIDA9PT1lJiYoZT0wKSx2b2lkIDA9PT1uJiYobj10LmNoaWxkQ291bnQpO2Zvcih2YXIgcj10aGlzLG89ZTtyJiZvPG47bysrKXI9ci5tYXRjaFR5cGUodC5jaGlsZChvKS50eXBlKTtyZXR1cm4gcn0sJC5pbmxpbmVDb250ZW50LmdldD1mdW5jdGlvbigpe3ZhciB0PXRoaXMubmV4dFswXTtyZXR1cm4hIXQmJnQuaXNJbmxpbmV9LCQuZGVmYXVsdFR5cGUuZ2V0PWZ1bmN0aW9uKCl7Zm9yKHZhciB0PTA7dDx0aGlzLm5leHQubGVuZ3RoO3QrPTIpe3ZhciBlPXRoaXMubmV4dFt0XTtpZighZS5pc1RleHQmJiFlLmhhc1JlcXVpcmVkQXR0cnMoKSlyZXR1cm4gZX19LGoucHJvdG90eXBlLmNvbXBhdGlibGU9ZnVuY3Rpb24odCl7Zm9yKHZhciBlPTA7ZTx0aGlzLm5leHQubGVuZ3RoO2UrPTIpZm9yKHZhciBuPTA7bjx0Lm5leHQubGVuZ3RoO24rPTIpaWYodGhpcy5uZXh0W2VdPT10Lm5leHRbbl0pcmV0dXJuITA7cmV0dXJuITF9LGoucHJvdG90eXBlLmZpbGxCZWZvcmU9ZnVuY3Rpb24odCxlLG4pe3ZvaWQgMD09PWUmJihlPSExKSx2b2lkIDA9PT1uJiYobj0wKTt2YXIgcj1bdGhpc107ZnVuY3Rpb24gbyhpLGEpe3ZhciBjPWkubWF0Y2hGcmFnbWVudCh0LG4pO2lmKGMmJighZXx8Yy52YWxpZEVuZCkpcmV0dXJuIHMuZnJvbShhLm1hcCgoZnVuY3Rpb24odCl7cmV0dXJuIHQuY3JlYXRlQW5kRmlsbCgpfSkpKTtmb3IodmFyIHU9MDt1PGkubmV4dC5sZW5ndGg7dSs9Mil7dmFyIGw9aS5uZXh0W3VdLGg9aS5uZXh0W3UrMV07aWYoIWwuaXNUZXh0JiYhbC5oYXNSZXF1aXJlZEF0dHJzKCkmJi0xPT1yLmluZGV4T2YoaCkpe3IucHVzaChoKTt2YXIgZj1vKGgsYS5jb25jYXQobCkpO2lmKGYpcmV0dXJuIGZ9fX1yZXR1cm4gbyh0aGlzLFtdKX0sai5wcm90b3R5cGUuZmluZFdyYXBwaW5nPWZ1bmN0aW9uKHQpe2Zvcih2YXIgZT0wO2U8dGhpcy53cmFwQ2FjaGUubGVuZ3RoO2UrPTIpaWYodGhpcy53cmFwQ2FjaGVbZV09PXQpcmV0dXJuIHRoaXMud3JhcENhY2hlW2UrMV07dmFyIG49dGhpcy5jb21wdXRlV3JhcHBpbmcodCk7cmV0dXJuIHRoaXMud3JhcENhY2hlLnB1c2godCxuKSxufSxqLnByb3RvdHlwZS5jb21wdXRlV3JhcHBpbmc9ZnVuY3Rpb24odCl7dmFyIGU9T2JqZWN0LmNyZWF0ZShudWxsKSxuPVt7bWF0Y2g6dGhpcyx0eXBlOm51bGwsdmlhOm51bGx9XTt3aGlsZShuLmxlbmd0aCl7dmFyIHI9bi5zaGlmdCgpLG89ci5tYXRjaDtpZihvLm1hdGNoVHlwZSh0KSl7Zm9yKHZhciBpPVtdLHM9cjtzLnR5cGU7cz1zLnZpYSlpLnB1c2gocy50eXBlKTtyZXR1cm4gaS5yZXZlcnNlKCl9Zm9yKHZhciBhPTA7YTxvLm5leHQubGVuZ3RoO2ErPTIpe3ZhciBjPW8ubmV4dFthXTtjLmlzTGVhZnx8Yy5oYXNSZXF1aXJlZEF0dHJzKCl8fGMubmFtZSBpbiBlfHxyLnR5cGUmJiFvLm5leHRbYSsxXS52YWxpZEVuZHx8KG4ucHVzaCh7bWF0Y2g6Yy5jb250ZW50TWF0Y2gsdHlwZTpjLHZpYTpyfSksZVtjLm5hbWVdPSEwKX19fSwkLmVkZ2VDb3VudC5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5uZXh0Lmxlbmd0aD4+MX0sai5wcm90b3R5cGUuZWRnZT1mdW5jdGlvbih0KXt2YXIgZT10PDwxO2lmKGU+PXRoaXMubmV4dC5sZW5ndGgpdGhyb3cgbmV3IFJhbmdlRXJyb3IoIlRoZXJlJ3Mgbm8gIit0KyJ0aCBlZGdlIGluIHRoaXMgY29udGVudCBtYXRjaCIpO3JldHVybnt0eXBlOnRoaXMubmV4dFtlXSxuZXh0OnRoaXMubmV4dFtlKzFdfX0sai5wcm90b3R5cGUudG9TdHJpbmc9ZnVuY3Rpb24oKXt2YXIgdD1bXTtmdW5jdGlvbiBlKG4pe3QucHVzaChuKTtmb3IodmFyIHI9MTtyPG4ubmV4dC5sZW5ndGg7cis9MiktMT09dC5pbmRleE9mKG4ubmV4dFtyXSkmJmUobi5uZXh0W3JdKX1yZXR1cm4gZSh0aGlzKSx0Lm1hcCgoZnVuY3Rpb24oZSxuKXtmb3IodmFyIHI9bisoZS52YWxpZEVuZD8iKiI6IiAiKSsiICIsbz0wO288ZS5uZXh0Lmxlbmd0aDtvKz0yKXIrPShvPyIsICI6IiIpK2UubmV4dFtvXS5uYW1lKyItPiIrdC5pbmRleE9mKGUubmV4dFtvKzFdKTtyZXR1cm4gcn0pKS5qb2luKCJcbiIpfSxPYmplY3QuZGVmaW5lUHJvcGVydGllcyhqLnByb3RvdHlwZSwkKSxqLmVtcHR5PW5ldyBqKCEwKTt2YXIgVj1mdW5jdGlvbih0LGUpe3RoaXMuc3RyaW5nPXQsdGhpcy5ub2RlVHlwZXM9ZSx0aGlzLmlubGluZT1udWxsLHRoaXMucG9zPTAsdGhpcy50b2tlbnM9dC5zcGxpdCgvXHMqKD89XGJ8XFd8JCkvKSwiIj09dGhpcy50b2tlbnNbdGhpcy50b2tlbnMubGVuZ3RoLTFdJiZ0aGlzLnRva2Vucy5wb3AoKSwiIj09dGhpcy50b2tlbnNbMF0mJnRoaXMudG9rZW5zLnVuc2hpZnQoKX0sTD17bmV4dDp7Y29uZmlndXJhYmxlOiEwfX07ZnVuY3Rpb24gcSh0KXt2YXIgZT1bXTtkb3tlLnB1c2goSih0KSl9d2hpbGUodC5lYXQoInwiKSk7cmV0dXJuIDE9PWUubGVuZ3RoP2VbMF06e3R5cGU6ImNob2ljZSIsZXhwcnM6ZX19ZnVuY3Rpb24gSih0KXt2YXIgZT1bXTtkb3tlLnB1c2goVyh0KSl9d2hpbGUodC5uZXh0JiYiKSIhPXQubmV4dCYmInwiIT10Lm5leHQpO3JldHVybiAxPT1lLmxlbmd0aD9lWzBdOnt0eXBlOiJzZXEiLGV4cHJzOmV9fWZ1bmN0aW9uIFcodCl7Zm9yKHZhciBlPUcodCk7OylpZih0LmVhdCgiKyIpKWU9e3R5cGU6InBsdXMiLGV4cHI6ZX07ZWxzZSBpZih0LmVhdCgiKiIpKWU9e3R5cGU6InN0YXIiLGV4cHI6ZX07ZWxzZSBpZih0LmVhdCgiPyIpKWU9e3R5cGU6Im9wdCIsZXhwcjplfTtlbHNle2lmKCF0LmVhdCgieyIpKWJyZWFrO2U9Syh0LGUpfXJldHVybiBlfWZ1bmN0aW9uIEgodCl7L1xELy50ZXN0KHQubmV4dCkmJnQuZXJyKCJFeHBlY3RlZCBudW1iZXIsIGdvdCAnIit0Lm5leHQrIiciKTt2YXIgZT1OdW1iZXIodC5uZXh0KTtyZXR1cm4gdC5wb3MrKyxlfWZ1bmN0aW9uIEsodCxlKXt2YXIgbj1IKHQpLHI9bjtyZXR1cm4gdC5lYXQoIiwiKSYmKHI9In0iIT10Lm5leHQ/SCh0KTotMSksdC5lYXQoIn0iKXx8dC5lcnIoIlVuY2xvc2VkIGJyYWNlZCByYW5nZSIpLHt0eXBlOiJyYW5nZSIsbWluOm4sbWF4OnIsZXhwcjplfX1mdW5jdGlvbiBVKHQsZSl7dmFyIG49dC5ub2RlVHlwZXMscj1uW2VdO2lmKHIpcmV0dXJuW3JdO3ZhciBvPVtdO2Zvcih2YXIgaSBpbiBuKXt2YXIgcz1uW2ldO3MuZ3JvdXBzLmluZGV4T2YoZSk+LTEmJm8ucHVzaChzKX1yZXR1cm4gMD09by5sZW5ndGgmJnQuZXJyKCJObyBub2RlIHR5cGUgb3IgZ3JvdXAgJyIrZSsiJyBmb3VuZCIpLG99ZnVuY3Rpb24gRyh0KXtpZih0LmVhdCgiKCIpKXt2YXIgZT1xKHQpO3JldHVybiB0LmVhdCgiKSIpfHx0LmVycigiTWlzc2luZyBjbG9zaW5nIHBhcmVuIiksZX1pZighL1xXLy50ZXN0KHQubmV4dCkpe3ZhciBuPVUodCx0Lm5leHQpLm1hcCgoZnVuY3Rpb24oZSl7cmV0dXJuIG51bGw9PXQuaW5saW5lP3QuaW5saW5lPWUuaXNJbmxpbmU6dC5pbmxpbmUhPWUuaXNJbmxpbmUmJnQuZXJyKCJNaXhpbmcgaW5saW5lIGFuZCBibG9jayBjb250ZW50Iikse3R5cGU6Im5hbWUiLHZhbHVlOmV9fSkpO3JldHVybiB0LnBvcysrLDE9PW4ubGVuZ3RoP25bMF06e3R5cGU6ImNob2ljZSIsZXhwcnM6bn19dC5lcnIoIlVuZXhwZWN0ZWQgdG9rZW4gJyIrdC5uZXh0KyInIil9ZnVuY3Rpb24gWCh0KXt2YXIgZT1bW11dO3JldHVybiBvKGkodCwwKSxuKCkpLGU7ZnVuY3Rpb24gbigpe3JldHVybiBlLnB1c2goW10pLTF9ZnVuY3Rpb24gcih0LG4scil7dmFyIG89e3Rlcm06cix0bzpufTtyZXR1cm4gZVt0XS5wdXNoKG8pLG99ZnVuY3Rpb24gbyh0LGUpe3QuZm9yRWFjaCgoZnVuY3Rpb24odCl7cmV0dXJuIHQudG89ZX0pKX1mdW5jdGlvbiBpKHQsZSl7aWYoImNob2ljZSI9PXQudHlwZSlyZXR1cm4gdC5leHBycy5yZWR1Y2UoKGZ1bmN0aW9uKHQsbil7cmV0dXJuIHQuY29uY2F0KGkobixlKSl9KSxbXSk7aWYoInNlcSI9PXQudHlwZSlmb3IodmFyIHM9MDs7cysrKXt2YXIgYT1pKHQuZXhwcnNbc10sZSk7aWYocz09dC5leHBycy5sZW5ndGgtMSlyZXR1cm4gYTtvKGEsZT1uKCkpfWVsc2V7aWYoInN0YXIiPT10LnR5cGUpe3ZhciBjPW4oKTtyZXR1cm4gcihlLGMpLG8oaSh0LmV4cHIsYyksYyksW3IoYyldfWlmKCJwbHVzIj09dC50eXBlKXt2YXIgdT1uKCk7cmV0dXJuIG8oaSh0LmV4cHIsZSksdSksbyhpKHQuZXhwcix1KSx1KSxbcih1KV19aWYoIm9wdCI9PXQudHlwZSlyZXR1cm5bcihlKV0uY29uY2F0KGkodC5leHByLGUpKTtpZigicmFuZ2UiPT10LnR5cGUpe2Zvcih2YXIgbD1lLGg9MDtoPHQubWluO2grKyl7dmFyIGY9bigpO28oaSh0LmV4cHIsbCksZiksbD1mfWlmKC0xPT10Lm1heClvKGkodC5leHByLGwpLGwpO2Vsc2UgZm9yKHZhciBwPXQubWluO3A8dC5tYXg7cCsrKXt2YXIgZD1uKCk7cihsLGQpLG8oaSh0LmV4cHIsbCksZCksbD1kfXJldHVybltyKGwpXX1pZigibmFtZSI9PXQudHlwZSlyZXR1cm5bcihlLG51bGwsdC52YWx1ZSldfX19ZnVuY3Rpb24gWSh0LGUpe3JldHVybiBlLXR9ZnVuY3Rpb24gWih0LGUpe3ZhciBuPVtdO3JldHVybiByKGUpLG4uc29ydChZKTtmdW5jdGlvbiByKGUpe3ZhciBvPXRbZV07aWYoMT09by5sZW5ndGgmJiFvWzBdLnRlcm0pcmV0dXJuIHIob1swXS50byk7bi5wdXNoKGUpO2Zvcih2YXIgaT0wO2k8by5sZW5ndGg7aSsrKXt2YXIgcz1vW2ldLGE9cy50ZXJtLGM9cy50bzthfHwtMSE9bi5pbmRleE9mKGMpfHxyKGMpfX19ZnVuY3Rpb24gUSh0KXt2YXIgZT1PYmplY3QuY3JlYXRlKG51bGwpO3JldHVybiBuKFoodCwwKSk7ZnVuY3Rpb24gbihyKXt2YXIgbz1bXTtyLmZvckVhY2goKGZ1bmN0aW9uKGUpe3RbZV0uZm9yRWFjaCgoZnVuY3Rpb24oZSl7dmFyIG49ZS50ZXJtLHI9ZS50bztpZihuKXt2YXIgaT1vLmluZGV4T2Yobikscz1pPi0xJiZvW2krMV07Wih0LHIpLmZvckVhY2goKGZ1bmN0aW9uKHQpe3N8fG8ucHVzaChuLHM9W10pLC0xPT1zLmluZGV4T2YodCkmJnMucHVzaCh0KX0pKX19KSl9KSk7Zm9yKHZhciBpPWVbci5qb2luKCIsIildPW5ldyBqKHIuaW5kZXhPZih0Lmxlbmd0aC0xKT4tMSkscz0wO3M8by5sZW5ndGg7cys9Mil7dmFyIGE9b1tzKzFdLnNvcnQoWSk7aS5uZXh0LnB1c2gob1tzXSxlW2Euam9pbigiLCIpXXx8bihhKSl9cmV0dXJuIGl9fWZ1bmN0aW9uIHR0KHQsZSl7Zm9yKHZhciBuPTAscj1bdF07bjxyLmxlbmd0aDtuKyspe2Zvcih2YXIgbz1yW25dLGk9IW8udmFsaWRFbmQscz1bXSxhPTA7YTxvLm5leHQubGVuZ3RoO2ErPTIpe3ZhciBjPW8ubmV4dFthXSx1PW8ubmV4dFthKzFdO3MucHVzaChjLm5hbWUpLCFpfHxjLmlzVGV4dHx8Yy5oYXNSZXF1aXJlZEF0dHJzKCl8fChpPSExKSwtMT09ci5pbmRleE9mKHUpJiZyLnB1c2godSl9aSYmZS5lcnIoIk9ubHkgbm9uLWdlbmVyYXRhYmxlIG5vZGVzICgiK3Muam9pbigiLCAiKSsiKSBpbiBhIHJlcXVpcmVkIHBvc2l0aW9uIChzZWUgaHR0cHM6Ly9wcm9zZW1pcnJvci5uZXQvZG9jcy9ndWlkZS8jZ2VuZXJhdGFibGUpIil9fWZ1bmN0aW9uIGV0KHQpe3ZhciBlPU9iamVjdC5jcmVhdGUobnVsbCk7Zm9yKHZhciBuIGluIHQpe3ZhciByPXRbbl07aWYoIXIuaGFzRGVmYXVsdClyZXR1cm4gbnVsbDtlW25dPXIuZGVmYXVsdH1yZXR1cm4gZX1mdW5jdGlvbiBudCh0LGUpe3ZhciBuPU9iamVjdC5jcmVhdGUobnVsbCk7Zm9yKHZhciByIGluIHQpe3ZhciBvPWUmJmVbcl07aWYodm9pZCAwPT09byl7dmFyIGk9dFtyXTtpZighaS5oYXNEZWZhdWx0KXRocm93IG5ldyBSYW5nZUVycm9yKCJObyB2YWx1ZSBzdXBwbGllZCBmb3IgYXR0cmlidXRlICIrcik7bz1pLmRlZmF1bHR9bltyXT1vfXJldHVybiBufWZ1bmN0aW9uIHJ0KHQpe3ZhciBlPU9iamVjdC5jcmVhdGUobnVsbCk7aWYodClmb3IodmFyIG4gaW4gdCllW25dPW5ldyBzdCh0W25dKTtyZXR1cm4gZX1MLm5leHQuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudG9rZW5zW3RoaXMucG9zXX0sVi5wcm90b3R5cGUuZWF0PWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLm5leHQ9PXQmJih0aGlzLnBvcysrfHwhMCl9LFYucHJvdG90eXBlLmVycj1mdW5jdGlvbih0KXt0aHJvdyBuZXcgU3ludGF4RXJyb3IodCsiIChpbiBjb250ZW50IGV4cHJlc3Npb24gJyIrdGhpcy5zdHJpbmcrIicpIil9LE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKFYucHJvdG90eXBlLEwpO3ZhciBvdD1mdW5jdGlvbih0LGUsbil7dGhpcy5uYW1lPXQsdGhpcy5zY2hlbWE9ZSx0aGlzLnNwZWM9bix0aGlzLmdyb3Vwcz1uLmdyb3VwP24uZ3JvdXAuc3BsaXQoIiAiKTpbXSx0aGlzLmF0dHJzPXJ0KG4uYXR0cnMpLHRoaXMuZGVmYXVsdEF0dHJzPWV0KHRoaXMuYXR0cnMpLHRoaXMuY29udGVudE1hdGNoPW51bGwsdGhpcy5tYXJrU2V0PW51bGwsdGhpcy5pbmxpbmVDb250ZW50PW51bGwsdGhpcy5pc0Jsb2NrPSEobi5pbmxpbmV8fCJ0ZXh0Ij09dCksdGhpcy5pc1RleHQ9InRleHQiPT10fSxpdD17aXNJbmxpbmU6e2NvbmZpZ3VyYWJsZTohMH0saXNUZXh0YmxvY2s6e2NvbmZpZ3VyYWJsZTohMH0saXNMZWFmOntjb25maWd1cmFibGU6ITB9LGlzQXRvbTp7Y29uZmlndXJhYmxlOiEwfX07aXQuaXNJbmxpbmUuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIXRoaXMuaXNCbG9ja30saXQuaXNUZXh0YmxvY2suZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuaXNCbG9jayYmdGhpcy5pbmxpbmVDb250ZW50fSxpdC5pc0xlYWYuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY29udGVudE1hdGNoPT1qLmVtcHR5fSxpdC5pc0F0b20uZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuaXNMZWFmfHx0aGlzLnNwZWMuYXRvbX0sb3QucHJvdG90eXBlLmhhc1JlcXVpcmVkQXR0cnM9ZnVuY3Rpb24oKXtmb3IodmFyIHQgaW4gdGhpcy5hdHRycylpZih0aGlzLmF0dHJzW3RdLmlzUmVxdWlyZWQpcmV0dXJuITA7cmV0dXJuITF9LG90LnByb3RvdHlwZS5jb21wYXRpYmxlQ29udGVudD1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcz09dHx8dGhpcy5jb250ZW50TWF0Y2guY29tcGF0aWJsZSh0LmNvbnRlbnRNYXRjaCl9LG90LnByb3RvdHlwZS5jb21wdXRlQXR0cnM9ZnVuY3Rpb24odCl7cmV0dXJuIXQmJnRoaXMuZGVmYXVsdEF0dHJzP3RoaXMuZGVmYXVsdEF0dHJzOm50KHRoaXMuYXR0cnMsdCl9LG90LnByb3RvdHlwZS5jcmVhdGU9ZnVuY3Rpb24odCxlLG4pe2lmKHRoaXMuaXNUZXh0KXRocm93IG5ldyBFcnJvcigiTm9kZVR5cGUuY3JlYXRlIGNhbid0IGNvbnN0cnVjdCB0ZXh0IG5vZGVzIik7cmV0dXJuIG5ldyBJKHRoaXMsdGhpcy5jb21wdXRlQXR0cnModCkscy5mcm9tKGUpLGguc2V0RnJvbShuKSl9LG90LnByb3RvdHlwZS5jcmVhdGVDaGVja2VkPWZ1bmN0aW9uKHQsZSxuKXtpZihlPXMuZnJvbShlKSwhdGhpcy52YWxpZENvbnRlbnQoZSkpdGhyb3cgbmV3IFJhbmdlRXJyb3IoIkludmFsaWQgY29udGVudCBmb3Igbm9kZSAiK3RoaXMubmFtZSk7cmV0dXJuIG5ldyBJKHRoaXMsdGhpcy5jb21wdXRlQXR0cnModCksZSxoLnNldEZyb20obikpfSxvdC5wcm90b3R5cGUuY3JlYXRlQW5kRmlsbD1mdW5jdGlvbih0LGUsbil7aWYodD10aGlzLmNvbXB1dGVBdHRycyh0KSxlPXMuZnJvbShlKSxlLnNpemUpe3ZhciByPXRoaXMuY29udGVudE1hdGNoLmZpbGxCZWZvcmUoZSk7aWYoIXIpcmV0dXJuIG51bGw7ZT1yLmFwcGVuZChlKX12YXIgbz10aGlzLmNvbnRlbnRNYXRjaC5tYXRjaEZyYWdtZW50KGUpLmZpbGxCZWZvcmUocy5lbXB0eSwhMCk7cmV0dXJuIG8/bmV3IEkodGhpcyx0LGUuYXBwZW5kKG8pLGguc2V0RnJvbShuKSk6bnVsbH0sb3QucHJvdG90eXBlLnZhbGlkQ29udGVudD1mdW5jdGlvbih0KXt2YXIgZT10aGlzLmNvbnRlbnRNYXRjaC5tYXRjaEZyYWdtZW50KHQpO2lmKCFlfHwhZS52YWxpZEVuZClyZXR1cm4hMTtmb3IodmFyIG49MDtuPHQuY2hpbGRDb3VudDtuKyspaWYoIXRoaXMuYWxsb3dzTWFya3ModC5jaGlsZChuKS5tYXJrcykpcmV0dXJuITE7cmV0dXJuITB9LG90LnByb3RvdHlwZS5hbGxvd3NNYXJrVHlwZT1mdW5jdGlvbih0KXtyZXR1cm4gbnVsbD09dGhpcy5tYXJrU2V0fHx0aGlzLm1hcmtTZXQuaW5kZXhPZih0KT4tMX0sb3QucHJvdG90eXBlLmFsbG93c01hcmtzPWZ1bmN0aW9uKHQpe2lmKG51bGw9PXRoaXMubWFya1NldClyZXR1cm4hMDtmb3IodmFyIGU9MDtlPHQubGVuZ3RoO2UrKylpZighdGhpcy5hbGxvd3NNYXJrVHlwZSh0W2VdLnR5cGUpKXJldHVybiExO3JldHVybiEwfSxvdC5wcm90b3R5cGUuYWxsb3dlZE1hcmtzPWZ1bmN0aW9uKHQpe2lmKG51bGw9PXRoaXMubWFya1NldClyZXR1cm4gdDtmb3IodmFyIGUsbj0wO248dC5sZW5ndGg7bisrKXRoaXMuYWxsb3dzTWFya1R5cGUodFtuXS50eXBlKT9lJiZlLnB1c2godFtuXSk6ZXx8KGU9dC5zbGljZSgwLG4pKTtyZXR1cm4gZT9lLmxlbmd0aD9lOmguZW1wdHk6dH0sb3QuY29tcGlsZT1mdW5jdGlvbih0LGUpe3ZhciBuPU9iamVjdC5jcmVhdGUobnVsbCk7dC5mb3JFYWNoKChmdW5jdGlvbih0LHIpe3JldHVybiBuW3RdPW5ldyBvdCh0LGUscil9KSk7dmFyIHI9ZS5zcGVjLnRvcE5vZGV8fCJkb2MiO2lmKCFuW3JdKXRocm93IG5ldyBSYW5nZUVycm9yKCJTY2hlbWEgaXMgbWlzc2luZyBpdHMgdG9wIG5vZGUgdHlwZSAoJyIrcisiJykiKTtpZighbi50ZXh0KXRocm93IG5ldyBSYW5nZUVycm9yKCJFdmVyeSBzY2hlbWEgbmVlZHMgYSAndGV4dCcgdHlwZSIpO2Zvcih2YXIgbyBpbiBuLnRleHQuYXR0cnMpdGhyb3cgbmV3IFJhbmdlRXJyb3IoIlRoZSB0ZXh0IG5vZGUgdHlwZSBzaG91bGQgbm90IGhhdmUgYXR0cmlidXRlcyIpO3JldHVybiBufSxPYmplY3QuZGVmaW5lUHJvcGVydGllcyhvdC5wcm90b3R5cGUsaXQpO3ZhciBzdD1mdW5jdGlvbih0KXt0aGlzLmhhc0RlZmF1bHQ9T2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHQsImRlZmF1bHQiKSx0aGlzLmRlZmF1bHQ9dC5kZWZhdWx0fSxhdD17aXNSZXF1aXJlZDp7Y29uZmlndXJhYmxlOiEwfX07YXQuaXNSZXF1aXJlZC5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4hdGhpcy5oYXNEZWZhdWx0fSxPYmplY3QuZGVmaW5lUHJvcGVydGllcyhzdC5wcm90b3R5cGUsYXQpO3ZhciBjdD1mdW5jdGlvbih0LGUsbixyKXt0aGlzLm5hbWU9dCx0aGlzLnNjaGVtYT1uLHRoaXMuc3BlYz1yLHRoaXMuYXR0cnM9cnQoci5hdHRycyksdGhpcy5yYW5rPWUsdGhpcy5leGNsdWRlZD1udWxsO3ZhciBvPWV0KHRoaXMuYXR0cnMpO3RoaXMuaW5zdGFuY2U9byYmbmV3IGgodGhpcyxvKX07Y3QucHJvdG90eXBlLmNyZWF0ZT1mdW5jdGlvbih0KXtyZXR1cm4hdCYmdGhpcy5pbnN0YW5jZT90aGlzLmluc3RhbmNlOm5ldyBoKHRoaXMsbnQodGhpcy5hdHRycyx0KSl9LGN0LmNvbXBpbGU9ZnVuY3Rpb24odCxlKXt2YXIgbj1PYmplY3QuY3JlYXRlKG51bGwpLHI9MDtyZXR1cm4gdC5mb3JFYWNoKChmdW5jdGlvbih0LG8pe3JldHVybiBuW3RdPW5ldyBjdCh0LHIrKyxlLG8pfSkpLG59LGN0LnByb3RvdHlwZS5yZW1vdmVGcm9tU2V0PWZ1bmN0aW9uKHQpe2Zvcih2YXIgZT0wO2U8dC5sZW5ndGg7ZSsrKWlmKHRbZV0udHlwZT09dGhpcylyZXR1cm4gdC5zbGljZSgwLGUpLmNvbmNhdCh0LnNsaWNlKGUrMSkpO3JldHVybiB0fSxjdC5wcm90b3R5cGUuaXNJblNldD1mdW5jdGlvbih0KXtmb3IodmFyIGU9MDtlPHQubGVuZ3RoO2UrKylpZih0W2VdLnR5cGU9PXRoaXMpcmV0dXJuIHRbZV19LGN0LnByb3RvdHlwZS5leGNsdWRlcz1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5leGNsdWRlZC5pbmRleE9mKHQpPi0xfTt2YXIgdXQ9ZnVuY3Rpb24odCl7Zm9yKHZhciBlIGluIHRoaXMuc3BlYz17fSx0KXRoaXMuc3BlY1tlXT10W2VdO3RoaXMuc3BlYy5ub2Rlcz1yWyJhIl0uZnJvbSh0Lm5vZGVzKSx0aGlzLnNwZWMubWFya3M9clsiYSJdLmZyb20odC5tYXJrcyksdGhpcy5ub2Rlcz1vdC5jb21waWxlKHRoaXMuc3BlYy5ub2Rlcyx0aGlzKSx0aGlzLm1hcmtzPWN0LmNvbXBpbGUodGhpcy5zcGVjLm1hcmtzLHRoaXMpO3ZhciBuPU9iamVjdC5jcmVhdGUobnVsbCk7Zm9yKHZhciBvIGluIHRoaXMubm9kZXMpe2lmKG8gaW4gdGhpcy5tYXJrcyl0aHJvdyBuZXcgUmFuZ2VFcnJvcihvKyIgY2FuIG5vdCBiZSBib3RoIGEgbm9kZSBhbmQgYSBtYXJrIik7dmFyIGk9dGhpcy5ub2Rlc1tvXSxzPWkuc3BlYy5jb250ZW50fHwiIixhPWkuc3BlYy5tYXJrcztpLmNvbnRlbnRNYXRjaD1uW3NdfHwobltzXT1qLnBhcnNlKHMsdGhpcy5ub2RlcykpLGkuaW5saW5lQ29udGVudD1pLmNvbnRlbnRNYXRjaC5pbmxpbmVDb250ZW50LGkubWFya1NldD0iXyI9PWE/bnVsbDphP2x0KHRoaXMsYS5zcGxpdCgiICIpKToiIiE9YSYmaS5pbmxpbmVDb250ZW50P251bGw6W119Zm9yKHZhciBjIGluIHRoaXMubWFya3Mpe3ZhciB1PXRoaXMubWFya3NbY10sbD11LnNwZWMuZXhjbHVkZXM7dS5leGNsdWRlZD1udWxsPT1sP1t1XToiIj09bD9bXTpsdCh0aGlzLGwuc3BsaXQoIiAiKSl9dGhpcy5ub2RlRnJvbUpTT049dGhpcy5ub2RlRnJvbUpTT04uYmluZCh0aGlzKSx0aGlzLm1hcmtGcm9tSlNPTj10aGlzLm1hcmtGcm9tSlNPTi5iaW5kKHRoaXMpLHRoaXMudG9wTm9kZVR5cGU9dGhpcy5ub2Rlc1t0aGlzLnNwZWMudG9wTm9kZXx8ImRvYyJdLHRoaXMuY2FjaGVkPU9iamVjdC5jcmVhdGUobnVsbCksdGhpcy5jYWNoZWQud3JhcHBpbmdzPU9iamVjdC5jcmVhdGUobnVsbCl9O2Z1bmN0aW9uIGx0KHQsZSl7Zm9yKHZhciBuPVtdLHI9MDtyPGUubGVuZ3RoO3IrKyl7dmFyIG89ZVtyXSxpPXQubWFya3Nbb10scz1pO2lmKGkpbi5wdXNoKGkpO2Vsc2UgZm9yKHZhciBhIGluIHQubWFya3Mpe3ZhciBjPXQubWFya3NbYV07KCJfIj09b3x8Yy5zcGVjLmdyb3VwJiZjLnNwZWMuZ3JvdXAuc3BsaXQoIiAiKS5pbmRleE9mKG8pPi0xKSYmbi5wdXNoKHM9Yyl9aWYoIXMpdGhyb3cgbmV3IFN5bnRheEVycm9yKCJVbmtub3duIG1hcmsgdHlwZTogJyIrZVtyXSsiJyIpfXJldHVybiBufXV0LnByb3RvdHlwZS5ub2RlPWZ1bmN0aW9uKHQsZSxuLHIpe2lmKCJzdHJpbmciPT10eXBlb2YgdCl0PXRoaXMubm9kZVR5cGUodCk7ZWxzZXtpZighKHQgaW5zdGFuY2VvZiBvdCkpdGhyb3cgbmV3IFJhbmdlRXJyb3IoIkludmFsaWQgbm9kZSB0eXBlOiAiK3QpO2lmKHQuc2NoZW1hIT10aGlzKXRocm93IG5ldyBSYW5nZUVycm9yKCJOb2RlIHR5cGUgZnJvbSBkaWZmZXJlbnQgc2NoZW1hIHVzZWQgKCIrdC5uYW1lKyIpIil9cmV0dXJuIHQuY3JlYXRlQ2hlY2tlZChlLG4scil9LHV0LnByb3RvdHlwZS50ZXh0PWZ1bmN0aW9uKHQsZSl7dmFyIG49dGhpcy5ub2Rlcy50ZXh0O3JldHVybiBuZXcgXyhuLG4uZGVmYXVsdEF0dHJzLHQsaC5zZXRGcm9tKGUpKX0sdXQucHJvdG90eXBlLm1hcms9ZnVuY3Rpb24odCxlKXtyZXR1cm4ic3RyaW5nIj09dHlwZW9mIHQmJih0PXRoaXMubWFya3NbdF0pLHQuY3JlYXRlKGUpfSx1dC5wcm90b3R5cGUubm9kZUZyb21KU09OPWZ1bmN0aW9uKHQpe3JldHVybiBJLmZyb21KU09OKHRoaXMsdCl9LHV0LnByb3RvdHlwZS5tYXJrRnJvbUpTT049ZnVuY3Rpb24odCl7cmV0dXJuIGguZnJvbUpTT04odGhpcyx0KX0sdXQucHJvdG90eXBlLm5vZGVUeXBlPWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMubm9kZXNbdF07aWYoIWUpdGhyb3cgbmV3IFJhbmdlRXJyb3IoIlVua25vd24gbm9kZSB0eXBlOiAiK3QpO3JldHVybiBlfTt2YXIgaHQ9ZnVuY3Rpb24odCxlKXt2YXIgbj10aGlzO3RoaXMuc2NoZW1hPXQsdGhpcy5ydWxlcz1lLHRoaXMudGFncz1bXSx0aGlzLnN0eWxlcz1bXSxlLmZvckVhY2goKGZ1bmN0aW9uKHQpe3QudGFnP24udGFncy5wdXNoKHQpOnQuc3R5bGUmJm4uc3R5bGVzLnB1c2godCl9KSksdGhpcy5ub3JtYWxpemVMaXN0cz0hdGhpcy50YWdzLnNvbWUoKGZ1bmN0aW9uKGUpe2lmKCEvXih1bHxvbClcYi8udGVzdChlLnRhZyl8fCFlLm5vZGUpcmV0dXJuITE7dmFyIG49dC5ub2Rlc1tlLm5vZGVdO3JldHVybiBuLmNvbnRlbnRNYXRjaC5tYXRjaFR5cGUobil9KSl9O2h0LnByb3RvdHlwZS5wYXJzZT1mdW5jdGlvbih0LGUpe3ZvaWQgMD09PWUmJihlPXt9KTt2YXIgbj1uZXcgYnQodGhpcyxlLCExKTtyZXR1cm4gbi5hZGRBbGwodCxudWxsLGUuZnJvbSxlLnRvKSxuLmZpbmlzaCgpfSxodC5wcm90b3R5cGUucGFyc2VTbGljZT1mdW5jdGlvbih0LGUpe3ZvaWQgMD09PWUmJihlPXt9KTt2YXIgbj1uZXcgYnQodGhpcyxlLCEwKTtyZXR1cm4gbi5hZGRBbGwodCxudWxsLGUuZnJvbSxlLnRvKSxwLm1heE9wZW4obi5maW5pc2goKSl9LGh0LnByb3RvdHlwZS5tYXRjaFRhZz1mdW5jdGlvbih0LGUpe2Zvcih2YXIgbj0wO248dGhpcy50YWdzLmxlbmd0aDtuKyspe3ZhciByPXRoaXMudGFnc1tuXTtpZihTdCh0LHIudGFnKSYmKHZvaWQgMD09PXIubmFtZXNwYWNlfHx0Lm5hbWVzcGFjZVVSST09ci5uYW1lc3BhY2UpJiYoIXIuY29udGV4dHx8ZS5tYXRjaGVzQ29udGV4dChyLmNvbnRleHQpKSl7aWYoci5nZXRBdHRycyl7dmFyIG89ci5nZXRBdHRycyh0KTtpZighMT09PW8pY29udGludWU7ci5hdHRycz1vfXJldHVybiByfX19LGh0LnByb3RvdHlwZS5tYXRjaFN0eWxlPWZ1bmN0aW9uKHQsZSxuKXtmb3IodmFyIHI9MDtyPHRoaXMuc3R5bGVzLmxlbmd0aDtyKyspe3ZhciBvPXRoaXMuc3R5bGVzW3JdO2lmKCEoMCE9by5zdHlsZS5pbmRleE9mKHQpfHxvLmNvbnRleHQmJiFuLm1hdGNoZXNDb250ZXh0KG8uY29udGV4dCl8fG8uc3R5bGUubGVuZ3RoPnQubGVuZ3RoJiYoNjEhPW8uc3R5bGUuY2hhckNvZGVBdCh0Lmxlbmd0aCl8fG8uc3R5bGUuc2xpY2UodC5sZW5ndGgrMSkhPWUpKSl7aWYoby5nZXRBdHRycyl7dmFyIGk9by5nZXRBdHRycyhlKTtpZighMT09PWkpY29udGludWU7by5hdHRycz1pfXJldHVybiBvfX19LGh0LnNjaGVtYVJ1bGVzPWZ1bmN0aW9uKHQpe3ZhciBlPVtdO2Z1bmN0aW9uIG4odCl7Zm9yKHZhciBuPW51bGw9PXQucHJpb3JpdHk/NTA6dC5wcmlvcml0eSxyPTA7cjxlLmxlbmd0aDtyKyspe3ZhciBvPWVbcl0saT1udWxsPT1vLnByaW9yaXR5PzUwOm8ucHJpb3JpdHk7aWYoaTxuKWJyZWFrfWUuc3BsaWNlKHIsMCx0KX12YXIgcj1mdW5jdGlvbihlKXt2YXIgcj10Lm1hcmtzW2VdLnNwZWMucGFyc2VET007ciYmci5mb3JFYWNoKChmdW5jdGlvbih0KXtuKHQ9T3QodCkpLHQubWFyaz1lfSkpfTtmb3IodmFyIG8gaW4gdC5tYXJrcylyKG8pO3ZhciBpPWZ1bmN0aW9uKGUpe3ZhciByPXQubm9kZXNbc10uc3BlYy5wYXJzZURPTTtyJiZyLmZvckVhY2goKGZ1bmN0aW9uKHQpe24odD1PdCh0KSksdC5ub2RlPXN9KSl9O2Zvcih2YXIgcyBpbiB0Lm5vZGVzKWkoKTtyZXR1cm4gZX0saHQuZnJvbVNjaGVtYT1mdW5jdGlvbih0KXtyZXR1cm4gdC5jYWNoZWQuZG9tUGFyc2VyfHwodC5jYWNoZWQuZG9tUGFyc2VyPW5ldyBodCh0LGh0LnNjaGVtYVJ1bGVzKHQpKSl9O3ZhciBmdD17YWRkcmVzczohMCxhcnRpY2xlOiEwLGFzaWRlOiEwLGJsb2NrcXVvdGU6ITAsY2FudmFzOiEwLGRkOiEwLGRpdjohMCxkbDohMCxmaWVsZHNldDohMCxmaWdjYXB0aW9uOiEwLGZpZ3VyZTohMCxmb290ZXI6ITAsZm9ybTohMCxoMTohMCxoMjohMCxoMzohMCxoNDohMCxoNTohMCxoNjohMCxoZWFkZXI6ITAsaGdyb3VwOiEwLGhyOiEwLGxpOiEwLG5vc2NyaXB0OiEwLG9sOiEwLG91dHB1dDohMCxwOiEwLHByZTohMCxzZWN0aW9uOiEwLHRhYmxlOiEwLHRmb290OiEwLHVsOiEwfSxwdD17aGVhZDohMCxub3NjcmlwdDohMCxvYmplY3Q6ITAsc2NyaXB0OiEwLHN0eWxlOiEwLHRpdGxlOiEwfSxkdD17b2w6ITAsdWw6ITB9LHZ0PTEsbXQ9MixndD00O2Z1bmN0aW9uIHl0KHQpe3JldHVybih0P3Z0OjApfCgiZnVsbCI9PT10P210OjApfXZhciB3dD1mdW5jdGlvbih0LGUsbixyLG8saSxzKXt0aGlzLnR5cGU9dCx0aGlzLmF0dHJzPWUsdGhpcy5zb2xpZD1vLHRoaXMubWF0Y2g9aXx8KHMmZ3Q/bnVsbDp0LmNvbnRlbnRNYXRjaCksdGhpcy5vcHRpb25zPXMsdGhpcy5jb250ZW50PVtdLHRoaXMubWFya3M9bix0aGlzLmFjdGl2ZU1hcmtzPWgubm9uZSx0aGlzLnBlbmRpbmdNYXJrcz1yfTt3dC5wcm90b3R5cGUuZmluZFdyYXBwaW5nPWZ1bmN0aW9uKHQpe2lmKCF0aGlzLm1hdGNoKXtpZighdGhpcy50eXBlKXJldHVybltdO3ZhciBlPXRoaXMudHlwZS5jb250ZW50TWF0Y2guZmlsbEJlZm9yZShzLmZyb20odCkpO2lmKCFlKXt2YXIgbixyPXRoaXMudHlwZS5jb250ZW50TWF0Y2g7cmV0dXJuKG49ci5maW5kV3JhcHBpbmcodC50eXBlKSk/KHRoaXMubWF0Y2g9cixuKTpudWxsfXRoaXMubWF0Y2g9dGhpcy50eXBlLmNvbnRlbnRNYXRjaC5tYXRjaEZyYWdtZW50KGUpfXJldHVybiB0aGlzLm1hdGNoLmZpbmRXcmFwcGluZyh0LnR5cGUpfSx3dC5wcm90b3R5cGUuZmluaXNoPWZ1bmN0aW9uKHQpe2lmKCEodGhpcy5vcHRpb25zJnZ0KSl7dmFyIGUsbj10aGlzLmNvbnRlbnRbdGhpcy5jb250ZW50Lmxlbmd0aC0xXTtuJiZuLmlzVGV4dCYmKGU9L1sgXHRcclxuXHUwMDBjXSskLy5leGVjKG4udGV4dCkpJiYobi50ZXh0Lmxlbmd0aD09ZVswXS5sZW5ndGg/dGhpcy5jb250ZW50LnBvcCgpOnRoaXMuY29udGVudFt0aGlzLmNvbnRlbnQubGVuZ3RoLTFdPW4ud2l0aFRleHQobi50ZXh0LnNsaWNlKDAsbi50ZXh0Lmxlbmd0aC1lWzBdLmxlbmd0aCkpKX12YXIgcj1zLmZyb20odGhpcy5jb250ZW50KTtyZXR1cm4hdCYmdGhpcy5tYXRjaCYmKHI9ci5hcHBlbmQodGhpcy5tYXRjaC5maWxsQmVmb3JlKHMuZW1wdHksITApKSksdGhpcy50eXBlP3RoaXMudHlwZS5jcmVhdGUodGhpcy5hdHRycyxyLHRoaXMubWFya3MpOnJ9LHd0LnByb3RvdHlwZS5hcHBseVBlbmRpbmc9ZnVuY3Rpb24odCl7Zm9yKHZhciBlPTAsbj10aGlzLnBlbmRpbmdNYXJrcztlPG4ubGVuZ3RoO2UrKyl7dmFyIHI9bltlXTsodGhpcy50eXBlP3RoaXMudHlwZS5hbGxvd3NNYXJrVHlwZShyLnR5cGUpOk10KHIudHlwZSx0KSkmJiFyLmlzSW5TZXQodGhpcy5hY3RpdmVNYXJrcykmJih0aGlzLmFjdGl2ZU1hcmtzPXIuYWRkVG9TZXQodGhpcy5hY3RpdmVNYXJrcyksdGhpcy5wZW5kaW5nTWFya3M9ci5yZW1vdmVGcm9tU2V0KHRoaXMucGVuZGluZ01hcmtzKSl9fTt2YXIgYnQ9ZnVuY3Rpb24odCxlLG4pe3RoaXMucGFyc2VyPXQsdGhpcy5vcHRpb25zPWUsdGhpcy5pc09wZW49bjt2YXIgcixvPWUudG9wTm9kZSxpPXl0KGUucHJlc2VydmVXaGl0ZXNwYWNlKXwobj9ndDowKTtyPW8/bmV3IHd0KG8udHlwZSxvLmF0dHJzLGgubm9uZSxoLm5vbmUsITAsZS50b3BNYXRjaHx8by50eXBlLmNvbnRlbnRNYXRjaCxpKTpuZXcgd3Qobj9udWxsOnQuc2NoZW1hLnRvcE5vZGVUeXBlLG51bGwsaC5ub25lLGgubm9uZSwhMCxudWxsLGkpLHRoaXMubm9kZXM9W3JdLHRoaXMub3Blbj0wLHRoaXMuZmluZD1lLmZpbmRQb3NpdGlvbnMsdGhpcy5uZWVkc0Jsb2NrPSExfSx4dD17dG9wOntjb25maWd1cmFibGU6ITB9LGN1cnJlbnRQb3M6e2NvbmZpZ3VyYWJsZTohMH19O2Z1bmN0aW9uIGt0KHQpe2Zvcih2YXIgZT10LmZpcnN0Q2hpbGQsbj1udWxsO2U7ZT1lLm5leHRTaWJsaW5nKXt2YXIgcj0xPT1lLm5vZGVUeXBlP2Uubm9kZU5hbWUudG9Mb3dlckNhc2UoKTpudWxsO3ImJmR0Lmhhc093blByb3BlcnR5KHIpJiZuPyhuLmFwcGVuZENoaWxkKGUpLGU9bik6ImxpIj09cj9uPWU6ciYmKG49bnVsbCl9fWZ1bmN0aW9uIFN0KHQsZSl7cmV0dXJuKHQubWF0Y2hlc3x8dC5tc01hdGNoZXNTZWxlY3Rvcnx8dC53ZWJraXRNYXRjaGVzU2VsZWN0b3J8fHQubW96TWF0Y2hlc1NlbGVjdG9yKS5jYWxsKHQsZSl9ZnVuY3Rpb24gQ3QodCl7dmFyIGUsbj0vXHMqKFtcdy1dKylccyo6XHMqKFteO10rKS9nLHI9W107d2hpbGUoZT1uLmV4ZWModCkpci5wdXNoKGVbMV0sZVsyXS50cmltKCkpO3JldHVybiByfWZ1bmN0aW9uIE90KHQpe3ZhciBlPXt9O2Zvcih2YXIgbiBpbiB0KWVbbl09dFtuXTtyZXR1cm4gZX1mdW5jdGlvbiBNdCh0LGUpe3ZhciBuPWUuc2NoZW1hLm5vZGVzLHI9ZnVuY3Rpb24ocil7dmFyIG89bltyXTtpZihvLmFsbG93c01hcmtUeXBlKHQpKXt2YXIgaT1bXSxzPWZ1bmN0aW9uKHQpe2kucHVzaCh0KTtmb3IodmFyIG49MDtuPHQuZWRnZUNvdW50O24rKyl7dmFyIHI9dC5lZGdlKG4pLG89ci50eXBlLGE9ci5uZXh0O2lmKG89PWUpcmV0dXJuITA7aWYoaS5pbmRleE9mKGEpPDAmJnMoYSkpcmV0dXJuITB9fTtyZXR1cm4gcyhvLmNvbnRlbnRNYXRjaCk/e3Y6ITB9OnZvaWQgMH19O2Zvcih2YXIgbyBpbiBuKXt2YXIgaT1yKG8pO2lmKGkpcmV0dXJuIGkudn19eHQudG9wLmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLm5vZGVzW3RoaXMub3Blbl19LGJ0LnByb3RvdHlwZS5hZGRET009ZnVuY3Rpb24odCl7aWYoMz09dC5ub2RlVHlwZSl0aGlzLmFkZFRleHROb2RlKHQpO2Vsc2UgaWYoMT09dC5ub2RlVHlwZSl7dmFyIGU9dC5nZXRBdHRyaWJ1dGUoInN0eWxlIiksbj1lP3RoaXMucmVhZFN0eWxlcyhDdChlKSk6bnVsbCxyPXRoaXMudG9wO2lmKG51bGwhPW4pZm9yKHZhciBvPTA7bzxuLmxlbmd0aDtvKyspdGhpcy5hZGRQZW5kaW5nTWFyayhuW29dKTtpZih0aGlzLmFkZEVsZW1lbnQodCksbnVsbCE9bilmb3IodmFyIGk9MDtpPG4ubGVuZ3RoO2krKyl0aGlzLnJlbW92ZVBlbmRpbmdNYXJrKG5baV0scil9fSxidC5wcm90b3R5cGUuYWRkVGV4dE5vZGU9ZnVuY3Rpb24odCl7dmFyIGU9dC5ub2RlVmFsdWUsbj10aGlzLnRvcDtpZigobi50eXBlP24udHlwZS5pbmxpbmVDb250ZW50Om4uY29udGVudC5sZW5ndGgmJm4uY29udGVudFswXS5pc0lubGluZSl8fC9bXiBcdFxyXG5cdTAwMGNdLy50ZXN0KGUpKXtpZihuLm9wdGlvbnMmdnQpbi5vcHRpb25zJm10fHwoZT1lLnJlcGxhY2UoL1xyP1xufFxyL2csIiAiKSk7ZWxzZSBpZihlPWUucmVwbGFjZSgvWyBcdFxyXG5cdTAwMGNdKy9nLCIgIiksL15bIFx0XHJcblx1MDAwY10vLnRlc3QoZSkmJnRoaXMub3Blbj09dGhpcy5ub2Rlcy5sZW5ndGgtMSl7dmFyIHI9bi5jb250ZW50W24uY29udGVudC5sZW5ndGgtMV0sbz10LnByZXZpb3VzU2libGluZzsoIXJ8fG8mJiJCUiI9PW8ubm9kZU5hbWV8fHIuaXNUZXh0JiYvWyBcdFxyXG5cdTAwMGNdJC8udGVzdChyLnRleHQpKSYmKGU9ZS5zbGljZSgxKSl9ZSYmdGhpcy5pbnNlcnROb2RlKHRoaXMucGFyc2VyLnNjaGVtYS50ZXh0KGUpKSx0aGlzLmZpbmRJblRleHQodCl9ZWxzZSB0aGlzLmZpbmRJbnNpZGUodCl9LGJ0LnByb3RvdHlwZS5hZGRFbGVtZW50PWZ1bmN0aW9uKHQpe3ZhciBlPXQubm9kZU5hbWUudG9Mb3dlckNhc2UoKTtkdC5oYXNPd25Qcm9wZXJ0eShlKSYmdGhpcy5ub3JtYWxpemVMaXN0cyYma3QodCk7dmFyIG49dGhpcy5vcHRpb25zLnJ1bGVGcm9tTm9kZSYmdGhpcy5vcHRpb25zLnJ1bGVGcm9tTm9kZSh0KXx8dGhpcy5wYXJzZXIubWF0Y2hUYWcodCx0aGlzKTtpZihuP24uaWdub3JlOnB0Lmhhc093blByb3BlcnR5KGUpKXRoaXMuZmluZEluc2lkZSh0KTtlbHNlIGlmKCFufHxuLnNraXB8fG4uY2xvc2VQYXJlbnQpe24mJm4uY2xvc2VQYXJlbnQ/dGhpcy5vcGVuPU1hdGgubWF4KDAsdGhpcy5vcGVuLTEpOm4mJm4uc2tpcC5ub2RlVHlwZSYmKHQ9bi5za2lwKTt2YXIgcixvPXRoaXMudG9wLGk9dGhpcy5uZWVkc0Jsb2NrO2lmKGZ0Lmhhc093blByb3BlcnR5KGUpKXI9ITAsby50eXBlfHwodGhpcy5uZWVkc0Jsb2NrPSEwKTtlbHNlIGlmKCF0LmZpcnN0Q2hpbGQpcmV0dXJuIHZvaWQgdGhpcy5sZWFmRmFsbGJhY2sodCk7dGhpcy5hZGRBbGwodCksciYmdGhpcy5zeW5jKG8pLHRoaXMubmVlZHNCbG9jaz1pfWVsc2UgdGhpcy5hZGRFbGVtZW50QnlSdWxlKHQsbil9LGJ0LnByb3RvdHlwZS5sZWFmRmFsbGJhY2s9ZnVuY3Rpb24odCl7IkJSIj09dC5ub2RlTmFtZSYmdGhpcy50b3AudHlwZSYmdGhpcy50b3AudHlwZS5pbmxpbmVDb250ZW50JiZ0aGlzLmFkZFRleHROb2RlKHQub3duZXJEb2N1bWVudC5jcmVhdGVUZXh0Tm9kZSgiXG4iKSl9LGJ0LnByb3RvdHlwZS5yZWFkU3R5bGVzPWZ1bmN0aW9uKHQpe2Zvcih2YXIgZT1oLm5vbmUsbj0wO248dC5sZW5ndGg7bis9Mil7dmFyIHI9dGhpcy5wYXJzZXIubWF0Y2hTdHlsZSh0W25dLHRbbisxXSx0aGlzKTtpZihyKXtpZihyLmlnbm9yZSlyZXR1cm4gbnVsbDtlPXRoaXMucGFyc2VyLnNjaGVtYS5tYXJrc1tyLm1hcmtdLmNyZWF0ZShyLmF0dHJzKS5hZGRUb1NldChlKX19cmV0dXJuIGV9LGJ0LnByb3RvdHlwZS5hZGRFbGVtZW50QnlSdWxlPWZ1bmN0aW9uKHQsZSl7dmFyIG4scixvLGkscz10aGlzO2Uubm9kZT8ocj10aGlzLnBhcnNlci5zY2hlbWEubm9kZXNbZS5ub2RlXSxyLmlzTGVhZj90aGlzLmluc2VydE5vZGUoci5jcmVhdGUoZS5hdHRycykpfHx0aGlzLmxlYWZGYWxsYmFjayh0KTpuPXRoaXMuZW50ZXIocixlLmF0dHJzLGUucHJlc2VydmVXaGl0ZXNwYWNlKSk6KG89dGhpcy5wYXJzZXIuc2NoZW1hLm1hcmtzW2UubWFya10saT1vLmNyZWF0ZShlLmF0dHJzKSx0aGlzLmFkZFBlbmRpbmdNYXJrKGkpKTt2YXIgYT10aGlzLnRvcDtpZihyJiZyLmlzTGVhZil0aGlzLmZpbmRJbnNpZGUodCk7ZWxzZSBpZihlLmdldENvbnRlbnQpdGhpcy5maW5kSW5zaWRlKHQpLGUuZ2V0Q29udGVudCh0LHRoaXMucGFyc2VyLnNjaGVtYSkuZm9yRWFjaCgoZnVuY3Rpb24odCl7cmV0dXJuIHMuaW5zZXJ0Tm9kZSh0KX0pKTtlbHNle3ZhciBjPWUuY29udGVudEVsZW1lbnQ7InN0cmluZyI9PXR5cGVvZiBjP2M9dC5xdWVyeVNlbGVjdG9yKGMpOiJmdW5jdGlvbiI9PXR5cGVvZiBjJiYoYz1jKHQpKSxjfHwoYz10KSx0aGlzLmZpbmRBcm91bmQodCxjLCEwKSx0aGlzLmFkZEFsbChjLG4pfW4mJih0aGlzLnN5bmMoYSksdGhpcy5vcGVuLS0pLGkmJnRoaXMucmVtb3ZlUGVuZGluZ01hcmsoaSxhKX0sYnQucHJvdG90eXBlLmFkZEFsbD1mdW5jdGlvbih0LGUsbixyKXtmb3IodmFyIG89bnx8MCxpPW4/dC5jaGlsZE5vZGVzW25dOnQuZmlyc3RDaGlsZCxzPW51bGw9PXI/bnVsbDp0LmNoaWxkTm9kZXNbcl07aSE9cztpPWkubmV4dFNpYmxpbmcsKytvKXRoaXMuZmluZEF0UG9pbnQodCxvKSx0aGlzLmFkZERPTShpKSxlJiZmdC5oYXNPd25Qcm9wZXJ0eShpLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCkpJiZ0aGlzLnN5bmMoZSk7dGhpcy5maW5kQXRQb2ludCh0LG8pfSxidC5wcm90b3R5cGUuZmluZFBsYWNlPWZ1bmN0aW9uKHQpe2Zvcih2YXIgZSxuLHI9dGhpcy5vcGVuO3I+PTA7ci0tKXt2YXIgbz10aGlzLm5vZGVzW3JdLGk9by5maW5kV3JhcHBpbmcodCk7aWYoaSYmKCFlfHxlLmxlbmd0aD5pLmxlbmd0aCkmJihlPWksbj1vLCFpLmxlbmd0aCkpYnJlYWs7aWYoby5zb2xpZClicmVha31pZighZSlyZXR1cm4hMTt0aGlzLnN5bmMobik7Zm9yKHZhciBzPTA7czxlLmxlbmd0aDtzKyspdGhpcy5lbnRlcklubmVyKGVbc10sbnVsbCwhMSk7cmV0dXJuITB9LGJ0LnByb3RvdHlwZS5pbnNlcnROb2RlPWZ1bmN0aW9uKHQpe2lmKHQuaXNJbmxpbmUmJnRoaXMubmVlZHNCbG9jayYmIXRoaXMudG9wLnR5cGUpe3ZhciBlPXRoaXMudGV4dGJsb2NrRnJvbUNvbnRleHQoKTtlJiZ0aGlzLmVudGVySW5uZXIoZSl9aWYodGhpcy5maW5kUGxhY2UodCkpe3RoaXMuY2xvc2VFeHRyYSgpO3ZhciBuPXRoaXMudG9wO24uYXBwbHlQZW5kaW5nKHQudHlwZSksbi5tYXRjaCYmKG4ubWF0Y2g9bi5tYXRjaC5tYXRjaFR5cGUodC50eXBlKSk7Zm9yKHZhciByPW4uYWN0aXZlTWFya3Msbz0wO288dC5tYXJrcy5sZW5ndGg7bysrKW4udHlwZSYmIW4udHlwZS5hbGxvd3NNYXJrVHlwZSh0Lm1hcmtzW29dLnR5cGUpfHwocj10Lm1hcmtzW29dLmFkZFRvU2V0KHIpKTtyZXR1cm4gbi5jb250ZW50LnB1c2godC5tYXJrKHIpKSwhMH1yZXR1cm4hMX0sYnQucHJvdG90eXBlLmVudGVyPWZ1bmN0aW9uKHQsZSxuKXt2YXIgcj10aGlzLmZpbmRQbGFjZSh0LmNyZWF0ZShlKSk7cmV0dXJuIHImJnRoaXMuZW50ZXJJbm5lcih0LGUsITAsbikscn0sYnQucHJvdG90eXBlLmVudGVySW5uZXI9ZnVuY3Rpb24odCxlLG4scil7dGhpcy5jbG9zZUV4dHJhKCk7dmFyIG89dGhpcy50b3A7by5hcHBseVBlbmRpbmcodCksby5tYXRjaD1vLm1hdGNoJiZvLm1hdGNoLm1hdGNoVHlwZSh0LGUpO3ZhciBpPW51bGw9PXI/by5vcHRpb25zJn5ndDp5dChyKTtvLm9wdGlvbnMmZ3QmJjA9PW8uY29udGVudC5sZW5ndGgmJihpfD1ndCksdGhpcy5ub2Rlcy5wdXNoKG5ldyB3dCh0LGUsby5hY3RpdmVNYXJrcyxvLnBlbmRpbmdNYXJrcyxuLG51bGwsaSkpLHRoaXMub3BlbisrfSxidC5wcm90b3R5cGUuY2xvc2VFeHRyYT1mdW5jdGlvbih0KXt2YXIgZT10aGlzLm5vZGVzLmxlbmd0aC0xO2lmKGU+dGhpcy5vcGVuKXtmb3IoO2U+dGhpcy5vcGVuO2UtLSl0aGlzLm5vZGVzW2UtMV0uY29udGVudC5wdXNoKHRoaXMubm9kZXNbZV0uZmluaXNoKHQpKTt0aGlzLm5vZGVzLmxlbmd0aD10aGlzLm9wZW4rMX19LGJ0LnByb3RvdHlwZS5maW5pc2g9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5vcGVuPTAsdGhpcy5jbG9zZUV4dHJhKHRoaXMuaXNPcGVuKSx0aGlzLm5vZGVzWzBdLmZpbmlzaCh0aGlzLmlzT3Blbnx8dGhpcy5vcHRpb25zLnRvcE9wZW4pfSxidC5wcm90b3R5cGUuc3luYz1mdW5jdGlvbih0KXtmb3IodmFyIGU9dGhpcy5vcGVuO2U+PTA7ZS0tKWlmKHRoaXMubm9kZXNbZV09PXQpcmV0dXJuIHZvaWQodGhpcy5vcGVuPWUpfSx4dC5jdXJyZW50UG9zLmdldD1mdW5jdGlvbigpe3RoaXMuY2xvc2VFeHRyYSgpO2Zvcih2YXIgdD0wLGU9dGhpcy5vcGVuO2U+PTA7ZS0tKXtmb3IodmFyIG49dGhpcy5ub2Rlc1tlXS5jb250ZW50LHI9bi5sZW5ndGgtMTtyPj0wO3ItLSl0Kz1uW3JdLm5vZGVTaXplO2UmJnQrK31yZXR1cm4gdH0sYnQucHJvdG90eXBlLmZpbmRBdFBvaW50PWZ1bmN0aW9uKHQsZSl7aWYodGhpcy5maW5kKWZvcih2YXIgbj0wO248dGhpcy5maW5kLmxlbmd0aDtuKyspdGhpcy5maW5kW25dLm5vZGU9PXQmJnRoaXMuZmluZFtuXS5vZmZzZXQ9PWUmJih0aGlzLmZpbmRbbl0ucG9zPXRoaXMuY3VycmVudFBvcyl9LGJ0LnByb3RvdHlwZS5maW5kSW5zaWRlPWZ1bmN0aW9uKHQpe2lmKHRoaXMuZmluZClmb3IodmFyIGU9MDtlPHRoaXMuZmluZC5sZW5ndGg7ZSsrKW51bGw9PXRoaXMuZmluZFtlXS5wb3MmJjE9PXQubm9kZVR5cGUmJnQuY29udGFpbnModGhpcy5maW5kW2VdLm5vZGUpJiYodGhpcy5maW5kW2VdLnBvcz10aGlzLmN1cnJlbnRQb3MpfSxidC5wcm90b3R5cGUuZmluZEFyb3VuZD1mdW5jdGlvbih0LGUsbil7aWYodCE9ZSYmdGhpcy5maW5kKWZvcih2YXIgcj0wO3I8dGhpcy5maW5kLmxlbmd0aDtyKyspaWYobnVsbD09dGhpcy5maW5kW3JdLnBvcyYmMT09dC5ub2RlVHlwZSYmdC5jb250YWlucyh0aGlzLmZpbmRbcl0ubm9kZSkpe3ZhciBvPWUuY29tcGFyZURvY3VtZW50UG9zaXRpb24odGhpcy5maW5kW3JdLm5vZGUpO28mKG4/Mjo0KSYmKHRoaXMuZmluZFtyXS5wb3M9dGhpcy5jdXJyZW50UG9zKX19LGJ0LnByb3RvdHlwZS5maW5kSW5UZXh0PWZ1bmN0aW9uKHQpe2lmKHRoaXMuZmluZClmb3IodmFyIGU9MDtlPHRoaXMuZmluZC5sZW5ndGg7ZSsrKXRoaXMuZmluZFtlXS5ub2RlPT10JiYodGhpcy5maW5kW2VdLnBvcz10aGlzLmN1cnJlbnRQb3MtKHQubm9kZVZhbHVlLmxlbmd0aC10aGlzLmZpbmRbZV0ub2Zmc2V0KSl9LGJ0LnByb3RvdHlwZS5tYXRjaGVzQ29udGV4dD1mdW5jdGlvbih0KXt2YXIgZT10aGlzO2lmKHQuaW5kZXhPZigifCIpPi0xKXJldHVybiB0LnNwbGl0KC9ccypcfFxzKi8pLnNvbWUodGhpcy5tYXRjaGVzQ29udGV4dCx0aGlzKTt2YXIgbj10LnNwbGl0KCIvIikscj10aGlzLm9wdGlvbnMuY29udGV4dCxvPSF0aGlzLmlzT3BlbiYmKCFyfHxyLnBhcmVudC50eXBlPT10aGlzLm5vZGVzWzBdLnR5cGUpLGk9LShyP3IuZGVwdGgrMTowKSsobz8wOjEpLHM9ZnVuY3Rpb24odCxhKXtmb3IoO3Q+PTA7dC0tKXt2YXIgYz1uW3RdO2lmKCIiPT1jKXtpZih0PT1uLmxlbmd0aC0xfHwwPT10KWNvbnRpbnVlO2Zvcig7YT49aTthLS0paWYocyh0LTEsYSkpcmV0dXJuITA7cmV0dXJuITF9dmFyIHU9YT4wfHwwPT1hJiZvP2Uubm9kZXNbYV0udHlwZTpyJiZhPj1pP3Iubm9kZShhLWkpLnR5cGU6bnVsbDtpZighdXx8dS5uYW1lIT1jJiYtMT09dS5ncm91cHMuaW5kZXhPZihjKSlyZXR1cm4hMTthLS19cmV0dXJuITB9O3JldHVybiBzKG4ubGVuZ3RoLTEsdGhpcy5vcGVuKX0sYnQucHJvdG90eXBlLnRleHRibG9ja0Zyb21Db250ZXh0PWZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5vcHRpb25zLmNvbnRleHQ7aWYodClmb3IodmFyIGU9dC5kZXB0aDtlPj0wO2UtLSl7dmFyIG49dC5ub2RlKGUpLmNvbnRlbnRNYXRjaEF0KHQuaW5kZXhBZnRlcihlKSkuZGVmYXVsdFR5cGU7aWYobiYmbi5pc1RleHRibG9jayYmbi5kZWZhdWx0QXR0cnMpcmV0dXJuIG59Zm9yKHZhciByIGluIHRoaXMucGFyc2VyLnNjaGVtYS5ub2Rlcyl7dmFyIG89dGhpcy5wYXJzZXIuc2NoZW1hLm5vZGVzW3JdO2lmKG8uaXNUZXh0YmxvY2smJm8uZGVmYXVsdEF0dHJzKXJldHVybiBvfX0sYnQucHJvdG90eXBlLmFkZFBlbmRpbmdNYXJrPWZ1bmN0aW9uKHQpe3RoaXMudG9wLnBlbmRpbmdNYXJrcz10LmFkZFRvU2V0KHRoaXMudG9wLnBlbmRpbmdNYXJrcyl9LGJ0LnByb3RvdHlwZS5yZW1vdmVQZW5kaW5nTWFyaz1mdW5jdGlvbih0LGUpe2Zvcih2YXIgbj10aGlzLm9wZW47bj49MDtuLS0pe3ZhciByPXRoaXMubm9kZXNbbl0sbz1yLnBlbmRpbmdNYXJrcy5sYXN0SW5kZXhPZih0KTtpZihvPi0xP3IucGVuZGluZ01hcmtzPXQucmVtb3ZlRnJvbVNldChyLnBlbmRpbmdNYXJrcyk6ci5hY3RpdmVNYXJrcz10LnJlbW92ZUZyb21TZXQoci5hY3RpdmVNYXJrcykscj09ZSlicmVha319LE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKGJ0LnByb3RvdHlwZSx4dCk7dmFyIE50PWZ1bmN0aW9uKHQsZSl7dGhpcy5ub2Rlcz10fHx7fSx0aGlzLm1hcmtzPWV8fHt9fTtmdW5jdGlvbiBUdCh0KXt2YXIgZT17fTtmb3IodmFyIG4gaW4gdCl7dmFyIHI9dFtuXS5zcGVjLnRvRE9NO3ImJihlW25dPXIpfXJldHVybiBlfWZ1bmN0aW9uIEF0KHQpe3JldHVybiB0LmRvY3VtZW50fHx3aW5kb3cuZG9jdW1lbnR9TnQucHJvdG90eXBlLnNlcmlhbGl6ZUZyYWdtZW50PWZ1bmN0aW9uKHQsZSxuKXt2YXIgcj10aGlzO3ZvaWQgMD09PWUmJihlPXt9KSxufHwobj1BdChlKS5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCkpO3ZhciBvPW4saT1udWxsO3JldHVybiB0LmZvckVhY2goKGZ1bmN0aW9uKHQpe2lmKGl8fHQubWFya3MubGVuZ3RoKXtpfHwoaT1bXSk7dmFyIG49MCxzPTA7d2hpbGUobjxpLmxlbmd0aCYmczx0Lm1hcmtzLmxlbmd0aCl7dmFyIGE9dC5tYXJrc1tzXTtpZihyLm1hcmtzW2EudHlwZS5uYW1lXSl7aWYoIWEuZXEoaVtuXSl8fCExPT09YS50eXBlLnNwZWMuc3Bhbm5pbmcpYnJlYWs7bis9MixzKyt9ZWxzZSBzKyt9d2hpbGUobjxpLmxlbmd0aClvPWkucG9wKCksaS5wb3AoKTt3aGlsZShzPHQubWFya3MubGVuZ3RoKXt2YXIgYz10Lm1hcmtzW3MrK10sdT1yLnNlcmlhbGl6ZU1hcmsoYyx0LmlzSW5saW5lLGUpO3UmJihpLnB1c2goYyxvKSxvLmFwcGVuZENoaWxkKHUuZG9tKSxvPXUuY29udGVudERPTXx8dS5kb20pfX1vLmFwcGVuZENoaWxkKHIuc2VyaWFsaXplTm9kZSh0LGUpKX0pKSxufSxOdC5wcm90b3R5cGUuc2VyaWFsaXplTm9kZT1mdW5jdGlvbih0LGUpe3ZvaWQgMD09PWUmJihlPXt9KTt2YXIgbj1OdC5yZW5kZXJTcGVjKEF0KGUpLHRoaXMubm9kZXNbdC50eXBlLm5hbWVdKHQpKSxyPW4uZG9tLG89bi5jb250ZW50RE9NO2lmKG8pe2lmKHQuaXNMZWFmKXRocm93IG5ldyBSYW5nZUVycm9yKCJDb250ZW50IGhvbGUgbm90IGFsbG93ZWQgaW4gYSBsZWFmIG5vZGUgc3BlYyIpO2Uub25Db250ZW50P2Uub25Db250ZW50KHQsbyxlKTp0aGlzLnNlcmlhbGl6ZUZyYWdtZW50KHQuY29udGVudCxlLG8pfXJldHVybiByfSxOdC5wcm90b3R5cGUuc2VyaWFsaXplTm9kZUFuZE1hcmtzPWZ1bmN0aW9uKHQsZSl7dm9pZCAwPT09ZSYmKGU9e30pO2Zvcih2YXIgbj10aGlzLnNlcmlhbGl6ZU5vZGUodCxlKSxyPXQubWFya3MubGVuZ3RoLTE7cj49MDtyLS0pe3ZhciBvPXRoaXMuc2VyaWFsaXplTWFyayh0Lm1hcmtzW3JdLHQuaXNJbmxpbmUsZSk7byYmKChvLmNvbnRlbnRET018fG8uZG9tKS5hcHBlbmRDaGlsZChuKSxuPW8uZG9tKX1yZXR1cm4gbn0sTnQucHJvdG90eXBlLnNlcmlhbGl6ZU1hcms9ZnVuY3Rpb24odCxlLG4pe3ZvaWQgMD09PW4mJihuPXt9KTt2YXIgcj10aGlzLm1hcmtzW3QudHlwZS5uYW1lXTtyZXR1cm4gciYmTnQucmVuZGVyU3BlYyhBdChuKSxyKHQsZSkpfSxOdC5yZW5kZXJTcGVjPWZ1bmN0aW9uKHQsZSxuKXtpZih2b2lkIDA9PT1uJiYobj1udWxsKSwic3RyaW5nIj09dHlwZW9mIGUpcmV0dXJue2RvbTp0LmNyZWF0ZVRleHROb2RlKGUpfTtpZihudWxsIT1lLm5vZGVUeXBlKXJldHVybntkb206ZX07dmFyIHI9ZVswXSxvPXIuaW5kZXhPZigiICIpO28+MCYmKG49ci5zbGljZSgwLG8pLHI9ci5zbGljZShvKzEpKTt2YXIgaT1udWxsLHM9bj90LmNyZWF0ZUVsZW1lbnROUyhuLHIpOnQuY3JlYXRlRWxlbWVudChyKSxhPWVbMV0sYz0xO2lmKGEmJiJvYmplY3QiPT10eXBlb2YgYSYmbnVsbD09YS5ub2RlVHlwZSYmIUFycmF5LmlzQXJyYXkoYSkpZm9yKHZhciB1IGluIGM9MixhKWlmKG51bGwhPWFbdV0pe3ZhciBsPXUuaW5kZXhPZigiICIpO2w+MD9zLnNldEF0dHJpYnV0ZU5TKHUuc2xpY2UoMCxsKSx1LnNsaWNlKGwrMSksYVt1XSk6cy5zZXRBdHRyaWJ1dGUodSxhW3VdKX1mb3IodmFyIGg9YztoPGUubGVuZ3RoO2grKyl7dmFyIGY9ZVtoXTtpZigwPT09Zil7aWYoaDxlLmxlbmd0aC0xfHxoPmMpdGhyb3cgbmV3IFJhbmdlRXJyb3IoIkNvbnRlbnQgaG9sZSBtdXN0IGJlIHRoZSBvbmx5IGNoaWxkIG9mIGl0cyBwYXJlbnQgbm9kZSIpO3JldHVybntkb206cyxjb250ZW50RE9NOnN9fXZhciBwPU50LnJlbmRlclNwZWModCxmLG4pLGQ9cC5kb20sdj1wLmNvbnRlbnRET007aWYocy5hcHBlbmRDaGlsZChkKSx2KXtpZihpKXRocm93IG5ldyBSYW5nZUVycm9yKCJNdWx0aXBsZSBjb250ZW50IGhvbGVzIik7aT12fX1yZXR1cm57ZG9tOnMsY29udGVudERPTTppfX0sTnQuZnJvbVNjaGVtYT1mdW5jdGlvbih0KXtyZXR1cm4gdC5jYWNoZWQuZG9tU2VyaWFsaXplcnx8KHQuY2FjaGVkLmRvbVNlcmlhbGl6ZXI9bmV3IE50KHRoaXMubm9kZXNGcm9tU2NoZW1hKHQpLHRoaXMubWFya3NGcm9tU2NoZW1hKHQpKSl9LE50Lm5vZGVzRnJvbVNjaGVtYT1mdW5jdGlvbih0KXt2YXIgZT1UdCh0Lm5vZGVzKTtyZXR1cm4gZS50ZXh0fHwoZS50ZXh0PWZ1bmN0aW9uKHQpe3JldHVybiB0LnRleHR9KSxlfSxOdC5tYXJrc0Zyb21TY2hlbWE9ZnVuY3Rpb24odCl7cmV0dXJuIFR0KHQubWFya3MpfX0sIjM0MmYiOmZ1bmN0aW9uKHQsZSxuKXt2YXIgcj1uKCJkMDY2Iik7dC5leHBvcnRzPXIoIm5hdmlnYXRvciIsInVzZXJBZ2VudCIpfHwiIn0sIjM1YTEiOmZ1bmN0aW9uKHQsZSxuKXt2YXIgcj1uKCJmNWRmIiksbz1uKCIzZjhjIiksaT1uKCJiNjIyIikscz1pKCJpdGVyYXRvciIpO3QuZXhwb3J0cz1mdW5jdGlvbih0KXtpZih2b2lkIDAhPXQpcmV0dXJuIHRbc118fHRbIkBAaXRlcmF0b3IiXXx8b1tyKHQpXX19LCIzNmM3IjpmdW5jdGlvbih0LGUsbil7InVzZSBzdHJpY3QiO24ucihlKSxuLmQoZSwiQ29udGVudE1hdGNoIiwoZnVuY3Rpb24oKXtyZXR1cm4gan0pKSxuLmQoZSwiRE9NUGFyc2VyIiwoZnVuY3Rpb24oKXtyZXR1cm4gaHR9KSksbi5kKGUsIkRPTVNlcmlhbGl6ZXIiLChmdW5jdGlvbigpe3JldHVybiBOdH0pKSxuLmQoZSwiRnJhZ21lbnQiLChmdW5jdGlvbigpe3JldHVybiBzfSkpLG4uZChlLCJNYXJrIiwoZnVuY3Rpb24oKXtyZXR1cm4gaH0pKSxuLmQoZSwiTWFya1R5cGUiLChmdW5jdGlvbigpe3JldHVybiBjdH0pKSxuLmQoZSwiTm9kZSIsKGZ1bmN0aW9uKCl7cmV0dXJuIEl9KSksbi5kKGUsIk5vZGVSYW5nZSIsKGZ1bmN0aW9uKCl7cmV0dXJuIFJ9KSksbi5kKGUsIk5vZGVUeXBlIiwoZnVuY3Rpb24oKXtyZXR1cm4gb3R9KSksbi5kKGUsIlJlcGxhY2VFcnJvciIsKGZ1bmN0aW9uKCl7cmV0dXJuIGZ9KSksbi5kKGUsIlJlc29sdmVkUG9zIiwoZnVuY3Rpb24oKXtyZXR1cm4gTn0pKSxuLmQoZSwiU2NoZW1hIiwoZnVuY3Rpb24oKXtyZXR1cm4gdXR9KSksbi5kKGUsIlNsaWNlIiwoZnVuY3Rpb24oKXtyZXR1cm4gcH0pKTt2YXIgcj1uKCI4ODRjIik7ZnVuY3Rpb24gbyh0LGUsbil7Zm9yKHZhciByPTA7O3IrKyl7aWYocj09dC5jaGlsZENvdW50fHxyPT1lLmNoaWxkQ291bnQpcmV0dXJuIHQuY2hpbGRDb3VudD09ZS5jaGlsZENvdW50P251bGw6bjt2YXIgaT10LmNoaWxkKHIpLHM9ZS5jaGlsZChyKTtpZihpIT1zKXtpZighaS5zYW1lTWFya3VwKHMpKXJldHVybiBuO2lmKGkuaXNUZXh0JiZpLnRleHQhPXMudGV4dCl7Zm9yKHZhciBhPTA7aS50ZXh0W2FdPT1zLnRleHRbYV07YSsrKW4rKztyZXR1cm4gbn1pZihpLmNvbnRlbnQuc2l6ZXx8cy5jb250ZW50LnNpemUpe3ZhciBjPW8oaS5jb250ZW50LHMuY29udGVudCxuKzEpO2lmKG51bGwhPWMpcmV0dXJuIGN9bis9aS5ub2RlU2l6ZX1lbHNlIG4rPWkubm9kZVNpemV9fWZ1bmN0aW9uIGkodCxlLG4scil7Zm9yKHZhciBvPXQuY2hpbGRDb3VudCxzPWUuY2hpbGRDb3VudDs7KXtpZigwPT1vfHwwPT1zKXJldHVybiBvPT1zP251bGw6e2E6bixiOnJ9O3ZhciBhPXQuY2hpbGQoLS1vKSxjPWUuY2hpbGQoLS1zKSx1PWEubm9kZVNpemU7aWYoYSE9Yyl7aWYoIWEuc2FtZU1hcmt1cChjKSlyZXR1cm57YTpuLGI6cn07aWYoYS5pc1RleHQmJmEudGV4dCE9Yy50ZXh0KXt2YXIgbD0wLGg9TWF0aC5taW4oYS50ZXh0Lmxlbmd0aCxjLnRleHQubGVuZ3RoKTt3aGlsZShsPGgmJmEudGV4dFthLnRleHQubGVuZ3RoLWwtMV09PWMudGV4dFtjLnRleHQubGVuZ3RoLWwtMV0pbCsrLG4tLSxyLS07cmV0dXJue2E6bixiOnJ9fWlmKGEuY29udGVudC5zaXplfHxjLmNvbnRlbnQuc2l6ZSl7dmFyIGY9aShhLmNvbnRlbnQsYy5jb250ZW50LG4tMSxyLTEpO2lmKGYpcmV0dXJuIGZ9bi09dSxyLT11fWVsc2Ugbi09dSxyLT11fX12YXIgcz1mdW5jdGlvbih0LGUpe2lmKHRoaXMuY29udGVudD10LHRoaXMuc2l6ZT1lfHwwLG51bGw9PWUpZm9yKHZhciBuPTA7bjx0Lmxlbmd0aDtuKyspdGhpcy5zaXplKz10W25dLm5vZGVTaXplfSxhPXtmaXJzdENoaWxkOntjb25maWd1cmFibGU6ITB9LGxhc3RDaGlsZDp7Y29uZmlndXJhYmxlOiEwfSxjaGlsZENvdW50Ontjb25maWd1cmFibGU6ITB9fTtzLnByb3RvdHlwZS5ub2Rlc0JldHdlZW49ZnVuY3Rpb24odCxlLG4scixvKXt2b2lkIDA9PT1yJiYocj0wKTtmb3IodmFyIGk9MCxzPTA7czxlO2krKyl7dmFyIGE9dGhpcy5jb250ZW50W2ldLGM9cythLm5vZGVTaXplO2lmKGM+dCYmITEhPT1uKGEscitzLG8saSkmJmEuY29udGVudC5zaXplKXt2YXIgdT1zKzE7YS5ub2Rlc0JldHdlZW4oTWF0aC5tYXgoMCx0LXUpLE1hdGgubWluKGEuY29udGVudC5zaXplLGUtdSksbixyK3UpfXM9Y319LHMucHJvdG90eXBlLmRlc2NlbmRhbnRzPWZ1bmN0aW9uKHQpe3RoaXMubm9kZXNCZXR3ZWVuKDAsdGhpcy5zaXplLHQpfSxzLnByb3RvdHlwZS50ZXh0QmV0d2Vlbj1mdW5jdGlvbih0LGUsbixyKXt2YXIgbz0iIixpPSEwO3JldHVybiB0aGlzLm5vZGVzQmV0d2Vlbih0LGUsKGZ1bmN0aW9uKHMsYSl7cy5pc1RleHQ/KG8rPXMudGV4dC5zbGljZShNYXRoLm1heCh0LGEpLWEsZS1hKSxpPSFuKTpzLmlzTGVhZiYmcj8obys9cixpPSFuKTohaSYmcy5pc0Jsb2NrJiYobys9bixpPSEwKX0pLDApLG99LHMucHJvdG90eXBlLmFwcGVuZD1mdW5jdGlvbih0KXtpZighdC5zaXplKXJldHVybiB0aGlzO2lmKCF0aGlzLnNpemUpcmV0dXJuIHQ7dmFyIGU9dGhpcy5sYXN0Q2hpbGQsbj10LmZpcnN0Q2hpbGQscj10aGlzLmNvbnRlbnQuc2xpY2UoKSxvPTA7Zm9yKGUuaXNUZXh0JiZlLnNhbWVNYXJrdXAobikmJihyW3IubGVuZ3RoLTFdPWUud2l0aFRleHQoZS50ZXh0K24udGV4dCksbz0xKTtvPHQuY29udGVudC5sZW5ndGg7bysrKXIucHVzaCh0LmNvbnRlbnRbb10pO3JldHVybiBuZXcgcyhyLHRoaXMuc2l6ZSt0LnNpemUpfSxzLnByb3RvdHlwZS5jdXQ9ZnVuY3Rpb24odCxlKXtpZihudWxsPT1lJiYoZT10aGlzLnNpemUpLDA9PXQmJmU9PXRoaXMuc2l6ZSlyZXR1cm4gdGhpczt2YXIgbj1bXSxyPTA7aWYoZT50KWZvcih2YXIgbz0wLGk9MDtpPGU7bysrKXt2YXIgYT10aGlzLmNvbnRlbnRbb10sYz1pK2Eubm9kZVNpemU7Yz50JiYoKGk8dHx8Yz5lKSYmKGE9YS5pc1RleHQ/YS5jdXQoTWF0aC5tYXgoMCx0LWkpLE1hdGgubWluKGEudGV4dC5sZW5ndGgsZS1pKSk6YS5jdXQoTWF0aC5tYXgoMCx0LWktMSksTWF0aC5taW4oYS5jb250ZW50LnNpemUsZS1pLTEpKSksbi5wdXNoKGEpLHIrPWEubm9kZVNpemUpLGk9Y31yZXR1cm4gbmV3IHMobixyKX0scy5wcm90b3R5cGUuY3V0QnlJbmRleD1mdW5jdGlvbih0LGUpe3JldHVybiB0PT1lP3MuZW1wdHk6MD09dCYmZT09dGhpcy5jb250ZW50Lmxlbmd0aD90aGlzOm5ldyBzKHRoaXMuY29udGVudC5zbGljZSh0LGUpKX0scy5wcm90b3R5cGUucmVwbGFjZUNoaWxkPWZ1bmN0aW9uKHQsZSl7dmFyIG49dGhpcy5jb250ZW50W3RdO2lmKG49PWUpcmV0dXJuIHRoaXM7dmFyIHI9dGhpcy5jb250ZW50LnNsaWNlKCksbz10aGlzLnNpemUrZS5ub2RlU2l6ZS1uLm5vZGVTaXplO3JldHVybiByW3RdPWUsbmV3IHMocixvKX0scy5wcm90b3R5cGUuYWRkVG9TdGFydD1mdW5jdGlvbih0KXtyZXR1cm4gbmV3IHMoW3RdLmNvbmNhdCh0aGlzLmNvbnRlbnQpLHRoaXMuc2l6ZSt0Lm5vZGVTaXplKX0scy5wcm90b3R5cGUuYWRkVG9FbmQ9ZnVuY3Rpb24odCl7cmV0dXJuIG5ldyBzKHRoaXMuY29udGVudC5jb25jYXQodCksdGhpcy5zaXplK3Qubm9kZVNpemUpfSxzLnByb3RvdHlwZS5lcT1mdW5jdGlvbih0KXtpZih0aGlzLmNvbnRlbnQubGVuZ3RoIT10LmNvbnRlbnQubGVuZ3RoKXJldHVybiExO2Zvcih2YXIgZT0wO2U8dGhpcy5jb250ZW50Lmxlbmd0aDtlKyspaWYoIXRoaXMuY29udGVudFtlXS5lcSh0LmNvbnRlbnRbZV0pKXJldHVybiExO3JldHVybiEwfSxhLmZpcnN0Q2hpbGQuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY29udGVudC5sZW5ndGg/dGhpcy5jb250ZW50WzBdOm51bGx9LGEubGFzdENoaWxkLmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLmNvbnRlbnQubGVuZ3RoP3RoaXMuY29udGVudFt0aGlzLmNvbnRlbnQubGVuZ3RoLTFdOm51bGx9LGEuY2hpbGRDb3VudC5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jb250ZW50Lmxlbmd0aH0scy5wcm90b3R5cGUuY2hpbGQ9ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5jb250ZW50W3RdO2lmKCFlKXRocm93IG5ldyBSYW5nZUVycm9yKCJJbmRleCAiK3QrIiBvdXQgb2YgcmFuZ2UgZm9yICIrdGhpcyk7cmV0dXJuIGV9LHMucHJvdG90eXBlLm1heWJlQ2hpbGQ9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuY29udGVudFt0XX0scy5wcm90b3R5cGUuZm9yRWFjaD1mdW5jdGlvbih0KXtmb3IodmFyIGU9MCxuPTA7ZTx0aGlzLmNvbnRlbnQubGVuZ3RoO2UrKyl7dmFyIHI9dGhpcy5jb250ZW50W2VdO3QocixuLGUpLG4rPXIubm9kZVNpemV9fSxzLnByb3RvdHlwZS5maW5kRGlmZlN0YXJ0PWZ1bmN0aW9uKHQsZSl7cmV0dXJuIHZvaWQgMD09PWUmJihlPTApLG8odGhpcyx0LGUpfSxzLnByb3RvdHlwZS5maW5kRGlmZkVuZD1mdW5jdGlvbih0LGUsbil7cmV0dXJuIHZvaWQgMD09PWUmJihlPXRoaXMuc2l6ZSksdm9pZCAwPT09biYmKG49dC5zaXplKSxpKHRoaXMsdCxlLG4pfSxzLnByb3RvdHlwZS5maW5kSW5kZXg9ZnVuY3Rpb24odCxlKXtpZih2b2lkIDA9PT1lJiYoZT0tMSksMD09dClyZXR1cm4gdSgwLHQpO2lmKHQ9PXRoaXMuc2l6ZSlyZXR1cm4gdSh0aGlzLmNvbnRlbnQubGVuZ3RoLHQpO2lmKHQ+dGhpcy5zaXplfHx0PDApdGhyb3cgbmV3IFJhbmdlRXJyb3IoIlBvc2l0aW9uICIrdCsiIG91dHNpZGUgb2YgZnJhZ21lbnQgKCIrdGhpcysiKSIpO2Zvcih2YXIgbj0wLHI9MDs7bisrKXt2YXIgbz10aGlzLmNoaWxkKG4pLGk9citvLm5vZGVTaXplO2lmKGk+PXQpcmV0dXJuIGk9PXR8fGU+MD91KG4rMSxpKTp1KG4scik7cj1pfX0scy5wcm90b3R5cGUudG9TdHJpbmc9ZnVuY3Rpb24oKXtyZXR1cm4iPCIrdGhpcy50b1N0cmluZ0lubmVyKCkrIj4ifSxzLnByb3RvdHlwZS50b1N0cmluZ0lubmVyPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY29udGVudC5qb2luKCIsICIpfSxzLnByb3RvdHlwZS50b0pTT049ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jb250ZW50Lmxlbmd0aD90aGlzLmNvbnRlbnQubWFwKChmdW5jdGlvbih0KXtyZXR1cm4gdC50b0pTT04oKX0pKTpudWxsfSxzLmZyb21KU09OPWZ1bmN0aW9uKHQsZSl7aWYoIWUpcmV0dXJuIHMuZW1wdHk7aWYoIUFycmF5LmlzQXJyYXkoZSkpdGhyb3cgbmV3IFJhbmdlRXJyb3IoIkludmFsaWQgaW5wdXQgZm9yIEZyYWdtZW50LmZyb21KU09OIik7cmV0dXJuIG5ldyBzKGUubWFwKHQubm9kZUZyb21KU09OKSl9LHMuZnJvbUFycmF5PWZ1bmN0aW9uKHQpe2lmKCF0Lmxlbmd0aClyZXR1cm4gcy5lbXB0eTtmb3IodmFyIGUsbj0wLHI9MDtyPHQubGVuZ3RoO3IrKyl7dmFyIG89dFtyXTtuKz1vLm5vZGVTaXplLHImJm8uaXNUZXh0JiZ0W3ItMV0uc2FtZU1hcmt1cChvKT8oZXx8KGU9dC5zbGljZSgwLHIpKSxlW2UubGVuZ3RoLTFdPW8ud2l0aFRleHQoZVtlLmxlbmd0aC0xXS50ZXh0K28udGV4dCkpOmUmJmUucHVzaChvKX1yZXR1cm4gbmV3IHMoZXx8dCxuKX0scy5mcm9tPWZ1bmN0aW9uKHQpe2lmKCF0KXJldHVybiBzLmVtcHR5O2lmKHQgaW5zdGFuY2VvZiBzKXJldHVybiB0O2lmKEFycmF5LmlzQXJyYXkodCkpcmV0dXJuIHRoaXMuZnJvbUFycmF5KHQpO2lmKHQuYXR0cnMpcmV0dXJuIG5ldyBzKFt0XSx0Lm5vZGVTaXplKTt0aHJvdyBuZXcgUmFuZ2VFcnJvcigiQ2FuIG5vdCBjb252ZXJ0ICIrdCsiIHRvIGEgRnJhZ21lbnQiKyh0Lm5vZGVzQmV0d2Vlbj8iIChsb29rcyBsaWtlIG11bHRpcGxlIHZlcnNpb25zIG9mIHByb3NlbWlycm9yLW1vZGVsIHdlcmUgbG9hZGVkKSI6IiIpKX0sT2JqZWN0LmRlZmluZVByb3BlcnRpZXMocy5wcm90b3R5cGUsYSk7dmFyIGM9e2luZGV4OjAsb2Zmc2V0OjB9O2Z1bmN0aW9uIHUodCxlKXtyZXR1cm4gYy5pbmRleD10LGMub2Zmc2V0PWUsY31mdW5jdGlvbiBsKHQsZSl7aWYodD09PWUpcmV0dXJuITA7aWYoIXR8fCJvYmplY3QiIT10eXBlb2YgdHx8IWV8fCJvYmplY3QiIT10eXBlb2YgZSlyZXR1cm4hMTt2YXIgbj1BcnJheS5pc0FycmF5KHQpO2lmKEFycmF5LmlzQXJyYXkoZSkhPW4pcmV0dXJuITE7aWYobil7aWYodC5sZW5ndGghPWUubGVuZ3RoKXJldHVybiExO2Zvcih2YXIgcj0wO3I8dC5sZW5ndGg7cisrKWlmKCFsKHRbcl0sZVtyXSkpcmV0dXJuITF9ZWxzZXtmb3IodmFyIG8gaW4gdClpZighKG8gaW4gZSl8fCFsKHRbb10sZVtvXSkpcmV0dXJuITE7Zm9yKHZhciBpIGluIGUpaWYoIShpIGluIHQpKXJldHVybiExfXJldHVybiEwfXMuZW1wdHk9bmV3IHMoW10sMCk7dmFyIGg9ZnVuY3Rpb24odCxlKXt0aGlzLnR5cGU9dCx0aGlzLmF0dHJzPWV9O2Z1bmN0aW9uIGYodCl7dmFyIGU9RXJyb3IuY2FsbCh0aGlzLHQpO3JldHVybiBlLl9fcHJvdG9fXz1mLnByb3RvdHlwZSxlfWgucHJvdG90eXBlLmFkZFRvU2V0PWZ1bmN0aW9uKHQpe2Zvcih2YXIgZSxuPSExLHI9MDtyPHQubGVuZ3RoO3IrKyl7dmFyIG89dFtyXTtpZih0aGlzLmVxKG8pKXJldHVybiB0O2lmKHRoaXMudHlwZS5leGNsdWRlcyhvLnR5cGUpKWV8fChlPXQuc2xpY2UoMCxyKSk7ZWxzZXtpZihvLnR5cGUuZXhjbHVkZXModGhpcy50eXBlKSlyZXR1cm4gdDshbiYmby50eXBlLnJhbms+dGhpcy50eXBlLnJhbmsmJihlfHwoZT10LnNsaWNlKDAscikpLGUucHVzaCh0aGlzKSxuPSEwKSxlJiZlLnB1c2gobyl9fXJldHVybiBlfHwoZT10LnNsaWNlKCkpLG58fGUucHVzaCh0aGlzKSxlfSxoLnByb3RvdHlwZS5yZW1vdmVGcm9tU2V0PWZ1bmN0aW9uKHQpe2Zvcih2YXIgZT0wO2U8dC5sZW5ndGg7ZSsrKWlmKHRoaXMuZXEodFtlXSkpcmV0dXJuIHQuc2xpY2UoMCxlKS5jb25jYXQodC5zbGljZShlKzEpKTtyZXR1cm4gdH0saC5wcm90b3R5cGUuaXNJblNldD1mdW5jdGlvbih0KXtmb3IodmFyIGU9MDtlPHQubGVuZ3RoO2UrKylpZih0aGlzLmVxKHRbZV0pKXJldHVybiEwO3JldHVybiExfSxoLnByb3RvdHlwZS5lcT1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcz09dHx8dGhpcy50eXBlPT10LnR5cGUmJmwodGhpcy5hdHRycyx0LmF0dHJzKX0saC5wcm90b3R5cGUudG9KU09OPWZ1bmN0aW9uKCl7dmFyIHQ9e3R5cGU6dGhpcy50eXBlLm5hbWV9O2Zvcih2YXIgZSBpbiB0aGlzLmF0dHJzKXt0LmF0dHJzPXRoaXMuYXR0cnM7YnJlYWt9cmV0dXJuIHR9LGguZnJvbUpTT049ZnVuY3Rpb24odCxlKXtpZighZSl0aHJvdyBuZXcgUmFuZ2VFcnJvcigiSW52YWxpZCBpbnB1dCBmb3IgTWFyay5mcm9tSlNPTiIpO3ZhciBuPXQubWFya3NbZS50eXBlXTtpZighbil0aHJvdyBuZXcgUmFuZ2VFcnJvcigiVGhlcmUgaXMgbm8gbWFyayB0eXBlICIrZS50eXBlKyIgaW4gdGhpcyBzY2hlbWEiKTtyZXR1cm4gbi5jcmVhdGUoZS5hdHRycyl9LGguc2FtZVNldD1mdW5jdGlvbih0LGUpe2lmKHQ9PWUpcmV0dXJuITA7aWYodC5sZW5ndGghPWUubGVuZ3RoKXJldHVybiExO2Zvcih2YXIgbj0wO248dC5sZW5ndGg7bisrKWlmKCF0W25dLmVxKGVbbl0pKXJldHVybiExO3JldHVybiEwfSxoLnNldEZyb209ZnVuY3Rpb24odCl7aWYoIXR8fDA9PXQubGVuZ3RoKXJldHVybiBoLm5vbmU7aWYodCBpbnN0YW5jZW9mIGgpcmV0dXJuW3RdO3ZhciBlPXQuc2xpY2UoKTtyZXR1cm4gZS5zb3J0KChmdW5jdGlvbih0LGUpe3JldHVybiB0LnR5cGUucmFuay1lLnR5cGUucmFua30pKSxlfSxoLm5vbmU9W10sZi5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShFcnJvci5wcm90b3R5cGUpLGYucHJvdG90eXBlLmNvbnN0cnVjdG9yPWYsZi5wcm90b3R5cGUubmFtZT0iUmVwbGFjZUVycm9yIjt2YXIgcD1mdW5jdGlvbih0LGUsbil7dGhpcy5jb250ZW50PXQsdGhpcy5vcGVuU3RhcnQ9ZSx0aGlzLm9wZW5FbmQ9bn0sZD17c2l6ZTp7Y29uZmlndXJhYmxlOiEwfX07ZnVuY3Rpb24gdih0LGUsbil7dmFyIHI9dC5maW5kSW5kZXgoZSksbz1yLmluZGV4LGk9ci5vZmZzZXQscz10Lm1heWJlQ2hpbGQobyksYT10LmZpbmRJbmRleChuKSxjPWEuaW5kZXgsdT1hLm9mZnNldDtpZihpPT1lfHxzLmlzVGV4dCl7aWYodSE9biYmIXQuY2hpbGQoYykuaXNUZXh0KXRocm93IG5ldyBSYW5nZUVycm9yKCJSZW1vdmluZyBub24tZmxhdCByYW5nZSIpO3JldHVybiB0LmN1dCgwLGUpLmFwcGVuZCh0LmN1dChuKSl9aWYobyE9Yyl0aHJvdyBuZXcgUmFuZ2VFcnJvcigiUmVtb3Zpbmcgbm9uLWZsYXQgcmFuZ2UiKTtyZXR1cm4gdC5yZXBsYWNlQ2hpbGQobyxzLmNvcHkodihzLmNvbnRlbnQsZS1pLTEsbi1pLTEpKSl9ZnVuY3Rpb24gbSh0LGUsbixyKXt2YXIgbz10LmZpbmRJbmRleChlKSxpPW8uaW5kZXgscz1vLm9mZnNldCxhPXQubWF5YmVDaGlsZChpKTtpZihzPT1lfHxhLmlzVGV4dClyZXR1cm4gciYmIXIuY2FuUmVwbGFjZShpLGksbik/bnVsbDp0LmN1dCgwLGUpLmFwcGVuZChuKS5hcHBlbmQodC5jdXQoZSkpO3ZhciBjPW0oYS5jb250ZW50LGUtcy0xLG4pO3JldHVybiBjJiZ0LnJlcGxhY2VDaGlsZChpLGEuY29weShjKSl9ZnVuY3Rpb24gZyh0LGUsbil7aWYobi5vcGVuU3RhcnQ+dC5kZXB0aCl0aHJvdyBuZXcgZigiSW5zZXJ0ZWQgY29udGVudCBkZWVwZXIgdGhhbiBpbnNlcnRpb24gcG9zaXRpb24iKTtpZih0LmRlcHRoLW4ub3BlblN0YXJ0IT1lLmRlcHRoLW4ub3BlbkVuZCl0aHJvdyBuZXcgZigiSW5jb25zaXN0ZW50IG9wZW4gZGVwdGhzIik7cmV0dXJuIHkodCxlLG4sMCl9ZnVuY3Rpb24geSh0LGUsbixyKXt2YXIgbz10LmluZGV4KHIpLGk9dC5ub2RlKHIpO2lmKG89PWUuaW5kZXgocikmJnI8dC5kZXB0aC1uLm9wZW5TdGFydCl7dmFyIHM9eSh0LGUsbixyKzEpO3JldHVybiBpLmNvcHkoaS5jb250ZW50LnJlcGxhY2VDaGlsZChvLHMpKX1pZihuLmNvbnRlbnQuc2l6ZSl7aWYobi5vcGVuU3RhcnR8fG4ub3BlbkVuZHx8dC5kZXB0aCE9cnx8ZS5kZXB0aCE9cil7dmFyIGE9TShuLHQpLGM9YS5zdGFydCx1PWEuZW5kO3JldHVybiBTKGksQyh0LGMsdSxlLHIpKX12YXIgbD10LnBhcmVudCxoPWwuY29udGVudDtyZXR1cm4gUyhsLGguY3V0KDAsdC5wYXJlbnRPZmZzZXQpLmFwcGVuZChuLmNvbnRlbnQpLmFwcGVuZChoLmN1dChlLnBhcmVudE9mZnNldCkpKX1yZXR1cm4gUyhpLE8odCxlLHIpKX1mdW5jdGlvbiB3KHQsZSl7aWYoIWUudHlwZS5jb21wYXRpYmxlQ29udGVudCh0LnR5cGUpKXRocm93IG5ldyBmKCJDYW5ub3Qgam9pbiAiK2UudHlwZS5uYW1lKyIgb250byAiK3QudHlwZS5uYW1lKX1mdW5jdGlvbiBiKHQsZSxuKXt2YXIgcj10Lm5vZGUobik7cmV0dXJuIHcocixlLm5vZGUobikpLHJ9ZnVuY3Rpb24geCh0LGUpe3ZhciBuPWUubGVuZ3RoLTE7bj49MCYmdC5pc1RleHQmJnQuc2FtZU1hcmt1cChlW25dKT9lW25dPXQud2l0aFRleHQoZVtuXS50ZXh0K3QudGV4dCk6ZS5wdXNoKHQpfWZ1bmN0aW9uIGsodCxlLG4scil7dmFyIG89KGV8fHQpLm5vZGUobiksaT0wLHM9ZT9lLmluZGV4KG4pOm8uY2hpbGRDb3VudDt0JiYoaT10LmluZGV4KG4pLHQuZGVwdGg+bj9pKys6dC50ZXh0T2Zmc2V0JiYoeCh0Lm5vZGVBZnRlcixyKSxpKyspKTtmb3IodmFyIGE9aTthPHM7YSsrKXgoby5jaGlsZChhKSxyKTtlJiZlLmRlcHRoPT1uJiZlLnRleHRPZmZzZXQmJngoZS5ub2RlQmVmb3JlLHIpfWZ1bmN0aW9uIFModCxlKXtpZighdC50eXBlLnZhbGlkQ29udGVudChlKSl0aHJvdyBuZXcgZigiSW52YWxpZCBjb250ZW50IGZvciBub2RlICIrdC50eXBlLm5hbWUpO3JldHVybiB0LmNvcHkoZSl9ZnVuY3Rpb24gQyh0LGUsbixyLG8pe3ZhciBpPXQuZGVwdGg+byYmYih0LGUsbysxKSxhPXIuZGVwdGg+byYmYihuLHIsbysxKSxjPVtdO3JldHVybiBrKG51bGwsdCxvLGMpLGkmJmEmJmUuaW5kZXgobyk9PW4uaW5kZXgobyk/KHcoaSxhKSx4KFMoaSxDKHQsZSxuLHIsbysxKSksYykpOihpJiZ4KFMoaSxPKHQsZSxvKzEpKSxjKSxrKGUsbixvLGMpLGEmJngoUyhhLE8obixyLG8rMSkpLGMpKSxrKHIsbnVsbCxvLGMpLG5ldyBzKGMpfWZ1bmN0aW9uIE8odCxlLG4pe3ZhciByPVtdO2lmKGsobnVsbCx0LG4sciksdC5kZXB0aD5uKXt2YXIgbz1iKHQsZSxuKzEpO3goUyhvLE8odCxlLG4rMSkpLHIpfXJldHVybiBrKGUsbnVsbCxuLHIpLG5ldyBzKHIpfWZ1bmN0aW9uIE0odCxlKXtmb3IodmFyIG49ZS5kZXB0aC10Lm9wZW5TdGFydCxyPWUubm9kZShuKSxvPXIuY29weSh0LmNvbnRlbnQpLGk9bi0xO2k+PTA7aS0tKW89ZS5ub2RlKGkpLmNvcHkocy5mcm9tKG8pKTtyZXR1cm57c3RhcnQ6by5yZXNvbHZlTm9DYWNoZSh0Lm9wZW5TdGFydCtuKSxlbmQ6by5yZXNvbHZlTm9DYWNoZShvLmNvbnRlbnQuc2l6ZS10Lm9wZW5FbmQtbil9fWQuc2l6ZS5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jb250ZW50LnNpemUtdGhpcy5vcGVuU3RhcnQtdGhpcy5vcGVuRW5kfSxwLnByb3RvdHlwZS5pbnNlcnRBdD1mdW5jdGlvbih0LGUpe3ZhciBuPW0odGhpcy5jb250ZW50LHQrdGhpcy5vcGVuU3RhcnQsZSxudWxsKTtyZXR1cm4gbiYmbmV3IHAobix0aGlzLm9wZW5TdGFydCx0aGlzLm9wZW5FbmQpfSxwLnByb3RvdHlwZS5yZW1vdmVCZXR3ZWVuPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIG5ldyBwKHYodGhpcy5jb250ZW50LHQrdGhpcy5vcGVuU3RhcnQsZSt0aGlzLm9wZW5TdGFydCksdGhpcy5vcGVuU3RhcnQsdGhpcy5vcGVuRW5kKX0scC5wcm90b3R5cGUuZXE9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuY29udGVudC5lcSh0LmNvbnRlbnQpJiZ0aGlzLm9wZW5TdGFydD09dC5vcGVuU3RhcnQmJnRoaXMub3BlbkVuZD09dC5vcGVuRW5kfSxwLnByb3RvdHlwZS50b1N0cmluZz1mdW5jdGlvbigpe3JldHVybiB0aGlzLmNvbnRlbnQrIigiK3RoaXMub3BlblN0YXJ0KyIsIit0aGlzLm9wZW5FbmQrIikifSxwLnByb3RvdHlwZS50b0pTT049ZnVuY3Rpb24oKXtpZighdGhpcy5jb250ZW50LnNpemUpcmV0dXJuIG51bGw7dmFyIHQ9e2NvbnRlbnQ6dGhpcy5jb250ZW50LnRvSlNPTigpfTtyZXR1cm4gdGhpcy5vcGVuU3RhcnQ+MCYmKHQub3BlblN0YXJ0PXRoaXMub3BlblN0YXJ0KSx0aGlzLm9wZW5FbmQ+MCYmKHQub3BlbkVuZD10aGlzLm9wZW5FbmQpLHR9LHAuZnJvbUpTT049ZnVuY3Rpb24odCxlKXtpZighZSlyZXR1cm4gcC5lbXB0eTt2YXIgbj1lLm9wZW5TdGFydHx8MCxyPWUub3BlbkVuZHx8MDtpZigibnVtYmVyIiE9dHlwZW9mIG58fCJudW1iZXIiIT10eXBlb2Ygcil0aHJvdyBuZXcgUmFuZ2VFcnJvcigiSW52YWxpZCBpbnB1dCBmb3IgU2xpY2UuZnJvbUpTT04iKTtyZXR1cm4gbmV3IHAocy5mcm9tSlNPTih0LGUuY29udGVudCksZS5vcGVuU3RhcnR8fDAsZS5vcGVuRW5kfHwwKX0scC5tYXhPcGVuPWZ1bmN0aW9uKHQsZSl7dm9pZCAwPT09ZSYmKGU9ITApO2Zvcih2YXIgbj0wLHI9MCxvPXQuZmlyc3RDaGlsZDtvJiYhby5pc0xlYWYmJihlfHwhby50eXBlLnNwZWMuaXNvbGF0aW5nKTtvPW8uZmlyc3RDaGlsZCluKys7Zm9yKHZhciBpPXQubGFzdENoaWxkO2kmJiFpLmlzTGVhZiYmKGV8fCFpLnR5cGUuc3BlYy5pc29sYXRpbmcpO2k9aS5sYXN0Q2hpbGQpcisrO3JldHVybiBuZXcgcCh0LG4scil9LE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKHAucHJvdG90eXBlLGQpLHAuZW1wdHk9bmV3IHAocy5lbXB0eSwwLDApO3ZhciBOPWZ1bmN0aW9uKHQsZSxuKXt0aGlzLnBvcz10LHRoaXMucGF0aD1lLHRoaXMuZGVwdGg9ZS5sZW5ndGgvMy0xLHRoaXMucGFyZW50T2Zmc2V0PW59LFQ9e3BhcmVudDp7Y29uZmlndXJhYmxlOiEwfSxkb2M6e2NvbmZpZ3VyYWJsZTohMH0sdGV4dE9mZnNldDp7Y29uZmlndXJhYmxlOiEwfSxub2RlQWZ0ZXI6e2NvbmZpZ3VyYWJsZTohMH0sbm9kZUJlZm9yZTp7Y29uZmlndXJhYmxlOiEwfX07Ti5wcm90b3R5cGUucmVzb2x2ZURlcHRoPWZ1bmN0aW9uKHQpe3JldHVybiBudWxsPT10P3RoaXMuZGVwdGg6dDwwP3RoaXMuZGVwdGgrdDp0fSxULnBhcmVudC5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5ub2RlKHRoaXMuZGVwdGgpfSxULmRvYy5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5ub2RlKDApfSxOLnByb3RvdHlwZS5ub2RlPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLnBhdGhbMyp0aGlzLnJlc29sdmVEZXB0aCh0KV19LE4ucHJvdG90eXBlLmluZGV4PWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLnBhdGhbMyp0aGlzLnJlc29sdmVEZXB0aCh0KSsxXX0sTi5wcm90b3R5cGUuaW5kZXhBZnRlcj1mdW5jdGlvbih0KXtyZXR1cm4gdD10aGlzLnJlc29sdmVEZXB0aCh0KSx0aGlzLmluZGV4KHQpKyh0IT10aGlzLmRlcHRofHx0aGlzLnRleHRPZmZzZXQ/MTowKX0sTi5wcm90b3R5cGUuc3RhcnQ9ZnVuY3Rpb24odCl7cmV0dXJuIHQ9dGhpcy5yZXNvbHZlRGVwdGgodCksMD09dD8wOnRoaXMucGF0aFszKnQtMV0rMX0sTi5wcm90b3R5cGUuZW5kPWZ1bmN0aW9uKHQpe3JldHVybiB0PXRoaXMucmVzb2x2ZURlcHRoKHQpLHRoaXMuc3RhcnQodCkrdGhpcy5ub2RlKHQpLmNvbnRlbnQuc2l6ZX0sTi5wcm90b3R5cGUuYmVmb3JlPWZ1bmN0aW9uKHQpe2lmKHQ9dGhpcy5yZXNvbHZlRGVwdGgodCksIXQpdGhyb3cgbmV3IFJhbmdlRXJyb3IoIlRoZXJlIGlzIG5vIHBvc2l0aW9uIGJlZm9yZSB0aGUgdG9wLWxldmVsIG5vZGUiKTtyZXR1cm4gdD09dGhpcy5kZXB0aCsxP3RoaXMucG9zOnRoaXMucGF0aFszKnQtMV19LE4ucHJvdG90eXBlLmFmdGVyPWZ1bmN0aW9uKHQpe2lmKHQ9dGhpcy5yZXNvbHZlRGVwdGgodCksIXQpdGhyb3cgbmV3IFJhbmdlRXJyb3IoIlRoZXJlIGlzIG5vIHBvc2l0aW9uIGFmdGVyIHRoZSB0b3AtbGV2ZWwgbm9kZSIpO3JldHVybiB0PT10aGlzLmRlcHRoKzE/dGhpcy5wb3M6dGhpcy5wYXRoWzMqdC0xXSt0aGlzLnBhdGhbMyp0XS5ub2RlU2l6ZX0sVC50ZXh0T2Zmc2V0LmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLnBvcy10aGlzLnBhdGhbdGhpcy5wYXRoLmxlbmd0aC0xXX0sVC5ub2RlQWZ0ZXIuZ2V0PWZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5wYXJlbnQsZT10aGlzLmluZGV4KHRoaXMuZGVwdGgpO2lmKGU9PXQuY2hpbGRDb3VudClyZXR1cm4gbnVsbDt2YXIgbj10aGlzLnBvcy10aGlzLnBhdGhbdGhpcy5wYXRoLmxlbmd0aC0xXSxyPXQuY2hpbGQoZSk7cmV0dXJuIG4/dC5jaGlsZChlKS5jdXQobik6cn0sVC5ub2RlQmVmb3JlLmdldD1mdW5jdGlvbigpe3ZhciB0PXRoaXMuaW5kZXgodGhpcy5kZXB0aCksZT10aGlzLnBvcy10aGlzLnBhdGhbdGhpcy5wYXRoLmxlbmd0aC0xXTtyZXR1cm4gZT90aGlzLnBhcmVudC5jaGlsZCh0KS5jdXQoMCxlKTowPT10P251bGw6dGhpcy5wYXJlbnQuY2hpbGQodC0xKX0sTi5wcm90b3R5cGUubWFya3M9ZnVuY3Rpb24oKXt2YXIgdD10aGlzLnBhcmVudCxlPXRoaXMuaW5kZXgoKTtpZigwPT10LmNvbnRlbnQuc2l6ZSlyZXR1cm4gaC5ub25lO2lmKHRoaXMudGV4dE9mZnNldClyZXR1cm4gdC5jaGlsZChlKS5tYXJrczt2YXIgbj10Lm1heWJlQ2hpbGQoZS0xKSxyPXQubWF5YmVDaGlsZChlKTtpZighbil7dmFyIG89bjtuPXIscj1vfWZvcih2YXIgaT1uLm1hcmtzLHM9MDtzPGkubGVuZ3RoO3MrKykhMSE9PWlbc10udHlwZS5zcGVjLmluY2x1c2l2ZXx8ciYmaVtzXS5pc0luU2V0KHIubWFya3MpfHwoaT1pW3MtLV0ucmVtb3ZlRnJvbVNldChpKSk7cmV0dXJuIGl9LE4ucHJvdG90eXBlLm1hcmtzQWNyb3NzPWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMucGFyZW50Lm1heWJlQ2hpbGQodGhpcy5pbmRleCgpKTtpZighZXx8IWUuaXNJbmxpbmUpcmV0dXJuIG51bGw7Zm9yKHZhciBuPWUubWFya3Mscj10LnBhcmVudC5tYXliZUNoaWxkKHQuaW5kZXgoKSksbz0wO288bi5sZW5ndGg7bysrKSExIT09bltvXS50eXBlLnNwZWMuaW5jbHVzaXZlfHxyJiZuW29dLmlzSW5TZXQoci5tYXJrcyl8fChuPW5bby0tXS5yZW1vdmVGcm9tU2V0KG4pKTtyZXR1cm4gbn0sTi5wcm90b3R5cGUuc2hhcmVkRGVwdGg9ZnVuY3Rpb24odCl7Zm9yKHZhciBlPXRoaXMuZGVwdGg7ZT4wO2UtLSlpZih0aGlzLnN0YXJ0KGUpPD10JiZ0aGlzLmVuZChlKT49dClyZXR1cm4gZTtyZXR1cm4gMH0sTi5wcm90b3R5cGUuYmxvY2tSYW5nZT1mdW5jdGlvbih0LGUpe2lmKHZvaWQgMD09PXQmJih0PXRoaXMpLHQucG9zPHRoaXMucG9zKXJldHVybiB0LmJsb2NrUmFuZ2UodGhpcyk7Zm9yKHZhciBuPXRoaXMuZGVwdGgtKHRoaXMucGFyZW50LmlubGluZUNvbnRlbnR8fHRoaXMucG9zPT10LnBvcz8xOjApO24+PTA7bi0tKWlmKHQucG9zPD10aGlzLmVuZChuKSYmKCFlfHxlKHRoaXMubm9kZShuKSkpKXJldHVybiBuZXcgUih0aGlzLHQsbil9LE4ucHJvdG90eXBlLnNhbWVQYXJlbnQ9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMucG9zLXRoaXMucGFyZW50T2Zmc2V0PT10LnBvcy10LnBhcmVudE9mZnNldH0sTi5wcm90b3R5cGUubWF4PWZ1bmN0aW9uKHQpe3JldHVybiB0LnBvcz50aGlzLnBvcz90OnRoaXN9LE4ucHJvdG90eXBlLm1pbj1mdW5jdGlvbih0KXtyZXR1cm4gdC5wb3M8dGhpcy5wb3M/dDp0aGlzfSxOLnByb3RvdHlwZS50b1N0cmluZz1mdW5jdGlvbigpe2Zvcih2YXIgdD0iIixlPTE7ZTw9dGhpcy5kZXB0aDtlKyspdCs9KHQ/Ii8iOiIiKSt0aGlzLm5vZGUoZSkudHlwZS5uYW1lKyJfIit0aGlzLmluZGV4KGUtMSk7cmV0dXJuIHQrIjoiK3RoaXMucGFyZW50T2Zmc2V0fSxOLnJlc29sdmU9ZnVuY3Rpb24odCxlKXtpZighKGU+PTAmJmU8PXQuY29udGVudC5zaXplKSl0aHJvdyBuZXcgUmFuZ2VFcnJvcigiUG9zaXRpb24gIitlKyIgb3V0IG9mIHJhbmdlIik7Zm9yKHZhciBuPVtdLHI9MCxvPWUsaT10Ozspe3ZhciBzPWkuY29udGVudC5maW5kSW5kZXgobyksYT1zLmluZGV4LGM9cy5vZmZzZXQsdT1vLWM7aWYobi5wdXNoKGksYSxyK2MpLCF1KWJyZWFrO2lmKGk9aS5jaGlsZChhKSxpLmlzVGV4dClicmVhaztvPXUtMSxyKz1jKzF9cmV0dXJuIG5ldyBOKGUsbixvKX0sTi5yZXNvbHZlQ2FjaGVkPWZ1bmN0aW9uKHQsZSl7Zm9yKHZhciBuPTA7bjxBLmxlbmd0aDtuKyspe3ZhciByPUFbbl07aWYoci5wb3M9PWUmJnIuZG9jPT10KXJldHVybiByfXZhciBvPUFbRV09Ti5yZXNvbHZlKHQsZSk7cmV0dXJuIEU9KEUrMSklRCxvfSxPYmplY3QuZGVmaW5lUHJvcGVydGllcyhOLnByb3RvdHlwZSxUKTt2YXIgQT1bXSxFPTAsRD0xMixSPWZ1bmN0aW9uKHQsZSxuKXt0aGlzLiRmcm9tPXQsdGhpcy4kdG89ZSx0aGlzLmRlcHRoPW59LHo9e3N0YXJ0Ontjb25maWd1cmFibGU6ITB9LGVuZDp7Y29uZmlndXJhYmxlOiEwfSxwYXJlbnQ6e2NvbmZpZ3VyYWJsZTohMH0sc3RhcnRJbmRleDp7Y29uZmlndXJhYmxlOiEwfSxlbmRJbmRleDp7Y29uZmlndXJhYmxlOiEwfX07ei5zdGFydC5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy4kZnJvbS5iZWZvcmUodGhpcy5kZXB0aCsxKX0sei5lbmQuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuJHRvLmFmdGVyKHRoaXMuZGVwdGgrMSl9LHoucGFyZW50LmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLiRmcm9tLm5vZGUodGhpcy5kZXB0aCl9LHouc3RhcnRJbmRleC5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy4kZnJvbS5pbmRleCh0aGlzLmRlcHRoKX0sei5lbmRJbmRleC5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy4kdG8uaW5kZXhBZnRlcih0aGlzLmRlcHRoKX0sT2JqZWN0LmRlZmluZVByb3BlcnRpZXMoUi5wcm90b3R5cGUseik7dmFyIFA9T2JqZWN0LmNyZWF0ZShudWxsKSxJPWZ1bmN0aW9uKHQsZSxuLHIpe3RoaXMudHlwZT10LHRoaXMuYXR0cnM9ZSx0aGlzLmNvbnRlbnQ9bnx8cy5lbXB0eSx0aGlzLm1hcmtzPXJ8fGgubm9uZX0sQj17bm9kZVNpemU6e2NvbmZpZ3VyYWJsZTohMH0sY2hpbGRDb3VudDp7Y29uZmlndXJhYmxlOiEwfSx0ZXh0Q29udGVudDp7Y29uZmlndXJhYmxlOiEwfSxmaXJzdENoaWxkOntjb25maWd1cmFibGU6ITB9LGxhc3RDaGlsZDp7Y29uZmlndXJhYmxlOiEwfSxpc0Jsb2NrOntjb25maWd1cmFibGU6ITB9LGlzVGV4dGJsb2NrOntjb25maWd1cmFibGU6ITB9LGlubGluZUNvbnRlbnQ6e2NvbmZpZ3VyYWJsZTohMH0saXNJbmxpbmU6e2NvbmZpZ3VyYWJsZTohMH0saXNUZXh0Ontjb25maWd1cmFibGU6ITB9LGlzTGVhZjp7Y29uZmlndXJhYmxlOiEwfSxpc0F0b206e2NvbmZpZ3VyYWJsZTohMH19O0Iubm9kZVNpemUuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuaXNMZWFmPzE6Mit0aGlzLmNvbnRlbnQuc2l6ZX0sQi5jaGlsZENvdW50LmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLmNvbnRlbnQuY2hpbGRDb3VudH0sSS5wcm90b3R5cGUuY2hpbGQ9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuY29udGVudC5jaGlsZCh0KX0sSS5wcm90b3R5cGUubWF5YmVDaGlsZD1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5jb250ZW50Lm1heWJlQ2hpbGQodCl9LEkucHJvdG90eXBlLmZvckVhY2g9ZnVuY3Rpb24odCl7dGhpcy5jb250ZW50LmZvckVhY2godCl9LEkucHJvdG90eXBlLm5vZGVzQmV0d2Vlbj1mdW5jdGlvbih0LGUsbixyKXt2b2lkIDA9PT1yJiYocj0wKSx0aGlzLmNvbnRlbnQubm9kZXNCZXR3ZWVuKHQsZSxuLHIsdGhpcyl9LEkucHJvdG90eXBlLmRlc2NlbmRhbnRzPWZ1bmN0aW9uKHQpe3RoaXMubm9kZXNCZXR3ZWVuKDAsdGhpcy5jb250ZW50LnNpemUsdCl9LEIudGV4dENvbnRlbnQuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudGV4dEJldHdlZW4oMCx0aGlzLmNvbnRlbnQuc2l6ZSwiIil9LEkucHJvdG90eXBlLnRleHRCZXR3ZWVuPWZ1bmN0aW9uKHQsZSxuLHIpe3JldHVybiB0aGlzLmNvbnRlbnQudGV4dEJldHdlZW4odCxlLG4scil9LEIuZmlyc3RDaGlsZC5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jb250ZW50LmZpcnN0Q2hpbGR9LEIubGFzdENoaWxkLmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLmNvbnRlbnQubGFzdENoaWxkfSxJLnByb3RvdHlwZS5lcT1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcz09dHx8dGhpcy5zYW1lTWFya3VwKHQpJiZ0aGlzLmNvbnRlbnQuZXEodC5jb250ZW50KX0sSS5wcm90b3R5cGUuc2FtZU1hcmt1cD1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5oYXNNYXJrdXAodC50eXBlLHQuYXR0cnMsdC5tYXJrcyl9LEkucHJvdG90eXBlLmhhc01hcmt1cD1mdW5jdGlvbih0LGUsbil7cmV0dXJuIHRoaXMudHlwZT09dCYmbCh0aGlzLmF0dHJzLGV8fHQuZGVmYXVsdEF0dHJzfHxQKSYmaC5zYW1lU2V0KHRoaXMubWFya3Msbnx8aC5ub25lKX0sSS5wcm90b3R5cGUuY29weT1mdW5jdGlvbih0KXtyZXR1cm4gdm9pZCAwPT09dCYmKHQ9bnVsbCksdD09dGhpcy5jb250ZW50P3RoaXM6bmV3IHRoaXMuY29uc3RydWN0b3IodGhpcy50eXBlLHRoaXMuYXR0cnMsdCx0aGlzLm1hcmtzKX0sSS5wcm90b3R5cGUubWFyaz1mdW5jdGlvbih0KXtyZXR1cm4gdD09dGhpcy5tYXJrcz90aGlzOm5ldyB0aGlzLmNvbnN0cnVjdG9yKHRoaXMudHlwZSx0aGlzLmF0dHJzLHRoaXMuY29udGVudCx0KX0sSS5wcm90b3R5cGUuY3V0PWZ1bmN0aW9uKHQsZSl7cmV0dXJuIDA9PXQmJmU9PXRoaXMuY29udGVudC5zaXplP3RoaXM6dGhpcy5jb3B5KHRoaXMuY29udGVudC5jdXQodCxlKSl9LEkucHJvdG90eXBlLnNsaWNlPWZ1bmN0aW9uKHQsZSxuKXtpZih2b2lkIDA9PT1lJiYoZT10aGlzLmNvbnRlbnQuc2l6ZSksdm9pZCAwPT09biYmKG49ITEpLHQ9PWUpcmV0dXJuIHAuZW1wdHk7dmFyIHI9dGhpcy5yZXNvbHZlKHQpLG89dGhpcy5yZXNvbHZlKGUpLGk9bj8wOnIuc2hhcmVkRGVwdGgoZSkscz1yLnN0YXJ0KGkpLGE9ci5ub2RlKGkpLGM9YS5jb250ZW50LmN1dChyLnBvcy1zLG8ucG9zLXMpO3JldHVybiBuZXcgcChjLHIuZGVwdGgtaSxvLmRlcHRoLWkpfSxJLnByb3RvdHlwZS5yZXBsYWNlPWZ1bmN0aW9uKHQsZSxuKXtyZXR1cm4gZyh0aGlzLnJlc29sdmUodCksdGhpcy5yZXNvbHZlKGUpLG4pfSxJLnByb3RvdHlwZS5ub2RlQXQ9ZnVuY3Rpb24odCl7Zm9yKHZhciBlPXRoaXM7Oyl7dmFyIG49ZS5jb250ZW50LmZpbmRJbmRleCh0KSxyPW4uaW5kZXgsbz1uLm9mZnNldDtpZihlPWUubWF5YmVDaGlsZChyKSwhZSlyZXR1cm4gbnVsbDtpZihvPT10fHxlLmlzVGV4dClyZXR1cm4gZTt0LT1vKzF9fSxJLnByb3RvdHlwZS5jaGlsZEFmdGVyPWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMuY29udGVudC5maW5kSW5kZXgodCksbj1lLmluZGV4LHI9ZS5vZmZzZXQ7cmV0dXJue25vZGU6dGhpcy5jb250ZW50Lm1heWJlQ2hpbGQobiksaW5kZXg6bixvZmZzZXQ6cn19LEkucHJvdG90eXBlLmNoaWxkQmVmb3JlPWZ1bmN0aW9uKHQpe2lmKDA9PXQpcmV0dXJue25vZGU6bnVsbCxpbmRleDowLG9mZnNldDowfTt2YXIgZT10aGlzLmNvbnRlbnQuZmluZEluZGV4KHQpLG49ZS5pbmRleCxyPWUub2Zmc2V0O2lmKHI8dClyZXR1cm57bm9kZTp0aGlzLmNvbnRlbnQuY2hpbGQobiksaW5kZXg6bixvZmZzZXQ6cn07dmFyIG89dGhpcy5jb250ZW50LmNoaWxkKG4tMSk7cmV0dXJue25vZGU6byxpbmRleDpuLTEsb2Zmc2V0OnItby5ub2RlU2l6ZX19LEkucHJvdG90eXBlLnJlc29sdmU9ZnVuY3Rpb24odCl7cmV0dXJuIE4ucmVzb2x2ZUNhY2hlZCh0aGlzLHQpfSxJLnByb3RvdHlwZS5yZXNvbHZlTm9DYWNoZT1mdW5jdGlvbih0KXtyZXR1cm4gTi5yZXNvbHZlKHRoaXMsdCl9LEkucHJvdG90eXBlLnJhbmdlSGFzTWFyaz1mdW5jdGlvbih0LGUsbil7dmFyIHI9ITE7cmV0dXJuIGU+dCYmdGhpcy5ub2Rlc0JldHdlZW4odCxlLChmdW5jdGlvbih0KXtyZXR1cm4gbi5pc0luU2V0KHQubWFya3MpJiYocj0hMCksIXJ9KSkscn0sQi5pc0Jsb2NrLmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLnR5cGUuaXNCbG9ja30sQi5pc1RleHRibG9jay5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy50eXBlLmlzVGV4dGJsb2NrfSxCLmlubGluZUNvbnRlbnQuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudHlwZS5pbmxpbmVDb250ZW50fSxCLmlzSW5saW5lLmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLnR5cGUuaXNJbmxpbmV9LEIuaXNUZXh0LmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLnR5cGUuaXNUZXh0fSxCLmlzTGVhZi5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy50eXBlLmlzTGVhZn0sQi5pc0F0b20uZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudHlwZS5pc0F0b219LEkucHJvdG90eXBlLnRvU3RyaW5nPWZ1bmN0aW9uKCl7aWYodGhpcy50eXBlLnNwZWMudG9EZWJ1Z1N0cmluZylyZXR1cm4gdGhpcy50eXBlLnNwZWMudG9EZWJ1Z1N0cmluZyh0aGlzKTt2YXIgdD10aGlzLnR5cGUubmFtZTtyZXR1cm4gdGhpcy5jb250ZW50LnNpemUmJih0Kz0iKCIrdGhpcy5jb250ZW50LnRvU3RyaW5nSW5uZXIoKSsiKSIpLEYodGhpcy5tYXJrcyx0KX0sSS5wcm90b3R5cGUuY29udGVudE1hdGNoQXQ9ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy50eXBlLmNvbnRlbnRNYXRjaC5tYXRjaEZyYWdtZW50KHRoaXMuY29udGVudCwwLHQpO2lmKCFlKXRocm93IG5ldyBFcnJvcigiQ2FsbGVkIGNvbnRlbnRNYXRjaEF0IG9uIGEgbm9kZSB3aXRoIGludmFsaWQgY29udGVudCIpO3JldHVybiBlfSxJLnByb3RvdHlwZS5jYW5SZXBsYWNlPWZ1bmN0aW9uKHQsZSxuLHIsbyl7dm9pZCAwPT09biYmKG49cy5lbXB0eSksdm9pZCAwPT09ciYmKHI9MCksdm9pZCAwPT09byYmKG89bi5jaGlsZENvdW50KTt2YXIgaT10aGlzLmNvbnRlbnRNYXRjaEF0KHQpLm1hdGNoRnJhZ21lbnQobixyLG8pLGE9aSYmaS5tYXRjaEZyYWdtZW50KHRoaXMuY29udGVudCxlKTtpZighYXx8IWEudmFsaWRFbmQpcmV0dXJuITE7Zm9yKHZhciBjPXI7YzxvO2MrKylpZighdGhpcy50eXBlLmFsbG93c01hcmtzKG4uY2hpbGQoYykubWFya3MpKXJldHVybiExO3JldHVybiEwfSxJLnByb3RvdHlwZS5jYW5SZXBsYWNlV2l0aD1mdW5jdGlvbih0LGUsbixyKXtpZihyJiYhdGhpcy50eXBlLmFsbG93c01hcmtzKHIpKXJldHVybiExO3ZhciBvPXRoaXMuY29udGVudE1hdGNoQXQodCkubWF0Y2hUeXBlKG4pLGk9byYmby5tYXRjaEZyYWdtZW50KHRoaXMuY29udGVudCxlKTtyZXR1cm4hIWkmJmkudmFsaWRFbmR9LEkucHJvdG90eXBlLmNhbkFwcGVuZD1mdW5jdGlvbih0KXtyZXR1cm4gdC5jb250ZW50LnNpemU/dGhpcy5jYW5SZXBsYWNlKHRoaXMuY2hpbGRDb3VudCx0aGlzLmNoaWxkQ291bnQsdC5jb250ZW50KTp0aGlzLnR5cGUuY29tcGF0aWJsZUNvbnRlbnQodC50eXBlKX0sSS5wcm90b3R5cGUuY2hlY2s9ZnVuY3Rpb24oKXtpZighdGhpcy50eXBlLnZhbGlkQ29udGVudCh0aGlzLmNvbnRlbnQpKXRocm93IG5ldyBSYW5nZUVycm9yKCJJbnZhbGlkIGNvbnRlbnQgZm9yIG5vZGUgIit0aGlzLnR5cGUubmFtZSsiOiAiK3RoaXMuY29udGVudC50b1N0cmluZygpLnNsaWNlKDAsNTApKTt0aGlzLmNvbnRlbnQuZm9yRWFjaCgoZnVuY3Rpb24odCl7cmV0dXJuIHQuY2hlY2soKX0pKX0sSS5wcm90b3R5cGUudG9KU09OPWZ1bmN0aW9uKCl7dmFyIHQ9e3R5cGU6dGhpcy50eXBlLm5hbWV9O2Zvcih2YXIgZSBpbiB0aGlzLmF0dHJzKXt0LmF0dHJzPXRoaXMuYXR0cnM7YnJlYWt9cmV0dXJuIHRoaXMuY29udGVudC5zaXplJiYodC5jb250ZW50PXRoaXMuY29udGVudC50b0pTT04oKSksdGhpcy5tYXJrcy5sZW5ndGgmJih0Lm1hcmtzPXRoaXMubWFya3MubWFwKChmdW5jdGlvbih0KXtyZXR1cm4gdC50b0pTT04oKX0pKSksdH0sSS5mcm9tSlNPTj1mdW5jdGlvbih0LGUpe2lmKCFlKXRocm93IG5ldyBSYW5nZUVycm9yKCJJbnZhbGlkIGlucHV0IGZvciBOb2RlLmZyb21KU09OIik7dmFyIG49bnVsbDtpZihlLm1hcmtzKXtpZighQXJyYXkuaXNBcnJheShlLm1hcmtzKSl0aHJvdyBuZXcgUmFuZ2VFcnJvcigiSW52YWxpZCBtYXJrIGRhdGEgZm9yIE5vZGUuZnJvbUpTT04iKTtuPWUubWFya3MubWFwKHQubWFya0Zyb21KU09OKX1pZigidGV4dCI9PWUudHlwZSl7aWYoInN0cmluZyIhPXR5cGVvZiBlLnRleHQpdGhyb3cgbmV3IFJhbmdlRXJyb3IoIkludmFsaWQgdGV4dCBub2RlIGluIEpTT04iKTtyZXR1cm4gdC50ZXh0KGUudGV4dCxuKX12YXIgcj1zLmZyb21KU09OKHQsZS5jb250ZW50KTtyZXR1cm4gdC5ub2RlVHlwZShlLnR5cGUpLmNyZWF0ZShlLmF0dHJzLHIsbil9LE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKEkucHJvdG90eXBlLEIpO3ZhciBfPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoZSxuLHIsbyl7aWYodC5jYWxsKHRoaXMsZSxuLG51bGwsbyksIXIpdGhyb3cgbmV3IFJhbmdlRXJyb3IoIkVtcHR5IHRleHQgbm9kZXMgYXJlIG5vdCBhbGxvd2VkIik7dGhpcy50ZXh0PXJ9dCYmKGUuX19wcm90b19fPXQpLGUucHJvdG90eXBlPU9iamVjdC5jcmVhdGUodCYmdC5wcm90b3R5cGUpLGUucHJvdG90eXBlLmNvbnN0cnVjdG9yPWU7dmFyIG49e3RleHRDb250ZW50Ontjb25maWd1cmFibGU6ITB9LG5vZGVTaXplOntjb25maWd1cmFibGU6ITB9fTtyZXR1cm4gZS5wcm90b3R5cGUudG9TdHJpbmc9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy50eXBlLnNwZWMudG9EZWJ1Z1N0cmluZz90aGlzLnR5cGUuc3BlYy50b0RlYnVnU3RyaW5nKHRoaXMpOkYodGhpcy5tYXJrcyxKU09OLnN0cmluZ2lmeSh0aGlzLnRleHQpKX0sbi50ZXh0Q29udGVudC5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy50ZXh0fSxlLnByb3RvdHlwZS50ZXh0QmV0d2Vlbj1mdW5jdGlvbih0LGUpe3JldHVybiB0aGlzLnRleHQuc2xpY2UodCxlKX0sbi5ub2RlU2l6ZS5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy50ZXh0Lmxlbmd0aH0sZS5wcm90b3R5cGUubWFyaz1mdW5jdGlvbih0KXtyZXR1cm4gdD09dGhpcy5tYXJrcz90aGlzOm5ldyBlKHRoaXMudHlwZSx0aGlzLmF0dHJzLHRoaXMudGV4dCx0KX0sZS5wcm90b3R5cGUud2l0aFRleHQ9ZnVuY3Rpb24odCl7cmV0dXJuIHQ9PXRoaXMudGV4dD90aGlzOm5ldyBlKHRoaXMudHlwZSx0aGlzLmF0dHJzLHQsdGhpcy5tYXJrcyl9LGUucHJvdG90eXBlLmN1dD1mdW5jdGlvbih0LGUpe3JldHVybiB2b2lkIDA9PT10JiYodD0wKSx2b2lkIDA9PT1lJiYoZT10aGlzLnRleHQubGVuZ3RoKSwwPT10JiZlPT10aGlzLnRleHQubGVuZ3RoP3RoaXM6dGhpcy53aXRoVGV4dCh0aGlzLnRleHQuc2xpY2UodCxlKSl9LGUucHJvdG90eXBlLmVxPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLnNhbWVNYXJrdXAodCkmJnRoaXMudGV4dD09dC50ZXh0fSxlLnByb3RvdHlwZS50b0pTT049ZnVuY3Rpb24oKXt2YXIgZT10LnByb3RvdHlwZS50b0pTT04uY2FsbCh0aGlzKTtyZXR1cm4gZS50ZXh0PXRoaXMudGV4dCxlfSxPYmplY3QuZGVmaW5lUHJvcGVydGllcyhlLnByb3RvdHlwZSxuKSxlfShJKTtmdW5jdGlvbiBGKHQsZSl7Zm9yKHZhciBuPXQubGVuZ3RoLTE7bj49MDtuLS0pZT10W25dLnR5cGUubmFtZSsiKCIrZSsiKSI7cmV0dXJuIGV9dmFyIGo9ZnVuY3Rpb24odCl7dGhpcy52YWxpZEVuZD10LHRoaXMubmV4dD1bXSx0aGlzLndyYXBDYWNoZT1bXX0sJD17aW5saW5lQ29udGVudDp7Y29uZmlndXJhYmxlOiEwfSxkZWZhdWx0VHlwZTp7Y29uZmlndXJhYmxlOiEwfSxlZGdlQ291bnQ6e2NvbmZpZ3VyYWJsZTohMH19O2oucGFyc2U9ZnVuY3Rpb24odCxlKXt2YXIgbj1uZXcgVih0LGUpO2lmKG51bGw9PW4ubmV4dClyZXR1cm4gai5lbXB0eTt2YXIgcj1xKG4pO24ubmV4dCYmbi5lcnIoIlVuZXhwZWN0ZWQgdHJhaWxpbmcgdGV4dCIpO3ZhciBvPVEoWChyKSk7cmV0dXJuIHR0KG8sbiksb30sai5wcm90b3R5cGUubWF0Y2hUeXBlPWZ1bmN0aW9uKHQpe2Zvcih2YXIgZT0wO2U8dGhpcy5uZXh0Lmxlbmd0aDtlKz0yKWlmKHRoaXMubmV4dFtlXT09dClyZXR1cm4gdGhpcy5uZXh0W2UrMV07cmV0dXJuIG51bGx9LGoucHJvdG90eXBlLm1hdGNoRnJhZ21lbnQ9ZnVuY3Rpb24odCxlLG4pe3ZvaWQgMD09PWUmJihlPTApLHZvaWQgMD09PW4mJihuPXQuY2hpbGRDb3VudCk7Zm9yKHZhciByPXRoaXMsbz1lO3ImJm88bjtvKyspcj1yLm1hdGNoVHlwZSh0LmNoaWxkKG8pLnR5cGUpO3JldHVybiByfSwkLmlubGluZUNvbnRlbnQuZ2V0PWZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5uZXh0WzBdO3JldHVybiEhdCYmdC5pc0lubGluZX0sJC5kZWZhdWx0VHlwZS5nZXQ9ZnVuY3Rpb24oKXtmb3IodmFyIHQ9MDt0PHRoaXMubmV4dC5sZW5ndGg7dCs9Mil7dmFyIGU9dGhpcy5uZXh0W3RdO2lmKCFlLmlzVGV4dCYmIWUuaGFzUmVxdWlyZWRBdHRycygpKXJldHVybiBlfX0sai5wcm90b3R5cGUuY29tcGF0aWJsZT1mdW5jdGlvbih0KXtmb3IodmFyIGU9MDtlPHRoaXMubmV4dC5sZW5ndGg7ZSs9Milmb3IodmFyIG49MDtuPHQubmV4dC5sZW5ndGg7bis9MilpZih0aGlzLm5leHRbZV09PXQubmV4dFtuXSlyZXR1cm4hMDtyZXR1cm4hMX0sai5wcm90b3R5cGUuZmlsbEJlZm9yZT1mdW5jdGlvbih0LGUsbil7dm9pZCAwPT09ZSYmKGU9ITEpLHZvaWQgMD09PW4mJihuPTApO3ZhciByPVt0aGlzXTtmdW5jdGlvbiBvKGksYSl7dmFyIGM9aS5tYXRjaEZyYWdtZW50KHQsbik7aWYoYyYmKCFlfHxjLnZhbGlkRW5kKSlyZXR1cm4gcy5mcm9tKGEubWFwKChmdW5jdGlvbih0KXtyZXR1cm4gdC5jcmVhdGVBbmRGaWxsKCl9KSkpO2Zvcih2YXIgdT0wO3U8aS5uZXh0Lmxlbmd0aDt1Kz0yKXt2YXIgbD1pLm5leHRbdV0saD1pLm5leHRbdSsxXTtpZighbC5pc1RleHQmJiFsLmhhc1JlcXVpcmVkQXR0cnMoKSYmLTE9PXIuaW5kZXhPZihoKSl7ci5wdXNoKGgpO3ZhciBmPW8oaCxhLmNvbmNhdChsKSk7aWYoZilyZXR1cm4gZn19fXJldHVybiBvKHRoaXMsW10pfSxqLnByb3RvdHlwZS5maW5kV3JhcHBpbmc9ZnVuY3Rpb24odCl7Zm9yKHZhciBlPTA7ZTx0aGlzLndyYXBDYWNoZS5sZW5ndGg7ZSs9MilpZih0aGlzLndyYXBDYWNoZVtlXT09dClyZXR1cm4gdGhpcy53cmFwQ2FjaGVbZSsxXTt2YXIgbj10aGlzLmNvbXB1dGVXcmFwcGluZyh0KTtyZXR1cm4gdGhpcy53cmFwQ2FjaGUucHVzaCh0LG4pLG59LGoucHJvdG90eXBlLmNvbXB1dGVXcmFwcGluZz1mdW5jdGlvbih0KXt2YXIgZT1PYmplY3QuY3JlYXRlKG51bGwpLG49W3ttYXRjaDp0aGlzLHR5cGU6bnVsbCx2aWE6bnVsbH1dO3doaWxlKG4ubGVuZ3RoKXt2YXIgcj1uLnNoaWZ0KCksbz1yLm1hdGNoO2lmKG8ubWF0Y2hUeXBlKHQpKXtmb3IodmFyIGk9W10scz1yO3MudHlwZTtzPXMudmlhKWkucHVzaChzLnR5cGUpO3JldHVybiBpLnJldmVyc2UoKX1mb3IodmFyIGE9MDthPG8ubmV4dC5sZW5ndGg7YSs9Mil7dmFyIGM9by5uZXh0W2FdO2MuaXNMZWFmfHxjLmhhc1JlcXVpcmVkQXR0cnMoKXx8Yy5uYW1lIGluIGV8fHIudHlwZSYmIW8ubmV4dFthKzFdLnZhbGlkRW5kfHwobi5wdXNoKHttYXRjaDpjLmNvbnRlbnRNYXRjaCx0eXBlOmMsdmlhOnJ9KSxlW2MubmFtZV09ITApfX19LCQuZWRnZUNvdW50LmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLm5leHQubGVuZ3RoPj4xfSxqLnByb3RvdHlwZS5lZGdlPWZ1bmN0aW9uKHQpe3ZhciBlPXQ8PDE7aWYoZT49dGhpcy5uZXh0Lmxlbmd0aCl0aHJvdyBuZXcgUmFuZ2VFcnJvcigiVGhlcmUncyBubyAiK3QrInRoIGVkZ2UgaW4gdGhpcyBjb250ZW50IG1hdGNoIik7cmV0dXJue3R5cGU6dGhpcy5uZXh0W2VdLG5leHQ6dGhpcy5uZXh0W2UrMV19fSxqLnByb3RvdHlwZS50b1N0cmluZz1mdW5jdGlvbigpe3ZhciB0PVtdO2Z1bmN0aW9uIGUobil7dC5wdXNoKG4pO2Zvcih2YXIgcj0xO3I8bi5uZXh0Lmxlbmd0aDtyKz0yKS0xPT10LmluZGV4T2Yobi5uZXh0W3JdKSYmZShuLm5leHRbcl0pfXJldHVybiBlKHRoaXMpLHQubWFwKChmdW5jdGlvbihlLG4pe2Zvcih2YXIgcj1uKyhlLnZhbGlkRW5kPyIqIjoiICIpKyIgIixvPTA7bzxlLm5leHQubGVuZ3RoO28rPTIpcis9KG8/IiwgIjoiIikrZS5uZXh0W29dLm5hbWUrIi0+Iit0LmluZGV4T2YoZS5uZXh0W28rMV0pO3JldHVybiByfSkpLmpvaW4oIlxuIil9LE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKGoucHJvdG90eXBlLCQpLGouZW1wdHk9bmV3IGooITApO3ZhciBWPWZ1bmN0aW9uKHQsZSl7dGhpcy5zdHJpbmc9dCx0aGlzLm5vZGVUeXBlcz1lLHRoaXMuaW5saW5lPW51bGwsdGhpcy5wb3M9MCx0aGlzLnRva2Vucz10LnNwbGl0KC9ccyooPz1cYnxcV3wkKS8pLCIiPT10aGlzLnRva2Vuc1t0aGlzLnRva2Vucy5sZW5ndGgtMV0mJnRoaXMudG9rZW5zLnBvcCgpLCIiPT10aGlzLnRva2Vuc1swXSYmdGhpcy50b2tlbnMudW5zaGlmdCgpfSxMPXtuZXh0Ontjb25maWd1cmFibGU6ITB9fTtmdW5jdGlvbiBxKHQpe3ZhciBlPVtdO2Rve2UucHVzaChKKHQpKX13aGlsZSh0LmVhdCgifCIpKTtyZXR1cm4gMT09ZS5sZW5ndGg/ZVswXTp7dHlwZToiY2hvaWNlIixleHByczplfX1mdW5jdGlvbiBKKHQpe3ZhciBlPVtdO2Rve2UucHVzaChXKHQpKX13aGlsZSh0Lm5leHQmJiIpIiE9dC5uZXh0JiYifCIhPXQubmV4dCk7cmV0dXJuIDE9PWUubGVuZ3RoP2VbMF06e3R5cGU6InNlcSIsZXhwcnM6ZX19ZnVuY3Rpb24gVyh0KXtmb3IodmFyIGU9Ryh0KTs7KWlmKHQuZWF0KCIrIikpZT17dHlwZToicGx1cyIsZXhwcjplfTtlbHNlIGlmKHQuZWF0KCIqIikpZT17dHlwZToic3RhciIsZXhwcjplfTtlbHNlIGlmKHQuZWF0KCI/IikpZT17dHlwZToib3B0IixleHByOmV9O2Vsc2V7aWYoIXQuZWF0KCJ7IikpYnJlYWs7ZT1LKHQsZSl9cmV0dXJuIGV9ZnVuY3Rpb24gSCh0KXsvXEQvLnRlc3QodC5uZXh0KSYmdC5lcnIoIkV4cGVjdGVkIG51bWJlciwgZ290ICciK3QubmV4dCsiJyIpO3ZhciBlPU51bWJlcih0Lm5leHQpO3JldHVybiB0LnBvcysrLGV9ZnVuY3Rpb24gSyh0LGUpe3ZhciBuPUgodCkscj1uO3JldHVybiB0LmVhdCgiLCIpJiYocj0ifSIhPXQubmV4dD9IKHQpOi0xKSx0LmVhdCgifSIpfHx0LmVycigiVW5jbG9zZWQgYnJhY2VkIHJhbmdlIikse3R5cGU6InJhbmdlIixtaW46bixtYXg6cixleHByOmV9fWZ1bmN0aW9uIFUodCxlKXt2YXIgbj10Lm5vZGVUeXBlcyxyPW5bZV07aWYocilyZXR1cm5bcl07dmFyIG89W107Zm9yKHZhciBpIGluIG4pe3ZhciBzPW5baV07cy5ncm91cHMuaW5kZXhPZihlKT4tMSYmby5wdXNoKHMpfXJldHVybiAwPT1vLmxlbmd0aCYmdC5lcnIoIk5vIG5vZGUgdHlwZSBvciBncm91cCAnIitlKyInIGZvdW5kIiksb31mdW5jdGlvbiBHKHQpe2lmKHQuZWF0KCIoIikpe3ZhciBlPXEodCk7cmV0dXJuIHQuZWF0KCIpIil8fHQuZXJyKCJNaXNzaW5nIGNsb3NpbmcgcGFyZW4iKSxlfWlmKCEvXFcvLnRlc3QodC5uZXh0KSl7dmFyIG49VSh0LHQubmV4dCkubWFwKChmdW5jdGlvbihlKXtyZXR1cm4gbnVsbD09dC5pbmxpbmU/dC5pbmxpbmU9ZS5pc0lubGluZTp0LmlubGluZSE9ZS5pc0lubGluZSYmdC5lcnIoIk1peGluZyBpbmxpbmUgYW5kIGJsb2NrIGNvbnRlbnQiKSx7dHlwZToibmFtZSIsdmFsdWU6ZX19KSk7cmV0dXJuIHQucG9zKyssMT09bi5sZW5ndGg/blswXTp7dHlwZToiY2hvaWNlIixleHByczpufX10LmVycigiVW5leHBlY3RlZCB0b2tlbiAnIit0Lm5leHQrIiciKX1mdW5jdGlvbiBYKHQpe3ZhciBlPVtbXV07cmV0dXJuIG8oaSh0LDApLG4oKSksZTtmdW5jdGlvbiBuKCl7cmV0dXJuIGUucHVzaChbXSktMX1mdW5jdGlvbiByKHQsbixyKXt2YXIgbz17dGVybTpyLHRvOm59O3JldHVybiBlW3RdLnB1c2gobyksb31mdW5jdGlvbiBvKHQsZSl7dC5mb3JFYWNoKChmdW5jdGlvbih0KXtyZXR1cm4gdC50bz1lfSkpfWZ1bmN0aW9uIGkodCxlKXtpZigiY2hvaWNlIj09dC50eXBlKXJldHVybiB0LmV4cHJzLnJlZHVjZSgoZnVuY3Rpb24odCxuKXtyZXR1cm4gdC5jb25jYXQoaShuLGUpKX0pLFtdKTtpZigic2VxIj09dC50eXBlKWZvcih2YXIgcz0wOztzKyspe3ZhciBhPWkodC5leHByc1tzXSxlKTtpZihzPT10LmV4cHJzLmxlbmd0aC0xKXJldHVybiBhO28oYSxlPW4oKSl9ZWxzZXtpZigic3RhciI9PXQudHlwZSl7dmFyIGM9bigpO3JldHVybiByKGUsYyksbyhpKHQuZXhwcixjKSxjKSxbcihjKV19aWYoInBsdXMiPT10LnR5cGUpe3ZhciB1PW4oKTtyZXR1cm4gbyhpKHQuZXhwcixlKSx1KSxvKGkodC5leHByLHUpLHUpLFtyKHUpXX1pZigib3B0Ij09dC50eXBlKXJldHVybltyKGUpXS5jb25jYXQoaSh0LmV4cHIsZSkpO2lmKCJyYW5nZSI9PXQudHlwZSl7Zm9yKHZhciBsPWUsaD0wO2g8dC5taW47aCsrKXt2YXIgZj1uKCk7byhpKHQuZXhwcixsKSxmKSxsPWZ9aWYoLTE9PXQubWF4KW8oaSh0LmV4cHIsbCksbCk7ZWxzZSBmb3IodmFyIHA9dC5taW47cDx0Lm1heDtwKyspe3ZhciBkPW4oKTtyKGwsZCksbyhpKHQuZXhwcixsKSxkKSxsPWR9cmV0dXJuW3IobCldfWlmKCJuYW1lIj09dC50eXBlKXJldHVybltyKGUsbnVsbCx0LnZhbHVlKV19fX1mdW5jdGlvbiBZKHQsZSl7cmV0dXJuIGUtdH1mdW5jdGlvbiBaKHQsZSl7dmFyIG49W107cmV0dXJuIHIoZSksbi5zb3J0KFkpO2Z1bmN0aW9uIHIoZSl7dmFyIG89dFtlXTtpZigxPT1vLmxlbmd0aCYmIW9bMF0udGVybSlyZXR1cm4gcihvWzBdLnRvKTtuLnB1c2goZSk7Zm9yKHZhciBpPTA7aTxvLmxlbmd0aDtpKyspe3ZhciBzPW9baV0sYT1zLnRlcm0sYz1zLnRvO2F8fC0xIT1uLmluZGV4T2YoYyl8fHIoYyl9fX1mdW5jdGlvbiBRKHQpe3ZhciBlPU9iamVjdC5jcmVhdGUobnVsbCk7cmV0dXJuIG4oWih0LDApKTtmdW5jdGlvbiBuKHIpe3ZhciBvPVtdO3IuZm9yRWFjaCgoZnVuY3Rpb24oZSl7dFtlXS5mb3JFYWNoKChmdW5jdGlvbihlKXt2YXIgbj1lLnRlcm0scj1lLnRvO2lmKG4pe3ZhciBpPW8uaW5kZXhPZihuKSxzPWk+LTEmJm9baSsxXTtaKHQscikuZm9yRWFjaCgoZnVuY3Rpb24odCl7c3x8by5wdXNoKG4scz1bXSksLTE9PXMuaW5kZXhPZih0KSYmcy5wdXNoKHQpfSkpfX0pKX0pKTtmb3IodmFyIGk9ZVtyLmpvaW4oIiwiKV09bmV3IGooci5pbmRleE9mKHQubGVuZ3RoLTEpPi0xKSxzPTA7czxvLmxlbmd0aDtzKz0yKXt2YXIgYT1vW3MrMV0uc29ydChZKTtpLm5leHQucHVzaChvW3NdLGVbYS5qb2luKCIsIildfHxuKGEpKX1yZXR1cm4gaX19ZnVuY3Rpb24gdHQodCxlKXtmb3IodmFyIG49MCxyPVt0XTtuPHIubGVuZ3RoO24rKyl7Zm9yKHZhciBvPXJbbl0saT0hby52YWxpZEVuZCxzPVtdLGE9MDthPG8ubmV4dC5sZW5ndGg7YSs9Mil7dmFyIGM9by5uZXh0W2FdLHU9by5uZXh0W2ErMV07cy5wdXNoKGMubmFtZSksIWl8fGMuaXNUZXh0fHxjLmhhc1JlcXVpcmVkQXR0cnMoKXx8KGk9ITEpLC0xPT1yLmluZGV4T2YodSkmJnIucHVzaCh1KX1pJiZlLmVycigiT25seSBub24tZ2VuZXJhdGFibGUgbm9kZXMgKCIrcy5qb2luKCIsICIpKyIpIGluIGEgcmVxdWlyZWQgcG9zaXRpb24iKX19ZnVuY3Rpb24gZXQodCl7dmFyIGU9T2JqZWN0LmNyZWF0ZShudWxsKTtmb3IodmFyIG4gaW4gdCl7dmFyIHI9dFtuXTtpZighci5oYXNEZWZhdWx0KXJldHVybiBudWxsO2Vbbl09ci5kZWZhdWx0fXJldHVybiBlfWZ1bmN0aW9uIG50KHQsZSl7dmFyIG49T2JqZWN0LmNyZWF0ZShudWxsKTtmb3IodmFyIHIgaW4gdCl7dmFyIG89ZSYmZVtyXTtpZih2b2lkIDA9PT1vKXt2YXIgaT10W3JdO2lmKCFpLmhhc0RlZmF1bHQpdGhyb3cgbmV3IFJhbmdlRXJyb3IoIk5vIHZhbHVlIHN1cHBsaWVkIGZvciBhdHRyaWJ1dGUgIityKTtvPWkuZGVmYXVsdH1uW3JdPW99cmV0dXJuIG59ZnVuY3Rpb24gcnQodCl7dmFyIGU9T2JqZWN0LmNyZWF0ZShudWxsKTtpZih0KWZvcih2YXIgbiBpbiB0KWVbbl09bmV3IHN0KHRbbl0pO3JldHVybiBlfUwubmV4dC5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy50b2tlbnNbdGhpcy5wb3NdfSxWLnByb3RvdHlwZS5lYXQ9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMubmV4dD09dCYmKHRoaXMucG9zKyt8fCEwKX0sVi5wcm90b3R5cGUuZXJyPWZ1bmN0aW9uKHQpe3Rocm93IG5ldyBTeW50YXhFcnJvcih0KyIgKGluIGNvbnRlbnQgZXhwcmVzc2lvbiAnIit0aGlzLnN0cmluZysiJykiKX0sT2JqZWN0LmRlZmluZVByb3BlcnRpZXMoVi5wcm90b3R5cGUsTCk7dmFyIG90PWZ1bmN0aW9uKHQsZSxuKXt0aGlzLm5hbWU9dCx0aGlzLnNjaGVtYT1lLHRoaXMuc3BlYz1uLHRoaXMuZ3JvdXBzPW4uZ3JvdXA/bi5ncm91cC5zcGxpdCgiICIpOltdLHRoaXMuYXR0cnM9cnQobi5hdHRycyksdGhpcy5kZWZhdWx0QXR0cnM9ZXQodGhpcy5hdHRycyksdGhpcy5jb250ZW50TWF0Y2g9bnVsbCx0aGlzLm1hcmtTZXQ9bnVsbCx0aGlzLmlubGluZUNvbnRlbnQ9bnVsbCx0aGlzLmlzQmxvY2s9IShuLmlubGluZXx8InRleHQiPT10KSx0aGlzLmlzVGV4dD0idGV4dCI9PXR9LGl0PXtpc0lubGluZTp7Y29uZmlndXJhYmxlOiEwfSxpc1RleHRibG9jazp7Y29uZmlndXJhYmxlOiEwfSxpc0xlYWY6e2NvbmZpZ3VyYWJsZTohMH0saXNBdG9tOntjb25maWd1cmFibGU6ITB9fTtpdC5pc0lubGluZS5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4hdGhpcy5pc0Jsb2NrfSxpdC5pc1RleHRibG9jay5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5pc0Jsb2NrJiZ0aGlzLmlubGluZUNvbnRlbnR9LGl0LmlzTGVhZi5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jb250ZW50TWF0Y2g9PWouZW1wdHl9LGl0LmlzQXRvbS5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5pc0xlYWZ8fHRoaXMuc3BlYy5hdG9tfSxvdC5wcm90b3R5cGUuaGFzUmVxdWlyZWRBdHRycz1mdW5jdGlvbigpe2Zvcih2YXIgdCBpbiB0aGlzLmF0dHJzKWlmKHRoaXMuYXR0cnNbdF0uaXNSZXF1aXJlZClyZXR1cm4hMDtyZXR1cm4hMX0sb3QucHJvdG90eXBlLmNvbXBhdGlibGVDb250ZW50PWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzPT10fHx0aGlzLmNvbnRlbnRNYXRjaC5jb21wYXRpYmxlKHQuY29udGVudE1hdGNoKX0sb3QucHJvdG90eXBlLmNvbXB1dGVBdHRycz1mdW5jdGlvbih0KXtyZXR1cm4hdCYmdGhpcy5kZWZhdWx0QXR0cnM/dGhpcy5kZWZhdWx0QXR0cnM6bnQodGhpcy5hdHRycyx0KX0sb3QucHJvdG90eXBlLmNyZWF0ZT1mdW5jdGlvbih0LGUsbil7aWYodGhpcy5pc1RleHQpdGhyb3cgbmV3IEVycm9yKCJOb2RlVHlwZS5jcmVhdGUgY2FuJ3QgY29uc3RydWN0IHRleHQgbm9kZXMiKTtyZXR1cm4gbmV3IEkodGhpcyx0aGlzLmNvbXB1dGVBdHRycyh0KSxzLmZyb20oZSksaC5zZXRGcm9tKG4pKX0sb3QucHJvdG90eXBlLmNyZWF0ZUNoZWNrZWQ9ZnVuY3Rpb24odCxlLG4pe2lmKGU9cy5mcm9tKGUpLCF0aGlzLnZhbGlkQ29udGVudChlKSl0aHJvdyBuZXcgUmFuZ2VFcnJvcigiSW52YWxpZCBjb250ZW50IGZvciBub2RlICIrdGhpcy5uYW1lKTtyZXR1cm4gbmV3IEkodGhpcyx0aGlzLmNvbXB1dGVBdHRycyh0KSxlLGguc2V0RnJvbShuKSl9LG90LnByb3RvdHlwZS5jcmVhdGVBbmRGaWxsPWZ1bmN0aW9uKHQsZSxuKXtpZih0PXRoaXMuY29tcHV0ZUF0dHJzKHQpLGU9cy5mcm9tKGUpLGUuc2l6ZSl7dmFyIHI9dGhpcy5jb250ZW50TWF0Y2guZmlsbEJlZm9yZShlKTtpZighcilyZXR1cm4gbnVsbDtlPXIuYXBwZW5kKGUpfXZhciBvPXRoaXMuY29udGVudE1hdGNoLm1hdGNoRnJhZ21lbnQoZSkuZmlsbEJlZm9yZShzLmVtcHR5LCEwKTtyZXR1cm4gbz9uZXcgSSh0aGlzLHQsZS5hcHBlbmQobyksaC5zZXRGcm9tKG4pKTpudWxsfSxvdC5wcm90b3R5cGUudmFsaWRDb250ZW50PWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMuY29udGVudE1hdGNoLm1hdGNoRnJhZ21lbnQodCk7aWYoIWV8fCFlLnZhbGlkRW5kKXJldHVybiExO2Zvcih2YXIgbj0wO248dC5jaGlsZENvdW50O24rKylpZighdGhpcy5hbGxvd3NNYXJrcyh0LmNoaWxkKG4pLm1hcmtzKSlyZXR1cm4hMTtyZXR1cm4hMH0sb3QucHJvdG90eXBlLmFsbG93c01hcmtUeXBlPWZ1bmN0aW9uKHQpe3JldHVybiBudWxsPT10aGlzLm1hcmtTZXR8fHRoaXMubWFya1NldC5pbmRleE9mKHQpPi0xfSxvdC5wcm90b3R5cGUuYWxsb3dzTWFya3M9ZnVuY3Rpb24odCl7aWYobnVsbD09dGhpcy5tYXJrU2V0KXJldHVybiEwO2Zvcih2YXIgZT0wO2U8dC5sZW5ndGg7ZSsrKWlmKCF0aGlzLmFsbG93c01hcmtUeXBlKHRbZV0udHlwZSkpcmV0dXJuITE7cmV0dXJuITB9LG90LnByb3RvdHlwZS5hbGxvd2VkTWFya3M9ZnVuY3Rpb24odCl7aWYobnVsbD09dGhpcy5tYXJrU2V0KXJldHVybiB0O2Zvcih2YXIgZSxuPTA7bjx0Lmxlbmd0aDtuKyspdGhpcy5hbGxvd3NNYXJrVHlwZSh0W25dLnR5cGUpP2UmJmUucHVzaCh0W25dKTplfHwoZT10LnNsaWNlKDAsbikpO3JldHVybiBlP2UubGVuZ3RoP2U6aC5lbXB0eTp0fSxvdC5jb21waWxlPWZ1bmN0aW9uKHQsZSl7dmFyIG49T2JqZWN0LmNyZWF0ZShudWxsKTt0LmZvckVhY2goKGZ1bmN0aW9uKHQscil7cmV0dXJuIG5bdF09bmV3IG90KHQsZSxyKX0pKTt2YXIgcj1lLnNwZWMudG9wTm9kZXx8ImRvYyI7aWYoIW5bcl0pdGhyb3cgbmV3IFJhbmdlRXJyb3IoIlNjaGVtYSBpcyBtaXNzaW5nIGl0cyB0b3Agbm9kZSB0eXBlICgnIityKyInKSIpO2lmKCFuLnRleHQpdGhyb3cgbmV3IFJhbmdlRXJyb3IoIkV2ZXJ5IHNjaGVtYSBuZWVkcyBhICd0ZXh0JyB0eXBlIik7Zm9yKHZhciBvIGluIG4udGV4dC5hdHRycyl0aHJvdyBuZXcgUmFuZ2VFcnJvcigiVGhlIHRleHQgbm9kZSB0eXBlIHNob3VsZCBub3QgaGF2ZSBhdHRyaWJ1dGVzIik7cmV0dXJuIG59LE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKG90LnByb3RvdHlwZSxpdCk7dmFyIHN0PWZ1bmN0aW9uKHQpe3RoaXMuaGFzRGVmYXVsdD1PYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwodCwiZGVmYXVsdCIpLHRoaXMuZGVmYXVsdD10LmRlZmF1bHR9LGF0PXtpc1JlcXVpcmVkOntjb25maWd1cmFibGU6ITB9fTthdC5pc1JlcXVpcmVkLmdldD1mdW5jdGlvbigpe3JldHVybiF0aGlzLmhhc0RlZmF1bHR9LE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKHN0LnByb3RvdHlwZSxhdCk7dmFyIGN0PWZ1bmN0aW9uKHQsZSxuLHIpe3RoaXMubmFtZT10LHRoaXMuc2NoZW1hPW4sdGhpcy5zcGVjPXIsdGhpcy5hdHRycz1ydChyLmF0dHJzKSx0aGlzLnJhbms9ZSx0aGlzLmV4Y2x1ZGVkPW51bGw7dmFyIG89ZXQodGhpcy5hdHRycyk7dGhpcy5pbnN0YW5jZT1vJiZuZXcgaCh0aGlzLG8pfTtjdC5wcm90b3R5cGUuY3JlYXRlPWZ1bmN0aW9uKHQpe3JldHVybiF0JiZ0aGlzLmluc3RhbmNlP3RoaXMuaW5zdGFuY2U6bmV3IGgodGhpcyxudCh0aGlzLmF0dHJzLHQpKX0sY3QuY29tcGlsZT1mdW5jdGlvbih0LGUpe3ZhciBuPU9iamVjdC5jcmVhdGUobnVsbCkscj0wO3JldHVybiB0LmZvckVhY2goKGZ1bmN0aW9uKHQsbyl7cmV0dXJuIG5bdF09bmV3IGN0KHQscisrLGUsbyl9KSksbn0sY3QucHJvdG90eXBlLnJlbW92ZUZyb21TZXQ9ZnVuY3Rpb24odCl7Zm9yKHZhciBlPTA7ZTx0Lmxlbmd0aDtlKyspaWYodFtlXS50eXBlPT10aGlzKXJldHVybiB0LnNsaWNlKDAsZSkuY29uY2F0KHQuc2xpY2UoZSsxKSk7cmV0dXJuIHR9LGN0LnByb3RvdHlwZS5pc0luU2V0PWZ1bmN0aW9uKHQpe2Zvcih2YXIgZT0wO2U8dC5sZW5ndGg7ZSsrKWlmKHRbZV0udHlwZT09dGhpcylyZXR1cm4gdFtlXX0sY3QucHJvdG90eXBlLmV4Y2x1ZGVzPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLmV4Y2x1ZGVkLmluZGV4T2YodCk+LTF9O3ZhciB1dD1mdW5jdGlvbih0KXtmb3IodmFyIGUgaW4gdGhpcy5zcGVjPXt9LHQpdGhpcy5zcGVjW2VdPXRbZV07dGhpcy5zcGVjLm5vZGVzPXJbImEiXS5mcm9tKHQubm9kZXMpLHRoaXMuc3BlYy5tYXJrcz1yWyJhIl0uZnJvbSh0Lm1hcmtzKSx0aGlzLm5vZGVzPW90LmNvbXBpbGUodGhpcy5zcGVjLm5vZGVzLHRoaXMpLHRoaXMubWFya3M9Y3QuY29tcGlsZSh0aGlzLnNwZWMubWFya3MsdGhpcyk7dmFyIG49T2JqZWN0LmNyZWF0ZShudWxsKTtmb3IodmFyIG8gaW4gdGhpcy5ub2Rlcyl7aWYobyBpbiB0aGlzLm1hcmtzKXRocm93IG5ldyBSYW5nZUVycm9yKG8rIiBjYW4gbm90IGJlIGJvdGggYSBub2RlIGFuZCBhIG1hcmsiKTt2YXIgaT10aGlzLm5vZGVzW29dLHM9aS5zcGVjLmNvbnRlbnR8fCIiLGE9aS5zcGVjLm1hcmtzO2kuY29udGVudE1hdGNoPW5bc118fChuW3NdPWoucGFyc2Uocyx0aGlzLm5vZGVzKSksaS5pbmxpbmVDb250ZW50PWkuY29udGVudE1hdGNoLmlubGluZUNvbnRlbnQsaS5tYXJrU2V0PSJfIj09YT9udWxsOmE/bHQodGhpcyxhLnNwbGl0KCIgIikpOiIiIT1hJiZpLmlubGluZUNvbnRlbnQ/bnVsbDpbXX1mb3IodmFyIGMgaW4gdGhpcy5tYXJrcyl7dmFyIHU9dGhpcy5tYXJrc1tjXSxsPXUuc3BlYy5leGNsdWRlczt1LmV4Y2x1ZGVkPW51bGw9PWw/W3VdOiIiPT1sP1tdOmx0KHRoaXMsbC5zcGxpdCgiICIpKX10aGlzLm5vZGVGcm9tSlNPTj10aGlzLm5vZGVGcm9tSlNPTi5iaW5kKHRoaXMpLHRoaXMubWFya0Zyb21KU09OPXRoaXMubWFya0Zyb21KU09OLmJpbmQodGhpcyksdGhpcy50b3BOb2RlVHlwZT10aGlzLm5vZGVzW3RoaXMuc3BlYy50b3BOb2RlfHwiZG9jIl0sdGhpcy5jYWNoZWQ9T2JqZWN0LmNyZWF0ZShudWxsKSx0aGlzLmNhY2hlZC53cmFwcGluZ3M9T2JqZWN0LmNyZWF0ZShudWxsKX07ZnVuY3Rpb24gbHQodCxlKXtmb3IodmFyIG49W10scj0wO3I8ZS5sZW5ndGg7cisrKXt2YXIgbz1lW3JdLGk9dC5tYXJrc1tvXSxzPWk7aWYoaSluLnB1c2goaSk7ZWxzZSBmb3IodmFyIGEgaW4gdC5tYXJrcyl7dmFyIGM9dC5tYXJrc1thXTsoIl8iPT1vfHxjLnNwZWMuZ3JvdXAmJmMuc3BlYy5ncm91cC5zcGxpdCgiICIpLmluZGV4T2Yobyk+LTEpJiZuLnB1c2gocz1jKX1pZighcyl0aHJvdyBuZXcgU3ludGF4RXJyb3IoIlVua25vd24gbWFyayB0eXBlOiAnIitlW3JdKyInIil9cmV0dXJuIG59dXQucHJvdG90eXBlLm5vZGU9ZnVuY3Rpb24odCxlLG4scil7aWYoInN0cmluZyI9PXR5cGVvZiB0KXQ9dGhpcy5ub2RlVHlwZSh0KTtlbHNle2lmKCEodCBpbnN0YW5jZW9mIG90KSl0aHJvdyBuZXcgUmFuZ2VFcnJvcigiSW52YWxpZCBub2RlIHR5cGU6ICIrdCk7aWYodC5zY2hlbWEhPXRoaXMpdGhyb3cgbmV3IFJhbmdlRXJyb3IoIk5vZGUgdHlwZSBmcm9tIGRpZmZlcmVudCBzY2hlbWEgdXNlZCAoIit0Lm5hbWUrIikiKX1yZXR1cm4gdC5jcmVhdGVDaGVja2VkKGUsbixyKX0sdXQucHJvdG90eXBlLnRleHQ9ZnVuY3Rpb24odCxlKXt2YXIgbj10aGlzLm5vZGVzLnRleHQ7cmV0dXJuIG5ldyBfKG4sbi5kZWZhdWx0QXR0cnMsdCxoLnNldEZyb20oZSkpfSx1dC5wcm90b3R5cGUubWFyaz1mdW5jdGlvbih0LGUpe3JldHVybiJzdHJpbmciPT10eXBlb2YgdCYmKHQ9dGhpcy5tYXJrc1t0XSksdC5jcmVhdGUoZSl9LHV0LnByb3RvdHlwZS5ub2RlRnJvbUpTT049ZnVuY3Rpb24odCl7cmV0dXJuIEkuZnJvbUpTT04odGhpcyx0KX0sdXQucHJvdG90eXBlLm1hcmtGcm9tSlNPTj1mdW5jdGlvbih0KXtyZXR1cm4gaC5mcm9tSlNPTih0aGlzLHQpfSx1dC5wcm90b3R5cGUubm9kZVR5cGU9ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5ub2Rlc1t0XTtpZighZSl0aHJvdyBuZXcgUmFuZ2VFcnJvcigiVW5rbm93biBub2RlIHR5cGU6ICIrdCk7cmV0dXJuIGV9O3ZhciBodD1mdW5jdGlvbih0LGUpe3ZhciBuPXRoaXM7dGhpcy5zY2hlbWE9dCx0aGlzLnJ1bGVzPWUsdGhpcy50YWdzPVtdLHRoaXMuc3R5bGVzPVtdLGUuZm9yRWFjaCgoZnVuY3Rpb24odCl7dC50YWc/bi50YWdzLnB1c2godCk6dC5zdHlsZSYmbi5zdHlsZXMucHVzaCh0KX0pKX07aHQucHJvdG90eXBlLnBhcnNlPWZ1bmN0aW9uKHQsZSl7dm9pZCAwPT09ZSYmKGU9e30pO3ZhciBuPW5ldyBidCh0aGlzLGUsITEpO3JldHVybiBuLmFkZEFsbCh0LG51bGwsZS5mcm9tLGUudG8pLG4uZmluaXNoKCl9LGh0LnByb3RvdHlwZS5wYXJzZVNsaWNlPWZ1bmN0aW9uKHQsZSl7dm9pZCAwPT09ZSYmKGU9e30pO3ZhciBuPW5ldyBidCh0aGlzLGUsITApO3JldHVybiBuLmFkZEFsbCh0LG51bGwsZS5mcm9tLGUudG8pLHAubWF4T3BlbihuLmZpbmlzaCgpKX0saHQucHJvdG90eXBlLm1hdGNoVGFnPWZ1bmN0aW9uKHQsZSl7Zm9yKHZhciBuPTA7bjx0aGlzLnRhZ3MubGVuZ3RoO24rKyl7dmFyIHI9dGhpcy50YWdzW25dO2lmKFN0KHQsci50YWcpJiYodm9pZCAwPT09ci5uYW1lc3BhY2V8fHQubmFtZXNwYWNlVVJJPT1yLm5hbWVzcGFjZSkmJighci5jb250ZXh0fHxlLm1hdGNoZXNDb250ZXh0KHIuY29udGV4dCkpKXtpZihyLmdldEF0dHJzKXt2YXIgbz1yLmdldEF0dHJzKHQpO2lmKCExPT09byljb250aW51ZTtyLmF0dHJzPW99cmV0dXJuIHJ9fX0saHQucHJvdG90eXBlLm1hdGNoU3R5bGU9ZnVuY3Rpb24odCxlLG4pe2Zvcih2YXIgcj0wO3I8dGhpcy5zdHlsZXMubGVuZ3RoO3IrKyl7dmFyIG89dGhpcy5zdHlsZXNbcl07aWYoISgwIT1vLnN0eWxlLmluZGV4T2YodCl8fG8uY29udGV4dCYmIW4ubWF0Y2hlc0NvbnRleHQoby5jb250ZXh0KXx8by5zdHlsZS5sZW5ndGg+dC5sZW5ndGgmJig2MSE9by5zdHlsZS5jaGFyQ29kZUF0KHQubGVuZ3RoKXx8by5zdHlsZS5zbGljZSh0Lmxlbmd0aCsxKSE9ZSkpKXtpZihvLmdldEF0dHJzKXt2YXIgaT1vLmdldEF0dHJzKGUpO2lmKCExPT09aSljb250aW51ZTtvLmF0dHJzPWl9cmV0dXJuIG99fX0saHQuc2NoZW1hUnVsZXM9ZnVuY3Rpb24odCl7dmFyIGU9W107ZnVuY3Rpb24gbih0KXtmb3IodmFyIG49bnVsbD09dC5wcmlvcml0eT81MDp0LnByaW9yaXR5LHI9MDtyPGUubGVuZ3RoO3IrKyl7dmFyIG89ZVtyXSxpPW51bGw9PW8ucHJpb3JpdHk/NTA6by5wcmlvcml0eTtpZihpPG4pYnJlYWt9ZS5zcGxpY2UociwwLHQpfXZhciByPWZ1bmN0aW9uKGUpe3ZhciByPXQubWFya3NbZV0uc3BlYy5wYXJzZURPTTtyJiZyLmZvckVhY2goKGZ1bmN0aW9uKHQpe24odD1PdCh0KSksdC5tYXJrPWV9KSl9O2Zvcih2YXIgbyBpbiB0Lm1hcmtzKXIobyk7dmFyIGk9ZnVuY3Rpb24oZSl7dmFyIHI9dC5ub2Rlc1tzXS5zcGVjLnBhcnNlRE9NO3ImJnIuZm9yRWFjaCgoZnVuY3Rpb24odCl7bih0PU90KHQpKSx0Lm5vZGU9c30pKX07Zm9yKHZhciBzIGluIHQubm9kZXMpaSgpO3JldHVybiBlfSxodC5mcm9tU2NoZW1hPWZ1bmN0aW9uKHQpe3JldHVybiB0LmNhY2hlZC5kb21QYXJzZXJ8fCh0LmNhY2hlZC5kb21QYXJzZXI9bmV3IGh0KHQsaHQuc2NoZW1hUnVsZXModCkpKX07dmFyIGZ0PXthZGRyZXNzOiEwLGFydGljbGU6ITAsYXNpZGU6ITAsYmxvY2txdW90ZTohMCxjYW52YXM6ITAsZGQ6ITAsZGl2OiEwLGRsOiEwLGZpZWxkc2V0OiEwLGZpZ2NhcHRpb246ITAsZmlndXJlOiEwLGZvb3RlcjohMCxmb3JtOiEwLGgxOiEwLGgyOiEwLGgzOiEwLGg0OiEwLGg1OiEwLGg2OiEwLGhlYWRlcjohMCxoZ3JvdXA6ITAsaHI6ITAsbGk6ITAsbm9zY3JpcHQ6ITAsb2w6ITAsb3V0cHV0OiEwLHA6ITAscHJlOiEwLHNlY3Rpb246ITAsdGFibGU6ITAsdGZvb3Q6ITAsdWw6ITB9LHB0PXtoZWFkOiEwLG5vc2NyaXB0OiEwLG9iamVjdDohMCxzY3JpcHQ6ITAsc3R5bGU6ITAsdGl0bGU6ITB9LGR0PXtvbDohMCx1bDohMH0sdnQ9MSxtdD0yLGd0PTQ7ZnVuY3Rpb24geXQodCl7cmV0dXJuKHQ/dnQ6MCl8KCJmdWxsIj09PXQ/bXQ6MCl9dmFyIHd0PWZ1bmN0aW9uKHQsZSxuLHIsbyxpLHMpe3RoaXMudHlwZT10LHRoaXMuYXR0cnM9ZSx0aGlzLnNvbGlkPW8sdGhpcy5tYXRjaD1pfHwocyZndD9udWxsOnQuY29udGVudE1hdGNoKSx0aGlzLm9wdGlvbnM9cyx0aGlzLmNvbnRlbnQ9W10sdGhpcy5tYXJrcz1uLHRoaXMuYWN0aXZlTWFya3M9aC5ub25lLHRoaXMucGVuZGluZ01hcmtzPXJ9O3d0LnByb3RvdHlwZS5maW5kV3JhcHBpbmc9ZnVuY3Rpb24odCl7aWYoIXRoaXMubWF0Y2gpe2lmKCF0aGlzLnR5cGUpcmV0dXJuW107dmFyIGU9dGhpcy50eXBlLmNvbnRlbnRNYXRjaC5maWxsQmVmb3JlKHMuZnJvbSh0KSk7aWYoIWUpe3ZhciBuLHI9dGhpcy50eXBlLmNvbnRlbnRNYXRjaDtyZXR1cm4obj1yLmZpbmRXcmFwcGluZyh0LnR5cGUpKT8odGhpcy5tYXRjaD1yLG4pOm51bGx9dGhpcy5tYXRjaD10aGlzLnR5cGUuY29udGVudE1hdGNoLm1hdGNoRnJhZ21lbnQoZSl9cmV0dXJuIHRoaXMubWF0Y2guZmluZFdyYXBwaW5nKHQudHlwZSl9LHd0LnByb3RvdHlwZS5maW5pc2g9ZnVuY3Rpb24odCl7aWYoISh0aGlzLm9wdGlvbnMmdnQpKXt2YXIgZSxuPXRoaXMuY29udGVudFt0aGlzLmNvbnRlbnQubGVuZ3RoLTFdO24mJm4uaXNUZXh0JiYoZT0vWyBcdFxyXG5cdTAwMGNdKyQvLmV4ZWMobi50ZXh0KSkmJihuLnRleHQubGVuZ3RoPT1lWzBdLmxlbmd0aD90aGlzLmNvbnRlbnQucG9wKCk6dGhpcy5jb250ZW50W3RoaXMuY29udGVudC5sZW5ndGgtMV09bi53aXRoVGV4dChuLnRleHQuc2xpY2UoMCxuLnRleHQubGVuZ3RoLWVbMF0ubGVuZ3RoKSkpfXZhciByPXMuZnJvbSh0aGlzLmNvbnRlbnQpO3JldHVybiF0JiZ0aGlzLm1hdGNoJiYocj1yLmFwcGVuZCh0aGlzLm1hdGNoLmZpbGxCZWZvcmUocy5lbXB0eSwhMCkpKSx0aGlzLnR5cGU/dGhpcy50eXBlLmNyZWF0ZSh0aGlzLmF0dHJzLHIsdGhpcy5tYXJrcyk6cn0sd3QucHJvdG90eXBlLmFwcGx5UGVuZGluZz1mdW5jdGlvbih0KXtmb3IodmFyIGU9MCxuPXRoaXMucGVuZGluZ01hcmtzO2U8bi5sZW5ndGg7ZSsrKXt2YXIgcj1uW2VdOyh0aGlzLnR5cGU/dGhpcy50eXBlLmFsbG93c01hcmtUeXBlKHIudHlwZSk6TXQoci50eXBlLHQpKSYmIXIuaXNJblNldCh0aGlzLmFjdGl2ZU1hcmtzKSYmKHRoaXMuYWN0aXZlTWFya3M9ci5hZGRUb1NldCh0aGlzLmFjdGl2ZU1hcmtzKSx0aGlzLnBlbmRpbmdNYXJrcz1yLnJlbW92ZUZyb21TZXQodGhpcy5wZW5kaW5nTWFya3MpKX19O3ZhciBidD1mdW5jdGlvbih0LGUsbil7dGhpcy5wYXJzZXI9dCx0aGlzLm9wdGlvbnM9ZSx0aGlzLmlzT3Blbj1uO3ZhciByLG89ZS50b3BOb2RlLGk9eXQoZS5wcmVzZXJ2ZVdoaXRlc3BhY2UpfChuP2d0OjApO3I9bz9uZXcgd3Qoby50eXBlLG8uYXR0cnMsaC5ub25lLGgubm9uZSwhMCxlLnRvcE1hdGNofHxvLnR5cGUuY29udGVudE1hdGNoLGkpOm5ldyB3dChuP251bGw6dC5zY2hlbWEudG9wTm9kZVR5cGUsbnVsbCxoLm5vbmUsaC5ub25lLCEwLG51bGwsaSksdGhpcy5ub2Rlcz1bcl0sdGhpcy5vcGVuPTAsdGhpcy5maW5kPWUuZmluZFBvc2l0aW9ucyx0aGlzLm5lZWRzQmxvY2s9ITF9LHh0PXt0b3A6e2NvbmZpZ3VyYWJsZTohMH0sY3VycmVudFBvczp7Y29uZmlndXJhYmxlOiEwfX07ZnVuY3Rpb24ga3QodCl7Zm9yKHZhciBlPXQuZmlyc3RDaGlsZCxuPW51bGw7ZTtlPWUubmV4dFNpYmxpbmcpe3ZhciByPTE9PWUubm9kZVR5cGU/ZS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpOm51bGw7ciYmZHQuaGFzT3duUHJvcGVydHkocikmJm4/KG4uYXBwZW5kQ2hpbGQoZSksZT1uKToibGkiPT1yP249ZTpyJiYobj1udWxsKX19ZnVuY3Rpb24gU3QodCxlKXtyZXR1cm4odC5tYXRjaGVzfHx0Lm1zTWF0Y2hlc1NlbGVjdG9yfHx0LndlYmtpdE1hdGNoZXNTZWxlY3Rvcnx8dC5tb3pNYXRjaGVzU2VsZWN0b3IpLmNhbGwodCxlKX1mdW5jdGlvbiBDdCh0KXt2YXIgZSxuPS9ccyooW1x3LV0rKVxzKjpccyooW147XSspL2cscj1bXTt3aGlsZShlPW4uZXhlYyh0KSlyLnB1c2goZVsxXSxlWzJdLnRyaW0oKSk7cmV0dXJuIHJ9ZnVuY3Rpb24gT3QodCl7dmFyIGU9e307Zm9yKHZhciBuIGluIHQpZVtuXT10W25dO3JldHVybiBlfWZ1bmN0aW9uIE10KHQsZSl7dmFyIG49ZS5zY2hlbWEubm9kZXMscj1mdW5jdGlvbihyKXt2YXIgbz1uW3JdO2lmKG8uYWxsb3dzTWFya1R5cGUodCkpe3ZhciBpPVtdLHM9ZnVuY3Rpb24odCl7aS5wdXNoKHQpO2Zvcih2YXIgbj0wO248dC5lZGdlQ291bnQ7bisrKXt2YXIgcj10LmVkZ2Uobiksbz1yLnR5cGUsYT1yLm5leHQ7aWYobz09ZSlyZXR1cm4hMDtpZihpLmluZGV4T2YoYSk8MCYmcyhhKSlyZXR1cm4hMH19O3JldHVybiBzKG8uY29udGVudE1hdGNoKT97djohMH06dm9pZCAwfX07Zm9yKHZhciBvIGluIG4pe3ZhciBpPXIobyk7aWYoaSlyZXR1cm4gaS52fX14dC50b3AuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubm9kZXNbdGhpcy5vcGVuXX0sYnQucHJvdG90eXBlLmFkZERPTT1mdW5jdGlvbih0KXtpZigzPT10Lm5vZGVUeXBlKXRoaXMuYWRkVGV4dE5vZGUodCk7ZWxzZSBpZigxPT10Lm5vZGVUeXBlKXt2YXIgZT10LmdldEF0dHJpYnV0ZSgic3R5bGUiKSxuPWU/dGhpcy5yZWFkU3R5bGVzKEN0KGUpKTpudWxsLHI9dGhpcy50b3A7aWYobnVsbCE9bilmb3IodmFyIG89MDtvPG4ubGVuZ3RoO28rKyl0aGlzLmFkZFBlbmRpbmdNYXJrKG5bb10pO2lmKHRoaXMuYWRkRWxlbWVudCh0KSxudWxsIT1uKWZvcih2YXIgaT0wO2k8bi5sZW5ndGg7aSsrKXRoaXMucmVtb3ZlUGVuZGluZ01hcmsobltpXSxyKX19LGJ0LnByb3RvdHlwZS5hZGRUZXh0Tm9kZT1mdW5jdGlvbih0KXt2YXIgZT10Lm5vZGVWYWx1ZSxuPXRoaXMudG9wO2lmKChuLnR5cGU/bi50eXBlLmlubGluZUNvbnRlbnQ6bi5jb250ZW50Lmxlbmd0aCYmbi5jb250ZW50WzBdLmlzSW5saW5lKXx8L1teIFx0XHJcblx1MDAwY10vLnRlc3QoZSkpe2lmKG4ub3B0aW9ucyZ2dCluLm9wdGlvbnMmbXR8fChlPWUucmVwbGFjZSgvXHI/XG58XHIvZywiICIpKTtlbHNlIGlmKGU9ZS5yZXBsYWNlKC9bIFx0XHJcblx1MDAwY10rL2csIiAiKSwvXlsgXHRcclxuXHUwMDBjXS8udGVzdChlKSYmdGhpcy5vcGVuPT10aGlzLm5vZGVzLmxlbmd0aC0xKXt2YXIgcj1uLmNvbnRlbnRbbi5jb250ZW50Lmxlbmd0aC0xXSxvPXQucHJldmlvdXNTaWJsaW5nOyghcnx8byYmIkJSIj09by5ub2RlTmFtZXx8ci5pc1RleHQmJi9bIFx0XHJcblx1MDAwY10kLy50ZXN0KHIudGV4dCkpJiYoZT1lLnNsaWNlKDEpKX1lJiZ0aGlzLmluc2VydE5vZGUodGhpcy5wYXJzZXIuc2NoZW1hLnRleHQoZSkpLHRoaXMuZmluZEluVGV4dCh0KX1lbHNlIHRoaXMuZmluZEluc2lkZSh0KX0sYnQucHJvdG90eXBlLmFkZEVsZW1lbnQ9ZnVuY3Rpb24odCl7dmFyIGU9dC5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpO2R0Lmhhc093blByb3BlcnR5KGUpJiZrdCh0KTt2YXIgbj10aGlzLm9wdGlvbnMucnVsZUZyb21Ob2RlJiZ0aGlzLm9wdGlvbnMucnVsZUZyb21Ob2RlKHQpfHx0aGlzLnBhcnNlci5tYXRjaFRhZyh0LHRoaXMpO2lmKG4/bi5pZ25vcmU6cHQuaGFzT3duUHJvcGVydHkoZSkpdGhpcy5maW5kSW5zaWRlKHQpO2Vsc2UgaWYoIW58fG4uc2tpcCl7biYmbi5za2lwLm5vZGVUeXBlJiYodD1uLnNraXApO3ZhciByLG89dGhpcy50b3AsaT10aGlzLm5lZWRzQmxvY2s7aWYoZnQuaGFzT3duUHJvcGVydHkoZSkpcj0hMCxvLnR5cGV8fCh0aGlzLm5lZWRzQmxvY2s9ITApO2Vsc2UgaWYoIXQuZmlyc3RDaGlsZClyZXR1cm4gdm9pZCB0aGlzLmxlYWZGYWxsYmFjayh0KTt0aGlzLmFkZEFsbCh0KSxyJiZ0aGlzLnN5bmMobyksdGhpcy5uZWVkc0Jsb2NrPWl9ZWxzZSB0aGlzLmFkZEVsZW1lbnRCeVJ1bGUodCxuKX0sYnQucHJvdG90eXBlLmxlYWZGYWxsYmFjaz1mdW5jdGlvbih0KXsiQlIiPT10Lm5vZGVOYW1lJiZ0aGlzLnRvcC50eXBlJiZ0aGlzLnRvcC50eXBlLmlubGluZUNvbnRlbnQmJnRoaXMuYWRkVGV4dE5vZGUodC5vd25lckRvY3VtZW50LmNyZWF0ZVRleHROb2RlKCJcbiIpKX0sYnQucHJvdG90eXBlLnJlYWRTdHlsZXM9ZnVuY3Rpb24odCl7Zm9yKHZhciBlPWgubm9uZSxuPTA7bjx0Lmxlbmd0aDtuKz0yKXt2YXIgcj10aGlzLnBhcnNlci5tYXRjaFN0eWxlKHRbbl0sdFtuKzFdLHRoaXMpO2lmKHIpe2lmKHIuaWdub3JlKXJldHVybiBudWxsO2U9dGhpcy5wYXJzZXIuc2NoZW1hLm1hcmtzW3IubWFya10uY3JlYXRlKHIuYXR0cnMpLmFkZFRvU2V0KGUpfX1yZXR1cm4gZX0sYnQucHJvdG90eXBlLmFkZEVsZW1lbnRCeVJ1bGU9ZnVuY3Rpb24odCxlKXt2YXIgbixyLG8saSxzPXRoaXM7ZS5ub2RlPyhyPXRoaXMucGFyc2VyLnNjaGVtYS5ub2Rlc1tlLm5vZGVdLHIuaXNMZWFmP3RoaXMuaW5zZXJ0Tm9kZShyLmNyZWF0ZShlLmF0dHJzKSl8fHRoaXMubGVhZkZhbGxiYWNrKHQpOm49dGhpcy5lbnRlcihyLGUuYXR0cnMsZS5wcmVzZXJ2ZVdoaXRlc3BhY2UpKToobz10aGlzLnBhcnNlci5zY2hlbWEubWFya3NbZS5tYXJrXSxpPW8uY3JlYXRlKGUuYXR0cnMpLHRoaXMuYWRkUGVuZGluZ01hcmsoaSkpO3ZhciBhPXRoaXMudG9wO2lmKHImJnIuaXNMZWFmKXRoaXMuZmluZEluc2lkZSh0KTtlbHNlIGlmKGUuZ2V0Q29udGVudCl0aGlzLmZpbmRJbnNpZGUodCksZS5nZXRDb250ZW50KHQsdGhpcy5wYXJzZXIuc2NoZW1hKS5mb3JFYWNoKChmdW5jdGlvbih0KXtyZXR1cm4gcy5pbnNlcnROb2RlKHQpfSkpO2Vsc2V7dmFyIGM9ZS5jb250ZW50RWxlbWVudDsic3RyaW5nIj09dHlwZW9mIGM/Yz10LnF1ZXJ5U2VsZWN0b3IoYyk6ImZ1bmN0aW9uIj09dHlwZW9mIGMmJihjPWModCkpLGN8fChjPXQpLHRoaXMuZmluZEFyb3VuZCh0LGMsITApLHRoaXMuYWRkQWxsKGMsbil9biYmKHRoaXMuc3luYyhhKSx0aGlzLm9wZW4tLSksaSYmdGhpcy5yZW1vdmVQZW5kaW5nTWFyayhpLGEpfSxidC5wcm90b3R5cGUuYWRkQWxsPWZ1bmN0aW9uKHQsZSxuLHIpe2Zvcih2YXIgbz1ufHwwLGk9bj90LmNoaWxkTm9kZXNbbl06dC5maXJzdENoaWxkLHM9bnVsbD09cj9udWxsOnQuY2hpbGROb2Rlc1tyXTtpIT1zO2k9aS5uZXh0U2libGluZywrK28pdGhpcy5maW5kQXRQb2ludCh0LG8pLHRoaXMuYWRkRE9NKGkpLGUmJmZ0Lmhhc093blByb3BlcnR5KGkubm9kZU5hbWUudG9Mb3dlckNhc2UoKSkmJnRoaXMuc3luYyhlKTt0aGlzLmZpbmRBdFBvaW50KHQsbyl9LGJ0LnByb3RvdHlwZS5maW5kUGxhY2U9ZnVuY3Rpb24odCl7Zm9yKHZhciBlLG4scj10aGlzLm9wZW47cj49MDtyLS0pe3ZhciBvPXRoaXMubm9kZXNbcl0saT1vLmZpbmRXcmFwcGluZyh0KTtpZihpJiYoIWV8fGUubGVuZ3RoPmkubGVuZ3RoKSYmKGU9aSxuPW8sIWkubGVuZ3RoKSlicmVhaztpZihvLnNvbGlkKWJyZWFrfWlmKCFlKXJldHVybiExO3RoaXMuc3luYyhuKTtmb3IodmFyIHM9MDtzPGUubGVuZ3RoO3MrKyl0aGlzLmVudGVySW5uZXIoZVtzXSxudWxsLCExKTtyZXR1cm4hMH0sYnQucHJvdG90eXBlLmluc2VydE5vZGU9ZnVuY3Rpb24odCl7aWYodC5pc0lubGluZSYmdGhpcy5uZWVkc0Jsb2NrJiYhdGhpcy50b3AudHlwZSl7dmFyIGU9dGhpcy50ZXh0YmxvY2tGcm9tQ29udGV4dCgpO2UmJnRoaXMuZW50ZXJJbm5lcihlKX1pZih0aGlzLmZpbmRQbGFjZSh0KSl7dGhpcy5jbG9zZUV4dHJhKCk7dmFyIG49dGhpcy50b3A7bi5hcHBseVBlbmRpbmcodC50eXBlKSxuLm1hdGNoJiYobi5tYXRjaD1uLm1hdGNoLm1hdGNoVHlwZSh0LnR5cGUpKTtmb3IodmFyIHI9bi5hY3RpdmVNYXJrcyxvPTA7bzx0Lm1hcmtzLmxlbmd0aDtvKyspbi50eXBlJiYhbi50eXBlLmFsbG93c01hcmtUeXBlKHQubWFya3Nbb10udHlwZSl8fChyPXQubWFya3Nbb10uYWRkVG9TZXQocikpO3JldHVybiBuLmNvbnRlbnQucHVzaCh0Lm1hcmsocikpLCEwfXJldHVybiExfSxidC5wcm90b3R5cGUuZW50ZXI9ZnVuY3Rpb24odCxlLG4pe3ZhciByPXRoaXMuZmluZFBsYWNlKHQuY3JlYXRlKGUpKTtyZXR1cm4gciYmdGhpcy5lbnRlcklubmVyKHQsZSwhMCxuKSxyfSxidC5wcm90b3R5cGUuZW50ZXJJbm5lcj1mdW5jdGlvbih0LGUsbixyKXt0aGlzLmNsb3NlRXh0cmEoKTt2YXIgbz10aGlzLnRvcDtvLmFwcGx5UGVuZGluZyh0KSxvLm1hdGNoPW8ubWF0Y2gmJm8ubWF0Y2gubWF0Y2hUeXBlKHQsZSk7dmFyIGk9bnVsbD09cj9vLm9wdGlvbnMmfmd0Onl0KHIpO28ub3B0aW9ucyZndCYmMD09by5jb250ZW50Lmxlbmd0aCYmKGl8PWd0KSx0aGlzLm5vZGVzLnB1c2gobmV3IHd0KHQsZSxvLmFjdGl2ZU1hcmtzLG8ucGVuZGluZ01hcmtzLG4sbnVsbCxpKSksdGhpcy5vcGVuKyt9LGJ0LnByb3RvdHlwZS5jbG9zZUV4dHJhPWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMubm9kZXMubGVuZ3RoLTE7aWYoZT50aGlzLm9wZW4pe2Zvcig7ZT50aGlzLm9wZW47ZS0tKXRoaXMubm9kZXNbZS0xXS5jb250ZW50LnB1c2godGhpcy5ub2Rlc1tlXS5maW5pc2godCkpO3RoaXMubm9kZXMubGVuZ3RoPXRoaXMub3BlbisxfX0sYnQucHJvdG90eXBlLmZpbmlzaD1mdW5jdGlvbigpe3JldHVybiB0aGlzLm9wZW49MCx0aGlzLmNsb3NlRXh0cmEodGhpcy5pc09wZW4pLHRoaXMubm9kZXNbMF0uZmluaXNoKHRoaXMuaXNPcGVufHx0aGlzLm9wdGlvbnMudG9wT3Blbil9LGJ0LnByb3RvdHlwZS5zeW5jPWZ1bmN0aW9uKHQpe2Zvcih2YXIgZT10aGlzLm9wZW47ZT49MDtlLS0paWYodGhpcy5ub2Rlc1tlXT09dClyZXR1cm4gdm9pZCh0aGlzLm9wZW49ZSl9LHh0LmN1cnJlbnRQb3MuZ2V0PWZ1bmN0aW9uKCl7dGhpcy5jbG9zZUV4dHJhKCk7Zm9yKHZhciB0PTAsZT10aGlzLm9wZW47ZT49MDtlLS0pe2Zvcih2YXIgbj10aGlzLm5vZGVzW2VdLmNvbnRlbnQscj1uLmxlbmd0aC0xO3I+PTA7ci0tKXQrPW5bcl0ubm9kZVNpemU7ZSYmdCsrfXJldHVybiB0fSxidC5wcm90b3R5cGUuZmluZEF0UG9pbnQ9ZnVuY3Rpb24odCxlKXtpZih0aGlzLmZpbmQpZm9yKHZhciBuPTA7bjx0aGlzLmZpbmQubGVuZ3RoO24rKyl0aGlzLmZpbmRbbl0ubm9kZT09dCYmdGhpcy5maW5kW25dLm9mZnNldD09ZSYmKHRoaXMuZmluZFtuXS5wb3M9dGhpcy5jdXJyZW50UG9zKX0sYnQucHJvdG90eXBlLmZpbmRJbnNpZGU9ZnVuY3Rpb24odCl7aWYodGhpcy5maW5kKWZvcih2YXIgZT0wO2U8dGhpcy5maW5kLmxlbmd0aDtlKyspbnVsbD09dGhpcy5maW5kW2VdLnBvcyYmMT09dC5ub2RlVHlwZSYmdC5jb250YWlucyh0aGlzLmZpbmRbZV0ubm9kZSkmJih0aGlzLmZpbmRbZV0ucG9zPXRoaXMuY3VycmVudFBvcyl9LGJ0LnByb3RvdHlwZS5maW5kQXJvdW5kPWZ1bmN0aW9uKHQsZSxuKXtpZih0IT1lJiZ0aGlzLmZpbmQpZm9yKHZhciByPTA7cjx0aGlzLmZpbmQubGVuZ3RoO3IrKylpZihudWxsPT10aGlzLmZpbmRbcl0ucG9zJiYxPT10Lm5vZGVUeXBlJiZ0LmNvbnRhaW5zKHRoaXMuZmluZFtyXS5ub2RlKSl7dmFyIG89ZS5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbih0aGlzLmZpbmRbcl0ubm9kZSk7byYobj8yOjQpJiYodGhpcy5maW5kW3JdLnBvcz10aGlzLmN1cnJlbnRQb3MpfX0sYnQucHJvdG90eXBlLmZpbmRJblRleHQ9ZnVuY3Rpb24odCl7aWYodGhpcy5maW5kKWZvcih2YXIgZT0wO2U8dGhpcy5maW5kLmxlbmd0aDtlKyspdGhpcy5maW5kW2VdLm5vZGU9PXQmJih0aGlzLmZpbmRbZV0ucG9zPXRoaXMuY3VycmVudFBvcy0odC5ub2RlVmFsdWUubGVuZ3RoLXRoaXMuZmluZFtlXS5vZmZzZXQpKX0sYnQucHJvdG90eXBlLm1hdGNoZXNDb250ZXh0PWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXM7aWYodC5pbmRleE9mKCJ8Iik+LTEpcmV0dXJuIHQuc3BsaXQoL1xzKlx8XHMqLykuc29tZSh0aGlzLm1hdGNoZXNDb250ZXh0LHRoaXMpO3ZhciBuPXQuc3BsaXQoIi8iKSxyPXRoaXMub3B0aW9ucy5jb250ZXh0LG89IXRoaXMuaXNPcGVuJiYoIXJ8fHIucGFyZW50LnR5cGU9PXRoaXMubm9kZXNbMF0udHlwZSksaT0tKHI/ci5kZXB0aCsxOjApKyhvPzA6MSkscz1mdW5jdGlvbih0LGEpe2Zvcig7dD49MDt0LS0pe3ZhciBjPW5bdF07aWYoIiI9PWMpe2lmKHQ9PW4ubGVuZ3RoLTF8fDA9PXQpY29udGludWU7Zm9yKDthPj1pO2EtLSlpZihzKHQtMSxhKSlyZXR1cm4hMDtyZXR1cm4hMX12YXIgdT1hPjB8fDA9PWEmJm8/ZS5ub2Rlc1thXS50eXBlOnImJmE+PWk/ci5ub2RlKGEtaSkudHlwZTpudWxsO2lmKCF1fHx1Lm5hbWUhPWMmJi0xPT11Lmdyb3Vwcy5pbmRleE9mKGMpKXJldHVybiExO2EtLX1yZXR1cm4hMH07cmV0dXJuIHMobi5sZW5ndGgtMSx0aGlzLm9wZW4pfSxidC5wcm90b3R5cGUudGV4dGJsb2NrRnJvbUNvbnRleHQ9ZnVuY3Rpb24oKXt2YXIgdD10aGlzLm9wdGlvbnMuY29udGV4dDtpZih0KWZvcih2YXIgZT10LmRlcHRoO2U+PTA7ZS0tKXt2YXIgbj10Lm5vZGUoZSkuY29udGVudE1hdGNoQXQodC5pbmRleEFmdGVyKGUpKS5kZWZhdWx0VHlwZTtpZihuJiZuLmlzVGV4dGJsb2NrJiZuLmRlZmF1bHRBdHRycylyZXR1cm4gbn1mb3IodmFyIHIgaW4gdGhpcy5wYXJzZXIuc2NoZW1hLm5vZGVzKXt2YXIgbz10aGlzLnBhcnNlci5zY2hlbWEubm9kZXNbcl07aWYoby5pc1RleHRibG9jayYmby5kZWZhdWx0QXR0cnMpcmV0dXJuIG99fSxidC5wcm90b3R5cGUuYWRkUGVuZGluZ01hcms9ZnVuY3Rpb24odCl7dGhpcy50b3AucGVuZGluZ01hcmtzPXQuYWRkVG9TZXQodGhpcy50b3AucGVuZGluZ01hcmtzKX0sYnQucHJvdG90eXBlLnJlbW92ZVBlbmRpbmdNYXJrPWZ1bmN0aW9uKHQsZSl7Zm9yKHZhciBuPXRoaXMub3BlbjtuPj0wO24tLSl7dmFyIHI9dGhpcy5ub2Rlc1tuXSxvPXIucGVuZGluZ01hcmtzLmxhc3RJbmRleE9mKHQpO2lmKG8+LTE/ci5wZW5kaW5nTWFya3M9dC5yZW1vdmVGcm9tU2V0KHIucGVuZGluZ01hcmtzKTpyLmFjdGl2ZU1hcmtzPXQucmVtb3ZlRnJvbVNldChyLmFjdGl2ZU1hcmtzKSxyPT1lKWJyZWFrfX0sT2JqZWN0LmRlZmluZVByb3BlcnRpZXMoYnQucHJvdG90eXBlLHh0KTt2YXIgTnQ9ZnVuY3Rpb24odCxlKXt0aGlzLm5vZGVzPXR8fHt9LHRoaXMubWFya3M9ZXx8e319O2Z1bmN0aW9uIFR0KHQpe3ZhciBlPXt9O2Zvcih2YXIgbiBpbiB0KXt2YXIgcj10W25dLnNwZWMudG9ET007ciYmKGVbbl09cil9cmV0dXJuIGV9ZnVuY3Rpb24gQXQodCl7cmV0dXJuIHQuZG9jdW1lbnR8fHdpbmRvdy5kb2N1bWVudH1OdC5wcm90b3R5cGUuc2VyaWFsaXplRnJhZ21lbnQ9ZnVuY3Rpb24odCxlLG4pe3ZhciByPXRoaXM7dm9pZCAwPT09ZSYmKGU9e30pLG58fChuPUF0KGUpLmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKSk7dmFyIG89bixpPW51bGw7cmV0dXJuIHQuZm9yRWFjaCgoZnVuY3Rpb24odCl7aWYoaXx8dC5tYXJrcy5sZW5ndGgpe2l8fChpPVtdKTt2YXIgbj0wLHM9MDt3aGlsZShuPGkubGVuZ3RoJiZzPHQubWFya3MubGVuZ3RoKXt2YXIgYT10Lm1hcmtzW3NdO2lmKHIubWFya3NbYS50eXBlLm5hbWVdKXtpZighYS5lcShpW25dKXx8ITE9PT1hLnR5cGUuc3BlYy5zcGFubmluZylicmVhaztuKz0yLHMrK31lbHNlIHMrK313aGlsZShuPGkubGVuZ3RoKW89aS5wb3AoKSxpLnBvcCgpO3doaWxlKHM8dC5tYXJrcy5sZW5ndGgpe3ZhciBjPXQubWFya3NbcysrXSx1PXIuc2VyaWFsaXplTWFyayhjLHQuaXNJbmxpbmUsZSk7dSYmKGkucHVzaChjLG8pLG8uYXBwZW5kQ2hpbGQodS5kb20pLG89dS5jb250ZW50RE9NfHx1LmRvbSl9fW8uYXBwZW5kQ2hpbGQoci5zZXJpYWxpemVOb2RlKHQsZSkpfSkpLG59LE50LnByb3RvdHlwZS5zZXJpYWxpemVOb2RlPWZ1bmN0aW9uKHQsZSl7dm9pZCAwPT09ZSYmKGU9e30pO3ZhciBuPU50LnJlbmRlclNwZWMoQXQoZSksdGhpcy5ub2Rlc1t0LnR5cGUubmFtZV0odCkpLHI9bi5kb20sbz1uLmNvbnRlbnRET007aWYobyl7aWYodC5pc0xlYWYpdGhyb3cgbmV3IFJhbmdlRXJyb3IoIkNvbnRlbnQgaG9sZSBub3QgYWxsb3dlZCBpbiBhIGxlYWYgbm9kZSBzcGVjIik7ZS5vbkNvbnRlbnQ/ZS5vbkNvbnRlbnQodCxvLGUpOnRoaXMuc2VyaWFsaXplRnJhZ21lbnQodC5jb250ZW50LGUsbyl9cmV0dXJuIHJ9LE50LnByb3RvdHlwZS5zZXJpYWxpemVOb2RlQW5kTWFya3M9ZnVuY3Rpb24odCxlKXt2b2lkIDA9PT1lJiYoZT17fSk7Zm9yKHZhciBuPXRoaXMuc2VyaWFsaXplTm9kZSh0LGUpLHI9dC5tYXJrcy5sZW5ndGgtMTtyPj0wO3ItLSl7dmFyIG89dGhpcy5zZXJpYWxpemVNYXJrKHQubWFya3Nbcl0sdC5pc0lubGluZSxlKTtvJiYoKG8uY29udGVudERPTXx8by5kb20pLmFwcGVuZENoaWxkKG4pLG49by5kb20pfXJldHVybiBufSxOdC5wcm90b3R5cGUuc2VyaWFsaXplTWFyaz1mdW5jdGlvbih0LGUsbil7dm9pZCAwPT09biYmKG49e30pO3ZhciByPXRoaXMubWFya3NbdC50eXBlLm5hbWVdO3JldHVybiByJiZOdC5yZW5kZXJTcGVjKEF0KG4pLHIodCxlKSl9LE50LnJlbmRlclNwZWM9ZnVuY3Rpb24odCxlLG4pe2lmKHZvaWQgMD09PW4mJihuPW51bGwpLCJzdHJpbmciPT10eXBlb2YgZSlyZXR1cm57ZG9tOnQuY3JlYXRlVGV4dE5vZGUoZSl9O2lmKG51bGwhPWUubm9kZVR5cGUpcmV0dXJue2RvbTplfTt2YXIgcj1lWzBdLG89ci5pbmRleE9mKCIgIik7bz4wJiYobj1yLnNsaWNlKDAsbykscj1yLnNsaWNlKG8rMSkpO3ZhciBpPW51bGwscz1uP3QuY3JlYXRlRWxlbWVudE5TKG4scik6dC5jcmVhdGVFbGVtZW50KHIpLGE9ZVsxXSxjPTE7aWYoYSYmIm9iamVjdCI9PXR5cGVvZiBhJiZudWxsPT1hLm5vZGVUeXBlJiYhQXJyYXkuaXNBcnJheShhKSlmb3IodmFyIHUgaW4gYz0yLGEpaWYobnVsbCE9YVt1XSl7dmFyIGw9dS5pbmRleE9mKCIgIik7bD4wP3Muc2V0QXR0cmlidXRlTlModS5zbGljZSgwLGwpLHUuc2xpY2UobCsxKSxhW3VdKTpzLnNldEF0dHJpYnV0ZSh1LGFbdV0pfWZvcih2YXIgaD1jO2g8ZS5sZW5ndGg7aCsrKXt2YXIgZj1lW2hdO2lmKDA9PT1mKXtpZihoPGUubGVuZ3RoLTF8fGg+Yyl0aHJvdyBuZXcgUmFuZ2VFcnJvcigiQ29udGVudCBob2xlIG11c3QgYmUgdGhlIG9ubHkgY2hpbGQgb2YgaXRzIHBhcmVudCBub2RlIik7cmV0dXJue2RvbTpzLGNvbnRlbnRET006c319dmFyIHA9TnQucmVuZGVyU3BlYyh0LGYsbiksZD1wLmRvbSx2PXAuY29udGVudERPTTtpZihzLmFwcGVuZENoaWxkKGQpLHYpe2lmKGkpdGhyb3cgbmV3IFJhbmdlRXJyb3IoIk11bHRpcGxlIGNvbnRlbnQgaG9sZXMiKTtpPXZ9fXJldHVybntkb206cyxjb250ZW50RE9NOml9fSxOdC5mcm9tU2NoZW1hPWZ1bmN0aW9uKHQpe3JldHVybiB0LmNhY2hlZC5kb21TZXJpYWxpemVyfHwodC5jYWNoZWQuZG9tU2VyaWFsaXplcj1uZXcgTnQodGhpcy5ub2Rlc0Zyb21TY2hlbWEodCksdGhpcy5tYXJrc0Zyb21TY2hlbWEodCkpKX0sTnQubm9kZXNGcm9tU2NoZW1hPWZ1bmN0aW9uKHQpe3ZhciBlPVR0KHQubm9kZXMpO3JldHVybiBlLnRleHR8fChlLnRleHQ9ZnVuY3Rpb24odCl7cmV0dXJuIHQudGV4dH0pLGV9LE50Lm1hcmtzRnJvbVNjaGVtYT1mdW5jdGlvbih0KXtyZXR1cm4gVHQodC5tYXJrcyl9fSwiMzdlOCI6ZnVuY3Rpb24odCxlLG4pe3ZhciByPW4oIjgzYWIiKSxvPW4oIjliZjIiKSxpPW4oIjgyNWEiKSxzPW4oImRmNzUiKTt0LmV4cG9ydHM9cj9PYmplY3QuZGVmaW5lUHJvcGVydGllczpmdW5jdGlvbih0LGUpe2kodCk7dmFyIG4scj1zKGUpLGE9ci5sZW5ndGgsYz0wO3doaWxlKGE+YylvLmYodCxuPXJbYysrXSxlW25dKTtyZXR1cm4gdH19LDM5MjI6ZnVuY3Rpb24odCxlKXt0LmV4cG9ydHM9e2Z1bmN0aW9uYWw6ITAscmVuZGVyKHQsZSl7Y29uc3R7X2M6bixfdjpyLGRhdGE6byxjaGlsZHJlbjppPVtdfT1lLHtjbGFzczpzLHN0YXRpY0NsYXNzOmEsc3R5bGU6YyxzdGF0aWNTdHlsZTp1LGF0dHJzOmw9e30sLi4uaH09bztyZXR1cm4gbigic3ZnIix7Y2xhc3M6W3MsYV0sc3R5bGU6W2MsdV0sYXR0cnM6T2JqZWN0LmFzc2lnbih7eG1sbnM6Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIix2aWV3Qm94OiIwIDAgMjQgMjQifSxsKSwuLi5ofSxpLmNvbmNhdChbbigicGF0aCIse2F0dHJzOntkOiJNMjEgMEgzYTMgMyAwIDAwLTMgM3YxOGEzIDMgMCAwMDMgM2gxOGEzIDMgMCAwMDMtM1YzYTMgMyAwIDAwLTMtM3ptMSAyMWExIDEgMCAwMS0xIDFIM2ExIDEgMCAwMS0xLTFWM2ExIDEgMCAwMTEtMWgxOGExIDEgMCAwMTEgMXoifX0pLG4oInBhdGgiLHthdHRyczp7ZDoiTTExLjI0OSA0LjVhMS4yNTEgMS4yNTEgMCAwMC0xLjc1LjI1TDcuMzY1IDcuNmwtLjQ4Mi0uNDgxYTEuMjUgMS4yNSAwIDAwLTEuNzY3IDEuNzY0bDEuNSAxLjVhMS4yNjIgMS4yNjIgMCAwMDEuODg0LS4xMzRsMy00YTEuMjUgMS4yNSAwIDAwLS4yNTEtMS43NDl6TTExLjI0OSAxMy41YTEuMjUxIDEuMjUxIDAgMDAtMS43NS4yNUw3LjM2NSAxNi42bC0uNDgyLS40ODFhMS4yNSAxLjI1IDAgMTAtMS43NjcgMS43NjhsMS41IDEuNWExLjI2NSAxLjI2NSAwIDAwMS44ODQtLjEzOGwzLTRhMS4yNSAxLjI1IDAgMDAtLjI1MS0xLjc0OXpNMTguNSA3Ljc0OUgxNGExLjI1IDEuMjUgMCAwMDAgMi41aDQuNWExLjI1IDEuMjUgMCAwMDAtMi41ek0xOC41IDE1Ljc0OUgxNGExLjI1IDEuMjUgMCAwMDAgMi41aDQuNWExLjI1IDEuMjUgMCAxMDAtMi41eiJ9fSldKSl9fX0sIjNiYmUiOmZ1bmN0aW9uKHQsZSxuKXt2YXIgcj1uKCI4NjFkIik7dC5leHBvcnRzPWZ1bmN0aW9uKHQpe2lmKCFyKHQpJiZudWxsIT09dCl0aHJvdyBUeXBlRXJyb3IoIkNhbid0IHNldCAiK1N0cmluZyh0KSsiIGFzIGEgcHJvdG90eXBlIik7cmV0dXJuIHR9fSwiM2NhMyI6ZnVuY3Rpb24odCxlLG4peyJ1c2Ugc3RyaWN0Ijt2YXIgcj1uKCI2NTQ3IikuY2hhckF0LG89bigiNjlmMyIpLGk9bigiN2RkMCIpLHM9IlN0cmluZyBJdGVyYXRvciIsYT1vLnNldCxjPW8uZ2V0dGVyRm9yKHMpO2koU3RyaW5nLCJTdHJpbmciLChmdW5jdGlvbih0KXthKHRoaXMse3R5cGU6cyxzdHJpbmc6U3RyaW5nKHQpLGluZGV4OjB9KX0pLChmdW5jdGlvbigpe3ZhciB0LGU9Yyh0aGlzKSxuPWUuc3RyaW5nLG89ZS5pbmRleDtyZXR1cm4gbz49bi5sZW5ndGg/e3ZhbHVlOnZvaWQgMCxkb25lOiEwfToodD1yKG4sbyksZS5pbmRleCs9dC5sZW5ndGgse3ZhbHVlOnQsZG9uZTohMX0pfSkpfSwiM2NlNCI6ZnVuY3Rpb24odCxlLG4peyJ1c2Ugc3RyaWN0Ijt2YXIgcj1uKCJkMmEyIiksbz1uKCIwNzNlIik7ZnVuY3Rpb24gaSgpe31pLnByb3RvdHlwZT1yO3ZhciBzPW5ldyBpO3QuZXhwb3J0cz1zLHMuaGlnaGxpZ2h0PVMscy5oaWdobGlnaHRBdXRvPWsscy5yZWdpc3Rlckxhbmd1YWdlPUMscy5saXN0TGFuZ3VhZ2VzPU8scy5yZWdpc3RlckFsaWFzPU0scy5nZXRMYW5ndWFnZT1JO3ZhciBhPXIuaW5oZXJpdCxjPXt9Lmhhc093blByb3BlcnR5LHU9ImhsanMtIixsPSJjYXNlX2luc2Vuc2l0aXZlIixoPSJjYWNoZWRfdmFyaWFudHMiLGY9InRlcm1pbmF0b3JfZW5kIixwPSIgIixkPSJ8Iix2PSIoIixtPSIpIixnPSJcXCIseT1bIm9mIiwiYW5kIiwiZm9yIiwiaW4iLCJub3QiLCJvciIsImlmIiwidGhlbiJdLHc9W10sYj17fSx4PXt9O2Z1bmN0aW9uIGsodCxlKXt2YXIgbixyLGkscyxhPWV8fHt9LGM9YS5zdWJzZXR8fHcsbD1hLnByZWZpeCxoPWMubGVuZ3RoLGY9LTE7aWYobnVsbCE9PWwmJnZvaWQgMCE9PWx8fChsPXUpLCJzdHJpbmciIT09dHlwZW9mIHQpdGhyb3cgbygiRXhwZWN0ZWQgYHN0cmluZ2AgZm9yIHZhbHVlLCBnb3QgYCVzYCIsdCk7cj16KHt9KSxuPXooe30pO3doaWxlKCsrZjxoKXM9Y1tmXSxJKHMpJiYoaT16KE4ocyx0LCExLGwpKSxpLmxhbmd1YWdlPXMsaS5yZWxldmFuY2U+ci5yZWxldmFuY2UmJihyPWkpLGkucmVsZXZhbmNlPm4ucmVsZXZhbmNlJiYocj1uLG49aSkpO3JldHVybiByLmxhbmd1YWdlJiYobi5zZWNvbmRCZXN0PXIpLG59ZnVuY3Rpb24gUyh0LGUsbil7dmFyIHI9bnx8e30sbz1yLnByZWZpeDtyZXR1cm4gbnVsbCE9PW8mJnZvaWQgMCE9PW98fChvPXUpLHooTih0LGUsITAsbykpfWZ1bmN0aW9uIEModCxlKXt2YXIgbj1lKHMpO24ucmF3RGVmaW5pdGlvbj1lLmJpbmQobnVsbCxzKSxiW3RdPW4sdy5wdXNoKHQpLG4uYWxpYXNlcyYmTSh0LG4uYWxpYXNlcyl9ZnVuY3Rpb24gTygpe3JldHVybiB3LmNvbmNhdCgpfWZ1bmN0aW9uIE0odCxlKXt2YXIgbixyLG8saSxzPXQ7Zm9yKG4gaW4gZSYmKHM9e30sc1t0XT1lKSxzKXtyPXNbbl0scj0ic3RyaW5nIj09PXR5cGVvZiByP1tyXTpyLG89ci5sZW5ndGgsaT0tMTt3aGlsZSgrK2k8byl4W3JbaV1dPW59fWZ1bmN0aW9uIE4odCxlLG4scixpKXt2YXIgcyxhLHUsaCxmLHAsZCx2LG09e30sZz17fSx5PVtdLHc9IiIseD0wO2lmKCJzdHJpbmciIT09dHlwZW9mIHQpdGhyb3cgbygiRXhwZWN0ZWQgYHN0cmluZ2AgZm9yIG5hbWUsIGdvdCBgJXNgIix0KTtpZigic3RyaW5nIiE9PXR5cGVvZiBlKXRocm93IG8oIkV4cGVjdGVkIGBzdHJpbmdgIGZvciB2YWx1ZSwgZ290IGAlc2AiLGUpO2lmKHM9SSh0KSxhPWl8fHMsdj1bXSx1PWEsaD12LCFzKXRocm93IG8oIlVua25vd24gbGFuZ3VhZ2U6IGAlc2AgaXMgbm90IHJlZ2lzdGVyZWQiLHQpO1Qocyk7dHJ5e2EudGVybWluYXRvcnMubGFzdEluZGV4PTAsZj0wLGQ9YS50ZXJtaW5hdG9ycy5leGVjKGUpO3doaWxlKGQpcD1NKGUuc2xpY2UoZixkLmluZGV4KSxkKSxmPWQuaW5kZXgrcCxhLnRlcm1pbmF0b3JzLmxhc3RJbmRleD1mLGQ9YS50ZXJtaW5hdG9ycy5leGVjKGUpO00oZS5zbGljZShmKSksdT1hO3doaWxlKHUucGFyZW50KXUuY2xhc3NOYW1lJiZWKCksdT11LnBhcmVudDtyZXR1cm57cmVsZXZhbmNlOngsdmFsdWU6aCxpbGxlZ2FsOiExLGxhbmd1YWdlOnQsdG9wOmF9fWNhdGNoKEwpe2lmKC0xPT09TC5tZXNzYWdlLmluZGV4T2YoIklsbGVnYWwiKSl0aHJvdyBMO3JldHVybntyZWxldmFuY2U6MCxpbGxlZ2FsOiEwLHZhbHVlOkIoZSxbXSl9fWZ1bmN0aW9uIFModCl7cmV0dXJuIG5ldyBSZWdFeHAodC5yZXBsYWNlKC9bLS9cXF4kKis/LigpfFtcXXt9XS9nLCJcXCQmIiksIm0iKX1mdW5jdGlvbiBDKHQpe3ZhciBlPXRbMF0sbj10LnJ1bGU7cmV0dXJuIG4mJm4uZW5kU2FtZUFzQmVnaW4mJihuLmVuZFJlPVMoZSkpLG4uc2tpcD93Kz1lOihuLmV4Y2x1ZGVCZWdpbiYmKHcrPWUpLHooRSgpLGgpLG4ucmV0dXJuQmVnaW58fG4uZXhjbHVkZUJlZ2lufHwodz1lKSksQShuKSxuLnJldHVybkJlZ2luPzA6ZS5sZW5ndGh9ZnVuY3Rpb24gTyh0KXt2YXIgbj10WzBdLHI9ZS5zbGljZSh0LmluZGV4KSxvPSQoYSxyKTtpZihvKXt2YXIgaT1hO2kuc2tpcD93Kz1uOihpLnJldHVybkVuZHx8aS5leGNsdWRlRW5kfHwodys9bikseihFKCksaCksaS5leGNsdWRlRW5kJiYodz1uKSk7ZG97YS5jbGFzc05hbWUmJlYoKSxhLnNraXB8fGEuc3ViTGFuZ3VhZ2V8fCh4Kz1hLnJlbGV2YW5jZSksYT1hLnBhcmVudH13aGlsZShhIT09by5wYXJlbnQpO3JldHVybiBvLnN0YXJ0cyYmKG8uZW5kU2FtZUFzQmVnaW4mJihvLnN0YXJ0cy5lbmRSZT1vLmVuZFJlKSxBKG8uc3RhcnRzKSksaS5yZXR1cm5FbmQ/MDpuLmxlbmd0aH19ZnVuY3Rpb24gTSh0LHIpe3ZhciBpLHM9ciYmclswXTtpZih3Kz10LHZvaWQgMD09PXMpcmV0dXJuIHooRSgpLGgpLDA7aWYoImJlZ2luIj09PW0udHlwZSYmImVuZCI9PT1yLnR5cGUmJm0uaW5kZXg9PT1yLmluZGV4JiYiIj09PXMpcmV0dXJuIHcrPWUuc2xpY2Uoci5pbmRleCxyLmluZGV4KzEpLDE7aWYobT1yLCJiZWdpbiI9PT1yLnR5cGUpcmV0dXJuIEMocik7aWYoImVuZCI9PT1yLnR5cGUmJihpPU8ociksdm9pZCAwIT09aSkpcmV0dXJuIGk7aWYoImlsbGVnYWwiPT09ci50eXBlJiYhbil0aHJvdyBvKCdJbGxlZ2FsIGxleGVtZSAiJXMiIGZvciBtb2RlICIlcyInLHMsYS5jbGFzc05hbWV8fCI8dW5uYW1lZD4iKTtyZXR1cm4gdys9cyxzLmxlbmd0aH1mdW5jdGlvbiBBKHQpe3ZhciBlO3QuY2xhc3NOYW1lJiYoZT1GKHQuY2xhc3NOYW1lLFtdKSksZSYmKGgucHVzaChlKSx5LnB1c2goaCksaD1lLmNoaWxkcmVuKSxhPU9iamVjdC5jcmVhdGUodCx7cGFyZW50Ont2YWx1ZTphfX0pfWZ1bmN0aW9uIEUoKXt2YXIgdD1hLnN1Ykxhbmd1YWdlP0QoKTpSKCk7cmV0dXJuIHc9IiIsdH1mdW5jdGlvbiBEKCl7dmFyIHQsZT0ic3RyaW5nIj09PXR5cGVvZiBhLnN1Ykxhbmd1YWdlO3JldHVybiBlJiYhYlthLnN1Ykxhbmd1YWdlXT9CKHcsW10pOih0PWU/TihhLnN1Ykxhbmd1YWdlLHcsITAscixnW2Euc3ViTGFuZ3VhZ2VdKTprKHcse3N1YnNldDowPT09YS5zdWJMYW5ndWFnZS5sZW5ndGg/dm9pZCAwOmEuc3ViTGFuZ3VhZ2UscHJlZml4OnJ9KSx0Lmxhbmd1YWdlPyhhLnJlbGV2YW5jZT4wJiYoeCs9dC5yZWxldmFuY2UpLGUmJihnW2Euc3ViTGFuZ3VhZ2VdPXQudG9wKSxbRih0Lmxhbmd1YWdlLHQudmFsdWUsITApXSk6W18odyldKX1mdW5jdGlvbiBSKCl7dmFyIHQsZSxuLHIsbz1bXTtpZighYS5rZXl3b3JkcylyZXR1cm4gQih3LG8pO3Q9MCxhLmxleGVtZXNSZS5sYXN0SW5kZXg9MCxlPWEubGV4ZW1lc1JlLmV4ZWModyk7d2hpbGUoZSlCKHcuc2xpY2UodCxlLmluZGV4KSxvKSxyPWooYSxlKSxyPyh4Kz1yWzFdLG49RihyWzBdLFtdKSxvLnB1c2gobiksQihlWzBdLG4uY2hpbGRyZW4pKTpCKGVbMF0sbyksdD1hLmxleGVtZXNSZS5sYXN0SW5kZXgsZT1hLmxleGVtZXNSZS5leGVjKHcpO3JldHVybiBCKHcuc2xpY2UodCksbyksb31mdW5jdGlvbiB6KHQsZSl7dmFyIG4scj10Lmxlbmd0aCxvPS0xO3doaWxlKCsrbzxyKW49dFtvXSwidGV4dCI9PT1uLnR5cGU/QihuLnZhbHVlLGUpOmUucHVzaChuKX1mdW5jdGlvbiBCKHQsZSl7dmFyIG47cmV0dXJuIHQmJihuPWVbZS5sZW5ndGgtMV0sbiYmInRleHQiPT09bi50eXBlP24udmFsdWUrPXQ6ZS5wdXNoKF8odCkpKSxlfWZ1bmN0aW9uIF8odCl7cmV0dXJue3R5cGU6InRleHQiLHZhbHVlOnR9fWZ1bmN0aW9uIEYodCxlLG4pe3JldHVybnt0eXBlOiJlbGVtZW50Iix0YWdOYW1lOiJzcGFuIixwcm9wZXJ0aWVzOntjbGFzc05hbWU6WyhuPyIiOnIpK3RdfSxjaGlsZHJlbjplfX1mdW5jdGlvbiBqKHQsZSl7dmFyIG49ZVswXTtyZXR1cm4gc1tsXSYmKG49bi50b0xvd2VyQ2FzZSgpKSxjLmNhbGwodC5rZXl3b3JkcyxuKSYmdC5rZXl3b3Jkc1tuXX1mdW5jdGlvbiAkKHQsZSl7aWYoUCh0LmVuZFJlLGUpKXt3aGlsZSh0LmVuZHNQYXJlbnQmJnQucGFyZW50KXQ9dC5wYXJlbnQ7cmV0dXJuIHR9aWYodC5lbmRzV2l0aFBhcmVudClyZXR1cm4gJCh0LnBhcmVudCxlKX1mdW5jdGlvbiBWKCl7aD15LnBvcCgpfHx2fX1mdW5jdGlvbiBUKHQpe2Z1bmN0aW9uIGUobyxhKXtvLmNvbXBpbGVkfHwoby5jb21waWxlZD0hMCxvLmtleXdvcmRzPW8ua2V5d29yZHN8fG8uYmVnaW5LZXl3b3JkcyxvLmtleXdvcmRzJiYoby5rZXl3b3Jkcz1BKG8ua2V5d29yZHMsdFtsXSkpLG8ubGV4ZW1lc1JlPWkoby5sZXhlbWVzfHwvXHcrLywhMCksYSYmKG8uYmVnaW5LZXl3b3JkcyYmKG8uYmVnaW49IlxcYigiK28uYmVnaW5LZXl3b3Jkcy5zcGxpdChwKS5qb2luKGQpKyIpXFxiIiksby5iZWdpbnx8KG8uYmVnaW49L1xCfFxiLyksby5iZWdpblJlPWkoby5iZWdpbiksby5lbmRTYW1lQXNCZWdpbiYmKG8uZW5kPW8uYmVnaW4pLG8uZW5kfHxvLmVuZHNXaXRoUGFyZW50fHwoby5lbmQ9L1xCfFxiLyksby5lbmQmJihvLmVuZFJlPWkoby5lbmQpKSxvW2ZdPXMoby5lbmQpfHwiIixvLmVuZHNXaXRoUGFyZW50JiZhW2ZdJiYob1tmXSs9KG8uZW5kP2Q6IiIpK2FbZl0pKSxvLmlsbGVnYWwmJihvLmlsbGVnYWxSZT1pKG8uaWxsZWdhbCkpLHZvaWQgMD09PW8ucmVsZXZhbmNlJiYoby5yZWxldmFuY2U9MSksby5jb250YWlucz1uKG8uY29udGFpbnN8fFtdLG8pLG8uc3RhcnRzJiZlKG8uc3RhcnRzLGEpLG8udGVybWluYXRvcnM9cihvKSl9ZnVuY3Rpb24gbih0LG4pe3ZhciByLG89W10saT10Lmxlbmd0aCxzPS0xO3doaWxlKCsrczxpKXI9dFtzXSxvPW8uY29uY2F0KEQoInNlbGYiPT09cj9uOnIpKTtpPW8ubGVuZ3RoLHM9LTE7d2hpbGUoKytzPGkpZShvW3NdLG4pO3JldHVybiBvfWZ1bmN0aW9uIHIodCl7dmFyIGUsbixyPXt9LHM9W10sYT17fSxjPTEsdT10LmNvbnRhaW5zLGw9dS5sZW5ndGgsaD0tMSxwPVtdO3doaWxlKCsraDxsKW49dVtoXSxtKG4sbi5iZWdpbktleXdvcmRzPyJcXC4/KD86IituLmJlZ2luKyIpXFwuPyI6bi5iZWdpbik7dFtmXSYmbSgiZW5kIix0W2ZdKSx0LmlsbGVnYWwmJm0oImlsbGVnYWwiLHQuaWxsZWdhbCksbD1zLmxlbmd0aCxoPS0xO3doaWxlKCsraDxsKXBbaF09c1toXVsxXTtyZXR1cm4gZT1pKG8ocCxkKSwhMCksYT17bGFzdEluZGV4OjAsZXhlYzp2fSxhO2Z1bmN0aW9uIHYobil7dmFyIG8saSxjLHUsbDtpZigwPT09cy5sZW5ndGgpcmV0dXJuIG51bGw7aWYoZS5sYXN0SW5kZXg9YS5sYXN0SW5kZXgsdT1lLmV4ZWMobiksIXUpcmV0dXJuIG51bGw7bz11Lmxlbmd0aCxpPS0xO3doaWxlKCsraTxvKWlmKGw9dVtpXSx2b2lkIDAhPT1sJiZ2b2lkIDAhPT1yW2ldKXtjPXJbaV07YnJlYWt9cmV0dXJuInN0cmluZyI9PT10eXBlb2YgYz8odS50eXBlPWMsdS5leHRyYT1bdC5pbGxlZ2FsLHQudGVybWluYXRvcl9lbmRdKToodS50eXBlPSJiZWdpbiIsdS5ydWxlPWMpLHV9ZnVuY3Rpb24gbSh0LGUpe3JbY109dCxzLnB1c2goW3QsZV0pLGMrPW5ldyBSZWdFeHAoZS50b1N0cmluZygpK2QpLmV4ZWMoIiIpLmxlbmd0aH19ZnVuY3Rpb24gbyh0LGUpe3ZhciBuLHIsbyxpLGE9L1xbKD86W15cXFxdXXxcXC4pKlxdfFwoXD8/fFxcKFsxLTldXGQqKXxcXC4vLGM9MCx1PSIiLGw9dC5sZW5ndGgsaD0tMTt3aGlsZSgrK2g8bCl7bj10W2hdLG89cyhuKSxjKz0xLHI9YywwIT09aCYmKHUrPWUpLHUrPXY7d2hpbGUoby5sZW5ndGg+MCl7aWYoaT1hLmV4ZWMobyksbnVsbD09PWkpe3UrPW87YnJlYWt9dSs9by5zbGljZSgwLGkuaW5kZXgpLG89by5zbGljZShpLmluZGV4K2lbMF0ubGVuZ3RoKSxpWzBdWzBdPT09ZyYmaVsxXT91Kz1nK1N0cmluZyhOdW1iZXIoaVsxXSkrcik6KHUrPWlbMF0saVswXT09PXYmJmMrKyl9dSs9bX1yZXR1cm4gdX1mdW5jdGlvbiBpKGUsbil7cmV0dXJuIG5ldyBSZWdFeHAocyhlKSwibSIrKHRbbF0/ImkiOiIiKSsobj8iZyI6IiIpKX1mdW5jdGlvbiBzKHQpe3JldHVybiB0JiZ0LnNvdXJjZXx8dH1lKHQpfWZ1bmN0aW9uIEEodCxlKXt2YXIgbixyPXt9O2lmKCJzdHJpbmciPT09dHlwZW9mIHQpbygia2V5d29yZCIsdCk7ZWxzZSBmb3IobiBpbiB0KW8obix0W25dKTtyZXR1cm4gcjtmdW5jdGlvbiBvKHQsbil7dmFyIHI9ZT9uLnRvTG93ZXJDYXNlKCk6bjtpKHQsci5zcGxpdChwKSl9ZnVuY3Rpb24gaSh0LGUpe3ZhciBuLG89ZS5sZW5ndGgsaT0tMTt3aGlsZSgrK2k8byluPWVbaV0uc3BsaXQoZCkscltuWzBdXT1bdCxOdW1iZXIoblsxXSl8fEUoblswXSk/MDoxXX19ZnVuY3Rpb24gRSh0KXtyZXR1cm4tMSE9PXkuaW5kZXhPZih0LnRvTG93ZXJDYXNlKCkpfWZ1bmN0aW9uIEQodCl7dmFyIGUsbixyLG87aWYodC52YXJpYW50cyYmIXRbaF0pe3I9dC52YXJpYW50cyxlPXIubGVuZ3RoLG49LTEsbz1bXTt3aGlsZSgrK248ZSlvW25dPWEodCx7dmFyaWFudHM6bnVsbH0scltuXSk7dFtoXT1vfXJldHVybiB0LmNhY2hlZF92YXJpYW50cz90LmNhY2hlZF92YXJpYW50czpSKHQpP1thKHQse3N0YXJ0czp0LnN0YXJ0cz9hKHQuc3RhcnRzKTpudWxsfSldOlt0XX1mdW5jdGlvbiBSKHQpe3JldHVybiEhdCYmKHQuZW5kc1dpdGhQYXJlbnR8fFIodC5zdGFydHMpKX1mdW5jdGlvbiB6KHQpe3JldHVybntyZWxldmFuY2U6dC5yZWxldmFuY2V8fDAsbGFuZ3VhZ2U6dC5sYW5ndWFnZXx8bnVsbCx2YWx1ZTp0LnZhbHVlfHxbXX19ZnVuY3Rpb24gUCh0LGUpe3ZhciBuPXQmJnQuZXhlYyhlKTtyZXR1cm4gbiYmMD09PW4uaW5kZXh9ZnVuY3Rpb24gSSh0KXtyZXR1cm4gdD10LnRvTG93ZXJDYXNlKCksYlt0XXx8Ylt4W3RdXX19LCIzZWIzIjpmdW5jdGlvbih0LGUpe3QuZXhwb3J0cz17ZnVuY3Rpb25hbDohMCxyZW5kZXIodCxlKXtjb25zdHtfYzpuLF92OnIsZGF0YTpvLGNoaWxkcmVuOmk9W119PWUse2NsYXNzOnMsc3RhdGljQ2xhc3M6YSxzdHlsZTpjLHN0YXRpY1N0eWxlOnUsYXR0cnM6bD17fSwuLi5ofT1vO3JldHVybiBuKCJzdmciLHtjbGFzczpbcyxhXSxzdHlsZTpbYyx1XSxhdHRyczpPYmplY3QuYXNzaWduKHt4bWxuczoiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciLHZpZXdCb3g6IjAgMCAyNCAyNCJ9LGwpLC4uLmh9LGkuY29uY2F0KFtuKCJwYXRoIix7YXR0cnM6e2Q6Ik0xNy4xOTQgMTAuOTYyQTYuMjcxIDYuMjcxIDAgMDAxMi44NDQuMjQ4SDQuM2ExLjI1IDEuMjUgMCAwMDAgMi41aDEuMDEzYS4yNS4yNSAwIDAxLjI1LjI1VjIxYS4yNS4yNSAwIDAxLS4yNS4yNUg0LjNhMS4yNSAxLjI1IDAgMTAwIDIuNWg5Ljk2M2E2Ljc0MiA2Ljc0MiAwIDAwMi45My0xMi43ODZ6bS00LjM1LTguMjE0YTMuNzYyIDMuNzYyIDAgMDEwIDcuNTIzSDguMzEzYS4yNS4yNSAwIDAxLS4yNS0uMjVWM2EuMjUuMjUgMCAwMS4yNS0uMjV6bTEuNDIgMTguNUg4LjMxM2EuMjUuMjUgMCAwMS0uMjUtLjI1di03Ljk3N2EuMjUuMjUgMCAwMS4yNS0uMjVIMTQuMjY0YTQuMjM5IDQuMjM5IDAgMDEwIDguNDc3eiJ9fSldKSl9fX0sIjNmOGMiOmZ1bmN0aW9uKHQsZSl7dC5leHBvcnRzPXt9fSwiNDBmNyI6ZnVuY3Rpb24odCxlLG4peyJ1c2Ugc3RyaWN0IjtPYmplY3QuZGVmaW5lUHJvcGVydHkoZSwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSk7dmFyIHI9bigiNTMxMyIpLG89bigiMWM0ZiIpLGk9bigiNTViZSIpLHM9ZnVuY3Rpb24odCl7cmV0dXJuIGZ1bmN0aW9uKGUpe3ZhciBuPVYodCkoZS5zZWxlY3Rpb24pO3JldHVybiBuP1Mobi5wb3MpKGUpOmV9fSxhPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIGZ1bmN0aW9uKG4pe0FycmF5LmlzQXJyYXkodCl8fCh0PVt0XSk7Zm9yKHZhciByPTAsbz10Lmxlbmd0aDtyPG87cisrKXt2YXIgaT1WKHRbcl0pKG4uc2VsZWN0aW9uKTtpZihpKXt2YXIgcz14KGkucG9zLGUpKG4pO2lmKHMhPT1uKXJldHVybiBzfX1yZXR1cm4gbn19LGM9ZnVuY3Rpb24odCl7aWYoeSh0LnNlbGVjdGlvbikpe3ZhciBlPXQuc2VsZWN0aW9uLiRmcm9tLnBvcyxuPXQuc2VsZWN0aW9uLiR0by5wb3M7cmV0dXJuIGIodC5kZWxldGUoZSxuKSl9cmV0dXJuIHR9LHU9ZnVuY3Rpb24odCl7cmV0dXJuIGZ1bmN0aW9uKGUpe2lmKHkoZS5zZWxlY3Rpb24pKXt2YXIgbj1lLnNlbGVjdGlvbixpPW4uJGZyb20scz1uLiR0bztpZih0IGluc3RhbmNlb2Ygby5GcmFnbWVudCYmaS5wYXJlbnQuY2FuUmVwbGFjZShpLmluZGV4KCksaS5pbmRleEFmdGVyKCksdCl8fGkucGFyZW50LmNhblJlcGxhY2VXaXRoKGkuaW5kZXgoKSxpLmluZGV4QWZ0ZXIoKSx0LnR5cGUpKXJldHVybiBiKGUucmVwbGFjZVdpdGgoaS5wb3Mscy5wb3MsdCkuc2V0U2VsZWN0aW9uKG5ldyByLk5vZGVTZWxlY3Rpb24oZS5kb2MucmVzb2x2ZShpLnBvcykpKSl9cmV0dXJuIGV9fSxsPWZ1bmN0aW9uKHQpe3ZhciBlPWFyZ3VtZW50cy5sZW5ndGg+MSYmdm9pZCAwIT09YXJndW1lbnRzWzFdP2FyZ3VtZW50c1sxXToxO3JldHVybiBmdW5jdGlvbihuKXt2YXIgbz1yLlNlbGVjdGlvbi5maW5kRnJvbShuLmRvYy5yZXNvbHZlKHQpLGUsITApO3JldHVybiBvP24uc2V0U2VsZWN0aW9uKG8pOm59fSxoPWZ1bmN0aW9uKHQpe3JldHVybiB0LnR5cGUmJnQudHlwZS5zcGVjLnNlbGVjdGFibGV9LGY9ZnVuY3Rpb24odCl7cmV0dXJuIGgodCkmJnQudHlwZS5pc0xlYWZ9LHA9ZnVuY3Rpb24odCxlLG4pe3JldHVybiBmKHQpP24uc2V0U2VsZWN0aW9uKG5ldyByLk5vZGVTZWxlY3Rpb24obi5kb2MucmVzb2x2ZShlKSkpOmwoZSkobil9LGQ9ZnVuY3Rpb24odCxlLG4pe3JldHVybiBmdW5jdGlvbihyKXt2YXIgbz0ibnVtYmVyIj09PXR5cGVvZiBlLGk9ci5zZWxlY3Rpb24uJGZyb20scz1vP3IuZG9jLnJlc29sdmUoZSk6eShyLnNlbGVjdGlvbik/ci5kb2MucmVzb2x2ZShpLnBvcysxKTppLGM9cy5wYXJlbnQ7aWYoeShyLnNlbGVjdGlvbikmJm4pe3ZhciBsPXI7aWYocj11KHQpKHIpLGwhPT1yKXJldHVybiByfWlmKE0oYykpe3ZhciBmPXI7aWYocj1hKGMudHlwZSx0KShyKSxmIT09cil7dmFyIGQ9aCh0KT9zLmJlZm9yZShzLmRlcHRoKTpzLnBvcztyZXR1cm4gcCh0LGQscil9fWlmKE8ocyx0KSl7ci5pbnNlcnQocy5wb3MsdCk7dmFyIHY9bz9zLnBvczpoKHQpP3Iuc2VsZWN0aW9uLiRhbmNob3IucG9zLTE6ci5zZWxlY3Rpb24uJGFuY2hvci5wb3M7cmV0dXJuIGIocCh0LHYscikpfWZvcih2YXIgbT1zLmRlcHRoO20+MDttLS0pe3ZhciBnPXMuYWZ0ZXIobSksdz1yLmRvYy5yZXNvbHZlKGcpO2lmKE8odyx0KSlyZXR1cm4gci5pbnNlcnQoZyx0KSxiKHAodCxnLHIpKX1yZXR1cm4gcn19LHY9ZnVuY3Rpb24odCxlLG4scil7cmV0dXJuIGZ1bmN0aW9uKG8pe3ZhciBpPVYodCkoby5zZWxlY3Rpb24pO3JldHVybiBpP2Ioby5zZXROb2RlTWFya3VwKGkucG9zLGUsT2JqZWN0LmFzc2lnbih7fSxpLm5vZGUuYXR0cnMsbikscikpOm99fSxtPWZ1bmN0aW9uKHQpe3JldHVybiBmdW5jdGlvbihlKXtpZigheShlLnNlbGVjdGlvbikpe3ZhciBuPVYodCkoZS5zZWxlY3Rpb24pO2lmKG4pcmV0dXJuIGIoZS5zZXRTZWxlY3Rpb24oci5Ob2RlU2VsZWN0aW9uLmNyZWF0ZShlLmRvYyxuLnBvcykpKX1yZXR1cm4gZX19LGc9ZnVuY3Rpb24odCl7dmFyIGU9SCh0LnNlbGVjdGlvbik7cmV0dXJuIm51bWJlciI9PT10eXBlb2YgZT9TKGUpKHQpOnR9LHk9ZnVuY3Rpb24odCl7cmV0dXJuIHQgaW5zdGFuY2VvZiByLk5vZGVTZWxlY3Rpb259LHc9ZnVuY3Rpb24odCxlKXtyZXR1cm4gQXJyYXkuaXNBcnJheSh0KSYmdC5pbmRleE9mKGUudHlwZSk+LTF8fGUudHlwZT09PXR9LGI9ZnVuY3Rpb24odCl7cmV0dXJuIE9iamVjdC5hc3NpZ24oT2JqZWN0LmNyZWF0ZSh0KSx0KS5zZXRUaW1lKERhdGUubm93KCkpfSx4PWZ1bmN0aW9uKHQsZSl7cmV0dXJuIGZ1bmN0aW9uKG4pe3ZhciByPW4uZG9jLm5vZGVBdCh0KSxvPW4uZG9jLnJlc29sdmUodCk7aWYoayhvLGUpKXtuPW4ucmVwbGFjZVdpdGgodCx0K3Iubm9kZVNpemUsZSk7dmFyIGk9bi5zZWxlY3Rpb24uJGZyb20ucG9zLTE7cmV0dXJuIG49bChNYXRoLm1heChpLDApLC0xKShuKSxuPWwobi5zZWxlY3Rpb24uJGZyb20uc3RhcnQoKSkobiksYihuKX1yZXR1cm4gbn19LGs9ZnVuY3Rpb24odCxlKXt2YXIgbj10Lm5vZGUodC5kZXB0aCk7cmV0dXJuIG4mJm4udHlwZS52YWxpZENvbnRlbnQoZSBpbnN0YW5jZW9mIG8uRnJhZ21lbnQ/ZTpvLkZyYWdtZW50LmZyb20oZSkpfSxTPWZ1bmN0aW9uKHQpe3JldHVybiBmdW5jdGlvbihlKXt2YXIgbj1lLmRvYy5ub2RlQXQodCk7cmV0dXJuIGIoZS5kZWxldGUodCx0K24ubm9kZVNpemUpKX19LEM9ZnVuY3Rpb24odCl7aWYodC5jYWNoZWQudGFibGVOb2RlVHlwZXMpcmV0dXJuIHQuY2FjaGVkLnRhYmxlTm9kZVR5cGVzO3ZhciBlPXt9O3JldHVybiBPYmplY3Qua2V5cyh0Lm5vZGVzKS5mb3JFYWNoKChmdW5jdGlvbihuKXt2YXIgcj10Lm5vZGVzW25dO3Iuc3BlYy50YWJsZVJvbGUmJihlW3Iuc3BlYy50YWJsZVJvbGVdPXIpfSkpLHQuY2FjaGVkLnRhYmxlTm9kZVR5cGVzPWUsZX0sTz1mdW5jdGlvbih0LGUpe3ZhciBuPXQuaW5kZXgoKTtyZXR1cm4gZSBpbnN0YW5jZW9mIG8uRnJhZ21lbnQ/dC5wYXJlbnQuY2FuUmVwbGFjZShuLG4sZSk6ZSBpbnN0YW5jZW9mIG8uTm9kZSYmdC5wYXJlbnQuY2FuUmVwbGFjZVdpdGgobixuLGUudHlwZSl9LE09ZnVuY3Rpb24odCl7cmV0dXJuIXR8fCJwYXJhZ3JhcGgiPT09dC50eXBlLm5hbWUmJjI9PT10Lm5vZGVTaXplfSxOPWZ1bmN0aW9uKHQpe3ZhciBlPWZ1bmN0aW9uKHQpe3JldHVybiB0LnR5cGUuc3BlYy50YWJsZVJvbGUmJi90YWJsZS9pLnRlc3QodC50eXBlLnNwZWMudGFibGVSb2xlKX07cmV0dXJuIEYodCxlKX0sVD1mdW5jdGlvbih0KXt2YXIgZT1hcmd1bWVudHMubGVuZ3RoPjEmJnZvaWQgMCE9PWFyZ3VtZW50c1sxXT9hcmd1bWVudHNbMV06bnVsbDtyZXR1cm4gZT90LmNyZWF0ZUNoZWNrZWQobnVsbCxlKTp0LmNyZWF0ZUFuZEZpbGwoKX0sQT1mdW5jdGlvbih0KXtyZXR1cm4gZnVuY3Rpb24oZSl7Zm9yKHZhciBuPWkuVGFibGVNYXAuZ2V0KGUuJGFuY2hvckNlbGwubm9kZSgtMSkpLHI9ZS4kYW5jaG9yQ2VsbC5zdGFydCgtMSksbz1uLmNlbGxzSW5SZWN0KHQpLHM9bi5jZWxsc0luUmVjdChuLnJlY3RCZXR3ZWVuKGUuJGFuY2hvckNlbGwucG9zLXIsZS4kaGVhZENlbGwucG9zLXIpKSxhPTAsYz1vLmxlbmd0aDthPGM7YSsrKWlmKC0xPT09cy5pbmRleE9mKG9bYV0pKXJldHVybiExO3JldHVybiEwfX0sRT1mdW5jdGlvbih0KXtyZXR1cm4gdFswXS5tYXAoKGZ1bmN0aW9uKGUsbil7cmV0dXJuIHQubWFwKChmdW5jdGlvbih0KXtyZXR1cm4gdFtuXX0pKX0pKX0sRD1mdW5jdGlvbih0KXtmb3IodmFyIGU9aS5UYWJsZU1hcC5nZXQodCksbj1bXSxyPTA7cjxlLmhlaWdodDtyKyspe2Zvcih2YXIgbz1bXSxzPXt9LGE9MDthPGUud2lkdGg7YSsrKXt2YXIgYz1lLm1hcFtyKmUud2lkdGgrYV0sdT10Lm5vZGVBdChjKSxsPWUuZmluZENlbGwoYyk7c1tjXXx8bC50b3AhPT1yP28ucHVzaChudWxsKTooc1tjXT0hMCxvLnB1c2godSkpfW4ucHVzaChvKX1yZXR1cm4gbn0sUj1mdW5jdGlvbih0LGUpe2Zvcih2YXIgbj1bXSxyPWkuVGFibGVNYXAuZ2V0KHQpLG89MDtvPHIuaGVpZ2h0O28rKyl7Zm9yKHZhciBzPXQuY2hpbGQobyksYT1bXSxjPTA7YzxyLndpZHRoO2MrKylpZihlW29dW2NdKXt2YXIgdT1yLm1hcFtvKnIud2lkdGgrY10sbD1lW29dW2NdLGg9dC5ub2RlQXQodSksZj1oLnR5cGUuY3JlYXRlQ2hlY2tlZChPYmplY3QuYXNzaWduKHt9LGwuYXR0cnMpLGwuY29udGVudCxsLm1hcmtzKTthLnB1c2goZil9bi5wdXNoKHMudHlwZS5jcmVhdGVDaGVja2VkKHMuYXR0cnMsYSxzLm1hcmtzKSl9dmFyIHA9dC50eXBlLmNyZWF0ZUNoZWNrZWQodC5hdHRycyxuLHQubWFya3MpO3JldHVybiBwfSx6PWZ1bmN0aW9uKHQsZSxuLHIpe3ZhciBvPUUoRCh0Lm5vZGUpKTtyZXR1cm4gbz1JKG8sZSxuLHIpLG89RShvKSxSKHQubm9kZSxvKX0sUD1mdW5jdGlvbih0LGUsbixyKXt2YXIgbz1EKHQubm9kZSk7cmV0dXJuIG89SShvLGUsbixyKSxSKHQubm9kZSxvKX0sST1mdW5jdGlvbih0LGUsbixyKXt2YXIgbz1lWzBdPm5bMF0/LTE6MSxpPXQuc3BsaWNlKGVbMF0sZS5sZW5ndGgpLHM9aS5sZW5ndGglMj09PTA/MTowLGE9dm9pZCAwO3JldHVybiBhPS0xPT09ciYmMT09PW8/blswXS0xOjE9PT1yJiYtMT09PW8/bltuLmxlbmd0aC0xXS1zKzE6LTE9PT1vP25bMF06bltuLmxlbmd0aC0xXS1zLHQuc3BsaWNlLmFwcGx5KHQsW2EsMF0uY29uY2F0KGkpKSx0fSxCPWZ1bmN0aW9uKHQsZSxuLHIpe3ZhciBvPXQ+ZT8tMToxLGk9IlRhcmdldCBwb3NpdGlvbiBpcyBpbnZhbGlkLCB5b3UgY2FuJ3QgbW92ZSB0aGUgIityKyIgIit0KyIgdG8gIitlKyIsIHRoZSB0YXJnZXQgY2FuJ3QgYmUgc3BsaXQuIFlvdSBjb3VsZCB1c2UgdHJ5VG9GaXQgb3B0aW9uLiI7aWYoMT09PW8pe2lmKC0xIT09bi5zbGljZSgwLG4ubGVuZ3RoLTEpLmluZGV4T2YoZSkpdGhyb3cgbmV3IEVycm9yKGkpfWVsc2UgaWYoLTEhPT1uLnNsaWNlKDEpLmluZGV4T2YoZSkpdGhyb3cgbmV3IEVycm9yKGkpO3JldHVybiEwfSxfPWZ1bmN0aW9uKHQpe3JldHVybiBmdW5jdGlvbihlKXt2YXIgbj1lLiRmcm9tO3JldHVybiBGKG4sdCl9fSxGPWZ1bmN0aW9uKHQsZSl7Zm9yKHZhciBuPXQuZGVwdGg7bj4wO24tLSl7dmFyIHI9dC5ub2RlKG4pO2lmKGUocikpcmV0dXJue3BvczpuPjA/dC5iZWZvcmUobik6MCxzdGFydDp0LnN0YXJ0KG4pLGRlcHRoOm4sbm9kZTpyfX19LGo9ZnVuY3Rpb24odCxlKXtyZXR1cm4gZnVuY3Rpb24obil7dmFyIHI9Xyh0KShuKTtpZihyKXJldHVybiBLKHIucG9zLGUpfX0sJD1mdW5jdGlvbih0KXtyZXR1cm4gZnVuY3Rpb24oZSl7cmV0dXJuISFfKHQpKGUpfX0sVj1mdW5jdGlvbih0KXtyZXR1cm4gZnVuY3Rpb24oZSl7cmV0dXJuIF8oKGZ1bmN0aW9uKGUpe3JldHVybiB3KHQsZSl9KSkoZSl9fSxMPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIEYodCwoZnVuY3Rpb24odCl7cmV0dXJuIHcoZSx0KX0pKX0scT1mdW5jdGlvbih0KXtyZXR1cm4gZnVuY3Rpb24oZSl7cmV0dXJuICQoKGZ1bmN0aW9uKGUpe3JldHVybiB3KHQsZSl9KSkoZSl9fSxKPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIGZ1bmN0aW9uKG4pe3JldHVybiBqKChmdW5jdGlvbihlKXtyZXR1cm4gdyh0LGUpfSksZSkobil9fSxXPWZ1bmN0aW9uKHQpe3JldHVybiBmdW5jdGlvbihlKXtpZih5KGUpKXt2YXIgbj1lLm5vZGUscj1lLiRmcm9tO2lmKHcodCxuKSlyZXR1cm57bm9kZTpuLHBvczpyLnBvcyxkZXB0aDpyLmRlcHRofX19fSxIPWZ1bmN0aW9uKHQpe3ZhciBlPXQuJGZyb20ubm9kZUJlZm9yZSxuPXIuU2VsZWN0aW9uLmZpbmRGcm9tKHQuJGZyb20sLTEpO2lmKG4mJmUpe3ZhciBvPVYoZS50eXBlKShuKTtyZXR1cm4gbz9vLnBvczpuLiRmcm9tLnBvc319LEs9ZnVuY3Rpb24odCxlKXt2YXIgbj1lKHQpLHI9bi5ub2RlLmNoaWxkTm9kZXNbbi5vZmZzZXRdO3JldHVybiBuLm5vZGUubm9kZVR5cGU9PT1Ob2RlLlRFWFRfTk9ERT9uLm5vZGUucGFyZW50Tm9kZTpyJiZyLm5vZGVUeXBlIT09Tm9kZS5URVhUX05PREU/cjpuLm5vZGV9LFU9ZnVuY3Rpb24odCl7dmFyIGU9IShhcmd1bWVudHMubGVuZ3RoPjEmJnZvaWQgMCE9PWFyZ3VtZW50c1sxXSl8fGFyZ3VtZW50c1sxXTtpZighdCl0aHJvdyBuZXcgRXJyb3IoJ0ludmFsaWQgIm5vZGUiIHBhcmFtZXRlcicpO3ZhciBuPVtdO3JldHVybiB0LmRlc2NlbmRhbnRzKChmdW5jdGlvbih0LHIpe2lmKG4ucHVzaCh7bm9kZTp0LHBvczpyfSksIWUpcmV0dXJuITF9KSksbn0sRz1mdW5jdGlvbih0LGUsbil7aWYoIXQpdGhyb3cgbmV3IEVycm9yKCdJbnZhbGlkICJub2RlIiBwYXJhbWV0ZXInKTtpZighZSl0aHJvdyBuZXcgRXJyb3IoJ0ludmFsaWQgInByZWRpY2F0ZSIgcGFyYW1ldGVyJyk7cmV0dXJuIFUodCxuKS5maWx0ZXIoKGZ1bmN0aW9uKHQpe3JldHVybiBlKHQubm9kZSl9KSl9LFg9ZnVuY3Rpb24odCxlKXtyZXR1cm4gRyh0LChmdW5jdGlvbih0KXtyZXR1cm4gdC5pc1RleHR9KSxlKX0sWT1mdW5jdGlvbih0LGUpe3JldHVybiBHKHQsKGZ1bmN0aW9uKHQpe3JldHVybiB0LmlzSW5saW5lfSksZSl9LFo9ZnVuY3Rpb24odCxlKXtyZXR1cm4gRyh0LChmdW5jdGlvbih0KXtyZXR1cm4gdC5pc0Jsb2NrfSksZSl9LFE9ZnVuY3Rpb24odCxlLG4pe3JldHVybiBHKHQsKGZ1bmN0aW9uKHQpe3JldHVybiEhZSh0LmF0dHJzKX0pLG4pfSx0dD1mdW5jdGlvbih0LGUsbil7cmV0dXJuIEcodCwoZnVuY3Rpb24odCl7cmV0dXJuIHQudHlwZT09PWV9KSxuKX0sZXQ9ZnVuY3Rpb24odCxlLG4pe3JldHVybiBHKHQsKGZ1bmN0aW9uKHQpe3JldHVybiBlLmlzSW5TZXQodC5tYXJrcyl9KSxuKX0sbnQ9ZnVuY3Rpb24odCxlKXtyZXR1cm4hIXR0KHQsZSkubGVuZ3RofTtmdW5jdGlvbiBydCh0KXtpZihBcnJheS5pc0FycmF5KHQpKXtmb3IodmFyIGU9MCxuPUFycmF5KHQubGVuZ3RoKTtlPHQubGVuZ3RoO2UrKyluW2VdPXRbZV07cmV0dXJuIG59cmV0dXJuIEFycmF5LmZyb20odCl9dmFyIG90PWZ1bmN0aW9uKHQpe3JldHVybiBfKChmdW5jdGlvbih0KXtyZXR1cm4gdC50eXBlLnNwZWMudGFibGVSb2xlJiYidGFibGUiPT09dC50eXBlLnNwZWMudGFibGVSb2xlfSkpKHQpfSxpdD1mdW5jdGlvbih0KXtyZXR1cm4gdCBpbnN0YW5jZW9mIGkuQ2VsbFNlbGVjdGlvbn0sc3Q9ZnVuY3Rpb24odCl7aWYoaXQodCkpe3ZhciBlPXQuJGFuY2hvckNlbGwuc3RhcnQoLTEpLG49aS5UYWJsZU1hcC5nZXQodC4kYW5jaG9yQ2VsbC5ub2RlKC0xKSk7cmV0dXJuIG4ucmVjdEJldHdlZW4odC4kYW5jaG9yQ2VsbC5wb3MtZSx0LiRoZWFkQ2VsbC5wb3MtZSl9fSxhdD1mdW5jdGlvbih0KXtyZXR1cm4gZnVuY3Rpb24oZSl7aWYoaXQoZSkpe3ZhciBuPWkuVGFibGVNYXAuZ2V0KGUuJGFuY2hvckNlbGwubm9kZSgtMSkpO3JldHVybiBBKHtsZWZ0OnQscmlnaHQ6dCsxLHRvcDowLGJvdHRvbTpuLmhlaWdodH0pKGUpfXJldHVybiExfX0sY3Q9ZnVuY3Rpb24odCl7cmV0dXJuIGZ1bmN0aW9uKGUpe2lmKGl0KGUpKXt2YXIgbj1pLlRhYmxlTWFwLmdldChlLiRhbmNob3JDZWxsLm5vZGUoLTEpKTtyZXR1cm4gQSh7bGVmdDowLHJpZ2h0Om4ud2lkdGgsdG9wOnQsYm90dG9tOnQrMX0pKGUpfXJldHVybiExfX0sdXQ9ZnVuY3Rpb24odCl7aWYoaXQodCkpe3ZhciBlPWkuVGFibGVNYXAuZ2V0KHQuJGFuY2hvckNlbGwubm9kZSgtMSkpO3JldHVybiBBKHtsZWZ0OjAscmlnaHQ6ZS53aWR0aCx0b3A6MCxib3R0b206ZS5oZWlnaHR9KSh0KX1yZXR1cm4hMX0sbHQ9ZnVuY3Rpb24odCl7cmV0dXJuIGZ1bmN0aW9uKGUpe3ZhciBuPW90KGUpO2lmKG4pe3ZhciByPWkuVGFibGVNYXAuZ2V0KG4ubm9kZSksbz1BcnJheS5pc0FycmF5KHQpP3Q6QXJyYXkuZnJvbShbdF0pO3JldHVybiBvLnJlZHVjZSgoZnVuY3Rpb24odCxlKXtpZihlPj0wJiZlPD1yLndpZHRoLTEpe3ZhciBvPXIuY2VsbHNJblJlY3Qoe2xlZnQ6ZSxyaWdodDplKzEsdG9wOjAsYm90dG9tOnIuaGVpZ2h0fSk7cmV0dXJuIHQuY29uY2F0KG8ubWFwKChmdW5jdGlvbih0KXt2YXIgZT1uLm5vZGUubm9kZUF0KHQpLHI9dCtuLnN0YXJ0O3JldHVybntwb3M6cixzdGFydDpyKzEsbm9kZTplfX0pKSl9fSksW10pfX19LGh0PWZ1bmN0aW9uKHQpe3JldHVybiBmdW5jdGlvbihlKXt2YXIgbj1vdChlKTtpZihuKXt2YXIgcj1pLlRhYmxlTWFwLmdldChuLm5vZGUpLG89QXJyYXkuaXNBcnJheSh0KT90OkFycmF5LmZyb20oW3RdKTtyZXR1cm4gby5yZWR1Y2UoKGZ1bmN0aW9uKHQsZSl7aWYoZT49MCYmZTw9ci5oZWlnaHQtMSl7dmFyIG89ci5jZWxsc0luUmVjdCh7bGVmdDowLHJpZ2h0OnIud2lkdGgsdG9wOmUsYm90dG9tOmUrMX0pO3JldHVybiB0LmNvbmNhdChvLm1hcCgoZnVuY3Rpb24odCl7dmFyIGU9bi5ub2RlLm5vZGVBdCh0KSxyPXQrbi5zdGFydDtyZXR1cm57cG9zOnIsc3RhcnQ6cisxLG5vZGU6ZX19KSkpfX0pLFtdKX19fSxmdD1mdW5jdGlvbih0KXt2YXIgZT1vdCh0KTtpZihlKXt2YXIgbj1pLlRhYmxlTWFwLmdldChlLm5vZGUpLHI9bi5jZWxsc0luUmVjdCh7bGVmdDowLHJpZ2h0Om4ud2lkdGgsdG9wOjAsYm90dG9tOm4uaGVpZ2h0fSk7cmV0dXJuIHIubWFwKChmdW5jdGlvbih0KXt2YXIgbj1lLm5vZGUubm9kZUF0KHQpLHI9dCtlLnN0YXJ0O3JldHVybntwb3M6cixzdGFydDpyKzEsbm9kZTpufX0pKX19LHB0PWZ1bmN0aW9uKHQpe3JldHVybiBmdW5jdGlvbihlLG4pe3JldHVybiBmdW5jdGlvbihyKXt2YXIgbz1vdChyLnNlbGVjdGlvbikscz0icm93Ij09PXQ7aWYobyl7dmFyIGE9aS5UYWJsZU1hcC5nZXQoby5ub2RlKTtpZihlPj0wJiZlPChzP2EuaGVpZ2h0OmEud2lkdGgpKXt2YXIgYz1zPzA6ZSx1PXM/ZTowLGw9cz9hLndpZHRoOmUrMSxoPXM/ZSsxOmEuaGVpZ2h0O2lmKG4pe3ZhciBmPVB0KHIuc2VsZWN0aW9uLiRmcm9tKTtpZighZilyZXR1cm4gcjt2YXIgcD1hLmZpbmRDZWxsKGYucG9zLW8uc3RhcnQpO3M/KHU9TWF0aC5taW4odSxwLnRvcCksaD1NYXRoLm1heChoLHAuYm90dG9tKSk6KGM9TWF0aC5taW4oYyxwLmxlZnQpLGw9TWF0aC5tYXgobCxwLnJpZ2h0KSl9dmFyIGQ9YS5jZWxsc0luUmVjdCh7bGVmdDpjLHRvcDp1LHJpZ2h0OnM/bDpjKzEsYm90dG9tOnM/dSsxOmh9KSx2PWgtdT09PTE/ZDphLmNlbGxzSW5SZWN0KHtsZWZ0OnM/YzpsLTEsdG9wOnM/aC0xOnUscmlnaHQ6bCxib3R0b206aH0pLG09by5zdGFydCtkWzBdLGc9by5zdGFydCt2W3YubGVuZ3RoLTFdLHk9ci5kb2MucmVzb2x2ZShtKSx3PXIuZG9jLnJlc29sdmUoZyk7cmV0dXJuIGIoci5zZXRTZWxlY3Rpb24obmV3IGkuQ2VsbFNlbGVjdGlvbih3LHkpKSl9fXJldHVybiByfX19LGR0PXB0KCJjb2x1bW4iKSx2dD1wdCgicm93IiksbXQ9ZnVuY3Rpb24odCl7dmFyIGU9b3QodC5zZWxlY3Rpb24pO2lmKGUpe3ZhciBuPWkuVGFibGVNYXAuZ2V0KGUubm9kZSkscj1uLm1hcDtpZihyJiZyLmxlbmd0aCl7dmFyIG89ZS5zdGFydCtyWzBdLHM9ZS5zdGFydCtyW3IubGVuZ3RoLTFdLGE9dC5kb2MucmVzb2x2ZShvKSxjPXQuZG9jLnJlc29sdmUocyk7cmV0dXJuIGIodC5zZXRTZWxlY3Rpb24obmV3IGkuQ2VsbFNlbGVjdGlvbihjLGEpKSl9fXJldHVybiB0fSxndD1mdW5jdGlvbih0LGUpe3JldHVybiBmdW5jdGlvbihuKXtpZih0KXt2YXIgcj1DKGUpLmNlbGwuY3JlYXRlQW5kRmlsbCgpLG89ci5jb250ZW50O2lmKCF0Lm5vZGUuY29udGVudC5lcShvKSlyZXR1cm4gbi5yZXBsYWNlV2l0aCh0LnBvcysxLHQucG9zK3Qubm9kZS5ub2RlU2l6ZSxvKSxiKG4pfXJldHVybiBufX0seXQ9ZnVuY3Rpb24odCl7cmV0dXJuIGZ1bmN0aW9uKGUpe3ZhciBuPW90KGUuc2VsZWN0aW9uKTtpZihuKXt2YXIgcj1pLlRhYmxlTWFwLmdldChuLm5vZGUpO2lmKHQ+PTAmJnQ8PXIud2lkdGgpcmV0dXJuIGIoaS5hZGRDb2x1bW4oZSx7bWFwOnIsdGFibGVTdGFydDpuLnN0YXJ0LHRhYmxlOm4ubm9kZX0sdCkpfXJldHVybiBlfX0sd3Q9ZnVuY3Rpb24odCxlLG4pe3JldHVybiBmdW5jdGlvbihyKXt2YXIgbz17dHJ5VG9GaXQ6ITEsZGlyZWN0aW9uOjB9LGk9T2JqZWN0LmFzc2lnbihvLG4pLHM9b3Qoci5zZWxlY3Rpb24pO2lmKCFzKXJldHVybiByO3ZhciBhPUZ0KHQpKHIpLGM9YS5pbmRleGVzLHU9RnQoZSkociksbD11LmluZGV4ZXM7aWYoYy5pbmRleE9mKGUpPi0xKXJldHVybiByOyFpLnRyeVRvRml0JiZsLmxlbmd0aD4xJiZCKHQsZSxsLCJyb3ciKTt2YXIgaD1QKHMsYyxsLGkuZGlyZWN0aW9uKTtyZXR1cm4gYihyKS5yZXBsYWNlV2l0aChzLnBvcyxzLnBvcytzLm5vZGUubm9kZVNpemUsaCl9fSxidD1mdW5jdGlvbih0LGUsbil7cmV0dXJuIGZ1bmN0aW9uKHIpe3ZhciBvPXt0cnlUb0ZpdDohMSxkaXJlY3Rpb246MH0saT1PYmplY3QuYXNzaWduKG8sbikscz1vdChyLnNlbGVjdGlvbik7aWYoIXMpcmV0dXJuIHI7dmFyIGE9X3QodCkociksYz1hLmluZGV4ZXMsdT1fdChlKShyKSxsPXUuaW5kZXhlcztpZihjLmluZGV4T2YoZSk+LTEpcmV0dXJuIHI7IWkudHJ5VG9GaXQmJmwubGVuZ3RoPjEmJkIodCxlLGwsImNvbHVtbiIpO3ZhciBoPXoocyxjLGwsaS5kaXJlY3Rpb24pO3JldHVybiBiKHIpLnJlcGxhY2VXaXRoKHMucG9zLHMucG9zK3Mubm9kZS5ub2RlU2l6ZSxoKX19LHh0PWZ1bmN0aW9uKHQsZSl7cmV0dXJuIGZ1bmN0aW9uKG4pe3ZhciByPW90KG4uc2VsZWN0aW9uKTtpZihyKXt2YXIgbz1pLlRhYmxlTWFwLmdldChyLm5vZGUpLHM9dC0xO2lmKGUmJnM+PTApcmV0dXJuIGIoa3QocykobikpO2lmKHQ+PTAmJnQ8PW8uaGVpZ2h0KXJldHVybiBiKGkuYWRkUm93KG4se21hcDpvLHRhYmxlU3RhcnQ6ci5zdGFydCx0YWJsZTpyLm5vZGV9LHQpKX1yZXR1cm4gbn19LGt0PWZ1bmN0aW9uKHQpe3JldHVybiBmdW5jdGlvbihlKXt2YXIgbj1vdChlLnNlbGVjdGlvbik7aWYobil7dmFyIHI9aS5UYWJsZU1hcC5nZXQobi5ub2RlKTtpZih0Pj0wJiZ0PD1yLmhlaWdodCl7Zm9yKHZhciBvPW4ubm9kZSxzPUMoby50eXBlLnNjaGVtYSksYT1uLnN0YXJ0LGM9MDtjPHQrMTtjKyspYSs9by5jaGlsZChjKS5ub2RlU2l6ZTt2YXIgdT1vLmNoaWxkKHQpLGw9W10saD0wO2lmKHUuZm9yRWFjaCgoZnVuY3Rpb24odCl7MT09PXQuYXR0cnMucm93c3BhbiYmKGgrPXQuYXR0cnMuY29sc3BhbixsLnB1c2goc1t0LnR5cGUuc3BlYy50YWJsZVJvbGVdLmNyZWF0ZUFuZEZpbGwodC5hdHRycyx0Lm1hcmtzKSkpfSkpLGg8ci53aWR0aCl7Zm9yKHZhciBmPVtdLHA9ZnVuY3Rpb24obil7dmFyIHI9QnQobiwoZnVuY3Rpb24oZSxyKXt2YXIgbz1lLm5vZGUuYXR0cnMucm93c3BhbixpPW4rbztyZXR1cm4gbz4xJiZpPnR9KSkoZSk7Zi5wdXNoLmFwcGx5KGYscnQocikpfSx2PXQ7dj49MDt2LS0pcCh2KTtmLmxlbmd0aCYmZi5mb3JFYWNoKChmdW5jdGlvbih0KXtlPVJ0KHQse3Jvd3NwYW46dC5ub2RlLmF0dHJzLnJvd3NwYW4rMX0pKGUpfSkpfXJldHVybiBkKHMucm93LmNyZWF0ZSh1LmF0dHJzLGwpLGEpKGUpfX1yZXR1cm4gZX19LFN0PWZ1bmN0aW9uKHQpe3JldHVybiBmdW5jdGlvbihlKXt2YXIgbj1vdChlLnNlbGVjdGlvbik7aWYobil7dmFyIHI9aS5UYWJsZU1hcC5nZXQobi5ub2RlKTtpZigwPT09dCYmMT09PXIud2lkdGgpcmV0dXJuIE90KGUpO2lmKHQ+PTAmJnQ8PXIud2lkdGgpcmV0dXJuIGkucmVtb3ZlQ29sdW1uKGUse21hcDpyLHRhYmxlU3RhcnQ6bi5zdGFydCx0YWJsZTpuLm5vZGV9LHQpLGIoZSl9cmV0dXJuIGV9fSxDdD1mdW5jdGlvbih0KXtyZXR1cm4gZnVuY3Rpb24oZSl7dmFyIG49b3QoZS5zZWxlY3Rpb24pO2lmKG4pe3ZhciByPWkuVGFibGVNYXAuZ2V0KG4ubm9kZSk7aWYoMD09PXQmJjE9PT1yLmhlaWdodClyZXR1cm4gT3QoZSk7aWYodD49MCYmdDw9ci5oZWlnaHQpcmV0dXJuIGkucmVtb3ZlUm93KGUse21hcDpyLHRhYmxlU3RhcnQ6bi5zdGFydCx0YWJsZTpuLm5vZGV9LHQpLGIoZSl9cmV0dXJuIGV9fSxPdD1mdW5jdGlvbih0KXtmb3IodmFyIGU9dC5zZWxlY3Rpb24uJGZyb20sbj1lLmRlcHRoO24+MDtuLS0pe3ZhciByPWUubm9kZShuKTtpZigidGFibGUiPT09ci50eXBlLnNwZWMudGFibGVSb2xlKXJldHVybiBiKHQuZGVsZXRlKGUuYmVmb3JlKG4pLGUuYWZ0ZXIobikpKX1yZXR1cm4gdH0sTXQ9ZnVuY3Rpb24odCl7dmFyIGU9dC5zZWxlY3Rpb247aWYodXQoZSkpcmV0dXJuIE90KHQpO2lmKGl0KGUpKXt2YXIgbj1vdChlKTtpZihuKXt2YXIgcj1pLlRhYmxlTWFwLmdldChuLm5vZGUpLG89ci5yZWN0QmV0d2VlbihlLiRhbmNob3JDZWxsLnBvcy1uLnN0YXJ0LGUuJGhlYWRDZWxsLnBvcy1uLnN0YXJ0KTtpZigwPT1vLmxlZnQmJm8ucmlnaHQ9PXIud2lkdGgpcmV0dXJuITE7Zm9yKHZhciBzPU9iamVjdC5hc3NpZ24oe30sbyx7bWFwOnIsdGFibGU6bi5ub2RlLHRhYmxlU3RhcnQ6bi5zdGFydH0pLGE9cy5yaWdodC0xOzthLS0pe2lmKGkucmVtb3ZlQ29sdW1uKHQscyxhKSxhPT09cy5sZWZ0KWJyZWFrO3MudGFibGU9cy50YWJsZVN0YXJ0P3QuZG9jLm5vZGVBdChzLnRhYmxlU3RhcnQtMSk6dC5kb2Mscy5tYXA9aS5UYWJsZU1hcC5nZXQocy50YWJsZSl9cmV0dXJuIGIodCl9fXJldHVybiB0fSxOdD1mdW5jdGlvbih0KXt2YXIgZT10LnNlbGVjdGlvbjtpZih1dChlKSlyZXR1cm4gT3QodCk7aWYoaXQoZSkpe3ZhciBuPW90KGUpO2lmKG4pe3ZhciByPWkuVGFibGVNYXAuZ2V0KG4ubm9kZSksbz1yLnJlY3RCZXR3ZWVuKGUuJGFuY2hvckNlbGwucG9zLW4uc3RhcnQsZS4kaGVhZENlbGwucG9zLW4uc3RhcnQpO2lmKDA9PW8udG9wJiZvLmJvdHRvbT09ci5oZWlnaHQpcmV0dXJuITE7Zm9yKHZhciBzPU9iamVjdC5hc3NpZ24oe30sbyx7bWFwOnIsdGFibGU6bi5ub2RlLHRhYmxlU3RhcnQ6bi5zdGFydH0pLGE9cy5ib3R0b20tMTs7YS0tKXtpZihpLnJlbW92ZVJvdyh0LHMsYSksYT09PXMudG9wKWJyZWFrO3MudGFibGU9cy50YWJsZVN0YXJ0P3QuZG9jLm5vZGVBdChzLnRhYmxlU3RhcnQtMSk6dC5kb2Mscy5tYXA9aS5UYWJsZU1hcC5nZXQocy50YWJsZSl9cmV0dXJuIGIodCl9fXJldHVybiB0fSxUdD1mdW5jdGlvbih0KXtyZXR1cm4gZnVuY3Rpb24oZSl7dmFyIG49SXQodCk7cmV0dXJuIG4/U3Qobi5sZWZ0KShsKHQucG9zKShlKSk6ZX19LEF0PWZ1bmN0aW9uKHQpe3JldHVybiBmdW5jdGlvbihlKXt2YXIgbj1JdCh0KTtyZXR1cm4gbj9DdChuLnRvcCkobCh0LnBvcykoZSkpOmV9fSxFdD1mdW5jdGlvbih0LGUsbil7cmV0dXJuIGZ1bmN0aW9uKG8pe3ZhciBpPWx0KHQpKG8uc2VsZWN0aW9uKTtpZihpKXtmb3IodmFyIHM9aS5sZW5ndGgtMTtzPj0wO3MtLSlvPWUoaVtzXSxvKTtpZihuKXt2YXIgYT1vLmRvYy5yZXNvbHZlKG8ubWFwcGluZy5tYXAoaVtpLmxlbmd0aC0xXS5wb3MpKTtvLnNldFNlbGVjdGlvbihyLlNlbGVjdGlvbi5uZWFyKGEpKX1yZXR1cm4gYihvKX1yZXR1cm4gb319LER0PWZ1bmN0aW9uKHQsZSxuKXtyZXR1cm4gZnVuY3Rpb24obyl7dmFyIGk9aHQodCkoby5zZWxlY3Rpb24pO2lmKGkpe2Zvcih2YXIgcz1pLmxlbmd0aC0xO3M+PTA7cy0tKW89ZShpW3NdLG8pO2lmKG4pe3ZhciBhPW8uZG9jLnJlc29sdmUoby5tYXBwaW5nLm1hcChpW2kubGVuZ3RoLTFdLnBvcykpO28uc2V0U2VsZWN0aW9uKHIuU2VsZWN0aW9uLm5lYXIoYSkpfX1yZXR1cm4gb319LFJ0PWZ1bmN0aW9uKHQsZSl7cmV0dXJuIGZ1bmN0aW9uKG4pe3JldHVybiB0PyhuLnNldE5vZGVNYXJrdXAodC5wb3MsbnVsbCxPYmplY3QuYXNzaWduKHt9LHQubm9kZS5hdHRycyxlKSksYihuKSk6bn19LHp0PWZ1bmN0aW9uKHQpe2Zvcih2YXIgZT1hcmd1bWVudHMubGVuZ3RoPjEmJnZvaWQgMCE9PWFyZ3VtZW50c1sxXT9hcmd1bWVudHNbMV06MyxuPWFyZ3VtZW50cy5sZW5ndGg+MiYmdm9pZCAwIT09YXJndW1lbnRzWzJdP2FyZ3VtZW50c1syXTozLHI9IShhcmd1bWVudHMubGVuZ3RoPjMmJnZvaWQgMCE9PWFyZ3VtZW50c1szXSl8fGFyZ3VtZW50c1szXSxvPWFyZ3VtZW50cy5sZW5ndGg+NCYmdm9pZCAwIT09YXJndW1lbnRzWzRdP2FyZ3VtZW50c1s0XTpudWxsLGk9Qyh0KSxzPWkuY2VsbCxhPWkuaGVhZGVyX2NlbGwsYz1pLnJvdyx1PWkudGFibGUsbD1bXSxoPVtdLGY9MDtmPG47ZisrKWwucHVzaChUKHMsbykpLHImJmgucHVzaChUKGEsbykpO2Zvcih2YXIgcD1bXSxkPTA7ZDxlO2QrKylwLnB1c2goYy5jcmVhdGVDaGVja2VkKG51bGwsciYmMD09PWQ/aDpsKSk7cmV0dXJuIHUuY3JlYXRlQ2hlY2tlZChudWxsLHApfSxQdD1mdW5jdGlvbih0KXt2YXIgZT1mdW5jdGlvbih0KXtyZXR1cm4gdC50eXBlLnNwZWMudGFibGVSb2xlJiYvY2VsbC9pLnRlc3QodC50eXBlLnNwZWMudGFibGVSb2xlKX07cmV0dXJuIEYodCxlKX0sSXQ9ZnVuY3Rpb24odCl7dmFyIGU9UHQodCk7aWYoZSl7dmFyIG49Tih0KSxyPWkuVGFibGVNYXAuZ2V0KG4ubm9kZSksbz1lLnBvcy1uLnN0YXJ0O3JldHVybiByLnJlY3RCZXR3ZWVuKG8sbyl9fSxCdD1mdW5jdGlvbih0LGUpe3JldHVybiBmdW5jdGlvbihuKXt2YXIgcj1bXSxvPWh0KHQpKG4uc2VsZWN0aW9uKTtpZihvKWZvcih2YXIgaT1vLmxlbmd0aC0xO2k+PTA7aS0tKWUob1tpXSxuKSYmci5wdXNoKG9baV0pO3JldHVybiByfX0sX3Q9ZnVuY3Rpb24odCl7cmV0dXJuIGZ1bmN0aW9uKGUpe2Zvcih2YXIgbj10LHI9dCxvPWZ1bmN0aW9uKHQpe3ZhciBvPWx0KHQpKGUuc2VsZWN0aW9uKTtvJiZvLmZvckVhY2goKGZ1bmN0aW9uKGUpe3ZhciBvPWUubm9kZS5hdHRycy5jb2xzcGFuK3QtMTtvPj1uJiYobj10KSxvPnImJihyPW8pfSkpfSxpPXQ7aT49MDtpLS0pbyhpKTt2YXIgcz1mdW5jdGlvbih0KXt2YXIgbj1sdCh0KShlLnNlbGVjdGlvbik7biYmbi5mb3JFYWNoKChmdW5jdGlvbihlKXt2YXIgbj1lLm5vZGUuYXR0cnMuY29sc3Bhbit0LTE7ZS5ub2RlLmF0dHJzLmNvbHNwYW4+MSYmbj5yJiYocj1uKX0pKX07Zm9yKGk9dDtpPD1yO2krKylzKGkpO3ZhciBhPVtdO2ZvcihpPW47aTw9cjtpKyspe3ZhciBjPWx0KGkpKGUuc2VsZWN0aW9uKTtjJiZjLmxlbmd0aCYmYS5wdXNoKGkpfW49YVswXSxyPWFbYS5sZW5ndGgtMV07Zm9yKHZhciB1PWx0KG4pKGUuc2VsZWN0aW9uKSxsPWh0KDApKGUuc2VsZWN0aW9uKSxoPWUuZG9jLnJlc29sdmUodVt1Lmxlbmd0aC0xXS5wb3MpLGY9dm9pZCAwLHA9cjtwPj1uO3AtLSl7dmFyIGQ9bHQocCkoZS5zZWxlY3Rpb24pO2lmKGQmJmQubGVuZ3RoKXtmb3IodmFyIHY9bC5sZW5ndGgtMTt2Pj0wO3YtLSlpZihsW3ZdLnBvcz09PWRbMF0ucG9zKXtmPWRbMF07YnJlYWt9aWYoZilicmVha319dmFyIG09ZS5kb2MucmVzb2x2ZShmLnBvcyk7cmV0dXJueyRhbmNob3I6aCwkaGVhZDptLGluZGV4ZXM6YX19fSxGdD1mdW5jdGlvbih0KXtyZXR1cm4gZnVuY3Rpb24oZSl7Zm9yKHZhciBuPXQscj10LG89ZnVuY3Rpb24odCl7dmFyIG89aHQodCkoZS5zZWxlY3Rpb24pO28uZm9yRWFjaCgoZnVuY3Rpb24oZSl7dmFyIG89ZS5ub2RlLmF0dHJzLnJvd3NwYW4rdC0xO28+PW4mJihuPXQpLG8+ciYmKHI9byl9KSl9LGk9dDtpPj0wO2ktLSlvKGkpO3ZhciBzPWZ1bmN0aW9uKHQpe3ZhciBuPWh0KHQpKGUuc2VsZWN0aW9uKTtuLmZvckVhY2goKGZ1bmN0aW9uKGUpe3ZhciBuPWUubm9kZS5hdHRycy5yb3dzcGFuK3QtMTtlLm5vZGUuYXR0cnMucm93c3Bhbj4xJiZuPnImJihyPW4pfSkpfTtmb3IoaT10O2k8PXI7aSsrKXMoaSk7dmFyIGE9W107Zm9yKGk9bjtpPD1yO2krKyl7dmFyIGM9aHQoaSkoZS5zZWxlY3Rpb24pO2MmJmMubGVuZ3RoJiZhLnB1c2goaSl9bj1hWzBdLHI9YVthLmxlbmd0aC0xXTtmb3IodmFyIHU9aHQobikoZS5zZWxlY3Rpb24pLGw9bHQoMCkoZS5zZWxlY3Rpb24pLGg9ZS5kb2MucmVzb2x2ZSh1W3UubGVuZ3RoLTFdLnBvcyksZj12b2lkIDAscD1yO3A+PW47cC0tKXt2YXIgZD1odChwKShlLnNlbGVjdGlvbik7aWYoZCYmZC5sZW5ndGgpe2Zvcih2YXIgdj1sLmxlbmd0aC0xO3Y+PTA7di0tKWlmKGxbdl0ucG9zPT09ZFswXS5wb3Mpe2Y9ZFswXTticmVha31pZihmKWJyZWFrfX12YXIgbT1lLmRvYy5yZXNvbHZlKGYucG9zKTtyZXR1cm57JGFuY2hvcjpoLCRoZWFkOm0saW5kZXhlczphfX19O2UuaXNOb2RlU2VsZWN0aW9uPXksZS5jYW5JbnNlcnQ9TyxlLmNvbnZlcnRUYWJsZU5vZGVUb0FycmF5T2ZSb3dzPUQsZS5jb252ZXJ0QXJyYXlPZlJvd3NUb1RhYmxlTm9kZT1SLGUuZmluZFBhcmVudE5vZGU9XyxlLmZpbmRQYXJlbnROb2RlQ2xvc2VzdFRvUG9zPUYsZS5maW5kUGFyZW50RG9tUmVmPWosZS5oYXNQYXJlbnROb2RlPSQsZS5maW5kUGFyZW50Tm9kZU9mVHlwZT1WLGUuZmluZFBhcmVudE5vZGVPZlR5cGVDbG9zZXN0VG9Qb3M9TCxlLmhhc1BhcmVudE5vZGVPZlR5cGU9cSxlLmZpbmRQYXJlbnREb21SZWZPZlR5cGU9SixlLmZpbmRTZWxlY3RlZE5vZGVPZlR5cGU9VyxlLmZpbmRQb3NpdGlvbk9mTm9kZUJlZm9yZT1ILGUuZmluZERvbVJlZkF0UG9zPUssZS5mbGF0dGVuPVUsZS5maW5kQ2hpbGRyZW49RyxlLmZpbmRUZXh0Tm9kZXM9WCxlLmZpbmRJbmxpbmVOb2Rlcz1ZLGUuZmluZEJsb2NrTm9kZXM9WixlLmZpbmRDaGlsZHJlbkJ5QXR0cj1RLGUuZmluZENoaWxkcmVuQnlUeXBlPXR0LGUuZmluZENoaWxkcmVuQnlNYXJrPWV0LGUuY29udGFpbnM9bnQsZS5maW5kVGFibGU9b3QsZS5pc0NlbGxTZWxlY3Rpb249aXQsZS5nZXRTZWxlY3Rpb25SZWN0PXN0LGUuaXNDb2x1bW5TZWxlY3RlZD1hdCxlLmlzUm93U2VsZWN0ZWQ9Y3QsZS5pc1RhYmxlU2VsZWN0ZWQ9dXQsZS5nZXRDZWxsc0luQ29sdW1uPWx0LGUuZ2V0Q2VsbHNJblJvdz1odCxlLmdldENlbGxzSW5UYWJsZT1mdCxlLnNlbGVjdENvbHVtbj1kdCxlLnNlbGVjdFJvdz12dCxlLnNlbGVjdFRhYmxlPW10LGUuZW1wdHlDZWxsPWd0LGUuYWRkQ29sdW1uQXQ9eXQsZS5tb3ZlUm93PXd0LGUubW92ZUNvbHVtbj1idCxlLmFkZFJvd0F0PXh0LGUuY2xvbmVSb3dBdD1rdCxlLnJlbW92ZUNvbHVtbkF0PVN0LGUucmVtb3ZlUm93QXQ9Q3QsZS5yZW1vdmVUYWJsZT1PdCxlLnJlbW92ZVNlbGVjdGVkQ29sdW1ucz1NdCxlLnJlbW92ZVNlbGVjdGVkUm93cz1OdCxlLnJlbW92ZUNvbHVtbkNsb3Nlc3RUb1Bvcz1UdCxlLnJlbW92ZVJvd0Nsb3Nlc3RUb1Bvcz1BdCxlLmZvckVhY2hDZWxsSW5Db2x1bW49RXQsZS5mb3JFYWNoQ2VsbEluUm93PUR0LGUuc2V0Q2VsbEF0dHJzPVJ0LGUuY3JlYXRlVGFibGU9enQsZS5maW5kQ2VsbENsb3Nlc3RUb1Bvcz1QdCxlLmZpbmRDZWxsUmVjdENsb3Nlc3RUb1Bvcz1JdCxlLmdldFNlbGVjdGlvblJhbmdlSW5Db2x1bW49X3QsZS5nZXRTZWxlY3Rpb25SYW5nZUluUm93PUZ0LGUucmVtb3ZlUGFyZW50Tm9kZU9mVHlwZT1zLGUucmVwbGFjZVBhcmVudE5vZGVPZlR5cGU9YSxlLnJlbW92ZVNlbGVjdGVkTm9kZT1jLGUucmVwbGFjZVNlbGVjdGVkTm9kZT11LGUuc2V0VGV4dFNlbGVjdGlvbj1sLGUuc2FmZUluc2VydD1kLGUuc2V0UGFyZW50Tm9kZU1hcmt1cD12LGUuc2VsZWN0UGFyZW50Tm9kZU9mVHlwZT1tLGUucmVtb3ZlTm9kZUJlZm9yZT1nfSwiNDI4ZiI6ZnVuY3Rpb24odCxlLG4pe3ZhciByPW4oImRhODQiKTt0LmV4cG9ydHM9cn0sIjQzY2EiOmZ1bmN0aW9uKHQsZSl7dC5leHBvcnRzPXtmdW5jdGlvbmFsOiEwLHJlbmRlcih0LGUpe2NvbnN0e19jOm4sX3Y6cixkYXRhOm8sY2hpbGRyZW46aT1bXX09ZSx7Y2xhc3M6cyxzdGF0aWNDbGFzczphLHN0eWxlOmMsc3RhdGljU3R5bGU6dSxhdHRyczpsPXt9LC4uLmh9PW87cmV0dXJuIG4oInN2ZyIse2NsYXNzOltzLGFdLHN0eWxlOltjLHVdLGF0dHJzOk9iamVjdC5hc3NpZ24oe3htbG5zOiJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIsdmlld0JveDoiMCAwIDI0IDI0In0sbCksLi4uaH0saS5jb25jYXQoW24oInBhdGgiLHthdHRyczp7ZDoiTTkuMTQ3IDIxLjU1MmExLjI0NCAxLjI0NCAwIDAxLS44OTUtLjM3OEwuODQgMTMuNTYxYTIuMjU3IDIuMjU3IDAgMDEwLTMuMTI1bDcuNDEyLTcuNjEzYTEuMjUgMS4yNSAwIDAxMS43OTEgMS43NDRsLTYuOSA3LjA4M2EuNS41IDAgMDAwIC43bDYuOSA3LjA4MmExLjI1IDEuMjUgMCAwMS0uOSAyLjEyMnpNMTQuODU0IDIxLjU1MmExLjI1IDEuMjUgMCAwMS0uOS0yLjEyMmw2LjktNy4wODNhLjUuNSAwIDAwMC0uN2wtNi45LTcuMDgyYTEuMjUgMS4yNSAwIDAxMS43OTEtMS43NDRsNy40MTEgNy42MTJhMi4yNTcgMi4yNTcgMCAwMTAgMy4xMjVsLTcuNDEyIDcuNjE0YTEuMjQ0IDEuMjQ0IDAgMDEtLjg5LjM4em02LjUxNC05LjM3M3oifX0pXSkpfX19LCI0NGFkIjpmdW5jdGlvbih0LGUsbil7dmFyIHI9bigiZDAzOSIpLG89bigiYzZiNiIpLGk9IiIuc3BsaXQ7dC5leHBvcnRzPXIoKGZ1bmN0aW9uKCl7cmV0dXJuIU9iamVjdCgieiIpLnByb3BlcnR5SXNFbnVtZXJhYmxlKDApfSkpP2Z1bmN0aW9uKHQpe3JldHVybiJTdHJpbmciPT1vKHQpP2kuY2FsbCh0LCIiKTpPYmplY3QodCl9Ok9iamVjdH0sIjQ0ZDIiOmZ1bmN0aW9uKHQsZSxuKXt2YXIgcj1uKCJiNjIyIiksbz1uKCI3YzczIiksaT1uKCI5YmYyIikscz1yKCJ1bnNjb3BhYmxlcyIpLGE9QXJyYXkucHJvdG90eXBlO3ZvaWQgMD09YVtzXSYmaS5mKGEscyx7Y29uZmlndXJhYmxlOiEwLHZhbHVlOm8obnVsbCl9KSx0LmV4cG9ydHM9ZnVuY3Rpb24odCl7YVtzXVt0XT0hMH19LDQ5MzA6ZnVuY3Rpb24odCxlLG4pe3ZhciByPW4oImQwMzkiKTt0LmV4cG9ydHM9ISFPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzJiYhcigoZnVuY3Rpb24oKXtyZXR1cm4hU3RyaW5nKFN5bWJvbCgpKX0pKX0sIjQ5OGMiOmZ1bmN0aW9uKHQsZSl7dC5leHBvcnRzPXtmdW5jdGlvbmFsOiEwLHJlbmRlcih0LGUpe2NvbnN0e19jOm4sX3Y6cixkYXRhOm8sY2hpbGRyZW46aT1bXX09ZSx7Y2xhc3M6cyxzdGF0aWNDbGFzczphLHN0eWxlOmMsc3RhdGljU3R5bGU6dSxhdHRyczpsPXt9LC4uLmh9PW87cmV0dXJuIG4oInN2ZyIse2NsYXNzOltzLGFdLHN0eWxlOltjLHVdLGF0dHJzOk9iamVjdC5hc3NpZ24oe3htbG5zOiJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIsdmlld0JveDoiMCAwIDI0IDI0In0sbCksLi4uaH0saS5jb25jYXQoW24oInBhdGgiLHthdHRyczp7ZDoiTTcuNzUgNC41aDE1YTEgMSAwIDAwMC0yaC0xNWExIDEgMCAwMDAgMnpNMjIuNzUgMTFoLTE1YTEgMSAwIDEwMCAyaDE1YTEgMSAwIDAwMC0yek0yMi43NSAxOS41aC0xNWExIDEgMCAwMDAgMmgxNWExIDEgMCAwMDAtMnpNMi4yMTIgMTcuMjQ4YTIgMiAwIDAwLTEuOTMzIDEuNDg0Ljc1Ljc1IDAgMTAxLjQ1LjM4Ni41LjUgMCAxMS40ODMuNjMuNzUuNzUgMCAxMDAgMS41LjUuNSAwIDExLS40ODIuNjM1Ljc1Ljc1IDAgMTAtMS40NDUuNCAyIDIgMCAxMDMuNTg5LTEuNjQ4LjI1MS4yNTEgMCAwMTAtLjI3OCAyIDIgMCAwMC0xLjY2Mi0zLjExMXpNNC4yNSAxMC43NDhhMiAyIDAgMDAtNCAwIC43NS43NSAwIDAwMS41IDAgLjUuNSAwIDAxMSAwIDEuMDMxIDEuMDMxIDAgMDEtLjIyNy42NDVMLjQxNCAxNC4wMjlBLjc1Ljc1IDAgMDAxIDE1LjI0OGgyLjVhLjc1Ljc1IDAgMDAwLTEuNWgtLjQxOWEuMjQ5LjI0OSAwIDAxLS4xOTUtLjQwNkwzLjcgMTIuMzNhMi41NDQgMi41NDQgMCAwMC41NS0xLjU4MnpNNCA1LjI0OGgtLjI1QS4yNS4yNSAwIDAxMy41IDVWMS42MjNBMS4zNzcgMS4zNzcgMCAwMDIuMTI1LjI0OEgxLjVhLjc1Ljc1IDAgMDAwIDEuNWguMjVBLjI1LjI1IDAgMDEyIDJ2M2EuMjUuMjUgMCAwMS0uMjUuMjVIMS41YS43NS43NSAwIDAwMCAxLjVINGEuNzUuNzUgMCAwMDAtMS41eiJ9fSldKSl9fX0sIjRkNjQiOmZ1bmN0aW9uKHQsZSxuKXt2YXIgcj1uKCJmYzZhIiksbz1uKCI1MGM0IiksaT1uKCIyM2NiIikscz1mdW5jdGlvbih0KXtyZXR1cm4gZnVuY3Rpb24oZSxuLHMpe3ZhciBhLGM9cihlKSx1PW8oYy5sZW5ndGgpLGw9aShzLHUpO2lmKHQmJm4hPW4pe3doaWxlKHU+bClpZihhPWNbbCsrXSxhIT1hKXJldHVybiEwfWVsc2UgZm9yKDt1Pmw7bCsrKWlmKCh0fHxsIGluIGMpJiZjW2xdPT09bilyZXR1cm4gdHx8bHx8MDtyZXR1cm4hdCYmLTF9fTt0LmV4cG9ydHM9e2luY2x1ZGVzOnMoITApLGluZGV4T2Y6cyghMSl9fSwiNGRmNCI6ZnVuY3Rpb24odCxlLG4peyJ1c2Ugc3RyaWN0Ijt2YXIgcj1uKCIwMzY2Iiksbz1uKCI3YjBiIiksaT1uKCI5YmRkIikscz1uKCJlOTVhIiksYT1uKCI1MGM0IiksYz1uKCI4NDE4IiksdT1uKCIzNWExIik7dC5leHBvcnRzPWZ1bmN0aW9uKHQpe3ZhciBlLG4sbCxoLGYscCxkPW8odCksdj0iZnVuY3Rpb24iPT10eXBlb2YgdGhpcz90aGlzOkFycmF5LG09YXJndW1lbnRzLmxlbmd0aCxnPW0+MT9hcmd1bWVudHNbMV06dm9pZCAwLHk9dm9pZCAwIT09Zyx3PXUoZCksYj0wO2lmKHkmJihnPXIoZyxtPjI/YXJndW1lbnRzWzJdOnZvaWQgMCwyKSksdm9pZCAwPT13fHx2PT1BcnJheSYmcyh3KSlmb3IoZT1hKGQubGVuZ3RoKSxuPW5ldyB2KGUpO2U+YjtiKyspcD15P2coZFtiXSxiKTpkW2JdLGMobixiLHApO2Vsc2UgZm9yKGg9dy5jYWxsKGQpLGY9aC5uZXh0LG49bmV3IHY7IShsPWYuY2FsbChoKSkuZG9uZTtiKyspcD15P2koaCxnLFtsLnZhbHVlLGJdLCEwKTpsLnZhbHVlLGMobixiLHApO3JldHVybiBuLmxlbmd0aD1iLG59fSwiNGYzNSI6ZnVuY3Rpb24odCxlKXt0LmV4cG9ydHM9e2Z1bmN0aW9uYWw6ITAscmVuZGVyKHQsZSl7Y29uc3R7X2M6bixfdjpyLGRhdGE6byxjaGlsZHJlbjppPVtdfT1lLHtjbGFzczpzLHN0YXRpY0NsYXNzOmEsc3R5bGU6YyxzdGF0aWNTdHlsZTp1LGF0dHJzOmw9e30sLi4uaH09bztyZXR1cm4gbigic3ZnIix7Y2xhc3M6W3MsYV0sc3R5bGU6W2MsdV0sYXR0cnM6T2JqZWN0LmFzc2lnbih7eG1sbnM6Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIix2aWV3Qm94OiIwIDAgMjQgMjQifSxsKSwuLi5ofSxpLmNvbmNhdChbbigicGF0aCIse2F0dHJzOntkOiJNNSAxM2ExIDEgMCAwMTAtMmgxNGExIDEgMCAwMTAgMkg1eiJ9fSldKSl9fX0sIjRmNjYiOmZ1bmN0aW9uKHQsZSl7dC5leHBvcnRzPXtmdW5jdGlvbmFsOiEwLHJlbmRlcih0LGUpe2NvbnN0e19jOm4sX3Y6cixkYXRhOm8sY2hpbGRyZW46aT1bXX09ZSx7Y2xhc3M6cyxzdGF0aWNDbGFzczphLHN0eWxlOmMsc3RhdGljU3R5bGU6dSxhdHRyczpsPXt9LC4uLmh9PW87cmV0dXJuIG4oInN2ZyIse2NsYXNzOltzLGFdLHN0eWxlOltjLHVdLGF0dHJzOk9iamVjdC5hc3NpZ24oe3htbG5zOiJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIsdmlld0JveDoiMCAwIDI0IDI0In0sbCksLi4uaH0saS5jb25jYXQoW24oInBhdGgiLHthdHRyczp7ZDoiTTEyIC41QTExLjYzNCAxMS42MzQgMCAwMC4yNjIgMTIgMTEuNjM0IDExLjYzNCAwIDAwMTIgMjMuNWExMS44MzYgMTEuODM2IDAgMDA2LjYyNC0yIDEuMjUgMS4yNSAwIDEwLTEuMzkzLTIuMDc2QTkuMzQgOS4zNCAwIDAxMTIgMjFhOS4xMzIgOS4xMzIgMCAwMS05LjIzOC05QTkuMTMyIDkuMTMyIDAgMDExMiAzYTkuMTMyIDkuMTMyIDAgMDE5LjIzOCA5di44OTFhMS45NDMgMS45NDMgMCAwMS0zLjg4NCAwVjEyQTUuMzU1IDUuMzU1IDAgMTAxMiAxNy4yNjFhNS4zNzYgNS4zNzYgMCAwMDMuODYxLTEuNjM0IDQuNDM4IDQuNDM4IDAgMDA3Ljg3Ny0yLjczNlYxMkExMS42MzQgMTEuNjM0IDAgMDAxMiAuNXptMCAxNC4yNjFBMi43NjMgMi43NjMgMCAxMTE0Ljg1NCAxMiAyLjgxMiAyLjgxMiAwIDAxMTIgMTQuNzYxeiJ9fSldKSl9fX0sIjRmYWQiOmZ1bmN0aW9uKHQsZSxuKXt2YXIgcj1uKCIyM2U3Iiksbz1uKCI2ZjUzIikuZW50cmllcztyKHt0YXJnZXQ6Ik9iamVjdCIsc3RhdDohMH0se2VudHJpZXM6ZnVuY3Rpb24odCl7cmV0dXJuIG8odCl9fSl9LCI1MGM0IjpmdW5jdGlvbih0LGUsbil7dmFyIHI9bigiYTY5MSIpLG89TWF0aC5taW47dC5leHBvcnRzPWZ1bmN0aW9uKHQpe3JldHVybiB0PjA/byhyKHQpLDkwMDcxOTkyNTQ3NDA5OTEpOjB9fSw1MTM1OmZ1bmN0aW9uKHQsZSl7dmFyIG49e30uaGFzT3duUHJvcGVydHk7dC5leHBvcnRzPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIG4uY2FsbCh0LGUpfX0sNTMxMzpmdW5jdGlvbih0LGUsbil7InVzZSBzdHJpY3QiO24ucihlKSxuLmQoZSwiQWxsU2VsZWN0aW9uIiwoZnVuY3Rpb24oKXtyZXR1cm4gcH0pKSxuLmQoZSwiRWRpdG9yU3RhdGUiLChmdW5jdGlvbigpe3JldHVybiBPfSkpLG4uZChlLCJOb2RlU2VsZWN0aW9uIiwoZnVuY3Rpb24oKXtyZXR1cm4gaH0pKSxuLmQoZSwiUGx1Z2luIiwoZnVuY3Rpb24oKXtyZXR1cm4gQX0pKSxuLmQoZSwiUGx1Z2luS2V5IiwoZnVuY3Rpb24oKXtyZXR1cm4gUn0pKSxuLmQoZSwiU2VsZWN0aW9uIiwoZnVuY3Rpb24oKXtyZXR1cm4gc30pKSxuLmQoZSwiU2VsZWN0aW9uUmFuZ2UiLChmdW5jdGlvbigpe3JldHVybiBjfSkpLG4uZChlLCJUZXh0U2VsZWN0aW9uIiwoZnVuY3Rpb24oKXtyZXR1cm4gdX0pKSxuLmQoZSwiVHJhbnNhY3Rpb24iLChmdW5jdGlvbigpe3JldHVybiBifSkpO3ZhciByPW4oIjMwNGEiKSxvPW4oIjBhYzAiKSxpPU9iamVjdC5jcmVhdGUobnVsbCkscz1mdW5jdGlvbih0LGUsbil7dGhpcy5yYW5nZXM9bnx8W25ldyBjKHQubWluKGUpLHQubWF4KGUpKV0sdGhpcy4kYW5jaG9yPXQsdGhpcy4kaGVhZD1lfSxhPXthbmNob3I6e2NvbmZpZ3VyYWJsZTohMH0saGVhZDp7Y29uZmlndXJhYmxlOiEwfSxmcm9tOntjb25maWd1cmFibGU6ITB9LHRvOntjb25maWd1cmFibGU6ITB9LCRmcm9tOntjb25maWd1cmFibGU6ITB9LCR0bzp7Y29uZmlndXJhYmxlOiEwfSxlbXB0eTp7Y29uZmlndXJhYmxlOiEwfX07YS5hbmNob3IuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuJGFuY2hvci5wb3N9LGEuaGVhZC5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy4kaGVhZC5wb3N9LGEuZnJvbS5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy4kZnJvbS5wb3N9LGEudG8uZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuJHRvLnBvc30sYS4kZnJvbS5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5yYW5nZXNbMF0uJGZyb219LGEuJHRvLmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLnJhbmdlc1swXS4kdG99LGEuZW1wdHkuZ2V0PWZ1bmN0aW9uKCl7Zm9yKHZhciB0PXRoaXMucmFuZ2VzLGU9MDtlPHQubGVuZ3RoO2UrKylpZih0W2VdLiRmcm9tLnBvcyE9dFtlXS4kdG8ucG9zKXJldHVybiExO3JldHVybiEwfSxzLnByb3RvdHlwZS5jb250ZW50PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuJGZyb20ubm9kZSgwKS5zbGljZSh0aGlzLmZyb20sdGhpcy50bywhMCl9LHMucHJvdG90eXBlLnJlcGxhY2U9ZnVuY3Rpb24odCxlKXt2b2lkIDA9PT1lJiYoZT1yWyJpIl0uZW1wdHkpO2Zvcih2YXIgbj1lLmNvbnRlbnQubGFzdENoaWxkLG89bnVsbCxpPTA7aTxlLm9wZW5FbmQ7aSsrKW89bixuPW4ubGFzdENoaWxkO2Zvcih2YXIgcz10LnN0ZXBzLmxlbmd0aCxhPXRoaXMucmFuZ2VzLGM9MDtjPGEubGVuZ3RoO2MrKyl7dmFyIHU9YVtjXSxsPXUuJGZyb20saD11LiR0byxmPXQubWFwcGluZy5zbGljZShzKTt0LnJlcGxhY2VSYW5nZShmLm1hcChsLnBvcyksZi5tYXAoaC5wb3MpLGM/clsiaSJdLmVtcHR5OmUpLDA9PWMmJm0odCxzLChuP24uaXNJbmxpbmU6byYmby5pc1RleHRibG9jayk/LTE6MSl9fSxzLnByb3RvdHlwZS5yZXBsYWNlV2l0aD1mdW5jdGlvbih0LGUpe2Zvcih2YXIgbj10LnN0ZXBzLmxlbmd0aCxyPXRoaXMucmFuZ2VzLG89MDtvPHIubGVuZ3RoO28rKyl7dmFyIGk9cltvXSxzPWkuJGZyb20sYT1pLiR0byxjPXQubWFwcGluZy5zbGljZShuKSx1PWMubWFwKHMucG9zKSxsPWMubWFwKGEucG9zKTtvP3QuZGVsZXRlUmFuZ2UodSxsKToodC5yZXBsYWNlUmFuZ2VXaXRoKHUsbCxlKSxtKHQsbixlLmlzSW5saW5lPy0xOjEpKX19LHMuZmluZEZyb209ZnVuY3Rpb24odCxlLG4pe3ZhciByPXQucGFyZW50LmlubGluZUNvbnRlbnQ/bmV3IHUodCk6dih0Lm5vZGUoMCksdC5wYXJlbnQsdC5wb3MsdC5pbmRleCgpLGUsbik7aWYocilyZXR1cm4gcjtmb3IodmFyIG89dC5kZXB0aC0xO28+PTA7by0tKXt2YXIgaT1lPDA/dih0Lm5vZGUoMCksdC5ub2RlKG8pLHQuYmVmb3JlKG8rMSksdC5pbmRleChvKSxlLG4pOnYodC5ub2RlKDApLHQubm9kZShvKSx0LmFmdGVyKG8rMSksdC5pbmRleChvKSsxLGUsbik7aWYoaSlyZXR1cm4gaX19LHMubmVhcj1mdW5jdGlvbih0LGUpe3JldHVybiB2b2lkIDA9PT1lJiYoZT0xKSx0aGlzLmZpbmRGcm9tKHQsZSl8fHRoaXMuZmluZEZyb20odCwtZSl8fG5ldyBwKHQubm9kZSgwKSl9LHMuYXRTdGFydD1mdW5jdGlvbih0KXtyZXR1cm4gdih0LHQsMCwwLDEpfHxuZXcgcCh0KX0scy5hdEVuZD1mdW5jdGlvbih0KXtyZXR1cm4gdih0LHQsdC5jb250ZW50LnNpemUsdC5jaGlsZENvdW50LC0xKXx8bmV3IHAodCl9LHMuZnJvbUpTT049ZnVuY3Rpb24odCxlKXtpZighZXx8IWUudHlwZSl0aHJvdyBuZXcgUmFuZ2VFcnJvcigiSW52YWxpZCBpbnB1dCBmb3IgU2VsZWN0aW9uLmZyb21KU09OIik7dmFyIG49aVtlLnR5cGVdO2lmKCFuKXRocm93IG5ldyBSYW5nZUVycm9yKCJObyBzZWxlY3Rpb24gdHlwZSAiK2UudHlwZSsiIGRlZmluZWQiKTtyZXR1cm4gbi5mcm9tSlNPTih0LGUpfSxzLmpzb25JRD1mdW5jdGlvbih0LGUpe2lmKHQgaW4gaSl0aHJvdyBuZXcgUmFuZ2VFcnJvcigiRHVwbGljYXRlIHVzZSBvZiBzZWxlY3Rpb24gSlNPTiBJRCAiK3QpO3JldHVybiBpW3RdPWUsZS5wcm90b3R5cGUuanNvbklEPXQsZX0scy5wcm90b3R5cGUuZ2V0Qm9va21hcms9ZnVuY3Rpb24oKXtyZXR1cm4gdS5iZXR3ZWVuKHRoaXMuJGFuY2hvcix0aGlzLiRoZWFkKS5nZXRCb29rbWFyaygpfSxPYmplY3QuZGVmaW5lUHJvcGVydGllcyhzLnByb3RvdHlwZSxhKSxzLnByb3RvdHlwZS52aXNpYmxlPSEwO3ZhciBjPWZ1bmN0aW9uKHQsZSl7dGhpcy4kZnJvbT10LHRoaXMuJHRvPWV9LHU9ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZShlLG4pe3ZvaWQgMD09PW4mJihuPWUpLHQuY2FsbCh0aGlzLGUsbil9dCYmKGUuX19wcm90b19fPXQpLGUucHJvdG90eXBlPU9iamVjdC5jcmVhdGUodCYmdC5wcm90b3R5cGUpLGUucHJvdG90eXBlLmNvbnN0cnVjdG9yPWU7dmFyIG49eyRjdXJzb3I6e2NvbmZpZ3VyYWJsZTohMH19O3JldHVybiBuLiRjdXJzb3IuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuJGFuY2hvci5wb3M9PXRoaXMuJGhlYWQucG9zP3RoaXMuJGhlYWQ6bnVsbH0sZS5wcm90b3R5cGUubWFwPWZ1bmN0aW9uKG4scil7dmFyIG89bi5yZXNvbHZlKHIubWFwKHRoaXMuaGVhZCkpO2lmKCFvLnBhcmVudC5pbmxpbmVDb250ZW50KXJldHVybiB0Lm5lYXIobyk7dmFyIGk9bi5yZXNvbHZlKHIubWFwKHRoaXMuYW5jaG9yKSk7cmV0dXJuIG5ldyBlKGkucGFyZW50LmlubGluZUNvbnRlbnQ/aTpvLG8pfSxlLnByb3RvdHlwZS5yZXBsYWNlPWZ1bmN0aW9uKGUsbil7aWYodm9pZCAwPT09biYmKG49clsiaSJdLmVtcHR5KSx0LnByb3RvdHlwZS5yZXBsYWNlLmNhbGwodGhpcyxlLG4pLG49PXJbImkiXS5lbXB0eSl7dmFyIG89dGhpcy4kZnJvbS5tYXJrc0Fjcm9zcyh0aGlzLiR0byk7byYmZS5lbnN1cmVNYXJrcyhvKX19LGUucHJvdG90eXBlLmVxPWZ1bmN0aW9uKHQpe3JldHVybiB0IGluc3RhbmNlb2YgZSYmdC5hbmNob3I9PXRoaXMuYW5jaG9yJiZ0LmhlYWQ9PXRoaXMuaGVhZH0sZS5wcm90b3R5cGUuZ2V0Qm9va21hcms9ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IGwodGhpcy5hbmNob3IsdGhpcy5oZWFkKX0sZS5wcm90b3R5cGUudG9KU09OPWZ1bmN0aW9uKCl7cmV0dXJue3R5cGU6InRleHQiLGFuY2hvcjp0aGlzLmFuY2hvcixoZWFkOnRoaXMuaGVhZH19LGUuZnJvbUpTT049ZnVuY3Rpb24odCxuKXtpZigibnVtYmVyIiE9dHlwZW9mIG4uYW5jaG9yfHwibnVtYmVyIiE9dHlwZW9mIG4uaGVhZCl0aHJvdyBuZXcgUmFuZ2VFcnJvcigiSW52YWxpZCBpbnB1dCBmb3IgVGV4dFNlbGVjdGlvbi5mcm9tSlNPTiIpO3JldHVybiBuZXcgZSh0LnJlc29sdmUobi5hbmNob3IpLHQucmVzb2x2ZShuLmhlYWQpKX0sZS5jcmVhdGU9ZnVuY3Rpb24odCxlLG4pe3ZvaWQgMD09PW4mJihuPWUpO3ZhciByPXQucmVzb2x2ZShlKTtyZXR1cm4gbmV3IHRoaXMocixuPT1lP3I6dC5yZXNvbHZlKG4pKX0sZS5iZXR3ZWVuPWZ1bmN0aW9uKG4scixvKXt2YXIgaT1uLnBvcy1yLnBvcztpZihvJiYhaXx8KG89aT49MD8xOi0xKSwhci5wYXJlbnQuaW5saW5lQ29udGVudCl7dmFyIHM9dC5maW5kRnJvbShyLG8sITApfHx0LmZpbmRGcm9tKHIsLW8sITApO2lmKCFzKXJldHVybiB0Lm5lYXIocixvKTtyPXMuJGhlYWR9cmV0dXJuIG4ucGFyZW50LmlubGluZUNvbnRlbnR8fCgwPT1pP249cjoobj0odC5maW5kRnJvbShuLC1vLCEwKXx8dC5maW5kRnJvbShuLG8sITApKS4kYW5jaG9yLG4ucG9zPHIucG9zIT1pPDAmJihuPXIpKSksbmV3IGUobixyKX0sT2JqZWN0LmRlZmluZVByb3BlcnRpZXMoZS5wcm90b3R5cGUsbiksZX0ocyk7cy5qc29uSUQoInRleHQiLHUpO3ZhciBsPWZ1bmN0aW9uKHQsZSl7dGhpcy5hbmNob3I9dCx0aGlzLmhlYWQ9ZX07bC5wcm90b3R5cGUubWFwPWZ1bmN0aW9uKHQpe3JldHVybiBuZXcgbCh0Lm1hcCh0aGlzLmFuY2hvciksdC5tYXAodGhpcy5oZWFkKSl9LGwucHJvdG90eXBlLnJlc29sdmU9ZnVuY3Rpb24odCl7cmV0dXJuIHUuYmV0d2Vlbih0LnJlc29sdmUodGhpcy5hbmNob3IpLHQucmVzb2x2ZSh0aGlzLmhlYWQpKX07dmFyIGg9ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZShlKXt2YXIgbj1lLm5vZGVBZnRlcixyPWUubm9kZSgwKS5yZXNvbHZlKGUucG9zK24ubm9kZVNpemUpO3QuY2FsbCh0aGlzLGUsciksdGhpcy5ub2RlPW59cmV0dXJuIHQmJihlLl9fcHJvdG9fXz10KSxlLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKHQmJnQucHJvdG90eXBlKSxlLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1lLGUucHJvdG90eXBlLm1hcD1mdW5jdGlvbihuLHIpe3ZhciBvPXIubWFwUmVzdWx0KHRoaXMuYW5jaG9yKSxpPW8uZGVsZXRlZCxzPW8ucG9zLGE9bi5yZXNvbHZlKHMpO3JldHVybiBpP3QubmVhcihhKTpuZXcgZShhKX0sZS5wcm90b3R5cGUuY29udGVudD1mdW5jdGlvbigpe3JldHVybiBuZXcgclsiaSJdKHJbImMiXS5mcm9tKHRoaXMubm9kZSksMCwwKX0sZS5wcm90b3R5cGUuZXE9ZnVuY3Rpb24odCl7cmV0dXJuIHQgaW5zdGFuY2VvZiBlJiZ0LmFuY2hvcj09dGhpcy5hbmNob3J9LGUucHJvdG90eXBlLnRvSlNPTj1mdW5jdGlvbigpe3JldHVybnt0eXBlOiJub2RlIixhbmNob3I6dGhpcy5hbmNob3J9fSxlLnByb3RvdHlwZS5nZXRCb29rbWFyaz1mdW5jdGlvbigpe3JldHVybiBuZXcgZih0aGlzLmFuY2hvcil9LGUuZnJvbUpTT049ZnVuY3Rpb24odCxuKXtpZigibnVtYmVyIiE9dHlwZW9mIG4uYW5jaG9yKXRocm93IG5ldyBSYW5nZUVycm9yKCJJbnZhbGlkIGlucHV0IGZvciBOb2RlU2VsZWN0aW9uLmZyb21KU09OIik7cmV0dXJuIG5ldyBlKHQucmVzb2x2ZShuLmFuY2hvcikpfSxlLmNyZWF0ZT1mdW5jdGlvbih0LGUpe3JldHVybiBuZXcgdGhpcyh0LnJlc29sdmUoZSkpfSxlLmlzU2VsZWN0YWJsZT1mdW5jdGlvbih0KXtyZXR1cm4hdC5pc1RleHQmJiExIT09dC50eXBlLnNwZWMuc2VsZWN0YWJsZX0sZX0ocyk7aC5wcm90b3R5cGUudmlzaWJsZT0hMSxzLmpzb25JRCgibm9kZSIsaCk7dmFyIGY9ZnVuY3Rpb24odCl7dGhpcy5hbmNob3I9dH07Zi5wcm90b3R5cGUubWFwPWZ1bmN0aW9uKHQpe3ZhciBlPXQubWFwUmVzdWx0KHRoaXMuYW5jaG9yKSxuPWUuZGVsZXRlZCxyPWUucG9zO3JldHVybiBuP25ldyBsKHIscik6bmV3IGYocil9LGYucHJvdG90eXBlLnJlc29sdmU9ZnVuY3Rpb24odCl7dmFyIGU9dC5yZXNvbHZlKHRoaXMuYW5jaG9yKSxuPWUubm9kZUFmdGVyO3JldHVybiBuJiZoLmlzU2VsZWN0YWJsZShuKT9uZXcgaChlKTpzLm5lYXIoZSl9O3ZhciBwPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoZSl7dC5jYWxsKHRoaXMsZS5yZXNvbHZlKDApLGUucmVzb2x2ZShlLmNvbnRlbnQuc2l6ZSkpfXJldHVybiB0JiYoZS5fX3Byb3RvX189dCksZS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZSh0JiZ0LnByb3RvdHlwZSksZS5wcm90b3R5cGUuY29uc3RydWN0b3I9ZSxlLnByb3RvdHlwZS5yZXBsYWNlPWZ1bmN0aW9uKGUsbil7aWYodm9pZCAwPT09biYmKG49clsiaSJdLmVtcHR5KSxuPT1yWyJpIl0uZW1wdHkpe2UuZGVsZXRlKDAsZS5kb2MuY29udGVudC5zaXplKTt2YXIgbz10LmF0U3RhcnQoZS5kb2MpO28uZXEoZS5zZWxlY3Rpb24pfHxlLnNldFNlbGVjdGlvbihvKX1lbHNlIHQucHJvdG90eXBlLnJlcGxhY2UuY2FsbCh0aGlzLGUsbil9LGUucHJvdG90eXBlLnRvSlNPTj1mdW5jdGlvbigpe3JldHVybnt0eXBlOiJhbGwifX0sZS5mcm9tSlNPTj1mdW5jdGlvbih0KXtyZXR1cm4gbmV3IGUodCl9LGUucHJvdG90eXBlLm1hcD1mdW5jdGlvbih0KXtyZXR1cm4gbmV3IGUodCl9LGUucHJvdG90eXBlLmVxPWZ1bmN0aW9uKHQpe3JldHVybiB0IGluc3RhbmNlb2YgZX0sZS5wcm90b3R5cGUuZ2V0Qm9va21hcms9ZnVuY3Rpb24oKXtyZXR1cm4gZH0sZX0ocyk7cy5qc29uSUQoImFsbCIscCk7dmFyIGQ9e21hcDpmdW5jdGlvbigpe3JldHVybiB0aGlzfSxyZXNvbHZlOmZ1bmN0aW9uKHQpe3JldHVybiBuZXcgcCh0KX19O2Z1bmN0aW9uIHYodCxlLG4scixvLGkpe2lmKGUuaW5saW5lQ29udGVudClyZXR1cm4gdS5jcmVhdGUodCxuKTtmb3IodmFyIHM9ci0obz4wPzA6MSk7bz4wP3M8ZS5jaGlsZENvdW50OnM+PTA7cys9byl7dmFyIGE9ZS5jaGlsZChzKTtpZihhLmlzQXRvbSl7aWYoIWkmJmguaXNTZWxlY3RhYmxlKGEpKXJldHVybiBoLmNyZWF0ZSh0LG4tKG88MD9hLm5vZGVTaXplOjApKX1lbHNle3ZhciBjPXYodCxhLG4rbyxvPDA/YS5jaGlsZENvdW50OjAsbyxpKTtpZihjKXJldHVybiBjfW4rPWEubm9kZVNpemUqb319ZnVuY3Rpb24gbSh0LGUsbil7dmFyIHI9dC5zdGVwcy5sZW5ndGgtMTtpZighKHI8ZSkpe3ZhciBpPXQuc3RlcHNbcl07aWYoaSBpbnN0YW5jZW9mIG9bImMiXXx8aSBpbnN0YW5jZW9mIG9bImIiXSl7dmFyIGEsYz10Lm1hcHBpbmcubWFwc1tyXTtjLmZvckVhY2goKGZ1bmN0aW9uKHQsZSxuLHIpe251bGw9PWEmJihhPXIpfSkpLHQuc2V0U2VsZWN0aW9uKHMubmVhcih0LmRvYy5yZXNvbHZlKGEpLG4pKX19fXZhciBnPTEseT0yLHc9NCxiPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoZSl7dC5jYWxsKHRoaXMsZS5kb2MpLHRoaXMudGltZT1EYXRlLm5vdygpLHRoaXMuY3VyU2VsZWN0aW9uPWUuc2VsZWN0aW9uLHRoaXMuY3VyU2VsZWN0aW9uRm9yPTAsdGhpcy5zdG9yZWRNYXJrcz1lLnN0b3JlZE1hcmtzLHRoaXMudXBkYXRlZD0wLHRoaXMubWV0YT1PYmplY3QuY3JlYXRlKG51bGwpfXQmJihlLl9fcHJvdG9fXz10KSxlLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKHQmJnQucHJvdG90eXBlKSxlLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1lO3ZhciBuPXtzZWxlY3Rpb246e2NvbmZpZ3VyYWJsZTohMH0sc2VsZWN0aW9uU2V0Ontjb25maWd1cmFibGU6ITB9LHN0b3JlZE1hcmtzU2V0Ontjb25maWd1cmFibGU6ITB9LGlzR2VuZXJpYzp7Y29uZmlndXJhYmxlOiEwfSxzY3JvbGxlZEludG9WaWV3Ontjb25maWd1cmFibGU6ITB9fTtyZXR1cm4gbi5zZWxlY3Rpb24uZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY3VyU2VsZWN0aW9uRm9yPHRoaXMuc3RlcHMubGVuZ3RoJiYodGhpcy5jdXJTZWxlY3Rpb249dGhpcy5jdXJTZWxlY3Rpb24ubWFwKHRoaXMuZG9jLHRoaXMubWFwcGluZy5zbGljZSh0aGlzLmN1clNlbGVjdGlvbkZvcikpLHRoaXMuY3VyU2VsZWN0aW9uRm9yPXRoaXMuc3RlcHMubGVuZ3RoKSx0aGlzLmN1clNlbGVjdGlvbn0sZS5wcm90b3R5cGUuc2V0U2VsZWN0aW9uPWZ1bmN0aW9uKHQpe2lmKHQuJGZyb20uZG9jIT10aGlzLmRvYyl0aHJvdyBuZXcgUmFuZ2VFcnJvcigiU2VsZWN0aW9uIHBhc3NlZCB0byBzZXRTZWxlY3Rpb24gbXVzdCBwb2ludCBhdCB0aGUgY3VycmVudCBkb2N1bWVudCIpO3JldHVybiB0aGlzLmN1clNlbGVjdGlvbj10LHRoaXMuY3VyU2VsZWN0aW9uRm9yPXRoaXMuc3RlcHMubGVuZ3RoLHRoaXMudXBkYXRlZD0odGhpcy51cGRhdGVkfGcpJn55LHRoaXMuc3RvcmVkTWFya3M9bnVsbCx0aGlzfSxuLnNlbGVjdGlvblNldC5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4odGhpcy51cGRhdGVkJmcpPjB9LGUucHJvdG90eXBlLnNldFN0b3JlZE1hcmtzPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLnN0b3JlZE1hcmtzPXQsdGhpcy51cGRhdGVkfD15LHRoaXN9LGUucHJvdG90eXBlLmVuc3VyZU1hcmtzPWZ1bmN0aW9uKHQpe3JldHVybiByWyJkIl0uc2FtZVNldCh0aGlzLnN0b3JlZE1hcmtzfHx0aGlzLnNlbGVjdGlvbi4kZnJvbS5tYXJrcygpLHQpfHx0aGlzLnNldFN0b3JlZE1hcmtzKHQpLHRoaXN9LGUucHJvdG90eXBlLmFkZFN0b3JlZE1hcms9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuZW5zdXJlTWFya3ModC5hZGRUb1NldCh0aGlzLnN0b3JlZE1hcmtzfHx0aGlzLnNlbGVjdGlvbi4kaGVhZC5tYXJrcygpKSl9LGUucHJvdG90eXBlLnJlbW92ZVN0b3JlZE1hcms9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuZW5zdXJlTWFya3ModC5yZW1vdmVGcm9tU2V0KHRoaXMuc3RvcmVkTWFya3N8fHRoaXMuc2VsZWN0aW9uLiRoZWFkLm1hcmtzKCkpKX0sbi5zdG9yZWRNYXJrc1NldC5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4odGhpcy51cGRhdGVkJnkpPjB9LGUucHJvdG90eXBlLmFkZFN0ZXA9ZnVuY3Rpb24oZSxuKXt0LnByb3RvdHlwZS5hZGRTdGVwLmNhbGwodGhpcyxlLG4pLHRoaXMudXBkYXRlZD10aGlzLnVwZGF0ZWQmfnksdGhpcy5zdG9yZWRNYXJrcz1udWxsfSxlLnByb3RvdHlwZS5zZXRUaW1lPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLnRpbWU9dCx0aGlzfSxlLnByb3RvdHlwZS5yZXBsYWNlU2VsZWN0aW9uPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLnNlbGVjdGlvbi5yZXBsYWNlKHRoaXMsdCksdGhpc30sZS5wcm90b3R5cGUucmVwbGFjZVNlbGVjdGlvbldpdGg9ZnVuY3Rpb24odCxlKXt2YXIgbj10aGlzLnNlbGVjdGlvbjtyZXR1cm4hMSE9PWUmJih0PXQubWFyayh0aGlzLnN0b3JlZE1hcmtzfHwobi5lbXB0eT9uLiRmcm9tLm1hcmtzKCk6bi4kZnJvbS5tYXJrc0Fjcm9zcyhuLiR0byl8fHJbImQiXS5ub25lKSkpLG4ucmVwbGFjZVdpdGgodGhpcyx0KSx0aGlzfSxlLnByb3RvdHlwZS5kZWxldGVTZWxlY3Rpb249ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5zZWxlY3Rpb24ucmVwbGFjZSh0aGlzKSx0aGlzfSxlLnByb3RvdHlwZS5pbnNlcnRUZXh0PWZ1bmN0aW9uKHQsZSxuKXt2b2lkIDA9PT1uJiYobj1lKTt2YXIgcj10aGlzLmRvYy50eXBlLnNjaGVtYTtpZihudWxsPT1lKXJldHVybiB0P3RoaXMucmVwbGFjZVNlbGVjdGlvbldpdGgoci50ZXh0KHQpLCEwKTp0aGlzLmRlbGV0ZVNlbGVjdGlvbigpO2lmKCF0KXJldHVybiB0aGlzLmRlbGV0ZVJhbmdlKGUsbik7dmFyIG89dGhpcy5zdG9yZWRNYXJrcztpZighbyl7dmFyIGk9dGhpcy5kb2MucmVzb2x2ZShlKTtvPW49PWU/aS5tYXJrcygpOmkubWFya3NBY3Jvc3ModGhpcy5kb2MucmVzb2x2ZShuKSl9cmV0dXJuIHRoaXMucmVwbGFjZVJhbmdlV2l0aChlLG4sci50ZXh0KHQsbykpLHRoaXMuc2VsZWN0aW9uLmVtcHR5fHx0aGlzLnNldFNlbGVjdGlvbihzLm5lYXIodGhpcy5zZWxlY3Rpb24uJHRvKSksdGhpc30sZS5wcm90b3R5cGUuc2V0TWV0YT1mdW5jdGlvbih0LGUpe3JldHVybiB0aGlzLm1ldGFbInN0cmluZyI9PXR5cGVvZiB0P3Q6dC5rZXldPWUsdGhpc30sZS5wcm90b3R5cGUuZ2V0TWV0YT1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5tZXRhWyJzdHJpbmciPT10eXBlb2YgdD90OnQua2V5XX0sbi5pc0dlbmVyaWMuZ2V0PWZ1bmN0aW9uKCl7Zm9yKHZhciB0IGluIHRoaXMubWV0YSlyZXR1cm4hMTtyZXR1cm4hMH0sZS5wcm90b3R5cGUuc2Nyb2xsSW50b1ZpZXc9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy51cGRhdGVkfD13LHRoaXN9LG4uc2Nyb2xsZWRJbnRvVmlldy5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4odGhpcy51cGRhdGVkJncpPjB9LE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKGUucHJvdG90eXBlLG4pLGV9KG9bImUiXSk7ZnVuY3Rpb24geCh0LGUpe3JldHVybiBlJiZ0P3QuYmluZChlKTp0fXZhciBrPWZ1bmN0aW9uKHQsZSxuKXt0aGlzLm5hbWU9dCx0aGlzLmluaXQ9eChlLmluaXQsbiksdGhpcy5hcHBseT14KGUuYXBwbHksbil9LFM9W25ldyBrKCJkb2MiLHtpbml0OmZ1bmN0aW9uKHQpe3JldHVybiB0LmRvY3x8dC5zY2hlbWEudG9wTm9kZVR5cGUuY3JlYXRlQW5kRmlsbCgpfSxhcHBseTpmdW5jdGlvbih0KXtyZXR1cm4gdC5kb2N9fSksbmV3IGsoInNlbGVjdGlvbiIse2luaXQ6ZnVuY3Rpb24odCxlKXtyZXR1cm4gdC5zZWxlY3Rpb258fHMuYXRTdGFydChlLmRvYyl9LGFwcGx5OmZ1bmN0aW9uKHQpe3JldHVybiB0LnNlbGVjdGlvbn19KSxuZXcgaygic3RvcmVkTWFya3MiLHtpbml0OmZ1bmN0aW9uKHQpe3JldHVybiB0LnN0b3JlZE1hcmtzfHxudWxsfSxhcHBseTpmdW5jdGlvbih0LGUsbixyKXtyZXR1cm4gci5zZWxlY3Rpb24uJGN1cnNvcj90LnN0b3JlZE1hcmtzOm51bGx9fSksbmV3IGsoInNjcm9sbFRvU2VsZWN0aW9uIix7aW5pdDpmdW5jdGlvbigpe3JldHVybiAwfSxhcHBseTpmdW5jdGlvbih0LGUpe3JldHVybiB0LnNjcm9sbGVkSW50b1ZpZXc/ZSsxOmV9fSldLEM9ZnVuY3Rpb24odCxlKXt2YXIgbj10aGlzO3RoaXMuc2NoZW1hPXQsdGhpcy5maWVsZHM9Uy5jb25jYXQoKSx0aGlzLnBsdWdpbnM9W10sdGhpcy5wbHVnaW5zQnlLZXk9T2JqZWN0LmNyZWF0ZShudWxsKSxlJiZlLmZvckVhY2goKGZ1bmN0aW9uKHQpe2lmKG4ucGx1Z2luc0J5S2V5W3Qua2V5XSl0aHJvdyBuZXcgUmFuZ2VFcnJvcigiQWRkaW5nIGRpZmZlcmVudCBpbnN0YW5jZXMgb2YgYSBrZXllZCBwbHVnaW4gKCIrdC5rZXkrIikiKTtuLnBsdWdpbnMucHVzaCh0KSxuLnBsdWdpbnNCeUtleVt0LmtleV09dCx0LnNwZWMuc3RhdGUmJm4uZmllbGRzLnB1c2gobmV3IGsodC5rZXksdC5zcGVjLnN0YXRlLHQpKX0pKX0sTz1mdW5jdGlvbih0KXt0aGlzLmNvbmZpZz10fSxNPXtzY2hlbWE6e2NvbmZpZ3VyYWJsZTohMH0scGx1Z2luczp7Y29uZmlndXJhYmxlOiEwfSx0cjp7Y29uZmlndXJhYmxlOiEwfX07TS5zY2hlbWEuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY29uZmlnLnNjaGVtYX0sTS5wbHVnaW5zLmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLmNvbmZpZy5wbHVnaW5zfSxPLnByb3RvdHlwZS5hcHBseT1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5hcHBseVRyYW5zYWN0aW9uKHQpLnN0YXRlfSxPLnByb3RvdHlwZS5maWx0ZXJUcmFuc2FjdGlvbj1mdW5jdGlvbih0LGUpe3ZvaWQgMD09PWUmJihlPS0xKTtmb3IodmFyIG49MDtuPHRoaXMuY29uZmlnLnBsdWdpbnMubGVuZ3RoO24rKylpZihuIT1lKXt2YXIgcj10aGlzLmNvbmZpZy5wbHVnaW5zW25dO2lmKHIuc3BlYy5maWx0ZXJUcmFuc2FjdGlvbiYmIXIuc3BlYy5maWx0ZXJUcmFuc2FjdGlvbi5jYWxsKHIsdCx0aGlzKSlyZXR1cm4hMX1yZXR1cm4hMH0sTy5wcm90b3R5cGUuYXBwbHlUcmFuc2FjdGlvbj1mdW5jdGlvbih0KXtpZighdGhpcy5maWx0ZXJUcmFuc2FjdGlvbih0KSlyZXR1cm57c3RhdGU6dGhpcyx0cmFuc2FjdGlvbnM6W119O2Zvcih2YXIgZT1bdF0sbj10aGlzLmFwcGx5SW5uZXIodCkscj1udWxsOzspe2Zvcih2YXIgbz0hMSxpPTA7aTx0aGlzLmNvbmZpZy5wbHVnaW5zLmxlbmd0aDtpKyspe3ZhciBzPXRoaXMuY29uZmlnLnBsdWdpbnNbaV07aWYocy5zcGVjLmFwcGVuZFRyYW5zYWN0aW9uKXt2YXIgYT1yP3JbaV0ubjowLGM9cj9yW2ldLnN0YXRlOnRoaXMsdT1hPGUubGVuZ3RoJiZzLnNwZWMuYXBwZW5kVHJhbnNhY3Rpb24uY2FsbChzLGE/ZS5zbGljZShhKTplLGMsbik7aWYodSYmbi5maWx0ZXJUcmFuc2FjdGlvbih1LGkpKXtpZih1LnNldE1ldGEoImFwcGVuZGVkVHJhbnNhY3Rpb24iLHQpLCFyKXtyPVtdO2Zvcih2YXIgbD0wO2w8dGhpcy5jb25maWcucGx1Z2lucy5sZW5ndGg7bCsrKXIucHVzaChsPGk/e3N0YXRlOm4sbjplLmxlbmd0aH06e3N0YXRlOnRoaXMsbjowfSl9ZS5wdXNoKHUpLG49bi5hcHBseUlubmVyKHUpLG89ITB9ciYmKHJbaV09e3N0YXRlOm4sbjplLmxlbmd0aH0pfX1pZighbylyZXR1cm57c3RhdGU6bix0cmFuc2FjdGlvbnM6ZX19fSxPLnByb3RvdHlwZS5hcHBseUlubmVyPWZ1bmN0aW9uKHQpe2lmKCF0LmJlZm9yZS5lcSh0aGlzLmRvYykpdGhyb3cgbmV3IFJhbmdlRXJyb3IoIkFwcGx5aW5nIGEgbWlzbWF0Y2hlZCB0cmFuc2FjdGlvbiIpO2Zvcih2YXIgZT1uZXcgTyh0aGlzLmNvbmZpZyksbj10aGlzLmNvbmZpZy5maWVsZHMscj0wO3I8bi5sZW5ndGg7cisrKXt2YXIgbz1uW3JdO2Vbby5uYW1lXT1vLmFwcGx5KHQsdGhpc1tvLm5hbWVdLHRoaXMsZSl9Zm9yKHZhciBpPTA7aTxOLmxlbmd0aDtpKyspTltpXSh0aGlzLHQsZSk7cmV0dXJuIGV9LE0udHIuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIG5ldyBiKHRoaXMpfSxPLmNyZWF0ZT1mdW5jdGlvbih0KXtmb3IodmFyIGU9bmV3IEModC5zY2hlbWF8fHQuZG9jLnR5cGUuc2NoZW1hLHQucGx1Z2lucyksbj1uZXcgTyhlKSxyPTA7cjxlLmZpZWxkcy5sZW5ndGg7cisrKW5bZS5maWVsZHNbcl0ubmFtZV09ZS5maWVsZHNbcl0uaW5pdCh0LG4pO3JldHVybiBufSxPLnByb3RvdHlwZS5yZWNvbmZpZ3VyZT1mdW5jdGlvbih0KXtmb3IodmFyIGU9bmV3IEModC5zY2hlbWF8fHRoaXMuc2NoZW1hLHQucGx1Z2lucyksbj1lLmZpZWxkcyxyPW5ldyBPKGUpLG89MDtvPG4ubGVuZ3RoO28rKyl7dmFyIGk9bltvXS5uYW1lO3JbaV09dGhpcy5oYXNPd25Qcm9wZXJ0eShpKT90aGlzW2ldOm5bb10uaW5pdCh0LHIpfXJldHVybiByfSxPLnByb3RvdHlwZS50b0pTT049ZnVuY3Rpb24odCl7dmFyIGU9e2RvYzp0aGlzLmRvYy50b0pTT04oKSxzZWxlY3Rpb246dGhpcy5zZWxlY3Rpb24udG9KU09OKCl9O2lmKHRoaXMuc3RvcmVkTWFya3MmJihlLnN0b3JlZE1hcmtzPXRoaXMuc3RvcmVkTWFya3MubWFwKChmdW5jdGlvbih0KXtyZXR1cm4gdC50b0pTT04oKX0pKSksdCYmIm9iamVjdCI9PXR5cGVvZiB0KWZvcih2YXIgbiBpbiB0KXtpZigiZG9jIj09bnx8InNlbGVjdGlvbiI9PW4pdGhyb3cgbmV3IFJhbmdlRXJyb3IoIlRoZSBKU09OIGZpZWxkcyBgZG9jYCBhbmQgYHNlbGVjdGlvbmAgYXJlIHJlc2VydmVkIik7dmFyIHI9dFtuXSxvPXIuc3BlYy5zdGF0ZTtvJiZvLnRvSlNPTiYmKGVbbl09by50b0pTT04uY2FsbChyLHRoaXNbci5rZXldKSl9cmV0dXJuIGV9LE8uZnJvbUpTT049ZnVuY3Rpb24odCxlLG4pe2lmKCFlKXRocm93IG5ldyBSYW5nZUVycm9yKCJJbnZhbGlkIGlucHV0IGZvciBFZGl0b3JTdGF0ZS5mcm9tSlNPTiIpO2lmKCF0LnNjaGVtYSl0aHJvdyBuZXcgUmFuZ2VFcnJvcigiUmVxdWlyZWQgY29uZmlnIGZpZWxkICdzY2hlbWEnIG1pc3NpbmciKTt2YXIgbz1uZXcgQyh0LnNjaGVtYSx0LnBsdWdpbnMpLGk9bmV3IE8obyk7cmV0dXJuIG8uZmllbGRzLmZvckVhY2goKGZ1bmN0aW9uKG8pe2lmKCJkb2MiPT1vLm5hbWUpaS5kb2M9clsiZiJdLmZyb21KU09OKHQuc2NoZW1hLGUuZG9jKTtlbHNlIGlmKCJzZWxlY3Rpb24iPT1vLm5hbWUpaS5zZWxlY3Rpb249cy5mcm9tSlNPTihpLmRvYyxlLnNlbGVjdGlvbik7ZWxzZSBpZigic3RvcmVkTWFya3MiPT1vLm5hbWUpZS5zdG9yZWRNYXJrcyYmKGkuc3RvcmVkTWFya3M9ZS5zdG9yZWRNYXJrcy5tYXAodC5zY2hlbWEubWFya0Zyb21KU09OKSk7ZWxzZXtpZihuKWZvcih2YXIgYSBpbiBuKXt2YXIgYz1uW2FdLHU9Yy5zcGVjLnN0YXRlO2lmKGMua2V5PT1vLm5hbWUmJnUmJnUuZnJvbUpTT04mJk9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChlLGEpKXJldHVybiB2b2lkKGlbby5uYW1lXT11LmZyb21KU09OLmNhbGwoYyx0LGVbYV0saSkpfWlbby5uYW1lXT1vLmluaXQodCxpKX19KSksaX0sTy5hZGRBcHBseUxpc3RlbmVyPWZ1bmN0aW9uKHQpe04ucHVzaCh0KX0sTy5yZW1vdmVBcHBseUxpc3RlbmVyPWZ1bmN0aW9uKHQpe3ZhciBlPU4uaW5kZXhPZih0KTtlPi0xJiZOLnNwbGljZShlLDEpfSxPYmplY3QuZGVmaW5lUHJvcGVydGllcyhPLnByb3RvdHlwZSxNKTt2YXIgTj1bXTtmdW5jdGlvbiBUKHQsZSxuKXtmb3IodmFyIHIgaW4gdCl7dmFyIG89dFtyXTtvIGluc3RhbmNlb2YgRnVuY3Rpb24/bz1vLmJpbmQoZSk6ImhhbmRsZURPTUV2ZW50cyI9PXImJihvPVQobyxlLHt9KSksbltyXT1vfXJldHVybiBufXZhciBBPWZ1bmN0aW9uKHQpe3RoaXMucHJvcHM9e30sdC5wcm9wcyYmVCh0LnByb3BzLHRoaXMsdGhpcy5wcm9wcyksdGhpcy5zcGVjPXQsdGhpcy5rZXk9dC5rZXk/dC5rZXkua2V5OkQoInBsdWdpbiIpfTtBLnByb3RvdHlwZS5nZXRTdGF0ZT1mdW5jdGlvbih0KXtyZXR1cm4gdFt0aGlzLmtleV19O3ZhciBFPU9iamVjdC5jcmVhdGUobnVsbCk7ZnVuY3Rpb24gRCh0KXtyZXR1cm4gdCBpbiBFP3QrIiQiKyArK0VbdF06KEVbdF09MCx0KyIkIil9dmFyIFI9ZnVuY3Rpb24odCl7dm9pZCAwPT09dCYmKHQ9ImtleSIpLHRoaXMua2V5PUQodCl9O1IucHJvdG90eXBlLmdldD1mdW5jdGlvbih0KXtyZXR1cm4gdC5jb25maWcucGx1Z2luc0J5S2V5W3RoaXMua2V5XX0sUi5wcm90b3R5cGUuZ2V0U3RhdGU9ZnVuY3Rpb24odCl7cmV0dXJuIHRbdGhpcy5rZXldfX0sNTUwNDpmdW5jdGlvbih0LGUpe3QuZXhwb3J0cz17ZnVuY3Rpb25hbDohMCxyZW5kZXIodCxlKXtjb25zdHtfYzpuLF92OnIsZGF0YTpvLGNoaWxkcmVuOmk9W119PWUse2NsYXNzOnMsc3RhdGljQ2xhc3M6YSxzdHlsZTpjLHN0YXRpY1N0eWxlOnUsYXR0cnM6bD17fSwuLi5ofT1vO3JldHVybiBuKCJzdmciLHtjbGFzczpbcyxhXSxzdHlsZTpbYyx1XSxhdHRyczpPYmplY3QuYXNzaWduKHt4bWxuczoiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciLHZpZXdCb3g6IjAgMCAyNCAyNCJ9LGwpLC4uLmh9LGkuY29uY2F0KFtuKCJwYXRoIix7YXR0cnM6e2Q6Ik0yMy43NSAxMi45NTJBMS4yNSAxLjI1IDAgMDAyMi41IDExLjdoLTguOTM2YS40OTIuNDkyIDAgMDEtLjI4Mi0uMDljLS43MjItLjUxMy0xLjQ4Mi0uOTgxLTIuMjE4LTEuNDMyLTIuOC0xLjcxNS00LjUtMi45LTQuNS00Ljg2MyAwLTIuMjM1IDIuMjA3LTIuNTY5IDMuNTIzLTIuNTY5YTQuNTQgNC41NCAwIDAxMy4wODEuNzY0IDIuNjYyIDIuNjYyIDAgMDEuNDQ3IDEuOTl2LjNhMS4yNSAxLjI1IDAgMTAyLjUgMHYtLjI2OGE0Ljg4NyA0Ljg4NyAwIDAwLTEuMTY1LTMuNzc3QzEzLjk0OS43NDEgMTIuMzU5LjI0OCAxMC4wOTEuMjQ4Yy0zLjY1OCAwLTYuMDIzIDEuOTg5LTYuMDIzIDUuMDY5IDAgMi43NzMgMS44OTIgNC41MTIgNCA1LjkyN2EuMjUuMjUgMCAwMS0uMTM5LjQ1OEgxLjVhMS4yNSAxLjI1IDAgMDAwIDIuNWgxMC45NzdhLjI1MS4yNTEgMCAwMS4xNTkuMDU4IDQuMzM5IDQuMzM5IDAgMDExLjkzMiAzLjQ2NmMwIDMuMjY4LTMuNDI2IDMuNTIyLTQuNDc3IDMuNTIyLTEuODE0IDAtMy4xMzktLjQwNS0zLjgzNC0xLjE3M2EzLjM5NCAzLjM5NCAwIDAxLS42NS0yLjcgMS4yNSAxLjI1IDAgMDAtMi40ODgtLjI0NkE1Ljc2IDUuNzYgMCAwMDQuNCAyMS43NTNjMS4yIDEuMzI0IDMuMTE0IDIgNS42ODggMiA0LjE3NCAwIDYuOTc3LTIuNDIgNi45NzctNi4wMjJhNi4wNTkgNi4wNTkgMCAwMC0uODQ5LTMuMTQ3LjI1LjI1IDAgMDEuMjE2LS4zNzdIMjIuNWExLjI1IDEuMjUgMCAwMDEuMjUtMS4yNTV6In19KV0pKX19fSwiNTViZSI6ZnVuY3Rpb24odCxlLG4peyJ1c2Ugc3RyaWN0IjtuLnIoZSksbi5kKGUsIkNlbGxTZWxlY3Rpb24iLChmdW5jdGlvbigpe3JldHVybiBJfSkpLG4uZChlLCJUYWJsZU1hcCIsKGZ1bmN0aW9uKCl7cmV0dXJuIHZ9KSksbi5kKGUsIl9fY2xpcENlbGxzIiwoZnVuY3Rpb24oKXtyZXR1cm4gVX0pKSxuLmQoZSwiX19pbnNlcnRDZWxscyIsKGZ1bmN0aW9uKCl7cmV0dXJuIFp9KSksbi5kKGUsIl9fcGFzdGVkQ2VsbHMiLChmdW5jdGlvbigpe3JldHVybiBXfSkpLG4uZChlLCJhZGRDb2x1bW4iLChmdW5jdGlvbigpe3JldHVybiBtdH0pKSxuLmQoZSwiYWRkQ29sdW1uQWZ0ZXIiLChmdW5jdGlvbigpe3JldHVybiB5dH0pKSxuLmQoZSwiYWRkQ29sdW1uQmVmb3JlIiwoZnVuY3Rpb24oKXtyZXR1cm4gZ3R9KSksbi5kKGUsImFkZFJvdyIsKGZ1bmN0aW9uKCl7cmV0dXJuIGt0fSkpLG4uZChlLCJhZGRSb3dBZnRlciIsKGZ1bmN0aW9uKCl7cmV0dXJuIEN0fSkpLG4uZChlLCJhZGRSb3dCZWZvcmUiLChmdW5jdGlvbigpe3JldHVybiBTdH0pKSxuLmQoZSwiY2VsbEFyb3VuZCIsKGZ1bmN0aW9uKCl7cmV0dXJuIHh9KSksbi5kKGUsImNvbENvdW50IiwoZnVuY3Rpb24oKXtyZXR1cm4gRX0pKSxuLmQoZSwiY29sdW1uUmVzaXppbmciLChmdW5jdGlvbigpe3JldHVybiBXdH0pKSxuLmQoZSwiY29sdW1uUmVzaXppbmdQbHVnaW5LZXkiLChmdW5jdGlvbigpe3JldHVybiBKdH0pKSxuLmQoZSwiZGVsZXRlQ29sdW1uIiwoZnVuY3Rpb24oKXtyZXR1cm4gYnR9KSksbi5kKGUsImRlbGV0ZVJvdyIsKGZ1bmN0aW9uKCl7cmV0dXJuIE10fSkpLG4uZChlLCJkZWxldGVUYWJsZSIsKGZ1bmN0aW9uKCl7cmV0dXJuIFZ0fSkpLG4uZChlLCJmaW5kQ2VsbCIsKGZ1bmN0aW9uKCl7cmV0dXJuIEF9KSksbi5kKGUsImZpeFRhYmxlcyIsKGZ1bmN0aW9uKCl7cmV0dXJuIGZ0fSkpLG4uZChlLCJmaXhUYWJsZXNLZXkiLChmdW5jdGlvbigpe3JldHVybiBsdH0pKSxuLmQoZSwiZ29Ub05leHRDZWxsIiwoZnVuY3Rpb24oKXtyZXR1cm4gJHR9KSksbi5kKGUsImhhbmRsZVBhc3RlIiwoZnVuY3Rpb24oKXtyZXR1cm4gaXR9KSksbi5kKGUsImluU2FtZVRhYmxlIiwoZnVuY3Rpb24oKXtyZXR1cm4gVH0pKSxuLmQoZSwiaXNJblRhYmxlIiwoZnVuY3Rpb24oKXtyZXR1cm4gU30pKSxuLmQoZSwibWVyZ2VDZWxscyIsKGZ1bmN0aW9uKCl7cmV0dXJuIEF0fSkpLG4uZChlLCJtb3ZlQ2VsbEZvcndhcmQiLChmdW5jdGlvbigpe3JldHVybiBOfSkpLG4uZChlLCJuZXh0Q2VsbCIsKGZ1bmN0aW9uKCl7cmV0dXJuIER9KSksbi5kKGUsInJlbW92ZUNvbHVtbiIsKGZ1bmN0aW9uKCl7cmV0dXJuIHd0fSkpLG4uZChlLCJyZW1vdmVSb3ciLChmdW5jdGlvbigpe3JldHVybiBPdH0pKSxuLmQoZSwicm93SXNIZWFkZXIiLChmdW5jdGlvbigpe3JldHVybiB4dH0pKSxuLmQoZSwic2VsZWN0ZWRSZWN0IiwoZnVuY3Rpb24oKXtyZXR1cm4gZHR9KSksbi5kKGUsInNlbGVjdGlvbkNlbGwiLChmdW5jdGlvbigpe3JldHVybiBDfSkpLG4uZChlLCJzZXRDZWxsQXR0ciIsKGZ1bmN0aW9uKCl7cmV0dXJuIFJ0fSkpLG4uZChlLCJzcGxpdENlbGwiLChmdW5jdGlvbigpe3JldHVybiBFdH0pKSxuLmQoZSwic3BsaXRDZWxsV2l0aFR5cGUiLChmdW5jdGlvbigpe3JldHVybiBEdH0pKSxuLmQoZSwidGFibGVFZGl0aW5nIiwoZnVuY3Rpb24oKXtyZXR1cm4gaWV9KSksbi5kKGUsInRhYmxlRWRpdGluZ0tleSIsKGZ1bmN0aW9uKCl7cmV0dXJuIGJ9KSksbi5kKGUsInRhYmxlTm9kZXMiLChmdW5jdGlvbigpe3JldHVybiBxfSkpLG4uZChlLCJ0b2dnbGVIZWFkZXIiLChmdW5jdGlvbigpe3JldHVybiBJdH0pKSxuLmQoZSwidG9nZ2xlSGVhZGVyQ2VsbCIsKGZ1bmN0aW9uKCl7cmV0dXJuIEZ0fSkpLG4uZChlLCJ0b2dnbGVIZWFkZXJDb2x1bW4iLChmdW5jdGlvbigpe3JldHVybiBfdH0pKSxuLmQoZSwidG9nZ2xlSGVhZGVyUm93IiwoZnVuY3Rpb24oKXtyZXR1cm4gQnR9KSksbi5kKGUsInVwZGF0ZUNvbHVtbnNPblJlc2l6ZSIsKGZ1bmN0aW9uKCl7cmV0dXJuIHF0fSkpO3ZhciByLG8saT1uKCI1MzEzIikscz1uKCIzMDRhIiksYT1uKCI3ZjA2IiksYz1uKCI1NzZhIiksdT1uKCIwYWMwIik7aWYoInVuZGVmaW5lZCIhPXR5cGVvZiBXZWFrTWFwKXt2YXIgbD1uZXcgV2Vha01hcDtyPWZ1bmN0aW9uKHQpe3JldHVybiBsLmdldCh0KX0sbz1mdW5jdGlvbih0LGUpe3JldHVybiBsLnNldCh0LGUpLGV9fWVsc2V7dmFyIGg9W10sZj0xMCxwPTA7cj1mdW5jdGlvbih0KXtmb3IodmFyIGU9MDtlPGgubGVuZ3RoO2UrPTIpaWYoaFtlXT09dClyZXR1cm4gaFtlKzFdfSxvPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIHA9PWYmJihwPTApLGhbcCsrXT10LGhbcCsrXT1lfX12YXIgZD1mdW5jdGlvbih0LGUsbixyKXt0aGlzLmxlZnQ9dCx0aGlzLnRvcD1lLHRoaXMucmlnaHQ9bix0aGlzLmJvdHRvbT1yfSx2PWZ1bmN0aW9uKHQsZSxuLHIpe3RoaXMud2lkdGg9dCx0aGlzLmhlaWdodD1lLHRoaXMubWFwPW4sdGhpcy5wcm9ibGVtcz1yfTtmdW5jdGlvbiBtKHQpe2lmKCJ0YWJsZSIhPXQudHlwZS5zcGVjLnRhYmxlUm9sZSl0aHJvdyBuZXcgUmFuZ2VFcnJvcigiTm90IGEgdGFibGUgbm9kZTogIit0LnR5cGUubmFtZSk7Zm9yKHZhciBlPWcodCksbj10LmNoaWxkQ291bnQscj1bXSxvPTAsaT1udWxsLHM9W10sYT0wLGM9ZSpuO2E8YzthKyspclthXT0wO2Zvcih2YXIgdT0wLGw9MDt1PG47dSsrKXt2YXIgaD10LmNoaWxkKHUpO2wrKztmb3IodmFyIGY9MDs7ZisrKXt3aGlsZShvPHIubGVuZ3RoJiYwIT1yW29dKW8rKztpZihmPT1oLmNoaWxkQ291bnQpYnJlYWs7Zm9yKHZhciBwPWguY2hpbGQoZiksZD1wLmF0dHJzLG09ZC5jb2xzcGFuLHc9ZC5yb3dzcGFuLGI9ZC5jb2x3aWR0aCx4PTA7eDx3O3grKyl7aWYoeCt1Pj1uKXsoaXx8KGk9W10pKS5wdXNoKHt0eXBlOiJvdmVybG9uZ19yb3dzcGFuIixwb3M6bCxuOncteH0pO2JyZWFrfWZvcih2YXIgaz1vK3gqZSxTPTA7UzxtO1MrKyl7MD09cltrK1NdP3JbaytTXT1sOihpfHwoaT1bXSkpLnB1c2goe3R5cGU6ImNvbGxpc2lvbiIscm93OnUscG9zOmwsbjptLVN9KTt2YXIgQz1iJiZiW1NdO2lmKEMpe3ZhciBPPShrK1MpJWUqMixNPXNbT107bnVsbD09TXx8TSE9QyYmMT09c1tPKzFdPyhzW09dPUMsc1tPKzFdPTEpOk09PUMmJnNbTysxXSsrfX19bys9bSxsKz1wLm5vZGVTaXplfXZhciBOPSh1KzEpKmUsVD0wO3doaWxlKG88TikwPT1yW28rK10mJlQrKztUJiYoaXx8KGk9W10pKS5wdXNoKHt0eXBlOiJtaXNzaW5nIixyb3c6dSxuOlR9KSxsKyt9Zm9yKHZhciBBPW5ldyB2KGUsbixyLGkpLEU9ITEsRD0wOyFFJiZEPHMubGVuZ3RoO0QrPTIpbnVsbCE9c1tEXSYmc1tEKzFdPG4mJihFPSEwKTtyZXR1cm4gRSYmeShBLHMsdCksQX1mdW5jdGlvbiBnKHQpe2Zvcih2YXIgZT0tMSxuPSExLHI9MDtyPHQuY2hpbGRDb3VudDtyKyspe3ZhciBvPXQuY2hpbGQociksaT0wO2lmKG4pZm9yKHZhciBzPTA7czxyO3MrKylmb3IodmFyIGE9dC5jaGlsZChzKSxjPTA7YzxhLmNoaWxkQ291bnQ7YysrKXt2YXIgdT1hLmNoaWxkKGMpO3MrdS5hdHRycy5yb3dzcGFuPnImJihpKz11LmF0dHJzLmNvbHNwYW4pfWZvcih2YXIgbD0wO2w8by5jaGlsZENvdW50O2wrKyl7dmFyIGg9by5jaGlsZChsKTtpKz1oLmF0dHJzLmNvbHNwYW4saC5hdHRycy5yb3dzcGFuPjEmJihuPSEwKX0tMT09ZT9lPWk6ZSE9aSYmKGU9TWF0aC5tYXgoZSxpKSl9cmV0dXJuIGV9ZnVuY3Rpb24geSh0LGUsbil7dC5wcm9ibGVtc3x8KHQucHJvYmxlbXM9W10pO2Zvcih2YXIgcj0wLG89e307cjx0Lm1hcC5sZW5ndGg7cisrKXt2YXIgaT10Lm1hcFtyXTtpZighb1tpXSl7b1tpXT0hMDtmb3IodmFyIHM9bi5ub2RlQXQoaSksYT1udWxsLGM9MDtjPHMuYXR0cnMuY29sc3BhbjtjKyspe3ZhciB1PShyK2MpJXQud2lkdGgsbD1lWzIqdV07bnVsbD09bHx8cy5hdHRycy5jb2x3aWR0aCYmcy5hdHRycy5jb2x3aWR0aFtjXT09bHx8KChhfHwoYT13KHMuYXR0cnMpKSlbY109bCl9YSYmdC5wcm9ibGVtcy51bnNoaWZ0KHt0eXBlOiJjb2x3aWR0aCBtaXNtYXRjaCIscG9zOmksY29sd2lkdGg6YX0pfX19ZnVuY3Rpb24gdyh0KXtpZih0LmNvbHdpZHRoKXJldHVybiB0LmNvbHdpZHRoLnNsaWNlKCk7Zm9yKHZhciBlPVtdLG49MDtuPHQuY29sc3BhbjtuKyspZS5wdXNoKDApO3JldHVybiBlfXYucHJvdG90eXBlLmZpbmRDZWxsPWZ1bmN0aW9uKHQpe2Zvcih2YXIgZT0wO2U8dGhpcy5tYXAubGVuZ3RoO2UrKyl7dmFyIG49dGhpcy5tYXBbZV07aWYobj09dCl7Zm9yKHZhciByPWUldGhpcy53aWR0aCxvPWUvdGhpcy53aWR0aHwwLGk9cisxLHM9bysxLGE9MTtpPHRoaXMud2lkdGgmJnRoaXMubWFwW2UrYV09PW47YSsrKWkrKztmb3IodmFyIGM9MTtzPHRoaXMuaGVpZ2h0JiZ0aGlzLm1hcFtlK3RoaXMud2lkdGgqY109PW47YysrKXMrKztyZXR1cm4gbmV3IGQocixvLGkscyl9fXRocm93IG5ldyBSYW5nZUVycm9yKCJObyBjZWxsIHdpdGggb2Zmc2V0ICIrdCsiIGZvdW5kIil9LHYucHJvdG90eXBlLmNvbENvdW50PWZ1bmN0aW9uKHQpe2Zvcih2YXIgZT0wO2U8dGhpcy5tYXAubGVuZ3RoO2UrKylpZih0aGlzLm1hcFtlXT09dClyZXR1cm4gZSV0aGlzLndpZHRoO3Rocm93IG5ldyBSYW5nZUVycm9yKCJObyBjZWxsIHdpdGggb2Zmc2V0ICIrdCsiIGZvdW5kIil9LHYucHJvdG90eXBlLm5leHRDZWxsPWZ1bmN0aW9uKHQsZSxuKXt2YXIgcj10aGlzLmZpbmRDZWxsKHQpLG89ci5sZWZ0LGk9ci5yaWdodCxzPXIudG9wLGE9ci5ib3R0b207cmV0dXJuImhvcml6Ij09ZT8objwwPzA9PW86aT09dGhpcy53aWR0aCk/bnVsbDp0aGlzLm1hcFtzKnRoaXMud2lkdGgrKG48MD9vLTE6aSldOihuPDA/MD09czphPT10aGlzLmhlaWdodCk/bnVsbDp0aGlzLm1hcFtvK3RoaXMud2lkdGgqKG48MD9zLTE6YSldfSx2LnByb3RvdHlwZS5yZWN0QmV0d2Vlbj1mdW5jdGlvbih0LGUpe3ZhciBuPXRoaXMuZmluZENlbGwodCkscj1uLmxlZnQsbz1uLnJpZ2h0LGk9bi50b3Ascz1uLmJvdHRvbSxhPXRoaXMuZmluZENlbGwoZSksYz1hLmxlZnQsdT1hLnJpZ2h0LGw9YS50b3AsaD1hLmJvdHRvbTtyZXR1cm4gbmV3IGQoTWF0aC5taW4ocixjKSxNYXRoLm1pbihpLGwpLE1hdGgubWF4KG8sdSksTWF0aC5tYXgocyxoKSl9LHYucHJvdG90eXBlLmNlbGxzSW5SZWN0PWZ1bmN0aW9uKHQpe2Zvcih2YXIgZT1bXSxuPXt9LHI9dC50b3A7cjx0LmJvdHRvbTtyKyspZm9yKHZhciBvPXQubGVmdDtvPHQucmlnaHQ7bysrKXt2YXIgaT1yKnRoaXMud2lkdGgrbyxzPXRoaXMubWFwW2ldO25bc118fChuW3NdPSEwLG89PXQubGVmdCYmbyYmdGhpcy5tYXBbaS0xXT09c3x8cj09dC50b3AmJnImJnRoaXMubWFwW2ktdGhpcy53aWR0aF09PXN8fGUucHVzaChzKSl9cmV0dXJuIGV9LHYucHJvdG90eXBlLnBvc2l0aW9uQXQ9ZnVuY3Rpb24odCxlLG4pe2Zvcih2YXIgcj0wLG89MDs7cisrKXt2YXIgaT1vK24uY2hpbGQocikubm9kZVNpemU7aWYocj09dCl7dmFyIHM9ZSt0KnRoaXMud2lkdGgsYT0odCsxKSp0aGlzLndpZHRoO3doaWxlKHM8YSYmdGhpcy5tYXBbc108bylzKys7cmV0dXJuIHM9PWE/aS0xOnRoaXMubWFwW3NdfW89aX19LHYuZ2V0PWZ1bmN0aW9uKHQpe3JldHVybiByKHQpfHxvKHQsbSh0KSl9O3ZhciBiPW5ldyBpWyJQbHVnaW5LZXkiXSgic2VsZWN0aW5nQ2VsbHMiKTtmdW5jdGlvbiB4KHQpe2Zvcih2YXIgZT10LmRlcHRoLTE7ZT4wO2UtLSlpZigicm93Ij09dC5ub2RlKGUpLnR5cGUuc3BlYy50YWJsZVJvbGUpcmV0dXJuIHQubm9kZSgwKS5yZXNvbHZlKHQuYmVmb3JlKGUrMSkpO3JldHVybiBudWxsfWZ1bmN0aW9uIGsodCl7Zm9yKHZhciBlPXQuZGVwdGg7ZT4wO2UtLSl7dmFyIG49dC5ub2RlKGUpLnR5cGUuc3BlYy50YWJsZVJvbGU7aWYoImNlbGwiPT09bnx8ImhlYWRlcl9jZWxsIj09PW4pcmV0dXJuIHQubm9kZShlKX1yZXR1cm4gbnVsbH1mdW5jdGlvbiBTKHQpe2Zvcih2YXIgZT10LnNlbGVjdGlvbi4kaGVhZCxuPWUuZGVwdGg7bj4wO24tLSlpZigicm93Ij09ZS5ub2RlKG4pLnR5cGUuc3BlYy50YWJsZVJvbGUpcmV0dXJuITA7cmV0dXJuITF9ZnVuY3Rpb24gQyh0KXt2YXIgZT10LnNlbGVjdGlvbjtyZXR1cm4gZS4kYW5jaG9yQ2VsbD9lLiRhbmNob3JDZWxsLnBvcz5lLiRoZWFkQ2VsbC5wb3M/ZS4kYW5jaG9yQ2VsbDplLiRoZWFkQ2VsbDplLm5vZGUmJiJjZWxsIj09ZS5ub2RlLnR5cGUuc3BlYy50YWJsZVJvbGU/ZS4kYW5jaG9yOngoZS4kaGVhZCl8fE8oZS4kaGVhZCl9ZnVuY3Rpb24gTyh0KXtmb3IodmFyIGU9dC5ub2RlQWZ0ZXIsbj10LnBvcztlO2U9ZS5maXJzdENoaWxkLG4rKyl7dmFyIHI9ZS50eXBlLnNwZWMudGFibGVSb2xlO2lmKCJjZWxsIj09cnx8ImhlYWRlcl9jZWxsIj09cilyZXR1cm4gdC5kb2MucmVzb2x2ZShuKX1mb3IodmFyIG89dC5ub2RlQmVmb3JlLGk9dC5wb3M7bztvPW8ubGFzdENoaWxkLGktLSl7dmFyIHM9by50eXBlLnNwZWMudGFibGVSb2xlO2lmKCJjZWxsIj09c3x8ImhlYWRlcl9jZWxsIj09cylyZXR1cm4gdC5kb2MucmVzb2x2ZShpLW8ubm9kZVNpemUpfX1mdW5jdGlvbiBNKHQpe3JldHVybiJyb3ciPT10LnBhcmVudC50eXBlLnNwZWMudGFibGVSb2xlJiZ0Lm5vZGVBZnRlcn1mdW5jdGlvbiBOKHQpe3JldHVybiB0Lm5vZGUoMCkucmVzb2x2ZSh0LnBvcyt0Lm5vZGVBZnRlci5ub2RlU2l6ZSl9ZnVuY3Rpb24gVCh0LGUpe3JldHVybiB0LmRlcHRoPT1lLmRlcHRoJiZ0LnBvcz49ZS5zdGFydCgtMSkmJnQucG9zPD1lLmVuZCgtMSl9ZnVuY3Rpb24gQSh0KXtyZXR1cm4gdi5nZXQodC5ub2RlKC0xKSkuZmluZENlbGwodC5wb3MtdC5zdGFydCgtMSkpfWZ1bmN0aW9uIEUodCl7cmV0dXJuIHYuZ2V0KHQubm9kZSgtMSkpLmNvbENvdW50KHQucG9zLXQuc3RhcnQoLTEpKX1mdW5jdGlvbiBEKHQsZSxuKXt2YXIgcj10LnN0YXJ0KC0xKSxvPXYuZ2V0KHQubm9kZSgtMSkpLGk9by5uZXh0Q2VsbCh0LnBvcy1yLGUsbik7cmV0dXJuIG51bGw9PWk/bnVsbDp0Lm5vZGUoMCkucmVzb2x2ZShyK2kpfWZ1bmN0aW9uIFIodCxlLG4pe3ZhciByPXt9O2Zvcih2YXIgbyBpbiB0KXJbb109dFtvXTtyZXR1cm4gcltlXT1uLHJ9ZnVuY3Rpb24geih0LGUsbil7dm9pZCAwPT09biYmKG49MSk7dmFyIHI9Uih0LCJjb2xzcGFuIix0LmNvbHNwYW4tbik7cmV0dXJuIHIuY29sd2lkdGgmJihyLmNvbHdpZHRoPXIuY29sd2lkdGguc2xpY2UoKSxyLmNvbHdpZHRoLnNwbGljZShlLG4pLHIuY29sd2lkdGguc29tZSgoZnVuY3Rpb24odCl7cmV0dXJuIHQ+MH0pKXx8KHIuY29sd2lkdGg9bnVsbCkpLHJ9ZnVuY3Rpb24gUCh0LGUsbil7dm9pZCAwPT09biYmKG49MSk7dmFyIHI9Uih0LCJjb2xzcGFuIix0LmNvbHNwYW4rbik7aWYoci5jb2x3aWR0aCl7ci5jb2x3aWR0aD1yLmNvbHdpZHRoLnNsaWNlKCk7Zm9yKHZhciBvPTA7bzxuO28rKylyLmNvbHdpZHRoLnNwbGljZShlLDAsMCl9cmV0dXJuIHJ9dmFyIEk9ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZShlLG4pe3ZvaWQgMD09PW4mJihuPWUpO3ZhciByPWUubm9kZSgtMSksbz12LmdldChyKSxzPWUuc3RhcnQoLTEpLGE9by5yZWN0QmV0d2VlbihlLnBvcy1zLG4ucG9zLXMpLGM9ZS5ub2RlKDApLHU9by5jZWxsc0luUmVjdChhKS5maWx0ZXIoKGZ1bmN0aW9uKHQpe3JldHVybiB0IT1uLnBvcy1zfSkpO3UudW5zaGlmdChuLnBvcy1zKTt2YXIgbD11Lm1hcCgoZnVuY3Rpb24odCl7dmFyIGU9ci5ub2RlQXQodCksbj10K3MrMTtyZXR1cm4gbmV3IGlbIlNlbGVjdGlvblJhbmdlIl0oYy5yZXNvbHZlKG4pLGMucmVzb2x2ZShuK2UuY29udGVudC5zaXplKSl9KSk7dC5jYWxsKHRoaXMsbFswXS4kZnJvbSxsWzBdLiR0byxsKSx0aGlzLiRhbmNob3JDZWxsPWUsdGhpcy4kaGVhZENlbGw9bn1yZXR1cm4gdCYmKGUuX19wcm90b19fPXQpLGUucHJvdG90eXBlPU9iamVjdC5jcmVhdGUodCYmdC5wcm90b3R5cGUpLGUucHJvdG90eXBlLmNvbnN0cnVjdG9yPWUsZS5wcm90b3R5cGUubWFwPWZ1bmN0aW9uKHQsbil7dmFyIHI9dC5yZXNvbHZlKG4ubWFwKHRoaXMuJGFuY2hvckNlbGwucG9zKSksbz10LnJlc29sdmUobi5tYXAodGhpcy4kaGVhZENlbGwucG9zKSk7aWYoTShyKSYmTShvKSYmVChyLG8pKXt2YXIgcz10aGlzLiRhbmNob3JDZWxsLm5vZGUoLTEpIT1yLm5vZGUoLTEpO3JldHVybiBzJiZ0aGlzLmlzUm93U2VsZWN0aW9uKCk/ZS5yb3dTZWxlY3Rpb24ocixvKTpzJiZ0aGlzLmlzQ29sU2VsZWN0aW9uKCk/ZS5jb2xTZWxlY3Rpb24ocixvKTpuZXcgZShyLG8pfXJldHVybiBpWyJUZXh0U2VsZWN0aW9uIl0uYmV0d2VlbihyLG8pfSxlLnByb3RvdHlwZS5jb250ZW50PWZ1bmN0aW9uKCl7Zm9yKHZhciB0PXRoaXMuJGFuY2hvckNlbGwubm9kZSgtMSksZT12LmdldCh0KSxuPXRoaXMuJGFuY2hvckNlbGwuc3RhcnQoLTEpLHI9ZS5yZWN0QmV0d2Vlbih0aGlzLiRhbmNob3JDZWxsLnBvcy1uLHRoaXMuJGhlYWRDZWxsLnBvcy1uKSxvPXt9LGk9W10sYT1yLnRvcDthPHIuYm90dG9tO2ErKyl7Zm9yKHZhciBjPVtdLHU9YSplLndpZHRoK3IubGVmdCxsPXIubGVmdDtsPHIucmlnaHQ7bCsrLHUrKyl7dmFyIGg9ZS5tYXBbdV07aWYoIW9baF0pe29baF09ITA7dmFyIGY9ZS5maW5kQ2VsbChoKSxwPXQubm9kZUF0KGgpLGQ9ci5sZWZ0LWYubGVmdCxtPWYucmlnaHQtci5yaWdodDtpZihkPjB8fG0+MCl7dmFyIGc9cC5hdHRycztkPjAmJihnPXooZywwLGQpKSxtPjAmJihnPXooZyxnLmNvbHNwYW4tbSxtKSkscD1mLmxlZnQ8ci5sZWZ0P3AudHlwZS5jcmVhdGVBbmRGaWxsKGcpOnAudHlwZS5jcmVhdGUoZyxwLmNvbnRlbnQpfWlmKGYudG9wPHIudG9wfHxmLmJvdHRvbT5yLmJvdHRvbSl7dmFyIHk9UihwLmF0dHJzLCJyb3dzcGFuIixNYXRoLm1pbihmLmJvdHRvbSxyLmJvdHRvbSktTWF0aC5tYXgoZi50b3Asci50b3ApKTtwPWYudG9wPHIudG9wP3AudHlwZS5jcmVhdGVBbmRGaWxsKHkpOnAudHlwZS5jcmVhdGUoeSxwLmNvbnRlbnQpfWMucHVzaChwKX19aS5wdXNoKHQuY2hpbGQoYSkuY29weShzWyJjIl0uZnJvbShjKSkpfXZhciB3PXRoaXMuaXNDb2xTZWxlY3Rpb24oKSYmdGhpcy5pc1Jvd1NlbGVjdGlvbigpP3Q6aTtyZXR1cm4gbmV3IHNbImkiXShzWyJjIl0uZnJvbSh3KSwxLDEpfSxlLnByb3RvdHlwZS5yZXBsYWNlPWZ1bmN0aW9uKGUsbil7dm9pZCAwPT09biYmKG49c1siaSJdLmVtcHR5KTtmb3IodmFyIHI9ZS5zdGVwcy5sZW5ndGgsbz10aGlzLnJhbmdlcyxpPTA7aTxvLmxlbmd0aDtpKyspe3ZhciBhPW9baV0sYz1hLiRmcm9tLHU9YS4kdG8sbD1lLm1hcHBpbmcuc2xpY2Uocik7ZS5yZXBsYWNlKGwubWFwKGMucG9zKSxsLm1hcCh1LnBvcyksaT9zWyJpIl0uZW1wdHk6bil9dmFyIGg9dC5maW5kRnJvbShlLmRvYy5yZXNvbHZlKGUubWFwcGluZy5zbGljZShyKS5tYXAodGhpcy50bykpLC0xKTtoJiZlLnNldFNlbGVjdGlvbihoKX0sZS5wcm90b3R5cGUucmVwbGFjZVdpdGg9ZnVuY3Rpb24odCxlKXt0aGlzLnJlcGxhY2UodCxuZXcgc1siaSJdKHNbImMiXS5mcm9tKGUpLDAsMCkpfSxlLnByb3RvdHlwZS5mb3JFYWNoQ2VsbD1mdW5jdGlvbih0KXtmb3IodmFyIGU9dGhpcy4kYW5jaG9yQ2VsbC5ub2RlKC0xKSxuPXYuZ2V0KGUpLHI9dGhpcy4kYW5jaG9yQ2VsbC5zdGFydCgtMSksbz1uLmNlbGxzSW5SZWN0KG4ucmVjdEJldHdlZW4odGhpcy4kYW5jaG9yQ2VsbC5wb3Mtcix0aGlzLiRoZWFkQ2VsbC5wb3MtcikpLGk9MDtpPG8ubGVuZ3RoO2krKyl0KGUubm9kZUF0KG9baV0pLHIrb1tpXSl9LGUucHJvdG90eXBlLmlzQ29sU2VsZWN0aW9uPWZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy4kYW5jaG9yQ2VsbC5pbmRleCgtMSksZT10aGlzLiRoZWFkQ2VsbC5pbmRleCgtMSk7aWYoTWF0aC5taW4odCxlKT4wKXJldHVybiExO3ZhciBuPXQrdGhpcy4kYW5jaG9yQ2VsbC5ub2RlQWZ0ZXIuYXR0cnMucm93c3BhbixyPWUrdGhpcy4kaGVhZENlbGwubm9kZUFmdGVyLmF0dHJzLnJvd3NwYW47cmV0dXJuIE1hdGgubWF4KG4scik9PXRoaXMuJGhlYWRDZWxsLm5vZGUoLTEpLmNoaWxkQ291bnR9LGUuY29sU2VsZWN0aW9uPWZ1bmN0aW9uKHQsbil7dm9pZCAwPT09biYmKG49dCk7dmFyIHI9di5nZXQodC5ub2RlKC0xKSksbz10LnN0YXJ0KC0xKSxpPXIuZmluZENlbGwodC5wb3Mtbykscz1yLmZpbmRDZWxsKG4ucG9zLW8pLGE9dC5ub2RlKDApO3JldHVybiBpLnRvcDw9cy50b3A/KGkudG9wPjAmJih0PWEucmVzb2x2ZShvK3IubWFwW2kubGVmdF0pKSxzLmJvdHRvbTxyLmhlaWdodCYmKG49YS5yZXNvbHZlKG8rci5tYXBbci53aWR0aCooci5oZWlnaHQtMSkrcy5yaWdodC0xXSkpKToocy50b3A+MCYmKG49YS5yZXNvbHZlKG8rci5tYXBbcy5sZWZ0XSkpLGkuYm90dG9tPHIuaGVpZ2h0JiYodD1hLnJlc29sdmUobytyLm1hcFtyLndpZHRoKihyLmhlaWdodC0xKStpLnJpZ2h0LTFdKSkpLG5ldyBlKHQsbil9LGUucHJvdG90eXBlLmlzUm93U2VsZWN0aW9uPWZ1bmN0aW9uKCl7dmFyIHQ9di5nZXQodGhpcy4kYW5jaG9yQ2VsbC5ub2RlKC0xKSksZT10aGlzLiRhbmNob3JDZWxsLnN0YXJ0KC0xKSxuPXQuY29sQ291bnQodGhpcy4kYW5jaG9yQ2VsbC5wb3MtZSkscj10LmNvbENvdW50KHRoaXMuJGhlYWRDZWxsLnBvcy1lKTtpZihNYXRoLm1pbihuLHIpPjApcmV0dXJuITE7dmFyIG89bit0aGlzLiRhbmNob3JDZWxsLm5vZGVBZnRlci5hdHRycy5jb2xzcGFuLGk9cit0aGlzLiRoZWFkQ2VsbC5ub2RlQWZ0ZXIuYXR0cnMuY29sc3BhbjtyZXR1cm4gTWF0aC5tYXgobyxpKT09dC53aWR0aH0sZS5wcm90b3R5cGUuZXE9ZnVuY3Rpb24odCl7cmV0dXJuIHQgaW5zdGFuY2VvZiBlJiZ0LiRhbmNob3JDZWxsLnBvcz09dGhpcy4kYW5jaG9yQ2VsbC5wb3MmJnQuJGhlYWRDZWxsLnBvcz09dGhpcy4kaGVhZENlbGwucG9zfSxlLnJvd1NlbGVjdGlvbj1mdW5jdGlvbih0LG4pe3ZvaWQgMD09PW4mJihuPXQpO3ZhciByPXYuZ2V0KHQubm9kZSgtMSkpLG89dC5zdGFydCgtMSksaT1yLmZpbmRDZWxsKHQucG9zLW8pLHM9ci5maW5kQ2VsbChuLnBvcy1vKSxhPXQubm9kZSgwKTtyZXR1cm4gaS5sZWZ0PD1zLmxlZnQ/KGkubGVmdD4wJiYodD1hLnJlc29sdmUobytyLm1hcFtpLnRvcCpyLndpZHRoXSkpLHMucmlnaHQ8ci53aWR0aCYmKG49YS5yZXNvbHZlKG8rci5tYXBbci53aWR0aCoocy50b3ArMSktMV0pKSk6KHMubGVmdD4wJiYobj1hLnJlc29sdmUobytyLm1hcFtzLnRvcCpyLndpZHRoXSkpLGkucmlnaHQ8ci53aWR0aCYmKHQ9YS5yZXNvbHZlKG8rci5tYXBbci53aWR0aCooaS50b3ArMSktMV0pKSksbmV3IGUodCxuKX0sZS5wcm90b3R5cGUudG9KU09OPWZ1bmN0aW9uKCl7cmV0dXJue3R5cGU6ImNlbGwiLGFuY2hvcjp0aGlzLiRhbmNob3JDZWxsLnBvcyxoZWFkOnRoaXMuJGhlYWRDZWxsLnBvc319LGUuZnJvbUpTT049ZnVuY3Rpb24odCxuKXtyZXR1cm4gbmV3IGUodC5yZXNvbHZlKG4uYW5jaG9yKSx0LnJlc29sdmUobi5oZWFkKSl9LGUuY3JlYXRlPWZ1bmN0aW9uKHQsbixyKXtyZXR1cm4gdm9pZCAwPT09ciYmKHI9biksbmV3IGUodC5yZXNvbHZlKG4pLHQucmVzb2x2ZShyKSl9LGUucHJvdG90eXBlLmdldEJvb2ttYXJrPWZ1bmN0aW9uKCl7cmV0dXJuIG5ldyBCKHRoaXMuJGFuY2hvckNlbGwucG9zLHRoaXMuJGhlYWRDZWxsLnBvcyl9LGV9KGlbIlNlbGVjdGlvbiJdKTtJLnByb3RvdHlwZS52aXNpYmxlPSExLGlbIlNlbGVjdGlvbiJdLmpzb25JRCgiY2VsbCIsSSk7dmFyIEI9ZnVuY3Rpb24odCxlKXt0aGlzLmFuY2hvcj10LHRoaXMuaGVhZD1lfTtmdW5jdGlvbiBfKHQpe2lmKCEodC5zZWxlY3Rpb24gaW5zdGFuY2VvZiBJKSlyZXR1cm4gbnVsbDt2YXIgZT1bXTtyZXR1cm4gdC5zZWxlY3Rpb24uZm9yRWFjaENlbGwoKGZ1bmN0aW9uKHQsbil7ZS5wdXNoKGNbImEiXS5ub2RlKG4sbit0Lm5vZGVTaXplLHtjbGFzczoic2VsZWN0ZWRDZWxsIn0pKX0pKSxjWyJiIl0uY3JlYXRlKHQuZG9jLGUpfWZ1bmN0aW9uIEYodCl7dmFyIGU9dC4kZnJvbSxuPXQuJHRvO2lmKGUucG9zPT1uLnBvc3x8ZS5wb3M8ZS5wb3MtNilyZXR1cm4hMTtmb3IodmFyIHI9ZS5wb3Msbz1uLnBvcyxpPWUuZGVwdGg7aT49MDtpLS0scisrKWlmKGUuYWZ0ZXIoaSsxKTxlLmVuZChpKSlicmVhaztmb3IodmFyIHM9bi5kZXB0aDtzPj0wO3MtLSxvLS0paWYobi5iZWZvcmUocysxKT5uLnN0YXJ0KHMpKWJyZWFrO3JldHVybiByPT1vJiYvcm93fHRhYmxlLy50ZXN0KGUubm9kZShpKS50eXBlLnNwZWMudGFibGVSb2xlKX1mdW5jdGlvbiBqKHQpe2Zvcih2YXIgZSxuLHI9dC4kZnJvbSxvPXQuJHRvLGk9ci5kZXB0aDtpPjA7aS0tKXt2YXIgcz1yLm5vZGUoaSk7aWYoImNlbGwiPT09cy50eXBlLnNwZWMudGFibGVSb2xlfHwiaGVhZGVyX2NlbGwiPT09cy50eXBlLnNwZWMudGFibGVSb2xlKXtlPXM7YnJlYWt9fWZvcih2YXIgYT1vLmRlcHRoO2E+MDthLS0pe3ZhciBjPW8ubm9kZShhKTtpZigiY2VsbCI9PT1jLnR5cGUuc3BlYy50YWJsZVJvbGV8fCJoZWFkZXJfY2VsbCI9PT1jLnR5cGUuc3BlYy50YWJsZVJvbGUpe249YzticmVha319cmV0dXJuIGUhPT1uJiYwPT09by5wYXJlbnRPZmZzZXR9ZnVuY3Rpb24gJCh0LGUsbil7dmFyIHIsbyxzPShlfHx0KS5zZWxlY3Rpb24sYT0oZXx8dCkuZG9jO2lmKHMgaW5zdGFuY2VvZiBpWyJOb2RlU2VsZWN0aW9uIl0mJihvPXMubm9kZS50eXBlLnNwZWMudGFibGVSb2xlKSl7aWYoImNlbGwiPT1vfHwiaGVhZGVyX2NlbGwiPT1vKXI9SS5jcmVhdGUoYSxzLmZyb20pO2Vsc2UgaWYoInJvdyI9PW8pe3ZhciBjPWEucmVzb2x2ZShzLmZyb20rMSk7cj1JLnJvd1NlbGVjdGlvbihjLGMpfWVsc2UgaWYoIW4pe3ZhciB1PXYuZ2V0KHMubm9kZSksbD1zLmZyb20rMSxoPWwrdS5tYXBbdS53aWR0aCp1LmhlaWdodC0xXTtyPUkuY3JlYXRlKGEsbCsxLGgpfX1lbHNlIHMgaW5zdGFuY2VvZiBpWyJUZXh0U2VsZWN0aW9uIl0mJkYocyk/cj1pWyJUZXh0U2VsZWN0aW9uIl0uY3JlYXRlKGEscy5mcm9tKTpzIGluc3RhbmNlb2YgaVsiVGV4dFNlbGVjdGlvbiJdJiZqKHMpJiYocj1pWyJUZXh0U2VsZWN0aW9uIl0uY3JlYXRlKGEscy4kZnJvbS5zdGFydCgpLHMuJGZyb20uZW5kKCkpKTtyZXR1cm4gciYmKGV8fChlPXQudHIpKS5zZXRTZWxlY3Rpb24ociksZX1mdW5jdGlvbiBWKHQsZSl7dmFyIG49dC5nZXRBdHRyaWJ1dGUoImRhdGEtY29sd2lkdGgiKSxyPW4mJi9eXGQrKCxcZCspKiQvLnRlc3Qobik/bi5zcGxpdCgiLCIpLm1hcCgoZnVuY3Rpb24odCl7cmV0dXJuIE51bWJlcih0KX0pKTpudWxsLG89TnVtYmVyKHQuZ2V0QXR0cmlidXRlKCJjb2xzcGFuIil8fDEpLGk9e2NvbHNwYW46byxyb3dzcGFuOk51bWJlcih0LmdldEF0dHJpYnV0ZSgicm93c3BhbiIpfHwxKSxjb2x3aWR0aDpyJiZyLmxlbmd0aD09bz9yOm51bGx9O2Zvcih2YXIgcyBpbiBlKXt2YXIgYT1lW3NdLmdldEZyb21ET00sYz1hJiZhKHQpO251bGwhPWMmJihpW3NdPWMpfXJldHVybiBpfWZ1bmN0aW9uIEwodCxlKXt2YXIgbj17fTtmb3IodmFyIHIgaW4gMSE9dC5hdHRycy5jb2xzcGFuJiYobi5jb2xzcGFuPXQuYXR0cnMuY29sc3BhbiksMSE9dC5hdHRycy5yb3dzcGFuJiYobi5yb3dzcGFuPXQuYXR0cnMucm93c3BhbiksdC5hdHRycy5jb2x3aWR0aCYmKG5bImRhdGEtY29sd2lkdGgiXT10LmF0dHJzLmNvbHdpZHRoLmpvaW4oIiwiKSksZSl7dmFyIG89ZVtyXS5zZXRET01BdHRyO28mJm8odC5hdHRyc1tyXSxuKX1yZXR1cm4gbn1mdW5jdGlvbiBxKHQpe3ZhciBlPXQuY2VsbEF0dHJpYnV0ZXN8fHt9LG49e2NvbHNwYW46e2RlZmF1bHQ6MX0scm93c3Bhbjp7ZGVmYXVsdDoxfSxjb2x3aWR0aDp7ZGVmYXVsdDpudWxsfX07Zm9yKHZhciByIGluIGUpbltyXT17ZGVmYXVsdDplW3JdLmRlZmF1bHR9O3JldHVybnt0YWJsZTp7Y29udGVudDoidGFibGVfcm93KyIsdGFibGVSb2xlOiJ0YWJsZSIsaXNvbGF0aW5nOiEwLGdyb3VwOnQudGFibGVHcm91cCxwYXJzZURPTTpbe3RhZzoidGFibGUifV0sdG9ET006ZnVuY3Rpb24oKXtyZXR1cm5bInRhYmxlIixbInRib2R5IiwwXV19fSx0YWJsZV9yb3c6e2NvbnRlbnQ6Iih0YWJsZV9jZWxsIHwgdGFibGVfaGVhZGVyKSoiLHRhYmxlUm9sZToicm93IixwYXJzZURPTTpbe3RhZzoidHIifV0sdG9ET006ZnVuY3Rpb24oKXtyZXR1cm5bInRyIiwwXX19LHRhYmxlX2NlbGw6e2NvbnRlbnQ6dC5jZWxsQ29udGVudCxhdHRyczpuLHRhYmxlUm9sZToiY2VsbCIsaXNvbGF0aW5nOiEwLHBhcnNlRE9NOlt7dGFnOiJ0ZCIsZ2V0QXR0cnM6ZnVuY3Rpb24odCl7cmV0dXJuIFYodCxlKX19XSx0b0RPTTpmdW5jdGlvbih0KXtyZXR1cm5bInRkIixMKHQsZSksMF19fSx0YWJsZV9oZWFkZXI6e2NvbnRlbnQ6dC5jZWxsQ29udGVudCxhdHRyczpuLHRhYmxlUm9sZToiaGVhZGVyX2NlbGwiLGlzb2xhdGluZzohMCxwYXJzZURPTTpbe3RhZzoidGgiLGdldEF0dHJzOmZ1bmN0aW9uKHQpe3JldHVybiBWKHQsZSl9fV0sdG9ET006ZnVuY3Rpb24odCl7cmV0dXJuWyJ0aCIsTCh0LGUpLDBdfX19fWZ1bmN0aW9uIEoodCl7dmFyIGU9dC5jYWNoZWQudGFibGVOb2RlVHlwZXM7aWYoIWUpZm9yKHZhciBuIGluIGU9dC5jYWNoZWQudGFibGVOb2RlVHlwZXM9e30sdC5ub2Rlcyl7dmFyIHI9dC5ub2Rlc1tuXSxvPXIuc3BlYy50YWJsZVJvbGU7byYmKGVbb109cil9cmV0dXJuIGV9ZnVuY3Rpb24gVyh0KXtpZighdC5zaXplKXJldHVybiBudWxsO3ZhciBlPXQuY29udGVudCxuPXQub3BlblN0YXJ0LHI9dC5vcGVuRW5kO3doaWxlKDE9PWUuY2hpbGRDb3VudCYmKG4+MCYmcj4wfHwidGFibGUiPT1lLmZpcnN0Q2hpbGQudHlwZS5zcGVjLnRhYmxlUm9sZSkpbi0tLHItLSxlPWUuZmlyc3RDaGlsZC5jb250ZW50O3ZhciBvPWUuZmlyc3RDaGlsZCxpPW8udHlwZS5zcGVjLnRhYmxlUm9sZSxhPW8udHlwZS5zY2hlbWEsYz1bXTtpZigicm93Ij09aSlmb3IodmFyIHU9MDt1PGUuY2hpbGRDb3VudDt1Kyspe3ZhciBsPWUuY2hpbGQodSkuY29udGVudCxoPXU/MDpNYXRoLm1heCgwLG4tMSksZj11PGUuY2hpbGRDb3VudC0xPzA6TWF0aC5tYXgoMCxyLTEpOyhofHxmKSYmKGw9SyhKKGEpLnJvdyxuZXcgc1siaSJdKGwsaCxmKSkuY29udGVudCksYy5wdXNoKGwpfWVsc2V7aWYoImNlbGwiIT1pJiYiaGVhZGVyX2NlbGwiIT1pKXJldHVybiBudWxsO2MucHVzaChufHxyP0soSihhKS5yb3csbmV3IHNbImkiXShlLG4scikpLmNvbnRlbnQ6ZSl9cmV0dXJuIEgoYSxjKX1mdW5jdGlvbiBIKHQsZSl7Zm9yKHZhciBuPVtdLHI9MDtyPGUubGVuZ3RoO3IrKylmb3IodmFyIG89ZVtyXSxpPW8uY2hpbGRDb3VudC0xO2k+PTA7aS0tKWZvcih2YXIgYT1vLmNoaWxkKGkpLmF0dHJzLGM9YS5yb3dzcGFuLHU9YS5jb2xzcGFuLGw9cjtsPHIrYztsKyspbltsXT0obltsXXx8MCkrdTtmb3IodmFyIGg9MCxmPTA7ZjxuLmxlbmd0aDtmKyspaD1NYXRoLm1heChoLG5bZl0pO2Zvcih2YXIgcD0wO3A8bi5sZW5ndGg7cCsrKWlmKHA+PWUubGVuZ3RoJiZlLnB1c2goc1siYyJdLmVtcHR5KSxuW3BdPGgpe2Zvcih2YXIgZD1KKHQpLmNlbGwuY3JlYXRlQW5kRmlsbCgpLHY9W10sbT1uW3BdO208aDttKyspdi5wdXNoKGQpO2VbcF09ZVtwXS5hcHBlbmQoc1siYyJdLmZyb20odikpfXJldHVybntoZWlnaHQ6ZS5sZW5ndGgsd2lkdGg6aCxyb3dzOmV9fWZ1bmN0aW9uIEsodCxlKXt2YXIgbj10LmNyZWF0ZUFuZEZpbGwoKSxyPW5ldyB1WyJlIl0obikucmVwbGFjZSgwLG4uY29udGVudC5zaXplLGUpO3JldHVybiByLmRvY31mdW5jdGlvbiBVKHQsZSxuKXt2YXIgcj10LndpZHRoLG89dC5oZWlnaHQsaT10LnJvd3M7aWYociE9ZSl7Zm9yKHZhciBhPVtdLGM9W10sdT0wO3U8aS5sZW5ndGg7dSsrKXtmb3IodmFyIGw9aVt1XSxoPVtdLGY9YVt1XXx8MCxwPTA7ZjxlO3ArKyl7dmFyIGQ9bC5jaGlsZChwJWwuY2hpbGRDb3VudCk7ZitkLmF0dHJzLmNvbHNwYW4+ZSYmKGQ9ZC50eXBlLmNyZWF0ZSh6KGQuYXR0cnMsZC5hdHRycy5jb2xzcGFuLGYrZC5hdHRycy5jb2xzcGFuLWUpLGQuY29udGVudCkpLGgucHVzaChkKSxmKz1kLmF0dHJzLmNvbHNwYW47Zm9yKHZhciB2PTE7djxkLmF0dHJzLnJvd3NwYW47disrKWFbdSt2XT0oYVt1K3ZdfHwwKStkLmF0dHJzLmNvbHNwYW59Yy5wdXNoKHNbImMiXS5mcm9tKGgpKX1pPWMscj1lfWlmKG8hPW4pe2Zvcih2YXIgbT1bXSxnPTAseT0wO2c8bjtnKysseSsrKXtmb3IodmFyIHc9W10sYj1pW3klb10seD0wO3g8Yi5jaGlsZENvdW50O3grKyl7dmFyIGs9Yi5jaGlsZCh4KTtnK2suYXR0cnMucm93c3Bhbj5uJiYoaz1rLnR5cGUuY3JlYXRlKFIoay5hdHRycywicm93c3BhbiIsbi1rLmF0dHJzLnJvd3NwYW4pLGsuY29udGVudCkpLHcucHVzaChrKX1tLnB1c2goc1siYyJdLmZyb20odykpfWk9bSxvPW59cmV0dXJue3dpZHRoOnIsaGVpZ2h0Om8scm93czppfX1mdW5jdGlvbiBHKHQsZSxuLHIsbyxpLGEpe3ZhciBjLHUsbD10LmRvYy50eXBlLnNjaGVtYSxoPUoobCk7aWYobz5lLndpZHRoKWZvcih2YXIgZj0wLHA9MDtmPGUuaGVpZ2h0O2YrKyl7dmFyIGQ9bi5jaGlsZChmKTtwKz1kLm5vZGVTaXplO3ZhciB2PVtdLG09dm9pZCAwO209bnVsbD09ZC5sYXN0Q2hpbGR8fGQubGFzdENoaWxkLnR5cGU9PWguY2VsbD9jfHwoYz1oLmNlbGwuY3JlYXRlQW5kRmlsbCgpKTp1fHwodT1oLmhlYWRlcl9jZWxsLmNyZWF0ZUFuZEZpbGwoKSk7Zm9yKHZhciBnPWUud2lkdGg7ZzxvO2crKyl2LnB1c2gobSk7dC5pbnNlcnQodC5tYXBwaW5nLnNsaWNlKGEpLm1hcChwLTErciksdil9aWYoaT5lLmhlaWdodCl7Zm9yKHZhciB5PVtdLHc9MCxiPShlLmhlaWdodC0xKSplLndpZHRoO3c8TWF0aC5tYXgoZS53aWR0aCxvKTt3Kyspe3ZhciB4PSEodz49ZS53aWR0aCkmJm4ubm9kZUF0KGUubWFwW2Ird10pLnR5cGU9PWguaGVhZGVyX2NlbGw7eS5wdXNoKHg/dXx8KHU9aC5oZWFkZXJfY2VsbC5jcmVhdGVBbmRGaWxsKCkpOmN8fChjPWguY2VsbC5jcmVhdGVBbmRGaWxsKCkpKX1mb3IodmFyIGs9aC5yb3cuY3JlYXRlKG51bGwsc1siYyJdLmZyb20oeSkpLFM9W10sQz1lLmhlaWdodDtDPGk7QysrKVMucHVzaChrKTt0Lmluc2VydCh0Lm1hcHBpbmcuc2xpY2UoYSkubWFwKHIrbi5ub2RlU2l6ZS0yKSxTKX1yZXR1cm4hKCFjJiYhdSl9ZnVuY3Rpb24gWCh0LGUsbixyLG8saSxzLGEpe2lmKDA9PXN8fHM9PWUuaGVpZ2h0KXJldHVybiExO2Zvcih2YXIgYz0hMSx1PW87dTxpO3UrKyl7dmFyIGw9cyplLndpZHRoK3UsaD1lLm1hcFtsXTtpZihlLm1hcFtsLWUud2lkdGhdPT1oKXtjPSEwO3ZhciBmPW4ubm9kZUF0KGgpLHA9ZS5maW5kQ2VsbChoKSxkPXAudG9wLHY9cC5sZWZ0O3Quc2V0Tm9kZU1hcmt1cCh0Lm1hcHBpbmcuc2xpY2UoYSkubWFwKGgrciksbnVsbCxSKGYuYXR0cnMsInJvd3NwYW4iLHMtZCkpLHQuaW5zZXJ0KHQubWFwcGluZy5zbGljZShhKS5tYXAoZS5wb3NpdGlvbkF0KHMsdixuKSksZi50eXBlLmNyZWF0ZUFuZEZpbGwoUihmLmF0dHJzLCJyb3dzcGFuIixkK2YuYXR0cnMucm93c3Bhbi1zKSkpLHUrPWYuYXR0cnMuY29sc3Bhbi0xfX1yZXR1cm4gY31mdW5jdGlvbiBZKHQsZSxuLHIsbyxpLHMsYSl7aWYoMD09c3x8cz09ZS53aWR0aClyZXR1cm4hMTtmb3IodmFyIGM9ITEsdT1vO3U8aTt1Kyspe3ZhciBsPXUqZS53aWR0aCtzLGg9ZS5tYXBbbF07aWYoZS5tYXBbbC0xXT09aCl7Yz0hMDt2YXIgZj1uLm5vZGVBdChoKSxwPWUuY29sQ291bnQoaCksZD10Lm1hcHBpbmcuc2xpY2UoYSkubWFwKGgrcik7dC5zZXROb2RlTWFya3VwKGQsbnVsbCx6KGYuYXR0cnMscy1wLGYuYXR0cnMuY29sc3Bhbi0ocy1wKSkpLHQuaW5zZXJ0KGQrZi5ub2RlU2l6ZSxmLnR5cGUuY3JlYXRlQW5kRmlsbCh6KGYuYXR0cnMsMCxzLXApKSksdSs9Zi5hdHRycy5yb3dzcGFuLTF9fXJldHVybiBjfWZ1bmN0aW9uIFoodCxlLG4scixvKXt2YXIgaT1uP3QuZG9jLm5vZGVBdChuLTEpOnQuZG9jLGE9di5nZXQoaSksYz1yLnRvcCx1PXIubGVmdCxsPXUrby53aWR0aCxoPWMrby5oZWlnaHQsZj10LnRyLHA9MDtmdW5jdGlvbiBkKCl7aT1uP2YuZG9jLm5vZGVBdChuLTEpOmYuZG9jLGE9di5nZXQoaSkscD1mLm1hcHBpbmcubWFwcy5sZW5ndGh9RyhmLGEsaSxuLGwsaCxwKSYmZCgpLFgoZixhLGksbix1LGwsYyxwKSYmZCgpLFgoZixhLGksbix1LGwsaCxwKSYmZCgpLFkoZixhLGksbixjLGgsdSxwKSYmZCgpLFkoZixhLGksbixjLGgsbCxwKSYmZCgpO2Zvcih2YXIgbT1jO208aDttKyspe3ZhciBnPWEucG9zaXRpb25BdChtLHUsaSkseT1hLnBvc2l0aW9uQXQobSxsLGkpO2YucmVwbGFjZShmLm1hcHBpbmcuc2xpY2UocCkubWFwKGcrbiksZi5tYXBwaW5nLnNsaWNlKHApLm1hcCh5K24pLG5ldyBzWyJpIl0oby5yb3dzW20tY10sMCwwKSl9ZCgpLGYuc2V0U2VsZWN0aW9uKG5ldyBJKGYuZG9jLnJlc29sdmUobithLnBvc2l0aW9uQXQoYyx1LGkpKSxmLmRvYy5yZXNvbHZlKG4rYS5wb3NpdGlvbkF0KGgtMSxsLTEsaSkpKSksZShmKX1CLnByb3RvdHlwZS5tYXA9ZnVuY3Rpb24odCl7cmV0dXJuIG5ldyBCKHQubWFwKHRoaXMuYW5jaG9yKSx0Lm1hcCh0aGlzLmhlYWQpKX0sQi5wcm90b3R5cGUucmVzb2x2ZT1mdW5jdGlvbih0KXt2YXIgZT10LnJlc29sdmUodGhpcy5hbmNob3IpLG49dC5yZXNvbHZlKHRoaXMuaGVhZCk7cmV0dXJuInJvdyI9PWUucGFyZW50LnR5cGUuc3BlYy50YWJsZVJvbGUmJiJyb3ciPT1uLnBhcmVudC50eXBlLnNwZWMudGFibGVSb2xlJiZlLmluZGV4KCk8ZS5wYXJlbnQuY2hpbGRDb3VudCYmbi5pbmRleCgpPG4ucGFyZW50LmNoaWxkQ291bnQmJlQoZSxuKT9uZXcgSShlLG4pOmlbIlNlbGVjdGlvbiJdLm5lYXIobiwxKX07dmFyIFE9T2JqZWN0KGFbImEiXSkoe0Fycm93TGVmdDpldCgiaG9yaXoiLC0xKSxBcnJvd1JpZ2h0OmV0KCJob3JpeiIsMSksQXJyb3dVcDpldCgidmVydCIsLTEpLEFycm93RG93bjpldCgidmVydCIsMSksIlNoaWZ0LUFycm93TGVmdCI6bnQoImhvcml6IiwtMSksIlNoaWZ0LUFycm93UmlnaHQiOm50KCJob3JpeiIsMSksIlNoaWZ0LUFycm93VXAiOm50KCJ2ZXJ0IiwtMSksIlNoaWZ0LUFycm93RG93biI6bnQoInZlcnQiLDEpLEJhY2tzcGFjZTpydCwiTW9kLUJhY2tzcGFjZSI6cnQsRGVsZXRlOnJ0LCJNb2QtRGVsZXRlIjpydH0pO2Z1bmN0aW9uIHR0KHQsZSxuKXtyZXR1cm4hbi5lcSh0LnNlbGVjdGlvbikmJihlJiZlKHQudHIuc2V0U2VsZWN0aW9uKG4pLnNjcm9sbEludG9WaWV3KCkpLCEwKX1mdW5jdGlvbiBldCh0LGUpe3JldHVybiBmdW5jdGlvbihuLHIsbyl7dmFyIHM9bi5zZWxlY3Rpb247aWYocyBpbnN0YW5jZW9mIEkpcmV0dXJuIHR0KG4scixpWyJTZWxlY3Rpb24iXS5uZWFyKHMuJGhlYWRDZWxsLGUpKTtpZigiaG9yaXoiIT10JiYhcy5lbXB0eSlyZXR1cm4hMTt2YXIgYT1hdChvLHQsZSk7aWYobnVsbD09YSlyZXR1cm4hMTtpZigiaG9yaXoiPT10KXJldHVybiB0dChuLHIsaVsiU2VsZWN0aW9uIl0ubmVhcihuLmRvYy5yZXNvbHZlKHMuaGVhZCtlKSxlKSk7dmFyIGMsdT1uLmRvYy5yZXNvbHZlKGEpLGw9RCh1LHQsZSk7cmV0dXJuIGM9bD9pWyJTZWxlY3Rpb24iXS5uZWFyKGwsMSk6ZTwwP2lbIlNlbGVjdGlvbiJdLm5lYXIobi5kb2MucmVzb2x2ZSh1LmJlZm9yZSgtMSkpLC0xKTppWyJTZWxlY3Rpb24iXS5uZWFyKG4uZG9jLnJlc29sdmUodS5hZnRlcigtMSkpLDEpLHR0KG4scixjKX19ZnVuY3Rpb24gbnQodCxlKXtyZXR1cm4gZnVuY3Rpb24obixyLG8pe3ZhciBpPW4uc2VsZWN0aW9uO2lmKCEoaSBpbnN0YW5jZW9mIEkpKXt2YXIgcz1hdChvLHQsZSk7aWYobnVsbD09cylyZXR1cm4hMTtpPW5ldyBJKG4uZG9jLnJlc29sdmUocykpfXZhciBhPUQoaS4kaGVhZENlbGwsdCxlKTtyZXR1cm4hIWEmJnR0KG4scixuZXcgSShpLiRhbmNob3JDZWxsLGEpKX19ZnVuY3Rpb24gcnQodCxlKXt2YXIgbj10LnNlbGVjdGlvbjtpZighKG4gaW5zdGFuY2VvZiBJKSlyZXR1cm4hMTtpZihlKXt2YXIgcj10LnRyLG89Sih0LnNjaGVtYSkuY2VsbC5jcmVhdGVBbmRGaWxsKCkuY29udGVudDtuLmZvckVhY2hDZWxsKChmdW5jdGlvbih0LGUpe3QuY29udGVudC5lcShvKXx8ci5yZXBsYWNlKHIubWFwcGluZy5tYXAoZSsxKSxyLm1hcHBpbmcubWFwKGUrdC5ub2RlU2l6ZS0xKSxuZXcgc1siaSJdKG8sMCwwKSl9KSksci5kb2NDaGFuZ2VkJiZlKHIpfXJldHVybiEwfWZ1bmN0aW9uIG90KHQsZSl7dmFyIG49dC5zdGF0ZS5kb2Mscj14KG4ucmVzb2x2ZShlKSk7cmV0dXJuISFyJiYodC5kaXNwYXRjaCh0LnN0YXRlLnRyLnNldFNlbGVjdGlvbihuZXcgSShyKSkpLCEwKX1mdW5jdGlvbiBpdCh0LGUsbil7aWYoIVModC5zdGF0ZSkpcmV0dXJuITE7dmFyIHI9VyhuKSxvPXQuc3RhdGUuc2VsZWN0aW9uO2lmKG8gaW5zdGFuY2VvZiBJKXtyfHwocj17d2lkdGg6MSxoZWlnaHQ6MSxyb3dzOltzWyJjIl0uZnJvbShLKEoodC5zdGF0ZS5zY2hlbWEpLmNlbGwsbikpXX0pO3ZhciBpPW8uJGFuY2hvckNlbGwubm9kZSgtMSksYT1vLiRhbmNob3JDZWxsLnN0YXJ0KC0xKSxjPXYuZ2V0KGkpLnJlY3RCZXR3ZWVuKG8uJGFuY2hvckNlbGwucG9zLWEsby4kaGVhZENlbGwucG9zLWEpO3JldHVybiByPVUocixjLnJpZ2h0LWMubGVmdCxjLmJvdHRvbS1jLnRvcCksWih0LnN0YXRlLHQuZGlzcGF0Y2gsYSxjLHIpLCEwfWlmKHIpe3ZhciB1PUModC5zdGF0ZSksbD11LnN0YXJ0KC0xKTtyZXR1cm4gWih0LnN0YXRlLHQuZGlzcGF0Y2gsbCx2LmdldCh1Lm5vZGUoLTEpKS5maW5kQ2VsbCh1LnBvcy1sKSxyKSwhMH1yZXR1cm4hMX1mdW5jdGlvbiBzdCh0LGUpe2lmKCFlLmN0cmxLZXkmJiFlLm1ldGFLZXkpe3ZhciBuLHI9Y3QodCxlLnRhcmdldCk7aWYoZS5zaGlmdEtleSYmdC5zdGF0ZS5zZWxlY3Rpb24gaW5zdGFuY2VvZiBJKW8odC5zdGF0ZS5zZWxlY3Rpb24uJGFuY2hvckNlbGwsZSksZS5wcmV2ZW50RGVmYXVsdCgpO2Vsc2UgaWYoZS5zaGlmdEtleSYmciYmbnVsbCE9KG49eCh0LnN0YXRlLnNlbGVjdGlvbi4kYW5jaG9yKSkmJnV0KHQsZSkucG9zIT1uLnBvcylvKG4sZSksZS5wcmV2ZW50RGVmYXVsdCgpO2Vsc2UgaWYoIXIpcmV0dXJuO3Qucm9vdC5hZGRFdmVudExpc3RlbmVyKCJtb3VzZXVwIixpKSx0LnJvb3QuYWRkRXZlbnRMaXN0ZW5lcigiZHJhZ3N0YXJ0IixpKSx0LnJvb3QuYWRkRXZlbnRMaXN0ZW5lcigibW91c2Vtb3ZlIixzKX1mdW5jdGlvbiBvKGUsbil7dmFyIHI9dXQodCxuKSxvPW51bGw9PWIuZ2V0U3RhdGUodC5zdGF0ZSk7aWYoIXJ8fCFUKGUscikpe2lmKCFvKXJldHVybjtyPWV9dmFyIGk9bmV3IEkoZSxyKTtpZihvfHwhdC5zdGF0ZS5zZWxlY3Rpb24uZXEoaSkpe3ZhciBzPXQuc3RhdGUudHIuc2V0U2VsZWN0aW9uKGkpO28mJnMuc2V0TWV0YShiLGUucG9zKSx0LmRpc3BhdGNoKHMpfX1mdW5jdGlvbiBpKCl7dC5yb290LnJlbW92ZUV2ZW50TGlzdGVuZXIoIm1vdXNldXAiLGkpLHQucm9vdC5yZW1vdmVFdmVudExpc3RlbmVyKCJkcmFnc3RhcnQiLGkpLHQucm9vdC5yZW1vdmVFdmVudExpc3RlbmVyKCJtb3VzZW1vdmUiLHMpLG51bGwhPWIuZ2V0U3RhdGUodC5zdGF0ZSkmJnQuZGlzcGF0Y2godC5zdGF0ZS50ci5zZXRNZXRhKGIsLTEpKX1mdW5jdGlvbiBzKG4pe3ZhciBzLGE9Yi5nZXRTdGF0ZSh0LnN0YXRlKTtpZihudWxsIT1hKXM9dC5zdGF0ZS5kb2MucmVzb2x2ZShhKTtlbHNlIGlmKGN0KHQsbi50YXJnZXQpIT1yJiYocz11dCh0LGUpLCFzKSlyZXR1cm4gaSgpO3MmJm8ocyxuKX19ZnVuY3Rpb24gYXQodCxlLG4pe2lmKCEodC5zdGF0ZS5zZWxlY3Rpb24gaW5zdGFuY2VvZiBpWyJUZXh0U2VsZWN0aW9uIl0pKXJldHVybiBudWxsO2Zvcih2YXIgcj10LnN0YXRlLnNlbGVjdGlvbixvPXIuJGhlYWQscz1vLmRlcHRoLTE7cz49MDtzLS0pe3ZhciBhPW8ubm9kZShzKSxjPW48MD9vLmluZGV4KHMpOm8uaW5kZXhBZnRlcihzKTtpZihjIT0objwwPzA6YS5jaGlsZENvdW50KSlyZXR1cm4gbnVsbDtpZigiY2VsbCI9PWEudHlwZS5zcGVjLnRhYmxlUm9sZXx8ImhlYWRlcl9jZWxsIj09YS50eXBlLnNwZWMudGFibGVSb2xlKXt2YXIgdT1vLmJlZm9yZShzKSxsPSJ2ZXJ0Ij09ZT9uPjA/ImRvd24iOiJ1cCI6bj4wPyJyaWdodCI6ImxlZnQiO3JldHVybiB0LmVuZE9mVGV4dGJsb2NrKGwpP3U6bnVsbH19cmV0dXJuIG51bGx9ZnVuY3Rpb24gY3QodCxlKXtmb3IoO2UmJmUhPXQuZG9tO2U9ZS5wYXJlbnROb2RlKWlmKCJURCI9PWUubm9kZU5hbWV8fCJUSCI9PWUubm9kZU5hbWUpcmV0dXJuIGV9ZnVuY3Rpb24gdXQodCxlKXt2YXIgbj10LnBvc0F0Q29vcmRzKHtsZWZ0OmUuY2xpZW50WCx0b3A6ZS5jbGllbnRZfSk7cmV0dXJuIG4mJm4/eCh0LnN0YXRlLmRvYy5yZXNvbHZlKG4ucG9zKSk6bnVsbH12YXIgbHQ9bmV3IGlbIlBsdWdpbktleSJdKCJmaXgtdGFibGVzIik7ZnVuY3Rpb24gaHQodCxlLG4scil7dmFyIG89dC5jaGlsZENvdW50LGk9ZS5jaGlsZENvdW50O3Q6Zm9yKHZhciBzPTAsYT0wO3M8aTtzKyspe2Zvcih2YXIgYz1lLmNoaWxkKHMpLHU9YSxsPU1hdGgubWluKG8scyszKTt1PGw7dSsrKWlmKHQuY2hpbGQodSk9PWMpe2E9dSsxLG4rPWMubm9kZVNpemU7Y29udGludWUgdH1yKGMsbiksYTxvJiZ0LmNoaWxkKGEpLnNhbWVNYXJrdXAoYyk/aHQodC5jaGlsZChhKSxjLG4rMSxyKTpjLm5vZGVzQmV0d2VlbigwLGMuY29udGVudC5zaXplLHIsbisxKSxuKz1jLm5vZGVTaXplfX1mdW5jdGlvbiBmdCh0LGUpe3ZhciBuLHI9ZnVuY3Rpb24oZSxyKXsidGFibGUiPT1lLnR5cGUuc3BlYy50YWJsZVJvbGUmJihuPXB0KHQsZSxyLG4pKX07cmV0dXJuIGU/ZS5kb2MhPXQuZG9jJiZodChlLmRvYyx0LmRvYywwLHIpOnQuZG9jLmRlc2NlbmRhbnRzKHIpLG59ZnVuY3Rpb24gcHQodCxlLG4scil7dmFyIG89di5nZXQoZSk7aWYoIW8ucHJvYmxlbXMpcmV0dXJuIHI7cnx8KHI9dC50cik7Zm9yKHZhciBpLHMsYT1bXSxjPTA7YzxvLmhlaWdodDtjKyspYS5wdXNoKDApO2Zvcih2YXIgdT0wO3U8by5wcm9ibGVtcy5sZW5ndGg7dSsrKXt2YXIgbD1vLnByb2JsZW1zW3VdO2lmKCJjb2xsaXNpb24iPT1sLnR5cGUpe2Zvcih2YXIgaD1lLm5vZGVBdChsLnBvcyksZj0wO2Y8aC5hdHRycy5yb3dzcGFuO2YrKylhW2wucm93K2ZdKz1sLm47ci5zZXROb2RlTWFya3VwKHIubWFwcGluZy5tYXAobisxK2wucG9zKSxudWxsLHooaC5hdHRycyxoLmF0dHJzLmNvbHNwYW4tbC5uLGwubikpfWVsc2UgaWYoIm1pc3NpbmciPT1sLnR5cGUpYVtsLnJvd10rPWwubjtlbHNlIGlmKCJvdmVybG9uZ19yb3dzcGFuIj09bC50eXBlKXt2YXIgcD1lLm5vZGVBdChsLnBvcyk7ci5zZXROb2RlTWFya3VwKHIubWFwcGluZy5tYXAobisxK2wucG9zKSxudWxsLFIocC5hdHRycywicm93c3BhbiIscC5hdHRycy5yb3dzcGFuLWwubikpfWVsc2UgaWYoImNvbHdpZHRoIG1pc21hdGNoIj09bC50eXBlKXt2YXIgZD1lLm5vZGVBdChsLnBvcyk7ci5zZXROb2RlTWFya3VwKHIubWFwcGluZy5tYXAobisxK2wucG9zKSxudWxsLFIoZC5hdHRycywiY29sd2lkdGgiLGwuY29sd2lkdGgpKX19Zm9yKHZhciBtPTA7bTxhLmxlbmd0aDttKyspYVttXSYmKG51bGw9PWkmJihpPW0pLHM9bSk7Zm9yKHZhciBnPTAseT1uKzE7ZzxvLmhlaWdodDtnKyspe3ZhciB3PWUuY2hpbGQoZyksYj15K3cubm9kZVNpemUseD1hW2ddO2lmKHg+MCl7dmFyIGs9ImNlbGwiO3cuZmlyc3RDaGlsZCYmKGs9dy5maXJzdENoaWxkLnR5cGUuc3BlYy50YWJsZVJvbGUpO2Zvcih2YXIgUz1bXSxDPTA7Qzx4O0MrKylTLnB1c2goSih0LnNjaGVtYSlba10uY3JlYXRlQW5kRmlsbCgpKTt2YXIgTz0wIT1nJiZpIT1nLTF8fHMhPWc/Yi0xOnkrMTtyLmluc2VydChyLm1hcHBpbmcubWFwKE8pLFMpfXk9Yn1yZXR1cm4gci5zZXRNZXRhKGx0LHtmaXhUYWJsZXM6ITB9KX1mdW5jdGlvbiBkdCh0KXt2YXIgZSxuPXQuc2VsZWN0aW9uLHI9Qyh0KSxvPXIubm9kZSgtMSksaT1yLnN0YXJ0KC0xKSxzPXYuZ2V0KG8pO3JldHVybiBlPW4gaW5zdGFuY2VvZiBJP3MucmVjdEJldHdlZW4obi4kYW5jaG9yQ2VsbC5wb3MtaSxuLiRoZWFkQ2VsbC5wb3MtaSk6cy5maW5kQ2VsbChyLnBvcy1pKSxlLnRhYmxlU3RhcnQ9aSxlLm1hcD1zLGUudGFibGU9byxlfWZ1bmN0aW9uIHZ0KHQsZSxuKXtmb3IodmFyIHI9SihlLnR5cGUuc2NoZW1hKS5oZWFkZXJfY2VsbCxvPTA7bzx0LmhlaWdodDtvKyspaWYoZS5ub2RlQXQodC5tYXBbbitvKnQud2lkdGhdKS50eXBlIT1yKXJldHVybiExO3JldHVybiEwfWZ1bmN0aW9uIG10KHQsZSxuKXt2YXIgcj1lLm1hcCxvPWUudGFibGVTdGFydCxpPWUudGFibGUscz1uPjA/LTE6MDt2dChyLGksbitzKSYmKHM9MD09bnx8bj09ci53aWR0aD9udWxsOjApO2Zvcih2YXIgYT0wO2E8ci5oZWlnaHQ7YSsrKXt2YXIgYz1hKnIud2lkdGgrbjtpZihuPjAmJm48ci53aWR0aCYmci5tYXBbYy0xXT09ci5tYXBbY10pe3ZhciB1PXIubWFwW2NdLGw9aS5ub2RlQXQodSk7dC5zZXROb2RlTWFya3VwKHQubWFwcGluZy5tYXAobyt1KSxudWxsLFAobC5hdHRycyxuLXIuY29sQ291bnQodSkpKSxhKz1sLmF0dHJzLnJvd3NwYW4tMX1lbHNle3ZhciBoPW51bGw9PXM/SihpLnR5cGUuc2NoZW1hKS5jZWxsOmkubm9kZUF0KHIubWFwW2Mrc10pLnR5cGUsZj1yLnBvc2l0aW9uQXQoYSxuLGkpO3QuaW5zZXJ0KHQubWFwcGluZy5tYXAobytmKSxoLmNyZWF0ZUFuZEZpbGwoKSl9fXJldHVybiB0fWZ1bmN0aW9uIGd0KHQsZSl7aWYoIVModCkpcmV0dXJuITE7aWYoZSl7dmFyIG49ZHQodCk7ZShtdCh0LnRyLG4sbi5sZWZ0KSl9cmV0dXJuITB9ZnVuY3Rpb24geXQodCxlKXtpZighUyh0KSlyZXR1cm4hMTtpZihlKXt2YXIgbj1kdCh0KTtlKG10KHQudHIsbixuLnJpZ2h0KSl9cmV0dXJuITB9ZnVuY3Rpb24gd3QodCxlLG4pe2Zvcih2YXIgcj1lLm1hcCxvPWUudGFibGUsaT1lLnRhYmxlU3RhcnQscz10Lm1hcHBpbmcubWFwcy5sZW5ndGgsYT0wO2E8ci5oZWlnaHQ7KXt2YXIgYz1hKnIud2lkdGgrbix1PXIubWFwW2NdLGw9by5ub2RlQXQodSk7aWYobj4wJiZyLm1hcFtjLTFdPT11fHxuPHIud2lkdGgtMSYmci5tYXBbYysxXT09dSl0LnNldE5vZGVNYXJrdXAodC5tYXBwaW5nLnNsaWNlKHMpLm1hcChpK3UpLG51bGwseihsLmF0dHJzLG4tci5jb2xDb3VudCh1KSkpO2Vsc2V7dmFyIGg9dC5tYXBwaW5nLnNsaWNlKHMpLm1hcChpK3UpO3QuZGVsZXRlKGgsaCtsLm5vZGVTaXplKX1hKz1sLmF0dHJzLnJvd3NwYW59fWZ1bmN0aW9uIGJ0KHQsZSl7aWYoIVModCkpcmV0dXJuITE7aWYoZSl7dmFyIG49ZHQodCkscj10LnRyO2lmKDA9PW4ubGVmdCYmbi5yaWdodD09bi5tYXAud2lkdGgpcmV0dXJuITE7Zm9yKHZhciBvPW4ucmlnaHQtMTs7by0tKXtpZih3dChyLG4sbyksbz09bi5sZWZ0KWJyZWFrO24udGFibGU9bi50YWJsZVN0YXJ0P3IuZG9jLm5vZGVBdChuLnRhYmxlU3RhcnQtMSk6ci5kb2Msbi5tYXA9di5nZXQobi50YWJsZSl9ZShyKX1yZXR1cm4hMH1mdW5jdGlvbiB4dCh0LGUsbil7Zm9yKHZhciByPUooZS50eXBlLnNjaGVtYSkuaGVhZGVyX2NlbGwsbz0wO288dC53aWR0aDtvKyspaWYoZS5ub2RlQXQodC5tYXBbbytuKnQud2lkdGhdKS50eXBlIT1yKXJldHVybiExO3JldHVybiEwfWZ1bmN0aW9uIGt0KHQsZSxuKXtmb3IodmFyIHI9ZS5tYXAsbz1lLnRhYmxlU3RhcnQsaT1lLnRhYmxlLHM9byxhPTA7YTxuO2ErKylzKz1pLmNoaWxkKGEpLm5vZGVTaXplO3ZhciBjPVtdLHU9bj4wPy0xOjA7eHQocixpLG4rdSkmJih1PTA9PW58fG49PXIuaGVpZ2h0P251bGw6MCk7Zm9yKHZhciBsPTAsaD1yLndpZHRoKm47bDxyLndpZHRoO2wrKyxoKyspaWYobj4wJiZuPHIuaGVpZ2h0JiZyLm1hcFtoXT09ci5tYXBbaC1yLndpZHRoXSl7dmFyIGY9ci5tYXBbaF0scD1pLm5vZGVBdChmKS5hdHRyczt0LnNldE5vZGVNYXJrdXAobytmLG51bGwsUihwLCJyb3dzcGFuIixwLnJvd3NwYW4rMSkpLGwrPXAuY29sc3Bhbi0xfWVsc2V7dmFyIGQ9bnVsbD09dT9KKGkudHlwZS5zY2hlbWEpLmNlbGw6aS5ub2RlQXQoci5tYXBbaCt1KnIud2lkdGhdKS50eXBlO2MucHVzaChkLmNyZWF0ZUFuZEZpbGwoKSl9cmV0dXJuIHQuaW5zZXJ0KHMsSihpLnR5cGUuc2NoZW1hKS5yb3cuY3JlYXRlKG51bGwsYykpLHR9ZnVuY3Rpb24gU3QodCxlKXtpZighUyh0KSlyZXR1cm4hMTtpZihlKXt2YXIgbj1kdCh0KTtlKGt0KHQudHIsbixuLnRvcCkpfXJldHVybiEwfWZ1bmN0aW9uIEN0KHQsZSl7aWYoIVModCkpcmV0dXJuITE7aWYoZSl7dmFyIG49ZHQodCk7ZShrdCh0LnRyLG4sbi5ib3R0b20pKX1yZXR1cm4hMH1mdW5jdGlvbiBPdCh0LGUsbil7Zm9yKHZhciByPWUubWFwLG89ZS50YWJsZSxpPWUudGFibGVTdGFydCxzPTAsYT0wO2E8bjthKyspcys9by5jaGlsZChhKS5ub2RlU2l6ZTt2YXIgYz1zK28uY2hpbGQobikubm9kZVNpemUsdT10Lm1hcHBpbmcubWFwcy5sZW5ndGg7dC5kZWxldGUocytpLGMraSk7Zm9yKHZhciBsPTAsaD1uKnIud2lkdGg7bDxyLndpZHRoO2wrKyxoKyspe3ZhciBmPXIubWFwW2hdO2lmKG4+MCYmZj09ci5tYXBbaC1yLndpZHRoXSl7dmFyIHA9by5ub2RlQXQoZikuYXR0cnM7dC5zZXROb2RlTWFya3VwKHQubWFwcGluZy5zbGljZSh1KS5tYXAoZitpKSxudWxsLFIocCwicm93c3BhbiIscC5yb3dzcGFuLTEpKSxsKz1wLmNvbHNwYW4tMX1lbHNlIGlmKG48ci53aWR0aCYmZj09ci5tYXBbaCtyLndpZHRoXSl7dmFyIGQ9by5ub2RlQXQoZiksdj1kLnR5cGUuY3JlYXRlKFIoZC5hdHRycywicm93c3BhbiIsZC5hdHRycy5yb3dzcGFuLTEpLGQuY29udGVudCksbT1yLnBvc2l0aW9uQXQobisxLGwsbyk7dC5pbnNlcnQodC5tYXBwaW5nLnNsaWNlKHUpLm1hcChpK20pLHYpLGwrPWQuYXR0cnMuY29sc3Bhbi0xfX19ZnVuY3Rpb24gTXQodCxlKXtpZighUyh0KSlyZXR1cm4hMTtpZihlKXt2YXIgbj1kdCh0KSxyPXQudHI7aWYoMD09bi50b3AmJm4uYm90dG9tPT1uLm1hcC5oZWlnaHQpcmV0dXJuITE7Zm9yKHZhciBvPW4uYm90dG9tLTE7O28tLSl7aWYoT3QocixuLG8pLG89PW4udG9wKWJyZWFrO24udGFibGU9bi50YWJsZVN0YXJ0P3IuZG9jLm5vZGVBdChuLnRhYmxlU3RhcnQtMSk6ci5kb2Msbi5tYXA9di5nZXQobi50YWJsZSl9ZShyKX1yZXR1cm4hMH1mdW5jdGlvbiBOdCh0KXt2YXIgZT10LmNvbnRlbnQ7cmV0dXJuIDE9PWUuY2hpbGRDb3VudCYmZS5maXJzdENoaWxkLmlzVGV4dGJsb2NrJiYwPT1lLmZpcnN0Q2hpbGQuY2hpbGRDb3VudH1mdW5jdGlvbiBUdCh0LGUpe2Zvcih2YXIgbj10LndpZHRoLHI9dC5oZWlnaHQsbz10Lm1hcCxpPWUudG9wKm4rZS5sZWZ0LHM9aSxhPShlLmJvdHRvbS0xKSpuK2UubGVmdCxjPWkrKGUucmlnaHQtZS5sZWZ0LTEpLHU9ZS50b3A7dTxlLmJvdHRvbTt1Kyspe2lmKGUubGVmdD4wJiZvW3NdPT1vW3MtMV18fGUucmlnaHQ8biYmb1tjXT09b1tjKzFdKXJldHVybiEwO3MrPW4sYys9bn1mb3IodmFyIGw9ZS5sZWZ0O2w8ZS5yaWdodDtsKyspe2lmKGUudG9wPjAmJm9baV09PW9baS1uXXx8ZS5ib3R0b208ciYmb1thXT09b1thK25dKXJldHVybiEwO2krKyxhKyt9cmV0dXJuITF9ZnVuY3Rpb24gQXQodCxlKXt2YXIgbj10LnNlbGVjdGlvbjtpZighKG4gaW5zdGFuY2VvZiBJKXx8bi4kYW5jaG9yQ2VsbC5wb3M9PW4uJGhlYWRDZWxsLnBvcylyZXR1cm4hMTt2YXIgcj1kdCh0KSxvPXIubWFwO2lmKFR0KG8scikpcmV0dXJuITE7aWYoZSl7Zm9yKHZhciBpLGEsYz10LnRyLHU9e30sbD1zWyJjIl0uZW1wdHksaD1yLnRvcDtoPHIuYm90dG9tO2grKylmb3IodmFyIGY9ci5sZWZ0O2Y8ci5yaWdodDtmKyspe3ZhciBwPW8ubWFwW2gqby53aWR0aCtmXSxkPXIudGFibGUubm9kZUF0KHApO2lmKCF1W3BdKWlmKHVbcF09ITAsbnVsbD09aSlpPXAsYT1kO2Vsc2V7TnQoZCl8fChsPWwuYXBwZW5kKGQuY29udGVudCkpO3ZhciB2PWMubWFwcGluZy5tYXAocCtyLnRhYmxlU3RhcnQpO2MuZGVsZXRlKHYsditkLm5vZGVTaXplKX19aWYoYy5zZXROb2RlTWFya3VwKGkrci50YWJsZVN0YXJ0LG51bGwsUihQKGEuYXR0cnMsYS5hdHRycy5jb2xzcGFuLHIucmlnaHQtci5sZWZ0LWEuYXR0cnMuY29sc3BhbiksInJvd3NwYW4iLHIuYm90dG9tLXIudG9wKSksbC5zaXplKXt2YXIgbT1pKzErYS5jb250ZW50LnNpemUsZz1OdChhKT9pKzE6bTtjLnJlcGxhY2VXaXRoKGcrci50YWJsZVN0YXJ0LG0rci50YWJsZVN0YXJ0LGwpfWMuc2V0U2VsZWN0aW9uKG5ldyBJKGMuZG9jLnJlc29sdmUoaStyLnRhYmxlU3RhcnQpKSksZShjKX1yZXR1cm4hMH1mdW5jdGlvbiBFdCh0LGUpe3ZhciBuPUoodC5zY2hlbWEpO3JldHVybiBEdCgoZnVuY3Rpb24odCl7dmFyIGU9dC5ub2RlO3JldHVybiBuW2UudHlwZS5zcGVjLnRhYmxlUm9sZV19KSkodCxlKX1mdW5jdGlvbiBEdCh0KXtyZXR1cm4gZnVuY3Rpb24oZSxuKXt2YXIgcixvLGk9ZS5zZWxlY3Rpb247aWYoaSBpbnN0YW5jZW9mIEkpe2lmKGkuJGFuY2hvckNlbGwucG9zIT1pLiRoZWFkQ2VsbC5wb3MpcmV0dXJuITE7cj1pLiRhbmNob3JDZWxsLm5vZGVBZnRlcixvPWkuJGFuY2hvckNlbGwucG9zfWVsc2V7aWYocj1rKGkuJGZyb20pLCFyKXJldHVybiExO289eChpLiRmcm9tKS5wb3N9aWYoMT09ci5hdHRycy5jb2xzcGFuJiYxPT1yLmF0dHJzLnJvd3NwYW4pcmV0dXJuITE7aWYobil7dmFyIHM9ci5hdHRycyxhPVtdLGM9cy5jb2x3aWR0aDtzLnJvd3NwYW4+MSYmKHM9UihzLCJyb3dzcGFuIiwxKSkscy5jb2xzcGFuPjEmJihzPVIocywiY29sc3BhbiIsMSkpO2Zvcih2YXIgdSxsPWR0KGUpLGg9ZS50cixmPTA7ZjxsLnJpZ2h0LWwubGVmdDtmKyspYS5wdXNoKGM/UihzLCJjb2x3aWR0aCIsYyYmY1tmXT9bY1tmXV06bnVsbCk6cyk7Zm9yKHZhciBwPWwudG9wO3A8bC5ib3R0b207cCsrKXt2YXIgZD1sLm1hcC5wb3NpdGlvbkF0KHAsbC5sZWZ0LGwudGFibGUpO3A9PWwudG9wJiYoZCs9ci5ub2RlU2l6ZSk7Zm9yKHZhciB2PWwubGVmdCxtPTA7djxsLnJpZ2h0O3YrKyxtKyspdj09bC5sZWZ0JiZwPT1sLnRvcHx8aC5pbnNlcnQodT1oLm1hcHBpbmcubWFwKGQrbC50YWJsZVN0YXJ0LDEpLHQoe25vZGU6cixyb3c6cCxjb2w6dn0pLmNyZWF0ZUFuZEZpbGwoYVttXSkpfWguc2V0Tm9kZU1hcmt1cChvLHQoe25vZGU6cixyb3c6bC50b3AsY29sOmwubGVmdH0pLGFbMF0pLGkgaW5zdGFuY2VvZiBJJiZoLnNldFNlbGVjdGlvbihuZXcgSShoLmRvYy5yZXNvbHZlKGkuJGFuY2hvckNlbGwucG9zKSx1JiZoLmRvYy5yZXNvbHZlKHUpKSksbihoKX1yZXR1cm4hMH19ZnVuY3Rpb24gUnQodCxlKXtyZXR1cm4gZnVuY3Rpb24obixyKXtpZighUyhuKSlyZXR1cm4hMTt2YXIgbz1DKG4pO2lmKG8ubm9kZUFmdGVyLmF0dHJzW3RdPT09ZSlyZXR1cm4hMTtpZihyKXt2YXIgaT1uLnRyO24uc2VsZWN0aW9uIGluc3RhbmNlb2YgST9uLnNlbGVjdGlvbi5mb3JFYWNoQ2VsbCgoZnVuY3Rpb24obixyKXtuLmF0dHJzW3RdIT09ZSYmaS5zZXROb2RlTWFya3VwKHIsbnVsbCxSKG4uYXR0cnMsdCxlKSl9KSk6aS5zZXROb2RlTWFya3VwKG8ucG9zLG51bGwsUihvLm5vZGVBZnRlci5hdHRycyx0LGUpKSxyKGkpfXJldHVybiEwfX1mdW5jdGlvbiB6dCh0KXtyZXR1cm4gZnVuY3Rpb24oZSxuKXtpZighUyhlKSlyZXR1cm4hMTtpZihuKXtmb3IodmFyIHI9SihlLnNjaGVtYSksbz1kdChlKSxpPWUudHIscz1vLm1hcC5jZWxsc0luUmVjdCgiY29sdW1uIj09dD9uZXcgZChvLmxlZnQsMCxvLnJpZ2h0LG8ubWFwLmhlaWdodCk6InJvdyI9PXQ/bmV3IGQoMCxvLnRvcCxvLm1hcC53aWR0aCxvLmJvdHRvbSk6byksYT1zLm1hcCgoZnVuY3Rpb24odCl7cmV0dXJuIG8udGFibGUubm9kZUF0KHQpfSkpLGM9MDtjPHMubGVuZ3RoO2MrKylhW2NdLnR5cGU9PXIuaGVhZGVyX2NlbGwmJmkuc2V0Tm9kZU1hcmt1cChvLnRhYmxlU3RhcnQrc1tjXSxyLmNlbGwsYVtjXS5hdHRycyk7aWYoMD09aS5zdGVwcy5sZW5ndGgpZm9yKHZhciB1PTA7dTxzLmxlbmd0aDt1KyspaS5zZXROb2RlTWFya3VwKG8udGFibGVTdGFydCtzW3VdLHIuaGVhZGVyX2NlbGwsYVt1XS5hdHRycyk7bihpKX1yZXR1cm4hMH19ZnVuY3Rpb24gUHQodCxlLG4pe2Zvcih2YXIgcj1lLm1hcC5jZWxsc0luUmVjdCh7bGVmdDowLHRvcDowLHJpZ2h0OiJyb3ciPT10P2UubWFwLndpZHRoOjEsYm90dG9tOiJjb2x1bW4iPT10P2UubWFwLmhlaWdodDoxfSksbz0wO288ci5sZW5ndGg7bysrKXt2YXIgaT1lLnRhYmxlLm5vZGVBdChyW29dKTtpZihpJiZpLnR5cGUhPT1uLmhlYWRlcl9jZWxsKXJldHVybiExfXJldHVybiEwfWZ1bmN0aW9uIEl0KHQsZSl7cmV0dXJuIGU9ZXx8e3VzZURlcHJlY2F0ZWRMb2dpYzohMX0sZS51c2VEZXByZWNhdGVkTG9naWM/enQodCk6ZnVuY3Rpb24oZSxuKXtpZighUyhlKSlyZXR1cm4hMTtpZihuKXt2YXIgcj1KKGUuc2NoZW1hKSxvPWR0KGUpLGk9ZS50cixzPVB0KCJyb3ciLG8sciksYT1QdCgiY29sdW1uIixvLHIpLGM9ImNvbHVtbiI9PT10P3M6InJvdyI9PT10JiZhLHU9Yz8xOjAsbD0iY29sdW1uIj09dD9uZXcgZCgwLHUsMSxvLm1hcC5oZWlnaHQpOiJyb3ciPT10P25ldyBkKHUsMCxvLm1hcC53aWR0aCwxKTpvLGg9ImNvbHVtbiI9PXQ/YT9yLmNlbGw6ci5oZWFkZXJfY2VsbDoicm93Ij09dD9zP3IuY2VsbDpyLmhlYWRlcl9jZWxsOnIuY2VsbDtvLm1hcC5jZWxsc0luUmVjdChsKS5mb3JFYWNoKChmdW5jdGlvbih0KXt2YXIgZT10K28udGFibGVTdGFydCxuPWkuZG9jLm5vZGVBdChlKTtuJiZpLnNldE5vZGVNYXJrdXAoZSxoLG4uYXR0cnMpfSkpLG4oaSl9cmV0dXJuITB9fXZhciBCdD1JdCgicm93Iix7dXNlRGVwcmVjYXRlZExvZ2ljOiEwfSksX3Q9SXQoImNvbHVtbiIse3VzZURlcHJlY2F0ZWRMb2dpYzohMH0pLEZ0PUl0KCJjZWxsIix7dXNlRGVwcmVjYXRlZExvZ2ljOiEwfSk7ZnVuY3Rpb24ganQodCxlKXtpZihlPDApe3ZhciBuPXQubm9kZUJlZm9yZTtpZihuKXJldHVybiB0LnBvcy1uLm5vZGVTaXplO2Zvcih2YXIgcj10LmluZGV4KC0xKS0xLG89dC5iZWZvcmUoKTtyPj0wO3ItLSl7dmFyIGk9dC5ub2RlKC0xKS5jaGlsZChyKTtpZihpLmNoaWxkQ291bnQpcmV0dXJuIG8tMS1pLmxhc3RDaGlsZC5ub2RlU2l6ZTtvLT1pLm5vZGVTaXplfX1lbHNle2lmKHQuaW5kZXgoKTx0LnBhcmVudC5jaGlsZENvdW50LTEpcmV0dXJuIHQucG9zK3Qubm9kZUFmdGVyLm5vZGVTaXplO2Zvcih2YXIgcz10Lm5vZGUoLTEpLGE9dC5pbmRleEFmdGVyKC0xKSxjPXQuYWZ0ZXIoKTthPHMuY2hpbGRDb3VudDthKyspe3ZhciB1PXMuY2hpbGQoYSk7aWYodS5jaGlsZENvdW50KXJldHVybiBjKzE7Yys9dS5ub2RlU2l6ZX19fWZ1bmN0aW9uICR0KHQpe3JldHVybiBmdW5jdGlvbihlLG4pe2lmKCFTKGUpKXJldHVybiExO3ZhciByPWp0KEMoZSksdCk7aWYobnVsbCE9cil7aWYobil7dmFyIG89ZS5kb2MucmVzb2x2ZShyKTtuKGUudHIuc2V0U2VsZWN0aW9uKGlbIlRleHRTZWxlY3Rpb24iXS5iZXR3ZWVuKG8sTihvKSkpLnNjcm9sbEludG9WaWV3KCkpfXJldHVybiEwfX19ZnVuY3Rpb24gVnQodCxlKXtmb3IodmFyIG49dC5zZWxlY3Rpb24uJGFuY2hvcixyPW4uZGVwdGg7cj4wO3ItLSl7dmFyIG89bi5ub2RlKHIpO2lmKCJ0YWJsZSI9PW8udHlwZS5zcGVjLnRhYmxlUm9sZSlyZXR1cm4gZSYmZSh0LnRyLmRlbGV0ZShuLmJlZm9yZShyKSxuLmFmdGVyKHIpKS5zY3JvbGxJbnRvVmlldygpKSwhMH1yZXR1cm4hMX12YXIgTHQ9ZnVuY3Rpb24odCxlKXt0aGlzLm5vZGU9dCx0aGlzLmNlbGxNaW5XaWR0aD1lLHRoaXMuZG9tPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpLHRoaXMuZG9tLmNsYXNzTmFtZT0idGFibGVXcmFwcGVyIix0aGlzLnRhYmxlPXRoaXMuZG9tLmFwcGVuZENoaWxkKGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoInRhYmxlIikpLHRoaXMuY29sZ3JvdXA9dGhpcy50YWJsZS5hcHBlbmRDaGlsZChkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJjb2xncm91cCIpKSxxdCh0LHRoaXMuY29sZ3JvdXAsdGhpcy50YWJsZSxlKSx0aGlzLmNvbnRlbnRET009dGhpcy50YWJsZS5hcHBlbmRDaGlsZChkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJ0Ym9keSIpKX07ZnVuY3Rpb24gcXQodCxlLG4scixvLGkpe2Zvcih2YXIgcz0wLGE9ITAsYz1lLmZpcnN0Q2hpbGQsdT10LmZpcnN0Q2hpbGQsbD0wLGg9MDtsPHUuY2hpbGRDb3VudDtsKyspZm9yKHZhciBmPXUuY2hpbGQobCkuYXR0cnMscD1mLmNvbHNwYW4sZD1mLmNvbHdpZHRoLHY9MDt2PHA7disrLGgrKyl7dmFyIG09bz09aD9pOmQmJmRbdl0sZz1tP20rInB4IjoiIjtzKz1tfHxyLG18fChhPSExKSxjPyhjLnN0eWxlLndpZHRoIT1nJiYoYy5zdHlsZS53aWR0aD1nKSxjPWMubmV4dFNpYmxpbmcpOmUuYXBwZW5kQ2hpbGQoZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiY29sIikpLnN0eWxlLndpZHRoPWd9d2hpbGUoYyl7dmFyIHk9Yy5uZXh0U2libGluZztjLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoYyksYz15fWE/KG4uc3R5bGUud2lkdGg9cysicHgiLG4uc3R5bGUubWluV2lkdGg9IiIpOihuLnN0eWxlLndpZHRoPSIiLG4uc3R5bGUubWluV2lkdGg9cysicHgiKX1MdC5wcm90b3R5cGUudXBkYXRlPWZ1bmN0aW9uKHQpe3JldHVybiB0LnR5cGU9PXRoaXMubm9kZS50eXBlJiYodGhpcy5ub2RlPXQscXQodCx0aGlzLmNvbGdyb3VwLHRoaXMudGFibGUsdGhpcy5jZWxsTWluV2lkdGgpLCEwKX0sTHQucHJvdG90eXBlLmlnbm9yZU11dGF0aW9uPWZ1bmN0aW9uKHQpe3JldHVybiJhdHRyaWJ1dGVzIj09dC50eXBlJiYodC50YXJnZXQ9PXRoaXMudGFibGV8fHRoaXMuY29sZ3JvdXAuY29udGFpbnModC50YXJnZXQpKX07dmFyIEp0PW5ldyBpWyJQbHVnaW5LZXkiXSgidGFibGVDb2x1bW5SZXNpemluZyIpO2Z1bmN0aW9uIFd0KHQpe3ZvaWQgMD09PXQmJih0PXt9KTt2YXIgZT10LmhhbmRsZVdpZHRoO3ZvaWQgMD09PWUmJihlPTUpO3ZhciBuPXQuY2VsbE1pbldpZHRoO3ZvaWQgMD09PW4mJihuPTI1KTt2YXIgcj10LlZpZXc7dm9pZCAwPT09ciYmKHI9THQpO3ZhciBvPXQubGFzdENvbHVtblJlc2l6YWJsZTt2b2lkIDA9PT1vJiYobz0hMCk7dmFyIHM9bmV3IGlbIlBsdWdpbiJdKHtrZXk6SnQsc3RhdGU6e2luaXQ6ZnVuY3Rpb24odCxlKXtyZXR1cm4gdGhpcy5zcGVjLnByb3BzLm5vZGVWaWV3c1tKKGUuc2NoZW1hKS50YWJsZS5uYW1lXT1mdW5jdGlvbih0LGUpe3JldHVybiBuZXcgcih0LG4sZSl9LG5ldyBIdCgtMSwhMSl9LGFwcGx5OmZ1bmN0aW9uKHQsZSl7cmV0dXJuIGUuYXBwbHkodCl9fSxwcm9wczp7YXR0cmlidXRlczpmdW5jdGlvbih0KXt2YXIgZT1KdC5nZXRTdGF0ZSh0KTtyZXR1cm4gZS5hY3RpdmVIYW5kbGU+LTE/e2NsYXNzOiJyZXNpemUtY3Vyc29yIn06bnVsbH0saGFuZGxlRE9NRXZlbnRzOnttb3VzZW1vdmU6ZnVuY3Rpb24odCxyKXtLdCh0LHIsZSxuLG8pfSxtb3VzZWxlYXZlOmZ1bmN0aW9uKHQpe1V0KHQpfSxtb3VzZWRvd246ZnVuY3Rpb24odCxlKXtHdCh0LGUsbil9fSxkZWNvcmF0aW9uczpmdW5jdGlvbih0KXt2YXIgZT1KdC5nZXRTdGF0ZSh0KTtpZihlLmFjdGl2ZUhhbmRsZT4tMSlyZXR1cm4gb2UodCxlLmFjdGl2ZUhhbmRsZSl9LG5vZGVWaWV3czp7fX19KTtyZXR1cm4gc312YXIgSHQ9ZnVuY3Rpb24odCxlKXt0aGlzLmFjdGl2ZUhhbmRsZT10LHRoaXMuZHJhZ2dpbmc9ZX07ZnVuY3Rpb24gS3QodCxlLG4scixvKXt2YXIgaT1KdC5nZXRTdGF0ZSh0LnN0YXRlKTtpZighaS5kcmFnZ2luZyl7dmFyIHM9WXQoZS50YXJnZXQpLGE9LTE7aWYocyl7dmFyIGM9cy5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKSx1PWMubGVmdCxsPWMucmlnaHQ7ZS5jbGllbnRYLXU8PW4/YT1adCh0LGUsImxlZnQiKTpsLWUuY2xpZW50WDw9biYmKGE9WnQodCxlLCJyaWdodCIpKX1pZihhIT1pLmFjdGl2ZUhhbmRsZSl7aWYoIW8mJi0xIT09YSl7dmFyIGg9dC5zdGF0ZS5kb2MucmVzb2x2ZShhKSxmPWgubm9kZSgtMSkscD12LmdldChmKSxkPWguc3RhcnQoLTEpLG09cC5jb2xDb3VudChoLnBvcy1kKStoLm5vZGVBZnRlci5hdHRycy5jb2xzcGFuLTE7aWYobT09cC53aWR0aC0xKXJldHVybn10ZSh0LGEpfX19ZnVuY3Rpb24gVXQodCl7dmFyIGU9SnQuZ2V0U3RhdGUodC5zdGF0ZSk7ZS5hY3RpdmVIYW5kbGU+LTEmJiFlLmRyYWdnaW5nJiZ0ZSh0LC0xKX1mdW5jdGlvbiBHdCh0LGUsbil7dmFyIHI9SnQuZ2V0U3RhdGUodC5zdGF0ZSk7aWYoLTE9PXIuYWN0aXZlSGFuZGxlfHxyLmRyYWdnaW5nKXJldHVybiExO3ZhciBvPXQuc3RhdGUuZG9jLm5vZGVBdChyLmFjdGl2ZUhhbmRsZSksaT1YdCh0LHIuYWN0aXZlSGFuZGxlLG8uYXR0cnMpO2Z1bmN0aW9uIHMoZSl7d2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoIm1vdXNldXAiLHMpLHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCJtb3VzZW1vdmUiLGEpO3ZhciByPUp0LmdldFN0YXRlKHQuc3RhdGUpO3IuZHJhZ2dpbmcmJihlZSh0LHIuYWN0aXZlSGFuZGxlLFF0KHIuZHJhZ2dpbmcsZSxuKSksdC5kaXNwYXRjaCh0LnN0YXRlLnRyLnNldE1ldGEoSnQse3NldERyYWdnaW5nOm51bGx9KSkpfWZ1bmN0aW9uIGEoZSl7aWYoIWUud2hpY2gpcmV0dXJuIHMoZSk7dmFyIHI9SnQuZ2V0U3RhdGUodC5zdGF0ZSksbz1RdChyLmRyYWdnaW5nLGUsbik7bmUodCxyLmFjdGl2ZUhhbmRsZSxvLG4pfXJldHVybiB0LmRpc3BhdGNoKHQuc3RhdGUudHIuc2V0TWV0YShKdCx7c2V0RHJhZ2dpbmc6e3N0YXJ0WDplLmNsaWVudFgsc3RhcnRXaWR0aDppfX0pKSx3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigibW91c2V1cCIscyksd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoIm1vdXNlbW92ZSIsYSksZS5wcmV2ZW50RGVmYXVsdCgpLCEwfWZ1bmN0aW9uIFh0KHQsZSxuKXt2YXIgcj1uLmNvbHNwYW4sbz1uLmNvbHdpZHRoLGk9byYmb1tvLmxlbmd0aC0xXTtpZihpKXJldHVybiBpO3ZhciBzPXQuZG9tQXRQb3MoZSksYT1zLm5vZGUuY2hpbGROb2Rlc1tzLm9mZnNldF0sYz1hLm9mZnNldFdpZHRoLHU9cjtpZihvKWZvcih2YXIgbD0wO2w8cjtsKyspb1tsXSYmKGMtPW9bbF0sdS0tKTtyZXR1cm4gYy91fWZ1bmN0aW9uIFl0KHQpe3doaWxlKHQmJiJURCIhPXQubm9kZU5hbWUmJiJUSCIhPXQubm9kZU5hbWUpdD10LmNsYXNzTGlzdC5jb250YWlucygiUHJvc2VNaXJyb3IiKT9udWxsOnQucGFyZW50Tm9kZTtyZXR1cm4gdH1mdW5jdGlvbiBadCh0LGUsbil7dmFyIHI9dC5wb3NBdENvb3Jkcyh7bGVmdDplLmNsaWVudFgsdG9wOmUuY2xpZW50WX0pLG89ci5wb3MsaT14KHQuc3RhdGUuZG9jLnJlc29sdmUobykpO2lmKCFpKXJldHVybi0xO2lmKCJyaWdodCI9PW4pcmV0dXJuIGkucG9zO3ZhciBzPXYuZ2V0KGkubm9kZSgtMSkpLGE9aS5zdGFydCgtMSksYz1zLm1hcC5pbmRleE9mKGkucG9zLWEpO3JldHVybiBjJXMud2lkdGg9PTA/LTE6YStzLm1hcFtjLTFdfWZ1bmN0aW9uIFF0KHQsZSxuKXt2YXIgcj1lLmNsaWVudFgtdC5zdGFydFg7cmV0dXJuIE1hdGgubWF4KG4sdC5zdGFydFdpZHRoK3IpfWZ1bmN0aW9uIHRlKHQsZSl7dC5kaXNwYXRjaCh0LnN0YXRlLnRyLnNldE1ldGEoSnQse3NldEhhbmRsZTplfSkpfWZ1bmN0aW9uIGVlKHQsZSxuKXtmb3IodmFyIHI9dC5zdGF0ZS5kb2MucmVzb2x2ZShlKSxvPXIubm9kZSgtMSksaT12LmdldChvKSxzPXIuc3RhcnQoLTEpLGE9aS5jb2xDb3VudChyLnBvcy1zKStyLm5vZGVBZnRlci5hdHRycy5jb2xzcGFuLTEsYz10LnN0YXRlLnRyLHU9MDt1PGkuaGVpZ2h0O3UrKyl7dmFyIGw9dSppLndpZHRoK2E7aWYoIXV8fGkubWFwW2xdIT1pLm1hcFtsLWkud2lkdGhdKXt2YXIgaD1pLm1hcFtsXSxmPW8ubm9kZUF0KGgpLHA9Zi5hdHRycyxkPTE9PXAuY29sc3Bhbj8wOmEtaS5jb2xDb3VudChoKTtpZighcC5jb2x3aWR0aHx8cC5jb2x3aWR0aFtkXSE9bil7dmFyIG09cC5jb2x3aWR0aD9wLmNvbHdpZHRoLnNsaWNlKCk6cmUocC5jb2xzcGFuKTttW2RdPW4sYy5zZXROb2RlTWFya3VwKHMraCxudWxsLFIocCwiY29sd2lkdGgiLG0pKX19fWMuZG9jQ2hhbmdlZCYmdC5kaXNwYXRjaChjKX1mdW5jdGlvbiBuZSh0LGUsbixyKXt2YXIgbz10LnN0YXRlLmRvYy5yZXNvbHZlKGUpLGk9by5ub2RlKC0xKSxzPW8uc3RhcnQoLTEpLGE9di5nZXQoaSkuY29sQ291bnQoby5wb3Mtcykrby5ub2RlQWZ0ZXIuYXR0cnMuY29sc3Bhbi0xLGM9dC5kb21BdFBvcyhvLnN0YXJ0KC0xKSkubm9kZTt3aGlsZSgiVEFCTEUiIT1jLm5vZGVOYW1lKWM9Yy5wYXJlbnROb2RlO3F0KGksYy5maXJzdENoaWxkLGMscixhLG4pfWZ1bmN0aW9uIHJlKHQpe2Zvcih2YXIgZT1bXSxuPTA7bjx0O24rKyllLnB1c2goMCk7cmV0dXJuIGV9ZnVuY3Rpb24gb2UodCxlKXtmb3IodmFyIG49W10scj10LmRvYy5yZXNvbHZlKGUpLG89ci5ub2RlKC0xKSxpPXYuZ2V0KG8pLHM9ci5zdGFydCgtMSksYT1pLmNvbENvdW50KHIucG9zLXMpK3Iubm9kZUFmdGVyLmF0dHJzLmNvbHNwYW4sdT0wO3U8aS5oZWlnaHQ7dSsrKXt2YXIgbD1hK3UqaS53aWR0aC0xO2lmKChhPT1pLndpZHRofHxpLm1hcFtsXSE9aS5tYXBbbCsxXSkmJigwPT11fHxpLm1hcFtsLTFdIT1pLm1hcFtsLTEtaS53aWR0aF0pKXt2YXIgaD1pLm1hcFtsXSxmPXMraCtvLm5vZGVBdChoKS5ub2RlU2l6ZS0xLHA9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2Iik7cC5jbGFzc05hbWU9ImNvbHVtbi1yZXNpemUtaGFuZGxlIixuLnB1c2goY1siYSJdLndpZGdldChmLHApKX19cmV0dXJuIGNbImIiXS5jcmVhdGUodC5kb2Msbil9ZnVuY3Rpb24gaWUodCl7dm9pZCAwPT09dCYmKHQ9e30pO3ZhciBlPXQuYWxsb3dUYWJsZU5vZGVTZWxlY3Rpb247cmV0dXJuIHZvaWQgMD09PWUmJihlPSExKSxuZXcgaVsiUGx1Z2luIl0oe2tleTpiLHN0YXRlOntpbml0OmZ1bmN0aW9uKCl7cmV0dXJuIG51bGx9LGFwcGx5OmZ1bmN0aW9uKHQsZSl7dmFyIG49dC5nZXRNZXRhKGIpO2lmKG51bGwhPW4pcmV0dXJuLTE9PW4/bnVsbDpuO2lmKG51bGw9PWV8fCF0LmRvY0NoYW5nZWQpcmV0dXJuIGU7dmFyIHI9dC5tYXBwaW5nLm1hcFJlc3VsdChlKSxvPXIuZGVsZXRlZCxpPXIucG9zO3JldHVybiBvP251bGw6aX19LHByb3BzOntkZWNvcmF0aW9uczpfLGhhbmRsZURPTUV2ZW50czp7bW91c2Vkb3duOnN0fSxjcmVhdGVTZWxlY3Rpb25CZXR3ZWVuOmZ1bmN0aW9uKHQpe2lmKG51bGwhPWIuZ2V0U3RhdGUodC5zdGF0ZSkpcmV0dXJuIHQuc3RhdGUuc2VsZWN0aW9ufSxoYW5kbGVUcmlwbGVDbGljazpvdCxoYW5kbGVLZXlEb3duOlEsaGFuZGxlUGFzdGU6aXR9LGFwcGVuZFRyYW5zYWN0aW9uOmZ1bmN0aW9uKHQsbixyKXtyZXR1cm4gJChyLGZ0KHIsbiksZSl9fSl9SHQucHJvdG90eXBlLmFwcGx5PWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMsbj10LmdldE1ldGEoSnQpO2lmKG4mJm51bGwhPW4uc2V0SGFuZGxlKXJldHVybiBuZXcgSHQobi5zZXRIYW5kbGUsbnVsbCk7aWYobiYmdm9pZCAwIT09bi5zZXREcmFnZ2luZylyZXR1cm4gbmV3IEh0KGUuYWN0aXZlSGFuZGxlLG4uc2V0RHJhZ2dpbmcpO2lmKGUuYWN0aXZlSGFuZGxlPi0xJiZ0LmRvY0NoYW5nZWQpe3ZhciByPXQubWFwcGluZy5tYXAoZS5hY3RpdmVIYW5kbGUsLTEpO00odC5kb2MucmVzb2x2ZShyKSl8fChyPW51bGwpLGU9bmV3IEh0KHIsZS5kcmFnZ2luZyl9cmV0dXJuIGV9fSw1NjkyOmZ1bmN0aW9uKHQsZSxuKXt2YXIgcj1uKCJjNDMwIiksbz1uKCJjNmNkIik7KHQuZXhwb3J0cz1mdW5jdGlvbih0LGUpe3JldHVybiBvW3RdfHwob1t0XT12b2lkIDAhPT1lP2U6e30pfSkoInZlcnNpb25zIixbXSkucHVzaCh7dmVyc2lvbjoiMy42LjUiLG1vZGU6cj8icHVyZSI6Imdsb2JhbCIsY29weXJpZ2h0OiLCqSAyMDIwIERlbmlzIFB1c2hrYXJldiAoemxvaXJvY2sucnUpIn0pfSwiNTZlZiI6ZnVuY3Rpb24odCxlLG4pe3ZhciByPW4oImQwNjYiKSxvPW4oIjI0MWMiKSxpPW4oIjc0MTgiKSxzPW4oIjgyNWEiKTt0LmV4cG9ydHM9cigiUmVmbGVjdCIsIm93bktleXMiKXx8ZnVuY3Rpb24odCl7dmFyIGU9by5mKHModCkpLG49aS5mO3JldHVybiBuP2UuY29uY2F0KG4odCkpOmV9fSwiNTc2YSI6ZnVuY3Rpb24odCxlLG4peyJ1c2Ugc3RyaWN0IjtuLmQoZSwiYSIsKGZ1bmN0aW9uKCl7cmV0dXJuIHlufSkpLG4uZChlLCJiIiwoZnVuY3Rpb24oKXtyZXR1cm4ga259KSk7dmFyIHI9bigiNTMxMyIpLG89bigiMzA0YSIpLGk9bigiMGFjMCIpLHM9e307aWYoInVuZGVmaW5lZCIhPXR5cGVvZiBuYXZpZ2F0b3ImJiJ1bmRlZmluZWQiIT10eXBlb2YgZG9jdW1lbnQpe3ZhciBhPS9FZGdlXC8oXGQrKS8uZXhlYyhuYXZpZ2F0b3IudXNlckFnZW50KSxjPS9NU0lFIFxkLy50ZXN0KG5hdmlnYXRvci51c2VyQWdlbnQpLHU9L1RyaWRlbnRcLyg/Ols3LTldfFxkezIsfSlcLi4qcnY6KFxkKykvLmV4ZWMobmF2aWdhdG9yLnVzZXJBZ2VudCk7cy5tYWM9L01hYy8udGVzdChuYXZpZ2F0b3IucGxhdGZvcm0pO3ZhciBsPXMuaWU9ISEoY3x8dXx8YSk7cy5pZV92ZXJzaW9uPWM/ZG9jdW1lbnQuZG9jdW1lbnRNb2RlfHw2OnU/K3VbMV06YT8rYVsxXTpudWxsLHMuZ2Vja289IWwmJi9nZWNrb1wvKFxkKykvaS50ZXN0KG5hdmlnYXRvci51c2VyQWdlbnQpLHMuZ2Vja29fdmVyc2lvbj1zLmdlY2tvJiYrKC9GaXJlZm94XC8oXGQrKS8uZXhlYyhuYXZpZ2F0b3IudXNlckFnZW50KXx8WzAsMF0pWzFdO3ZhciBoPSFsJiYvQ2hyb21lXC8oXGQrKS8uZXhlYyhuYXZpZ2F0b3IudXNlckFnZW50KTtzLmNocm9tZT0hIWgscy5jaHJvbWVfdmVyc2lvbj1oJiYraFsxXSxzLmlvcz0hbCYmL0FwcGxlV2ViS2l0Ly50ZXN0KG5hdmlnYXRvci51c2VyQWdlbnQpJiYvTW9iaWxlXC9cdysvLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudCkscy5hbmRyb2lkPS9BbmRyb2lkIFxkLy50ZXN0KG5hdmlnYXRvci51c2VyQWdlbnQpLHMud2Via2l0PSJ3ZWJraXRGb250U21vb3RoaW5nImluIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zdHlsZSxzLnNhZmFyaT0vQXBwbGUgQ29tcHV0ZXIvLnRlc3QobmF2aWdhdG9yLnZlbmRvcikscy53ZWJraXRfdmVyc2lvbj1zLndlYmtpdCYmKygvXGJBcHBsZVdlYktpdFwvKFxkKykvLmV4ZWMobmF2aWdhdG9yLnVzZXJBZ2VudCl8fFswLDBdKVsxXX12YXIgZj1mdW5jdGlvbih0KXtmb3IodmFyIGU9MDs7ZSsrKWlmKHQ9dC5wcmV2aW91c1NpYmxpbmcsIXQpcmV0dXJuIGV9LHA9ZnVuY3Rpb24odCl7dmFyIGU9dC5wYXJlbnROb2RlO3JldHVybiBlJiYxMT09ZS5ub2RlVHlwZT9lLmhvc3Q6ZX0sZD1mdW5jdGlvbih0LGUsbil7dmFyIHI9ZG9jdW1lbnQuY3JlYXRlUmFuZ2UoKTtyZXR1cm4gci5zZXRFbmQodCxudWxsPT1uP3Qubm9kZVZhbHVlLmxlbmd0aDpuKSxyLnNldFN0YXJ0KHQsZXx8MCkscn0sdj1mdW5jdGlvbih0LGUsbixyKXtyZXR1cm4gbiYmKGcodCxlLG4sciwtMSl8fGcodCxlLG4sciwxKSl9LG09L14oaW1nfGJyfGlucHV0fHRleHRhcmVhfGhyKSQvaTtmdW5jdGlvbiBnKHQsZSxuLHIsbyl7Zm9yKDs7KXtpZih0PT1uJiZlPT1yKXJldHVybiEwO2lmKGU9PShvPDA/MDp5KHQpKSl7dmFyIGk9dC5wYXJlbnROb2RlO2lmKDEhPWkubm9kZVR5cGV8fGIodCl8fG0udGVzdCh0Lm5vZGVOYW1lKXx8ImZhbHNlIj09dC5jb250ZW50RWRpdGFibGUpcmV0dXJuITE7ZT1mKHQpKyhvPDA/MDoxKSx0PWl9ZWxzZXtpZigxIT10Lm5vZGVUeXBlKXJldHVybiExO2lmKHQ9dC5jaGlsZE5vZGVzW2UrKG88MD8tMTowKV0sImZhbHNlIj09dC5jb250ZW50RWRpdGFibGUpcmV0dXJuITE7ZT1vPDA/eSh0KTowfX19ZnVuY3Rpb24geSh0KXtyZXR1cm4gMz09dC5ub2RlVHlwZT90Lm5vZGVWYWx1ZS5sZW5ndGg6dC5jaGlsZE5vZGVzLmxlbmd0aH1mdW5jdGlvbiB3KHQsZSxuKXtmb3IodmFyIHI9MD09ZSxvPWU9PXkodCk7cnx8bzspe2lmKHQ9PW4pcmV0dXJuITA7dmFyIGk9Zih0KTtpZih0PXQucGFyZW50Tm9kZSwhdClyZXR1cm4hMTtyPXImJjA9PWksbz1vJiZpPT15KHQpfX1mdW5jdGlvbiBiKHQpe2Zvcih2YXIgZSxuPXQ7bjtuPW4ucGFyZW50Tm9kZSlpZihlPW4ucG1WaWV3RGVzYylicmVhaztyZXR1cm4gZSYmZS5ub2RlJiZlLm5vZGUuaXNCbG9jayYmKGUuZG9tPT10fHxlLmNvbnRlbnRET009PXQpfXZhciB4PWZ1bmN0aW9uKHQpe3ZhciBlPXQuaXNDb2xsYXBzZWQ7cmV0dXJuIGUmJnMuY2hyb21lJiZ0LnJhbmdlQ291bnQmJiF0LmdldFJhbmdlQXQoMCkuY29sbGFwc2VkJiYoZT0hMSksZX07ZnVuY3Rpb24gayh0LGUpe3ZhciBuPWRvY3VtZW50LmNyZWF0ZUV2ZW50KCJFdmVudCIpO3JldHVybiBuLmluaXRFdmVudCgia2V5ZG93biIsITAsITApLG4ua2V5Q29kZT10LG4ua2V5PW4uY29kZT1lLG59ZnVuY3Rpb24gUyh0KXtyZXR1cm57bGVmdDowLHJpZ2h0OnQuZG9jdW1lbnRFbGVtZW50LmNsaWVudFdpZHRoLHRvcDowLGJvdHRvbTp0LmRvY3VtZW50RWxlbWVudC5jbGllbnRIZWlnaHR9fWZ1bmN0aW9uIEModCxlKXtyZXR1cm4ibnVtYmVyIj09dHlwZW9mIHQ/dDp0W2VdfWZ1bmN0aW9uIE8odCl7dmFyIGU9dC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtyZXR1cm57bGVmdDplLmxlZnQscmlnaHQ6ZS5sZWZ0K3QuY2xpZW50V2lkdGgsdG9wOmUudG9wLGJvdHRvbTplLnRvcCt0LmNsaWVudEhlaWdodH19ZnVuY3Rpb24gTSh0LGUsbil7Zm9yKHZhciByPXQuc29tZVByb3AoInNjcm9sbFRocmVzaG9sZCIpfHwwLG89dC5zb21lUHJvcCgic2Nyb2xsTWFyZ2luIil8fDUsaT10LmRvbS5vd25lckRvY3VtZW50LHM9bnx8dC5kb207O3M9cChzKSl7aWYoIXMpYnJlYWs7aWYoMT09cy5ub2RlVHlwZSl7dmFyIGE9cz09aS5ib2R5fHwxIT1zLm5vZGVUeXBlLGM9YT9TKGkpOk8ocyksdT0wLGw9MDtpZihlLnRvcDxjLnRvcCtDKHIsInRvcCIpP2w9LShjLnRvcC1lLnRvcCtDKG8sInRvcCIpKTplLmJvdHRvbT5jLmJvdHRvbS1DKHIsImJvdHRvbSIpJiYobD1lLmJvdHRvbS1jLmJvdHRvbStDKG8sImJvdHRvbSIpKSxlLmxlZnQ8Yy5sZWZ0K0MociwibGVmdCIpP3U9LShjLmxlZnQtZS5sZWZ0K0MobywibGVmdCIpKTplLnJpZ2h0PmMucmlnaHQtQyhyLCJyaWdodCIpJiYodT1lLnJpZ2h0LWMucmlnaHQrQyhvLCJyaWdodCIpKSx1fHxsKWlmKGEpaS5kZWZhdWx0Vmlldy5zY3JvbGxCeSh1LGwpO2Vsc2V7dmFyIGg9cy5zY3JvbGxMZWZ0LGY9cy5zY3JvbGxUb3A7bCYmKHMuc2Nyb2xsVG9wKz1sKSx1JiYocy5zY3JvbGxMZWZ0Kz11KTt2YXIgZD1zLnNjcm9sbExlZnQtaCx2PXMuc2Nyb2xsVG9wLWY7ZT17bGVmdDplLmxlZnQtZCx0b3A6ZS50b3AtdixyaWdodDplLnJpZ2h0LWQsYm90dG9tOmUuYm90dG9tLXZ9fWlmKGEpYnJlYWt9fX1mdW5jdGlvbiBOKHQpe2Zvcih2YXIgZSxuLHI9dC5kb20uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCksbz1NYXRoLm1heCgwLHIudG9wKSxpPShyLmxlZnQrci5yaWdodCkvMixzPW8rMTtzPE1hdGgubWluKGlubmVySGVpZ2h0LHIuYm90dG9tKTtzKz01KXt2YXIgYT10LnJvb3QuZWxlbWVudEZyb21Qb2ludChpLHMpO2lmKGEhPXQuZG9tJiZ0LmRvbS5jb250YWlucyhhKSl7dmFyIGM9YS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtpZihjLnRvcD49by0yMCl7ZT1hLG49Yy50b3A7YnJlYWt9fX1yZXR1cm57cmVmRE9NOmUscmVmVG9wOm4sc3RhY2s6VCh0LmRvbSl9fWZ1bmN0aW9uIFQodCl7Zm9yKHZhciBlPVtdLG49dC5vd25lckRvY3VtZW50O3Q7dD1wKHQpKWlmKGUucHVzaCh7ZG9tOnQsdG9wOnQuc2Nyb2xsVG9wLGxlZnQ6dC5zY3JvbGxMZWZ0fSksdD09bilicmVhaztyZXR1cm4gZX1mdW5jdGlvbiBBKHQpe3ZhciBlPXQucmVmRE9NLG49dC5yZWZUb3Ascj10LnN0YWNrLG89ZT9lLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLnRvcDowO0UociwwPT1vPzA6by1uKX1mdW5jdGlvbiBFKHQsZSl7Zm9yKHZhciBuPTA7bjx0Lmxlbmd0aDtuKyspe3ZhciByPXRbbl0sbz1yLmRvbSxpPXIudG9wLHM9ci5sZWZ0O28uc2Nyb2xsVG9wIT1pK2UmJihvLnNjcm9sbFRvcD1pK2UpLG8uc2Nyb2xsTGVmdCE9cyYmKG8uc2Nyb2xsTGVmdD1zKX19dmFyIEQ9bnVsbDtmdW5jdGlvbiBSKHQpe2lmKHQuc2V0QWN0aXZlKXJldHVybiB0LnNldEFjdGl2ZSgpO2lmKEQpcmV0dXJuIHQuZm9jdXMoRCk7dmFyIGU9VCh0KTt0LmZvY3VzKG51bGw9PUQ/e2dldCBwcmV2ZW50U2Nyb2xsKCl7cmV0dXJuIEQ9e3ByZXZlbnRTY3JvbGw6ITB9LCEwfX06dm9pZCAwKSxEfHwoRD0hMSxFKGUsMCkpfWZ1bmN0aW9uIHoodCxlKXtmb3IodmFyIG4scixvPTJlOCxpPTAscz1lLnRvcCxhPWUudG9wLGM9dC5maXJzdENoaWxkLHU9MDtjO2M9Yy5uZXh0U2libGluZyx1Kyspe3ZhciBsPXZvaWQgMDtpZigxPT1jLm5vZGVUeXBlKWw9Yy5nZXRDbGllbnRSZWN0cygpO2Vsc2V7aWYoMyE9Yy5ub2RlVHlwZSljb250aW51ZTtsPWQoYykuZ2V0Q2xpZW50UmVjdHMoKX1mb3IodmFyIGg9MDtoPGwubGVuZ3RoO2grKyl7dmFyIGY9bFtoXTtpZihmLnRvcDw9cyYmZi5ib3R0b20+PWEpe3M9TWF0aC5tYXgoZi5ib3R0b20scyksYT1NYXRoLm1pbihmLnRvcCxhKTt2YXIgcD1mLmxlZnQ+ZS5sZWZ0P2YubGVmdC1lLmxlZnQ6Zi5yaWdodDxlLmxlZnQ/ZS5sZWZ0LWYucmlnaHQ6MDtpZihwPG8pe249YyxvPXAscj1wJiYzPT1uLm5vZGVUeXBlP3tsZWZ0OmYucmlnaHQ8ZS5sZWZ0P2YucmlnaHQ6Zi5sZWZ0LHRvcDplLnRvcH06ZSwxPT1jLm5vZGVUeXBlJiZwJiYoaT11KyhlLmxlZnQ+PShmLmxlZnQrZi5yaWdodCkvMj8xOjApKTtjb250aW51ZX19IW4mJihlLmxlZnQ+PWYucmlnaHQmJmUudG9wPj1mLnRvcHx8ZS5sZWZ0Pj1mLmxlZnQmJmUudG9wPj1mLmJvdHRvbSkmJihpPXUrMSl9fXJldHVybiBuJiYzPT1uLm5vZGVUeXBlP1AobixyKTohbnx8byYmMT09bi5ub2RlVHlwZT97bm9kZTp0LG9mZnNldDppfTp6KG4scil9ZnVuY3Rpb24gUCh0LGUpe2Zvcih2YXIgbj10Lm5vZGVWYWx1ZS5sZW5ndGgscj1kb2N1bWVudC5jcmVhdGVSYW5nZSgpLG89MDtvPG47bysrKXtyLnNldEVuZCh0LG8rMSksci5zZXRTdGFydCh0LG8pO3ZhciBpPVYociwxKTtpZihpLnRvcCE9aS5ib3R0b20mJkkoZSxpKSlyZXR1cm57bm9kZTp0LG9mZnNldDpvKyhlLmxlZnQ+PShpLmxlZnQraS5yaWdodCkvMj8xOjApfX1yZXR1cm57bm9kZTp0LG9mZnNldDowfX1mdW5jdGlvbiBJKHQsZSl7cmV0dXJuIHQubGVmdD49ZS5sZWZ0LTEmJnQubGVmdDw9ZS5yaWdodCsxJiZ0LnRvcD49ZS50b3AtMSYmdC50b3A8PWUuYm90dG9tKzF9ZnVuY3Rpb24gQih0LGUpe3ZhciBuPXQucGFyZW50Tm9kZTtyZXR1cm4gbiYmL15saSQvaS50ZXN0KG4ubm9kZU5hbWUpJiZlLmxlZnQ8dC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS5sZWZ0P246dH1mdW5jdGlvbiBfKHQsZSxuKXt2YXIgcj16KGUsbiksbz1yLm5vZGUsaT1yLm9mZnNldCxzPS0xO2lmKDE9PW8ubm9kZVR5cGUmJiFvLmZpcnN0Q2hpbGQpe3ZhciBhPW8uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7cz1hLmxlZnQhPWEucmlnaHQmJm4ubGVmdD4oYS5sZWZ0K2EucmlnaHQpLzI/MTotMX1yZXR1cm4gdC5kb2NWaWV3LnBvc0Zyb21ET00obyxpLHMpfWZ1bmN0aW9uIEYodCxlLG4scil7Zm9yKHZhciBvPS0xLGk9ZTs7KXtpZihpPT10LmRvbSlicmVhazt2YXIgcz10LmRvY1ZpZXcubmVhcmVzdERlc2MoaSwhMCk7aWYoIXMpcmV0dXJuIG51bGw7aWYocy5ub2RlLmlzQmxvY2smJnMucGFyZW50KXt2YXIgYT1zLmRvbS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtpZihhLmxlZnQ+ci5sZWZ0fHxhLnRvcD5yLnRvcClvPXMucG9zQmVmb3JlO2Vsc2V7aWYoIShhLnJpZ2h0PHIubGVmdHx8YS5ib3R0b208ci50b3ApKWJyZWFrO289cy5wb3NBZnRlcn19aT1zLmRvbS5wYXJlbnROb2RlfXJldHVybiBvPi0xP286dC5kb2NWaWV3LnBvc0Zyb21ET00oZSxuKX1mdW5jdGlvbiBqKHQsZSxuKXt2YXIgcj10LmNoaWxkTm9kZXMubGVuZ3RoO2lmKHImJm4udG9wPG4uYm90dG9tKWZvcih2YXIgbz1NYXRoLm1heCgwLE1hdGgubWluKHItMSxNYXRoLmZsb29yKHIqKGUudG9wLW4udG9wKS8obi5ib3R0b20tbi50b3ApKS0yKSksaT1vOzspe3ZhciBzPXQuY2hpbGROb2Rlc1tpXTtpZigxPT1zLm5vZGVUeXBlKWZvcih2YXIgYT1zLmdldENsaWVudFJlY3RzKCksYz0wO2M8YS5sZW5ndGg7YysrKXt2YXIgdT1hW2NdO2lmKEkoZSx1KSlyZXR1cm4gaihzLGUsdSl9aWYoKGk9KGkrMSklcik9PW8pYnJlYWt9cmV0dXJuIHR9ZnVuY3Rpb24gJCh0LGUpe3ZhciBuLHIsbyxpLGE9dC5yb290O2lmKGEuY2FyZXRQb3NpdGlvbkZyb21Qb2ludCl0cnl7dmFyIGM9YS5jYXJldFBvc2l0aW9uRnJvbVBvaW50KGUubGVmdCxlLnRvcCk7YyYmKG49YyxvPW4ub2Zmc2V0Tm9kZSxpPW4ub2Zmc2V0KX1jYXRjaChtKXt9aWYoIW8mJmEuY2FyZXRSYW5nZUZyb21Qb2ludCl7dmFyIHU9YS5jYXJldFJhbmdlRnJvbVBvaW50KGUubGVmdCxlLnRvcCk7dSYmKHI9dSxvPXIuc3RhcnRDb250YWluZXIsaT1yLnN0YXJ0T2Zmc2V0KX12YXIgbCxoPWEuZWxlbWVudEZyb21Qb2ludChlLmxlZnQsZS50b3ArMSk7aWYoIWh8fCF0LmRvbS5jb250YWlucygxIT1oLm5vZGVUeXBlP2gucGFyZW50Tm9kZTpoKSl7dmFyIGY9dC5kb20uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7aWYoIUkoZSxmKSlyZXR1cm4gbnVsbDtpZihoPWoodC5kb20sZSxmKSwhaClyZXR1cm4gbnVsbH1pZihzLnNhZmFyaSYmaC5kcmFnZ2FibGUmJihvPWk9bnVsbCksaD1CKGgsZSksbyl7aWYocy5nZWNrbyYmMT09by5ub2RlVHlwZSYmKGk9TWF0aC5taW4oaSxvLmNoaWxkTm9kZXMubGVuZ3RoKSxpPG8uY2hpbGROb2Rlcy5sZW5ndGgpKXt2YXIgcCxkPW8uY2hpbGROb2Rlc1tpXTsiSU1HIj09ZC5ub2RlTmFtZSYmKHA9ZC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKSkucmlnaHQ8PWUubGVmdCYmcC5ib3R0b20+ZS50b3AmJmkrK31vPT10LmRvbSYmaT09by5jaGlsZE5vZGVzLmxlbmd0aC0xJiYxPT1vLmxhc3RDaGlsZC5ub2RlVHlwZSYmZS50b3A+by5sYXN0Q2hpbGQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkuYm90dG9tP2w9dC5zdGF0ZS5kb2MuY29udGVudC5zaXplOjAhPWkmJjE9PW8ubm9kZVR5cGUmJiJCUiI9PW8uY2hpbGROb2Rlc1tpLTFdLm5vZGVOYW1lfHwobD1GKHQsbyxpLGUpKX1udWxsPT1sJiYobD1fKHQsaCxlKSk7dmFyIHY9dC5kb2NWaWV3Lm5lYXJlc3REZXNjKGgsITApO3JldHVybntwb3M6bCxpbnNpZGU6dj92LnBvc0F0U3RhcnQtdi5ib3JkZXI6LTF9fWZ1bmN0aW9uIFYodCxlKXt2YXIgbj10LmdldENsaWVudFJlY3RzKCk7cmV0dXJuIG4ubGVuZ3RoP25bZTwwPzA6bi5sZW5ndGgtMV06dC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKX1mdW5jdGlvbiBMKHQsZSl7dmFyIG49dC5kb2NWaWV3LmRvbUZyb21Qb3MoZSkscj1uLm5vZGUsbz1uLm9mZnNldDtpZigzPT1yLm5vZGVUeXBlJiYocy53ZWJraXR8fHMuZ2Vja28pKXt2YXIgaT1WKGQocixvLG8pLDApO2lmKHMuZ2Vja28mJm8mJi9ccy8udGVzdChyLm5vZGVWYWx1ZVtvLTFdKSYmbzxyLm5vZGVWYWx1ZS5sZW5ndGgpe3ZhciBhPVYoZChyLG8tMSxvLTEpLC0xKTtpZihhLnRvcD09aS50b3Ape3ZhciBjPVYoZChyLG8sbysxKSwtMSk7aWYoYy50b3AhPWkudG9wKXJldHVybiBxKGMsYy5sZWZ0PGEubGVmdCl9fXJldHVybiBpfWlmKDE9PXIubm9kZVR5cGUmJiF0LnN0YXRlLmRvYy5yZXNvbHZlKGUpLnBhcmVudC5pbmxpbmVDb250ZW50KXt2YXIgdSxsPSEwO2lmKG88ci5jaGlsZE5vZGVzLmxlbmd0aCl7dmFyIGg9ci5jaGlsZE5vZGVzW29dOzE9PWgubm9kZVR5cGUmJih1PWguZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkpfWlmKCF1JiZvKXt2YXIgZj1yLmNoaWxkTm9kZXNbby0xXTsxPT1mLm5vZGVUeXBlJiYodT1mLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLGw9ITEpfXJldHVybiBKKHV8fHIuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCksbCl9Zm9yKHZhciBwPS0xO3A8MjtwKz0yKWlmKHA8MCYmbyl7dmFyIHY9dm9pZCAwLG09Mz09ci5ub2RlVHlwZT9kKHIsby0xLG8pOjM9PSh2PXIuY2hpbGROb2Rlc1tvLTFdKS5ub2RlVHlwZT9kKHYpOjE9PXYubm9kZVR5cGUmJiJCUiIhPXYubm9kZU5hbWU/djpudWxsO2lmKG0pe3ZhciBnPVYobSwxKTtpZihnLnRvcDxnLmJvdHRvbSlyZXR1cm4gcShnLCExKX19ZWxzZSBpZihwPjAmJm88eShyKSl7dmFyIHc9dm9pZCAwLGI9Mz09ci5ub2RlVHlwZT9kKHIsbyxvKzEpOjM9PSh3PXIuY2hpbGROb2Rlc1tvXSkubm9kZVR5cGU/ZCh3KToxPT13Lm5vZGVUeXBlP3c6bnVsbDtpZihiKXt2YXIgeD1WKGIsLTEpO2lmKHgudG9wPHguYm90dG9tKXJldHVybiBxKHgsITApfX1yZXR1cm4gcShWKDM9PXIubm9kZVR5cGU/ZChyKTpyLDApLCExKX1mdW5jdGlvbiBxKHQsZSl7aWYoMD09dC53aWR0aClyZXR1cm4gdDt2YXIgbj1lP3QubGVmdDp0LnJpZ2h0O3JldHVybnt0b3A6dC50b3AsYm90dG9tOnQuYm90dG9tLGxlZnQ6bixyaWdodDpufX1mdW5jdGlvbiBKKHQsZSl7aWYoMD09dC5oZWlnaHQpcmV0dXJuIHQ7dmFyIG49ZT90LnRvcDp0LmJvdHRvbTtyZXR1cm57dG9wOm4sYm90dG9tOm4sbGVmdDp0LmxlZnQscmlnaHQ6dC5yaWdodH19ZnVuY3Rpb24gVyh0LGUsbil7dmFyIHI9dC5zdGF0ZSxvPXQucm9vdC5hY3RpdmVFbGVtZW50O3IhPWUmJnQudXBkYXRlU3RhdGUoZSksbyE9dC5kb20mJnQuZm9jdXMoKTt0cnl7cmV0dXJuIG4oKX1maW5hbGx5e3IhPWUmJnQudXBkYXRlU3RhdGUociksbyE9dC5kb20mJm8mJm8uZm9jdXMoKX19ZnVuY3Rpb24gSCh0LGUsbil7dmFyIHI9ZS5zZWxlY3Rpb24sbz0idXAiPT1uP3IuJGFuY2hvci5taW4oci4kaGVhZCk6ci4kYW5jaG9yLm1heChyLiRoZWFkKTtyZXR1cm4gVyh0LGUsKGZ1bmN0aW9uKCl7Zm9yKHZhciBlPXQuZG9jVmlldy5kb21Gcm9tUG9zKG8ucG9zKSxyPWUubm9kZTs7KXt2YXIgaT10LmRvY1ZpZXcubmVhcmVzdERlc2MociwhMCk7aWYoIWkpYnJlYWs7aWYoaS5ub2RlLmlzQmxvY2spe3I9aS5kb207YnJlYWt9cj1pLmRvbS5wYXJlbnROb2RlfWZvcih2YXIgcz1MKHQsby5wb3MpLGE9ci5maXJzdENoaWxkO2E7YT1hLm5leHRTaWJsaW5nKXt2YXIgYz12b2lkIDA7aWYoMT09YS5ub2RlVHlwZSljPWEuZ2V0Q2xpZW50UmVjdHMoKTtlbHNle2lmKDMhPWEubm9kZVR5cGUpY29udGludWU7Yz1kKGEsMCxhLm5vZGVWYWx1ZS5sZW5ndGgpLmdldENsaWVudFJlY3RzKCl9Zm9yKHZhciB1PTA7dTxjLmxlbmd0aDt1Kyspe3ZhciBsPWNbdV07aWYobC5ib3R0b20+bC50b3AmJigidXAiPT1uP2wuYm90dG9tPHMudG9wKzE6bC50b3A+cy5ib3R0b20tMSkpcmV0dXJuITF9fXJldHVybiEwfSkpfXZhciBLPS9bXHUwNTkwLVx1MDhhY10vO2Z1bmN0aW9uIFUodCxlLG4pe3ZhciByPWUuc2VsZWN0aW9uLG89ci4kaGVhZDtpZighby5wYXJlbnQuaXNUZXh0YmxvY2spcmV0dXJuITE7dmFyIGk9by5wYXJlbnRPZmZzZXQscz0haSxhPWk9PW8ucGFyZW50LmNvbnRlbnQuc2l6ZSxjPWdldFNlbGVjdGlvbigpO3JldHVybiBLLnRlc3Qoby5wYXJlbnQudGV4dENvbnRlbnQpJiZjLm1vZGlmeT9XKHQsZSwoZnVuY3Rpb24oKXt2YXIgZT1jLmdldFJhbmdlQXQoMCkscj1jLmZvY3VzTm9kZSxpPWMuZm9jdXNPZmZzZXQscz1jLmNhcmV0QmlkaUxldmVsO2MubW9kaWZ5KCJtb3ZlIixuLCJjaGFyYWN0ZXIiKTt2YXIgYT1vLmRlcHRoP3QuZG9jVmlldy5kb21BZnRlclBvcyhvLmJlZm9yZSgpKTp0LmRvbSx1PSFhLmNvbnRhaW5zKDE9PWMuZm9jdXNOb2RlLm5vZGVUeXBlP2MuZm9jdXNOb2RlOmMuZm9jdXNOb2RlLnBhcmVudE5vZGUpfHxyPT1jLmZvY3VzTm9kZSYmaT09Yy5mb2N1c09mZnNldDtyZXR1cm4gYy5yZW1vdmVBbGxSYW5nZXMoKSxjLmFkZFJhbmdlKGUpLG51bGwhPXMmJihjLmNhcmV0QmlkaUxldmVsPXMpLHV9KSk6ImxlZnQiPT1ufHwiYmFja3dhcmQiPT1uP3M6YX12YXIgRz1udWxsLFg9bnVsbCxZPSExO2Z1bmN0aW9uIFoodCxlLG4pe3JldHVybiBHPT1lJiZYPT1uP1k6KEc9ZSxYPW4sWT0idXAiPT1ufHwiZG93biI9PW4/SCh0LGUsbik6VSh0LGUsbikpfXZhciBRPTAsdHQ9MSxldD0yLG50PTMscnQ9ZnVuY3Rpb24odCxlLG4scil7dGhpcy5wYXJlbnQ9dCx0aGlzLmNoaWxkcmVuPWUsdGhpcy5kb209bixuLnBtVmlld0Rlc2M9dGhpcyx0aGlzLmNvbnRlbnRET009cix0aGlzLmRpcnR5PVF9LG90PXtiZWZvcmVQb3NpdGlvbjp7Y29uZmlndXJhYmxlOiEwfSxzaXplOntjb25maWd1cmFibGU6ITB9LGJvcmRlcjp7Y29uZmlndXJhYmxlOiEwfSxwb3NCZWZvcmU6e2NvbmZpZ3VyYWJsZTohMH0scG9zQXRTdGFydDp7Y29uZmlndXJhYmxlOiEwfSxwb3NBZnRlcjp7Y29uZmlndXJhYmxlOiEwfSxwb3NBdEVuZDp7Y29uZmlndXJhYmxlOiEwfSxjb250ZW50TG9zdDp7Y29uZmlndXJhYmxlOiEwfX07cnQucHJvdG90eXBlLm1hdGNoZXNXaWRnZXQ9ZnVuY3Rpb24oKXtyZXR1cm4hMX0scnQucHJvdG90eXBlLm1hdGNoZXNNYXJrPWZ1bmN0aW9uKCl7cmV0dXJuITF9LHJ0LnByb3RvdHlwZS5tYXRjaGVzTm9kZT1mdW5jdGlvbigpe3JldHVybiExfSxydC5wcm90b3R5cGUubWF0Y2hlc0hhY2s9ZnVuY3Rpb24oKXtyZXR1cm4hMX0sb3QuYmVmb3JlUG9zaXRpb24uZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuITF9LHJ0LnByb3RvdHlwZS5wYXJzZVJ1bGU9ZnVuY3Rpb24oKXtyZXR1cm4gbnVsbH0scnQucHJvdG90eXBlLnN0b3BFdmVudD1mdW5jdGlvbigpe3JldHVybiExfSxvdC5zaXplLmdldD1mdW5jdGlvbigpe2Zvcih2YXIgdD0wLGU9MDtlPHRoaXMuY2hpbGRyZW4ubGVuZ3RoO2UrKyl0Kz10aGlzLmNoaWxkcmVuW2VdLnNpemU7cmV0dXJuIHR9LG90LmJvcmRlci5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gMH0scnQucHJvdG90eXBlLmRlc3Ryb3k9ZnVuY3Rpb24oKXt0aGlzLnBhcmVudD1udWxsLHRoaXMuZG9tLnBtVmlld0Rlc2M9PXRoaXMmJih0aGlzLmRvbS5wbVZpZXdEZXNjPW51bGwpO2Zvcih2YXIgdD0wO3Q8dGhpcy5jaGlsZHJlbi5sZW5ndGg7dCsrKXRoaXMuY2hpbGRyZW5bdF0uZGVzdHJveSgpfSxydC5wcm90b3R5cGUucG9zQmVmb3JlQ2hpbGQ9ZnVuY3Rpb24odCl7Zm9yKHZhciBlPTAsbj10aGlzLnBvc0F0U3RhcnQ7ZTx0aGlzLmNoaWxkcmVuLmxlbmd0aDtlKyspe3ZhciByPXRoaXMuY2hpbGRyZW5bZV07aWYocj09dClyZXR1cm4gbjtuKz1yLnNpemV9fSxvdC5wb3NCZWZvcmUuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucGFyZW50LnBvc0JlZm9yZUNoaWxkKHRoaXMpfSxvdC5wb3NBdFN0YXJ0LmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLnBhcmVudD90aGlzLnBhcmVudC5wb3NCZWZvcmVDaGlsZCh0aGlzKSt0aGlzLmJvcmRlcjowfSxvdC5wb3NBZnRlci5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5wb3NCZWZvcmUrdGhpcy5zaXplfSxvdC5wb3NBdEVuZC5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5wb3NBdFN0YXJ0K3RoaXMuc2l6ZS0yKnRoaXMuYm9yZGVyfSxydC5wcm90b3R5cGUubG9jYWxQb3NGcm9tRE9NPWZ1bmN0aW9uKHQsZSxuKXtpZih0aGlzLmNvbnRlbnRET00mJnRoaXMuY29udGVudERPTS5jb250YWlucygxPT10Lm5vZGVUeXBlP3Q6dC5wYXJlbnROb2RlKSl7aWYobjwwKXt2YXIgcixvO2lmKHQ9PXRoaXMuY29udGVudERPTSlyPXQuY2hpbGROb2Rlc1tlLTFdO2Vsc2V7d2hpbGUodC5wYXJlbnROb2RlIT10aGlzLmNvbnRlbnRET00pdD10LnBhcmVudE5vZGU7cj10LnByZXZpb3VzU2libGluZ313aGlsZShyJiYoIShvPXIucG1WaWV3RGVzYyl8fG8ucGFyZW50IT10aGlzKSlyPXIucHJldmlvdXNTaWJsaW5nO3JldHVybiByP3RoaXMucG9zQmVmb3JlQ2hpbGQobykrby5zaXplOnRoaXMucG9zQXRTdGFydH12YXIgaSxzO2lmKHQ9PXRoaXMuY29udGVudERPTSlpPXQuY2hpbGROb2Rlc1tlXTtlbHNle3doaWxlKHQucGFyZW50Tm9kZSE9dGhpcy5jb250ZW50RE9NKXQ9dC5wYXJlbnROb2RlO2k9dC5uZXh0U2libGluZ313aGlsZShpJiYoIShzPWkucG1WaWV3RGVzYyl8fHMucGFyZW50IT10aGlzKSlpPWkubmV4dFNpYmxpbmc7cmV0dXJuIGk/dGhpcy5wb3NCZWZvcmVDaGlsZChzKTp0aGlzLnBvc0F0RW5kfXZhciBhO2lmKHRoaXMuY29udGVudERPTSYmdGhpcy5jb250ZW50RE9NIT10aGlzLmRvbSYmdGhpcy5kb20uY29udGFpbnModGhpcy5jb250ZW50RE9NKSlhPTImdC5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbih0aGlzLmNvbnRlbnRET00pO2Vsc2UgaWYodGhpcy5kb20uZmlyc3RDaGlsZCl7aWYoMD09ZSlmb3IodmFyIGM9dDs7Yz1jLnBhcmVudE5vZGUpe2lmKGM9PXRoaXMuZG9tKXthPSExO2JyZWFrfWlmKGMucGFyZW50Tm9kZS5maXJzdENoaWxkIT1jKWJyZWFrfWlmKG51bGw9PWEmJmU9PXQuY2hpbGROb2Rlcy5sZW5ndGgpZm9yKHZhciB1PXQ7O3U9dS5wYXJlbnROb2RlKXtpZih1PT10aGlzLmRvbSl7YT0hMDticmVha31pZih1LnBhcmVudE5vZGUubGFzdENoaWxkIT11KWJyZWFrfX1yZXR1cm4obnVsbD09YT9uPjA6YSk/dGhpcy5wb3NBdEVuZDp0aGlzLnBvc0F0U3RhcnR9LHJ0LnByb3RvdHlwZS5uZWFyZXN0RGVzYz1mdW5jdGlvbih0LGUpe2Zvcih2YXIgbj0hMCxyPXQ7cjtyPXIucGFyZW50Tm9kZSl7dmFyIG89dGhpcy5nZXREZXNjKHIpO2lmKG8mJighZXx8by5ub2RlKSl7aWYoIW58fCFvLm5vZGVET018fCgxPT1vLm5vZGVET00ubm9kZVR5cGU/by5ub2RlRE9NLmNvbnRhaW5zKDE9PXQubm9kZVR5cGU/dDp0LnBhcmVudE5vZGUpOm8ubm9kZURPTT09dCkpcmV0dXJuIG87bj0hMX19fSxydC5wcm90b3R5cGUuZ2V0RGVzYz1mdW5jdGlvbih0KXtmb3IodmFyIGU9dC5wbVZpZXdEZXNjLG49ZTtuO249bi5wYXJlbnQpaWYobj09dGhpcylyZXR1cm4gZX0scnQucHJvdG90eXBlLnBvc0Zyb21ET009ZnVuY3Rpb24odCxlLG4pe2Zvcih2YXIgcj10O3I7cj1yLnBhcmVudE5vZGUpe3ZhciBvPXRoaXMuZ2V0RGVzYyhyKTtpZihvKXJldHVybiBvLmxvY2FsUG9zRnJvbURPTSh0LGUsbil9cmV0dXJuLTF9LHJ0LnByb3RvdHlwZS5kZXNjQXQ9ZnVuY3Rpb24odCl7Zm9yKHZhciBlPTAsbj0wO2U8dGhpcy5jaGlsZHJlbi5sZW5ndGg7ZSsrKXt2YXIgcj10aGlzLmNoaWxkcmVuW2VdLG89bityLnNpemU7aWYobj09dCYmbyE9bil7d2hpbGUoIXIuYm9yZGVyJiZyLmNoaWxkcmVuLmxlbmd0aClyPXIuY2hpbGRyZW5bMF07cmV0dXJuIHJ9aWYodDxvKXJldHVybiByLmRlc2NBdCh0LW4tci5ib3JkZXIpO249b319LHJ0LnByb3RvdHlwZS5kb21Gcm9tUG9zPWZ1bmN0aW9uKHQpe2lmKCF0aGlzLmNvbnRlbnRET00pcmV0dXJue25vZGU6dGhpcy5kb20sb2Zmc2V0OjB9O2Zvcih2YXIgZT0wLG49MDs7bisrKXtpZihlPT10KXt3aGlsZShuPHRoaXMuY2hpbGRyZW4ubGVuZ3RoJiYodGhpcy5jaGlsZHJlbltuXS5iZWZvcmVQb3NpdGlvbnx8dGhpcy5jaGlsZHJlbltuXS5kb20ucGFyZW50Tm9kZSE9dGhpcy5jb250ZW50RE9NKSluKys7cmV0dXJue25vZGU6dGhpcy5jb250ZW50RE9NLG9mZnNldDpuPT10aGlzLmNoaWxkcmVuLmxlbmd0aD90aGlzLmNvbnRlbnRET00uY2hpbGROb2Rlcy5sZW5ndGg6Zih0aGlzLmNoaWxkcmVuW25dLmRvbSl9fWlmKG49PXRoaXMuY2hpbGRyZW4ubGVuZ3RoKXRocm93IG5ldyBFcnJvcigiSW52YWxpZCBwb3NpdGlvbiAiK3QpO3ZhciByPXRoaXMuY2hpbGRyZW5bbl0sbz1lK3Iuc2l6ZTtpZih0PG8pcmV0dXJuIHIuZG9tRnJvbVBvcyh0LWUtci5ib3JkZXIpO2U9b319LHJ0LnByb3RvdHlwZS5wYXJzZVJhbmdlPWZ1bmN0aW9uKHQsZSxuKXtpZih2b2lkIDA9PT1uJiYobj0wKSwwPT10aGlzLmNoaWxkcmVuLmxlbmd0aClyZXR1cm57bm9kZTp0aGlzLmNvbnRlbnRET00sZnJvbTp0LHRvOmUsZnJvbU9mZnNldDowLHRvT2Zmc2V0OnRoaXMuY29udGVudERPTS5jaGlsZE5vZGVzLmxlbmd0aH07Zm9yKHZhciByPS0xLG89LTEsaT1uLHM9MDs7cysrKXt2YXIgYT10aGlzLmNoaWxkcmVuW3NdLGM9aSthLnNpemU7aWYoLTE9PXImJnQ8PWMpe3ZhciB1PWkrYS5ib3JkZXI7aWYodD49dSYmZTw9Yy1hLmJvcmRlciYmYS5ub2RlJiZhLmNvbnRlbnRET00mJnRoaXMuY29udGVudERPTS5jb250YWlucyhhLmNvbnRlbnRET00pKXJldHVybiBhLnBhcnNlUmFuZ2UodCxlLHUpO3Q9aTtmb3IodmFyIGw9cztsPjA7bC0tKXt2YXIgaD10aGlzLmNoaWxkcmVuW2wtMV07aWYoaC5zaXplJiZoLmRvbS5wYXJlbnROb2RlPT10aGlzLmNvbnRlbnRET00mJiFoLmVtcHR5Q2hpbGRBdCgxKSl7cj1mKGguZG9tKSsxO2JyZWFrfXQtPWguc2l6ZX0tMT09ciYmKHI9MCl9aWYocj4tMSYmZTw9Yyl7ZT1jO2Zvcih2YXIgcD1zKzE7cDx0aGlzLmNoaWxkcmVuLmxlbmd0aDtwKyspe3ZhciBkPXRoaXMuY2hpbGRyZW5bcF07aWYoZC5zaXplJiZkLmRvbS5wYXJlbnROb2RlPT10aGlzLmNvbnRlbnRET00mJiFkLmVtcHR5Q2hpbGRBdCgtMSkpe289ZihkLmRvbSk7YnJlYWt9ZSs9ZC5zaXplfS0xPT1vJiYobz10aGlzLmNvbnRlbnRET00uY2hpbGROb2Rlcy5sZW5ndGgpO2JyZWFrfWk9Y31yZXR1cm57bm9kZTp0aGlzLmNvbnRlbnRET00sZnJvbTp0LHRvOmUsZnJvbU9mZnNldDpyLHRvT2Zmc2V0Om99fSxydC5wcm90b3R5cGUuZW1wdHlDaGlsZEF0PWZ1bmN0aW9uKHQpe2lmKHRoaXMuYm9yZGVyfHwhdGhpcy5jb250ZW50RE9NfHwhdGhpcy5jaGlsZHJlbi5sZW5ndGgpcmV0dXJuITE7dmFyIGU9dGhpcy5jaGlsZHJlblt0PDA/MDp0aGlzLmNoaWxkcmVuLmxlbmd0aC0xXTtyZXR1cm4gMD09ZS5zaXplfHxlLmVtcHR5Q2hpbGRBdCh0KX0scnQucHJvdG90eXBlLmRvbUFmdGVyUG9zPWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMuZG9tRnJvbVBvcyh0KSxuPWUubm9kZSxyPWUub2Zmc2V0O2lmKDEhPW4ubm9kZVR5cGV8fHI9PW4uY2hpbGROb2Rlcy5sZW5ndGgpdGhyb3cgbmV3IFJhbmdlRXJyb3IoIk5vIG5vZGUgYWZ0ZXIgcG9zICIrdCk7cmV0dXJuIG4uY2hpbGROb2Rlc1tyXX0scnQucHJvdG90eXBlLnNldFNlbGVjdGlvbj1mdW5jdGlvbih0LGUsbixyKXtmb3IodmFyIG89TWF0aC5taW4odCxlKSxpPU1hdGgubWF4KHQsZSkscz0wLGE9MDtzPHRoaXMuY2hpbGRyZW4ubGVuZ3RoO3MrKyl7dmFyIGM9dGhpcy5jaGlsZHJlbltzXSx1PWErYy5zaXplO2lmKG8+YSYmaTx1KXJldHVybiBjLnNldFNlbGVjdGlvbih0LWEtYy5ib3JkZXIsZS1hLWMuYm9yZGVyLG4scik7YT11fXZhciBsPXRoaXMuZG9tRnJvbVBvcyh0KSxoPXRoaXMuZG9tRnJvbVBvcyhlKSxmPW4uZ2V0U2VsZWN0aW9uKCk7aWYocnx8IXYobC5ub2RlLGwub2Zmc2V0LGYuYW5jaG9yTm9kZSxmLmFuY2hvck9mZnNldCl8fCF2KGgubm9kZSxoLm9mZnNldCxmLmZvY3VzTm9kZSxmLmZvY3VzT2Zmc2V0KSl7dmFyIHA9ITE7aWYoZi5leHRlbmR8fHQ9PWUpe2YuY29sbGFwc2UobC5ub2RlLGwub2Zmc2V0KTt0cnl7dCE9ZSYmZi5leHRlbmQoaC5ub2RlLGgub2Zmc2V0KSxwPSEwfWNhdGNoKGcpe2lmKCEoZyBpbnN0YW5jZW9mIERPTUV4Y2VwdGlvbikpdGhyb3cgZ319aWYoIXApe2lmKHQ+ZSl7dmFyIGQ9bDtsPWgsaD1kfXZhciBtPWRvY3VtZW50LmNyZWF0ZVJhbmdlKCk7bS5zZXRFbmQoaC5ub2RlLGgub2Zmc2V0KSxtLnNldFN0YXJ0KGwubm9kZSxsLm9mZnNldCksZi5yZW1vdmVBbGxSYW5nZXMoKSxmLmFkZFJhbmdlKG0pfX19LHJ0LnByb3RvdHlwZS5pZ25vcmVNdXRhdGlvbj1mdW5jdGlvbih0KXtyZXR1cm4hdGhpcy5jb250ZW50RE9NJiYic2VsZWN0aW9uIiE9dC50eXBlfSxvdC5jb250ZW50TG9zdC5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jb250ZW50RE9NJiZ0aGlzLmNvbnRlbnRET00hPXRoaXMuZG9tJiYhdGhpcy5kb20uY29udGFpbnModGhpcy5jb250ZW50RE9NKX0scnQucHJvdG90eXBlLm1hcmtEaXJ0eT1mdW5jdGlvbih0LGUpe2Zvcih2YXIgbj0wLHI9MDtyPHRoaXMuY2hpbGRyZW4ubGVuZ3RoO3IrKyl7dmFyIG89dGhpcy5jaGlsZHJlbltyXSxpPW4rby5zaXplO2lmKG49PWk/dDw9aSYmZT49bjp0PGkmJmU+bil7dmFyIHM9bitvLmJvcmRlcixhPWktby5ib3JkZXI7aWYodD49cyYmZTw9YSlyZXR1cm4gdGhpcy5kaXJ0eT10PT1ufHxlPT1pP2V0OnR0LHZvaWQodCE9c3x8ZSE9YXx8IW8uY29udGVudExvc3QmJm8uZG9tLnBhcmVudE5vZGU9PXRoaXMuY29udGVudERPTT9vLm1hcmtEaXJ0eSh0LXMsZS1zKTpvLmRpcnR5PW50KTtvLmRpcnR5PW50fW49aX10aGlzLmRpcnR5PWV0fSxydC5wcm90b3R5cGUubWFya1BhcmVudHNEaXJ0eT1mdW5jdGlvbigpe2Zvcih2YXIgdD0xLGU9dGhpcy5wYXJlbnQ7ZTtlPWUucGFyZW50LHQrKyl7dmFyIG49MT09dD9ldDp0dDtlLmRpcnR5PG4mJihlLmRpcnR5PW4pfX0sT2JqZWN0LmRlZmluZVByb3BlcnRpZXMocnQucHJvdG90eXBlLG90KTt2YXIgaXQ9W10sc3Q9ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZShlLG4scixvKXt2YXIgaSxzPW4udHlwZS50b0RPTTtpZigiZnVuY3Rpb24iPT10eXBlb2YgcyYmKHM9cyhyLChmdW5jdGlvbigpe3JldHVybiBpP2kucGFyZW50P2kucGFyZW50LnBvc0JlZm9yZUNoaWxkKGkpOnZvaWQgMDpvfSkpKSwhbi50eXBlLnNwZWMucmF3KXtpZigxIT1zLm5vZGVUeXBlKXt2YXIgYT1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJzcGFuIik7YS5hcHBlbmRDaGlsZChzKSxzPWF9cy5jb250ZW50RWRpdGFibGU9ITEscy5jbGFzc0xpc3QuYWRkKCJQcm9zZU1pcnJvci13aWRnZXQiKX10LmNhbGwodGhpcyxlLGl0LHMsbnVsbCksdGhpcy53aWRnZXQ9bixpPXRoaXN9dCYmKGUuX19wcm90b19fPXQpLGUucHJvdG90eXBlPU9iamVjdC5jcmVhdGUodCYmdC5wcm90b3R5cGUpLGUucHJvdG90eXBlLmNvbnN0cnVjdG9yPWU7dmFyIG49e2JlZm9yZVBvc2l0aW9uOntjb25maWd1cmFibGU6ITB9fTtyZXR1cm4gbi5iZWZvcmVQb3NpdGlvbi5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy53aWRnZXQudHlwZS5zaWRlPDB9LGUucHJvdG90eXBlLm1hdGNoZXNXaWRnZXQ9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuZGlydHk9PVEmJnQudHlwZS5lcSh0aGlzLndpZGdldC50eXBlKX0sZS5wcm90b3R5cGUucGFyc2VSdWxlPWZ1bmN0aW9uKCl7cmV0dXJue2lnbm9yZTohMH19LGUucHJvdG90eXBlLnN0b3BFdmVudD1mdW5jdGlvbih0KXt2YXIgZT10aGlzLndpZGdldC5zcGVjLnN0b3BFdmVudDtyZXR1cm4hIWUmJmUodCl9LGUucHJvdG90eXBlLmlnbm9yZU11dGF0aW9uPWZ1bmN0aW9uKHQpe3JldHVybiJzZWxlY3Rpb24iIT10LnR5cGV8fHRoaXMud2lkZ2V0LnNwZWMuaWdub3JlU2VsZWN0aW9ufSxPYmplY3QuZGVmaW5lUHJvcGVydGllcyhlLnByb3RvdHlwZSxuKSxlfShydCksYXQ9ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZShlLG4scixvKXt0LmNhbGwodGhpcyxlLGl0LG4sbnVsbCksdGhpcy50ZXh0RE9NPXIsdGhpcy50ZXh0PW99dCYmKGUuX19wcm90b19fPXQpLGUucHJvdG90eXBlPU9iamVjdC5jcmVhdGUodCYmdC5wcm90b3R5cGUpLGUucHJvdG90eXBlLmNvbnN0cnVjdG9yPWU7dmFyIG49e3NpemU6e2NvbmZpZ3VyYWJsZTohMH19O3JldHVybiBuLnNpemUuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudGV4dC5sZW5ndGh9LGUucHJvdG90eXBlLmxvY2FsUG9zRnJvbURPTT1mdW5jdGlvbih0LGUpe3JldHVybiB0IT10aGlzLnRleHRET00/dGhpcy5wb3NBdFN0YXJ0KyhlP3RoaXMuc2l6ZTowKTp0aGlzLnBvc0F0U3RhcnQrZX0sZS5wcm90b3R5cGUuZG9tRnJvbVBvcz1mdW5jdGlvbih0KXtyZXR1cm57bm9kZTp0aGlzLnRleHRET00sb2Zmc2V0OnR9fSxlLnByb3RvdHlwZS5pZ25vcmVNdXRhdGlvbj1mdW5jdGlvbih0KXtyZXR1cm4iY2hhcmFjdGVyRGF0YSI9PT10LnR5cGUmJnQudGFyZ2V0Lm5vZGVWYWx1ZT09dC5vbGRWYWx1ZX0sT2JqZWN0LmRlZmluZVByb3BlcnRpZXMoZS5wcm90b3R5cGUsbiksZX0ocnQpLGN0PWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoZSxuLHIsbyl7dC5jYWxsKHRoaXMsZSxbXSxyLG8pLHRoaXMubWFyaz1ufXJldHVybiB0JiYoZS5fX3Byb3RvX189dCksZS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZSh0JiZ0LnByb3RvdHlwZSksZS5wcm90b3R5cGUuY29uc3RydWN0b3I9ZSxlLmNyZWF0ZT1mdW5jdGlvbih0LG4scixpKXt2YXIgcz1pLm5vZGVWaWV3c1tuLnR5cGUubmFtZV0sYT1zJiZzKG4saSxyKTtyZXR1cm4gYSYmYS5kb218fChhPW9bImIiXS5yZW5kZXJTcGVjKGRvY3VtZW50LG4udHlwZS5zcGVjLnRvRE9NKG4scikpKSxuZXcgZSh0LG4sYS5kb20sYS5jb250ZW50RE9NfHxhLmRvbSl9LGUucHJvdG90eXBlLnBhcnNlUnVsZT1mdW5jdGlvbigpe3JldHVybnttYXJrOnRoaXMubWFyay50eXBlLm5hbWUsYXR0cnM6dGhpcy5tYXJrLmF0dHJzLGNvbnRlbnRFbGVtZW50OnRoaXMuY29udGVudERPTX19LGUucHJvdG90eXBlLm1hdGNoZXNNYXJrPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLmRpcnR5IT1udCYmdGhpcy5tYXJrLmVxKHQpfSxlLnByb3RvdHlwZS5tYXJrRGlydHk9ZnVuY3Rpb24oZSxuKXtpZih0LnByb3RvdHlwZS5tYXJrRGlydHkuY2FsbCh0aGlzLGUsbiksdGhpcy5kaXJ0eSE9USl7dmFyIHI9dGhpcy5wYXJlbnQ7d2hpbGUoIXIubm9kZSlyPXIucGFyZW50O3IuZGlydHk8dGhpcy5kaXJ0eSYmKHIuZGlydHk9dGhpcy5kaXJ0eSksdGhpcy5kaXJ0eT1RfX0sZS5wcm90b3R5cGUuc2xpY2U9ZnVuY3Rpb24odCxuLHIpe3ZhciBvPWUuY3JlYXRlKHRoaXMucGFyZW50LHRoaXMubWFyaywhMCxyKSxpPXRoaXMuY2hpbGRyZW4scz10aGlzLnNpemU7bjxzJiYoaT1FdChpLG4scyxyKSksdD4wJiYoaT1FdChpLDAsdCxyKSk7Zm9yKHZhciBhPTA7YTxpLmxlbmd0aDthKyspaVthXS5wYXJlbnQ9bztyZXR1cm4gby5jaGlsZHJlbj1pLG99LGV9KHJ0KSx1dD1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKGUsbixyLG8saSxzLGEsYyx1KXt0LmNhbGwodGhpcyxlLG4uaXNMZWFmP2l0OltdLGkscyksdGhpcy5ub2RlRE9NPWEsdGhpcy5ub2RlPW4sdGhpcy5vdXRlckRlY289cix0aGlzLmlubmVyRGVjbz1vLHMmJnRoaXMudXBkYXRlQ2hpbGRyZW4oYyx1KX10JiYoZS5fX3Byb3RvX189dCksZS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZSh0JiZ0LnByb3RvdHlwZSksZS5wcm90b3R5cGUuY29uc3RydWN0b3I9ZTt2YXIgbj17c2l6ZTp7Y29uZmlndXJhYmxlOiEwfSxib3JkZXI6e2NvbmZpZ3VyYWJsZTohMH19O3JldHVybiBlLmNyZWF0ZT1mdW5jdGlvbih0LG4scixpLHMsYSl7dmFyIGMsdSxsPXMubm9kZVZpZXdzW24udHlwZS5uYW1lXSxoPWwmJmwobixzLChmdW5jdGlvbigpe3JldHVybiB1P3UucGFyZW50P3UucGFyZW50LnBvc0JlZm9yZUNoaWxkKHUpOnZvaWQgMDphfSksciksZj1oJiZoLmRvbSxwPWgmJmguY29udGVudERPTTtpZihuLmlzVGV4dClpZihmKXtpZigzIT1mLm5vZGVUeXBlKXRocm93IG5ldyBSYW5nZUVycm9yKCJUZXh0IG11c3QgYmUgcmVuZGVyZWQgYXMgYSBET00gdGV4dCBub2RlIil9ZWxzZSBmPWRvY3VtZW50LmNyZWF0ZVRleHROb2RlKG4udGV4dCk7ZWxzZSBmfHwoYz1vWyJiIl0ucmVuZGVyU3BlYyhkb2N1bWVudCxuLnR5cGUuc3BlYy50b0RPTShuKSksZj1jLmRvbSxwPWMuY29udGVudERPTSk7cHx8bi5pc1RleHR8fCJCUiI9PWYubm9kZU5hbWV8fChmLmhhc0F0dHJpYnV0ZSgiY29udGVudGVkaXRhYmxlIil8fChmLmNvbnRlbnRFZGl0YWJsZT0hMSksbi50eXBlLnNwZWMuZHJhZ2dhYmxlJiYoZi5kcmFnZ2FibGU9ITApKTt2YXIgZD1mO3JldHVybiBmPWJ0KGYscixuKSxoP3U9bmV3IHB0KHQsbixyLGksZixwLGQsaCxzLGErMSk6bi5pc1RleHQ/bmV3IGh0KHQsbixyLGksZixkLHMpOm5ldyBlKHQsbixyLGksZixwLGQscyxhKzEpfSxlLnByb3RvdHlwZS5wYXJzZVJ1bGU9ZnVuY3Rpb24oKXt2YXIgdD10aGlzO2lmKHRoaXMubm9kZS50eXBlLnNwZWMucmVwYXJzZUluVmlldylyZXR1cm4gbnVsbDt2YXIgZT17bm9kZTp0aGlzLm5vZGUudHlwZS5uYW1lLGF0dHJzOnRoaXMubm9kZS5hdHRyc307cmV0dXJuIHRoaXMubm9kZS50eXBlLnNwZWMuY29kZSYmKGUucHJlc2VydmVXaGl0ZXNwYWNlPSJmdWxsIiksdGhpcy5jb250ZW50RE9NJiYhdGhpcy5jb250ZW50TG9zdD9lLmNvbnRlbnRFbGVtZW50PXRoaXMuY29udGVudERPTTplLmdldENvbnRlbnQ9ZnVuY3Rpb24oKXtyZXR1cm4gdC5jb250ZW50RE9NP29bImMiXS5lbXB0eTp0Lm5vZGUuY29udGVudH0sZX0sZS5wcm90b3R5cGUubWF0Y2hlc05vZGU9ZnVuY3Rpb24odCxlLG4pe3JldHVybiB0aGlzLmRpcnR5PT1RJiZ0LmVxKHRoaXMubm9kZSkmJnh0KGUsdGhpcy5vdXRlckRlY28pJiZuLmVxKHRoaXMuaW5uZXJEZWNvKX0sbi5zaXplLmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLm5vZGUubm9kZVNpemV9LG4uYm9yZGVyLmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLm5vZGUuaXNMZWFmPzA6MX0sZS5wcm90b3R5cGUudXBkYXRlQ2hpbGRyZW49ZnVuY3Rpb24odCxlKXt2YXIgbj10aGlzLHI9dGhpcy5ub2RlLmlubGluZUNvbnRlbnQsaT1lLHM9ciYmdC5jb21wb3NpbmcmJnRoaXMubG9jYWxDb21wb3NpdGlvbk5vZGUodCxlKSxhPW5ldyBTdCh0aGlzLHMmJnMubm9kZSk7TXQodGhpcy5ub2RlLHRoaXMuaW5uZXJEZWNvLChmdW5jdGlvbihlLHMsYyl7ZS5zcGVjLm1hcmtzP2Euc3luY1RvTWFya3MoZS5zcGVjLm1hcmtzLHIsdCk6ZS50eXBlLnNpZGU+PTAmJiFjJiZhLnN5bmNUb01hcmtzKHM9PW4ubm9kZS5jaGlsZENvdW50P29bImQiXS5ub25lOm4ubm9kZS5jaGlsZChzKS5tYXJrcyxyLHQpLGEucGxhY2VXaWRnZXQoZSx0LGkpfSksKGZ1bmN0aW9uKGUsbixvLHMpe2Euc3luY1RvTWFya3MoZS5tYXJrcyxyLHQpLGEuZmluZE5vZGVNYXRjaChlLG4sbyxzKXx8YS51cGRhdGVOZXh0Tm9kZShlLG4sbyx0LHMpfHxhLmFkZE5vZGUoZSxuLG8sdCxpKSxpKz1lLm5vZGVTaXplfSkpLGEuc3luY1RvTWFya3MoaXQscix0KSx0aGlzLm5vZGUuaXNUZXh0YmxvY2smJmEuYWRkVGV4dGJsb2NrSGFja3MoKSxhLmRlc3Ryb3lSZXN0KCksKGEuY2hhbmdlZHx8dGhpcy5kaXJ0eT09ZXQpJiYocyYmdGhpcy5wcm90ZWN0TG9jYWxDb21wb3NpdGlvbih0LHMpLHRoaXMucmVuZGVyQ2hpbGRyZW4oKSl9LGUucHJvdG90eXBlLnJlbmRlckNoaWxkcmVuPWZ1bmN0aW9uKCl7ZHQodGhpcy5jb250ZW50RE9NLHRoaXMuY2hpbGRyZW4pLHMuaW9zJiZOdCh0aGlzLmRvbSl9LGUucHJvdG90eXBlLmxvY2FsQ29tcG9zaXRpb25Ob2RlPWZ1bmN0aW9uKHQsZSl7dmFyIG49dC5zdGF0ZS5zZWxlY3Rpb24sbz1uLmZyb20saT1uLnRvO2lmKCEoISh0LnN0YXRlLnNlbGVjdGlvbiBpbnN0YW5jZW9mIHJbIlRleHRTZWxlY3Rpb24iXSl8fG88ZXx8aT5lK3RoaXMubm9kZS5jb250ZW50LnNpemUpKXt2YXIgcz10LnJvb3QuZ2V0U2VsZWN0aW9uKCksYT1UdChzLmZvY3VzTm9kZSxzLmZvY3VzT2Zmc2V0KTtpZihhJiZ0aGlzLmRvbS5jb250YWlucyhhLnBhcmVudE5vZGUpKXt2YXIgYz1hLm5vZGVWYWx1ZSx1PUF0KHRoaXMubm9kZS5jb250ZW50LGMsby1lLGktZSk7cmV0dXJuIHU8MD9udWxsOntub2RlOmEscG9zOnUsdGV4dDpjfX19fSxlLnByb3RvdHlwZS5wcm90ZWN0TG9jYWxDb21wb3NpdGlvbj1mdW5jdGlvbih0LGUpe3ZhciBuPWUubm9kZSxyPWUucG9zLG89ZS50ZXh0O2lmKCF0aGlzLmdldERlc2Mobikpe2Zvcih2YXIgaT1uOztpPWkucGFyZW50Tm9kZSl7aWYoaS5wYXJlbnROb2RlPT10aGlzLmNvbnRlbnRET00pYnJlYWs7d2hpbGUoaS5wcmV2aW91c1NpYmxpbmcpaS5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKGkucHJldmlvdXNTaWJsaW5nKTt3aGlsZShpLm5leHRTaWJsaW5nKWkucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChpLm5leHRTaWJsaW5nKTtpLnBtVmlld0Rlc2MmJihpLnBtVmlld0Rlc2M9bnVsbCl9dmFyIHM9bmV3IGF0KHRoaXMsaSxuLG8pO3QuY29tcG9zaXRpb25Ob2Rlcy5wdXNoKHMpLHRoaXMuY2hpbGRyZW49RXQodGhpcy5jaGlsZHJlbixyLHIrby5sZW5ndGgsdCxzKX19LGUucHJvdG90eXBlLnVwZGF0ZT1mdW5jdGlvbih0LGUsbixyKXtyZXR1cm4hKHRoaXMuZGlydHk9PW50fHwhdC5zYW1lTWFya3VwKHRoaXMubm9kZSkpJiYodGhpcy51cGRhdGVJbm5lcih0LGUsbixyKSwhMCl9LGUucHJvdG90eXBlLnVwZGF0ZUlubmVyPWZ1bmN0aW9uKHQsZSxuLHIpe3RoaXMudXBkYXRlT3V0ZXJEZWNvKGUpLHRoaXMubm9kZT10LHRoaXMuaW5uZXJEZWNvPW4sdGhpcy5jb250ZW50RE9NJiZ0aGlzLnVwZGF0ZUNoaWxkcmVuKHIsdGhpcy5wb3NBdFN0YXJ0KSx0aGlzLmRpcnR5PVF9LGUucHJvdG90eXBlLnVwZGF0ZU91dGVyRGVjbz1mdW5jdGlvbih0KXtpZigheHQodCx0aGlzLm91dGVyRGVjbykpe3ZhciBlPTEhPXRoaXMubm9kZURPTS5ub2RlVHlwZSxuPXRoaXMuZG9tO3RoaXMuZG9tPXl0KHRoaXMuZG9tLHRoaXMubm9kZURPTSxndCh0aGlzLm91dGVyRGVjbyx0aGlzLm5vZGUsZSksZ3QodCx0aGlzLm5vZGUsZSkpLHRoaXMuZG9tIT1uJiYobi5wbVZpZXdEZXNjPW51bGwsdGhpcy5kb20ucG1WaWV3RGVzYz10aGlzKSx0aGlzLm91dGVyRGVjbz10fX0sZS5wcm90b3R5cGUuc2VsZWN0Tm9kZT1mdW5jdGlvbigpe3RoaXMubm9kZURPTS5jbGFzc0xpc3QuYWRkKCJQcm9zZU1pcnJvci1zZWxlY3RlZG5vZGUiKSwhdGhpcy5jb250ZW50RE9NJiZ0aGlzLm5vZGUudHlwZS5zcGVjLmRyYWdnYWJsZXx8KHRoaXMuZG9tLmRyYWdnYWJsZT0hMCl9LGUucHJvdG90eXBlLmRlc2VsZWN0Tm9kZT1mdW5jdGlvbigpe3RoaXMubm9kZURPTS5jbGFzc0xpc3QucmVtb3ZlKCJQcm9zZU1pcnJvci1zZWxlY3RlZG5vZGUiKSwhdGhpcy5jb250ZW50RE9NJiZ0aGlzLm5vZGUudHlwZS5zcGVjLmRyYWdnYWJsZXx8dGhpcy5kb20ucmVtb3ZlQXR0cmlidXRlKCJkcmFnZ2FibGUiKX0sT2JqZWN0LmRlZmluZVByb3BlcnRpZXMoZS5wcm90b3R5cGUsbiksZX0ocnQpO2Z1bmN0aW9uIGx0KHQsZSxuLHIsbyl7cmV0dXJuIGJ0KHIsZSx0KSxuZXcgdXQobnVsbCx0LGUsbixyLHIscixvLDApfXZhciBodD1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKGUsbixyLG8saSxzLGEpe3QuY2FsbCh0aGlzLGUsbixyLG8saSxudWxsLHMsYSl9cmV0dXJuIHQmJihlLl9fcHJvdG9fXz10KSxlLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKHQmJnQucHJvdG90eXBlKSxlLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1lLGUucHJvdG90eXBlLnBhcnNlUnVsZT1mdW5jdGlvbigpe3ZhciB0PXRoaXMubm9kZURPTS5wYXJlbnROb2RlO3doaWxlKHQmJnQhPXRoaXMuZG9tJiYhdC5wbUlzRGVjbyl0PXQucGFyZW50Tm9kZTtyZXR1cm57c2tpcDp0fHwhMH19LGUucHJvdG90eXBlLnVwZGF0ZT1mdW5jdGlvbih0LGUpe3JldHVybiEodGhpcy5kaXJ0eT09bnR8fHRoaXMuZGlydHkhPVEmJiF0aGlzLmluUGFyZW50KCl8fCF0LnNhbWVNYXJrdXAodGhpcy5ub2RlKSkmJih0aGlzLnVwZGF0ZU91dGVyRGVjbyhlKSx0aGlzLmRpcnR5PT1RJiZ0LnRleHQ9PXRoaXMubm9kZS50ZXh0fHx0LnRleHQ9PXRoaXMubm9kZURPTS5ub2RlVmFsdWV8fCh0aGlzLm5vZGVET00ubm9kZVZhbHVlPXQudGV4dCksdGhpcy5ub2RlPXQsdGhpcy5kaXJ0eT1RLCEwKX0sZS5wcm90b3R5cGUuaW5QYXJlbnQ9ZnVuY3Rpb24oKXtmb3IodmFyIHQ9dGhpcy5wYXJlbnQuY29udGVudERPTSxlPXRoaXMubm9kZURPTTtlO2U9ZS5wYXJlbnROb2RlKWlmKGU9PXQpcmV0dXJuITA7cmV0dXJuITF9LGUucHJvdG90eXBlLmRvbUZyb21Qb3M9ZnVuY3Rpb24odCl7cmV0dXJue25vZGU6dGhpcy5ub2RlRE9NLG9mZnNldDp0fX0sZS5wcm90b3R5cGUubG9jYWxQb3NGcm9tRE9NPWZ1bmN0aW9uKGUsbixyKXtyZXR1cm4gZT09dGhpcy5ub2RlRE9NP3RoaXMucG9zQXRTdGFydCtNYXRoLm1pbihuLHRoaXMubm9kZS50ZXh0Lmxlbmd0aCk6dC5wcm90b3R5cGUubG9jYWxQb3NGcm9tRE9NLmNhbGwodGhpcyxlLG4scil9LGUucHJvdG90eXBlLmlnbm9yZU11dGF0aW9uPWZ1bmN0aW9uKHQpe3JldHVybiJjaGFyYWN0ZXJEYXRhIiE9dC50eXBlJiYic2VsZWN0aW9uIiE9dC50eXBlfSxlLnByb3RvdHlwZS5zbGljZT1mdW5jdGlvbih0LG4scil7dmFyIG89dGhpcy5ub2RlLmN1dCh0LG4pLGk9ZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoby50ZXh0KTtyZXR1cm4gbmV3IGUodGhpcy5wYXJlbnQsbyx0aGlzLm91dGVyRGVjbyx0aGlzLmlubmVyRGVjbyxpLGkscil9LGV9KHV0KSxmdD1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKCl7dC5hcHBseSh0aGlzLGFyZ3VtZW50cyl9cmV0dXJuIHQmJihlLl9fcHJvdG9fXz10KSxlLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKHQmJnQucHJvdG90eXBlKSxlLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1lLGUucHJvdG90eXBlLnBhcnNlUnVsZT1mdW5jdGlvbigpe3JldHVybntpZ25vcmU6ITB9fSxlLnByb3RvdHlwZS5tYXRjaGVzSGFjaz1mdW5jdGlvbigpe3JldHVybiB0aGlzLmRpcnR5PT1RfSxlfShydCkscHQ9ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZShlLG4scixvLGkscyxhLGMsdSxsKXt0LmNhbGwodGhpcyxlLG4scixvLGkscyxhLHUsbCksdGhpcy5zcGVjPWN9cmV0dXJuIHQmJihlLl9fcHJvdG9fXz10KSxlLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKHQmJnQucHJvdG90eXBlKSxlLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1lLGUucHJvdG90eXBlLnVwZGF0ZT1mdW5jdGlvbihlLG4scixvKXtpZih0aGlzLmRpcnR5PT1udClyZXR1cm4hMTtpZih0aGlzLnNwZWMudXBkYXRlKXt2YXIgaT10aGlzLnNwZWMudXBkYXRlKGUsbik7cmV0dXJuIGkmJnRoaXMudXBkYXRlSW5uZXIoZSxuLHIsbyksaX1yZXR1cm4hKCF0aGlzLmNvbnRlbnRET00mJiFlLmlzTGVhZikmJnQucHJvdG90eXBlLnVwZGF0ZS5jYWxsKHRoaXMsZSxuLHIsbyl9LGUucHJvdG90eXBlLnNlbGVjdE5vZGU9ZnVuY3Rpb24oKXt0aGlzLnNwZWMuc2VsZWN0Tm9kZT90aGlzLnNwZWMuc2VsZWN0Tm9kZSgpOnQucHJvdG90eXBlLnNlbGVjdE5vZGUuY2FsbCh0aGlzKX0sZS5wcm90b3R5cGUuZGVzZWxlY3ROb2RlPWZ1bmN0aW9uKCl7dGhpcy5zcGVjLmRlc2VsZWN0Tm9kZT90aGlzLnNwZWMuZGVzZWxlY3ROb2RlKCk6dC5wcm90b3R5cGUuZGVzZWxlY3ROb2RlLmNhbGwodGhpcyl9LGUucHJvdG90eXBlLnNldFNlbGVjdGlvbj1mdW5jdGlvbihlLG4scixvKXt0aGlzLnNwZWMuc2V0U2VsZWN0aW9uP3RoaXMuc3BlYy5zZXRTZWxlY3Rpb24oZSxuLHIpOnQucHJvdG90eXBlLnNldFNlbGVjdGlvbi5jYWxsKHRoaXMsZSxuLHIsbyl9LGUucHJvdG90eXBlLmRlc3Ryb3k9ZnVuY3Rpb24oKXt0aGlzLnNwZWMuZGVzdHJveSYmdGhpcy5zcGVjLmRlc3Ryb3koKSx0LnByb3RvdHlwZS5kZXN0cm95LmNhbGwodGhpcyl9LGUucHJvdG90eXBlLnN0b3BFdmVudD1mdW5jdGlvbih0KXtyZXR1cm4hIXRoaXMuc3BlYy5zdG9wRXZlbnQmJnRoaXMuc3BlYy5zdG9wRXZlbnQodCl9LGUucHJvdG90eXBlLmlnbm9yZU11dGF0aW9uPWZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLnNwZWMuaWdub3JlTXV0YXRpb24/dGhpcy5zcGVjLmlnbm9yZU11dGF0aW9uKGUpOnQucHJvdG90eXBlLmlnbm9yZU11dGF0aW9uLmNhbGwodGhpcyxlKX0sZX0odXQpO2Z1bmN0aW9uIGR0KHQsZSl7Zm9yKHZhciBuPXQuZmlyc3RDaGlsZCxyPTA7cjxlLmxlbmd0aDtyKyspe3ZhciBvPWVbcl0saT1vLmRvbTtpZihpLnBhcmVudE5vZGU9PXQpe3doaWxlKGkhPW4pbj1rdChuKTtuPW4ubmV4dFNpYmxpbmd9ZWxzZSB0Lmluc2VydEJlZm9yZShpLG4pO2lmKG8gaW5zdGFuY2VvZiBjdCl7dmFyIHM9bj9uLnByZXZpb3VzU2libGluZzp0Lmxhc3RDaGlsZDtkdChvLmNvbnRlbnRET00sby5jaGlsZHJlbiksbj1zP3MubmV4dFNpYmxpbmc6dC5maXJzdENoaWxkfX13aGlsZShuKW49a3Qobil9ZnVuY3Rpb24gdnQodCl7dCYmKHRoaXMubm9kZU5hbWU9dCl9dnQucHJvdG90eXBlPU9iamVjdC5jcmVhdGUobnVsbCk7dmFyIG10PVtuZXcgdnRdO2Z1bmN0aW9uIGd0KHQsZSxuKXtpZigwPT10Lmxlbmd0aClyZXR1cm4gbXQ7Zm9yKHZhciByPW4/bXRbMF06bmV3IHZ0LG89W3JdLGk9MDtpPHQubGVuZ3RoO2krKyl7dmFyIHM9dFtpXS50eXBlLmF0dHJzLGE9cjtpZihzKWZvcih2YXIgYyBpbiBzLm5vZGVOYW1lJiZvLnB1c2goYT1uZXcgdnQocy5ub2RlTmFtZSkpLHMpe3ZhciB1PXNbY107bnVsbCE9dSYmKG4mJjE9PW8ubGVuZ3RoJiZvLnB1c2goYT1yPW5ldyB2dChlLmlzSW5saW5lPyJzcGFuIjoiZGl2IikpLCJjbGFzcyI9PWM/YS5jbGFzcz0oYS5jbGFzcz9hLmNsYXNzKyIgIjoiIikrdToic3R5bGUiPT1jP2Euc3R5bGU9KGEuc3R5bGU/YS5zdHlsZSsiOyI6IiIpK3U6Im5vZGVOYW1lIiE9YyYmKGFbY109dSkpfX1yZXR1cm4gb31mdW5jdGlvbiB5dCh0LGUsbixyKXtpZihuPT1tdCYmcj09bXQpcmV0dXJuIGU7Zm9yKHZhciBvPWUsaT0wO2k8ci5sZW5ndGg7aSsrKXt2YXIgcz1yW2ldLGE9bltpXTtpZihpKXt2YXIgYz12b2lkIDA7YSYmYS5ub2RlTmFtZT09cy5ub2RlTmFtZSYmbyE9dCYmKGM9by5wYXJlbnROb2RlKSYmYy50YWdOYW1lLnRvTG93ZXJDYXNlKCk9PXMubm9kZU5hbWV8fChjPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQocy5ub2RlTmFtZSksYy5wbUlzRGVjbz0hMCxjLmFwcGVuZENoaWxkKG8pLGE9bXRbMF0pLG89Y313dChvLGF8fG10WzBdLHMpfXJldHVybiBvfWZ1bmN0aW9uIHd0KHQsZSxuKXtmb3IodmFyIHIgaW4gZSkiY2xhc3MiPT1yfHwic3R5bGUiPT1yfHwibm9kZU5hbWUiPT1yfHxyIGluIG58fHQucmVtb3ZlQXR0cmlidXRlKHIpO2Zvcih2YXIgbyBpbiBuKSJjbGFzcyIhPW8mJiJzdHlsZSIhPW8mJiJub2RlTmFtZSIhPW8mJm5bb10hPWVbb10mJnQuc2V0QXR0cmlidXRlKG8sbltvXSk7aWYoZS5jbGFzcyE9bi5jbGFzcyl7Zm9yKHZhciBpPWUuY2xhc3M/ZS5jbGFzcy5zcGxpdCgiICIpOml0LHM9bi5jbGFzcz9uLmNsYXNzLnNwbGl0KCIgIik6aXQsYT0wO2E8aS5sZW5ndGg7YSsrKS0xPT1zLmluZGV4T2YoaVthXSkmJnQuY2xhc3NMaXN0LnJlbW92ZShpW2FdKTtmb3IodmFyIGM9MDtjPHMubGVuZ3RoO2MrKyktMT09aS5pbmRleE9mKHNbY10pJiZ0LmNsYXNzTGlzdC5hZGQoc1tjXSl9aWYoZS5zdHlsZSE9bi5zdHlsZSl7aWYoZS5zdHlsZSl7dmFyIHUsbD0vXHMqKFtcd1wtXHhhMS1cdWZmZmZdKylccyo6KD86Iig/OlxcLnxbXiJdKSoifCcoPzpcXC58W14nXSkqJ3xcKC4qP1wpfFteO10pKi9nO3doaWxlKHU9bC5leGVjKGUuc3R5bGUpKXQuc3R5bGUucmVtb3ZlUHJvcGVydHkodVsxXSl9bi5zdHlsZSYmKHQuc3R5bGUuY3NzVGV4dCs9bi5zdHlsZSl9fWZ1bmN0aW9uIGJ0KHQsZSxuKXtyZXR1cm4geXQodCx0LG10LGd0KGUsbiwxIT10Lm5vZGVUeXBlKSl9ZnVuY3Rpb24geHQodCxlKXtpZih0Lmxlbmd0aCE9ZS5sZW5ndGgpcmV0dXJuITE7Zm9yKHZhciBuPTA7bjx0Lmxlbmd0aDtuKyspaWYoIXRbbl0udHlwZS5lcShlW25dLnR5cGUpKXJldHVybiExO3JldHVybiEwfWZ1bmN0aW9uIGt0KHQpe3ZhciBlPXQubmV4dFNpYmxpbmc7cmV0dXJuIHQucGFyZW50Tm9kZS5yZW1vdmVDaGlsZCh0KSxlfXZhciBTdD1mdW5jdGlvbih0LGUpe3RoaXMudG9wPXQsdGhpcy5sb2NrPWUsdGhpcy5pbmRleD0wLHRoaXMuc3RhY2s9W10sdGhpcy5jaGFuZ2VkPSExO3ZhciBuPUN0KHQubm9kZS5jb250ZW50LHQuY2hpbGRyZW4pO3RoaXMucHJlTWF0Y2hlZD1uLm5vZGVzLHRoaXMucHJlTWF0Y2hPZmZzZXQ9bi5vZmZzZXR9O2Z1bmN0aW9uIEN0KHQsZSl7Zm9yKHZhciBuPVtdLHI9dC5jaGlsZENvdW50LG89ZS5sZW5ndGgtMTtyPjAmJm8+PTA7by0tKXt2YXIgaT1lW29dLHM9aS5ub2RlO2lmKHMpe2lmKHMhPXQuY2hpbGQoci0xKSlicmVhaztuLnB1c2goaSksLS1yfX1yZXR1cm57bm9kZXM6bi5yZXZlcnNlKCksb2Zmc2V0OnJ9fWZ1bmN0aW9uIE90KHQsZSl7cmV0dXJuIHQudHlwZS5zaWRlLWUudHlwZS5zaWRlfWZ1bmN0aW9uIE10KHQsZSxuLHIpe3ZhciBvPWUubG9jYWxzKHQpLGk9MDtpZigwIT1vLmxlbmd0aClmb3IodmFyIHM9MCxhPVtdLGM9bnVsbCx1PTA7Oyl7aWYoczxvLmxlbmd0aCYmb1tzXS50bz09aSl7dmFyIGw9b1tzKytdLGg9dm9pZCAwO3doaWxlKHM8by5sZW5ndGgmJm9bc10udG89PWkpKGh8fChoPVtsXSkpLnB1c2gob1tzKytdKTtpZihoKXtoLnNvcnQoT3QpO2Zvcih2YXIgZj0wO2Y8aC5sZW5ndGg7ZisrKW4oaFtmXSx1LCEhYyl9ZWxzZSBuKGwsdSwhIWMpfXZhciBwPXZvaWQgMCxkPXZvaWQgMDtpZihjKWQ9LTEscD1jLGM9bnVsbDtlbHNle2lmKCEodTx0LmNoaWxkQ291bnQpKWJyZWFrO2Q9dSxwPXQuY2hpbGQodSsrKX1mb3IodmFyIHY9MDt2PGEubGVuZ3RoO3YrKylhW3ZdLnRvPD1pJiZhLnNwbGljZSh2LS0sMSk7d2hpbGUoczxvLmxlbmd0aCYmb1tzXS5mcm9tPD1pJiZvW3NdLnRvPmkpYS5wdXNoKG9bcysrXSk7dmFyIG09aStwLm5vZGVTaXplO2lmKHAuaXNUZXh0KXt2YXIgZz1tO3M8by5sZW5ndGgmJm9bc10uZnJvbTxnJiYoZz1vW3NdLmZyb20pO2Zvcih2YXIgeT0wO3k8YS5sZW5ndGg7eSsrKWFbeV0udG88ZyYmKGc9YVt5XS50byk7ZzxtJiYoYz1wLmN1dChnLWkpLHA9cC5jdXQoMCxnLWkpLG09ZyxkPS0xKX1yKHAsYS5sZW5ndGg/YS5zbGljZSgpOml0LGUuZm9yQ2hpbGQoaSxwKSxkKSxpPW19ZWxzZSBmb3IodmFyIHc9MDt3PHQuY2hpbGRDb3VudDt3Kyspe3ZhciBiPXQuY2hpbGQodyk7cihiLG8sZS5mb3JDaGlsZChpLGIpLHcpLGkrPWIubm9kZVNpemV9fWZ1bmN0aW9uIE50KHQpe2lmKCJVTCI9PXQubm9kZU5hbWV8fCJPTCI9PXQubm9kZU5hbWUpe3ZhciBlPXQuc3R5bGUuY3NzVGV4dDt0LnN0eWxlLmNzc1RleHQ9ZSsiOyBsaXN0LXN0eWxlOiBzcXVhcmUgIWltcG9ydGFudCIsd2luZG93LmdldENvbXB1dGVkU3R5bGUodCkubGlzdFN0eWxlLHQuc3R5bGUuY3NzVGV4dD1lfX1mdW5jdGlvbiBUdCh0LGUpe2Zvcig7Oyl7aWYoMz09dC5ub2RlVHlwZSlyZXR1cm4gdDtpZigxPT10Lm5vZGVUeXBlJiZlPjApe2lmKHQuY2hpbGROb2Rlcy5sZW5ndGg+ZSYmMz09dC5jaGlsZE5vZGVzW2VdLm5vZGVUeXBlKXJldHVybiB0LmNoaWxkTm9kZXNbZV07dD10LmNoaWxkTm9kZXNbZS0xXSxlPXkodCl9ZWxzZXtpZighKDE9PXQubm9kZVR5cGUmJmU8dC5jaGlsZE5vZGVzLmxlbmd0aCkpcmV0dXJuIG51bGw7dD10LmNoaWxkTm9kZXNbZV0sZT0wfX19ZnVuY3Rpb24gQXQodCxlLG4scil7Zm9yKHZhciBvPTAsaT0wO288dC5jaGlsZENvdW50JiZpPD1yOyl7dmFyIHM9dC5jaGlsZChvKyspLGE9aTtpZihpKz1zLm5vZGVTaXplLHMuaXNUZXh0KXt2YXIgYz1zLnRleHQ7d2hpbGUobzx0LmNoaWxkQ291bnQpe3ZhciB1PXQuY2hpbGQobysrKTtpZihpKz11Lm5vZGVTaXplLCF1LmlzVGV4dClicmVhaztjKz11LnRleHR9aWYoaT49bil7dmFyIGw9Yy5sYXN0SW5kZXhPZihlLHItYSk7aWYobD49MCYmbCtlLmxlbmd0aCthPj1uKXJldHVybiBhK2x9fX1yZXR1cm4tMX1mdW5jdGlvbiBFdCh0LGUsbixyLG8pe2Zvcih2YXIgaT1bXSxzPTAsYT0wO3M8dC5sZW5ndGg7cysrKXt2YXIgYz10W3NdLHU9YSxsPWErPWMuc2l6ZTt1Pj1ufHxsPD1lP2kucHVzaChjKToodTxlJiZpLnB1c2goYy5zbGljZSgwLGUtdSxyKSksbyYmKGkucHVzaChvKSxvPW51bGwpLGw+biYmaS5wdXNoKGMuc2xpY2Uobi11LGMuc2l6ZSxyKSkpfXJldHVybiBpfWZ1bmN0aW9uIER0KHQsZSl7dmFyIG49dC5zZWxlY3Rpb24sbz1uLiRhbmNob3IsaT1uLiRoZWFkLHM9ZT4wP28ubWF4KGkpOm8ubWluKGkpLGE9cy5wYXJlbnQuaW5saW5lQ29udGVudD9zLmRlcHRoP3QuZG9jLnJlc29sdmUoZT4wP3MuYWZ0ZXIoKTpzLmJlZm9yZSgpKTpudWxsOnM7cmV0dXJuIGEmJnJbIlNlbGVjdGlvbiJdLmZpbmRGcm9tKGEsZSl9ZnVuY3Rpb24gUnQodCxlKXtyZXR1cm4gdC5kaXNwYXRjaCh0LnN0YXRlLnRyLnNldFNlbGVjdGlvbihlKS5zY3JvbGxJbnRvVmlldygpKSwhMH1mdW5jdGlvbiB6dCh0LGUsbil7dmFyIG89dC5zdGF0ZS5zZWxlY3Rpb247aWYoIShvIGluc3RhbmNlb2YgclsiVGV4dFNlbGVjdGlvbiJdKSl7aWYobyBpbnN0YW5jZW9mIHJbIk5vZGVTZWxlY3Rpb24iXSYmby5ub2RlLmlzSW5saW5lKXJldHVybiBSdCh0LG5ldyByWyJUZXh0U2VsZWN0aW9uIl0oZT4wP28uJHRvOm8uJGZyb20pKTt2YXIgaT1EdCh0LnN0YXRlLGUpO3JldHVybiEhaSYmUnQodCxpKX1pZighby5lbXB0eXx8bi5pbmRleE9mKCJzIik+LTEpcmV0dXJuITE7aWYodC5lbmRPZlRleHRibG9jayhlPjA/InJpZ2h0IjoibGVmdCIpKXt2YXIgYT1EdCh0LnN0YXRlLGUpO3JldHVybiEhKGEmJmEgaW5zdGFuY2VvZiByWyJOb2RlU2VsZWN0aW9uIl0pJiZSdCh0LGEpfWlmKCEocy5tYWMmJm4uaW5kZXhPZigibSIpPi0xKSl7dmFyIGMsdT1vLiRoZWFkLGw9dS50ZXh0T2Zmc2V0P251bGw6ZTwwP3Uubm9kZUJlZm9yZTp1Lm5vZGVBZnRlcjtpZighbHx8bC5pc1RleHQpcmV0dXJuITE7dmFyIGg9ZTwwP3UucG9zLWwubm9kZVNpemU6dS5wb3M7cmV0dXJuISEobC5pc0F0b218fChjPXQuZG9jVmlldy5kZXNjQXQoaCkpJiYhYy5jb250ZW50RE9NKSYmKHJbIk5vZGVTZWxlY3Rpb24iXS5pc1NlbGVjdGFibGUobCk/UnQodCxuZXcgclsiTm9kZVNlbGVjdGlvbiJdKGU8MD90LnN0YXRlLmRvYy5yZXNvbHZlKHUucG9zLWwubm9kZVNpemUpOnUpKTohIXMud2Via2l0JiZSdCh0LG5ldyByWyJUZXh0U2VsZWN0aW9uIl0odC5zdGF0ZS5kb2MucmVzb2x2ZShlPDA/aDpoK2wubm9kZVNpemUpKSkpfX1mdW5jdGlvbiBQdCh0KXtyZXR1cm4gMz09dC5ub2RlVHlwZT90Lm5vZGVWYWx1ZS5sZW5ndGg6dC5jaGlsZE5vZGVzLmxlbmd0aH1mdW5jdGlvbiBJdCh0KXt2YXIgZT10LnBtVmlld0Rlc2M7cmV0dXJuIGUmJjA9PWUuc2l6ZSYmKHQubmV4dFNpYmxpbmd8fCJCUiIhPXQubm9kZU5hbWUpfWZ1bmN0aW9uIEJ0KHQpe3ZhciBlPXQucm9vdC5nZXRTZWxlY3Rpb24oKSxuPWUuZm9jdXNOb2RlLHI9ZS5mb2N1c09mZnNldDtpZihuKXt2YXIgbyxpLGE9ITE7Zm9yKHMuZ2Vja28mJjE9PW4ubm9kZVR5cGUmJnI8UHQobikmJkl0KG4uY2hpbGROb2Rlc1tyXSkmJihhPSEwKTs7KWlmKHI+MCl7aWYoMSE9bi5ub2RlVHlwZSlicmVhazt2YXIgYz1uLmNoaWxkTm9kZXNbci0xXTtpZihJdChjKSlvPW4saT0tLXI7ZWxzZXtpZigzIT1jLm5vZGVUeXBlKWJyZWFrO249YyxyPW4ubm9kZVZhbHVlLmxlbmd0aH19ZWxzZXtpZihGdChuKSlicmVhazt2YXIgdT1uLnByZXZpb3VzU2libGluZzt3aGlsZSh1JiZJdCh1KSlvPW4ucGFyZW50Tm9kZSxpPWYodSksdT11LnByZXZpb3VzU2libGluZztpZih1KW49dSxyPVB0KG4pO2Vsc2V7aWYobj1uLnBhcmVudE5vZGUsbj09dC5kb20pYnJlYWs7cj0wfX1hP2p0KHQsZSxuLHIpOm8mJmp0KHQsZSxvLGkpfX1mdW5jdGlvbiBfdCh0KXt2YXIgZT10LnJvb3QuZ2V0U2VsZWN0aW9uKCksbj1lLmZvY3VzTm9kZSxyPWUuZm9jdXNPZmZzZXQ7aWYobil7Zm9yKHZhciBvLGkscz1QdChuKTs7KWlmKHI8cyl7aWYoMSE9bi5ub2RlVHlwZSlicmVhazt2YXIgYT1uLmNoaWxkTm9kZXNbcl07aWYoIUl0KGEpKWJyZWFrO289bixpPSsrcn1lbHNle2lmKEZ0KG4pKWJyZWFrO3ZhciBjPW4ubmV4dFNpYmxpbmc7d2hpbGUoYyYmSXQoYykpbz1jLnBhcmVudE5vZGUsaT1mKGMpKzEsYz1jLm5leHRTaWJsaW5nO2lmKGMpbj1jLHI9MCxzPVB0KG4pO2Vsc2V7aWYobj1uLnBhcmVudE5vZGUsbj09dC5kb20pYnJlYWs7cj1zPTB9fW8mJmp0KHQsZSxvLGkpfX1mdW5jdGlvbiBGdCh0KXt2YXIgZT10LnBtVmlld0Rlc2M7cmV0dXJuIGUmJmUubm9kZSYmZS5ub2RlLmlzQmxvY2t9ZnVuY3Rpb24ganQodCxlLG4scil7aWYoeChlKSl7dmFyIG89ZG9jdW1lbnQuY3JlYXRlUmFuZ2UoKTtvLnNldEVuZChuLHIpLG8uc2V0U3RhcnQobixyKSxlLnJlbW92ZUFsbFJhbmdlcygpLGUuYWRkUmFuZ2Uobyl9ZWxzZSBlLmV4dGVuZCYmZS5leHRlbmQobixyKTt0LmRvbU9ic2VydmVyLnNldEN1clNlbGVjdGlvbigpfWZ1bmN0aW9uICR0KHQsZSxuKXt2YXIgbz10LnN0YXRlLnNlbGVjdGlvbjtpZihvIGluc3RhbmNlb2YgclsiVGV4dFNlbGVjdGlvbiJdJiYhby5lbXB0eXx8bi5pbmRleE9mKCJzIik+LTEpcmV0dXJuITE7aWYocy5tYWMmJm4uaW5kZXhPZigibSIpPi0xKXJldHVybiExO3ZhciBpPW8uJGZyb20sYT1vLiR0bztpZighaS5wYXJlbnQuaW5saW5lQ29udGVudHx8dC5lbmRPZlRleHRibG9jayhlPDA/InVwIjoiZG93biIpKXt2YXIgYz1EdCh0LnN0YXRlLGUpO2lmKGMmJmMgaW5zdGFuY2VvZiByWyJOb2RlU2VsZWN0aW9uIl0pcmV0dXJuIFJ0KHQsYyl9aWYoIWkucGFyZW50LmlubGluZUNvbnRlbnQpe3ZhciB1PXJbIlNlbGVjdGlvbiJdLmZpbmRGcm9tKGU8MD9pOmEsZSk7cmV0dXJuIXV8fFJ0KHQsdSl9cmV0dXJuITF9ZnVuY3Rpb24gVnQodCxlKXtpZighKHQuc3RhdGUuc2VsZWN0aW9uIGluc3RhbmNlb2YgclsiVGV4dFNlbGVjdGlvbiJdKSlyZXR1cm4hMDt2YXIgbj10LnN0YXRlLnNlbGVjdGlvbixvPW4uJGhlYWQsaT1uLiRhbmNob3Iscz1uLmVtcHR5O2lmKCFvLnNhbWVQYXJlbnQoaSkpcmV0dXJuITA7aWYoIXMpcmV0dXJuITE7aWYodC5lbmRPZlRleHRibG9jayhlPjA/ImZvcndhcmQiOiJiYWNrd2FyZCIpKXJldHVybiEwO3ZhciBhPSFvLnRleHRPZmZzZXQmJihlPDA/by5ub2RlQmVmb3JlOm8ubm9kZUFmdGVyKTtpZihhJiYhYS5pc1RleHQpe3ZhciBjPXQuc3RhdGUudHI7cmV0dXJuIGU8MD9jLmRlbGV0ZShvLnBvcy1hLm5vZGVTaXplLG8ucG9zKTpjLmRlbGV0ZShvLnBvcyxvLnBvcythLm5vZGVTaXplKSx0LmRpc3BhdGNoKGMpLCEwfXJldHVybiExfWZ1bmN0aW9uIEx0KHQsZSxuKXt0LmRvbU9ic2VydmVyLnN0b3AoKSxlLmNvbnRlbnRFZGl0YWJsZT1uLHQuZG9tT2JzZXJ2ZXIuc3RhcnQoKX1mdW5jdGlvbiBxdCh0KXtpZihzLmNocm9tZSYmISh0LnN0YXRlLnNlbGVjdGlvbi4kaGVhZC5wYXJlbnRPZmZzZXQ+MCkpe3ZhciBlPXQucm9vdC5nZXRTZWxlY3Rpb24oKSxuPWUuZm9jdXNOb2RlLHI9ZS5mb2N1c09mZnNldDtpZihuJiYxPT1uLm5vZGVUeXBlJiYwPT1yJiZuLmZpcnN0Q2hpbGQmJiJmYWxzZSI9PW4uZmlyc3RDaGlsZC5jb250ZW50RWRpdGFibGUpe3ZhciBvPW4uZmlyc3RDaGlsZDtMdCh0LG8sITApLHNldFRpbWVvdXQoKGZ1bmN0aW9uKCl7cmV0dXJuIEx0KHQsbywhMSl9KSwyMCl9fX1mdW5jdGlvbiBKdCh0KXt2YXIgZT0iIjtyZXR1cm4gdC5jdHJsS2V5JiYoZSs9ImMiKSx0Lm1ldGFLZXkmJihlKz0ibSIpLHQuYWx0S2V5JiYoZSs9ImEiKSx0LnNoaWZ0S2V5JiYoZSs9InMiKSxlfWZ1bmN0aW9uIFd0KHQsZSl7dmFyIG49ZS5rZXlDb2RlLHI9SnQoZSk7cmV0dXJuIDg9PW58fHMubWFjJiY3Mj09biYmImMiPT1yP1Z0KHQsLTEpfHxCdCh0KTo0Nj09bnx8cy5tYWMmJjY4PT1uJiYiYyI9PXI/VnQodCwxKXx8X3QodCk6MTM9PW58fDI3PT1ufHwoMzc9PW4/enQodCwtMSxyKXx8QnQodCk6Mzk9PW4/enQodCwxLHIpfHxfdCh0KTozOD09bj8kdCh0LC0xLHIpfHxCdCh0KTo0MD09bj9xdCh0KXx8JHQodCwxLHIpfHxfdCh0KTpyPT0ocy5tYWM/Im0iOiJjIikmJig2Nj09bnx8NzM9PW58fDg5PT1ufHw5MD09bikpfWZ1bmN0aW9uIEh0KHQsZSl7dmFyIG49dC5yb290LmdldFNlbGVjdGlvbigpLG89dC5zdGF0ZS5kb2M7aWYoIW4uZm9jdXNOb2RlKXJldHVybiBudWxsO3ZhciBpPXQuZG9jVmlldy5uZWFyZXN0RGVzYyhuLmZvY3VzTm9kZSkscz1pJiYwPT1pLnNpemUsYT10LmRvY1ZpZXcucG9zRnJvbURPTShuLmZvY3VzTm9kZSxuLmZvY3VzT2Zmc2V0KTtpZihhPDApcmV0dXJuIG51bGw7dmFyIGMsdSxsPW8ucmVzb2x2ZShhKTtpZih4KG4pKXtjPWw7d2hpbGUoaSYmIWkubm9kZSlpPWkucGFyZW50O2lmKGkmJmkubm9kZS5pc0F0b20mJnJbIk5vZGVTZWxlY3Rpb24iXS5pc1NlbGVjdGFibGUoaS5ub2RlKSYmaS5wYXJlbnQmJighaS5ub2RlLmlzSW5saW5lfHwhdyhuLmZvY3VzTm9kZSxuLmZvY3VzT2Zmc2V0LGkuZG9tKSkpe3ZhciBoPWkucG9zQmVmb3JlO3U9bmV3IHJbIk5vZGVTZWxlY3Rpb24iXShhPT1oP2w6by5yZXNvbHZlKGgpKX19ZWxzZXt2YXIgZj10LmRvY1ZpZXcucG9zRnJvbURPTShuLmFuY2hvck5vZGUsbi5hbmNob3JPZmZzZXQpO2lmKGY8MClyZXR1cm4gbnVsbDtjPW8ucmVzb2x2ZShmKX1pZighdSl7dmFyIHA9InBvaW50ZXIiPT1lfHx0LnN0YXRlLnNlbGVjdGlvbi5oZWFkPGwucG9zJiYhcz8xOi0xO3U9bmUodCxjLGwscCl9cmV0dXJuIHV9ZnVuY3Rpb24gS3QodCxlKXt2YXIgbj10LnN0YXRlLnNlbGVjdGlvbjtpZih0ZSh0LG4pLHQuZWRpdGFibGU/dC5oYXNGb2N1cygpOm9lKHQpJiZkb2N1bWVudC5hY3RpdmVFbGVtZW50JiZkb2N1bWVudC5hY3RpdmVFbGVtZW50LmNvbnRhaW5zKHQuZG9tKSl7aWYodC5kb21PYnNlcnZlci5kaXNjb25uZWN0U2VsZWN0aW9uKCksdC5jdXJzb3JXcmFwcGVyKVF0KHQpO2Vsc2V7dmFyIG8saSxzPW4uYW5jaG9yLGE9bi5oZWFkOyFVdHx8biBpbnN0YW5jZW9mIHJbIlRleHRTZWxlY3Rpb24iXXx8KG4uJGZyb20ucGFyZW50LmlubGluZUNvbnRlbnR8fChvPUd0KHQsbi5mcm9tKSksbi5lbXB0eXx8bi4kZnJvbS5wYXJlbnQuaW5saW5lQ29udGVudHx8KGk9R3QodCxuLnRvKSkpLHQuZG9jVmlldy5zZXRTZWxlY3Rpb24ocyxhLHQucm9vdCxlKSxVdCYmKG8mJll0KG8pLGkmJll0KGkpKSxuLnZpc2libGU/dC5kb20uY2xhc3NMaXN0LnJlbW92ZSgiUHJvc2VNaXJyb3ItaGlkZXNlbGVjdGlvbiIpOih0LmRvbS5jbGFzc0xpc3QuYWRkKCJQcm9zZU1pcnJvci1oaWRlc2VsZWN0aW9uIiksIm9uc2VsZWN0aW9uY2hhbmdlImluIGRvY3VtZW50JiZadCh0KSl9dC5kb21PYnNlcnZlci5zZXRDdXJTZWxlY3Rpb24oKSx0LmRvbU9ic2VydmVyLmNvbm5lY3RTZWxlY3Rpb24oKX19U3QucHJvdG90eXBlLmdldFByZU1hdGNoPWZ1bmN0aW9uKHQpe3JldHVybiB0Pj10aGlzLnByZU1hdGNoT2Zmc2V0P3RoaXMucHJlTWF0Y2hlZFt0LXRoaXMucHJlTWF0Y2hPZmZzZXRdOm51bGx9LFN0LnByb3RvdHlwZS5kZXN0cm95QmV0d2Vlbj1mdW5jdGlvbih0LGUpe2lmKHQhPWUpe2Zvcih2YXIgbj10O248ZTtuKyspdGhpcy50b3AuY2hpbGRyZW5bbl0uZGVzdHJveSgpO3RoaXMudG9wLmNoaWxkcmVuLnNwbGljZSh0LGUtdCksdGhpcy5jaGFuZ2VkPSEwfX0sU3QucHJvdG90eXBlLmRlc3Ryb3lSZXN0PWZ1bmN0aW9uKCl7dGhpcy5kZXN0cm95QmV0d2Vlbih0aGlzLmluZGV4LHRoaXMudG9wLmNoaWxkcmVuLmxlbmd0aCl9LFN0LnByb3RvdHlwZS5zeW5jVG9NYXJrcz1mdW5jdGlvbih0LGUsbil7dmFyIHI9MCxvPXRoaXMuc3RhY2subGVuZ3RoPj4xLGk9TWF0aC5taW4obyx0Lmxlbmd0aCk7d2hpbGUocjxpJiYocj09by0xP3RoaXMudG9wOnRoaXMuc3RhY2tbcisxPDwxXSkubWF0Y2hlc01hcmsodFtyXSkmJiExIT09dFtyXS50eXBlLnNwZWMuc3Bhbm5pbmcpcisrO3doaWxlKHI8byl0aGlzLmRlc3Ryb3lSZXN0KCksdGhpcy50b3AuZGlydHk9USx0aGlzLmluZGV4PXRoaXMuc3RhY2sucG9wKCksdGhpcy50b3A9dGhpcy5zdGFjay5wb3AoKSxvLS07d2hpbGUobzx0Lmxlbmd0aCl7dGhpcy5zdGFjay5wdXNoKHRoaXMudG9wLHRoaXMuaW5kZXgrMSk7Zm9yKHZhciBzPS0xLGE9dGhpcy5pbmRleDthPE1hdGgubWluKHRoaXMuaW5kZXgrMyx0aGlzLnRvcC5jaGlsZHJlbi5sZW5ndGgpO2ErKylpZih0aGlzLnRvcC5jaGlsZHJlblthXS5tYXRjaGVzTWFyayh0W29dKSl7cz1hO2JyZWFrfWlmKHM+LTEpcz50aGlzLmluZGV4JiYodGhpcy5jaGFuZ2VkPSEwLHRoaXMuZGVzdHJveUJldHdlZW4odGhpcy5pbmRleCxzKSksdGhpcy50b3A9dGhpcy50b3AuY2hpbGRyZW5bdGhpcy5pbmRleF07ZWxzZXt2YXIgYz1jdC5jcmVhdGUodGhpcy50b3AsdFtvXSxlLG4pO3RoaXMudG9wLmNoaWxkcmVuLnNwbGljZSh0aGlzLmluZGV4LDAsYyksdGhpcy50b3A9Yyx0aGlzLmNoYW5nZWQ9ITB9dGhpcy5pbmRleD0wLG8rK319LFN0LnByb3RvdHlwZS5maW5kTm9kZU1hdGNoPWZ1bmN0aW9uKHQsZSxuLHIpe3ZhciBvPS0xLGk9cjwwP3ZvaWQgMDp0aGlzLmdldFByZU1hdGNoKHIpLHM9dGhpcy50b3AuY2hpbGRyZW47aWYoaSYmaS5tYXRjaGVzTm9kZSh0LGUsbikpbz1zLmluZGV4T2YoaSk7ZWxzZSBmb3IodmFyIGE9dGhpcy5pbmRleCxjPU1hdGgubWluKHMubGVuZ3RoLGErNSk7YTxjO2ErKyl7dmFyIHU9c1thXTtpZih1Lm1hdGNoZXNOb2RlKHQsZSxuKSYmdGhpcy5wcmVNYXRjaGVkLmluZGV4T2YodSk8MCl7bz1hO2JyZWFrfX1yZXR1cm4hKG88MCkmJih0aGlzLmRlc3Ryb3lCZXR3ZWVuKHRoaXMuaW5kZXgsbyksdGhpcy5pbmRleCsrLCEwKX0sU3QucHJvdG90eXBlLnVwZGF0ZU5leHROb2RlPWZ1bmN0aW9uKHQsZSxuLHIsbyl7Zm9yKHZhciBpPXRoaXMuaW5kZXg7aTx0aGlzLnRvcC5jaGlsZHJlbi5sZW5ndGg7aSsrKXt2YXIgcz10aGlzLnRvcC5jaGlsZHJlbltpXTtpZihzIGluc3RhbmNlb2YgdXQpe3ZhciBhPXRoaXMucHJlTWF0Y2hlZC5pbmRleE9mKHMpO2lmKGE+LTEmJmErdGhpcy5wcmVNYXRjaE9mZnNldCE9bylyZXR1cm4hMTt2YXIgYz1zLmRvbSx1PXRoaXMubG9jayYmKGM9PXRoaXMubG9ja3x8MT09Yy5ub2RlVHlwZSYmYy5jb250YWlucyh0aGlzLmxvY2sucGFyZW50Tm9kZSkpJiYhKHQuaXNUZXh0JiZzLm5vZGUmJnMubm9kZS5pc1RleHQmJnMubm9kZURPTS5ub2RlVmFsdWU9PXQudGV4dCYmcy5kaXJ0eSE9bnQmJnh0KGUscy5vdXRlckRlY28pKTtpZighdSYmcy51cGRhdGUodCxlLG4scikpcmV0dXJuIHRoaXMuZGVzdHJveUJldHdlZW4odGhpcy5pbmRleCxpKSxzLmRvbSE9YyYmKHRoaXMuY2hhbmdlZD0hMCksdGhpcy5pbmRleCsrLCEwO2JyZWFrfX1yZXR1cm4hMX0sU3QucHJvdG90eXBlLmFkZE5vZGU9ZnVuY3Rpb24odCxlLG4scixvKXt0aGlzLnRvcC5jaGlsZHJlbi5zcGxpY2UodGhpcy5pbmRleCsrLDAsdXQuY3JlYXRlKHRoaXMudG9wLHQsZSxuLHIsbykpLHRoaXMuY2hhbmdlZD0hMH0sU3QucHJvdG90eXBlLnBsYWNlV2lkZ2V0PWZ1bmN0aW9uKHQsZSxuKXt2YXIgcj10aGlzLmluZGV4PHRoaXMudG9wLmNoaWxkcmVuLmxlbmd0aD90aGlzLnRvcC5jaGlsZHJlblt0aGlzLmluZGV4XTpudWxsO2lmKCFyfHwhci5tYXRjaGVzV2lkZ2V0KHQpfHx0IT1yLndpZGdldCYmci53aWRnZXQudHlwZS50b0RPTS5wYXJlbnROb2RlKXt2YXIgbz1uZXcgc3QodGhpcy50b3AsdCxlLG4pO3RoaXMudG9wLmNoaWxkcmVuLnNwbGljZSh0aGlzLmluZGV4KyssMCxvKSx0aGlzLmNoYW5nZWQ9ITB9ZWxzZSB0aGlzLmluZGV4Kyt9LFN0LnByb3RvdHlwZS5hZGRUZXh0YmxvY2tIYWNrcz1mdW5jdGlvbigpe3ZhciB0PXRoaXMudG9wLmNoaWxkcmVuW3RoaXMuaW5kZXgtMV07d2hpbGUodCBpbnN0YW5jZW9mIGN0KXQ9dC5jaGlsZHJlblt0LmNoaWxkcmVuLmxlbmd0aC0xXTtpZighdHx8ISh0IGluc3RhbmNlb2YgaHQpfHwvXG4kLy50ZXN0KHQubm9kZS50ZXh0KSlpZih0aGlzLmluZGV4PHRoaXMudG9wLmNoaWxkcmVuLmxlbmd0aCYmdGhpcy50b3AuY2hpbGRyZW5bdGhpcy5pbmRleF0ubWF0Y2hlc0hhY2soKSl0aGlzLmluZGV4Kys7ZWxzZXt2YXIgZT1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJiciIpO3RoaXMudG9wLmNoaWxkcmVuLnNwbGljZSh0aGlzLmluZGV4KyssMCxuZXcgZnQodGhpcy50b3AsaXQsZSxudWxsKSksdGhpcy5jaGFuZ2VkPSEwfX07dmFyIFV0PXMuc2FmYXJpfHxzLmNocm9tZSYmcy5jaHJvbWVfdmVyc2lvbjw2MztmdW5jdGlvbiBHdCh0LGUpe3ZhciBuPXQuZG9jVmlldy5kb21Gcm9tUG9zKGUpLHI9bi5ub2RlLG89bi5vZmZzZXQsaT1vPHIuY2hpbGROb2Rlcy5sZW5ndGg/ci5jaGlsZE5vZGVzW29dOm51bGwsYT1vP3IuY2hpbGROb2Rlc1tvLTFdOm51bGw7aWYocy5zYWZhcmkmJmkmJiJmYWxzZSI9PWkuY29udGVudEVkaXRhYmxlKXJldHVybiBYdChpKTtpZigoIWl8fCJmYWxzZSI9PWkuY29udGVudEVkaXRhYmxlKSYmKCFhfHwiZmFsc2UiPT1hLmNvbnRlbnRFZGl0YWJsZSkpe2lmKGkpcmV0dXJuIFh0KGkpO2lmKGEpcmV0dXJuIFh0KGEpfX1mdW5jdGlvbiBYdCh0KXtyZXR1cm4gdC5jb250ZW50RWRpdGFibGU9InRydWUiLHMuc2FmYXJpJiZ0LmRyYWdnYWJsZSYmKHQuZHJhZ2dhYmxlPSExLHQud2FzRHJhZ2dhYmxlPSEwKSx0fWZ1bmN0aW9uIFl0KHQpe3QuY29udGVudEVkaXRhYmxlPSJmYWxzZSIsdC53YXNEcmFnZ2FibGUmJih0LmRyYWdnYWJsZT0hMCx0Lndhc0RyYWdnYWJsZT1udWxsKX1mdW5jdGlvbiBadCh0KXt2YXIgZT10LmRvbS5vd25lckRvY3VtZW50O2UucmVtb3ZlRXZlbnRMaXN0ZW5lcigic2VsZWN0aW9uY2hhbmdlIix0LmhpZGVTZWxlY3Rpb25HdWFyZCk7dmFyIG49dC5yb290LmdldFNlbGVjdGlvbigpLHI9bi5hbmNob3JOb2RlLG89bi5hbmNob3JPZmZzZXQ7ZS5hZGRFdmVudExpc3RlbmVyKCJzZWxlY3Rpb25jaGFuZ2UiLHQuaGlkZVNlbGVjdGlvbkd1YXJkPWZ1bmN0aW9uKCl7bi5hbmNob3JOb2RlPT1yJiZuLmFuY2hvck9mZnNldD09b3x8KGUucmVtb3ZlRXZlbnRMaXN0ZW5lcigic2VsZWN0aW9uY2hhbmdlIix0LmhpZGVTZWxlY3Rpb25HdWFyZCksdC5kb20uY2xhc3NMaXN0LnJlbW92ZSgiUHJvc2VNaXJyb3ItaGlkZXNlbGVjdGlvbiIpKX0pfWZ1bmN0aW9uIFF0KHQpe3ZhciBlPXQucm9vdC5nZXRTZWxlY3Rpb24oKSxuPWRvY3VtZW50LmNyZWF0ZVJhbmdlKCkscj10LmN1cnNvcldyYXBwZXIuZG9tLG89IklNRyI9PXIubm9kZU5hbWU7bz9uLnNldEVuZChyLnBhcmVudE5vZGUsZihyKSsxKTpuLnNldEVuZChyLDApLG4uY29sbGFwc2UoITEpLGUucmVtb3ZlQWxsUmFuZ2VzKCksZS5hZGRSYW5nZShuKSwhbyYmIXQuc3RhdGUuc2VsZWN0aW9uLnZpc2libGUmJnMuaWUmJnMuaWVfdmVyc2lvbjw9MTEmJihyLmRpc2FibGVkPSEwLHIuZGlzYWJsZWQ9ITEpfWZ1bmN0aW9uIHRlKHQsZSl7aWYoZSBpbnN0YW5jZW9mIHJbIk5vZGVTZWxlY3Rpb24iXSl7dmFyIG49dC5kb2NWaWV3LmRlc2NBdChlLmZyb20pO24hPXQubGFzdFNlbGVjdGVkVmlld0Rlc2MmJihlZSh0KSxuJiZuLnNlbGVjdE5vZGUoKSx0Lmxhc3RTZWxlY3RlZFZpZXdEZXNjPW4pfWVsc2UgZWUodCl9ZnVuY3Rpb24gZWUodCl7dC5sYXN0U2VsZWN0ZWRWaWV3RGVzYyYmKHQubGFzdFNlbGVjdGVkVmlld0Rlc2MucGFyZW50JiZ0Lmxhc3RTZWxlY3RlZFZpZXdEZXNjLmRlc2VsZWN0Tm9kZSgpLHQubGFzdFNlbGVjdGVkVmlld0Rlc2M9bnVsbCl9ZnVuY3Rpb24gbmUodCxlLG4sbyl7cmV0dXJuIHQuc29tZVByb3AoImNyZWF0ZVNlbGVjdGlvbkJldHdlZW4iLChmdW5jdGlvbihyKXtyZXR1cm4gcih0LGUsbil9KSl8fHJbIlRleHRTZWxlY3Rpb24iXS5iZXR3ZWVuKGUsbixvKX1mdW5jdGlvbiByZSh0KXtyZXR1cm4oIXQuZWRpdGFibGV8fHQucm9vdC5hY3RpdmVFbGVtZW50PT10LmRvbSkmJm9lKHQpfWZ1bmN0aW9uIG9lKHQpe3ZhciBlPXQucm9vdC5nZXRTZWxlY3Rpb24oKTtpZighZS5hbmNob3JOb2RlKXJldHVybiExO3RyeXtyZXR1cm4gdC5kb20uY29udGFpbnMoMz09ZS5hbmNob3JOb2RlLm5vZGVUeXBlP2UuYW5jaG9yTm9kZS5wYXJlbnROb2RlOmUuYW5jaG9yTm9kZSkmJih0LmVkaXRhYmxlfHx0LmRvbS5jb250YWlucygzPT1lLmZvY3VzTm9kZS5ub2RlVHlwZT9lLmZvY3VzTm9kZS5wYXJlbnROb2RlOmUuZm9jdXNOb2RlKSl9Y2F0Y2gobil7cmV0dXJuITF9fWZ1bmN0aW9uIGllKHQpe3ZhciBlPXQuZG9jVmlldy5kb21Gcm9tUG9zKHQuc3RhdGUuc2VsZWN0aW9uLmFuY2hvciksbj10LnJvb3QuZ2V0U2VsZWN0aW9uKCk7cmV0dXJuIHYoZS5ub2RlLGUub2Zmc2V0LG4uYW5jaG9yTm9kZSxuLmFuY2hvck9mZnNldCl9ZnVuY3Rpb24gc2UodCxlLG4pe3ZhciByPXQuZG9jVmlldy5wYXJzZVJhbmdlKGUsbiksaT1yLm5vZGUsYT1yLmZyb21PZmZzZXQsYz1yLnRvT2Zmc2V0LHU9ci5mcm9tLGw9ci50byxoPXQucm9vdC5nZXRTZWxlY3Rpb24oKSxmPW51bGwscD1oLmFuY2hvck5vZGU7aWYocCYmdC5kb20uY29udGFpbnMoMT09cC5ub2RlVHlwZT9wOnAucGFyZW50Tm9kZSkmJihmPVt7bm9kZTpwLG9mZnNldDpoLmFuY2hvck9mZnNldH1dLHgoaCl8fGYucHVzaCh7bm9kZTpoLmZvY3VzTm9kZSxvZmZzZXQ6aC5mb2N1c09mZnNldH0pKSxzLmNocm9tZSYmOD09PXQubGFzdEtleUNvZGUpZm9yKHZhciBkPWM7ZD5hO2QtLSl7dmFyIHY9aS5jaGlsZE5vZGVzW2QtMV0sbT12LnBtVmlld0Rlc2M7aWYoIkJSIj09di5ub2RlVHlwZSYmIW0pe2M9ZDticmVha31pZighbXx8bS5zaXplKWJyZWFrfXZhciBnPXQuc3RhdGUuZG9jLHk9dC5zb21lUHJvcCgiZG9tUGFyc2VyIil8fG9bImEiXS5mcm9tU2NoZW1hKHQuc3RhdGUuc2NoZW1hKSx3PWcucmVzb2x2ZSh1KSxiPW51bGwsaz15LnBhcnNlKGkse3RvcE5vZGU6dy5wYXJlbnQsdG9wTWF0Y2g6dy5wYXJlbnQuY29udGVudE1hdGNoQXQody5pbmRleCgpKSx0b3BPcGVuOiEwLGZyb206YSx0bzpjLHByZXNlcnZlV2hpdGVzcGFjZTohdy5wYXJlbnQudHlwZS5zcGVjLmNvZGV8fCJmdWxsIixlZGl0YWJsZUNvbnRlbnQ6ITAsZmluZFBvc2l0aW9uczpmLHJ1bGVGcm9tTm9kZTphZSxjb250ZXh0Ond9KTtpZihmJiZudWxsIT1mWzBdLnBvcyl7dmFyIFM9ZlswXS5wb3MsQz1mWzFdJiZmWzFdLnBvcztudWxsPT1DJiYoQz1TKSxiPXthbmNob3I6Uyt1LGhlYWQ6Qyt1fX1yZXR1cm57ZG9jOmssc2VsOmIsZnJvbTp1LHRvOmx9fWZ1bmN0aW9uIGFlKHQpe3ZhciBlPXQucG1WaWV3RGVzYztpZihlKXJldHVybiBlLnBhcnNlUnVsZSgpO2lmKCJCUiI9PXQubm9kZU5hbWUmJnQucGFyZW50Tm9kZSl7aWYocy5zYWZhcmkmJi9eKHVsfG9sKSQvaS50ZXN0KHQucGFyZW50Tm9kZS5ub2RlTmFtZSkpe3ZhciBuPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpO3JldHVybiBuLmFwcGVuZENoaWxkKGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImxpIikpLHtza2lwOm59fWlmKHQucGFyZW50Tm9kZS5sYXN0Q2hpbGQ9PXR8fHMuc2FmYXJpJiYvXih0cnx0YWJsZSkkL2kudGVzdCh0LnBhcmVudE5vZGUubm9kZU5hbWUpKXJldHVybntpZ25vcmU6ITB9fWVsc2UgaWYoIklNRyI9PXQubm9kZU5hbWUmJnQuZ2V0QXR0cmlidXRlKCJtYXJrLXBsYWNlaG9sZGVyIikpcmV0dXJue2lnbm9yZTohMH19ZnVuY3Rpb24gY2UodCxlLG4sbyxpKXtpZihlPDApe3ZhciBhPXQubGFzdFNlbGVjdGlvblRpbWU+RGF0ZS5ub3coKS01MD90Lmxhc3RTZWxlY3Rpb25PcmlnaW46bnVsbCxjPUh0KHQsYSk7aWYoYyYmIXQuc3RhdGUuc2VsZWN0aW9uLmVxKGMpKXt2YXIgdT10LnN0YXRlLnRyLnNldFNlbGVjdGlvbihjKTsicG9pbnRlciI9PWE/dS5zZXRNZXRhKCJwb2ludGVyIiwhMCk6ImtleSI9PWEmJnUuc2Nyb2xsSW50b1ZpZXcoKSx0LmRpc3BhdGNoKHUpfX1lbHNle3ZhciBsPXQuc3RhdGUuZG9jLnJlc29sdmUoZSksaD1sLnNoYXJlZERlcHRoKG4pO2U9bC5iZWZvcmUoaCsxKSxuPXQuc3RhdGUuZG9jLnJlc29sdmUobikuYWZ0ZXIoaCsxKTt2YXIgZixwLGQ9dC5zdGF0ZS5zZWxlY3Rpb24sdj1zZSh0LGUsbiksbT10LnN0YXRlLmRvYyxnPW0uc2xpY2Uodi5mcm9tLHYudG8pOzg9PT10Lmxhc3RLZXlDb2RlJiZEYXRlLm5vdygpLTEwMDx0Lmxhc3RLZXlDb2RlVGltZT8oZj10LnN0YXRlLnNlbGVjdGlvbi50byxwPSJlbmQiKTooZj10LnN0YXRlLnNlbGVjdGlvbi5mcm9tLHA9InN0YXJ0IiksdC5sYXN0S2V5Q29kZT1udWxsO3ZhciB5PXBlKGcuY29udGVudCx2LmRvYy5jb250ZW50LHYuZnJvbSxmLHApO2lmKCF5KXtpZighKG8mJmQgaW5zdGFuY2VvZiByWyJUZXh0U2VsZWN0aW9uIl0mJiFkLmVtcHR5JiZkLiRoZWFkLnNhbWVQYXJlbnQoZC4kYW5jaG9yKSl8fHQuY29tcG9zaW5nfHx2LnNlbCYmdi5zZWwuYW5jaG9yIT12LnNlbC5oZWFkKXtpZih2LnNlbCl7dmFyIHc9dWUodCx0LnN0YXRlLmRvYyx2LnNlbCk7dyYmIXcuZXEodC5zdGF0ZS5zZWxlY3Rpb24pJiZ0LmRpc3BhdGNoKHQuc3RhdGUudHIuc2V0U2VsZWN0aW9uKHcpKX1yZXR1cm59eT17c3RhcnQ6ZC5mcm9tLGVuZEE6ZC50byxlbmRCOmQudG99fXQuZG9tQ2hhbmdlQ291bnQrKyx0LnN0YXRlLnNlbGVjdGlvbi5mcm9tPHQuc3RhdGUuc2VsZWN0aW9uLnRvJiZ5LnN0YXJ0PT15LmVuZEImJnQuc3RhdGUuc2VsZWN0aW9uIGluc3RhbmNlb2YgclsiVGV4dFNlbGVjdGlvbiJdJiYoeS5zdGFydD50LnN0YXRlLnNlbGVjdGlvbi5mcm9tJiZ5LnN0YXJ0PD10LnN0YXRlLnNlbGVjdGlvbi5mcm9tKzI/eS5zdGFydD10LnN0YXRlLnNlbGVjdGlvbi5mcm9tOnkuZW5kQTx0LnN0YXRlLnNlbGVjdGlvbi50byYmeS5lbmRBPj10LnN0YXRlLnNlbGVjdGlvbi50by0yJiYoeS5lbmRCKz10LnN0YXRlLnNlbGVjdGlvbi50by15LmVuZEEseS5lbmRBPXQuc3RhdGUuc2VsZWN0aW9uLnRvKSkscy5pZSYmcy5pZV92ZXJzaW9uPD0xMSYmeS5lbmRCPT15LnN0YXJ0KzEmJnkuZW5kQT09eS5zdGFydCYmeS5zdGFydD52LmZyb20mJiIgwqAiPT12LmRvYy50ZXh0QmV0d2Vlbih5LnN0YXJ0LXYuZnJvbS0xLHkuc3RhcnQtdi5mcm9tKzEpJiYoeS5zdGFydC0tLHkuZW5kQS0tLHkuZW5kQi0tKTt2YXIgYix4PXYuZG9jLnJlc29sdmVOb0NhY2hlKHkuc3RhcnQtdi5mcm9tKSxTPXYuZG9jLnJlc29sdmVOb0NhY2hlKHkuZW5kQi12LmZyb20pLEM9eC5zYW1lUGFyZW50KFMpJiZ4LnBhcmVudC5pbmxpbmVDb250ZW50O2lmKChzLmlvcyYmdC5sYXN0SU9TRW50ZXI+RGF0ZS5ub3coKS0xMDAmJighQ3x8aS5zb21lKChmdW5jdGlvbih0KXtyZXR1cm4iRElWIj09dC5ub2RlTmFtZXx8IlAiPT10Lm5vZGVOYW1lfSkpKXx8IUMmJngucG9zPHYuZG9jLmNvbnRlbnQuc2l6ZSYmKGI9clsiU2VsZWN0aW9uIl0uZmluZEZyb20odi5kb2MucmVzb2x2ZSh4LnBvcysxKSwxLCEwKSkmJmIuaGVhZD09Uy5wb3MpJiZ0LnNvbWVQcm9wKCJoYW5kbGVLZXlEb3duIiwoZnVuY3Rpb24oZSl7cmV0dXJuIGUodCxrKDEzLCJFbnRlciIpKX0pKSl0Lmxhc3RJT1NFbnRlcj0wO2Vsc2UgaWYodC5zdGF0ZS5zZWxlY3Rpb24uYW5jaG9yPnkuc3RhcnQmJmhlKG0seS5zdGFydCx5LmVuZEEseCxTKSYmdC5zb21lUHJvcCgiaGFuZGxlS2V5RG93biIsKGZ1bmN0aW9uKGUpe3JldHVybiBlKHQsayg4LCJCYWNrc3BhY2UiKSl9KSkpcy5hbmRyb2lkJiZzLmNocm9tZSYmdC5kb21PYnNlcnZlci5zdXBwcmVzc1NlbGVjdGlvblVwZGF0ZXMoKTtlbHNle3MuYW5kcm9pZCYmIUMmJnguc3RhcnQoKSE9Uy5zdGFydCgpJiYwPT1TLnBhcmVudE9mZnNldCYmeC5kZXB0aD09Uy5kZXB0aCYmdi5zZWwmJnYuc2VsLmFuY2hvcj09di5zZWwuaGVhZCYmdi5zZWwuaGVhZD09eS5lbmRBJiYoeS5lbmRCLT0yLFM9di5kb2MucmVzb2x2ZU5vQ2FjaGUoeS5lbmRCLXYuZnJvbSksc2V0VGltZW91dCgoZnVuY3Rpb24oKXt0LnNvbWVQcm9wKCJoYW5kbGVLZXlEb3duIiwoZnVuY3Rpb24oZSl7cmV0dXJuIGUodCxrKDEzLCJFbnRlciIpKX0pKX0pLDIwKSk7dmFyIE8sTSxOLFQsQT15LnN0YXJ0LEU9eS5lbmRBO2lmKEMpaWYoeC5wb3M9PVMucG9zKXMuaWUmJnMuaWVfdmVyc2lvbjw9MTEmJjA9PXgucGFyZW50T2Zmc2V0JiYodC5kb21PYnNlcnZlci5zdXBwcmVzc1NlbGVjdGlvblVwZGF0ZXMoKSxzZXRUaW1lb3V0KChmdW5jdGlvbigpe3JldHVybiBLdCh0KX0pLDIwKSksTz10LnN0YXRlLnRyLmRlbGV0ZShBLEUpLE09bS5yZXNvbHZlKHkuc3RhcnQpLm1hcmtzQWNyb3NzKG0ucmVzb2x2ZSh5LmVuZEEpKTtlbHNlIGlmKHkuZW5kQT09eS5lbmRCJiYoVD1tLnJlc29sdmUoeS5zdGFydCkpJiYoTj1sZSh4LnBhcmVudC5jb250ZW50LmN1dCh4LnBhcmVudE9mZnNldCxTLnBhcmVudE9mZnNldCksVC5wYXJlbnQuY29udGVudC5jdXQoVC5wYXJlbnRPZmZzZXQseS5lbmRBLVQuc3RhcnQoKSkpKSlPPXQuc3RhdGUudHIsImFkZCI9PU4udHlwZT9PLmFkZE1hcmsoQSxFLE4ubWFyayk6Ty5yZW1vdmVNYXJrKEEsRSxOLm1hcmspO2Vsc2UgaWYoeC5wYXJlbnQuY2hpbGQoeC5pbmRleCgpKS5pc1RleHQmJnguaW5kZXgoKT09Uy5pbmRleCgpLShTLnRleHRPZmZzZXQ/MDoxKSl7dmFyIEQ9eC5wYXJlbnQudGV4dEJldHdlZW4oeC5wYXJlbnRPZmZzZXQsUy5wYXJlbnRPZmZzZXQpO2lmKHQuc29tZVByb3AoImhhbmRsZVRleHRJbnB1dCIsKGZ1bmN0aW9uKGUpe3JldHVybiBlKHQsQSxFLEQpfSkpKXJldHVybjtPPXQuc3RhdGUudHIuaW5zZXJ0VGV4dChELEEsRSl9aWYoT3x8KE89dC5zdGF0ZS50ci5yZXBsYWNlKEEsRSx2LmRvYy5zbGljZSh5LnN0YXJ0LXYuZnJvbSx5LmVuZEItdi5mcm9tKSkpLHYuc2VsKXt2YXIgUj11ZSh0LE8uZG9jLHYuc2VsKTtSJiYhKHMuY2hyb21lJiZzLmFuZHJvaWQmJnQuY29tcG9zaW5nJiZSLmVtcHR5JiYoUi5oZWFkPT1BfHxSLmhlYWQ9PU8ubWFwcGluZy5tYXAoRSktMSl8fHMuaWUmJlIuZW1wdHkmJlIuaGVhZD09QSkmJk8uc2V0U2VsZWN0aW9uKFIpfU0mJk8uZW5zdXJlTWFya3MoTSksdC5kaXNwYXRjaChPLnNjcm9sbEludG9WaWV3KCkpfX19ZnVuY3Rpb24gdWUodCxlLG4pe3JldHVybiBNYXRoLm1heChuLmFuY2hvcixuLmhlYWQpPmUuY29udGVudC5zaXplP251bGw6bmUodCxlLnJlc29sdmUobi5hbmNob3IpLGUucmVzb2x2ZShuLmhlYWQpKX1mdW5jdGlvbiBsZSh0LGUpe2Zvcih2YXIgbixyLGkscz10LmZpcnN0Q2hpbGQubWFya3MsYT1lLmZpcnN0Q2hpbGQubWFya3MsYz1zLHU9YSxsPTA7bDxhLmxlbmd0aDtsKyspYz1hW2xdLnJlbW92ZUZyb21TZXQoYyk7Zm9yKHZhciBoPTA7aDxzLmxlbmd0aDtoKyspdT1zW2hdLnJlbW92ZUZyb21TZXQodSk7aWYoMT09Yy5sZW5ndGgmJjA9PXUubGVuZ3RoKXI9Y1swXSxuPSJhZGQiLGk9ZnVuY3Rpb24odCl7cmV0dXJuIHQubWFyayhyLmFkZFRvU2V0KHQubWFya3MpKX07ZWxzZXtpZigwIT1jLmxlbmd0aHx8MSE9dS5sZW5ndGgpcmV0dXJuIG51bGw7cj11WzBdLG49InJlbW92ZSIsaT1mdW5jdGlvbih0KXtyZXR1cm4gdC5tYXJrKHIucmVtb3ZlRnJvbVNldCh0Lm1hcmtzKSl9fWZvcih2YXIgZj1bXSxwPTA7cDxlLmNoaWxkQ291bnQ7cCsrKWYucHVzaChpKGUuY2hpbGQocCkpKTtpZihvWyJjIl0uZnJvbShmKS5lcSh0KSlyZXR1cm57bWFyazpyLHR5cGU6bn19ZnVuY3Rpb24gaGUodCxlLG4scixvKXtpZighci5wYXJlbnQuaXNUZXh0YmxvY2t8fG4tZTw9by5wb3Mtci5wb3N8fGZlKHIsITAsITEpPG8ucG9zKXJldHVybiExO3ZhciBpPXQucmVzb2x2ZShlKTtpZihpLnBhcmVudE9mZnNldDxpLnBhcmVudC5jb250ZW50LnNpemV8fCFpLnBhcmVudC5pc1RleHRibG9jaylyZXR1cm4hMTt2YXIgcz10LnJlc29sdmUoZmUoaSwhMCwhMCkpO3JldHVybiEoIXMucGFyZW50LmlzVGV4dGJsb2NrfHxzLnBvcz5ufHxmZShzLCEwLCExKTxuKSYmci5wYXJlbnQuY29udGVudC5jdXQoci5wYXJlbnRPZmZzZXQpLmVxKHMucGFyZW50LmNvbnRlbnQpfWZ1bmN0aW9uIGZlKHQsZSxuKXt2YXIgcj10LmRlcHRoLG89ZT90LmVuZCgpOnQucG9zO3doaWxlKHI+MCYmKGV8fHQuaW5kZXhBZnRlcihyKT09dC5ub2RlKHIpLmNoaWxkQ291bnQpKXItLSxvKyssZT0hMTtpZihuKXt2YXIgaT10Lm5vZGUocikubWF5YmVDaGlsZCh0LmluZGV4QWZ0ZXIocikpO3doaWxlKGkmJiFpLmlzTGVhZilpPWkuZmlyc3RDaGlsZCxvKyt9cmV0dXJuIG99ZnVuY3Rpb24gcGUodCxlLG4scixvKXt2YXIgaT10LmZpbmREaWZmU3RhcnQoZSxuKTtpZihudWxsPT1pKXJldHVybiBudWxsO3ZhciBzPXQuZmluZERpZmZFbmQoZSxuK3Quc2l6ZSxuK2Uuc2l6ZSksYT1zLmEsYz1zLmI7aWYoImVuZCI9PW8pe3ZhciB1PU1hdGgubWF4KDAsaS1NYXRoLm1pbihhLGMpKTtyLT1hK3UtaX1pZihhPGkmJnQuc2l6ZTxlLnNpemUpe3ZhciBsPXI8PWkmJnI+PWE/aS1yOjA7aS09bCxjPWkrKGMtYSksYT1pfWVsc2UgaWYoYzxpKXt2YXIgaD1yPD1pJiZyPj1jP2ktcjowO2ktPWgsYT1pKyhhLWMpLGM9aX1yZXR1cm57c3RhcnQ6aSxlbmRBOmEsZW5kQjpjfX1mdW5jdGlvbiBkZSh0LGUpe3ZhciBuPVtdLHI9ZS5jb250ZW50LGk9ZS5vcGVuU3RhcnQscz1lLm9wZW5FbmQ7d2hpbGUoaT4xJiZzPjEmJjE9PXIuY2hpbGRDb3VudCYmMT09ci5maXJzdENoaWxkLmNoaWxkQ291bnQpe2ktLSxzLS07dmFyIGE9ci5maXJzdENoaWxkO24ucHVzaChhLnR5cGUubmFtZSxhLnR5cGUuaGFzUmVxdWlyZWRBdHRycygpP2EuYXR0cnM6bnVsbCkscj1hLmNvbnRlbnR9dmFyIGM9dC5zb21lUHJvcCgiY2xpcGJvYXJkU2VyaWFsaXplciIpfHxvWyJiIl0uZnJvbVNjaGVtYSh0LnN0YXRlLnNjaGVtYSksdT1DZSgpLGw9dS5jcmVhdGVFbGVtZW50KCJkaXYiKTtsLmFwcGVuZENoaWxkKGMuc2VyaWFsaXplRnJhZ21lbnQocix7ZG9jdW1lbnQ6dX0pKTt2YXIgaCxmPWwuZmlyc3RDaGlsZDt3aGlsZShmJiYxPT1mLm5vZGVUeXBlJiYoaD1rZVtmLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCldKSl7Zm9yKHZhciBwPWgubGVuZ3RoLTE7cD49MDtwLS0pe3ZhciBkPXUuY3JlYXRlRWxlbWVudChoW3BdKTt3aGlsZShsLmZpcnN0Q2hpbGQpZC5hcHBlbmRDaGlsZChsLmZpcnN0Q2hpbGQpO2wuYXBwZW5kQ2hpbGQoZCl9Zj1sLmZpcnN0Q2hpbGR9ZiYmMT09Zi5ub2RlVHlwZSYmZi5zZXRBdHRyaWJ1dGUoImRhdGEtcG0tc2xpY2UiLGkrIiAiK3MrIiAiK0pTT04uc3RyaW5naWZ5KG4pKTt2YXIgdj10LnNvbWVQcm9wKCJjbGlwYm9hcmRUZXh0U2VyaWFsaXplciIsKGZ1bmN0aW9uKHQpe3JldHVybiB0KGUpfSkpfHxlLmNvbnRlbnQudGV4dEJldHdlZW4oMCxlLmNvbnRlbnQuc2l6ZSwiXG5cbiIpO3JldHVybntkb206bCx0ZXh0OnZ9fWZ1bmN0aW9uIHZlKHQsZSxuLHIsaSl7dmFyIHMsYSxjPWkucGFyZW50LnR5cGUuc3BlYy5jb2RlO2lmKCFuJiYhZSlyZXR1cm4gbnVsbDt2YXIgdT1lJiYocnx8Y3x8IW4pO2lmKHUpe2lmKHQuc29tZVByb3AoInRyYW5zZm9ybVBhc3RlZFRleHQiLChmdW5jdGlvbih0KXtlPXQoZSl9KSksYylyZXR1cm4gbmV3IG9bImkiXShvWyJjIl0uZnJvbSh0LnN0YXRlLnNjaGVtYS50ZXh0KGUpKSwwLDApO3ZhciBsPXQuc29tZVByb3AoImNsaXBib2FyZFRleHRQYXJzZXIiLChmdW5jdGlvbih0KXtyZXR1cm4gdChlLGkpfSkpO2w/YT1sOihzPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpLGUudHJpbSgpLnNwbGl0KC8oPzpcclxuP3xcbikrLykuZm9yRWFjaCgoZnVuY3Rpb24odCl7cy5hcHBlbmRDaGlsZChkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJwIikpLnRleHRDb250ZW50PXR9KSkpfWVsc2UgdC5zb21lUHJvcCgidHJhbnNmb3JtUGFzdGVkSFRNTCIsKGZ1bmN0aW9uKHQpe249dChuKX0pKSxzPU9lKG4pO3ZhciBoPXMmJnMucXVlcnlTZWxlY3RvcigiW2RhdGEtcG0tc2xpY2VdIiksZj1oJiYvXihcZCspIChcZCspICguKikvLmV4ZWMoaC5nZXRBdHRyaWJ1dGUoImRhdGEtcG0tc2xpY2UiKSk7aWYoIWEpe3ZhciBwPXQuc29tZVByb3AoImNsaXBib2FyZFBhcnNlciIpfHx0LnNvbWVQcm9wKCJkb21QYXJzZXIiKXx8b1siYSJdLmZyb21TY2hlbWEodC5zdGF0ZS5zY2hlbWEpO2E9cC5wYXJzZVNsaWNlKHMse3ByZXNlcnZlV2hpdGVzcGFjZTohKCF1JiYhZiksY29udGV4dDppfSl9cmV0dXJuIGE9Zj9NZSh4ZShhLCtmWzFdLCtmWzJdKSxmWzNdKTpvWyJpIl0ubWF4T3BlbihtZShhLmNvbnRlbnQsaSksITEpLHQuc29tZVByb3AoInRyYW5zZm9ybVBhc3RlZCIsKGZ1bmN0aW9uKHQpe2E9dChhKX0pKSxhfWZ1bmN0aW9uIG1lKHQsZSl7aWYodC5jaGlsZENvdW50PDIpcmV0dXJuIHQ7Zm9yKHZhciBuPWZ1bmN0aW9uKG4pe3ZhciByPWUubm9kZShuKSxpPXIuY29udGVudE1hdGNoQXQoZS5pbmRleChuKSkscz12b2lkIDAsYT1bXTtpZih0LmZvckVhY2goKGZ1bmN0aW9uKHQpe2lmKGEpe3ZhciBlLG49aS5maW5kV3JhcHBpbmcodC50eXBlKTtpZighbilyZXR1cm4gYT1udWxsO2lmKGU9YS5sZW5ndGgmJnMubGVuZ3RoJiZ5ZShuLHMsdCxhW2EubGVuZ3RoLTFdLDApKWFbYS5sZW5ndGgtMV09ZTtlbHNle2EubGVuZ3RoJiYoYVthLmxlbmd0aC0xXT13ZShhW2EubGVuZ3RoLTFdLHMubGVuZ3RoKSk7dmFyIHI9Z2UodCxuKTthLnB1c2gociksaT1pLm1hdGNoVHlwZShyLnR5cGUsci5hdHRycykscz1ufX19KSksYSlyZXR1cm57djpvWyJjIl0uZnJvbShhKX19LHI9ZS5kZXB0aDtyPj0wO3ItLSl7dmFyIGk9bihyKTtpZihpKXJldHVybiBpLnZ9cmV0dXJuIHR9ZnVuY3Rpb24gZ2UodCxlLG4pe3ZvaWQgMD09PW4mJihuPTApO2Zvcih2YXIgcj1lLmxlbmd0aC0xO3I+PW47ci0tKXQ9ZVtyXS5jcmVhdGUobnVsbCxvWyJjIl0uZnJvbSh0KSk7cmV0dXJuIHR9ZnVuY3Rpb24geWUodCxlLG4scixpKXtpZihpPHQubGVuZ3RoJiZpPGUubGVuZ3RoJiZ0W2ldPT1lW2ldKXt2YXIgcz15ZSh0LGUsbixyLmxhc3RDaGlsZCxpKzEpO2lmKHMpcmV0dXJuIHIuY29weShyLmNvbnRlbnQucmVwbGFjZUNoaWxkKHIuY2hpbGRDb3VudC0xLHMpKTt2YXIgYT1yLmNvbnRlbnRNYXRjaEF0KHIuY2hpbGRDb3VudCk7aWYoYS5tYXRjaFR5cGUoaT09dC5sZW5ndGgtMT9uLnR5cGU6dFtpKzFdKSlyZXR1cm4gci5jb3B5KHIuY29udGVudC5hcHBlbmQob1siYyJdLmZyb20oZ2Uobix0LGkrMSkpKSl9fWZ1bmN0aW9uIHdlKHQsZSl7aWYoMD09ZSlyZXR1cm4gdDt2YXIgbj10LmNvbnRlbnQucmVwbGFjZUNoaWxkKHQuY2hpbGRDb3VudC0xLHdlKHQubGFzdENoaWxkLGUtMSkpLHI9dC5jb250ZW50TWF0Y2hBdCh0LmNoaWxkQ291bnQpLmZpbGxCZWZvcmUob1siYyJdLmVtcHR5LCEwKTtyZXR1cm4gdC5jb3B5KG4uYXBwZW5kKHIpKX1mdW5jdGlvbiBiZSh0LGUsbixyLGkscyl7dmFyIGE9ZTwwP3QuZmlyc3RDaGlsZDp0Lmxhc3RDaGlsZCxjPWEuY29udGVudDtyZXR1cm4gaTxyLTEmJihjPWJlKGMsZSxuLHIsaSsxLHMpKSxpPj1uJiYoYz1lPDA/YS5jb250ZW50TWF0Y2hBdCgwKS5maWxsQmVmb3JlKGMsdC5jaGlsZENvdW50PjF8fHM8PWkpLmFwcGVuZChjKTpjLmFwcGVuZChhLmNvbnRlbnRNYXRjaEF0KGEuY2hpbGRDb3VudCkuZmlsbEJlZm9yZShvWyJjIl0uZW1wdHksITApKSksdC5yZXBsYWNlQ2hpbGQoZTwwPzA6dC5jaGlsZENvdW50LTEsYS5jb3B5KGMpKX1mdW5jdGlvbiB4ZSh0LGUsbil7cmV0dXJuIGU8dC5vcGVuU3RhcnQmJih0PW5ldyBvWyJpIl0oYmUodC5jb250ZW50LC0xLGUsdC5vcGVuU3RhcnQsMCx0Lm9wZW5FbmQpLGUsdC5vcGVuRW5kKSksbjx0Lm9wZW5FbmQmJih0PW5ldyBvWyJpIl0oYmUodC5jb250ZW50LDEsbix0Lm9wZW5FbmQsMCwwKSx0Lm9wZW5TdGFydCxuKSksdH12YXIga2U9e3RoZWFkOlsidGFibGUiXSx0Ym9keTpbInRhYmxlIl0sdGZvb3Q6WyJ0YWJsZSJdLGNhcHRpb246WyJ0YWJsZSJdLGNvbGdyb3VwOlsidGFibGUiXSxjb2w6WyJ0YWJsZSIsImNvbGdyb3VwIl0sdHI6WyJ0YWJsZSIsInRib2R5Il0sdGQ6WyJ0YWJsZSIsInRib2R5IiwidHIiXSx0aDpbInRhYmxlIiwidGJvZHkiLCJ0ciJdfSxTZT1udWxsO2Z1bmN0aW9uIENlKCl7cmV0dXJuIFNlfHwoU2U9ZG9jdW1lbnQuaW1wbGVtZW50YXRpb24uY3JlYXRlSFRNTERvY3VtZW50KCJ0aXRsZSIpKX1mdW5jdGlvbiBPZSh0KXt2YXIgZT0vKFxzKjxtZXRhIFtePl0qPikqLy5leGVjKHQpO2UmJih0PXQuc2xpY2UoZVswXS5sZW5ndGgpKTt2YXIgbixyPUNlKCkuY3JlYXRlRWxlbWVudCgiZGl2Iiksbz0vKD86PG1ldGEgW14+XSo+KSo8KFthLXpdW14+XHNdKykvaS5leGVjKHQpLGk9MDsobj1vJiZrZVtvWzFdLnRvTG93ZXJDYXNlKCldKSYmKHQ9bi5tYXAoKGZ1bmN0aW9uKHQpe3JldHVybiI8Iit0KyI+In0pKS5qb2luKCIiKSt0K24ubWFwKChmdW5jdGlvbih0KXtyZXR1cm4iPC8iK3QrIj4ifSkpLnJldmVyc2UoKS5qb2luKCIiKSxpPW4ubGVuZ3RoKSxyLmlubmVySFRNTD10O2Zvcih2YXIgcz0wO3M8aTtzKyspcj1yLmZpcnN0Q2hpbGQ7cmV0dXJuIHJ9ZnVuY3Rpb24gTWUodCxlKXtpZighdC5zaXplKXJldHVybiB0O3ZhciBuLHI9dC5jb250ZW50LmZpcnN0Q2hpbGQudHlwZS5zY2hlbWE7dHJ5e249SlNPTi5wYXJzZShlKX1jYXRjaChsKXtyZXR1cm4gdH1mb3IodmFyIGk9dC5jb250ZW50LHM9dC5vcGVuU3RhcnQsYT10Lm9wZW5FbmQsYz1uLmxlbmd0aC0yO2M+PTA7Yy09Mil7dmFyIHU9ci5ub2Rlc1tuW2NdXTtpZighdXx8dS5oYXNSZXF1aXJlZEF0dHJzKCkpYnJlYWs7aT1vWyJjIl0uZnJvbSh1LmNyZWF0ZShuW2MrMV0saSkpLHMrKyxhKyt9cmV0dXJuIG5ldyBvWyJpIl0oaSxzLGEpfXZhciBOZT17Y2hpbGRMaXN0OiEwLGNoYXJhY3RlckRhdGE6ITAsY2hhcmFjdGVyRGF0YU9sZFZhbHVlOiEwLGF0dHJpYnV0ZXM6ITAsYXR0cmlidXRlT2xkVmFsdWU6ITAsc3VidHJlZTohMH0sVGU9cy5pZSYmcy5pZV92ZXJzaW9uPD0xMSxBZT1mdW5jdGlvbigpe3RoaXMuYW5jaG9yTm9kZT10aGlzLmFuY2hvck9mZnNldD10aGlzLmZvY3VzTm9kZT10aGlzLmZvY3VzT2Zmc2V0PW51bGx9O0FlLnByb3RvdHlwZS5zZXQ9ZnVuY3Rpb24odCl7dGhpcy5hbmNob3JOb2RlPXQuYW5jaG9yTm9kZSx0aGlzLmFuY2hvck9mZnNldD10LmFuY2hvck9mZnNldCx0aGlzLmZvY3VzTm9kZT10LmZvY3VzTm9kZSx0aGlzLmZvY3VzT2Zmc2V0PXQuZm9jdXNPZmZzZXR9LEFlLnByb3RvdHlwZS5lcT1mdW5jdGlvbih0KXtyZXR1cm4gdC5hbmNob3JOb2RlPT10aGlzLmFuY2hvck5vZGUmJnQuYW5jaG9yT2Zmc2V0PT10aGlzLmFuY2hvck9mZnNldCYmdC5mb2N1c05vZGU9PXRoaXMuZm9jdXNOb2RlJiZ0LmZvY3VzT2Zmc2V0PT10aGlzLmZvY3VzT2Zmc2V0fTt2YXIgRWU9ZnVuY3Rpb24odCxlKXt2YXIgbj10aGlzO3RoaXMudmlldz10LHRoaXMuaGFuZGxlRE9NQ2hhbmdlPWUsdGhpcy5xdWV1ZT1bXSx0aGlzLmZsdXNoaW5nU29vbj0tMSx0aGlzLm9ic2VydmVyPXdpbmRvdy5NdXRhdGlvbk9ic2VydmVyJiZuZXcgd2luZG93Lk11dGF0aW9uT2JzZXJ2ZXIoKGZ1bmN0aW9uKHQpe2Zvcih2YXIgZT0wO2U8dC5sZW5ndGg7ZSsrKW4ucXVldWUucHVzaCh0W2VdKTtzLmllJiZzLmllX3ZlcnNpb248PTExJiZ0LnNvbWUoKGZ1bmN0aW9uKHQpe3JldHVybiJjaGlsZExpc3QiPT10LnR5cGUmJnQucmVtb3ZlZE5vZGVzLmxlbmd0aHx8ImNoYXJhY3RlckRhdGEiPT10LnR5cGUmJnQub2xkVmFsdWUubGVuZ3RoPnQudGFyZ2V0Lm5vZGVWYWx1ZS5sZW5ndGh9KSk/bi5mbHVzaFNvb24oKTpuLmZsdXNoKCl9KSksdGhpcy5jdXJyZW50U2VsZWN0aW9uPW5ldyBBZSxUZSYmKHRoaXMub25DaGFyRGF0YT1mdW5jdGlvbih0KXtuLnF1ZXVlLnB1c2goe3RhcmdldDp0LnRhcmdldCx0eXBlOiJjaGFyYWN0ZXJEYXRhIixvbGRWYWx1ZTp0LnByZXZWYWx1ZX0pLG4uZmx1c2hTb29uKCl9KSx0aGlzLm9uU2VsZWN0aW9uQ2hhbmdlPXRoaXMub25TZWxlY3Rpb25DaGFuZ2UuYmluZCh0aGlzKSx0aGlzLnN1cHByZXNzaW5nU2VsZWN0aW9uVXBkYXRlcz0hMX07RWUucHJvdG90eXBlLmZsdXNoU29vbj1mdW5jdGlvbigpe3ZhciB0PXRoaXM7dGhpcy5mbHVzaGluZ1Nvb248MCYmKHRoaXMuZmx1c2hpbmdTb29uPXdpbmRvdy5zZXRUaW1lb3V0KChmdW5jdGlvbigpe3QuZmx1c2hpbmdTb29uPS0xLHQuZmx1c2goKX0pLDIwKSl9LEVlLnByb3RvdHlwZS5mb3JjZUZsdXNoPWZ1bmN0aW9uKCl7dGhpcy5mbHVzaGluZ1Nvb24+LTEmJih3aW5kb3cuY2xlYXJUaW1lb3V0KHRoaXMuZmx1c2hpbmdTb29uKSx0aGlzLmZsdXNoaW5nU29vbj0tMSx0aGlzLmZsdXNoKCkpfSxFZS5wcm90b3R5cGUuc3RhcnQ9ZnVuY3Rpb24oKXt0aGlzLm9ic2VydmVyJiZ0aGlzLm9ic2VydmVyLm9ic2VydmUodGhpcy52aWV3LmRvbSxOZSksVGUmJnRoaXMudmlldy5kb20uYWRkRXZlbnRMaXN0ZW5lcigiRE9NQ2hhcmFjdGVyRGF0YU1vZGlmaWVkIix0aGlzLm9uQ2hhckRhdGEpLHRoaXMuY29ubmVjdFNlbGVjdGlvbigpfSxFZS5wcm90b3R5cGUuc3RvcD1mdW5jdGlvbigpe3ZhciB0PXRoaXM7aWYodGhpcy5vYnNlcnZlcil7dmFyIGU9dGhpcy5vYnNlcnZlci50YWtlUmVjb3JkcygpO2lmKGUubGVuZ3RoKXtmb3IodmFyIG49MDtuPGUubGVuZ3RoO24rKyl0aGlzLnF1ZXVlLnB1c2goZVtuXSk7d2luZG93LnNldFRpbWVvdXQoKGZ1bmN0aW9uKCl7cmV0dXJuIHQuZmx1c2goKX0pLDIwKX10aGlzLm9ic2VydmVyLmRpc2Nvbm5lY3QoKX1UZSYmdGhpcy52aWV3LmRvbS5yZW1vdmVFdmVudExpc3RlbmVyKCJET01DaGFyYWN0ZXJEYXRhTW9kaWZpZWQiLHRoaXMub25DaGFyRGF0YSksdGhpcy5kaXNjb25uZWN0U2VsZWN0aW9uKCl9LEVlLnByb3RvdHlwZS5jb25uZWN0U2VsZWN0aW9uPWZ1bmN0aW9uKCl7dGhpcy52aWV3LmRvbS5vd25lckRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoInNlbGVjdGlvbmNoYW5nZSIsdGhpcy5vblNlbGVjdGlvbkNoYW5nZSl9LEVlLnByb3RvdHlwZS5kaXNjb25uZWN0U2VsZWN0aW9uPWZ1bmN0aW9uKCl7dGhpcy52aWV3LmRvbS5vd25lckRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoInNlbGVjdGlvbmNoYW5nZSIsdGhpcy5vblNlbGVjdGlvbkNoYW5nZSl9LEVlLnByb3RvdHlwZS5zdXBwcmVzc1NlbGVjdGlvblVwZGF0ZXM9ZnVuY3Rpb24oKXt2YXIgdD10aGlzO3RoaXMuc3VwcHJlc3NpbmdTZWxlY3Rpb25VcGRhdGVzPSEwLHNldFRpbWVvdXQoKGZ1bmN0aW9uKCl7cmV0dXJuIHQuc3VwcHJlc3NpbmdTZWxlY3Rpb25VcGRhdGVzPSExfSksNTApfSxFZS5wcm90b3R5cGUub25TZWxlY3Rpb25DaGFuZ2U9ZnVuY3Rpb24oKXtpZihyZSh0aGlzLnZpZXcpKXtpZih0aGlzLnN1cHByZXNzaW5nU2VsZWN0aW9uVXBkYXRlcylyZXR1cm4gS3QodGhpcy52aWV3KTtpZihzLmllJiZzLmllX3ZlcnNpb248PTExJiYhdGhpcy52aWV3LnN0YXRlLnNlbGVjdGlvbi5lbXB0eSl7dmFyIHQ9dGhpcy52aWV3LnJvb3QuZ2V0U2VsZWN0aW9uKCk7aWYodC5mb2N1c05vZGUmJnYodC5mb2N1c05vZGUsdC5mb2N1c09mZnNldCx0LmFuY2hvck5vZGUsdC5hbmNob3JPZmZzZXQpKXJldHVybiB0aGlzLmZsdXNoU29vbigpfXRoaXMuZmx1c2goKX19LEVlLnByb3RvdHlwZS5zZXRDdXJTZWxlY3Rpb249ZnVuY3Rpb24oKXt0aGlzLmN1cnJlbnRTZWxlY3Rpb24uc2V0KHRoaXMudmlldy5yb290LmdldFNlbGVjdGlvbigpKX0sRWUucHJvdG90eXBlLmlnbm9yZVNlbGVjdGlvbkNoYW5nZT1mdW5jdGlvbih0KXtpZigwPT10LnJhbmdlQ291bnQpcmV0dXJuITA7dmFyIGU9dC5nZXRSYW5nZUF0KDApLmNvbW1vbkFuY2VzdG9yQ29udGFpbmVyLG49dGhpcy52aWV3LmRvY1ZpZXcubmVhcmVzdERlc2MoZSk7cmV0dXJuIG4mJm4uaWdub3JlTXV0YXRpb24oe3R5cGU6InNlbGVjdGlvbiIsdGFyZ2V0OjM9PWUubm9kZVR5cGU/ZS5wYXJlbnROb2RlOmV9KT8odGhpcy5zZXRDdXJTZWxlY3Rpb24oKSwhMCk6dm9pZCAwfSxFZS5wcm90b3R5cGUuZmx1c2g9ZnVuY3Rpb24oKXtpZih0aGlzLnZpZXcuZG9jVmlldyYmISh0aGlzLmZsdXNoaW5nU29vbj4tMSkpe3ZhciB0PXRoaXMub2JzZXJ2ZXI/dGhpcy5vYnNlcnZlci50YWtlUmVjb3JkcygpOltdO3RoaXMucXVldWUubGVuZ3RoJiYodD10aGlzLnF1ZXVlLmNvbmNhdCh0KSx0aGlzLnF1ZXVlLmxlbmd0aD0wKTt2YXIgZT10aGlzLnZpZXcucm9vdC5nZXRTZWxlY3Rpb24oKSxuPSF0aGlzLnN1cHByZXNzaW5nU2VsZWN0aW9uVXBkYXRlcyYmIXRoaXMuY3VycmVudFNlbGVjdGlvbi5lcShlKSYmb2UodGhpcy52aWV3KSYmIXRoaXMuaWdub3JlU2VsZWN0aW9uQ2hhbmdlKGUpLHI9LTEsbz0tMSxpPSExLGE9W107aWYodGhpcy52aWV3LmVkaXRhYmxlKWZvcih2YXIgYz0wO2M8dC5sZW5ndGg7YysrKXt2YXIgdT10aGlzLnJlZ2lzdGVyTXV0YXRpb24odFtjXSxhKTt1JiYocj1yPDA/dS5mcm9tOk1hdGgubWluKHUuZnJvbSxyKSxvPW88MD91LnRvOk1hdGgubWF4KHUudG8sbyksdS50eXBlT3ZlciYmKGk9ITApKX1pZihzLmdlY2tvJiZhLmxlbmd0aD4xKXt2YXIgbD1hLmZpbHRlcigoZnVuY3Rpb24odCl7cmV0dXJuIkJSIj09dC5ub2RlTmFtZX0pKTtpZigyPT1sLmxlbmd0aCl7dmFyIGg9bFswXSxmPWxbMV07aC5wYXJlbnROb2RlJiZoLnBhcmVudE5vZGUucGFyZW50Tm9kZT09Zi5wYXJlbnROb2RlP2YucmVtb3ZlKCk6aC5yZW1vdmUoKX19KHI+LTF8fG4pJiYocj4tMSYmKHRoaXMudmlldy5kb2NWaWV3Lm1hcmtEaXJ0eShyLG8pLFJlKHRoaXMudmlldykpLHRoaXMuaGFuZGxlRE9NQ2hhbmdlKHIsbyxpLGEpLHRoaXMudmlldy5kb2NWaWV3LmRpcnR5P3RoaXMudmlldy51cGRhdGVTdGF0ZSh0aGlzLnZpZXcuc3RhdGUpOnRoaXMuY3VycmVudFNlbGVjdGlvbi5lcShlKXx8S3QodGhpcy52aWV3KSl9fSxFZS5wcm90b3R5cGUucmVnaXN0ZXJNdXRhdGlvbj1mdW5jdGlvbih0LGUpe2lmKGUuaW5kZXhPZih0LnRhcmdldCk+LTEpcmV0dXJuIG51bGw7dmFyIG49dGhpcy52aWV3LmRvY1ZpZXcubmVhcmVzdERlc2ModC50YXJnZXQpO2lmKCJhdHRyaWJ1dGVzIj09dC50eXBlJiYobj09dGhpcy52aWV3LmRvY1ZpZXd8fCJjb250ZW50ZWRpdGFibGUiPT10LmF0dHJpYnV0ZU5hbWV8fCJzdHlsZSI9PXQuYXR0cmlidXRlTmFtZSYmIXQub2xkVmFsdWUmJiF0LnRhcmdldC5nZXRBdHRyaWJ1dGUoInN0eWxlIikpKXJldHVybiBudWxsO2lmKCFufHxuLmlnbm9yZU11dGF0aW9uKHQpKXJldHVybiBudWxsO2lmKCJjaGlsZExpc3QiPT10LnR5cGUpe3ZhciByPXQucHJldmlvdXNTaWJsaW5nLG89dC5uZXh0U2libGluZztpZihzLmllJiZzLmllX3ZlcnNpb248PTExJiZ0LmFkZGVkTm9kZXMubGVuZ3RoKWZvcih2YXIgaT0wO2k8dC5hZGRlZE5vZGVzLmxlbmd0aDtpKyspe3ZhciBhPXQuYWRkZWROb2Rlc1tpXSxjPWEucHJldmlvdXNTaWJsaW5nLHU9YS5uZXh0U2libGluZzsoIWN8fEFycmF5LnByb3RvdHlwZS5pbmRleE9mLmNhbGwodC5hZGRlZE5vZGVzLGMpPDApJiYocj1jKSwoIXV8fEFycmF5LnByb3RvdHlwZS5pbmRleE9mLmNhbGwodC5hZGRlZE5vZGVzLHUpPDApJiYobz11KX1mb3IodmFyIGw9ciYmci5wYXJlbnROb2RlPT10LnRhcmdldD9mKHIpKzE6MCxoPW4ubG9jYWxQb3NGcm9tRE9NKHQudGFyZ2V0LGwsLTEpLHA9byYmby5wYXJlbnROb2RlPT10LnRhcmdldD9mKG8pOnQudGFyZ2V0LmNoaWxkTm9kZXMubGVuZ3RoLGQ9MDtkPHQuYWRkZWROb2Rlcy5sZW5ndGg7ZCsrKWUucHVzaCh0LmFkZGVkTm9kZXNbZF0pO3ZhciB2PW4ubG9jYWxQb3NGcm9tRE9NKHQudGFyZ2V0LHAsMSk7cmV0dXJue2Zyb206aCx0bzp2fX1yZXR1cm4iYXR0cmlidXRlcyI9PXQudHlwZT97ZnJvbTpuLnBvc0F0U3RhcnQtbi5ib3JkZXIsdG86bi5wb3NBdEVuZCtuLmJvcmRlcn06e2Zyb206bi5wb3NBdFN0YXJ0LHRvOm4ucG9zQXRFbmQsdHlwZU92ZXI6dC50YXJnZXQubm9kZVZhbHVlPT10Lm9sZFZhbHVlfX07dmFyIERlPSExO2Z1bmN0aW9uIFJlKHQpe0RlfHwoRGU9ITAsIm5vcm1hbCI9PWdldENvbXB1dGVkU3R5bGUodC5kb20pLndoaXRlU3BhY2UmJmNvbnNvbGVbIndhcm4iXSgiUHJvc2VNaXJyb3IgZXhwZWN0cyB0aGUgQ1NTIHdoaXRlLXNwYWNlIHByb3BlcnR5IHRvIGJlIHNldCwgcHJlZmVyYWJseSB0byAncHJlLXdyYXAnLiBJdCBpcyByZWNvbW1lbmRlZCB0byBsb2FkIHN0eWxlL3Byb3NlbWlycm9yLmNzcyBmcm9tIHRoZSBwcm9zZW1pcnJvci12aWV3IHBhY2thZ2UuIikpfXZhciB6ZT17fSxQZT17fTtmdW5jdGlvbiBJZSh0KXt0LnNoaWZ0S2V5PSExLHQubW91c2VEb3duPW51bGwsdC5sYXN0S2V5Q29kZT1udWxsLHQubGFzdEtleUNvZGVUaW1lPTAsdC5sYXN0Q2xpY2s9e3RpbWU6MCx4OjAseTowLHR5cGU6IiJ9LHQubGFzdFNlbGVjdGlvbk9yaWdpbj1udWxsLHQubGFzdFNlbGVjdGlvblRpbWU9MCx0Lmxhc3RJT1NFbnRlcj0wLHQuY29tcG9zaW5nPSExLHQuY29tcG9zaW5nVGltZW91dD1udWxsLHQuY29tcG9zaXRpb25Ob2Rlcz1bXSx0LmNvbXBvc2l0aW9uRW5kZWRBdD0tMmU4LHQuZG9tT2JzZXJ2ZXI9bmV3IEVlKHQsKGZ1bmN0aW9uKGUsbixyLG8pe3JldHVybiBjZSh0LGUsbixyLG8pfSkpLHQuZG9tT2JzZXJ2ZXIuc3RhcnQoKSx0LmRvbUNoYW5nZUNvdW50PTAsdC5ldmVudEhhbmRsZXJzPU9iamVjdC5jcmVhdGUobnVsbCk7dmFyIGU9ZnVuY3Rpb24oZSl7dmFyIG49emVbZV07dC5kb20uYWRkRXZlbnRMaXN0ZW5lcihlLHQuZXZlbnRIYW5kbGVyc1tlXT1mdW5jdGlvbihlKXshJGUodCxlKXx8amUodCxlKXx8IXQuZWRpdGFibGUmJmUudHlwZSBpbiBQZXx8bih0LGUpfSl9O2Zvcih2YXIgbiBpbiB6ZSllKG4pO3Muc2FmYXJpJiZ0LmRvbS5hZGRFdmVudExpc3RlbmVyKCJpbnB1dCIsKGZ1bmN0aW9uKCl7cmV0dXJuIG51bGx9KSksRmUodCl9ZnVuY3Rpb24gQmUodCxlKXt0Lmxhc3RTZWxlY3Rpb25PcmlnaW49ZSx0Lmxhc3RTZWxlY3Rpb25UaW1lPURhdGUubm93KCl9ZnVuY3Rpb24gX2UodCl7Zm9yKHZhciBlIGluIHQuZG9tT2JzZXJ2ZXIuc3RvcCgpLHQuZXZlbnRIYW5kbGVycyl0LmRvbS5yZW1vdmVFdmVudExpc3RlbmVyKGUsdC5ldmVudEhhbmRsZXJzW2VdKTtjbGVhclRpbWVvdXQodC5jb21wb3NpbmdUaW1lb3V0KX1mdW5jdGlvbiBGZSh0KXt0LnNvbWVQcm9wKCJoYW5kbGVET01FdmVudHMiLChmdW5jdGlvbihlKXtmb3IodmFyIG4gaW4gZSl0LmV2ZW50SGFuZGxlcnNbbl18fHQuZG9tLmFkZEV2ZW50TGlzdGVuZXIobix0LmV2ZW50SGFuZGxlcnNbbl09ZnVuY3Rpb24oZSl7cmV0dXJuIGplKHQsZSl9KX0pKX1mdW5jdGlvbiBqZSh0LGUpe3JldHVybiB0LnNvbWVQcm9wKCJoYW5kbGVET01FdmVudHMiLChmdW5jdGlvbihuKXt2YXIgcj1uW2UudHlwZV07cmV0dXJuISFyJiYocih0LGUpfHxlLmRlZmF1bHRQcmV2ZW50ZWQpfSkpfWZ1bmN0aW9uICRlKHQsZSl7aWYoIWUuYnViYmxlcylyZXR1cm4hMDtpZihlLmRlZmF1bHRQcmV2ZW50ZWQpcmV0dXJuITE7Zm9yKHZhciBuPWUudGFyZ2V0O24hPXQuZG9tO249bi5wYXJlbnROb2RlKWlmKCFufHwxMT09bi5ub2RlVHlwZXx8bi5wbVZpZXdEZXNjJiZuLnBtVmlld0Rlc2Muc3RvcEV2ZW50KGUpKXJldHVybiExO3JldHVybiEwfWZ1bmN0aW9uIFZlKHQsZSl7amUodCxlKXx8IXplW2UudHlwZV18fCF0LmVkaXRhYmxlJiZlLnR5cGUgaW4gUGV8fHplW2UudHlwZV0odCxlKX1mdW5jdGlvbiBMZSh0KXtyZXR1cm57bGVmdDp0LmNsaWVudFgsdG9wOnQuY2xpZW50WX19ZnVuY3Rpb24gcWUodCxlKXt2YXIgbj1lLngtdC5jbGllbnRYLHI9ZS55LXQuY2xpZW50WTtyZXR1cm4gbipuK3IqcjwxMDB9ZnVuY3Rpb24gSmUodCxlLG4scixvKXtpZigtMT09cilyZXR1cm4hMTtmb3IodmFyIGk9dC5zdGF0ZS5kb2MucmVzb2x2ZShyKSxzPWZ1bmN0aW9uKHIpe2lmKHQuc29tZVByb3AoZSwoZnVuY3Rpb24oZSl7cmV0dXJuIHI+aS5kZXB0aD9lKHQsbixpLm5vZGVBZnRlcixpLmJlZm9yZShyKSxvLCEwKTplKHQsbixpLm5vZGUociksaS5iZWZvcmUociksbywhMSl9KSkpcmV0dXJue3Y6ITB9fSxhPWkuZGVwdGgrMTthPjA7YS0tKXt2YXIgYz1zKGEpO2lmKGMpcmV0dXJuIGMudn1yZXR1cm4hMX1mdW5jdGlvbiBXZSh0LGUsbil7dC5mb2N1c2VkfHx0LmZvY3VzKCk7dmFyIHI9dC5zdGF0ZS50ci5zZXRTZWxlY3Rpb24oZSk7InBvaW50ZXIiPT1uJiZyLnNldE1ldGEoInBvaW50ZXIiLCEwKSx0LmRpc3BhdGNoKHIpfWZ1bmN0aW9uIEhlKHQsZSl7aWYoLTE9PWUpcmV0dXJuITE7dmFyIG49dC5zdGF0ZS5kb2MucmVzb2x2ZShlKSxvPW4ubm9kZUFmdGVyO3JldHVybiEhKG8mJm8uaXNBdG9tJiZyWyJOb2RlU2VsZWN0aW9uIl0uaXNTZWxlY3RhYmxlKG8pKSYmKFdlKHQsbmV3IHJbIk5vZGVTZWxlY3Rpb24iXShuKSwicG9pbnRlciIpLCEwKX1mdW5jdGlvbiBLZSh0LGUpe2lmKC0xPT1lKXJldHVybiExO3ZhciBuLG8saT10LnN0YXRlLnNlbGVjdGlvbjtpIGluc3RhbmNlb2YgclsiTm9kZVNlbGVjdGlvbiJdJiYobj1pLm5vZGUpO2Zvcih2YXIgcz10LnN0YXRlLmRvYy5yZXNvbHZlKGUpLGE9cy5kZXB0aCsxO2E+MDthLS0pe3ZhciBjPWE+cy5kZXB0aD9zLm5vZGVBZnRlcjpzLm5vZGUoYSk7aWYoclsiTm9kZVNlbGVjdGlvbiJdLmlzU2VsZWN0YWJsZShjKSl7bz1uJiZpLiRmcm9tLmRlcHRoPjAmJmE+PWkuJGZyb20uZGVwdGgmJnMuYmVmb3JlKGkuJGZyb20uZGVwdGgrMSk9PWkuJGZyb20ucG9zP3MuYmVmb3JlKGkuJGZyb20uZGVwdGgpOnMuYmVmb3JlKGEpO2JyZWFrfX1yZXR1cm4gbnVsbCE9byYmKFdlKHQsclsiTm9kZVNlbGVjdGlvbiJdLmNyZWF0ZSh0LnN0YXRlLmRvYyxvKSwicG9pbnRlciIpLCEwKX1mdW5jdGlvbiBVZSh0LGUsbixyLG8pe3JldHVybiBKZSh0LCJoYW5kbGVDbGlja09uIixlLG4scil8fHQuc29tZVByb3AoImhhbmRsZUNsaWNrIiwoZnVuY3Rpb24obil7cmV0dXJuIG4odCxlLHIpfSkpfHwobz9LZSh0LG4pOkhlKHQsbikpfWZ1bmN0aW9uIEdlKHQsZSxuLHIpe3JldHVybiBKZSh0LCJoYW5kbGVEb3VibGVDbGlja09uIixlLG4scil8fHQuc29tZVByb3AoImhhbmRsZURvdWJsZUNsaWNrIiwoZnVuY3Rpb24obil7cmV0dXJuIG4odCxlLHIpfSkpfWZ1bmN0aW9uIFhlKHQsZSxuLHIpe3JldHVybiBKZSh0LCJoYW5kbGVUcmlwbGVDbGlja09uIixlLG4scil8fHQuc29tZVByb3AoImhhbmRsZVRyaXBsZUNsaWNrIiwoZnVuY3Rpb24obil7cmV0dXJuIG4odCxlLHIpfSkpfHxZZSh0LG4pfWZ1bmN0aW9uIFllKHQsZSl7dmFyIG49dC5zdGF0ZS5kb2M7aWYoLTE9PWUpcmV0dXJuISFuLmlubGluZUNvbnRlbnQmJihXZSh0LHJbIlRleHRTZWxlY3Rpb24iXS5jcmVhdGUobiwwLG4uY29udGVudC5zaXplKSwicG9pbnRlciIpLCEwKTtmb3IodmFyIG89bi5yZXNvbHZlKGUpLGk9by5kZXB0aCsxO2k+MDtpLS0pe3ZhciBzPWk+by5kZXB0aD9vLm5vZGVBZnRlcjpvLm5vZGUoaSksYT1vLmJlZm9yZShpKTtpZihzLmlubGluZUNvbnRlbnQpV2UodCxyWyJUZXh0U2VsZWN0aW9uIl0uY3JlYXRlKG4sYSsxLGErMStzLmNvbnRlbnQuc2l6ZSksInBvaW50ZXIiKTtlbHNle2lmKCFyWyJOb2RlU2VsZWN0aW9uIl0uaXNTZWxlY3RhYmxlKHMpKWNvbnRpbnVlO1dlKHQsclsiTm9kZVNlbGVjdGlvbiJdLmNyZWF0ZShuLGEpLCJwb2ludGVyIil9cmV0dXJuITB9fWZ1bmN0aW9uIFplKHQpe3JldHVybiBvbih0KX1QZS5rZXlkb3duPWZ1bmN0aW9uKHQsZSl7aWYodC5zaGlmdEtleT0xNj09ZS5rZXlDb2RlfHxlLnNoaWZ0S2V5LCFlbih0LGUpKWlmKHQuZG9tT2JzZXJ2ZXIuZm9yY2VGbHVzaCgpLHQubGFzdEtleUNvZGU9ZS5rZXlDb2RlLHQubGFzdEtleUNvZGVUaW1lPURhdGUubm93KCksIXMuaW9zfHwxMyE9ZS5rZXlDb2RlfHxlLmN0cmxLZXl8fGUuYWx0S2V5fHxlLm1ldGFLZXkpdC5zb21lUHJvcCgiaGFuZGxlS2V5RG93biIsKGZ1bmN0aW9uKG4pe3JldHVybiBuKHQsZSl9KSl8fFd0KHQsZSk/ZS5wcmV2ZW50RGVmYXVsdCgpOkJlKHQsImtleSIpO2Vsc2V7dmFyIG49RGF0ZS5ub3coKTt0Lmxhc3RJT1NFbnRlcj1uLHNldFRpbWVvdXQoKGZ1bmN0aW9uKCl7dC5sYXN0SU9TRW50ZXI9PW4mJih0LnNvbWVQcm9wKCJoYW5kbGVLZXlEb3duIiwoZnVuY3Rpb24oZSl7cmV0dXJuIGUodCxrKDEzLCJFbnRlciIpKX0pKSx0Lmxhc3RJT1NFbnRlcj0wKX0pLDUwKX19LFBlLmtleXVwPWZ1bmN0aW9uKHQsZSl7MTY9PWUua2V5Q29kZSYmKHQuc2hpZnRLZXk9ITEpfSxQZS5rZXlwcmVzcz1mdW5jdGlvbih0LGUpe2lmKCEoZW4odCxlKXx8IWUuY2hhckNvZGV8fGUuY3RybEtleSYmIWUuYWx0S2V5fHxzLm1hYyYmZS5tZXRhS2V5KSlpZih0LnNvbWVQcm9wKCJoYW5kbGVLZXlQcmVzcyIsKGZ1bmN0aW9uKG4pe3JldHVybiBuKHQsZSl9KSkpZS5wcmV2ZW50RGVmYXVsdCgpO2Vsc2V7dmFyIG49dC5zdGF0ZS5zZWxlY3Rpb247aWYoIShuIGluc3RhbmNlb2YgclsiVGV4dFNlbGVjdGlvbiJdKXx8IW4uJGZyb20uc2FtZVBhcmVudChuLiR0bykpe3ZhciBvPVN0cmluZy5mcm9tQ2hhckNvZGUoZS5jaGFyQ29kZSk7dC5zb21lUHJvcCgiaGFuZGxlVGV4dElucHV0IiwoZnVuY3Rpb24oZSl7cmV0dXJuIGUodCxuLiRmcm9tLnBvcyxuLiR0by5wb3Msbyl9KSl8fHQuZGlzcGF0Y2godC5zdGF0ZS50ci5pbnNlcnRUZXh0KG8pLnNjcm9sbEludG9WaWV3KCkpLGUucHJldmVudERlZmF1bHQoKX19fTt2YXIgUWU9cy5tYWM/Im1ldGFLZXkiOiJjdHJsS2V5Ijt6ZS5tb3VzZWRvd249ZnVuY3Rpb24odCxlKXt0LnNoaWZ0S2V5PWUuc2hpZnRLZXk7dmFyIG49WmUodCkscj1EYXRlLm5vdygpLG89InNpbmdsZUNsaWNrIjtyLXQubGFzdENsaWNrLnRpbWU8NTAwJiZxZShlLHQubGFzdENsaWNrKSYmIWVbUWVdJiYoInNpbmdsZUNsaWNrIj09dC5sYXN0Q2xpY2sudHlwZT9vPSJkb3VibGVDbGljayI6ImRvdWJsZUNsaWNrIj09dC5sYXN0Q2xpY2sudHlwZSYmKG89InRyaXBsZUNsaWNrIikpLHQubGFzdENsaWNrPXt0aW1lOnIseDplLmNsaWVudFgseTplLmNsaWVudFksdHlwZTpvfTt2YXIgaT10LnBvc0F0Q29vcmRzKExlKGUpKTtpJiYoInNpbmdsZUNsaWNrIj09bz90Lm1vdXNlRG93bj1uZXcgdG4odCxpLGUsbik6KCJkb3VibGVDbGljayI9PW8/R2U6WGUpKHQsaS5wb3MsaS5pbnNpZGUsZSk/ZS5wcmV2ZW50RGVmYXVsdCgpOkJlKHQsInBvaW50ZXIiKSl9O3ZhciB0bj1mdW5jdGlvbih0LGUsbixvKXt2YXIgaSxhLGM9dGhpcztpZih0aGlzLnZpZXc9dCx0aGlzLnN0YXJ0RG9jPXQuc3RhdGUuZG9jLHRoaXMucG9zPWUsdGhpcy5ldmVudD1uLHRoaXMuZmx1c2hlZD1vLHRoaXMuc2VsZWN0Tm9kZT1uW1FlXSx0aGlzLmFsbG93RGVmYXVsdD1uLnNoaWZ0S2V5LGUuaW5zaWRlPi0xKWk9dC5zdGF0ZS5kb2Mubm9kZUF0KGUuaW5zaWRlKSxhPWUuaW5zaWRlO2Vsc2V7dmFyIHU9dC5zdGF0ZS5kb2MucmVzb2x2ZShlLnBvcyk7aT11LnBhcmVudCxhPXUuZGVwdGg/dS5iZWZvcmUoKTowfXRoaXMubWlnaHREcmFnPW51bGw7dmFyIGw9bz9udWxsOm4udGFyZ2V0LGg9bD90LmRvY1ZpZXcubmVhcmVzdERlc2MobCwhMCk6bnVsbDt0aGlzLnRhcmdldD1oP2guZG9tOm51bGwsKGkudHlwZS5zcGVjLmRyYWdnYWJsZSYmITEhPT1pLnR5cGUuc3BlYy5zZWxlY3RhYmxlfHx0LnN0YXRlLnNlbGVjdGlvbiBpbnN0YW5jZW9mIHJbIk5vZGVTZWxlY3Rpb24iXSYmYT09dC5zdGF0ZS5zZWxlY3Rpb24uZnJvbSkmJih0aGlzLm1pZ2h0RHJhZz17bm9kZTppLHBvczphLGFkZEF0dHI6dGhpcy50YXJnZXQmJiF0aGlzLnRhcmdldC5kcmFnZ2FibGUsc2V0VW5lZGl0YWJsZTp0aGlzLnRhcmdldCYmcy5nZWNrbyYmIXRoaXMudGFyZ2V0Lmhhc0F0dHJpYnV0ZSgiY29udGVudEVkaXRhYmxlIil9KSx0aGlzLnRhcmdldCYmdGhpcy5taWdodERyYWcmJih0aGlzLm1pZ2h0RHJhZy5hZGRBdHRyfHx0aGlzLm1pZ2h0RHJhZy5zZXRVbmVkaXRhYmxlKSYmKHRoaXMudmlldy5kb21PYnNlcnZlci5zdG9wKCksdGhpcy5taWdodERyYWcuYWRkQXR0ciYmKHRoaXMudGFyZ2V0LmRyYWdnYWJsZT0hMCksdGhpcy5taWdodERyYWcuc2V0VW5lZGl0YWJsZSYmc2V0VGltZW91dCgoZnVuY3Rpb24oKXtyZXR1cm4gYy50YXJnZXQuc2V0QXR0cmlidXRlKCJjb250ZW50RWRpdGFibGUiLCJmYWxzZSIpfSksMjApLHRoaXMudmlldy5kb21PYnNlcnZlci5zdGFydCgpKSx0LnJvb3QuYWRkRXZlbnRMaXN0ZW5lcigibW91c2V1cCIsdGhpcy51cD10aGlzLnVwLmJpbmQodGhpcykpLHQucm9vdC5hZGRFdmVudExpc3RlbmVyKCJtb3VzZW1vdmUiLHRoaXMubW92ZT10aGlzLm1vdmUuYmluZCh0aGlzKSksQmUodCwicG9pbnRlciIpfTtmdW5jdGlvbiBlbih0LGUpe3JldHVybiEhdC5jb21wb3Npbmd8fCEhKHMuc2FmYXJpJiZNYXRoLmFicyhlLnRpbWVTdGFtcC10LmNvbXBvc2l0aW9uRW5kZWRBdCk8NTAwKSYmKHQuY29tcG9zaXRpb25FbmRlZEF0PS0yZTgsITApfXRuLnByb3RvdHlwZS5kb25lPWZ1bmN0aW9uKCl7dGhpcy52aWV3LnJvb3QucmVtb3ZlRXZlbnRMaXN0ZW5lcigibW91c2V1cCIsdGhpcy51cCksdGhpcy52aWV3LnJvb3QucmVtb3ZlRXZlbnRMaXN0ZW5lcigibW91c2Vtb3ZlIix0aGlzLm1vdmUpLHRoaXMubWlnaHREcmFnJiZ0aGlzLnRhcmdldCYmKHRoaXMudmlldy5kb21PYnNlcnZlci5zdG9wKCksdGhpcy5taWdodERyYWcuYWRkQXR0ciYmdGhpcy50YXJnZXQucmVtb3ZlQXR0cmlidXRlKCJkcmFnZ2FibGUiKSx0aGlzLm1pZ2h0RHJhZy5zZXRVbmVkaXRhYmxlJiZ0aGlzLnRhcmdldC5yZW1vdmVBdHRyaWJ1dGUoImNvbnRlbnRFZGl0YWJsZSIpLHRoaXMudmlldy5kb21PYnNlcnZlci5zdGFydCgpKSx0aGlzLnZpZXcubW91c2VEb3duPW51bGx9LHRuLnByb3RvdHlwZS51cD1mdW5jdGlvbih0KXtpZih0aGlzLmRvbmUoKSx0aGlzLnZpZXcuZG9tLmNvbnRhaW5zKDM9PXQudGFyZ2V0Lm5vZGVUeXBlP3QudGFyZ2V0LnBhcmVudE5vZGU6dC50YXJnZXQpKXt2YXIgZT10aGlzLnBvczt0aGlzLnZpZXcuc3RhdGUuZG9jIT10aGlzLnN0YXJ0RG9jJiYoZT10aGlzLnZpZXcucG9zQXRDb29yZHMoTGUodCkpKSx0aGlzLmFsbG93RGVmYXVsdHx8IWU/QmUodGhpcy52aWV3LCJwb2ludGVyIik6VWUodGhpcy52aWV3LGUucG9zLGUuaW5zaWRlLHQsdGhpcy5zZWxlY3ROb2RlKT90LnByZXZlbnREZWZhdWx0KCk6dGhpcy5mbHVzaGVkfHxzLnNhZmFyaSYmdGhpcy5taWdodERyYWcmJiF0aGlzLm1pZ2h0RHJhZy5ub2RlLmlzQXRvbXx8cy5jaHJvbWUmJiEodGhpcy52aWV3LnN0YXRlLnNlbGVjdGlvbiBpbnN0YW5jZW9mIHJbIlRleHRTZWxlY3Rpb24iXSkmJihlLnBvcz09dGhpcy52aWV3LnN0YXRlLnNlbGVjdGlvbi5mcm9tfHxlLnBvcz09dGhpcy52aWV3LnN0YXRlLnNlbGVjdGlvbi50byk/KFdlKHRoaXMudmlldyxyWyJTZWxlY3Rpb24iXS5uZWFyKHRoaXMudmlldy5zdGF0ZS5kb2MucmVzb2x2ZShlLnBvcykpLCJwb2ludGVyIiksdC5wcmV2ZW50RGVmYXVsdCgpKTpCZSh0aGlzLnZpZXcsInBvaW50ZXIiKX19LHRuLnByb3RvdHlwZS5tb3ZlPWZ1bmN0aW9uKHQpeyF0aGlzLmFsbG93RGVmYXVsdCYmKE1hdGguYWJzKHRoaXMuZXZlbnQueC10LmNsaWVudFgpPjR8fE1hdGguYWJzKHRoaXMuZXZlbnQueS10LmNsaWVudFkpPjQpJiYodGhpcy5hbGxvd0RlZmF1bHQ9ITApLEJlKHRoaXMudmlldywicG9pbnRlciIpfSx6ZS50b3VjaGRvd249ZnVuY3Rpb24odCl7WmUodCksQmUodCwicG9pbnRlciIpfSx6ZS5jb250ZXh0bWVudT1mdW5jdGlvbih0KXtyZXR1cm4gWmUodCl9O3ZhciBubj1zLmFuZHJvaWQ/NWUzOi0xO2Z1bmN0aW9uIHJuKHQsZSl7Y2xlYXJUaW1lb3V0KHQuY29tcG9zaW5nVGltZW91dCksZT4tMSYmKHQuY29tcG9zaW5nVGltZW91dD1zZXRUaW1lb3V0KChmdW5jdGlvbigpe3JldHVybiBvbih0KX0pLGUpKX1mdW5jdGlvbiBvbih0LGUpe3QuZG9tT2JzZXJ2ZXIuZm9yY2VGbHVzaCgpLHQuY29tcG9zaW5nPSExO3doaWxlKHQuY29tcG9zaXRpb25Ob2Rlcy5sZW5ndGg+MCl0LmNvbXBvc2l0aW9uTm9kZXMucG9wKCkubWFya1BhcmVudHNEaXJ0eSgpO2lmKGV8fHQuZG9jVmlldy5kaXJ0eSl7dmFyIG49SHQodCk7cmV0dXJuIG4mJiFuLmVxKHQuc3RhdGUuc2VsZWN0aW9uKT90LmRpc3BhdGNoKHQuc3RhdGUudHIuc2V0U2VsZWN0aW9uKG4pKTp0LnVwZGF0ZVN0YXRlKHQuc3RhdGUpLCEwfXJldHVybiExfWZ1bmN0aW9uIHNuKHQsZSl7aWYodC5kb20ucGFyZW50Tm9kZSl7dmFyIG49dC5kb20ucGFyZW50Tm9kZS5hcHBlbmRDaGlsZChkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKSk7bi5hcHBlbmRDaGlsZChlKSxuLnN0eWxlLmNzc1RleHQ9InBvc2l0aW9uOiBmaXhlZDsgbGVmdDogLTEwMDAwcHg7IHRvcDogMTBweCI7dmFyIHI9Z2V0U2VsZWN0aW9uKCksbz1kb2N1bWVudC5jcmVhdGVSYW5nZSgpO28uc2VsZWN0Tm9kZUNvbnRlbnRzKGUpLHQuZG9tLmJsdXIoKSxyLnJlbW92ZUFsbFJhbmdlcygpLHIuYWRkUmFuZ2Uobyksc2V0VGltZW91dCgoZnVuY3Rpb24oKXtuLnBhcmVudE5vZGUmJm4ucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChuKSx0LmZvY3VzKCl9KSw1MCl9fVBlLmNvbXBvc2l0aW9uc3RhcnQ9UGUuY29tcG9zaXRpb251cGRhdGU9ZnVuY3Rpb24odCl7aWYoIXQuY29tcG9zaW5nKXt0LmRvbU9ic2VydmVyLmZsdXNoKCk7dmFyIGU9dC5zdGF0ZSxuPWUuc2VsZWN0aW9uLiRmcm9tO2lmKGUuc2VsZWN0aW9uLmVtcHR5JiYoZS5zdG9yZWRNYXJrc3x8IW4udGV4dE9mZnNldCYmbi5wYXJlbnRPZmZzZXQmJm4ubm9kZUJlZm9yZS5tYXJrcy5zb21lKChmdW5jdGlvbih0KXtyZXR1cm4hMT09PXQudHlwZS5zcGVjLmluY2x1c2l2ZX0pKSkpdC5tYXJrQ3Vyc29yPXQuc3RhdGUuc3RvcmVkTWFya3N8fG4ubWFya3MoKSxvbih0LCEwKSx0Lm1hcmtDdXJzb3I9bnVsbDtlbHNlIGlmKG9uKHQpLHMuZ2Vja28mJmUuc2VsZWN0aW9uLmVtcHR5JiZuLnBhcmVudE9mZnNldCYmIW4udGV4dE9mZnNldCYmbi5ub2RlQmVmb3JlLm1hcmtzLmxlbmd0aClmb3IodmFyIHI9dC5yb290LmdldFNlbGVjdGlvbigpLG89ci5mb2N1c05vZGUsaT1yLmZvY3VzT2Zmc2V0O28mJjE9PW8ubm9kZVR5cGUmJjAhPWk7KXt2YXIgYT1pPDA/by5sYXN0Q2hpbGQ6by5jaGlsZE5vZGVzW2ktMV07aWYoIWEpYnJlYWs7aWYoMz09YS5ub2RlVHlwZSl7ci5jb2xsYXBzZShhLGEubm9kZVZhbHVlLmxlbmd0aCk7YnJlYWt9bz1hLGk9LTF9dC5jb21wb3Npbmc9ITB9cm4odCxubil9LFBlLmNvbXBvc2l0aW9uZW5kPWZ1bmN0aW9uKHQsZSl7dC5jb21wb3NpbmcmJih0LmNvbXBvc2luZz0hMSx0LmNvbXBvc2l0aW9uRW5kZWRBdD1lLnRpbWVTdGFtcCxybih0LDIwKSl9O3ZhciBhbj1zLmllJiZzLmllX3ZlcnNpb248MTV8fHMuaW9zJiZzLndlYmtpdF92ZXJzaW9uPDYwNDtmdW5jdGlvbiBjbih0KXtyZXR1cm4gMD09dC5vcGVuU3RhcnQmJjA9PXQub3BlbkVuZCYmMT09dC5jb250ZW50LmNoaWxkQ291bnQ/dC5jb250ZW50LmZpcnN0Q2hpbGQ6bnVsbH1mdW5jdGlvbiB1bih0LGUpe2lmKHQuZG9tLnBhcmVudE5vZGUpe3ZhciBuPXQuc2hpZnRLZXl8fHQuc3RhdGUuc2VsZWN0aW9uLiRmcm9tLnBhcmVudC50eXBlLnNwZWMuY29kZSxyPXQuZG9tLnBhcmVudE5vZGUuYXBwZW5kQ2hpbGQoZG9jdW1lbnQuY3JlYXRlRWxlbWVudChuPyJ0ZXh0YXJlYSI6ImRpdiIpKTtufHwoci5jb250ZW50RWRpdGFibGU9InRydWUiKSxyLnN0eWxlLmNzc1RleHQ9InBvc2l0aW9uOiBmaXhlZDsgbGVmdDogLTEwMDAwcHg7IHRvcDogMTBweCIsci5mb2N1cygpLHNldFRpbWVvdXQoKGZ1bmN0aW9uKCl7dC5mb2N1cygpLHIucGFyZW50Tm9kZSYmci5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKHIpLG4/bG4odCxyLnZhbHVlLG51bGwsZSk6bG4odCxyLnRleHRDb250ZW50LHIuaW5uZXJIVE1MLGUpfSksNTApfX1mdW5jdGlvbiBsbih0LGUsbixyKXt2YXIgaT12ZSh0LGUsbix0LnNoaWZ0S2V5LHQuc3RhdGUuc2VsZWN0aW9uLiRmcm9tKTtpZighdC5zb21lUHJvcCgiaGFuZGxlUGFzdGUiLChmdW5jdGlvbihlKXtyZXR1cm4gZSh0LHIsaXx8b1siaSJdLmVtcHR5KX0pKSYmaSl7dmFyIHM9Y24oaSksYT1zP3Quc3RhdGUudHIucmVwbGFjZVNlbGVjdGlvbldpdGgocyx0LnNoaWZ0S2V5KTp0LnN0YXRlLnRyLnJlcGxhY2VTZWxlY3Rpb24oaSk7dC5kaXNwYXRjaChhLnNjcm9sbEludG9WaWV3KCkuc2V0TWV0YSgicGFzdGUiLCEwKS5zZXRNZXRhKCJ1aUV2ZW50IiwicGFzdGUiKSl9fXplLmNvcHk9UGUuY3V0PWZ1bmN0aW9uKHQsZSl7dmFyIG49dC5zdGF0ZS5zZWxlY3Rpb24scj0iY3V0Ij09ZS50eXBlO2lmKCFuLmVtcHR5KXt2YXIgbz1hbj9udWxsOmUuY2xpcGJvYXJkRGF0YSxpPW4uY29udGVudCgpLHM9ZGUodCxpKSxhPXMuZG9tLGM9cy50ZXh0O28/KGUucHJldmVudERlZmF1bHQoKSxvLmNsZWFyRGF0YSgpLG8uc2V0RGF0YSgidGV4dC9odG1sIixhLmlubmVySFRNTCksby5zZXREYXRhKCJ0ZXh0L3BsYWluIixjKSk6c24odCxhKSxyJiZ0LmRpc3BhdGNoKHQuc3RhdGUudHIuZGVsZXRlU2VsZWN0aW9uKCkuc2Nyb2xsSW50b1ZpZXcoKS5zZXRNZXRhKCJ1aUV2ZW50IiwiY3V0IikpfX0sUGUucGFzdGU9ZnVuY3Rpb24odCxlKXt2YXIgbj1hbj9udWxsOmUuY2xpcGJvYXJkRGF0YSxyPW4mJm4uZ2V0RGF0YSgidGV4dC9odG1sIiksbz1uJiZuLmdldERhdGEoInRleHQvcGxhaW4iKTtuJiYocnx8b3x8bi5maWxlcy5sZW5ndGgpPyhsbih0LG8scixlKSxlLnByZXZlbnREZWZhdWx0KCkpOnVuKHQsZSl9O3ZhciBobj1mdW5jdGlvbih0LGUpe3RoaXMuc2xpY2U9dCx0aGlzLm1vdmU9ZX0sZm49cy5tYWM/ImFsdEtleSI6ImN0cmxLZXkiO2Zvcih2YXIgcG4gaW4gemUuZHJhZ3N0YXJ0PWZ1bmN0aW9uKHQsZSl7dmFyIG49dC5tb3VzZURvd247aWYobiYmbi5kb25lKCksZS5kYXRhVHJhbnNmZXIpe3ZhciBvPXQuc3RhdGUuc2VsZWN0aW9uLGk9by5lbXB0eT9udWxsOnQucG9zQXRDb29yZHMoTGUoZSkpO2lmKGkmJmkucG9zPj1vLmZyb20mJmkucG9zPD0obyBpbnN0YW5jZW9mIHJbIk5vZGVTZWxlY3Rpb24iXT9vLnRvLTE6by50bykpO2Vsc2UgaWYobiYmbi5taWdodERyYWcpdC5kaXNwYXRjaCh0LnN0YXRlLnRyLnNldFNlbGVjdGlvbihyWyJOb2RlU2VsZWN0aW9uIl0uY3JlYXRlKHQuc3RhdGUuZG9jLG4ubWlnaHREcmFnLnBvcykpKTtlbHNlIGlmKGUudGFyZ2V0JiYxPT1lLnRhcmdldC5ub2RlVHlwZSl7dmFyIHM9dC5kb2NWaWV3Lm5lYXJlc3REZXNjKGUudGFyZ2V0LCEwKTtpZighc3x8IXMubm9kZS50eXBlLnNwZWMuZHJhZ2dhYmxlfHxzPT10LmRvY1ZpZXcpcmV0dXJuO3QuZGlzcGF0Y2godC5zdGF0ZS50ci5zZXRTZWxlY3Rpb24oclsiTm9kZVNlbGVjdGlvbiJdLmNyZWF0ZSh0LnN0YXRlLmRvYyxzLnBvc0JlZm9yZSkpKX12YXIgYT10LnN0YXRlLnNlbGVjdGlvbi5jb250ZW50KCksYz1kZSh0LGEpLHU9Yy5kb20sbD1jLnRleHQ7ZS5kYXRhVHJhbnNmZXIuY2xlYXJEYXRhKCksZS5kYXRhVHJhbnNmZXIuc2V0RGF0YShhbj8iVGV4dCI6InRleHQvaHRtbCIsdS5pbm5lckhUTUwpLGFufHxlLmRhdGFUcmFuc2Zlci5zZXREYXRhKCJ0ZXh0L3BsYWluIixsKSx0LmRyYWdnaW5nPW5ldyBobihhLCFlW2ZuXSl9fSx6ZS5kcmFnZW5kPWZ1bmN0aW9uKHQpe3dpbmRvdy5zZXRUaW1lb3V0KChmdW5jdGlvbigpe3JldHVybiB0LmRyYWdnaW5nPW51bGx9KSw1MCl9LFBlLmRyYWdvdmVyPVBlLmRyYWdlbnRlcj1mdW5jdGlvbih0LGUpe3JldHVybiBlLnByZXZlbnREZWZhdWx0KCl9LFBlLmRyb3A9ZnVuY3Rpb24odCxlKXt2YXIgbj10LmRyYWdnaW5nO2lmKHQuZHJhZ2dpbmc9bnVsbCxlLmRhdGFUcmFuc2Zlcil7dmFyIHM9dC5wb3NBdENvb3JkcyhMZShlKSk7aWYocyl7dmFyIGE9dC5zdGF0ZS5kb2MucmVzb2x2ZShzLnBvcyk7aWYoYSl7dmFyIGM9biYmbi5zbGljZXx8dmUodCxlLmRhdGFUcmFuc2Zlci5nZXREYXRhKGFuPyJUZXh0IjoidGV4dC9wbGFpbiIpLGFuP251bGw6ZS5kYXRhVHJhbnNmZXIuZ2V0RGF0YSgidGV4dC9odG1sIiksITEsYSk7aWYodC5zb21lUHJvcCgiaGFuZGxlRHJvcCIsKGZ1bmN0aW9uKHIpe3JldHVybiByKHQsZSxjfHxvWyJpIl0uZW1wdHksbiYmbi5tb3ZlKX0pKSllLnByZXZlbnREZWZhdWx0KCk7ZWxzZSBpZihjKXtlLnByZXZlbnREZWZhdWx0KCk7dmFyIHU9Yz9PYmplY3QoaVsiaCJdKSh0LnN0YXRlLmRvYyxhLnBvcyxjKTphLnBvcztudWxsPT11JiYodT1hLnBvcyk7dmFyIGw9dC5zdGF0ZS50cjtuJiZuLm1vdmUmJmwuZGVsZXRlU2VsZWN0aW9uKCk7dmFyIGg9bC5tYXBwaW5nLm1hcCh1KSxmPTA9PWMub3BlblN0YXJ0JiYwPT1jLm9wZW5FbmQmJjE9PWMuY29udGVudC5jaGlsZENvdW50LHA9bC5kb2M7aWYoZj9sLnJlcGxhY2VSYW5nZVdpdGgoaCxoLGMuY29udGVudC5maXJzdENoaWxkKTpsLnJlcGxhY2VSYW5nZShoLGgsYyksIWwuZG9jLmVxKHApKXt2YXIgZD1sLmRvYy5yZXNvbHZlKGgpO2YmJnJbIk5vZGVTZWxlY3Rpb24iXS5pc1NlbGVjdGFibGUoYy5jb250ZW50LmZpcnN0Q2hpbGQpJiZkLm5vZGVBZnRlciYmZC5ub2RlQWZ0ZXIuc2FtZU1hcmt1cChjLmNvbnRlbnQuZmlyc3RDaGlsZCk/bC5zZXRTZWxlY3Rpb24obmV3IHJbIk5vZGVTZWxlY3Rpb24iXShkKSk6bC5zZXRTZWxlY3Rpb24obmUodCxkLGwuZG9jLnJlc29sdmUobC5tYXBwaW5nLm1hcCh1KSkpKSx0LmZvY3VzKCksdC5kaXNwYXRjaChsLnNldE1ldGEoInVpRXZlbnQiLCJkcm9wIikpfX19fX19LHplLmZvY3VzPWZ1bmN0aW9uKHQpe3QuZm9jdXNlZHx8KHQuZG9tT2JzZXJ2ZXIuc3RvcCgpLHQuZG9tLmNsYXNzTGlzdC5hZGQoIlByb3NlTWlycm9yLWZvY3VzZWQiKSx0LmRvbU9ic2VydmVyLnN0YXJ0KCksdC5mb2N1c2VkPSEwLHNldFRpbWVvdXQoKGZ1bmN0aW9uKCl7dC5kb2NWaWV3JiZ0Lmhhc0ZvY3VzKCkmJiF0LmRvbU9ic2VydmVyLmN1cnJlbnRTZWxlY3Rpb24uZXEodC5yb290LmdldFNlbGVjdGlvbigpKSYmS3QodCl9KSwyMCkpfSx6ZS5ibHVyPWZ1bmN0aW9uKHQpe3QuZm9jdXNlZCYmKHQuZG9tT2JzZXJ2ZXIuc3RvcCgpLHQuZG9tLmNsYXNzTGlzdC5yZW1vdmUoIlByb3NlTWlycm9yLWZvY3VzZWQiKSx0LmRvbU9ic2VydmVyLnN0YXJ0KCksdC5kb21PYnNlcnZlci5jdXJyZW50U2VsZWN0aW9uLnNldCh7fSksdC5mb2N1c2VkPSExKX0semUuYmVmb3JlaW5wdXQ9ZnVuY3Rpb24odCxlKXtpZihzLmNocm9tZSYmcy5hbmRyb2lkJiYiZGVsZXRlQ29udGVudEJhY2t3YXJkIj09ZS5pbnB1dFR5cGUpe3ZhciBuPXQuZG9tQ2hhbmdlQ291bnQ7c2V0VGltZW91dCgoZnVuY3Rpb24oKXtpZih0LmRvbUNoYW5nZUNvdW50PT1uJiYodC5kb20uYmx1cigpLHQuZm9jdXMoKSwhdC5zb21lUHJvcCgiaGFuZGxlS2V5RG93biIsKGZ1bmN0aW9uKGUpe3JldHVybiBlKHQsayg4LCJCYWNrc3BhY2UiKSl9KSkpKXt2YXIgZT10LnN0YXRlLnNlbGVjdGlvbixyPWUuJGN1cnNvcjtyJiZyLnBvcz4wJiZ0LmRpc3BhdGNoKHQuc3RhdGUudHIuZGVsZXRlKHIucG9zLTEsci5wb3MpLnNjcm9sbEludG9WaWV3KCkpfX0pLDUwKX19LFBlKXplW3BuXT1QZVtwbl07ZnVuY3Rpb24gZG4odCxlKXtpZih0PT1lKXJldHVybiEwO2Zvcih2YXIgbiBpbiB0KWlmKHRbbl0hPT1lW25dKXJldHVybiExO2Zvcih2YXIgciBpbiBlKWlmKCEociBpbiB0KSlyZXR1cm4hMTtyZXR1cm4hMH12YXIgdm49ZnVuY3Rpb24odCxlKXt0aGlzLnNwZWM9ZXx8eG4sdGhpcy5zaWRlPXRoaXMuc3BlYy5zaWRlfHwwLHRoaXMudG9ET009dH07dm4ucHJvdG90eXBlLm1hcD1mdW5jdGlvbih0LGUsbixyKXt2YXIgbz10Lm1hcFJlc3VsdChlLmZyb20rcix0aGlzLnNpZGU8MD8tMToxKSxpPW8ucG9zLHM9by5kZWxldGVkO3JldHVybiBzP251bGw6bmV3IHluKGktbixpLW4sdGhpcyl9LHZuLnByb3RvdHlwZS52YWxpZD1mdW5jdGlvbigpe3JldHVybiEwfSx2bi5wcm90b3R5cGUuZXE9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXM9PXR8fHQgaW5zdGFuY2VvZiB2biYmKHRoaXMuc3BlYy5rZXkmJnRoaXMuc3BlYy5rZXk9PXQuc3BlYy5rZXl8fHRoaXMudG9ET009PXQudG9ET00mJmRuKHRoaXMuc3BlYyx0LnNwZWMpKX07dmFyIG1uPWZ1bmN0aW9uKHQsZSl7dGhpcy5zcGVjPWV8fHhuLHRoaXMuYXR0cnM9dH07bW4ucHJvdG90eXBlLm1hcD1mdW5jdGlvbih0LGUsbixyKXt2YXIgbz10Lm1hcChlLmZyb20rcix0aGlzLnNwZWMuaW5jbHVzaXZlU3RhcnQ/LTE6MSktbixpPXQubWFwKGUudG8rcix0aGlzLnNwZWMuaW5jbHVzaXZlRW5kPzE6LTEpLW47cmV0dXJuIG8+PWk/bnVsbDpuZXcgeW4obyxpLHRoaXMpfSxtbi5wcm90b3R5cGUudmFsaWQ9ZnVuY3Rpb24odCxlKXtyZXR1cm4gZS5mcm9tPGUudG99LG1uLnByb3RvdHlwZS5lcT1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcz09dHx8dCBpbnN0YW5jZW9mIG1uJiZkbih0aGlzLmF0dHJzLHQuYXR0cnMpJiZkbih0aGlzLnNwZWMsdC5zcGVjKX0sbW4uaXM9ZnVuY3Rpb24odCl7cmV0dXJuIHQudHlwZSBpbnN0YW5jZW9mIG1ufTt2YXIgZ249ZnVuY3Rpb24odCxlKXt0aGlzLnNwZWM9ZXx8eG4sdGhpcy5hdHRycz10fTtnbi5wcm90b3R5cGUubWFwPWZ1bmN0aW9uKHQsZSxuLHIpe3ZhciBvPXQubWFwUmVzdWx0KGUuZnJvbStyLDEpO2lmKG8uZGVsZXRlZClyZXR1cm4gbnVsbDt2YXIgaT10Lm1hcFJlc3VsdChlLnRvK3IsLTEpO3JldHVybiBpLmRlbGV0ZWR8fGkucG9zPD1vLnBvcz9udWxsOm5ldyB5bihvLnBvcy1uLGkucG9zLW4sdGhpcyl9LGduLnByb3RvdHlwZS52YWxpZD1mdW5jdGlvbih0LGUpe3ZhciBuPXQuY29udGVudC5maW5kSW5kZXgoZS5mcm9tKSxyPW4uaW5kZXgsbz1uLm9mZnNldDtyZXR1cm4gbz09ZS5mcm9tJiZvK3QuY2hpbGQocikubm9kZVNpemU9PWUudG99LGduLnByb3RvdHlwZS5lcT1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcz09dHx8dCBpbnN0YW5jZW9mIGduJiZkbih0aGlzLmF0dHJzLHQuYXR0cnMpJiZkbih0aGlzLnNwZWMsdC5zcGVjKX07dmFyIHluPWZ1bmN0aW9uKHQsZSxuKXt0aGlzLmZyb209dCx0aGlzLnRvPWUsdGhpcy50eXBlPW59LHduPXtzcGVjOntjb25maWd1cmFibGU6ITB9fTt5bi5wcm90b3R5cGUuY29weT1mdW5jdGlvbih0LGUpe3JldHVybiBuZXcgeW4odCxlLHRoaXMudHlwZSl9LHluLnByb3RvdHlwZS5lcT1mdW5jdGlvbih0LGUpe3JldHVybiB2b2lkIDA9PT1lJiYoZT0wKSx0aGlzLnR5cGUuZXEodC50eXBlKSYmdGhpcy5mcm9tK2U9PXQuZnJvbSYmdGhpcy50bytlPT10LnRvfSx5bi5wcm90b3R5cGUubWFwPWZ1bmN0aW9uKHQsZSxuKXtyZXR1cm4gdGhpcy50eXBlLm1hcCh0LHRoaXMsZSxuKX0seW4ud2lkZ2V0PWZ1bmN0aW9uKHQsZSxuKXtyZXR1cm4gbmV3IHluKHQsdCxuZXcgdm4oZSxuKSl9LHluLmlubGluZT1mdW5jdGlvbih0LGUsbixyKXtyZXR1cm4gbmV3IHluKHQsZSxuZXcgbW4obixyKSl9LHluLm5vZGU9ZnVuY3Rpb24odCxlLG4scil7cmV0dXJuIG5ldyB5bih0LGUsbmV3IGduKG4scikpfSx3bi5zcGVjLmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLnR5cGUuc3BlY30sT2JqZWN0LmRlZmluZVByb3BlcnRpZXMoeW4ucHJvdG90eXBlLHduKTt2YXIgYm49W10seG49e30sa249ZnVuY3Rpb24odCxlKXt0aGlzLmxvY2FsPXQmJnQubGVuZ3RoP3Q6Ym4sdGhpcy5jaGlsZHJlbj1lJiZlLmxlbmd0aD9lOmJufTtrbi5jcmVhdGU9ZnVuY3Rpb24odCxlKXtyZXR1cm4gZS5sZW5ndGg/RW4oZSx0LDAseG4pOlNufSxrbi5wcm90b3R5cGUuZmluZD1mdW5jdGlvbih0LGUsbil7dmFyIHI9W107cmV0dXJuIHRoaXMuZmluZElubmVyKG51bGw9PXQ/MDp0LG51bGw9PWU/MWU5OmUsciwwLG4pLHJ9LGtuLnByb3RvdHlwZS5maW5kSW5uZXI9ZnVuY3Rpb24odCxlLG4scixvKXtmb3IodmFyIGk9MDtpPHRoaXMubG9jYWwubGVuZ3RoO2krKyl7dmFyIHM9dGhpcy5sb2NhbFtpXTtzLmZyb208PWUmJnMudG8+PXQmJighb3x8byhzLnNwZWMpKSYmbi5wdXNoKHMuY29weShzLmZyb20rcixzLnRvK3IpKX1mb3IodmFyIGE9MDthPHRoaXMuY2hpbGRyZW4ubGVuZ3RoO2ErPTMpaWYodGhpcy5jaGlsZHJlblthXTxlJiZ0aGlzLmNoaWxkcmVuW2ErMV0+dCl7dmFyIGM9dGhpcy5jaGlsZHJlblthXSsxO3RoaXMuY2hpbGRyZW5bYSsyXS5maW5kSW5uZXIodC1jLGUtYyxuLHIrYyxvKX19LGtuLnByb3RvdHlwZS5tYXA9ZnVuY3Rpb24odCxlLG4pe3JldHVybiB0aGlzPT1Tbnx8MD09dC5tYXBzLmxlbmd0aD90aGlzOnRoaXMubWFwSW5uZXIodCxlLDAsMCxufHx4bil9LGtuLnByb3RvdHlwZS5tYXBJbm5lcj1mdW5jdGlvbih0LGUsbixyLG8pe2Zvcih2YXIgaSxzPTA7czx0aGlzLmxvY2FsLmxlbmd0aDtzKyspe3ZhciBhPXRoaXMubG9jYWxbc10ubWFwKHQsbixyKTthJiZhLnR5cGUudmFsaWQoZSxhKT8oaXx8KGk9W10pKS5wdXNoKGEpOm8ub25SZW1vdmUmJm8ub25SZW1vdmUodGhpcy5sb2NhbFtzXS5zcGVjKX1yZXR1cm4gdGhpcy5jaGlsZHJlbi5sZW5ndGg/T24odGhpcy5jaGlsZHJlbixpLHQsZSxuLHIsbyk6aT9uZXcga24oaS5zb3J0KERuKSk6U259LGtuLnByb3RvdHlwZS5hZGQ9ZnVuY3Rpb24odCxlKXtyZXR1cm4gZS5sZW5ndGg/dGhpcz09U24/a24uY3JlYXRlKHQsZSk6dGhpcy5hZGRJbm5lcih0LGUsMCk6dGhpc30sa24ucHJvdG90eXBlLmFkZElubmVyPWZ1bmN0aW9uKHQsZSxuKXt2YXIgcixvPXRoaXMsaT0wO3QuZm9yRWFjaCgoZnVuY3Rpb24odCxzKXt2YXIgYSxjPXMrbjtpZihhPVRuKGUsdCxjKSl7cnx8KHI9by5jaGlsZHJlbi5zbGljZSgpKTt3aGlsZShpPHIubGVuZ3RoJiZyW2ldPHMpaSs9MztyW2ldPT1zP3JbaSsyXT1yW2krMl0uYWRkSW5uZXIodCxhLGMrMSk6ci5zcGxpY2UoaSwwLHMscyt0Lm5vZGVTaXplLEVuKGEsdCxjKzEseG4pKSxpKz0zfX0pKTt2YXIgcz1NbihpP0FuKGUpOmUsLW4pO3JldHVybiBuZXcga24ocy5sZW5ndGg/dGhpcy5sb2NhbC5jb25jYXQocykuc29ydChEbik6dGhpcy5sb2NhbCxyfHx0aGlzLmNoaWxkcmVuKX0sa24ucHJvdG90eXBlLnJlbW92ZT1mdW5jdGlvbih0KXtyZXR1cm4gMD09dC5sZW5ndGh8fHRoaXM9PVNuP3RoaXM6dGhpcy5yZW1vdmVJbm5lcih0LDApfSxrbi5wcm90b3R5cGUucmVtb3ZlSW5uZXI9ZnVuY3Rpb24odCxlKXtmb3IodmFyIG49dGhpcy5jaGlsZHJlbixyPXRoaXMubG9jYWwsbz0wO288bi5sZW5ndGg7bys9Myl7Zm9yKHZhciBpPXZvaWQgMCxzPW5bb10rZSxhPW5bbysxXStlLGM9MCx1PXZvaWQgMDtjPHQubGVuZ3RoO2MrKykodT10W2NdKSYmdS5mcm9tPnMmJnUudG88YSYmKHRbY109bnVsbCwoaXx8KGk9W10pKS5wdXNoKHUpKTtpZihpKXtuPT10aGlzLmNoaWxkcmVuJiYobj10aGlzLmNoaWxkcmVuLnNsaWNlKCkpO3ZhciBsPW5bbysyXS5yZW1vdmVJbm5lcihpLHMrMSk7bCE9U24/bltvKzJdPWw6KG4uc3BsaWNlKG8sMyksby09Myl9fWlmKHIubGVuZ3RoKWZvcih2YXIgaD0wLGY9dm9pZCAwO2g8dC5sZW5ndGg7aCsrKWlmKGY9dFtoXSlmb3IodmFyIHA9MDtwPHIubGVuZ3RoO3ArKylyW3BdLmVxKGYsZSkmJihyPT10aGlzLmxvY2FsJiYocj10aGlzLmxvY2FsLnNsaWNlKCkpLHIuc3BsaWNlKHAtLSwxKSk7cmV0dXJuIG49PXRoaXMuY2hpbGRyZW4mJnI9PXRoaXMubG9jYWw/dGhpczpyLmxlbmd0aHx8bi5sZW5ndGg/bmV3IGtuKHIsbik6U259LGtuLnByb3RvdHlwZS5mb3JDaGlsZD1mdW5jdGlvbih0LGUpe2lmKHRoaXM9PVNuKXJldHVybiB0aGlzO2lmKGUuaXNMZWFmKXJldHVybiBrbi5lbXB0eTtmb3IodmFyIG4scixvPTA7bzx0aGlzLmNoaWxkcmVuLmxlbmd0aDtvKz0zKWlmKHRoaXMuY2hpbGRyZW5bb10+PXQpe3RoaXMuY2hpbGRyZW5bb109PXQmJihuPXRoaXMuY2hpbGRyZW5bbysyXSk7YnJlYWt9Zm9yKHZhciBpPXQrMSxzPWkrZS5jb250ZW50LnNpemUsYT0wO2E8dGhpcy5sb2NhbC5sZW5ndGg7YSsrKXt2YXIgYz10aGlzLmxvY2FsW2FdO2lmKGMuZnJvbTxzJiZjLnRvPmkmJmMudHlwZSBpbnN0YW5jZW9mIG1uKXt2YXIgdT1NYXRoLm1heChpLGMuZnJvbSktaSxsPU1hdGgubWluKHMsYy50byktaTt1PGwmJihyfHwocj1bXSkpLnB1c2goYy5jb3B5KHUsbCkpfX1pZihyKXt2YXIgaD1uZXcga24oci5zb3J0KERuKSk7cmV0dXJuIG4/bmV3IENuKFtoLG5dKTpofXJldHVybiBufHxTbn0sa24ucHJvdG90eXBlLmVxPWZ1bmN0aW9uKHQpe2lmKHRoaXM9PXQpcmV0dXJuITA7aWYoISh0IGluc3RhbmNlb2Yga24pfHx0aGlzLmxvY2FsLmxlbmd0aCE9dC5sb2NhbC5sZW5ndGh8fHRoaXMuY2hpbGRyZW4ubGVuZ3RoIT10LmNoaWxkcmVuLmxlbmd0aClyZXR1cm4hMTtmb3IodmFyIGU9MDtlPHRoaXMubG9jYWwubGVuZ3RoO2UrKylpZighdGhpcy5sb2NhbFtlXS5lcSh0LmxvY2FsW2VdKSlyZXR1cm4hMTtmb3IodmFyIG49MDtuPHRoaXMuY2hpbGRyZW4ubGVuZ3RoO24rPTMpaWYodGhpcy5jaGlsZHJlbltuXSE9dC5jaGlsZHJlbltuXXx8dGhpcy5jaGlsZHJlbltuKzFdIT10LmNoaWxkcmVuW24rMV18fCF0aGlzLmNoaWxkcmVuW24rMl0uZXEodC5jaGlsZHJlbltuKzJdKSlyZXR1cm4hMTtyZXR1cm4hMH0sa24ucHJvdG90eXBlLmxvY2Fscz1mdW5jdGlvbih0KXtyZXR1cm4gUm4odGhpcy5sb2NhbHNJbm5lcih0KSl9LGtuLnByb3RvdHlwZS5sb2NhbHNJbm5lcj1mdW5jdGlvbih0KXtpZih0aGlzPT1TbilyZXR1cm4gYm47aWYodC5pbmxpbmVDb250ZW50fHwhdGhpcy5sb2NhbC5zb21lKG1uLmlzKSlyZXR1cm4gdGhpcy5sb2NhbDtmb3IodmFyIGU9W10sbj0wO248dGhpcy5sb2NhbC5sZW5ndGg7bisrKXRoaXMubG9jYWxbbl0udHlwZSBpbnN0YW5jZW9mIG1ufHxlLnB1c2godGhpcy5sb2NhbFtuXSk7cmV0dXJuIGV9O3ZhciBTbj1uZXcga247a24uZW1wdHk9U24sa24ucmVtb3ZlT3ZlcmxhcD1Sbjt2YXIgQ249ZnVuY3Rpb24odCl7dGhpcy5tZW1iZXJzPXR9O2Z1bmN0aW9uIE9uKHQsZSxuLHIsbyxpLHMpe2Zvcih2YXIgYT10LnNsaWNlKCksYz1mdW5jdGlvbih0LGUsbixyKXtmb3IodmFyIHM9MDtzPGEubGVuZ3RoO3MrPTMpe3ZhciBjPWFbcysxXSx1PXZvaWQgMDstMT09Y3x8dD5jK2l8fChlPj1hW3NdK2k/YVtzKzFdPS0xOm4+PW8mJih1PXItbi0oZS10KSkmJihhW3NdKz11LGFbcysxXSs9dSkpfX0sdT0wO3U8bi5tYXBzLmxlbmd0aDt1Kyspbi5tYXBzW3VdLmZvckVhY2goYyk7Zm9yKHZhciBsPSExLGg9MDtoPGEubGVuZ3RoO2grPTMpaWYoLTE9PWFbaCsxXSl7dmFyIGY9bi5tYXAoYVtoXStpKSxwPWYtbztpZihwPDB8fHA+PXIuY29udGVudC5zaXplKXtsPSEwO2NvbnRpbnVlfXZhciBkPW4ubWFwKHRbaCsxXStpLC0xKSx2PWQtbyxtPXIuY29udGVudC5maW5kSW5kZXgocCksZz1tLmluZGV4LHk9bS5vZmZzZXQsdz1yLm1heWJlQ2hpbGQoZyk7aWYodyYmeT09cCYmeSt3Lm5vZGVTaXplPT12KXt2YXIgYj1hW2grMl0ubWFwSW5uZXIobix3LGYrMSxhW2hdK2krMSxzKTtiIT1Tbj8oYVtoXT1wLGFbaCsxXT12LGFbaCsyXT1iKTooYVtoKzFdPS0yLGw9ITApfWVsc2UgbD0hMH1pZihsKXt2YXIgeD1ObihhLHQsZXx8W10sbixvLGkscyksaz1Fbih4LHIsMCxzKTtlPWsubG9jYWw7Zm9yKHZhciBTPTA7UzxhLmxlbmd0aDtTKz0zKWFbUysxXTwwJiYoYS5zcGxpY2UoUywzKSxTLT0zKTtmb3IodmFyIEM9MCxPPTA7QzxrLmNoaWxkcmVuLmxlbmd0aDtDKz0zKXt2YXIgTT1rLmNoaWxkcmVuW0NdO3doaWxlKE88YS5sZW5ndGgmJmFbT108TSlPKz0zO2Euc3BsaWNlKE8sMCxrLmNoaWxkcmVuW0NdLGsuY2hpbGRyZW5bQysxXSxrLmNoaWxkcmVuW0MrMl0pfX1yZXR1cm4gbmV3IGtuKGUmJmUuc29ydChEbiksYSl9ZnVuY3Rpb24gTW4odCxlKXtpZighZXx8IXQubGVuZ3RoKXJldHVybiB0O2Zvcih2YXIgbj1bXSxyPTA7cjx0Lmxlbmd0aDtyKyspe3ZhciBvPXRbcl07bi5wdXNoKG5ldyB5bihvLmZyb20rZSxvLnRvK2Usby50eXBlKSl9cmV0dXJuIG59ZnVuY3Rpb24gTm4odCxlLG4scixvLGkscyl7ZnVuY3Rpb24gYSh0LGUpe2Zvcih2YXIgaT0wO2k8dC5sb2NhbC5sZW5ndGg7aSsrKXt2YXIgYz10LmxvY2FsW2ldLm1hcChyLG8sZSk7Yz9uLnB1c2goYyk6cy5vblJlbW92ZSYmcy5vblJlbW92ZSh0LmxvY2FsW2ldLnNwZWMpfWZvcih2YXIgdT0wO3U8dC5jaGlsZHJlbi5sZW5ndGg7dSs9MylhKHQuY2hpbGRyZW5bdSsyXSx0LmNoaWxkcmVuW3VdK2UrMSl9Zm9yKHZhciBjPTA7Yzx0Lmxlbmd0aDtjKz0zKS0xPT10W2MrMV0mJmEodFtjKzJdLGVbY10raSsxKTtyZXR1cm4gbn1mdW5jdGlvbiBUbih0LGUsbil7aWYoZS5pc0xlYWYpcmV0dXJuIG51bGw7Zm9yKHZhciByPW4rZS5ub2RlU2l6ZSxvPW51bGwsaT0wLHM9dm9pZCAwO2k8dC5sZW5ndGg7aSsrKShzPXRbaV0pJiZzLmZyb20+biYmcy50bzxyJiYoKG98fChvPVtdKSkucHVzaChzKSx0W2ldPW51bGwpO3JldHVybiBvfWZ1bmN0aW9uIEFuKHQpe2Zvcih2YXIgZT1bXSxuPTA7bjx0Lmxlbmd0aDtuKyspbnVsbCE9dFtuXSYmZS5wdXNoKHRbbl0pO3JldHVybiBlfWZ1bmN0aW9uIEVuKHQsZSxuLHIpe3ZhciBvPVtdLGk9ITE7ZS5mb3JFYWNoKChmdW5jdGlvbihlLHMpe3ZhciBhPVRuKHQsZSxzK24pO2lmKGEpe2k9ITA7dmFyIGM9RW4oYSxlLG4rcysxLHIpO2MhPVNuJiZvLnB1c2gocyxzK2Uubm9kZVNpemUsYyl9fSkpO2Zvcih2YXIgcz1NbihpP0FuKHQpOnQsLW4pLnNvcnQoRG4pLGE9MDthPHMubGVuZ3RoO2ErKylzW2FdLnR5cGUudmFsaWQoZSxzW2FdKXx8KHIub25SZW1vdmUmJnIub25SZW1vdmUoc1thXS5zcGVjKSxzLnNwbGljZShhLS0sMSkpO3JldHVybiBzLmxlbmd0aHx8by5sZW5ndGg/bmV3IGtuKHMsbyk6U259ZnVuY3Rpb24gRG4odCxlKXtyZXR1cm4gdC5mcm9tLWUuZnJvbXx8dC50by1lLnRvfWZ1bmN0aW9uIFJuKHQpe2Zvcih2YXIgZT10LG49MDtuPGUubGVuZ3RoLTE7bisrKXt2YXIgcj1lW25dO2lmKHIuZnJvbSE9ci50bylmb3IodmFyIG89bisxO288ZS5sZW5ndGg7bysrKXt2YXIgaT1lW29dO2lmKGkuZnJvbSE9ci5mcm9tKXtpLmZyb208ci50byYmKGU9PXQmJihlPXQuc2xpY2UoKSksZVtuXT1yLmNvcHkoci5mcm9tLGkuZnJvbSksem4oZSxvLHIuY29weShpLmZyb20sci50bykpKTticmVha31pLnRvIT1yLnRvJiYoZT09dCYmKGU9dC5zbGljZSgpKSxlW29dPWkuY29weShpLmZyb20sci50byksem4oZSxvKzEsaS5jb3B5KHIudG8saS50bykpKX19cmV0dXJuIGV9ZnVuY3Rpb24gem4odCxlLG4pe3doaWxlKGU8dC5sZW5ndGgmJkRuKG4sdFtlXSk+MCllKys7dC5zcGxpY2UoZSwwLG4pfWZ1bmN0aW9uIFBuKHQpe3ZhciBlPVtdO3JldHVybiB0LnNvbWVQcm9wKCJkZWNvcmF0aW9ucyIsKGZ1bmN0aW9uKG4pe3ZhciByPW4odC5zdGF0ZSk7ciYmciE9U24mJmUucHVzaChyKX0pKSx0LmN1cnNvcldyYXBwZXImJmUucHVzaChrbi5jcmVhdGUodC5zdGF0ZS5kb2MsW3QuY3Vyc29yV3JhcHBlci5kZWNvXSkpLENuLmZyb20oZSl9Q24ucHJvdG90eXBlLmZvckNoaWxkPWZ1bmN0aW9uKHQsZSl7aWYoZS5pc0xlYWYpcmV0dXJuIGtuLmVtcHR5O2Zvcih2YXIgbj1bXSxyPTA7cjx0aGlzLm1lbWJlcnMubGVuZ3RoO3IrKyl7dmFyIG89dGhpcy5tZW1iZXJzW3JdLmZvckNoaWxkKHQsZSk7byE9U24mJihvIGluc3RhbmNlb2YgQ24/bj1uLmNvbmNhdChvLm1lbWJlcnMpOm4ucHVzaChvKSl9cmV0dXJuIENuLmZyb20obil9LENuLnByb3RvdHlwZS5lcT1mdW5jdGlvbih0KXtpZighKHQgaW5zdGFuY2VvZiBDbil8fHQubWVtYmVycy5sZW5ndGghPXRoaXMubWVtYmVycy5sZW5ndGgpcmV0dXJuITE7Zm9yKHZhciBlPTA7ZTx0aGlzLm1lbWJlcnMubGVuZ3RoO2UrKylpZighdGhpcy5tZW1iZXJzW2VdLmVxKHQubWVtYmVyc1tlXSkpcmV0dXJuITE7cmV0dXJuITB9LENuLnByb3RvdHlwZS5sb2NhbHM9ZnVuY3Rpb24odCl7Zm9yKHZhciBlLG49ITAscj0wO3I8dGhpcy5tZW1iZXJzLmxlbmd0aDtyKyspe3ZhciBvPXRoaXMubWVtYmVyc1tyXS5sb2NhbHNJbm5lcih0KTtpZihvLmxlbmd0aClpZihlKXtuJiYoZT1lLnNsaWNlKCksbj0hMSk7Zm9yKHZhciBpPTA7aTxvLmxlbmd0aDtpKyspZS5wdXNoKG9baV0pfWVsc2UgZT1vfXJldHVybiBlP1JuKG4/ZTplLnNvcnQoRG4pKTpibn0sQ24uZnJvbT1mdW5jdGlvbih0KXtzd2l0Y2godC5sZW5ndGgpe2Nhc2UgMDpyZXR1cm4gU247Y2FzZSAxOnJldHVybiB0WzBdO2RlZmF1bHQ6cmV0dXJuIG5ldyBDbih0KX19O3ZhciBJbj1mdW5jdGlvbih0LGUpe3RoaXMuX3Byb3BzPWUsdGhpcy5zdGF0ZT1lLnN0YXRlLHRoaXMuZGlzcGF0Y2g9dGhpcy5kaXNwYXRjaC5iaW5kKHRoaXMpLHRoaXMuX3Jvb3Q9bnVsbCx0aGlzLmZvY3VzZWQ9ITEsdGhpcy5kb209dCYmdC5tb3VudHx8ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2IiksdCYmKHQuYXBwZW5kQ2hpbGQ/dC5hcHBlbmRDaGlsZCh0aGlzLmRvbSk6dC5hcHBseT90KHRoaXMuZG9tKTp0Lm1vdW50JiYodGhpcy5tb3VudGVkPSEwKSksdGhpcy5lZGl0YWJsZT1qbih0aGlzKSx0aGlzLm1hcmtDdXJzb3I9bnVsbCx0aGlzLmN1cnNvcldyYXBwZXI9bnVsbCxGbih0aGlzKSx0aGlzLm5vZGVWaWV3cz1Wbih0aGlzKSx0aGlzLmRvY1ZpZXc9bHQodGhpcy5zdGF0ZS5kb2MsX24odGhpcyksUG4odGhpcyksdGhpcy5kb20sdGhpcyksdGhpcy5sYXN0U2VsZWN0ZWRWaWV3RGVzYz1udWxsLHRoaXMuZHJhZ2dpbmc9bnVsbCxJZSh0aGlzKSx0aGlzLnBsdWdpblZpZXdzPVtdLHRoaXMudXBkYXRlUGx1Z2luVmlld3MoKX0sQm49e3Byb3BzOntjb25maWd1cmFibGU6ITB9LHJvb3Q6e2NvbmZpZ3VyYWJsZTohMH19O2Z1bmN0aW9uIF9uKHQpe3ZhciBlPU9iamVjdC5jcmVhdGUobnVsbCk7cmV0dXJuIGUuY2xhc3M9IlByb3NlTWlycm9yIixlLmNvbnRlbnRlZGl0YWJsZT1TdHJpbmcodC5lZGl0YWJsZSksdC5zb21lUHJvcCgiYXR0cmlidXRlcyIsKGZ1bmN0aW9uKG4pe2lmKCJmdW5jdGlvbiI9PXR5cGVvZiBuJiYobj1uKHQuc3RhdGUpKSxuKWZvcih2YXIgciBpbiBuKSJjbGFzcyI9PXI/ZS5jbGFzcys9IiAiK25bcl06ZVtyXXx8ImNvbnRlbnRlZGl0YWJsZSI9PXJ8fCJub2RlTmFtZSI9PXJ8fChlW3JdPVN0cmluZyhuW3JdKSl9KSksW3luLm5vZGUoMCx0LnN0YXRlLmRvYy5jb250ZW50LnNpemUsZSldfWZ1bmN0aW9uIEZuKHQpe2lmKHQubWFya0N1cnNvcil7dmFyIGU9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiaW1nIik7ZS5zZXRBdHRyaWJ1dGUoIm1hcmstcGxhY2Vob2xkZXIiLCJ0cnVlIiksdC5jdXJzb3JXcmFwcGVyPXtkb206ZSxkZWNvOnluLndpZGdldCh0LnN0YXRlLnNlbGVjdGlvbi5oZWFkLGUse3JhdzohMCxtYXJrczp0Lm1hcmtDdXJzb3J9KX19ZWxzZSB0LmN1cnNvcldyYXBwZXI9bnVsbH1mdW5jdGlvbiBqbih0KXtyZXR1cm4hdC5zb21lUHJvcCgiZWRpdGFibGUiLChmdW5jdGlvbihlKXtyZXR1cm4hMT09PWUodC5zdGF0ZSl9KSl9ZnVuY3Rpb24gJG4odCxlKXt2YXIgbj1NYXRoLm1pbih0LiRhbmNob3Iuc2hhcmVkRGVwdGgodC5oZWFkKSxlLiRhbmNob3Iuc2hhcmVkRGVwdGgoZS5oZWFkKSk7cmV0dXJuIHQuJGFuY2hvci5zdGFydChuKSE9ZS4kYW5jaG9yLnN0YXJ0KG4pfWZ1bmN0aW9uIFZuKHQpe3ZhciBlPXt9O3JldHVybiB0LnNvbWVQcm9wKCJub2RlVmlld3MiLChmdW5jdGlvbih0KXtmb3IodmFyIG4gaW4gdClPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoZSxuKXx8KGVbbl09dFtuXSl9KSksZX1mdW5jdGlvbiBMbih0LGUpe3ZhciBuPTAscj0wO2Zvcih2YXIgbyBpbiB0KXtpZih0W29dIT1lW29dKXJldHVybiEwO24rK31mb3IodmFyIGkgaW4gZSlyKys7cmV0dXJuIG4hPXJ9ZnVuY3Rpb24gcW4odCl7dmFyIGU9dC5nZXRTZWxlY3Rpb24oKSxuPWUuZm9jdXNPZmZzZXQscj1lLmZvY3VzTm9kZTtyZXR1cm4gciYmMT09ci5ub2RlVHlwZT9bcixuLHIuY2hpbGROb2Rlc1tuLTFdLHIuY2hpbGROb2Rlc1tuXV06bnVsbH1mdW5jdGlvbiBKbih0LGUpe3ZhciBuPXFuKGUpO2lmKCFufHwzPT1uWzBdLm5vZGVUeXBlKXJldHVybiExO2Zvcih2YXIgcj0wO3I8dC5sZW5ndGg7cisrKWlmKG5bcl0hPXRbcl0pcmV0dXJuITA7cmV0dXJuITF9Qm4ucHJvcHMuZ2V0PWZ1bmN0aW9uKCl7aWYodGhpcy5fcHJvcHMuc3RhdGUhPXRoaXMuc3RhdGUpe3ZhciB0PXRoaXMuX3Byb3BzO2Zvcih2YXIgZSBpbiB0aGlzLl9wcm9wcz17fSx0KXRoaXMuX3Byb3BzW2VdPXRbZV07dGhpcy5fcHJvcHMuc3RhdGU9dGhpcy5zdGF0ZX1yZXR1cm4gdGhpcy5fcHJvcHN9LEluLnByb3RvdHlwZS51cGRhdGU9ZnVuY3Rpb24odCl7dC5oYW5kbGVET01FdmVudHMhPXRoaXMuX3Byb3BzLmhhbmRsZURPTUV2ZW50cyYmRmUodGhpcyksdGhpcy5fcHJvcHM9dCx0aGlzLnVwZGF0ZVN0YXRlSW5uZXIodC5zdGF0ZSwhMCl9LEluLnByb3RvdHlwZS5zZXRQcm9wcz1mdW5jdGlvbih0KXt2YXIgZT17fTtmb3IodmFyIG4gaW4gdGhpcy5fcHJvcHMpZVtuXT10aGlzLl9wcm9wc1tuXTtmb3IodmFyIHIgaW4gZS5zdGF0ZT10aGlzLnN0YXRlLHQpZVtyXT10W3JdO3RoaXMudXBkYXRlKGUpfSxJbi5wcm90b3R5cGUudXBkYXRlU3RhdGU9ZnVuY3Rpb24odCl7dGhpcy51cGRhdGVTdGF0ZUlubmVyKHQsdGhpcy5zdGF0ZS5wbHVnaW5zIT10LnBsdWdpbnMpfSxJbi5wcm90b3R5cGUudXBkYXRlU3RhdGVJbm5lcj1mdW5jdGlvbih0LGUpe3ZhciBuPXRoaXMsbz10aGlzLnN0YXRlLGk9ITE7aWYodGhpcy5zdGF0ZT10LGUpe3ZhciBhPVZuKHRoaXMpO0xuKGEsdGhpcy5ub2RlVmlld3MpJiYodGhpcy5ub2RlVmlld3M9YSxpPSEwKSxGZSh0aGlzKX10aGlzLmVkaXRhYmxlPWpuKHRoaXMpLEZuKHRoaXMpO3ZhciBjPVBuKHRoaXMpLHU9X24odGhpcyksbD1lPyJyZXNldCI6dC5zY3JvbGxUb1NlbGVjdGlvbj5vLnNjcm9sbFRvU2VsZWN0aW9uPyJ0byBzZWxlY3Rpb24iOiJwcmVzZXJ2ZSIsaD1pfHwhdGhpcy5kb2NWaWV3Lm1hdGNoZXNOb2RlKHQuZG9jLHUsYyksZj1ofHwhdC5zZWxlY3Rpb24uZXEoby5zZWxlY3Rpb24pLHA9InByZXNlcnZlIj09bCYmZiYmbnVsbD09dGhpcy5kb20uc3R5bGUub3ZlcmZsb3dBbmNob3ImJk4odGhpcyk7aWYoZil7dGhpcy5kb21PYnNlcnZlci5zdG9wKCk7dmFyIGQ9aCYmKHMuaWV8fHMuY2hyb21lKSYmIXRoaXMuY29tcG9zaW5nJiYhby5zZWxlY3Rpb24uZW1wdHkmJiF0LnNlbGVjdGlvbi5lbXB0eSYmJG4oby5zZWxlY3Rpb24sdC5zZWxlY3Rpb24pO2lmKGgpe3ZhciB2PXMuY2hyb21lJiZxbih0aGlzLnJvb3QpOyFpJiZ0aGlzLmRvY1ZpZXcudXBkYXRlKHQuZG9jLHUsYyx0aGlzKXx8KHRoaXMuZG9jVmlldy51cGRhdGVPdXRlckRlY28oW10pLHRoaXMuZG9jVmlldy5kZXN0cm95KCksdGhpcy5kb2NWaWV3PWx0KHQuZG9jLHUsYyx0aGlzLmRvbSx0aGlzKSksdiYmSm4odix0aGlzLnJvb3QpJiYoZD0hMCl9ZHx8ISh0aGlzLm1vdXNlRG93biYmdGhpcy5kb21PYnNlcnZlci5jdXJyZW50U2VsZWN0aW9uLmVxKHRoaXMucm9vdC5nZXRTZWxlY3Rpb24oKSkmJmllKHRoaXMpKT9LdCh0aGlzLGQpOih0ZSh0aGlzLHQuc2VsZWN0aW9uKSx0aGlzLmRvbU9ic2VydmVyLnNldEN1clNlbGVjdGlvbigpKSx0aGlzLmRvbU9ic2VydmVyLnN0YXJ0KCl9aWYodGhpcy51cGRhdGVQbHVnaW5WaWV3cyhvKSwicmVzZXQiPT1sKXRoaXMuZG9tLnNjcm9sbFRvcD0wO2Vsc2UgaWYoInRvIHNlbGVjdGlvbiI9PWwpe3ZhciBtPXRoaXMucm9vdC5nZXRTZWxlY3Rpb24oKS5mb2N1c05vZGU7dGhpcy5zb21lUHJvcCgiaGFuZGxlU2Nyb2xsVG9TZWxlY3Rpb24iLChmdW5jdGlvbih0KXtyZXR1cm4gdChuKX0pKXx8KHQuc2VsZWN0aW9uIGluc3RhbmNlb2YgclsiTm9kZVNlbGVjdGlvbiJdP00odGhpcyx0aGlzLmRvY1ZpZXcuZG9tQWZ0ZXJQb3ModC5zZWxlY3Rpb24uZnJvbSkuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCksbSk6TSh0aGlzLHRoaXMuY29vcmRzQXRQb3ModC5zZWxlY3Rpb24uaGVhZCksbSkpfWVsc2UgcCYmQShwKX0sSW4ucHJvdG90eXBlLmRlc3Ryb3lQbHVnaW5WaWV3cz1mdW5jdGlvbigpe3ZhciB0O3doaWxlKHQ9dGhpcy5wbHVnaW5WaWV3cy5wb3AoKSl0LmRlc3Ryb3kmJnQuZGVzdHJveSgpfSxJbi5wcm90b3R5cGUudXBkYXRlUGx1Z2luVmlld3M9ZnVuY3Rpb24odCl7aWYodCYmdC5wbHVnaW5zPT10aGlzLnN0YXRlLnBsdWdpbnMpZm9yKHZhciBlPTA7ZTx0aGlzLnBsdWdpblZpZXdzLmxlbmd0aDtlKyspe3ZhciBuPXRoaXMucGx1Z2luVmlld3NbZV07bi51cGRhdGUmJm4udXBkYXRlKHRoaXMsdCl9ZWxzZXt0aGlzLmRlc3Ryb3lQbHVnaW5WaWV3cygpO2Zvcih2YXIgcj0wO3I8dGhpcy5zdGF0ZS5wbHVnaW5zLmxlbmd0aDtyKyspe3ZhciBvPXRoaXMuc3RhdGUucGx1Z2luc1tyXTtvLnNwZWMudmlldyYmdGhpcy5wbHVnaW5WaWV3cy5wdXNoKG8uc3BlYy52aWV3KHRoaXMpKX19fSxJbi5wcm90b3R5cGUuc29tZVByb3A9ZnVuY3Rpb24odCxlKXt2YXIgbixyPXRoaXMuX3Byb3BzJiZ0aGlzLl9wcm9wc1t0XTtpZihudWxsIT1yJiYobj1lP2Uocik6cikpcmV0dXJuIG47dmFyIG89dGhpcy5zdGF0ZS5wbHVnaW5zO2lmKG8pZm9yKHZhciBpPTA7aTxvLmxlbmd0aDtpKyspe3ZhciBzPW9baV0ucHJvcHNbdF07aWYobnVsbCE9cyYmKG49ZT9lKHMpOnMpKXJldHVybiBufX0sSW4ucHJvdG90eXBlLmhhc0ZvY3VzPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucm9vdC5hY3RpdmVFbGVtZW50PT10aGlzLmRvbX0sSW4ucHJvdG90eXBlLmZvY3VzPWZ1bmN0aW9uKCl7dGhpcy5kb21PYnNlcnZlci5zdG9wKCksdGhpcy5lZGl0YWJsZSYmUih0aGlzLmRvbSksS3QodGhpcyksdGhpcy5kb21PYnNlcnZlci5zdGFydCgpfSxCbi5yb290LmdldD1mdW5jdGlvbigpe3ZhciB0PXRoaXMuX3Jvb3Q7aWYobnVsbD09dClmb3IodmFyIGU9dGhpcy5kb20ucGFyZW50Tm9kZTtlO2U9ZS5wYXJlbnROb2RlKWlmKDk9PWUubm9kZVR5cGV8fDExPT1lLm5vZGVUeXBlJiZlLmhvc3QpcmV0dXJuIGUuZ2V0U2VsZWN0aW9ufHwoT2JqZWN0LmdldFByb3RvdHlwZU9mKGUpLmdldFNlbGVjdGlvbj1mdW5jdGlvbigpe3JldHVybiBkb2N1bWVudC5nZXRTZWxlY3Rpb24oKX0pLHRoaXMuX3Jvb3Q9ZTtyZXR1cm4gdHx8ZG9jdW1lbnR9LEluLnByb3RvdHlwZS5wb3NBdENvb3Jkcz1mdW5jdGlvbih0KXtyZXR1cm4gJCh0aGlzLHQpfSxJbi5wcm90b3R5cGUuY29vcmRzQXRQb3M9ZnVuY3Rpb24odCl7cmV0dXJuIEwodGhpcyx0KX0sSW4ucHJvdG90eXBlLmRvbUF0UG9zPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLmRvY1ZpZXcuZG9tRnJvbVBvcyh0KX0sSW4ucHJvdG90eXBlLm5vZGVET009ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5kb2NWaWV3LmRlc2NBdCh0KTtyZXR1cm4gZT9lLm5vZGVET006bnVsbH0sSW4ucHJvdG90eXBlLnBvc0F0RE9NPWZ1bmN0aW9uKHQsZSxuKXt2b2lkIDA9PT1uJiYobj0tMSk7dmFyIHI9dGhpcy5kb2NWaWV3LnBvc0Zyb21ET00odCxlLG4pO2lmKG51bGw9PXIpdGhyb3cgbmV3IFJhbmdlRXJyb3IoIkRPTSBwb3NpdGlvbiBub3QgaW5zaWRlIHRoZSBlZGl0b3IiKTtyZXR1cm4gcn0sSW4ucHJvdG90eXBlLmVuZE9mVGV4dGJsb2NrPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIFoodGhpcyxlfHx0aGlzLnN0YXRlLHQpfSxJbi5wcm90b3R5cGUuZGVzdHJveT1mdW5jdGlvbigpe3RoaXMuZG9jVmlldyYmKF9lKHRoaXMpLHRoaXMuZGVzdHJveVBsdWdpblZpZXdzKCksdGhpcy5tb3VudGVkPyh0aGlzLmRvY1ZpZXcudXBkYXRlKHRoaXMuc3RhdGUuZG9jLFtdLFBuKHRoaXMpLHRoaXMpLHRoaXMuZG9tLnRleHRDb250ZW50PSIiKTp0aGlzLmRvbS5wYXJlbnROb2RlJiZ0aGlzLmRvbS5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKHRoaXMuZG9tKSx0aGlzLmRvY1ZpZXcuZGVzdHJveSgpLHRoaXMuZG9jVmlldz1udWxsKX0sSW4ucHJvdG90eXBlLmRpc3BhdGNoRXZlbnQ9ZnVuY3Rpb24odCl7cmV0dXJuIFZlKHRoaXMsdCl9LEluLnByb3RvdHlwZS5kaXNwYXRjaD1mdW5jdGlvbih0KXt2YXIgZT10aGlzLl9wcm9wcy5kaXNwYXRjaFRyYW5zYWN0aW9uO2U/ZS5jYWxsKHRoaXMsdCk6dGhpcy51cGRhdGVTdGF0ZSh0aGlzLnN0YXRlLmFwcGx5KHQpKX0sT2JqZWN0LmRlZmluZVByb3BlcnRpZXMoSW4ucHJvdG90eXBlLEJuKX0sIjViYjEiOmZ1bmN0aW9uKHQsZSl7dC5leHBvcnRzPXtmdW5jdGlvbmFsOiEwLHJlbmRlcih0LGUpe2NvbnN0e19jOm4sX3Y6cixkYXRhOm8sY2hpbGRyZW46aT1bXX09ZSx7Y2xhc3M6cyxzdGF0aWNDbGFzczphLHN0eWxlOmMsc3RhdGljU3R5bGU6dSxhdHRyczpsPXt9LC4uLmh9PW87cmV0dXJuIG4oInN2ZyIse2NsYXNzOltzLGFdLHN0eWxlOltjLHVdLGF0dHJzOk9iamVjdC5hc3NpZ24oe3htbG5zOiJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIsdmlld0JveDoiMCAwIDI0IDI0In0sbCksLi4uaH0saS5jb25jYXQoW24oInBhdGgiLHthdHRyczp7ZDoiTTEzLjI1NSAxNWE2Ljk3MiA2Ljk3MiAwIDAwLS45NjUgMkg1QTUgNSAwIDAxNSA3aDE0YTUgNSAwIDAxNC42NzEgNi43ODcgNy4wMSA3LjAxIDAgMDAtMS43NC0xLjE0NkEzIDMgMCAwMDE5IDlINWEzIDMgMCAwMDAgNmg4LjI1NXpNMTkgMTRhNSA1IDAgMTEwIDEwIDUgNSAwIDAxMC0xMHptLTIuNSA1LjkzOGg1YS45MzcuOTM3IDAgMTAwLTEuODc1aC01YS45MzcuOTM3IDAgMTAwIDEuODc1eiJ9fSldKSl9fX0sIjVjNmMiOmZ1bmN0aW9uKHQsZSl7dC5leHBvcnRzPWZ1bmN0aW9uKHQsZSl7cmV0dXJue2VudW1lcmFibGU6ISgxJnQpLGNvbmZpZ3VyYWJsZTohKDImdCksd3JpdGFibGU6ISg0JnQpLHZhbHVlOmV9fX0sIjVkNzUiOmZ1bmN0aW9uKHQsZSl7dC5leHBvcnRzPXtmdW5jdGlvbmFsOiEwLHJlbmRlcih0LGUpe2NvbnN0e19jOm4sX3Y6cixkYXRhOm8sY2hpbGRyZW46aT1bXX09ZSx7Y2xhc3M6cyxzdGF0aWNDbGFzczphLHN0eWxlOmMsc3RhdGljU3R5bGU6dSxhdHRyczpsPXt9LC4uLmh9PW87cmV0dXJuIG4oInN2ZyIse2NsYXNzOltzLGFdLHN0eWxlOltjLHVdLGF0dHJzOk9iamVjdC5hc3NpZ24oe3htbG5zOiJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIsdmlld0JveDoiMCAwIDI0IDI0In0sbCksLi4uaH0saS5jb25jYXQoW24oInBhdGgiLHthdHRyczp7ZDoiTTEyLjQwNiAxNC45MDVhMSAxIDAgMDAtLjU0MyAxLjMwNyAxIDEgMCAwMS0uMjE3IDEuMDlsLTIuODI4IDIuODI5YTIgMiAwIDAxLTIuODI4IDBMMy44NjggMTguMDFhMiAyIDAgMDEwLTIuODI5TDYuNyAxMi4zNTNhMS4wMTMgMS4wMTMgMCAwMTEuMDkxLS4yMTcgMSAxIDAgMDAuNzYzLTEuODQ5IDMuMDM0IDMuMDM0IDAgMDAtMy4yNjguNjUybC0yLjgzMiAyLjgyOGE0LjAwNiA0LjAwNiAwIDAwMCA1LjY1N2wyLjEyMiAyLjEyMWE0IDQgMCAwMDUuNjU2IDBsMi44MjktMi44MjhhMy4wMDggMy4wMDggMCAwMC42NTEtMy4yNyAxIDEgMCAwMC0xLjMwNi0uNTQyeiJ9fSksbigicGF0aCIse2F0dHJzOntkOiJNNy43NTcgMTYuMjQxYTEuMDExIDEuMDExIDAgMDAxLjQxNCAwbDcuNzc5LTcuNzc4YTEgMSAwIDAwLTEuNDE0LTEuNDE0bC03Ljc3OSA3Ljc3OGExIDEgMCAwMDAgMS40MTR6In19KSxuKCJwYXRoIix7YXR0cnM6e2Q6Ik0yMS41NDYgNC41NzRsLTIuMTIxLTIuMTIxYTQuMDA2IDQuMDA2IDAgMDAtNS42NTcgMGwtMi44MjkgMi44MjhhMy4wMDYgMy4wMDYgMCAwMC0uNjUxIDMuMjY5IDEgMSAwIDEwMS44NDktLjc2NCAxIDEgMCAwMS4yMTctMS4wODZsMi44MjgtMi44MjhhMiAyIDAgMDEyLjgyOSAwbDIuMTIxIDIuMTIxYTIgMiAwIDAxMCAyLjgyOUwxNy4zIDExLjY0NWExLjAxNSAxLjAxNSAwIDAxLTEuMDkxLjIxNyAxIDEgMCAwMC0uNzY1IDEuODQ5IDMuMDI2IDMuMDI2IDAgMDAzLjI3LS42NTFsMi44MjgtMi44MjhhNC4wMDcgNC4wMDcgMCAwMC4wMDQtNS42NTh6In19KV0pKX19fSwiNWRiZSI6ZnVuY3Rpb24odCxlLG4peyhmdW5jdGlvbigpe3ZhciBlO2Z1bmN0aW9uIG4oKXtjb25zb2xlLmxvZyhvLmFwcGx5KG51bGwsYXJndW1lbnRzKSl9ZnVuY3Rpb24gcih0LGUpe3JldHVybiBvLmFwcGx5KG51bGwsW3RdLmNvbmNhdChlKSl9ZnVuY3Rpb24gbyh0KXtmb3IodmFyIGUsbixyLG8saT0xLHM9W10uc2xpY2UuY2FsbChhcmd1bWVudHMpLGE9MCxjPXQubGVuZ3RoLHU9IiIsbD0hMSxoPSExLGY9ZnVuY3Rpb24oKXtyZXR1cm4gc1tpKytdfSxwPWZ1bmN0aW9uKCl7dmFyIG49IiI7d2hpbGUoL1xkLy50ZXN0KHRbYV0pKW4rPXRbYSsrXSxlPXRbYV07cmV0dXJuIG4ubGVuZ3RoPjA/cGFyc2VJbnQobik6bnVsbH07YTxjOysrYSlpZihlPXRbYV0sbClzd2l0Y2gobD0hMSwiLiI9PWU/KGg9ITEsZT10WysrYV0pOiIwIj09ZSYmIi4iPT10W2ErMV0/KGg9ITAsYSs9MixlPXRbYV0pOmg9ITAsbz1wKCksZSl7Y2FzZSJiIjp1Kz1wYXJzZUludChmKCksMTApLnRvU3RyaW5nKDIpO2JyZWFrO2Nhc2UiYyI6bj1mKCksdSs9InN0cmluZyI9PT10eXBlb2Ygbnx8biBpbnN0YW5jZW9mIFN0cmluZz9uOlN0cmluZy5mcm9tQ2hhckNvZGUocGFyc2VJbnQobiwxMCkpO2JyZWFrO2Nhc2UiZCI6dSs9cGFyc2VJbnQoZigpLDEwKTticmVhaztjYXNlImYiOnI9U3RyaW5nKHBhcnNlRmxvYXQoZigpKS50b0ZpeGVkKG98fDYpKSx1Kz1oP3I6ci5yZXBsYWNlKC9eMC8sIiIpO2JyZWFrO2Nhc2UiaiI6dSs9SlNPTi5zdHJpbmdpZnkoZigpKTticmVhaztjYXNlIm8iOnUrPSIwIitwYXJzZUludChmKCksMTApLnRvU3RyaW5nKDgpO2JyZWFrO2Nhc2UicyI6dSs9ZigpO2JyZWFrO2Nhc2UieCI6dSs9IjB4IitwYXJzZUludChmKCksMTApLnRvU3RyaW5nKDE2KTticmVhaztjYXNlIlgiOnUrPSIweCIrcGFyc2VJbnQoZigpLDEwKS50b1N0cmluZygxNikudG9VcHBlckNhc2UoKTticmVhaztkZWZhdWx0OnUrPWU7YnJlYWt9ZWxzZSIlIj09PWU/bD0hMDp1Kz1lO3JldHVybiB1fWU9dC5leHBvcnRzPW8sZS5mb3JtYXQ9byxlLnZzcHJpbnRmPXIsInVuZGVmaW5lZCIhPT10eXBlb2YgY29uc29sZSYmImZ1bmN0aW9uIj09PXR5cGVvZiBjb25zb2xlLmxvZyYmKGUucHJpbnRmPW4pfSkoKX0sIjVmZWQiOmZ1bmN0aW9uKHQsZSl7dC5leHBvcnRzPXtmdW5jdGlvbmFsOiEwLHJlbmRlcih0LGUpe2NvbnN0e19jOm4sX3Y6cixkYXRhOm8sY2hpbGRyZW46aT1bXX09ZSx7Y2xhc3M6cyxzdGF0aWNDbGFzczphLHN0eWxlOmMsc3RhdGljU3R5bGU6dSxhdHRyczpsPXt9LC4uLmh9PW87cmV0dXJuIG4oInN2ZyIse2NsYXNzOltzLGFdLHN0eWxlOltjLHVdLGF0dHJzOk9iamVjdC5hc3NpZ24oe3htbG5zOiJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIsdmlld0JveDoiMCAwIDI0IDI0In0sbCksLi4uaH0saS5jb25jYXQoW24oInBhdGgiLHthdHRyczp7ZDoiTTE5IDBhNSA1IDAgMTEwIDEwIDUgNSAwIDAxMC0xMHptMi41IDUuOTM4YS45MzcuOTM3IDAgMTAwLTEuODc1aC0xLjI1YS4zMTIuMzEyIDAgMDEtLjMxMy0uMzEzVjIuNWEuOTM3LjkzNyAwIDEwLTEuODc1IDB2MS4yNWMwIC4xNzMtLjE0LjMxMy0uMzEyLjMxM0gxNi41YS45MzcuOTM3IDAgMTAwIDEuODc1aDEuMjVjLjE3MyAwIC4zMTMuMTQuMzEzLjMxMlY3LjVhLjkzNy45MzcgMCAxMDEuODc1IDBWNi4yNWMwLS4xNzMuMTQtLjMxMy4zMTItLjMxM2gxLjI1ek01IDE2YTMgMyAwIDAwMCA2aDE0YTMgMyAwIDAwMC02SDV6bTAtMmgxNGE1IDUgMCAwMTAgMTBINWE1IDUgMCAwMTAtMTB6In19KV0pKX19fSw2NTQ3OmZ1bmN0aW9uKHQsZSxuKXt2YXIgcj1uKCJhNjkxIiksbz1uKCIxZDgwIiksaT1mdW5jdGlvbih0KXtyZXR1cm4gZnVuY3Rpb24oZSxuKXt2YXIgaSxzLGE9U3RyaW5nKG8oZSkpLGM9cihuKSx1PWEubGVuZ3RoO3JldHVybiBjPDB8fGM+PXU/dD8iIjp2b2lkIDA6KGk9YS5jaGFyQ29kZUF0KGMpLGk8NTUyOTZ8fGk+NTYzMTl8fGMrMT09PXV8fChzPWEuY2hhckNvZGVBdChjKzEpKTw1NjMyMHx8cz41NzM0Mz90P2EuY2hhckF0KGMpOmk6dD9hLnNsaWNlKGMsYysyKTpzLTU2MzIwKyhpLTU1Mjk2PDwxMCkrNjU1MzYpfX07dC5leHBvcnRzPXtjb2RlQXQ6aSghMSksY2hhckF0OmkoITApfX0sIjY1ZjAiOmZ1bmN0aW9uKHQsZSxuKXt2YXIgcj1uKCI4NjFkIiksbz1uKCJlOGI1IiksaT1uKCJiNjIyIikscz1pKCJzcGVjaWVzIik7dC5leHBvcnRzPWZ1bmN0aW9uKHQsZSl7dmFyIG47cmV0dXJuIG8odCkmJihuPXQuY29uc3RydWN0b3IsImZ1bmN0aW9uIiE9dHlwZW9mIG58fG4hPT1BcnJheSYmIW8obi5wcm90b3R5cGUpP3IobikmJihuPW5bc10sbnVsbD09PW4mJihuPXZvaWQgMCkpOm49dm9pZCAwKSxuZXcodm9pZCAwPT09bj9BcnJheTpuKSgwPT09ZT8wOmUpfX0sIjY5ZjMiOmZ1bmN0aW9uKHQsZSxuKXt2YXIgcixvLGkscz1uKCI3ZjlhIiksYT1uKCJkYTg0IiksYz1uKCI4NjFkIiksdT1uKCI5MTEyIiksbD1uKCI1MTM1IiksaD1uKCJmNzcyIiksZj1uKCJkMDEyIikscD1hLldlYWtNYXAsZD1mdW5jdGlvbih0KXtyZXR1cm4gaSh0KT9vKHQpOnIodCx7fSl9LHY9ZnVuY3Rpb24odCl7cmV0dXJuIGZ1bmN0aW9uKGUpe3ZhciBuO2lmKCFjKGUpfHwobj1vKGUpKS50eXBlIT09dCl0aHJvdyBUeXBlRXJyb3IoIkluY29tcGF0aWJsZSByZWNlaXZlciwgIit0KyIgcmVxdWlyZWQiKTtyZXR1cm4gbn19O2lmKHMpe3ZhciBtPW5ldyBwLGc9bS5nZXQseT1tLmhhcyx3PW0uc2V0O3I9ZnVuY3Rpb24odCxlKXtyZXR1cm4gdy5jYWxsKG0sdCxlKSxlfSxvPWZ1bmN0aW9uKHQpe3JldHVybiBnLmNhbGwobSx0KXx8e319LGk9ZnVuY3Rpb24odCl7cmV0dXJuIHkuY2FsbChtLHQpfX1lbHNle3ZhciBiPWgoInN0YXRlIik7ZltiXT0hMCxyPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIHUodCxiLGUpLGV9LG89ZnVuY3Rpb24odCl7cmV0dXJuIGwodCxiKT90W2JdOnt9fSxpPWZ1bmN0aW9uKHQpe3JldHVybiBsKHQsYil9fXQuZXhwb3J0cz17c2V0OnIsZ2V0Om8saGFzOmksZW5mb3JjZTpkLGdldHRlckZvcjp2fX0sIjZkNTQiOmZ1bmN0aW9uKHQsZSl7dC5leHBvcnRzPXtmdW5jdGlvbmFsOiEwLHJlbmRlcih0LGUpe2NvbnN0e19jOm4sX3Y6cixkYXRhOm8sY2hpbGRyZW46aT1bXX09ZSx7Y2xhc3M6cyxzdGF0aWNDbGFzczphLHN0eWxlOmMsc3RhdGljU3R5bGU6dSxhdHRyczpsPXt9LC4uLmh9PW87cmV0dXJuIG4oInN2ZyIse2NsYXNzOltzLGFdLHN0eWxlOltjLHVdLGF0dHJzOk9iamVjdC5hc3NpZ24oe3htbG5zOiJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIsdmlld0JveDoiMCAwIDI0IDI0In0sbCksLi4uaH0saS5jb25jYXQoW24oInBhdGgiLHthdHRyczp7ImZpbGwtcnVsZSI6ImV2ZW5vZGQiLGQ6Ik0xNyAxN3Y1aDJhMyAzIDAgMDAzLTN2LTJoLTV6bS0yIDBIOXY1aDZ2LTV6bTItMmg1VjloLTV2NnptLTIgMFY5SDl2Nmg2em0yLThoNVY1YTMgMyAwIDAwLTMtM2gtMnY1em0tMiAwVjJIOXY1aDZ6bTkgOS4xNzdWMTlhNSA1IDAgMDEtNSA1SDVhNSA1IDAgMDEtNS01VjVhNSA1IDAgMDE1LTVoMTRhNSA1IDAgMDE1IDV2Mi44MjNhLjg0My44NDMgMCAwMTAgLjM1NHY3LjY0NmEuODQzLjg0MyAwIDAxMCAuMzU0ek03IDJINWEzIDMgMCAwMC0zIDN2Mmg1VjJ6TTIgOXY2aDVWOUgyem0wIDh2MmEzIDMgMCAwMDMgM2gydi01SDJ6In19KV0pKX19fSwiNmVlYiI6ZnVuY3Rpb24odCxlLG4pe3ZhciByPW4oImRhODQiKSxvPW4oIjkxMTIiKSxpPW4oIjUxMzUiKSxzPW4oImNlNGUiKSxhPW4oIjg5MjUiKSxjPW4oIjY5ZjMiKSx1PWMuZ2V0LGw9Yy5lbmZvcmNlLGg9U3RyaW5nKFN0cmluZykuc3BsaXQoIlN0cmluZyIpOyh0LmV4cG9ydHM9ZnVuY3Rpb24odCxlLG4sYSl7dmFyIGM9ISFhJiYhIWEudW5zYWZlLHU9ISFhJiYhIWEuZW51bWVyYWJsZSxmPSEhYSYmISFhLm5vVGFyZ2V0R2V0OyJmdW5jdGlvbiI9PXR5cGVvZiBuJiYoInN0cmluZyIhPXR5cGVvZiBlfHxpKG4sIm5hbWUiKXx8byhuLCJuYW1lIixlKSxsKG4pLnNvdXJjZT1oLmpvaW4oInN0cmluZyI9PXR5cGVvZiBlP2U6IiIpKSx0IT09cj8oYz8hZiYmdFtlXSYmKHU9ITApOmRlbGV0ZSB0W2VdLHU/dFtlXT1uOm8odCxlLG4pKTp1P3RbZV09bjpzKGUsbil9KShGdW5jdGlvbi5wcm90b3R5cGUsInRvU3RyaW5nIiwoZnVuY3Rpb24oKXtyZXR1cm4iZnVuY3Rpb24iPT10eXBlb2YgdGhpcyYmdSh0aGlzKS5zb3VyY2V8fGEodGhpcyl9KSl9LCI2ZjUzIjpmdW5jdGlvbih0LGUsbil7dmFyIHI9bigiODNhYiIpLG89bigiZGY3NSIpLGk9bigiZmM2YSIpLHM9bigiZDFlNyIpLmYsYT1mdW5jdGlvbih0KXtyZXR1cm4gZnVuY3Rpb24oZSl7dmFyIG4sYT1pKGUpLGM9byhhKSx1PWMubGVuZ3RoLGw9MCxoPVtdO3doaWxlKHU+bCluPWNbbCsrXSxyJiYhcy5jYWxsKGEsbil8fGgucHVzaCh0P1tuLGFbbl1dOmFbbl0pO3JldHVybiBofX07dC5leHBvcnRzPXtlbnRyaWVzOmEoITApLHZhbHVlczphKCExKX19LCI3MGM3IjpmdW5jdGlvbih0LGUpe3QuZXhwb3J0cz17ZnVuY3Rpb25hbDohMCxyZW5kZXIodCxlKXtjb25zdHtfYzpuLF92OnIsZGF0YTpvLGNoaWxkcmVuOmk9W119PWUse2NsYXNzOnMsc3RhdGljQ2xhc3M6YSxzdHlsZTpjLHN0YXRpY1N0eWxlOnUsYXR0cnM6bD17fSwuLi5ofT1vO3JldHVybiBuKCJzdmciLHtjbGFzczpbcyxhXSxzdHlsZTpbYyx1XSxhdHRyczpPYmplY3QuYXNzaWduKHt4bWxuczoiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciLHZpZXdCb3g6IjAgMCAyNCAyNCJ9LGwpLC4uLmh9LGkuY29uY2F0KFtuKCJwYXRoIix7YXR0cnM6e2Q6Ik01IDE0YTUgNSAwIDExMCAxMCA1IDUgMCAwMTAtMTB6bTIuNSA1LjkzOGEuOTM3LjkzNyAwIDEwMC0xLjg3NUg2LjI1YS4zMTIuMzEyIDAgMDEtLjMxMy0uMzEzVjE2LjVhLjkzNy45MzcgMCAxMC0xLjg3NSAwdjEuMjVjMCAuMTczLS4xNC4zMTMtLjMxMi4zMTNIMi41YS45MzcuOTM3IDAgMTAwIDEuODc1aDEuMjVjLjE3MyAwIC4zMTMuMTQuMzEzLjMxMnYxLjI1YS45MzcuOTM3IDAgMTAxLjg3NSAwdi0xLjI1YzAtLjE3My4xNC0uMzEzLjMxMi0uMzEzSDcuNXpNMTYgMTlhMyAzIDAgMDA2IDBWNWEzIDMgMCAwMC02IDB2MTR6bS0yIDBWNWE1IDUgMCAwMTEwIDB2MTRhNSA1IDAgMDEtMTAgMHoifX0pXSkpfX19LDc0MTg6ZnVuY3Rpb24odCxlKXtlLmY9T2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9sc30sIjc0NmYiOmZ1bmN0aW9uKHQsZSxuKXt2YXIgcj1uKCI0MjhmIiksbz1uKCI1MTM1IiksaT1uKCJlNTM4Iikscz1uKCI5YmYyIikuZjt0LmV4cG9ydHM9ZnVuY3Rpb24odCl7dmFyIGU9ci5TeW1ib2x8fChyLlN5bWJvbD17fSk7byhlLHQpfHxzKGUsdCx7dmFsdWU6aS5mKHQpfSl9fSw3ODM5OmZ1bmN0aW9uKHQsZSl7dC5leHBvcnRzPVsiY29uc3RydWN0b3IiLCJoYXNPd25Qcm9wZXJ0eSIsImlzUHJvdG90eXBlT2YiLCJwcm9wZXJ0eUlzRW51bWVyYWJsZSIsInRvTG9jYWxlU3RyaW5nIiwidG9TdHJpbmciLCJ2YWx1ZU9mIl19LCI3YjBiIjpmdW5jdGlvbih0LGUsbil7dmFyIHI9bigiMWQ4MCIpO3QuZXhwb3J0cz1mdW5jdGlvbih0KXtyZXR1cm4gT2JqZWN0KHIodCkpfX0sIjdjNzMiOmZ1bmN0aW9uKHQsZSxuKXt2YXIgcixvPW4oIjgyNWEiKSxpPW4oIjM3ZTgiKSxzPW4oIjc4MzkiKSxhPW4oImQwMTIiKSxjPW4oIjFiZTQiKSx1PW4oImNjMTIiKSxsPW4oImY3NzIiKSxoPSI+IixmPSI8IixwPSJwcm90b3R5cGUiLGQ9InNjcmlwdCIsdj1sKCJJRV9QUk9UTyIpLG09ZnVuY3Rpb24oKXt9LGc9ZnVuY3Rpb24odCl7cmV0dXJuIGYrZCtoK3QrZisiLyIrZCtofSx5PWZ1bmN0aW9uKHQpe3Qud3JpdGUoZygiIikpLHQuY2xvc2UoKTt2YXIgZT10LnBhcmVudFdpbmRvdy5PYmplY3Q7cmV0dXJuIHQ9bnVsbCxlfSx3PWZ1bmN0aW9uKCl7dmFyIHQsZT11KCJpZnJhbWUiKSxuPSJqYXZhIitkKyI6IjtyZXR1cm4gZS5zdHlsZS5kaXNwbGF5PSJub25lIixjLmFwcGVuZENoaWxkKGUpLGUuc3JjPVN0cmluZyhuKSx0PWUuY29udGVudFdpbmRvdy5kb2N1bWVudCx0Lm9wZW4oKSx0LndyaXRlKGcoImRvY3VtZW50LkY9T2JqZWN0IikpLHQuY2xvc2UoKSx0LkZ9LGI9ZnVuY3Rpb24oKXt0cnl7cj1kb2N1bWVudC5kb21haW4mJm5ldyBBY3RpdmVYT2JqZWN0KCJodG1sZmlsZSIpfWNhdGNoKGUpe31iPXI/eShyKTp3KCk7dmFyIHQ9cy5sZW5ndGg7d2hpbGUodC0tKWRlbGV0ZSBiW3BdW3NbdF1dO3JldHVybiBiKCl9O2Fbdl09ITAsdC5leHBvcnRzPU9iamVjdC5jcmVhdGV8fGZ1bmN0aW9uKHQsZSl7dmFyIG47cmV0dXJuIG51bGwhPT10PyhtW3BdPW8odCksbj1uZXcgbSxtW3BdPW51bGwsblt2XT10KTpuPWIoKSx2b2lkIDA9PT1lP246aShuLGUpfX0sIjdkZDAiOmZ1bmN0aW9uKHQsZSxuKXsidXNlIHN0cmljdCI7dmFyIHI9bigiMjNlNyIpLG89bigiOWVkMyIpLGk9bigiZTE2MyIpLHM9bigiZDJiYiIpLGE9bigiZDQ0ZSIpLGM9bigiOTExMiIpLHU9bigiNmVlYiIpLGw9bigiYjYyMiIpLGg9bigiYzQzMCIpLGY9bigiM2Y4YyIpLHA9bigiYWU5MyIpLGQ9cC5JdGVyYXRvclByb3RvdHlwZSx2PXAuQlVHR1lfU0FGQVJJX0lURVJBVE9SUyxtPWwoIml0ZXJhdG9yIiksZz0ia2V5cyIseT0idmFsdWVzIix3PSJlbnRyaWVzIixiPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXN9O3QuZXhwb3J0cz1mdW5jdGlvbih0LGUsbixsLHAseCxrKXtvKG4sZSxsKTt2YXIgUyxDLE8sTT1mdW5jdGlvbih0KXtpZih0PT09cCYmRClyZXR1cm4gRDtpZighdiYmdCBpbiBBKXJldHVybiBBW3RdO3N3aXRjaCh0KXtjYXNlIGc6cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIG5ldyBuKHRoaXMsdCl9O2Nhc2UgeTpyZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gbmV3IG4odGhpcyx0KX07Y2FzZSB3OnJldHVybiBmdW5jdGlvbigpe3JldHVybiBuZXcgbih0aGlzLHQpfX1yZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gbmV3IG4odGhpcyl9fSxOPWUrIiBJdGVyYXRvciIsVD0hMSxBPXQucHJvdG90eXBlLEU9QVttXXx8QVsiQEBpdGVyYXRvciJdfHxwJiZBW3BdLEQ9IXYmJkV8fE0ocCksUj0iQXJyYXkiPT1lJiZBLmVudHJpZXN8fEU7aWYoUiYmKFM9aShSLmNhbGwobmV3IHQpKSxkIT09T2JqZWN0LnByb3RvdHlwZSYmUy5uZXh0JiYoaHx8aShTKT09PWR8fChzP3MoUyxkKToiZnVuY3Rpb24iIT10eXBlb2YgU1ttXSYmYyhTLG0sYikpLGEoUyxOLCEwLCEwKSxoJiYoZltOXT1iKSkpLHA9PXkmJkUmJkUubmFtZSE9PXkmJihUPSEwLEQ9ZnVuY3Rpb24oKXtyZXR1cm4gRS5jYWxsKHRoaXMpfSksaCYmIWt8fEFbbV09PT1EfHxjKEEsbSxEKSxmW2VdPUQscClpZihDPXt2YWx1ZXM6TSh5KSxrZXlzOng/RDpNKGcpLGVudHJpZXM6TSh3KX0saylmb3IoTyBpbiBDKSh2fHxUfHwhKE8gaW4gQSkpJiZ1KEEsTyxDW09dKTtlbHNlIHIoe3RhcmdldDplLHByb3RvOiEwLGZvcmNlZDp2fHxUfSxDKTtyZXR1cm4gQ319LCI3ZjA2IjpmdW5jdGlvbih0LGUsbil7InVzZSBzdHJpY3QiO24uZChlLCJhIiwoZnVuY3Rpb24oKXtyZXR1cm4gY30pKTt2YXIgcj1uKCI5ZWE3Iiksbz0obigiNTMxMyIpLCJ1bmRlZmluZWQiIT10eXBlb2YgbmF2aWdhdG9yJiYvTWFjLy50ZXN0KG5hdmlnYXRvci5wbGF0Zm9ybSkpO2Z1bmN0aW9uIGkodCl7dmFyIGUsbixyLGkscz10LnNwbGl0KC8tKD8hJCkvKSxhPXNbcy5sZW5ndGgtMV07IlNwYWNlIj09YSYmKGE9IiAiKTtmb3IodmFyIGM9MDtjPHMubGVuZ3RoLTE7YysrKXt2YXIgdT1zW2NdO2lmKC9eKGNtZHxtZXRhfG0pJC9pLnRlc3QodSkpaT0hMDtlbHNlIGlmKC9eYShsdCk/JC9pLnRlc3QodSkpZT0hMDtlbHNlIGlmKC9eKGN8Y3RybHxjb250cm9sKSQvaS50ZXN0KHUpKW49ITA7ZWxzZSBpZigvXnMoaGlmdCk/JC9pLnRlc3QodSkpcj0hMDtlbHNle2lmKCEvXm1vZCQvaS50ZXN0KHUpKXRocm93IG5ldyBFcnJvcigiVW5yZWNvZ25pemVkIG1vZGlmaWVyIG5hbWU6ICIrdSk7bz9pPSEwOm49ITB9fXJldHVybiBlJiYoYT0iQWx0LSIrYSksbiYmKGE9IkN0cmwtIithKSxpJiYoYT0iTWV0YS0iK2EpLHImJihhPSJTaGlmdC0iK2EpLGF9ZnVuY3Rpb24gcyh0KXt2YXIgZT1PYmplY3QuY3JlYXRlKG51bGwpO2Zvcih2YXIgbiBpbiB0KWVbaShuKV09dFtuXTtyZXR1cm4gZX1mdW5jdGlvbiBhKHQsZSxuKXtyZXR1cm4gZS5hbHRLZXkmJih0PSJBbHQtIit0KSxlLmN0cmxLZXkmJih0PSJDdHJsLSIrdCksZS5tZXRhS2V5JiYodD0iTWV0YS0iK3QpLCExIT09biYmZS5zaGlmdEtleSYmKHQ9IlNoaWZ0LSIrdCksdH1mdW5jdGlvbiBjKHQpe3ZhciBlPXModCk7cmV0dXJuIGZ1bmN0aW9uKHQsbil7dmFyIG8saT1PYmplY3QoclsiYiJdKShuKSxzPTE9PWkubGVuZ3RoJiYiICIhPWksYz1lW2EoaSxuLCFzKV07aWYoYyYmYyh0LnN0YXRlLHQuZGlzcGF0Y2gsdCkpcmV0dXJuITA7aWYocyYmKG4uc2hpZnRLZXl8fG4uYWx0S2V5fHxuLm1ldGFLZXl8fGkuY2hhckNvZGVBdCgwKT4xMjcpJiYobz1yWyJhIl1bbi5rZXlDb2RlXSkmJm8hPWkpe3ZhciB1PWVbYShvLG4sITApXTtpZih1JiZ1KHQuc3RhdGUsdC5kaXNwYXRjaCx0KSlyZXR1cm4hMH1lbHNlIGlmKHMmJm4uc2hpZnRLZXkpe3ZhciBsPWVbYShpLG4sITApXTtpZihsJiZsKHQuc3RhdGUsdC5kaXNwYXRjaCx0KSlyZXR1cm4hMH1yZXR1cm4hMX19fSwiN2Y5YSI6ZnVuY3Rpb24odCxlLG4pe3ZhciByPW4oImRhODQiKSxvPW4oIjg5MjUiKSxpPXIuV2Vha01hcDt0LmV4cG9ydHM9ImZ1bmN0aW9uIj09PXR5cGVvZiBpJiYvbmF0aXZlIGNvZGUvLnRlc3QobyhpKSl9LCI4MjVhIjpmdW5jdGlvbih0LGUsbil7dmFyIHI9bigiODYxZCIpO3QuZXhwb3J0cz1mdW5jdGlvbih0KXtpZighcih0KSl0aHJvdyBUeXBlRXJyb3IoU3RyaW5nKHQpKyIgaXMgbm90IGFuIG9iamVjdCIpO3JldHVybiB0fX0sIjgzYWIiOmZ1bmN0aW9uKHQsZSxuKXt2YXIgcj1uKCJkMDM5Iik7dC5leHBvcnRzPSFyKChmdW5jdGlvbigpe3JldHVybiA3IT1PYmplY3QuZGVmaW5lUHJvcGVydHkoe30sMSx7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIDd9fSlbMV19KSl9LDg0MTg6ZnVuY3Rpb24odCxlLG4peyJ1c2Ugc3RyaWN0Ijt2YXIgcj1uKCJjMDRlIiksbz1uKCI5YmYyIiksaT1uKCI1YzZjIik7dC5leHBvcnRzPWZ1bmN0aW9uKHQsZSxuKXt2YXIgcz1yKGUpO3MgaW4gdD9vLmYodCxzLGkoMCxuKSk6dFtzXT1ufX0sIjg2MWQiOmZ1bmN0aW9uKHQsZSl7dC5leHBvcnRzPWZ1bmN0aW9uKHQpe3JldHVybiJvYmplY3QiPT09dHlwZW9mIHQ/bnVsbCE9PXQ6ImZ1bmN0aW9uIj09PXR5cGVvZiB0fX0sIjg4NGMiOmZ1bmN0aW9uKHQsZSxuKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gcih0KXt0aGlzLmNvbnRlbnQ9dH1yLnByb3RvdHlwZT17Y29uc3RydWN0b3I6cixmaW5kOmZ1bmN0aW9uKHQpe2Zvcih2YXIgZT0wO2U8dGhpcy5jb250ZW50Lmxlbmd0aDtlKz0yKWlmKHRoaXMuY29udGVudFtlXT09PXQpcmV0dXJuIGU7cmV0dXJuLTF9LGdldDpmdW5jdGlvbih0KXt2YXIgZT10aGlzLmZpbmQodCk7cmV0dXJuLTE9PWU/dm9pZCAwOnRoaXMuY29udGVudFtlKzFdfSx1cGRhdGU6ZnVuY3Rpb24odCxlLG4pe3ZhciBvPW4mJm4hPXQ/dGhpcy5yZW1vdmUobik6dGhpcyxpPW8uZmluZCh0KSxzPW8uY29udGVudC5zbGljZSgpO3JldHVybi0xPT1pP3MucHVzaChufHx0LGUpOihzW2krMV09ZSxuJiYoc1tpXT1uKSksbmV3IHIocyl9LHJlbW92ZTpmdW5jdGlvbih0KXt2YXIgZT10aGlzLmZpbmQodCk7aWYoLTE9PWUpcmV0dXJuIHRoaXM7dmFyIG49dGhpcy5jb250ZW50LnNsaWNlKCk7cmV0dXJuIG4uc3BsaWNlKGUsMiksbmV3IHIobil9LGFkZFRvU3RhcnQ6ZnVuY3Rpb24odCxlKXtyZXR1cm4gbmV3IHIoW3QsZV0uY29uY2F0KHRoaXMucmVtb3ZlKHQpLmNvbnRlbnQpKX0sYWRkVG9FbmQ6ZnVuY3Rpb24odCxlKXt2YXIgbj10aGlzLnJlbW92ZSh0KS5jb250ZW50LnNsaWNlKCk7cmV0dXJuIG4ucHVzaCh0LGUpLG5ldyByKG4pfSxhZGRCZWZvcmU6ZnVuY3Rpb24odCxlLG4pe3ZhciBvPXRoaXMucmVtb3ZlKGUpLGk9by5jb250ZW50LnNsaWNlKCkscz1vLmZpbmQodCk7cmV0dXJuIGkuc3BsaWNlKC0xPT1zP2kubGVuZ3RoOnMsMCxlLG4pLG5ldyByKGkpfSxmb3JFYWNoOmZ1bmN0aW9uKHQpe2Zvcih2YXIgZT0wO2U8dGhpcy5jb250ZW50Lmxlbmd0aDtlKz0yKXQodGhpcy5jb250ZW50W2VdLHRoaXMuY29udGVudFtlKzFdKX0scHJlcGVuZDpmdW5jdGlvbih0KXtyZXR1cm4gdD1yLmZyb20odCksdC5zaXplP25ldyByKHQuY29udGVudC5jb25jYXQodGhpcy5zdWJ0cmFjdCh0KS5jb250ZW50KSk6dGhpc30sYXBwZW5kOmZ1bmN0aW9uKHQpe3JldHVybiB0PXIuZnJvbSh0KSx0LnNpemU/bmV3IHIodGhpcy5zdWJ0cmFjdCh0KS5jb250ZW50LmNvbmNhdCh0LmNvbnRlbnQpKTp0aGlzfSxzdWJ0cmFjdDpmdW5jdGlvbih0KXt2YXIgZT10aGlzO3Q9ci5mcm9tKHQpO2Zvcih2YXIgbj0wO248dC5jb250ZW50Lmxlbmd0aDtuKz0yKWU9ZS5yZW1vdmUodC5jb250ZW50W25dKTtyZXR1cm4gZX0sZ2V0IHNpemUoKXtyZXR1cm4gdGhpcy5jb250ZW50Lmxlbmd0aD4+MX19LHIuZnJvbT1mdW5jdGlvbih0KXtpZih0IGluc3RhbmNlb2YgcilyZXR1cm4gdDt2YXIgZT1bXTtpZih0KWZvcih2YXIgbiBpbiB0KWUucHVzaChuLHRbbl0pO3JldHVybiBuZXcgcihlKX07dmFyIG89cjtlWyJhIl09b30sODg3NTpmdW5jdGlvbih0LGUsbil7dmFyIHIsbyxpOyhmdW5jdGlvbihuLHMpe289W10scj1zLGk9ImZ1bmN0aW9uIj09PXR5cGVvZiByP3IuYXBwbHkoZSxvKTpyLHZvaWQgMD09PWl8fCh0LmV4cG9ydHM9aSl9KSgidW5kZWZpbmVkIiE9PXR5cGVvZiBzZWxmJiZzZWxmLChmdW5jdGlvbigpe2Z1bmN0aW9uIHQoKXtjb25zdCBlPU9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoZG9jdW1lbnQsImN1cnJlbnRTY3JpcHQiKTtpZighZSYmImN1cnJlbnRTY3JpcHQiaW4gZG9jdW1lbnQmJmRvY3VtZW50LmN1cnJlbnRTY3JpcHQpcmV0dXJuIGRvY3VtZW50LmN1cnJlbnRTY3JpcHQ7aWYoZSYmZS5nZXQhPT10JiZkb2N1bWVudC5jdXJyZW50U2NyaXB0KXJldHVybiBkb2N1bWVudC5jdXJyZW50U2NyaXB0O3RyeXt0aHJvdyBuZXcgRXJyb3J9Y2F0Y2gocCl7dmFyIG4scixvLGk9Ly4qYXQgW14oXSpcKCguKik6KC4rKTooLispXCkkL2dpLHM9L0AoW15AXSopOihcZCspOihcZCspXHMqJC9naSxhPWkuZXhlYyhwLnN0YWNrKXx8cy5leGVjKHAuc3RhY2spLGM9YSYmYVsxXXx8ITEsdT1hJiZhWzJdfHwhMSxsPWRvY3VtZW50LmxvY2F0aW9uLmhyZWYucmVwbGFjZShkb2N1bWVudC5sb2NhdGlvbi5oYXNoLCIiKSxoPWRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKCJzY3JpcHQiKTtjPT09bCYmKG49ZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50Lm91dGVySFRNTCxyPW5ldyBSZWdFeHAoIig/OlteXFxuXSs/XFxuKXswLCIrKHUtMikrIn1bXjxdKjxzY3JpcHQ+KFtcXGRcXERdKj8pPFxcL3NjcmlwdD5bXFxkXFxEXSoiLCJpIiksbz1uLnJlcGxhY2UociwiJDEiKS50cmltKCkpO2Zvcih2YXIgZj0wO2Y8aC5sZW5ndGg7ZisrKXtpZigiaW50ZXJhY3RpdmUiPT09aFtmXS5yZWFkeVN0YXRlKXJldHVybiBoW2ZdO2lmKGhbZl0uc3JjPT09YylyZXR1cm4gaFtmXTtpZihjPT09bCYmaFtmXS5pbm5lckhUTUwmJmhbZl0uaW5uZXJIVE1MLnRyaW0oKT09PW8pcmV0dXJuIGhbZl19cmV0dXJuIG51bGx9fXJldHVybiB0fSkpfSw4OTI1OmZ1bmN0aW9uKHQsZSxuKXt2YXIgcj1uKCJjNmNkIiksbz1GdW5jdGlvbi50b1N0cmluZzsiZnVuY3Rpb24iIT10eXBlb2Ygci5pbnNwZWN0U291cmNlJiYoci5pbnNwZWN0U291cmNlPWZ1bmN0aW9uKHQpe3JldHVybiBvLmNhbGwodCl9KSx0LmV4cG9ydHM9ci5pbnNwZWN0U291cmNlfSwiOGJiZiI6ZnVuY3Rpb24oZSxuKXtlLmV4cG9ydHM9dH0sIjkwZTMiOmZ1bmN0aW9uKHQsZSl7dmFyIG49MCxyPU1hdGgucmFuZG9tKCk7dC5leHBvcnRzPWZ1bmN0aW9uKHQpe3JldHVybiJTeW1ib2woIitTdHJpbmcodm9pZCAwPT09dD8iIjp0KSsiKV8iKygrK24rcikudG9TdHJpbmcoMzYpfX0sOTExMjpmdW5jdGlvbih0LGUsbil7dmFyIHI9bigiODNhYiIpLG89bigiOWJmMiIpLGk9bigiNWM2YyIpO3QuZXhwb3J0cz1yP2Z1bmN0aW9uKHQsZSxuKXtyZXR1cm4gby5mKHQsZSxpKDEsbikpfTpmdW5jdGlvbih0LGUsbil7cmV0dXJuIHRbZV09bix0fX0sIjkyY2YiOmZ1bmN0aW9uKHQsZSl7dC5leHBvcnRzPXtmdW5jdGlvbmFsOiEwLHJlbmRlcih0LGUpe2NvbnN0e19jOm4sX3Y6cixkYXRhOm8sY2hpbGRyZW46aT1bXX09ZSx7Y2xhc3M6cyxzdGF0aWNDbGFzczphLHN0eWxlOmMsc3RhdGljU3R5bGU6dSxhdHRyczpsPXt9LC4uLmh9PW87cmV0dXJuIG4oInN2ZyIse2NsYXNzOltzLGFdLHN0eWxlOltjLHVdLGF0dHJzOk9iamVjdC5hc3NpZ24oe3htbG5zOiJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIsdmlld0JveDoiMCAwIDI0IDI0In0sbCksLi4uaH0saS5jb25jYXQoW24oInBhdGgiLHthdHRyczp7ZDoiTTE3Ljc4NiAzLjc3YTEyLjU0MiAxMi41NDIgMCAwMC0xMi45NjUtLjg2NS4yNDkuMjQ5IDAgMDEtLjI5Mi0uMDQ1TDEuOTM3LjI2OUEuNTA3LjUwNyAwIDAwMS4zOTIuMTZhLjUuNSAwIDAwLS4zMDguNDYydjYuN2EuNS41IDAgMDAuNS41aDYuN2EuNS41IDAgMDAuMzU0LS44NTRMNi43ODMgNS4xMTVhLjI1My4yNTMgMCAwMS0uMDY4LS4yMjguMjQ5LjI0OSAwIDAxLjE1Mi0uMTgxIDEwIDEwIDAgMDE5LjQ2NiAxLjEgOS43NTkgOS43NTkgMCAwMS4wOTQgMTUuODA5IDEuMjUgMS4yNSAwIDAwMS40NzMgMi4wMTYgMTIuMTIyIDEyLjEyMiAwIDAwNS4wMTMtOS45NjEgMTIuMTI1IDEyLjEyNSAwIDAwLTUuMTI3LTkuOXoifX0pXSkpfX19LCI5NGNhIjpmdW5jdGlvbih0LGUsbil7dmFyIHI9bigiZDAzOSIpLG89LyN8XC5wcm90b3R5cGVcLi8saT1mdW5jdGlvbih0LGUpe3ZhciBuPWFbcyh0KV07cmV0dXJuIG49PXV8fG4hPWMmJigiZnVuY3Rpb24iPT10eXBlb2YgZT9yKGUpOiEhZSl9LHM9aS5ub3JtYWxpemU9ZnVuY3Rpb24odCl7cmV0dXJuIFN0cmluZyh0KS5yZXBsYWNlKG8sIi4iKS50b0xvd2VyQ2FzZSgpfSxhPWkuZGF0YT17fSxjPWkuTkFUSVZFPSJOIix1PWkuUE9MWUZJTEw9IlAiO3QuZXhwb3J0cz1pfSwiOWJkZCI6ZnVuY3Rpb24odCxlLG4pe3ZhciByPW4oIjgyNWEiKTt0LmV4cG9ydHM9ZnVuY3Rpb24odCxlLG4sbyl7dHJ5e3JldHVybiBvP2UocihuKVswXSxuWzFdKTplKG4pfWNhdGNoKHMpe3ZhciBpPXRbInJldHVybiJdO3Rocm93IHZvaWQgMCE9PWkmJnIoaS5jYWxsKHQpKSxzfX19LCI5YmYyIjpmdW5jdGlvbih0LGUsbil7dmFyIHI9bigiODNhYiIpLG89bigiMGNmYiIpLGk9bigiODI1YSIpLHM9bigiYzA0ZSIpLGE9T2JqZWN0LmRlZmluZVByb3BlcnR5O2UuZj1yP2E6ZnVuY3Rpb24odCxlLG4pe2lmKGkodCksZT1zKGUsITApLGkobiksbyl0cnl7cmV0dXJuIGEodCxlLG4pfWNhdGNoKHIpe31pZigiZ2V0ImluIG58fCJzZXQiaW4gbil0aHJvdyBUeXBlRXJyb3IoIkFjY2Vzc29ycyBub3Qgc3VwcG9ydGVkIik7cmV0dXJuInZhbHVlImluIG4mJih0W2VdPW4udmFsdWUpLHR9fSwiOWVhNyI6ZnVuY3Rpb24odCxlLG4peyJ1c2Ugc3RyaWN0IjtuLmQoZSwiYSIsKGZ1bmN0aW9uKCl7cmV0dXJuIHJ9KSksbi5kKGUsImIiLChmdW5jdGlvbigpe3JldHVybiBwfSkpO2Zvcih2YXIgcj17ODoiQmFja3NwYWNlIiw5OiJUYWIiLDEwOiJFbnRlciIsMTI6Ik51bUxvY2siLDEzOiJFbnRlciIsMTY6IlNoaWZ0IiwxNzoiQ29udHJvbCIsMTg6IkFsdCIsMjA6IkNhcHNMb2NrIiwyNzoiRXNjYXBlIiwzMjoiICIsMzM6IlBhZ2VVcCIsMzQ6IlBhZ2VEb3duIiwzNToiRW5kIiwzNjoiSG9tZSIsMzc6IkFycm93TGVmdCIsMzg6IkFycm93VXAiLDM5OiJBcnJvd1JpZ2h0Iiw0MDoiQXJyb3dEb3duIiw0NDoiUHJpbnRTY3JlZW4iLDQ1OiJJbnNlcnQiLDQ2OiJEZWxldGUiLDU5OiI7Iiw2MToiPSIsOTE6Ik1ldGEiLDkyOiJNZXRhIiwxMDY6IioiLDEwNzoiKyIsMTA4OiIsIiwxMDk6Ii0iLDExMDoiLiIsMTExOiIvIiwxNDQ6Ik51bUxvY2siLDE0NToiU2Nyb2xsTG9jayIsMTYwOiJTaGlmdCIsMTYxOiJTaGlmdCIsMTYyOiJDb250cm9sIiwxNjM6IkNvbnRyb2wiLDE2NDoiQWx0IiwxNjU6IkFsdCIsMTczOiItIiwxODY6IjsiLDE4NzoiPSIsMTg4OiIsIiwxODk6Ii0iLDE5MDoiLiIsMTkxOiIvIiwxOTI6ImAiLDIxOToiWyIsMjIwOiJcXCIsMjIxOiJdIiwyMjI6IiciLDIyOToicSJ9LG89ezQ4OiIpIiw0OToiISIsNTA6IkAiLDUxOiIjIiw1MjoiJCIsNTM6IiUiLDU0OiJeIiw1NToiJiIsNTY6IioiLDU3OiIoIiw1OToiOiIsNjE6IisiLDE3MzoiXyIsMTg2OiI6IiwxODc6IisiLDE4ODoiPCIsMTg5OiJfIiwxOTA6Ij4iLDE5MToiPyIsMTkyOiJ+IiwyMTk6InsiLDIyMDoifCIsMjIxOiJ9IiwyMjI6JyInLDIyOToiUSJ9LGk9InVuZGVmaW5lZCIhPXR5cGVvZiBuYXZpZ2F0b3ImJi9DaHJvbWVcLyhcZCspLy5leGVjKG5hdmlnYXRvci51c2VyQWdlbnQpLHM9InVuZGVmaW5lZCIhPXR5cGVvZiBuYXZpZ2F0b3ImJi9BcHBsZSBDb21wdXRlci8udGVzdChuYXZpZ2F0b3IudmVuZG9yKSxhPSJ1bmRlZmluZWQiIT10eXBlb2YgbmF2aWdhdG9yJiYvR2Vja29cL1xkKy8udGVzdChuYXZpZ2F0b3IudXNlckFnZW50KSxjPSJ1bmRlZmluZWQiIT10eXBlb2YgbmF2aWdhdG9yJiYvTWFjLy50ZXN0KG5hdmlnYXRvci5wbGF0Zm9ybSksdT0idW5kZWZpbmVkIiE9dHlwZW9mIG5hdmlnYXRvciYmL01TSUUgXGR8VHJpZGVudFwvKD86WzctOV18XGR7Mix9KVwuLipydjooXGQrKS8uZXhlYyhuYXZpZ2F0b3IudXNlckFnZW50KSxsPWkmJihjfHwraVsxXTw1Nyl8fGEmJmMsaD0wO2g8MTA7aCsrKXJbNDgraF09cls5NitoXT1TdHJpbmcoaCk7Zm9yKGg9MTtoPD0yNDtoKyspcltoKzExMV09IkYiK2g7Zm9yKGg9NjU7aDw9OTA7aCsrKXJbaF09U3RyaW5nLmZyb21DaGFyQ29kZShoKzMyKSxvW2hdPVN0cmluZy5mcm9tQ2hhckNvZGUoaCk7Zm9yKHZhciBmIGluIHIpby5oYXNPd25Qcm9wZXJ0eShmKXx8KG9bZl09cltmXSk7ZnVuY3Rpb24gcCh0KXt2YXIgZT1sJiYodC5jdHJsS2V5fHx0LmFsdEtleXx8dC5tZXRhS2V5KXx8KHN8fHUpJiZ0LnNoaWZ0S2V5JiZ0LmtleSYmMT09dC5rZXkubGVuZ3RoLG49IWUmJnQua2V5fHwodC5zaGlmdEtleT9vOnIpW3Qua2V5Q29kZV18fHQua2V5fHwiVW5pZGVudGlmaWVkIjtyZXR1cm4iRXNjIj09biYmKG49IkVzY2FwZSIpLCJEZWwiPT1uJiYobj0iRGVsZXRlIiksIkxlZnQiPT1uJiYobj0iQXJyb3dMZWZ0IiksIlVwIj09biYmKG49IkFycm93VXAiKSwiUmlnaHQiPT1uJiYobj0iQXJyb3dSaWdodCIpLCJEb3duIj09biYmKG49IkFycm93RG93biIpLG59fSwiOWVkMyI6ZnVuY3Rpb24odCxlLG4peyJ1c2Ugc3RyaWN0Ijt2YXIgcj1uKCJhZTkzIikuSXRlcmF0b3JQcm90b3R5cGUsbz1uKCI3YzczIiksaT1uKCI1YzZjIikscz1uKCJkNDRlIiksYT1uKCIzZjhjIiksYz1mdW5jdGlvbigpe3JldHVybiB0aGlzfTt0LmV4cG9ydHM9ZnVuY3Rpb24odCxlLG4pe3ZhciB1PWUrIiBJdGVyYXRvciI7cmV0dXJuIHQucHJvdG90eXBlPW8ocix7bmV4dDppKDEsbil9KSxzKHQsdSwhMSwhMCksYVt1XT1jLHR9fSwiOWY2MSI6ZnVuY3Rpb24odCxlKXt0LmV4cG9ydHM9e2Z1bmN0aW9uYWw6ITAscmVuZGVyKHQsZSl7Y29uc3R7X2M6bixfdjpyLGRhdGE6byxjaGlsZHJlbjppPVtdfT1lLHtjbGFzczpzLHN0YXRpY0NsYXNzOmEsc3R5bGU6YyxzdGF0aWNTdHlsZTp1LGF0dHJzOmw9e30sLi4uaH09bztyZXR1cm4gbigic3ZnIix7Y2xhc3M6W3MsYV0sc3R5bGU6W2MsdV0sYXR0cnM6T2JqZWN0LmFzc2lnbih7eG1sbnM6Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIix2aWV3Qm94OiIwIDAgMjQgMjQifSxsKSwuLi5ofSxpLmNvbmNhdChbbigiY2lyY2xlIix7YXR0cnM6e2N4OiI5Ljc1IixjeToiNi4yNDciLHI6IjIuMjUifX0pLG4oInBhdGgiLHthdHRyczp7ZDoiTTE2LjkxNiA4LjcxQTEuMDI3IDEuMDI3IDAgMDAxNiA4LjE1OGExLjAwNyAxLjAwNyAwIDAwLS44OTIuNTg2bC0xLjU1OCAzLjQzNGEuMjQ5LjI0OSAwIDAxLS40MjIuMDUzbC0uODItMS4wMjRhMSAxIDAgMDAtLjgxMy0uMzc2IDEuMDA3IDEuMDA3IDAgMDAtLjc4Ny40MjZMNy41OSAxNS43MWEuNS41IDAgMDAuNDEuNzloMTJhLjUuNSAwIDAwLjQyNS0uMjM3LjUuNSAwIDAwLjAyMi0uNDg2eiJ9fSksbigicGF0aCIse2F0dHJzOntkOiJNMjIgMEg1LjVhMiAyIDAgMDAtMiAydjE2LjVhMiAyIDAgMDAyIDJIMjJhMiAyIDAgMDAyLTJWMmEyIDIgMCAwMC0yLTJ6bS0uMTQ1IDE4LjM1NGEuNS41IDAgMDEtLjM1NC4xNDZINmEuNS41IDAgMDEtLjUtLjVWMi41QS41LjUgMCAwMTYgMmgxNS41YS41LjUgMCAwMS41LjVWMThhLjUuNSAwIDAxLS4xNDUuMzUxeiJ9fSksbigicGF0aCIse2F0dHJzOntkOiJNMTkuNSAyMmgtMTdhLjUuNSAwIDAxLS41LS41di0xN2ExIDEgMCAwMC0yIDBWMjJhMiAyIDAgMDAyIDJoMTcuNWExIDEgMCAwMDAtMnoifX0pXSkpfX19LGE0ZDM6ZnVuY3Rpb24odCxlLG4peyJ1c2Ugc3RyaWN0Ijt2YXIgcj1uKCIyM2U3Iiksbz1uKCJkYTg0IiksaT1uKCJkMDY2Iikscz1uKCJjNDMwIiksYT1uKCI4M2FiIiksYz1uKCI0OTMwIiksdT1uKCJmZGJmIiksbD1uKCJkMDM5IiksaD1uKCI1MTM1IiksZj1uKCJlOGI1IikscD1uKCI4NjFkIiksZD1uKCI4MjVhIiksdj1uKCI3YjBiIiksbT1uKCJmYzZhIiksZz1uKCJjMDRlIikseT1uKCI1YzZjIiksdz1uKCI3YzczIiksYj1uKCJkZjc1IikseD1uKCIyNDFjIiksaz1uKCIwNTdmIiksUz1uKCI3NDE4IiksQz1uKCIwNmNmIiksTz1uKCI5YmYyIiksTT1uKCJkMWU3IiksTj1uKCI5MTEyIiksVD1uKCI2ZWViIiksQT1uKCI1NjkyIiksRT1uKCJmNzcyIiksRD1uKCJkMDEyIiksUj1uKCI5MGUzIiksej1uKCJiNjIyIiksUD1uKCJlNTM4IiksST1uKCI3NDZmIiksQj1uKCJkNDRlIiksXz1uKCI2OWYzIiksRj1uKCJiNzI3IikuZm9yRWFjaCxqPUUoImhpZGRlbiIpLCQ9IlN5bWJvbCIsVj0icHJvdG90eXBlIixMPXooInRvUHJpbWl0aXZlIikscT1fLnNldCxKPV8uZ2V0dGVyRm9yKCQpLFc9T2JqZWN0W1ZdLEg9by5TeW1ib2wsSz1pKCJKU09OIiwic3RyaW5naWZ5IiksVT1DLmYsRz1PLmYsWD1rLmYsWT1NLmYsWj1BKCJzeW1ib2xzIiksUT1BKCJvcC1zeW1ib2xzIiksdHQ9QSgic3RyaW5nLXRvLXN5bWJvbC1yZWdpc3RyeSIpLGV0PUEoInN5bWJvbC10by1zdHJpbmctcmVnaXN0cnkiKSxudD1BKCJ3a3MiKSxydD1vLlFPYmplY3Qsb3Q9IXJ0fHwhcnRbVl18fCFydFtWXS5maW5kQ2hpbGQsaXQ9YSYmbCgoZnVuY3Rpb24oKXtyZXR1cm4gNyE9dyhHKHt9LCJhIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIEcodGhpcywiYSIse3ZhbHVlOjd9KS5hfX0pKS5hfSkpP2Z1bmN0aW9uKHQsZSxuKXt2YXIgcj1VKFcsZSk7ciYmZGVsZXRlIFdbZV0sRyh0LGUsbiksciYmdCE9PVcmJkcoVyxlLHIpfTpHLHN0PWZ1bmN0aW9uKHQsZSl7dmFyIG49Wlt0XT13KEhbVl0pO3JldHVybiBxKG4se3R5cGU6JCx0YWc6dCxkZXNjcmlwdGlvbjplfSksYXx8KG4uZGVzY3JpcHRpb249ZSksbn0sYXQ9dT9mdW5jdGlvbih0KXtyZXR1cm4ic3ltYm9sIj09dHlwZW9mIHR9OmZ1bmN0aW9uKHQpe3JldHVybiBPYmplY3QodClpbnN0YW5jZW9mIEh9LGN0PWZ1bmN0aW9uKHQsZSxuKXt0PT09VyYmY3QoUSxlLG4pLGQodCk7dmFyIHI9ZyhlLCEwKTtyZXR1cm4gZChuKSxoKFoscik/KG4uZW51bWVyYWJsZT8oaCh0LGopJiZ0W2pdW3JdJiYodFtqXVtyXT0hMSksbj13KG4se2VudW1lcmFibGU6eSgwLCExKX0pKTooaCh0LGopfHxHKHQsaix5KDEse30pKSx0W2pdW3JdPSEwKSxpdCh0LHIsbikpOkcodCxyLG4pfSx1dD1mdW5jdGlvbih0LGUpe2QodCk7dmFyIG49bShlKSxyPWIobikuY29uY2F0KGR0KG4pKTtyZXR1cm4gRihyLChmdW5jdGlvbihlKXthJiYhaHQuY2FsbChuLGUpfHxjdCh0LGUsbltlXSl9KSksdH0sbHQ9ZnVuY3Rpb24odCxlKXtyZXR1cm4gdm9pZCAwPT09ZT93KHQpOnV0KHcodCksZSl9LGh0PWZ1bmN0aW9uKHQpe3ZhciBlPWcodCwhMCksbj1ZLmNhbGwodGhpcyxlKTtyZXR1cm4hKHRoaXM9PT1XJiZoKFosZSkmJiFoKFEsZSkpJiYoIShufHwhaCh0aGlzLGUpfHwhaChaLGUpfHxoKHRoaXMsaikmJnRoaXNbal1bZV0pfHxuKX0sZnQ9ZnVuY3Rpb24odCxlKXt2YXIgbj1tKHQpLHI9ZyhlLCEwKTtpZihuIT09V3x8IWgoWixyKXx8aChRLHIpKXt2YXIgbz1VKG4scik7cmV0dXJuIW98fCFoKFoscil8fGgobixqKSYmbltqXVtyXXx8KG8uZW51bWVyYWJsZT0hMCksb319LHB0PWZ1bmN0aW9uKHQpe3ZhciBlPVgobSh0KSksbj1bXTtyZXR1cm4gRihlLChmdW5jdGlvbih0KXtoKFosdCl8fGgoRCx0KXx8bi5wdXNoKHQpfSkpLG59LGR0PWZ1bmN0aW9uKHQpe3ZhciBlPXQ9PT1XLG49WChlP1E6bSh0KSkscj1bXTtyZXR1cm4gRihuLChmdW5jdGlvbih0KXshaChaLHQpfHxlJiYhaChXLHQpfHxyLnB1c2goWlt0XSl9KSkscn07aWYoY3x8KEg9ZnVuY3Rpb24oKXtpZih0aGlzIGluc3RhbmNlb2YgSCl0aHJvdyBUeXBlRXJyb3IoIlN5bWJvbCBpcyBub3QgYSBjb25zdHJ1Y3RvciIpO3ZhciB0PWFyZ3VtZW50cy5sZW5ndGgmJnZvaWQgMCE9PWFyZ3VtZW50c1swXT9TdHJpbmcoYXJndW1lbnRzWzBdKTp2b2lkIDAsZT1SKHQpLG49ZnVuY3Rpb24odCl7dGhpcz09PVcmJm4uY2FsbChRLHQpLGgodGhpcyxqKSYmaCh0aGlzW2pdLGUpJiYodGhpc1tqXVtlXT0hMSksaXQodGhpcyxlLHkoMSx0KSl9O3JldHVybiBhJiZvdCYmaXQoVyxlLHtjb25maWd1cmFibGU6ITAsc2V0Om59KSxzdChlLHQpfSxUKEhbVl0sInRvU3RyaW5nIiwoZnVuY3Rpb24oKXtyZXR1cm4gSih0aGlzKS50YWd9KSksVChILCJ3aXRob3V0U2V0dGVyIiwoZnVuY3Rpb24odCl7cmV0dXJuIHN0KFIodCksdCl9KSksTS5mPWh0LE8uZj1jdCxDLmY9ZnQseC5mPWsuZj1wdCxTLmY9ZHQsUC5mPWZ1bmN0aW9uKHQpe3JldHVybiBzdCh6KHQpLHQpfSxhJiYoRyhIW1ZdLCJkZXNjcmlwdGlvbiIse2NvbmZpZ3VyYWJsZTohMCxnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gSih0aGlzKS5kZXNjcmlwdGlvbn19KSxzfHxUKFcsInByb3BlcnR5SXNFbnVtZXJhYmxlIixodCx7dW5zYWZlOiEwfSkpKSxyKHtnbG9iYWw6ITAsd3JhcDohMCxmb3JjZWQ6IWMsc2hhbTohY30se1N5bWJvbDpIfSksRihiKG50KSwoZnVuY3Rpb24odCl7SSh0KX0pKSxyKHt0YXJnZXQ6JCxzdGF0OiEwLGZvcmNlZDohY30se2ZvcjpmdW5jdGlvbih0KXt2YXIgZT1TdHJpbmcodCk7aWYoaCh0dCxlKSlyZXR1cm4gdHRbZV07dmFyIG49SChlKTtyZXR1cm4gdHRbZV09bixldFtuXT1lLG59LGtleUZvcjpmdW5jdGlvbih0KXtpZighYXQodCkpdGhyb3cgVHlwZUVycm9yKHQrIiBpcyBub3QgYSBzeW1ib2wiKTtpZihoKGV0LHQpKXJldHVybiBldFt0XX0sdXNlU2V0dGVyOmZ1bmN0aW9uKCl7b3Q9ITB9LHVzZVNpbXBsZTpmdW5jdGlvbigpe290PSExfX0pLHIoe3RhcmdldDoiT2JqZWN0IixzdGF0OiEwLGZvcmNlZDohYyxzaGFtOiFhfSx7Y3JlYXRlOmx0LGRlZmluZVByb3BlcnR5OmN0LGRlZmluZVByb3BlcnRpZXM6dXQsZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yOmZ0fSkscih7dGFyZ2V0OiJPYmplY3QiLHN0YXQ6ITAsZm9yY2VkOiFjfSx7Z2V0T3duUHJvcGVydHlOYW1lczpwdCxnZXRPd25Qcm9wZXJ0eVN5bWJvbHM6ZHR9KSxyKHt0YXJnZXQ6Ik9iamVjdCIsc3RhdDohMCxmb3JjZWQ6bCgoZnVuY3Rpb24oKXtTLmYoMSl9KSl9LHtnZXRPd25Qcm9wZXJ0eVN5bWJvbHM6ZnVuY3Rpb24odCl7cmV0dXJuIFMuZih2KHQpKX19KSxLKXt2YXIgdnQ9IWN8fGwoKGZ1bmN0aW9uKCl7dmFyIHQ9SCgpO3JldHVybiJbbnVsbF0iIT1LKFt0XSl8fCJ7fSIhPUsoe2E6dH0pfHwie30iIT1LKE9iamVjdCh0KSl9KSk7cih7dGFyZ2V0OiJKU09OIixzdGF0OiEwLGZvcmNlZDp2dH0se3N0cmluZ2lmeTpmdW5jdGlvbih0LGUsbil7dmFyIHIsbz1bdF0saT0xO3doaWxlKGFyZ3VtZW50cy5sZW5ndGg+aSlvLnB1c2goYXJndW1lbnRzW2krK10pO2lmKHI9ZSwocChlKXx8dm9pZCAwIT09dCkmJiFhdCh0KSlyZXR1cm4gZihlKXx8KGU9ZnVuY3Rpb24odCxlKXtpZigiZnVuY3Rpb24iPT10eXBlb2YgciYmKGU9ci5jYWxsKHRoaXMsdCxlKSksIWF0KGUpKXJldHVybiBlfSksb1sxXT1lLEsuYXBwbHkobnVsbCxvKX19KX1IW1ZdW0xdfHxOKEhbVl0sTCxIW1ZdLnZhbHVlT2YpLEIoSCwkKSxEW2pdPSEwfSxhNjMwOmZ1bmN0aW9uKHQsZSxuKXt2YXIgcj1uKCIyM2U3Iiksbz1uKCI0ZGY0IiksaT1uKCIxYzdlIikscz0haSgoZnVuY3Rpb24odCl7QXJyYXkuZnJvbSh0KX0pKTtyKHt0YXJnZXQ6IkFycmF5IixzdGF0OiEwLGZvcmNlZDpzfSx7ZnJvbTpvfSl9LGE2OTE6ZnVuY3Rpb24odCxlKXt2YXIgbj1NYXRoLmNlaWwscj1NYXRoLmZsb29yO3QuZXhwb3J0cz1mdW5jdGlvbih0KXtyZXR1cm4gaXNOYU4odD0rdCk/MDoodD4wP3I6bikodCl9fSxhNzA3OmZ1bmN0aW9uKHQsZSl7dC5leHBvcnRzPXtmdW5jdGlvbmFsOiEwLHJlbmRlcih0LGUpe2NvbnN0e19jOm4sX3Y6cixkYXRhOm8sY2hpbGRyZW46aT1bXX09ZSx7Y2xhc3M6cyxzdGF0aWNDbGFzczphLHN0eWxlOmMsc3RhdGljU3R5bGU6dSxhdHRyczpsPXt9LC4uLmh9PW87cmV0dXJuIG4oInN2ZyIse2NsYXNzOltzLGFdLHN0eWxlOltjLHVdLGF0dHJzOk9iamVjdC5hc3NpZ24oe3htbG5zOiJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIsdmlld0JveDoiMCAwIDI0IDI0In0sbCksLi4uaH0saS5jb25jYXQoW24oInBhdGgiLHthdHRyczp7ZDoiTTIwLjQ4NSAzLjUxMUExMi4wMSAxMi4wMSAwIDEwMjQgMTJhMTIuMDA5IDEyLjAwOSAwIDAwLTMuNTE1LTguNDg5em0tMS43NjcgMTUuMjFBOS41MSA5LjUxIDAgMTEyMS41IDEyYTkuNTA4IDkuNTA4IDAgMDEtMi43ODIgNi43MjF6In19KSxuKCJwYXRoIix7YXR0cnM6e2Q6Ik0xNi45ODcgNy4wMWExLjI3NSAxLjI3NSAwIDAwLTEuOCAwbC0zLjE3NyAzLjE3N0w4LjgyOSA3LjAxYTEuMjc3IDEuMjc3IDAgMDAtMS44MDUgMS44MDZsMy4xNzYgMy4xNzctMy4xNzYgMy4xNzhhMS4yNzcgMS4yNzcgMCAwMDEuODA1IDEuODA2bDMuMTc2LTMuMTc3IDMuMTc3IDMuMTc4YTEuMjc3IDEuMjc3IDAgMDAxLjgtMS44MDZsLTMuMTc2LTMuMTc4IDMuMTc2LTMuMTc3YTEuMjc4IDEuMjc4IDAgMDAuMDA1LTEuODA3eiJ9fSldKSl9fX0sYTcwZDpmdW5jdGlvbih0LGUpe3QuZXhwb3J0cz17ZnVuY3Rpb25hbDohMCxyZW5kZXIodCxlKXtjb25zdHtfYzpuLF92OnIsZGF0YTpvLGNoaWxkcmVuOmk9W119PWUse2NsYXNzOnMsc3RhdGljQ2xhc3M6YSxzdHlsZTpjLHN0YXRpY1N0eWxlOnUsYXR0cnM6bD17fSwuLi5ofT1vO3JldHVybiBuKCJzdmciLHtjbGFzczpbcyxhXSxzdHlsZTpbYyx1XSxhdHRyczpPYmplY3QuYXNzaWduKHt4bWxuczoiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciLHZpZXdCb3g6IjAgMCA0NzQuNTU3IDQ3NC41NTciLHdpZHRoOiIyNCIsaGVpZ2h0OiIyNCJ9LGwpLC4uLmh9LGkuY29uY2F0KFtuKCJwYXRoIix7YXR0cnM6e2Q6Ik0wIDIuMDI4VjQ3Mi41M2g0NzQuNTU3VjIuMDI4SDB6bTQzNS40NzEgNDMxLjQzN0gzOS4xMDhWNDEuMTM2aDM5Ni4zNjN2MzkyLjMyOXoifX0pLG4oInBhdGgiLHthdHRyczp7ZDoiTTEyNC45MTYgMjczLjYyNWMxLjI5NCA0LjUzIDIuMDA2IDE0LjQwOSAyLjAwNiAyOS41NzQgMCAxMy4wMDcuNjY5IDIyLjU2MyAyLjA3MSAyOC42MjQgMS40MDIgNi4wMTggNC4xNDIgMTEuMTc0IDguMjQgMTUuMjcyIDQuMDc3IDQuMDk4IDkuMDgxIDcuMDc1IDE1LjAxMyA4Ljg2NiA1Ljk1NCAxLjc2OSAxNC40OTYgMi42NTMgMjUuNjA1IDIuNjUzaDYuNTc5di0yOS42NmMtOC44NjYgMC0xNC42MjUtLjU2MS0xNy4zLTEuNjgyLTIuNjUzLTEuMTQzLTQuNjM4LTIuNzE4LTUuOTU0LTQuODk3LTEuMjk0LTIuMTU3LTEuOTQxLTUuOTEtMS45NDEtMTEuMzI1IDAtMy44NC0uMzQ1LTEyLjU3Ni0uOTkyLTI2LjI5NS0uNDk2LTguOTczLTEuNTc1LTE2LjEzNS0zLjIzNi0yMS40ODQtMS42MzktNS4zOTMtNC4wMTItOS45NDQtNy4xMTgtMTMuNjk3LTMuMDg1LTMuNzc1LTcuMDU0LTcuMDMyLTExLjkwNy05LjgxNSA1LjUwMS0zLjU4MSA5LjU3Ny02Ljk2NyAxMi4yNzQtMTAuMzExIDIuNjc1LTMuMjU3IDQuODc1LTcuNDQyIDYuNjAxLTEyLjUxMSAxLjcwNC01LjA2OSAyLjc4My0xMS42OTEgMy4yMTQtMTkuODQ1LjczMy0xNC40NTIgMS4xNDMtMjQuMjg5IDEuMTQzLTI5LjQ4NyAwLTUuMDkxLjYyNi04LjcxNSAxLjg1NS0xMC44MDcgMS4yNTEtMi4wNzEgMy4xNDktMy42NDUgNS43MzgtNC43MDIgMi41ODgtMS4wMTQgOC40NzctMS41MzIgMTcuNjIzLTEuNTMydi0yOS41MDloLTYuNTc5Yy0xMC44MDcgMC0xOC43MjMuNzU1LTIzLjcyOCAyLjI0My03LjQyIDIuMjIyLTEzLjA3MiA1LjI0Mi0xNi45NzYgOS4wNi0zLjg4MyAzLjg0LTYuNTU4IDguOTA5LTguMDQ2IDE1LjIyOS0xLjQ2NyA2LjI3Ny0yLjE3OSAxNy40MjktMi4xNzkgMzMuMzQ4IDAgOS44NTgtLjM2NyAxNi42NzQtMS4wMzUgMjAuNjQzLS44MiA1LjI2My0yLjM1MSA5LjY0Mi00LjU1MSAxMy4xNTgtMi4yNDMgMy41MTYtNC44MzIgNS45OTctNy45MTYgNy40ODUtMy4wMiAxLjQ0NS03LjUyOCAyLjM3My0xMy41NjggMi43Mzl2MjkuNjgxYzcuNTkzLjM4OCAxMy4yMDEgMi4wMjggMTYuODkgNC44OTcgMy42NDUgMi44MDYgNi4zODQgNy40ODcgOC4xNzQgMTQuMDg3ek0yMTIuMDg0IDMzMS4zOTJsNi43MyAxNC4zNjZjNy40Mi0yLjY1MyAxMy41NjgtNi4zMiAxOC40LTEwLjkxNSA0LjgzMi00LjU5NSA4LjA4OS05LjgxNSA5LjgxNS0xNS42MTcgMS43NDctNS44NDYgMi42MS0xMy44MDUgMi42MS0yMy44MTR2LTI0Ljc4NWgtMzQuNzUxdjM0LjcyOWgxNi43NjFjLS4xMjkgNi44MzgtMS43MjYgMTIuMjk1LTQuNjU5IDE2LjQ4LTIuOTU2IDQuMDM0LTcuOTM5IDcuMjY5LTE0LjkwNiA5LjU1NnpNMjE0Ljg4OCAxNzQuMDEyaDM0Ljc1MXYzNC43NzJoLTM0Ljc1MXpNMzExLjE4IDM1Ni4zNDljNy40NjQtMi4yNDMgMTMuMjAxLTUuMjIgMTcuMTA2LTkuMDgxIDMuODgzLTMuODE4IDYuNTM2LTguOTMgNy45MzgtMTUuMjcyIDEuNDAyLTYuMzYzIDIuMTc5LTE3LjUxNSAyLjE3OS0zMy40OTkgMC05Ljc1LjM2Ny0xNi42MDkgMS4wMTQtMjAuNTU3Ljg4NC01LjI2MyAyLjQzOC05LjY0MiA0LjY1OS0xMy4xMzcgMi4xNzktMy40OTQgNC43NjctNi4wMTggNy44MDktNy40ODUgMy4wNDItMS40NjcgNy41NS0yLjM3MyAxMy41NjgtMi42OTZoLS4wNDN2LTI5LjY2Yy03LjYxNS0uNDUzLTEzLjE4LTIuMDcxLTE2LjkzMy00LjkxOC0zLjY2Ny0yLjgyNi02LjQwNy03LjU3MS04LjI2Mi0xNC4xMDctMS4yNTEtNC42MTYtMS44NTUtMTQuNDUyLTEuODU1LTI5LjUwOSAwLTEzLjAyOS0uNzEyLTIyLjU0MS0yLjE1Ny0yOC41Ni0xLjQyNC02LjEwNS00LjE2My0xMS4xOTUtOC4xOTctMTUuMzU4LTQuMDU1LTQuMTQyLTkuMDM4LTcuMDU0LTE0Ljk3LTguODAxLTUuOTc1LTEuNzI2LTE0LjUxNy0yLjYxLTI1LjYyNi0yLjYxaC02LjU1N3YyOS40NjZjOS4zNCAwIDE1LjMzNy41NjEgMTcuOTkgMS42ODMgMi42OTYgMS4xIDQuNTUxIDIuNjc1IDUuNTY1IDQuNzI0IDEuMDU3IDIuMDQ5IDEuNTUzIDYuMTY5IDEuNjM5IDEyLjM2LjQ1MyAxOS42MDggMS4xODYgMzIuMjkxIDIuMDcxIDM4LjA3MiAxLjM4MSA4LjM2OSA0LjA1NSAxNS4yOTQgNy44NzMgMjAuNjg2IDIuODI2IDMuODQgNy4yNDggNy42NTggMTMuMzUyIDExLjYyNy00LjcwMiAyLjY5Ni04LjUyIDUuODQ2LTExLjU0IDkuNDQ4LTMuMDQxIDMuNTU5LTUuNDM2IDcuOTYtNy4yMDUgMTMuMDcyLTEuODEyIDUuMTc3LTIuOTU1IDEyLjA4LTMuMzIyIDIwLjYtLjY2OSAxNC4xNzItMS4xIDIzLjgxNC0xLjEgMjguODE5LS4wODYgNS4wMjYtLjY2OSA4LjU4NS0xLjk4NCAxMC42OTktMS4zMTYgMi4xMzYtMy4yNzkgMy43MS01Ljk3NSA0Ljg1My0yLjcxOCAxLjEyMi04LjUyIDEuNjM5LTE3LjM2NCAxLjYzOXYyOS42Nmg2LjYyMmMxMC43NDEuMDY0IDE4LjY3OS0uNzEyIDIzLjcwNS0yLjE1OHoifX0pXSkpfX19LGFjNGU6ZnVuY3Rpb24odCxlKXt0LmV4cG9ydHM9e2Z1bmN0aW9uYWw6ITAscmVuZGVyKHQsZSl7Y29uc3R7X2M6bixfdjpyLGRhdGE6byxjaGlsZHJlbjppPVtdfT1lLHtjbGFzczpzLHN0YXRpY0NsYXNzOmEsc3R5bGU6YyxzdGF0aWNTdHlsZTp1LGF0dHJzOmw9e30sLi4uaH09bztyZXR1cm4gbigic3ZnIix7Y2xhc3M6W3MsYV0sc3R5bGU6W2MsdV0sYXR0cnM6T2JqZWN0LmFzc2lnbih7eG1sbnM6Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIix2aWV3Qm94OiIwIDAgMjQgMjQifSxsKSwuLi5ofSxpLmNvbmNhdChbbigicGF0aCIse2F0dHJzOntkOiJNMiAxOWEzIDMgMCAwMDMgM2gxNGEzIDMgMCAwMDMtM1Y1YTMgMyAwIDAwLTMtM0g1YTMgMyAwIDAwLTMgM3YxNHptLTIgMFY1YTUgNSAwIDAxNS01aDE0YTUgNSAwIDAxNSA1djE0YTUgNSAwIDAxLTUgNUg1YTUgNSAwIDAxLTUtNXptMTItOWExIDEgMCAwMTEgMXYyYTEgMSAwIDAxLTIgMHYtMmExIDEgMCAwMTEtMXptMCA2YTEgMSAwIDAxMSAxdjNhMSAxIDAgMDEtMiAwdi0zYTEgMSAwIDAxMS0xem0wLTEzYTEgMSAwIDAxMSAxdjNhMSAxIDAgMDEtMiAwVjRhMSAxIDAgMDExLTF6In19KV0pKX19fSxhZDZkOmZ1bmN0aW9uKHQsZSxuKXsidXNlIHN0cmljdCI7dmFyIHI9bigiODI1YSIpO3QuZXhwb3J0cz1mdW5jdGlvbigpe3ZhciB0PXIodGhpcyksZT0iIjtyZXR1cm4gdC5nbG9iYWwmJihlKz0iZyIpLHQuaWdub3JlQ2FzZSYmKGUrPSJpIiksdC5tdWx0aWxpbmUmJihlKz0ibSIpLHQuZG90QWxsJiYoZSs9InMiKSx0LnVuaWNvZGUmJihlKz0idSIpLHQuc3RpY2t5JiYoZSs9InkiKSxlfX0sYWQ2ZTpmdW5jdGlvbih0LGUpe3QuZXhwb3J0cz17ZnVuY3Rpb25hbDohMCxyZW5kZXIodCxlKXtjb25zdHtfYzpuLF92OnIsZGF0YTpvLGNoaWxkcmVuOmk9W119PWUse2NsYXNzOnMsc3RhdGljQ2xhc3M6YSxzdHlsZTpjLHN0YXRpY1N0eWxlOnUsYXR0cnM6bD17fSwuLi5ofT1vO3JldHVybiBuKCJzdmciLHtjbGFzczpbcyxhXSxzdHlsZTpbYyx1XSxhdHRyczpPYmplY3QuYXNzaWduKHt4bWxuczoiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciLHZpZXdCb3g6IjAgMCAyNCAyNCJ9LGwpLC4uLmh9LGkuY29uY2F0KFtuKCJwYXRoIix7YXR0cnM6e2Q6Ik0xMi42NDEgMjEuOTMxYTcuMDEgNy4wMSAwIDAwMS4xNDYgMS43NEE1IDUgMCAwMTcgMTlWNWE1IDUgMCAxMTEwIDB2Ny4yOWE2Ljk3MiA2Ljk3MiAwIDAwLTIgLjk2NVY1YTMgMyAwIDAwLTYgMHYxNGEzIDMgMCAwMDMuNjQxIDIuOTMxek0xOSAxNGE1IDUgMCAxMTAgMTAgNSA1IDAgMDEwLTEwem0tMi41IDUuOTM4aDVhLjkzNy45MzcgMCAxMDAtMS44NzVoLTVhLjkzNy45MzcgMCAxMDAgMS44NzV6In19KV0pKX19fSxhZTQwOmZ1bmN0aW9uKHQsZSxuKXt2YXIgcj1uKCI4M2FiIiksbz1uKCJkMDM5IiksaT1uKCI1MTM1Iikscz1PYmplY3QuZGVmaW5lUHJvcGVydHksYT17fSxjPWZ1bmN0aW9uKHQpe3Rocm93IHR9O3QuZXhwb3J0cz1mdW5jdGlvbih0LGUpe2lmKGkoYSx0KSlyZXR1cm4gYVt0XTtlfHwoZT17fSk7dmFyIG49W11bdF0sdT0hIWkoZSwiQUNDRVNTT1JTIikmJmUuQUNDRVNTT1JTLGw9aShlLDApP2VbMF06YyxoPWkoZSwxKT9lWzFdOnZvaWQgMDtyZXR1cm4gYVt0XT0hIW4mJiFvKChmdW5jdGlvbigpe2lmKHUmJiFyKXJldHVybiEwO3ZhciB0PXtsZW5ndGg6LTF9O3U/cyh0LDEse2VudW1lcmFibGU6ITAsZ2V0OmN9KTp0WzFdPTEsbi5jYWxsKHQsbCxoKX0pKX19LGFlOTM6ZnVuY3Rpb24odCxlLG4peyJ1c2Ugc3RyaWN0Ijt2YXIgcixvLGkscz1uKCJlMTYzIiksYT1uKCI5MTEyIiksYz1uKCI1MTM1IiksdT1uKCJiNjIyIiksbD1uKCJjNDMwIiksaD11KCJpdGVyYXRvciIpLGY9ITEscD1mdW5jdGlvbigpe3JldHVybiB0aGlzfTtbXS5rZXlzJiYoaT1bXS5rZXlzKCksIm5leHQiaW4gaT8obz1zKHMoaSkpLG8hPT1PYmplY3QucHJvdG90eXBlJiYocj1vKSk6Zj0hMCksdm9pZCAwPT1yJiYocj17fSksbHx8YyhyLGgpfHxhKHIsaCxwKSx0LmV4cG9ydHM9e0l0ZXJhdG9yUHJvdG90eXBlOnIsQlVHR1lfU0FGQVJJX0lURVJBVE9SUzpmfX0sYWVjMjpmdW5jdGlvbih0LGUpe3QuZXhwb3J0cz17ZnVuY3Rpb25hbDohMCxyZW5kZXIodCxlKXtjb25zdHtfYzpuLF92OnIsZGF0YTpvLGNoaWxkcmVuOmk9W119PWUse2NsYXNzOnMsc3RhdGljQ2xhc3M6YSxzdHlsZTpjLHN0YXRpY1N0eWxlOnUsYXR0cnM6bD17fSwuLi5ofT1vO3JldHVybiBuKCJzdmciLHtjbGFzczpbcyxhXSxzdHlsZTpbYyx1XSxhdHRyczpPYmplY3QuYXNzaWduKHt4bWxuczoiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciLHZpZXdCb3g6IjAgMCAyNCAyNCJ9LGwpLC4uLmh9LGkuY29uY2F0KFtuKCJwYXRoIix7YXR0cnM6e2Q6Ik0yMi41LjI0OEg3LjIyOGE2Ljk3NyA2Ljk3NyAwIDEwMCAxMy45NTRoMi4zMThhLjI1LjI1IDAgMDEuMjUuMjVWMjIuNWExLjI1IDEuMjUgMCAwMDIuNSAwVjNhLjI1LjI1IDAgMDEuMjUtLjI1aDMuNjgyYS4yNS4yNSAwIDAxLjI1LjI1djE5LjVhMS4yNSAxLjI1IDAgMDAyLjUgMFYzYS4yNDkuMjQ5IDAgMDEuMjUtLjI1SDIyLjVhMS4yNSAxLjI1IDAgMDAwLTIuNXpNOS44IDExLjQ1MmEuMjUuMjUgMCAwMS0uMjUuMjVINy4yMjhhNC40NzcgNC40NzcgMCAxMTAtOC45NTRoMi4zMThBLjI1LjI1IDAgMDE5LjggM3oifX0pXSkpfX19LGIwNDE6ZnVuY3Rpb24odCxlLG4peyJ1c2Ugc3RyaWN0Ijt2YXIgcj1uKCIwMGVlIiksbz1uKCJmNWRmIik7dC5leHBvcnRzPXI/e30udG9TdHJpbmc6ZnVuY3Rpb24oKXtyZXR1cm4iW29iamVjdCAiK28odGhpcykrIl0ifX0sYjBjMDpmdW5jdGlvbih0LGUsbil7dmFyIHI9bigiODNhYiIpLG89bigiOWJmMiIpLmYsaT1GdW5jdGlvbi5wcm90b3R5cGUscz1pLnRvU3RyaW5nLGE9L15ccypmdW5jdGlvbiAoW14gKF0qKS8sYz0ibmFtZSI7ciYmIShjIGluIGkpJiZvKGksYyx7Y29uZmlndXJhYmxlOiEwLGdldDpmdW5jdGlvbigpe3RyeXtyZXR1cm4gcy5jYWxsKHRoaXMpLm1hdGNoKGEpWzFdfWNhdGNoKHQpe3JldHVybiIifX19KX0sYjYyMjpmdW5jdGlvbih0LGUsbil7dmFyIHI9bigiZGE4NCIpLG89bigiNTY5MiIpLGk9bigiNTEzNSIpLHM9bigiOTBlMyIpLGE9bigiNDkzMCIpLGM9bigiZmRiZiIpLHU9bygid2tzIiksbD1yLlN5bWJvbCxoPWM/bDpsJiZsLndpdGhvdXRTZXR0ZXJ8fHM7dC5leHBvcnRzPWZ1bmN0aW9uKHQpe3JldHVybiBpKHUsdCl8fChhJiZpKGwsdCk/dVt0XT1sW3RdOnVbdF09aCgiU3ltYm9sLiIrdCkpLHVbdF19fSxiNzI3OmZ1bmN0aW9uKHQsZSxuKXt2YXIgcj1uKCIwMzY2Iiksbz1uKCI0NGFkIiksaT1uKCI3YjBiIikscz1uKCI1MGM0IiksYT1uKCI2NWYwIiksYz1bXS5wdXNoLHU9ZnVuY3Rpb24odCl7dmFyIGU9MT09dCxuPTI9PXQsdT0zPT10LGw9ND09dCxoPTY9PXQsZj01PT10fHxoO3JldHVybiBmdW5jdGlvbihwLGQsdixtKXtmb3IodmFyIGcseSx3PWkocCksYj1vKHcpLHg9cihkLHYsMyksaz1zKGIubGVuZ3RoKSxTPTAsQz1tfHxhLE89ZT9DKHAsayk6bj9DKHAsMCk6dm9pZCAwO2s+UztTKyspaWYoKGZ8fFMgaW4gYikmJihnPWJbU10seT14KGcsUyx3KSx0KSlpZihlKU9bU109eTtlbHNlIGlmKHkpc3dpdGNoKHQpe2Nhc2UgMzpyZXR1cm4hMDtjYXNlIDU6cmV0dXJuIGc7Y2FzZSA2OnJldHVybiBTO2Nhc2UgMjpjLmNhbGwoTyxnKX1lbHNlIGlmKGwpcmV0dXJuITE7cmV0dXJuIGg/LTE6dXx8bD9sOk99fTt0LmV4cG9ydHM9e2ZvckVhY2g6dSgwKSxtYXA6dSgxKSxmaWx0ZXI6dSgyKSxzb21lOnUoMyksZXZlcnk6dSg0KSxmaW5kOnUoNSksZmluZEluZGV4OnUoNil9fSxjMDRlOmZ1bmN0aW9uKHQsZSxuKXt2YXIgcj1uKCI4NjFkIik7dC5leHBvcnRzPWZ1bmN0aW9uKHQsZSl7aWYoIXIodCkpcmV0dXJuIHQ7dmFyIG4sbztpZihlJiYiZnVuY3Rpb24iPT10eXBlb2Yobj10LnRvU3RyaW5nKSYmIXIobz1uLmNhbGwodCkpKXJldHVybiBvO2lmKCJmdW5jdGlvbiI9PXR5cGVvZihuPXQudmFsdWVPZikmJiFyKG89bi5jYWxsKHQpKSlyZXR1cm4gbztpZighZSYmImZ1bmN0aW9uIj09dHlwZW9mKG49dC50b1N0cmluZykmJiFyKG89bi5jYWxsKHQpKSlyZXR1cm4gbzt0aHJvdyBUeXBlRXJyb3IoIkNhbid0IGNvbnZlcnQgb2JqZWN0IHRvIHByaW1pdGl2ZSB2YWx1ZSIpfX0sYzQzMDpmdW5jdGlvbih0LGUpe3QuZXhwb3J0cz0hMX0sYzZiNjpmdW5jdGlvbih0LGUpe3ZhciBuPXt9LnRvU3RyaW5nO3QuZXhwb3J0cz1mdW5jdGlvbih0KXtyZXR1cm4gbi5jYWxsKHQpLnNsaWNlKDgsLTEpfX0sYzZjZDpmdW5jdGlvbih0LGUsbil7dmFyIHI9bigiZGE4NCIpLG89bigiY2U0ZSIpLGk9Il9fY29yZS1qc19zaGFyZWRfXyIscz1yW2ldfHxvKGkse30pO3QuZXhwb3J0cz1zfSxjNmVlOmZ1bmN0aW9uKHQsZSl7dC5leHBvcnRzPXtmdW5jdGlvbmFsOiEwLHJlbmRlcih0LGUpe2NvbnN0e19jOm4sX3Y6cixkYXRhOm8sY2hpbGRyZW46aT1bXX09ZSx7Y2xhc3M6cyxzdGF0aWNDbGFzczphLHN0eWxlOmMsc3RhdGljU3R5bGU6dSxhdHRyczpsPXt9LC4uLmh9PW87cmV0dXJuIG4oInN2ZyIse2NsYXNzOltzLGFdLHN0eWxlOltjLHVdLGF0dHJzOk9iamVjdC5hc3NpZ24oe3htbG5zOiJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIsdmlld0JveDoiMCAwIDI0IDI0In0sbCksLi4uaH0saS5jb25jYXQoW24oInBhdGgiLHthdHRyczp7ZDoiTTE5IDE0YTUgNSAwIDExMCAxMCA1IDUgMCAwMTAtMTB6bS0yLjUgNS45MzhoNWEuOTM3LjkzNyAwIDEwMC0xLjg3NWgtNWEuOTM3LjkzNyAwIDEwMCAxLjg3NXpNMTIuMjkgMTdIOXY1aDMuNjc0Yy4zNTYuNzUuODQxIDEuNDI2IDEuNDI3IDJINWE1IDUgMCAwMS01LTVWNWE1IDUgMCAwMTUtNWgxNGE1IDUgMCAwMTUgNXYyLjgyM2EuODQzLjg0MyAwIDAxMCAuMzU0VjE0LjFhNy4wMTggNy4wMTggMCAwMC0yLTEuNDI3VjloLTV2My4yOWE2Ljk3MiA2Ljk3MiAwIDAwLTIgLjk2NVY5SDl2Nmg0LjI1NWE2Ljk3MiA2Ljk3MiAwIDAwLS45NjUgMnpNMTcgN2g1VjVhMyAzIDAgMDAtMy0zaC0ydjV6bS0yIDBWMkg5djVoNnpNNyAySDVhMyAzIDAgMDAtMyAzdjJoNVYyek0yIDl2Nmg1VjlIMnptMCA4djJhMyAzIDAgMDAzIDNoMnYtNUgyeiJ9fSldKSl9fX0sYzhiYTpmdW5jdGlvbih0LGUpe3ZhciBuO249ZnVuY3Rpb24oKXtyZXR1cm4gdGhpc30oKTt0cnl7bj1ufHxuZXcgRnVuY3Rpb24oInJldHVybiB0aGlzIikoKX1jYXRjaChyKXsib2JqZWN0Ij09PXR5cGVvZiB3aW5kb3cmJihuPXdpbmRvdyl9dC5leHBvcnRzPW59LGM5NDM6ZnVuY3Rpb24odCxlKXt0LmV4cG9ydHM9e2Z1bmN0aW9uYWw6ITAscmVuZGVyKHQsZSl7Y29uc3R7X2M6bixfdjpyLGRhdGE6byxjaGlsZHJlbjppPVtdfT1lLHtjbGFzczpzLHN0YXRpY0NsYXNzOmEsc3R5bGU6YyxzdGF0aWNTdHlsZTp1LGF0dHJzOmw9e30sLi4uaH09bztyZXR1cm4gbigic3ZnIix7Y2xhc3M6W3MsYV0sc3R5bGU6W2MsdV0sYXR0cnM6T2JqZWN0LmFzc2lnbih7eG1sbnM6Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIix2aWV3Qm94OiIwIDAgMjQgMjQifSxsKSwuLi5ofSxpLmNvbmNhdChbbigicGF0aCIse2F0dHJzOntkOiJNMTEuOTk5LjVDNS42NDkuNS41IDUuNjQ4LjUgMTJjMCA1LjA4MiAzLjI5NCA5LjM5MiA3Ljg2NSAxMC45MTQuNTc0LjEwMy43NTYtLjIzNi43NTYtLjU0MSAwLS4yNzQuMDA2LTEuMDM3IDAtMS45OTctMy4xOTguNjk0LTMuODYxLTEuNTE1LTMuODYxLTEuNTE1LS41MjMtMS4zMjktMS4yNzUtMS42ODItMS4yNzUtMS42ODItMS4wNDUtLjcxNC4wNzctLjY5OS4wNzctLjY5OSAxLjE1My4wOCAxLjc2MiAxLjE4NCAxLjc2MiAxLjE4NCAxLjAyNiAxLjc1OCAyLjY5MSAxLjI1IDMuMzQ2Ljk1Ni4xMDYtLjc0Mi40MDItMS4yNTEuNzMxLTEuNTM2LTIuNTU0LS4yOTItNS4yMzgtMS4yNzctNS4yMzgtNS42ODYgMC0xLjI1NS40NDgtMi4yODEgMS4xODQtMy4wODYtLjExOC0uMjg5LS41MTQtMS40Ni4xMTItMy4wNDMgMCAwIC45NjctLjMwOSAzLjE2MiAxLjE4YTExLjAxMSAxMS4wMTEgMCAwMTIuODgtLjM4OGMuOTc2LjAwNSAxLjk2LjEzMiAyLjg4LjM4OCAyLjE5NS0xLjQ4OCAzLjE1OS0xLjE4IDMuMTU5LTEuMTguNjI3IDEuNTgzLjIzMiAyLjc1NC4xMTQgMy4wNDMuNzM2LjgwNSAxLjE4MyAxLjgzMSAxLjE4MyAzLjA4NiAwIDQuNDItMi42ODkgNS4zOTEtNS4yNTEgNS42NzQuNDEyLjM1Ny43ODcgMS4wNDcuNzg3IDIuMTJ2My4xODRjMCAuMzA4LjE4Ni42NDcuNzcuNTM2QzIwLjIwOSAyMS4zODkgMjMuNSAxNy4wOCAyMy41IDEyIDIzLjUgNS42NDggMTguMzUyLjUgMTEuOTk5LjV6In19KV0pKX19fSxjYTg0OmZ1bmN0aW9uKHQsZSxuKXt2YXIgcj1uKCI1MTM1Iiksbz1uKCJmYzZhIiksaT1uKCI0ZDY0IikuaW5kZXhPZixzPW4oImQwMTIiKTt0LmV4cG9ydHM9ZnVuY3Rpb24odCxlKXt2YXIgbixhPW8odCksYz0wLHU9W107Zm9yKG4gaW4gYSkhcihzLG4pJiZyKGEsbikmJnUucHVzaChuKTt3aGlsZShlLmxlbmd0aD5jKXIoYSxuPWVbYysrXSkmJih+aSh1LG4pfHx1LnB1c2gobikpO3JldHVybiB1fX0sY2MxMjpmdW5jdGlvbih0LGUsbil7dmFyIHI9bigiZGE4NCIpLG89bigiODYxZCIpLGk9ci5kb2N1bWVudCxzPW8oaSkmJm8oaS5jcmVhdGVFbGVtZW50KTt0LmV4cG9ydHM9ZnVuY3Rpb24odCl7cmV0dXJuIHM/aS5jcmVhdGVFbGVtZW50KHQpOnt9fX0sY2U0ZTpmdW5jdGlvbih0LGUsbil7dmFyIHI9bigiZGE4NCIpLG89bigiOTExMiIpO3QuZXhwb3J0cz1mdW5jdGlvbih0LGUpe3RyeXtvKHIsdCxlKX1jYXRjaChuKXtyW3RdPWV9cmV0dXJuIGV9fSxkMDEyOmZ1bmN0aW9uKHQsZSl7dC5leHBvcnRzPXt9fSxkMDM5OmZ1bmN0aW9uKHQsZSl7dC5leHBvcnRzPWZ1bmN0aW9uKHQpe3RyeXtyZXR1cm4hIXQoKX1jYXRjaChlKXtyZXR1cm4hMH19fSxkMDY2OmZ1bmN0aW9uKHQsZSxuKXt2YXIgcj1uKCI0MjhmIiksbz1uKCJkYTg0IiksaT1mdW5jdGlvbih0KXtyZXR1cm4iZnVuY3Rpb24iPT10eXBlb2YgdD90OnZvaWQgMH07dC5leHBvcnRzPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIGFyZ3VtZW50cy5sZW5ndGg8Mj9pKHJbdF0pfHxpKG9bdF0pOnJbdF0mJnJbdF1bZV18fG9bdF0mJm9bdF1bZV19fSxkMWU3OmZ1bmN0aW9uKHQsZSxuKXsidXNlIHN0cmljdCI7dmFyIHI9e30ucHJvcGVydHlJc0VudW1lcmFibGUsbz1PYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yLGk9byYmIXIuY2FsbCh7MToyfSwxKTtlLmY9aT9mdW5jdGlvbih0KXt2YXIgZT1vKHRoaXMsdCk7cmV0dXJuISFlJiZlLmVudW1lcmFibGV9OnJ9LGQyOGI6ZnVuY3Rpb24odCxlLG4pe3ZhciByPW4oIjc0NmYiKTtyKCJpdGVyYXRvciIpfSxkMmEyOmZ1bmN0aW9uKHQsZSxuKXt2YXIgcixvOyhmdW5jdGlvbihuKXt2YXIgaT0ib2JqZWN0Ij09PXR5cGVvZiB3aW5kb3cmJndpbmRvd3x8Im9iamVjdCI9PT10eXBlb2Ygc2VsZiYmc2VsZjtlLm5vZGVUeXBlP2kmJihpLmhsanM9bih7fSkscj1bXSxvPWZ1bmN0aW9uKCl7cmV0dXJuIGkuaGxqc30uYXBwbHkoZSxyKSx2b2lkIDA9PT1vfHwodC5leHBvcnRzPW8pKTpuKGUpfSkoKGZ1bmN0aW9uKHQpe3ZhciBlLG49W10scj1PYmplY3Qua2V5cyxvPXt9LGk9e30scz0vXihuby0/aGlnaGxpZ2h0fHBsYWlufHRleHQpJC9pLGE9L1xibGFuZyg/OnVhZ2UpPy0oW1x3LV0rKVxiL2ksYz0vKCheKDxbXj5dKz58XHR8KSt8KD86XG4pKSkvZ20sdT0iPC9zcGFuPiIsbD17Y2xhc3NQcmVmaXg6ImhsanMtIix0YWJSZXBsYWNlOm51bGwsdXNlQlI6ITEsbGFuZ3VhZ2VzOnZvaWQgMH0saD0ib2YgYW5kIGZvciBpbiBub3Qgb3IgaWYgdGhlbiIuc3BsaXQoIiAiKTtmdW5jdGlvbiBmKHQpe3JldHVybiB0LnJlcGxhY2UoLyYvZywiJmFtcDsiKS5yZXBsYWNlKC88L2csIiZsdDsiKS5yZXBsYWNlKC8+L2csIiZndDsiKX1mdW5jdGlvbiBwKHQpe3JldHVybiB0Lm5vZGVOYW1lLnRvTG93ZXJDYXNlKCl9ZnVuY3Rpb24gZCh0LGUpe3ZhciBuPXQmJnQuZXhlYyhlKTtyZXR1cm4gbiYmMD09PW4uaW5kZXh9ZnVuY3Rpb24gdih0KXtyZXR1cm4gcy50ZXN0KHQpfWZ1bmN0aW9uIG0odCl7dmFyIGUsbixyLG8saT10LmNsYXNzTmFtZSsiICI7aWYoaSs9dC5wYXJlbnROb2RlP3QucGFyZW50Tm9kZS5jbGFzc05hbWU6IiIsbj1hLmV4ZWMoaSksbilyZXR1cm4gXyhuWzFdKT9uWzFdOiJuby1oaWdobGlnaHQiO2ZvcihpPWkuc3BsaXQoL1xzKy8pLGU9MCxyPWkubGVuZ3RoO2U8cjtlKyspaWYobz1pW2VdLHYobyl8fF8obykpcmV0dXJuIG99ZnVuY3Rpb24gZyh0KXt2YXIgZSxuPXt9LHI9QXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzLDEpO2ZvcihlIGluIHQpbltlXT10W2VdO3JldHVybiByLmZvckVhY2goKGZ1bmN0aW9uKHQpe2ZvcihlIGluIHQpbltlXT10W2VdfSkpLG59ZnVuY3Rpb24geSh0KXt2YXIgZT1bXTtyZXR1cm4gZnVuY3Rpb24gdChuLHIpe2Zvcih2YXIgbz1uLmZpcnN0Q2hpbGQ7bztvPW8ubmV4dFNpYmxpbmcpMz09PW8ubm9kZVR5cGU/cis9by5ub2RlVmFsdWUubGVuZ3RoOjE9PT1vLm5vZGVUeXBlJiYoZS5wdXNoKHtldmVudDoic3RhcnQiLG9mZnNldDpyLG5vZGU6b30pLHI9dChvLHIpLHAobykubWF0Y2goL2JyfGhyfGltZ3xpbnB1dC8pfHxlLnB1c2goe2V2ZW50OiJzdG9wIixvZmZzZXQ6cixub2RlOm99KSk7cmV0dXJuIHJ9KHQsMCksZX1mdW5jdGlvbiB3KHQsZSxyKXt2YXIgbz0wLGk9IiIscz1bXTtmdW5jdGlvbiBhKCl7cmV0dXJuIHQubGVuZ3RoJiZlLmxlbmd0aD90WzBdLm9mZnNldCE9PWVbMF0ub2Zmc2V0P3RbMF0ub2Zmc2V0PGVbMF0ub2Zmc2V0P3Q6ZToic3RhcnQiPT09ZVswXS5ldmVudD90OmU6dC5sZW5ndGg/dDplfWZ1bmN0aW9uIGModCl7ZnVuY3Rpb24gZSh0KXtyZXR1cm4iICIrdC5ub2RlTmFtZSsnPSInK2YodC52YWx1ZSkucmVwbGFjZSgnIicsIiZxdW90OyIpKyciJ31pKz0iPCIrcCh0KStuLm1hcC5jYWxsKHQuYXR0cmlidXRlcyxlKS5qb2luKCIiKSsiPiJ9ZnVuY3Rpb24gdSh0KXtpKz0iPC8iK3AodCkrIj4ifWZ1bmN0aW9uIGwodCl7KCJzdGFydCI9PT10LmV2ZW50P2M6dSkodC5ub2RlKX13aGlsZSh0Lmxlbmd0aHx8ZS5sZW5ndGgpe3ZhciBoPWEoKTtpZihpKz1mKHIuc3Vic3RyaW5nKG8saFswXS5vZmZzZXQpKSxvPWhbMF0ub2Zmc2V0LGg9PT10KXtzLnJldmVyc2UoKS5mb3JFYWNoKHUpO2Rve2woaC5zcGxpY2UoMCwxKVswXSksaD1hKCl9d2hpbGUoaD09PXQmJmgubGVuZ3RoJiZoWzBdLm9mZnNldD09PW8pO3MucmV2ZXJzZSgpLmZvckVhY2goYyl9ZWxzZSJzdGFydCI9PT1oWzBdLmV2ZW50P3MucHVzaChoWzBdLm5vZGUpOnMucG9wKCksbChoLnNwbGljZSgwLDEpWzBdKX1yZXR1cm4gaStmKHIuc3Vic3RyKG8pKX1mdW5jdGlvbiBiKHQpe3JldHVybiEhdCYmKHQuZW5kc1dpdGhQYXJlbnR8fGIodC5zdGFydHMpKX1mdW5jdGlvbiB4KHQpe3JldHVybiB0LnZhcmlhbnRzJiYhdC5jYWNoZWRfdmFyaWFudHMmJih0LmNhY2hlZF92YXJpYW50cz10LnZhcmlhbnRzLm1hcCgoZnVuY3Rpb24oZSl7cmV0dXJuIGcodCx7dmFyaWFudHM6bnVsbH0sZSl9KSkpLHQuY2FjaGVkX3ZhcmlhbnRzP3QuY2FjaGVkX3ZhcmlhbnRzOmIodCk/W2codCx7c3RhcnRzOnQuc3RhcnRzP2codC5zdGFydHMpOm51bGx9KV06W3RdfWZ1bmN0aW9uIGsodCl7aWYoZSYmIXQubGFuZ0FwaVJlc3RvcmVkKXtmb3IodmFyIG4gaW4gdC5sYW5nQXBpUmVzdG9yZWQ9ITAsZSl0W25dJiYodFtlW25dXT10W25dKTsodC5jb250YWluc3x8W10pLmNvbmNhdCh0LnZhcmlhbnRzfHxbXSkuZm9yRWFjaChrKX19ZnVuY3Rpb24gUyh0LGUpe3ZhciBuPXt9O3JldHVybiJzdHJpbmciPT09dHlwZW9mIHQ/bygia2V5d29yZCIsdCk6cih0KS5mb3JFYWNoKChmdW5jdGlvbihlKXtvKGUsdFtlXSl9KSksbjtmdW5jdGlvbiBvKHQscil7ZSYmKHI9ci50b0xvd2VyQ2FzZSgpKSxyLnNwbGl0KCIgIikuZm9yRWFjaCgoZnVuY3Rpb24oZSl7dmFyIHI9ZS5zcGxpdCgifCIpO25bclswXV09W3QsQyhyWzBdLHJbMV0pXX0pKX19ZnVuY3Rpb24gQyh0LGUpe3JldHVybiBlP051bWJlcihlKTpPKHQpPzA6MX1mdW5jdGlvbiBPKHQpe3JldHVybi0xIT1oLmluZGV4T2YodC50b0xvd2VyQ2FzZSgpKX1mdW5jdGlvbiBNKHQpe2Z1bmN0aW9uIGUodCl7cmV0dXJuIHQmJnQuc291cmNlfHx0fWZ1bmN0aW9uIG4obixyKXtyZXR1cm4gbmV3IFJlZ0V4cChlKG4pLCJtIisodC5jYXNlX2luc2Vuc2l0aXZlPyJpIjoiIikrKHI/ImciOiIiKSl9ZnVuY3Rpb24gcih0KXtyZXR1cm4gbmV3IFJlZ0V4cCh0LnRvU3RyaW5nKCkrInwiKS5leGVjKCIiKS5sZW5ndGgtMX1mdW5jdGlvbiBvKHQsbil7Zm9yKHZhciByPS9cWyg/OlteXFxcXV18XFwuKSpcXXxcKFw/P3xcXChbMS05XVswLTldKil8XFwuLyxvPTAsaT0iIixzPTA7czx0Lmxlbmd0aDtzKyspe28rPTE7dmFyIGE9byxjPWUodFtzXSk7cz4wJiYoaSs9biksaSs9IigiO3doaWxlKGMubGVuZ3RoPjApe3ZhciB1PXIuZXhlYyhjKTtpZihudWxsPT11KXtpKz1jO2JyZWFrfWkrPWMuc3Vic3RyaW5nKDAsdS5pbmRleCksYz1jLnN1YnN0cmluZyh1LmluZGV4K3VbMF0ubGVuZ3RoKSwiXFwiPT11WzBdWzBdJiZ1WzFdP2krPSJcXCIrU3RyaW5nKE51bWJlcih1WzFdKSthKTooaSs9dVswXSwiKCI9PXVbMF0mJm8rKyl9aSs9IikifXJldHVybiBpfWZ1bmN0aW9uIGkodCl7dmFyIGUsaSxzPXt9LGE9W10sYz17fSx1PTE7ZnVuY3Rpb24gbCh0LGUpe3NbdV09dCxhLnB1c2goW3QsZV0pLHUrPXIoZSkrMX1mb3IodmFyIGg9MDtoPHQuY29udGFpbnMubGVuZ3RoO2grKyl7dmFyIGY7aT10LmNvbnRhaW5zW2hdLGY9aS5iZWdpbktleXdvcmRzPyJcXC4/KD86IitpLmJlZ2luKyIpXFwuPyI6aS5iZWdpbixsKGksZil9dC50ZXJtaW5hdG9yX2VuZCYmbCgiZW5kIix0LnRlcm1pbmF0b3JfZW5kKSx0LmlsbGVnYWwmJmwoImlsbGVnYWwiLHQuaWxsZWdhbCk7dmFyIHA9YS5tYXAoKGZ1bmN0aW9uKHQpe3JldHVybiB0WzFdfSkpO3JldHVybiBlPW4obyhwLCJ8IiksITApLGMubGFzdEluZGV4PTAsYy5leGVjPWZ1bmN0aW9uKG4pe3ZhciByO2lmKDA9PT1hLmxlbmd0aClyZXR1cm4gbnVsbDtlLmxhc3RJbmRleD1jLmxhc3RJbmRleDt2YXIgbz1lLmV4ZWMobik7aWYoIW8pcmV0dXJuIG51bGw7Zm9yKHZhciBpPTA7aTxvLmxlbmd0aDtpKyspaWYodm9pZCAwIT1vW2ldJiZ2b2lkIDAhPXNbIiIraV0pe3I9c1siIitpXTticmVha31yZXR1cm4ic3RyaW5nIj09PXR5cGVvZiByPyhvLnR5cGU9cixvLmV4dHJhPVt0LmlsbGVnYWwsdC50ZXJtaW5hdG9yX2VuZF0pOihvLnR5cGU9ImJlZ2luIixvLnJ1bGU9ciksb30sY31mdW5jdGlvbiBzKHIsbyl7ci5jb21waWxlZHx8KHIuY29tcGlsZWQ9ITAsci5rZXl3b3Jkcz1yLmtleXdvcmRzfHxyLmJlZ2luS2V5d29yZHMsci5rZXl3b3JkcyYmKHIua2V5d29yZHM9UyhyLmtleXdvcmRzLHQuY2FzZV9pbnNlbnNpdGl2ZSkpLHIubGV4ZW1lc1JlPW4oci5sZXhlbWVzfHwvXHcrLywhMCksbyYmKHIuYmVnaW5LZXl3b3JkcyYmKHIuYmVnaW49IlxcYigiK3IuYmVnaW5LZXl3b3Jkcy5zcGxpdCgiICIpLmpvaW4oInwiKSsiKVxcYiIpLHIuYmVnaW58fChyLmJlZ2luPS9cQnxcYi8pLHIuYmVnaW5SZT1uKHIuYmVnaW4pLHIuZW5kU2FtZUFzQmVnaW4mJihyLmVuZD1yLmJlZ2luKSxyLmVuZHx8ci5lbmRzV2l0aFBhcmVudHx8KHIuZW5kPS9cQnxcYi8pLHIuZW5kJiYoci5lbmRSZT1uKHIuZW5kKSksci50ZXJtaW5hdG9yX2VuZD1lKHIuZW5kKXx8IiIsci5lbmRzV2l0aFBhcmVudCYmby50ZXJtaW5hdG9yX2VuZCYmKHIudGVybWluYXRvcl9lbmQrPShyLmVuZD8ifCI6IiIpK28udGVybWluYXRvcl9lbmQpKSxyLmlsbGVnYWwmJihyLmlsbGVnYWxSZT1uKHIuaWxsZWdhbCkpLG51bGw9PXIucmVsZXZhbmNlJiYoci5yZWxldmFuY2U9MSksci5jb250YWluc3x8KHIuY29udGFpbnM9W10pLHIuY29udGFpbnM9QXJyYXkucHJvdG90eXBlLmNvbmNhdC5hcHBseShbXSxyLmNvbnRhaW5zLm1hcCgoZnVuY3Rpb24odCl7cmV0dXJuIHgoInNlbGYiPT09dD9yOnQpfSkpKSxyLmNvbnRhaW5zLmZvckVhY2goKGZ1bmN0aW9uKHQpe3ModCxyKX0pKSxyLnN0YXJ0cyYmcyhyLnN0YXJ0cyxvKSxyLnRlcm1pbmF0b3JzPWkocikpfXModCl9ZnVuY3Rpb24gTih0LGUsbixyKXtmdW5jdGlvbiBpKHQpe3JldHVybiBuZXcgUmVnRXhwKHQucmVwbGFjZSgvWy1cL1xcXiQqKz8uKCl8W1xde31dL2csIlxcJCYiKSwibSIpfWZ1bmN0aW9uIHModCxlKXtpZihkKHQuZW5kUmUsZSkpe3doaWxlKHQuZW5kc1BhcmVudCYmdC5wYXJlbnQpdD10LnBhcmVudDtyZXR1cm4gdH1pZih0LmVuZHNXaXRoUGFyZW50KXJldHVybiBzKHQucGFyZW50LGUpfWZ1bmN0aW9uIGEodCxlKXt2YXIgbj14LmNhc2VfaW5zZW5zaXRpdmU/ZVswXS50b0xvd2VyQ2FzZSgpOmVbMF07cmV0dXJuIHQua2V5d29yZHMuaGFzT3duUHJvcGVydHkobikmJnQua2V5d29yZHNbbl19ZnVuY3Rpb24gYyh0LGUsbixyKXtpZighbiYmIiI9PT1lKXJldHVybiIiO2lmKCF0KXJldHVybiBlO3ZhciBvPXI/IiI6bC5jbGFzc1ByZWZpeCxpPSc8c3BhbiBjbGFzcz0iJytvLHM9bj8iIjp1O3JldHVybiBpKz10KyciPicsaStlK3N9ZnVuY3Rpb24gaCgpe3ZhciB0LGUsbixyO2lmKCFTLmtleXdvcmRzKXJldHVybiBmKEEpO3I9IiIsZT0wLFMubGV4ZW1lc1JlLmxhc3RJbmRleD0wLG49Uy5sZXhlbWVzUmUuZXhlYyhBKTt3aGlsZShuKXIrPWYoQS5zdWJzdHJpbmcoZSxuLmluZGV4KSksdD1hKFMsbiksdD8oRSs9dFsxXSxyKz1jKHRbMF0sZihuWzBdKSkpOnIrPWYoblswXSksZT1TLmxleGVtZXNSZS5sYXN0SW5kZXgsbj1TLmxleGVtZXNSZS5leGVjKEEpO3JldHVybiByK2YoQS5zdWJzdHIoZSkpfWZ1bmN0aW9uIHAoKXt2YXIgdD0ic3RyaW5nIj09PXR5cGVvZiBTLnN1Ykxhbmd1YWdlO2lmKHQmJiFvW1Muc3ViTGFuZ3VhZ2VdKXJldHVybiBmKEEpO3ZhciBlPXQ/TihTLnN1Ykxhbmd1YWdlLEEsITAsQ1tTLnN1Ykxhbmd1YWdlXSk6VChBLFMuc3ViTGFuZ3VhZ2UubGVuZ3RoP1Muc3ViTGFuZ3VhZ2U6dm9pZCAwKTtyZXR1cm4gUy5yZWxldmFuY2U+MCYmKEUrPWUucmVsZXZhbmNlKSx0JiYoQ1tTLnN1Ykxhbmd1YWdlXT1lLnRvcCksYyhlLmxhbmd1YWdlLGUudmFsdWUsITEsITApfWZ1bmN0aW9uIHYoKXtPKz1udWxsIT1TLnN1Ykxhbmd1YWdlP3AoKTpoKCksQT0iIn1mdW5jdGlvbiBtKHQpe08rPXQuY2xhc3NOYW1lP2ModC5jbGFzc05hbWUsIiIsITApOiIiLFM9T2JqZWN0LmNyZWF0ZSh0LHtwYXJlbnQ6e3ZhbHVlOlN9fSl9ZnVuY3Rpb24gZyh0KXt2YXIgZT10WzBdLG49dC5ydWxlO3JldHVybiBuJiZuLmVuZFNhbWVBc0JlZ2luJiYobi5lbmRSZT1pKGUpKSxuLnNraXA/QSs9ZToobi5leGNsdWRlQmVnaW4mJihBKz1lKSx2KCksbi5yZXR1cm5CZWdpbnx8bi5leGNsdWRlQmVnaW58fChBPWUpKSxtKG4sZSksbi5yZXR1cm5CZWdpbj8wOmUubGVuZ3RofWZ1bmN0aW9uIHkodCl7dmFyIGU9dFswXSxuPXMoUyxlKTtpZihuKXt2YXIgcj1TO3Iuc2tpcD9BKz1lOihyLnJldHVybkVuZHx8ci5leGNsdWRlRW5kfHwoQSs9ZSksdigpLHIuZXhjbHVkZUVuZCYmKEE9ZSkpO2Rve1MuY2xhc3NOYW1lJiYoTys9dSksUy5za2lwfHxTLnN1Ykxhbmd1YWdlfHwoRSs9Uy5yZWxldmFuY2UpLFM9Uy5wYXJlbnR9d2hpbGUoUyE9PW4ucGFyZW50KTtyZXR1cm4gbi5zdGFydHMmJihuLmVuZFNhbWVBc0JlZ2luJiYobi5zdGFydHMuZW5kUmU9bi5lbmRSZSksbShuLnN0YXJ0cywiIikpLHIucmV0dXJuRW5kPzA6ZS5sZW5ndGh9fXZhciB3PXt9O2Z1bmN0aW9uIGIodCxyKXt2YXIgbz1yJiZyWzBdO2lmKEErPXQsbnVsbD09bylyZXR1cm4gdigpLDA7aWYoImJlZ2luIj09dy50eXBlJiYiZW5kIj09ci50eXBlJiZ3LmluZGV4PT1yLmluZGV4JiYiIj09PW8pcmV0dXJuIEErPWUuc2xpY2Uoci5pbmRleCxyLmluZGV4KzEpLDE7aWYodz1yLCJiZWdpbiI9PT1yLnR5cGUpcmV0dXJuIGcocik7aWYoImlsbGVnYWwiPT09ci50eXBlJiYhbil0aHJvdyBuZXcgRXJyb3IoJ0lsbGVnYWwgbGV4ZW1lICInK28rJyIgZm9yIG1vZGUgIicrKFMuY2xhc3NOYW1lfHwiPHVubmFtZWQ+IikrJyInKTtpZigiZW5kIj09PXIudHlwZSl7dmFyIGk9eShyKTtpZih2b2lkIDAhPWkpcmV0dXJuIGl9cmV0dXJuIEErPW8sby5sZW5ndGh9dmFyIHg9Xyh0KTtpZigheCl0aHJvdyBuZXcgRXJyb3IoJ1Vua25vd24gbGFuZ3VhZ2U6ICInK3QrJyInKTtNKHgpO3ZhciBrLFM9cnx8eCxDPXt9LE89IiI7Zm9yKGs9UztrIT09eDtrPWsucGFyZW50KWsuY2xhc3NOYW1lJiYoTz1jKGsuY2xhc3NOYW1lLCIiLCEwKStPKTt2YXIgQT0iIixFPTA7dHJ5e3ZhciBELFIsej0wO3doaWxlKDEpe2lmKFMudGVybWluYXRvcnMubGFzdEluZGV4PXosRD1TLnRlcm1pbmF0b3JzLmV4ZWMoZSksIUQpYnJlYWs7Uj1iKGUuc3Vic3RyaW5nKHosRC5pbmRleCksRCksej1ELmluZGV4K1J9Zm9yKGIoZS5zdWJzdHIoeikpLGs9UztrLnBhcmVudDtrPWsucGFyZW50KWsuY2xhc3NOYW1lJiYoTys9dSk7cmV0dXJue3JlbGV2YW5jZTpFLHZhbHVlOk8saWxsZWdhbDohMSxsYW5ndWFnZTp0LHRvcDpTfX1jYXRjaChQKXtpZihQLm1lc3NhZ2UmJi0xIT09UC5tZXNzYWdlLmluZGV4T2YoIklsbGVnYWwiKSlyZXR1cm57aWxsZWdhbDohMCxyZWxldmFuY2U6MCx2YWx1ZTpmKGUpfTt0aHJvdyBQfX1mdW5jdGlvbiBUKHQsZSl7ZT1lfHxsLmxhbmd1YWdlc3x8cihvKTt2YXIgbj17cmVsZXZhbmNlOjAsdmFsdWU6Zih0KX0saT1uO3JldHVybiBlLmZpbHRlcihfKS5maWx0ZXIoRikuZm9yRWFjaCgoZnVuY3Rpb24oZSl7dmFyIHI9TihlLHQsITEpO3IubGFuZ3VhZ2U9ZSxyLnJlbGV2YW5jZT5pLnJlbGV2YW5jZSYmKGk9ciksci5yZWxldmFuY2U+bi5yZWxldmFuY2UmJihpPW4sbj1yKX0pKSxpLmxhbmd1YWdlJiYobi5zZWNvbmRfYmVzdD1pKSxufWZ1bmN0aW9uIEEodCl7cmV0dXJuIGwudGFiUmVwbGFjZXx8bC51c2VCUj90LnJlcGxhY2UoYywoZnVuY3Rpb24odCxlKXtyZXR1cm4gbC51c2VCUiYmIlxuIj09PXQ/Ijxicj4iOmwudGFiUmVwbGFjZT9lLnJlcGxhY2UoL1x0L2csbC50YWJSZXBsYWNlKToiIn0pKTp0fWZ1bmN0aW9uIEUodCxlLG4pe3ZhciByPWU/aVtlXTpuLG89W3QudHJpbSgpXTtyZXR1cm4gdC5tYXRjaCgvXGJobGpzXGIvKXx8by5wdXNoKCJobGpzIiksLTE9PT10LmluZGV4T2YocikmJm8ucHVzaChyKSxvLmpvaW4oIiAiKS50cmltKCl9ZnVuY3Rpb24gRCh0KXt2YXIgZSxuLHIsbyxpLHM9bSh0KTt2KHMpfHwobC51c2VCUj8oZT1kb2N1bWVudC5jcmVhdGVFbGVtZW50TlMoImh0dHA6Ly93d3cudzMub3JnLzE5OTkveGh0bWwiLCJkaXYiKSxlLmlubmVySFRNTD10LmlubmVySFRNTC5yZXBsYWNlKC9cbi9nLCIiKS5yZXBsYWNlKC88YnJbIFwvXSo+L2csIlxuIikpOmU9dCxpPWUudGV4dENvbnRlbnQscj1zP04ocyxpLCEwKTpUKGkpLG49eShlKSxuLmxlbmd0aCYmKG89ZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKCJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hodG1sIiwiZGl2Iiksby5pbm5lckhUTUw9ci52YWx1ZSxyLnZhbHVlPXcobix5KG8pLGkpKSxyLnZhbHVlPUEoci52YWx1ZSksdC5pbm5lckhUTUw9ci52YWx1ZSx0LmNsYXNzTmFtZT1FKHQuY2xhc3NOYW1lLHMsci5sYW5ndWFnZSksdC5yZXN1bHQ9e2xhbmd1YWdlOnIubGFuZ3VhZ2UscmU6ci5yZWxldmFuY2V9LHIuc2Vjb25kX2Jlc3QmJih0LnNlY29uZF9iZXN0PXtsYW5ndWFnZTpyLnNlY29uZF9iZXN0Lmxhbmd1YWdlLHJlOnIuc2Vjb25kX2Jlc3QucmVsZXZhbmNlfSkpfWZ1bmN0aW9uIFIodCl7bD1nKGwsdCl9ZnVuY3Rpb24geigpe2lmKCF6LmNhbGxlZCl7ei5jYWxsZWQ9ITA7dmFyIHQ9ZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgicHJlIGNvZGUiKTtuLmZvckVhY2guY2FsbCh0LEQpfX1mdW5jdGlvbiBQKCl7YWRkRXZlbnRMaXN0ZW5lcigiRE9NQ29udGVudExvYWRlZCIseiwhMSksYWRkRXZlbnRMaXN0ZW5lcigibG9hZCIseiwhMSl9ZnVuY3Rpb24gSShlLG4pe3ZhciByPW9bZV09bih0KTtrKHIpLHIucmF3RGVmaW5pdGlvbj1uLmJpbmQobnVsbCx0KSxyLmFsaWFzZXMmJnIuYWxpYXNlcy5mb3JFYWNoKChmdW5jdGlvbih0KXtpW3RdPWV9KSl9ZnVuY3Rpb24gQigpe3JldHVybiByKG8pfWZ1bmN0aW9uIF8odCl7cmV0dXJuIHQ9KHR8fCIiKS50b0xvd2VyQ2FzZSgpLG9bdF18fG9baVt0XV19ZnVuY3Rpb24gRih0KXt2YXIgZT1fKHQpO3JldHVybiBlJiYhZS5kaXNhYmxlQXV0b2RldGVjdH1yZXR1cm4gdC5oaWdobGlnaHQ9Tix0LmhpZ2hsaWdodEF1dG89VCx0LmZpeE1hcmt1cD1BLHQuaGlnaGxpZ2h0QmxvY2s9RCx0LmNvbmZpZ3VyZT1SLHQuaW5pdEhpZ2hsaWdodGluZz16LHQuaW5pdEhpZ2hsaWdodGluZ09uTG9hZD1QLHQucmVnaXN0ZXJMYW5ndWFnZT1JLHQubGlzdExhbmd1YWdlcz1CLHQuZ2V0TGFuZ3VhZ2U9Xyx0LmF1dG9EZXRlY3Rpb249Rix0LmluaGVyaXQ9Zyx0LklERU5UX1JFPSJbYS16QS1aXVxcdyoiLHQuVU5ERVJTQ09SRV9JREVOVF9SRT0iW2EtekEtWl9dXFx3KiIsdC5OVU1CRVJfUkU9IlxcYlxcZCsoXFwuXFxkKyk/Iix0LkNfTlVNQkVSX1JFPSIoLT8pKFxcYjBbeFhdW2EtZkEtRjAtOV0rfChcXGJcXGQrKFxcLlxcZCopP3xcXC5cXGQrKShbZUVdWy0rXT9cXGQrKT8pIix0LkJJTkFSWV9OVU1CRVJfUkU9IlxcYigwYlswMV0rKSIsdC5SRV9TVEFSVEVSU19SRT0iIXwhPXwhPT18JXwlPXwmfCYmfCY9fFxcKnxcXCo9fFxcK3xcXCs9fCx8LXwtPXwvPXwvfDp8O3w8PHw8PD18PD18PHw9PT18PT18PXw+Pj49fD4+PXw+PXw+Pj58Pj58PnxcXD98XFxbfFxce3xcXCh8XFxefFxcXj18XFx8fFxcfD18XFx8XFx8fH4iLHQuQkFDS1NMQVNIX0VTQ0FQRT17YmVnaW46IlxcXFxbXFxzXFxTXSIscmVsZXZhbmNlOjB9LHQuQVBPU19TVFJJTkdfTU9ERT17Y2xhc3NOYW1lOiJzdHJpbmciLGJlZ2luOiInIixlbmQ6IiciLGlsbGVnYWw6IlxcbiIsY29udGFpbnM6W3QuQkFDS1NMQVNIX0VTQ0FQRV19LHQuUVVPVEVfU1RSSU5HX01PREU9e2NsYXNzTmFtZToic3RyaW5nIixiZWdpbjonIicsZW5kOiciJyxpbGxlZ2FsOiJcXG4iLGNvbnRhaW5zOlt0LkJBQ0tTTEFTSF9FU0NBUEVdfSx0LlBIUkFTQUxfV09SRFNfTU9ERT17YmVnaW46L1xiKGF8YW58dGhlfGFyZXxJJ218aXNuJ3R8ZG9uJ3R8ZG9lc24ndHx3b24ndHxidXR8anVzdHxzaG91bGR8cHJldHR5fHNpbXBseXxlbm91Z2h8Z29ubmF8Z29pbmd8d3RmfHNvfHN1Y2h8d2lsbHx5b3V8eW91cnx0aGV5fGxpa2V8bW9yZSlcYi99LHQuQ09NTUVOVD1mdW5jdGlvbihlLG4scil7dmFyIG89dC5pbmhlcml0KHtjbGFzc05hbWU6ImNvbW1lbnQiLGJlZ2luOmUsZW5kOm4sY29udGFpbnM6W119LHJ8fHt9KTtyZXR1cm4gby5jb250YWlucy5wdXNoKHQuUEhSQVNBTF9XT1JEU19NT0RFKSxvLmNvbnRhaW5zLnB1c2goe2NsYXNzTmFtZToiZG9jdGFnIixiZWdpbjoiKD86VE9ET3xGSVhNRXxOT1RFfEJVR3xYWFgpOiIscmVsZXZhbmNlOjB9KSxvfSx0LkNfTElORV9DT01NRU5UX01PREU9dC5DT01NRU5UKCIvLyIsIiQiKSx0LkNfQkxPQ0tfQ09NTUVOVF9NT0RFPXQuQ09NTUVOVCgiL1xcKiIsIlxcKi8iKSx0LkhBU0hfQ09NTUVOVF9NT0RFPXQuQ09NTUVOVCgiIyIsIiQiKSx0Lk5VTUJFUl9NT0RFPXtjbGFzc05hbWU6Im51bWJlciIsYmVnaW46dC5OVU1CRVJfUkUscmVsZXZhbmNlOjB9LHQuQ19OVU1CRVJfTU9ERT17Y2xhc3NOYW1lOiJudW1iZXIiLGJlZ2luOnQuQ19OVU1CRVJfUkUscmVsZXZhbmNlOjB9LHQuQklOQVJZX05VTUJFUl9NT0RFPXtjbGFzc05hbWU6Im51bWJlciIsYmVnaW46dC5CSU5BUllfTlVNQkVSX1JFLHJlbGV2YW5jZTowfSx0LkNTU19OVU1CRVJfTU9ERT17Y2xhc3NOYW1lOiJudW1iZXIiLGJlZ2luOnQuTlVNQkVSX1JFKyIoJXxlbXxleHxjaHxyZW18dnd8dmh8dm1pbnx2bWF4fGNtfG1tfGlufHB0fHBjfHB4fGRlZ3xncmFkfHJhZHx0dXJufHN8bXN8SHp8a0h6fGRwaXxkcGNtfGRwcHgpPyIscmVsZXZhbmNlOjB9LHQuUkVHRVhQX01PREU9e2NsYXNzTmFtZToicmVnZXhwIixiZWdpbjovXC8vLGVuZDovXC9bZ2ltdXldKi8saWxsZWdhbDovXG4vLGNvbnRhaW5zOlt0LkJBQ0tTTEFTSF9FU0NBUEUse2JlZ2luOi9cWy8sZW5kOi9cXS8scmVsZXZhbmNlOjAsY29udGFpbnM6W3QuQkFDS1NMQVNIX0VTQ0FQRV19XX0sdC5USVRMRV9NT0RFPXtjbGFzc05hbWU6InRpdGxlIixiZWdpbjp0LklERU5UX1JFLHJlbGV2YW5jZTowfSx0LlVOREVSU0NPUkVfVElUTEVfTU9ERT17Y2xhc3NOYW1lOiJ0aXRsZSIsYmVnaW46dC5VTkRFUlNDT1JFX0lERU5UX1JFLHJlbGV2YW5jZTowfSx0Lk1FVEhPRF9HVUFSRD17YmVnaW46IlxcLlxccyoiK3QuVU5ERVJTQ09SRV9JREVOVF9SRSxyZWxldmFuY2U6MH0sdH0pKX0sZDJiYjpmdW5jdGlvbih0LGUsbil7dmFyIHI9bigiODI1YSIpLG89bigiM2JiZSIpO3QuZXhwb3J0cz1PYmplY3Quc2V0UHJvdG90eXBlT2Z8fCgiX19wcm90b19fImlue30/ZnVuY3Rpb24oKXt2YXIgdCxlPSExLG49e307dHJ5e3Q9T2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihPYmplY3QucHJvdG90eXBlLCJfX3Byb3RvX18iKS5zZXQsdC5jYWxsKG4sW10pLGU9biBpbnN0YW5jZW9mIEFycmF5fWNhdGNoKGkpe31yZXR1cm4gZnVuY3Rpb24obixpKXtyZXR1cm4gcihuKSxvKGkpLGU/dC5jYWxsKG4saSk6bi5fX3Byb3RvX189aSxufX0oKTp2b2lkIDApfSxkM2I3OmZ1bmN0aW9uKHQsZSxuKXt2YXIgcj1uKCIwMGVlIiksbz1uKCI2ZWViIiksaT1uKCJiMDQxIik7cnx8byhPYmplY3QucHJvdG90eXBlLCJ0b1N0cmluZyIsaSx7dW5zYWZlOiEwfSl9LGQ0NGU6ZnVuY3Rpb24odCxlLG4pe3ZhciByPW4oIjliZjIiKS5mLG89bigiNTEzNSIpLGk9bigiYjYyMiIpLHM9aSgidG9TdHJpbmdUYWciKTt0LmV4cG9ydHM9ZnVuY3Rpb24odCxlLG4pe3QmJiFvKHQ9bj90OnQucHJvdG90eXBlLHMpJiZyKHQscyx7Y29uZmlndXJhYmxlOiEwLHZhbHVlOmV9KX19LGQ3YjY6ZnVuY3Rpb24odCxlKXt0LmV4cG9ydHM9e2Z1bmN0aW9uYWw6ITAscmVuZGVyKHQsZSl7Y29uc3R7X2M6bixfdjpyLGRhdGE6byxjaGlsZHJlbjppPVtdfT1lLHtjbGFzczpzLHN0YXRpY0NsYXNzOmEsc3R5bGU6YyxzdGF0aWNTdHlsZTp1LGF0dHJzOmw9e30sLi4uaH09bztyZXR1cm4gbigic3ZnIix7Y2xhc3M6W3MsYV0sc3R5bGU6W2MsdV0sYXR0cnM6T2JqZWN0LmFzc2lnbih7eG1sbnM6Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIix2aWV3Qm94OiIwIDAgMjQgMjQifSxsKSwuLi5ofSxpLmNvbmNhdChbbigicGF0aCIse2F0dHJzOntkOiJNMjIuNS4yNDhoLTcuNjM3YTEuMjUgMS4yNSAwIDAwMCAyLjVoMS4wODZhLjI1LjI1IDAgMDEuMjExLjM4NEw0Ljc4IDIxLjAxN2EuNS41IDAgMDEtLjQyMi4yMzFIMS41YTEuMjUgMS4yNSAwIDAwMCAyLjVoNy42MzdhMS4yNSAxLjI1IDAgMDAwLTIuNUg4LjA1MWEuMjUuMjUgMCAwMS0uMjExLS4zODRMMTkuMjIgMi45OGEuNS41IDAgMDEuNDIyLS4yMzJIMjIuNWExLjI1IDEuMjUgMCAwMDAtMi41eiJ9fSldKSl9fX0sZGE4NDpmdW5jdGlvbih0LGUsbil7KGZ1bmN0aW9uKGUpe3ZhciBuPWZ1bmN0aW9uKHQpe3JldHVybiB0JiZ0Lk1hdGg9PU1hdGgmJnR9O3QuZXhwb3J0cz1uKCJvYmplY3QiPT10eXBlb2YgZ2xvYmFsVGhpcyYmZ2xvYmFsVGhpcyl8fG4oIm9iamVjdCI9PXR5cGVvZiB3aW5kb3cmJndpbmRvdyl8fG4oIm9iamVjdCI9PXR5cGVvZiBzZWxmJiZzZWxmKXx8bigib2JqZWN0Ij09dHlwZW9mIGUmJmUpfHxGdW5jdGlvbigicmV0dXJuIHRoaXMiKSgpfSkuY2FsbCh0aGlzLG4oImM4YmEiKSl9LGRjNDQ6ZnVuY3Rpb24odCxlLG4pe30sZGRiMDpmdW5jdGlvbih0LGUsbil7dmFyIHI9bigiZGE4NCIpLG89bigiZmRiYyIpLGk9bigiZTI2MCIpLHM9bigiOTExMiIpLGE9bigiYjYyMiIpLGM9YSgiaXRlcmF0b3IiKSx1PWEoInRvU3RyaW5nVGFnIiksbD1pLnZhbHVlcztmb3IodmFyIGggaW4gbyl7dmFyIGY9cltoXSxwPWYmJmYucHJvdG90eXBlO2lmKHApe2lmKHBbY10hPT1sKXRyeXtzKHAsYyxsKX1jYXRjaCh2KXtwW2NdPWx9aWYocFt1XXx8cyhwLHUsaCksb1toXSlmb3IodmFyIGQgaW4gaSlpZihwW2RdIT09aVtkXSl0cnl7cyhwLGQsaVtkXSl9Y2F0Y2godil7cFtkXT1pW2RdfX19fSxkZjc1OmZ1bmN0aW9uKHQsZSxuKXt2YXIgcj1uKCJjYTg0Iiksbz1uKCI3ODM5Iik7dC5leHBvcnRzPU9iamVjdC5rZXlzfHxmdW5jdGlvbih0KXtyZXR1cm4gcih0LG8pfX0sZTAxYTpmdW5jdGlvbih0LGUsbil7InVzZSBzdHJpY3QiO3ZhciByPW4oIjIzZTciKSxvPW4oIjgzYWIiKSxpPW4oImRhODQiKSxzPW4oIjUxMzUiKSxhPW4oIjg2MWQiKSxjPW4oIjliZjIiKS5mLHU9bigiZTg5MyIpLGw9aS5TeW1ib2w7aWYobyYmImZ1bmN0aW9uIj09dHlwZW9mIGwmJighKCJkZXNjcmlwdGlvbiJpbiBsLnByb3RvdHlwZSl8fHZvaWQgMCE9PWwoKS5kZXNjcmlwdGlvbikpe3ZhciBoPXt9LGY9ZnVuY3Rpb24oKXt2YXIgdD1hcmd1bWVudHMubGVuZ3RoPDF8fHZvaWQgMD09PWFyZ3VtZW50c1swXT92b2lkIDA6U3RyaW5nKGFyZ3VtZW50c1swXSksZT10aGlzIGluc3RhbmNlb2YgZj9uZXcgbCh0KTp2b2lkIDA9PT10P2woKTpsKHQpO3JldHVybiIiPT09dCYmKGhbZV09ITApLGV9O3UoZixsKTt2YXIgcD1mLnByb3RvdHlwZT1sLnByb3RvdHlwZTtwLmNvbnN0cnVjdG9yPWY7dmFyIGQ9cC50b1N0cmluZyx2PSJTeW1ib2wodGVzdCkiPT1TdHJpbmcobCgidGVzdCIpKSxtPS9eU3ltYm9sXCgoLiopXClbXildKyQvO2MocCwiZGVzY3JpcHRpb24iLHtjb25maWd1cmFibGU6ITAsZ2V0OmZ1bmN0aW9uKCl7dmFyIHQ9YSh0aGlzKT90aGlzLnZhbHVlT2YoKTp0aGlzLGU9ZC5jYWxsKHQpO2lmKHMoaCx0KSlyZXR1cm4iIjt2YXIgbj12P2Uuc2xpY2UoNywtMSk6ZS5yZXBsYWNlKG0sIiQxIik7cmV0dXJuIiI9PT1uP3ZvaWQgMDpufX0pLHIoe2dsb2JhbDohMCxmb3JjZWQ6ITB9LHtTeW1ib2w6Zn0pfX0sZTE2MzpmdW5jdGlvbih0LGUsbil7dmFyIHI9bigiNTEzNSIpLG89bigiN2IwYiIpLGk9bigiZjc3MiIpLHM9bigiZTE3NyIpLGE9aSgiSUVfUFJPVE8iKSxjPU9iamVjdC5wcm90b3R5cGU7dC5leHBvcnRzPXM/T2JqZWN0LmdldFByb3RvdHlwZU9mOmZ1bmN0aW9uKHQpe3JldHVybiB0PW8odCkscih0LGEpP3RbYV06ImZ1bmN0aW9uIj09dHlwZW9mIHQuY29uc3RydWN0b3ImJnQgaW5zdGFuY2VvZiB0LmNvbnN0cnVjdG9yP3QuY29uc3RydWN0b3IucHJvdG90eXBlOnQgaW5zdGFuY2VvZiBPYmplY3Q/YzpudWxsfX0sZTE3NzpmdW5jdGlvbih0LGUsbil7dmFyIHI9bigiZDAzOSIpO3QuZXhwb3J0cz0hcigoZnVuY3Rpb24oKXtmdW5jdGlvbiB0KCl7fXJldHVybiB0LnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1udWxsLE9iamVjdC5nZXRQcm90b3R5cGVPZihuZXcgdCkhPT10LnByb3RvdHlwZX0pKX0sZTI2MDpmdW5jdGlvbih0LGUsbil7InVzZSBzdHJpY3QiO3ZhciByPW4oImZjNmEiKSxvPW4oIjQ0ZDIiKSxpPW4oIjNmOGMiKSxzPW4oIjY5ZjMiKSxhPW4oIjdkZDAiKSxjPSJBcnJheSBJdGVyYXRvciIsdT1zLnNldCxsPXMuZ2V0dGVyRm9yKGMpO3QuZXhwb3J0cz1hKEFycmF5LCJBcnJheSIsKGZ1bmN0aW9uKHQsZSl7dSh0aGlzLHt0eXBlOmMsdGFyZ2V0OnIodCksaW5kZXg6MCxraW5kOmV9KX0pLChmdW5jdGlvbigpe3ZhciB0PWwodGhpcyksZT10LnRhcmdldCxuPXQua2luZCxyPXQuaW5kZXgrKztyZXR1cm4hZXx8cj49ZS5sZW5ndGg/KHQudGFyZ2V0PXZvaWQgMCx7dmFsdWU6dm9pZCAwLGRvbmU6ITB9KToia2V5cyI9PW4/e3ZhbHVlOnIsZG9uZTohMX06InZhbHVlcyI9PW4/e3ZhbHVlOmVbcl0sZG9uZTohMX06e3ZhbHVlOltyLGVbcl1dLGRvbmU6ITF9fSksInZhbHVlcyIpLGkuQXJndW1lbnRzPWkuQXJyYXksbygia2V5cyIpLG8oInZhbHVlcyIpLG8oImVudHJpZXMiKX0sZTQ4YzpmdW5jdGlvbih0LGUpe3QuZXhwb3J0cz17ZnVuY3Rpb25hbDohMCxyZW5kZXIodCxlKXtjb25zdHtfYzpuLF92OnIsZGF0YTpvLGNoaWxkcmVuOmk9W119PWUse2NsYXNzOnMsc3RhdGljQ2xhc3M6YSxzdHlsZTpjLHN0YXRpY1N0eWxlOnUsYXR0cnM6bD17fSwuLi5ofT1vO3JldHVybiBuKCJzdmciLHtjbGFzczpbcyxhXSxzdHlsZTpbYyx1XSxhdHRyczpPYmplY3QuYXNzaWduKHt4bWxuczoiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciLHZpZXdCb3g6IjAgMCAyNCAyNCJ9LGwpLC4uLmh9LGkuY29uY2F0KFtuKCJwYXRoIix7YXR0cnM6e2Q6Ik0yMi42MDguMTYxYS41LjUgMCAwMC0uNTQ1LjEwOEwxOS40NzIgMi44NmEuMjUuMjUgMCAwMS0uMjkyLjA0NSAxMi41MzcgMTIuNTM3IDAgMDAtMTIuOTY2Ljg2NUExMi4yNTkgMTIuMjU5IDAgMDA2LjEgMjMuNjMyYTEuMjUgMS4yNSAwIDAwMS40NzYtMi4wMTggOS43NTkgOS43NTkgMCAwMS4wOTEtMTUuODA5IDEwIDEwIDAgMDE5LjQ2Ni0xLjEuMjUuMjUgMCAwMS4wODQuNDA5bC0xLjg1IDEuODVhLjUuNSAwIDAwLjM1NC44NTNoNi43YS41LjUgMCAwMC41LS41Vi42MjNhLjUuNSAwIDAwLS4zMTMtLjQ2MnoifX0pXSkpfX19LGU1Mzg6ZnVuY3Rpb24odCxlLG4pe3ZhciByPW4oImI2MjIiKTtlLmY9cn0sZTc2YzpmdW5jdGlvbih0LGUsbil7fSxlODkzOmZ1bmN0aW9uKHQsZSxuKXt2YXIgcj1uKCI1MTM1Iiksbz1uKCI1NmVmIiksaT1uKCIwNmNmIikscz1uKCI5YmYyIik7dC5leHBvcnRzPWZ1bmN0aW9uKHQsZSl7Zm9yKHZhciBuPW8oZSksYT1zLmYsYz1pLmYsdT0wO3U8bi5sZW5ndGg7dSsrKXt2YXIgbD1uW3VdO3IodCxsKXx8YSh0LGwsYyhlLGwpKX19fSxlOGI1OmZ1bmN0aW9uKHQsZSxuKXt2YXIgcj1uKCJjNmI2Iik7dC5leHBvcnRzPUFycmF5LmlzQXJyYXl8fGZ1bmN0aW9uKHQpe3JldHVybiJBcnJheSI9PXIodCl9fSxlOTVhOmZ1bmN0aW9uKHQsZSxuKXt2YXIgcj1uKCJiNjIyIiksbz1uKCIzZjhjIiksaT1yKCJpdGVyYXRvciIpLHM9QXJyYXkucHJvdG90eXBlO3QuZXhwb3J0cz1mdW5jdGlvbih0KXtyZXR1cm4gdm9pZCAwIT09dCYmKG8uQXJyYXk9PT10fHxzW2ldPT09dCl9fSxlZDUzOmZ1bmN0aW9uKHQsZSl7dC5leHBvcnRzPXtmdW5jdGlvbmFsOiEwLHJlbmRlcih0LGUpe2NvbnN0e19jOm4sX3Y6cixkYXRhOm8sY2hpbGRyZW46aT1bXX09ZSx7Y2xhc3M6cyxzdGF0aWNDbGFzczphLHN0eWxlOmMsc3RhdGljU3R5bGU6dSxhdHRyczpsPXt9LC4uLmh9PW87cmV0dXJuIG4oInN2ZyIse2NsYXNzOltzLGFdLHN0eWxlOltjLHVdLGF0dHJzOk9iamVjdC5hc3NpZ24oe3htbG5zOiJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIsdmlld0JveDoiMCAwIDI0IDI0In0sbCksLi4uaH0saS5jb25jYXQoW24oInBhdGgiLHthdHRyczp7ZDoiTTE5IDE0YTUgNSAwIDExMCAxMCA1IDUgMCAwMTAtMTB6bTIuNSA1LjkzOGEuOTM3LjkzNyAwIDEwMC0xLjg3NWgtMS4yNWEuMzEyLjMxMiAwIDAxLS4zMTMtLjMxM1YxNi41YS45MzcuOTM3IDAgMTAtMS44NzUgMHYxLjI1YzAgLjE3My0uMTQuMzEzLS4zMTIuMzEzSDE2LjVhLjkzNy45MzcgMCAxMDAgMS44NzVoMS4yNWMuMTczIDAgLjMxMy4xNC4zMTMuMzEydjEuMjVhLjkzNy45MzcgMCAxMDEuODc1IDB2LTEuMjVjMC0uMTczLjE0LS4zMTMuMzEyLS4zMTNoMS4yNXpNMiAxOWEzIDMgMCAwMDYgMFY1YTMgMyAwIDEwLTYgMHYxNHptLTIgMFY1YTUgNSAwIDExMTAgMHYxNGE1IDUgMCAwMS0xMCAweiJ9fSldKSl9fX0sZWU3ZjpmdW5jdGlvbih0LGUsbil7InVzZSBzdHJpY3QiO09iamVjdC5kZWZpbmVQcm9wZXJ0eShlLCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KTt2YXIgcj1uKCI1MzEzIiksbz1uKCIxNTVjIiksaT1uKCI1NWJlIikscz1mdW5jdGlvbih0KXtyZXR1cm4gZnVuY3Rpb24oZSl7dmFyIG49Vih0KShlLnNlbGVjdGlvbik7cmV0dXJuIG4/UyhuLnBvcykoZSk6ZX19LGE9ZnVuY3Rpb24odCxlKXtyZXR1cm4gZnVuY3Rpb24obil7QXJyYXkuaXNBcnJheSh0KXx8KHQ9W3RdKTtmb3IodmFyIHI9MCxvPXQubGVuZ3RoO3I8bztyKyspe3ZhciBpPVYodFtyXSkobi5zZWxlY3Rpb24pO2lmKGkpe3ZhciBzPXgoaS5wb3MsZSkobik7aWYocyE9PW4pcmV0dXJuIHN9fXJldHVybiBufX0sYz1mdW5jdGlvbih0KXtpZih5KHQuc2VsZWN0aW9uKSl7dmFyIGU9dC5zZWxlY3Rpb24uJGZyb20ucG9zLG49dC5zZWxlY3Rpb24uJHRvLnBvcztyZXR1cm4gYih0LmRlbGV0ZShlLG4pKX1yZXR1cm4gdH0sdT1mdW5jdGlvbih0KXtyZXR1cm4gZnVuY3Rpb24oZSl7aWYoeShlLnNlbGVjdGlvbikpe3ZhciBuPWUuc2VsZWN0aW9uLGk9bi4kZnJvbSxzPW4uJHRvO2lmKHQgaW5zdGFuY2VvZiBvLkZyYWdtZW50JiZpLnBhcmVudC5jYW5SZXBsYWNlKGkuaW5kZXgoKSxpLmluZGV4QWZ0ZXIoKSx0KXx8aS5wYXJlbnQuY2FuUmVwbGFjZVdpdGgoaS5pbmRleCgpLGkuaW5kZXhBZnRlcigpLHQudHlwZSkpcmV0dXJuIGIoZS5yZXBsYWNlV2l0aChpLnBvcyxzLnBvcyx0KS5zZXRTZWxlY3Rpb24obmV3IHIuTm9kZVNlbGVjdGlvbihlLmRvYy5yZXNvbHZlKGkucG9zKSkpKX1yZXR1cm4gZX19LGw9ZnVuY3Rpb24odCl7dmFyIGU9YXJndW1lbnRzLmxlbmd0aD4xJiZ2b2lkIDAhPT1hcmd1bWVudHNbMV0/YXJndW1lbnRzWzFdOjE7cmV0dXJuIGZ1bmN0aW9uKG4pe3ZhciBvPXIuU2VsZWN0aW9uLmZpbmRGcm9tKG4uZG9jLnJlc29sdmUodCksZSwhMCk7cmV0dXJuIG8/bi5zZXRTZWxlY3Rpb24obyk6bn19LGg9ZnVuY3Rpb24odCl7cmV0dXJuIHQudHlwZSYmdC50eXBlLnNwZWMuc2VsZWN0YWJsZX0sZj1mdW5jdGlvbih0KXtyZXR1cm4gaCh0KSYmdC50eXBlLmlzTGVhZn0scD1mdW5jdGlvbih0LGUsbil7cmV0dXJuIGYodCk/bi5zZXRTZWxlY3Rpb24obmV3IHIuTm9kZVNlbGVjdGlvbihuLmRvYy5yZXNvbHZlKGUpKSk6bChlKShuKX0sZD1mdW5jdGlvbih0LGUsbil7cmV0dXJuIGZ1bmN0aW9uKHIpe3ZhciBvPSJudW1iZXIiPT09dHlwZW9mIGUsaT1yLnNlbGVjdGlvbi4kZnJvbSxzPW8/ci5kb2MucmVzb2x2ZShlKTp5KHIuc2VsZWN0aW9uKT9yLmRvYy5yZXNvbHZlKGkucG9zKzEpOmksYz1zLnBhcmVudDtpZih5KHIuc2VsZWN0aW9uKSYmbil7dmFyIGw9cjtpZihyPXUodCkociksbCE9PXIpcmV0dXJuIHJ9aWYoTShjKSl7dmFyIGY9cjtpZihyPWEoYy50eXBlLHQpKHIpLGYhPT1yKXt2YXIgZD1oKHQpP3MuYmVmb3JlKHMuZGVwdGgpOnMucG9zO3JldHVybiBwKHQsZCxyKX19aWYoTyhzLHQpKXtyLmluc2VydChzLnBvcyx0KTt2YXIgdj1vP3MucG9zOmgodCk/ci5zZWxlY3Rpb24uJGFuY2hvci5wb3MtMTpyLnNlbGVjdGlvbi4kYW5jaG9yLnBvcztyZXR1cm4gYihwKHQsdixyKSl9Zm9yKHZhciBtPXMuZGVwdGg7bT4wO20tLSl7dmFyIGc9cy5hZnRlcihtKSx3PXIuZG9jLnJlc29sdmUoZyk7aWYoTyh3LHQpKXJldHVybiByLmluc2VydChnLHQpLGIocCh0LGcscikpfXJldHVybiByfX0sdj1mdW5jdGlvbih0LGUsbixyKXtyZXR1cm4gZnVuY3Rpb24obyl7dmFyIGk9Vih0KShvLnNlbGVjdGlvbik7cmV0dXJuIGk/YihvLnNldE5vZGVNYXJrdXAoaS5wb3MsZSxPYmplY3QuYXNzaWduKHt9LGkubm9kZS5hdHRycyxuKSxyKSk6b319LG09ZnVuY3Rpb24odCl7cmV0dXJuIGZ1bmN0aW9uKGUpe2lmKCF5KGUuc2VsZWN0aW9uKSl7dmFyIG49Vih0KShlLnNlbGVjdGlvbik7aWYobilyZXR1cm4gYihlLnNldFNlbGVjdGlvbihyLk5vZGVTZWxlY3Rpb24uY3JlYXRlKGUuZG9jLG4ucG9zKSkpfXJldHVybiBlfX0sZz1mdW5jdGlvbih0KXt2YXIgZT1IKHQuc2VsZWN0aW9uKTtyZXR1cm4ibnVtYmVyIj09PXR5cGVvZiBlP1MoZSkodCk6dH0seT1mdW5jdGlvbih0KXtyZXR1cm4gdCBpbnN0YW5jZW9mIHIuTm9kZVNlbGVjdGlvbn0sdz1mdW5jdGlvbih0LGUpe3JldHVybiBBcnJheS5pc0FycmF5KHQpJiZ0LmluZGV4T2YoZS50eXBlKT4tMXx8ZS50eXBlPT09dH0sYj1mdW5jdGlvbih0KXtyZXR1cm4gT2JqZWN0LmFzc2lnbihPYmplY3QuY3JlYXRlKHQpLHQpLnNldFRpbWUoRGF0ZS5ub3coKSl9LHg9ZnVuY3Rpb24odCxlKXtyZXR1cm4gZnVuY3Rpb24obil7dmFyIHI9bi5kb2Mubm9kZUF0KHQpLG89bi5kb2MucmVzb2x2ZSh0KTtpZihrKG8sZSkpe249bi5yZXBsYWNlV2l0aCh0LHQrci5ub2RlU2l6ZSxlKTt2YXIgaT1uLnNlbGVjdGlvbi4kZnJvbS5wb3MtMTtyZXR1cm4gbj1sKE1hdGgubWF4KGksMCksLTEpKG4pLG49bChuLnNlbGVjdGlvbi4kZnJvbS5zdGFydCgpKShuKSxiKG4pfXJldHVybiBufX0saz1mdW5jdGlvbih0LGUpe3ZhciBuPXQubm9kZSh0LmRlcHRoKTtyZXR1cm4gbiYmbi50eXBlLnZhbGlkQ29udGVudChlIGluc3RhbmNlb2Ygby5GcmFnbWVudD9lOm8uRnJhZ21lbnQuZnJvbShlKSl9LFM9ZnVuY3Rpb24odCl7cmV0dXJuIGZ1bmN0aW9uKGUpe3ZhciBuPWUuZG9jLm5vZGVBdCh0KTtyZXR1cm4gYihlLmRlbGV0ZSh0LHQrbi5ub2RlU2l6ZSkpfX0sQz1mdW5jdGlvbih0KXtpZih0LmNhY2hlZC50YWJsZU5vZGVUeXBlcylyZXR1cm4gdC5jYWNoZWQudGFibGVOb2RlVHlwZXM7dmFyIGU9e307cmV0dXJuIE9iamVjdC5rZXlzKHQubm9kZXMpLmZvckVhY2goKGZ1bmN0aW9uKG4pe3ZhciByPXQubm9kZXNbbl07ci5zcGVjLnRhYmxlUm9sZSYmKGVbci5zcGVjLnRhYmxlUm9sZV09cil9KSksdC5jYWNoZWQudGFibGVOb2RlVHlwZXM9ZSxlfSxPPWZ1bmN0aW9uKHQsZSl7dmFyIG49dC5pbmRleCgpO3JldHVybiBlIGluc3RhbmNlb2Ygby5GcmFnbWVudD90LnBhcmVudC5jYW5SZXBsYWNlKG4sbixlKTplIGluc3RhbmNlb2Ygby5Ob2RlJiZ0LnBhcmVudC5jYW5SZXBsYWNlV2l0aChuLG4sZS50eXBlKX0sTT1mdW5jdGlvbih0KXtyZXR1cm4hdHx8InBhcmFncmFwaCI9PT10LnR5cGUubmFtZSYmMj09PXQubm9kZVNpemV9LE49ZnVuY3Rpb24odCl7dmFyIGU9ZnVuY3Rpb24odCl7cmV0dXJuIHQudHlwZS5zcGVjLnRhYmxlUm9sZSYmL3RhYmxlL2kudGVzdCh0LnR5cGUuc3BlYy50YWJsZVJvbGUpfTtyZXR1cm4gRih0LGUpfSxUPWZ1bmN0aW9uKHQpe3ZhciBlPWFyZ3VtZW50cy5sZW5ndGg+MSYmdm9pZCAwIT09YXJndW1lbnRzWzFdP2FyZ3VtZW50c1sxXTpudWxsO3JldHVybiBlP3QuY3JlYXRlQ2hlY2tlZChudWxsLGUpOnQuY3JlYXRlQW5kRmlsbCgpfSxBPWZ1bmN0aW9uKHQpe3JldHVybiBmdW5jdGlvbihlKXtmb3IodmFyIG49aS5UYWJsZU1hcC5nZXQoZS4kYW5jaG9yQ2VsbC5ub2RlKC0xKSkscj1lLiRhbmNob3JDZWxsLnN0YXJ0KC0xKSxvPW4uY2VsbHNJblJlY3QodCkscz1uLmNlbGxzSW5SZWN0KG4ucmVjdEJldHdlZW4oZS4kYW5jaG9yQ2VsbC5wb3MtcixlLiRoZWFkQ2VsbC5wb3MtcikpLGE9MCxjPW8ubGVuZ3RoO2E8YzthKyspaWYoLTE9PT1zLmluZGV4T2Yob1thXSkpcmV0dXJuITE7cmV0dXJuITB9fSxFPWZ1bmN0aW9uKHQpe3JldHVybiB0WzBdLm1hcCgoZnVuY3Rpb24oZSxuKXtyZXR1cm4gdC5tYXAoKGZ1bmN0aW9uKHQpe3JldHVybiB0W25dfSkpfSkpfSxEPWZ1bmN0aW9uKHQpe2Zvcih2YXIgZT1pLlRhYmxlTWFwLmdldCh0KSxuPVtdLHI9MDtyPGUuaGVpZ2h0O3IrKyl7Zm9yKHZhciBvPVtdLHM9e30sYT0wO2E8ZS53aWR0aDthKyspe3ZhciBjPWUubWFwW3IqZS53aWR0aCthXSx1PXQubm9kZUF0KGMpLGw9ZS5maW5kQ2VsbChjKTtzW2NdfHxsLnRvcCE9PXI/by5wdXNoKG51bGwpOihzW2NdPSEwLG8ucHVzaCh1KSl9bi5wdXNoKG8pfXJldHVybiBufSxSPWZ1bmN0aW9uKHQsZSl7Zm9yKHZhciBuPVtdLHI9aS5UYWJsZU1hcC5nZXQodCksbz0wO288ci5oZWlnaHQ7bysrKXtmb3IodmFyIHM9dC5jaGlsZChvKSxhPVtdLGM9MDtjPHIud2lkdGg7YysrKWlmKGVbb11bY10pe3ZhciB1PXIubWFwW28qci53aWR0aCtjXSxsPWVbb11bY10saD10Lm5vZGVBdCh1KSxmPWgudHlwZS5jcmVhdGVDaGVja2VkKE9iamVjdC5hc3NpZ24oe30sbC5hdHRycyksbC5jb250ZW50LGwubWFya3MpO2EucHVzaChmKX1uLnB1c2gocy50eXBlLmNyZWF0ZUNoZWNrZWQocy5hdHRycyxhLHMubWFya3MpKX12YXIgcD10LnR5cGUuY3JlYXRlQ2hlY2tlZCh0LmF0dHJzLG4sdC5tYXJrcyk7cmV0dXJuIHB9LHo9ZnVuY3Rpb24odCxlLG4scil7dmFyIG89RShEKHQubm9kZSkpO3JldHVybiBvPUkobyxlLG4sciksbz1FKG8pLFIodC5ub2RlLG8pfSxQPWZ1bmN0aW9uKHQsZSxuLHIpe3ZhciBvPUQodC5ub2RlKTtyZXR1cm4gbz1JKG8sZSxuLHIpLFIodC5ub2RlLG8pfSxJPWZ1bmN0aW9uKHQsZSxuLHIpe3ZhciBvPWVbMF0+blswXT8tMToxLGk9dC5zcGxpY2UoZVswXSxlLmxlbmd0aCkscz1pLmxlbmd0aCUyPT09MD8xOjAsYT12b2lkIDA7cmV0dXJuIGE9LTE9PT1yJiYxPT09bz9uWzBdLTE6MT09PXImJi0xPT09bz9uW24ubGVuZ3RoLTFdLXMrMTotMT09PW8/blswXTpuW24ubGVuZ3RoLTFdLXMsdC5zcGxpY2UuYXBwbHkodCxbYSwwXS5jb25jYXQoaSkpLHR9LEI9ZnVuY3Rpb24odCxlLG4scil7dmFyIG89dD5lPy0xOjEsaT0iVGFyZ2V0IHBvc2l0aW9uIGlzIGludmFsaWQsIHlvdSBjYW4ndCBtb3ZlIHRoZSAiK3IrIiAiK3QrIiB0byAiK2UrIiwgdGhlIHRhcmdldCBjYW4ndCBiZSBzcGxpdC4gWW91IGNvdWxkIHVzZSB0cnlUb0ZpdCBvcHRpb24uIjtpZigxPT09byl7aWYoLTEhPT1uLnNsaWNlKDAsbi5sZW5ndGgtMSkuaW5kZXhPZihlKSl0aHJvdyBuZXcgRXJyb3IoaSl9ZWxzZSBpZigtMSE9PW4uc2xpY2UoMSkuaW5kZXhPZihlKSl0aHJvdyBuZXcgRXJyb3IoaSk7cmV0dXJuITB9LF89ZnVuY3Rpb24odCl7cmV0dXJuIGZ1bmN0aW9uKGUpe3ZhciBuPWUuJGZyb207cmV0dXJuIEYobix0KX19LEY9ZnVuY3Rpb24odCxlKXtmb3IodmFyIG49dC5kZXB0aDtuPjA7bi0tKXt2YXIgcj10Lm5vZGUobik7aWYoZShyKSlyZXR1cm57cG9zOm4+MD90LmJlZm9yZShuKTowLHN0YXJ0OnQuc3RhcnQobiksZGVwdGg6bixub2RlOnJ9fX0saj1mdW5jdGlvbih0LGUpe3JldHVybiBmdW5jdGlvbihuKXt2YXIgcj1fKHQpKG4pO2lmKHIpcmV0dXJuIEsoci5wb3MsZSl9fSwkPWZ1bmN0aW9uKHQpe3JldHVybiBmdW5jdGlvbihlKXtyZXR1cm4hIV8odCkoZSl9fSxWPWZ1bmN0aW9uKHQpe3JldHVybiBmdW5jdGlvbihlKXtyZXR1cm4gXygoZnVuY3Rpb24oZSl7cmV0dXJuIHcodCxlKX0pKShlKX19LEw9ZnVuY3Rpb24odCxlKXtyZXR1cm4gRih0LChmdW5jdGlvbih0KXtyZXR1cm4gdyhlLHQpfSkpfSxxPWZ1bmN0aW9uKHQpe3JldHVybiBmdW5jdGlvbihlKXtyZXR1cm4gJCgoZnVuY3Rpb24oZSl7cmV0dXJuIHcodCxlKX0pKShlKX19LEo9ZnVuY3Rpb24odCxlKXtyZXR1cm4gZnVuY3Rpb24obil7cmV0dXJuIGooKGZ1bmN0aW9uKGUpe3JldHVybiB3KHQsZSl9KSxlKShuKX19LFc9ZnVuY3Rpb24odCl7cmV0dXJuIGZ1bmN0aW9uKGUpe2lmKHkoZSkpe3ZhciBuPWUubm9kZSxyPWUuJGZyb207aWYodyh0LG4pKXJldHVybntub2RlOm4scG9zOnIucG9zLGRlcHRoOnIuZGVwdGh9fX19LEg9ZnVuY3Rpb24odCl7dmFyIGU9dC4kZnJvbS5ub2RlQmVmb3JlLG49ci5TZWxlY3Rpb24uZmluZEZyb20odC4kZnJvbSwtMSk7aWYobiYmZSl7dmFyIG89VihlLnR5cGUpKG4pO3JldHVybiBvP28ucG9zOm4uJGZyb20ucG9zfX0sSz1mdW5jdGlvbih0LGUpe3ZhciBuPWUodCkscj1uLm5vZGUuY2hpbGROb2Rlc1tuLm9mZnNldF07cmV0dXJuIG4ubm9kZS5ub2RlVHlwZT09PU5vZGUuVEVYVF9OT0RFP24ubm9kZS5wYXJlbnROb2RlOnImJnIubm9kZVR5cGUhPT1Ob2RlLlRFWFRfTk9ERT9yOm4ubm9kZX0sVT1mdW5jdGlvbih0KXt2YXIgZT0hKGFyZ3VtZW50cy5sZW5ndGg+MSYmdm9pZCAwIT09YXJndW1lbnRzWzFdKXx8YXJndW1lbnRzWzFdO2lmKCF0KXRocm93IG5ldyBFcnJvcignSW52YWxpZCAibm9kZSIgcGFyYW1ldGVyJyk7dmFyIG49W107cmV0dXJuIHQuZGVzY2VuZGFudHMoKGZ1bmN0aW9uKHQscil7aWYobi5wdXNoKHtub2RlOnQscG9zOnJ9KSwhZSlyZXR1cm4hMX0pKSxufSxHPWZ1bmN0aW9uKHQsZSxuKXtpZighdCl0aHJvdyBuZXcgRXJyb3IoJ0ludmFsaWQgIm5vZGUiIHBhcmFtZXRlcicpO2lmKCFlKXRocm93IG5ldyBFcnJvcignSW52YWxpZCAicHJlZGljYXRlIiBwYXJhbWV0ZXInKTtyZXR1cm4gVSh0LG4pLmZpbHRlcigoZnVuY3Rpb24odCl7cmV0dXJuIGUodC5ub2RlKX0pKX0sWD1mdW5jdGlvbih0LGUpe3JldHVybiBHKHQsKGZ1bmN0aW9uKHQpe3JldHVybiB0LmlzVGV4dH0pLGUpfSxZPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIEcodCwoZnVuY3Rpb24odCl7cmV0dXJuIHQuaXNJbmxpbmV9KSxlKX0sWj1mdW5jdGlvbih0LGUpe3JldHVybiBHKHQsKGZ1bmN0aW9uKHQpe3JldHVybiB0LmlzQmxvY2t9KSxlKX0sUT1mdW5jdGlvbih0LGUsbil7cmV0dXJuIEcodCwoZnVuY3Rpb24odCl7cmV0dXJuISFlKHQuYXR0cnMpfSksbil9LHR0PWZ1bmN0aW9uKHQsZSxuKXtyZXR1cm4gRyh0LChmdW5jdGlvbih0KXtyZXR1cm4gdC50eXBlPT09ZX0pLG4pfSxldD1mdW5jdGlvbih0LGUsbil7cmV0dXJuIEcodCwoZnVuY3Rpb24odCl7cmV0dXJuIGUuaXNJblNldCh0Lm1hcmtzKX0pLG4pfSxudD1mdW5jdGlvbih0LGUpe3JldHVybiEhdHQodCxlKS5sZW5ndGh9O2Z1bmN0aW9uIHJ0KHQpe2lmKEFycmF5LmlzQXJyYXkodCkpe2Zvcih2YXIgZT0wLG49QXJyYXkodC5sZW5ndGgpO2U8dC5sZW5ndGg7ZSsrKW5bZV09dFtlXTtyZXR1cm4gbn1yZXR1cm4gQXJyYXkuZnJvbSh0KX12YXIgb3Q9ZnVuY3Rpb24odCl7cmV0dXJuIF8oKGZ1bmN0aW9uKHQpe3JldHVybiB0LnR5cGUuc3BlYy50YWJsZVJvbGUmJiJ0YWJsZSI9PT10LnR5cGUuc3BlYy50YWJsZVJvbGV9KSkodCl9LGl0PWZ1bmN0aW9uKHQpe3JldHVybiB0IGluc3RhbmNlb2YgaS5DZWxsU2VsZWN0aW9ufSxzdD1mdW5jdGlvbih0KXtpZihpdCh0KSl7dmFyIGU9dC4kYW5jaG9yQ2VsbC5zdGFydCgtMSksbj1pLlRhYmxlTWFwLmdldCh0LiRhbmNob3JDZWxsLm5vZGUoLTEpKTtyZXR1cm4gbi5yZWN0QmV0d2Vlbih0LiRhbmNob3JDZWxsLnBvcy1lLHQuJGhlYWRDZWxsLnBvcy1lKX19LGF0PWZ1bmN0aW9uKHQpe3JldHVybiBmdW5jdGlvbihlKXtpZihpdChlKSl7dmFyIG49aS5UYWJsZU1hcC5nZXQoZS4kYW5jaG9yQ2VsbC5ub2RlKC0xKSk7cmV0dXJuIEEoe2xlZnQ6dCxyaWdodDp0KzEsdG9wOjAsYm90dG9tOm4uaGVpZ2h0fSkoZSl9cmV0dXJuITF9fSxjdD1mdW5jdGlvbih0KXtyZXR1cm4gZnVuY3Rpb24oZSl7aWYoaXQoZSkpe3ZhciBuPWkuVGFibGVNYXAuZ2V0KGUuJGFuY2hvckNlbGwubm9kZSgtMSkpO3JldHVybiBBKHtsZWZ0OjAscmlnaHQ6bi53aWR0aCx0b3A6dCxib3R0b206dCsxfSkoZSl9cmV0dXJuITF9fSx1dD1mdW5jdGlvbih0KXtpZihpdCh0KSl7dmFyIGU9aS5UYWJsZU1hcC5nZXQodC4kYW5jaG9yQ2VsbC5ub2RlKC0xKSk7cmV0dXJuIEEoe2xlZnQ6MCxyaWdodDplLndpZHRoLHRvcDowLGJvdHRvbTplLmhlaWdodH0pKHQpfXJldHVybiExfSxsdD1mdW5jdGlvbih0KXtyZXR1cm4gZnVuY3Rpb24oZSl7dmFyIG49b3QoZSk7aWYobil7dmFyIHI9aS5UYWJsZU1hcC5nZXQobi5ub2RlKSxvPUFycmF5LmlzQXJyYXkodCk/dDpBcnJheS5mcm9tKFt0XSk7cmV0dXJuIG8ucmVkdWNlKChmdW5jdGlvbih0LGUpe2lmKGU+PTAmJmU8PXIud2lkdGgtMSl7dmFyIG89ci5jZWxsc0luUmVjdCh7bGVmdDplLHJpZ2h0OmUrMSx0b3A6MCxib3R0b206ci5oZWlnaHR9KTtyZXR1cm4gdC5jb25jYXQoby5tYXAoKGZ1bmN0aW9uKHQpe3ZhciBlPW4ubm9kZS5ub2RlQXQodCkscj10K24uc3RhcnQ7cmV0dXJue3BvczpyLHN0YXJ0OnIrMSxub2RlOmV9fSkpKX19KSxbXSl9fX0saHQ9ZnVuY3Rpb24odCl7cmV0dXJuIGZ1bmN0aW9uKGUpe3ZhciBuPW90KGUpO2lmKG4pe3ZhciByPWkuVGFibGVNYXAuZ2V0KG4ubm9kZSksbz1BcnJheS5pc0FycmF5KHQpP3Q6QXJyYXkuZnJvbShbdF0pO3JldHVybiBvLnJlZHVjZSgoZnVuY3Rpb24odCxlKXtpZihlPj0wJiZlPD1yLmhlaWdodC0xKXt2YXIgbz1yLmNlbGxzSW5SZWN0KHtsZWZ0OjAscmlnaHQ6ci53aWR0aCx0b3A6ZSxib3R0b206ZSsxfSk7cmV0dXJuIHQuY29uY2F0KG8ubWFwKChmdW5jdGlvbih0KXt2YXIgZT1uLm5vZGUubm9kZUF0KHQpLHI9dCtuLnN0YXJ0O3JldHVybntwb3M6cixzdGFydDpyKzEsbm9kZTplfX0pKSl9fSksW10pfX19LGZ0PWZ1bmN0aW9uKHQpe3ZhciBlPW90KHQpO2lmKGUpe3ZhciBuPWkuVGFibGVNYXAuZ2V0KGUubm9kZSkscj1uLmNlbGxzSW5SZWN0KHtsZWZ0OjAscmlnaHQ6bi53aWR0aCx0b3A6MCxib3R0b206bi5oZWlnaHR9KTtyZXR1cm4gci5tYXAoKGZ1bmN0aW9uKHQpe3ZhciBuPWUubm9kZS5ub2RlQXQodCkscj10K2Uuc3RhcnQ7cmV0dXJue3BvczpyLHN0YXJ0OnIrMSxub2RlOm59fSkpfX0scHQ9ZnVuY3Rpb24odCl7cmV0dXJuIGZ1bmN0aW9uKGUsbil7cmV0dXJuIGZ1bmN0aW9uKHIpe3ZhciBvPW90KHIuc2VsZWN0aW9uKSxzPSJyb3ciPT09dDtpZihvKXt2YXIgYT1pLlRhYmxlTWFwLmdldChvLm5vZGUpO2lmKGU+PTAmJmU8KHM/YS5oZWlnaHQ6YS53aWR0aCkpe3ZhciBjPXM/MDplLHU9cz9lOjAsbD1zP2Eud2lkdGg6ZSsxLGg9cz9lKzE6YS5oZWlnaHQ7aWYobil7dmFyIGY9UHQoci5zZWxlY3Rpb24uJGZyb20pO2lmKCFmKXJldHVybiByO3ZhciBwPWEuZmluZENlbGwoZi5wb3Mtby5zdGFydCk7cz8odT1NYXRoLm1pbih1LHAudG9wKSxoPU1hdGgubWF4KGgscC5ib3R0b20pKTooYz1NYXRoLm1pbihjLHAubGVmdCksbD1NYXRoLm1heChsLHAucmlnaHQpKX12YXIgZD1hLmNlbGxzSW5SZWN0KHtsZWZ0OmMsdG9wOnUscmlnaHQ6cz9sOmMrMSxib3R0b206cz91KzE6aH0pLHY9aC11PT09MT9kOmEuY2VsbHNJblJlY3Qoe2xlZnQ6cz9jOmwtMSx0b3A6cz9oLTE6dSxyaWdodDpsLGJvdHRvbTpofSksbT1vLnN0YXJ0K2RbMF0sZz1vLnN0YXJ0K3Zbdi5sZW5ndGgtMV0seT1yLmRvYy5yZXNvbHZlKG0pLHc9ci5kb2MucmVzb2x2ZShnKTtyZXR1cm4gYihyLnNldFNlbGVjdGlvbihuZXcgaS5DZWxsU2VsZWN0aW9uKHcseSkpKX19cmV0dXJuIHJ9fX0sZHQ9cHQoImNvbHVtbiIpLHZ0PXB0KCJyb3ciKSxtdD1mdW5jdGlvbih0KXt2YXIgZT1vdCh0LnNlbGVjdGlvbik7aWYoZSl7dmFyIG49aS5UYWJsZU1hcC5nZXQoZS5ub2RlKSxyPW4ubWFwO2lmKHImJnIubGVuZ3RoKXt2YXIgbz1lLnN0YXJ0K3JbMF0scz1lLnN0YXJ0K3Jbci5sZW5ndGgtMV0sYT10LmRvYy5yZXNvbHZlKG8pLGM9dC5kb2MucmVzb2x2ZShzKTtyZXR1cm4gYih0LnNldFNlbGVjdGlvbihuZXcgaS5DZWxsU2VsZWN0aW9uKGMsYSkpKX19cmV0dXJuIHR9LGd0PWZ1bmN0aW9uKHQsZSl7cmV0dXJuIGZ1bmN0aW9uKG4pe2lmKHQpe3ZhciByPUMoZSkuY2VsbC5jcmVhdGVBbmRGaWxsKCksbz1yLmNvbnRlbnQ7aWYoIXQubm9kZS5jb250ZW50LmVxKG8pKXJldHVybiBuLnJlcGxhY2VXaXRoKHQucG9zKzEsdC5wb3MrdC5ub2RlLm5vZGVTaXplLG8pLGIobil9cmV0dXJuIG59fSx5dD1mdW5jdGlvbih0KXtyZXR1cm4gZnVuY3Rpb24oZSl7dmFyIG49b3QoZS5zZWxlY3Rpb24pO2lmKG4pe3ZhciByPWkuVGFibGVNYXAuZ2V0KG4ubm9kZSk7aWYodD49MCYmdDw9ci53aWR0aClyZXR1cm4gYihpLmFkZENvbHVtbihlLHttYXA6cix0YWJsZVN0YXJ0Om4uc3RhcnQsdGFibGU6bi5ub2RlfSx0KSl9cmV0dXJuIGV9fSx3dD1mdW5jdGlvbih0LGUsbil7cmV0dXJuIGZ1bmN0aW9uKHIpe3ZhciBvPXt0cnlUb0ZpdDohMSxkaXJlY3Rpb246MH0saT1PYmplY3QuYXNzaWduKG8sbikscz1vdChyLnNlbGVjdGlvbik7aWYoIXMpcmV0dXJuIHI7dmFyIGE9RnQodCkociksYz1hLmluZGV4ZXMsdT1GdChlKShyKSxsPXUuaW5kZXhlcztpZihjLmluZGV4T2YoZSk+LTEpcmV0dXJuIHI7IWkudHJ5VG9GaXQmJmwubGVuZ3RoPjEmJkIodCxlLGwsInJvdyIpO3ZhciBoPVAocyxjLGwsaS5kaXJlY3Rpb24pO3JldHVybiBiKHIpLnJlcGxhY2VXaXRoKHMucG9zLHMucG9zK3Mubm9kZS5ub2RlU2l6ZSxoKX19LGJ0PWZ1bmN0aW9uKHQsZSxuKXtyZXR1cm4gZnVuY3Rpb24ocil7dmFyIG89e3RyeVRvRml0OiExLGRpcmVjdGlvbjowfSxpPU9iamVjdC5hc3NpZ24obyxuKSxzPW90KHIuc2VsZWN0aW9uKTtpZighcylyZXR1cm4gcjt2YXIgYT1fdCh0KShyKSxjPWEuaW5kZXhlcyx1PV90KGUpKHIpLGw9dS5pbmRleGVzO2lmKGMuaW5kZXhPZihlKT4tMSlyZXR1cm4gcjshaS50cnlUb0ZpdCYmbC5sZW5ndGg+MSYmQih0LGUsbCwiY29sdW1uIik7dmFyIGg9eihzLGMsbCxpLmRpcmVjdGlvbik7cmV0dXJuIGIocikucmVwbGFjZVdpdGgocy5wb3Mscy5wb3Mrcy5ub2RlLm5vZGVTaXplLGgpfX0seHQ9ZnVuY3Rpb24odCxlKXtyZXR1cm4gZnVuY3Rpb24obil7dmFyIHI9b3Qobi5zZWxlY3Rpb24pO2lmKHIpe3ZhciBvPWkuVGFibGVNYXAuZ2V0KHIubm9kZSkscz10LTE7aWYoZSYmcz49MClyZXR1cm4gYihrdChzKShuKSk7aWYodD49MCYmdDw9by5oZWlnaHQpcmV0dXJuIGIoaS5hZGRSb3cobix7bWFwOm8sdGFibGVTdGFydDpyLnN0YXJ0LHRhYmxlOnIubm9kZX0sdCkpfXJldHVybiBufX0sa3Q9ZnVuY3Rpb24odCl7cmV0dXJuIGZ1bmN0aW9uKGUpe3ZhciBuPW90KGUuc2VsZWN0aW9uKTtpZihuKXt2YXIgcj1pLlRhYmxlTWFwLmdldChuLm5vZGUpO2lmKHQ+PTAmJnQ8PXIuaGVpZ2h0KXtmb3IodmFyIG89bi5ub2RlLHM9QyhvLnR5cGUuc2NoZW1hKSxhPW4uc3RhcnQsYz0wO2M8dCsxO2MrKylhKz1vLmNoaWxkKGMpLm5vZGVTaXplO3ZhciB1PW8uY2hpbGQodCksbD1bXSxoPTA7aWYodS5mb3JFYWNoKChmdW5jdGlvbih0KXsxPT09dC5hdHRycy5yb3dzcGFuJiYoaCs9dC5hdHRycy5jb2xzcGFuLGwucHVzaChzW3QudHlwZS5zcGVjLnRhYmxlUm9sZV0uY3JlYXRlQW5kRmlsbCh0LmF0dHJzLHQubWFya3MpKSl9KSksaDxyLndpZHRoKXtmb3IodmFyIGY9W10scD1mdW5jdGlvbihuKXt2YXIgcj1CdChuLChmdW5jdGlvbihlLHIpe3ZhciBvPWUubm9kZS5hdHRycy5yb3dzcGFuLGk9bitvO3JldHVybiBvPjEmJmk+dH0pKShlKTtmLnB1c2guYXBwbHkoZixydChyKSl9LHY9dDt2Pj0wO3YtLSlwKHYpO2YubGVuZ3RoJiZmLmZvckVhY2goKGZ1bmN0aW9uKHQpe2U9UnQodCx7cm93c3Bhbjp0Lm5vZGUuYXR0cnMucm93c3BhbisxfSkoZSl9KSl9cmV0dXJuIGQocy5yb3cuY3JlYXRlKHUuYXR0cnMsbCksYSkoZSl9fXJldHVybiBlfX0sU3Q9ZnVuY3Rpb24odCl7cmV0dXJuIGZ1bmN0aW9uKGUpe3ZhciBuPW90KGUuc2VsZWN0aW9uKTtpZihuKXt2YXIgcj1pLlRhYmxlTWFwLmdldChuLm5vZGUpO2lmKDA9PT10JiYxPT09ci53aWR0aClyZXR1cm4gT3QoZSk7aWYodD49MCYmdDw9ci53aWR0aClyZXR1cm4gaS5yZW1vdmVDb2x1bW4oZSx7bWFwOnIsdGFibGVTdGFydDpuLnN0YXJ0LHRhYmxlOm4ubm9kZX0sdCksYihlKX1yZXR1cm4gZX19LEN0PWZ1bmN0aW9uKHQpe3JldHVybiBmdW5jdGlvbihlKXt2YXIgbj1vdChlLnNlbGVjdGlvbik7aWYobil7dmFyIHI9aS5UYWJsZU1hcC5nZXQobi5ub2RlKTtpZigwPT09dCYmMT09PXIuaGVpZ2h0KXJldHVybiBPdChlKTtpZih0Pj0wJiZ0PD1yLmhlaWdodClyZXR1cm4gaS5yZW1vdmVSb3coZSx7bWFwOnIsdGFibGVTdGFydDpuLnN0YXJ0LHRhYmxlOm4ubm9kZX0sdCksYihlKX1yZXR1cm4gZX19LE90PWZ1bmN0aW9uKHQpe2Zvcih2YXIgZT10LnNlbGVjdGlvbi4kZnJvbSxuPWUuZGVwdGg7bj4wO24tLSl7dmFyIHI9ZS5ub2RlKG4pO2lmKCJ0YWJsZSI9PT1yLnR5cGUuc3BlYy50YWJsZVJvbGUpcmV0dXJuIGIodC5kZWxldGUoZS5iZWZvcmUobiksZS5hZnRlcihuKSkpfXJldHVybiB0fSxNdD1mdW5jdGlvbih0KXt2YXIgZT10LnNlbGVjdGlvbjtpZih1dChlKSlyZXR1cm4gT3QodCk7aWYoaXQoZSkpe3ZhciBuPW90KGUpO2lmKG4pe3ZhciByPWkuVGFibGVNYXAuZ2V0KG4ubm9kZSksbz1yLnJlY3RCZXR3ZWVuKGUuJGFuY2hvckNlbGwucG9zLW4uc3RhcnQsZS4kaGVhZENlbGwucG9zLW4uc3RhcnQpO2lmKDA9PW8ubGVmdCYmby5yaWdodD09ci53aWR0aClyZXR1cm4hMTtmb3IodmFyIHM9T2JqZWN0LmFzc2lnbih7fSxvLHttYXA6cix0YWJsZTpuLm5vZGUsdGFibGVTdGFydDpuLnN0YXJ0fSksYT1zLnJpZ2h0LTE7O2EtLSl7aWYoaS5yZW1vdmVDb2x1bW4odCxzLGEpLGE9PT1zLmxlZnQpYnJlYWs7cy50YWJsZT1zLnRhYmxlU3RhcnQ/dC5kb2Mubm9kZUF0KHMudGFibGVTdGFydC0xKTp0LmRvYyxzLm1hcD1pLlRhYmxlTWFwLmdldChzLnRhYmxlKX1yZXR1cm4gYih0KX19cmV0dXJuIHR9LE50PWZ1bmN0aW9uKHQpe3ZhciBlPXQuc2VsZWN0aW9uO2lmKHV0KGUpKXJldHVybiBPdCh0KTtpZihpdChlKSl7dmFyIG49b3QoZSk7aWYobil7dmFyIHI9aS5UYWJsZU1hcC5nZXQobi5ub2RlKSxvPXIucmVjdEJldHdlZW4oZS4kYW5jaG9yQ2VsbC5wb3Mtbi5zdGFydCxlLiRoZWFkQ2VsbC5wb3Mtbi5zdGFydCk7aWYoMD09by50b3AmJm8uYm90dG9tPT1yLmhlaWdodClyZXR1cm4hMTtmb3IodmFyIHM9T2JqZWN0LmFzc2lnbih7fSxvLHttYXA6cix0YWJsZTpuLm5vZGUsdGFibGVTdGFydDpuLnN0YXJ0fSksYT1zLmJvdHRvbS0xOzthLS0pe2lmKGkucmVtb3ZlUm93KHQscyxhKSxhPT09cy50b3ApYnJlYWs7cy50YWJsZT1zLnRhYmxlU3RhcnQ/dC5kb2Mubm9kZUF0KHMudGFibGVTdGFydC0xKTp0LmRvYyxzLm1hcD1pLlRhYmxlTWFwLmdldChzLnRhYmxlKX1yZXR1cm4gYih0KX19cmV0dXJuIHR9LFR0PWZ1bmN0aW9uKHQpe3JldHVybiBmdW5jdGlvbihlKXt2YXIgbj1JdCh0KTtyZXR1cm4gbj9TdChuLmxlZnQpKGwodC5wb3MpKGUpKTplfX0sQXQ9ZnVuY3Rpb24odCl7cmV0dXJuIGZ1bmN0aW9uKGUpe3ZhciBuPUl0KHQpO3JldHVybiBuP0N0KG4udG9wKShsKHQucG9zKShlKSk6ZX19LEV0PWZ1bmN0aW9uKHQsZSxuKXtyZXR1cm4gZnVuY3Rpb24obyl7dmFyIGk9bHQodCkoby5zZWxlY3Rpb24pO2lmKGkpe2Zvcih2YXIgcz1pLmxlbmd0aC0xO3M+PTA7cy0tKW89ZShpW3NdLG8pO2lmKG4pe3ZhciBhPW8uZG9jLnJlc29sdmUoby5tYXBwaW5nLm1hcChpW2kubGVuZ3RoLTFdLnBvcykpO28uc2V0U2VsZWN0aW9uKHIuU2VsZWN0aW9uLm5lYXIoYSkpfXJldHVybiBiKG8pfXJldHVybiBvfX0sRHQ9ZnVuY3Rpb24odCxlLG4pe3JldHVybiBmdW5jdGlvbihvKXt2YXIgaT1odCh0KShvLnNlbGVjdGlvbik7aWYoaSl7Zm9yKHZhciBzPWkubGVuZ3RoLTE7cz49MDtzLS0pbz1lKGlbc10sbyk7aWYobil7dmFyIGE9by5kb2MucmVzb2x2ZShvLm1hcHBpbmcubWFwKGlbaS5sZW5ndGgtMV0ucG9zKSk7by5zZXRTZWxlY3Rpb24oci5TZWxlY3Rpb24ubmVhcihhKSl9fXJldHVybiBvfX0sUnQ9ZnVuY3Rpb24odCxlKXtyZXR1cm4gZnVuY3Rpb24obil7cmV0dXJuIHQ/KG4uc2V0Tm9kZU1hcmt1cCh0LnBvcyxudWxsLE9iamVjdC5hc3NpZ24oe30sdC5ub2RlLmF0dHJzLGUpKSxiKG4pKTpufX0senQ9ZnVuY3Rpb24odCl7Zm9yKHZhciBlPWFyZ3VtZW50cy5sZW5ndGg+MSYmdm9pZCAwIT09YXJndW1lbnRzWzFdP2FyZ3VtZW50c1sxXTozLG49YXJndW1lbnRzLmxlbmd0aD4yJiZ2b2lkIDAhPT1hcmd1bWVudHNbMl0/YXJndW1lbnRzWzJdOjMscj0hKGFyZ3VtZW50cy5sZW5ndGg+MyYmdm9pZCAwIT09YXJndW1lbnRzWzNdKXx8YXJndW1lbnRzWzNdLG89YXJndW1lbnRzLmxlbmd0aD40JiZ2b2lkIDAhPT1hcmd1bWVudHNbNF0/YXJndW1lbnRzWzRdOm51bGwsaT1DKHQpLHM9aS5jZWxsLGE9aS5oZWFkZXJfY2VsbCxjPWkucm93LHU9aS50YWJsZSxsPVtdLGg9W10sZj0wO2Y8bjtmKyspbC5wdXNoKFQocyxvKSksciYmaC5wdXNoKFQoYSxvKSk7Zm9yKHZhciBwPVtdLGQ9MDtkPGU7ZCsrKXAucHVzaChjLmNyZWF0ZUNoZWNrZWQobnVsbCxyJiYwPT09ZD9oOmwpKTtyZXR1cm4gdS5jcmVhdGVDaGVja2VkKG51bGwscCl9LFB0PWZ1bmN0aW9uKHQpe3ZhciBlPWZ1bmN0aW9uKHQpe3JldHVybiB0LnR5cGUuc3BlYy50YWJsZVJvbGUmJi9jZWxsL2kudGVzdCh0LnR5cGUuc3BlYy50YWJsZVJvbGUpfTtyZXR1cm4gRih0LGUpfSxJdD1mdW5jdGlvbih0KXt2YXIgZT1QdCh0KTtpZihlKXt2YXIgbj1OKHQpLHI9aS5UYWJsZU1hcC5nZXQobi5ub2RlKSxvPWUucG9zLW4uc3RhcnQ7cmV0dXJuIHIucmVjdEJldHdlZW4obyxvKX19LEJ0PWZ1bmN0aW9uKHQsZSl7cmV0dXJuIGZ1bmN0aW9uKG4pe3ZhciByPVtdLG89aHQodCkobi5zZWxlY3Rpb24pO2lmKG8pZm9yKHZhciBpPW8ubGVuZ3RoLTE7aT49MDtpLS0pZShvW2ldLG4pJiZyLnB1c2gob1tpXSk7cmV0dXJuIHJ9fSxfdD1mdW5jdGlvbih0KXtyZXR1cm4gZnVuY3Rpb24oZSl7Zm9yKHZhciBuPXQscj10LG89ZnVuY3Rpb24odCl7dmFyIG89bHQodCkoZS5zZWxlY3Rpb24pO28mJm8uZm9yRWFjaCgoZnVuY3Rpb24oZSl7dmFyIG89ZS5ub2RlLmF0dHJzLmNvbHNwYW4rdC0xO28+PW4mJihuPXQpLG8+ciYmKHI9byl9KSl9LGk9dDtpPj0wO2ktLSlvKGkpO3ZhciBzPWZ1bmN0aW9uKHQpe3ZhciBuPWx0KHQpKGUuc2VsZWN0aW9uKTtuJiZuLmZvckVhY2goKGZ1bmN0aW9uKGUpe3ZhciBuPWUubm9kZS5hdHRycy5jb2xzcGFuK3QtMTtlLm5vZGUuYXR0cnMuY29sc3Bhbj4xJiZuPnImJihyPW4pfSkpfTtmb3IoaT10O2k8PXI7aSsrKXMoaSk7dmFyIGE9W107Zm9yKGk9bjtpPD1yO2krKyl7dmFyIGM9bHQoaSkoZS5zZWxlY3Rpb24pO2MmJmMubGVuZ3RoJiZhLnB1c2goaSl9bj1hWzBdLHI9YVthLmxlbmd0aC0xXTtmb3IodmFyIHU9bHQobikoZS5zZWxlY3Rpb24pLGw9aHQoMCkoZS5zZWxlY3Rpb24pLGg9ZS5kb2MucmVzb2x2ZSh1W3UubGVuZ3RoLTFdLnBvcyksZj12b2lkIDAscD1yO3A+PW47cC0tKXt2YXIgZD1sdChwKShlLnNlbGVjdGlvbik7aWYoZCYmZC5sZW5ndGgpe2Zvcih2YXIgdj1sLmxlbmd0aC0xO3Y+PTA7di0tKWlmKGxbdl0ucG9zPT09ZFswXS5wb3Mpe2Y9ZFswXTticmVha31pZihmKWJyZWFrfX12YXIgbT1lLmRvYy5yZXNvbHZlKGYucG9zKTtyZXR1cm57JGFuY2hvcjpoLCRoZWFkOm0saW5kZXhlczphfX19LEZ0PWZ1bmN0aW9uKHQpe3JldHVybiBmdW5jdGlvbihlKXtmb3IodmFyIG49dCxyPXQsbz1mdW5jdGlvbih0KXt2YXIgbz1odCh0KShlLnNlbGVjdGlvbik7by5mb3JFYWNoKChmdW5jdGlvbihlKXt2YXIgbz1lLm5vZGUuYXR0cnMucm93c3Bhbit0LTE7bz49biYmKG49dCksbz5yJiYocj1vKX0pKX0saT10O2k+PTA7aS0tKW8oaSk7dmFyIHM9ZnVuY3Rpb24odCl7dmFyIG49aHQodCkoZS5zZWxlY3Rpb24pO24uZm9yRWFjaCgoZnVuY3Rpb24oZSl7dmFyIG49ZS5ub2RlLmF0dHJzLnJvd3NwYW4rdC0xO2Uubm9kZS5hdHRycy5yb3dzcGFuPjEmJm4+ciYmKHI9bil9KSl9O2ZvcihpPXQ7aTw9cjtpKyspcyhpKTt2YXIgYT1bXTtmb3IoaT1uO2k8PXI7aSsrKXt2YXIgYz1odChpKShlLnNlbGVjdGlvbik7YyYmYy5sZW5ndGgmJmEucHVzaChpKX1uPWFbMF0scj1hW2EubGVuZ3RoLTFdO2Zvcih2YXIgdT1odChuKShlLnNlbGVjdGlvbiksbD1sdCgwKShlLnNlbGVjdGlvbiksaD1lLmRvYy5yZXNvbHZlKHVbdS5sZW5ndGgtMV0ucG9zKSxmPXZvaWQgMCxwPXI7cD49bjtwLS0pe3ZhciBkPWh0KHApKGUuc2VsZWN0aW9uKTtpZihkJiZkLmxlbmd0aCl7Zm9yKHZhciB2PWwubGVuZ3RoLTE7dj49MDt2LS0paWYobFt2XS5wb3M9PT1kWzBdLnBvcyl7Zj1kWzBdO2JyZWFrfWlmKGYpYnJlYWt9fXZhciBtPWUuZG9jLnJlc29sdmUoZi5wb3MpO3JldHVybnskYW5jaG9yOmgsJGhlYWQ6bSxpbmRleGVzOmF9fX07ZS5pc05vZGVTZWxlY3Rpb249eSxlLmNhbkluc2VydD1PLGUuY29udmVydFRhYmxlTm9kZVRvQXJyYXlPZlJvd3M9RCxlLmNvbnZlcnRBcnJheU9mUm93c1RvVGFibGVOb2RlPVIsZS5maW5kUGFyZW50Tm9kZT1fLGUuZmluZFBhcmVudE5vZGVDbG9zZXN0VG9Qb3M9RixlLmZpbmRQYXJlbnREb21SZWY9aixlLmhhc1BhcmVudE5vZGU9JCxlLmZpbmRQYXJlbnROb2RlT2ZUeXBlPVYsZS5maW5kUGFyZW50Tm9kZU9mVHlwZUNsb3Nlc3RUb1Bvcz1MLGUuaGFzUGFyZW50Tm9kZU9mVHlwZT1xLGUuZmluZFBhcmVudERvbVJlZk9mVHlwZT1KLGUuZmluZFNlbGVjdGVkTm9kZU9mVHlwZT1XLGUuZmluZFBvc2l0aW9uT2ZOb2RlQmVmb3JlPUgsZS5maW5kRG9tUmVmQXRQb3M9SyxlLmZsYXR0ZW49VSxlLmZpbmRDaGlsZHJlbj1HLGUuZmluZFRleHROb2Rlcz1YLGUuZmluZElubGluZU5vZGVzPVksZS5maW5kQmxvY2tOb2Rlcz1aLGUuZmluZENoaWxkcmVuQnlBdHRyPVEsZS5maW5kQ2hpbGRyZW5CeVR5cGU9dHQsZS5maW5kQ2hpbGRyZW5CeU1hcms9ZXQsZS5jb250YWlucz1udCxlLmZpbmRUYWJsZT1vdCxlLmlzQ2VsbFNlbGVjdGlvbj1pdCxlLmdldFNlbGVjdGlvblJlY3Q9c3QsZS5pc0NvbHVtblNlbGVjdGVkPWF0LGUuaXNSb3dTZWxlY3RlZD1jdCxlLmlzVGFibGVTZWxlY3RlZD11dCxlLmdldENlbGxzSW5Db2x1bW49bHQsZS5nZXRDZWxsc0luUm93PWh0LGUuZ2V0Q2VsbHNJblRhYmxlPWZ0LGUuc2VsZWN0Q29sdW1uPWR0LGUuc2VsZWN0Um93PXZ0LGUuc2VsZWN0VGFibGU9bXQsZS5lbXB0eUNlbGw9Z3QsZS5hZGRDb2x1bW5BdD15dCxlLm1vdmVSb3c9d3QsZS5tb3ZlQ29sdW1uPWJ0LGUuYWRkUm93QXQ9eHQsZS5jbG9uZVJvd0F0PWt0LGUucmVtb3ZlQ29sdW1uQXQ9U3QsZS5yZW1vdmVSb3dBdD1DdCxlLnJlbW92ZVRhYmxlPU90LGUucmVtb3ZlU2VsZWN0ZWRDb2x1bW5zPU10LGUucmVtb3ZlU2VsZWN0ZWRSb3dzPU50LGUucmVtb3ZlQ29sdW1uQ2xvc2VzdFRvUG9zPVR0LGUucmVtb3ZlUm93Q2xvc2VzdFRvUG9zPUF0LGUuZm9yRWFjaENlbGxJbkNvbHVtbj1FdCxlLmZvckVhY2hDZWxsSW5Sb3c9RHQsZS5zZXRDZWxsQXR0cnM9UnQsZS5jcmVhdGVUYWJsZT16dCxlLmZpbmRDZWxsQ2xvc2VzdFRvUG9zPVB0LGUuZmluZENlbGxSZWN0Q2xvc2VzdFRvUG9zPUl0LGUuZ2V0U2VsZWN0aW9uUmFuZ2VJbkNvbHVtbj1fdCxlLmdldFNlbGVjdGlvblJhbmdlSW5Sb3c9RnQsZS5yZW1vdmVQYXJlbnROb2RlT2ZUeXBlPXMsZS5yZXBsYWNlUGFyZW50Tm9kZU9mVHlwZT1hLGUucmVtb3ZlU2VsZWN0ZWROb2RlPWMsZS5yZXBsYWNlU2VsZWN0ZWROb2RlPXUsZS5zZXRUZXh0U2VsZWN0aW9uPWwsZS5zYWZlSW5zZXJ0PWQsZS5zZXRQYXJlbnROb2RlTWFya3VwPXYsZS5zZWxlY3RQYXJlbnROb2RlT2ZUeXBlPW0sZS5yZW1vdmVOb2RlQmVmb3JlPWd9LGVmZGY6ZnVuY3Rpb24odCxlLG4peyJ1c2Ugc3RyaWN0IjtPYmplY3QuZGVmaW5lUHJvcGVydHkoZSwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSk7dmFyIHI9bigiNTMxMyIpLG89bigiMzZjNyIpLGk9bigiNTViZSIpLHM9ZnVuY3Rpb24odCl7cmV0dXJuIGZ1bmN0aW9uKGUpe3ZhciBuPVYodCkoZS5zZWxlY3Rpb24pO3JldHVybiBuP1Mobi5wb3MpKGUpOmV9fSxhPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIGZ1bmN0aW9uKG4pe0FycmF5LmlzQXJyYXkodCl8fCh0PVt0XSk7Zm9yKHZhciByPTAsbz10Lmxlbmd0aDtyPG87cisrKXt2YXIgaT1WKHRbcl0pKG4uc2VsZWN0aW9uKTtpZihpKXt2YXIgcz14KGkucG9zLGUpKG4pO2lmKHMhPT1uKXJldHVybiBzfX1yZXR1cm4gbn19LGM9ZnVuY3Rpb24odCl7aWYoeSh0LnNlbGVjdGlvbikpe3ZhciBlPXQuc2VsZWN0aW9uLiRmcm9tLnBvcyxuPXQuc2VsZWN0aW9uLiR0by5wb3M7cmV0dXJuIGIodC5kZWxldGUoZSxuKSl9cmV0dXJuIHR9LHU9ZnVuY3Rpb24odCl7cmV0dXJuIGZ1bmN0aW9uKGUpe2lmKHkoZS5zZWxlY3Rpb24pKXt2YXIgbj1lLnNlbGVjdGlvbixpPW4uJGZyb20scz1uLiR0bztpZih0IGluc3RhbmNlb2Ygby5GcmFnbWVudCYmaS5wYXJlbnQuY2FuUmVwbGFjZShpLmluZGV4KCksaS5pbmRleEFmdGVyKCksdCl8fGkucGFyZW50LmNhblJlcGxhY2VXaXRoKGkuaW5kZXgoKSxpLmluZGV4QWZ0ZXIoKSx0LnR5cGUpKXJldHVybiBiKGUucmVwbGFjZVdpdGgoaS5wb3Mscy5wb3MsdCkuc2V0U2VsZWN0aW9uKG5ldyByLk5vZGVTZWxlY3Rpb24oZS5kb2MucmVzb2x2ZShpLnBvcykpKSl9cmV0dXJuIGV9fSxsPWZ1bmN0aW9uKHQpe3ZhciBlPWFyZ3VtZW50cy5sZW5ndGg+MSYmdm9pZCAwIT09YXJndW1lbnRzWzFdP2FyZ3VtZW50c1sxXToxO3JldHVybiBmdW5jdGlvbihuKXt2YXIgbz1yLlNlbGVjdGlvbi5maW5kRnJvbShuLmRvYy5yZXNvbHZlKHQpLGUsITApO3JldHVybiBvP24uc2V0U2VsZWN0aW9uKG8pOm59fSxoPWZ1bmN0aW9uKHQpe3JldHVybiB0LnR5cGUmJnQudHlwZS5zcGVjLnNlbGVjdGFibGV9LGY9ZnVuY3Rpb24odCl7cmV0dXJuIGgodCkmJnQudHlwZS5pc0xlYWZ9LHA9ZnVuY3Rpb24odCxlLG4pe3JldHVybiBmKHQpP24uc2V0U2VsZWN0aW9uKG5ldyByLk5vZGVTZWxlY3Rpb24obi5kb2MucmVzb2x2ZShlKSkpOmwoZSkobil9LGQ9ZnVuY3Rpb24odCxlLG4pe3JldHVybiBmdW5jdGlvbihyKXt2YXIgbz0ibnVtYmVyIj09PXR5cGVvZiBlLGk9ci5zZWxlY3Rpb24uJGZyb20scz1vP3IuZG9jLnJlc29sdmUoZSk6eShyLnNlbGVjdGlvbik/ci5kb2MucmVzb2x2ZShpLnBvcysxKTppLGM9cy5wYXJlbnQ7aWYoeShyLnNlbGVjdGlvbikmJm4pe3ZhciBsPXI7aWYocj11KHQpKHIpLGwhPT1yKXJldHVybiByfWlmKE0oYykpe3ZhciBmPXI7aWYocj1hKGMudHlwZSx0KShyKSxmIT09cil7dmFyIGQ9aCh0KT9zLmJlZm9yZShzLmRlcHRoKTpzLnBvcztyZXR1cm4gcCh0LGQscil9fWlmKE8ocyx0KSl7ci5pbnNlcnQocy5wb3MsdCk7dmFyIHY9bz9zLnBvczpoKHQpP3Iuc2VsZWN0aW9uLiRhbmNob3IucG9zLTE6ci5zZWxlY3Rpb24uJGFuY2hvci5wb3M7cmV0dXJuIGIocCh0LHYscikpfWZvcih2YXIgbT1zLmRlcHRoO20+MDttLS0pe3ZhciBnPXMuYWZ0ZXIobSksdz1yLmRvYy5yZXNvbHZlKGcpO2lmKE8odyx0KSlyZXR1cm4gci5pbnNlcnQoZyx0KSxiKHAodCxnLHIpKX1yZXR1cm4gcn19LHY9ZnVuY3Rpb24odCxlLG4scil7cmV0dXJuIGZ1bmN0aW9uKG8pe3ZhciBpPVYodCkoby5zZWxlY3Rpb24pO3JldHVybiBpP2Ioby5zZXROb2RlTWFya3VwKGkucG9zLGUsT2JqZWN0LmFzc2lnbih7fSxpLm5vZGUuYXR0cnMsbikscikpOm99fSxtPWZ1bmN0aW9uKHQpe3JldHVybiBmdW5jdGlvbihlKXtpZigheShlLnNlbGVjdGlvbikpe3ZhciBuPVYodCkoZS5zZWxlY3Rpb24pO2lmKG4pcmV0dXJuIGIoZS5zZXRTZWxlY3Rpb24oci5Ob2RlU2VsZWN0aW9uLmNyZWF0ZShlLmRvYyxuLnBvcykpKX1yZXR1cm4gZX19LGc9ZnVuY3Rpb24odCl7dmFyIGU9SCh0LnNlbGVjdGlvbik7cmV0dXJuIm51bWJlciI9PT10eXBlb2YgZT9TKGUpKHQpOnR9LHk9ZnVuY3Rpb24odCl7cmV0dXJuIHQgaW5zdGFuY2VvZiByLk5vZGVTZWxlY3Rpb259LHc9ZnVuY3Rpb24odCxlKXtyZXR1cm4gQXJyYXkuaXNBcnJheSh0KSYmdC5pbmRleE9mKGUudHlwZSk+LTF8fGUudHlwZT09PXR9LGI9ZnVuY3Rpb24odCl7cmV0dXJuIE9iamVjdC5hc3NpZ24oT2JqZWN0LmNyZWF0ZSh0KSx0KS5zZXRUaW1lKERhdGUubm93KCkpfSx4PWZ1bmN0aW9uKHQsZSl7cmV0dXJuIGZ1bmN0aW9uKG4pe3ZhciByPW4uZG9jLm5vZGVBdCh0KSxvPW4uZG9jLnJlc29sdmUodCk7aWYoayhvLGUpKXtuPW4ucmVwbGFjZVdpdGgodCx0K3Iubm9kZVNpemUsZSk7dmFyIGk9bi5zZWxlY3Rpb24uJGZyb20ucG9zLTE7cmV0dXJuIG49bChNYXRoLm1heChpLDApLC0xKShuKSxuPWwobi5zZWxlY3Rpb24uJGZyb20uc3RhcnQoKSkobiksYihuKX1yZXR1cm4gbn19LGs9ZnVuY3Rpb24odCxlKXt2YXIgbj10Lm5vZGUodC5kZXB0aCk7cmV0dXJuIG4mJm4udHlwZS52YWxpZENvbnRlbnQoZSBpbnN0YW5jZW9mIG8uRnJhZ21lbnQ/ZTpvLkZyYWdtZW50LmZyb20oZSkpfSxTPWZ1bmN0aW9uKHQpe3JldHVybiBmdW5jdGlvbihlKXt2YXIgbj1lLmRvYy5ub2RlQXQodCk7cmV0dXJuIGIoZS5kZWxldGUodCx0K24ubm9kZVNpemUpKX19LEM9ZnVuY3Rpb24odCl7aWYodC5jYWNoZWQudGFibGVOb2RlVHlwZXMpcmV0dXJuIHQuY2FjaGVkLnRhYmxlTm9kZVR5cGVzO3ZhciBlPXt9O3JldHVybiBPYmplY3Qua2V5cyh0Lm5vZGVzKS5mb3JFYWNoKChmdW5jdGlvbihuKXt2YXIgcj10Lm5vZGVzW25dO3Iuc3BlYy50YWJsZVJvbGUmJihlW3Iuc3BlYy50YWJsZVJvbGVdPXIpfSkpLHQuY2FjaGVkLnRhYmxlTm9kZVR5cGVzPWUsZX0sTz1mdW5jdGlvbih0LGUpe3ZhciBuPXQuaW5kZXgoKTtyZXR1cm4gZSBpbnN0YW5jZW9mIG8uRnJhZ21lbnQ/dC5wYXJlbnQuY2FuUmVwbGFjZShuLG4sZSk6ZSBpbnN0YW5jZW9mIG8uTm9kZSYmdC5wYXJlbnQuY2FuUmVwbGFjZVdpdGgobixuLGUudHlwZSl9LE09ZnVuY3Rpb24odCl7cmV0dXJuIXR8fCJwYXJhZ3JhcGgiPT09dC50eXBlLm5hbWUmJjI9PT10Lm5vZGVTaXplfSxOPWZ1bmN0aW9uKHQpe3ZhciBlPWZ1bmN0aW9uKHQpe3JldHVybiB0LnR5cGUuc3BlYy50YWJsZVJvbGUmJi90YWJsZS9pLnRlc3QodC50eXBlLnNwZWMudGFibGVSb2xlKX07cmV0dXJuIEYodCxlKX0sVD1mdW5jdGlvbih0KXt2YXIgZT1hcmd1bWVudHMubGVuZ3RoPjEmJnZvaWQgMCE9PWFyZ3VtZW50c1sxXT9hcmd1bWVudHNbMV06bnVsbDtyZXR1cm4gZT90LmNyZWF0ZUNoZWNrZWQobnVsbCxlKTp0LmNyZWF0ZUFuZEZpbGwoKX0sQT1mdW5jdGlvbih0KXtyZXR1cm4gZnVuY3Rpb24oZSl7Zm9yKHZhciBuPWkuVGFibGVNYXAuZ2V0KGUuJGFuY2hvckNlbGwubm9kZSgtMSkpLHI9ZS4kYW5jaG9yQ2VsbC5zdGFydCgtMSksbz1uLmNlbGxzSW5SZWN0KHQpLHM9bi5jZWxsc0luUmVjdChuLnJlY3RCZXR3ZWVuKGUuJGFuY2hvckNlbGwucG9zLXIsZS4kaGVhZENlbGwucG9zLXIpKSxhPTAsYz1vLmxlbmd0aDthPGM7YSsrKWlmKC0xPT09cy5pbmRleE9mKG9bYV0pKXJldHVybiExO3JldHVybiEwfX0sRT1mdW5jdGlvbih0KXtyZXR1cm4gdFswXS5tYXAoKGZ1bmN0aW9uKGUsbil7cmV0dXJuIHQubWFwKChmdW5jdGlvbih0KXtyZXR1cm4gdFtuXX0pKX0pKX0sRD1mdW5jdGlvbih0KXtmb3IodmFyIGU9aS5UYWJsZU1hcC5nZXQodCksbj1bXSxyPTA7cjxlLmhlaWdodDtyKyspe2Zvcih2YXIgbz1bXSxzPXt9LGE9MDthPGUud2lkdGg7YSsrKXt2YXIgYz1lLm1hcFtyKmUud2lkdGgrYV0sdT10Lm5vZGVBdChjKSxsPWUuZmluZENlbGwoYyk7c1tjXXx8bC50b3AhPT1yP28ucHVzaChudWxsKTooc1tjXT0hMCxvLnB1c2godSkpfW4ucHVzaChvKX1yZXR1cm4gbn0sUj1mdW5jdGlvbih0LGUpe2Zvcih2YXIgbj1bXSxyPWkuVGFibGVNYXAuZ2V0KHQpLG89MDtvPHIuaGVpZ2h0O28rKyl7Zm9yKHZhciBzPXQuY2hpbGQobyksYT1bXSxjPTA7YzxyLndpZHRoO2MrKylpZihlW29dW2NdKXt2YXIgdT1yLm1hcFtvKnIud2lkdGgrY10sbD1lW29dW2NdLGg9dC5ub2RlQXQodSksZj1oLnR5cGUuY3JlYXRlQ2hlY2tlZChPYmplY3QuYXNzaWduKHt9LGwuYXR0cnMpLGwuY29udGVudCxsLm1hcmtzKTthLnB1c2goZil9bi5wdXNoKHMudHlwZS5jcmVhdGVDaGVja2VkKHMuYXR0cnMsYSxzLm1hcmtzKSl9dmFyIHA9dC50eXBlLmNyZWF0ZUNoZWNrZWQodC5hdHRycyxuLHQubWFya3MpO3JldHVybiBwfSx6PWZ1bmN0aW9uKHQsZSxuLHIpe3ZhciBvPUUoRCh0Lm5vZGUpKTtyZXR1cm4gbz1JKG8sZSxuLHIpLG89RShvKSxSKHQubm9kZSxvKX0sUD1mdW5jdGlvbih0LGUsbixyKXt2YXIgbz1EKHQubm9kZSk7cmV0dXJuIG89SShvLGUsbixyKSxSKHQubm9kZSxvKX0sST1mdW5jdGlvbih0LGUsbixyKXt2YXIgbz1lWzBdPm5bMF0/LTE6MSxpPXQuc3BsaWNlKGVbMF0sZS5sZW5ndGgpLHM9aS5sZW5ndGglMj09PTA/MTowLGE9dm9pZCAwO3JldHVybiBhPS0xPT09ciYmMT09PW8/blswXS0xOjE9PT1yJiYtMT09PW8/bltuLmxlbmd0aC0xXS1zKzE6LTE9PT1vP25bMF06bltuLmxlbmd0aC0xXS1zLHQuc3BsaWNlLmFwcGx5KHQsW2EsMF0uY29uY2F0KGkpKSx0fSxCPWZ1bmN0aW9uKHQsZSxuLHIpe3ZhciBvPXQ+ZT8tMToxLGk9IlRhcmdldCBwb3NpdGlvbiBpcyBpbnZhbGlkLCB5b3UgY2FuJ3QgbW92ZSB0aGUgIityKyIgIit0KyIgdG8gIitlKyIsIHRoZSB0YXJnZXQgY2FuJ3QgYmUgc3BsaXQuIFlvdSBjb3VsZCB1c2UgdHJ5VG9GaXQgb3B0aW9uLiI7aWYoMT09PW8pe2lmKC0xIT09bi5zbGljZSgwLG4ubGVuZ3RoLTEpLmluZGV4T2YoZSkpdGhyb3cgbmV3IEVycm9yKGkpfWVsc2UgaWYoLTEhPT1uLnNsaWNlKDEpLmluZGV4T2YoZSkpdGhyb3cgbmV3IEVycm9yKGkpO3JldHVybiEwfSxfPWZ1bmN0aW9uKHQpe3JldHVybiBmdW5jdGlvbihlKXt2YXIgbj1lLiRmcm9tO3JldHVybiBGKG4sdCl9fSxGPWZ1bmN0aW9uKHQsZSl7Zm9yKHZhciBuPXQuZGVwdGg7bj4wO24tLSl7dmFyIHI9dC5ub2RlKG4pO2lmKGUocikpcmV0dXJue3BvczpuPjA/dC5iZWZvcmUobik6MCxzdGFydDp0LnN0YXJ0KG4pLGRlcHRoOm4sbm9kZTpyfX19LGo9ZnVuY3Rpb24odCxlKXtyZXR1cm4gZnVuY3Rpb24obil7dmFyIHI9Xyh0KShuKTtpZihyKXJldHVybiBLKHIucG9zLGUpfX0sJD1mdW5jdGlvbih0KXtyZXR1cm4gZnVuY3Rpb24oZSl7cmV0dXJuISFfKHQpKGUpfX0sVj1mdW5jdGlvbih0KXtyZXR1cm4gZnVuY3Rpb24oZSl7cmV0dXJuIF8oKGZ1bmN0aW9uKGUpe3JldHVybiB3KHQsZSl9KSkoZSl9fSxMPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIEYodCwoZnVuY3Rpb24odCl7cmV0dXJuIHcoZSx0KX0pKX0scT1mdW5jdGlvbih0KXtyZXR1cm4gZnVuY3Rpb24oZSl7cmV0dXJuICQoKGZ1bmN0aW9uKGUpe3JldHVybiB3KHQsZSl9KSkoZSl9fSxKPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIGZ1bmN0aW9uKG4pe3JldHVybiBqKChmdW5jdGlvbihlKXtyZXR1cm4gdyh0LGUpfSksZSkobil9fSxXPWZ1bmN0aW9uKHQpe3JldHVybiBmdW5jdGlvbihlKXtpZih5KGUpKXt2YXIgbj1lLm5vZGUscj1lLiRmcm9tO2lmKHcodCxuKSlyZXR1cm57bm9kZTpuLHBvczpyLnBvcyxkZXB0aDpyLmRlcHRofX19fSxIPWZ1bmN0aW9uKHQpe3ZhciBlPXQuJGZyb20ubm9kZUJlZm9yZSxuPXIuU2VsZWN0aW9uLmZpbmRGcm9tKHQuJGZyb20sLTEpO2lmKG4mJmUpe3ZhciBvPVYoZS50eXBlKShuKTtyZXR1cm4gbz9vLnBvczpuLiRmcm9tLnBvc319LEs9ZnVuY3Rpb24odCxlKXt2YXIgbj1lKHQpLHI9bi5ub2RlLmNoaWxkTm9kZXNbbi5vZmZzZXRdO3JldHVybiBuLm5vZGUubm9kZVR5cGU9PT1Ob2RlLlRFWFRfTk9ERT9uLm5vZGUucGFyZW50Tm9kZTpyJiZyLm5vZGVUeXBlIT09Tm9kZS5URVhUX05PREU/cjpuLm5vZGV9LFU9ZnVuY3Rpb24odCl7dmFyIGU9IShhcmd1bWVudHMubGVuZ3RoPjEmJnZvaWQgMCE9PWFyZ3VtZW50c1sxXSl8fGFyZ3VtZW50c1sxXTtpZighdCl0aHJvdyBuZXcgRXJyb3IoJ0ludmFsaWQgIm5vZGUiIHBhcmFtZXRlcicpO3ZhciBuPVtdO3JldHVybiB0LmRlc2NlbmRhbnRzKChmdW5jdGlvbih0LHIpe2lmKG4ucHVzaCh7bm9kZTp0LHBvczpyfSksIWUpcmV0dXJuITF9KSksbn0sRz1mdW5jdGlvbih0LGUsbil7aWYoIXQpdGhyb3cgbmV3IEVycm9yKCdJbnZhbGlkICJub2RlIiBwYXJhbWV0ZXInKTtpZighZSl0aHJvdyBuZXcgRXJyb3IoJ0ludmFsaWQgInByZWRpY2F0ZSIgcGFyYW1ldGVyJyk7cmV0dXJuIFUodCxuKS5maWx0ZXIoKGZ1bmN0aW9uKHQpe3JldHVybiBlKHQubm9kZSl9KSl9LFg9ZnVuY3Rpb24odCxlKXtyZXR1cm4gRyh0LChmdW5jdGlvbih0KXtyZXR1cm4gdC5pc1RleHR9KSxlKX0sWT1mdW5jdGlvbih0LGUpe3JldHVybiBHKHQsKGZ1bmN0aW9uKHQpe3JldHVybiB0LmlzSW5saW5lfSksZSl9LFo9ZnVuY3Rpb24odCxlKXtyZXR1cm4gRyh0LChmdW5jdGlvbih0KXtyZXR1cm4gdC5pc0Jsb2NrfSksZSl9LFE9ZnVuY3Rpb24odCxlLG4pe3JldHVybiBHKHQsKGZ1bmN0aW9uKHQpe3JldHVybiEhZSh0LmF0dHJzKX0pLG4pfSx0dD1mdW5jdGlvbih0LGUsbil7cmV0dXJuIEcodCwoZnVuY3Rpb24odCl7cmV0dXJuIHQudHlwZT09PWV9KSxuKX0sZXQ9ZnVuY3Rpb24odCxlLG4pe3JldHVybiBHKHQsKGZ1bmN0aW9uKHQpe3JldHVybiBlLmlzSW5TZXQodC5tYXJrcyl9KSxuKX0sbnQ9ZnVuY3Rpb24odCxlKXtyZXR1cm4hIXR0KHQsZSkubGVuZ3RofTtmdW5jdGlvbiBydCh0KXtpZihBcnJheS5pc0FycmF5KHQpKXtmb3IodmFyIGU9MCxuPUFycmF5KHQubGVuZ3RoKTtlPHQubGVuZ3RoO2UrKyluW2VdPXRbZV07cmV0dXJuIG59cmV0dXJuIEFycmF5LmZyb20odCl9dmFyIG90PWZ1bmN0aW9uKHQpe3JldHVybiBfKChmdW5jdGlvbih0KXtyZXR1cm4gdC50eXBlLnNwZWMudGFibGVSb2xlJiYidGFibGUiPT09dC50eXBlLnNwZWMudGFibGVSb2xlfSkpKHQpfSxpdD1mdW5jdGlvbih0KXtyZXR1cm4gdCBpbnN0YW5jZW9mIGkuQ2VsbFNlbGVjdGlvbn0sc3Q9ZnVuY3Rpb24odCl7aWYoaXQodCkpe3ZhciBlPXQuJGFuY2hvckNlbGwuc3RhcnQoLTEpLG49aS5UYWJsZU1hcC5nZXQodC4kYW5jaG9yQ2VsbC5ub2RlKC0xKSk7cmV0dXJuIG4ucmVjdEJldHdlZW4odC4kYW5jaG9yQ2VsbC5wb3MtZSx0LiRoZWFkQ2VsbC5wb3MtZSl9fSxhdD1mdW5jdGlvbih0KXtyZXR1cm4gZnVuY3Rpb24oZSl7aWYoaXQoZSkpe3ZhciBuPWkuVGFibGVNYXAuZ2V0KGUuJGFuY2hvckNlbGwubm9kZSgtMSkpO3JldHVybiBBKHtsZWZ0OnQscmlnaHQ6dCsxLHRvcDowLGJvdHRvbTpuLmhlaWdodH0pKGUpfXJldHVybiExfX0sY3Q9ZnVuY3Rpb24odCl7cmV0dXJuIGZ1bmN0aW9uKGUpe2lmKGl0KGUpKXt2YXIgbj1pLlRhYmxlTWFwLmdldChlLiRhbmNob3JDZWxsLm5vZGUoLTEpKTtyZXR1cm4gQSh7bGVmdDowLHJpZ2h0Om4ud2lkdGgsdG9wOnQsYm90dG9tOnQrMX0pKGUpfXJldHVybiExfX0sdXQ9ZnVuY3Rpb24odCl7aWYoaXQodCkpe3ZhciBlPWkuVGFibGVNYXAuZ2V0KHQuJGFuY2hvckNlbGwubm9kZSgtMSkpO3JldHVybiBBKHtsZWZ0OjAscmlnaHQ6ZS53aWR0aCx0b3A6MCxib3R0b206ZS5oZWlnaHR9KSh0KX1yZXR1cm4hMX0sbHQ9ZnVuY3Rpb24odCl7cmV0dXJuIGZ1bmN0aW9uKGUpe3ZhciBuPW90KGUpO2lmKG4pe3ZhciByPWkuVGFibGVNYXAuZ2V0KG4ubm9kZSksbz1BcnJheS5pc0FycmF5KHQpP3Q6QXJyYXkuZnJvbShbdF0pO3JldHVybiBvLnJlZHVjZSgoZnVuY3Rpb24odCxlKXtpZihlPj0wJiZlPD1yLndpZHRoLTEpe3ZhciBvPXIuY2VsbHNJblJlY3Qoe2xlZnQ6ZSxyaWdodDplKzEsdG9wOjAsYm90dG9tOnIuaGVpZ2h0fSk7cmV0dXJuIHQuY29uY2F0KG8ubWFwKChmdW5jdGlvbih0KXt2YXIgZT1uLm5vZGUubm9kZUF0KHQpLHI9dCtuLnN0YXJ0O3JldHVybntwb3M6cixzdGFydDpyKzEsbm9kZTplfX0pKSl9fSksW10pfX19LGh0PWZ1bmN0aW9uKHQpe3JldHVybiBmdW5jdGlvbihlKXt2YXIgbj1vdChlKTtpZihuKXt2YXIgcj1pLlRhYmxlTWFwLmdldChuLm5vZGUpLG89QXJyYXkuaXNBcnJheSh0KT90OkFycmF5LmZyb20oW3RdKTtyZXR1cm4gby5yZWR1Y2UoKGZ1bmN0aW9uKHQsZSl7aWYoZT49MCYmZTw9ci5oZWlnaHQtMSl7dmFyIG89ci5jZWxsc0luUmVjdCh7bGVmdDowLHJpZ2h0OnIud2lkdGgsdG9wOmUsYm90dG9tOmUrMX0pO3JldHVybiB0LmNvbmNhdChvLm1hcCgoZnVuY3Rpb24odCl7dmFyIGU9bi5ub2RlLm5vZGVBdCh0KSxyPXQrbi5zdGFydDtyZXR1cm57cG9zOnIsc3RhcnQ6cisxLG5vZGU6ZX19KSkpfX0pLFtdKX19fSxmdD1mdW5jdGlvbih0KXt2YXIgZT1vdCh0KTtpZihlKXt2YXIgbj1pLlRhYmxlTWFwLmdldChlLm5vZGUpLHI9bi5jZWxsc0luUmVjdCh7bGVmdDowLHJpZ2h0Om4ud2lkdGgsdG9wOjAsYm90dG9tOm4uaGVpZ2h0fSk7cmV0dXJuIHIubWFwKChmdW5jdGlvbih0KXt2YXIgbj1lLm5vZGUubm9kZUF0KHQpLHI9dCtlLnN0YXJ0O3JldHVybntwb3M6cixzdGFydDpyKzEsbm9kZTpufX0pKX19LHB0PWZ1bmN0aW9uKHQpe3JldHVybiBmdW5jdGlvbihlLG4pe3JldHVybiBmdW5jdGlvbihyKXt2YXIgbz1vdChyLnNlbGVjdGlvbikscz0icm93Ij09PXQ7aWYobyl7dmFyIGE9aS5UYWJsZU1hcC5nZXQoby5ub2RlKTtpZihlPj0wJiZlPChzP2EuaGVpZ2h0OmEud2lkdGgpKXt2YXIgYz1zPzA6ZSx1PXM/ZTowLGw9cz9hLndpZHRoOmUrMSxoPXM/ZSsxOmEuaGVpZ2h0O2lmKG4pe3ZhciBmPVB0KHIuc2VsZWN0aW9uLiRmcm9tKTtpZighZilyZXR1cm4gcjt2YXIgcD1hLmZpbmRDZWxsKGYucG9zLW8uc3RhcnQpO3M/KHU9TWF0aC5taW4odSxwLnRvcCksaD1NYXRoLm1heChoLHAuYm90dG9tKSk6KGM9TWF0aC5taW4oYyxwLmxlZnQpLGw9TWF0aC5tYXgobCxwLnJpZ2h0KSl9dmFyIGQ9YS5jZWxsc0luUmVjdCh7bGVmdDpjLHRvcDp1LHJpZ2h0OnM/bDpjKzEsYm90dG9tOnM/dSsxOmh9KSx2PWgtdT09PTE/ZDphLmNlbGxzSW5SZWN0KHtsZWZ0OnM/YzpsLTEsdG9wOnM/aC0xOnUscmlnaHQ6bCxib3R0b206aH0pLG09by5zdGFydCtkWzBdLGc9by5zdGFydCt2W3YubGVuZ3RoLTFdLHk9ci5kb2MucmVzb2x2ZShtKSx3PXIuZG9jLnJlc29sdmUoZyk7cmV0dXJuIGIoci5zZXRTZWxlY3Rpb24obmV3IGkuQ2VsbFNlbGVjdGlvbih3LHkpKSl9fXJldHVybiByfX19LGR0PXB0KCJjb2x1bW4iKSx2dD1wdCgicm93IiksbXQ9ZnVuY3Rpb24odCl7dmFyIGU9b3QodC5zZWxlY3Rpb24pO2lmKGUpe3ZhciBuPWkuVGFibGVNYXAuZ2V0KGUubm9kZSkscj1uLm1hcDtpZihyJiZyLmxlbmd0aCl7dmFyIG89ZS5zdGFydCtyWzBdLHM9ZS5zdGFydCtyW3IubGVuZ3RoLTFdLGE9dC5kb2MucmVzb2x2ZShvKSxjPXQuZG9jLnJlc29sdmUocyk7cmV0dXJuIGIodC5zZXRTZWxlY3Rpb24obmV3IGkuQ2VsbFNlbGVjdGlvbihjLGEpKSl9fXJldHVybiB0fSxndD1mdW5jdGlvbih0LGUpe3JldHVybiBmdW5jdGlvbihuKXtpZih0KXt2YXIgcj1DKGUpLmNlbGwuY3JlYXRlQW5kRmlsbCgpLG89ci5jb250ZW50O2lmKCF0Lm5vZGUuY29udGVudC5lcShvKSlyZXR1cm4gbi5yZXBsYWNlV2l0aCh0LnBvcysxLHQucG9zK3Qubm9kZS5ub2RlU2l6ZSxvKSxiKG4pfXJldHVybiBufX0seXQ9ZnVuY3Rpb24odCl7cmV0dXJuIGZ1bmN0aW9uKGUpe3ZhciBuPW90KGUuc2VsZWN0aW9uKTtpZihuKXt2YXIgcj1pLlRhYmxlTWFwLmdldChuLm5vZGUpO2lmKHQ+PTAmJnQ8PXIud2lkdGgpcmV0dXJuIGIoaS5hZGRDb2x1bW4oZSx7bWFwOnIsdGFibGVTdGFydDpuLnN0YXJ0LHRhYmxlOm4ubm9kZX0sdCkpfXJldHVybiBlfX0sd3Q9ZnVuY3Rpb24odCxlLG4pe3JldHVybiBmdW5jdGlvbihyKXt2YXIgbz17dHJ5VG9GaXQ6ITEsZGlyZWN0aW9uOjB9LGk9T2JqZWN0LmFzc2lnbihvLG4pLHM9b3Qoci5zZWxlY3Rpb24pO2lmKCFzKXJldHVybiByO3ZhciBhPUZ0KHQpKHIpLGM9YS5pbmRleGVzLHU9RnQoZSkociksbD11LmluZGV4ZXM7aWYoYy5pbmRleE9mKGUpPi0xKXJldHVybiByOyFpLnRyeVRvRml0JiZsLmxlbmd0aD4xJiZCKHQsZSxsLCJyb3ciKTt2YXIgaD1QKHMsYyxsLGkuZGlyZWN0aW9uKTtyZXR1cm4gYihyKS5yZXBsYWNlV2l0aChzLnBvcyxzLnBvcytzLm5vZGUubm9kZVNpemUsaCl9fSxidD1mdW5jdGlvbih0LGUsbil7cmV0dXJuIGZ1bmN0aW9uKHIpe3ZhciBvPXt0cnlUb0ZpdDohMSxkaXJlY3Rpb246MH0saT1PYmplY3QuYXNzaWduKG8sbikscz1vdChyLnNlbGVjdGlvbik7aWYoIXMpcmV0dXJuIHI7dmFyIGE9X3QodCkociksYz1hLmluZGV4ZXMsdT1fdChlKShyKSxsPXUuaW5kZXhlcztpZihjLmluZGV4T2YoZSk+LTEpcmV0dXJuIHI7IWkudHJ5VG9GaXQmJmwubGVuZ3RoPjEmJkIodCxlLGwsImNvbHVtbiIpO3ZhciBoPXoocyxjLGwsaS5kaXJlY3Rpb24pO3JldHVybiBiKHIpLnJlcGxhY2VXaXRoKHMucG9zLHMucG9zK3Mubm9kZS5ub2RlU2l6ZSxoKX19LHh0PWZ1bmN0aW9uKHQsZSl7cmV0dXJuIGZ1bmN0aW9uKG4pe3ZhciByPW90KG4uc2VsZWN0aW9uKTtpZihyKXt2YXIgbz1pLlRhYmxlTWFwLmdldChyLm5vZGUpLHM9dC0xO2lmKGUmJnM+PTApcmV0dXJuIGIoa3QocykobikpO2lmKHQ+PTAmJnQ8PW8uaGVpZ2h0KXJldHVybiBiKGkuYWRkUm93KG4se21hcDpvLHRhYmxlU3RhcnQ6ci5zdGFydCx0YWJsZTpyLm5vZGV9LHQpKX1yZXR1cm4gbn19LGt0PWZ1bmN0aW9uKHQpe3JldHVybiBmdW5jdGlvbihlKXt2YXIgbj1vdChlLnNlbGVjdGlvbik7aWYobil7dmFyIHI9aS5UYWJsZU1hcC5nZXQobi5ub2RlKTtpZih0Pj0wJiZ0PD1yLmhlaWdodCl7Zm9yKHZhciBvPW4ubm9kZSxzPUMoby50eXBlLnNjaGVtYSksYT1uLnN0YXJ0LGM9MDtjPHQrMTtjKyspYSs9by5jaGlsZChjKS5ub2RlU2l6ZTt2YXIgdT1vLmNoaWxkKHQpLGw9W10saD0wO2lmKHUuZm9yRWFjaCgoZnVuY3Rpb24odCl7MT09PXQuYXR0cnMucm93c3BhbiYmKGgrPXQuYXR0cnMuY29sc3BhbixsLnB1c2goc1t0LnR5cGUuc3BlYy50YWJsZVJvbGVdLmNyZWF0ZUFuZEZpbGwodC5hdHRycyx0Lm1hcmtzKSkpfSkpLGg8ci53aWR0aCl7Zm9yKHZhciBmPVtdLHA9ZnVuY3Rpb24obil7dmFyIHI9QnQobiwoZnVuY3Rpb24oZSxyKXt2YXIgbz1lLm5vZGUuYXR0cnMucm93c3BhbixpPW4rbztyZXR1cm4gbz4xJiZpPnR9KSkoZSk7Zi5wdXNoLmFwcGx5KGYscnQocikpfSx2PXQ7dj49MDt2LS0pcCh2KTtmLmxlbmd0aCYmZi5mb3JFYWNoKChmdW5jdGlvbih0KXtlPVJ0KHQse3Jvd3NwYW46dC5ub2RlLmF0dHJzLnJvd3NwYW4rMX0pKGUpfSkpfXJldHVybiBkKHMucm93LmNyZWF0ZSh1LmF0dHJzLGwpLGEpKGUpfX1yZXR1cm4gZX19LFN0PWZ1bmN0aW9uKHQpe3JldHVybiBmdW5jdGlvbihlKXt2YXIgbj1vdChlLnNlbGVjdGlvbik7aWYobil7dmFyIHI9aS5UYWJsZU1hcC5nZXQobi5ub2RlKTtpZigwPT09dCYmMT09PXIud2lkdGgpcmV0dXJuIE90KGUpO2lmKHQ+PTAmJnQ8PXIud2lkdGgpcmV0dXJuIGkucmVtb3ZlQ29sdW1uKGUse21hcDpyLHRhYmxlU3RhcnQ6bi5zdGFydCx0YWJsZTpuLm5vZGV9LHQpLGIoZSl9cmV0dXJuIGV9fSxDdD1mdW5jdGlvbih0KXtyZXR1cm4gZnVuY3Rpb24oZSl7dmFyIG49b3QoZS5zZWxlY3Rpb24pO2lmKG4pe3ZhciByPWkuVGFibGVNYXAuZ2V0KG4ubm9kZSk7aWYoMD09PXQmJjE9PT1yLmhlaWdodClyZXR1cm4gT3QoZSk7aWYodD49MCYmdDw9ci5oZWlnaHQpcmV0dXJuIGkucmVtb3ZlUm93KGUse21hcDpyLHRhYmxlU3RhcnQ6bi5zdGFydCx0YWJsZTpuLm5vZGV9LHQpLGIoZSl9cmV0dXJuIGV9fSxPdD1mdW5jdGlvbih0KXtmb3IodmFyIGU9dC5zZWxlY3Rpb24uJGZyb20sbj1lLmRlcHRoO24+MDtuLS0pe3ZhciByPWUubm9kZShuKTtpZigidGFibGUiPT09ci50eXBlLnNwZWMudGFibGVSb2xlKXJldHVybiBiKHQuZGVsZXRlKGUuYmVmb3JlKG4pLGUuYWZ0ZXIobikpKX1yZXR1cm4gdH0sTXQ9ZnVuY3Rpb24odCl7dmFyIGU9dC5zZWxlY3Rpb247aWYodXQoZSkpcmV0dXJuIE90KHQpO2lmKGl0KGUpKXt2YXIgbj1vdChlKTtpZihuKXt2YXIgcj1pLlRhYmxlTWFwLmdldChuLm5vZGUpLG89ci5yZWN0QmV0d2VlbihlLiRhbmNob3JDZWxsLnBvcy1uLnN0YXJ0LGUuJGhlYWRDZWxsLnBvcy1uLnN0YXJ0KTtpZigwPT1vLmxlZnQmJm8ucmlnaHQ9PXIud2lkdGgpcmV0dXJuITE7Zm9yKHZhciBzPU9iamVjdC5hc3NpZ24oe30sbyx7bWFwOnIsdGFibGU6bi5ub2RlLHRhYmxlU3RhcnQ6bi5zdGFydH0pLGE9cy5yaWdodC0xOzthLS0pe2lmKGkucmVtb3ZlQ29sdW1uKHQscyxhKSxhPT09cy5sZWZ0KWJyZWFrO3MudGFibGU9cy50YWJsZVN0YXJ0P3QuZG9jLm5vZGVBdChzLnRhYmxlU3RhcnQtMSk6dC5kb2Mscy5tYXA9aS5UYWJsZU1hcC5nZXQocy50YWJsZSl9cmV0dXJuIGIodCl9fXJldHVybiB0fSxOdD1mdW5jdGlvbih0KXt2YXIgZT10LnNlbGVjdGlvbjtpZih1dChlKSlyZXR1cm4gT3QodCk7aWYoaXQoZSkpe3ZhciBuPW90KGUpO2lmKG4pe3ZhciByPWkuVGFibGVNYXAuZ2V0KG4ubm9kZSksbz1yLnJlY3RCZXR3ZWVuKGUuJGFuY2hvckNlbGwucG9zLW4uc3RhcnQsZS4kaGVhZENlbGwucG9zLW4uc3RhcnQpO2lmKDA9PW8udG9wJiZvLmJvdHRvbT09ci5oZWlnaHQpcmV0dXJuITE7Zm9yKHZhciBzPU9iamVjdC5hc3NpZ24oe30sbyx7bWFwOnIsdGFibGU6bi5ub2RlLHRhYmxlU3RhcnQ6bi5zdGFydH0pLGE9cy5ib3R0b20tMTs7YS0tKXtpZihpLnJlbW92ZVJvdyh0LHMsYSksYT09PXMudG9wKWJyZWFrO3MudGFibGU9cy50YWJsZVN0YXJ0P3QuZG9jLm5vZGVBdChzLnRhYmxlU3RhcnQtMSk6dC5kb2Mscy5tYXA9aS5UYWJsZU1hcC5nZXQocy50YWJsZSl9cmV0dXJuIGIodCl9fXJldHVybiB0fSxUdD1mdW5jdGlvbih0KXtyZXR1cm4gZnVuY3Rpb24oZSl7dmFyIG49SXQodCk7cmV0dXJuIG4/U3Qobi5sZWZ0KShsKHQucG9zKShlKSk6ZX19LEF0PWZ1bmN0aW9uKHQpe3JldHVybiBmdW5jdGlvbihlKXt2YXIgbj1JdCh0KTtyZXR1cm4gbj9DdChuLnRvcCkobCh0LnBvcykoZSkpOmV9fSxFdD1mdW5jdGlvbih0LGUsbil7cmV0dXJuIGZ1bmN0aW9uKG8pe3ZhciBpPWx0KHQpKG8uc2VsZWN0aW9uKTtpZihpKXtmb3IodmFyIHM9aS5sZW5ndGgtMTtzPj0wO3MtLSlvPWUoaVtzXSxvKTtpZihuKXt2YXIgYT1vLmRvYy5yZXNvbHZlKG8ubWFwcGluZy5tYXAoaVtpLmxlbmd0aC0xXS5wb3MpKTtvLnNldFNlbGVjdGlvbihyLlNlbGVjdGlvbi5uZWFyKGEpKX1yZXR1cm4gYihvKX1yZXR1cm4gb319LER0PWZ1bmN0aW9uKHQsZSxuKXtyZXR1cm4gZnVuY3Rpb24obyl7dmFyIGk9aHQodCkoby5zZWxlY3Rpb24pO2lmKGkpe2Zvcih2YXIgcz1pLmxlbmd0aC0xO3M+PTA7cy0tKW89ZShpW3NdLG8pO2lmKG4pe3ZhciBhPW8uZG9jLnJlc29sdmUoby5tYXBwaW5nLm1hcChpW2kubGVuZ3RoLTFdLnBvcykpO28uc2V0U2VsZWN0aW9uKHIuU2VsZWN0aW9uLm5lYXIoYSkpfX1yZXR1cm4gb319LFJ0PWZ1bmN0aW9uKHQsZSl7cmV0dXJuIGZ1bmN0aW9uKG4pe3JldHVybiB0PyhuLnNldE5vZGVNYXJrdXAodC5wb3MsbnVsbCxPYmplY3QuYXNzaWduKHt9LHQubm9kZS5hdHRycyxlKSksYihuKSk6bn19LHp0PWZ1bmN0aW9uKHQpe2Zvcih2YXIgZT1hcmd1bWVudHMubGVuZ3RoPjEmJnZvaWQgMCE9PWFyZ3VtZW50c1sxXT9hcmd1bWVudHNbMV06MyxuPWFyZ3VtZW50cy5sZW5ndGg+MiYmdm9pZCAwIT09YXJndW1lbnRzWzJdP2FyZ3VtZW50c1syXTozLHI9IShhcmd1bWVudHMubGVuZ3RoPjMmJnZvaWQgMCE9PWFyZ3VtZW50c1szXSl8fGFyZ3VtZW50c1szXSxvPWFyZ3VtZW50cy5sZW5ndGg+NCYmdm9pZCAwIT09YXJndW1lbnRzWzRdP2FyZ3VtZW50c1s0XTpudWxsLGk9Qyh0KSxzPWkuY2VsbCxhPWkuaGVhZGVyX2NlbGwsYz1pLnJvdyx1PWkudGFibGUsbD1bXSxoPVtdLGY9MDtmPG47ZisrKWwucHVzaChUKHMsbykpLHImJmgucHVzaChUKGEsbykpO2Zvcih2YXIgcD1bXSxkPTA7ZDxlO2QrKylwLnB1c2goYy5jcmVhdGVDaGVja2VkKG51bGwsciYmMD09PWQ/aDpsKSk7cmV0dXJuIHUuY3JlYXRlQ2hlY2tlZChudWxsLHApfSxQdD1mdW5jdGlvbih0KXt2YXIgZT1mdW5jdGlvbih0KXtyZXR1cm4gdC50eXBlLnNwZWMudGFibGVSb2xlJiYvY2VsbC9pLnRlc3QodC50eXBlLnNwZWMudGFibGVSb2xlKX07cmV0dXJuIEYodCxlKX0sSXQ9ZnVuY3Rpb24odCl7dmFyIGU9UHQodCk7aWYoZSl7dmFyIG49Tih0KSxyPWkuVGFibGVNYXAuZ2V0KG4ubm9kZSksbz1lLnBvcy1uLnN0YXJ0O3JldHVybiByLnJlY3RCZXR3ZWVuKG8sbyl9fSxCdD1mdW5jdGlvbih0LGUpe3JldHVybiBmdW5jdGlvbihuKXt2YXIgcj1bXSxvPWh0KHQpKG4uc2VsZWN0aW9uKTtpZihvKWZvcih2YXIgaT1vLmxlbmd0aC0xO2k+PTA7aS0tKWUob1tpXSxuKSYmci5wdXNoKG9baV0pO3JldHVybiByfX0sX3Q9ZnVuY3Rpb24odCl7cmV0dXJuIGZ1bmN0aW9uKGUpe2Zvcih2YXIgbj10LHI9dCxvPWZ1bmN0aW9uKHQpe3ZhciBvPWx0KHQpKGUuc2VsZWN0aW9uKTtvJiZvLmZvckVhY2goKGZ1bmN0aW9uKGUpe3ZhciBvPWUubm9kZS5hdHRycy5jb2xzcGFuK3QtMTtvPj1uJiYobj10KSxvPnImJihyPW8pfSkpfSxpPXQ7aT49MDtpLS0pbyhpKTt2YXIgcz1mdW5jdGlvbih0KXt2YXIgbj1sdCh0KShlLnNlbGVjdGlvbik7biYmbi5mb3JFYWNoKChmdW5jdGlvbihlKXt2YXIgbj1lLm5vZGUuYXR0cnMuY29sc3Bhbit0LTE7ZS5ub2RlLmF0dHJzLmNvbHNwYW4+MSYmbj5yJiYocj1uKX0pKX07Zm9yKGk9dDtpPD1yO2krKylzKGkpO3ZhciBhPVtdO2ZvcihpPW47aTw9cjtpKyspe3ZhciBjPWx0KGkpKGUuc2VsZWN0aW9uKTtjJiZjLmxlbmd0aCYmYS5wdXNoKGkpfW49YVswXSxyPWFbYS5sZW5ndGgtMV07Zm9yKHZhciB1PWx0KG4pKGUuc2VsZWN0aW9uKSxsPWh0KDApKGUuc2VsZWN0aW9uKSxoPWUuZG9jLnJlc29sdmUodVt1Lmxlbmd0aC0xXS5wb3MpLGY9dm9pZCAwLHA9cjtwPj1uO3AtLSl7dmFyIGQ9bHQocCkoZS5zZWxlY3Rpb24pO2lmKGQmJmQubGVuZ3RoKXtmb3IodmFyIHY9bC5sZW5ndGgtMTt2Pj0wO3YtLSlpZihsW3ZdLnBvcz09PWRbMF0ucG9zKXtmPWRbMF07YnJlYWt9aWYoZilicmVha319dmFyIG09ZS5kb2MucmVzb2x2ZShmLnBvcyk7cmV0dXJueyRhbmNob3I6aCwkaGVhZDptLGluZGV4ZXM6YX19fSxGdD1mdW5jdGlvbih0KXtyZXR1cm4gZnVuY3Rpb24oZSl7Zm9yKHZhciBuPXQscj10LG89ZnVuY3Rpb24odCl7dmFyIG89aHQodCkoZS5zZWxlY3Rpb24pO28uZm9yRWFjaCgoZnVuY3Rpb24oZSl7dmFyIG89ZS5ub2RlLmF0dHJzLnJvd3NwYW4rdC0xO28+PW4mJihuPXQpLG8+ciYmKHI9byl9KSl9LGk9dDtpPj0wO2ktLSlvKGkpO3ZhciBzPWZ1bmN0aW9uKHQpe3ZhciBuPWh0KHQpKGUuc2VsZWN0aW9uKTtuLmZvckVhY2goKGZ1bmN0aW9uKGUpe3ZhciBuPWUubm9kZS5hdHRycy5yb3dzcGFuK3QtMTtlLm5vZGUuYXR0cnMucm93c3Bhbj4xJiZuPnImJihyPW4pfSkpfTtmb3IoaT10O2k8PXI7aSsrKXMoaSk7dmFyIGE9W107Zm9yKGk9bjtpPD1yO2krKyl7dmFyIGM9aHQoaSkoZS5zZWxlY3Rpb24pO2MmJmMubGVuZ3RoJiZhLnB1c2goaSl9bj1hWzBdLHI9YVthLmxlbmd0aC0xXTtmb3IodmFyIHU9aHQobikoZS5zZWxlY3Rpb24pLGw9bHQoMCkoZS5zZWxlY3Rpb24pLGg9ZS5kb2MucmVzb2x2ZSh1W3UubGVuZ3RoLTFdLnBvcyksZj12b2lkIDAscD1yO3A+PW47cC0tKXt2YXIgZD1odChwKShlLnNlbGVjdGlvbik7aWYoZCYmZC5sZW5ndGgpe2Zvcih2YXIgdj1sLmxlbmd0aC0xO3Y+PTA7di0tKWlmKGxbdl0ucG9zPT09ZFswXS5wb3Mpe2Y9ZFswXTticmVha31pZihmKWJyZWFrfX12YXIgbT1lLmRvYy5yZXNvbHZlKGYucG9zKTtyZXR1cm57JGFuY2hvcjpoLCRoZWFkOm0saW5kZXhlczphfX19O2UuaXNOb2RlU2VsZWN0aW9uPXksZS5jYW5JbnNlcnQ9TyxlLmNvbnZlcnRUYWJsZU5vZGVUb0FycmF5T2ZSb3dzPUQsZS5jb252ZXJ0QXJyYXlPZlJvd3NUb1RhYmxlTm9kZT1SLGUuZmluZFBhcmVudE5vZGU9XyxlLmZpbmRQYXJlbnROb2RlQ2xvc2VzdFRvUG9zPUYsZS5maW5kUGFyZW50RG9tUmVmPWosZS5oYXNQYXJlbnROb2RlPSQsZS5maW5kUGFyZW50Tm9kZU9mVHlwZT1WLGUuZmluZFBhcmVudE5vZGVPZlR5cGVDbG9zZXN0VG9Qb3M9TCxlLmhhc1BhcmVudE5vZGVPZlR5cGU9cSxlLmZpbmRQYXJlbnREb21SZWZPZlR5cGU9SixlLmZpbmRTZWxlY3RlZE5vZGVPZlR5cGU9VyxlLmZpbmRQb3NpdGlvbk9mTm9kZUJlZm9yZT1ILGUuZmluZERvbVJlZkF0UG9zPUssZS5mbGF0dGVuPVUsZS5maW5kQ2hpbGRyZW49RyxlLmZpbmRUZXh0Tm9kZXM9WCxlLmZpbmRJbmxpbmVOb2Rlcz1ZLGUuZmluZEJsb2NrTm9kZXM9WixlLmZpbmRDaGlsZHJlbkJ5QXR0cj1RLGUuZmluZENoaWxkcmVuQnlUeXBlPXR0LGUuZmluZENoaWxkcmVuQnlNYXJrPWV0LGUuY29udGFpbnM9bnQsZS5maW5kVGFibGU9b3QsZS5pc0NlbGxTZWxlY3Rpb249aXQsZS5nZXRTZWxlY3Rpb25SZWN0PXN0LGUuaXNDb2x1bW5TZWxlY3RlZD1hdCxlLmlzUm93U2VsZWN0ZWQ9Y3QsZS5pc1RhYmxlU2VsZWN0ZWQ9dXQsZS5nZXRDZWxsc0luQ29sdW1uPWx0LGUuZ2V0Q2VsbHNJblJvdz1odCxlLmdldENlbGxzSW5UYWJsZT1mdCxlLnNlbGVjdENvbHVtbj1kdCxlLnNlbGVjdFJvdz12dCxlLnNlbGVjdFRhYmxlPW10LGUuZW1wdHlDZWxsPWd0LGUuYWRkQ29sdW1uQXQ9eXQsZS5tb3ZlUm93PXd0LGUubW92ZUNvbHVtbj1idCxlLmFkZFJvd0F0PXh0LGUuY2xvbmVSb3dBdD1rdCxlLnJlbW92ZUNvbHVtbkF0PVN0LGUucmVtb3ZlUm93QXQ9Q3QsZS5yZW1vdmVUYWJsZT1PdCxlLnJlbW92ZVNlbGVjdGVkQ29sdW1ucz1NdCxlLnJlbW92ZVNlbGVjdGVkUm93cz1OdCxlLnJlbW92ZUNvbHVtbkNsb3Nlc3RUb1Bvcz1UdCxlLnJlbW92ZVJvd0Nsb3Nlc3RUb1Bvcz1BdCxlLmZvckVhY2hDZWxsSW5Db2x1bW49RXQsZS5mb3JFYWNoQ2VsbEluUm93PUR0LGUuc2V0Q2VsbEF0dHJzPVJ0LGUuY3JlYXRlVGFibGU9enQsZS5maW5kQ2VsbENsb3Nlc3RUb1Bvcz1QdCxlLmZpbmRDZWxsUmVjdENsb3Nlc3RUb1Bvcz1JdCxlLmdldFNlbGVjdGlvblJhbmdlSW5Db2x1bW49X3QsZS5nZXRTZWxlY3Rpb25SYW5nZUluUm93PUZ0LGUucmVtb3ZlUGFyZW50Tm9kZU9mVHlwZT1zLGUucmVwbGFjZVBhcmVudE5vZGVPZlR5cGU9YSxlLnJlbW92ZVNlbGVjdGVkTm9kZT1jLGUucmVwbGFjZVNlbGVjdGVkTm9kZT11LGUuc2V0VGV4dFNlbGVjdGlvbj1sLGUuc2FmZUluc2VydD1kLGUuc2V0UGFyZW50Tm9kZU1hcmt1cD12LGUuc2VsZWN0UGFyZW50Tm9kZU9mVHlwZT1tLGUucmVtb3ZlTm9kZUJlZm9yZT1nfSxmNWRmOmZ1bmN0aW9uKHQsZSxuKXt2YXIgcj1uKCIwMGVlIiksbz1uKCJjNmI2IiksaT1uKCJiNjIyIikscz1pKCJ0b1N0cmluZ1RhZyIpLGE9IkFyZ3VtZW50cyI9PW8oZnVuY3Rpb24oKXtyZXR1cm4gYXJndW1lbnRzfSgpKSxjPWZ1bmN0aW9uKHQsZSl7dHJ5e3JldHVybiB0W2VdfWNhdGNoKG4pe319O3QuZXhwb3J0cz1yP286ZnVuY3Rpb24odCl7dmFyIGUsbixyO3JldHVybiB2b2lkIDA9PT10PyJVbmRlZmluZWQiOm51bGw9PT10PyJOdWxsIjoic3RyaW5nIj09dHlwZW9mKG49YyhlPU9iamVjdCh0KSxzKSk/bjphP28oZSk6Ik9iamVjdCI9PShyPW8oZSkpJiYiZnVuY3Rpb24iPT10eXBlb2YgZS5jYWxsZWU/IkFyZ3VtZW50cyI6cn19LGY3NzI6ZnVuY3Rpb24odCxlLG4pe3ZhciByPW4oIjU2OTIiKSxvPW4oIjkwZTMiKSxpPXIoImtleXMiKTt0LmV4cG9ydHM9ZnVuY3Rpb24odCl7cmV0dXJuIGlbdF18fChpW3RdPW8odCkpfX0sZjkzOTpmdW5jdGlvbih0LGUpe3QuZXhwb3J0cz17ZnVuY3Rpb25hbDohMCxyZW5kZXIodCxlKXtjb25zdHtfYzpuLF92OnIsZGF0YTpvLGNoaWxkcmVuOmk9W119PWUse2NsYXNzOnMsc3RhdGljQ2xhc3M6YSxzdHlsZTpjLHN0YXRpY1N0eWxlOnUsYXR0cnM6bD17fSwuLi5ofT1vO3JldHVybiBuKCJzdmciLHtjbGFzczpbcyxhXSxzdHlsZTpbYyx1XSxhdHRyczpPYmplY3QuYXNzaWduKHt4bWxuczoiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciLHZpZXdCb3g6IjAgMCAyNCAyNCJ9LGwpLC4uLmh9LGkuY29uY2F0KFtuKCJwYXRoIix7YXR0cnM6e2Q6Ik0xOSAxNGE1IDUgMCAxMTAgMTAgNSA1IDAgMDEwLTEwem0yLjUgNS45MzhhLjkzNy45MzcgMCAxMDAtMS44NzVoLTEuMjVhLjMxMi4zMTIgMCAwMS0uMzEzLS4zMTNWMTYuNWEuOTM3LjkzNyAwIDEwLTEuODc1IDB2MS4yNWMwIC4xNzMtLjE0LjMxMy0uMzEyLjMxM0gxNi41YS45MzcuOTM3IDAgMTAwIDEuODc1aDEuMjVjLjE3MyAwIC4zMTMuMTQuMzEzLjMxMnYxLjI1YS45MzcuOTM3IDAgMTAxLjg3NSAwdi0xLjI1YzAtLjE3My4xNC0uMzEzLjMxMi0uMzEzaDEuMjV6TTUgMmEzIDMgMCAxMDAgNmgxNGEzIDMgMCAwMDAtNkg1em0wLTJoMTRhNSA1IDAgMDEwIDEwSDVBNSA1IDAgMTE1IDB6In19KV0pKX19fSxmYTBiOmZ1bmN0aW9uKHQsZSl7dC5leHBvcnRzPXtmdW5jdGlvbmFsOiEwLHJlbmRlcih0LGUpe2NvbnN0e19jOm4sX3Y6cixkYXRhOm8sY2hpbGRyZW46aT1bXX09ZSx7Y2xhc3M6cyxzdGF0aWNDbGFzczphLHN0eWxlOmMsc3RhdGljU3R5bGU6dSxhdHRyczpsPXt9LC4uLmh9PW87cmV0dXJuIG4oInN2ZyIse2NsYXNzOltzLGFdLHN0eWxlOltjLHVdLGF0dHJzOk9iamVjdC5hc3NpZ24oe3htbG5zOiJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIsdmlld0JveDoiMCAwIDI0IDI0In0sbCksLi4uaH0saS5jb25jYXQoW24oInBhdGgiLHthdHRyczp7ZDoiTTIyLjUgMjEuMjQ4aC0yMWExLjI1IDEuMjUgMCAwMDAgMi41aDIxYTEuMjUgMS4yNSAwIDAwMC0yLjV6TTEuOTc4IDIuNzQ4aDEuMzYzYS4yNS4yNSAwIDAxLjI1LjI1djguNTIzYTguNDA5IDguNDA5IDAgMDAxNi44MTggMFYzYS4yNS4yNSAwIDAxLjI1LS4yNWgxLjM2M2ExLjI1IDEuMjUgMCAwMDAtMi41SDE2LjNhMS4yNSAxLjI1IDAgMDAwIDIuNWgxLjM2M2EuMjUuMjUgMCAwMS4yNS4yNXY4LjUyM2E1LjkwOSA1LjkwOSAwIDAxLTExLjgxOCAwVjNhLjI1LjI1IDAgMDEuMjUtLjI1SDcuN2ExLjI1IDEuMjUgMCAxMDAtMi41SDEuOTc4YTEuMjUgMS4yNSAwIDAwMCAyLjV6In19KV0pKX19fSxmYWUzOmZ1bmN0aW9uKHQsZSxuKXsidXNlIHN0cmljdCI7aWYobi5yKGUpLCJ1bmRlZmluZWQiIT09dHlwZW9mIHdpbmRvdyl7dmFyIHI9d2luZG93LmRvY3VtZW50LmN1cnJlbnRTY3JpcHQsbz1uKCI4ODc1Iik7cj1vKCksImN1cnJlbnRTY3JpcHQiaW4gZG9jdW1lbnR8fE9iamVjdC5kZWZpbmVQcm9wZXJ0eShkb2N1bWVudCwiY3VycmVudFNjcmlwdCIse2dldDpvfSk7dmFyIGk9ciYmci5zcmMubWF0Y2goLyguK1wvKVteL10rXC5qcyhcPy4qKT8kLyk7aSYmKG4ucD1pWzFdKX12YXIgcz1mdW5jdGlvbigpe3ZhciB0PXRoaXMsZT10LiRjcmVhdGVFbGVtZW50LG49dC5fc2VsZi5fY3x8ZTtyZXR1cm4gbigiZGl2Iix7c3RhdGljQ2xhc3M6InRpcHRhcC1lZGl0b3IifSxbbigiZWRpdG9yLW1lbnUtYmFyIix7YXR0cnM6e2VkaXRvcjp0LmVkaXRvcn0sc2NvcGVkU2xvdHM6dC5fdShbe2tleToiZGVmYXVsdCIsZm46ZnVuY3Rpb24oZSl7dmFyIHI9ZS5jb21tYW5kcyxvPWUuaXNBY3RpdmU7cmV0dXJuW24oImRpdiIse3N0YXRpY0NsYXNzOiJtZW51YmFyIn0sW24oImRpdiIse3N0YXRpY0NsYXNzOiJ0b29sYmFyIn0sW24oImJ1dHRvbiIse3N0YXRpY0NsYXNzOiJtZW51YmFyX19idXR0b24iLGNsYXNzOnsiaXMtYWN0aXZlIjpvLmhlYWRpbmcoe2xldmVsOjF9KX0sb246e2NsaWNrOmZ1bmN0aW9uKHQpe3JldHVybiByLmhlYWRpbmcoe2xldmVsOjF9KX19fSxbdC5fdigiIEgxICIpXSksbigiYnV0dG9uIix7c3RhdGljQ2xhc3M6Im1lbnViYXJfX2J1dHRvbiIsY2xhc3M6eyJpcy1hY3RpdmUiOm8uaGVhZGluZyh7bGV2ZWw6Mn0pfSxvbjp7Y2xpY2s6ZnVuY3Rpb24odCl7cmV0dXJuIHIuaGVhZGluZyh7bGV2ZWw6Mn0pfX19LFt0Ll92KCIgSDIgIildKSxuKCJidXR0b24iLHtzdGF0aWNDbGFzczoibWVudWJhcl9fYnV0dG9uIixjbGFzczp7ImlzLWFjdGl2ZSI6by5oZWFkaW5nKHtsZXZlbDozfSl9LG9uOntjbGljazpmdW5jdGlvbih0KXtyZXR1cm4gci5oZWFkaW5nKHtsZXZlbDozfSl9fX0sW3QuX3YoIiBIMyAiKV0pLG4oImJ1dHRvbiIse3N0YXRpY0NsYXNzOiJtZW51YmFyX19idXR0b24iLGNsYXNzOnsiaXMtYWN0aXZlIjpvLmJ1bGxldF9saXN0KCl9LG9uOntjbGljazpyLmJ1bGxldF9saXN0fX0sW24oImljb24iLHthdHRyczp7bmFtZToidWwifX0pXSwxKSxuKCJidXR0b24iLHtzdGF0aWNDbGFzczoibWVudWJhcl9fYnV0dG9uIixjbGFzczp7ImlzLWFjdGl2ZSI6by5vcmRlcmVkX2xpc3QoKX0sb246e2NsaWNrOnIub3JkZXJlZF9saXN0fX0sW24oImljb24iLHthdHRyczp7bmFtZToib2wifX0pXSwxKSxuKCJidXR0b24iLHtzdGF0aWNDbGFzczoibWVudWJhcl9fYnV0dG9uIixjbGFzczp7ImlzLWFjdGl2ZSI6by5ib2xkKCl9LG9uOntjbGljazpyLmJvbGR9fSxbbigiaWNvbiIse2F0dHJzOntuYW1lOiJib2xkIn19KV0sMSksbigiYnV0dG9uIix7c3RhdGljQ2xhc3M6Im1lbnViYXJfX2J1dHRvbiIsY2xhc3M6eyJpcy1hY3RpdmUiOm8uaXRhbGljKCl9LG9uOntjbGljazpyLml0YWxpY319LFtuKCJpY29uIix7YXR0cnM6e25hbWU6Iml0YWxpYyJ9fSldLDEpLG4oImJ1dHRvbiIse3N0YXRpY0NsYXNzOiJtZW51YmFyX19idXR0b24iLGNsYXNzOnsiaXMtYWN0aXZlIjpvLnN0cmlrZSgpfSxvbjp7Y2xpY2s6ci5zdHJpa2V9fSxbbigiaWNvbiIse2F0dHJzOntuYW1lOiJzdHJpa2UifX0pXSwxKSxuKCJidXR0b24iLHtzdGF0aWNDbGFzczoibWVudWJhcl9fYnV0dG9uIixjbGFzczp7ImlzLWFjdGl2ZSI6by51bmRlcmxpbmUoKX0sb246e2NsaWNrOnIudW5kZXJsaW5lfX0sW24oImljb24iLHthdHRyczp7bmFtZToidW5kZXJsaW5lIn19KV0sMSksbigiYnV0dG9uIix7c3RhdGljQ2xhc3M6Im1lbnViYXJfX2J1dHRvbiIsY2xhc3M6eyJpcy1hY3RpdmUiOm8uY29kZSgpfSxvbjp7Y2xpY2s6ci5jb2RlfX0sW24oImljb24iLHthdHRyczp7bmFtZToiY29kZSJ9fSldLDEpLG4oImJ1dHRvbiIse3N0YXRpY0NsYXNzOiJtZW51YmFyX19idXR0b24iLGNsYXNzOnsiaXMtYWN0aXZlIjpvLnBhcmFncmFwaCgpfSxvbjp7Y2xpY2s6ci5wYXJhZ3JhcGh9fSxbbigiaWNvbiIse2F0dHJzOntuYW1lOiJwYXJhZ3JhcGgifX0pXSwxKSxuKCJidXR0b24iLHtzdGF0aWNDbGFzczoibWVudWJhcl9fYnV0dG9uIixjbGFzczp7ImlzLWFjdGl2ZSI6by5ibG9ja3F1b3RlKCl9LG9uOntjbGljazpyLmJsb2NrcXVvdGV9fSxbbigiaWNvbiIse2F0dHJzOntuYW1lOiJxdW90ZSJ9fSldLDEpLG4oImJ1dHRvbiIse3N0YXRpY0NsYXNzOiJtZW51YmFyX19idXR0b24iLGNsYXNzOnsiaXMtYWN0aXZlIjpvLmNvZGVfYmxvY2soKX0sb246e2NsaWNrOnIuY29kZV9ibG9ja319LFtuKCJpY29uIix7YXR0cnM6e25hbWU6ImNvZGVfYmxvY2sifX0pXSwxKSxuKCJidXR0b24iLHtzdGF0aWNDbGFzczoibWVudWJhcl9fYnV0dG9uIixvbjp7Y2xpY2s6ZnVuY3Rpb24odCl7cmV0dXJuIHIuY3JlYXRlVGFibGUoe3Jvd3NDb3VudDozLGNvbHNDb3VudDozLHdpdGhIZWFkZXJSb3c6ITF9KX19fSxbbigiaWNvbiIse2F0dHJzOntuYW1lOiJ0YWJsZSJ9fSldLDEpLG8udGFibGUoKT9uKCJzcGFuIixbbigiYnV0dG9uIix7c3RhdGljQ2xhc3M6Im1lbnViYXJfX2J1dHRvbiIsb246e2NsaWNrOnIuZGVsZXRlVGFibGV9fSxbbigiaWNvbiIse2F0dHJzOntuYW1lOiJkZWxldGVfdGFibGUifX0pXSwxKSxuKCJidXR0b24iLHtzdGF0aWNDbGFzczoibWVudWJhcl9fYnV0dG9uIixvbjp7Y2xpY2s6ci5hZGRDb2x1bW5CZWZvcmV9fSxbbigiaWNvbiIse2F0dHJzOntuYW1lOiJhZGRfY29sX2JlZm9yZSJ9fSldLDEpLG4oImJ1dHRvbiIse3N0YXRpY0NsYXNzOiJtZW51YmFyX19idXR0b24iLG9uOntjbGljazpyLmFkZENvbHVtbkFmdGVyfX0sW24oImljb24iLHthdHRyczp7bmFtZToiYWRkX2NvbF9hZnRlciJ9fSldLDEpLG4oImJ1dHRvbiIse3N0YXRpY0NsYXNzOiJtZW51YmFyX19idXR0b24iLG9uOntjbGljazpyLmRlbGV0ZUNvbHVtbn19LFtuKCJpY29uIix7YXR0cnM6e25hbWU6ImRlbGV0ZV9jb2wifX0pXSwxKSxuKCJidXR0b24iLHtzdGF0aWNDbGFzczoibWVudWJhcl9fYnV0dG9uIixvbjp7Y2xpY2s6ci5hZGRSb3dCZWZvcmV9fSxbbigiaWNvbiIse2F0dHJzOntuYW1lOiJhZGRfcm93X2JlZm9yZSJ9fSldLDEpLG4oImJ1dHRvbiIse3N0YXRpY0NsYXNzOiJtZW51YmFyX19idXR0b24iLG9uOntjbGljazpyLmFkZFJvd0FmdGVyfX0sW24oImljb24iLHthdHRyczp7bmFtZToiYWRkX3Jvd19hZnRlciJ9fSldLDEpLG4oImJ1dHRvbiIse3N0YXRpY0NsYXNzOiJtZW51YmFyX19idXR0b24iLG9uOntjbGljazpyLmRlbGV0ZVJvd319LFtuKCJpY29uIix7YXR0cnM6e25hbWU6ImRlbGV0ZV9yb3cifX0pXSwxKSxuKCJidXR0b24iLHtzdGF0aWNDbGFzczoibWVudWJhcl9fYnV0dG9uIixvbjp7Y2xpY2s6ci50b2dnbGVDZWxsTWVyZ2V9fSxbbigiaWNvbiIse2F0dHJzOntuYW1lOiJjb21iaW5lX2NlbGxzIn19KV0sMSldKTp0Ll9lKCldKV0pXX19XSl9KSxuKCJlZGl0b3ItY29udGVudCIse3N0YXRpY0NsYXNzOiJ0aXB0YXAtZWRpdG9yX19jb250ZW50IixhdHRyczp7ZWRpdG9yOnQuZWRpdG9yfX0pXSwxKX0sYT1bXSxjPShuKCJkYzQ0IiksbigiNTMxMyIpKSx1PW4oIjg4NGMiKTtmdW5jdGlvbiBsKHQsZSxuKXtmb3IodmFyIHI9MDs7cisrKXtpZihyPT10LmNoaWxkQ291bnR8fHI9PWUuY2hpbGRDb3VudClyZXR1cm4gdC5jaGlsZENvdW50PT1lLmNoaWxkQ291bnQ/bnVsbDpuO3ZhciBvPXQuY2hpbGQociksaT1lLmNoaWxkKHIpO2lmKG8hPWkpe2lmKCFvLnNhbWVNYXJrdXAoaSkpcmV0dXJuIG47aWYoby5pc1RleHQmJm8udGV4dCE9aS50ZXh0KXtmb3IodmFyIHM9MDtvLnRleHRbc109PWkudGV4dFtzXTtzKyspbisrO3JldHVybiBufWlmKG8uY29udGVudC5zaXplfHxpLmNvbnRlbnQuc2l6ZSl7dmFyIGE9bChvLmNvbnRlbnQsaS5jb250ZW50LG4rMSk7aWYobnVsbCE9YSlyZXR1cm4gYX1uKz1vLm5vZGVTaXplfWVsc2Ugbis9by5ub2RlU2l6ZX19ZnVuY3Rpb24gaCh0LGUsbixyKXtmb3IodmFyIG89dC5jaGlsZENvdW50LGk9ZS5jaGlsZENvdW50Ozspe2lmKDA9PW98fDA9PWkpcmV0dXJuIG89PWk/bnVsbDp7YTpuLGI6cn07dmFyIHM9dC5jaGlsZCgtLW8pLGE9ZS5jaGlsZCgtLWkpLGM9cy5ub2RlU2l6ZTtpZihzIT1hKXtpZighcy5zYW1lTWFya3VwKGEpKXJldHVybnthOm4sYjpyfTtpZihzLmlzVGV4dCYmcy50ZXh0IT1hLnRleHQpe3ZhciB1PTAsbD1NYXRoLm1pbihzLnRleHQubGVuZ3RoLGEudGV4dC5sZW5ndGgpO3doaWxlKHU8bCYmcy50ZXh0W3MudGV4dC5sZW5ndGgtdS0xXT09YS50ZXh0W2EudGV4dC5sZW5ndGgtdS0xXSl1Kyssbi0tLHItLTtyZXR1cm57YTpuLGI6cn19aWYocy5jb250ZW50LnNpemV8fGEuY29udGVudC5zaXplKXt2YXIgZj1oKHMuY29udGVudCxhLmNvbnRlbnQsbi0xLHItMSk7aWYoZilyZXR1cm4gZn1uLT1jLHItPWN9ZWxzZSBuLT1jLHItPWN9fXZhciBmPWZ1bmN0aW9uKHQsZSl7aWYodGhpcy5jb250ZW50PXQsdGhpcy5zaXplPWV8fDAsbnVsbD09ZSlmb3IodmFyIG49MDtuPHQubGVuZ3RoO24rKyl0aGlzLnNpemUrPXRbbl0ubm9kZVNpemV9LHA9e2ZpcnN0Q2hpbGQ6e2NvbmZpZ3VyYWJsZTohMH0sbGFzdENoaWxkOntjb25maWd1cmFibGU6ITB9LGNoaWxkQ291bnQ6e2NvbmZpZ3VyYWJsZTohMH19O2YucHJvdG90eXBlLm5vZGVzQmV0d2Vlbj1mdW5jdGlvbih0LGUsbixyLG8pe3ZvaWQgMD09PXImJihyPTApO2Zvcih2YXIgaT0wLHM9MDtzPGU7aSsrKXt2YXIgYT10aGlzLmNvbnRlbnRbaV0sYz1zK2Eubm9kZVNpemU7aWYoYz50JiYhMSE9PW4oYSxyK3MsbyxpKSYmYS5jb250ZW50LnNpemUpe3ZhciB1PXMrMTthLm5vZGVzQmV0d2VlbihNYXRoLm1heCgwLHQtdSksTWF0aC5taW4oYS5jb250ZW50LnNpemUsZS11KSxuLHIrdSl9cz1jfX0sZi5wcm90b3R5cGUuZGVzY2VuZGFudHM9ZnVuY3Rpb24odCl7dGhpcy5ub2Rlc0JldHdlZW4oMCx0aGlzLnNpemUsdCl9LGYucHJvdG90eXBlLnRleHRCZXR3ZWVuPWZ1bmN0aW9uKHQsZSxuLHIpe3ZhciBvPSIiLGk9ITA7cmV0dXJuIHRoaXMubm9kZXNCZXR3ZWVuKHQsZSwoZnVuY3Rpb24ocyxhKXtzLmlzVGV4dD8obys9cy50ZXh0LnNsaWNlKE1hdGgubWF4KHQsYSktYSxlLWEpLGk9IW4pOnMuaXNMZWFmJiZyPyhvKz1yLGk9IW4pOiFpJiZzLmlzQmxvY2smJihvKz1uLGk9ITApfSksMCksb30sZi5wcm90b3R5cGUuYXBwZW5kPWZ1bmN0aW9uKHQpe2lmKCF0LnNpemUpcmV0dXJuIHRoaXM7aWYoIXRoaXMuc2l6ZSlyZXR1cm4gdDt2YXIgZT10aGlzLmxhc3RDaGlsZCxuPXQuZmlyc3RDaGlsZCxyPXRoaXMuY29udGVudC5zbGljZSgpLG89MDtmb3IoZS5pc1RleHQmJmUuc2FtZU1hcmt1cChuKSYmKHJbci5sZW5ndGgtMV09ZS53aXRoVGV4dChlLnRleHQrbi50ZXh0KSxvPTEpO288dC5jb250ZW50Lmxlbmd0aDtvKyspci5wdXNoKHQuY29udGVudFtvXSk7cmV0dXJuIG5ldyBmKHIsdGhpcy5zaXplK3Quc2l6ZSl9LGYucHJvdG90eXBlLmN1dD1mdW5jdGlvbih0LGUpe2lmKG51bGw9PWUmJihlPXRoaXMuc2l6ZSksMD09dCYmZT09dGhpcy5zaXplKXJldHVybiB0aGlzO3ZhciBuPVtdLHI9MDtpZihlPnQpZm9yKHZhciBvPTAsaT0wO2k8ZTtvKyspe3ZhciBzPXRoaXMuY29udGVudFtvXSxhPWkrcy5ub2RlU2l6ZTthPnQmJigoaTx0fHxhPmUpJiYocz1zLmlzVGV4dD9zLmN1dChNYXRoLm1heCgwLHQtaSksTWF0aC5taW4ocy50ZXh0Lmxlbmd0aCxlLWkpKTpzLmN1dChNYXRoLm1heCgwLHQtaS0xKSxNYXRoLm1pbihzLmNvbnRlbnQuc2l6ZSxlLWktMSkpKSxuLnB1c2gocykscis9cy5ub2RlU2l6ZSksaT1hfXJldHVybiBuZXcgZihuLHIpfSxmLnByb3RvdHlwZS5jdXRCeUluZGV4PWZ1bmN0aW9uKHQsZSl7cmV0dXJuIHQ9PWU/Zi5lbXB0eTowPT10JiZlPT10aGlzLmNvbnRlbnQubGVuZ3RoP3RoaXM6bmV3IGYodGhpcy5jb250ZW50LnNsaWNlKHQsZSkpfSxmLnByb3RvdHlwZS5yZXBsYWNlQ2hpbGQ9ZnVuY3Rpb24odCxlKXt2YXIgbj10aGlzLmNvbnRlbnRbdF07aWYobj09ZSlyZXR1cm4gdGhpczt2YXIgcj10aGlzLmNvbnRlbnQuc2xpY2UoKSxvPXRoaXMuc2l6ZStlLm5vZGVTaXplLW4ubm9kZVNpemU7cmV0dXJuIHJbdF09ZSxuZXcgZihyLG8pfSxmLnByb3RvdHlwZS5hZGRUb1N0YXJ0PWZ1bmN0aW9uKHQpe3JldHVybiBuZXcgZihbdF0uY29uY2F0KHRoaXMuY29udGVudCksdGhpcy5zaXplK3Qubm9kZVNpemUpfSxmLnByb3RvdHlwZS5hZGRUb0VuZD1mdW5jdGlvbih0KXtyZXR1cm4gbmV3IGYodGhpcy5jb250ZW50LmNvbmNhdCh0KSx0aGlzLnNpemUrdC5ub2RlU2l6ZSl9LGYucHJvdG90eXBlLmVxPWZ1bmN0aW9uKHQpe2lmKHRoaXMuY29udGVudC5sZW5ndGghPXQuY29udGVudC5sZW5ndGgpcmV0dXJuITE7Zm9yKHZhciBlPTA7ZTx0aGlzLmNvbnRlbnQubGVuZ3RoO2UrKylpZighdGhpcy5jb250ZW50W2VdLmVxKHQuY29udGVudFtlXSkpcmV0dXJuITE7cmV0dXJuITB9LHAuZmlyc3RDaGlsZC5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jb250ZW50Lmxlbmd0aD90aGlzLmNvbnRlbnRbMF06bnVsbH0scC5sYXN0Q2hpbGQuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY29udGVudC5sZW5ndGg/dGhpcy5jb250ZW50W3RoaXMuY29udGVudC5sZW5ndGgtMV06bnVsbH0scC5jaGlsZENvdW50LmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLmNvbnRlbnQubGVuZ3RofSxmLnByb3RvdHlwZS5jaGlsZD1mdW5jdGlvbih0KXt2YXIgZT10aGlzLmNvbnRlbnRbdF07aWYoIWUpdGhyb3cgbmV3IFJhbmdlRXJyb3IoIkluZGV4ICIrdCsiIG91dCBvZiByYW5nZSBmb3IgIit0aGlzKTtyZXR1cm4gZX0sZi5wcm90b3R5cGUubWF5YmVDaGlsZD1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5jb250ZW50W3RdfSxmLnByb3RvdHlwZS5mb3JFYWNoPWZ1bmN0aW9uKHQpe2Zvcih2YXIgZT0wLG49MDtlPHRoaXMuY29udGVudC5sZW5ndGg7ZSsrKXt2YXIgcj10aGlzLmNvbnRlbnRbZV07dChyLG4sZSksbis9ci5ub2RlU2l6ZX19LGYucHJvdG90eXBlLmZpbmREaWZmU3RhcnQ9ZnVuY3Rpb24odCxlKXtyZXR1cm4gdm9pZCAwPT09ZSYmKGU9MCksbCh0aGlzLHQsZSl9LGYucHJvdG90eXBlLmZpbmREaWZmRW5kPWZ1bmN0aW9uKHQsZSxuKXtyZXR1cm4gdm9pZCAwPT09ZSYmKGU9dGhpcy5zaXplKSx2b2lkIDA9PT1uJiYobj10LnNpemUpLGgodGhpcyx0LGUsbil9LGYucHJvdG90eXBlLmZpbmRJbmRleD1mdW5jdGlvbih0LGUpe2lmKHZvaWQgMD09PWUmJihlPS0xKSwwPT10KXJldHVybiB2KDAsdCk7aWYodD09dGhpcy5zaXplKXJldHVybiB2KHRoaXMuY29udGVudC5sZW5ndGgsdCk7aWYodD50aGlzLnNpemV8fHQ8MCl0aHJvdyBuZXcgUmFuZ2VFcnJvcigiUG9zaXRpb24gIit0KyIgb3V0c2lkZSBvZiBmcmFnbWVudCAoIit0aGlzKyIpIik7Zm9yKHZhciBuPTAscj0wOztuKyspe3ZhciBvPXRoaXMuY2hpbGQobiksaT1yK28ubm9kZVNpemU7aWYoaT49dClyZXR1cm4gaT09dHx8ZT4wP3YobisxLGkpOnYobixyKTtyPWl9fSxmLnByb3RvdHlwZS50b1N0cmluZz1mdW5jdGlvbigpe3JldHVybiI8Iit0aGlzLnRvU3RyaW5nSW5uZXIoKSsiPiJ9LGYucHJvdG90eXBlLnRvU3RyaW5nSW5uZXI9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jb250ZW50LmpvaW4oIiwgIil9LGYucHJvdG90eXBlLnRvSlNPTj1mdW5jdGlvbigpe3JldHVybiB0aGlzLmNvbnRlbnQubGVuZ3RoP3RoaXMuY29udGVudC5tYXAoKGZ1bmN0aW9uKHQpe3JldHVybiB0LnRvSlNPTigpfSkpOm51bGx9LGYuZnJvbUpTT049ZnVuY3Rpb24odCxlKXtpZighZSlyZXR1cm4gZi5lbXB0eTtpZighQXJyYXkuaXNBcnJheShlKSl0aHJvdyBuZXcgUmFuZ2VFcnJvcigiSW52YWxpZCBpbnB1dCBmb3IgRnJhZ21lbnQuZnJvbUpTT04iKTtyZXR1cm4gbmV3IGYoZS5tYXAodC5ub2RlRnJvbUpTT04pKX0sZi5mcm9tQXJyYXk9ZnVuY3Rpb24odCl7aWYoIXQubGVuZ3RoKXJldHVybiBmLmVtcHR5O2Zvcih2YXIgZSxuPTAscj0wO3I8dC5sZW5ndGg7cisrKXt2YXIgbz10W3JdO24rPW8ubm9kZVNpemUsciYmby5pc1RleHQmJnRbci0xXS5zYW1lTWFya3VwKG8pPyhlfHwoZT10LnNsaWNlKDAscikpLGVbZS5sZW5ndGgtMV09by53aXRoVGV4dChlW2UubGVuZ3RoLTFdLnRleHQrby50ZXh0KSk6ZSYmZS5wdXNoKG8pfXJldHVybiBuZXcgZihlfHx0LG4pfSxmLmZyb209ZnVuY3Rpb24odCl7aWYoIXQpcmV0dXJuIGYuZW1wdHk7aWYodCBpbnN0YW5jZW9mIGYpcmV0dXJuIHQ7aWYoQXJyYXkuaXNBcnJheSh0KSlyZXR1cm4gdGhpcy5mcm9tQXJyYXkodCk7aWYodC5hdHRycylyZXR1cm4gbmV3IGYoW3RdLHQubm9kZVNpemUpO3Rocm93IG5ldyBSYW5nZUVycm9yKCJDYW4gbm90IGNvbnZlcnQgIit0KyIgdG8gYSBGcmFnbWVudCIrKHQubm9kZXNCZXR3ZWVuPyIgKGxvb2tzIGxpa2UgbXVsdGlwbGUgdmVyc2lvbnMgb2YgcHJvc2VtaXJyb3ItbW9kZWwgd2VyZSBsb2FkZWQpIjoiIikpfSxPYmplY3QuZGVmaW5lUHJvcGVydGllcyhmLnByb3RvdHlwZSxwKTt2YXIgZD17aW5kZXg6MCxvZmZzZXQ6MH07ZnVuY3Rpb24gdih0LGUpe3JldHVybiBkLmluZGV4PXQsZC5vZmZzZXQ9ZSxkfWZ1bmN0aW9uIG0odCxlKXtpZih0PT09ZSlyZXR1cm4hMDtpZighdHx8Im9iamVjdCIhPXR5cGVvZiB0fHwhZXx8Im9iamVjdCIhPXR5cGVvZiBlKXJldHVybiExO3ZhciBuPUFycmF5LmlzQXJyYXkodCk7aWYoQXJyYXkuaXNBcnJheShlKSE9bilyZXR1cm4hMTtpZihuKXtpZih0Lmxlbmd0aCE9ZS5sZW5ndGgpcmV0dXJuITE7Zm9yKHZhciByPTA7cjx0Lmxlbmd0aDtyKyspaWYoIW0odFtyXSxlW3JdKSlyZXR1cm4hMX1lbHNle2Zvcih2YXIgbyBpbiB0KWlmKCEobyBpbiBlKXx8IW0odFtvXSxlW29dKSlyZXR1cm4hMTtmb3IodmFyIGkgaW4gZSlpZighKGkgaW4gdCkpcmV0dXJuITF9cmV0dXJuITB9Zi5lbXB0eT1uZXcgZihbXSwwKTt2YXIgZz1mdW5jdGlvbih0LGUpe3RoaXMudHlwZT10LHRoaXMuYXR0cnM9ZX07ZnVuY3Rpb24geSh0KXt2YXIgZT1FcnJvci5jYWxsKHRoaXMsdCk7cmV0dXJuIGUuX19wcm90b19fPXkucHJvdG90eXBlLGV9Zy5wcm90b3R5cGUuYWRkVG9TZXQ9ZnVuY3Rpb24odCl7Zm9yKHZhciBlLG49ITEscj0wO3I8dC5sZW5ndGg7cisrKXt2YXIgbz10W3JdO2lmKHRoaXMuZXEobykpcmV0dXJuIHQ7aWYodGhpcy50eXBlLmV4Y2x1ZGVzKG8udHlwZSkpZXx8KGU9dC5zbGljZSgwLHIpKTtlbHNle2lmKG8udHlwZS5leGNsdWRlcyh0aGlzLnR5cGUpKXJldHVybiB0OyFuJiZvLnR5cGUucmFuaz50aGlzLnR5cGUucmFuayYmKGV8fChlPXQuc2xpY2UoMCxyKSksZS5wdXNoKHRoaXMpLG49ITApLGUmJmUucHVzaChvKX19cmV0dXJuIGV8fChlPXQuc2xpY2UoKSksbnx8ZS5wdXNoKHRoaXMpLGV9LGcucHJvdG90eXBlLnJlbW92ZUZyb21TZXQ9ZnVuY3Rpb24odCl7Zm9yKHZhciBlPTA7ZTx0Lmxlbmd0aDtlKyspaWYodGhpcy5lcSh0W2VdKSlyZXR1cm4gdC5zbGljZSgwLGUpLmNvbmNhdCh0LnNsaWNlKGUrMSkpO3JldHVybiB0fSxnLnByb3RvdHlwZS5pc0luU2V0PWZ1bmN0aW9uKHQpe2Zvcih2YXIgZT0wO2U8dC5sZW5ndGg7ZSsrKWlmKHRoaXMuZXEodFtlXSkpcmV0dXJuITA7cmV0dXJuITF9LGcucHJvdG90eXBlLmVxPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzPT10fHx0aGlzLnR5cGU9PXQudHlwZSYmbSh0aGlzLmF0dHJzLHQuYXR0cnMpfSxnLnByb3RvdHlwZS50b0pTT049ZnVuY3Rpb24oKXt2YXIgdD17dHlwZTp0aGlzLnR5cGUubmFtZX07Zm9yKHZhciBlIGluIHRoaXMuYXR0cnMpe3QuYXR0cnM9dGhpcy5hdHRyczticmVha31yZXR1cm4gdH0sZy5mcm9tSlNPTj1mdW5jdGlvbih0LGUpe2lmKCFlKXRocm93IG5ldyBSYW5nZUVycm9yKCJJbnZhbGlkIGlucHV0IGZvciBNYXJrLmZyb21KU09OIik7dmFyIG49dC5tYXJrc1tlLnR5cGVdO2lmKCFuKXRocm93IG5ldyBSYW5nZUVycm9yKCJUaGVyZSBpcyBubyBtYXJrIHR5cGUgIitlLnR5cGUrIiBpbiB0aGlzIHNjaGVtYSIpO3JldHVybiBuLmNyZWF0ZShlLmF0dHJzKX0sZy5zYW1lU2V0PWZ1bmN0aW9uKHQsZSl7aWYodD09ZSlyZXR1cm4hMDtpZih0Lmxlbmd0aCE9ZS5sZW5ndGgpcmV0dXJuITE7Zm9yKHZhciBuPTA7bjx0Lmxlbmd0aDtuKyspaWYoIXRbbl0uZXEoZVtuXSkpcmV0dXJuITE7cmV0dXJuITB9LGcuc2V0RnJvbT1mdW5jdGlvbih0KXtpZighdHx8MD09dC5sZW5ndGgpcmV0dXJuIGcubm9uZTtpZih0IGluc3RhbmNlb2YgZylyZXR1cm5bdF07dmFyIGU9dC5zbGljZSgpO3JldHVybiBlLnNvcnQoKGZ1bmN0aW9uKHQsZSl7cmV0dXJuIHQudHlwZS5yYW5rLWUudHlwZS5yYW5rfSkpLGV9LGcubm9uZT1bXSx5LnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKEVycm9yLnByb3RvdHlwZSkseS5wcm90b3R5cGUuY29uc3RydWN0b3I9eSx5LnByb3RvdHlwZS5uYW1lPSJSZXBsYWNlRXJyb3IiO3ZhciB3PWZ1bmN0aW9uKHQsZSxuKXt0aGlzLmNvbnRlbnQ9dCx0aGlzLm9wZW5TdGFydD1lLHRoaXMub3BlbkVuZD1ufSxiPXtzaXplOntjb25maWd1cmFibGU6ITB9fTtmdW5jdGlvbiB4KHQsZSxuKXt2YXIgcj10LmZpbmRJbmRleChlKSxvPXIuaW5kZXgsaT1yLm9mZnNldCxzPXQubWF5YmVDaGlsZChvKSxhPXQuZmluZEluZGV4KG4pLGM9YS5pbmRleCx1PWEub2Zmc2V0O2lmKGk9PWV8fHMuaXNUZXh0KXtpZih1IT1uJiYhdC5jaGlsZChjKS5pc1RleHQpdGhyb3cgbmV3IFJhbmdlRXJyb3IoIlJlbW92aW5nIG5vbi1mbGF0IHJhbmdlIik7cmV0dXJuIHQuY3V0KDAsZSkuYXBwZW5kKHQuY3V0KG4pKX1pZihvIT1jKXRocm93IG5ldyBSYW5nZUVycm9yKCJSZW1vdmluZyBub24tZmxhdCByYW5nZSIpO3JldHVybiB0LnJlcGxhY2VDaGlsZChvLHMuY29weSh4KHMuY29udGVudCxlLWktMSxuLWktMSkpKX1mdW5jdGlvbiBrKHQsZSxuLHIpe3ZhciBvPXQuZmluZEluZGV4KGUpLGk9by5pbmRleCxzPW8ub2Zmc2V0LGE9dC5tYXliZUNoaWxkKGkpO2lmKHM9PWV8fGEuaXNUZXh0KXJldHVybiByJiYhci5jYW5SZXBsYWNlKGksaSxuKT9udWxsOnQuY3V0KDAsZSkuYXBwZW5kKG4pLmFwcGVuZCh0LmN1dChlKSk7dmFyIGM9ayhhLmNvbnRlbnQsZS1zLTEsbik7cmV0dXJuIGMmJnQucmVwbGFjZUNoaWxkKGksYS5jb3B5KGMpKX1mdW5jdGlvbiBTKHQsZSxuKXtpZihuLm9wZW5TdGFydD50LmRlcHRoKXRocm93IG5ldyB5KCJJbnNlcnRlZCBjb250ZW50IGRlZXBlciB0aGFuIGluc2VydGlvbiBwb3NpdGlvbiIpO2lmKHQuZGVwdGgtbi5vcGVuU3RhcnQhPWUuZGVwdGgtbi5vcGVuRW5kKXRocm93IG5ldyB5KCJJbmNvbnNpc3RlbnQgb3BlbiBkZXB0aHMiKTtyZXR1cm4gQyh0LGUsbiwwKX1mdW5jdGlvbiBDKHQsZSxuLHIpe3ZhciBvPXQuaW5kZXgociksaT10Lm5vZGUocik7aWYobz09ZS5pbmRleChyKSYmcjx0LmRlcHRoLW4ub3BlblN0YXJ0KXt2YXIgcz1DKHQsZSxuLHIrMSk7cmV0dXJuIGkuY29weShpLmNvbnRlbnQucmVwbGFjZUNoaWxkKG8scykpfWlmKG4uY29udGVudC5zaXplKXtpZihuLm9wZW5TdGFydHx8bi5vcGVuRW5kfHx0LmRlcHRoIT1yfHxlLmRlcHRoIT1yKXt2YXIgYT1SKG4sdCksYz1hLnN0YXJ0LHU9YS5lbmQ7cmV0dXJuIEEoaSxFKHQsYyx1LGUscikpfXZhciBsPXQucGFyZW50LGg9bC5jb250ZW50O3JldHVybiBBKGwsaC5jdXQoMCx0LnBhcmVudE9mZnNldCkuYXBwZW5kKG4uY29udGVudCkuYXBwZW5kKGguY3V0KGUucGFyZW50T2Zmc2V0KSkpfXJldHVybiBBKGksRCh0LGUscikpfWZ1bmN0aW9uIE8odCxlKXtpZighZS50eXBlLmNvbXBhdGlibGVDb250ZW50KHQudHlwZSkpdGhyb3cgbmV3IHkoIkNhbm5vdCBqb2luICIrZS50eXBlLm5hbWUrIiBvbnRvICIrdC50eXBlLm5hbWUpfWZ1bmN0aW9uIE0odCxlLG4pe3ZhciByPXQubm9kZShuKTtyZXR1cm4gTyhyLGUubm9kZShuKSkscn1mdW5jdGlvbiBOKHQsZSl7dmFyIG49ZS5sZW5ndGgtMTtuPj0wJiZ0LmlzVGV4dCYmdC5zYW1lTWFya3VwKGVbbl0pP2Vbbl09dC53aXRoVGV4dChlW25dLnRleHQrdC50ZXh0KTplLnB1c2godCl9ZnVuY3Rpb24gVCh0LGUsbixyKXt2YXIgbz0oZXx8dCkubm9kZShuKSxpPTAscz1lP2UuaW5kZXgobik6by5jaGlsZENvdW50O3QmJihpPXQuaW5kZXgobiksdC5kZXB0aD5uP2krKzp0LnRleHRPZmZzZXQmJihOKHQubm9kZUFmdGVyLHIpLGkrKykpO2Zvcih2YXIgYT1pO2E8czthKyspTihvLmNoaWxkKGEpLHIpO2UmJmUuZGVwdGg9PW4mJmUudGV4dE9mZnNldCYmTihlLm5vZGVCZWZvcmUscil9ZnVuY3Rpb24gQSh0LGUpe2lmKCF0LnR5cGUudmFsaWRDb250ZW50KGUpKXRocm93IG5ldyB5KCJJbnZhbGlkIGNvbnRlbnQgZm9yIG5vZGUgIit0LnR5cGUubmFtZSk7cmV0dXJuIHQuY29weShlKX1mdW5jdGlvbiBFKHQsZSxuLHIsbyl7dmFyIGk9dC5kZXB0aD5vJiZNKHQsZSxvKzEpLHM9ci5kZXB0aD5vJiZNKG4scixvKzEpLGE9W107cmV0dXJuIFQobnVsbCx0LG8sYSksaSYmcyYmZS5pbmRleChvKT09bi5pbmRleChvKT8oTyhpLHMpLE4oQShpLEUodCxlLG4scixvKzEpKSxhKSk6KGkmJk4oQShpLEQodCxlLG8rMSkpLGEpLFQoZSxuLG8sYSkscyYmTihBKHMsRChuLHIsbysxKSksYSkpLFQocixudWxsLG8sYSksbmV3IGYoYSl9ZnVuY3Rpb24gRCh0LGUsbil7dmFyIHI9W107aWYoVChudWxsLHQsbixyKSx0LmRlcHRoPm4pe3ZhciBvPU0odCxlLG4rMSk7TihBKG8sRCh0LGUsbisxKSkscil9cmV0dXJuIFQoZSxudWxsLG4sciksbmV3IGYocil9ZnVuY3Rpb24gUih0LGUpe2Zvcih2YXIgbj1lLmRlcHRoLXQub3BlblN0YXJ0LHI9ZS5ub2RlKG4pLG89ci5jb3B5KHQuY29udGVudCksaT1uLTE7aT49MDtpLS0pbz1lLm5vZGUoaSkuY29weShmLmZyb20obykpO3JldHVybntzdGFydDpvLnJlc29sdmVOb0NhY2hlKHQub3BlblN0YXJ0K24pLGVuZDpvLnJlc29sdmVOb0NhY2hlKG8uY29udGVudC5zaXplLXQub3BlbkVuZC1uKX19Yi5zaXplLmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLmNvbnRlbnQuc2l6ZS10aGlzLm9wZW5TdGFydC10aGlzLm9wZW5FbmR9LHcucHJvdG90eXBlLmluc2VydEF0PWZ1bmN0aW9uKHQsZSl7dmFyIG49ayh0aGlzLmNvbnRlbnQsdCt0aGlzLm9wZW5TdGFydCxlLG51bGwpO3JldHVybiBuJiZuZXcgdyhuLHRoaXMub3BlblN0YXJ0LHRoaXMub3BlbkVuZCl9LHcucHJvdG90eXBlLnJlbW92ZUJldHdlZW49ZnVuY3Rpb24odCxlKXtyZXR1cm4gbmV3IHcoeCh0aGlzLmNvbnRlbnQsdCt0aGlzLm9wZW5TdGFydCxlK3RoaXMub3BlblN0YXJ0KSx0aGlzLm9wZW5TdGFydCx0aGlzLm9wZW5FbmQpfSx3LnByb3RvdHlwZS5lcT1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5jb250ZW50LmVxKHQuY29udGVudCkmJnRoaXMub3BlblN0YXJ0PT10Lm9wZW5TdGFydCYmdGhpcy5vcGVuRW5kPT10Lm9wZW5FbmR9LHcucHJvdG90eXBlLnRvU3RyaW5nPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY29udGVudCsiKCIrdGhpcy5vcGVuU3RhcnQrIiwiK3RoaXMub3BlbkVuZCsiKSJ9LHcucHJvdG90eXBlLnRvSlNPTj1mdW5jdGlvbigpe2lmKCF0aGlzLmNvbnRlbnQuc2l6ZSlyZXR1cm4gbnVsbDt2YXIgdD17Y29udGVudDp0aGlzLmNvbnRlbnQudG9KU09OKCl9O3JldHVybiB0aGlzLm9wZW5TdGFydD4wJiYodC5vcGVuU3RhcnQ9dGhpcy5vcGVuU3RhcnQpLHRoaXMub3BlbkVuZD4wJiYodC5vcGVuRW5kPXRoaXMub3BlbkVuZCksdH0sdy5mcm9tSlNPTj1mdW5jdGlvbih0LGUpe2lmKCFlKXJldHVybiB3LmVtcHR5O3ZhciBuPWUub3BlblN0YXJ0fHwwLHI9ZS5vcGVuRW5kfHwwO2lmKCJudW1iZXIiIT10eXBlb2Ygbnx8Im51bWJlciIhPXR5cGVvZiByKXRocm93IG5ldyBSYW5nZUVycm9yKCJJbnZhbGlkIGlucHV0IGZvciBTbGljZS5mcm9tSlNPTiIpO3JldHVybiBuZXcgdyhmLmZyb21KU09OKHQsZS5jb250ZW50KSxlLm9wZW5TdGFydHx8MCxlLm9wZW5FbmR8fDApfSx3Lm1heE9wZW49ZnVuY3Rpb24odCxlKXt2b2lkIDA9PT1lJiYoZT0hMCk7Zm9yKHZhciBuPTAscj0wLG89dC5maXJzdENoaWxkO28mJiFvLmlzTGVhZiYmKGV8fCFvLnR5cGUuc3BlYy5pc29sYXRpbmcpO289by5maXJzdENoaWxkKW4rKztmb3IodmFyIGk9dC5sYXN0Q2hpbGQ7aSYmIWkuaXNMZWFmJiYoZXx8IWkudHlwZS5zcGVjLmlzb2xhdGluZyk7aT1pLmxhc3RDaGlsZClyKys7cmV0dXJuIG5ldyB3KHQsbixyKX0sT2JqZWN0LmRlZmluZVByb3BlcnRpZXMody5wcm90b3R5cGUsYiksdy5lbXB0eT1uZXcgdyhmLmVtcHR5LDAsMCk7dmFyIHo9ZnVuY3Rpb24odCxlLG4pe3RoaXMucG9zPXQsdGhpcy5wYXRoPWUsdGhpcy5kZXB0aD1lLmxlbmd0aC8zLTEsdGhpcy5wYXJlbnRPZmZzZXQ9bn0sUD17cGFyZW50Ontjb25maWd1cmFibGU6ITB9LGRvYzp7Y29uZmlndXJhYmxlOiEwfSx0ZXh0T2Zmc2V0Ontjb25maWd1cmFibGU6ITB9LG5vZGVBZnRlcjp7Y29uZmlndXJhYmxlOiEwfSxub2RlQmVmb3JlOntjb25maWd1cmFibGU6ITB9fTt6LnByb3RvdHlwZS5yZXNvbHZlRGVwdGg9ZnVuY3Rpb24odCl7cmV0dXJuIG51bGw9PXQ/dGhpcy5kZXB0aDp0PDA/dGhpcy5kZXB0aCt0OnR9LFAucGFyZW50LmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLm5vZGUodGhpcy5kZXB0aCl9LFAuZG9jLmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLm5vZGUoMCl9LHoucHJvdG90eXBlLm5vZGU9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMucGF0aFszKnRoaXMucmVzb2x2ZURlcHRoKHQpXX0sei5wcm90b3R5cGUuaW5kZXg9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMucGF0aFszKnRoaXMucmVzb2x2ZURlcHRoKHQpKzFdfSx6LnByb3RvdHlwZS5pbmRleEFmdGVyPWZ1bmN0aW9uKHQpe3JldHVybiB0PXRoaXMucmVzb2x2ZURlcHRoKHQpLHRoaXMuaW5kZXgodCkrKHQhPXRoaXMuZGVwdGh8fHRoaXMudGV4dE9mZnNldD8xOjApfSx6LnByb3RvdHlwZS5zdGFydD1mdW5jdGlvbih0KXtyZXR1cm4gdD10aGlzLnJlc29sdmVEZXB0aCh0KSwwPT10PzA6dGhpcy5wYXRoWzMqdC0xXSsxfSx6LnByb3RvdHlwZS5lbmQ9ZnVuY3Rpb24odCl7cmV0dXJuIHQ9dGhpcy5yZXNvbHZlRGVwdGgodCksdGhpcy5zdGFydCh0KSt0aGlzLm5vZGUodCkuY29udGVudC5zaXplfSx6LnByb3RvdHlwZS5iZWZvcmU9ZnVuY3Rpb24odCl7aWYodD10aGlzLnJlc29sdmVEZXB0aCh0KSwhdCl0aHJvdyBuZXcgUmFuZ2VFcnJvcigiVGhlcmUgaXMgbm8gcG9zaXRpb24gYmVmb3JlIHRoZSB0b3AtbGV2ZWwgbm9kZSIpO3JldHVybiB0PT10aGlzLmRlcHRoKzE/dGhpcy5wb3M6dGhpcy5wYXRoWzMqdC0xXX0sei5wcm90b3R5cGUuYWZ0ZXI9ZnVuY3Rpb24odCl7aWYodD10aGlzLnJlc29sdmVEZXB0aCh0KSwhdCl0aHJvdyBuZXcgUmFuZ2VFcnJvcigiVGhlcmUgaXMgbm8gcG9zaXRpb24gYWZ0ZXIgdGhlIHRvcC1sZXZlbCBub2RlIik7cmV0dXJuIHQ9PXRoaXMuZGVwdGgrMT90aGlzLnBvczp0aGlzLnBhdGhbMyp0LTFdK3RoaXMucGF0aFszKnRdLm5vZGVTaXplfSxQLnRleHRPZmZzZXQuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucG9zLXRoaXMucGF0aFt0aGlzLnBhdGgubGVuZ3RoLTFdfSxQLm5vZGVBZnRlci5nZXQ9ZnVuY3Rpb24oKXt2YXIgdD10aGlzLnBhcmVudCxlPXRoaXMuaW5kZXgodGhpcy5kZXB0aCk7aWYoZT09dC5jaGlsZENvdW50KXJldHVybiBudWxsO3ZhciBuPXRoaXMucG9zLXRoaXMucGF0aFt0aGlzLnBhdGgubGVuZ3RoLTFdLHI9dC5jaGlsZChlKTtyZXR1cm4gbj90LmNoaWxkKGUpLmN1dChuKTpyfSxQLm5vZGVCZWZvcmUuZ2V0PWZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5pbmRleCh0aGlzLmRlcHRoKSxlPXRoaXMucG9zLXRoaXMucGF0aFt0aGlzLnBhdGgubGVuZ3RoLTFdO3JldHVybiBlP3RoaXMucGFyZW50LmNoaWxkKHQpLmN1dCgwLGUpOjA9PXQ/bnVsbDp0aGlzLnBhcmVudC5jaGlsZCh0LTEpfSx6LnByb3RvdHlwZS5tYXJrcz1mdW5jdGlvbigpe3ZhciB0PXRoaXMucGFyZW50LGU9dGhpcy5pbmRleCgpO2lmKDA9PXQuY29udGVudC5zaXplKXJldHVybiBnLm5vbmU7aWYodGhpcy50ZXh0T2Zmc2V0KXJldHVybiB0LmNoaWxkKGUpLm1hcmtzO3ZhciBuPXQubWF5YmVDaGlsZChlLTEpLHI9dC5tYXliZUNoaWxkKGUpO2lmKCFuKXt2YXIgbz1uO249cixyPW99Zm9yKHZhciBpPW4ubWFya3Mscz0wO3M8aS5sZW5ndGg7cysrKSExIT09aVtzXS50eXBlLnNwZWMuaW5jbHVzaXZlfHxyJiZpW3NdLmlzSW5TZXQoci5tYXJrcyl8fChpPWlbcy0tXS5yZW1vdmVGcm9tU2V0KGkpKTtyZXR1cm4gaX0sei5wcm90b3R5cGUubWFya3NBY3Jvc3M9ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5wYXJlbnQubWF5YmVDaGlsZCh0aGlzLmluZGV4KCkpO2lmKCFlfHwhZS5pc0lubGluZSlyZXR1cm4gbnVsbDtmb3IodmFyIG49ZS5tYXJrcyxyPXQucGFyZW50Lm1heWJlQ2hpbGQodC5pbmRleCgpKSxvPTA7bzxuLmxlbmd0aDtvKyspITEhPT1uW29dLnR5cGUuc3BlYy5pbmNsdXNpdmV8fHImJm5bb10uaXNJblNldChyLm1hcmtzKXx8KG49bltvLS1dLnJlbW92ZUZyb21TZXQobikpO3JldHVybiBufSx6LnByb3RvdHlwZS5zaGFyZWREZXB0aD1mdW5jdGlvbih0KXtmb3IodmFyIGU9dGhpcy5kZXB0aDtlPjA7ZS0tKWlmKHRoaXMuc3RhcnQoZSk8PXQmJnRoaXMuZW5kKGUpPj10KXJldHVybiBlO3JldHVybiAwfSx6LnByb3RvdHlwZS5ibG9ja1JhbmdlPWZ1bmN0aW9uKHQsZSl7aWYodm9pZCAwPT09dCYmKHQ9dGhpcyksdC5wb3M8dGhpcy5wb3MpcmV0dXJuIHQuYmxvY2tSYW5nZSh0aGlzKTtmb3IodmFyIG49dGhpcy5kZXB0aC0odGhpcy5wYXJlbnQuaW5saW5lQ29udGVudHx8dGhpcy5wb3M9PXQucG9zPzE6MCk7bj49MDtuLS0paWYodC5wb3M8PXRoaXMuZW5kKG4pJiYoIWV8fGUodGhpcy5ub2RlKG4pKSkpcmV0dXJuIG5ldyBGKHRoaXMsdCxuKX0sei5wcm90b3R5cGUuc2FtZVBhcmVudD1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5wb3MtdGhpcy5wYXJlbnRPZmZzZXQ9PXQucG9zLXQucGFyZW50T2Zmc2V0fSx6LnByb3RvdHlwZS5tYXg9ZnVuY3Rpb24odCl7cmV0dXJuIHQucG9zPnRoaXMucG9zP3Q6dGhpc30sei5wcm90b3R5cGUubWluPWZ1bmN0aW9uKHQpe3JldHVybiB0LnBvczx0aGlzLnBvcz90OnRoaXN9LHoucHJvdG90eXBlLnRvU3RyaW5nPWZ1bmN0aW9uKCl7Zm9yKHZhciB0PSIiLGU9MTtlPD10aGlzLmRlcHRoO2UrKyl0Kz0odD8iLyI6IiIpK3RoaXMubm9kZShlKS50eXBlLm5hbWUrIl8iK3RoaXMuaW5kZXgoZS0xKTtyZXR1cm4gdCsiOiIrdGhpcy5wYXJlbnRPZmZzZXR9LHoucmVzb2x2ZT1mdW5jdGlvbih0LGUpe2lmKCEoZT49MCYmZTw9dC5jb250ZW50LnNpemUpKXRocm93IG5ldyBSYW5nZUVycm9yKCJQb3NpdGlvbiAiK2UrIiBvdXQgb2YgcmFuZ2UiKTtmb3IodmFyIG49W10scj0wLG89ZSxpPXQ7Oyl7dmFyIHM9aS5jb250ZW50LmZpbmRJbmRleChvKSxhPXMuaW5kZXgsYz1zLm9mZnNldCx1PW8tYztpZihuLnB1c2goaSxhLHIrYyksIXUpYnJlYWs7aWYoaT1pLmNoaWxkKGEpLGkuaXNUZXh0KWJyZWFrO289dS0xLHIrPWMrMX1yZXR1cm4gbmV3IHooZSxuLG8pfSx6LnJlc29sdmVDYWNoZWQ9ZnVuY3Rpb24odCxlKXtmb3IodmFyIG49MDtuPEkubGVuZ3RoO24rKyl7dmFyIHI9SVtuXTtpZihyLnBvcz09ZSYmci5kb2M9PXQpcmV0dXJuIHJ9dmFyIG89SVtCXT16LnJlc29sdmUodCxlKTtyZXR1cm4gQj0oQisxKSVfLG99LE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKHoucHJvdG90eXBlLFApO3ZhciBJPVtdLEI9MCxfPTEyLEY9ZnVuY3Rpb24odCxlLG4pe3RoaXMuJGZyb209dCx0aGlzLiR0bz1lLHRoaXMuZGVwdGg9bn0saj17c3RhcnQ6e2NvbmZpZ3VyYWJsZTohMH0sZW5kOntjb25maWd1cmFibGU6ITB9LHBhcmVudDp7Y29uZmlndXJhYmxlOiEwfSxzdGFydEluZGV4Ontjb25maWd1cmFibGU6ITB9LGVuZEluZGV4Ontjb25maWd1cmFibGU6ITB9fTtqLnN0YXJ0LmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLiRmcm9tLmJlZm9yZSh0aGlzLmRlcHRoKzEpfSxqLmVuZC5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy4kdG8uYWZ0ZXIodGhpcy5kZXB0aCsxKX0sai5wYXJlbnQuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuJGZyb20ubm9kZSh0aGlzLmRlcHRoKX0sai5zdGFydEluZGV4LmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLiRmcm9tLmluZGV4KHRoaXMuZGVwdGgpfSxqLmVuZEluZGV4LmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLiR0by5pbmRleEFmdGVyKHRoaXMuZGVwdGgpfSxPYmplY3QuZGVmaW5lUHJvcGVydGllcyhGLnByb3RvdHlwZSxqKTt2YXIgJD1PYmplY3QuY3JlYXRlKG51bGwpLFY9ZnVuY3Rpb24odCxlLG4scil7dGhpcy50eXBlPXQsdGhpcy5hdHRycz1lLHRoaXMuY29udGVudD1ufHxmLmVtcHR5LHRoaXMubWFya3M9cnx8Zy5ub25lfSxMPXtub2RlU2l6ZTp7Y29uZmlndXJhYmxlOiEwfSxjaGlsZENvdW50Ontjb25maWd1cmFibGU6ITB9LHRleHRDb250ZW50Ontjb25maWd1cmFibGU6ITB9LGZpcnN0Q2hpbGQ6e2NvbmZpZ3VyYWJsZTohMH0sbGFzdENoaWxkOntjb25maWd1cmFibGU6ITB9LGlzQmxvY2s6e2NvbmZpZ3VyYWJsZTohMH0saXNUZXh0YmxvY2s6e2NvbmZpZ3VyYWJsZTohMH0saW5saW5lQ29udGVudDp7Y29uZmlndXJhYmxlOiEwfSxpc0lubGluZTp7Y29uZmlndXJhYmxlOiEwfSxpc1RleHQ6e2NvbmZpZ3VyYWJsZTohMH0saXNMZWFmOntjb25maWd1cmFibGU6ITB9LGlzQXRvbTp7Y29uZmlndXJhYmxlOiEwfX07TC5ub2RlU2l6ZS5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5pc0xlYWY/MToyK3RoaXMuY29udGVudC5zaXplfSxMLmNoaWxkQ291bnQuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY29udGVudC5jaGlsZENvdW50fSxWLnByb3RvdHlwZS5jaGlsZD1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5jb250ZW50LmNoaWxkKHQpfSxWLnByb3RvdHlwZS5tYXliZUNoaWxkPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLmNvbnRlbnQubWF5YmVDaGlsZCh0KX0sVi5wcm90b3R5cGUuZm9yRWFjaD1mdW5jdGlvbih0KXt0aGlzLmNvbnRlbnQuZm9yRWFjaCh0KX0sVi5wcm90b3R5cGUubm9kZXNCZXR3ZWVuPWZ1bmN0aW9uKHQsZSxuLHIpe3ZvaWQgMD09PXImJihyPTApLHRoaXMuY29udGVudC5ub2Rlc0JldHdlZW4odCxlLG4scix0aGlzKX0sVi5wcm90b3R5cGUuZGVzY2VuZGFudHM9ZnVuY3Rpb24odCl7dGhpcy5ub2Rlc0JldHdlZW4oMCx0aGlzLmNvbnRlbnQuc2l6ZSx0KX0sTC50ZXh0Q29udGVudC5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy50ZXh0QmV0d2VlbigwLHRoaXMuY29udGVudC5zaXplLCIiKX0sVi5wcm90b3R5cGUudGV4dEJldHdlZW49ZnVuY3Rpb24odCxlLG4scil7cmV0dXJuIHRoaXMuY29udGVudC50ZXh0QmV0d2Vlbih0LGUsbixyKX0sTC5maXJzdENoaWxkLmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLmNvbnRlbnQuZmlyc3RDaGlsZH0sTC5sYXN0Q2hpbGQuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY29udGVudC5sYXN0Q2hpbGR9LFYucHJvdG90eXBlLmVxPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzPT10fHx0aGlzLnNhbWVNYXJrdXAodCkmJnRoaXMuY29udGVudC5lcSh0LmNvbnRlbnQpfSxWLnByb3RvdHlwZS5zYW1lTWFya3VwPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLmhhc01hcmt1cCh0LnR5cGUsdC5hdHRycyx0Lm1hcmtzKX0sVi5wcm90b3R5cGUuaGFzTWFya3VwPWZ1bmN0aW9uKHQsZSxuKXtyZXR1cm4gdGhpcy50eXBlPT10JiZtKHRoaXMuYXR0cnMsZXx8dC5kZWZhdWx0QXR0cnN8fCQpJiZnLnNhbWVTZXQodGhpcy5tYXJrcyxufHxnLm5vbmUpfSxWLnByb3RvdHlwZS5jb3B5PWZ1bmN0aW9uKHQpe3JldHVybiB2b2lkIDA9PT10JiYodD1udWxsKSx0PT10aGlzLmNvbnRlbnQ/dGhpczpuZXcgdGhpcy5jb25zdHJ1Y3Rvcih0aGlzLnR5cGUsdGhpcy5hdHRycyx0LHRoaXMubWFya3MpfSxWLnByb3RvdHlwZS5tYXJrPWZ1bmN0aW9uKHQpe3JldHVybiB0PT10aGlzLm1hcmtzP3RoaXM6bmV3IHRoaXMuY29uc3RydWN0b3IodGhpcy50eXBlLHRoaXMuYXR0cnMsdGhpcy5jb250ZW50LHQpfSxWLnByb3RvdHlwZS5jdXQ9ZnVuY3Rpb24odCxlKXtyZXR1cm4gMD09dCYmZT09dGhpcy5jb250ZW50LnNpemU/dGhpczp0aGlzLmNvcHkodGhpcy5jb250ZW50LmN1dCh0LGUpKX0sVi5wcm90b3R5cGUuc2xpY2U9ZnVuY3Rpb24odCxlLG4pe2lmKHZvaWQgMD09PWUmJihlPXRoaXMuY29udGVudC5zaXplKSx2b2lkIDA9PT1uJiYobj0hMSksdD09ZSlyZXR1cm4gdy5lbXB0eTt2YXIgcj10aGlzLnJlc29sdmUodCksbz10aGlzLnJlc29sdmUoZSksaT1uPzA6ci5zaGFyZWREZXB0aChlKSxzPXIuc3RhcnQoaSksYT1yLm5vZGUoaSksYz1hLmNvbnRlbnQuY3V0KHIucG9zLXMsby5wb3Mtcyk7cmV0dXJuIG5ldyB3KGMsci5kZXB0aC1pLG8uZGVwdGgtaSl9LFYucHJvdG90eXBlLnJlcGxhY2U9ZnVuY3Rpb24odCxlLG4pe3JldHVybiBTKHRoaXMucmVzb2x2ZSh0KSx0aGlzLnJlc29sdmUoZSksbil9LFYucHJvdG90eXBlLm5vZGVBdD1mdW5jdGlvbih0KXtmb3IodmFyIGU9dGhpczs7KXt2YXIgbj1lLmNvbnRlbnQuZmluZEluZGV4KHQpLHI9bi5pbmRleCxvPW4ub2Zmc2V0O2lmKGU9ZS5tYXliZUNoaWxkKHIpLCFlKXJldHVybiBudWxsO2lmKG89PXR8fGUuaXNUZXh0KXJldHVybiBlO3QtPW8rMX19LFYucHJvdG90eXBlLmNoaWxkQWZ0ZXI9ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5jb250ZW50LmZpbmRJbmRleCh0KSxuPWUuaW5kZXgscj1lLm9mZnNldDtyZXR1cm57bm9kZTp0aGlzLmNvbnRlbnQubWF5YmVDaGlsZChuKSxpbmRleDpuLG9mZnNldDpyfX0sVi5wcm90b3R5cGUuY2hpbGRCZWZvcmU9ZnVuY3Rpb24odCl7aWYoMD09dClyZXR1cm57bm9kZTpudWxsLGluZGV4OjAsb2Zmc2V0OjB9O3ZhciBlPXRoaXMuY29udGVudC5maW5kSW5kZXgodCksbj1lLmluZGV4LHI9ZS5vZmZzZXQ7aWYocjx0KXJldHVybntub2RlOnRoaXMuY29udGVudC5jaGlsZChuKSxpbmRleDpuLG9mZnNldDpyfTt2YXIgbz10aGlzLmNvbnRlbnQuY2hpbGQobi0xKTtyZXR1cm57bm9kZTpvLGluZGV4Om4tMSxvZmZzZXQ6ci1vLm5vZGVTaXplfX0sVi5wcm90b3R5cGUucmVzb2x2ZT1mdW5jdGlvbih0KXtyZXR1cm4gei5yZXNvbHZlQ2FjaGVkKHRoaXMsdCl9LFYucHJvdG90eXBlLnJlc29sdmVOb0NhY2hlPWZ1bmN0aW9uKHQpe3JldHVybiB6LnJlc29sdmUodGhpcyx0KX0sVi5wcm90b3R5cGUucmFuZ2VIYXNNYXJrPWZ1bmN0aW9uKHQsZSxuKXt2YXIgcj0hMTtyZXR1cm4gZT50JiZ0aGlzLm5vZGVzQmV0d2Vlbih0LGUsKGZ1bmN0aW9uKHQpe3JldHVybiBuLmlzSW5TZXQodC5tYXJrcykmJihyPSEwKSwhcn0pKSxyfSxMLmlzQmxvY2suZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudHlwZS5pc0Jsb2NrfSxMLmlzVGV4dGJsb2NrLmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLnR5cGUuaXNUZXh0YmxvY2t9LEwuaW5saW5lQ29udGVudC5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy50eXBlLmlubGluZUNvbnRlbnR9LEwuaXNJbmxpbmUuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudHlwZS5pc0lubGluZX0sTC5pc1RleHQuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudHlwZS5pc1RleHR9LEwuaXNMZWFmLmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLnR5cGUuaXNMZWFmfSxMLmlzQXRvbS5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy50eXBlLmlzQXRvbX0sVi5wcm90b3R5cGUudG9TdHJpbmc9ZnVuY3Rpb24oKXtpZih0aGlzLnR5cGUuc3BlYy50b0RlYnVnU3RyaW5nKXJldHVybiB0aGlzLnR5cGUuc3BlYy50b0RlYnVnU3RyaW5nKHRoaXMpO3ZhciB0PXRoaXMudHlwZS5uYW1lO3JldHVybiB0aGlzLmNvbnRlbnQuc2l6ZSYmKHQrPSIoIit0aGlzLmNvbnRlbnQudG9TdHJpbmdJbm5lcigpKyIpIiksSih0aGlzLm1hcmtzLHQpfSxWLnByb3RvdHlwZS5jb250ZW50TWF0Y2hBdD1mdW5jdGlvbih0KXt2YXIgZT10aGlzLnR5cGUuY29udGVudE1hdGNoLm1hdGNoRnJhZ21lbnQodGhpcy5jb250ZW50LDAsdCk7aWYoIWUpdGhyb3cgbmV3IEVycm9yKCJDYWxsZWQgY29udGVudE1hdGNoQXQgb24gYSBub2RlIHdpdGggaW52YWxpZCBjb250ZW50Iik7cmV0dXJuIGV9LFYucHJvdG90eXBlLmNhblJlcGxhY2U9ZnVuY3Rpb24odCxlLG4scixvKXt2b2lkIDA9PT1uJiYobj1mLmVtcHR5KSx2b2lkIDA9PT1yJiYocj0wKSx2b2lkIDA9PT1vJiYobz1uLmNoaWxkQ291bnQpO3ZhciBpPXRoaXMuY29udGVudE1hdGNoQXQodCkubWF0Y2hGcmFnbWVudChuLHIsbykscz1pJiZpLm1hdGNoRnJhZ21lbnQodGhpcy5jb250ZW50LGUpO2lmKCFzfHwhcy52YWxpZEVuZClyZXR1cm4hMTtmb3IodmFyIGE9cjthPG87YSsrKWlmKCF0aGlzLnR5cGUuYWxsb3dzTWFya3Mobi5jaGlsZChhKS5tYXJrcykpcmV0dXJuITE7cmV0dXJuITB9LFYucHJvdG90eXBlLmNhblJlcGxhY2VXaXRoPWZ1bmN0aW9uKHQsZSxuLHIpe2lmKHImJiF0aGlzLnR5cGUuYWxsb3dzTWFya3MocikpcmV0dXJuITE7dmFyIG89dGhpcy5jb250ZW50TWF0Y2hBdCh0KS5tYXRjaFR5cGUobiksaT1vJiZvLm1hdGNoRnJhZ21lbnQodGhpcy5jb250ZW50LGUpO3JldHVybiEhaSYmaS52YWxpZEVuZH0sVi5wcm90b3R5cGUuY2FuQXBwZW5kPWZ1bmN0aW9uKHQpe3JldHVybiB0LmNvbnRlbnQuc2l6ZT90aGlzLmNhblJlcGxhY2UodGhpcy5jaGlsZENvdW50LHRoaXMuY2hpbGRDb3VudCx0LmNvbnRlbnQpOnRoaXMudHlwZS5jb21wYXRpYmxlQ29udGVudCh0LnR5cGUpfSxWLnByb3RvdHlwZS5jaGVjaz1mdW5jdGlvbigpe2lmKCF0aGlzLnR5cGUudmFsaWRDb250ZW50KHRoaXMuY29udGVudCkpdGhyb3cgbmV3IFJhbmdlRXJyb3IoIkludmFsaWQgY29udGVudCBmb3Igbm9kZSAiK3RoaXMudHlwZS5uYW1lKyI6ICIrdGhpcy5jb250ZW50LnRvU3RyaW5nKCkuc2xpY2UoMCw1MCkpO3RoaXMuY29udGVudC5mb3JFYWNoKChmdW5jdGlvbih0KXtyZXR1cm4gdC5jaGVjaygpfSkpfSxWLnByb3RvdHlwZS50b0pTT049ZnVuY3Rpb24oKXt2YXIgdD17dHlwZTp0aGlzLnR5cGUubmFtZX07Zm9yKHZhciBlIGluIHRoaXMuYXR0cnMpe3QuYXR0cnM9dGhpcy5hdHRyczticmVha31yZXR1cm4gdGhpcy5jb250ZW50LnNpemUmJih0LmNvbnRlbnQ9dGhpcy5jb250ZW50LnRvSlNPTigpKSx0aGlzLm1hcmtzLmxlbmd0aCYmKHQubWFya3M9dGhpcy5tYXJrcy5tYXAoKGZ1bmN0aW9uKHQpe3JldHVybiB0LnRvSlNPTigpfSkpKSx0fSxWLmZyb21KU09OPWZ1bmN0aW9uKHQsZSl7aWYoIWUpdGhyb3cgbmV3IFJhbmdlRXJyb3IoIkludmFsaWQgaW5wdXQgZm9yIE5vZGUuZnJvbUpTT04iKTt2YXIgbj1udWxsO2lmKGUubWFya3Mpe2lmKCFBcnJheS5pc0FycmF5KGUubWFya3MpKXRocm93IG5ldyBSYW5nZUVycm9yKCJJbnZhbGlkIG1hcmsgZGF0YSBmb3IgTm9kZS5mcm9tSlNPTiIpO249ZS5tYXJrcy5tYXAodC5tYXJrRnJvbUpTT04pfWlmKCJ0ZXh0Ij09ZS50eXBlKXtpZigic3RyaW5nIiE9dHlwZW9mIGUudGV4dCl0aHJvdyBuZXcgUmFuZ2VFcnJvcigiSW52YWxpZCB0ZXh0IG5vZGUgaW4gSlNPTiIpO3JldHVybiB0LnRleHQoZS50ZXh0LG4pfXZhciByPWYuZnJvbUpTT04odCxlLmNvbnRlbnQpO3JldHVybiB0Lm5vZGVUeXBlKGUudHlwZSkuY3JlYXRlKGUuYXR0cnMscixuKX0sT2JqZWN0LmRlZmluZVByb3BlcnRpZXMoVi5wcm90b3R5cGUsTCk7dmFyIHE9ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZShlLG4scixvKXtpZih0LmNhbGwodGhpcyxlLG4sbnVsbCxvKSwhcil0aHJvdyBuZXcgUmFuZ2VFcnJvcigiRW1wdHkgdGV4dCBub2RlcyBhcmUgbm90IGFsbG93ZWQiKTt0aGlzLnRleHQ9cn10JiYoZS5fX3Byb3RvX189dCksZS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZSh0JiZ0LnByb3RvdHlwZSksZS5wcm90b3R5cGUuY29uc3RydWN0b3I9ZTt2YXIgbj17dGV4dENvbnRlbnQ6e2NvbmZpZ3VyYWJsZTohMH0sbm9kZVNpemU6e2NvbmZpZ3VyYWJsZTohMH19O3JldHVybiBlLnByb3RvdHlwZS50b1N0cmluZz1mdW5jdGlvbigpe3JldHVybiB0aGlzLnR5cGUuc3BlYy50b0RlYnVnU3RyaW5nP3RoaXMudHlwZS5zcGVjLnRvRGVidWdTdHJpbmcodGhpcyk6Sih0aGlzLm1hcmtzLEpTT04uc3RyaW5naWZ5KHRoaXMudGV4dCkpfSxuLnRleHRDb250ZW50LmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLnRleHR9LGUucHJvdG90eXBlLnRleHRCZXR3ZWVuPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIHRoaXMudGV4dC5zbGljZSh0LGUpfSxuLm5vZGVTaXplLmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLnRleHQubGVuZ3RofSxlLnByb3RvdHlwZS5tYXJrPWZ1bmN0aW9uKHQpe3JldHVybiB0PT10aGlzLm1hcmtzP3RoaXM6bmV3IGUodGhpcy50eXBlLHRoaXMuYXR0cnMsdGhpcy50ZXh0LHQpfSxlLnByb3RvdHlwZS53aXRoVGV4dD1mdW5jdGlvbih0KXtyZXR1cm4gdD09dGhpcy50ZXh0P3RoaXM6bmV3IGUodGhpcy50eXBlLHRoaXMuYXR0cnMsdCx0aGlzLm1hcmtzKX0sZS5wcm90b3R5cGUuY3V0PWZ1bmN0aW9uKHQsZSl7cmV0dXJuIHZvaWQgMD09PXQmJih0PTApLHZvaWQgMD09PWUmJihlPXRoaXMudGV4dC5sZW5ndGgpLDA9PXQmJmU9PXRoaXMudGV4dC5sZW5ndGg/dGhpczp0aGlzLndpdGhUZXh0KHRoaXMudGV4dC5zbGljZSh0LGUpKX0sZS5wcm90b3R5cGUuZXE9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuc2FtZU1hcmt1cCh0KSYmdGhpcy50ZXh0PT10LnRleHR9LGUucHJvdG90eXBlLnRvSlNPTj1mdW5jdGlvbigpe3ZhciBlPXQucHJvdG90eXBlLnRvSlNPTi5jYWxsKHRoaXMpO3JldHVybiBlLnRleHQ9dGhpcy50ZXh0LGV9LE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKGUucHJvdG90eXBlLG4pLGV9KFYpO2Z1bmN0aW9uIEoodCxlKXtmb3IodmFyIG49dC5sZW5ndGgtMTtuPj0wO24tLSllPXRbbl0udHlwZS5uYW1lKyIoIitlKyIpIjtyZXR1cm4gZX12YXIgVz1mdW5jdGlvbih0KXt0aGlzLnZhbGlkRW5kPXQsdGhpcy5uZXh0PVtdLHRoaXMud3JhcENhY2hlPVtdfSxIPXtpbmxpbmVDb250ZW50Ontjb25maWd1cmFibGU6ITB9LGRlZmF1bHRUeXBlOntjb25maWd1cmFibGU6ITB9LGVkZ2VDb3VudDp7Y29uZmlndXJhYmxlOiEwfX07Vy5wYXJzZT1mdW5jdGlvbih0LGUpe3ZhciBuPW5ldyBLKHQsZSk7aWYobnVsbD09bi5uZXh0KXJldHVybiBXLmVtcHR5O3ZhciByPUcobik7bi5uZXh0JiZuLmVycigiVW5leHBlY3RlZCB0cmFpbGluZyB0ZXh0Iik7dmFyIG89aXQobnQocikpO3JldHVybiBzdChvLG4pLG99LFcucHJvdG90eXBlLm1hdGNoVHlwZT1mdW5jdGlvbih0KXtmb3IodmFyIGU9MDtlPHRoaXMubmV4dC5sZW5ndGg7ZSs9MilpZih0aGlzLm5leHRbZV09PXQpcmV0dXJuIHRoaXMubmV4dFtlKzFdO3JldHVybiBudWxsfSxXLnByb3RvdHlwZS5tYXRjaEZyYWdtZW50PWZ1bmN0aW9uKHQsZSxuKXt2b2lkIDA9PT1lJiYoZT0wKSx2b2lkIDA9PT1uJiYobj10LmNoaWxkQ291bnQpO2Zvcih2YXIgcj10aGlzLG89ZTtyJiZvPG47bysrKXI9ci5tYXRjaFR5cGUodC5jaGlsZChvKS50eXBlKTtyZXR1cm4gcn0sSC5pbmxpbmVDb250ZW50LmdldD1mdW5jdGlvbigpe3ZhciB0PXRoaXMubmV4dFswXTtyZXR1cm4hIXQmJnQuaXNJbmxpbmV9LEguZGVmYXVsdFR5cGUuZ2V0PWZ1bmN0aW9uKCl7Zm9yKHZhciB0PTA7dDx0aGlzLm5leHQubGVuZ3RoO3QrPTIpe3ZhciBlPXRoaXMubmV4dFt0XTtpZighZS5pc1RleHQmJiFlLmhhc1JlcXVpcmVkQXR0cnMoKSlyZXR1cm4gZX19LFcucHJvdG90eXBlLmNvbXBhdGlibGU9ZnVuY3Rpb24odCl7Zm9yKHZhciBlPTA7ZTx0aGlzLm5leHQubGVuZ3RoO2UrPTIpZm9yKHZhciBuPTA7bjx0Lm5leHQubGVuZ3RoO24rPTIpaWYodGhpcy5uZXh0W2VdPT10Lm5leHRbbl0pcmV0dXJuITA7cmV0dXJuITF9LFcucHJvdG90eXBlLmZpbGxCZWZvcmU9ZnVuY3Rpb24odCxlLG4pe3ZvaWQgMD09PWUmJihlPSExKSx2b2lkIDA9PT1uJiYobj0wKTt2YXIgcj1bdGhpc107ZnVuY3Rpb24gbyhpLHMpe3ZhciBhPWkubWF0Y2hGcmFnbWVudCh0LG4pO2lmKGEmJighZXx8YS52YWxpZEVuZCkpcmV0dXJuIGYuZnJvbShzLm1hcCgoZnVuY3Rpb24odCl7cmV0dXJuIHQuY3JlYXRlQW5kRmlsbCgpfSkpKTtmb3IodmFyIGM9MDtjPGkubmV4dC5sZW5ndGg7Yys9Mil7dmFyIHU9aS5uZXh0W2NdLGw9aS5uZXh0W2MrMV07aWYoIXUuaXNUZXh0JiYhdS5oYXNSZXF1aXJlZEF0dHJzKCkmJi0xPT1yLmluZGV4T2YobCkpe3IucHVzaChsKTt2YXIgaD1vKGwscy5jb25jYXQodSkpO2lmKGgpcmV0dXJuIGh9fX1yZXR1cm4gbyh0aGlzLFtdKX0sVy5wcm90b3R5cGUuZmluZFdyYXBwaW5nPWZ1bmN0aW9uKHQpe2Zvcih2YXIgZT0wO2U8dGhpcy53cmFwQ2FjaGUubGVuZ3RoO2UrPTIpaWYodGhpcy53cmFwQ2FjaGVbZV09PXQpcmV0dXJuIHRoaXMud3JhcENhY2hlW2UrMV07dmFyIG49dGhpcy5jb21wdXRlV3JhcHBpbmcodCk7cmV0dXJuIHRoaXMud3JhcENhY2hlLnB1c2godCxuKSxufSxXLnByb3RvdHlwZS5jb21wdXRlV3JhcHBpbmc9ZnVuY3Rpb24odCl7dmFyIGU9T2JqZWN0LmNyZWF0ZShudWxsKSxuPVt7bWF0Y2g6dGhpcyx0eXBlOm51bGwsdmlhOm51bGx9XTt3aGlsZShuLmxlbmd0aCl7dmFyIHI9bi5zaGlmdCgpLG89ci5tYXRjaDtpZihvLm1hdGNoVHlwZSh0KSl7Zm9yKHZhciBpPVtdLHM9cjtzLnR5cGU7cz1zLnZpYSlpLnB1c2gocy50eXBlKTtyZXR1cm4gaS5yZXZlcnNlKCl9Zm9yKHZhciBhPTA7YTxvLm5leHQubGVuZ3RoO2ErPTIpe3ZhciBjPW8ubmV4dFthXTtjLmlzTGVhZnx8Yy5oYXNSZXF1aXJlZEF0dHJzKCl8fGMubmFtZSBpbiBlfHxyLnR5cGUmJiFvLm5leHRbYSsxXS52YWxpZEVuZHx8KG4ucHVzaCh7bWF0Y2g6Yy5jb250ZW50TWF0Y2gsdHlwZTpjLHZpYTpyfSksZVtjLm5hbWVdPSEwKX19fSxILmVkZ2VDb3VudC5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5uZXh0Lmxlbmd0aD4+MX0sVy5wcm90b3R5cGUuZWRnZT1mdW5jdGlvbih0KXt2YXIgZT10PDwxO2lmKGU+PXRoaXMubmV4dC5sZW5ndGgpdGhyb3cgbmV3IFJhbmdlRXJyb3IoIlRoZXJlJ3Mgbm8gIit0KyJ0aCBlZGdlIGluIHRoaXMgY29udGVudCBtYXRjaCIpO3JldHVybnt0eXBlOnRoaXMubmV4dFtlXSxuZXh0OnRoaXMubmV4dFtlKzFdfX0sVy5wcm90b3R5cGUudG9TdHJpbmc9ZnVuY3Rpb24oKXt2YXIgdD1bXTtmdW5jdGlvbiBlKG4pe3QucHVzaChuKTtmb3IodmFyIHI9MTtyPG4ubmV4dC5sZW5ndGg7cis9MiktMT09dC5pbmRleE9mKG4ubmV4dFtyXSkmJmUobi5uZXh0W3JdKX1yZXR1cm4gZSh0aGlzKSx0Lm1hcCgoZnVuY3Rpb24oZSxuKXtmb3IodmFyIHI9bisoZS52YWxpZEVuZD8iKiI6IiAiKSsiICIsbz0wO288ZS5uZXh0Lmxlbmd0aDtvKz0yKXIrPShvPyIsICI6IiIpK2UubmV4dFtvXS5uYW1lKyItPiIrdC5pbmRleE9mKGUubmV4dFtvKzFdKTtyZXR1cm4gcn0pKS5qb2luKCJcbiIpfSxPYmplY3QuZGVmaW5lUHJvcGVydGllcyhXLnByb3RvdHlwZSxIKSxXLmVtcHR5PW5ldyBXKCEwKTt2YXIgSz1mdW5jdGlvbih0LGUpe3RoaXMuc3RyaW5nPXQsdGhpcy5ub2RlVHlwZXM9ZSx0aGlzLmlubGluZT1udWxsLHRoaXMucG9zPTAsdGhpcy50b2tlbnM9dC5zcGxpdCgvXHMqKD89XGJ8XFd8JCkvKSwiIj09dGhpcy50b2tlbnNbdGhpcy50b2tlbnMubGVuZ3RoLTFdJiZ0aGlzLnRva2Vucy5wb3AoKSwiIj09dGhpcy50b2tlbnNbMF0mJnRoaXMudG9rZW5zLnVuc2hpZnQoKX0sVT17bmV4dDp7Y29uZmlndXJhYmxlOiEwfX07ZnVuY3Rpb24gRyh0KXt2YXIgZT1bXTtkb3tlLnB1c2goWCh0KSl9d2hpbGUodC5lYXQoInwiKSk7cmV0dXJuIDE9PWUubGVuZ3RoP2VbMF06e3R5cGU6ImNob2ljZSIsZXhwcnM6ZX19ZnVuY3Rpb24gWCh0KXt2YXIgZT1bXTtkb3tlLnB1c2goWSh0KSl9d2hpbGUodC5uZXh0JiYiKSIhPXQubmV4dCYmInwiIT10Lm5leHQpO3JldHVybiAxPT1lLmxlbmd0aD9lWzBdOnt0eXBlOiJzZXEiLGV4cHJzOmV9fWZ1bmN0aW9uIFkodCl7Zm9yKHZhciBlPWV0KHQpOzspaWYodC5lYXQoIisiKSllPXt0eXBlOiJwbHVzIixleHByOmV9O2Vsc2UgaWYodC5lYXQoIioiKSllPXt0eXBlOiJzdGFyIixleHByOmV9O2Vsc2UgaWYodC5lYXQoIj8iKSllPXt0eXBlOiJvcHQiLGV4cHI6ZX07ZWxzZXtpZighdC5lYXQoInsiKSlicmVhaztlPVEodCxlKX1yZXR1cm4gZX1mdW5jdGlvbiBaKHQpey9cRC8udGVzdCh0Lm5leHQpJiZ0LmVycigiRXhwZWN0ZWQgbnVtYmVyLCBnb3QgJyIrdC5uZXh0KyInIik7dmFyIGU9TnVtYmVyKHQubmV4dCk7cmV0dXJuIHQucG9zKyssZX1mdW5jdGlvbiBRKHQsZSl7dmFyIG49Wih0KSxyPW47cmV0dXJuIHQuZWF0KCIsIikmJihyPSJ9IiE9dC5uZXh0P1oodCk6LTEpLHQuZWF0KCJ9Iil8fHQuZXJyKCJVbmNsb3NlZCBicmFjZWQgcmFuZ2UiKSx7dHlwZToicmFuZ2UiLG1pbjpuLG1heDpyLGV4cHI6ZX19ZnVuY3Rpb24gdHQodCxlKXt2YXIgbj10Lm5vZGVUeXBlcyxyPW5bZV07aWYocilyZXR1cm5bcl07dmFyIG89W107Zm9yKHZhciBpIGluIG4pe3ZhciBzPW5baV07cy5ncm91cHMuaW5kZXhPZihlKT4tMSYmby5wdXNoKHMpfXJldHVybiAwPT1vLmxlbmd0aCYmdC5lcnIoIk5vIG5vZGUgdHlwZSBvciBncm91cCAnIitlKyInIGZvdW5kIiksb31mdW5jdGlvbiBldCh0KXtpZih0LmVhdCgiKCIpKXt2YXIgZT1HKHQpO3JldHVybiB0LmVhdCgiKSIpfHx0LmVycigiTWlzc2luZyBjbG9zaW5nIHBhcmVuIiksZX1pZighL1xXLy50ZXN0KHQubmV4dCkpe3ZhciBuPXR0KHQsdC5uZXh0KS5tYXAoKGZ1bmN0aW9uKGUpe3JldHVybiBudWxsPT10LmlubGluZT90LmlubGluZT1lLmlzSW5saW5lOnQuaW5saW5lIT1lLmlzSW5saW5lJiZ0LmVycigiTWl4aW5nIGlubGluZSBhbmQgYmxvY2sgY29udGVudCIpLHt0eXBlOiJuYW1lIix2YWx1ZTplfX0pKTtyZXR1cm4gdC5wb3MrKywxPT1uLmxlbmd0aD9uWzBdOnt0eXBlOiJjaG9pY2UiLGV4cHJzOm59fXQuZXJyKCJVbmV4cGVjdGVkIHRva2VuICciK3QubmV4dCsiJyIpfWZ1bmN0aW9uIG50KHQpe3ZhciBlPVtbXV07cmV0dXJuIG8oaSh0LDApLG4oKSksZTtmdW5jdGlvbiBuKCl7cmV0dXJuIGUucHVzaChbXSktMX1mdW5jdGlvbiByKHQsbixyKXt2YXIgbz17dGVybTpyLHRvOm59O3JldHVybiBlW3RdLnB1c2gobyksb31mdW5jdGlvbiBvKHQsZSl7dC5mb3JFYWNoKChmdW5jdGlvbih0KXtyZXR1cm4gdC50bz1lfSkpfWZ1bmN0aW9uIGkodCxlKXtpZigiY2hvaWNlIj09dC50eXBlKXJldHVybiB0LmV4cHJzLnJlZHVjZSgoZnVuY3Rpb24odCxuKXtyZXR1cm4gdC5jb25jYXQoaShuLGUpKX0pLFtdKTtpZigic2VxIj09dC50eXBlKWZvcih2YXIgcz0wOztzKyspe3ZhciBhPWkodC5leHByc1tzXSxlKTtpZihzPT10LmV4cHJzLmxlbmd0aC0xKXJldHVybiBhO28oYSxlPW4oKSl9ZWxzZXtpZigic3RhciI9PXQudHlwZSl7dmFyIGM9bigpO3JldHVybiByKGUsYyksbyhpKHQuZXhwcixjKSxjKSxbcihjKV19aWYoInBsdXMiPT10LnR5cGUpe3ZhciB1PW4oKTtyZXR1cm4gbyhpKHQuZXhwcixlKSx1KSxvKGkodC5leHByLHUpLHUpLFtyKHUpXX1pZigib3B0Ij09dC50eXBlKXJldHVybltyKGUpXS5jb25jYXQoaSh0LmV4cHIsZSkpO2lmKCJyYW5nZSI9PXQudHlwZSl7Zm9yKHZhciBsPWUsaD0wO2g8dC5taW47aCsrKXt2YXIgZj1uKCk7byhpKHQuZXhwcixsKSxmKSxsPWZ9aWYoLTE9PXQubWF4KW8oaSh0LmV4cHIsbCksbCk7ZWxzZSBmb3IodmFyIHA9dC5taW47cDx0Lm1heDtwKyspe3ZhciBkPW4oKTtyKGwsZCksbyhpKHQuZXhwcixsKSxkKSxsPWR9cmV0dXJuW3IobCldfWlmKCJuYW1lIj09dC50eXBlKXJldHVybltyKGUsbnVsbCx0LnZhbHVlKV19fX1mdW5jdGlvbiBydCh0LGUpe3JldHVybiBlLXR9ZnVuY3Rpb24gb3QodCxlKXt2YXIgbj1bXTtyZXR1cm4gcihlKSxuLnNvcnQocnQpO2Z1bmN0aW9uIHIoZSl7dmFyIG89dFtlXTtpZigxPT1vLmxlbmd0aCYmIW9bMF0udGVybSlyZXR1cm4gcihvWzBdLnRvKTtuLnB1c2goZSk7Zm9yKHZhciBpPTA7aTxvLmxlbmd0aDtpKyspe3ZhciBzPW9baV0sYT1zLnRlcm0sYz1zLnRvO2F8fC0xIT1uLmluZGV4T2YoYyl8fHIoYyl9fX1mdW5jdGlvbiBpdCh0KXt2YXIgZT1PYmplY3QuY3JlYXRlKG51bGwpO3JldHVybiBuKG90KHQsMCkpO2Z1bmN0aW9uIG4ocil7dmFyIG89W107ci5mb3JFYWNoKChmdW5jdGlvbihlKXt0W2VdLmZvckVhY2goKGZ1bmN0aW9uKGUpe3ZhciBuPWUudGVybSxyPWUudG87aWYobil7dmFyIGk9by5pbmRleE9mKG4pLHM9aT4tMSYmb1tpKzFdO290KHQscikuZm9yRWFjaCgoZnVuY3Rpb24odCl7c3x8by5wdXNoKG4scz1bXSksLTE9PXMuaW5kZXhPZih0KSYmcy5wdXNoKHQpfSkpfX0pKX0pKTtmb3IodmFyIGk9ZVtyLmpvaW4oIiwiKV09bmV3IFcoci5pbmRleE9mKHQubGVuZ3RoLTEpPi0xKSxzPTA7czxvLmxlbmd0aDtzKz0yKXt2YXIgYT1vW3MrMV0uc29ydChydCk7aS5uZXh0LnB1c2gob1tzXSxlW2Euam9pbigiLCIpXXx8bihhKSl9cmV0dXJuIGl9fWZ1bmN0aW9uIHN0KHQsZSl7Zm9yKHZhciBuPTAscj1bdF07bjxyLmxlbmd0aDtuKyspe2Zvcih2YXIgbz1yW25dLGk9IW8udmFsaWRFbmQscz1bXSxhPTA7YTxvLm5leHQubGVuZ3RoO2ErPTIpe3ZhciBjPW8ubmV4dFthXSx1PW8ubmV4dFthKzFdO3MucHVzaChjLm5hbWUpLCFpfHxjLmlzVGV4dHx8Yy5oYXNSZXF1aXJlZEF0dHJzKCl8fChpPSExKSwtMT09ci5pbmRleE9mKHUpJiZyLnB1c2godSl9aSYmZS5lcnIoIk9ubHkgbm9uLWdlbmVyYXRhYmxlIG5vZGVzICgiK3Muam9pbigiLCAiKSsiKSBpbiBhIHJlcXVpcmVkIHBvc2l0aW9uIChzZWUgaHR0cHM6Ly9wcm9zZW1pcnJvci5uZXQvZG9jcy9ndWlkZS8jZ2VuZXJhdGFibGUpIil9fWZ1bmN0aW9uIGF0KHQpe3ZhciBlPU9iamVjdC5jcmVhdGUobnVsbCk7Zm9yKHZhciBuIGluIHQpe3ZhciByPXRbbl07aWYoIXIuaGFzRGVmYXVsdClyZXR1cm4gbnVsbDtlW25dPXIuZGVmYXVsdH1yZXR1cm4gZX1mdW5jdGlvbiBjdCh0LGUpe3ZhciBuPU9iamVjdC5jcmVhdGUobnVsbCk7Zm9yKHZhciByIGluIHQpe3ZhciBvPWUmJmVbcl07aWYodm9pZCAwPT09byl7dmFyIGk9dFtyXTtpZighaS5oYXNEZWZhdWx0KXRocm93IG5ldyBSYW5nZUVycm9yKCJObyB2YWx1ZSBzdXBwbGllZCBmb3IgYXR0cmlidXRlICIrcik7bz1pLmRlZmF1bHR9bltyXT1vfXJldHVybiBufWZ1bmN0aW9uIHV0KHQpe3ZhciBlPU9iamVjdC5jcmVhdGUobnVsbCk7aWYodClmb3IodmFyIG4gaW4gdCllW25dPW5ldyBmdCh0W25dKTtyZXR1cm4gZX1VLm5leHQuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudG9rZW5zW3RoaXMucG9zXX0sSy5wcm90b3R5cGUuZWF0PWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLm5leHQ9PXQmJih0aGlzLnBvcysrfHwhMCl9LEsucHJvdG90eXBlLmVycj1mdW5jdGlvbih0KXt0aHJvdyBuZXcgU3ludGF4RXJyb3IodCsiIChpbiBjb250ZW50IGV4cHJlc3Npb24gJyIrdGhpcy5zdHJpbmcrIicpIil9LE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKEsucHJvdG90eXBlLFUpO3ZhciBsdD1mdW5jdGlvbih0LGUsbil7dGhpcy5uYW1lPXQsdGhpcy5zY2hlbWE9ZSx0aGlzLnNwZWM9bix0aGlzLmdyb3Vwcz1uLmdyb3VwP24uZ3JvdXAuc3BsaXQoIiAiKTpbXSx0aGlzLmF0dHJzPXV0KG4uYXR0cnMpLHRoaXMuZGVmYXVsdEF0dHJzPWF0KHRoaXMuYXR0cnMpLHRoaXMuY29udGVudE1hdGNoPW51bGwsdGhpcy5tYXJrU2V0PW51bGwsdGhpcy5pbmxpbmVDb250ZW50PW51bGwsdGhpcy5pc0Jsb2NrPSEobi5pbmxpbmV8fCJ0ZXh0Ij09dCksdGhpcy5pc1RleHQ9InRleHQiPT10fSxodD17aXNJbmxpbmU6e2NvbmZpZ3VyYWJsZTohMH0saXNUZXh0YmxvY2s6e2NvbmZpZ3VyYWJsZTohMH0saXNMZWFmOntjb25maWd1cmFibGU6ITB9LGlzQXRvbTp7Y29uZmlndXJhYmxlOiEwfX07aHQuaXNJbmxpbmUuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIXRoaXMuaXNCbG9ja30saHQuaXNUZXh0YmxvY2suZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuaXNCbG9jayYmdGhpcy5pbmxpbmVDb250ZW50fSxodC5pc0xlYWYuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY29udGVudE1hdGNoPT1XLmVtcHR5fSxodC5pc0F0b20uZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuaXNMZWFmfHx0aGlzLnNwZWMuYXRvbX0sbHQucHJvdG90eXBlLmhhc1JlcXVpcmVkQXR0cnM9ZnVuY3Rpb24oKXtmb3IodmFyIHQgaW4gdGhpcy5hdHRycylpZih0aGlzLmF0dHJzW3RdLmlzUmVxdWlyZWQpcmV0dXJuITA7cmV0dXJuITF9LGx0LnByb3RvdHlwZS5jb21wYXRpYmxlQ29udGVudD1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcz09dHx8dGhpcy5jb250ZW50TWF0Y2guY29tcGF0aWJsZSh0LmNvbnRlbnRNYXRjaCl9LGx0LnByb3RvdHlwZS5jb21wdXRlQXR0cnM9ZnVuY3Rpb24odCl7cmV0dXJuIXQmJnRoaXMuZGVmYXVsdEF0dHJzP3RoaXMuZGVmYXVsdEF0dHJzOmN0KHRoaXMuYXR0cnMsdCl9LGx0LnByb3RvdHlwZS5jcmVhdGU9ZnVuY3Rpb24odCxlLG4pe2lmKHRoaXMuaXNUZXh0KXRocm93IG5ldyBFcnJvcigiTm9kZVR5cGUuY3JlYXRlIGNhbid0IGNvbnN0cnVjdCB0ZXh0IG5vZGVzIik7cmV0dXJuIG5ldyBWKHRoaXMsdGhpcy5jb21wdXRlQXR0cnModCksZi5mcm9tKGUpLGcuc2V0RnJvbShuKSl9LGx0LnByb3RvdHlwZS5jcmVhdGVDaGVja2VkPWZ1bmN0aW9uKHQsZSxuKXtpZihlPWYuZnJvbShlKSwhdGhpcy52YWxpZENvbnRlbnQoZSkpdGhyb3cgbmV3IFJhbmdlRXJyb3IoIkludmFsaWQgY29udGVudCBmb3Igbm9kZSAiK3RoaXMubmFtZSk7cmV0dXJuIG5ldyBWKHRoaXMsdGhpcy5jb21wdXRlQXR0cnModCksZSxnLnNldEZyb20obikpfSxsdC5wcm90b3R5cGUuY3JlYXRlQW5kRmlsbD1mdW5jdGlvbih0LGUsbil7aWYodD10aGlzLmNvbXB1dGVBdHRycyh0KSxlPWYuZnJvbShlKSxlLnNpemUpe3ZhciByPXRoaXMuY29udGVudE1hdGNoLmZpbGxCZWZvcmUoZSk7aWYoIXIpcmV0dXJuIG51bGw7ZT1yLmFwcGVuZChlKX12YXIgbz10aGlzLmNvbnRlbnRNYXRjaC5tYXRjaEZyYWdtZW50KGUpLmZpbGxCZWZvcmUoZi5lbXB0eSwhMCk7cmV0dXJuIG8/bmV3IFYodGhpcyx0LGUuYXBwZW5kKG8pLGcuc2V0RnJvbShuKSk6bnVsbH0sbHQucHJvdG90eXBlLnZhbGlkQ29udGVudD1mdW5jdGlvbih0KXt2YXIgZT10aGlzLmNvbnRlbnRNYXRjaC5tYXRjaEZyYWdtZW50KHQpO2lmKCFlfHwhZS52YWxpZEVuZClyZXR1cm4hMTtmb3IodmFyIG49MDtuPHQuY2hpbGRDb3VudDtuKyspaWYoIXRoaXMuYWxsb3dzTWFya3ModC5jaGlsZChuKS5tYXJrcykpcmV0dXJuITE7cmV0dXJuITB9LGx0LnByb3RvdHlwZS5hbGxvd3NNYXJrVHlwZT1mdW5jdGlvbih0KXtyZXR1cm4gbnVsbD09dGhpcy5tYXJrU2V0fHx0aGlzLm1hcmtTZXQuaW5kZXhPZih0KT4tMX0sbHQucHJvdG90eXBlLmFsbG93c01hcmtzPWZ1bmN0aW9uKHQpe2lmKG51bGw9PXRoaXMubWFya1NldClyZXR1cm4hMDtmb3IodmFyIGU9MDtlPHQubGVuZ3RoO2UrKylpZighdGhpcy5hbGxvd3NNYXJrVHlwZSh0W2VdLnR5cGUpKXJldHVybiExO3JldHVybiEwfSxsdC5wcm90b3R5cGUuYWxsb3dlZE1hcmtzPWZ1bmN0aW9uKHQpe2lmKG51bGw9PXRoaXMubWFya1NldClyZXR1cm4gdDtmb3IodmFyIGUsbj0wO248dC5sZW5ndGg7bisrKXRoaXMuYWxsb3dzTWFya1R5cGUodFtuXS50eXBlKT9lJiZlLnB1c2godFtuXSk6ZXx8KGU9dC5zbGljZSgwLG4pKTtyZXR1cm4gZT9lLmxlbmd0aD9lOmcuZW1wdHk6dH0sbHQuY29tcGlsZT1mdW5jdGlvbih0LGUpe3ZhciBuPU9iamVjdC5jcmVhdGUobnVsbCk7dC5mb3JFYWNoKChmdW5jdGlvbih0LHIpe3JldHVybiBuW3RdPW5ldyBsdCh0LGUscil9KSk7dmFyIHI9ZS5zcGVjLnRvcE5vZGV8fCJkb2MiO2lmKCFuW3JdKXRocm93IG5ldyBSYW5nZUVycm9yKCJTY2hlbWEgaXMgbWlzc2luZyBpdHMgdG9wIG5vZGUgdHlwZSAoJyIrcisiJykiKTtpZighbi50ZXh0KXRocm93IG5ldyBSYW5nZUVycm9yKCJFdmVyeSBzY2hlbWEgbmVlZHMgYSAndGV4dCcgdHlwZSIpO2Zvcih2YXIgbyBpbiBuLnRleHQuYXR0cnMpdGhyb3cgbmV3IFJhbmdlRXJyb3IoIlRoZSB0ZXh0IG5vZGUgdHlwZSBzaG91bGQgbm90IGhhdmUgYXR0cmlidXRlcyIpO3JldHVybiBufSxPYmplY3QuZGVmaW5lUHJvcGVydGllcyhsdC5wcm90b3R5cGUsaHQpO3ZhciBmdD1mdW5jdGlvbih0KXt0aGlzLmhhc0RlZmF1bHQ9T2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHQsImRlZmF1bHQiKSx0aGlzLmRlZmF1bHQ9dC5kZWZhdWx0fSxwdD17aXNSZXF1aXJlZDp7Y29uZmlndXJhYmxlOiEwfX07cHQuaXNSZXF1aXJlZC5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4hdGhpcy5oYXNEZWZhdWx0fSxPYmplY3QuZGVmaW5lUHJvcGVydGllcyhmdC5wcm90b3R5cGUscHQpO3ZhciBkdD1mdW5jdGlvbih0LGUsbixyKXt0aGlzLm5hbWU9dCx0aGlzLnNjaGVtYT1uLHRoaXMuc3BlYz1yLHRoaXMuYXR0cnM9dXQoci5hdHRycyksdGhpcy5yYW5rPWUsdGhpcy5leGNsdWRlZD1udWxsO3ZhciBvPWF0KHRoaXMuYXR0cnMpO3RoaXMuaW5zdGFuY2U9byYmbmV3IGcodGhpcyxvKX07ZHQucHJvdG90eXBlLmNyZWF0ZT1mdW5jdGlvbih0KXtyZXR1cm4hdCYmdGhpcy5pbnN0YW5jZT90aGlzLmluc3RhbmNlOm5ldyBnKHRoaXMsY3QodGhpcy5hdHRycyx0KSl9LGR0LmNvbXBpbGU9ZnVuY3Rpb24odCxlKXt2YXIgbj1PYmplY3QuY3JlYXRlKG51bGwpLHI9MDtyZXR1cm4gdC5mb3JFYWNoKChmdW5jdGlvbih0LG8pe3JldHVybiBuW3RdPW5ldyBkdCh0LHIrKyxlLG8pfSkpLG59LGR0LnByb3RvdHlwZS5yZW1vdmVGcm9tU2V0PWZ1bmN0aW9uKHQpe2Zvcih2YXIgZT0wO2U8dC5sZW5ndGg7ZSsrKWlmKHRbZV0udHlwZT09dGhpcylyZXR1cm4gdC5zbGljZSgwLGUpLmNvbmNhdCh0LnNsaWNlKGUrMSkpO3JldHVybiB0fSxkdC5wcm90b3R5cGUuaXNJblNldD1mdW5jdGlvbih0KXtmb3IodmFyIGU9MDtlPHQubGVuZ3RoO2UrKylpZih0W2VdLnR5cGU9PXRoaXMpcmV0dXJuIHRbZV19LGR0LnByb3RvdHlwZS5leGNsdWRlcz1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5leGNsdWRlZC5pbmRleE9mKHQpPi0xfTt2YXIgdnQ9ZnVuY3Rpb24odCl7Zm9yKHZhciBlIGluIHRoaXMuc3BlYz17fSx0KXRoaXMuc3BlY1tlXT10W2VdO3RoaXMuc3BlYy5ub2Rlcz11WyJhIl0uZnJvbSh0Lm5vZGVzKSx0aGlzLnNwZWMubWFya3M9dVsiYSJdLmZyb20odC5tYXJrcyksdGhpcy5ub2Rlcz1sdC5jb21waWxlKHRoaXMuc3BlYy5ub2Rlcyx0aGlzKSx0aGlzLm1hcmtzPWR0LmNvbXBpbGUodGhpcy5zcGVjLm1hcmtzLHRoaXMpO3ZhciBuPU9iamVjdC5jcmVhdGUobnVsbCk7Zm9yKHZhciByIGluIHRoaXMubm9kZXMpe2lmKHIgaW4gdGhpcy5tYXJrcyl0aHJvdyBuZXcgUmFuZ2VFcnJvcihyKyIgY2FuIG5vdCBiZSBib3RoIGEgbm9kZSBhbmQgYSBtYXJrIik7dmFyIG89dGhpcy5ub2Rlc1tyXSxpPW8uc3BlYy5jb250ZW50fHwiIixzPW8uc3BlYy5tYXJrcztvLmNvbnRlbnRNYXRjaD1uW2ldfHwobltpXT1XLnBhcnNlKGksdGhpcy5ub2RlcykpLG8uaW5saW5lQ29udGVudD1vLmNvbnRlbnRNYXRjaC5pbmxpbmVDb250ZW50LG8ubWFya1NldD0iXyI9PXM/bnVsbDpzP210KHRoaXMscy5zcGxpdCgiICIpKToiIiE9cyYmby5pbmxpbmVDb250ZW50P251bGw6W119Zm9yKHZhciBhIGluIHRoaXMubWFya3Mpe3ZhciBjPXRoaXMubWFya3NbYV0sbD1jLnNwZWMuZXhjbHVkZXM7Yy5leGNsdWRlZD1udWxsPT1sP1tjXToiIj09bD9bXTptdCh0aGlzLGwuc3BsaXQoIiAiKSl9dGhpcy5ub2RlRnJvbUpTT049dGhpcy5ub2RlRnJvbUpTT04uYmluZCh0aGlzKSx0aGlzLm1hcmtGcm9tSlNPTj10aGlzLm1hcmtGcm9tSlNPTi5iaW5kKHRoaXMpLHRoaXMudG9wTm9kZVR5cGU9dGhpcy5ub2Rlc1t0aGlzLnNwZWMudG9wTm9kZXx8ImRvYyJdLHRoaXMuY2FjaGVkPU9iamVjdC5jcmVhdGUobnVsbCksdGhpcy5jYWNoZWQud3JhcHBpbmdzPU9iamVjdC5jcmVhdGUobnVsbCl9O2Z1bmN0aW9uIG10KHQsZSl7Zm9yKHZhciBuPVtdLHI9MDtyPGUubGVuZ3RoO3IrKyl7dmFyIG89ZVtyXSxpPXQubWFya3Nbb10scz1pO2lmKGkpbi5wdXNoKGkpO2Vsc2UgZm9yKHZhciBhIGluIHQubWFya3Mpe3ZhciBjPXQubWFya3NbYV07KCJfIj09b3x8Yy5zcGVjLmdyb3VwJiZjLnNwZWMuZ3JvdXAuc3BsaXQoIiAiKS5pbmRleE9mKG8pPi0xKSYmbi5wdXNoKHM9Yyl9aWYoIXMpdGhyb3cgbmV3IFN5bnRheEVycm9yKCJVbmtub3duIG1hcmsgdHlwZTogJyIrZVtyXSsiJyIpfXJldHVybiBufXZ0LnByb3RvdHlwZS5ub2RlPWZ1bmN0aW9uKHQsZSxuLHIpe2lmKCJzdHJpbmciPT10eXBlb2YgdCl0PXRoaXMubm9kZVR5cGUodCk7ZWxzZXtpZighKHQgaW5zdGFuY2VvZiBsdCkpdGhyb3cgbmV3IFJhbmdlRXJyb3IoIkludmFsaWQgbm9kZSB0eXBlOiAiK3QpO2lmKHQuc2NoZW1hIT10aGlzKXRocm93IG5ldyBSYW5nZUVycm9yKCJOb2RlIHR5cGUgZnJvbSBkaWZmZXJlbnQgc2NoZW1hIHVzZWQgKCIrdC5uYW1lKyIpIil9cmV0dXJuIHQuY3JlYXRlQ2hlY2tlZChlLG4scil9LHZ0LnByb3RvdHlwZS50ZXh0PWZ1bmN0aW9uKHQsZSl7dmFyIG49dGhpcy5ub2Rlcy50ZXh0O3JldHVybiBuZXcgcShuLG4uZGVmYXVsdEF0dHJzLHQsZy5zZXRGcm9tKGUpKX0sdnQucHJvdG90eXBlLm1hcms9ZnVuY3Rpb24odCxlKXtyZXR1cm4ic3RyaW5nIj09dHlwZW9mIHQmJih0PXRoaXMubWFya3NbdF0pLHQuY3JlYXRlKGUpfSx2dC5wcm90b3R5cGUubm9kZUZyb21KU09OPWZ1bmN0aW9uKHQpe3JldHVybiBWLmZyb21KU09OKHRoaXMsdCl9LHZ0LnByb3RvdHlwZS5tYXJrRnJvbUpTT049ZnVuY3Rpb24odCl7cmV0dXJuIGcuZnJvbUpTT04odGhpcyx0KX0sdnQucHJvdG90eXBlLm5vZGVUeXBlPWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMubm9kZXNbdF07aWYoIWUpdGhyb3cgbmV3IFJhbmdlRXJyb3IoIlVua25vd24gbm9kZSB0eXBlOiAiK3QpO3JldHVybiBlfTt2YXIgZ3Q9ZnVuY3Rpb24odCxlKXt2YXIgbj10aGlzO3RoaXMuc2NoZW1hPXQsdGhpcy5ydWxlcz1lLHRoaXMudGFncz1bXSx0aGlzLnN0eWxlcz1bXSxlLmZvckVhY2goKGZ1bmN0aW9uKHQpe3QudGFnP24udGFncy5wdXNoKHQpOnQuc3R5bGUmJm4uc3R5bGVzLnB1c2godCl9KSksdGhpcy5ub3JtYWxpemVMaXN0cz0hdGhpcy50YWdzLnNvbWUoKGZ1bmN0aW9uKGUpe2lmKCEvXih1bHxvbClcYi8udGVzdChlLnRhZyl8fCFlLm5vZGUpcmV0dXJuITE7dmFyIG49dC5ub2Rlc1tlLm5vZGVdO3JldHVybiBuLmNvbnRlbnRNYXRjaC5tYXRjaFR5cGUobil9KSl9O2d0LnByb3RvdHlwZS5wYXJzZT1mdW5jdGlvbih0LGUpe3ZvaWQgMD09PWUmJihlPXt9KTt2YXIgbj1uZXcgTXQodGhpcyxlLCExKTtyZXR1cm4gbi5hZGRBbGwodCxudWxsLGUuZnJvbSxlLnRvKSxuLmZpbmlzaCgpfSxndC5wcm90b3R5cGUucGFyc2VTbGljZT1mdW5jdGlvbih0LGUpe3ZvaWQgMD09PWUmJihlPXt9KTt2YXIgbj1uZXcgTXQodGhpcyxlLCEwKTtyZXR1cm4gbi5hZGRBbGwodCxudWxsLGUuZnJvbSxlLnRvKSx3Lm1heE9wZW4obi5maW5pc2goKSl9LGd0LnByb3RvdHlwZS5tYXRjaFRhZz1mdW5jdGlvbih0LGUpe2Zvcih2YXIgbj0wO248dGhpcy50YWdzLmxlbmd0aDtuKyspe3ZhciByPXRoaXMudGFnc1tuXTtpZihBdCh0LHIudGFnKSYmKHZvaWQgMD09PXIubmFtZXNwYWNlfHx0Lm5hbWVzcGFjZVVSST09ci5uYW1lc3BhY2UpJiYoIXIuY29udGV4dHx8ZS5tYXRjaGVzQ29udGV4dChyLmNvbnRleHQpKSl7aWYoci5nZXRBdHRycyl7dmFyIG89ci5nZXRBdHRycyh0KTtpZighMT09PW8pY29udGludWU7ci5hdHRycz1vfXJldHVybiByfX19LGd0LnByb3RvdHlwZS5tYXRjaFN0eWxlPWZ1bmN0aW9uKHQsZSxuKXtmb3IodmFyIHI9MDtyPHRoaXMuc3R5bGVzLmxlbmd0aDtyKyspe3ZhciBvPXRoaXMuc3R5bGVzW3JdO2lmKCEoMCE9by5zdHlsZS5pbmRleE9mKHQpfHxvLmNvbnRleHQmJiFuLm1hdGNoZXNDb250ZXh0KG8uY29udGV4dCl8fG8uc3R5bGUubGVuZ3RoPnQubGVuZ3RoJiYoNjEhPW8uc3R5bGUuY2hhckNvZGVBdCh0Lmxlbmd0aCl8fG8uc3R5bGUuc2xpY2UodC5sZW5ndGgrMSkhPWUpKSl7aWYoby5nZXRBdHRycyl7dmFyIGk9by5nZXRBdHRycyhlKTtpZighMT09PWkpY29udGludWU7by5hdHRycz1pfXJldHVybiBvfX19LGd0LnNjaGVtYVJ1bGVzPWZ1bmN0aW9uKHQpe3ZhciBlPVtdO2Z1bmN0aW9uIG4odCl7Zm9yKHZhciBuPW51bGw9PXQucHJpb3JpdHk/NTA6dC5wcmlvcml0eSxyPTA7cjxlLmxlbmd0aDtyKyspe3ZhciBvPWVbcl0saT1udWxsPT1vLnByaW9yaXR5PzUwOm8ucHJpb3JpdHk7aWYoaTxuKWJyZWFrfWUuc3BsaWNlKHIsMCx0KX12YXIgcj1mdW5jdGlvbihlKXt2YXIgcj10Lm1hcmtzW2VdLnNwZWMucGFyc2VET007ciYmci5mb3JFYWNoKChmdW5jdGlvbih0KXtuKHQ9RHQodCkpLHQubWFyaz1lfSkpfTtmb3IodmFyIG8gaW4gdC5tYXJrcylyKG8pO3ZhciBpPWZ1bmN0aW9uKGUpe3ZhciByPXQubm9kZXNbc10uc3BlYy5wYXJzZURPTTtyJiZyLmZvckVhY2goKGZ1bmN0aW9uKHQpe24odD1EdCh0KSksdC5ub2RlPXN9KSl9O2Zvcih2YXIgcyBpbiB0Lm5vZGVzKWkoKTtyZXR1cm4gZX0sZ3QuZnJvbVNjaGVtYT1mdW5jdGlvbih0KXtyZXR1cm4gdC5jYWNoZWQuZG9tUGFyc2VyfHwodC5jYWNoZWQuZG9tUGFyc2VyPW5ldyBndCh0LGd0LnNjaGVtYVJ1bGVzKHQpKSl9O3ZhciB5dD17YWRkcmVzczohMCxhcnRpY2xlOiEwLGFzaWRlOiEwLGJsb2NrcXVvdGU6ITAsY2FudmFzOiEwLGRkOiEwLGRpdjohMCxkbDohMCxmaWVsZHNldDohMCxmaWdjYXB0aW9uOiEwLGZpZ3VyZTohMCxmb290ZXI6ITAsZm9ybTohMCxoMTohMCxoMjohMCxoMzohMCxoNDohMCxoNTohMCxoNjohMCxoZWFkZXI6ITAsaGdyb3VwOiEwLGhyOiEwLGxpOiEwLG5vc2NyaXB0OiEwLG9sOiEwLG91dHB1dDohMCxwOiEwLHByZTohMCxzZWN0aW9uOiEwLHRhYmxlOiEwLHRmb290OiEwLHVsOiEwfSx3dD17aGVhZDohMCxub3NjcmlwdDohMCxvYmplY3Q6ITAsc2NyaXB0OiEwLHN0eWxlOiEwLHRpdGxlOiEwfSxidD17b2w6ITAsdWw6ITB9LHh0PTEsa3Q9MixTdD00O2Z1bmN0aW9uIEN0KHQpe3JldHVybih0P3h0OjApfCgiZnVsbCI9PT10P2t0OjApfXZhciBPdD1mdW5jdGlvbih0LGUsbixyLG8saSxzKXt0aGlzLnR5cGU9dCx0aGlzLmF0dHJzPWUsdGhpcy5zb2xpZD1vLHRoaXMubWF0Y2g9aXx8KHMmU3Q/bnVsbDp0LmNvbnRlbnRNYXRjaCksdGhpcy5vcHRpb25zPXMsdGhpcy5jb250ZW50PVtdLHRoaXMubWFya3M9bix0aGlzLmFjdGl2ZU1hcmtzPWcubm9uZSx0aGlzLnBlbmRpbmdNYXJrcz1yfTtPdC5wcm90b3R5cGUuZmluZFdyYXBwaW5nPWZ1bmN0aW9uKHQpe2lmKCF0aGlzLm1hdGNoKXtpZighdGhpcy50eXBlKXJldHVybltdO3ZhciBlPXRoaXMudHlwZS5jb250ZW50TWF0Y2guZmlsbEJlZm9yZShmLmZyb20odCkpO2lmKCFlKXt2YXIgbixyPXRoaXMudHlwZS5jb250ZW50TWF0Y2g7cmV0dXJuKG49ci5maW5kV3JhcHBpbmcodC50eXBlKSk/KHRoaXMubWF0Y2g9cixuKTpudWxsfXRoaXMubWF0Y2g9dGhpcy50eXBlLmNvbnRlbnRNYXRjaC5tYXRjaEZyYWdtZW50KGUpfXJldHVybiB0aGlzLm1hdGNoLmZpbmRXcmFwcGluZyh0LnR5cGUpfSxPdC5wcm90b3R5cGUuZmluaXNoPWZ1bmN0aW9uKHQpe2lmKCEodGhpcy5vcHRpb25zJnh0KSl7dmFyIGUsbj10aGlzLmNvbnRlbnRbdGhpcy5jb250ZW50Lmxlbmd0aC0xXTtuJiZuLmlzVGV4dCYmKGU9L1sgXHRcclxuXHUwMDBjXSskLy5leGVjKG4udGV4dCkpJiYobi50ZXh0Lmxlbmd0aD09ZVswXS5sZW5ndGg/dGhpcy5jb250ZW50LnBvcCgpOnRoaXMuY29udGVudFt0aGlzLmNvbnRlbnQubGVuZ3RoLTFdPW4ud2l0aFRleHQobi50ZXh0LnNsaWNlKDAsbi50ZXh0Lmxlbmd0aC1lWzBdLmxlbmd0aCkpKX12YXIgcj1mLmZyb20odGhpcy5jb250ZW50KTtyZXR1cm4hdCYmdGhpcy5tYXRjaCYmKHI9ci5hcHBlbmQodGhpcy5tYXRjaC5maWxsQmVmb3JlKGYuZW1wdHksITApKSksdGhpcy50eXBlP3RoaXMudHlwZS5jcmVhdGUodGhpcy5hdHRycyxyLHRoaXMubWFya3MpOnJ9LE90LnByb3RvdHlwZS5hcHBseVBlbmRpbmc9ZnVuY3Rpb24odCl7Zm9yKHZhciBlPTAsbj10aGlzLnBlbmRpbmdNYXJrcztlPG4ubGVuZ3RoO2UrKyl7dmFyIHI9bltlXTsodGhpcy50eXBlP3RoaXMudHlwZS5hbGxvd3NNYXJrVHlwZShyLnR5cGUpOlJ0KHIudHlwZSx0KSkmJiFyLmlzSW5TZXQodGhpcy5hY3RpdmVNYXJrcykmJih0aGlzLmFjdGl2ZU1hcmtzPXIuYWRkVG9TZXQodGhpcy5hY3RpdmVNYXJrcyksdGhpcy5wZW5kaW5nTWFya3M9ci5yZW1vdmVGcm9tU2V0KHRoaXMucGVuZGluZ01hcmtzKSl9fTt2YXIgTXQ9ZnVuY3Rpb24odCxlLG4pe3RoaXMucGFyc2VyPXQsdGhpcy5vcHRpb25zPWUsdGhpcy5pc09wZW49bjt2YXIgcixvPWUudG9wTm9kZSxpPUN0KGUucHJlc2VydmVXaGl0ZXNwYWNlKXwobj9TdDowKTtyPW8/bmV3IE90KG8udHlwZSxvLmF0dHJzLGcubm9uZSxnLm5vbmUsITAsZS50b3BNYXRjaHx8by50eXBlLmNvbnRlbnRNYXRjaCxpKTpuZXcgT3Qobj9udWxsOnQuc2NoZW1hLnRvcE5vZGVUeXBlLG51bGwsZy5ub25lLGcubm9uZSwhMCxudWxsLGkpLHRoaXMubm9kZXM9W3JdLHRoaXMub3Blbj0wLHRoaXMuZmluZD1lLmZpbmRQb3NpdGlvbnMsdGhpcy5uZWVkc0Jsb2NrPSExfSxOdD17dG9wOntjb25maWd1cmFibGU6ITB9LGN1cnJlbnRQb3M6e2NvbmZpZ3VyYWJsZTohMH19O2Z1bmN0aW9uIFR0KHQpe2Zvcih2YXIgZT10LmZpcnN0Q2hpbGQsbj1udWxsO2U7ZT1lLm5leHRTaWJsaW5nKXt2YXIgcj0xPT1lLm5vZGVUeXBlP2Uubm9kZU5hbWUudG9Mb3dlckNhc2UoKTpudWxsO3ImJmJ0Lmhhc093blByb3BlcnR5KHIpJiZuPyhuLmFwcGVuZENoaWxkKGUpLGU9bik6ImxpIj09cj9uPWU6ciYmKG49bnVsbCl9fWZ1bmN0aW9uIEF0KHQsZSl7cmV0dXJuKHQubWF0Y2hlc3x8dC5tc01hdGNoZXNTZWxlY3Rvcnx8dC53ZWJraXRNYXRjaGVzU2VsZWN0b3J8fHQubW96TWF0Y2hlc1NlbGVjdG9yKS5jYWxsKHQsZSl9ZnVuY3Rpb24gRXQodCl7dmFyIGUsbj0vXHMqKFtcdy1dKylccyo6XHMqKFteO10rKS9nLHI9W107d2hpbGUoZT1uLmV4ZWModCkpci5wdXNoKGVbMV0sZVsyXS50cmltKCkpO3JldHVybiByfWZ1bmN0aW9uIER0KHQpe3ZhciBlPXt9O2Zvcih2YXIgbiBpbiB0KWVbbl09dFtuXTtyZXR1cm4gZX1mdW5jdGlvbiBSdCh0LGUpe3ZhciBuPWUuc2NoZW1hLm5vZGVzLHI9ZnVuY3Rpb24ocil7dmFyIG89bltyXTtpZihvLmFsbG93c01hcmtUeXBlKHQpKXt2YXIgaT1bXSxzPWZ1bmN0aW9uKHQpe2kucHVzaCh0KTtmb3IodmFyIG49MDtuPHQuZWRnZUNvdW50O24rKyl7dmFyIHI9dC5lZGdlKG4pLG89ci50eXBlLGE9ci5uZXh0O2lmKG89PWUpcmV0dXJuITA7aWYoaS5pbmRleE9mKGEpPDAmJnMoYSkpcmV0dXJuITB9fTtyZXR1cm4gcyhvLmNvbnRlbnRNYXRjaCk/e3Y6ITB9OnZvaWQgMH19O2Zvcih2YXIgbyBpbiBuKXt2YXIgaT1yKG8pO2lmKGkpcmV0dXJuIGkudn19TnQudG9wLmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLm5vZGVzW3RoaXMub3Blbl19LE10LnByb3RvdHlwZS5hZGRET009ZnVuY3Rpb24odCl7aWYoMz09dC5ub2RlVHlwZSl0aGlzLmFkZFRleHROb2RlKHQpO2Vsc2UgaWYoMT09dC5ub2RlVHlwZSl7dmFyIGU9dC5nZXRBdHRyaWJ1dGUoInN0eWxlIiksbj1lP3RoaXMucmVhZFN0eWxlcyhFdChlKSk6bnVsbCxyPXRoaXMudG9wO2lmKG51bGwhPW4pZm9yKHZhciBvPTA7bzxuLmxlbmd0aDtvKyspdGhpcy5hZGRQZW5kaW5nTWFyayhuW29dKTtpZih0aGlzLmFkZEVsZW1lbnQodCksbnVsbCE9bilmb3IodmFyIGk9MDtpPG4ubGVuZ3RoO2krKyl0aGlzLnJlbW92ZVBlbmRpbmdNYXJrKG5baV0scil9fSxNdC5wcm90b3R5cGUuYWRkVGV4dE5vZGU9ZnVuY3Rpb24odCl7dmFyIGU9dC5ub2RlVmFsdWUsbj10aGlzLnRvcDtpZigobi50eXBlP24udHlwZS5pbmxpbmVDb250ZW50Om4uY29udGVudC5sZW5ndGgmJm4uY29udGVudFswXS5pc0lubGluZSl8fC9bXiBcdFxyXG5cdTAwMGNdLy50ZXN0KGUpKXtpZihuLm9wdGlvbnMmeHQpbi5vcHRpb25zJmt0fHwoZT1lLnJlcGxhY2UoL1xyP1xufFxyL2csIiAiKSk7ZWxzZSBpZihlPWUucmVwbGFjZSgvWyBcdFxyXG5cdTAwMGNdKy9nLCIgIiksL15bIFx0XHJcblx1MDAwY10vLnRlc3QoZSkmJnRoaXMub3Blbj09dGhpcy5ub2Rlcy5sZW5ndGgtMSl7dmFyIHI9bi5jb250ZW50W24uY29udGVudC5sZW5ndGgtMV0sbz10LnByZXZpb3VzU2libGluZzsoIXJ8fG8mJiJCUiI9PW8ubm9kZU5hbWV8fHIuaXNUZXh0JiYvWyBcdFxyXG5cdTAwMGNdJC8udGVzdChyLnRleHQpKSYmKGU9ZS5zbGljZSgxKSl9ZSYmdGhpcy5pbnNlcnROb2RlKHRoaXMucGFyc2VyLnNjaGVtYS50ZXh0KGUpKSx0aGlzLmZpbmRJblRleHQodCl9ZWxzZSB0aGlzLmZpbmRJbnNpZGUodCl9LE10LnByb3RvdHlwZS5hZGRFbGVtZW50PWZ1bmN0aW9uKHQpe3ZhciBlPXQubm9kZU5hbWUudG9Mb3dlckNhc2UoKTtidC5oYXNPd25Qcm9wZXJ0eShlKSYmdGhpcy5ub3JtYWxpemVMaXN0cyYmVHQodCk7dmFyIG49dGhpcy5vcHRpb25zLnJ1bGVGcm9tTm9kZSYmdGhpcy5vcHRpb25zLnJ1bGVGcm9tTm9kZSh0KXx8dGhpcy5wYXJzZXIubWF0Y2hUYWcodCx0aGlzKTtpZihuP24uaWdub3JlOnd0Lmhhc093blByb3BlcnR5KGUpKXRoaXMuZmluZEluc2lkZSh0KTtlbHNlIGlmKCFufHxuLnNraXB8fG4uY2xvc2VQYXJlbnQpe24mJm4uY2xvc2VQYXJlbnQ/dGhpcy5vcGVuPU1hdGgubWF4KDAsdGhpcy5vcGVuLTEpOm4mJm4uc2tpcC5ub2RlVHlwZSYmKHQ9bi5za2lwKTt2YXIgcixvPXRoaXMudG9wLGk9dGhpcy5uZWVkc0Jsb2NrO2lmKHl0Lmhhc093blByb3BlcnR5KGUpKXI9ITAsby50eXBlfHwodGhpcy5uZWVkc0Jsb2NrPSEwKTtlbHNlIGlmKCF0LmZpcnN0Q2hpbGQpcmV0dXJuIHZvaWQgdGhpcy5sZWFmRmFsbGJhY2sodCk7dGhpcy5hZGRBbGwodCksciYmdGhpcy5zeW5jKG8pLHRoaXMubmVlZHNCbG9jaz1pfWVsc2UgdGhpcy5hZGRFbGVtZW50QnlSdWxlKHQsbil9LE10LnByb3RvdHlwZS5sZWFmRmFsbGJhY2s9ZnVuY3Rpb24odCl7IkJSIj09dC5ub2RlTmFtZSYmdGhpcy50b3AudHlwZSYmdGhpcy50b3AudHlwZS5pbmxpbmVDb250ZW50JiZ0aGlzLmFkZFRleHROb2RlKHQub3duZXJEb2N1bWVudC5jcmVhdGVUZXh0Tm9kZSgiXG4iKSl9LE10LnByb3RvdHlwZS5yZWFkU3R5bGVzPWZ1bmN0aW9uKHQpe2Zvcih2YXIgZT1nLm5vbmUsbj0wO248dC5sZW5ndGg7bis9Mil7dmFyIHI9dGhpcy5wYXJzZXIubWF0Y2hTdHlsZSh0W25dLHRbbisxXSx0aGlzKTtpZihyKXtpZihyLmlnbm9yZSlyZXR1cm4gbnVsbDtlPXRoaXMucGFyc2VyLnNjaGVtYS5tYXJrc1tyLm1hcmtdLmNyZWF0ZShyLmF0dHJzKS5hZGRUb1NldChlKX19cmV0dXJuIGV9LE10LnByb3RvdHlwZS5hZGRFbGVtZW50QnlSdWxlPWZ1bmN0aW9uKHQsZSl7dmFyIG4scixvLGkscz10aGlzO2Uubm9kZT8ocj10aGlzLnBhcnNlci5zY2hlbWEubm9kZXNbZS5ub2RlXSxyLmlzTGVhZj90aGlzLmluc2VydE5vZGUoci5jcmVhdGUoZS5hdHRycykpfHx0aGlzLmxlYWZGYWxsYmFjayh0KTpuPXRoaXMuZW50ZXIocixlLmF0dHJzLGUucHJlc2VydmVXaGl0ZXNwYWNlKSk6KG89dGhpcy5wYXJzZXIuc2NoZW1hLm1hcmtzW2UubWFya10saT1vLmNyZWF0ZShlLmF0dHJzKSx0aGlzLmFkZFBlbmRpbmdNYXJrKGkpKTt2YXIgYT10aGlzLnRvcDtpZihyJiZyLmlzTGVhZil0aGlzLmZpbmRJbnNpZGUodCk7ZWxzZSBpZihlLmdldENvbnRlbnQpdGhpcy5maW5kSW5zaWRlKHQpLGUuZ2V0Q29udGVudCh0LHRoaXMucGFyc2VyLnNjaGVtYSkuZm9yRWFjaCgoZnVuY3Rpb24odCl7cmV0dXJuIHMuaW5zZXJ0Tm9kZSh0KX0pKTtlbHNle3ZhciBjPWUuY29udGVudEVsZW1lbnQ7InN0cmluZyI9PXR5cGVvZiBjP2M9dC5xdWVyeVNlbGVjdG9yKGMpOiJmdW5jdGlvbiI9PXR5cGVvZiBjJiYoYz1jKHQpKSxjfHwoYz10KSx0aGlzLmZpbmRBcm91bmQodCxjLCEwKSx0aGlzLmFkZEFsbChjLG4pfW4mJih0aGlzLnN5bmMoYSksdGhpcy5vcGVuLS0pLGkmJnRoaXMucmVtb3ZlUGVuZGluZ01hcmsoaSxhKX0sTXQucHJvdG90eXBlLmFkZEFsbD1mdW5jdGlvbih0LGUsbixyKXtmb3IodmFyIG89bnx8MCxpPW4/dC5jaGlsZE5vZGVzW25dOnQuZmlyc3RDaGlsZCxzPW51bGw9PXI/bnVsbDp0LmNoaWxkTm9kZXNbcl07aSE9cztpPWkubmV4dFNpYmxpbmcsKytvKXRoaXMuZmluZEF0UG9pbnQodCxvKSx0aGlzLmFkZERPTShpKSxlJiZ5dC5oYXNPd25Qcm9wZXJ0eShpLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCkpJiZ0aGlzLnN5bmMoZSk7dGhpcy5maW5kQXRQb2ludCh0LG8pfSxNdC5wcm90b3R5cGUuZmluZFBsYWNlPWZ1bmN0aW9uKHQpe2Zvcih2YXIgZSxuLHI9dGhpcy5vcGVuO3I+PTA7ci0tKXt2YXIgbz10aGlzLm5vZGVzW3JdLGk9by5maW5kV3JhcHBpbmcodCk7aWYoaSYmKCFlfHxlLmxlbmd0aD5pLmxlbmd0aCkmJihlPWksbj1vLCFpLmxlbmd0aCkpYnJlYWs7aWYoby5zb2xpZClicmVha31pZighZSlyZXR1cm4hMTt0aGlzLnN5bmMobik7Zm9yKHZhciBzPTA7czxlLmxlbmd0aDtzKyspdGhpcy5lbnRlcklubmVyKGVbc10sbnVsbCwhMSk7cmV0dXJuITB9LE10LnByb3RvdHlwZS5pbnNlcnROb2RlPWZ1bmN0aW9uKHQpe2lmKHQuaXNJbmxpbmUmJnRoaXMubmVlZHNCbG9jayYmIXRoaXMudG9wLnR5cGUpe3ZhciBlPXRoaXMudGV4dGJsb2NrRnJvbUNvbnRleHQoKTtlJiZ0aGlzLmVudGVySW5uZXIoZSl9aWYodGhpcy5maW5kUGxhY2UodCkpe3RoaXMuY2xvc2VFeHRyYSgpO3ZhciBuPXRoaXMudG9wO24uYXBwbHlQZW5kaW5nKHQudHlwZSksbi5tYXRjaCYmKG4ubWF0Y2g9bi5tYXRjaC5tYXRjaFR5cGUodC50eXBlKSk7Zm9yKHZhciByPW4uYWN0aXZlTWFya3Msbz0wO288dC5tYXJrcy5sZW5ndGg7bysrKW4udHlwZSYmIW4udHlwZS5hbGxvd3NNYXJrVHlwZSh0Lm1hcmtzW29dLnR5cGUpfHwocj10Lm1hcmtzW29dLmFkZFRvU2V0KHIpKTtyZXR1cm4gbi5jb250ZW50LnB1c2godC5tYXJrKHIpKSwhMH1yZXR1cm4hMX0sTXQucHJvdG90eXBlLmVudGVyPWZ1bmN0aW9uKHQsZSxuKXt2YXIgcj10aGlzLmZpbmRQbGFjZSh0LmNyZWF0ZShlKSk7cmV0dXJuIHImJnRoaXMuZW50ZXJJbm5lcih0LGUsITAsbikscn0sTXQucHJvdG90eXBlLmVudGVySW5uZXI9ZnVuY3Rpb24odCxlLG4scil7dGhpcy5jbG9zZUV4dHJhKCk7dmFyIG89dGhpcy50b3A7by5hcHBseVBlbmRpbmcodCksby5tYXRjaD1vLm1hdGNoJiZvLm1hdGNoLm1hdGNoVHlwZSh0LGUpO3ZhciBpPW51bGw9PXI/by5vcHRpb25zJn5TdDpDdChyKTtvLm9wdGlvbnMmU3QmJjA9PW8uY29udGVudC5sZW5ndGgmJihpfD1TdCksdGhpcy5ub2Rlcy5wdXNoKG5ldyBPdCh0LGUsby5hY3RpdmVNYXJrcyxvLnBlbmRpbmdNYXJrcyxuLG51bGwsaSkpLHRoaXMub3BlbisrfSxNdC5wcm90b3R5cGUuY2xvc2VFeHRyYT1mdW5jdGlvbih0KXt2YXIgZT10aGlzLm5vZGVzLmxlbmd0aC0xO2lmKGU+dGhpcy5vcGVuKXtmb3IoO2U+dGhpcy5vcGVuO2UtLSl0aGlzLm5vZGVzW2UtMV0uY29udGVudC5wdXNoKHRoaXMubm9kZXNbZV0uZmluaXNoKHQpKTt0aGlzLm5vZGVzLmxlbmd0aD10aGlzLm9wZW4rMX19LE10LnByb3RvdHlwZS5maW5pc2g9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5vcGVuPTAsdGhpcy5jbG9zZUV4dHJhKHRoaXMuaXNPcGVuKSx0aGlzLm5vZGVzWzBdLmZpbmlzaCh0aGlzLmlzT3Blbnx8dGhpcy5vcHRpb25zLnRvcE9wZW4pfSxNdC5wcm90b3R5cGUuc3luYz1mdW5jdGlvbih0KXtmb3IodmFyIGU9dGhpcy5vcGVuO2U+PTA7ZS0tKWlmKHRoaXMubm9kZXNbZV09PXQpcmV0dXJuIHZvaWQodGhpcy5vcGVuPWUpfSxOdC5jdXJyZW50UG9zLmdldD1mdW5jdGlvbigpe3RoaXMuY2xvc2VFeHRyYSgpO2Zvcih2YXIgdD0wLGU9dGhpcy5vcGVuO2U+PTA7ZS0tKXtmb3IodmFyIG49dGhpcy5ub2Rlc1tlXS5jb250ZW50LHI9bi5sZW5ndGgtMTtyPj0wO3ItLSl0Kz1uW3JdLm5vZGVTaXplO2UmJnQrK31yZXR1cm4gdH0sTXQucHJvdG90eXBlLmZpbmRBdFBvaW50PWZ1bmN0aW9uKHQsZSl7aWYodGhpcy5maW5kKWZvcih2YXIgbj0wO248dGhpcy5maW5kLmxlbmd0aDtuKyspdGhpcy5maW5kW25dLm5vZGU9PXQmJnRoaXMuZmluZFtuXS5vZmZzZXQ9PWUmJih0aGlzLmZpbmRbbl0ucG9zPXRoaXMuY3VycmVudFBvcyl9LE10LnByb3RvdHlwZS5maW5kSW5zaWRlPWZ1bmN0aW9uKHQpe2lmKHRoaXMuZmluZClmb3IodmFyIGU9MDtlPHRoaXMuZmluZC5sZW5ndGg7ZSsrKW51bGw9PXRoaXMuZmluZFtlXS5wb3MmJjE9PXQubm9kZVR5cGUmJnQuY29udGFpbnModGhpcy5maW5kW2VdLm5vZGUpJiYodGhpcy5maW5kW2VdLnBvcz10aGlzLmN1cnJlbnRQb3MpfSxNdC5wcm90b3R5cGUuZmluZEFyb3VuZD1mdW5jdGlvbih0LGUsbil7aWYodCE9ZSYmdGhpcy5maW5kKWZvcih2YXIgcj0wO3I8dGhpcy5maW5kLmxlbmd0aDtyKyspaWYobnVsbD09dGhpcy5maW5kW3JdLnBvcyYmMT09dC5ub2RlVHlwZSYmdC5jb250YWlucyh0aGlzLmZpbmRbcl0ubm9kZSkpe3ZhciBvPWUuY29tcGFyZURvY3VtZW50UG9zaXRpb24odGhpcy5maW5kW3JdLm5vZGUpO28mKG4/Mjo0KSYmKHRoaXMuZmluZFtyXS5wb3M9dGhpcy5jdXJyZW50UG9zKX19LE10LnByb3RvdHlwZS5maW5kSW5UZXh0PWZ1bmN0aW9uKHQpe2lmKHRoaXMuZmluZClmb3IodmFyIGU9MDtlPHRoaXMuZmluZC5sZW5ndGg7ZSsrKXRoaXMuZmluZFtlXS5ub2RlPT10JiYodGhpcy5maW5kW2VdLnBvcz10aGlzLmN1cnJlbnRQb3MtKHQubm9kZVZhbHVlLmxlbmd0aC10aGlzLmZpbmRbZV0ub2Zmc2V0KSl9LE10LnByb3RvdHlwZS5tYXRjaGVzQ29udGV4dD1mdW5jdGlvbih0KXt2YXIgZT10aGlzO2lmKHQuaW5kZXhPZigifCIpPi0xKXJldHVybiB0LnNwbGl0KC9ccypcfFxzKi8pLnNvbWUodGhpcy5tYXRjaGVzQ29udGV4dCx0aGlzKTt2YXIgbj10LnNwbGl0KCIvIikscj10aGlzLm9wdGlvbnMuY29udGV4dCxvPSF0aGlzLmlzT3BlbiYmKCFyfHxyLnBhcmVudC50eXBlPT10aGlzLm5vZGVzWzBdLnR5cGUpLGk9LShyP3IuZGVwdGgrMTowKSsobz8wOjEpLHM9ZnVuY3Rpb24odCxhKXtmb3IoO3Q+PTA7dC0tKXt2YXIgYz1uW3RdO2lmKCIiPT1jKXtpZih0PT1uLmxlbmd0aC0xfHwwPT10KWNvbnRpbnVlO2Zvcig7YT49aTthLS0paWYocyh0LTEsYSkpcmV0dXJuITA7cmV0dXJuITF9dmFyIHU9YT4wfHwwPT1hJiZvP2Uubm9kZXNbYV0udHlwZTpyJiZhPj1pP3Iubm9kZShhLWkpLnR5cGU6bnVsbDtpZighdXx8dS5uYW1lIT1jJiYtMT09dS5ncm91cHMuaW5kZXhPZihjKSlyZXR1cm4hMTthLS19cmV0dXJuITB9O3JldHVybiBzKG4ubGVuZ3RoLTEsdGhpcy5vcGVuKX0sTXQucHJvdG90eXBlLnRleHRibG9ja0Zyb21Db250ZXh0PWZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5vcHRpb25zLmNvbnRleHQ7aWYodClmb3IodmFyIGU9dC5kZXB0aDtlPj0wO2UtLSl7dmFyIG49dC5ub2RlKGUpLmNvbnRlbnRNYXRjaEF0KHQuaW5kZXhBZnRlcihlKSkuZGVmYXVsdFR5cGU7aWYobiYmbi5pc1RleHRibG9jayYmbi5kZWZhdWx0QXR0cnMpcmV0dXJuIG59Zm9yKHZhciByIGluIHRoaXMucGFyc2VyLnNjaGVtYS5ub2Rlcyl7dmFyIG89dGhpcy5wYXJzZXIuc2NoZW1hLm5vZGVzW3JdO2lmKG8uaXNUZXh0YmxvY2smJm8uZGVmYXVsdEF0dHJzKXJldHVybiBvfX0sTXQucHJvdG90eXBlLmFkZFBlbmRpbmdNYXJrPWZ1bmN0aW9uKHQpe3RoaXMudG9wLnBlbmRpbmdNYXJrcz10LmFkZFRvU2V0KHRoaXMudG9wLnBlbmRpbmdNYXJrcyl9LE10LnByb3RvdHlwZS5yZW1vdmVQZW5kaW5nTWFyaz1mdW5jdGlvbih0LGUpe2Zvcih2YXIgbj10aGlzLm9wZW47bj49MDtuLS0pe3ZhciByPXRoaXMubm9kZXNbbl0sbz1yLnBlbmRpbmdNYXJrcy5sYXN0SW5kZXhPZih0KTtpZihvPi0xP3IucGVuZGluZ01hcmtzPXQucmVtb3ZlRnJvbVNldChyLnBlbmRpbmdNYXJrcyk6ci5hY3RpdmVNYXJrcz10LnJlbW92ZUZyb21TZXQoci5hY3RpdmVNYXJrcykscj09ZSlicmVha319LE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKE10LnByb3RvdHlwZSxOdCk7dmFyIHp0PWZ1bmN0aW9uKHQsZSl7dGhpcy5ub2Rlcz10fHx7fSx0aGlzLm1hcmtzPWV8fHt9fTtmdW5jdGlvbiBQdCh0KXt2YXIgZT17fTtmb3IodmFyIG4gaW4gdCl7dmFyIHI9dFtuXS5zcGVjLnRvRE9NO3ImJihlW25dPXIpfXJldHVybiBlfWZ1bmN0aW9uIEl0KHQpe3JldHVybiB0LmRvY3VtZW50fHx3aW5kb3cuZG9jdW1lbnR9enQucHJvdG90eXBlLnNlcmlhbGl6ZUZyYWdtZW50PWZ1bmN0aW9uKHQsZSxuKXt2YXIgcj10aGlzO3ZvaWQgMD09PWUmJihlPXt9KSxufHwobj1JdChlKS5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCkpO3ZhciBvPW4saT1udWxsO3JldHVybiB0LmZvckVhY2goKGZ1bmN0aW9uKHQpe2lmKGl8fHQubWFya3MubGVuZ3RoKXtpfHwoaT1bXSk7dmFyIG49MCxzPTA7d2hpbGUobjxpLmxlbmd0aCYmczx0Lm1hcmtzLmxlbmd0aCl7dmFyIGE9dC5tYXJrc1tzXTtpZihyLm1hcmtzW2EudHlwZS5uYW1lXSl7aWYoIWEuZXEoaVtuXSl8fCExPT09YS50eXBlLnNwZWMuc3Bhbm5pbmcpYnJlYWs7bis9MixzKyt9ZWxzZSBzKyt9d2hpbGUobjxpLmxlbmd0aClvPWkucG9wKCksaS5wb3AoKTt3aGlsZShzPHQubWFya3MubGVuZ3RoKXt2YXIgYz10Lm1hcmtzW3MrK10sdT1yLnNlcmlhbGl6ZU1hcmsoYyx0LmlzSW5saW5lLGUpO3UmJihpLnB1c2goYyxvKSxvLmFwcGVuZENoaWxkKHUuZG9tKSxvPXUuY29udGVudERPTXx8dS5kb20pfX1vLmFwcGVuZENoaWxkKHIuc2VyaWFsaXplTm9kZSh0LGUpKX0pKSxufSx6dC5wcm90b3R5cGUuc2VyaWFsaXplTm9kZT1mdW5jdGlvbih0LGUpe3ZvaWQgMD09PWUmJihlPXt9KTt2YXIgbj16dC5yZW5kZXJTcGVjKEl0KGUpLHRoaXMubm9kZXNbdC50eXBlLm5hbWVdKHQpKSxyPW4uZG9tLG89bi5jb250ZW50RE9NO2lmKG8pe2lmKHQuaXNMZWFmKXRocm93IG5ldyBSYW5nZUVycm9yKCJDb250ZW50IGhvbGUgbm90IGFsbG93ZWQgaW4gYSBsZWFmIG5vZGUgc3BlYyIpO2Uub25Db250ZW50P2Uub25Db250ZW50KHQsbyxlKTp0aGlzLnNlcmlhbGl6ZUZyYWdtZW50KHQuY29udGVudCxlLG8pfXJldHVybiByfSx6dC5wcm90b3R5cGUuc2VyaWFsaXplTm9kZUFuZE1hcmtzPWZ1bmN0aW9uKHQsZSl7dm9pZCAwPT09ZSYmKGU9e30pO2Zvcih2YXIgbj10aGlzLnNlcmlhbGl6ZU5vZGUodCxlKSxyPXQubWFya3MubGVuZ3RoLTE7cj49MDtyLS0pe3ZhciBvPXRoaXMuc2VyaWFsaXplTWFyayh0Lm1hcmtzW3JdLHQuaXNJbmxpbmUsZSk7byYmKChvLmNvbnRlbnRET018fG8uZG9tKS5hcHBlbmRDaGlsZChuKSxuPW8uZG9tKX1yZXR1cm4gbn0senQucHJvdG90eXBlLnNlcmlhbGl6ZU1hcms9ZnVuY3Rpb24odCxlLG4pe3ZvaWQgMD09PW4mJihuPXt9KTt2YXIgcj10aGlzLm1hcmtzW3QudHlwZS5uYW1lXTtyZXR1cm4gciYmenQucmVuZGVyU3BlYyhJdChuKSxyKHQsZSkpfSx6dC5yZW5kZXJTcGVjPWZ1bmN0aW9uKHQsZSxuKXtpZih2b2lkIDA9PT1uJiYobj1udWxsKSwic3RyaW5nIj09dHlwZW9mIGUpcmV0dXJue2RvbTp0LmNyZWF0ZVRleHROb2RlKGUpfTtpZihudWxsIT1lLm5vZGVUeXBlKXJldHVybntkb206ZX07dmFyIHI9ZVswXSxvPXIuaW5kZXhPZigiICIpO28+MCYmKG49ci5zbGljZSgwLG8pLHI9ci5zbGljZShvKzEpKTt2YXIgaT1udWxsLHM9bj90LmNyZWF0ZUVsZW1lbnROUyhuLHIpOnQuY3JlYXRlRWxlbWVudChyKSxhPWVbMV0sYz0xO2lmKGEmJiJvYmplY3QiPT10eXBlb2YgYSYmbnVsbD09YS5ub2RlVHlwZSYmIUFycmF5LmlzQXJyYXkoYSkpZm9yKHZhciB1IGluIGM9MixhKWlmKG51bGwhPWFbdV0pe3ZhciBsPXUuaW5kZXhPZigiICIpO2w+MD9zLnNldEF0dHJpYnV0ZU5TKHUuc2xpY2UoMCxsKSx1LnNsaWNlKGwrMSksYVt1XSk6cy5zZXRBdHRyaWJ1dGUodSxhW3VdKX1mb3IodmFyIGg9YztoPGUubGVuZ3RoO2grKyl7dmFyIGY9ZVtoXTtpZigwPT09Zil7aWYoaDxlLmxlbmd0aC0xfHxoPmMpdGhyb3cgbmV3IFJhbmdlRXJyb3IoIkNvbnRlbnQgaG9sZSBtdXN0IGJlIHRoZSBvbmx5IGNoaWxkIG9mIGl0cyBwYXJlbnQgbm9kZSIpO3JldHVybntkb206cyxjb250ZW50RE9NOnN9fXZhciBwPXp0LnJlbmRlclNwZWModCxmLG4pLGQ9cC5kb20sdj1wLmNvbnRlbnRET007aWYocy5hcHBlbmRDaGlsZChkKSx2KXtpZihpKXRocm93IG5ldyBSYW5nZUVycm9yKCJNdWx0aXBsZSBjb250ZW50IGhvbGVzIik7aT12fX1yZXR1cm57ZG9tOnMsY29udGVudERPTTppfX0senQuZnJvbVNjaGVtYT1mdW5jdGlvbih0KXtyZXR1cm4gdC5jYWNoZWQuZG9tU2VyaWFsaXplcnx8KHQuY2FjaGVkLmRvbVNlcmlhbGl6ZXI9bmV3IHp0KHRoaXMubm9kZXNGcm9tU2NoZW1hKHQpLHRoaXMubWFya3NGcm9tU2NoZW1hKHQpKSl9LHp0Lm5vZGVzRnJvbVNjaGVtYT1mdW5jdGlvbih0KXt2YXIgZT1QdCh0Lm5vZGVzKTtyZXR1cm4gZS50ZXh0fHwoZS50ZXh0PWZ1bmN0aW9uKHQpe3JldHVybiB0LnRleHR9KSxlfSx6dC5tYXJrc0Zyb21TY2hlbWE9ZnVuY3Rpb24odCl7cmV0dXJuIFB0KHQubWFya3MpfTt2YXIgQnQ9bigiMGFjMCIpLF90PXt9O2lmKCJ1bmRlZmluZWQiIT10eXBlb2YgbmF2aWdhdG9yJiYidW5kZWZpbmVkIiE9dHlwZW9mIGRvY3VtZW50KXt2YXIgRnQ9L0VkZ2VcLyhcZCspLy5leGVjKG5hdmlnYXRvci51c2VyQWdlbnQpLGp0PS9NU0lFIFxkLy50ZXN0KG5hdmlnYXRvci51c2VyQWdlbnQpLCR0PS9UcmlkZW50XC8oPzpbNy05XXxcZHsyLH0pXC4uKnJ2OihcZCspLy5leGVjKG5hdmlnYXRvci51c2VyQWdlbnQpO190Lm1hYz0vTWFjLy50ZXN0KG5hdmlnYXRvci5wbGF0Zm9ybSk7dmFyIFZ0PV90LmllPSEhKGp0fHwkdHx8RnQpO190LmllX3ZlcnNpb249anQ/ZG9jdW1lbnQuZG9jdW1lbnRNb2RlfHw2OiR0PyskdFsxXTpGdD8rRnRbMV06bnVsbCxfdC5nZWNrbz0hVnQmJi9nZWNrb1wvKFxkKykvaS50ZXN0KG5hdmlnYXRvci51c2VyQWdlbnQpLF90LmdlY2tvX3ZlcnNpb249X3QuZ2Vja28mJisoL0ZpcmVmb3hcLyhcZCspLy5leGVjKG5hdmlnYXRvci51c2VyQWdlbnQpfHxbMCwwXSlbMV07dmFyIEx0PSFWdCYmL0Nocm9tZVwvKFxkKykvLmV4ZWMobmF2aWdhdG9yLnVzZXJBZ2VudCk7X3QuY2hyb21lPSEhTHQsX3QuY2hyb21lX3ZlcnNpb249THQmJitMdFsxXSxfdC5pb3M9IVZ0JiYvQXBwbGVXZWJLaXQvLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudCkmJi9Nb2JpbGVcL1x3Ky8udGVzdChuYXZpZ2F0b3IudXNlckFnZW50KSxfdC5hbmRyb2lkPS9BbmRyb2lkIFxkLy50ZXN0KG5hdmlnYXRvci51c2VyQWdlbnQpLF90LndlYmtpdD0id2Via2l0Rm9udFNtb290aGluZyJpbiBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc3R5bGUsX3Quc2FmYXJpPS9BcHBsZSBDb21wdXRlci8udGVzdChuYXZpZ2F0b3IudmVuZG9yKSxfdC53ZWJraXRfdmVyc2lvbj1fdC53ZWJraXQmJisoL1xiQXBwbGVXZWJLaXRcLyhcZCspLy5leGVjKG5hdmlnYXRvci51c2VyQWdlbnQpfHxbMCwwXSlbMV19dmFyIHF0PWZ1bmN0aW9uKHQpe2Zvcih2YXIgZT0wOztlKyspaWYodD10LnByZXZpb3VzU2libGluZywhdClyZXR1cm4gZX0sSnQ9ZnVuY3Rpb24odCl7dmFyIGU9dC5wYXJlbnROb2RlO3JldHVybiBlJiYxMT09ZS5ub2RlVHlwZT9lLmhvc3Q6ZX0sV3Q9ZnVuY3Rpb24odCxlLG4pe3ZhciByPWRvY3VtZW50LmNyZWF0ZVJhbmdlKCk7cmV0dXJuIHIuc2V0RW5kKHQsbnVsbD09bj90Lm5vZGVWYWx1ZS5sZW5ndGg6biksci5zZXRTdGFydCh0LGV8fDApLHJ9LEh0PWZ1bmN0aW9uKHQsZSxuLHIpe3JldHVybiBuJiYoVXQodCxlLG4sciwtMSl8fFV0KHQsZSxuLHIsMSkpfSxLdD0vXihpbWd8YnJ8aW5wdXR8dGV4dGFyZWF8aHIpJC9pO2Z1bmN0aW9uIFV0KHQsZSxuLHIsbyl7Zm9yKDs7KXtpZih0PT1uJiZlPT1yKXJldHVybiEwO2lmKGU9PShvPDA/MDpHdCh0KSkpe3ZhciBpPXQucGFyZW50Tm9kZTtpZigxIT1pLm5vZGVUeXBlfHxZdCh0KXx8S3QudGVzdCh0Lm5vZGVOYW1lKXx8ImZhbHNlIj09dC5jb250ZW50RWRpdGFibGUpcmV0dXJuITE7ZT1xdCh0KSsobzwwPzA6MSksdD1pfWVsc2V7aWYoMSE9dC5ub2RlVHlwZSlyZXR1cm4hMTtpZih0PXQuY2hpbGROb2Rlc1tlKyhvPDA/LTE6MCldLCJmYWxzZSI9PXQuY29udGVudEVkaXRhYmxlKXJldHVybiExO2U9bzwwP0d0KHQpOjB9fX1mdW5jdGlvbiBHdCh0KXtyZXR1cm4gMz09dC5ub2RlVHlwZT90Lm5vZGVWYWx1ZS5sZW5ndGg6dC5jaGlsZE5vZGVzLmxlbmd0aH1mdW5jdGlvbiBYdCh0LGUsbil7Zm9yKHZhciByPTA9PWUsbz1lPT1HdCh0KTtyfHxvOyl7aWYodD09bilyZXR1cm4hMDt2YXIgaT1xdCh0KTtpZih0PXQucGFyZW50Tm9kZSwhdClyZXR1cm4hMTtyPXImJjA9PWksbz1vJiZpPT1HdCh0KX19ZnVuY3Rpb24gWXQodCl7Zm9yKHZhciBlLG49dDtuO249bi5wYXJlbnROb2RlKWlmKGU9bi5wbVZpZXdEZXNjKWJyZWFrO3JldHVybiBlJiZlLm5vZGUmJmUubm9kZS5pc0Jsb2NrJiYoZS5kb209PXR8fGUuY29udGVudERPTT09dCl9dmFyIFp0PWZ1bmN0aW9uKHQpe3ZhciBlPXQuaXNDb2xsYXBzZWQ7cmV0dXJuIGUmJl90LmNocm9tZSYmdC5yYW5nZUNvdW50JiYhdC5nZXRSYW5nZUF0KDApLmNvbGxhcHNlZCYmKGU9ITEpLGV9O2Z1bmN0aW9uIFF0KHQsZSl7dmFyIG49ZG9jdW1lbnQuY3JlYXRlRXZlbnQoIkV2ZW50Iik7cmV0dXJuIG4uaW5pdEV2ZW50KCJrZXlkb3duIiwhMCwhMCksbi5rZXlDb2RlPXQsbi5rZXk9bi5jb2RlPWUsbn1mdW5jdGlvbiB0ZSh0KXtyZXR1cm57bGVmdDowLHJpZ2h0OnQuaW5uZXJXaWR0aCx0b3A6MCxib3R0b206dC5pbm5lckhlaWdodH19ZnVuY3Rpb24gZWUodCxlKXtyZXR1cm4ibnVtYmVyIj09dHlwZW9mIHQ/dDp0W2VdfWZ1bmN0aW9uIG5lKHQsZSxuKXtmb3IodmFyIHI9dC5zb21lUHJvcCgic2Nyb2xsVGhyZXNob2xkIil8fDAsbz10LnNvbWVQcm9wKCJzY3JvbGxNYXJnaW4iKXx8NSxpPXQuZG9tLm93bmVyRG9jdW1lbnQscz1pLmRlZmF1bHRWaWV3LGE9bnx8dC5kb207O2E9SnQoYSkpe2lmKCFhKWJyZWFrO2lmKDE9PWEubm9kZVR5cGUpe3ZhciBjPWE9PWkuYm9keXx8MSE9YS5ub2RlVHlwZSx1PWM/dGUocyk6YS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKSxsPTAsaD0wO2lmKGUudG9wPHUudG9wK2VlKHIsInRvcCIpP2g9LSh1LnRvcC1lLnRvcCtlZShvLCJ0b3AiKSk6ZS5ib3R0b20+dS5ib3R0b20tZWUociwiYm90dG9tIikmJihoPWUuYm90dG9tLXUuYm90dG9tK2VlKG8sImJvdHRvbSIpKSxlLmxlZnQ8dS5sZWZ0K2VlKHIsImxlZnQiKT9sPS0odS5sZWZ0LWUubGVmdCtlZShvLCJsZWZ0IikpOmUucmlnaHQ+dS5yaWdodC1lZShyLCJyaWdodCIpJiYobD1lLnJpZ2h0LXUucmlnaHQrZWUobywicmlnaHQiKSksbHx8aClpZihjKXMuc2Nyb2xsQnkobCxoKTtlbHNle3ZhciBmPWEuc2Nyb2xsTGVmdCxwPWEuc2Nyb2xsVG9wO2gmJihhLnNjcm9sbFRvcCs9aCksbCYmKGEuc2Nyb2xsTGVmdCs9bCk7dmFyIGQ9YS5zY3JvbGxMZWZ0LWYsdj1hLnNjcm9sbFRvcC1wO2U9e2xlZnQ6ZS5sZWZ0LWQsdG9wOmUudG9wLXYscmlnaHQ6ZS5yaWdodC1kLGJvdHRvbTplLmJvdHRvbS12fX1pZihjKWJyZWFrfX19ZnVuY3Rpb24gcmUodCl7Zm9yKHZhciBlLG4scj10LmRvbS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKSxvPU1hdGgubWF4KDAsci50b3ApLGk9KHIubGVmdCtyLnJpZ2h0KS8yLHM9bysxO3M8TWF0aC5taW4oaW5uZXJIZWlnaHQsci5ib3R0b20pO3MrPTUpe3ZhciBhPXQucm9vdC5lbGVtZW50RnJvbVBvaW50KGkscyk7aWYoYSE9dC5kb20mJnQuZG9tLmNvbnRhaW5zKGEpKXt2YXIgYz1hLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO2lmKGMudG9wPj1vLTIwKXtlPWEsbj1jLnRvcDticmVha319fXJldHVybntyZWZET006ZSxyZWZUb3A6bixzdGFjazpvZSh0LmRvbSl9fWZ1bmN0aW9uIG9lKHQpe2Zvcih2YXIgZT1bXSxuPXQub3duZXJEb2N1bWVudDt0O3Q9SnQodCkpaWYoZS5wdXNoKHtkb206dCx0b3A6dC5zY3JvbGxUb3AsbGVmdDp0LnNjcm9sbExlZnR9KSx0PT1uKWJyZWFrO3JldHVybiBlfWZ1bmN0aW9uIGllKHQpe3ZhciBlPXQucmVmRE9NLG49dC5yZWZUb3Ascj10LnN0YWNrLG89ZT9lLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLnRvcDowO3NlKHIsMD09bz8wOm8tbil9ZnVuY3Rpb24gc2UodCxlKXtmb3IodmFyIG49MDtuPHQubGVuZ3RoO24rKyl7dmFyIHI9dFtuXSxvPXIuZG9tLGk9ci50b3Ascz1yLmxlZnQ7by5zY3JvbGxUb3AhPWkrZSYmKG8uc2Nyb2xsVG9wPWkrZSksby5zY3JvbGxMZWZ0IT1zJiYoby5zY3JvbGxMZWZ0PXMpfX12YXIgYWU9bnVsbDtmdW5jdGlvbiBjZSh0KXtpZih0LnNldEFjdGl2ZSlyZXR1cm4gdC5zZXRBY3RpdmUoKTtpZihhZSlyZXR1cm4gdC5mb2N1cyhhZSk7dmFyIGU9b2UodCk7dC5mb2N1cyhudWxsPT1hZT97Z2V0IHByZXZlbnRTY3JvbGwoKXtyZXR1cm4gYWU9e3ByZXZlbnRTY3JvbGw6ITB9LCEwfX06dm9pZCAwKSxhZXx8KGFlPSExLHNlKGUsMCkpfWZ1bmN0aW9uIHVlKHQsZSl7Zm9yKHZhciBuLHIsbz0yZTgsaT0wLHM9ZS50b3AsYT1lLnRvcCxjPXQuZmlyc3RDaGlsZCx1PTA7YztjPWMubmV4dFNpYmxpbmcsdSsrKXt2YXIgbD12b2lkIDA7aWYoMT09Yy5ub2RlVHlwZSlsPWMuZ2V0Q2xpZW50UmVjdHMoKTtlbHNle2lmKDMhPWMubm9kZVR5cGUpY29udGludWU7bD1XdChjKS5nZXRDbGllbnRSZWN0cygpfWZvcih2YXIgaD0wO2g8bC5sZW5ndGg7aCsrKXt2YXIgZj1sW2hdO2lmKGYudG9wPD1zJiZmLmJvdHRvbT49YSl7cz1NYXRoLm1heChmLmJvdHRvbSxzKSxhPU1hdGgubWluKGYudG9wLGEpO3ZhciBwPWYubGVmdD5lLmxlZnQ/Zi5sZWZ0LWUubGVmdDpmLnJpZ2h0PGUubGVmdD9lLmxlZnQtZi5yaWdodDowO2lmKHA8byl7bj1jLG89cCxyPXAmJjM9PW4ubm9kZVR5cGU/e2xlZnQ6Zi5yaWdodDxlLmxlZnQ/Zi5yaWdodDpmLmxlZnQsdG9wOmUudG9wfTplLDE9PWMubm9kZVR5cGUmJnAmJihpPXUrKGUubGVmdD49KGYubGVmdCtmLnJpZ2h0KS8yPzE6MCkpO2NvbnRpbnVlfX0hbiYmKGUubGVmdD49Zi5yaWdodCYmZS50b3A+PWYudG9wfHxlLmxlZnQ+PWYubGVmdCYmZS50b3A+PWYuYm90dG9tKSYmKGk9dSsxKX19cmV0dXJuIG4mJjM9PW4ubm9kZVR5cGU/bGUobixyKTohbnx8byYmMT09bi5ub2RlVHlwZT97bm9kZTp0LG9mZnNldDppfTp1ZShuLHIpfWZ1bmN0aW9uIGxlKHQsZSl7Zm9yKHZhciBuPXQubm9kZVZhbHVlLmxlbmd0aCxyPWRvY3VtZW50LmNyZWF0ZVJhbmdlKCksbz0wO288bjtvKyspe3Iuc2V0RW5kKHQsbysxKSxyLnNldFN0YXJ0KHQsbyk7dmFyIGk9Z2UociwxKTtpZihpLnRvcCE9aS5ib3R0b20mJmhlKGUsaSkpcmV0dXJue25vZGU6dCxvZmZzZXQ6bysoZS5sZWZ0Pj0oaS5sZWZ0K2kucmlnaHQpLzI/MTowKX19cmV0dXJue25vZGU6dCxvZmZzZXQ6MH19ZnVuY3Rpb24gaGUodCxlKXtyZXR1cm4gdC5sZWZ0Pj1lLmxlZnQtMSYmdC5sZWZ0PD1lLnJpZ2h0KzEmJnQudG9wPj1lLnRvcC0xJiZ0LnRvcDw9ZS5ib3R0b20rMX1mdW5jdGlvbiBmZSh0LGUpe3ZhciBuPXQucGFyZW50Tm9kZTtyZXR1cm4gbiYmL15saSQvaS50ZXN0KG4ubm9kZU5hbWUpJiZlLmxlZnQ8dC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS5sZWZ0P246dH1mdW5jdGlvbiBwZSh0LGUsbil7dmFyIHI9dWUoZSxuKSxvPXIubm9kZSxpPXIub2Zmc2V0LHM9LTE7aWYoMT09by5ub2RlVHlwZSYmIW8uZmlyc3RDaGlsZCl7dmFyIGE9by5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtzPWEubGVmdCE9YS5yaWdodCYmbi5sZWZ0PihhLmxlZnQrYS5yaWdodCkvMj8xOi0xfXJldHVybiB0LmRvY1ZpZXcucG9zRnJvbURPTShvLGkscyl9ZnVuY3Rpb24gZGUodCxlLG4scil7Zm9yKHZhciBvPS0xLGk9ZTs7KXtpZihpPT10LmRvbSlicmVhazt2YXIgcz10LmRvY1ZpZXcubmVhcmVzdERlc2MoaSwhMCk7aWYoIXMpcmV0dXJuIG51bGw7aWYocy5ub2RlLmlzQmxvY2smJnMucGFyZW50KXt2YXIgYT1zLmRvbS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtpZihhLmxlZnQ+ci5sZWZ0fHxhLnRvcD5yLnRvcClvPXMucG9zQmVmb3JlO2Vsc2V7aWYoIShhLnJpZ2h0PHIubGVmdHx8YS5ib3R0b208ci50b3ApKWJyZWFrO289cy5wb3NBZnRlcn19aT1zLmRvbS5wYXJlbnROb2RlfXJldHVybiBvPi0xP286dC5kb2NWaWV3LnBvc0Zyb21ET00oZSxuKX1mdW5jdGlvbiB2ZSh0LGUsbil7dmFyIHI9dC5jaGlsZE5vZGVzLmxlbmd0aDtpZihyJiZuLnRvcDxuLmJvdHRvbSlmb3IodmFyIG89TWF0aC5tYXgoMCxNYXRoLm1pbihyLTEsTWF0aC5mbG9vcihyKihlLnRvcC1uLnRvcCkvKG4uYm90dG9tLW4udG9wKSktMikpLGk9bzs7KXt2YXIgcz10LmNoaWxkTm9kZXNbaV07aWYoMT09cy5ub2RlVHlwZSlmb3IodmFyIGE9cy5nZXRDbGllbnRSZWN0cygpLGM9MDtjPGEubGVuZ3RoO2MrKyl7dmFyIHU9YVtjXTtpZihoZShlLHUpKXJldHVybiB2ZShzLGUsdSl9aWYoKGk9KGkrMSklcik9PW8pYnJlYWt9cmV0dXJuIHR9ZnVuY3Rpb24gbWUodCxlKXt2YXIgbixyLG8saSxzPXQucm9vdDtpZihzLmNhcmV0UG9zaXRpb25Gcm9tUG9pbnQpdHJ5e3ZhciBhPXMuY2FyZXRQb3NpdGlvbkZyb21Qb2ludChlLmxlZnQsZS50b3ApO2EmJihuPWEsbz1uLm9mZnNldE5vZGUsaT1uLm9mZnNldCl9Y2F0Y2godil7fWlmKCFvJiZzLmNhcmV0UmFuZ2VGcm9tUG9pbnQpe3ZhciBjPXMuY2FyZXRSYW5nZUZyb21Qb2ludChlLmxlZnQsZS50b3ApO2MmJihyPWMsbz1yLnN0YXJ0Q29udGFpbmVyLGk9ci5zdGFydE9mZnNldCl9dmFyIHUsbD1zLmVsZW1lbnRGcm9tUG9pbnQoZS5sZWZ0LGUudG9wKzEpO2lmKCFsfHwhdC5kb20uY29udGFpbnMoMSE9bC5ub2RlVHlwZT9sLnBhcmVudE5vZGU6bCkpe3ZhciBoPXQuZG9tLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO2lmKCFoZShlLGgpKXJldHVybiBudWxsO2lmKGw9dmUodC5kb20sZSxoKSwhbClyZXR1cm4gbnVsbH1pZihsPWZlKGwsZSksbyl7aWYoX3QuZ2Vja28mJjE9PW8ubm9kZVR5cGUmJihpPU1hdGgubWluKGksby5jaGlsZE5vZGVzLmxlbmd0aCksaTxvLmNoaWxkTm9kZXMubGVuZ3RoKSl7dmFyIGYscD1vLmNoaWxkTm9kZXNbaV07IklNRyI9PXAubm9kZU5hbWUmJihmPXAuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkpLnJpZ2h0PD1lLmxlZnQmJmYuYm90dG9tPmUudG9wJiZpKyt9bz09dC5kb20mJmk9PW8uY2hpbGROb2Rlcy5sZW5ndGgtMSYmMT09by5sYXN0Q2hpbGQubm9kZVR5cGUmJmUudG9wPm8ubGFzdENoaWxkLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLmJvdHRvbT91PXQuc3RhdGUuZG9jLmNvbnRlbnQuc2l6ZTowIT1pJiYxPT1vLm5vZGVUeXBlJiYiQlIiPT1vLmNoaWxkTm9kZXNbaS0xXS5ub2RlTmFtZXx8KHU9ZGUodCxvLGksZSkpfW51bGw9PXUmJih1PXBlKHQsbCxlKSk7dmFyIGQ9dC5kb2NWaWV3Lm5lYXJlc3REZXNjKGwsITApO3JldHVybntwb3M6dSxpbnNpZGU6ZD9kLnBvc0F0U3RhcnQtZC5ib3JkZXI6LTF9fWZ1bmN0aW9uIGdlKHQsZSl7dmFyIG49dC5nZXRDbGllbnRSZWN0cygpO3JldHVybiBuLmxlbmd0aD9uW2U8MD8wOm4ubGVuZ3RoLTFdOnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCl9ZnVuY3Rpb24geWUodCxlKXt2YXIgbj10LmRvY1ZpZXcuZG9tRnJvbVBvcyhlKSxyPW4ubm9kZSxvPW4ub2Zmc2V0O2lmKDM9PXIubm9kZVR5cGUmJihfdC53ZWJraXR8fF90LmdlY2tvKSl7dmFyIGk9Z2UoV3QocixvLG8pLDApO2lmKF90LmdlY2tvJiZvJiYvXHMvLnRlc3Qoci5ub2RlVmFsdWVbby0xXSkmJm88ci5ub2RlVmFsdWUubGVuZ3RoKXt2YXIgcz1nZShXdChyLG8tMSxvLTEpLC0xKTtpZihzLnRvcD09aS50b3Ape3ZhciBhPWdlKFd0KHIsbyxvKzEpLC0xKTtpZihhLnRvcCE9aS50b3ApcmV0dXJuIHdlKGEsYS5sZWZ0PHMubGVmdCl9fXJldHVybiBpfWlmKDE9PXIubm9kZVR5cGUmJiF0LnN0YXRlLmRvYy5yZXNvbHZlKGUpLnBhcmVudC5pbmxpbmVDb250ZW50KXt2YXIgYyx1PSEwO2lmKG88ci5jaGlsZE5vZGVzLmxlbmd0aCl7dmFyIGw9ci5jaGlsZE5vZGVzW29dOzE9PWwubm9kZVR5cGUmJihjPWwuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkpfWlmKCFjJiZvKXt2YXIgaD1yLmNoaWxkTm9kZXNbby0xXTsxPT1oLm5vZGVUeXBlJiYoYz1oLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLHU9ITEpfXJldHVybiBiZShjfHxyLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLHUpfWZvcih2YXIgZj0tMTtmPDI7Zis9MilpZihmPDAmJm8pe3ZhciBwPXZvaWQgMCxkPTM9PXIubm9kZVR5cGU/V3QocixvLTEsbyk6Mz09KHA9ci5jaGlsZE5vZGVzW28tMV0pLm5vZGVUeXBlP1d0KHApOjE9PXAubm9kZVR5cGUmJiJCUiIhPXAubm9kZU5hbWU/cDpudWxsO2lmKGQpe3ZhciB2PWdlKGQsMSk7aWYodi50b3A8di5ib3R0b20pcmV0dXJuIHdlKHYsITEpfX1lbHNlIGlmKGY+MCYmbzxHdChyKSl7dmFyIG09dm9pZCAwLGc9Mz09ci5ub2RlVHlwZT9XdChyLG8sbysxKTozPT0obT1yLmNoaWxkTm9kZXNbb10pLm5vZGVUeXBlP1d0KG0pOjE9PW0ubm9kZVR5cGU/bTpudWxsO2lmKGcpe3ZhciB5PWdlKGcsLTEpO2lmKHkudG9wPHkuYm90dG9tKXJldHVybiB3ZSh5LCEwKX19cmV0dXJuIHdlKGdlKDM9PXIubm9kZVR5cGU/V3Qocik6ciwwKSwhMSl9ZnVuY3Rpb24gd2UodCxlKXtpZigwPT10LndpZHRoKXJldHVybiB0O3ZhciBuPWU/dC5sZWZ0OnQucmlnaHQ7cmV0dXJue3RvcDp0LnRvcCxib3R0b206dC5ib3R0b20sbGVmdDpuLHJpZ2h0Om59fWZ1bmN0aW9uIGJlKHQsZSl7aWYoMD09dC5oZWlnaHQpcmV0dXJuIHQ7dmFyIG49ZT90LnRvcDp0LmJvdHRvbTtyZXR1cm57dG9wOm4sYm90dG9tOm4sbGVmdDp0LmxlZnQscmlnaHQ6dC5yaWdodH19ZnVuY3Rpb24geGUodCxlLG4pe3ZhciByPXQuc3RhdGUsbz10LnJvb3QuYWN0aXZlRWxlbWVudDtyIT1lJiZ0LnVwZGF0ZVN0YXRlKGUpLG8hPXQuZG9tJiZ0LmZvY3VzKCk7dHJ5e3JldHVybiBuKCl9ZmluYWxseXtyIT1lJiZ0LnVwZGF0ZVN0YXRlKHIpLG8hPXQuZG9tJiZvLmZvY3VzKCl9fWZ1bmN0aW9uIGtlKHQsZSxuKXt2YXIgcj1lLnNlbGVjdGlvbixvPSJ1cCI9PW4/ci4kYW5jaG9yLm1pbihyLiRoZWFkKTpyLiRhbmNob3IubWF4KHIuJGhlYWQpO3JldHVybiB4ZSh0LGUsKGZ1bmN0aW9uKCl7Zm9yKHZhciBlPXQuZG9jVmlldy5kb21Gcm9tUG9zKG8ucG9zKSxyPWUubm9kZTs7KXt2YXIgaT10LmRvY1ZpZXcubmVhcmVzdERlc2MociwhMCk7aWYoIWkpYnJlYWs7aWYoaS5ub2RlLmlzQmxvY2spe3I9aS5kb207YnJlYWt9cj1pLmRvbS5wYXJlbnROb2RlfWZvcih2YXIgcz15ZSh0LG8ucG9zKSxhPXIuZmlyc3RDaGlsZDthO2E9YS5uZXh0U2libGluZyl7dmFyIGM9dm9pZCAwO2lmKDE9PWEubm9kZVR5cGUpYz1hLmdldENsaWVudFJlY3RzKCk7ZWxzZXtpZigzIT1hLm5vZGVUeXBlKWNvbnRpbnVlO2M9V3QoYSwwLGEubm9kZVZhbHVlLmxlbmd0aCkuZ2V0Q2xpZW50UmVjdHMoKX1mb3IodmFyIHU9MDt1PGMubGVuZ3RoO3UrKyl7dmFyIGw9Y1t1XTtpZihsLmJvdHRvbT5sLnRvcCYmKCJ1cCI9PW4/bC5ib3R0b208cy50b3ArMTpsLnRvcD5zLmJvdHRvbS0xKSlyZXR1cm4hMX19cmV0dXJuITB9KSl9dmFyIFNlPS9bXHUwNTkwLVx1MDhhY10vO2Z1bmN0aW9uIENlKHQsZSxuKXt2YXIgcj1lLnNlbGVjdGlvbixvPXIuJGhlYWQ7aWYoIW8ucGFyZW50LmlzVGV4dGJsb2NrKXJldHVybiExO3ZhciBpPW8ucGFyZW50T2Zmc2V0LHM9IWksYT1pPT1vLnBhcmVudC5jb250ZW50LnNpemUsYz1nZXRTZWxlY3Rpb24oKTtyZXR1cm4gU2UudGVzdChvLnBhcmVudC50ZXh0Q29udGVudCkmJmMubW9kaWZ5P3hlKHQsZSwoZnVuY3Rpb24oKXt2YXIgZT1jLmdldFJhbmdlQXQoMCkscj1jLmZvY3VzTm9kZSxpPWMuZm9jdXNPZmZzZXQscz1jLmNhcmV0QmlkaUxldmVsO2MubW9kaWZ5KCJtb3ZlIixuLCJjaGFyYWN0ZXIiKTt2YXIgYT1vLmRlcHRoP3QuZG9jVmlldy5kb21BZnRlclBvcyhvLmJlZm9yZSgpKTp0LmRvbSx1PSFhLmNvbnRhaW5zKDE9PWMuZm9jdXNOb2RlLm5vZGVUeXBlP2MuZm9jdXNOb2RlOmMuZm9jdXNOb2RlLnBhcmVudE5vZGUpfHxyPT1jLmZvY3VzTm9kZSYmaT09Yy5mb2N1c09mZnNldDtyZXR1cm4gYy5yZW1vdmVBbGxSYW5nZXMoKSxjLmFkZFJhbmdlKGUpLG51bGwhPXMmJihjLmNhcmV0QmlkaUxldmVsPXMpLHV9KSk6ImxlZnQiPT1ufHwiYmFja3dhcmQiPT1uP3M6YX12YXIgT2U9bnVsbCxNZT1udWxsLE5lPSExO2Z1bmN0aW9uIFRlKHQsZSxuKXtyZXR1cm4gT2U9PWUmJk1lPT1uP05lOihPZT1lLE1lPW4sTmU9InVwIj09bnx8ImRvd24iPT1uP2tlKHQsZSxuKTpDZSh0LGUsbikpfXZhciBBZT0wLEVlPTEsRGU9MixSZT0zLHplPWZ1bmN0aW9uKHQsZSxuLHIpe3RoaXMucGFyZW50PXQsdGhpcy5jaGlsZHJlbj1lLHRoaXMuZG9tPW4sbi5wbVZpZXdEZXNjPXRoaXMsdGhpcy5jb250ZW50RE9NPXIsdGhpcy5kaXJ0eT1BZX0sUGU9e2JlZm9yZVBvc2l0aW9uOntjb25maWd1cmFibGU6ITB9LHNpemU6e2NvbmZpZ3VyYWJsZTohMH0sYm9yZGVyOntjb25maWd1cmFibGU6ITB9LHBvc0JlZm9yZTp7Y29uZmlndXJhYmxlOiEwfSxwb3NBdFN0YXJ0Ontjb25maWd1cmFibGU6ITB9LHBvc0FmdGVyOntjb25maWd1cmFibGU6ITB9LHBvc0F0RW5kOntjb25maWd1cmFibGU6ITB9LGNvbnRlbnRMb3N0Ontjb25maWd1cmFibGU6ITB9fTt6ZS5wcm90b3R5cGUubWF0Y2hlc1dpZGdldD1mdW5jdGlvbigpe3JldHVybiExfSx6ZS5wcm90b3R5cGUubWF0Y2hlc01hcms9ZnVuY3Rpb24oKXtyZXR1cm4hMX0semUucHJvdG90eXBlLm1hdGNoZXNOb2RlPWZ1bmN0aW9uKCl7cmV0dXJuITF9LHplLnByb3RvdHlwZS5tYXRjaGVzSGFjaz1mdW5jdGlvbigpe3JldHVybiExfSxQZS5iZWZvcmVQb3NpdGlvbi5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4hMX0semUucHJvdG90eXBlLnBhcnNlUnVsZT1mdW5jdGlvbigpe3JldHVybiBudWxsfSx6ZS5wcm90b3R5cGUuc3RvcEV2ZW50PWZ1bmN0aW9uKCl7cmV0dXJuITF9LFBlLnNpemUuZ2V0PWZ1bmN0aW9uKCl7Zm9yKHZhciB0PTAsZT0wO2U8dGhpcy5jaGlsZHJlbi5sZW5ndGg7ZSsrKXQrPXRoaXMuY2hpbGRyZW5bZV0uc2l6ZTtyZXR1cm4gdH0sUGUuYm9yZGVyLmdldD1mdW5jdGlvbigpe3JldHVybiAwfSx6ZS5wcm90b3R5cGUuZGVzdHJveT1mdW5jdGlvbigpe3RoaXMucGFyZW50PW51bGwsdGhpcy5kb20ucG1WaWV3RGVzYz09dGhpcyYmKHRoaXMuZG9tLnBtVmlld0Rlc2M9bnVsbCk7Zm9yKHZhciB0PTA7dDx0aGlzLmNoaWxkcmVuLmxlbmd0aDt0KyspdGhpcy5jaGlsZHJlblt0XS5kZXN0cm95KCl9LHplLnByb3RvdHlwZS5wb3NCZWZvcmVDaGlsZD1mdW5jdGlvbih0KXtmb3IodmFyIGU9MCxuPXRoaXMucG9zQXRTdGFydDtlPHRoaXMuY2hpbGRyZW4ubGVuZ3RoO2UrKyl7dmFyIHI9dGhpcy5jaGlsZHJlbltlXTtpZihyPT10KXJldHVybiBuO24rPXIuc2l6ZX19LFBlLnBvc0JlZm9yZS5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5wYXJlbnQucG9zQmVmb3JlQ2hpbGQodGhpcyl9LFBlLnBvc0F0U3RhcnQuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucGFyZW50P3RoaXMucGFyZW50LnBvc0JlZm9yZUNoaWxkKHRoaXMpK3RoaXMuYm9yZGVyOjB9LFBlLnBvc0FmdGVyLmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLnBvc0JlZm9yZSt0aGlzLnNpemV9LFBlLnBvc0F0RW5kLmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLnBvc0F0U3RhcnQrdGhpcy5zaXplLTIqdGhpcy5ib3JkZXJ9LHplLnByb3RvdHlwZS5sb2NhbFBvc0Zyb21ET009ZnVuY3Rpb24odCxlLG4pe2lmKHRoaXMuY29udGVudERPTSYmdGhpcy5jb250ZW50RE9NLmNvbnRhaW5zKDE9PXQubm9kZVR5cGU/dDp0LnBhcmVudE5vZGUpKXtpZihuPDApe3ZhciByLG87aWYodD09dGhpcy5jb250ZW50RE9NKXI9dC5jaGlsZE5vZGVzW2UtMV07ZWxzZXt3aGlsZSh0LnBhcmVudE5vZGUhPXRoaXMuY29udGVudERPTSl0PXQucGFyZW50Tm9kZTtyPXQucHJldmlvdXNTaWJsaW5nfXdoaWxlKHImJighKG89ci5wbVZpZXdEZXNjKXx8by5wYXJlbnQhPXRoaXMpKXI9ci5wcmV2aW91c1NpYmxpbmc7cmV0dXJuIHI/dGhpcy5wb3NCZWZvcmVDaGlsZChvKStvLnNpemU6dGhpcy5wb3NBdFN0YXJ0fXZhciBpLHM7aWYodD09dGhpcy5jb250ZW50RE9NKWk9dC5jaGlsZE5vZGVzW2VdO2Vsc2V7d2hpbGUodC5wYXJlbnROb2RlIT10aGlzLmNvbnRlbnRET00pdD10LnBhcmVudE5vZGU7aT10Lm5leHRTaWJsaW5nfXdoaWxlKGkmJighKHM9aS5wbVZpZXdEZXNjKXx8cy5wYXJlbnQhPXRoaXMpKWk9aS5uZXh0U2libGluZztyZXR1cm4gaT90aGlzLnBvc0JlZm9yZUNoaWxkKHMpOnRoaXMucG9zQXRFbmR9dmFyIGE7aWYodGhpcy5jb250ZW50RE9NJiZ0aGlzLmNvbnRlbnRET00hPXRoaXMuZG9tJiZ0aGlzLmRvbS5jb250YWlucyh0aGlzLmNvbnRlbnRET00pKWE9MiZ0LmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uKHRoaXMuY29udGVudERPTSk7ZWxzZSBpZih0aGlzLmRvbS5maXJzdENoaWxkKXtpZigwPT1lKWZvcih2YXIgYz10OztjPWMucGFyZW50Tm9kZSl7aWYoYz09dGhpcy5kb20pe2E9ITE7YnJlYWt9aWYoYy5wYXJlbnROb2RlLmZpcnN0Q2hpbGQhPWMpYnJlYWt9aWYobnVsbD09YSYmZT09dC5jaGlsZE5vZGVzLmxlbmd0aClmb3IodmFyIHU9dDs7dT11LnBhcmVudE5vZGUpe2lmKHU9PXRoaXMuZG9tKXthPSEwO2JyZWFrfWlmKHUucGFyZW50Tm9kZS5sYXN0Q2hpbGQhPXUpYnJlYWt9fXJldHVybihudWxsPT1hP24+MDphKT90aGlzLnBvc0F0RW5kOnRoaXMucG9zQXRTdGFydH0semUucHJvdG90eXBlLm5lYXJlc3REZXNjPWZ1bmN0aW9uKHQsZSl7Zm9yKHZhciBuPSEwLHI9dDtyO3I9ci5wYXJlbnROb2RlKXt2YXIgbz10aGlzLmdldERlc2Mocik7aWYobyYmKCFlfHxvLm5vZGUpKXtpZighbnx8IW8ubm9kZURPTXx8KDE9PW8ubm9kZURPTS5ub2RlVHlwZT9vLm5vZGVET00uY29udGFpbnMoMT09dC5ub2RlVHlwZT90OnQucGFyZW50Tm9kZSk6by5ub2RlRE9NPT10KSlyZXR1cm4gbztuPSExfX19LHplLnByb3RvdHlwZS5nZXREZXNjPWZ1bmN0aW9uKHQpe2Zvcih2YXIgZT10LnBtVmlld0Rlc2Msbj1lO247bj1uLnBhcmVudClpZihuPT10aGlzKXJldHVybiBlfSx6ZS5wcm90b3R5cGUucG9zRnJvbURPTT1mdW5jdGlvbih0LGUsbil7Zm9yKHZhciByPXQ7O3I9ci5wYXJlbnROb2RlKXt2YXIgbz10aGlzLmdldERlc2Mocik7aWYobylyZXR1cm4gby5sb2NhbFBvc0Zyb21ET00odCxlLG4pfX0semUucHJvdG90eXBlLmRlc2NBdD1mdW5jdGlvbih0KXtmb3IodmFyIGU9MCxuPTA7ZTx0aGlzLmNoaWxkcmVuLmxlbmd0aDtlKyspe3ZhciByPXRoaXMuY2hpbGRyZW5bZV0sbz1uK3Iuc2l6ZTtpZihuPT10JiZvIT1uKXt3aGlsZSghci5ib3JkZXImJnIuY2hpbGRyZW4ubGVuZ3RoKXI9ci5jaGlsZHJlblswXTtyZXR1cm4gcn1pZih0PG8pcmV0dXJuIHIuZGVzY0F0KHQtbi1yLmJvcmRlcik7bj1vfX0semUucHJvdG90eXBlLmRvbUZyb21Qb3M9ZnVuY3Rpb24odCl7aWYoIXRoaXMuY29udGVudERPTSlyZXR1cm57bm9kZTp0aGlzLmRvbSxvZmZzZXQ6MH07Zm9yKHZhciBlPTAsbj0wOztuKyspe2lmKGU9PXQpe3doaWxlKG48dGhpcy5jaGlsZHJlbi5sZW5ndGgmJih0aGlzLmNoaWxkcmVuW25dLmJlZm9yZVBvc2l0aW9ufHx0aGlzLmNoaWxkcmVuW25dLmRvbS5wYXJlbnROb2RlIT10aGlzLmNvbnRlbnRET00pKW4rKztyZXR1cm57bm9kZTp0aGlzLmNvbnRlbnRET00sb2Zmc2V0Om49PXRoaXMuY2hpbGRyZW4ubGVuZ3RoP3RoaXMuY29udGVudERPTS5jaGlsZE5vZGVzLmxlbmd0aDpxdCh0aGlzLmNoaWxkcmVuW25dLmRvbSl9fWlmKG49PXRoaXMuY2hpbGRyZW4ubGVuZ3RoKXRocm93IG5ldyBFcnJvcigiSW52YWxpZCBwb3NpdGlvbiAiK3QpO3ZhciByPXRoaXMuY2hpbGRyZW5bbl0sbz1lK3Iuc2l6ZTtpZih0PG8pcmV0dXJuIHIuZG9tRnJvbVBvcyh0LWUtci5ib3JkZXIpO2U9b319LHplLnByb3RvdHlwZS5wYXJzZVJhbmdlPWZ1bmN0aW9uKHQsZSxuKXtpZih2b2lkIDA9PT1uJiYobj0wKSwwPT10aGlzLmNoaWxkcmVuLmxlbmd0aClyZXR1cm57bm9kZTp0aGlzLmNvbnRlbnRET00sZnJvbTp0LHRvOmUsZnJvbU9mZnNldDowLHRvT2Zmc2V0OnRoaXMuY29udGVudERPTS5jaGlsZE5vZGVzLmxlbmd0aH07Zm9yKHZhciByPS0xLG89LTEsaT1uLHM9MDs7cysrKXt2YXIgYT10aGlzLmNoaWxkcmVuW3NdLGM9aSthLnNpemU7aWYoLTE9PXImJnQ8PWMpe3ZhciB1PWkrYS5ib3JkZXI7aWYodD49dSYmZTw9Yy1hLmJvcmRlciYmYS5ub2RlJiZhLmNvbnRlbnRET00mJnRoaXMuY29udGVudERPTS5jb250YWlucyhhLmNvbnRlbnRET00pKXJldHVybiBhLnBhcnNlUmFuZ2UodCxlLHUpO3Q9aTtmb3IodmFyIGw9cztsPjA7bC0tKXt2YXIgaD10aGlzLmNoaWxkcmVuW2wtMV07aWYoaC5zaXplJiZoLmRvbS5wYXJlbnROb2RlPT10aGlzLmNvbnRlbnRET00mJiFoLmVtcHR5Q2hpbGRBdCgxKSl7cj1xdChoLmRvbSkrMTticmVha310LT1oLnNpemV9LTE9PXImJihyPTApfWlmKHI+LTEmJmU8PWMpe2U9Yztmb3IodmFyIGY9cysxO2Y8dGhpcy5jaGlsZHJlbi5sZW5ndGg7ZisrKXt2YXIgcD10aGlzLmNoaWxkcmVuW2ZdO2lmKHAuc2l6ZSYmcC5kb20ucGFyZW50Tm9kZT09dGhpcy5jb250ZW50RE9NJiYhcC5lbXB0eUNoaWxkQXQoLTEpKXtvPXF0KHAuZG9tKTticmVha31lKz1wLnNpemV9LTE9PW8mJihvPXRoaXMuY29udGVudERPTS5jaGlsZE5vZGVzLmxlbmd0aCk7YnJlYWt9aT1jfXJldHVybntub2RlOnRoaXMuY29udGVudERPTSxmcm9tOnQsdG86ZSxmcm9tT2Zmc2V0OnIsdG9PZmZzZXQ6b319LHplLnByb3RvdHlwZS5lbXB0eUNoaWxkQXQ9ZnVuY3Rpb24odCl7aWYodGhpcy5ib3JkZXJ8fCF0aGlzLmNvbnRlbnRET018fCF0aGlzLmNoaWxkcmVuLmxlbmd0aClyZXR1cm4hMTt2YXIgZT10aGlzLmNoaWxkcmVuW3Q8MD8wOnRoaXMuY2hpbGRyZW4ubGVuZ3RoLTFdO3JldHVybiAwPT1lLnNpemV8fGUuZW1wdHlDaGlsZEF0KHQpfSx6ZS5wcm90b3R5cGUuZG9tQWZ0ZXJQb3M9ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5kb21Gcm9tUG9zKHQpLG49ZS5ub2RlLHI9ZS5vZmZzZXQ7aWYoMSE9bi5ub2RlVHlwZXx8cj09bi5jaGlsZE5vZGVzLmxlbmd0aCl0aHJvdyBuZXcgUmFuZ2VFcnJvcigiTm8gbm9kZSBhZnRlciBwb3MgIit0KTtyZXR1cm4gbi5jaGlsZE5vZGVzW3JdfSx6ZS5wcm90b3R5cGUuc2V0U2VsZWN0aW9uPWZ1bmN0aW9uKHQsZSxuLHIpe2Zvcih2YXIgbz1NYXRoLm1pbih0LGUpLGk9TWF0aC5tYXgodCxlKSxzPTAsYT0wO3M8dGhpcy5jaGlsZHJlbi5sZW5ndGg7cysrKXt2YXIgYz10aGlzLmNoaWxkcmVuW3NdLHU9YStjLnNpemU7aWYobz5hJiZpPHUpcmV0dXJuIGMuc2V0U2VsZWN0aW9uKHQtYS1jLmJvcmRlcixlLWEtYy5ib3JkZXIsbixyKTthPXV9dmFyIGw9dGhpcy5kb21Gcm9tUG9zKHQpLGg9dGhpcy5kb21Gcm9tUG9zKGUpLGY9bi5nZXRTZWxlY3Rpb24oKTtpZihyfHwhSHQobC5ub2RlLGwub2Zmc2V0LGYuYW5jaG9yTm9kZSxmLmFuY2hvck9mZnNldCl8fCFIdChoLm5vZGUsaC5vZmZzZXQsZi5mb2N1c05vZGUsZi5mb2N1c09mZnNldCkpe3ZhciBwPSExO2lmKGYuZXh0ZW5kfHx0PT1lKXtmLmNvbGxhcHNlKGwubm9kZSxsLm9mZnNldCk7dHJ5e3QhPWUmJmYuZXh0ZW5kKGgubm9kZSxoLm9mZnNldCkscD0hMH1jYXRjaChtKXtpZighKG0gaW5zdGFuY2VvZiBET01FeGNlcHRpb24pKXRocm93IG19fWlmKCFwKXtpZih0PmUpe3ZhciBkPWw7bD1oLGg9ZH12YXIgdj1kb2N1bWVudC5jcmVhdGVSYW5nZSgpO3Yuc2V0RW5kKGgubm9kZSxoLm9mZnNldCksdi5zZXRTdGFydChsLm5vZGUsbC5vZmZzZXQpLGYucmVtb3ZlQWxsUmFuZ2VzKCksZi5hZGRSYW5nZSh2KX19fSx6ZS5wcm90b3R5cGUuaWdub3JlTXV0YXRpb249ZnVuY3Rpb24odCl7cmV0dXJuIXRoaXMuY29udGVudERPTSYmInNlbGVjdGlvbiIhPXQudHlwZX0sUGUuY29udGVudExvc3QuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY29udGVudERPTSYmdGhpcy5jb250ZW50RE9NIT10aGlzLmRvbSYmIXRoaXMuZG9tLmNvbnRhaW5zKHRoaXMuY29udGVudERPTSl9LHplLnByb3RvdHlwZS5tYXJrRGlydHk9ZnVuY3Rpb24odCxlKXtmb3IodmFyIG49MCxyPTA7cjx0aGlzLmNoaWxkcmVuLmxlbmd0aDtyKyspe3ZhciBvPXRoaXMuY2hpbGRyZW5bcl0saT1uK28uc2l6ZTtpZihuPT1pP3Q8PWkmJmU+PW46dDxpJiZlPm4pe3ZhciBzPW4rby5ib3JkZXIsYT1pLW8uYm9yZGVyO2lmKHQ+PXMmJmU8PWEpcmV0dXJuIHRoaXMuZGlydHk9dD09bnx8ZT09aT9EZTpFZSx2b2lkKHQhPXN8fGUhPWF8fCFvLmNvbnRlbnRMb3N0JiZvLmRvbS5wYXJlbnROb2RlPT10aGlzLmNvbnRlbnRET00/by5tYXJrRGlydHkodC1zLGUtcyk6by5kaXJ0eT1SZSk7by5kaXJ0eT1SZX1uPWl9dGhpcy5kaXJ0eT1EZX0semUucHJvdG90eXBlLm1hcmtQYXJlbnRzRGlydHk9ZnVuY3Rpb24oKXtmb3IodmFyIHQ9MSxlPXRoaXMucGFyZW50O2U7ZT1lLnBhcmVudCx0Kyspe3ZhciBuPTE9PXQ/RGU6RWU7ZS5kaXJ0eTxuJiYoZS5kaXJ0eT1uKX19LE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKHplLnByb3RvdHlwZSxQZSk7dmFyIEllPVtdLEJlPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoZSxuLHIsbyl7dmFyIGkscz1uLnR5cGUudG9ET007aWYoImZ1bmN0aW9uIj09dHlwZW9mIHMmJihzPXMociwoZnVuY3Rpb24oKXtyZXR1cm4gaT9pLnBhcmVudD9pLnBhcmVudC5wb3NCZWZvcmVDaGlsZChpKTp2b2lkIDA6b30pKSksIW4udHlwZS5zcGVjLnJhdyl7aWYoMSE9cy5ub2RlVHlwZSl7dmFyIGE9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgic3BhbiIpO2EuYXBwZW5kQ2hpbGQocykscz1hfXMuY29udGVudEVkaXRhYmxlPSExLHMuY2xhc3NMaXN0LmFkZCgiUHJvc2VNaXJyb3Itd2lkZ2V0Iil9dC5jYWxsKHRoaXMsZSxJZSxzLG51bGwpLHRoaXMud2lkZ2V0PW4saT10aGlzfXQmJihlLl9fcHJvdG9fXz10KSxlLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKHQmJnQucHJvdG90eXBlKSxlLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1lO3ZhciBuPXtiZWZvcmVQb3NpdGlvbjp7Y29uZmlndXJhYmxlOiEwfX07cmV0dXJuIG4uYmVmb3JlUG9zaXRpb24uZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMud2lkZ2V0LnR5cGUuc2lkZTwwfSxlLnByb3RvdHlwZS5tYXRjaGVzV2lkZ2V0PWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLmRpcnR5PT1BZSYmdC50eXBlLmVxKHRoaXMud2lkZ2V0LnR5cGUpfSxlLnByb3RvdHlwZS5wYXJzZVJ1bGU9ZnVuY3Rpb24oKXtyZXR1cm57aWdub3JlOiEwfX0sZS5wcm90b3R5cGUuc3RvcEV2ZW50PWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMud2lkZ2V0LnNwZWMuc3RvcEV2ZW50O3JldHVybiEhZSYmZSh0KX0sZS5wcm90b3R5cGUuaWdub3JlTXV0YXRpb249ZnVuY3Rpb24odCl7cmV0dXJuInNlbGVjdGlvbiIhPXQudHlwZXx8dGhpcy53aWRnZXQuc3BlYy5pZ25vcmVTZWxlY3Rpb259LE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKGUucHJvdG90eXBlLG4pLGV9KHplKSxfZT1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKGUsbixyLG8pe3QuY2FsbCh0aGlzLGUsSWUsbixudWxsKSx0aGlzLnRleHRET009cix0aGlzLnRleHQ9b310JiYoZS5fX3Byb3RvX189dCksZS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZSh0JiZ0LnByb3RvdHlwZSksZS5wcm90b3R5cGUuY29uc3RydWN0b3I9ZTt2YXIgbj17c2l6ZTp7Y29uZmlndXJhYmxlOiEwfX07cmV0dXJuIG4uc2l6ZS5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy50ZXh0Lmxlbmd0aH0sZS5wcm90b3R5cGUubG9jYWxQb3NGcm9tRE9NPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIHQhPXRoaXMudGV4dERPTT90aGlzLnBvc0F0U3RhcnQrKGU/dGhpcy5zaXplOjApOnRoaXMucG9zQXRTdGFydCtlfSxlLnByb3RvdHlwZS5kb21Gcm9tUG9zPWZ1bmN0aW9uKHQpe3JldHVybntub2RlOnRoaXMudGV4dERPTSxvZmZzZXQ6dH19LGUucHJvdG90eXBlLmlnbm9yZU11dGF0aW9uPWZ1bmN0aW9uKHQpe3JldHVybiJjaGFyYWN0ZXJEYXRhIj09PXQudHlwZSYmdC50YXJnZXQubm9kZVZhbHVlPT10Lm9sZFZhbHVlfSxPYmplY3QuZGVmaW5lUHJvcGVydGllcyhlLnByb3RvdHlwZSxuKSxlfSh6ZSksRmU9ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZShlLG4scixvKXt0LmNhbGwodGhpcyxlLFtdLHIsbyksdGhpcy5tYXJrPW59cmV0dXJuIHQmJihlLl9fcHJvdG9fXz10KSxlLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKHQmJnQucHJvdG90eXBlKSxlLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1lLGUuY3JlYXRlPWZ1bmN0aW9uKHQsbixyLG8pe3ZhciBpPW8ubm9kZVZpZXdzW24udHlwZS5uYW1lXSxzPWkmJmkobixvLHIpO3JldHVybiBzJiZzLmRvbXx8KHM9enQucmVuZGVyU3BlYyhkb2N1bWVudCxuLnR5cGUuc3BlYy50b0RPTShuLHIpKSksbmV3IGUodCxuLHMuZG9tLHMuY29udGVudERPTXx8cy5kb20pfSxlLnByb3RvdHlwZS5wYXJzZVJ1bGU9ZnVuY3Rpb24oKXtyZXR1cm57bWFyazp0aGlzLm1hcmsudHlwZS5uYW1lLGF0dHJzOnRoaXMubWFyay5hdHRycyxjb250ZW50RWxlbWVudDp0aGlzLmNvbnRlbnRET019fSxlLnByb3RvdHlwZS5tYXRjaGVzTWFyaz1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5kaXJ0eSE9UmUmJnRoaXMubWFyay5lcSh0KX0sZS5wcm90b3R5cGUubWFya0RpcnR5PWZ1bmN0aW9uKGUsbil7aWYodC5wcm90b3R5cGUubWFya0RpcnR5LmNhbGwodGhpcyxlLG4pLHRoaXMuZGlydHkhPUFlKXt2YXIgcj10aGlzLnBhcmVudDt3aGlsZSghci5ub2RlKXI9ci5wYXJlbnQ7ci5kaXJ0eTx0aGlzLmRpcnR5JiYoci5kaXJ0eT10aGlzLmRpcnR5KSx0aGlzLmRpcnR5PUFlfX0sZS5wcm90b3R5cGUuc2xpY2U9ZnVuY3Rpb24odCxuLHIpe3ZhciBvPWUuY3JlYXRlKHRoaXMucGFyZW50LHRoaXMubWFyaywhMCxyKSxpPXRoaXMuY2hpbGRyZW4scz10aGlzLnNpemU7bjxzJiYoaT1hbihpLG4scyxyKSksdD4wJiYoaT1hbihpLDAsdCxyKSk7Zm9yKHZhciBhPTA7YTxpLmxlbmd0aDthKyspaVthXS5wYXJlbnQ9bztyZXR1cm4gby5jaGlsZHJlbj1pLG99LGV9KHplKSxqZT1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKGUsbixyLG8saSxzLGEsYyx1KXt0LmNhbGwodGhpcyxlLG4uaXNMZWFmP0llOltdLGkscyksdGhpcy5ub2RlRE9NPWEsdGhpcy5ub2RlPW4sdGhpcy5vdXRlckRlY289cix0aGlzLmlubmVyRGVjbz1vLHMmJnRoaXMudXBkYXRlQ2hpbGRyZW4oYyx1KX10JiYoZS5fX3Byb3RvX189dCksZS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZSh0JiZ0LnByb3RvdHlwZSksZS5wcm90b3R5cGUuY29uc3RydWN0b3I9ZTt2YXIgbj17c2l6ZTp7Y29uZmlndXJhYmxlOiEwfSxib3JkZXI6e2NvbmZpZ3VyYWJsZTohMH19O3JldHVybiBlLmNyZWF0ZT1mdW5jdGlvbih0LG4scixvLGkscyl7dmFyIGEsYyx1PWkubm9kZVZpZXdzW24udHlwZS5uYW1lXSxsPXUmJnUobixpLChmdW5jdGlvbigpe3JldHVybiBjP2MucGFyZW50P2MucGFyZW50LnBvc0JlZm9yZUNoaWxkKGMpOnZvaWQgMDpzfSksciksaD1sJiZsLmRvbSxmPWwmJmwuY29udGVudERPTTtpZihuLmlzVGV4dClpZihoKXtpZigzIT1oLm5vZGVUeXBlKXRocm93IG5ldyBSYW5nZUVycm9yKCJUZXh0IG11c3QgYmUgcmVuZGVyZWQgYXMgYSBET00gdGV4dCBub2RlIil9ZWxzZSBoPWRvY3VtZW50LmNyZWF0ZVRleHROb2RlKG4udGV4dCk7ZWxzZSBofHwoYT16dC5yZW5kZXJTcGVjKGRvY3VtZW50LG4udHlwZS5zcGVjLnRvRE9NKG4pKSxoPWEuZG9tLGY9YS5jb250ZW50RE9NKTtmfHxuLmlzVGV4dHx8IkJSIj09aC5ub2RlTmFtZXx8KGguaGFzQXR0cmlidXRlKCJjb250ZW50ZWRpdGFibGUiKXx8KGguY29udGVudEVkaXRhYmxlPSExKSxuLnR5cGUuc3BlYy5kcmFnZ2FibGUmJihoLmRyYWdnYWJsZT0hMCkpO3ZhciBwPWg7cmV0dXJuIGg9WGUoaCxyLG4pLGw/Yz1uZXcgcWUodCxuLHIsbyxoLGYscCxsLGkscysxKTpuLmlzVGV4dD9uZXcgVmUodCxuLHIsbyxoLHAsaSk6bmV3IGUodCxuLHIsbyxoLGYscCxpLHMrMSl9LGUucHJvdG90eXBlLnBhcnNlUnVsZT1mdW5jdGlvbigpe3ZhciB0PXRoaXM7aWYodGhpcy5ub2RlLnR5cGUuc3BlYy5yZXBhcnNlSW5WaWV3KXJldHVybiBudWxsO3ZhciBlPXtub2RlOnRoaXMubm9kZS50eXBlLm5hbWUsYXR0cnM6dGhpcy5ub2RlLmF0dHJzfTtyZXR1cm4gdGhpcy5ub2RlLnR5cGUuc3BlYy5jb2RlJiYoZS5wcmVzZXJ2ZVdoaXRlc3BhY2U9ImZ1bGwiKSx0aGlzLmNvbnRlbnRET00mJiF0aGlzLmNvbnRlbnRMb3N0P2UuY29udGVudEVsZW1lbnQ9dGhpcy5jb250ZW50RE9NOmUuZ2V0Q29udGVudD1mdW5jdGlvbigpe3JldHVybiB0LmNvbnRlbnRET00/Zi5lbXB0eTp0Lm5vZGUuY29udGVudH0sZX0sZS5wcm90b3R5cGUubWF0Y2hlc05vZGU9ZnVuY3Rpb24odCxlLG4pe3JldHVybiB0aGlzLmRpcnR5PT1BZSYmdC5lcSh0aGlzLm5vZGUpJiZZZShlLHRoaXMub3V0ZXJEZWNvKSYmbi5lcSh0aGlzLmlubmVyRGVjbyl9LG4uc2l6ZS5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5ub2RlLm5vZGVTaXplfSxuLmJvcmRlci5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5ub2RlLmlzTGVhZj8wOjF9LGUucHJvdG90eXBlLnVwZGF0ZUNoaWxkcmVuPWZ1bmN0aW9uKHQsZSl7dmFyIG49dGhpcyxyPXRoaXMubm9kZS5pbmxpbmVDb250ZW50LG89ZSxpPXImJnQuY29tcG9zaW5nJiZ0aGlzLmxvY2FsQ29tcG9zaXRpb25Ob2RlKHQsZSkscz1uZXcgUWUodGhpcyxpJiZpLm5vZGUpO25uKHRoaXMubm9kZSx0aGlzLmlubmVyRGVjbywoZnVuY3Rpb24oZSxpLGEpe2Uuc3BlYy5tYXJrcz9zLnN5bmNUb01hcmtzKGUuc3BlYy5tYXJrcyxyLHQpOmUudHlwZS5zaWRlPj0wJiYhYSYmcy5zeW5jVG9NYXJrcyhpPT1uLm5vZGUuY2hpbGRDb3VudD9nLm5vbmU6bi5ub2RlLmNoaWxkKGkpLm1hcmtzLHIsdCkscy5wbGFjZVdpZGdldChlLHQsbyl9KSwoZnVuY3Rpb24oZSxuLGksYSl7cy5zeW5jVG9NYXJrcyhlLm1hcmtzLHIsdCkscy5maW5kTm9kZU1hdGNoKGUsbixpLGEpfHxzLnVwZGF0ZU5leHROb2RlKGUsbixpLHQsYSl8fHMuYWRkTm9kZShlLG4saSx0LG8pLG8rPWUubm9kZVNpemV9KSkscy5zeW5jVG9NYXJrcyhJZSxyLHQpLHRoaXMubm9kZS5pc1RleHRibG9jayYmcy5hZGRUZXh0YmxvY2tIYWNrcygpLHMuZGVzdHJveVJlc3QoKSwocy5jaGFuZ2VkfHx0aGlzLmRpcnR5PT1EZSkmJihpJiZ0aGlzLnByb3RlY3RMb2NhbENvbXBvc2l0aW9uKHQsaSksdGhpcy5yZW5kZXJDaGlsZHJlbigpKX0sZS5wcm90b3R5cGUucmVuZGVyQ2hpbGRyZW49ZnVuY3Rpb24oKXtKZSh0aGlzLmNvbnRlbnRET00sdGhpcy5jaGlsZHJlbiksX3QuaW9zJiZybih0aGlzLmRvbSl9LGUucHJvdG90eXBlLmxvY2FsQ29tcG9zaXRpb25Ob2RlPWZ1bmN0aW9uKHQsZSl7dmFyIG49dC5zdGF0ZS5zZWxlY3Rpb24scj1uLmZyb20sbz1uLnRvO2lmKCEoISh0LnN0YXRlLnNlbGVjdGlvbiBpbnN0YW5jZW9mIGNbIlRleHRTZWxlY3Rpb24iXSl8fHI8ZXx8bz5lK3RoaXMubm9kZS5jb250ZW50LnNpemUpKXt2YXIgaT10LnJvb3QuZ2V0U2VsZWN0aW9uKCkscz1vbihpLmZvY3VzTm9kZSxpLmZvY3VzT2Zmc2V0KTtpZihzJiZ0aGlzLmRvbS5jb250YWlucyhzLnBhcmVudE5vZGUpKXt2YXIgYT1zLm5vZGVWYWx1ZSx1PXNuKHRoaXMubm9kZS5jb250ZW50LGEsci1lLG8tZSk7cmV0dXJuIHU8MD9udWxsOntub2RlOnMscG9zOnUsdGV4dDphfX19fSxlLnByb3RvdHlwZS5wcm90ZWN0TG9jYWxDb21wb3NpdGlvbj1mdW5jdGlvbih0LGUpe3ZhciBuPWUubm9kZSxyPWUucG9zLG89ZS50ZXh0O2lmKCF0aGlzLmdldERlc2Mobikpe2Zvcih2YXIgaT1uOztpPWkucGFyZW50Tm9kZSl7aWYoaS5wYXJlbnROb2RlPT10aGlzLmNvbnRlbnRET00pYnJlYWs7d2hpbGUoaS5wcmV2aW91c1NpYmxpbmcpaS5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKGkucHJldmlvdXNTaWJsaW5nKTt3aGlsZShpLm5leHRTaWJsaW5nKWkucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChpLm5leHRTaWJsaW5nKTtpLnBtVmlld0Rlc2MmJihpLnBtVmlld0Rlc2M9bnVsbCl9dmFyIHM9bmV3IF9lKHRoaXMsaSxuLG8pO3QuY29tcG9zaXRpb25Ob2Rlcy5wdXNoKHMpLHRoaXMuY2hpbGRyZW49YW4odGhpcy5jaGlsZHJlbixyLHIrby5sZW5ndGgsdCxzKX19LGUucHJvdG90eXBlLnVwZGF0ZT1mdW5jdGlvbih0LGUsbixyKXtyZXR1cm4hKHRoaXMuZGlydHk9PVJlfHwhdC5zYW1lTWFya3VwKHRoaXMubm9kZSkpJiYodGhpcy51cGRhdGVJbm5lcih0LGUsbixyKSwhMCl9LGUucHJvdG90eXBlLnVwZGF0ZUlubmVyPWZ1bmN0aW9uKHQsZSxuLHIpe3RoaXMudXBkYXRlT3V0ZXJEZWNvKGUpLHRoaXMubm9kZT10LHRoaXMuaW5uZXJEZWNvPW4sdGhpcy5jb250ZW50RE9NJiZ0aGlzLnVwZGF0ZUNoaWxkcmVuKHIsdGhpcy5wb3NBdFN0YXJ0KSx0aGlzLmRpcnR5PUFlfSxlLnByb3RvdHlwZS51cGRhdGVPdXRlckRlY289ZnVuY3Rpb24odCl7aWYoIVllKHQsdGhpcy5vdXRlckRlY28pKXt2YXIgZT0xIT10aGlzLm5vZGVET00ubm9kZVR5cGUsbj10aGlzLmRvbTt0aGlzLmRvbT1VZSh0aGlzLmRvbSx0aGlzLm5vZGVET00sS2UodGhpcy5vdXRlckRlY28sdGhpcy5ub2RlLGUpLEtlKHQsdGhpcy5ub2RlLGUpKSx0aGlzLmRvbSE9biYmKG4ucG1WaWV3RGVzYz1udWxsLHRoaXMuZG9tLnBtVmlld0Rlc2M9dGhpcyksdGhpcy5vdXRlckRlY289dH19LGUucHJvdG90eXBlLnNlbGVjdE5vZGU9ZnVuY3Rpb24oKXt0aGlzLm5vZGVET00uY2xhc3NMaXN0LmFkZCgiUHJvc2VNaXJyb3Itc2VsZWN0ZWRub2RlIiksIXRoaXMuY29udGVudERPTSYmdGhpcy5ub2RlLnR5cGUuc3BlYy5kcmFnZ2FibGV8fCh0aGlzLmRvbS5kcmFnZ2FibGU9ITApfSxlLnByb3RvdHlwZS5kZXNlbGVjdE5vZGU9ZnVuY3Rpb24oKXt0aGlzLm5vZGVET00uY2xhc3NMaXN0LnJlbW92ZSgiUHJvc2VNaXJyb3Itc2VsZWN0ZWRub2RlIiksIXRoaXMuY29udGVudERPTSYmdGhpcy5ub2RlLnR5cGUuc3BlYy5kcmFnZ2FibGV8fHRoaXMuZG9tLnJlbW92ZUF0dHJpYnV0ZSgiZHJhZ2dhYmxlIil9LE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKGUucHJvdG90eXBlLG4pLGV9KHplKTtmdW5jdGlvbiAkZSh0LGUsbixyLG8pe3JldHVybiBYZShyLGUsdCksbmV3IGplKG51bGwsdCxlLG4scixyLHIsbywwKX12YXIgVmU9ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZShlLG4scixvLGkscyxhKXt0LmNhbGwodGhpcyxlLG4scixvLGksbnVsbCxzLGEpfXJldHVybiB0JiYoZS5fX3Byb3RvX189dCksZS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZSh0JiZ0LnByb3RvdHlwZSksZS5wcm90b3R5cGUuY29uc3RydWN0b3I9ZSxlLnByb3RvdHlwZS5wYXJzZVJ1bGU9ZnVuY3Rpb24oKXtyZXR1cm57c2tpcDp0aGlzLm5vZGVET00ucGFyZW50Tm9kZXx8ITB9fSxlLnByb3RvdHlwZS51cGRhdGU9ZnVuY3Rpb24odCxlKXtyZXR1cm4hKHRoaXMuZGlydHk9PVJlfHx0aGlzLmRpcnR5IT1BZSYmIXRoaXMuaW5QYXJlbnQoKXx8IXQuc2FtZU1hcmt1cCh0aGlzLm5vZGUpKSYmKHRoaXMudXBkYXRlT3V0ZXJEZWNvKGUpLHRoaXMuZGlydHk9PUFlJiZ0LnRleHQ9PXRoaXMubm9kZS50ZXh0fHx0LnRleHQ9PXRoaXMubm9kZURPTS5ub2RlVmFsdWV8fCh0aGlzLm5vZGVET00ubm9kZVZhbHVlPXQudGV4dCksdGhpcy5ub2RlPXQsdGhpcy5kaXJ0eT1BZSwhMCl9LGUucHJvdG90eXBlLmluUGFyZW50PWZ1bmN0aW9uKCl7Zm9yKHZhciB0PXRoaXMucGFyZW50LmNvbnRlbnRET00sZT10aGlzLm5vZGVET007ZTtlPWUucGFyZW50Tm9kZSlpZihlPT10KXJldHVybiEwO3JldHVybiExfSxlLnByb3RvdHlwZS5kb21Gcm9tUG9zPWZ1bmN0aW9uKHQpe3JldHVybntub2RlOnRoaXMubm9kZURPTSxvZmZzZXQ6dH19LGUucHJvdG90eXBlLmxvY2FsUG9zRnJvbURPTT1mdW5jdGlvbihlLG4scil7cmV0dXJuIGU9PXRoaXMubm9kZURPTT90aGlzLnBvc0F0U3RhcnQrTWF0aC5taW4obix0aGlzLm5vZGUudGV4dC5sZW5ndGgpOnQucHJvdG90eXBlLmxvY2FsUG9zRnJvbURPTS5jYWxsKHRoaXMsZSxuLHIpfSxlLnByb3RvdHlwZS5pZ25vcmVNdXRhdGlvbj1mdW5jdGlvbih0KXtyZXR1cm4iY2hhcmFjdGVyRGF0YSIhPXQudHlwZSYmInNlbGVjdGlvbiIhPXQudHlwZX0sZS5wcm90b3R5cGUuc2xpY2U9ZnVuY3Rpb24odCxuLHIpe3ZhciBvPXRoaXMubm9kZS5jdXQodCxuKSxpPWRvY3VtZW50LmNyZWF0ZVRleHROb2RlKG8udGV4dCk7cmV0dXJuIG5ldyBlKHRoaXMucGFyZW50LG8sdGhpcy5vdXRlckRlY28sdGhpcy5pbm5lckRlY28saSxpLHIpfSxlfShqZSksTGU9ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZSgpe3QuYXBwbHkodGhpcyxhcmd1bWVudHMpfXJldHVybiB0JiYoZS5fX3Byb3RvX189dCksZS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZSh0JiZ0LnByb3RvdHlwZSksZS5wcm90b3R5cGUuY29uc3RydWN0b3I9ZSxlLnByb3RvdHlwZS5wYXJzZVJ1bGU9ZnVuY3Rpb24oKXtyZXR1cm57aWdub3JlOiEwfX0sZS5wcm90b3R5cGUubWF0Y2hlc0hhY2s9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5kaXJ0eT09QWV9LGV9KHplKSxxZT1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKGUsbixyLG8saSxzLGEsYyx1LGwpe3QuY2FsbCh0aGlzLGUsbixyLG8saSxzLGEsdSxsKSx0aGlzLnNwZWM9Y31yZXR1cm4gdCYmKGUuX19wcm90b19fPXQpLGUucHJvdG90eXBlPU9iamVjdC5jcmVhdGUodCYmdC5wcm90b3R5cGUpLGUucHJvdG90eXBlLmNvbnN0cnVjdG9yPWUsZS5wcm90b3R5cGUudXBkYXRlPWZ1bmN0aW9uKGUsbixyLG8pe2lmKHRoaXMuZGlydHk9PVJlKXJldHVybiExO2lmKHRoaXMuc3BlYy51cGRhdGUpe3ZhciBpPXRoaXMuc3BlYy51cGRhdGUoZSxuKTtyZXR1cm4gaSYmdGhpcy51cGRhdGVJbm5lcihlLG4scixvKSxpfXJldHVybiEoIXRoaXMuY29udGVudERPTSYmIWUuaXNMZWFmKSYmdC5wcm90b3R5cGUudXBkYXRlLmNhbGwodGhpcyxlLG4scixvKX0sZS5wcm90b3R5cGUuc2VsZWN0Tm9kZT1mdW5jdGlvbigpe3RoaXMuc3BlYy5zZWxlY3ROb2RlP3RoaXMuc3BlYy5zZWxlY3ROb2RlKCk6dC5wcm90b3R5cGUuc2VsZWN0Tm9kZS5jYWxsKHRoaXMpfSxlLnByb3RvdHlwZS5kZXNlbGVjdE5vZGU9ZnVuY3Rpb24oKXt0aGlzLnNwZWMuZGVzZWxlY3ROb2RlP3RoaXMuc3BlYy5kZXNlbGVjdE5vZGUoKTp0LnByb3RvdHlwZS5kZXNlbGVjdE5vZGUuY2FsbCh0aGlzKX0sZS5wcm90b3R5cGUuc2V0U2VsZWN0aW9uPWZ1bmN0aW9uKGUsbixyLG8pe3RoaXMuc3BlYy5zZXRTZWxlY3Rpb24/dGhpcy5zcGVjLnNldFNlbGVjdGlvbihlLG4scik6dC5wcm90b3R5cGUuc2V0U2VsZWN0aW9uLmNhbGwodGhpcyxlLG4scixvKX0sZS5wcm90b3R5cGUuZGVzdHJveT1mdW5jdGlvbigpe3RoaXMuc3BlYy5kZXN0cm95JiZ0aGlzLnNwZWMuZGVzdHJveSgpLHQucHJvdG90eXBlLmRlc3Ryb3kuY2FsbCh0aGlzKX0sZS5wcm90b3R5cGUuc3RvcEV2ZW50PWZ1bmN0aW9uKHQpe3JldHVybiEhdGhpcy5zcGVjLnN0b3BFdmVudCYmdGhpcy5zcGVjLnN0b3BFdmVudCh0KX0sZS5wcm90b3R5cGUuaWdub3JlTXV0YXRpb249ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuc3BlYy5pZ25vcmVNdXRhdGlvbj90aGlzLnNwZWMuaWdub3JlTXV0YXRpb24oZSk6dC5wcm90b3R5cGUuaWdub3JlTXV0YXRpb24uY2FsbCh0aGlzLGUpfSxlfShqZSk7ZnVuY3Rpb24gSmUodCxlKXtmb3IodmFyIG49dC5maXJzdENoaWxkLHI9MDtyPGUubGVuZ3RoO3IrKyl7dmFyIG89ZVtyXSxpPW8uZG9tO2lmKGkucGFyZW50Tm9kZT09dCl7d2hpbGUoaSE9biluPVplKG4pO249bi5uZXh0U2libGluZ31lbHNlIHQuaW5zZXJ0QmVmb3JlKGksbik7aWYobyBpbnN0YW5jZW9mIEZlKXt2YXIgcz1uP24ucHJldmlvdXNTaWJsaW5nOnQubGFzdENoaWxkO0plKG8uY29udGVudERPTSxvLmNoaWxkcmVuKSxuPXM/cy5uZXh0U2libGluZzp0LmZpcnN0Q2hpbGR9fXdoaWxlKG4pbj1aZShuKX1mdW5jdGlvbiBXZSh0KXt0JiYodGhpcy5ub2RlTmFtZT10KX1XZS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShudWxsKTt2YXIgSGU9W25ldyBXZV07ZnVuY3Rpb24gS2UodCxlLG4pe2lmKDA9PXQubGVuZ3RoKXJldHVybiBIZTtmb3IodmFyIHI9bj9IZVswXTpuZXcgV2Usbz1bcl0saT0wO2k8dC5sZW5ndGg7aSsrKXt2YXIgcz10W2ldLnR5cGUuYXR0cnMsYT1yO2lmKHMpZm9yKHZhciBjIGluIHMubm9kZU5hbWUmJm8ucHVzaChhPW5ldyBXZShzLm5vZGVOYW1lKSkscyl7dmFyIHU9c1tjXTtudWxsIT11JiYobiYmMT09by5sZW5ndGgmJm8ucHVzaChhPXI9bmV3IFdlKGUuaXNJbmxpbmU/InNwYW4iOiJkaXYiKSksImNsYXNzIj09Yz9hLmNsYXNzPShhLmNsYXNzP2EuY2xhc3MrIiAiOiIiKSt1OiJzdHlsZSI9PWM/YS5zdHlsZT0oYS5zdHlsZT9hLnN0eWxlKyI7IjoiIikrdToibm9kZU5hbWUiIT1jJiYoYVtjXT11KSl9fXJldHVybiBvfWZ1bmN0aW9uIFVlKHQsZSxuLHIpe2lmKG49PUhlJiZyPT1IZSlyZXR1cm4gZTtmb3IodmFyIG89ZSxpPTA7aTxyLmxlbmd0aDtpKyspe3ZhciBzPXJbaV0sYT1uW2ldO2lmKGkpe3ZhciBjPXZvaWQgMDthJiZhLm5vZGVOYW1lPT1zLm5vZGVOYW1lJiZvIT10JiYoYz1vLnBhcmVudE5vZGUpJiZjLnRhZ05hbWUudG9Mb3dlckNhc2UoKT09cy5ub2RlTmFtZXx8KGM9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChzLm5vZGVOYW1lKSxjLmFwcGVuZENoaWxkKG8pLGE9SGVbMF0pLG89Y31HZShvLGF8fEhlWzBdLHMpfXJldHVybiBvfWZ1bmN0aW9uIEdlKHQsZSxuKXtmb3IodmFyIHIgaW4gZSkiY2xhc3MiPT1yfHwic3R5bGUiPT1yfHwibm9kZU5hbWUiPT1yfHxyIGluIG58fHQucmVtb3ZlQXR0cmlidXRlKHIpO2Zvcih2YXIgbyBpbiBuKSJjbGFzcyIhPW8mJiJzdHlsZSIhPW8mJiJub2RlTmFtZSIhPW8mJm5bb10hPWVbb10mJnQuc2V0QXR0cmlidXRlKG8sbltvXSk7aWYoZS5jbGFzcyE9bi5jbGFzcyl7Zm9yKHZhciBpPWUuY2xhc3M/ZS5jbGFzcy5zcGxpdCgiICIpOkllLHM9bi5jbGFzcz9uLmNsYXNzLnNwbGl0KCIgIik6SWUsYT0wO2E8aS5sZW5ndGg7YSsrKS0xPT1zLmluZGV4T2YoaVthXSkmJnQuY2xhc3NMaXN0LnJlbW92ZShpW2FdKTtmb3IodmFyIGM9MDtjPHMubGVuZ3RoO2MrKyktMT09aS5pbmRleE9mKHNbY10pJiZ0LmNsYXNzTGlzdC5hZGQoc1tjXSl9aWYoZS5zdHlsZSE9bi5zdHlsZSl7aWYoZS5zdHlsZSl7dmFyIHUsbD0vXHMqKFtcd1wtXHhhMS1cdWZmZmZdKylccyo6KD86Iig/OlxcLnxbXiJdKSoifCcoPzpcXC58W14nXSkqJ3xcKC4qP1wpfFteO10pKi9nO3doaWxlKHU9bC5leGVjKGUuc3R5bGUpKXQuc3R5bGUucmVtb3ZlUHJvcGVydHkodVsxXSl9bi5zdHlsZSYmKHQuc3R5bGUuY3NzVGV4dCs9bi5zdHlsZSl9fWZ1bmN0aW9uIFhlKHQsZSxuKXtyZXR1cm4gVWUodCx0LEhlLEtlKGUsbiwxIT10Lm5vZGVUeXBlKSl9ZnVuY3Rpb24gWWUodCxlKXtpZih0Lmxlbmd0aCE9ZS5sZW5ndGgpcmV0dXJuITE7Zm9yKHZhciBuPTA7bjx0Lmxlbmd0aDtuKyspaWYoIXRbbl0udHlwZS5lcShlW25dLnR5cGUpKXJldHVybiExO3JldHVybiEwfWZ1bmN0aW9uIFplKHQpe3ZhciBlPXQubmV4dFNpYmxpbmc7cmV0dXJuIHQucGFyZW50Tm9kZS5yZW1vdmVDaGlsZCh0KSxlfXZhciBRZT1mdW5jdGlvbih0LGUpe3RoaXMudG9wPXQsdGhpcy5sb2NrPWUsdGhpcy5pbmRleD0wLHRoaXMuc3RhY2s9W10sdGhpcy5jaGFuZ2VkPSExO3ZhciBuPXRuKHQubm9kZS5jb250ZW50LHQuY2hpbGRyZW4pO3RoaXMucHJlTWF0Y2hlZD1uLm5vZGVzLHRoaXMucHJlTWF0Y2hPZmZzZXQ9bi5vZmZzZXR9O2Z1bmN0aW9uIHRuKHQsZSl7Zm9yKHZhciBuPVtdLHI9dC5jaGlsZENvdW50LG89ZS5sZW5ndGgtMTtyPjAmJm8+PTA7by0tKXt2YXIgaT1lW29dLHM9aS5ub2RlO2lmKHMpe2lmKHMhPXQuY2hpbGQoci0xKSlicmVhaztuLnB1c2goaSksLS1yfX1yZXR1cm57bm9kZXM6bi5yZXZlcnNlKCksb2Zmc2V0OnJ9fWZ1bmN0aW9uIGVuKHQsZSl7cmV0dXJuIHQudHlwZS5zaWRlLWUudHlwZS5zaWRlfWZ1bmN0aW9uIG5uKHQsZSxuLHIpe3ZhciBvPWUubG9jYWxzKHQpLGk9MDtpZigwIT1vLmxlbmd0aClmb3IodmFyIHM9MCxhPVtdLGM9bnVsbCx1PTA7Oyl7aWYoczxvLmxlbmd0aCYmb1tzXS50bz09aSl7dmFyIGw9b1tzKytdLGg9dm9pZCAwO3doaWxlKHM8by5sZW5ndGgmJm9bc10udG89PWkpKGh8fChoPVtsXSkpLnB1c2gob1tzKytdKTtpZihoKXtoLnNvcnQoZW4pO2Zvcih2YXIgZj0wO2Y8aC5sZW5ndGg7ZisrKW4oaFtmXSx1LCEhYyl9ZWxzZSBuKGwsdSwhIWMpfXZhciBwPXZvaWQgMCxkPXZvaWQgMDtpZihjKWQ9LTEscD1jLGM9bnVsbDtlbHNle2lmKCEodTx0LmNoaWxkQ291bnQpKWJyZWFrO2Q9dSxwPXQuY2hpbGQodSsrKX1mb3IodmFyIHY9MDt2PGEubGVuZ3RoO3YrKylhW3ZdLnRvPD1pJiZhLnNwbGljZSh2LS0sMSk7d2hpbGUoczxvLmxlbmd0aCYmb1tzXS5mcm9tPT1pKWEucHVzaChvW3MrK10pO3ZhciBtPWkrcC5ub2RlU2l6ZTtpZihwLmlzVGV4dCl7dmFyIGc9bTtzPG8ubGVuZ3RoJiZvW3NdLmZyb208ZyYmKGc9b1tzXS5mcm9tKTtmb3IodmFyIHk9MDt5PGEubGVuZ3RoO3krKylhW3ldLnRvPGcmJihnPWFbeV0udG8pO2c8bSYmKGM9cC5jdXQoZy1pKSxwPXAuY3V0KDAsZy1pKSxtPWcsZD0tMSl9cihwLGEubGVuZ3RoP2Euc2xpY2UoKTpJZSxlLmZvckNoaWxkKGkscCksZCksaT1tfWVsc2UgZm9yKHZhciB3PTA7dzx0LmNoaWxkQ291bnQ7dysrKXt2YXIgYj10LmNoaWxkKHcpO3IoYixvLGUuZm9yQ2hpbGQoaSxiKSx3KSxpKz1iLm5vZGVTaXplfX1mdW5jdGlvbiBybih0KXtpZigiVUwiPT10Lm5vZGVOYW1lfHwiT0wiPT10Lm5vZGVOYW1lKXt2YXIgZT10LnN0eWxlLmNzc1RleHQ7dC5zdHlsZS5jc3NUZXh0PWUrIjsgbGlzdC1zdHlsZTogc3F1YXJlICFpbXBvcnRhbnQiLHdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKHQpLmxpc3RTdHlsZSx0LnN0eWxlLmNzc1RleHQ9ZX19ZnVuY3Rpb24gb24odCxlKXtmb3IoOzspe2lmKDM9PXQubm9kZVR5cGUpcmV0dXJuIHQ7aWYoMT09dC5ub2RlVHlwZSYmZT4wKXtpZih0LmNoaWxkTm9kZXMubGVuZ3RoPmUmJjM9PXQuY2hpbGROb2Rlc1tlXS5ub2RlVHlwZSlyZXR1cm4gdC5jaGlsZE5vZGVzW2VdO3Q9dC5jaGlsZE5vZGVzW2UtMV0sZT1HdCh0KX1lbHNle2lmKCEoMT09dC5ub2RlVHlwZSYmZTx0LmNoaWxkTm9kZXMubGVuZ3RoKSlyZXR1cm4gbnVsbDt0PXQuY2hpbGROb2Rlc1tlXSxlPTB9fX1mdW5jdGlvbiBzbih0LGUsbixyKXtmb3IodmFyIG89MCxpPTA7bzx0LmNoaWxkQ291bnQmJmk8PXI7KXt2YXIgcz10LmNoaWxkKG8rKyksYT1pO2lmKGkrPXMubm9kZVNpemUscy5pc1RleHQpe3ZhciBjPXMudGV4dDt3aGlsZShvPHQuY2hpbGRDb3VudCl7dmFyIHU9dC5jaGlsZChvKyspO2lmKGkrPXUubm9kZVNpemUsIXUuaXNUZXh0KWJyZWFrO2MrPXUudGV4dH1pZihpPj1uKXt2YXIgbD1jLmxhc3RJbmRleE9mKGUsci1hKTtpZihsPj0wJiZsK2UubGVuZ3RoK2E+PW4pcmV0dXJuIGErbH19fXJldHVybi0xfWZ1bmN0aW9uIGFuKHQsZSxuLHIsbyl7Zm9yKHZhciBpPVtdLHM9MCxhPTA7czx0Lmxlbmd0aDtzKyspe3ZhciBjPXRbc10sdT1hLGw9YSs9Yy5zaXplO3U+PW58fGw8PWU/aS5wdXNoKGMpOih1PGUmJmkucHVzaChjLnNsaWNlKDAsZS11LHIpKSxvJiYoaS5wdXNoKG8pLG89bnVsbCksbD5uJiZpLnB1c2goYy5zbGljZShuLXUsYy5zaXplLHIpKSl9cmV0dXJuIGl9ZnVuY3Rpb24gY24odCxlKXt2YXIgbj10LnNlbGVjdGlvbixyPW4uJGFuY2hvcixvPW4uJGhlYWQsaT1lPjA/ci5tYXgobyk6ci5taW4obykscz1pLnBhcmVudC5pbmxpbmVDb250ZW50P2kuZGVwdGg/dC5kb2MucmVzb2x2ZShlPjA/aS5hZnRlcigpOmkuYmVmb3JlKCkpOm51bGw6aTtyZXR1cm4gcyYmY1siU2VsZWN0aW9uIl0uZmluZEZyb20ocyxlKX1mdW5jdGlvbiB1bih0LGUpe3JldHVybiB0LmRpc3BhdGNoKHQuc3RhdGUudHIuc2V0U2VsZWN0aW9uKGUpLnNjcm9sbEludG9WaWV3KCkpLCEwfWZ1bmN0aW9uIGxuKHQsZSxuKXt2YXIgcj10LnN0YXRlLnNlbGVjdGlvbjtpZihyIGluc3RhbmNlb2YgY1siVGV4dFNlbGVjdGlvbiJdKXtpZighci5lbXB0eXx8bi5pbmRleE9mKCJzIik+LTEpcmV0dXJuITE7aWYodC5lbmRPZlRleHRibG9jayhlPjA/InJpZ2h0IjoibGVmdCIpKXt2YXIgbz1jbih0LnN0YXRlLGUpO3JldHVybiEhKG8mJm8gaW5zdGFuY2VvZiBjWyJOb2RlU2VsZWN0aW9uIl0pJiZ1bih0LG8pfXZhciBpLHM9ci4kaGVhZCxhPXMudGV4dE9mZnNldD9udWxsOmU8MD9zLm5vZGVCZWZvcmU6cy5ub2RlQWZ0ZXI7aWYoIWF8fGEuaXNUZXh0KXJldHVybiExO3ZhciB1PWU8MD9zLnBvcy1hLm5vZGVTaXplOnMucG9zO3JldHVybiEhKGEuaXNBdG9tfHwoaT10LmRvY1ZpZXcuZGVzY0F0KHUpKSYmIWkuY29udGVudERPTSkmJihjWyJOb2RlU2VsZWN0aW9uIl0uaXNTZWxlY3RhYmxlKGEpP3VuKHQsbmV3IGNbIk5vZGVTZWxlY3Rpb24iXShlPDA/dC5zdGF0ZS5kb2MucmVzb2x2ZShzLnBvcy1hLm5vZGVTaXplKTpzKSk6ISFfdC53ZWJraXQmJnVuKHQsbmV3IGNbIlRleHRTZWxlY3Rpb24iXSh0LnN0YXRlLmRvYy5yZXNvbHZlKGU8MD91OnUrYS5ub2RlU2l6ZSkpKSl9aWYociBpbnN0YW5jZW9mIGNbIk5vZGVTZWxlY3Rpb24iXSYmci5ub2RlLmlzSW5saW5lKXJldHVybiB1bih0LG5ldyBjWyJUZXh0U2VsZWN0aW9uIl0oZT4wP3IuJHRvOnIuJGZyb20pKTt2YXIgbD1jbih0LnN0YXRlLGUpO3JldHVybiEhbCYmdW4odCxsKX1mdW5jdGlvbiBobih0KXtyZXR1cm4gMz09dC5ub2RlVHlwZT90Lm5vZGVWYWx1ZS5sZW5ndGg6dC5jaGlsZE5vZGVzLmxlbmd0aH1mdW5jdGlvbiBmbih0KXt2YXIgZT10LnBtVmlld0Rlc2M7cmV0dXJuIGUmJjA9PWUuc2l6ZSYmKHQubmV4dFNpYmxpbmd8fCJCUiIhPXQubm9kZU5hbWUpfWZ1bmN0aW9uIHBuKHQpe3ZhciBlPXQucm9vdC5nZXRTZWxlY3Rpb24oKSxuPWUuZm9jdXNOb2RlLHI9ZS5mb2N1c09mZnNldDtpZihuKXt2YXIgbyxpLHM9ITE7Zm9yKF90LmdlY2tvJiYxPT1uLm5vZGVUeXBlJiZyPGhuKG4pJiZmbihuLmNoaWxkTm9kZXNbcl0pJiYocz0hMCk7OylpZihyPjApe2lmKDEhPW4ubm9kZVR5cGUpYnJlYWs7dmFyIGE9bi5jaGlsZE5vZGVzW3ItMV07aWYoZm4oYSkpbz1uLGk9LS1yO2Vsc2V7aWYoMyE9YS5ub2RlVHlwZSlicmVhaztuPWEscj1uLm5vZGVWYWx1ZS5sZW5ndGh9fWVsc2V7aWYodm4obikpYnJlYWs7dmFyIGM9bi5wcmV2aW91c1NpYmxpbmc7d2hpbGUoYyYmZm4oYykpbz1uLnBhcmVudE5vZGUsaT1xdChjKSxjPWMucHJldmlvdXNTaWJsaW5nO2lmKGMpbj1jLHI9aG4obik7ZWxzZXtpZihuPW4ucGFyZW50Tm9kZSxuPT10LmRvbSlicmVhaztyPTB9fXM/bW4odCxlLG4scik6byYmbW4odCxlLG8saSl9fWZ1bmN0aW9uIGRuKHQpe3ZhciBlPXQucm9vdC5nZXRTZWxlY3Rpb24oKSxuPWUuZm9jdXNOb2RlLHI9ZS5mb2N1c09mZnNldDtpZihuKXtmb3IodmFyIG8saSxzPWhuKG4pOzspaWYocjxzKXtpZigxIT1uLm5vZGVUeXBlKWJyZWFrO3ZhciBhPW4uY2hpbGROb2Rlc1tyXTtpZighZm4oYSkpYnJlYWs7bz1uLGk9KytyfWVsc2V7aWYodm4obikpYnJlYWs7dmFyIGM9bi5uZXh0U2libGluZzt3aGlsZShjJiZmbihjKSlvPWMucGFyZW50Tm9kZSxpPXF0KGMpKzEsYz1jLm5leHRTaWJsaW5nO2lmKGMpbj1jLHI9MCxzPWhuKG4pO2Vsc2V7aWYobj1uLnBhcmVudE5vZGUsbj09dC5kb20pYnJlYWs7cj1zPTB9fW8mJm1uKHQsZSxvLGkpfX1mdW5jdGlvbiB2bih0KXt2YXIgZT10LnBtVmlld0Rlc2M7cmV0dXJuIGUmJmUubm9kZSYmZS5ub2RlLmlzQmxvY2t9ZnVuY3Rpb24gbW4odCxlLG4scil7aWYoWnQoZSkpe3ZhciBvPWRvY3VtZW50LmNyZWF0ZVJhbmdlKCk7by5zZXRFbmQobixyKSxvLnNldFN0YXJ0KG4sciksZS5yZW1vdmVBbGxSYW5nZXMoKSxlLmFkZFJhbmdlKG8pfWVsc2UgZS5leHRlbmQmJmUuZXh0ZW5kKG4scik7dC5kb21PYnNlcnZlci5zZXRDdXJTZWxlY3Rpb24oKX1mdW5jdGlvbiBnbih0LGUsbil7dmFyIHI9dC5zdGF0ZS5zZWxlY3Rpb247aWYociBpbnN0YW5jZW9mIGNbIlRleHRTZWxlY3Rpb24iXSYmIXIuZW1wdHl8fG4uaW5kZXhPZigicyIpPi0xKXJldHVybiExO3ZhciBvPXIuJGZyb20saT1yLiR0bztpZighby5wYXJlbnQuaW5saW5lQ29udGVudHx8dC5lbmRPZlRleHRibG9jayhlPDA/InVwIjoiZG93biIpKXt2YXIgcz1jbih0LnN0YXRlLGUpO2lmKHMmJnMgaW5zdGFuY2VvZiBjWyJOb2RlU2VsZWN0aW9uIl0pcmV0dXJuIHVuKHQscyl9aWYoIW8ucGFyZW50LmlubGluZUNvbnRlbnQpe3ZhciBhPWNbIlNlbGVjdGlvbiJdLmZpbmRGcm9tKGU8MD9vOmksZSk7cmV0dXJuIWF8fHVuKHQsYSl9cmV0dXJuITF9ZnVuY3Rpb24geW4odCxlKXtpZighKHQuc3RhdGUuc2VsZWN0aW9uIGluc3RhbmNlb2YgY1siVGV4dFNlbGVjdGlvbiJdKSlyZXR1cm4hMDt2YXIgbj10LnN0YXRlLnNlbGVjdGlvbixyPW4uJGhlYWQsbz1uLiRhbmNob3IsaT1uLmVtcHR5O2lmKCFyLnNhbWVQYXJlbnQobykpcmV0dXJuITA7aWYoIWkpcmV0dXJuITE7aWYodC5lbmRPZlRleHRibG9jayhlPjA/ImZvcndhcmQiOiJiYWNrd2FyZCIpKXJldHVybiEwO3ZhciBzPSFyLnRleHRPZmZzZXQmJihlPDA/ci5ub2RlQmVmb3JlOnIubm9kZUFmdGVyKTtpZihzJiYhcy5pc1RleHQpe3ZhciBhPXQuc3RhdGUudHI7cmV0dXJuIGU8MD9hLmRlbGV0ZShyLnBvcy1zLm5vZGVTaXplLHIucG9zKTphLmRlbGV0ZShyLnBvcyxyLnBvcytzLm5vZGVTaXplKSx0LmRpc3BhdGNoKGEpLCEwfXJldHVybiExfWZ1bmN0aW9uIHduKHQsZSxuKXt0LmRvbU9ic2VydmVyLnN0b3AoKSxlLmNvbnRlbnRFZGl0YWJsZT1uLHQuZG9tT2JzZXJ2ZXIuc3RhcnQoKX1mdW5jdGlvbiBibih0KXtpZihfdC5jaHJvbWUmJiEodC5zdGF0ZS5zZWxlY3Rpb24uJGhlYWQucGFyZW50T2Zmc2V0PjApKXt2YXIgZT10LnJvb3QuZ2V0U2VsZWN0aW9uKCksbj1lLmZvY3VzTm9kZSxyPWUuZm9jdXNPZmZzZXQ7aWYobiYmMT09bi5ub2RlVHlwZSYmMD09ciYmbi5maXJzdENoaWxkJiYiZmFsc2UiPT1uLmZpcnN0Q2hpbGQuY29udGVudEVkaXRhYmxlKXt2YXIgbz1uLmZpcnN0Q2hpbGQ7d24odCxvLCEwKSxzZXRUaW1lb3V0KChmdW5jdGlvbigpe3JldHVybiB3bih0LG8sITEpfSksMjApfX19ZnVuY3Rpb24geG4odCl7dmFyIGU9IiI7cmV0dXJuIHQuY3RybEtleSYmKGUrPSJjIiksdC5tZXRhS2V5JiYoZSs9Im0iKSx0LmFsdEtleSYmKGUrPSJhIiksdC5zaGlmdEtleSYmKGUrPSJzIiksZX1mdW5jdGlvbiBrbih0LGUpe3ZhciBuPWUua2V5Q29kZSxyPXhuKGUpO3JldHVybiA4PT1ufHxfdC5tYWMmJjcyPT1uJiYiYyI9PXI/eW4odCwtMSl8fHBuKHQpOjQ2PT1ufHxfdC5tYWMmJjY4PT1uJiYiYyI9PXI/eW4odCwxKXx8ZG4odCk6MTM9PW58fDI3PT1ufHwoMzc9PW4/bG4odCwtMSxyKXx8cG4odCk6Mzk9PW4/bG4odCwxLHIpfHxkbih0KTozOD09bj9nbih0LC0xLHIpfHxwbih0KTo0MD09bj9ibih0KXx8Z24odCwxLHIpfHxkbih0KTpyPT0oX3QubWFjPyJtIjoiYyIpJiYoNjY9PW58fDczPT1ufHw4OT09bnx8OTA9PW4pKX1mdW5jdGlvbiBTbih0LGUpe3ZhciBuLHIsbz10LnJvb3QuZ2V0U2VsZWN0aW9uKCksaT10LnN0YXRlLmRvYyxzPXQuZG9jVmlldy5uZWFyZXN0RGVzYyhvLmZvY3VzTm9kZSksYT1zJiYwPT1zLnNpemUsdT10LmRvY1ZpZXcucG9zRnJvbURPTShvLmZvY3VzTm9kZSxvLmZvY3VzT2Zmc2V0KSxsPWkucmVzb2x2ZSh1KTtpZihadChvKSl7bj1sO3doaWxlKHMmJiFzLm5vZGUpcz1zLnBhcmVudDtpZihzJiZzLm5vZGUuaXNBdG9tJiZjWyJOb2RlU2VsZWN0aW9uIl0uaXNTZWxlY3RhYmxlKHMubm9kZSkmJnMucGFyZW50JiYoIXMubm9kZS5pc0lubGluZXx8IVh0KG8uZm9jdXNOb2RlLG8uZm9jdXNPZmZzZXQscy5kb20pKSl7dmFyIGg9cy5wb3NCZWZvcmU7cj1uZXcgY1siTm9kZVNlbGVjdGlvbiJdKHU9PWg/bDppLnJlc29sdmUoaCkpfX1lbHNlIG49aS5yZXNvbHZlKHQuZG9jVmlldy5wb3NGcm9tRE9NKG8uYW5jaG9yTm9kZSxvLmFuY2hvck9mZnNldCkpO2lmKCFyKXt2YXIgZj0icG9pbnRlciI9PWV8fHQuc3RhdGUuc2VsZWN0aW9uLmhlYWQ8bC5wb3MmJiFhPzE6LTE7cj16bih0LG4sbCxmKX1yZXR1cm4gcn1mdW5jdGlvbiBDbih0LGUpe3ZhciBuPXQuc3RhdGUuc2VsZWN0aW9uO2lmKERuKHQsbiksdC5lZGl0YWJsZT90Lmhhc0ZvY3VzKCk6SW4odCkmJmRvY3VtZW50LmFjdGl2ZUVsZW1lbnQuY29udGFpbnModC5kb20pKXtpZih0LmRvbU9ic2VydmVyLmRpc2Nvbm5lY3RTZWxlY3Rpb24oKSx0LmN1cnNvcldyYXBwZXIpRW4odCk7ZWxzZXt2YXIgcixvLGk9bi5hbmNob3Iscz1uLmhlYWQ7IU9ufHxuIGluc3RhbmNlb2YgY1siVGV4dFNlbGVjdGlvbiJdfHwobi4kZnJvbS5wYXJlbnQuaW5saW5lQ29udGVudHx8KHI9TW4odCxuLmZyb20pKSxuLmVtcHR5fHxuLiRmcm9tLnBhcmVudC5pbmxpbmVDb250ZW50fHwobz1Nbih0LG4udG8pKSksdC5kb2NWaWV3LnNldFNlbGVjdGlvbihpLHMsdC5yb290LGUpLE9uJiYociYmVG4ociksbyYmVG4obykpLG4udmlzaWJsZT90LmRvbS5jbGFzc0xpc3QucmVtb3ZlKCJQcm9zZU1pcnJvci1oaWRlc2VsZWN0aW9uIik6KHQuZG9tLmNsYXNzTGlzdC5hZGQoIlByb3NlTWlycm9yLWhpZGVzZWxlY3Rpb24iKSwib25zZWxlY3Rpb25jaGFuZ2UiaW4gZG9jdW1lbnQmJkFuKHQpKX10LmRvbU9ic2VydmVyLnNldEN1clNlbGVjdGlvbigpLHQuZG9tT2JzZXJ2ZXIuY29ubmVjdFNlbGVjdGlvbigpfX1RZS5wcm90b3R5cGUuZ2V0UHJlTWF0Y2g9ZnVuY3Rpb24odCl7cmV0dXJuIHQ+PXRoaXMucHJlTWF0Y2hPZmZzZXQ/dGhpcy5wcmVNYXRjaGVkW3QtdGhpcy5wcmVNYXRjaE9mZnNldF06bnVsbH0sUWUucHJvdG90eXBlLmRlc3Ryb3lCZXR3ZWVuPWZ1bmN0aW9uKHQsZSl7aWYodCE9ZSl7Zm9yKHZhciBuPXQ7bjxlO24rKyl0aGlzLnRvcC5jaGlsZHJlbltuXS5kZXN0cm95KCk7dGhpcy50b3AuY2hpbGRyZW4uc3BsaWNlKHQsZS10KSx0aGlzLmNoYW5nZWQ9ITB9fSxRZS5wcm90b3R5cGUuZGVzdHJveVJlc3Q9ZnVuY3Rpb24oKXt0aGlzLmRlc3Ryb3lCZXR3ZWVuKHRoaXMuaW5kZXgsdGhpcy50b3AuY2hpbGRyZW4ubGVuZ3RoKX0sUWUucHJvdG90eXBlLnN5bmNUb01hcmtzPWZ1bmN0aW9uKHQsZSxuKXt2YXIgcj0wLG89dGhpcy5zdGFjay5sZW5ndGg+PjEsaT1NYXRoLm1pbihvLHQubGVuZ3RoKTt3aGlsZShyPGkmJihyPT1vLTE/dGhpcy50b3A6dGhpcy5zdGFja1tyKzE8PDFdKS5tYXRjaGVzTWFyayh0W3JdKSYmITEhPT10W3JdLnR5cGUuc3BlYy5zcGFubmluZylyKys7d2hpbGUocjxvKXRoaXMuZGVzdHJveVJlc3QoKSx0aGlzLnRvcC5kaXJ0eT1BZSx0aGlzLmluZGV4PXRoaXMuc3RhY2sucG9wKCksdGhpcy50b3A9dGhpcy5zdGFjay5wb3AoKSxvLS07d2hpbGUobzx0Lmxlbmd0aCl7dGhpcy5zdGFjay5wdXNoKHRoaXMudG9wLHRoaXMuaW5kZXgrMSk7Zm9yKHZhciBzPS0xLGE9dGhpcy5pbmRleDthPE1hdGgubWluKHRoaXMuaW5kZXgrMyx0aGlzLnRvcC5jaGlsZHJlbi5sZW5ndGgpO2ErKylpZih0aGlzLnRvcC5jaGlsZHJlblthXS5tYXRjaGVzTWFyayh0W29dKSl7cz1hO2JyZWFrfWlmKHM+LTEpcz50aGlzLmluZGV4JiYodGhpcy5jaGFuZ2VkPSEwLHRoaXMuZGVzdHJveUJldHdlZW4odGhpcy5pbmRleCxzKSksdGhpcy50b3A9dGhpcy50b3AuY2hpbGRyZW5bdGhpcy5pbmRleF07ZWxzZXt2YXIgYz1GZS5jcmVhdGUodGhpcy50b3AsdFtvXSxlLG4pO3RoaXMudG9wLmNoaWxkcmVuLnNwbGljZSh0aGlzLmluZGV4LDAsYyksdGhpcy50b3A9Yyx0aGlzLmNoYW5nZWQ9ITB9dGhpcy5pbmRleD0wLG8rK319LFFlLnByb3RvdHlwZS5maW5kTm9kZU1hdGNoPWZ1bmN0aW9uKHQsZSxuLHIpe3ZhciBvPS0xLGk9cjwwP3ZvaWQgMDp0aGlzLmdldFByZU1hdGNoKHIpLHM9dGhpcy50b3AuY2hpbGRyZW47aWYoaSYmaS5tYXRjaGVzTm9kZSh0LGUsbikpbz1zLmluZGV4T2YoaSk7ZWxzZSBmb3IodmFyIGE9dGhpcy5pbmRleCxjPU1hdGgubWluKHMubGVuZ3RoLGErNSk7YTxjO2ErKyl7dmFyIHU9c1thXTtpZih1Lm1hdGNoZXNOb2RlKHQsZSxuKSYmdGhpcy5wcmVNYXRjaGVkLmluZGV4T2YodSk8MCl7bz1hO2JyZWFrfX1yZXR1cm4hKG88MCkmJih0aGlzLmRlc3Ryb3lCZXR3ZWVuKHRoaXMuaW5kZXgsbyksdGhpcy5pbmRleCsrLCEwKX0sUWUucHJvdG90eXBlLnVwZGF0ZU5leHROb2RlPWZ1bmN0aW9uKHQsZSxuLHIsbyl7Zm9yKHZhciBpPXRoaXMuaW5kZXg7aTx0aGlzLnRvcC5jaGlsZHJlbi5sZW5ndGg7aSsrKXt2YXIgcz10aGlzLnRvcC5jaGlsZHJlbltpXTtpZihzIGluc3RhbmNlb2YgamUpe3ZhciBhPXRoaXMucHJlTWF0Y2hlZC5pbmRleE9mKHMpO2lmKGE+LTEmJmErdGhpcy5wcmVNYXRjaE9mZnNldCE9bylyZXR1cm4hMTt2YXIgYz1zLmRvbSx1PXRoaXMubG9jayYmKGM9PXRoaXMubG9ja3x8MT09Yy5ub2RlVHlwZSYmYy5jb250YWlucyh0aGlzLmxvY2sucGFyZW50Tm9kZSkpJiYhKHQuaXNUZXh0JiZzLm5vZGUmJnMubm9kZS5pc1RleHQmJnMubm9kZURPTS5ub2RlVmFsdWU9PXQudGV4dCYmcy5kaXJ0eSE9UmUmJlllKGUscy5vdXRlckRlY28pKTtpZighdSYmcy51cGRhdGUodCxlLG4scikpcmV0dXJuIHRoaXMuZGVzdHJveUJldHdlZW4odGhpcy5pbmRleCxpKSxzLmRvbSE9YyYmKHRoaXMuY2hhbmdlZD0hMCksdGhpcy5pbmRleCsrLCEwO2JyZWFrfX1yZXR1cm4hMX0sUWUucHJvdG90eXBlLmFkZE5vZGU9ZnVuY3Rpb24odCxlLG4scixvKXt0aGlzLnRvcC5jaGlsZHJlbi5zcGxpY2UodGhpcy5pbmRleCsrLDAsamUuY3JlYXRlKHRoaXMudG9wLHQsZSxuLHIsbykpLHRoaXMuY2hhbmdlZD0hMH0sUWUucHJvdG90eXBlLnBsYWNlV2lkZ2V0PWZ1bmN0aW9uKHQsZSxuKXtpZih0aGlzLmluZGV4PHRoaXMudG9wLmNoaWxkcmVuLmxlbmd0aCYmdGhpcy50b3AuY2hpbGRyZW5bdGhpcy5pbmRleF0ubWF0Y2hlc1dpZGdldCh0KSl0aGlzLmluZGV4Kys7ZWxzZXt2YXIgcj1uZXcgQmUodGhpcy50b3AsdCxlLG4pO3RoaXMudG9wLmNoaWxkcmVuLnNwbGljZSh0aGlzLmluZGV4KyssMCxyKSx0aGlzLmNoYW5nZWQ9ITB9fSxRZS5wcm90b3R5cGUuYWRkVGV4dGJsb2NrSGFja3M9ZnVuY3Rpb24oKXt2YXIgdD10aGlzLnRvcC5jaGlsZHJlblt0aGlzLmluZGV4LTFdO3doaWxlKHQgaW5zdGFuY2VvZiBGZSl0PXQuY2hpbGRyZW5bdC5jaGlsZHJlbi5sZW5ndGgtMV07aWYoIXR8fCEodCBpbnN0YW5jZW9mIFZlKXx8L1xuJC8udGVzdCh0Lm5vZGUudGV4dCkpaWYodGhpcy5pbmRleDx0aGlzLnRvcC5jaGlsZHJlbi5sZW5ndGgmJnRoaXMudG9wLmNoaWxkcmVuW3RoaXMuaW5kZXhdLm1hdGNoZXNIYWNrKCkpdGhpcy5pbmRleCsrO2Vsc2V7dmFyIGU9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiYnIiKTt0aGlzLnRvcC5jaGlsZHJlbi5zcGxpY2UodGhpcy5pbmRleCsrLDAsbmV3IExlKHRoaXMudG9wLEllLGUsbnVsbCkpLHRoaXMuY2hhbmdlZD0hMH19O3ZhciBPbj1fdC5zYWZhcml8fF90LmNocm9tZSYmX3QuY2hyb21lX3ZlcnNpb248NjM7ZnVuY3Rpb24gTW4odCxlKXt2YXIgbj10LmRvY1ZpZXcuZG9tRnJvbVBvcyhlKSxyPW4ubm9kZSxvPW4ub2Zmc2V0LGk9bzxyLmNoaWxkTm9kZXMubGVuZ3RoP3IuY2hpbGROb2Rlc1tvXTpudWxsLHM9bz9yLmNoaWxkTm9kZXNbby0xXTpudWxsO2lmKF90LnNhZmFyaSYmaSYmImZhbHNlIj09aS5jb250ZW50RWRpdGFibGUpcmV0dXJuIE5uKGkpO2lmKCghaXx8ImZhbHNlIj09aS5jb250ZW50RWRpdGFibGUpJiYoIXN8fCJmYWxzZSI9PXMuY29udGVudEVkaXRhYmxlKSl7aWYoaSlyZXR1cm4gTm4oaSk7aWYocylyZXR1cm4gTm4ocyl9fWZ1bmN0aW9uIE5uKHQpe3JldHVybiB0LmNvbnRlbnRFZGl0YWJsZT0idHJ1ZSIsX3Quc2FmYXJpJiZ0LmRyYWdnYWJsZSYmKHQuZHJhZ2dhYmxlPSExLHQud2FzRHJhZ2dhYmxlPSEwKSx0fWZ1bmN0aW9uIFRuKHQpe3QuY29udGVudEVkaXRhYmxlPSJmYWxzZSIsdC53YXNEcmFnZ2FibGUmJih0LmRyYWdnYWJsZT0hMCx0Lndhc0RyYWdnYWJsZT1udWxsKX1mdW5jdGlvbiBBbih0KXt2YXIgZT10LmRvbS5vd25lckRvY3VtZW50O2UucmVtb3ZlRXZlbnRMaXN0ZW5lcigic2VsZWN0aW9uY2hhbmdlIix0LmhpZGVTZWxlY3Rpb25HdWFyZCk7dmFyIG49dC5yb290LmdldFNlbGVjdGlvbigpLHI9bi5hbmNob3JOb2RlLG89bi5hbmNob3JPZmZzZXQ7ZS5hZGRFdmVudExpc3RlbmVyKCJzZWxlY3Rpb25jaGFuZ2UiLHQuaGlkZVNlbGVjdGlvbkd1YXJkPWZ1bmN0aW9uKCl7bi5hbmNob3JOb2RlPT1yJiZuLmFuY2hvck9mZnNldD09b3x8KGUucmVtb3ZlRXZlbnRMaXN0ZW5lcigic2VsZWN0aW9uY2hhbmdlIix0LmhpZGVTZWxlY3Rpb25HdWFyZCksdC5kb20uY2xhc3NMaXN0LnJlbW92ZSgiUHJvc2VNaXJyb3ItaGlkZXNlbGVjdGlvbiIpKX0pfWZ1bmN0aW9uIEVuKHQpe3ZhciBlPXQucm9vdC5nZXRTZWxlY3Rpb24oKSxuPWRvY3VtZW50LmNyZWF0ZVJhbmdlKCkscj10LmN1cnNvcldyYXBwZXIuZG9tLG89IklNRyI9PXIubm9kZU5hbWU7bz9uLnNldEVuZChyLnBhcmVudE5vZGUscXQocikrMSk6bi5zZXRFbmQociwwKSxuLmNvbGxhcHNlKCExKSxlLnJlbW92ZUFsbFJhbmdlcygpLGUuYWRkUmFuZ2UobiksIW8mJiF0LnN0YXRlLnNlbGVjdGlvbi52aXNpYmxlJiZfdC5pZSYmX3QuaWVfdmVyc2lvbjw9MTEmJihyLmRpc2FibGVkPSEwLHIuZGlzYWJsZWQ9ITEpfWZ1bmN0aW9uIERuKHQsZSl7aWYoZSBpbnN0YW5jZW9mIGNbIk5vZGVTZWxlY3Rpb24iXSl7dmFyIG49dC5kb2NWaWV3LmRlc2NBdChlLmZyb20pO24hPXQubGFzdFNlbGVjdGVkVmlld0Rlc2MmJihSbih0KSxuJiZuLnNlbGVjdE5vZGUoKSx0Lmxhc3RTZWxlY3RlZFZpZXdEZXNjPW4pfWVsc2UgUm4odCl9ZnVuY3Rpb24gUm4odCl7dC5sYXN0U2VsZWN0ZWRWaWV3RGVzYyYmKHQubGFzdFNlbGVjdGVkVmlld0Rlc2MucGFyZW50JiZ0Lmxhc3RTZWxlY3RlZFZpZXdEZXNjLmRlc2VsZWN0Tm9kZSgpLHQubGFzdFNlbGVjdGVkVmlld0Rlc2M9bnVsbCl9ZnVuY3Rpb24gem4odCxlLG4scil7cmV0dXJuIHQuc29tZVByb3AoImNyZWF0ZVNlbGVjdGlvbkJldHdlZW4iLChmdW5jdGlvbihyKXtyZXR1cm4gcih0LGUsbil9KSl8fGNbIlRleHRTZWxlY3Rpb24iXS5iZXR3ZWVuKGUsbixyKX1mdW5jdGlvbiBQbih0KXtyZXR1cm4oIXQuZWRpdGFibGV8fHQucm9vdC5hY3RpdmVFbGVtZW50PT10LmRvbSkmJkluKHQpfWZ1bmN0aW9uIEluKHQpe3ZhciBlPXQucm9vdC5nZXRTZWxlY3Rpb24oKTtpZighZS5hbmNob3JOb2RlKXJldHVybiExO3RyeXtyZXR1cm4gdC5kb20uY29udGFpbnMoMz09ZS5hbmNob3JOb2RlLm5vZGVUeXBlP2UuYW5jaG9yTm9kZS5wYXJlbnROb2RlOmUuYW5jaG9yTm9kZSkmJih0LmVkaXRhYmxlfHx0LmRvbS5jb250YWlucygzPT1lLmZvY3VzTm9kZS5ub2RlVHlwZT9lLmZvY3VzTm9kZS5wYXJlbnROb2RlOmUuZm9jdXNOb2RlKSl9Y2F0Y2gobil7cmV0dXJuITF9fWZ1bmN0aW9uIEJuKHQpe3ZhciBlPXQuZG9jVmlldy5kb21Gcm9tUG9zKHQuc3RhdGUuc2VsZWN0aW9uLmFuY2hvciksbj10LnJvb3QuZ2V0U2VsZWN0aW9uKCk7cmV0dXJuIEh0KGUubm9kZSxlLm9mZnNldCxuLmFuY2hvck5vZGUsbi5hbmNob3JPZmZzZXQpfWZ1bmN0aW9uIF9uKHQsZSxuKXt2YXIgcj10LmRvY1ZpZXcucGFyc2VSYW5nZShlLG4pLG89ci5ub2RlLGk9ci5mcm9tT2Zmc2V0LHM9ci50b09mZnNldCxhPXIuZnJvbSxjPXIudG8sdT10LnJvb3QuZ2V0U2VsZWN0aW9uKCksbD1udWxsLGg9dS5hbmNob3JOb2RlO2lmKGgmJnQuZG9tLmNvbnRhaW5zKDE9PWgubm9kZVR5cGU/aDpoLnBhcmVudE5vZGUpJiYobD1be25vZGU6aCxvZmZzZXQ6dS5hbmNob3JPZmZzZXR9XSxadCh1KXx8bC5wdXNoKHtub2RlOnUuZm9jdXNOb2RlLG9mZnNldDp1LmZvY3VzT2Zmc2V0fSkpLF90LmNocm9tZSYmOD09PXQubGFzdEtleUNvZGUpZm9yKHZhciBmPXM7Zj5pO2YtLSl7dmFyIHA9by5jaGlsZE5vZGVzW2YtMV0sZD1wLnBtVmlld0Rlc2M7aWYoIkJSIj09cC5ub2RlVHlwZSYmIWQpe3M9ZjticmVha31pZighZHx8ZC5zaXplKWJyZWFrfXZhciB2PXQuc3RhdGUuZG9jLG09dC5zb21lUHJvcCgiZG9tUGFyc2VyIil8fGd0LmZyb21TY2hlbWEodC5zdGF0ZS5zY2hlbWEpLGc9di5yZXNvbHZlKGEpLHk9bnVsbCx3PW0ucGFyc2Uobyx7dG9wTm9kZTpnLnBhcmVudCx0b3BNYXRjaDpnLnBhcmVudC5jb250ZW50TWF0Y2hBdChnLmluZGV4KCkpLHRvcE9wZW46ITAsZnJvbTppLHRvOnMscHJlc2VydmVXaGl0ZXNwYWNlOiFnLnBhcmVudC50eXBlLnNwZWMuY29kZXx8ImZ1bGwiLGVkaXRhYmxlQ29udGVudDohMCxmaW5kUG9zaXRpb25zOmwscnVsZUZyb21Ob2RlOkZuLGNvbnRleHQ6Z30pO2lmKGwmJm51bGwhPWxbMF0ucG9zKXt2YXIgYj1sWzBdLnBvcyx4PWxbMV0mJmxbMV0ucG9zO251bGw9PXgmJih4PWIpLHk9e2FuY2hvcjpiK2EsaGVhZDp4K2F9fXJldHVybntkb2M6dyxzZWw6eSxmcm9tOmEsdG86Y319ZnVuY3Rpb24gRm4odCl7dmFyIGU9dC5wbVZpZXdEZXNjO2lmKGUpcmV0dXJuIGUucGFyc2VSdWxlKCk7aWYoIkJSIj09dC5ub2RlTmFtZSYmdC5wYXJlbnROb2RlKXtpZihfdC5zYWZhcmkmJi9eKHVsfG9sKSQvaS50ZXN0KHQucGFyZW50Tm9kZS5ub2RlTmFtZSkpe3ZhciBuPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpO3JldHVybiBuLmFwcGVuZENoaWxkKGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImxpIikpLHtza2lwOm59fWlmKHQucGFyZW50Tm9kZS5sYXN0Q2hpbGQ9PXR8fF90LnNhZmFyaSYmL14odHJ8dGFibGUpJC9pLnRlc3QodC5wYXJlbnROb2RlLm5vZGVOYW1lKSlyZXR1cm57aWdub3JlOiEwfX1lbHNlIGlmKCJJTUciPT10Lm5vZGVOYW1lJiZ0LmdldEF0dHJpYnV0ZSgibWFyay1wbGFjZWhvbGRlciIpKXJldHVybntpZ25vcmU6ITB9fWZ1bmN0aW9uIGpuKHQsZSxuLHIsbyl7aWYoZTwwKXt2YXIgaT10Lmxhc3RTZWxlY3Rpb25UaW1lPkRhdGUubm93KCktNTA/dC5sYXN0U2VsZWN0aW9uT3JpZ2luOm51bGwscz1Tbih0LGkpO2lmKCF0LnN0YXRlLnNlbGVjdGlvbi5lcShzKSl7dmFyIGE9dC5zdGF0ZS50ci5zZXRTZWxlY3Rpb24ocyk7InBvaW50ZXIiPT1pP2Euc2V0TWV0YSgicG9pbnRlciIsITApOiJrZXkiPT1pJiZhLnNjcm9sbEludG9WaWV3KCksdC5kaXNwYXRjaChhKX19ZWxzZXt2YXIgdT10LnN0YXRlLmRvYy5yZXNvbHZlKGUpLGw9dS5zaGFyZWREZXB0aChuKTtlPXUuYmVmb3JlKGwrMSksbj10LnN0YXRlLmRvYy5yZXNvbHZlKG4pLmFmdGVyKGwrMSk7dmFyIGgsZixwPXQuc3RhdGUuc2VsZWN0aW9uLGQ9X24odCxlLG4pLHY9dC5zdGF0ZS5kb2MsbT12LnNsaWNlKGQuZnJvbSxkLnRvKTs4PT09dC5sYXN0S2V5Q29kZSYmRGF0ZS5ub3coKS0xMDA8dC5sYXN0S2V5Q29kZVRpbWU/KGg9dC5zdGF0ZS5zZWxlY3Rpb24udG8sZj0iZW5kIik6KGg9dC5zdGF0ZS5zZWxlY3Rpb24uZnJvbSxmPSJzdGFydCIpLHQubGFzdEtleUNvZGU9bnVsbDt2YXIgZz1KbihtLmNvbnRlbnQsZC5kb2MuY29udGVudCxkLmZyb20saCxmKTtpZighZyl7aWYoIShyJiZwIGluc3RhbmNlb2YgY1siVGV4dFNlbGVjdGlvbiJdJiYhcC5lbXB0eSYmcC4kaGVhZC5zYW1lUGFyZW50KHAuJGFuY2hvcikpfHx0LmNvbXBvc2luZ3x8ZC5zZWwmJmQuc2VsLmFuY2hvciE9ZC5zZWwuaGVhZCl7aWYoZC5zZWwpe3ZhciB5PSRuKHQsdC5zdGF0ZS5kb2MsZC5zZWwpO3kmJiF5LmVxKHQuc3RhdGUuc2VsZWN0aW9uKSYmdC5kaXNwYXRjaCh0LnN0YXRlLnRyLnNldFNlbGVjdGlvbih5KSl9cmV0dXJufWc9e3N0YXJ0OnAuZnJvbSxlbmRBOnAudG8sZW5kQjpwLnRvfX10LmRvbUNoYW5nZUNvdW50KyssdC5zdGF0ZS5zZWxlY3Rpb24uZnJvbTx0LnN0YXRlLnNlbGVjdGlvbi50byYmZy5zdGFydD09Zy5lbmRCJiZ0LnN0YXRlLnNlbGVjdGlvbiBpbnN0YW5jZW9mIGNbIlRleHRTZWxlY3Rpb24iXSYmKGcuc3RhcnQ+dC5zdGF0ZS5zZWxlY3Rpb24uZnJvbSYmZy5zdGFydDw9dC5zdGF0ZS5zZWxlY3Rpb24uZnJvbSsyP2cuc3RhcnQ9dC5zdGF0ZS5zZWxlY3Rpb24uZnJvbTpnLmVuZEE8dC5zdGF0ZS5zZWxlY3Rpb24udG8mJmcuZW5kQT49dC5zdGF0ZS5zZWxlY3Rpb24udG8tMiYmKGcuZW5kQis9dC5zdGF0ZS5zZWxlY3Rpb24udG8tZy5lbmRBLGcuZW5kQT10LnN0YXRlLnNlbGVjdGlvbi50bykpLF90LmllJiZfdC5pZV92ZXJzaW9uPD0xMSYmZy5lbmRCPT1nLnN0YXJ0KzEmJmcuZW5kQT09Zy5zdGFydCYmZy5zdGFydD5kLmZyb20mJiIgwqAiPT1kLmRvYy50ZXh0QmV0d2VlbihnLnN0YXJ0LWQuZnJvbS0xLGcuc3RhcnQtZC5mcm9tKzEpJiYoZy5zdGFydC0tLGcuZW5kQS0tLGcuZW5kQi0tKTt2YXIgdyxiPWQuZG9jLnJlc29sdmVOb0NhY2hlKGcuc3RhcnQtZC5mcm9tKSx4PWQuZG9jLnJlc29sdmVOb0NhY2hlKGcuZW5kQi1kLmZyb20pO2lmKChfdC5pb3MmJnQubGFzdElPU0VudGVyPkRhdGUubm93KCktMTAwJiYoIWIuc2FtZVBhcmVudCh4KXx8by5zb21lKChmdW5jdGlvbih0KXtyZXR1cm4iRElWIj09dC5ub2RlTmFtZX0pKSl8fCFiLnNhbWVQYXJlbnQoeCkmJmIucG9zPGQuZG9jLmNvbnRlbnQuc2l6ZSYmKHc9Y1siU2VsZWN0aW9uIl0uZmluZEZyb20oZC5kb2MucmVzb2x2ZShiLnBvcysxKSwxLCEwKSkmJncuaGVhZD09eC5wb3MpJiZ0LnNvbWVQcm9wKCJoYW5kbGVLZXlEb3duIiwoZnVuY3Rpb24oZSl7cmV0dXJuIGUodCxRdCgxMywiRW50ZXIiKSl9KSkpdC5sYXN0SU9TRW50ZXI9MDtlbHNlIGlmKHQuc3RhdGUuc2VsZWN0aW9uLmFuY2hvcj5nLnN0YXJ0JiZMbih2LGcuc3RhcnQsZy5lbmRBLGIseCkmJnQuc29tZVByb3AoImhhbmRsZUtleURvd24iLChmdW5jdGlvbihlKXtyZXR1cm4gZSh0LFF0KDgsIkJhY2tzcGFjZSIpKX0pKSlfdC5hbmRyb2lkJiZfdC5jaHJvbWUmJnQuZG9tT2JzZXJ2ZXIuc3VwcHJlc3NTZWxlY3Rpb25VcGRhdGVzKCk7ZWxzZXt2YXIgayxTLEMsTyxNPWcuc3RhcnQsTj1nLmVuZEE7aWYoYi5zYW1lUGFyZW50KHgpJiZiLnBhcmVudC5pbmxpbmVDb250ZW50KWlmKGIucG9zPT14LnBvcylfdC5pZSYmX3QuaWVfdmVyc2lvbjw9MTEmJjA9PWIucGFyZW50T2Zmc2V0JiYodC5kb21PYnNlcnZlci5zdXBwcmVzc1NlbGVjdGlvblVwZGF0ZXMoKSxzZXRUaW1lb3V0KChmdW5jdGlvbigpe3JldHVybiBDbih0KX0pLDIwKSksaz10LnN0YXRlLnRyLmRlbGV0ZShNLE4pLFM9di5yZXNvbHZlKGcuc3RhcnQpLm1hcmtzQWNyb3NzKHYucmVzb2x2ZShnLmVuZEEpKTtlbHNlIGlmKGcuZW5kQT09Zy5lbmRCJiYoTz12LnJlc29sdmUoZy5zdGFydCkpJiYoQz1WbihiLnBhcmVudC5jb250ZW50LmN1dChiLnBhcmVudE9mZnNldCx4LnBhcmVudE9mZnNldCksTy5wYXJlbnQuY29udGVudC5jdXQoTy5wYXJlbnRPZmZzZXQsZy5lbmRBLU8uc3RhcnQoKSkpKSlrPXQuc3RhdGUudHIsImFkZCI9PUMudHlwZT9rLmFkZE1hcmsoTSxOLEMubWFyayk6ay5yZW1vdmVNYXJrKE0sTixDLm1hcmspO2Vsc2UgaWYoYi5wYXJlbnQuY2hpbGQoYi5pbmRleCgpKS5pc1RleHQmJmIuaW5kZXgoKT09eC5pbmRleCgpLSh4LnRleHRPZmZzZXQ/MDoxKSl7dmFyIFQ9Yi5wYXJlbnQudGV4dEJldHdlZW4oYi5wYXJlbnRPZmZzZXQseC5wYXJlbnRPZmZzZXQpO2lmKHQuc29tZVByb3AoImhhbmRsZVRleHRJbnB1dCIsKGZ1bmN0aW9uKGUpe3JldHVybiBlKHQsTSxOLFQpfSkpKXJldHVybjtrPXQuc3RhdGUudHIuaW5zZXJ0VGV4dChULE0sTil9aWYoa3x8KGs9dC5zdGF0ZS50ci5yZXBsYWNlKE0sTixkLmRvYy5zbGljZShnLnN0YXJ0LWQuZnJvbSxnLmVuZEItZC5mcm9tKSkpLGQuc2VsKXt2YXIgQT0kbih0LGsuZG9jLGQuc2VsKTtBJiYhKF90LmNocm9tZSYmX3QuYW5kcm9pZCYmdC5jb21wb3NpbmcmJkEuZW1wdHkmJihBLmhlYWQ9PU18fEEuaGVhZD09ay5tYXBwaW5nLm1hcChOKS0xKXx8X3QuaWUmJkEuZW1wdHkmJkEuaGVhZD09TSkmJmsuc2V0U2VsZWN0aW9uKEEpfVMmJmsuZW5zdXJlTWFya3MoUyksdC5kaXNwYXRjaChrLnNjcm9sbEludG9WaWV3KCkpfX19ZnVuY3Rpb24gJG4odCxlLG4pe3JldHVybiBNYXRoLm1heChuLmFuY2hvcixuLmhlYWQpPmUuY29udGVudC5zaXplP251bGw6em4odCxlLnJlc29sdmUobi5hbmNob3IpLGUucmVzb2x2ZShuLmhlYWQpKX1mdW5jdGlvbiBWbih0LGUpe2Zvcih2YXIgbixyLG8saT10LmZpcnN0Q2hpbGQubWFya3Mscz1lLmZpcnN0Q2hpbGQubWFya3MsYT1pLGM9cyx1PTA7dTxzLmxlbmd0aDt1KyspYT1zW3VdLnJlbW92ZUZyb21TZXQoYSk7Zm9yKHZhciBsPTA7bDxpLmxlbmd0aDtsKyspYz1pW2xdLnJlbW92ZUZyb21TZXQoYyk7aWYoMT09YS5sZW5ndGgmJjA9PWMubGVuZ3RoKXI9YVswXSxuPSJhZGQiLG89ZnVuY3Rpb24odCl7cmV0dXJuIHQubWFyayhyLmFkZFRvU2V0KHQubWFya3MpKX07ZWxzZXtpZigwIT1hLmxlbmd0aHx8MSE9Yy5sZW5ndGgpcmV0dXJuIG51bGw7cj1jWzBdLG49InJlbW92ZSIsbz1mdW5jdGlvbih0KXtyZXR1cm4gdC5tYXJrKHIucmVtb3ZlRnJvbVNldCh0Lm1hcmtzKSl9fWZvcih2YXIgaD1bXSxwPTA7cDxlLmNoaWxkQ291bnQ7cCsrKWgucHVzaChvKGUuY2hpbGQocCkpKTtpZihmLmZyb20oaCkuZXEodCkpcmV0dXJue21hcms6cix0eXBlOm59fWZ1bmN0aW9uIExuKHQsZSxuLHIsbyl7aWYoIXIucGFyZW50LmlzVGV4dGJsb2NrfHxuLWU8PW8ucG9zLXIucG9zfHxxbihyLCEwLCExKTxvLnBvcylyZXR1cm4hMTt2YXIgaT10LnJlc29sdmUoZSk7aWYoaS5wYXJlbnRPZmZzZXQ8aS5wYXJlbnQuY29udGVudC5zaXplfHwhaS5wYXJlbnQuaXNUZXh0YmxvY2spcmV0dXJuITE7dmFyIHM9dC5yZXNvbHZlKHFuKGksITAsITApKTtyZXR1cm4hKCFzLnBhcmVudC5pc1RleHRibG9ja3x8cy5wb3M+bnx8cW4ocywhMCwhMSk8bikmJnIucGFyZW50LmNvbnRlbnQuY3V0KHIucGFyZW50T2Zmc2V0KS5lcShzLnBhcmVudC5jb250ZW50KX1mdW5jdGlvbiBxbih0LGUsbil7dmFyIHI9dC5kZXB0aCxvPWU/dC5lbmQoKTp0LnBvczt3aGlsZShyPjAmJihlfHx0LmluZGV4QWZ0ZXIocik9PXQubm9kZShyKS5jaGlsZENvdW50KSlyLS0sbysrLGU9ITE7aWYobil7dmFyIGk9dC5ub2RlKHIpLm1heWJlQ2hpbGQodC5pbmRleEFmdGVyKHIpKTt3aGlsZShpJiYhaS5pc0xlYWYpaT1pLmZpcnN0Q2hpbGQsbysrfXJldHVybiBvfWZ1bmN0aW9uIEpuKHQsZSxuLHIsbyl7dmFyIGk9dC5maW5kRGlmZlN0YXJ0KGUsbik7aWYobnVsbD09aSlyZXR1cm4gbnVsbDt2YXIgcz10LmZpbmREaWZmRW5kKGUsbit0LnNpemUsbitlLnNpemUpLGE9cy5hLGM9cy5iO2lmKCJlbmQiPT1vKXt2YXIgdT1NYXRoLm1heCgwLGktTWF0aC5taW4oYSxjKSk7ci09YSt1LWl9aWYoYTxpJiZ0LnNpemU8ZS5zaXplKXt2YXIgbD1yPD1pJiZyPj1hP2ktcjowO2ktPWwsYz1pKyhjLWEpLGE9aX1lbHNlIGlmKGM8aSl7dmFyIGg9cjw9aSYmcj49Yz9pLXI6MDtpLT1oLGE9aSsoYS1jKSxjPWl9cmV0dXJue3N0YXJ0OmksZW5kQTphLGVuZEI6Y319ZnVuY3Rpb24gV24odCxlKXt2YXIgbj1bXSxyPWUuY29udGVudCxvPWUub3BlblN0YXJ0LGk9ZS5vcGVuRW5kO3doaWxlKG8+MSYmaT4xJiYxPT1yLmNoaWxkQ291bnQmJjE9PXIuZmlyc3RDaGlsZC5jaGlsZENvdW50KXtvLS0saS0tO3ZhciBzPXIuZmlyc3RDaGlsZDtuLnB1c2gocy50eXBlLm5hbWUscy50eXBlLmhhc1JlcXVpcmVkQXR0cnMoKT9zLmF0dHJzOm51bGwpLHI9cy5jb250ZW50fXZhciBhPXQuc29tZVByb3AoImNsaXBib2FyZFNlcmlhbGl6ZXIiKXx8enQuZnJvbVNjaGVtYSh0LnN0YXRlLnNjaGVtYSksYz1lcigpLHU9Yy5jcmVhdGVFbGVtZW50KCJkaXYiKTt1LmFwcGVuZENoaWxkKGEuc2VyaWFsaXplRnJhZ21lbnQocix7ZG9jdW1lbnQ6Y30pKTt2YXIgbCxoPXUuZmlyc3RDaGlsZDt3aGlsZShoJiYxPT1oLm5vZGVUeXBlJiYobD1RbltoLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCldKSl7Zm9yKHZhciBmPWwubGVuZ3RoLTE7Zj49MDtmLS0pe3ZhciBwPWMuY3JlYXRlRWxlbWVudChsW2ZdKTt3aGlsZSh1LmZpcnN0Q2hpbGQpcC5hcHBlbmRDaGlsZCh1LmZpcnN0Q2hpbGQpO3UuYXBwZW5kQ2hpbGQocCl9aD11LmZpcnN0Q2hpbGR9aCYmMT09aC5ub2RlVHlwZSYmaC5zZXRBdHRyaWJ1dGUoImRhdGEtcG0tc2xpY2UiLG8rIiAiK2krIiAiK0pTT04uc3RyaW5naWZ5KG4pKTt2YXIgZD10LnNvbWVQcm9wKCJjbGlwYm9hcmRUZXh0U2VyaWFsaXplciIsKGZ1bmN0aW9uKHQpe3JldHVybiB0KGUpfSkpfHxlLmNvbnRlbnQudGV4dEJldHdlZW4oMCxlLmNvbnRlbnQuc2l6ZSwiXG5cbiIpO3JldHVybntkb206dSx0ZXh0OmR9fWZ1bmN0aW9uIEhuKHQsZSxuLHIsbyl7dmFyIGkscyxhPW8ucGFyZW50LnR5cGUuc3BlYy5jb2RlO2lmKCFuJiYhZSlyZXR1cm4gbnVsbDt2YXIgYz1lJiYocnx8YXx8IW4pO2lmKGMpe2lmKHQuc29tZVByb3AoInRyYW5zZm9ybVBhc3RlZFRleHQiLChmdW5jdGlvbih0KXtlPXQoZSl9KSksYSlyZXR1cm4gbmV3IHcoZi5mcm9tKHQuc3RhdGUuc2NoZW1hLnRleHQoZSkpLDAsMCk7dmFyIHU9dC5zb21lUHJvcCgiY2xpcGJvYXJkVGV4dFBhcnNlciIsKGZ1bmN0aW9uKHQpe3JldHVybiB0KGUsbyl9KSk7dT9zPXU6KGk9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2IiksZS50cmltKCkuc3BsaXQoLyg/OlxyXG4/fFxuKSsvKS5mb3JFYWNoKChmdW5jdGlvbih0KXtpLmFwcGVuZENoaWxkKGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoInAiKSkudGV4dENvbnRlbnQ9dH0pKSl9ZWxzZSB0LnNvbWVQcm9wKCJ0cmFuc2Zvcm1QYXN0ZWRIVE1MIiwoZnVuY3Rpb24odCl7bj10KG4pfSkpLGk9bnIobik7dmFyIGw9aSYmaS5xdWVyeVNlbGVjdG9yKCJbZGF0YS1wbS1zbGljZV0iKSxoPWwmJi9eKFxkKykgKFxkKykgKC4qKS8uZXhlYyhsLmdldEF0dHJpYnV0ZSgiZGF0YS1wbS1zbGljZSIpKTtpZighcyl7dmFyIHA9dC5zb21lUHJvcCgiY2xpcGJvYXJkUGFyc2VyIil8fHQuc29tZVByb3AoImRvbVBhcnNlciIpfHxndC5mcm9tU2NoZW1hKHQuc3RhdGUuc2NoZW1hKTtzPXAucGFyc2VTbGljZShpLHtwcmVzZXJ2ZVdoaXRlc3BhY2U6ISghYyYmIWgpLGNvbnRleHQ6b30pfXJldHVybiBzPWg/cnIoWm4ocywraFsxXSwraFsyXSksaFszXSk6dy5tYXhPcGVuKEtuKHMuY29udGVudCxvKSwhMSksdC5zb21lUHJvcCgidHJhbnNmb3JtUGFzdGVkIiwoZnVuY3Rpb24odCl7cz10KHMpfSkpLHN9ZnVuY3Rpb24gS24odCxlKXtpZih0LmNoaWxkQ291bnQ8MilyZXR1cm4gdDtmb3IodmFyIG49ZnVuY3Rpb24obil7dmFyIHI9ZS5ub2RlKG4pLG89ci5jb250ZW50TWF0Y2hBdChlLmluZGV4KG4pKSxpPXZvaWQgMCxzPVtdO2lmKHQuZm9yRWFjaCgoZnVuY3Rpb24odCl7aWYocyl7dmFyIGUsbj1vLmZpbmRXcmFwcGluZyh0LnR5cGUpO2lmKCFuKXJldHVybiBzPW51bGw7aWYoZT1zLmxlbmd0aCYmaS5sZW5ndGgmJkduKG4saSx0LHNbcy5sZW5ndGgtMV0sMCkpc1tzLmxlbmd0aC0xXT1lO2Vsc2V7cy5sZW5ndGgmJihzW3MubGVuZ3RoLTFdPVhuKHNbcy5sZW5ndGgtMV0saS5sZW5ndGgpKTt2YXIgcj1Vbih0LG4pO3MucHVzaChyKSxvPW8ubWF0Y2hUeXBlKHIudHlwZSxyLmF0dHJzKSxpPW59fX0pKSxzKXJldHVybnt2OmYuZnJvbShzKX19LHI9ZS5kZXB0aDtyPj0wO3ItLSl7dmFyIG89bihyKTtpZihvKXJldHVybiBvLnZ9cmV0dXJuIHR9ZnVuY3Rpb24gVW4odCxlLG4pe3ZvaWQgMD09PW4mJihuPTApO2Zvcih2YXIgcj1lLmxlbmd0aC0xO3I+PW47ci0tKXQ9ZVtyXS5jcmVhdGUobnVsbCxmLmZyb20odCkpO3JldHVybiB0fWZ1bmN0aW9uIEduKHQsZSxuLHIsbyl7aWYobzx0Lmxlbmd0aCYmbzxlLmxlbmd0aCYmdFtvXT09ZVtvXSl7dmFyIGk9R24odCxlLG4sci5sYXN0Q2hpbGQsbysxKTtpZihpKXJldHVybiByLmNvcHkoci5jb250ZW50LnJlcGxhY2VDaGlsZChyLmNoaWxkQ291bnQtMSxpKSk7dmFyIHM9ci5jb250ZW50TWF0Y2hBdChyLmNoaWxkQ291bnQpO2lmKHMubWF0Y2hUeXBlKG89PXQubGVuZ3RoLTE/bi50eXBlOnRbbysxXSkpcmV0dXJuIHIuY29weShyLmNvbnRlbnQuYXBwZW5kKGYuZnJvbShVbihuLHQsbysxKSkpKX19ZnVuY3Rpb24gWG4odCxlKXtpZigwPT1lKXJldHVybiB0O3ZhciBuPXQuY29udGVudC5yZXBsYWNlQ2hpbGQodC5jaGlsZENvdW50LTEsWG4odC5sYXN0Q2hpbGQsZS0xKSkscj10LmNvbnRlbnRNYXRjaEF0KHQuY2hpbGRDb3VudCkuZmlsbEJlZm9yZShmLmVtcHR5LCEwKTtyZXR1cm4gdC5jb3B5KG4uYXBwZW5kKHIpKX1mdW5jdGlvbiBZbih0LGUsbixyLG8saSl7dmFyIHM9ZTwwP3QuZmlyc3RDaGlsZDp0Lmxhc3RDaGlsZCxhPXMuY29udGVudDtyZXR1cm4gbzxyLTEmJihhPVluKGEsZSxuLHIsbysxLGkpKSxvPj1uJiYoYT1lPDA/cy5jb250ZW50TWF0Y2hBdCgwKS5maWxsQmVmb3JlKGEsdC5jaGlsZENvdW50PjF8fGk8PW8pLmFwcGVuZChhKTphLmFwcGVuZChzLmNvbnRlbnRNYXRjaEF0KHMuY2hpbGRDb3VudCkuZmlsbEJlZm9yZShmLmVtcHR5LCEwKSkpLHQucmVwbGFjZUNoaWxkKGU8MD8wOnQuY2hpbGRDb3VudC0xLHMuY29weShhKSl9ZnVuY3Rpb24gWm4odCxlLG4pe3JldHVybiBlPHQub3BlblN0YXJ0JiYodD1uZXcgdyhZbih0LmNvbnRlbnQsLTEsZSx0Lm9wZW5TdGFydCwwLHQub3BlbkVuZCksZSx0Lm9wZW5FbmQpKSxuPHQub3BlbkVuZCYmKHQ9bmV3IHcoWW4odC5jb250ZW50LDEsbix0Lm9wZW5FbmQsMCwwKSx0Lm9wZW5TdGFydCxuKSksdH12YXIgUW49e3RoZWFkOlsidGFibGUiXSx0Ym9keTpbInRhYmxlIl0sdGZvb3Q6WyJ0YWJsZSJdLGNhcHRpb246WyJ0YWJsZSJdLGNvbGdyb3VwOlsidGFibGUiXSxjb2w6WyJ0YWJsZSIsImNvbGdyb3VwIl0sdHI6WyJ0YWJsZSIsInRib2R5Il0sdGQ6WyJ0YWJsZSIsInRib2R5IiwidHIiXSx0aDpbInRhYmxlIiwidGJvZHkiLCJ0ciJdfSx0cj1udWxsO2Z1bmN0aW9uIGVyKCl7cmV0dXJuIHRyfHwodHI9ZG9jdW1lbnQuaW1wbGVtZW50YXRpb24uY3JlYXRlSFRNTERvY3VtZW50KCJ0aXRsZSIpKX1mdW5jdGlvbiBucih0KXt2YXIgZT0vKFxzKjxtZXRhIFtePl0qPikqLy5leGVjKHQpO2UmJih0PXQuc2xpY2UoZVswXS5sZW5ndGgpKTt2YXIgbixyPWVyKCkuY3JlYXRlRWxlbWVudCgiZGl2Iiksbz0vKD86PG1ldGEgW14+XSo+KSo8KFthLXpdW14+XHNdKykvaS5leGVjKHQpLGk9MDsobj1vJiZRbltvWzFdLnRvTG93ZXJDYXNlKCldKSYmKHQ9bi5tYXAoKGZ1bmN0aW9uKHQpe3JldHVybiI8Iit0KyI+In0pKS5qb2luKCIiKSt0K24ubWFwKChmdW5jdGlvbih0KXtyZXR1cm4iPC8iK3QrIj4ifSkpLnJldmVyc2UoKS5qb2luKCIiKSxpPW4ubGVuZ3RoKSxyLmlubmVySFRNTD10O2Zvcih2YXIgcz0wO3M8aTtzKyspcj1yLmZpcnN0Q2hpbGQ7cmV0dXJuIHJ9ZnVuY3Rpb24gcnIodCxlKXtpZighdC5zaXplKXJldHVybiB0O3ZhciBuLHI9dC5jb250ZW50LmZpcnN0Q2hpbGQudHlwZS5zY2hlbWE7dHJ5e249SlNPTi5wYXJzZShlKX1jYXRjaCh1KXtyZXR1cm4gdH1mb3IodmFyIG89dC5jb250ZW50LGk9dC5vcGVuU3RhcnQscz10Lm9wZW5FbmQsYT1uLmxlbmd0aC0yO2E+PTA7YS09Mil7dmFyIGM9ci5ub2Rlc1tuW2FdXTtpZighY3x8Yy5oYXNSZXF1aXJlZEF0dHJzKCkpYnJlYWs7bz1mLmZyb20oYy5jcmVhdGUoblthKzFdLG8pKSxpKysscysrfXJldHVybiBuZXcgdyhvLGkscyl9dmFyIG9yPXtjaGlsZExpc3Q6ITAsY2hhcmFjdGVyRGF0YTohMCxjaGFyYWN0ZXJEYXRhT2xkVmFsdWU6ITAsYXR0cmlidXRlczohMCxhdHRyaWJ1dGVPbGRWYWx1ZTohMCxzdWJ0cmVlOiEwfSxpcj1fdC5pZSYmX3QuaWVfdmVyc2lvbjw9MTEsc3I9ZnVuY3Rpb24oKXt0aGlzLmFuY2hvck5vZGU9dGhpcy5hbmNob3JPZmZzZXQ9dGhpcy5mb2N1c05vZGU9dGhpcy5mb2N1c09mZnNldD1udWxsfTtzci5wcm90b3R5cGUuc2V0PWZ1bmN0aW9uKHQpe3RoaXMuYW5jaG9yTm9kZT10LmFuY2hvck5vZGUsdGhpcy5hbmNob3JPZmZzZXQ9dC5hbmNob3JPZmZzZXQsdGhpcy5mb2N1c05vZGU9dC5mb2N1c05vZGUsdGhpcy5mb2N1c09mZnNldD10LmZvY3VzT2Zmc2V0fSxzci5wcm90b3R5cGUuZXE9ZnVuY3Rpb24odCl7cmV0dXJuIHQuYW5jaG9yTm9kZT09dGhpcy5hbmNob3JOb2RlJiZ0LmFuY2hvck9mZnNldD09dGhpcy5hbmNob3JPZmZzZXQmJnQuZm9jdXNOb2RlPT10aGlzLmZvY3VzTm9kZSYmdC5mb2N1c09mZnNldD09dGhpcy5mb2N1c09mZnNldH07dmFyIGFyPWZ1bmN0aW9uKHQsZSl7dmFyIG49dGhpczt0aGlzLnZpZXc9dCx0aGlzLmhhbmRsZURPTUNoYW5nZT1lLHRoaXMucXVldWU9W10sdGhpcy5mbHVzaGluZ1Nvb249LTEsdGhpcy5vYnNlcnZlcj13aW5kb3cuTXV0YXRpb25PYnNlcnZlciYmbmV3IHdpbmRvdy5NdXRhdGlvbk9ic2VydmVyKChmdW5jdGlvbih0KXtmb3IodmFyIGU9MDtlPHQubGVuZ3RoO2UrKyluLnF1ZXVlLnB1c2godFtlXSk7X3QuaWUmJl90LmllX3ZlcnNpb248PTExJiZ0LnNvbWUoKGZ1bmN0aW9uKHQpe3JldHVybiJjaGlsZExpc3QiPT10LnR5cGUmJnQucmVtb3ZlZE5vZGVzLmxlbmd0aHx8ImNoYXJhY3RlckRhdGEiPT10LnR5cGUmJnQub2xkVmFsdWUubGVuZ3RoPnQudGFyZ2V0Lm5vZGVWYWx1ZS5sZW5ndGh9KSk/bi5mbHVzaFNvb24oKTpuLmZsdXNoKCl9KSksdGhpcy5jdXJyZW50U2VsZWN0aW9uPW5ldyBzcixpciYmKHRoaXMub25DaGFyRGF0YT1mdW5jdGlvbih0KXtuLnF1ZXVlLnB1c2goe3RhcmdldDp0LnRhcmdldCx0eXBlOiJjaGFyYWN0ZXJEYXRhIixvbGRWYWx1ZTp0LnByZXZWYWx1ZX0pLG4uZmx1c2hTb29uKCl9KSx0aGlzLm9uU2VsZWN0aW9uQ2hhbmdlPXRoaXMub25TZWxlY3Rpb25DaGFuZ2UuYmluZCh0aGlzKSx0aGlzLnN1cHByZXNzaW5nU2VsZWN0aW9uVXBkYXRlcz0hMX07YXIucHJvdG90eXBlLmZsdXNoU29vbj1mdW5jdGlvbigpe3ZhciB0PXRoaXM7dGhpcy5mbHVzaGluZ1Nvb248MCYmKHRoaXMuZmx1c2hpbmdTb29uPXdpbmRvdy5zZXRUaW1lb3V0KChmdW5jdGlvbigpe3QuZmx1c2hpbmdTb29uPS0xLHQuZmx1c2goKX0pLDIwKSl9LGFyLnByb3RvdHlwZS5mb3JjZUZsdXNoPWZ1bmN0aW9uKCl7dGhpcy5mbHVzaGluZ1Nvb24+LTEmJih3aW5kb3cuY2xlYXJUaW1lb3V0KHRoaXMuZmx1c2hpbmdTb29uKSx0aGlzLmZsdXNoaW5nU29vbj0tMSx0aGlzLmZsdXNoKCkpfSxhci5wcm90b3R5cGUuc3RhcnQ9ZnVuY3Rpb24oKXt0aGlzLm9ic2VydmVyJiZ0aGlzLm9ic2VydmVyLm9ic2VydmUodGhpcy52aWV3LmRvbSxvciksaXImJnRoaXMudmlldy5kb20uYWRkRXZlbnRMaXN0ZW5lcigiRE9NQ2hhcmFjdGVyRGF0YU1vZGlmaWVkIix0aGlzLm9uQ2hhckRhdGEpLHRoaXMuY29ubmVjdFNlbGVjdGlvbigpfSxhci5wcm90b3R5cGUuc3RvcD1mdW5jdGlvbigpe3ZhciB0PXRoaXM7aWYodGhpcy5vYnNlcnZlcil7dmFyIGU9dGhpcy5vYnNlcnZlci50YWtlUmVjb3JkcygpO2lmKGUubGVuZ3RoKXtmb3IodmFyIG49MDtuPGUubGVuZ3RoO24rKyl0aGlzLnF1ZXVlLnB1c2goZVtuXSk7d2luZG93LnNldFRpbWVvdXQoKGZ1bmN0aW9uKCl7cmV0dXJuIHQuZmx1c2goKX0pLDIwKX10aGlzLm9ic2VydmVyLmRpc2Nvbm5lY3QoKX1pciYmdGhpcy52aWV3LmRvbS5yZW1vdmVFdmVudExpc3RlbmVyKCJET01DaGFyYWN0ZXJEYXRhTW9kaWZpZWQiLHRoaXMub25DaGFyRGF0YSksdGhpcy5kaXNjb25uZWN0U2VsZWN0aW9uKCl9LGFyLnByb3RvdHlwZS5jb25uZWN0U2VsZWN0aW9uPWZ1bmN0aW9uKCl7dGhpcy52aWV3LmRvbS5vd25lckRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoInNlbGVjdGlvbmNoYW5nZSIsdGhpcy5vblNlbGVjdGlvbkNoYW5nZSl9LGFyLnByb3RvdHlwZS5kaXNjb25uZWN0U2VsZWN0aW9uPWZ1bmN0aW9uKCl7dGhpcy52aWV3LmRvbS5vd25lckRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoInNlbGVjdGlvbmNoYW5nZSIsdGhpcy5vblNlbGVjdGlvbkNoYW5nZSl9LGFyLnByb3RvdHlwZS5zdXBwcmVzc1NlbGVjdGlvblVwZGF0ZXM9ZnVuY3Rpb24oKXt2YXIgdD10aGlzO3RoaXMuc3VwcHJlc3NpbmdTZWxlY3Rpb25VcGRhdGVzPSEwLHNldFRpbWVvdXQoKGZ1bmN0aW9uKCl7cmV0dXJuIHQuc3VwcHJlc3NpbmdTZWxlY3Rpb25VcGRhdGVzPSExfSksNTApfSxhci5wcm90b3R5cGUub25TZWxlY3Rpb25DaGFuZ2U9ZnVuY3Rpb24oKXtpZihQbih0aGlzLnZpZXcpKXtpZih0aGlzLnN1cHByZXNzaW5nU2VsZWN0aW9uVXBkYXRlcylyZXR1cm4gQ24odGhpcy52aWV3KTtpZihfdC5pZSYmX3QuaWVfdmVyc2lvbjw9MTEmJiF0aGlzLnZpZXcuc3RhdGUuc2VsZWN0aW9uLmVtcHR5KXt2YXIgdD10aGlzLnZpZXcucm9vdC5nZXRTZWxlY3Rpb24oKTtpZih0LmZvY3VzTm9kZSYmSHQodC5mb2N1c05vZGUsdC5mb2N1c09mZnNldCx0LmFuY2hvck5vZGUsdC5hbmNob3JPZmZzZXQpKXJldHVybiB0aGlzLmZsdXNoU29vbigpfXRoaXMuZmx1c2goKX19LGFyLnByb3RvdHlwZS5zZXRDdXJTZWxlY3Rpb249ZnVuY3Rpb24oKXt0aGlzLmN1cnJlbnRTZWxlY3Rpb24uc2V0KHRoaXMudmlldy5yb290LmdldFNlbGVjdGlvbigpKX0sYXIucHJvdG90eXBlLmlnbm9yZVNlbGVjdGlvbkNoYW5nZT1mdW5jdGlvbih0KXtpZigwPT10LnJhbmdlQ291bnQpcmV0dXJuITA7dmFyIGU9dC5nZXRSYW5nZUF0KDApLmNvbW1vbkFuY2VzdG9yQ29udGFpbmVyLG49dGhpcy52aWV3LmRvY1ZpZXcubmVhcmVzdERlc2MoZSk7cmV0dXJuIG4mJm4uaWdub3JlTXV0YXRpb24oe3R5cGU6InNlbGVjdGlvbiIsdGFyZ2V0OjM9PWUubm9kZVR5cGU/ZS5wYXJlbnROb2RlOmV9KT8odGhpcy5zZXRDdXJTZWxlY3Rpb24oKSwhMCk6dm9pZCAwfSxhci5wcm90b3R5cGUuZmx1c2g9ZnVuY3Rpb24oKXtpZih0aGlzLnZpZXcuZG9jVmlldyYmISh0aGlzLmZsdXNoaW5nU29vbj4tMSkpe3ZhciB0PXRoaXMub2JzZXJ2ZXI/dGhpcy5vYnNlcnZlci50YWtlUmVjb3JkcygpOltdO3RoaXMucXVldWUubGVuZ3RoJiYodD10aGlzLnF1ZXVlLmNvbmNhdCh0KSx0aGlzLnF1ZXVlLmxlbmd0aD0wKTt2YXIgZT10aGlzLnZpZXcucm9vdC5nZXRTZWxlY3Rpb24oKSxuPSF0aGlzLnN1cHByZXNzaW5nU2VsZWN0aW9uVXBkYXRlcyYmIXRoaXMuY3VycmVudFNlbGVjdGlvbi5lcShlKSYmSW4odGhpcy52aWV3KSYmIXRoaXMuaWdub3JlU2VsZWN0aW9uQ2hhbmdlKGUpLHI9LTEsbz0tMSxpPSExLHM9W107aWYodGhpcy52aWV3LmVkaXRhYmxlKWZvcih2YXIgYT0wO2E8dC5sZW5ndGg7YSsrKXt2YXIgYz10aGlzLnJlZ2lzdGVyTXV0YXRpb24odFthXSxzKTtjJiYocj1yPDA/Yy5mcm9tOk1hdGgubWluKGMuZnJvbSxyKSxvPW88MD9jLnRvOk1hdGgubWF4KGMudG8sbyksYy50eXBlT3ZlciYmKGk9ITApKX1pZihfdC5nZWNrbyYmcy5sZW5ndGg+MSl7dmFyIHU9cy5maWx0ZXIoKGZ1bmN0aW9uKHQpe3JldHVybiJCUiI9PXQubm9kZU5hbWV9KSk7aWYoMj09dS5sZW5ndGgpe3ZhciBsPXVbMF0saD11WzFdO2wucGFyZW50Tm9kZSYmbC5wYXJlbnROb2RlLnBhcmVudE5vZGU9PWgucGFyZW50Tm9kZT9oLnJlbW92ZSgpOmwucmVtb3ZlKCl9fShyPi0xfHxuKSYmKHI+LTEmJih0aGlzLnZpZXcuZG9jVmlldy5tYXJrRGlydHkocixvKSx1cih0aGlzLnZpZXcpKSx0aGlzLmhhbmRsZURPTUNoYW5nZShyLG8saSxzKSx0aGlzLnZpZXcuZG9jVmlldy5kaXJ0eT90aGlzLnZpZXcudXBkYXRlU3RhdGUodGhpcy52aWV3LnN0YXRlKTp0aGlzLmN1cnJlbnRTZWxlY3Rpb24uZXEoZSl8fENuKHRoaXMudmlldykpfX0sYXIucHJvdG90eXBlLnJlZ2lzdGVyTXV0YXRpb249ZnVuY3Rpb24odCxlKXtpZihlLmluZGV4T2YodC50YXJnZXQpPi0xKXJldHVybiBudWxsO3ZhciBuPXRoaXMudmlldy5kb2NWaWV3Lm5lYXJlc3REZXNjKHQudGFyZ2V0KTtpZigiYXR0cmlidXRlcyI9PXQudHlwZSYmKG49PXRoaXMudmlldy5kb2NWaWV3fHwiY29udGVudGVkaXRhYmxlIj09dC5hdHRyaWJ1dGVOYW1lfHwic3R5bGUiPT10LmF0dHJpYnV0ZU5hbWUmJiF0Lm9sZFZhbHVlJiYhdC50YXJnZXQuZ2V0QXR0cmlidXRlKCJzdHlsZSIpKSlyZXR1cm4gbnVsbDtpZighbnx8bi5pZ25vcmVNdXRhdGlvbih0KSlyZXR1cm4gbnVsbDtpZigiY2hpbGRMaXN0Ij09dC50eXBlKXt2YXIgcj10LnByZXZpb3VzU2libGluZyxvPXQubmV4dFNpYmxpbmc7aWYoX3QuaWUmJl90LmllX3ZlcnNpb248PTExJiZ0LmFkZGVkTm9kZXMubGVuZ3RoKWZvcih2YXIgaT0wO2k8dC5hZGRlZE5vZGVzLmxlbmd0aDtpKyspe3ZhciBzPXQuYWRkZWROb2Rlc1tpXSxhPXMucHJldmlvdXNTaWJsaW5nLGM9cy5uZXh0U2libGluZzsoIWF8fEFycmF5LnByb3RvdHlwZS5pbmRleE9mLmNhbGwodC5hZGRlZE5vZGVzLGEpPDApJiYocj1hKSwoIWN8fEFycmF5LnByb3RvdHlwZS5pbmRleE9mLmNhbGwodC5hZGRlZE5vZGVzLGMpPDApJiYobz1jKX1mb3IodmFyIHU9ciYmci5wYXJlbnROb2RlPT10LnRhcmdldD9xdChyKSsxOjAsbD1uLmxvY2FsUG9zRnJvbURPTSh0LnRhcmdldCx1LC0xKSxoPW8mJm8ucGFyZW50Tm9kZT09dC50YXJnZXQ/cXQobyk6dC50YXJnZXQuY2hpbGROb2Rlcy5sZW5ndGgsZj0wO2Y8dC5hZGRlZE5vZGVzLmxlbmd0aDtmKyspZS5wdXNoKHQuYWRkZWROb2Rlc1tmXSk7dmFyIHA9bi5sb2NhbFBvc0Zyb21ET00odC50YXJnZXQsaCwxKTtyZXR1cm57ZnJvbTpsLHRvOnB9fXJldHVybiJhdHRyaWJ1dGVzIj09dC50eXBlP3tmcm9tOm4ucG9zQXRTdGFydC1uLmJvcmRlcix0bzpuLnBvc0F0RW5kK24uYm9yZGVyfTp7ZnJvbTpuLnBvc0F0U3RhcnQsdG86bi5wb3NBdEVuZCx0eXBlT3Zlcjp0LnRhcmdldC5ub2RlVmFsdWU9PXQub2xkVmFsdWV9fTt2YXIgY3I9ITE7ZnVuY3Rpb24gdXIodCl7Y3J8fChjcj0hMCwibm9ybWFsIj09Z2V0Q29tcHV0ZWRTdHlsZSh0LmRvbSkud2hpdGVTcGFjZSYmY29uc29sZVsid2FybiJdKCJQcm9zZU1pcnJvciBleHBlY3RzIHRoZSBDU1Mgd2hpdGUtc3BhY2UgcHJvcGVydHkgdG8gYmUgc2V0LCBwcmVmZXJhYmx5IHRvICdwcmUtd3JhcCcuIEl0IGlzIHJlY29tbWVuZGVkIHRvIGxvYWQgc3R5bGUvcHJvc2VtaXJyb3IuY3NzIGZyb20gdGhlIHByb3NlbWlycm9yLXZpZXcgcGFja2FnZS4iKSl9dmFyIGxyPXt9LGhyPXt9O2Z1bmN0aW9uIGZyKHQpe3Quc2hpZnRLZXk9ITEsdC5tb3VzZURvd249bnVsbCx0Lmxhc3RLZXlDb2RlPW51bGwsdC5sYXN0S2V5Q29kZVRpbWU9MCx0Lmxhc3RDbGljaz17dGltZTowLHg6MCx5OjAsdHlwZToiIn0sdC5sYXN0U2VsZWN0aW9uT3JpZ2luPW51bGwsdC5sYXN0U2VsZWN0aW9uVGltZT0wLHQubGFzdElPU0VudGVyPTAsdC5jb21wb3Npbmc9ITEsdC5jb21wb3NpbmdUaW1lb3V0PW51bGwsdC5jb21wb3NpdGlvbk5vZGVzPVtdLHQuY29tcG9zaXRpb25FbmRlZEF0PS0yZTgsdC5kb21PYnNlcnZlcj1uZXcgYXIodCwoZnVuY3Rpb24oZSxuLHIsbyl7cmV0dXJuIGpuKHQsZSxuLHIsbyl9KSksdC5kb21PYnNlcnZlci5zdGFydCgpLHQuZG9tQ2hhbmdlQ291bnQ9MCx0LmV2ZW50SGFuZGxlcnM9T2JqZWN0LmNyZWF0ZShudWxsKTt2YXIgZT1mdW5jdGlvbihlKXt2YXIgbj1scltlXTt0LmRvbS5hZGRFdmVudExpc3RlbmVyKGUsdC5ldmVudEhhbmRsZXJzW2VdPWZ1bmN0aW9uKGUpeyFncih0LGUpfHxtcih0LGUpfHwhdC5lZGl0YWJsZSYmZS50eXBlIGluIGhyfHxuKHQsZSl9KX07Zm9yKHZhciBuIGluIGxyKWUobik7X3Quc2FmYXJpJiZ0LmRvbS5hZGRFdmVudExpc3RlbmVyKCJpbnB1dCIsKGZ1bmN0aW9uKCl7cmV0dXJuIG51bGx9KSksdnIodCl9ZnVuY3Rpb24gcHIodCxlKXt0Lmxhc3RTZWxlY3Rpb25PcmlnaW49ZSx0Lmxhc3RTZWxlY3Rpb25UaW1lPURhdGUubm93KCl9ZnVuY3Rpb24gZHIodCl7Zm9yKHZhciBlIGluIHQuZG9tT2JzZXJ2ZXIuc3RvcCgpLHQuZXZlbnRIYW5kbGVycyl0LmRvbS5yZW1vdmVFdmVudExpc3RlbmVyKGUsdC5ldmVudEhhbmRsZXJzW2VdKTtjbGVhclRpbWVvdXQodC5jb21wb3NpbmdUaW1lb3V0KX1mdW5jdGlvbiB2cih0KXt0LnNvbWVQcm9wKCJoYW5kbGVET01FdmVudHMiLChmdW5jdGlvbihlKXtmb3IodmFyIG4gaW4gZSl0LmV2ZW50SGFuZGxlcnNbbl18fHQuZG9tLmFkZEV2ZW50TGlzdGVuZXIobix0LmV2ZW50SGFuZGxlcnNbbl09ZnVuY3Rpb24oZSl7cmV0dXJuIG1yKHQsZSl9KX0pKX1mdW5jdGlvbiBtcih0LGUpe3JldHVybiB0LnNvbWVQcm9wKCJoYW5kbGVET01FdmVudHMiLChmdW5jdGlvbihuKXt2YXIgcj1uW2UudHlwZV07cmV0dXJuISFyJiYocih0LGUpfHxlLmRlZmF1bHRQcmV2ZW50ZWQpfSkpfWZ1bmN0aW9uIGdyKHQsZSl7aWYoIWUuYnViYmxlcylyZXR1cm4hMDtpZihlLmRlZmF1bHRQcmV2ZW50ZWQpcmV0dXJuITE7Zm9yKHZhciBuPWUudGFyZ2V0O24hPXQuZG9tO249bi5wYXJlbnROb2RlKWlmKCFufHwxMT09bi5ub2RlVHlwZXx8bi5wbVZpZXdEZXNjJiZuLnBtVmlld0Rlc2Muc3RvcEV2ZW50KGUpKXJldHVybiExO3JldHVybiEwfWZ1bmN0aW9uIHlyKHQsZSl7bXIodCxlKXx8IWxyW2UudHlwZV18fCF0LmVkaXRhYmxlJiZlLnR5cGUgaW4gaHJ8fGxyW2UudHlwZV0odCxlKX1mdW5jdGlvbiB3cih0KXtyZXR1cm57bGVmdDp0LmNsaWVudFgsdG9wOnQuY2xpZW50WX19ZnVuY3Rpb24gYnIodCxlKXt2YXIgbj1lLngtdC5jbGllbnRYLHI9ZS55LXQuY2xpZW50WTtyZXR1cm4gbipuK3IqcjwxMDB9ZnVuY3Rpb24geHIodCxlLG4scixvKXtpZigtMT09cilyZXR1cm4hMTtmb3IodmFyIGk9dC5zdGF0ZS5kb2MucmVzb2x2ZShyKSxzPWZ1bmN0aW9uKHIpe2lmKHQuc29tZVByb3AoZSwoZnVuY3Rpb24oZSl7cmV0dXJuIHI+aS5kZXB0aD9lKHQsbixpLm5vZGVBZnRlcixpLmJlZm9yZShyKSxvLCEwKTplKHQsbixpLm5vZGUociksaS5iZWZvcmUociksbywhMSl9KSkpcmV0dXJue3Y6ITB9fSxhPWkuZGVwdGgrMTthPjA7YS0tKXt2YXIgYz1zKGEpO2lmKGMpcmV0dXJuIGMudn1yZXR1cm4hMX1mdW5jdGlvbiBrcih0LGUsbil7dC5mb2N1c2VkfHx0LmZvY3VzKCk7dmFyIHI9dC5zdGF0ZS50ci5zZXRTZWxlY3Rpb24oZSk7InBvaW50ZXIiPT1uJiZyLnNldE1ldGEoInBvaW50ZXIiLCEwKSx0LmRpc3BhdGNoKHIpfWZ1bmN0aW9uIFNyKHQsZSl7aWYoLTE9PWUpcmV0dXJuITE7dmFyIG49dC5zdGF0ZS5kb2MucmVzb2x2ZShlKSxyPW4ubm9kZUFmdGVyO3JldHVybiEhKHImJnIuaXNBdG9tJiZjWyJOb2RlU2VsZWN0aW9uIl0uaXNTZWxlY3RhYmxlKHIpKSYmKGtyKHQsbmV3IGNbIk5vZGVTZWxlY3Rpb24iXShuKSwicG9pbnRlciIpLCEwKX1mdW5jdGlvbiBDcih0LGUpe2lmKC0xPT1lKXJldHVybiExO3ZhciBuLHIsbz10LnN0YXRlLnNlbGVjdGlvbjtvIGluc3RhbmNlb2YgY1siTm9kZVNlbGVjdGlvbiJdJiYobj1vLm5vZGUpO2Zvcih2YXIgaT10LnN0YXRlLmRvYy5yZXNvbHZlKGUpLHM9aS5kZXB0aCsxO3M+MDtzLS0pe3ZhciBhPXM+aS5kZXB0aD9pLm5vZGVBZnRlcjppLm5vZGUocyk7aWYoY1siTm9kZVNlbGVjdGlvbiJdLmlzU2VsZWN0YWJsZShhKSl7cj1uJiZvLiRmcm9tLmRlcHRoPjAmJnM+PW8uJGZyb20uZGVwdGgmJmkuYmVmb3JlKG8uJGZyb20uZGVwdGgrMSk9PW8uJGZyb20ucG9zP2kuYmVmb3JlKG8uJGZyb20uZGVwdGgpOmkuYmVmb3JlKHMpO2JyZWFrfX1yZXR1cm4gbnVsbCE9ciYmKGtyKHQsY1siTm9kZVNlbGVjdGlvbiJdLmNyZWF0ZSh0LnN0YXRlLmRvYyxyKSwicG9pbnRlciIpLCEwKX1mdW5jdGlvbiBPcih0LGUsbixyLG8pe3JldHVybiB4cih0LCJoYW5kbGVDbGlja09uIixlLG4scil8fHQuc29tZVByb3AoImhhbmRsZUNsaWNrIiwoZnVuY3Rpb24obil7cmV0dXJuIG4odCxlLHIpfSkpfHwobz9Dcih0LG4pOlNyKHQsbikpfWZ1bmN0aW9uIE1yKHQsZSxuLHIpe3JldHVybiB4cih0LCJoYW5kbGVEb3VibGVDbGlja09uIixlLG4scil8fHQuc29tZVByb3AoImhhbmRsZURvdWJsZUNsaWNrIiwoZnVuY3Rpb24obil7cmV0dXJuIG4odCxlLHIpfSkpfWZ1bmN0aW9uIE5yKHQsZSxuLHIpe3JldHVybiB4cih0LCJoYW5kbGVUcmlwbGVDbGlja09uIixlLG4scil8fHQuc29tZVByb3AoImhhbmRsZVRyaXBsZUNsaWNrIiwoZnVuY3Rpb24obil7cmV0dXJuIG4odCxlLHIpfSkpfHxUcih0LG4pfWZ1bmN0aW9uIFRyKHQsZSl7dmFyIG49dC5zdGF0ZS5kb2M7aWYoLTE9PWUpcmV0dXJuISFuLmlubGluZUNvbnRlbnQmJihrcih0LGNbIlRleHRTZWxlY3Rpb24iXS5jcmVhdGUobiwwLG4uY29udGVudC5zaXplKSwicG9pbnRlciIpLCEwKTtmb3IodmFyIHI9bi5yZXNvbHZlKGUpLG89ci5kZXB0aCsxO28+MDtvLS0pe3ZhciBpPW8+ci5kZXB0aD9yLm5vZGVBZnRlcjpyLm5vZGUobykscz1yLmJlZm9yZShvKTtpZihpLmlubGluZUNvbnRlbnQpa3IodCxjWyJUZXh0U2VsZWN0aW9uIl0uY3JlYXRlKG4scysxLHMrMStpLmNvbnRlbnQuc2l6ZSksInBvaW50ZXIiKTtlbHNle2lmKCFjWyJOb2RlU2VsZWN0aW9uIl0uaXNTZWxlY3RhYmxlKGkpKWNvbnRpbnVlO2tyKHQsY1siTm9kZVNlbGVjdGlvbiJdLmNyZWF0ZShuLHMpLCJwb2ludGVyIil9cmV0dXJuITB9fWZ1bmN0aW9uIEFyKHQpe3JldHVybiBJcih0KX1oci5rZXlkb3duPWZ1bmN0aW9uKHQsZSl7aWYodC5zaGlmdEtleT0xNj09ZS5rZXlDb2RlfHxlLnNoaWZ0S2V5LCFScih0LGUpKWlmKHQuZG9tT2JzZXJ2ZXIuZm9yY2VGbHVzaCgpLHQubGFzdEtleUNvZGU9ZS5rZXlDb2RlLHQubGFzdEtleUNvZGVUaW1lPURhdGUubm93KCksIV90Lmlvc3x8MTMhPWUua2V5Q29kZXx8ZS5jdHJsS2V5fHxlLmFsdEtleXx8ZS5tZXRhS2V5KXQuc29tZVByb3AoImhhbmRsZUtleURvd24iLChmdW5jdGlvbihuKXtyZXR1cm4gbih0LGUpfSkpfHxrbih0LGUpP2UucHJldmVudERlZmF1bHQoKTpwcih0LCJrZXkiKTtlbHNle3ZhciBuPURhdGUubm93KCk7dC5sYXN0SU9TRW50ZXI9bixzZXRUaW1lb3V0KChmdW5jdGlvbigpe3QubGFzdElPU0VudGVyPT1uJiYodC5zb21lUHJvcCgiaGFuZGxlS2V5RG93biIsKGZ1bmN0aW9uKGUpe3JldHVybiBlKHQsUXQoMTMsIkVudGVyIikpfSkpLHQubGFzdElPU0VudGVyPTApfSksNTApfX0saHIua2V5dXA9ZnVuY3Rpb24odCxlKXsxNj09ZS5rZXlDb2RlJiYodC5zaGlmdEtleT0hMSl9LGhyLmtleXByZXNzPWZ1bmN0aW9uKHQsZSl7aWYoIShScih0LGUpfHwhZS5jaGFyQ29kZXx8ZS5jdHJsS2V5JiYhZS5hbHRLZXl8fF90Lm1hYyYmZS5tZXRhS2V5KSlpZih0LnNvbWVQcm9wKCJoYW5kbGVLZXlQcmVzcyIsKGZ1bmN0aW9uKG4pe3JldHVybiBuKHQsZSl9KSkpZS5wcmV2ZW50RGVmYXVsdCgpO2Vsc2V7dmFyIG49dC5zdGF0ZS5zZWxlY3Rpb247aWYoIShuIGluc3RhbmNlb2YgY1siVGV4dFNlbGVjdGlvbiJdKXx8IW4uJGZyb20uc2FtZVBhcmVudChuLiR0bykpe3ZhciByPVN0cmluZy5mcm9tQ2hhckNvZGUoZS5jaGFyQ29kZSk7dC5zb21lUHJvcCgiaGFuZGxlVGV4dElucHV0IiwoZnVuY3Rpb24oZSl7cmV0dXJuIGUodCxuLiRmcm9tLnBvcyxuLiR0by5wb3Mscil9KSl8fHQuZGlzcGF0Y2godC5zdGF0ZS50ci5pbnNlcnRUZXh0KHIpLnNjcm9sbEludG9WaWV3KCkpLGUucHJldmVudERlZmF1bHQoKX19fTt2YXIgRXI9X3QubWFjPyJtZXRhS2V5IjoiY3RybEtleSI7bHIubW91c2Vkb3duPWZ1bmN0aW9uKHQsZSl7dC5zaGlmdEtleT1lLnNoaWZ0S2V5O3ZhciBuPUFyKHQpLHI9RGF0ZS5ub3coKSxvPSJzaW5nbGVDbGljayI7ci10Lmxhc3RDbGljay50aW1lPDUwMCYmYnIoZSx0Lmxhc3RDbGljaykmJiFlW0VyXSYmKCJzaW5nbGVDbGljayI9PXQubGFzdENsaWNrLnR5cGU/bz0iZG91YmxlQ2xpY2siOiJkb3VibGVDbGljayI9PXQubGFzdENsaWNrLnR5cGUmJihvPSJ0cmlwbGVDbGljayIpKSx0Lmxhc3RDbGljaz17dGltZTpyLHg6ZS5jbGllbnRYLHk6ZS5jbGllbnRZLHR5cGU6b307dmFyIGk9dC5wb3NBdENvb3Jkcyh3cihlKSk7aSYmKCJzaW5nbGVDbGljayI9PW8/dC5tb3VzZURvd249bmV3IERyKHQsaSxlLG4pOigiZG91YmxlQ2xpY2siPT1vP01yOk5yKSh0LGkucG9zLGkuaW5zaWRlLGUpP2UucHJldmVudERlZmF1bHQoKTpwcih0LCJwb2ludGVyIikpfTt2YXIgRHI9ZnVuY3Rpb24odCxlLG4scil7dmFyIG8saSxzPXRoaXM7aWYodGhpcy52aWV3PXQsdGhpcy5zdGFydERvYz10LnN0YXRlLmRvYyx0aGlzLnBvcz1lLHRoaXMuZXZlbnQ9bix0aGlzLmZsdXNoZWQ9cix0aGlzLnNlbGVjdE5vZGU9bltFcl0sdGhpcy5hbGxvd0RlZmF1bHQ9bi5zaGlmdEtleSxlLmluc2lkZT4tMSlvPXQuc3RhdGUuZG9jLm5vZGVBdChlLmluc2lkZSksaT1lLmluc2lkZTtlbHNle3ZhciBhPXQuc3RhdGUuZG9jLnJlc29sdmUoZS5wb3MpO289YS5wYXJlbnQsaT1hLmRlcHRoP2EuYmVmb3JlKCk6MH10aGlzLm1pZ2h0RHJhZz1udWxsO3ZhciB1PXI/bnVsbDpuLnRhcmdldCxsPXU/dC5kb2NWaWV3Lm5lYXJlc3REZXNjKHUsITApOm51bGw7dGhpcy50YXJnZXQ9bD9sLmRvbTpudWxsLChvLnR5cGUuc3BlYy5kcmFnZ2FibGUmJiExIT09by50eXBlLnNwZWMuc2VsZWN0YWJsZXx8dC5zdGF0ZS5zZWxlY3Rpb24gaW5zdGFuY2VvZiBjWyJOb2RlU2VsZWN0aW9uIl0mJmk9PXQuc3RhdGUuc2VsZWN0aW9uLmZyb20pJiYodGhpcy5taWdodERyYWc9e25vZGU6byxwb3M6aSxhZGRBdHRyOnRoaXMudGFyZ2V0JiYhdGhpcy50YXJnZXQuZHJhZ2dhYmxlLHNldFVuZWRpdGFibGU6dGhpcy50YXJnZXQmJl90LmdlY2tvJiYhdGhpcy50YXJnZXQuaGFzQXR0cmlidXRlKCJjb250ZW50RWRpdGFibGUiKX0pLHRoaXMudGFyZ2V0JiZ0aGlzLm1pZ2h0RHJhZyYmKHRoaXMubWlnaHREcmFnLmFkZEF0dHJ8fHRoaXMubWlnaHREcmFnLnNldFVuZWRpdGFibGUpJiYodGhpcy52aWV3LmRvbU9ic2VydmVyLnN0b3AoKSx0aGlzLm1pZ2h0RHJhZy5hZGRBdHRyJiYodGhpcy50YXJnZXQuZHJhZ2dhYmxlPSEwKSx0aGlzLm1pZ2h0RHJhZy5zZXRVbmVkaXRhYmxlJiZzZXRUaW1lb3V0KChmdW5jdGlvbigpe3JldHVybiBzLnRhcmdldC5zZXRBdHRyaWJ1dGUoImNvbnRlbnRFZGl0YWJsZSIsImZhbHNlIil9KSwyMCksdGhpcy52aWV3LmRvbU9ic2VydmVyLnN0YXJ0KCkpLHQucm9vdC5hZGRFdmVudExpc3RlbmVyKCJtb3VzZXVwIix0aGlzLnVwPXRoaXMudXAuYmluZCh0aGlzKSksdC5yb290LmFkZEV2ZW50TGlzdGVuZXIoIm1vdXNlbW92ZSIsdGhpcy5tb3ZlPXRoaXMubW92ZS5iaW5kKHRoaXMpKSxwcih0LCJwb2ludGVyIil9O2Z1bmN0aW9uIFJyKHQsZSl7cmV0dXJuISF0LmNvbXBvc2luZ3x8ISEoX3Quc2FmYXJpJiZNYXRoLmFicyhlLnRpbWVTdGFtcC10LmNvbXBvc2l0aW9uRW5kZWRBdCk8NTAwKSYmKHQuY29tcG9zaXRpb25FbmRlZEF0PS0yZTgsITApfURyLnByb3RvdHlwZS5kb25lPWZ1bmN0aW9uKCl7dGhpcy52aWV3LnJvb3QucmVtb3ZlRXZlbnRMaXN0ZW5lcigibW91c2V1cCIsdGhpcy51cCksdGhpcy52aWV3LnJvb3QucmVtb3ZlRXZlbnRMaXN0ZW5lcigibW91c2Vtb3ZlIix0aGlzLm1vdmUpLHRoaXMubWlnaHREcmFnJiZ0aGlzLnRhcmdldCYmKHRoaXMudmlldy5kb21PYnNlcnZlci5zdG9wKCksdGhpcy5taWdodERyYWcuYWRkQXR0ciYmdGhpcy50YXJnZXQucmVtb3ZlQXR0cmlidXRlKCJkcmFnZ2FibGUiKSx0aGlzLm1pZ2h0RHJhZy5zZXRVbmVkaXRhYmxlJiZ0aGlzLnRhcmdldC5yZW1vdmVBdHRyaWJ1dGUoImNvbnRlbnRFZGl0YWJsZSIpLHRoaXMudmlldy5kb21PYnNlcnZlci5zdGFydCgpKSx0aGlzLnZpZXcubW91c2VEb3duPW51bGx9LERyLnByb3RvdHlwZS51cD1mdW5jdGlvbih0KXtpZih0aGlzLmRvbmUoKSx0aGlzLnZpZXcuZG9tLmNvbnRhaW5zKDM9PXQudGFyZ2V0Lm5vZGVUeXBlP3QudGFyZ2V0LnBhcmVudE5vZGU6dC50YXJnZXQpKXt2YXIgZT10aGlzLnBvczt0aGlzLnZpZXcuc3RhdGUuZG9jIT10aGlzLnN0YXJ0RG9jJiYoZT10aGlzLnZpZXcucG9zQXRDb29yZHMod3IodCkpKSx0aGlzLmFsbG93RGVmYXVsdHx8IWU/cHIodGhpcy52aWV3LCJwb2ludGVyIik6T3IodGhpcy52aWV3LGUucG9zLGUuaW5zaWRlLHQsdGhpcy5zZWxlY3ROb2RlKT90LnByZXZlbnREZWZhdWx0KCk6IXRoaXMuZmx1c2hlZCYmKCFfdC5jaHJvbWV8fHRoaXMudmlldy5zdGF0ZS5zZWxlY3Rpb24gaW5zdGFuY2VvZiBjWyJUZXh0U2VsZWN0aW9uIl18fGUucG9zIT10aGlzLnZpZXcuc3RhdGUuc2VsZWN0aW9uLmZyb20mJmUucG9zIT10aGlzLnZpZXcuc3RhdGUuc2VsZWN0aW9uLnRvKT9wcih0aGlzLnZpZXcsInBvaW50ZXIiKTooa3IodGhpcy52aWV3LGNbIlNlbGVjdGlvbiJdLm5lYXIodGhpcy52aWV3LnN0YXRlLmRvYy5yZXNvbHZlKGUucG9zKSksInBvaW50ZXIiKSx0LnByZXZlbnREZWZhdWx0KCkpfX0sRHIucHJvdG90eXBlLm1vdmU9ZnVuY3Rpb24odCl7IXRoaXMuYWxsb3dEZWZhdWx0JiYoTWF0aC5hYnModGhpcy5ldmVudC54LXQuY2xpZW50WCk+NHx8TWF0aC5hYnModGhpcy5ldmVudC55LXQuY2xpZW50WSk+NCkmJih0aGlzLmFsbG93RGVmYXVsdD0hMCkscHIodGhpcy52aWV3LCJwb2ludGVyIil9LGxyLnRvdWNoZG93bj1mdW5jdGlvbih0KXtBcih0KSxwcih0LCJwb2ludGVyIil9LGxyLmNvbnRleHRtZW51PWZ1bmN0aW9uKHQpe3JldHVybiBBcih0KX07dmFyIHpyPV90LmFuZHJvaWQ/NWUzOi0xO2Z1bmN0aW9uIFByKHQsZSl7Y2xlYXJUaW1lb3V0KHQuY29tcG9zaW5nVGltZW91dCksZT4tMSYmKHQuY29tcG9zaW5nVGltZW91dD1zZXRUaW1lb3V0KChmdW5jdGlvbigpe3JldHVybiBJcih0KX0pLGUpKX1mdW5jdGlvbiBJcih0LGUpe3QuZG9tT2JzZXJ2ZXIuZm9yY2VGbHVzaCgpLHQuY29tcG9zaW5nPSExO3doaWxlKHQuY29tcG9zaXRpb25Ob2Rlcy5sZW5ndGg+MCl0LmNvbXBvc2l0aW9uTm9kZXMucG9wKCkubWFya1BhcmVudHNEaXJ0eSgpO2lmKGV8fHQuZG9jVmlldy5kaXJ0eSl7dmFyIG49U24odCk7cmV0dXJuIG4uZXEodC5zdGF0ZS5zZWxlY3Rpb24pP3QudXBkYXRlU3RhdGUodC5zdGF0ZSk6dC5kaXNwYXRjaCh0LnN0YXRlLnRyLnNldFNlbGVjdGlvbihuKSksITB9cmV0dXJuITF9ZnVuY3Rpb24gQnIodCxlKXt2YXIgbj10LmRvbS5vd25lckRvY3VtZW50LHI9bi5ib2R5LmFwcGVuZENoaWxkKG4uY3JlYXRlRWxlbWVudCgiZGl2IikpO3IuYXBwZW5kQ2hpbGQoZSksci5zdHlsZS5jc3NUZXh0PSJwb3NpdGlvbjogZml4ZWQ7IGxlZnQ6IC0xMDAwMHB4OyB0b3A6IDEwcHgiO3ZhciBvPWdldFNlbGVjdGlvbigpLGk9bi5jcmVhdGVSYW5nZSgpO2kuc2VsZWN0Tm9kZUNvbnRlbnRzKGUpLHQuZG9tLmJsdXIoKSxvLnJlbW92ZUFsbFJhbmdlcygpLG8uYWRkUmFuZ2UoaSksc2V0VGltZW91dCgoZnVuY3Rpb24oKXtuLmJvZHkucmVtb3ZlQ2hpbGQociksdC5mb2N1cygpfSksNTApfWhyLmNvbXBvc2l0aW9uc3RhcnQ9aHIuY29tcG9zaXRpb251cGRhdGU9ZnVuY3Rpb24odCl7aWYoIXQuY29tcG9zaW5nKXt0LmRvbU9ic2VydmVyLmZsdXNoKCk7dmFyIGU9dC5zdGF0ZSxuPWUuc2VsZWN0aW9uLiRmcm9tO2lmKGUuc2VsZWN0aW9uLmVtcHR5JiYoZS5zdG9yZWRNYXJrc3x8IW4udGV4dE9mZnNldCYmbi5wYXJlbnRPZmZzZXQmJm4ubm9kZUJlZm9yZS5tYXJrcy5zb21lKChmdW5jdGlvbih0KXtyZXR1cm4hMT09PXQudHlwZS5zcGVjLmluY2x1c2l2ZX0pKSkpdC5tYXJrQ3Vyc29yPXQuc3RhdGUuc3RvcmVkTWFya3N8fG4ubWFya3MoKSxJcih0LCEwKSx0Lm1hcmtDdXJzb3I9bnVsbDtlbHNlIGlmKElyKHQpLF90LmdlY2tvJiZlLnNlbGVjdGlvbi5lbXB0eSYmbi5wYXJlbnRPZmZzZXQmJiFuLnRleHRPZmZzZXQmJm4ubm9kZUJlZm9yZS5tYXJrcy5sZW5ndGgpZm9yKHZhciByPXQucm9vdC5nZXRTZWxlY3Rpb24oKSxvPXIuZm9jdXNOb2RlLGk9ci5mb2N1c09mZnNldDtvJiYxPT1vLm5vZGVUeXBlJiYwIT1pOyl7dmFyIHM9aTwwP28ubGFzdENoaWxkOm8uY2hpbGROb2Rlc1tpLTFdO2lmKCFzKWJyZWFrO2lmKDM9PXMubm9kZVR5cGUpe3IuY29sbGFwc2UocyxzLm5vZGVWYWx1ZS5sZW5ndGgpO2JyZWFrfW89cyxpPS0xfXQuY29tcG9zaW5nPSEwfVByKHQsenIpfSxoci5jb21wb3NpdGlvbmVuZD1mdW5jdGlvbih0LGUpe3QuY29tcG9zaW5nJiYodC5jb21wb3Npbmc9ITEsdC5jb21wb3NpdGlvbkVuZGVkQXQ9ZS50aW1lU3RhbXAsUHIodCwyMCkpfTt2YXIgX3I9X3QuaWUmJl90LmllX3ZlcnNpb248MTV8fF90LmlvcyYmX3Qud2Via2l0X3ZlcnNpb248NjA0O2Z1bmN0aW9uIEZyKHQpe3JldHVybiAwPT10Lm9wZW5TdGFydCYmMD09dC5vcGVuRW5kJiYxPT10LmNvbnRlbnQuY2hpbGRDb3VudD90LmNvbnRlbnQuZmlyc3RDaGlsZDpudWxsfWZ1bmN0aW9uIGpyKHQsZSl7dmFyIG49dC5kb20ub3duZXJEb2N1bWVudCxyPXQuc2hpZnRLZXl8fHQuc3RhdGUuc2VsZWN0aW9uLiRmcm9tLnBhcmVudC50eXBlLnNwZWMuY29kZSxvPW4uYm9keS5hcHBlbmRDaGlsZChuLmNyZWF0ZUVsZW1lbnQocj8idGV4dGFyZWEiOiJkaXYiKSk7cnx8KG8uY29udGVudEVkaXRhYmxlPSJ0cnVlIiksby5zdHlsZS5jc3NUZXh0PSJwb3NpdGlvbjogZml4ZWQ7IGxlZnQ6IC0xMDAwMHB4OyB0b3A6IDEwcHgiLG8uZm9jdXMoKSxzZXRUaW1lb3V0KChmdW5jdGlvbigpe3QuZm9jdXMoKSxuLmJvZHkucmVtb3ZlQ2hpbGQobykscj8kcih0LG8udmFsdWUsbnVsbCxlKTokcih0LG8udGV4dENvbnRlbnQsby5pbm5lckhUTUwsZSl9KSw1MCl9ZnVuY3Rpb24gJHIodCxlLG4scil7dmFyIG89SG4odCxlLG4sdC5zaGlmdEtleSx0LnN0YXRlLnNlbGVjdGlvbi4kZnJvbSk7aWYoIXQuc29tZVByb3AoImhhbmRsZVBhc3RlIiwoZnVuY3Rpb24oZSl7cmV0dXJuIGUodCxyLG98fHcuZW1wdHkpfSkpJiZvKXt2YXIgaT1GcihvKSxzPWk/dC5zdGF0ZS50ci5yZXBsYWNlU2VsZWN0aW9uV2l0aChpLHQuc2hpZnRLZXkpOnQuc3RhdGUudHIucmVwbGFjZVNlbGVjdGlvbihvKTt0LmRpc3BhdGNoKHMuc2Nyb2xsSW50b1ZpZXcoKS5zZXRNZXRhKCJwYXN0ZSIsITApLnNldE1ldGEoInVpRXZlbnQiLCJwYXN0ZSIpKX19bHIuY29weT1oci5jdXQ9ZnVuY3Rpb24odCxlKXt2YXIgbj10LnN0YXRlLnNlbGVjdGlvbixyPSJjdXQiPT1lLnR5cGU7aWYoIW4uZW1wdHkpe3ZhciBvPV9yP251bGw6ZS5jbGlwYm9hcmREYXRhLGk9bi5jb250ZW50KCkscz1Xbih0LGkpLGE9cy5kb20sYz1zLnRleHQ7bz8oZS5wcmV2ZW50RGVmYXVsdCgpLG8uY2xlYXJEYXRhKCksby5zZXREYXRhKCJ0ZXh0L2h0bWwiLGEuaW5uZXJIVE1MKSxvLnNldERhdGEoInRleHQvcGxhaW4iLGMpKTpCcih0LGEpLHImJnQuZGlzcGF0Y2godC5zdGF0ZS50ci5kZWxldGVTZWxlY3Rpb24oKS5zY3JvbGxJbnRvVmlldygpLnNldE1ldGEoInVpRXZlbnQiLCJjdXQiKSl9fSxoci5wYXN0ZT1mdW5jdGlvbih0LGUpe3ZhciBuPV9yP251bGw6ZS5jbGlwYm9hcmREYXRhLHI9biYmbi5nZXREYXRhKCJ0ZXh0L2h0bWwiKSxvPW4mJm4uZ2V0RGF0YSgidGV4dC9wbGFpbiIpO24mJihyfHxvfHxuLmZpbGVzLmxlbmd0aCk/KCRyKHQsbyxyLGUpLGUucHJldmVudERlZmF1bHQoKSk6anIodCxlKX07dmFyIFZyPWZ1bmN0aW9uKHQsZSl7dGhpcy5zbGljZT10LHRoaXMubW92ZT1lfSxMcj1fdC5tYWM/ImFsdEtleSI6ImN0cmxLZXkiO2Zvcih2YXIgcXIgaW4gbHIuZHJhZ3N0YXJ0PWZ1bmN0aW9uKHQsZSl7dmFyIG49dC5tb3VzZURvd247aWYobiYmbi5kb25lKCksZS5kYXRhVHJhbnNmZXIpe3ZhciByPXQuc3RhdGUuc2VsZWN0aW9uLG89ci5lbXB0eT9udWxsOnQucG9zQXRDb29yZHMod3IoZSkpO2lmKG8mJm8ucG9zPj1yLmZyb20mJm8ucG9zPD0ociBpbnN0YW5jZW9mIGNbIk5vZGVTZWxlY3Rpb24iXT9yLnRvLTE6ci50bykpO2Vsc2UgaWYobiYmbi5taWdodERyYWcpdC5kaXNwYXRjaCh0LnN0YXRlLnRyLnNldFNlbGVjdGlvbihjWyJOb2RlU2VsZWN0aW9uIl0uY3JlYXRlKHQuc3RhdGUuZG9jLG4ubWlnaHREcmFnLnBvcykpKTtlbHNlIGlmKGUudGFyZ2V0JiYxPT1lLnRhcmdldC5ub2RlVHlwZSl7dmFyIGk9dC5kb2NWaWV3Lm5lYXJlc3REZXNjKGUudGFyZ2V0LCEwKTtpZighaXx8IWkubm9kZS50eXBlLnNwZWMuZHJhZ2dhYmxlfHxpPT10LmRvY1ZpZXcpcmV0dXJuO3QuZGlzcGF0Y2godC5zdGF0ZS50ci5zZXRTZWxlY3Rpb24oY1siTm9kZVNlbGVjdGlvbiJdLmNyZWF0ZSh0LnN0YXRlLmRvYyxpLnBvc0JlZm9yZSkpKX12YXIgcz10LnN0YXRlLnNlbGVjdGlvbi5jb250ZW50KCksYT1Xbih0LHMpLHU9YS5kb20sbD1hLnRleHQ7ZS5kYXRhVHJhbnNmZXIuY2xlYXJEYXRhKCksZS5kYXRhVHJhbnNmZXIuc2V0RGF0YShfcj8iVGV4dCI6InRleHQvaHRtbCIsdS5pbm5lckhUTUwpLF9yfHxlLmRhdGFUcmFuc2Zlci5zZXREYXRhKCJ0ZXh0L3BsYWluIixsKSx0LmRyYWdnaW5nPW5ldyBWcihzLCFlW0xyXSl9fSxsci5kcmFnZW5kPWZ1bmN0aW9uKHQpe3dpbmRvdy5zZXRUaW1lb3V0KChmdW5jdGlvbigpe3JldHVybiB0LmRyYWdnaW5nPW51bGx9KSw1MCl9LGhyLmRyYWdvdmVyPWhyLmRyYWdlbnRlcj1mdW5jdGlvbih0LGUpe3JldHVybiBlLnByZXZlbnREZWZhdWx0KCl9LGhyLmRyb3A9ZnVuY3Rpb24odCxlKXt2YXIgbj10LmRyYWdnaW5nO2lmKHQuZHJhZ2dpbmc9bnVsbCxlLmRhdGFUcmFuc2Zlcil7dmFyIHI9dC5wb3NBdENvb3Jkcyh3cihlKSk7aWYocil7dmFyIG89dC5zdGF0ZS5kb2MucmVzb2x2ZShyLnBvcyk7aWYobyl7dmFyIGk9biYmbi5zbGljZXx8SG4odCxlLmRhdGFUcmFuc2Zlci5nZXREYXRhKF9yPyJUZXh0IjoidGV4dC9wbGFpbiIpLF9yP251bGw6ZS5kYXRhVHJhbnNmZXIuZ2V0RGF0YSgidGV4dC9odG1sIiksITEsbyk7aWYodC5zb21lUHJvcCgiaGFuZGxlRHJvcCIsKGZ1bmN0aW9uKHIpe3JldHVybiByKHQsZSxpfHx3LmVtcHR5LG4mJm4ubW92ZSl9KSkpZS5wcmV2ZW50RGVmYXVsdCgpO2Vsc2UgaWYoaSl7ZS5wcmV2ZW50RGVmYXVsdCgpO3ZhciBzPWk/T2JqZWN0KEJ0WyJoIl0pKHQuc3RhdGUuZG9jLG8ucG9zLGkpOm8ucG9zO251bGw9PXMmJihzPW8ucG9zKTt2YXIgYT10LnN0YXRlLnRyO24mJm4ubW92ZSYmYS5kZWxldGVTZWxlY3Rpb24oKTt2YXIgdT1hLm1hcHBpbmcubWFwKHMpLGw9MD09aS5vcGVuU3RhcnQmJjA9PWkub3BlbkVuZCYmMT09aS5jb250ZW50LmNoaWxkQ291bnQsaD1hLmRvYztpZihsP2EucmVwbGFjZVJhbmdlV2l0aCh1LHUsaS5jb250ZW50LmZpcnN0Q2hpbGQpOmEucmVwbGFjZVJhbmdlKHUsdSxpKSwhYS5kb2MuZXEoaCkpe3ZhciBmPWEuZG9jLnJlc29sdmUodSk7bCYmY1siTm9kZVNlbGVjdGlvbiJdLmlzU2VsZWN0YWJsZShpLmNvbnRlbnQuZmlyc3RDaGlsZCkmJmYubm9kZUFmdGVyJiZmLm5vZGVBZnRlci5zYW1lTWFya3VwKGkuY29udGVudC5maXJzdENoaWxkKT9hLnNldFNlbGVjdGlvbihuZXcgY1siTm9kZVNlbGVjdGlvbiJdKGYpKTphLnNldFNlbGVjdGlvbih6bih0LGYsYS5kb2MucmVzb2x2ZShhLm1hcHBpbmcubWFwKHMpKSkpLHQuZm9jdXMoKSx0LmRpc3BhdGNoKGEuc2V0TWV0YSgidWlFdmVudCIsImRyb3AiKSl9fX19fX0sbHIuZm9jdXM9ZnVuY3Rpb24odCl7dC5mb2N1c2VkfHwodC5kb21PYnNlcnZlci5zdG9wKCksdC5kb20uY2xhc3NMaXN0LmFkZCgiUHJvc2VNaXJyb3ItZm9jdXNlZCIpLHQuZG9tT2JzZXJ2ZXIuc3RhcnQoKSx0LmZvY3VzZWQ9ITAsc2V0VGltZW91dCgoZnVuY3Rpb24oKXt0LmRvY1ZpZXcmJnQuaGFzRm9jdXMoKSYmIXQuZG9tT2JzZXJ2ZXIuY3VycmVudFNlbGVjdGlvbi5lcSh0LnJvb3QuZ2V0U2VsZWN0aW9uKCkpJiZDbih0KX0pLDIwKSl9LGxyLmJsdXI9ZnVuY3Rpb24odCl7dC5mb2N1c2VkJiYodC5kb21PYnNlcnZlci5zdG9wKCksdC5kb20uY2xhc3NMaXN0LnJlbW92ZSgiUHJvc2VNaXJyb3ItZm9jdXNlZCIpLHQuZG9tT2JzZXJ2ZXIuc3RhcnQoKSx0LmRvbU9ic2VydmVyLmN1cnJlbnRTZWxlY3Rpb24uc2V0KHt9KSx0LmZvY3VzZWQ9ITEpfSxsci5iZWZvcmVpbnB1dD1mdW5jdGlvbih0LGUpe2lmKF90LmNocm9tZSYmX3QuYW5kcm9pZCYmImRlbGV0ZUNvbnRlbnRCYWNrd2FyZCI9PWUuaW5wdXRUeXBlKXt2YXIgbj10LmRvbUNoYW5nZUNvdW50O3NldFRpbWVvdXQoKGZ1bmN0aW9uKCl7aWYodC5kb21DaGFuZ2VDb3VudD09biYmKHQuZG9tLmJsdXIoKSx0LmZvY3VzKCksIXQuc29tZVByb3AoImhhbmRsZUtleURvd24iLChmdW5jdGlvbihlKXtyZXR1cm4gZSh0LFF0KDgsIkJhY2tzcGFjZSIpKX0pKSkpe3ZhciBlPXQuc3RhdGUuc2VsZWN0aW9uLHI9ZS4kY3Vyc29yO3ImJnIucG9zPjAmJnQuZGlzcGF0Y2godC5zdGF0ZS50ci5kZWxldGUoci5wb3MtMSxyLnBvcykuc2Nyb2xsSW50b1ZpZXcoKSl9fSksNTApfX0saHIpbHJbcXJdPWhyW3FyXTtmdW5jdGlvbiBKcih0LGUpe2lmKHQ9PWUpcmV0dXJuITA7Zm9yKHZhciBuIGluIHQpaWYodFtuXSE9PWVbbl0pcmV0dXJuITE7Zm9yKHZhciByIGluIGUpaWYoIShyIGluIHQpKXJldHVybiExO3JldHVybiEwfXZhciBXcj1mdW5jdGlvbih0LGUpe3RoaXMuc3BlYz1lfHxZcix0aGlzLnNpZGU9dGhpcy5zcGVjLnNpZGV8fDAsdGhpcy50b0RPTT10fTtXci5wcm90b3R5cGUubWFwPWZ1bmN0aW9uKHQsZSxuLHIpe3ZhciBvPXQubWFwUmVzdWx0KGUuZnJvbStyLHRoaXMuc2lkZTwwPy0xOjEpLGk9by5wb3Mscz1vLmRlbGV0ZWQ7cmV0dXJuIHM/bnVsbDpuZXcgVXIoaS1uLGktbix0aGlzKX0sV3IucHJvdG90eXBlLnZhbGlkPWZ1bmN0aW9uKCl7cmV0dXJuITB9LFdyLnByb3RvdHlwZS5lcT1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcz09dHx8dCBpbnN0YW5jZW9mIFdyJiYodGhpcy5zcGVjLmtleSYmdGhpcy5zcGVjLmtleT09dC5zcGVjLmtleXx8dGhpcy50b0RPTT09dC50b0RPTSYmSnIodGhpcy5zcGVjLHQuc3BlYykpfTt2YXIgSHI9ZnVuY3Rpb24odCxlKXt0aGlzLnNwZWM9ZXx8WXIsdGhpcy5hdHRycz10fTtIci5wcm90b3R5cGUubWFwPWZ1bmN0aW9uKHQsZSxuLHIpe3ZhciBvPXQubWFwKGUuZnJvbStyLHRoaXMuc3BlYy5pbmNsdXNpdmVTdGFydD8tMToxKS1uLGk9dC5tYXAoZS50bytyLHRoaXMuc3BlYy5pbmNsdXNpdmVFbmQ/MTotMSktbjtyZXR1cm4gbz49aT9udWxsOm5ldyBVcihvLGksdGhpcyl9LEhyLnByb3RvdHlwZS52YWxpZD1mdW5jdGlvbih0LGUpe3JldHVybiBlLmZyb208ZS50b30sSHIucHJvdG90eXBlLmVxPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzPT10fHx0IGluc3RhbmNlb2YgSHImJkpyKHRoaXMuYXR0cnMsdC5hdHRycykmJkpyKHRoaXMuc3BlYyx0LnNwZWMpfSxIci5pcz1mdW5jdGlvbih0KXtyZXR1cm4gdC50eXBlIGluc3RhbmNlb2YgSHJ9O3ZhciBLcj1mdW5jdGlvbih0LGUpe3RoaXMuc3BlYz1lfHxZcix0aGlzLmF0dHJzPXR9O0tyLnByb3RvdHlwZS5tYXA9ZnVuY3Rpb24odCxlLG4scil7dmFyIG89dC5tYXBSZXN1bHQoZS5mcm9tK3IsMSk7aWYoby5kZWxldGVkKXJldHVybiBudWxsO3ZhciBpPXQubWFwUmVzdWx0KGUudG8rciwtMSk7cmV0dXJuIGkuZGVsZXRlZHx8aS5wb3M8PW8ucG9zP251bGw6bmV3IFVyKG8ucG9zLW4saS5wb3Mtbix0aGlzKX0sS3IucHJvdG90eXBlLnZhbGlkPWZ1bmN0aW9uKHQsZSl7dmFyIG49dC5jb250ZW50LmZpbmRJbmRleChlLmZyb20pLHI9bi5pbmRleCxvPW4ub2Zmc2V0O3JldHVybiBvPT1lLmZyb20mJm8rdC5jaGlsZChyKS5ub2RlU2l6ZT09ZS50b30sS3IucHJvdG90eXBlLmVxPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzPT10fHx0IGluc3RhbmNlb2YgS3ImJkpyKHRoaXMuYXR0cnMsdC5hdHRycykmJkpyKHRoaXMuc3BlYyx0LnNwZWMpfTt2YXIgVXI9ZnVuY3Rpb24odCxlLG4pe3RoaXMuZnJvbT10LHRoaXMudG89ZSx0aGlzLnR5cGU9bn0sR3I9e3NwZWM6e2NvbmZpZ3VyYWJsZTohMH19O1VyLnByb3RvdHlwZS5jb3B5PWZ1bmN0aW9uKHQsZSl7cmV0dXJuIG5ldyBVcih0LGUsdGhpcy50eXBlKX0sVXIucHJvdG90eXBlLmVxPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIHZvaWQgMD09PWUmJihlPTApLHRoaXMudHlwZS5lcSh0LnR5cGUpJiZ0aGlzLmZyb20rZT09dC5mcm9tJiZ0aGlzLnRvK2U9PXQudG99LFVyLnByb3RvdHlwZS5tYXA9ZnVuY3Rpb24odCxlLG4pe3JldHVybiB0aGlzLnR5cGUubWFwKHQsdGhpcyxlLG4pfSxVci53aWRnZXQ9ZnVuY3Rpb24odCxlLG4pe3JldHVybiBuZXcgVXIodCx0LG5ldyBXcihlLG4pKX0sVXIuaW5saW5lPWZ1bmN0aW9uKHQsZSxuLHIpe3JldHVybiBuZXcgVXIodCxlLG5ldyBIcihuLHIpKX0sVXIubm9kZT1mdW5jdGlvbih0LGUsbixyKXtyZXR1cm4gbmV3IFVyKHQsZSxuZXcgS3IobixyKSl9LEdyLnNwZWMuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudHlwZS5zcGVjfSxPYmplY3QuZGVmaW5lUHJvcGVydGllcyhVci5wcm90b3R5cGUsR3IpO3ZhciBYcj1bXSxZcj17fSxacj1mdW5jdGlvbih0LGUpe3RoaXMubG9jYWw9dCYmdC5sZW5ndGg/dDpYcix0aGlzLmNoaWxkcmVuPWUmJmUubGVuZ3RoP2U6WHJ9O1pyLmNyZWF0ZT1mdW5jdGlvbih0LGUpe3JldHVybiBlLmxlbmd0aD9zbyhlLHQsMCxZcik6UXJ9LFpyLnByb3RvdHlwZS5maW5kPWZ1bmN0aW9uKHQsZSxuKXt2YXIgcj1bXTtyZXR1cm4gdGhpcy5maW5kSW5uZXIobnVsbD09dD8wOnQsbnVsbD09ZT8xZTk6ZSxyLDAsbikscn0sWnIucHJvdG90eXBlLmZpbmRJbm5lcj1mdW5jdGlvbih0LGUsbixyLG8pe2Zvcih2YXIgaT0wO2k8dGhpcy5sb2NhbC5sZW5ndGg7aSsrKXt2YXIgcz10aGlzLmxvY2FsW2ldO3MuZnJvbTw9ZSYmcy50bz49dCYmKCFvfHxvKHMuc3BlYykpJiZuLnB1c2gocy5jb3B5KHMuZnJvbStyLHMudG8rcikpfWZvcih2YXIgYT0wO2E8dGhpcy5jaGlsZHJlbi5sZW5ndGg7YSs9MylpZih0aGlzLmNoaWxkcmVuW2FdPGUmJnRoaXMuY2hpbGRyZW5bYSsxXT50KXt2YXIgYz10aGlzLmNoaWxkcmVuW2FdKzE7dGhpcy5jaGlsZHJlblthKzJdLmZpbmRJbm5lcih0LWMsZS1jLG4scitjLG8pfX0sWnIucHJvdG90eXBlLm1hcD1mdW5jdGlvbih0LGUsbil7cmV0dXJuIHRoaXM9PVFyfHwwPT10Lm1hcHMubGVuZ3RoP3RoaXM6dGhpcy5tYXBJbm5lcih0LGUsMCwwLG58fFlyKX0sWnIucHJvdG90eXBlLm1hcElubmVyPWZ1bmN0aW9uKHQsZSxuLHIsbyl7Zm9yKHZhciBpLHM9MDtzPHRoaXMubG9jYWwubGVuZ3RoO3MrKyl7dmFyIGE9dGhpcy5sb2NhbFtzXS5tYXAodCxuLHIpO2EmJmEudHlwZS52YWxpZChlLGEpPyhpfHwoaT1bXSkpLnB1c2goYSk6by5vblJlbW92ZSYmby5vblJlbW92ZSh0aGlzLmxvY2FsW3NdLnNwZWMpfXJldHVybiB0aGlzLmNoaWxkcmVuLmxlbmd0aD9lbyh0aGlzLmNoaWxkcmVuLGksdCxlLG4scixvKTppP25ldyBacihpLnNvcnQoYW8pKTpRcn0sWnIucHJvdG90eXBlLmFkZD1mdW5jdGlvbih0LGUpe3JldHVybiBlLmxlbmd0aD90aGlzPT1Rcj9aci5jcmVhdGUodCxlKTp0aGlzLmFkZElubmVyKHQsZSwwKTp0aGlzfSxaci5wcm90b3R5cGUuYWRkSW5uZXI9ZnVuY3Rpb24odCxlLG4pe3ZhciByLG89dGhpcyxpPTA7dC5mb3JFYWNoKChmdW5jdGlvbih0LHMpe3ZhciBhLGM9cytuO2lmKGE9b28oZSx0LGMpKXtyfHwocj1vLmNoaWxkcmVuLnNsaWNlKCkpO3doaWxlKGk8ci5sZW5ndGgmJnJbaV08cylpKz0zO3JbaV09PXM/cltpKzJdPXJbaSsyXS5hZGRJbm5lcih0LGEsYysxKTpyLnNwbGljZShpLDAscyxzK3Qubm9kZVNpemUsc28oYSx0LGMrMSxZcikpLGkrPTN9fSkpO3ZhciBzPW5vKGk/aW8oZSk6ZSwtbik7cmV0dXJuIG5ldyBacihzLmxlbmd0aD90aGlzLmxvY2FsLmNvbmNhdChzKS5zb3J0KGFvKTp0aGlzLmxvY2FsLHJ8fHRoaXMuY2hpbGRyZW4pfSxaci5wcm90b3R5cGUucmVtb3ZlPWZ1bmN0aW9uKHQpe3JldHVybiAwPT10Lmxlbmd0aHx8dGhpcz09UXI/dGhpczp0aGlzLnJlbW92ZUlubmVyKHQsMCl9LFpyLnByb3RvdHlwZS5yZW1vdmVJbm5lcj1mdW5jdGlvbih0LGUpe2Zvcih2YXIgbj10aGlzLmNoaWxkcmVuLHI9dGhpcy5sb2NhbCxvPTA7bzxuLmxlbmd0aDtvKz0zKXtmb3IodmFyIGk9dm9pZCAwLHM9bltvXStlLGE9bltvKzFdK2UsYz0wLHU9dm9pZCAwO2M8dC5sZW5ndGg7YysrKSh1PXRbY10pJiZ1LmZyb20+cyYmdS50bzxhJiYodFtjXT1udWxsLChpfHwoaT1bXSkpLnB1c2godSkpO2lmKGkpe249PXRoaXMuY2hpbGRyZW4mJihuPXRoaXMuY2hpbGRyZW4uc2xpY2UoKSk7dmFyIGw9bltvKzJdLnJlbW92ZUlubmVyKGkscysxKTtsIT1Rcj9uW28rMl09bDoobi5zcGxpY2UobywzKSxvLT0zKX19aWYoci5sZW5ndGgpZm9yKHZhciBoPTAsZj12b2lkIDA7aDx0Lmxlbmd0aDtoKyspaWYoZj10W2hdKWZvcih2YXIgcD0wO3A8ci5sZW5ndGg7cCsrKXJbcF0uZXEoZixlKSYmKHI9PXRoaXMubG9jYWwmJihyPXRoaXMubG9jYWwuc2xpY2UoKSksci5zcGxpY2UocC0tLDEpKTtyZXR1cm4gbj09dGhpcy5jaGlsZHJlbiYmcj09dGhpcy5sb2NhbD90aGlzOnIubGVuZ3RofHxuLmxlbmd0aD9uZXcgWnIocixuKTpRcn0sWnIucHJvdG90eXBlLmZvckNoaWxkPWZ1bmN0aW9uKHQsZSl7aWYodGhpcz09UXIpcmV0dXJuIHRoaXM7aWYoZS5pc0xlYWYpcmV0dXJuIFpyLmVtcHR5O2Zvcih2YXIgbixyLG89MDtvPHRoaXMuY2hpbGRyZW4ubGVuZ3RoO28rPTMpaWYodGhpcy5jaGlsZHJlbltvXT49dCl7dGhpcy5jaGlsZHJlbltvXT09dCYmKG49dGhpcy5jaGlsZHJlbltvKzJdKTticmVha31mb3IodmFyIGk9dCsxLHM9aStlLmNvbnRlbnQuc2l6ZSxhPTA7YTx0aGlzLmxvY2FsLmxlbmd0aDthKyspe3ZhciBjPXRoaXMubG9jYWxbYV07aWYoYy5mcm9tPHMmJmMudG8+aSYmYy50eXBlIGluc3RhbmNlb2YgSHIpe3ZhciB1PU1hdGgubWF4KGksYy5mcm9tKS1pLGw9TWF0aC5taW4ocyxjLnRvKS1pO3U8bCYmKHJ8fChyPVtdKSkucHVzaChjLmNvcHkodSxsKSl9fWlmKHIpe3ZhciBoPW5ldyBacihyLnNvcnQoYW8pKTtyZXR1cm4gbj9uZXcgdG8oW2gsbl0pOmh9cmV0dXJuIG58fFFyfSxaci5wcm90b3R5cGUuZXE9ZnVuY3Rpb24odCl7aWYodGhpcz09dClyZXR1cm4hMDtpZighKHQgaW5zdGFuY2VvZiBacil8fHRoaXMubG9jYWwubGVuZ3RoIT10LmxvY2FsLmxlbmd0aHx8dGhpcy5jaGlsZHJlbi5sZW5ndGghPXQuY2hpbGRyZW4ubGVuZ3RoKXJldHVybiExO2Zvcih2YXIgZT0wO2U8dGhpcy5sb2NhbC5sZW5ndGg7ZSsrKWlmKCF0aGlzLmxvY2FsW2VdLmVxKHQubG9jYWxbZV0pKXJldHVybiExO2Zvcih2YXIgbj0wO248dGhpcy5jaGlsZHJlbi5sZW5ndGg7bis9MylpZih0aGlzLmNoaWxkcmVuW25dIT10LmNoaWxkcmVuW25dfHx0aGlzLmNoaWxkcmVuW24rMV0hPXQuY2hpbGRyZW5bbisxXXx8IXRoaXMuY2hpbGRyZW5bbisyXS5lcSh0LmNoaWxkcmVuW24rMl0pKXJldHVybiExO3JldHVybiEwfSxaci5wcm90b3R5cGUubG9jYWxzPWZ1bmN0aW9uKHQpe3JldHVybiBjbyh0aGlzLmxvY2Fsc0lubmVyKHQpKX0sWnIucHJvdG90eXBlLmxvY2Fsc0lubmVyPWZ1bmN0aW9uKHQpe2lmKHRoaXM9PVFyKXJldHVybiBYcjtpZih0LmlubGluZUNvbnRlbnR8fCF0aGlzLmxvY2FsLnNvbWUoSHIuaXMpKXJldHVybiB0aGlzLmxvY2FsO2Zvcih2YXIgZT1bXSxuPTA7bjx0aGlzLmxvY2FsLmxlbmd0aDtuKyspdGhpcy5sb2NhbFtuXS50eXBlIGluc3RhbmNlb2YgSHJ8fGUucHVzaCh0aGlzLmxvY2FsW25dKTtyZXR1cm4gZX07dmFyIFFyPW5ldyBacjtaci5lbXB0eT1Rcixaci5yZW1vdmVPdmVybGFwPWNvO3ZhciB0bz1mdW5jdGlvbih0KXt0aGlzLm1lbWJlcnM9dH07ZnVuY3Rpb24gZW8odCxlLG4scixvLGkscyl7Zm9yKHZhciBhPXQuc2xpY2UoKSxjPWZ1bmN0aW9uKHQsZSxuLHIpe2Zvcih2YXIgcz0wO3M8YS5sZW5ndGg7cys9Myl7dmFyIGM9YVtzKzFdLHU9dm9pZCAwOy0xPT1jfHx0PmMraXx8KGU+PWFbc10raT9hW3MrMV09LTE6bj49byYmKHU9ci1uLShlLXQpKSYmKGFbc10rPXUsYVtzKzFdKz11KSl9fSx1PTA7dTxuLm1hcHMubGVuZ3RoO3UrKyluLm1hcHNbdV0uZm9yRWFjaChjKTtmb3IodmFyIGw9ITEsaD0wO2g8YS5sZW5ndGg7aCs9MylpZigtMT09YVtoKzFdKXt2YXIgZj1uLm1hcChhW2hdK2kpLHA9Zi1vO2lmKHA8MHx8cD49ci5jb250ZW50LnNpemUpe2w9ITA7Y29udGludWV9dmFyIGQ9bi5tYXAodFtoKzFdK2ksLTEpLHY9ZC1vLG09ci5jb250ZW50LmZpbmRJbmRleChwKSxnPW0uaW5kZXgseT1tLm9mZnNldCx3PXIubWF5YmVDaGlsZChnKTtpZih3JiZ5PT1wJiZ5K3cubm9kZVNpemU9PXYpe3ZhciBiPWFbaCsyXS5tYXBJbm5lcihuLHcsZisxLGFbaF0raSsxLHMpO2IhPVFyPyhhW2hdPXAsYVtoKzFdPXYsYVtoKzJdPWIpOihhW2grMV09LTIsbD0hMCl9ZWxzZSBsPSEwfWlmKGwpe3ZhciB4PXJvKGEsdCxlfHxbXSxuLG8saSxzKSxrPXNvKHgsciwwLHMpO2U9ay5sb2NhbDtmb3IodmFyIFM9MDtTPGEubGVuZ3RoO1MrPTMpYVtTKzFdPDAmJihhLnNwbGljZShTLDMpLFMtPTMpO2Zvcih2YXIgQz0wLE89MDtDPGsuY2hpbGRyZW4ubGVuZ3RoO0MrPTMpe3ZhciBNPWsuY2hpbGRyZW5bQ107d2hpbGUoTzxhLmxlbmd0aCYmYVtPXTxNKU8rPTM7YS5zcGxpY2UoTywwLGsuY2hpbGRyZW5bQ10say5jaGlsZHJlbltDKzFdLGsuY2hpbGRyZW5bQysyXSl9fXJldHVybiBuZXcgWnIoZSYmZS5zb3J0KGFvKSxhKX1mdW5jdGlvbiBubyh0LGUpe2lmKCFlfHwhdC5sZW5ndGgpcmV0dXJuIHQ7Zm9yKHZhciBuPVtdLHI9MDtyPHQubGVuZ3RoO3IrKyl7dmFyIG89dFtyXTtuLnB1c2gobmV3IFVyKG8uZnJvbStlLG8udG8rZSxvLnR5cGUpKX1yZXR1cm4gbn1mdW5jdGlvbiBybyh0LGUsbixyLG8saSxzKXtmdW5jdGlvbiBhKHQsZSl7Zm9yKHZhciBpPTA7aTx0LmxvY2FsLmxlbmd0aDtpKyspe3ZhciBjPXQubG9jYWxbaV0ubWFwKHIsbyxlKTtjP24ucHVzaChjKTpzLm9uUmVtb3ZlJiZzLm9uUmVtb3ZlKHQubG9jYWxbaV0uc3BlYyl9Zm9yKHZhciB1PTA7dTx0LmNoaWxkcmVuLmxlbmd0aDt1Kz0zKWEodC5jaGlsZHJlblt1KzJdLHQuY2hpbGRyZW5bdV0rZSsxKX1mb3IodmFyIGM9MDtjPHQubGVuZ3RoO2MrPTMpLTE9PXRbYysxXSYmYSh0W2MrMl0sZVtjXStpKzEpO3JldHVybiBufWZ1bmN0aW9uIG9vKHQsZSxuKXtpZihlLmlzTGVhZilyZXR1cm4gbnVsbDtmb3IodmFyIHI9bitlLm5vZGVTaXplLG89bnVsbCxpPTAscz12b2lkIDA7aTx0Lmxlbmd0aDtpKyspKHM9dFtpXSkmJnMuZnJvbT5uJiZzLnRvPHImJigob3x8KG89W10pKS5wdXNoKHMpLHRbaV09bnVsbCk7cmV0dXJuIG99ZnVuY3Rpb24gaW8odCl7Zm9yKHZhciBlPVtdLG49MDtuPHQubGVuZ3RoO24rKyludWxsIT10W25dJiZlLnB1c2godFtuXSk7cmV0dXJuIGV9ZnVuY3Rpb24gc28odCxlLG4scil7dmFyIG89W10saT0hMTtlLmZvckVhY2goKGZ1bmN0aW9uKGUscyl7dmFyIGE9b28odCxlLHMrbik7aWYoYSl7aT0hMDt2YXIgYz1zbyhhLGUsbitzKzEscik7YyE9UXImJm8ucHVzaChzLHMrZS5ub2RlU2l6ZSxjKX19KSk7Zm9yKHZhciBzPW5vKGk/aW8odCk6dCwtbikuc29ydChhbyksYT0wO2E8cy5sZW5ndGg7YSsrKXNbYV0udHlwZS52YWxpZChlLHNbYV0pfHwoci5vblJlbW92ZSYmci5vblJlbW92ZShzW2FdLnNwZWMpLHMuc3BsaWNlKGEtLSwxKSk7cmV0dXJuIHMubGVuZ3RofHxvLmxlbmd0aD9uZXcgWnIocyxvKTpRcn1mdW5jdGlvbiBhbyh0LGUpe3JldHVybiB0LmZyb20tZS5mcm9tfHx0LnRvLWUudG99ZnVuY3Rpb24gY28odCl7Zm9yKHZhciBlPXQsbj0wO248ZS5sZW5ndGgtMTtuKyspe3ZhciByPWVbbl07aWYoci5mcm9tIT1yLnRvKWZvcih2YXIgbz1uKzE7bzxlLmxlbmd0aDtvKyspe3ZhciBpPWVbb107aWYoaS5mcm9tIT1yLmZyb20pe2kuZnJvbTxyLnRvJiYoZT09dCYmKGU9dC5zbGljZSgpKSxlW25dPXIuY29weShyLmZyb20saS5mcm9tKSx1byhlLG8sci5jb3B5KGkuZnJvbSxyLnRvKSkpO2JyZWFrfWkudG8hPXIudG8mJihlPT10JiYoZT10LnNsaWNlKCkpLGVbb109aS5jb3B5KGkuZnJvbSxyLnRvKSx1byhlLG8rMSxpLmNvcHkoci50byxpLnRvKSkpfX1yZXR1cm4gZX1mdW5jdGlvbiB1byh0LGUsbil7d2hpbGUoZTx0Lmxlbmd0aCYmYW8obix0W2VdKT4wKWUrKzt0LnNwbGljZShlLDAsbil9ZnVuY3Rpb24gbG8odCl7dmFyIGU9W107cmV0dXJuIHQuc29tZVByb3AoImRlY29yYXRpb25zIiwoZnVuY3Rpb24obil7dmFyIHI9bih0LnN0YXRlKTtyJiZyIT1RciYmZS5wdXNoKHIpfSkpLHQuY3Vyc29yV3JhcHBlciYmZS5wdXNoKFpyLmNyZWF0ZSh0LnN0YXRlLmRvYyxbdC5jdXJzb3JXcmFwcGVyLmRlY29dKSksdG8uZnJvbShlKX10by5wcm90b3R5cGUuZm9yQ2hpbGQ9ZnVuY3Rpb24odCxlKXtpZihlLmlzTGVhZilyZXR1cm4gWnIuZW1wdHk7Zm9yKHZhciBuPVtdLHI9MDtyPHRoaXMubWVtYmVycy5sZW5ndGg7cisrKXt2YXIgbz10aGlzLm1lbWJlcnNbcl0uZm9yQ2hpbGQodCxlKTtvIT1RciYmKG8gaW5zdGFuY2VvZiB0bz9uPW4uY29uY2F0KG8ubWVtYmVycyk6bi5wdXNoKG8pKX1yZXR1cm4gdG8uZnJvbShuKX0sdG8ucHJvdG90eXBlLmVxPWZ1bmN0aW9uKHQpe2lmKCEodCBpbnN0YW5jZW9mIHRvKXx8dC5tZW1iZXJzLmxlbmd0aCE9dGhpcy5tZW1iZXJzLmxlbmd0aClyZXR1cm4hMTtmb3IodmFyIGU9MDtlPHRoaXMubWVtYmVycy5sZW5ndGg7ZSsrKWlmKCF0aGlzLm1lbWJlcnNbZV0uZXEodC5tZW1iZXJzW2VdKSlyZXR1cm4hMTtyZXR1cm4hMH0sdG8ucHJvdG90eXBlLmxvY2Fscz1mdW5jdGlvbih0KXtmb3IodmFyIGUsbj0hMCxyPTA7cjx0aGlzLm1lbWJlcnMubGVuZ3RoO3IrKyl7dmFyIG89dGhpcy5tZW1iZXJzW3JdLmxvY2Fsc0lubmVyKHQpO2lmKG8ubGVuZ3RoKWlmKGUpe24mJihlPWUuc2xpY2UoKSxuPSExKTtmb3IodmFyIGk9MDtpPG8ubGVuZ3RoO2krKyllLnB1c2gob1tpXSl9ZWxzZSBlPW99cmV0dXJuIGU/Y28obj9lOmUuc29ydChhbykpOlhyfSx0by5mcm9tPWZ1bmN0aW9uKHQpe3N3aXRjaCh0Lmxlbmd0aCl7Y2FzZSAwOnJldHVybiBRcjtjYXNlIDE6cmV0dXJuIHRbMF07ZGVmYXVsdDpyZXR1cm4gbmV3IHRvKHQpfX07dmFyIGhvPWZ1bmN0aW9uKHQsZSl7dGhpcy5fcHJvcHM9ZSx0aGlzLnN0YXRlPWUuc3RhdGUsdGhpcy5kaXNwYXRjaD10aGlzLmRpc3BhdGNoLmJpbmQodGhpcyksdGhpcy5fcm9vdD1udWxsLHRoaXMuZm9jdXNlZD0hMSx0aGlzLmRvbT10JiZ0Lm1vdW50fHxkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKSx0JiYodC5hcHBlbmRDaGlsZD90LmFwcGVuZENoaWxkKHRoaXMuZG9tKTp0LmFwcGx5P3QodGhpcy5kb20pOnQubW91bnQmJih0aGlzLm1vdW50ZWQ9ITApKSx0aGlzLmVkaXRhYmxlPW1vKHRoaXMpLHRoaXMubWFya0N1cnNvcj1udWxsLHRoaXMuY3Vyc29yV3JhcHBlcj1udWxsLHZvKHRoaXMpLHRoaXMubm9kZVZpZXdzPXlvKHRoaXMpLHRoaXMuZG9jVmlldz0kZSh0aGlzLnN0YXRlLmRvYyxwbyh0aGlzKSxsbyh0aGlzKSx0aGlzLmRvbSx0aGlzKSx0aGlzLmxhc3RTZWxlY3RlZFZpZXdEZXNjPW51bGwsdGhpcy5kcmFnZ2luZz1udWxsLGZyKHRoaXMpLHRoaXMucGx1Z2luVmlld3M9W10sdGhpcy51cGRhdGVQbHVnaW5WaWV3cygpfSxmbz17cHJvcHM6e2NvbmZpZ3VyYWJsZTohMH0scm9vdDp7Y29uZmlndXJhYmxlOiEwfX07ZnVuY3Rpb24gcG8odCl7dmFyIGU9T2JqZWN0LmNyZWF0ZShudWxsKTtyZXR1cm4gZS5jbGFzcz0iUHJvc2VNaXJyb3IiLGUuY29udGVudGVkaXRhYmxlPVN0cmluZyh0LmVkaXRhYmxlKSx0LnNvbWVQcm9wKCJhdHRyaWJ1dGVzIiwoZnVuY3Rpb24obil7aWYoImZ1bmN0aW9uIj09dHlwZW9mIG4mJihuPW4odC5zdGF0ZSkpLG4pZm9yKHZhciByIGluIG4pImNsYXNzIj09cj9lLmNsYXNzKz0iICIrbltyXTplW3JdfHwiY29udGVudGVkaXRhYmxlIj09cnx8Im5vZGVOYW1lIj09cnx8KGVbcl09U3RyaW5nKG5bcl0pKX0pKSxbVXIubm9kZSgwLHQuc3RhdGUuZG9jLmNvbnRlbnQuc2l6ZSxlKV19ZnVuY3Rpb24gdm8odCl7aWYodC5tYXJrQ3Vyc29yKXt2YXIgZT1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJpbWciKTtlLnNldEF0dHJpYnV0ZSgibWFyay1wbGFjZWhvbGRlciIsInRydWUiKSx0LmN1cnNvcldyYXBwZXI9e2RvbTplLGRlY286VXIud2lkZ2V0KHQuc3RhdGUuc2VsZWN0aW9uLmhlYWQsZSx7cmF3OiEwLG1hcmtzOnQubWFya0N1cnNvcn0pfX1lbHNlIHQuY3Vyc29yV3JhcHBlcj1udWxsfWZ1bmN0aW9uIG1vKHQpe3JldHVybiF0LnNvbWVQcm9wKCJlZGl0YWJsZSIsKGZ1bmN0aW9uKGUpe3JldHVybiExPT09ZSh0LnN0YXRlKX0pKX1mdW5jdGlvbiBnbyh0LGUpe3ZhciBuPU1hdGgubWluKHQuJGFuY2hvci5zaGFyZWREZXB0aCh0LmhlYWQpLGUuJGFuY2hvci5zaGFyZWREZXB0aChlLmhlYWQpKTtyZXR1cm4gdC4kYW5jaG9yLnN0YXJ0KG4pIT1lLiRhbmNob3Iuc3RhcnQobil9ZnVuY3Rpb24geW8odCl7dmFyIGU9e307cmV0dXJuIHQuc29tZVByb3AoIm5vZGVWaWV3cyIsKGZ1bmN0aW9uKHQpe2Zvcih2YXIgbiBpbiB0KU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChlLG4pfHwoZVtuXT10W25dKX0pKSxlfWZ1bmN0aW9uIHdvKHQsZSl7dmFyIG49MCxyPTA7Zm9yKHZhciBvIGluIHQpe2lmKHRbb10hPWVbb10pcmV0dXJuITA7bisrfWZvcih2YXIgaSBpbiBlKXIrKztyZXR1cm4gbiE9cn1mdW5jdGlvbiBibyh0KXt2YXIgZT10LmdldFNlbGVjdGlvbigpLG49ZS5mb2N1c09mZnNldCxyPWUuZm9jdXNOb2RlO3JldHVybiByJiYxPT1yLm5vZGVUeXBlP1tyLG4sci5jaGlsZE5vZGVzW24tMV0sci5jaGlsZE5vZGVzW25dXTpudWxsfWZ1bmN0aW9uIHhvKHQsZSl7dmFyIG49Ym8oZSk7aWYoIW58fDM9PW5bMF0ubm9kZVR5cGUpcmV0dXJuITE7Zm9yKHZhciByPTA7cjx0Lmxlbmd0aDtyKyspaWYobltyXSE9dFtyXSlyZXR1cm4hMDtyZXR1cm4hMX1mdW5jdGlvbiBrbyh0LGUsbil7Zm9yKHZhciByPTA7O3IrKyl7aWYocj09dC5jaGlsZENvdW50fHxyPT1lLmNoaWxkQ291bnQpcmV0dXJuIHQuY2hpbGRDb3VudD09ZS5jaGlsZENvdW50P251bGw6bjt2YXIgbz10LmNoaWxkKHIpLGk9ZS5jaGlsZChyKTtpZihvIT1pKXtpZighby5zYW1lTWFya3VwKGkpKXJldHVybiBuO2lmKG8uaXNUZXh0JiZvLnRleHQhPWkudGV4dCl7Zm9yKHZhciBzPTA7by50ZXh0W3NdPT1pLnRleHRbc107cysrKW4rKztyZXR1cm4gbn1pZihvLmNvbnRlbnQuc2l6ZXx8aS5jb250ZW50LnNpemUpe3ZhciBhPWtvKG8uY29udGVudCxpLmNvbnRlbnQsbisxKTtpZihudWxsIT1hKXJldHVybiBhfW4rPW8ubm9kZVNpemV9ZWxzZSBuKz1vLm5vZGVTaXplfX1mdW5jdGlvbiBTbyh0LGUsbixyKXtmb3IodmFyIG89dC5jaGlsZENvdW50LGk9ZS5jaGlsZENvdW50Ozspe2lmKDA9PW98fDA9PWkpcmV0dXJuIG89PWk/bnVsbDp7YTpuLGI6cn07dmFyIHM9dC5jaGlsZCgtLW8pLGE9ZS5jaGlsZCgtLWkpLGM9cy5ub2RlU2l6ZTtpZihzIT1hKXtpZighcy5zYW1lTWFya3VwKGEpKXJldHVybnthOm4sYjpyfTtpZihzLmlzVGV4dCYmcy50ZXh0IT1hLnRleHQpe3ZhciB1PTAsbD1NYXRoLm1pbihzLnRleHQubGVuZ3RoLGEudGV4dC5sZW5ndGgpO3doaWxlKHU8bCYmcy50ZXh0W3MudGV4dC5sZW5ndGgtdS0xXT09YS50ZXh0W2EudGV4dC5sZW5ndGgtdS0xXSl1Kyssbi0tLHItLTtyZXR1cm57YTpuLGI6cn19aWYocy5jb250ZW50LnNpemV8fGEuY29udGVudC5zaXplKXt2YXIgaD1TbyhzLmNvbnRlbnQsYS5jb250ZW50LG4tMSxyLTEpO2lmKGgpcmV0dXJuIGh9bi09YyxyLT1jfWVsc2Ugbi09YyxyLT1jfX1mby5wcm9wcy5nZXQ9ZnVuY3Rpb24oKXtpZih0aGlzLl9wcm9wcy5zdGF0ZSE9dGhpcy5zdGF0ZSl7dmFyIHQ9dGhpcy5fcHJvcHM7Zm9yKHZhciBlIGluIHRoaXMuX3Byb3BzPXt9LHQpdGhpcy5fcHJvcHNbZV09dFtlXTt0aGlzLl9wcm9wcy5zdGF0ZT10aGlzLnN0YXRlfXJldHVybiB0aGlzLl9wcm9wc30saG8ucHJvdG90eXBlLnVwZGF0ZT1mdW5jdGlvbih0KXt0LmhhbmRsZURPTUV2ZW50cyE9dGhpcy5fcHJvcHMuaGFuZGxlRE9NRXZlbnRzJiZ2cih0aGlzKSx0aGlzLl9wcm9wcz10LHRoaXMudXBkYXRlU3RhdGVJbm5lcih0LnN0YXRlLCEwKX0saG8ucHJvdG90eXBlLnNldFByb3BzPWZ1bmN0aW9uKHQpe3ZhciBlPXt9O2Zvcih2YXIgbiBpbiB0aGlzLl9wcm9wcyllW25dPXRoaXMuX3Byb3BzW25dO2Zvcih2YXIgciBpbiBlLnN0YXRlPXRoaXMuc3RhdGUsdCllW3JdPXRbcl07dGhpcy51cGRhdGUoZSl9LGhvLnByb3RvdHlwZS51cGRhdGVTdGF0ZT1mdW5jdGlvbih0KXt0aGlzLnVwZGF0ZVN0YXRlSW5uZXIodCx0aGlzLnN0YXRlLnBsdWdpbnMhPXQucGx1Z2lucyl9LGhvLnByb3RvdHlwZS51cGRhdGVTdGF0ZUlubmVyPWZ1bmN0aW9uKHQsZSl7dmFyIG49dGhpcyxyPXRoaXMuc3RhdGUsbz0hMTtpZih0aGlzLnN0YXRlPXQsZSl7dmFyIGk9eW8odGhpcyk7d28oaSx0aGlzLm5vZGVWaWV3cykmJih0aGlzLm5vZGVWaWV3cz1pLG89ITApLHZyKHRoaXMpfXRoaXMuZWRpdGFibGU9bW8odGhpcyksdm8odGhpcyk7dmFyIHM9bG8odGhpcyksYT1wbyh0aGlzKSx1PWU/InJlc2V0Ijp0LnNjcm9sbFRvU2VsZWN0aW9uPnIuc2Nyb2xsVG9TZWxlY3Rpb24/InRvIHNlbGVjdGlvbiI6InByZXNlcnZlIixsPW98fCF0aGlzLmRvY1ZpZXcubWF0Y2hlc05vZGUodC5kb2MsYSxzKSxoPWx8fCF0LnNlbGVjdGlvbi5lcShyLnNlbGVjdGlvbiksZj0icHJlc2VydmUiPT11JiZoJiZudWxsPT10aGlzLmRvbS5zdHlsZS5vdmVyZmxvd0FuY2hvciYmcmUodGhpcyk7aWYoaCl7dGhpcy5kb21PYnNlcnZlci5zdG9wKCk7dmFyIHA9bCYmKF90LmllfHxfdC5jaHJvbWUpJiYhdGhpcy5jb21wb3NpbmcmJiFyLnNlbGVjdGlvbi5lbXB0eSYmIXQuc2VsZWN0aW9uLmVtcHR5JiZnbyhyLnNlbGVjdGlvbix0LnNlbGVjdGlvbik7aWYobCl7dmFyIGQ9X3QuY2hyb21lJiZibyh0aGlzLnJvb3QpOyFvJiZ0aGlzLmRvY1ZpZXcudXBkYXRlKHQuZG9jLGEscyx0aGlzKXx8KHRoaXMuZG9jVmlldy51cGRhdGVPdXRlckRlY28oW10pLHRoaXMuZG9jVmlldy5kZXN0cm95KCksdGhpcy5kb2NWaWV3PSRlKHQuZG9jLGEscyx0aGlzLmRvbSx0aGlzKSksZCYmeG8oZCx0aGlzLnJvb3QpJiYocD0hMCl9cHx8ISh0aGlzLm1vdXNlRG93biYmdGhpcy5kb21PYnNlcnZlci5jdXJyZW50U2VsZWN0aW9uLmVxKHRoaXMucm9vdC5nZXRTZWxlY3Rpb24oKSkmJkJuKHRoaXMpKT9Dbih0aGlzLHApOihEbih0aGlzLHQuc2VsZWN0aW9uKSx0aGlzLmRvbU9ic2VydmVyLnNldEN1clNlbGVjdGlvbigpKSx0aGlzLmRvbU9ic2VydmVyLnN0YXJ0KCl9aWYodGhpcy51cGRhdGVQbHVnaW5WaWV3cyhyKSwicmVzZXQiPT11KXRoaXMuZG9tLnNjcm9sbFRvcD0wO2Vsc2UgaWYoInRvIHNlbGVjdGlvbiI9PXUpe3ZhciB2PXRoaXMucm9vdC5nZXRTZWxlY3Rpb24oKS5mb2N1c05vZGU7dGhpcy5zb21lUHJvcCgiaGFuZGxlU2Nyb2xsVG9TZWxlY3Rpb24iLChmdW5jdGlvbih0KXtyZXR1cm4gdChuKX0pKXx8KHQuc2VsZWN0aW9uIGluc3RhbmNlb2YgY1siTm9kZVNlbGVjdGlvbiJdP25lKHRoaXMsdGhpcy5kb2NWaWV3LmRvbUFmdGVyUG9zKHQuc2VsZWN0aW9uLmZyb20pLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLHYpOm5lKHRoaXMsdGhpcy5jb29yZHNBdFBvcyh0LnNlbGVjdGlvbi5oZWFkKSx2KSl9ZWxzZSBmJiZpZShmKX0saG8ucHJvdG90eXBlLmRlc3Ryb3lQbHVnaW5WaWV3cz1mdW5jdGlvbigpe3ZhciB0O3doaWxlKHQ9dGhpcy5wbHVnaW5WaWV3cy5wb3AoKSl0LmRlc3Ryb3kmJnQuZGVzdHJveSgpfSxoby5wcm90b3R5cGUudXBkYXRlUGx1Z2luVmlld3M9ZnVuY3Rpb24odCl7aWYodCYmdC5wbHVnaW5zPT10aGlzLnN0YXRlLnBsdWdpbnMpZm9yKHZhciBlPTA7ZTx0aGlzLnBsdWdpblZpZXdzLmxlbmd0aDtlKyspe3ZhciBuPXRoaXMucGx1Z2luVmlld3NbZV07bi51cGRhdGUmJm4udXBkYXRlKHRoaXMsdCl9ZWxzZXt0aGlzLmRlc3Ryb3lQbHVnaW5WaWV3cygpO2Zvcih2YXIgcj0wO3I8dGhpcy5zdGF0ZS5wbHVnaW5zLmxlbmd0aDtyKyspe3ZhciBvPXRoaXMuc3RhdGUucGx1Z2luc1tyXTtvLnNwZWMudmlldyYmdGhpcy5wbHVnaW5WaWV3cy5wdXNoKG8uc3BlYy52aWV3KHRoaXMpKX19fSxoby5wcm90b3R5cGUuc29tZVByb3A9ZnVuY3Rpb24odCxlKXt2YXIgbixyPXRoaXMuX3Byb3BzJiZ0aGlzLl9wcm9wc1t0XTtpZihudWxsIT1yJiYobj1lP2Uocik6cikpcmV0dXJuIG47dmFyIG89dGhpcy5zdGF0ZS5wbHVnaW5zO2lmKG8pZm9yKHZhciBpPTA7aTxvLmxlbmd0aDtpKyspe3ZhciBzPW9baV0ucHJvcHNbdF07aWYobnVsbCE9cyYmKG49ZT9lKHMpOnMpKXJldHVybiBufX0saG8ucHJvdG90eXBlLmhhc0ZvY3VzPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucm9vdC5hY3RpdmVFbGVtZW50PT10aGlzLmRvbX0saG8ucHJvdG90eXBlLmZvY3VzPWZ1bmN0aW9uKCl7dGhpcy5kb21PYnNlcnZlci5zdG9wKCksdGhpcy5lZGl0YWJsZSYmY2UodGhpcy5kb20pLENuKHRoaXMpLHRoaXMuZG9tT2JzZXJ2ZXIuc3RhcnQoKX0sZm8ucm9vdC5nZXQ9ZnVuY3Rpb24oKXt2YXIgdD10aGlzLl9yb290O2lmKG51bGw9PXQpZm9yKHZhciBlPXRoaXMuZG9tLnBhcmVudE5vZGU7ZTtlPWUucGFyZW50Tm9kZSlpZig5PT1lLm5vZGVUeXBlfHwxMT09ZS5ub2RlVHlwZSYmZS5ob3N0KXJldHVybiBlLmdldFNlbGVjdGlvbnx8KE9iamVjdC5nZXRQcm90b3R5cGVPZihlKS5nZXRTZWxlY3Rpb249ZnVuY3Rpb24oKXtyZXR1cm4gZG9jdW1lbnQuZ2V0U2VsZWN0aW9uKCl9KSx0aGlzLl9yb290PWU7cmV0dXJuIHR8fGRvY3VtZW50fSxoby5wcm90b3R5cGUucG9zQXRDb29yZHM9ZnVuY3Rpb24odCl7cmV0dXJuIG1lKHRoaXMsdCl9LGhvLnByb3RvdHlwZS5jb29yZHNBdFBvcz1mdW5jdGlvbih0KXtyZXR1cm4geWUodGhpcyx0KX0saG8ucHJvdG90eXBlLmRvbUF0UG9zPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLmRvY1ZpZXcuZG9tRnJvbVBvcyh0KX0saG8ucHJvdG90eXBlLm5vZGVET009ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5kb2NWaWV3LmRlc2NBdCh0KTtyZXR1cm4gZT9lLm5vZGVET006bnVsbH0saG8ucHJvdG90eXBlLnBvc0F0RE9NPWZ1bmN0aW9uKHQsZSxuKXt2b2lkIDA9PT1uJiYobj0tMSk7dmFyIHI9dGhpcy5kb2NWaWV3LnBvc0Zyb21ET00odCxlLG4pO2lmKG51bGw9PXIpdGhyb3cgbmV3IFJhbmdlRXJyb3IoIkRPTSBwb3NpdGlvbiBub3QgaW5zaWRlIHRoZSBlZGl0b3IiKTtyZXR1cm4gcn0saG8ucHJvdG90eXBlLmVuZE9mVGV4dGJsb2NrPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIFRlKHRoaXMsZXx8dGhpcy5zdGF0ZSx0KX0saG8ucHJvdG90eXBlLmRlc3Ryb3k9ZnVuY3Rpb24oKXt0aGlzLmRvY1ZpZXcmJihkcih0aGlzKSx0aGlzLmRlc3Ryb3lQbHVnaW5WaWV3cygpLHRoaXMubW91bnRlZD8odGhpcy5kb2NWaWV3LnVwZGF0ZSh0aGlzLnN0YXRlLmRvYyxbXSxsbyh0aGlzKSx0aGlzKSx0aGlzLmRvbS50ZXh0Q29udGVudD0iIik6dGhpcy5kb20ucGFyZW50Tm9kZSYmdGhpcy5kb20ucGFyZW50Tm9kZS5yZW1vdmVDaGlsZCh0aGlzLmRvbSksdGhpcy5kb2NWaWV3LmRlc3Ryb3koKSx0aGlzLmRvY1ZpZXc9bnVsbCl9LGhvLnByb3RvdHlwZS5kaXNwYXRjaEV2ZW50PWZ1bmN0aW9uKHQpe3JldHVybiB5cih0aGlzLHQpfSxoby5wcm90b3R5cGUuZGlzcGF0Y2g9ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5fcHJvcHMuZGlzcGF0Y2hUcmFuc2FjdGlvbjtlP2UuY2FsbCh0aGlzLHQpOnRoaXMudXBkYXRlU3RhdGUodGhpcy5zdGF0ZS5hcHBseSh0KSl9LE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKGhvLnByb3RvdHlwZSxmbyk7dmFyIENvPWZ1bmN0aW9uKHQsZSl7aWYodGhpcy5jb250ZW50PXQsdGhpcy5zaXplPWV8fDAsbnVsbD09ZSlmb3IodmFyIG49MDtuPHQubGVuZ3RoO24rKyl0aGlzLnNpemUrPXRbbl0ubm9kZVNpemV9LE9vPXtmaXJzdENoaWxkOntjb25maWd1cmFibGU6ITB9LGxhc3RDaGlsZDp7Y29uZmlndXJhYmxlOiEwfSxjaGlsZENvdW50Ontjb25maWd1cmFibGU6ITB9fTtDby5wcm90b3R5cGUubm9kZXNCZXR3ZWVuPWZ1bmN0aW9uKHQsZSxuLHIsbyl7dm9pZCAwPT09ciYmKHI9MCk7Zm9yKHZhciBpPTAscz0wO3M8ZTtpKyspe3ZhciBhPXRoaXMuY29udGVudFtpXSxjPXMrYS5ub2RlU2l6ZTtpZihjPnQmJiExIT09bihhLHIrcyxvLGkpJiZhLmNvbnRlbnQuc2l6ZSl7dmFyIHU9cysxO2Eubm9kZXNCZXR3ZWVuKE1hdGgubWF4KDAsdC11KSxNYXRoLm1pbihhLmNvbnRlbnQuc2l6ZSxlLXUpLG4scit1KX1zPWN9fSxDby5wcm90b3R5cGUuZGVzY2VuZGFudHM9ZnVuY3Rpb24odCl7dGhpcy5ub2Rlc0JldHdlZW4oMCx0aGlzLnNpemUsdCl9LENvLnByb3RvdHlwZS50ZXh0QmV0d2Vlbj1mdW5jdGlvbih0LGUsbixyKXt2YXIgbz0iIixpPSEwO3JldHVybiB0aGlzLm5vZGVzQmV0d2Vlbih0LGUsKGZ1bmN0aW9uKHMsYSl7cy5pc1RleHQ/KG8rPXMudGV4dC5zbGljZShNYXRoLm1heCh0LGEpLWEsZS1hKSxpPSFuKTpzLmlzTGVhZiYmcj8obys9cixpPSFuKTohaSYmcy5pc0Jsb2NrJiYobys9bixpPSEwKX0pLDApLG99LENvLnByb3RvdHlwZS5hcHBlbmQ9ZnVuY3Rpb24odCl7aWYoIXQuc2l6ZSlyZXR1cm4gdGhpcztpZighdGhpcy5zaXplKXJldHVybiB0O3ZhciBlPXRoaXMubGFzdENoaWxkLG49dC5maXJzdENoaWxkLHI9dGhpcy5jb250ZW50LnNsaWNlKCksbz0wO2ZvcihlLmlzVGV4dCYmZS5zYW1lTWFya3VwKG4pJiYocltyLmxlbmd0aC0xXT1lLndpdGhUZXh0KGUudGV4dCtuLnRleHQpLG89MSk7bzx0LmNvbnRlbnQubGVuZ3RoO28rKylyLnB1c2godC5jb250ZW50W29dKTtyZXR1cm4gbmV3IENvKHIsdGhpcy5zaXplK3Quc2l6ZSl9LENvLnByb3RvdHlwZS5jdXQ9ZnVuY3Rpb24odCxlKXtpZihudWxsPT1lJiYoZT10aGlzLnNpemUpLDA9PXQmJmU9PXRoaXMuc2l6ZSlyZXR1cm4gdGhpczt2YXIgbj1bXSxyPTA7aWYoZT50KWZvcih2YXIgbz0wLGk9MDtpPGU7bysrKXt2YXIgcz10aGlzLmNvbnRlbnRbb10sYT1pK3Mubm9kZVNpemU7YT50JiYoKGk8dHx8YT5lKSYmKHM9cy5pc1RleHQ/cy5jdXQoTWF0aC5tYXgoMCx0LWkpLE1hdGgubWluKHMudGV4dC5sZW5ndGgsZS1pKSk6cy5jdXQoTWF0aC5tYXgoMCx0LWktMSksTWF0aC5taW4ocy5jb250ZW50LnNpemUsZS1pLTEpKSksbi5wdXNoKHMpLHIrPXMubm9kZVNpemUpLGk9YX1yZXR1cm4gbmV3IENvKG4scil9LENvLnByb3RvdHlwZS5jdXRCeUluZGV4PWZ1bmN0aW9uKHQsZSl7cmV0dXJuIHQ9PWU/Q28uZW1wdHk6MD09dCYmZT09dGhpcy5jb250ZW50Lmxlbmd0aD90aGlzOm5ldyBDbyh0aGlzLmNvbnRlbnQuc2xpY2UodCxlKSl9LENvLnByb3RvdHlwZS5yZXBsYWNlQ2hpbGQ9ZnVuY3Rpb24odCxlKXt2YXIgbj10aGlzLmNvbnRlbnRbdF07aWYobj09ZSlyZXR1cm4gdGhpczt2YXIgcj10aGlzLmNvbnRlbnQuc2xpY2UoKSxvPXRoaXMuc2l6ZStlLm5vZGVTaXplLW4ubm9kZVNpemU7cmV0dXJuIHJbdF09ZSxuZXcgQ28ocixvKX0sQ28ucHJvdG90eXBlLmFkZFRvU3RhcnQ9ZnVuY3Rpb24odCl7cmV0dXJuIG5ldyBDbyhbdF0uY29uY2F0KHRoaXMuY29udGVudCksdGhpcy5zaXplK3Qubm9kZVNpemUpfSxDby5wcm90b3R5cGUuYWRkVG9FbmQ9ZnVuY3Rpb24odCl7cmV0dXJuIG5ldyBDbyh0aGlzLmNvbnRlbnQuY29uY2F0KHQpLHRoaXMuc2l6ZSt0Lm5vZGVTaXplKX0sQ28ucHJvdG90eXBlLmVxPWZ1bmN0aW9uKHQpe2lmKHRoaXMuY29udGVudC5sZW5ndGghPXQuY29udGVudC5sZW5ndGgpcmV0dXJuITE7Zm9yKHZhciBlPTA7ZTx0aGlzLmNvbnRlbnQubGVuZ3RoO2UrKylpZighdGhpcy5jb250ZW50W2VdLmVxKHQuY29udGVudFtlXSkpcmV0dXJuITE7cmV0dXJuITB9LE9vLmZpcnN0Q2hpbGQuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY29udGVudC5sZW5ndGg/dGhpcy5jb250ZW50WzBdOm51bGx9LE9vLmxhc3RDaGlsZC5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jb250ZW50Lmxlbmd0aD90aGlzLmNvbnRlbnRbdGhpcy5jb250ZW50Lmxlbmd0aC0xXTpudWxsfSxPby5jaGlsZENvdW50LmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLmNvbnRlbnQubGVuZ3RofSxDby5wcm90b3R5cGUuY2hpbGQ9ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5jb250ZW50W3RdO2lmKCFlKXRocm93IG5ldyBSYW5nZUVycm9yKCJJbmRleCAiK3QrIiBvdXQgb2YgcmFuZ2UgZm9yICIrdGhpcyk7cmV0dXJuIGV9LENvLnByb3RvdHlwZS5tYXliZUNoaWxkPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLmNvbnRlbnRbdF19LENvLnByb3RvdHlwZS5mb3JFYWNoPWZ1bmN0aW9uKHQpe2Zvcih2YXIgZT0wLG49MDtlPHRoaXMuY29udGVudC5sZW5ndGg7ZSsrKXt2YXIgcj10aGlzLmNvbnRlbnRbZV07dChyLG4sZSksbis9ci5ub2RlU2l6ZX19LENvLnByb3RvdHlwZS5maW5kRGlmZlN0YXJ0PWZ1bmN0aW9uKHQsZSl7cmV0dXJuIHZvaWQgMD09PWUmJihlPTApLGtvKHRoaXMsdCxlKX0sQ28ucHJvdG90eXBlLmZpbmREaWZmRW5kPWZ1bmN0aW9uKHQsZSxuKXtyZXR1cm4gdm9pZCAwPT09ZSYmKGU9dGhpcy5zaXplKSx2b2lkIDA9PT1uJiYobj10LnNpemUpLFNvKHRoaXMsdCxlLG4pfSxDby5wcm90b3R5cGUuZmluZEluZGV4PWZ1bmN0aW9uKHQsZSl7aWYodm9pZCAwPT09ZSYmKGU9LTEpLDA9PXQpcmV0dXJuIE5vKDAsdCk7aWYodD09dGhpcy5zaXplKXJldHVybiBObyh0aGlzLmNvbnRlbnQubGVuZ3RoLHQpO2lmKHQ+dGhpcy5zaXplfHx0PDApdGhyb3cgbmV3IFJhbmdlRXJyb3IoIlBvc2l0aW9uICIrdCsiIG91dHNpZGUgb2YgZnJhZ21lbnQgKCIrdGhpcysiKSIpO2Zvcih2YXIgbj0wLHI9MDs7bisrKXt2YXIgbz10aGlzLmNoaWxkKG4pLGk9citvLm5vZGVTaXplO2lmKGk+PXQpcmV0dXJuIGk9PXR8fGU+MD9ObyhuKzEsaSk6Tm8obixyKTtyPWl9fSxDby5wcm90b3R5cGUudG9TdHJpbmc9ZnVuY3Rpb24oKXtyZXR1cm4iPCIrdGhpcy50b1N0cmluZ0lubmVyKCkrIj4ifSxDby5wcm90b3R5cGUudG9TdHJpbmdJbm5lcj1mdW5jdGlvbigpe3JldHVybiB0aGlzLmNvbnRlbnQuam9pbigiLCAiKX0sQ28ucHJvdG90eXBlLnRvSlNPTj1mdW5jdGlvbigpe3JldHVybiB0aGlzLmNvbnRlbnQubGVuZ3RoP3RoaXMuY29udGVudC5tYXAoKGZ1bmN0aW9uKHQpe3JldHVybiB0LnRvSlNPTigpfSkpOm51bGx9LENvLmZyb21KU09OPWZ1bmN0aW9uKHQsZSl7aWYoIWUpcmV0dXJuIENvLmVtcHR5O2lmKCFBcnJheS5pc0FycmF5KGUpKXRocm93IG5ldyBSYW5nZUVycm9yKCJJbnZhbGlkIGlucHV0IGZvciBGcmFnbWVudC5mcm9tSlNPTiIpO3JldHVybiBuZXcgQ28oZS5tYXAodC5ub2RlRnJvbUpTT04pKX0sQ28uZnJvbUFycmF5PWZ1bmN0aW9uKHQpe2lmKCF0Lmxlbmd0aClyZXR1cm4gQ28uZW1wdHk7Zm9yKHZhciBlLG49MCxyPTA7cjx0Lmxlbmd0aDtyKyspe3ZhciBvPXRbcl07bis9by5ub2RlU2l6ZSxyJiZvLmlzVGV4dCYmdFtyLTFdLnNhbWVNYXJrdXAobyk/KGV8fChlPXQuc2xpY2UoMCxyKSksZVtlLmxlbmd0aC0xXT1vLndpdGhUZXh0KGVbZS5sZW5ndGgtMV0udGV4dCtvLnRleHQpKTplJiZlLnB1c2gobyl9cmV0dXJuIG5ldyBDbyhlfHx0LG4pfSxDby5mcm9tPWZ1bmN0aW9uKHQpe2lmKCF0KXJldHVybiBDby5lbXB0eTtpZih0IGluc3RhbmNlb2YgQ28pcmV0dXJuIHQ7aWYoQXJyYXkuaXNBcnJheSh0KSlyZXR1cm4gdGhpcy5mcm9tQXJyYXkodCk7aWYodC5hdHRycylyZXR1cm4gbmV3IENvKFt0XSx0Lm5vZGVTaXplKTt0aHJvdyBuZXcgUmFuZ2VFcnJvcigiQ2FuIG5vdCBjb252ZXJ0ICIrdCsiIHRvIGEgRnJhZ21lbnQiKyh0Lm5vZGVzQmV0d2Vlbj8iIChsb29rcyBsaWtlIG11bHRpcGxlIHZlcnNpb25zIG9mIHByb3NlbWlycm9yLW1vZGVsIHdlcmUgbG9hZGVkKSI6IiIpKX0sT2JqZWN0LmRlZmluZVByb3BlcnRpZXMoQ28ucHJvdG90eXBlLE9vKTt2YXIgTW89e2luZGV4OjAsb2Zmc2V0OjB9O2Z1bmN0aW9uIE5vKHQsZSl7cmV0dXJuIE1vLmluZGV4PXQsTW8ub2Zmc2V0PWUsTW99ZnVuY3Rpb24gVG8odCxlKXtpZih0PT09ZSlyZXR1cm4hMDtpZighdHx8Im9iamVjdCIhPXR5cGVvZiB0fHwhZXx8Im9iamVjdCIhPXR5cGVvZiBlKXJldHVybiExO3ZhciBuPUFycmF5LmlzQXJyYXkodCk7aWYoQXJyYXkuaXNBcnJheShlKSE9bilyZXR1cm4hMTtpZihuKXtpZih0Lmxlbmd0aCE9ZS5sZW5ndGgpcmV0dXJuITE7Zm9yKHZhciByPTA7cjx0Lmxlbmd0aDtyKyspaWYoIVRvKHRbcl0sZVtyXSkpcmV0dXJuITF9ZWxzZXtmb3IodmFyIG8gaW4gdClpZighKG8gaW4gZSl8fCFUbyh0W29dLGVbb10pKXJldHVybiExO2Zvcih2YXIgaSBpbiBlKWlmKCEoaSBpbiB0KSlyZXR1cm4hMX1yZXR1cm4hMH1Dby5lbXB0eT1uZXcgQ28oW10sMCk7dmFyIEFvPWZ1bmN0aW9uKHQsZSl7dGhpcy50eXBlPXQsdGhpcy5hdHRycz1lfTtmdW5jdGlvbiBFbyh0KXt2YXIgZT1FcnJvci5jYWxsKHRoaXMsdCk7cmV0dXJuIGUuX19wcm90b19fPUVvLnByb3RvdHlwZSxlfUFvLnByb3RvdHlwZS5hZGRUb1NldD1mdW5jdGlvbih0KXtmb3IodmFyIGUsbj0hMSxyPTA7cjx0Lmxlbmd0aDtyKyspe3ZhciBvPXRbcl07aWYodGhpcy5lcShvKSlyZXR1cm4gdDtpZih0aGlzLnR5cGUuZXhjbHVkZXMoby50eXBlKSllfHwoZT10LnNsaWNlKDAscikpO2Vsc2V7aWYoby50eXBlLmV4Y2x1ZGVzKHRoaXMudHlwZSkpcmV0dXJuIHQ7IW4mJm8udHlwZS5yYW5rPnRoaXMudHlwZS5yYW5rJiYoZXx8KGU9dC5zbGljZSgwLHIpKSxlLnB1c2godGhpcyksbj0hMCksZSYmZS5wdXNoKG8pfX1yZXR1cm4gZXx8KGU9dC5zbGljZSgpKSxufHxlLnB1c2godGhpcyksZX0sQW8ucHJvdG90eXBlLnJlbW92ZUZyb21TZXQ9ZnVuY3Rpb24odCl7Zm9yKHZhciBlPTA7ZTx0Lmxlbmd0aDtlKyspaWYodGhpcy5lcSh0W2VdKSlyZXR1cm4gdC5zbGljZSgwLGUpLmNvbmNhdCh0LnNsaWNlKGUrMSkpO3JldHVybiB0fSxBby5wcm90b3R5cGUuaXNJblNldD1mdW5jdGlvbih0KXtmb3IodmFyIGU9MDtlPHQubGVuZ3RoO2UrKylpZih0aGlzLmVxKHRbZV0pKXJldHVybiEwO3JldHVybiExfSxBby5wcm90b3R5cGUuZXE9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXM9PXR8fHRoaXMudHlwZT09dC50eXBlJiZUbyh0aGlzLmF0dHJzLHQuYXR0cnMpfSxBby5wcm90b3R5cGUudG9KU09OPWZ1bmN0aW9uKCl7dmFyIHQ9e3R5cGU6dGhpcy50eXBlLm5hbWV9O2Zvcih2YXIgZSBpbiB0aGlzLmF0dHJzKXt0LmF0dHJzPXRoaXMuYXR0cnM7YnJlYWt9cmV0dXJuIHR9LEFvLmZyb21KU09OPWZ1bmN0aW9uKHQsZSl7aWYoIWUpdGhyb3cgbmV3IFJhbmdlRXJyb3IoIkludmFsaWQgaW5wdXQgZm9yIE1hcmsuZnJvbUpTT04iKTt2YXIgbj10Lm1hcmtzW2UudHlwZV07aWYoIW4pdGhyb3cgbmV3IFJhbmdlRXJyb3IoIlRoZXJlIGlzIG5vIG1hcmsgdHlwZSAiK2UudHlwZSsiIGluIHRoaXMgc2NoZW1hIik7cmV0dXJuIG4uY3JlYXRlKGUuYXR0cnMpfSxBby5zYW1lU2V0PWZ1bmN0aW9uKHQsZSl7aWYodD09ZSlyZXR1cm4hMDtpZih0Lmxlbmd0aCE9ZS5sZW5ndGgpcmV0dXJuITE7Zm9yKHZhciBuPTA7bjx0Lmxlbmd0aDtuKyspaWYoIXRbbl0uZXEoZVtuXSkpcmV0dXJuITE7cmV0dXJuITB9LEFvLnNldEZyb209ZnVuY3Rpb24odCl7aWYoIXR8fDA9PXQubGVuZ3RoKXJldHVybiBBby5ub25lO2lmKHQgaW5zdGFuY2VvZiBBbylyZXR1cm5bdF07dmFyIGU9dC5zbGljZSgpO3JldHVybiBlLnNvcnQoKGZ1bmN0aW9uKHQsZSl7cmV0dXJuIHQudHlwZS5yYW5rLWUudHlwZS5yYW5rfSkpLGV9LEFvLm5vbmU9W10sRW8ucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoRXJyb3IucHJvdG90eXBlKSxFby5wcm90b3R5cGUuY29uc3RydWN0b3I9RW8sRW8ucHJvdG90eXBlLm5hbWU9IlJlcGxhY2VFcnJvciI7dmFyIERvPWZ1bmN0aW9uKHQsZSxuKXt0aGlzLmNvbnRlbnQ9dCx0aGlzLm9wZW5TdGFydD1lLHRoaXMub3BlbkVuZD1ufSxSbz17c2l6ZTp7Y29uZmlndXJhYmxlOiEwfX07ZnVuY3Rpb24gem8odCxlLG4pe3ZhciByPXQuZmluZEluZGV4KGUpLG89ci5pbmRleCxpPXIub2Zmc2V0LHM9dC5tYXliZUNoaWxkKG8pLGE9dC5maW5kSW5kZXgobiksYz1hLmluZGV4LHU9YS5vZmZzZXQ7aWYoaT09ZXx8cy5pc1RleHQpe2lmKHUhPW4mJiF0LmNoaWxkKGMpLmlzVGV4dCl0aHJvdyBuZXcgUmFuZ2VFcnJvcigiUmVtb3Zpbmcgbm9uLWZsYXQgcmFuZ2UiKTtyZXR1cm4gdC5jdXQoMCxlKS5hcHBlbmQodC5jdXQobikpfWlmKG8hPWMpdGhyb3cgbmV3IFJhbmdlRXJyb3IoIlJlbW92aW5nIG5vbi1mbGF0IHJhbmdlIik7cmV0dXJuIHQucmVwbGFjZUNoaWxkKG8scy5jb3B5KHpvKHMuY29udGVudCxlLWktMSxuLWktMSkpKX1mdW5jdGlvbiBQbyh0LGUsbixyKXt2YXIgbz10LmZpbmRJbmRleChlKSxpPW8uaW5kZXgscz1vLm9mZnNldCxhPXQubWF5YmVDaGlsZChpKTtpZihzPT1lfHxhLmlzVGV4dClyZXR1cm4gciYmIXIuY2FuUmVwbGFjZShpLGksbik/bnVsbDp0LmN1dCgwLGUpLmFwcGVuZChuKS5hcHBlbmQodC5jdXQoZSkpO3ZhciBjPVBvKGEuY29udGVudCxlLXMtMSxuKTtyZXR1cm4gYyYmdC5yZXBsYWNlQ2hpbGQoaSxhLmNvcHkoYykpfWZ1bmN0aW9uIElvKHQsZSxuKXtpZihuLm9wZW5TdGFydD50LmRlcHRoKXRocm93IG5ldyBFbygiSW5zZXJ0ZWQgY29udGVudCBkZWVwZXIgdGhhbiBpbnNlcnRpb24gcG9zaXRpb24iKTtpZih0LmRlcHRoLW4ub3BlblN0YXJ0IT1lLmRlcHRoLW4ub3BlbkVuZCl0aHJvdyBuZXcgRW8oIkluY29uc2lzdGVudCBvcGVuIGRlcHRocyIpO3JldHVybiBCbyh0LGUsbiwwKX1mdW5jdGlvbiBCbyh0LGUsbixyKXt2YXIgbz10LmluZGV4KHIpLGk9dC5ub2RlKHIpO2lmKG89PWUuaW5kZXgocikmJnI8dC5kZXB0aC1uLm9wZW5TdGFydCl7dmFyIHM9Qm8odCxlLG4scisxKTtyZXR1cm4gaS5jb3B5KGkuY29udGVudC5yZXBsYWNlQ2hpbGQobyxzKSl9aWYobi5jb250ZW50LnNpemUpe2lmKG4ub3BlblN0YXJ0fHxuLm9wZW5FbmR8fHQuZGVwdGghPXJ8fGUuZGVwdGghPXIpe3ZhciBhPUpvKG4sdCksYz1hLnN0YXJ0LHU9YS5lbmQ7cmV0dXJuIFZvKGksTG8odCxjLHUsZSxyKSl9dmFyIGw9dC5wYXJlbnQsaD1sLmNvbnRlbnQ7cmV0dXJuIFZvKGwsaC5jdXQoMCx0LnBhcmVudE9mZnNldCkuYXBwZW5kKG4uY29udGVudCkuYXBwZW5kKGguY3V0KGUucGFyZW50T2Zmc2V0KSkpfXJldHVybiBWbyhpLHFvKHQsZSxyKSl9ZnVuY3Rpb24gX28odCxlKXtpZighZS50eXBlLmNvbXBhdGlibGVDb250ZW50KHQudHlwZSkpdGhyb3cgbmV3IEVvKCJDYW5ub3Qgam9pbiAiK2UudHlwZS5uYW1lKyIgb250byAiK3QudHlwZS5uYW1lKX1mdW5jdGlvbiBGbyh0LGUsbil7dmFyIHI9dC5ub2RlKG4pO3JldHVybiBfbyhyLGUubm9kZShuKSkscn1mdW5jdGlvbiBqbyh0LGUpe3ZhciBuPWUubGVuZ3RoLTE7bj49MCYmdC5pc1RleHQmJnQuc2FtZU1hcmt1cChlW25dKT9lW25dPXQud2l0aFRleHQoZVtuXS50ZXh0K3QudGV4dCk6ZS5wdXNoKHQpfWZ1bmN0aW9uICRvKHQsZSxuLHIpe3ZhciBvPShlfHx0KS5ub2RlKG4pLGk9MCxzPWU/ZS5pbmRleChuKTpvLmNoaWxkQ291bnQ7dCYmKGk9dC5pbmRleChuKSx0LmRlcHRoPm4/aSsrOnQudGV4dE9mZnNldCYmKGpvKHQubm9kZUFmdGVyLHIpLGkrKykpO2Zvcih2YXIgYT1pO2E8czthKyspam8oby5jaGlsZChhKSxyKTtlJiZlLmRlcHRoPT1uJiZlLnRleHRPZmZzZXQmJmpvKGUubm9kZUJlZm9yZSxyKX1mdW5jdGlvbiBWbyh0LGUpe2lmKCF0LnR5cGUudmFsaWRDb250ZW50KGUpKXRocm93IG5ldyBFbygiSW52YWxpZCBjb250ZW50IGZvciBub2RlICIrdC50eXBlLm5hbWUpO3JldHVybiB0LmNvcHkoZSl9ZnVuY3Rpb24gTG8odCxlLG4scixvKXt2YXIgaT10LmRlcHRoPm8mJkZvKHQsZSxvKzEpLHM9ci5kZXB0aD5vJiZGbyhuLHIsbysxKSxhPVtdO3JldHVybiAkbyhudWxsLHQsbyxhKSxpJiZzJiZlLmluZGV4KG8pPT1uLmluZGV4KG8pPyhfbyhpLHMpLGpvKFZvKGksTG8odCxlLG4scixvKzEpKSxhKSk6KGkmJmpvKFZvKGkscW8odCxlLG8rMSkpLGEpLCRvKGUsbixvLGEpLHMmJmpvKFZvKHMscW8obixyLG8rMSkpLGEpKSwkbyhyLG51bGwsbyxhKSxuZXcgQ28oYSl9ZnVuY3Rpb24gcW8odCxlLG4pe3ZhciByPVtdO2lmKCRvKG51bGwsdCxuLHIpLHQuZGVwdGg+bil7dmFyIG89Rm8odCxlLG4rMSk7am8oVm8obyxxbyh0LGUsbisxKSkscil9cmV0dXJuICRvKGUsbnVsbCxuLHIpLG5ldyBDbyhyKX1mdW5jdGlvbiBKbyh0LGUpe2Zvcih2YXIgbj1lLmRlcHRoLXQub3BlblN0YXJ0LHI9ZS5ub2RlKG4pLG89ci5jb3B5KHQuY29udGVudCksaT1uLTE7aT49MDtpLS0pbz1lLm5vZGUoaSkuY29weShDby5mcm9tKG8pKTtyZXR1cm57c3RhcnQ6by5yZXNvbHZlTm9DYWNoZSh0Lm9wZW5TdGFydCtuKSxlbmQ6by5yZXNvbHZlTm9DYWNoZShvLmNvbnRlbnQuc2l6ZS10Lm9wZW5FbmQtbil9fVJvLnNpemUuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY29udGVudC5zaXplLXRoaXMub3BlblN0YXJ0LXRoaXMub3BlbkVuZH0sRG8ucHJvdG90eXBlLmluc2VydEF0PWZ1bmN0aW9uKHQsZSl7dmFyIG49UG8odGhpcy5jb250ZW50LHQrdGhpcy5vcGVuU3RhcnQsZSxudWxsKTtyZXR1cm4gbiYmbmV3IERvKG4sdGhpcy5vcGVuU3RhcnQsdGhpcy5vcGVuRW5kKX0sRG8ucHJvdG90eXBlLnJlbW92ZUJldHdlZW49ZnVuY3Rpb24odCxlKXtyZXR1cm4gbmV3IERvKHpvKHRoaXMuY29udGVudCx0K3RoaXMub3BlblN0YXJ0LGUrdGhpcy5vcGVuU3RhcnQpLHRoaXMub3BlblN0YXJ0LHRoaXMub3BlbkVuZCl9LERvLnByb3RvdHlwZS5lcT1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5jb250ZW50LmVxKHQuY29udGVudCkmJnRoaXMub3BlblN0YXJ0PT10Lm9wZW5TdGFydCYmdGhpcy5vcGVuRW5kPT10Lm9wZW5FbmR9LERvLnByb3RvdHlwZS50b1N0cmluZz1mdW5jdGlvbigpe3JldHVybiB0aGlzLmNvbnRlbnQrIigiK3RoaXMub3BlblN0YXJ0KyIsIit0aGlzLm9wZW5FbmQrIikifSxEby5wcm90b3R5cGUudG9KU09OPWZ1bmN0aW9uKCl7aWYoIXRoaXMuY29udGVudC5zaXplKXJldHVybiBudWxsO3ZhciB0PXtjb250ZW50OnRoaXMuY29udGVudC50b0pTT04oKX07cmV0dXJuIHRoaXMub3BlblN0YXJ0PjAmJih0Lm9wZW5TdGFydD10aGlzLm9wZW5TdGFydCksdGhpcy5vcGVuRW5kPjAmJih0Lm9wZW5FbmQ9dGhpcy5vcGVuRW5kKSx0fSxEby5mcm9tSlNPTj1mdW5jdGlvbih0LGUpe2lmKCFlKXJldHVybiBEby5lbXB0eTt2YXIgbj1lLm9wZW5TdGFydHx8MCxyPWUub3BlbkVuZHx8MDtpZigibnVtYmVyIiE9dHlwZW9mIG58fCJudW1iZXIiIT10eXBlb2Ygcil0aHJvdyBuZXcgUmFuZ2VFcnJvcigiSW52YWxpZCBpbnB1dCBmb3IgU2xpY2UuZnJvbUpTT04iKTtyZXR1cm4gbmV3IERvKENvLmZyb21KU09OKHQsZS5jb250ZW50KSxlLm9wZW5TdGFydHx8MCxlLm9wZW5FbmR8fDApfSxEby5tYXhPcGVuPWZ1bmN0aW9uKHQsZSl7dm9pZCAwPT09ZSYmKGU9ITApO2Zvcih2YXIgbj0wLHI9MCxvPXQuZmlyc3RDaGlsZDtvJiYhby5pc0xlYWYmJihlfHwhby50eXBlLnNwZWMuaXNvbGF0aW5nKTtvPW8uZmlyc3RDaGlsZCluKys7Zm9yKHZhciBpPXQubGFzdENoaWxkO2kmJiFpLmlzTGVhZiYmKGV8fCFpLnR5cGUuc3BlYy5pc29sYXRpbmcpO2k9aS5sYXN0Q2hpbGQpcisrO3JldHVybiBuZXcgRG8odCxuLHIpfSxPYmplY3QuZGVmaW5lUHJvcGVydGllcyhEby5wcm90b3R5cGUsUm8pLERvLmVtcHR5PW5ldyBEbyhDby5lbXB0eSwwLDApO3ZhciBXbz1mdW5jdGlvbih0LGUsbil7dGhpcy5wb3M9dCx0aGlzLnBhdGg9ZSx0aGlzLmRlcHRoPWUubGVuZ3RoLzMtMSx0aGlzLnBhcmVudE9mZnNldD1ufSxIbz17cGFyZW50Ontjb25maWd1cmFibGU6ITB9LGRvYzp7Y29uZmlndXJhYmxlOiEwfSx0ZXh0T2Zmc2V0Ontjb25maWd1cmFibGU6ITB9LG5vZGVBZnRlcjp7Y29uZmlndXJhYmxlOiEwfSxub2RlQmVmb3JlOntjb25maWd1cmFibGU6ITB9fTtXby5wcm90b3R5cGUucmVzb2x2ZURlcHRoPWZ1bmN0aW9uKHQpe3JldHVybiBudWxsPT10P3RoaXMuZGVwdGg6dDwwP3RoaXMuZGVwdGgrdDp0fSxIby5wYXJlbnQuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubm9kZSh0aGlzLmRlcHRoKX0sSG8uZG9jLmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLm5vZGUoMCl9LFdvLnByb3RvdHlwZS5ub2RlPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLnBhdGhbMyp0aGlzLnJlc29sdmVEZXB0aCh0KV19LFdvLnByb3RvdHlwZS5pbmRleD1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5wYXRoWzMqdGhpcy5yZXNvbHZlRGVwdGgodCkrMV19LFdvLnByb3RvdHlwZS5pbmRleEFmdGVyPWZ1bmN0aW9uKHQpe3JldHVybiB0PXRoaXMucmVzb2x2ZURlcHRoKHQpLHRoaXMuaW5kZXgodCkrKHQhPXRoaXMuZGVwdGh8fHRoaXMudGV4dE9mZnNldD8xOjApfSxXby5wcm90b3R5cGUuc3RhcnQ9ZnVuY3Rpb24odCl7cmV0dXJuIHQ9dGhpcy5yZXNvbHZlRGVwdGgodCksMD09dD8wOnRoaXMucGF0aFszKnQtMV0rMX0sV28ucHJvdG90eXBlLmVuZD1mdW5jdGlvbih0KXtyZXR1cm4gdD10aGlzLnJlc29sdmVEZXB0aCh0KSx0aGlzLnN0YXJ0KHQpK3RoaXMubm9kZSh0KS5jb250ZW50LnNpemV9LFdvLnByb3RvdHlwZS5iZWZvcmU9ZnVuY3Rpb24odCl7aWYodD10aGlzLnJlc29sdmVEZXB0aCh0KSwhdCl0aHJvdyBuZXcgUmFuZ2VFcnJvcigiVGhlcmUgaXMgbm8gcG9zaXRpb24gYmVmb3JlIHRoZSB0b3AtbGV2ZWwgbm9kZSIpO3JldHVybiB0PT10aGlzLmRlcHRoKzE/dGhpcy5wb3M6dGhpcy5wYXRoWzMqdC0xXX0sV28ucHJvdG90eXBlLmFmdGVyPWZ1bmN0aW9uKHQpe2lmKHQ9dGhpcy5yZXNvbHZlRGVwdGgodCksIXQpdGhyb3cgbmV3IFJhbmdlRXJyb3IoIlRoZXJlIGlzIG5vIHBvc2l0aW9uIGFmdGVyIHRoZSB0b3AtbGV2ZWwgbm9kZSIpO3JldHVybiB0PT10aGlzLmRlcHRoKzE/dGhpcy5wb3M6dGhpcy5wYXRoWzMqdC0xXSt0aGlzLnBhdGhbMyp0XS5ub2RlU2l6ZX0sSG8udGV4dE9mZnNldC5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5wb3MtdGhpcy5wYXRoW3RoaXMucGF0aC5sZW5ndGgtMV19LEhvLm5vZGVBZnRlci5nZXQ9ZnVuY3Rpb24oKXt2YXIgdD10aGlzLnBhcmVudCxlPXRoaXMuaW5kZXgodGhpcy5kZXB0aCk7aWYoZT09dC5jaGlsZENvdW50KXJldHVybiBudWxsO3ZhciBuPXRoaXMucG9zLXRoaXMucGF0aFt0aGlzLnBhdGgubGVuZ3RoLTFdLHI9dC5jaGlsZChlKTtyZXR1cm4gbj90LmNoaWxkKGUpLmN1dChuKTpyfSxIby5ub2RlQmVmb3JlLmdldD1mdW5jdGlvbigpe3ZhciB0PXRoaXMuaW5kZXgodGhpcy5kZXB0aCksZT10aGlzLnBvcy10aGlzLnBhdGhbdGhpcy5wYXRoLmxlbmd0aC0xXTtyZXR1cm4gZT90aGlzLnBhcmVudC5jaGlsZCh0KS5jdXQoMCxlKTowPT10P251bGw6dGhpcy5wYXJlbnQuY2hpbGQodC0xKX0sV28ucHJvdG90eXBlLm1hcmtzPWZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5wYXJlbnQsZT10aGlzLmluZGV4KCk7aWYoMD09dC5jb250ZW50LnNpemUpcmV0dXJuIEFvLm5vbmU7aWYodGhpcy50ZXh0T2Zmc2V0KXJldHVybiB0LmNoaWxkKGUpLm1hcmtzO3ZhciBuPXQubWF5YmVDaGlsZChlLTEpLHI9dC5tYXliZUNoaWxkKGUpO2lmKCFuKXt2YXIgbz1uO249cixyPW99Zm9yKHZhciBpPW4ubWFya3Mscz0wO3M8aS5sZW5ndGg7cysrKSExIT09aVtzXS50eXBlLnNwZWMuaW5jbHVzaXZlfHxyJiZpW3NdLmlzSW5TZXQoci5tYXJrcyl8fChpPWlbcy0tXS5yZW1vdmVGcm9tU2V0KGkpKTtyZXR1cm4gaX0sV28ucHJvdG90eXBlLm1hcmtzQWNyb3NzPWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMucGFyZW50Lm1heWJlQ2hpbGQodGhpcy5pbmRleCgpKTtpZighZXx8IWUuaXNJbmxpbmUpcmV0dXJuIG51bGw7Zm9yKHZhciBuPWUubWFya3Mscj10LnBhcmVudC5tYXliZUNoaWxkKHQuaW5kZXgoKSksbz0wO288bi5sZW5ndGg7bysrKSExIT09bltvXS50eXBlLnNwZWMuaW5jbHVzaXZlfHxyJiZuW29dLmlzSW5TZXQoci5tYXJrcyl8fChuPW5bby0tXS5yZW1vdmVGcm9tU2V0KG4pKTtyZXR1cm4gbn0sV28ucHJvdG90eXBlLnNoYXJlZERlcHRoPWZ1bmN0aW9uKHQpe2Zvcih2YXIgZT10aGlzLmRlcHRoO2U+MDtlLS0paWYodGhpcy5zdGFydChlKTw9dCYmdGhpcy5lbmQoZSk+PXQpcmV0dXJuIGU7cmV0dXJuIDB9LFdvLnByb3RvdHlwZS5ibG9ja1JhbmdlPWZ1bmN0aW9uKHQsZSl7aWYodm9pZCAwPT09dCYmKHQ9dGhpcyksdC5wb3M8dGhpcy5wb3MpcmV0dXJuIHQuYmxvY2tSYW5nZSh0aGlzKTtmb3IodmFyIG49dGhpcy5kZXB0aC0odGhpcy5wYXJlbnQuaW5saW5lQ29udGVudHx8dGhpcy5wb3M9PXQucG9zPzE6MCk7bj49MDtuLS0paWYodC5wb3M8PXRoaXMuZW5kKG4pJiYoIWV8fGUodGhpcy5ub2RlKG4pKSkpcmV0dXJuIG5ldyBYbyh0aGlzLHQsbil9LFdvLnByb3RvdHlwZS5zYW1lUGFyZW50PWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLnBvcy10aGlzLnBhcmVudE9mZnNldD09dC5wb3MtdC5wYXJlbnRPZmZzZXR9LFdvLnByb3RvdHlwZS5tYXg9ZnVuY3Rpb24odCl7cmV0dXJuIHQucG9zPnRoaXMucG9zP3Q6dGhpc30sV28ucHJvdG90eXBlLm1pbj1mdW5jdGlvbih0KXtyZXR1cm4gdC5wb3M8dGhpcy5wb3M/dDp0aGlzfSxXby5wcm90b3R5cGUudG9TdHJpbmc9ZnVuY3Rpb24oKXtmb3IodmFyIHQ9IiIsZT0xO2U8PXRoaXMuZGVwdGg7ZSsrKXQrPSh0PyIvIjoiIikrdGhpcy5ub2RlKGUpLnR5cGUubmFtZSsiXyIrdGhpcy5pbmRleChlLTEpO3JldHVybiB0KyI6Iit0aGlzLnBhcmVudE9mZnNldH0sV28ucmVzb2x2ZT1mdW5jdGlvbih0LGUpe2lmKCEoZT49MCYmZTw9dC5jb250ZW50LnNpemUpKXRocm93IG5ldyBSYW5nZUVycm9yKCJQb3NpdGlvbiAiK2UrIiBvdXQgb2YgcmFuZ2UiKTtmb3IodmFyIG49W10scj0wLG89ZSxpPXQ7Oyl7dmFyIHM9aS5jb250ZW50LmZpbmRJbmRleChvKSxhPXMuaW5kZXgsYz1zLm9mZnNldCx1PW8tYztpZihuLnB1c2goaSxhLHIrYyksIXUpYnJlYWs7aWYoaT1pLmNoaWxkKGEpLGkuaXNUZXh0KWJyZWFrO289dS0xLHIrPWMrMX1yZXR1cm4gbmV3IFdvKGUsbixvKX0sV28ucmVzb2x2ZUNhY2hlZD1mdW5jdGlvbih0LGUpe2Zvcih2YXIgbj0wO248S28ubGVuZ3RoO24rKyl7dmFyIHI9S29bbl07aWYoci5wb3M9PWUmJnIuZG9jPT10KXJldHVybiByfXZhciBvPUtvW1VvXT1Xby5yZXNvbHZlKHQsZSk7cmV0dXJuIFVvPShVbysxKSVHbyxvfSxPYmplY3QuZGVmaW5lUHJvcGVydGllcyhXby5wcm90b3R5cGUsSG8pO3ZhciBLbz1bXSxVbz0wLEdvPTEyLFhvPWZ1bmN0aW9uKHQsZSxuKXt0aGlzLiRmcm9tPXQsdGhpcy4kdG89ZSx0aGlzLmRlcHRoPW59LFlvPXtzdGFydDp7Y29uZmlndXJhYmxlOiEwfSxlbmQ6e2NvbmZpZ3VyYWJsZTohMH0scGFyZW50Ontjb25maWd1cmFibGU6ITB9LHN0YXJ0SW5kZXg6e2NvbmZpZ3VyYWJsZTohMH0sZW5kSW5kZXg6e2NvbmZpZ3VyYWJsZTohMH19O1lvLnN0YXJ0LmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLiRmcm9tLmJlZm9yZSh0aGlzLmRlcHRoKzEpfSxZby5lbmQuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuJHRvLmFmdGVyKHRoaXMuZGVwdGgrMSl9LFlvLnBhcmVudC5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy4kZnJvbS5ub2RlKHRoaXMuZGVwdGgpfSxZby5zdGFydEluZGV4LmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLiRmcm9tLmluZGV4KHRoaXMuZGVwdGgpfSxZby5lbmRJbmRleC5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy4kdG8uaW5kZXhBZnRlcih0aGlzLmRlcHRoKX0sT2JqZWN0LmRlZmluZVByb3BlcnRpZXMoWG8ucHJvdG90eXBlLFlvKTt2YXIgWm89T2JqZWN0LmNyZWF0ZShudWxsKSxRbz1mdW5jdGlvbih0LGUsbixyKXt0aGlzLnR5cGU9dCx0aGlzLmF0dHJzPWUsdGhpcy5jb250ZW50PW58fENvLmVtcHR5LHRoaXMubWFya3M9cnx8QW8ubm9uZX0sdGk9e25vZGVTaXplOntjb25maWd1cmFibGU6ITB9LGNoaWxkQ291bnQ6e2NvbmZpZ3VyYWJsZTohMH0sdGV4dENvbnRlbnQ6e2NvbmZpZ3VyYWJsZTohMH0sZmlyc3RDaGlsZDp7Y29uZmlndXJhYmxlOiEwfSxsYXN0Q2hpbGQ6e2NvbmZpZ3VyYWJsZTohMH0saXNCbG9jazp7Y29uZmlndXJhYmxlOiEwfSxpc1RleHRibG9jazp7Y29uZmlndXJhYmxlOiEwfSxpbmxpbmVDb250ZW50Ontjb25maWd1cmFibGU6ITB9LGlzSW5saW5lOntjb25maWd1cmFibGU6ITB9LGlzVGV4dDp7Y29uZmlndXJhYmxlOiEwfSxpc0xlYWY6e2NvbmZpZ3VyYWJsZTohMH0saXNBdG9tOntjb25maWd1cmFibGU6ITB9fTt0aS5ub2RlU2l6ZS5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5pc0xlYWY/MToyK3RoaXMuY29udGVudC5zaXplfSx0aS5jaGlsZENvdW50LmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLmNvbnRlbnQuY2hpbGRDb3VudH0sUW8ucHJvdG90eXBlLmNoaWxkPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLmNvbnRlbnQuY2hpbGQodCl9LFFvLnByb3RvdHlwZS5tYXliZUNoaWxkPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLmNvbnRlbnQubWF5YmVDaGlsZCh0KX0sUW8ucHJvdG90eXBlLmZvckVhY2g9ZnVuY3Rpb24odCl7dGhpcy5jb250ZW50LmZvckVhY2godCl9LFFvLnByb3RvdHlwZS5ub2Rlc0JldHdlZW49ZnVuY3Rpb24odCxlLG4scil7dm9pZCAwPT09ciYmKHI9MCksdGhpcy5jb250ZW50Lm5vZGVzQmV0d2Vlbih0LGUsbixyLHRoaXMpfSxRby5wcm90b3R5cGUuZGVzY2VuZGFudHM9ZnVuY3Rpb24odCl7dGhpcy5ub2Rlc0JldHdlZW4oMCx0aGlzLmNvbnRlbnQuc2l6ZSx0KX0sdGkudGV4dENvbnRlbnQuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudGV4dEJldHdlZW4oMCx0aGlzLmNvbnRlbnQuc2l6ZSwiIil9LFFvLnByb3RvdHlwZS50ZXh0QmV0d2Vlbj1mdW5jdGlvbih0LGUsbixyKXtyZXR1cm4gdGhpcy5jb250ZW50LnRleHRCZXR3ZWVuKHQsZSxuLHIpfSx0aS5maXJzdENoaWxkLmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLmNvbnRlbnQuZmlyc3RDaGlsZH0sdGkubGFzdENoaWxkLmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLmNvbnRlbnQubGFzdENoaWxkfSxRby5wcm90b3R5cGUuZXE9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXM9PXR8fHRoaXMuc2FtZU1hcmt1cCh0KSYmdGhpcy5jb250ZW50LmVxKHQuY29udGVudCl9LFFvLnByb3RvdHlwZS5zYW1lTWFya3VwPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLmhhc01hcmt1cCh0LnR5cGUsdC5hdHRycyx0Lm1hcmtzKX0sUW8ucHJvdG90eXBlLmhhc01hcmt1cD1mdW5jdGlvbih0LGUsbil7cmV0dXJuIHRoaXMudHlwZT09dCYmVG8odGhpcy5hdHRycyxlfHx0LmRlZmF1bHRBdHRyc3x8Wm8pJiZBby5zYW1lU2V0KHRoaXMubWFya3Msbnx8QW8ubm9uZSl9LFFvLnByb3RvdHlwZS5jb3B5PWZ1bmN0aW9uKHQpe3JldHVybiB2b2lkIDA9PT10JiYodD1udWxsKSx0PT10aGlzLmNvbnRlbnQ/dGhpczpuZXcgdGhpcy5jb25zdHJ1Y3Rvcih0aGlzLnR5cGUsdGhpcy5hdHRycyx0LHRoaXMubWFya3MpfSxRby5wcm90b3R5cGUubWFyaz1mdW5jdGlvbih0KXtyZXR1cm4gdD09dGhpcy5tYXJrcz90aGlzOm5ldyB0aGlzLmNvbnN0cnVjdG9yKHRoaXMudHlwZSx0aGlzLmF0dHJzLHRoaXMuY29udGVudCx0KX0sUW8ucHJvdG90eXBlLmN1dD1mdW5jdGlvbih0LGUpe3JldHVybiAwPT10JiZlPT10aGlzLmNvbnRlbnQuc2l6ZT90aGlzOnRoaXMuY29weSh0aGlzLmNvbnRlbnQuY3V0KHQsZSkpfSxRby5wcm90b3R5cGUuc2xpY2U9ZnVuY3Rpb24odCxlLG4pe2lmKHZvaWQgMD09PWUmJihlPXRoaXMuY29udGVudC5zaXplKSx2b2lkIDA9PT1uJiYobj0hMSksdD09ZSlyZXR1cm4gRG8uZW1wdHk7dmFyIHI9dGhpcy5yZXNvbHZlKHQpLG89dGhpcy5yZXNvbHZlKGUpLGk9bj8wOnIuc2hhcmVkRGVwdGgoZSkscz1yLnN0YXJ0KGkpLGE9ci5ub2RlKGkpLGM9YS5jb250ZW50LmN1dChyLnBvcy1zLG8ucG9zLXMpO3JldHVybiBuZXcgRG8oYyxyLmRlcHRoLWksby5kZXB0aC1pKX0sUW8ucHJvdG90eXBlLnJlcGxhY2U9ZnVuY3Rpb24odCxlLG4pe3JldHVybiBJbyh0aGlzLnJlc29sdmUodCksdGhpcy5yZXNvbHZlKGUpLG4pfSxRby5wcm90b3R5cGUubm9kZUF0PWZ1bmN0aW9uKHQpe2Zvcih2YXIgZT10aGlzOzspe3ZhciBuPWUuY29udGVudC5maW5kSW5kZXgodCkscj1uLmluZGV4LG89bi5vZmZzZXQ7aWYoZT1lLm1heWJlQ2hpbGQociksIWUpcmV0dXJuIG51bGw7aWYobz09dHx8ZS5pc1RleHQpcmV0dXJuIGU7dC09bysxfX0sUW8ucHJvdG90eXBlLmNoaWxkQWZ0ZXI9ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5jb250ZW50LmZpbmRJbmRleCh0KSxuPWUuaW5kZXgscj1lLm9mZnNldDtyZXR1cm57bm9kZTp0aGlzLmNvbnRlbnQubWF5YmVDaGlsZChuKSxpbmRleDpuLG9mZnNldDpyfX0sUW8ucHJvdG90eXBlLmNoaWxkQmVmb3JlPWZ1bmN0aW9uKHQpe2lmKDA9PXQpcmV0dXJue25vZGU6bnVsbCxpbmRleDowLG9mZnNldDowfTt2YXIgZT10aGlzLmNvbnRlbnQuZmluZEluZGV4KHQpLG49ZS5pbmRleCxyPWUub2Zmc2V0O2lmKHI8dClyZXR1cm57bm9kZTp0aGlzLmNvbnRlbnQuY2hpbGQobiksaW5kZXg6bixvZmZzZXQ6cn07dmFyIG89dGhpcy5jb250ZW50LmNoaWxkKG4tMSk7cmV0dXJue25vZGU6byxpbmRleDpuLTEsb2Zmc2V0OnItby5ub2RlU2l6ZX19LFFvLnByb3RvdHlwZS5yZXNvbHZlPWZ1bmN0aW9uKHQpe3JldHVybiBXby5yZXNvbHZlQ2FjaGVkKHRoaXMsdCl9LFFvLnByb3RvdHlwZS5yZXNvbHZlTm9DYWNoZT1mdW5jdGlvbih0KXtyZXR1cm4gV28ucmVzb2x2ZSh0aGlzLHQpfSxRby5wcm90b3R5cGUucmFuZ2VIYXNNYXJrPWZ1bmN0aW9uKHQsZSxuKXt2YXIgcj0hMTtyZXR1cm4gZT50JiZ0aGlzLm5vZGVzQmV0d2Vlbih0LGUsKGZ1bmN0aW9uKHQpe3JldHVybiBuLmlzSW5TZXQodC5tYXJrcykmJihyPSEwKSwhcn0pKSxyfSx0aS5pc0Jsb2NrLmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLnR5cGUuaXNCbG9ja30sdGkuaXNUZXh0YmxvY2suZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudHlwZS5pc1RleHRibG9ja30sdGkuaW5saW5lQ29udGVudC5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy50eXBlLmlubGluZUNvbnRlbnR9LHRpLmlzSW5saW5lLmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLnR5cGUuaXNJbmxpbmV9LHRpLmlzVGV4dC5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy50eXBlLmlzVGV4dH0sdGkuaXNMZWFmLmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLnR5cGUuaXNMZWFmfSx0aS5pc0F0b20uZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudHlwZS5pc0F0b219LFFvLnByb3RvdHlwZS50b1N0cmluZz1mdW5jdGlvbigpe2lmKHRoaXMudHlwZS5zcGVjLnRvRGVidWdTdHJpbmcpcmV0dXJuIHRoaXMudHlwZS5zcGVjLnRvRGVidWdTdHJpbmcodGhpcyk7dmFyIHQ9dGhpcy50eXBlLm5hbWU7cmV0dXJuIHRoaXMuY29udGVudC5zaXplJiYodCs9IigiK3RoaXMuY29udGVudC50b1N0cmluZ0lubmVyKCkrIikiKSxuaSh0aGlzLm1hcmtzLHQpfSxRby5wcm90b3R5cGUuY29udGVudE1hdGNoQXQ9ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy50eXBlLmNvbnRlbnRNYXRjaC5tYXRjaEZyYWdtZW50KHRoaXMuY29udGVudCwwLHQpO2lmKCFlKXRocm93IG5ldyBFcnJvcigiQ2FsbGVkIGNvbnRlbnRNYXRjaEF0IG9uIGEgbm9kZSB3aXRoIGludmFsaWQgY29udGVudCIpO3JldHVybiBlfSxRby5wcm90b3R5cGUuY2FuUmVwbGFjZT1mdW5jdGlvbih0LGUsbixyLG8pe3ZvaWQgMD09PW4mJihuPUNvLmVtcHR5KSx2b2lkIDA9PT1yJiYocj0wKSx2b2lkIDA9PT1vJiYobz1uLmNoaWxkQ291bnQpO3ZhciBpPXRoaXMuY29udGVudE1hdGNoQXQodCkubWF0Y2hGcmFnbWVudChuLHIsbykscz1pJiZpLm1hdGNoRnJhZ21lbnQodGhpcy5jb250ZW50LGUpO2lmKCFzfHwhcy52YWxpZEVuZClyZXR1cm4hMTtmb3IodmFyIGE9cjthPG87YSsrKWlmKCF0aGlzLnR5cGUuYWxsb3dzTWFya3Mobi5jaGlsZChhKS5tYXJrcykpcmV0dXJuITE7cmV0dXJuITB9LFFvLnByb3RvdHlwZS5jYW5SZXBsYWNlV2l0aD1mdW5jdGlvbih0LGUsbixyKXtpZihyJiYhdGhpcy50eXBlLmFsbG93c01hcmtzKHIpKXJldHVybiExO3ZhciBvPXRoaXMuY29udGVudE1hdGNoQXQodCkubWF0Y2hUeXBlKG4pLGk9byYmby5tYXRjaEZyYWdtZW50KHRoaXMuY29udGVudCxlKTtyZXR1cm4hIWkmJmkudmFsaWRFbmR9LFFvLnByb3RvdHlwZS5jYW5BcHBlbmQ9ZnVuY3Rpb24odCl7cmV0dXJuIHQuY29udGVudC5zaXplP3RoaXMuY2FuUmVwbGFjZSh0aGlzLmNoaWxkQ291bnQsdGhpcy5jaGlsZENvdW50LHQuY29udGVudCk6dGhpcy50eXBlLmNvbXBhdGlibGVDb250ZW50KHQudHlwZSl9LFFvLnByb3RvdHlwZS5jaGVjaz1mdW5jdGlvbigpe2lmKCF0aGlzLnR5cGUudmFsaWRDb250ZW50KHRoaXMuY29udGVudCkpdGhyb3cgbmV3IFJhbmdlRXJyb3IoIkludmFsaWQgY29udGVudCBmb3Igbm9kZSAiK3RoaXMudHlwZS5uYW1lKyI6ICIrdGhpcy5jb250ZW50LnRvU3RyaW5nKCkuc2xpY2UoMCw1MCkpO3RoaXMuY29udGVudC5mb3JFYWNoKChmdW5jdGlvbih0KXtyZXR1cm4gdC5jaGVjaygpfSkpfSxRby5wcm90b3R5cGUudG9KU09OPWZ1bmN0aW9uKCl7dmFyIHQ9e3R5cGU6dGhpcy50eXBlLm5hbWV9O2Zvcih2YXIgZSBpbiB0aGlzLmF0dHJzKXt0LmF0dHJzPXRoaXMuYXR0cnM7YnJlYWt9cmV0dXJuIHRoaXMuY29udGVudC5zaXplJiYodC5jb250ZW50PXRoaXMuY29udGVudC50b0pTT04oKSksdGhpcy5tYXJrcy5sZW5ndGgmJih0Lm1hcmtzPXRoaXMubWFya3MubWFwKChmdW5jdGlvbih0KXtyZXR1cm4gdC50b0pTT04oKX0pKSksdH0sUW8uZnJvbUpTT049ZnVuY3Rpb24odCxlKXtpZighZSl0aHJvdyBuZXcgUmFuZ2VFcnJvcigiSW52YWxpZCBpbnB1dCBmb3IgTm9kZS5mcm9tSlNPTiIpO3ZhciBuPW51bGw7aWYoZS5tYXJrcyl7aWYoIUFycmF5LmlzQXJyYXkoZS5tYXJrcykpdGhyb3cgbmV3IFJhbmdlRXJyb3IoIkludmFsaWQgbWFyayBkYXRhIGZvciBOb2RlLmZyb21KU09OIik7bj1lLm1hcmtzLm1hcCh0Lm1hcmtGcm9tSlNPTil9aWYoInRleHQiPT1lLnR5cGUpe2lmKCJzdHJpbmciIT10eXBlb2YgZS50ZXh0KXRocm93IG5ldyBSYW5nZUVycm9yKCJJbnZhbGlkIHRleHQgbm9kZSBpbiBKU09OIik7cmV0dXJuIHQudGV4dChlLnRleHQsbil9dmFyIHI9Q28uZnJvbUpTT04odCxlLmNvbnRlbnQpO3JldHVybiB0Lm5vZGVUeXBlKGUudHlwZSkuY3JlYXRlKGUuYXR0cnMscixuKX0sT2JqZWN0LmRlZmluZVByb3BlcnRpZXMoUW8ucHJvdG90eXBlLHRpKTt2YXIgZWk9ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZShlLG4scixvKXtpZih0LmNhbGwodGhpcyxlLG4sbnVsbCxvKSwhcil0aHJvdyBuZXcgUmFuZ2VFcnJvcigiRW1wdHkgdGV4dCBub2RlcyBhcmUgbm90IGFsbG93ZWQiKTt0aGlzLnRleHQ9cn10JiYoZS5fX3Byb3RvX189dCksZS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZSh0JiZ0LnByb3RvdHlwZSksZS5wcm90b3R5cGUuY29uc3RydWN0b3I9ZTt2YXIgbj17dGV4dENvbnRlbnQ6e2NvbmZpZ3VyYWJsZTohMH0sbm9kZVNpemU6e2NvbmZpZ3VyYWJsZTohMH19O3JldHVybiBlLnByb3RvdHlwZS50b1N0cmluZz1mdW5jdGlvbigpe3JldHVybiB0aGlzLnR5cGUuc3BlYy50b0RlYnVnU3RyaW5nP3RoaXMudHlwZS5zcGVjLnRvRGVidWdTdHJpbmcodGhpcyk6bmkodGhpcy5tYXJrcyxKU09OLnN0cmluZ2lmeSh0aGlzLnRleHQpKX0sbi50ZXh0Q29udGVudC5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy50ZXh0fSxlLnByb3RvdHlwZS50ZXh0QmV0d2Vlbj1mdW5jdGlvbih0LGUpe3JldHVybiB0aGlzLnRleHQuc2xpY2UodCxlKX0sbi5ub2RlU2l6ZS5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy50ZXh0Lmxlbmd0aH0sZS5wcm90b3R5cGUubWFyaz1mdW5jdGlvbih0KXtyZXR1cm4gdD09dGhpcy5tYXJrcz90aGlzOm5ldyBlKHRoaXMudHlwZSx0aGlzLmF0dHJzLHRoaXMudGV4dCx0KX0sZS5wcm90b3R5cGUud2l0aFRleHQ9ZnVuY3Rpb24odCl7cmV0dXJuIHQ9PXRoaXMudGV4dD90aGlzOm5ldyBlKHRoaXMudHlwZSx0aGlzLmF0dHJzLHQsdGhpcy5tYXJrcyl9LGUucHJvdG90eXBlLmN1dD1mdW5jdGlvbih0LGUpe3JldHVybiB2b2lkIDA9PT10JiYodD0wKSx2b2lkIDA9PT1lJiYoZT10aGlzLnRleHQubGVuZ3RoKSwwPT10JiZlPT10aGlzLnRleHQubGVuZ3RoP3RoaXM6dGhpcy53aXRoVGV4dCh0aGlzLnRleHQuc2xpY2UodCxlKSl9LGUucHJvdG90eXBlLmVxPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLnNhbWVNYXJrdXAodCkmJnRoaXMudGV4dD09dC50ZXh0fSxlLnByb3RvdHlwZS50b0pTT049ZnVuY3Rpb24oKXt2YXIgZT10LnByb3RvdHlwZS50b0pTT04uY2FsbCh0aGlzKTtyZXR1cm4gZS50ZXh0PXRoaXMudGV4dCxlfSxPYmplY3QuZGVmaW5lUHJvcGVydGllcyhlLnByb3RvdHlwZSxuKSxlfShRbyk7ZnVuY3Rpb24gbmkodCxlKXtmb3IodmFyIG49dC5sZW5ndGgtMTtuPj0wO24tLSllPXRbbl0udHlwZS5uYW1lKyIoIitlKyIpIjtyZXR1cm4gZX12YXIgcmk9ZnVuY3Rpb24odCl7dGhpcy52YWxpZEVuZD10LHRoaXMubmV4dD1bXSx0aGlzLndyYXBDYWNoZT1bXX0sb2k9e2lubGluZUNvbnRlbnQ6e2NvbmZpZ3VyYWJsZTohMH0sZGVmYXVsdFR5cGU6e2NvbmZpZ3VyYWJsZTohMH0sZWRnZUNvdW50Ontjb25maWd1cmFibGU6ITB9fTtyaS5wYXJzZT1mdW5jdGlvbih0LGUpe3ZhciBuPW5ldyBpaSh0LGUpO2lmKG51bGw9PW4ubmV4dClyZXR1cm4gcmkuZW1wdHk7dmFyIHI9YWkobik7bi5uZXh0JiZuLmVycigiVW5leHBlY3RlZCB0cmFpbGluZyB0ZXh0Iik7dmFyIG89Z2koZGkocikpO3JldHVybiB5aShvLG4pLG99LHJpLnByb3RvdHlwZS5tYXRjaFR5cGU9ZnVuY3Rpb24odCl7Zm9yKHZhciBlPTA7ZTx0aGlzLm5leHQubGVuZ3RoO2UrPTIpaWYodGhpcy5uZXh0W2VdPT10KXJldHVybiB0aGlzLm5leHRbZSsxXTtyZXR1cm4gbnVsbH0scmkucHJvdG90eXBlLm1hdGNoRnJhZ21lbnQ9ZnVuY3Rpb24odCxlLG4pe3ZvaWQgMD09PWUmJihlPTApLHZvaWQgMD09PW4mJihuPXQuY2hpbGRDb3VudCk7Zm9yKHZhciByPXRoaXMsbz1lO3ImJm88bjtvKyspcj1yLm1hdGNoVHlwZSh0LmNoaWxkKG8pLnR5cGUpO3JldHVybiByfSxvaS5pbmxpbmVDb250ZW50LmdldD1mdW5jdGlvbigpe3ZhciB0PXRoaXMubmV4dFswXTtyZXR1cm4hIXQmJnQuaXNJbmxpbmV9LG9pLmRlZmF1bHRUeXBlLmdldD1mdW5jdGlvbigpe2Zvcih2YXIgdD0wO3Q8dGhpcy5uZXh0Lmxlbmd0aDt0Kz0yKXt2YXIgZT10aGlzLm5leHRbdF07aWYoIWUuaXNUZXh0JiYhZS5oYXNSZXF1aXJlZEF0dHJzKCkpcmV0dXJuIGV9fSxyaS5wcm90b3R5cGUuY29tcGF0aWJsZT1mdW5jdGlvbih0KXtmb3IodmFyIGU9MDtlPHRoaXMubmV4dC5sZW5ndGg7ZSs9Milmb3IodmFyIG49MDtuPHQubmV4dC5sZW5ndGg7bis9MilpZih0aGlzLm5leHRbZV09PXQubmV4dFtuXSlyZXR1cm4hMDtyZXR1cm4hMX0scmkucHJvdG90eXBlLmZpbGxCZWZvcmU9ZnVuY3Rpb24odCxlLG4pe3ZvaWQgMD09PWUmJihlPSExKSx2b2lkIDA9PT1uJiYobj0wKTt2YXIgcj1bdGhpc107ZnVuY3Rpb24gbyhpLHMpe3ZhciBhPWkubWF0Y2hGcmFnbWVudCh0LG4pO2lmKGEmJighZXx8YS52YWxpZEVuZCkpcmV0dXJuIENvLmZyb20ocy5tYXAoKGZ1bmN0aW9uKHQpe3JldHVybiB0LmNyZWF0ZUFuZEZpbGwoKX0pKSk7Zm9yKHZhciBjPTA7YzxpLm5leHQubGVuZ3RoO2MrPTIpe3ZhciB1PWkubmV4dFtjXSxsPWkubmV4dFtjKzFdO2lmKCF1LmlzVGV4dCYmIXUuaGFzUmVxdWlyZWRBdHRycygpJiYtMT09ci5pbmRleE9mKGwpKXtyLnB1c2gobCk7dmFyIGg9byhsLHMuY29uY2F0KHUpKTtpZihoKXJldHVybiBofX19cmV0dXJuIG8odGhpcyxbXSl9LHJpLnByb3RvdHlwZS5maW5kV3JhcHBpbmc9ZnVuY3Rpb24odCl7Zm9yKHZhciBlPTA7ZTx0aGlzLndyYXBDYWNoZS5sZW5ndGg7ZSs9MilpZih0aGlzLndyYXBDYWNoZVtlXT09dClyZXR1cm4gdGhpcy53cmFwQ2FjaGVbZSsxXTt2YXIgbj10aGlzLmNvbXB1dGVXcmFwcGluZyh0KTtyZXR1cm4gdGhpcy53cmFwQ2FjaGUucHVzaCh0LG4pLG59LHJpLnByb3RvdHlwZS5jb21wdXRlV3JhcHBpbmc9ZnVuY3Rpb24odCl7dmFyIGU9T2JqZWN0LmNyZWF0ZShudWxsKSxuPVt7bWF0Y2g6dGhpcyx0eXBlOm51bGwsdmlhOm51bGx9XTt3aGlsZShuLmxlbmd0aCl7dmFyIHI9bi5zaGlmdCgpLG89ci5tYXRjaDtpZihvLm1hdGNoVHlwZSh0KSl7Zm9yKHZhciBpPVtdLHM9cjtzLnR5cGU7cz1zLnZpYSlpLnB1c2gocy50eXBlKTtyZXR1cm4gaS5yZXZlcnNlKCl9Zm9yKHZhciBhPTA7YTxvLm5leHQubGVuZ3RoO2ErPTIpe3ZhciBjPW8ubmV4dFthXTtjLmlzTGVhZnx8Yy5oYXNSZXF1aXJlZEF0dHJzKCl8fGMubmFtZSBpbiBlfHxyLnR5cGUmJiFvLm5leHRbYSsxXS52YWxpZEVuZHx8KG4ucHVzaCh7bWF0Y2g6Yy5jb250ZW50TWF0Y2gsdHlwZTpjLHZpYTpyfSksZVtjLm5hbWVdPSEwKX19fSxvaS5lZGdlQ291bnQuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubmV4dC5sZW5ndGg+PjF9LHJpLnByb3RvdHlwZS5lZGdlPWZ1bmN0aW9uKHQpe3ZhciBlPXQ8PDE7aWYoZT49dGhpcy5uZXh0Lmxlbmd0aCl0aHJvdyBuZXcgUmFuZ2VFcnJvcigiVGhlcmUncyBubyAiK3QrInRoIGVkZ2UgaW4gdGhpcyBjb250ZW50IG1hdGNoIik7cmV0dXJue3R5cGU6dGhpcy5uZXh0W2VdLG5leHQ6dGhpcy5uZXh0W2UrMV19fSxyaS5wcm90b3R5cGUudG9TdHJpbmc9ZnVuY3Rpb24oKXt2YXIgdD1bXTtmdW5jdGlvbiBlKG4pe3QucHVzaChuKTtmb3IodmFyIHI9MTtyPG4ubmV4dC5sZW5ndGg7cis9MiktMT09dC5pbmRleE9mKG4ubmV4dFtyXSkmJmUobi5uZXh0W3JdKX1yZXR1cm4gZSh0aGlzKSx0Lm1hcCgoZnVuY3Rpb24oZSxuKXtmb3IodmFyIHI9bisoZS52YWxpZEVuZD8iKiI6IiAiKSsiICIsbz0wO288ZS5uZXh0Lmxlbmd0aDtvKz0yKXIrPShvPyIsICI6IiIpK2UubmV4dFtvXS5uYW1lKyItPiIrdC5pbmRleE9mKGUubmV4dFtvKzFdKTtyZXR1cm4gcn0pKS5qb2luKCJcbiIpfSxPYmplY3QuZGVmaW5lUHJvcGVydGllcyhyaS5wcm90b3R5cGUsb2kpLHJpLmVtcHR5PW5ldyByaSghMCk7dmFyIGlpPWZ1bmN0aW9uKHQsZSl7dGhpcy5zdHJpbmc9dCx0aGlzLm5vZGVUeXBlcz1lLHRoaXMuaW5saW5lPW51bGwsdGhpcy5wb3M9MCx0aGlzLnRva2Vucz10LnNwbGl0KC9ccyooPz1cYnxcV3wkKS8pLCIiPT10aGlzLnRva2Vuc1t0aGlzLnRva2Vucy5sZW5ndGgtMV0mJnRoaXMudG9rZW5zLnBvcCgpLCIiPT10aGlzLnRva2Vuc1swXSYmdGhpcy50b2tlbnMudW5zaGlmdCgpfSxzaT17bmV4dDp7Y29uZmlndXJhYmxlOiEwfX07ZnVuY3Rpb24gYWkodCl7dmFyIGU9W107ZG97ZS5wdXNoKGNpKHQpKX13aGlsZSh0LmVhdCgifCIpKTtyZXR1cm4gMT09ZS5sZW5ndGg/ZVswXTp7dHlwZToiY2hvaWNlIixleHByczplfX1mdW5jdGlvbiBjaSh0KXt2YXIgZT1bXTtkb3tlLnB1c2godWkodCkpfXdoaWxlKHQubmV4dCYmIikiIT10Lm5leHQmJiJ8IiE9dC5uZXh0KTtyZXR1cm4gMT09ZS5sZW5ndGg/ZVswXTp7dHlwZToic2VxIixleHByczplfX1mdW5jdGlvbiB1aSh0KXtmb3IodmFyIGU9cGkodCk7OylpZih0LmVhdCgiKyIpKWU9e3R5cGU6InBsdXMiLGV4cHI6ZX07ZWxzZSBpZih0LmVhdCgiKiIpKWU9e3R5cGU6InN0YXIiLGV4cHI6ZX07ZWxzZSBpZih0LmVhdCgiPyIpKWU9e3R5cGU6Im9wdCIsZXhwcjplfTtlbHNle2lmKCF0LmVhdCgieyIpKWJyZWFrO2U9aGkodCxlKX1yZXR1cm4gZX1mdW5jdGlvbiBsaSh0KXsvXEQvLnRlc3QodC5uZXh0KSYmdC5lcnIoIkV4cGVjdGVkIG51bWJlciwgZ290ICciK3QubmV4dCsiJyIpO3ZhciBlPU51bWJlcih0Lm5leHQpO3JldHVybiB0LnBvcysrLGV9ZnVuY3Rpb24gaGkodCxlKXt2YXIgbj1saSh0KSxyPW47cmV0dXJuIHQuZWF0KCIsIikmJihyPSJ9IiE9dC5uZXh0P2xpKHQpOi0xKSx0LmVhdCgifSIpfHx0LmVycigiVW5jbG9zZWQgYnJhY2VkIHJhbmdlIikse3R5cGU6InJhbmdlIixtaW46bixtYXg6cixleHByOmV9fWZ1bmN0aW9uIGZpKHQsZSl7dmFyIG49dC5ub2RlVHlwZXMscj1uW2VdO2lmKHIpcmV0dXJuW3JdO3ZhciBvPVtdO2Zvcih2YXIgaSBpbiBuKXt2YXIgcz1uW2ldO3MuZ3JvdXBzLmluZGV4T2YoZSk+LTEmJm8ucHVzaChzKX1yZXR1cm4gMD09by5sZW5ndGgmJnQuZXJyKCJObyBub2RlIHR5cGUgb3IgZ3JvdXAgJyIrZSsiJyBmb3VuZCIpLG99ZnVuY3Rpb24gcGkodCl7aWYodC5lYXQoIigiKSl7dmFyIGU9YWkodCk7cmV0dXJuIHQuZWF0KCIpIil8fHQuZXJyKCJNaXNzaW5nIGNsb3NpbmcgcGFyZW4iKSxlfWlmKCEvXFcvLnRlc3QodC5uZXh0KSl7dmFyIG49ZmkodCx0Lm5leHQpLm1hcCgoZnVuY3Rpb24oZSl7cmV0dXJuIG51bGw9PXQuaW5saW5lP3QuaW5saW5lPWUuaXNJbmxpbmU6dC5pbmxpbmUhPWUuaXNJbmxpbmUmJnQuZXJyKCJNaXhpbmcgaW5saW5lIGFuZCBibG9jayBjb250ZW50Iikse3R5cGU6Im5hbWUiLHZhbHVlOmV9fSkpO3JldHVybiB0LnBvcysrLDE9PW4ubGVuZ3RoP25bMF06e3R5cGU6ImNob2ljZSIsZXhwcnM6bn19dC5lcnIoIlVuZXhwZWN0ZWQgdG9rZW4gJyIrdC5uZXh0KyInIil9ZnVuY3Rpb24gZGkodCl7dmFyIGU9W1tdXTtyZXR1cm4gbyhpKHQsMCksbigpKSxlO2Z1bmN0aW9uIG4oKXtyZXR1cm4gZS5wdXNoKFtdKS0xfWZ1bmN0aW9uIHIodCxuLHIpe3ZhciBvPXt0ZXJtOnIsdG86bn07cmV0dXJuIGVbdF0ucHVzaChvKSxvfWZ1bmN0aW9uIG8odCxlKXt0LmZvckVhY2goKGZ1bmN0aW9uKHQpe3JldHVybiB0LnRvPWV9KSl9ZnVuY3Rpb24gaSh0LGUpe2lmKCJjaG9pY2UiPT10LnR5cGUpcmV0dXJuIHQuZXhwcnMucmVkdWNlKChmdW5jdGlvbih0LG4pe3JldHVybiB0LmNvbmNhdChpKG4sZSkpfSksW10pO2lmKCJzZXEiPT10LnR5cGUpZm9yKHZhciBzPTA7O3MrKyl7dmFyIGE9aSh0LmV4cHJzW3NdLGUpO2lmKHM9PXQuZXhwcnMubGVuZ3RoLTEpcmV0dXJuIGE7byhhLGU9bigpKX1lbHNle2lmKCJzdGFyIj09dC50eXBlKXt2YXIgYz1uKCk7cmV0dXJuIHIoZSxjKSxvKGkodC5leHByLGMpLGMpLFtyKGMpXX1pZigicGx1cyI9PXQudHlwZSl7dmFyIHU9bigpO3JldHVybiBvKGkodC5leHByLGUpLHUpLG8oaSh0LmV4cHIsdSksdSksW3IodSldfWlmKCJvcHQiPT10LnR5cGUpcmV0dXJuW3IoZSldLmNvbmNhdChpKHQuZXhwcixlKSk7aWYoInJhbmdlIj09dC50eXBlKXtmb3IodmFyIGw9ZSxoPTA7aDx0Lm1pbjtoKyspe3ZhciBmPW4oKTtvKGkodC5leHByLGwpLGYpLGw9Zn1pZigtMT09dC5tYXgpbyhpKHQuZXhwcixsKSxsKTtlbHNlIGZvcih2YXIgcD10Lm1pbjtwPHQubWF4O3ArKyl7dmFyIGQ9bigpO3IobCxkKSxvKGkodC5leHByLGwpLGQpLGw9ZH1yZXR1cm5bcihsKV19aWYoIm5hbWUiPT10LnR5cGUpcmV0dXJuW3IoZSxudWxsLHQudmFsdWUpXX19fWZ1bmN0aW9uIHZpKHQsZSl7cmV0dXJuIGUtdH1mdW5jdGlvbiBtaSh0LGUpe3ZhciBuPVtdO3JldHVybiByKGUpLG4uc29ydCh2aSk7ZnVuY3Rpb24gcihlKXt2YXIgbz10W2VdO2lmKDE9PW8ubGVuZ3RoJiYhb1swXS50ZXJtKXJldHVybiByKG9bMF0udG8pO24ucHVzaChlKTtmb3IodmFyIGk9MDtpPG8ubGVuZ3RoO2krKyl7dmFyIHM9b1tpXSxhPXMudGVybSxjPXMudG87YXx8LTEhPW4uaW5kZXhPZihjKXx8cihjKX19fWZ1bmN0aW9uIGdpKHQpe3ZhciBlPU9iamVjdC5jcmVhdGUobnVsbCk7cmV0dXJuIG4obWkodCwwKSk7ZnVuY3Rpb24gbihyKXt2YXIgbz1bXTtyLmZvckVhY2goKGZ1bmN0aW9uKGUpe3RbZV0uZm9yRWFjaCgoZnVuY3Rpb24oZSl7dmFyIG49ZS50ZXJtLHI9ZS50bztpZihuKXt2YXIgaT1vLmluZGV4T2Yobikscz1pPi0xJiZvW2krMV07bWkodCxyKS5mb3JFYWNoKChmdW5jdGlvbih0KXtzfHxvLnB1c2gobixzPVtdKSwtMT09cy5pbmRleE9mKHQpJiZzLnB1c2godCl9KSl9fSkpfSkpO2Zvcih2YXIgaT1lW3Iuam9pbigiLCIpXT1uZXcgcmkoci5pbmRleE9mKHQubGVuZ3RoLTEpPi0xKSxzPTA7czxvLmxlbmd0aDtzKz0yKXt2YXIgYT1vW3MrMV0uc29ydCh2aSk7aS5uZXh0LnB1c2gob1tzXSxlW2Euam9pbigiLCIpXXx8bihhKSl9cmV0dXJuIGl9fWZ1bmN0aW9uIHlpKHQsZSl7Zm9yKHZhciBuPTAscj1bdF07bjxyLmxlbmd0aDtuKyspe2Zvcih2YXIgbz1yW25dLGk9IW8udmFsaWRFbmQscz1bXSxhPTA7YTxvLm5leHQubGVuZ3RoO2ErPTIpe3ZhciBjPW8ubmV4dFthXSx1PW8ubmV4dFthKzFdO3MucHVzaChjLm5hbWUpLCFpfHxjLmlzVGV4dHx8Yy5oYXNSZXF1aXJlZEF0dHJzKCl8fChpPSExKSwtMT09ci5pbmRleE9mKHUpJiZyLnB1c2godSl9aSYmZS5lcnIoIk9ubHkgbm9uLWdlbmVyYXRhYmxlIG5vZGVzICgiK3Muam9pbigiLCAiKSsiKSBpbiBhIHJlcXVpcmVkIHBvc2l0aW9uIil9fWZ1bmN0aW9uIHdpKHQpe3ZhciBlPU9iamVjdC5jcmVhdGUobnVsbCk7Zm9yKHZhciBuIGluIHQpe3ZhciByPXRbbl07aWYoIXIuaGFzRGVmYXVsdClyZXR1cm4gbnVsbDtlW25dPXIuZGVmYXVsdH1yZXR1cm4gZX1mdW5jdGlvbiBiaSh0LGUpe3ZhciBuPU9iamVjdC5jcmVhdGUobnVsbCk7Zm9yKHZhciByIGluIHQpe3ZhciBvPWUmJmVbcl07aWYodm9pZCAwPT09byl7dmFyIGk9dFtyXTtpZighaS5oYXNEZWZhdWx0KXRocm93IG5ldyBSYW5nZUVycm9yKCJObyB2YWx1ZSBzdXBwbGllZCBmb3IgYXR0cmlidXRlICIrcik7bz1pLmRlZmF1bHR9bltyXT1vfXJldHVybiBufWZ1bmN0aW9uIHhpKHQpe3ZhciBlPU9iamVjdC5jcmVhdGUobnVsbCk7aWYodClmb3IodmFyIG4gaW4gdCllW25dPW5ldyBDaSh0W25dKTtyZXR1cm4gZX1zaS5uZXh0LmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLnRva2Vuc1t0aGlzLnBvc119LGlpLnByb3RvdHlwZS5lYXQ9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMubmV4dD09dCYmKHRoaXMucG9zKyt8fCEwKX0saWkucHJvdG90eXBlLmVycj1mdW5jdGlvbih0KXt0aHJvdyBuZXcgU3ludGF4RXJyb3IodCsiIChpbiBjb250ZW50IGV4cHJlc3Npb24gJyIrdGhpcy5zdHJpbmcrIicpIil9LE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKGlpLnByb3RvdHlwZSxzaSk7dmFyIGtpPWZ1bmN0aW9uKHQsZSxuKXt0aGlzLm5hbWU9dCx0aGlzLnNjaGVtYT1lLHRoaXMuc3BlYz1uLHRoaXMuZ3JvdXBzPW4uZ3JvdXA/bi5ncm91cC5zcGxpdCgiICIpOltdLHRoaXMuYXR0cnM9eGkobi5hdHRycyksdGhpcy5kZWZhdWx0QXR0cnM9d2kodGhpcy5hdHRycyksdGhpcy5jb250ZW50TWF0Y2g9bnVsbCx0aGlzLm1hcmtTZXQ9bnVsbCx0aGlzLmlubGluZUNvbnRlbnQ9bnVsbCx0aGlzLmlzQmxvY2s9IShuLmlubGluZXx8InRleHQiPT10KSx0aGlzLmlzVGV4dD0idGV4dCI9PXR9LFNpPXtpc0lubGluZTp7Y29uZmlndXJhYmxlOiEwfSxpc1RleHRibG9jazp7Y29uZmlndXJhYmxlOiEwfSxpc0xlYWY6e2NvbmZpZ3VyYWJsZTohMH0saXNBdG9tOntjb25maWd1cmFibGU6ITB9fTtTaS5pc0lubGluZS5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4hdGhpcy5pc0Jsb2NrfSxTaS5pc1RleHRibG9jay5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5pc0Jsb2NrJiZ0aGlzLmlubGluZUNvbnRlbnR9LFNpLmlzTGVhZi5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jb250ZW50TWF0Y2g9PXJpLmVtcHR5fSxTaS5pc0F0b20uZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuaXNMZWFmfHx0aGlzLnNwZWMuYXRvbX0sa2kucHJvdG90eXBlLmhhc1JlcXVpcmVkQXR0cnM9ZnVuY3Rpb24oKXtmb3IodmFyIHQgaW4gdGhpcy5hdHRycylpZih0aGlzLmF0dHJzW3RdLmlzUmVxdWlyZWQpcmV0dXJuITA7cmV0dXJuITF9LGtpLnByb3RvdHlwZS5jb21wYXRpYmxlQ29udGVudD1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcz09dHx8dGhpcy5jb250ZW50TWF0Y2guY29tcGF0aWJsZSh0LmNvbnRlbnRNYXRjaCl9LGtpLnByb3RvdHlwZS5jb21wdXRlQXR0cnM9ZnVuY3Rpb24odCl7cmV0dXJuIXQmJnRoaXMuZGVmYXVsdEF0dHJzP3RoaXMuZGVmYXVsdEF0dHJzOmJpKHRoaXMuYXR0cnMsdCl9LGtpLnByb3RvdHlwZS5jcmVhdGU9ZnVuY3Rpb24odCxlLG4pe2lmKHRoaXMuaXNUZXh0KXRocm93IG5ldyBFcnJvcigiTm9kZVR5cGUuY3JlYXRlIGNhbid0IGNvbnN0cnVjdCB0ZXh0IG5vZGVzIik7cmV0dXJuIG5ldyBRbyh0aGlzLHRoaXMuY29tcHV0ZUF0dHJzKHQpLENvLmZyb20oZSksQW8uc2V0RnJvbShuKSl9LGtpLnByb3RvdHlwZS5jcmVhdGVDaGVja2VkPWZ1bmN0aW9uKHQsZSxuKXtpZihlPUNvLmZyb20oZSksIXRoaXMudmFsaWRDb250ZW50KGUpKXRocm93IG5ldyBSYW5nZUVycm9yKCJJbnZhbGlkIGNvbnRlbnQgZm9yIG5vZGUgIit0aGlzLm5hbWUpO3JldHVybiBuZXcgUW8odGhpcyx0aGlzLmNvbXB1dGVBdHRycyh0KSxlLEFvLnNldEZyb20obikpfSxraS5wcm90b3R5cGUuY3JlYXRlQW5kRmlsbD1mdW5jdGlvbih0LGUsbil7aWYodD10aGlzLmNvbXB1dGVBdHRycyh0KSxlPUNvLmZyb20oZSksZS5zaXplKXt2YXIgcj10aGlzLmNvbnRlbnRNYXRjaC5maWxsQmVmb3JlKGUpO2lmKCFyKXJldHVybiBudWxsO2U9ci5hcHBlbmQoZSl9dmFyIG89dGhpcy5jb250ZW50TWF0Y2gubWF0Y2hGcmFnbWVudChlKS5maWxsQmVmb3JlKENvLmVtcHR5LCEwKTtyZXR1cm4gbz9uZXcgUW8odGhpcyx0LGUuYXBwZW5kKG8pLEFvLnNldEZyb20obikpOm51bGx9LGtpLnByb3RvdHlwZS52YWxpZENvbnRlbnQ9ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5jb250ZW50TWF0Y2gubWF0Y2hGcmFnbWVudCh0KTtpZighZXx8IWUudmFsaWRFbmQpcmV0dXJuITE7Zm9yKHZhciBuPTA7bjx0LmNoaWxkQ291bnQ7bisrKWlmKCF0aGlzLmFsbG93c01hcmtzKHQuY2hpbGQobikubWFya3MpKXJldHVybiExO3JldHVybiEwfSxraS5wcm90b3R5cGUuYWxsb3dzTWFya1R5cGU9ZnVuY3Rpb24odCl7cmV0dXJuIG51bGw9PXRoaXMubWFya1NldHx8dGhpcy5tYXJrU2V0LmluZGV4T2YodCk+LTF9LGtpLnByb3RvdHlwZS5hbGxvd3NNYXJrcz1mdW5jdGlvbih0KXtpZihudWxsPT10aGlzLm1hcmtTZXQpcmV0dXJuITA7Zm9yKHZhciBlPTA7ZTx0Lmxlbmd0aDtlKyspaWYoIXRoaXMuYWxsb3dzTWFya1R5cGUodFtlXS50eXBlKSlyZXR1cm4hMTtyZXR1cm4hMH0sa2kucHJvdG90eXBlLmFsbG93ZWRNYXJrcz1mdW5jdGlvbih0KXtpZihudWxsPT10aGlzLm1hcmtTZXQpcmV0dXJuIHQ7Zm9yKHZhciBlLG49MDtuPHQubGVuZ3RoO24rKyl0aGlzLmFsbG93c01hcmtUeXBlKHRbbl0udHlwZSk/ZSYmZS5wdXNoKHRbbl0pOmV8fChlPXQuc2xpY2UoMCxuKSk7cmV0dXJuIGU/ZS5sZW5ndGg/ZTpBby5lbXB0eTp0fSxraS5jb21waWxlPWZ1bmN0aW9uKHQsZSl7dmFyIG49T2JqZWN0LmNyZWF0ZShudWxsKTt0LmZvckVhY2goKGZ1bmN0aW9uKHQscil7cmV0dXJuIG5bdF09bmV3IGtpKHQsZSxyKX0pKTt2YXIgcj1lLnNwZWMudG9wTm9kZXx8ImRvYyI7aWYoIW5bcl0pdGhyb3cgbmV3IFJhbmdlRXJyb3IoIlNjaGVtYSBpcyBtaXNzaW5nIGl0cyB0b3Agbm9kZSB0eXBlICgnIityKyInKSIpO2lmKCFuLnRleHQpdGhyb3cgbmV3IFJhbmdlRXJyb3IoIkV2ZXJ5IHNjaGVtYSBuZWVkcyBhICd0ZXh0JyB0eXBlIik7Zm9yKHZhciBvIGluIG4udGV4dC5hdHRycyl0aHJvdyBuZXcgUmFuZ2VFcnJvcigiVGhlIHRleHQgbm9kZSB0eXBlIHNob3VsZCBub3QgaGF2ZSBhdHRyaWJ1dGVzIik7cmV0dXJuIG59LE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKGtpLnByb3RvdHlwZSxTaSk7dmFyIENpPWZ1bmN0aW9uKHQpe3RoaXMuaGFzRGVmYXVsdD1PYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwodCwiZGVmYXVsdCIpLHRoaXMuZGVmYXVsdD10LmRlZmF1bHR9LE9pPXtpc1JlcXVpcmVkOntjb25maWd1cmFibGU6ITB9fTtPaS5pc1JlcXVpcmVkLmdldD1mdW5jdGlvbigpe3JldHVybiF0aGlzLmhhc0RlZmF1bHR9LE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKENpLnByb3RvdHlwZSxPaSk7dmFyIE1pPWZ1bmN0aW9uKHQsZSxuLHIpe3RoaXMubmFtZT10LHRoaXMuc2NoZW1hPW4sdGhpcy5zcGVjPXIsdGhpcy5hdHRycz14aShyLmF0dHJzKSx0aGlzLnJhbms9ZSx0aGlzLmV4Y2x1ZGVkPW51bGw7dmFyIG89d2kodGhpcy5hdHRycyk7dGhpcy5pbnN0YW5jZT1vJiZuZXcgQW8odGhpcyxvKX07TWkucHJvdG90eXBlLmNyZWF0ZT1mdW5jdGlvbih0KXtyZXR1cm4hdCYmdGhpcy5pbnN0YW5jZT90aGlzLmluc3RhbmNlOm5ldyBBbyh0aGlzLGJpKHRoaXMuYXR0cnMsdCkpfSxNaS5jb21waWxlPWZ1bmN0aW9uKHQsZSl7dmFyIG49T2JqZWN0LmNyZWF0ZShudWxsKSxyPTA7cmV0dXJuIHQuZm9yRWFjaCgoZnVuY3Rpb24odCxvKXtyZXR1cm4gblt0XT1uZXcgTWkodCxyKyssZSxvKX0pKSxufSxNaS5wcm90b3R5cGUucmVtb3ZlRnJvbVNldD1mdW5jdGlvbih0KXtmb3IodmFyIGU9MDtlPHQubGVuZ3RoO2UrKylpZih0W2VdLnR5cGU9PXRoaXMpcmV0dXJuIHQuc2xpY2UoMCxlKS5jb25jYXQodC5zbGljZShlKzEpKTtyZXR1cm4gdH0sTWkucHJvdG90eXBlLmlzSW5TZXQ9ZnVuY3Rpb24odCl7Zm9yKHZhciBlPTA7ZTx0Lmxlbmd0aDtlKyspaWYodFtlXS50eXBlPT10aGlzKXJldHVybiB0W2VdfSxNaS5wcm90b3R5cGUuZXhjbHVkZXM9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuZXhjbHVkZWQuaW5kZXhPZih0KT4tMX07dmFyIE5pPWZ1bmN0aW9uKHQpe2Zvcih2YXIgZSBpbiB0aGlzLnNwZWM9e30sdCl0aGlzLnNwZWNbZV09dFtlXTt0aGlzLnNwZWMubm9kZXM9dVsiYSJdLmZyb20odC5ub2RlcyksdGhpcy5zcGVjLm1hcmtzPXVbImEiXS5mcm9tKHQubWFya3MpLHRoaXMubm9kZXM9a2kuY29tcGlsZSh0aGlzLnNwZWMubm9kZXMsdGhpcyksdGhpcy5tYXJrcz1NaS5jb21waWxlKHRoaXMuc3BlYy5tYXJrcyx0aGlzKTt2YXIgbj1PYmplY3QuY3JlYXRlKG51bGwpO2Zvcih2YXIgciBpbiB0aGlzLm5vZGVzKXtpZihyIGluIHRoaXMubWFya3MpdGhyb3cgbmV3IFJhbmdlRXJyb3IocisiIGNhbiBub3QgYmUgYm90aCBhIG5vZGUgYW5kIGEgbWFyayIpO3ZhciBvPXRoaXMubm9kZXNbcl0saT1vLnNwZWMuY29udGVudHx8IiIscz1vLnNwZWMubWFya3M7by5jb250ZW50TWF0Y2g9bltpXXx8KG5baV09cmkucGFyc2UoaSx0aGlzLm5vZGVzKSksby5pbmxpbmVDb250ZW50PW8uY29udGVudE1hdGNoLmlubGluZUNvbnRlbnQsby5tYXJrU2V0PSJfIj09cz9udWxsOnM/VGkodGhpcyxzLnNwbGl0KCIgIikpOiIiIT1zJiZvLmlubGluZUNvbnRlbnQ/bnVsbDpbXX1mb3IodmFyIGEgaW4gdGhpcy5tYXJrcyl7dmFyIGM9dGhpcy5tYXJrc1thXSxsPWMuc3BlYy5leGNsdWRlcztjLmV4Y2x1ZGVkPW51bGw9PWw/W2NdOiIiPT1sP1tdOlRpKHRoaXMsbC5zcGxpdCgiICIpKX10aGlzLm5vZGVGcm9tSlNPTj10aGlzLm5vZGVGcm9tSlNPTi5iaW5kKHRoaXMpLHRoaXMubWFya0Zyb21KU09OPXRoaXMubWFya0Zyb21KU09OLmJpbmQodGhpcyksdGhpcy50b3BOb2RlVHlwZT10aGlzLm5vZGVzW3RoaXMuc3BlYy50b3BOb2RlfHwiZG9jIl0sdGhpcy5jYWNoZWQ9T2JqZWN0LmNyZWF0ZShudWxsKSx0aGlzLmNhY2hlZC53cmFwcGluZ3M9T2JqZWN0LmNyZWF0ZShudWxsKX07ZnVuY3Rpb24gVGkodCxlKXtmb3IodmFyIG49W10scj0wO3I8ZS5sZW5ndGg7cisrKXt2YXIgbz1lW3JdLGk9dC5tYXJrc1tvXSxzPWk7aWYoaSluLnB1c2goaSk7ZWxzZSBmb3IodmFyIGEgaW4gdC5tYXJrcyl7dmFyIGM9dC5tYXJrc1thXTsoIl8iPT1vfHxjLnNwZWMuZ3JvdXAmJmMuc3BlYy5ncm91cC5zcGxpdCgiICIpLmluZGV4T2Yobyk+LTEpJiZuLnB1c2gocz1jKX1pZighcyl0aHJvdyBuZXcgU3ludGF4RXJyb3IoIlVua25vd24gbWFyayB0eXBlOiAnIitlW3JdKyInIil9cmV0dXJuIG59TmkucHJvdG90eXBlLm5vZGU9ZnVuY3Rpb24odCxlLG4scil7aWYoInN0cmluZyI9PXR5cGVvZiB0KXQ9dGhpcy5ub2RlVHlwZSh0KTtlbHNle2lmKCEodCBpbnN0YW5jZW9mIGtpKSl0aHJvdyBuZXcgUmFuZ2VFcnJvcigiSW52YWxpZCBub2RlIHR5cGU6ICIrdCk7aWYodC5zY2hlbWEhPXRoaXMpdGhyb3cgbmV3IFJhbmdlRXJyb3IoIk5vZGUgdHlwZSBmcm9tIGRpZmZlcmVudCBzY2hlbWEgdXNlZCAoIit0Lm5hbWUrIikiKX1yZXR1cm4gdC5jcmVhdGVDaGVja2VkKGUsbixyKX0sTmkucHJvdG90eXBlLnRleHQ9ZnVuY3Rpb24odCxlKXt2YXIgbj10aGlzLm5vZGVzLnRleHQ7cmV0dXJuIG5ldyBlaShuLG4uZGVmYXVsdEF0dHJzLHQsQW8uc2V0RnJvbShlKSl9LE5pLnByb3RvdHlwZS5tYXJrPWZ1bmN0aW9uKHQsZSl7cmV0dXJuInN0cmluZyI9PXR5cGVvZiB0JiYodD10aGlzLm1hcmtzW3RdKSx0LmNyZWF0ZShlKX0sTmkucHJvdG90eXBlLm5vZGVGcm9tSlNPTj1mdW5jdGlvbih0KXtyZXR1cm4gUW8uZnJvbUpTT04odGhpcyx0KX0sTmkucHJvdG90eXBlLm1hcmtGcm9tSlNPTj1mdW5jdGlvbih0KXtyZXR1cm4gQW8uZnJvbUpTT04odGhpcyx0KX0sTmkucHJvdG90eXBlLm5vZGVUeXBlPWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMubm9kZXNbdF07aWYoIWUpdGhyb3cgbmV3IFJhbmdlRXJyb3IoIlVua25vd24gbm9kZSB0eXBlOiAiK3QpO3JldHVybiBlfTt2YXIgQWk9ZnVuY3Rpb24odCxlKXt2YXIgbj10aGlzO3RoaXMuc2NoZW1hPXQsdGhpcy5ydWxlcz1lLHRoaXMudGFncz1bXSx0aGlzLnN0eWxlcz1bXSxlLmZvckVhY2goKGZ1bmN0aW9uKHQpe3QudGFnP24udGFncy5wdXNoKHQpOnQuc3R5bGUmJm4uc3R5bGVzLnB1c2godCl9KSl9O0FpLnByb3RvdHlwZS5wYXJzZT1mdW5jdGlvbih0LGUpe3ZvaWQgMD09PWUmJihlPXt9KTt2YXIgbj1uZXcgRmkodGhpcyxlLCExKTtyZXR1cm4gbi5hZGRBbGwodCxudWxsLGUuZnJvbSxlLnRvKSxuLmZpbmlzaCgpfSxBaS5wcm90b3R5cGUucGFyc2VTbGljZT1mdW5jdGlvbih0LGUpe3ZvaWQgMD09PWUmJihlPXt9KTt2YXIgbj1uZXcgRmkodGhpcyxlLCEwKTtyZXR1cm4gbi5hZGRBbGwodCxudWxsLGUuZnJvbSxlLnRvKSxEby5tYXhPcGVuKG4uZmluaXNoKCkpfSxBaS5wcm90b3R5cGUubWF0Y2hUYWc9ZnVuY3Rpb24odCxlKXtmb3IodmFyIG49MDtuPHRoaXMudGFncy5sZW5ndGg7bisrKXt2YXIgcj10aGlzLnRhZ3Nbbl07aWYoVmkodCxyLnRhZykmJih2b2lkIDA9PT1yLm5hbWVzcGFjZXx8dC5uYW1lc3BhY2VVUkk9PXIubmFtZXNwYWNlKSYmKCFyLmNvbnRleHR8fGUubWF0Y2hlc0NvbnRleHQoci5jb250ZXh0KSkpe2lmKHIuZ2V0QXR0cnMpe3ZhciBvPXIuZ2V0QXR0cnModCk7aWYoITE9PT1vKWNvbnRpbnVlO3IuYXR0cnM9b31yZXR1cm4gcn19fSxBaS5wcm90b3R5cGUubWF0Y2hTdHlsZT1mdW5jdGlvbih0LGUsbil7Zm9yKHZhciByPTA7cjx0aGlzLnN0eWxlcy5sZW5ndGg7cisrKXt2YXIgbz10aGlzLnN0eWxlc1tyXTtpZighKDAhPW8uc3R5bGUuaW5kZXhPZih0KXx8by5jb250ZXh0JiYhbi5tYXRjaGVzQ29udGV4dChvLmNvbnRleHQpfHxvLnN0eWxlLmxlbmd0aD50Lmxlbmd0aCYmKDYxIT1vLnN0eWxlLmNoYXJDb2RlQXQodC5sZW5ndGgpfHxvLnN0eWxlLnNsaWNlKHQubGVuZ3RoKzEpIT1lKSkpe2lmKG8uZ2V0QXR0cnMpe3ZhciBpPW8uZ2V0QXR0cnMoZSk7aWYoITE9PT1pKWNvbnRpbnVlO28uYXR0cnM9aX1yZXR1cm4gb319fSxBaS5zY2hlbWFSdWxlcz1mdW5jdGlvbih0KXt2YXIgZT1bXTtmdW5jdGlvbiBuKHQpe2Zvcih2YXIgbj1udWxsPT10LnByaW9yaXR5PzUwOnQucHJpb3JpdHkscj0wO3I8ZS5sZW5ndGg7cisrKXt2YXIgbz1lW3JdLGk9bnVsbD09by5wcmlvcml0eT81MDpvLnByaW9yaXR5O2lmKGk8bilicmVha31lLnNwbGljZShyLDAsdCl9dmFyIHI9ZnVuY3Rpb24oZSl7dmFyIHI9dC5tYXJrc1tlXS5zcGVjLnBhcnNlRE9NO3ImJnIuZm9yRWFjaCgoZnVuY3Rpb24odCl7bih0PXFpKHQpKSx0Lm1hcms9ZX0pKX07Zm9yKHZhciBvIGluIHQubWFya3MpcihvKTt2YXIgaT1mdW5jdGlvbihlKXt2YXIgcj10Lm5vZGVzW3NdLnNwZWMucGFyc2VET007ciYmci5mb3JFYWNoKChmdW5jdGlvbih0KXtuKHQ9cWkodCkpLHQubm9kZT1zfSkpfTtmb3IodmFyIHMgaW4gdC5ub2RlcylpKCk7cmV0dXJuIGV9LEFpLmZyb21TY2hlbWE9ZnVuY3Rpb24odCl7cmV0dXJuIHQuY2FjaGVkLmRvbVBhcnNlcnx8KHQuY2FjaGVkLmRvbVBhcnNlcj1uZXcgQWkodCxBaS5zY2hlbWFSdWxlcyh0KSkpfTt2YXIgRWk9e2FkZHJlc3M6ITAsYXJ0aWNsZTohMCxhc2lkZTohMCxibG9ja3F1b3RlOiEwLGNhbnZhczohMCxkZDohMCxkaXY6ITAsZGw6ITAsZmllbGRzZXQ6ITAsZmlnY2FwdGlvbjohMCxmaWd1cmU6ITAsZm9vdGVyOiEwLGZvcm06ITAsaDE6ITAsaDI6ITAsaDM6ITAsaDQ6ITAsaDU6ITAsaDY6ITAsaGVhZGVyOiEwLGhncm91cDohMCxocjohMCxsaTohMCxub3NjcmlwdDohMCxvbDohMCxvdXRwdXQ6ITAscDohMCxwcmU6ITAsc2VjdGlvbjohMCx0YWJsZTohMCx0Zm9vdDohMCx1bDohMH0sRGk9e2hlYWQ6ITAsbm9zY3JpcHQ6ITAsb2JqZWN0OiEwLHNjcmlwdDohMCxzdHlsZTohMCx0aXRsZTohMH0sUmk9e29sOiEwLHVsOiEwfSx6aT0xLFBpPTIsSWk9NDtmdW5jdGlvbiBCaSh0KXtyZXR1cm4odD96aTowKXwoImZ1bGwiPT09dD9QaTowKX12YXIgX2k9ZnVuY3Rpb24odCxlLG4scixvLGkscyl7dGhpcy50eXBlPXQsdGhpcy5hdHRycz1lLHRoaXMuc29saWQ9byx0aGlzLm1hdGNoPWl8fChzJklpP251bGw6dC5jb250ZW50TWF0Y2gpLHRoaXMub3B0aW9ucz1zLHRoaXMuY29udGVudD1bXSx0aGlzLm1hcmtzPW4sdGhpcy5hY3RpdmVNYXJrcz1Bby5ub25lLHRoaXMucGVuZGluZ01hcmtzPXJ9O19pLnByb3RvdHlwZS5maW5kV3JhcHBpbmc9ZnVuY3Rpb24odCl7aWYoIXRoaXMubWF0Y2gpe2lmKCF0aGlzLnR5cGUpcmV0dXJuW107dmFyIGU9dGhpcy50eXBlLmNvbnRlbnRNYXRjaC5maWxsQmVmb3JlKENvLmZyb20odCkpO2lmKCFlKXt2YXIgbixyPXRoaXMudHlwZS5jb250ZW50TWF0Y2g7cmV0dXJuKG49ci5maW5kV3JhcHBpbmcodC50eXBlKSk/KHRoaXMubWF0Y2g9cixuKTpudWxsfXRoaXMubWF0Y2g9dGhpcy50eXBlLmNvbnRlbnRNYXRjaC5tYXRjaEZyYWdtZW50KGUpfXJldHVybiB0aGlzLm1hdGNoLmZpbmRXcmFwcGluZyh0LnR5cGUpfSxfaS5wcm90b3R5cGUuZmluaXNoPWZ1bmN0aW9uKHQpe2lmKCEodGhpcy5vcHRpb25zJnppKSl7dmFyIGUsbj10aGlzLmNvbnRlbnRbdGhpcy5jb250ZW50Lmxlbmd0aC0xXTtuJiZuLmlzVGV4dCYmKGU9L1sgXHRcclxuXHUwMDBjXSskLy5leGVjKG4udGV4dCkpJiYobi50ZXh0Lmxlbmd0aD09ZVswXS5sZW5ndGg/dGhpcy5jb250ZW50LnBvcCgpOnRoaXMuY29udGVudFt0aGlzLmNvbnRlbnQubGVuZ3RoLTFdPW4ud2l0aFRleHQobi50ZXh0LnNsaWNlKDAsbi50ZXh0Lmxlbmd0aC1lWzBdLmxlbmd0aCkpKX12YXIgcj1Dby5mcm9tKHRoaXMuY29udGVudCk7cmV0dXJuIXQmJnRoaXMubWF0Y2gmJihyPXIuYXBwZW5kKHRoaXMubWF0Y2guZmlsbEJlZm9yZShDby5lbXB0eSwhMCkpKSx0aGlzLnR5cGU/dGhpcy50eXBlLmNyZWF0ZSh0aGlzLmF0dHJzLHIsdGhpcy5tYXJrcyk6cn0sX2kucHJvdG90eXBlLmFwcGx5UGVuZGluZz1mdW5jdGlvbih0KXtmb3IodmFyIGU9MCxuPXRoaXMucGVuZGluZ01hcmtzO2U8bi5sZW5ndGg7ZSsrKXt2YXIgcj1uW2VdOyh0aGlzLnR5cGU/dGhpcy50eXBlLmFsbG93c01hcmtUeXBlKHIudHlwZSk6Smkoci50eXBlLHQpKSYmIXIuaXNJblNldCh0aGlzLmFjdGl2ZU1hcmtzKSYmKHRoaXMuYWN0aXZlTWFya3M9ci5hZGRUb1NldCh0aGlzLmFjdGl2ZU1hcmtzKSx0aGlzLnBlbmRpbmdNYXJrcz1yLnJlbW92ZUZyb21TZXQodGhpcy5wZW5kaW5nTWFya3MpKX19O3ZhciBGaT1mdW5jdGlvbih0LGUsbil7dGhpcy5wYXJzZXI9dCx0aGlzLm9wdGlvbnM9ZSx0aGlzLmlzT3Blbj1uO3ZhciByLG89ZS50b3BOb2RlLGk9QmkoZS5wcmVzZXJ2ZVdoaXRlc3BhY2UpfChuP0lpOjApO3I9bz9uZXcgX2koby50eXBlLG8uYXR0cnMsQW8ubm9uZSxBby5ub25lLCEwLGUudG9wTWF0Y2h8fG8udHlwZS5jb250ZW50TWF0Y2gsaSk6bmV3IF9pKG4/bnVsbDp0LnNjaGVtYS50b3BOb2RlVHlwZSxudWxsLEFvLm5vbmUsQW8ubm9uZSwhMCxudWxsLGkpLHRoaXMubm9kZXM9W3JdLHRoaXMub3Blbj0wLHRoaXMuZmluZD1lLmZpbmRQb3NpdGlvbnMsdGhpcy5uZWVkc0Jsb2NrPSExfSxqaT17dG9wOntjb25maWd1cmFibGU6ITB9LGN1cnJlbnRQb3M6e2NvbmZpZ3VyYWJsZTohMH19O2Z1bmN0aW9uICRpKHQpe2Zvcih2YXIgZT10LmZpcnN0Q2hpbGQsbj1udWxsO2U7ZT1lLm5leHRTaWJsaW5nKXt2YXIgcj0xPT1lLm5vZGVUeXBlP2Uubm9kZU5hbWUudG9Mb3dlckNhc2UoKTpudWxsO3ImJlJpLmhhc093blByb3BlcnR5KHIpJiZuPyhuLmFwcGVuZENoaWxkKGUpLGU9bik6ImxpIj09cj9uPWU6ciYmKG49bnVsbCl9fWZ1bmN0aW9uIFZpKHQsZSl7cmV0dXJuKHQubWF0Y2hlc3x8dC5tc01hdGNoZXNTZWxlY3Rvcnx8dC53ZWJraXRNYXRjaGVzU2VsZWN0b3J8fHQubW96TWF0Y2hlc1NlbGVjdG9yKS5jYWxsKHQsZSl9ZnVuY3Rpb24gTGkodCl7dmFyIGUsbj0vXHMqKFtcdy1dKylccyo6XHMqKFteO10rKS9nLHI9W107d2hpbGUoZT1uLmV4ZWModCkpci5wdXNoKGVbMV0sZVsyXS50cmltKCkpO3JldHVybiByfWZ1bmN0aW9uIHFpKHQpe3ZhciBlPXt9O2Zvcih2YXIgbiBpbiB0KWVbbl09dFtuXTtyZXR1cm4gZX1mdW5jdGlvbiBKaSh0LGUpe3ZhciBuPWUuc2NoZW1hLm5vZGVzLHI9ZnVuY3Rpb24ocil7dmFyIG89bltyXTtpZihvLmFsbG93c01hcmtUeXBlKHQpKXt2YXIgaT1bXSxzPWZ1bmN0aW9uKHQpe2kucHVzaCh0KTtmb3IodmFyIG49MDtuPHQuZWRnZUNvdW50O24rKyl7dmFyIHI9dC5lZGdlKG4pLG89ci50eXBlLGE9ci5uZXh0O2lmKG89PWUpcmV0dXJuITA7aWYoaS5pbmRleE9mKGEpPDAmJnMoYSkpcmV0dXJuITB9fTtyZXR1cm4gcyhvLmNvbnRlbnRNYXRjaCk/e3Y6ITB9OnZvaWQgMH19O2Zvcih2YXIgbyBpbiBuKXt2YXIgaT1yKG8pO2lmKGkpcmV0dXJuIGkudn19amkudG9wLmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLm5vZGVzW3RoaXMub3Blbl19LEZpLnByb3RvdHlwZS5hZGRET009ZnVuY3Rpb24odCl7aWYoMz09dC5ub2RlVHlwZSl0aGlzLmFkZFRleHROb2RlKHQpO2Vsc2UgaWYoMT09dC5ub2RlVHlwZSl7dmFyIGU9dC5nZXRBdHRyaWJ1dGUoInN0eWxlIiksbj1lP3RoaXMucmVhZFN0eWxlcyhMaShlKSk6bnVsbCxyPXRoaXMudG9wO2lmKG51bGwhPW4pZm9yKHZhciBvPTA7bzxuLmxlbmd0aDtvKyspdGhpcy5hZGRQZW5kaW5nTWFyayhuW29dKTtpZih0aGlzLmFkZEVsZW1lbnQodCksbnVsbCE9bilmb3IodmFyIGk9MDtpPG4ubGVuZ3RoO2krKyl0aGlzLnJlbW92ZVBlbmRpbmdNYXJrKG5baV0scil9fSxGaS5wcm90b3R5cGUuYWRkVGV4dE5vZGU9ZnVuY3Rpb24odCl7dmFyIGU9dC5ub2RlVmFsdWUsbj10aGlzLnRvcDtpZigobi50eXBlP24udHlwZS5pbmxpbmVDb250ZW50Om4uY29udGVudC5sZW5ndGgmJm4uY29udGVudFswXS5pc0lubGluZSl8fC9bXiBcdFxyXG5cdTAwMGNdLy50ZXN0KGUpKXtpZihuLm9wdGlvbnMmemkpbi5vcHRpb25zJlBpfHwoZT1lLnJlcGxhY2UoL1xyP1xufFxyL2csIiAiKSk7ZWxzZSBpZihlPWUucmVwbGFjZSgvWyBcdFxyXG5cdTAwMGNdKy9nLCIgIiksL15bIFx0XHJcblx1MDAwY10vLnRlc3QoZSkmJnRoaXMub3Blbj09dGhpcy5ub2Rlcy5sZW5ndGgtMSl7dmFyIHI9bi5jb250ZW50W24uY29udGVudC5sZW5ndGgtMV0sbz10LnByZXZpb3VzU2libGluZzsoIXJ8fG8mJiJCUiI9PW8ubm9kZU5hbWV8fHIuaXNUZXh0JiYvWyBcdFxyXG5cdTAwMGNdJC8udGVzdChyLnRleHQpKSYmKGU9ZS5zbGljZSgxKSl9ZSYmdGhpcy5pbnNlcnROb2RlKHRoaXMucGFyc2VyLnNjaGVtYS50ZXh0KGUpKSx0aGlzLmZpbmRJblRleHQodCl9ZWxzZSB0aGlzLmZpbmRJbnNpZGUodCl9LEZpLnByb3RvdHlwZS5hZGRFbGVtZW50PWZ1bmN0aW9uKHQpe3ZhciBlPXQubm9kZU5hbWUudG9Mb3dlckNhc2UoKTtSaS5oYXNPd25Qcm9wZXJ0eShlKSYmJGkodCk7dmFyIG49dGhpcy5vcHRpb25zLnJ1bGVGcm9tTm9kZSYmdGhpcy5vcHRpb25zLnJ1bGVGcm9tTm9kZSh0KXx8dGhpcy5wYXJzZXIubWF0Y2hUYWcodCx0aGlzKTtpZihuP24uaWdub3JlOkRpLmhhc093blByb3BlcnR5KGUpKXRoaXMuZmluZEluc2lkZSh0KTtlbHNlIGlmKCFufHxuLnNraXApe24mJm4uc2tpcC5ub2RlVHlwZSYmKHQ9bi5za2lwKTt2YXIgcixvPXRoaXMudG9wLGk9dGhpcy5uZWVkc0Jsb2NrO2lmKEVpLmhhc093blByb3BlcnR5KGUpKXI9ITAsby50eXBlfHwodGhpcy5uZWVkc0Jsb2NrPSEwKTtlbHNlIGlmKCF0LmZpcnN0Q2hpbGQpcmV0dXJuIHZvaWQgdGhpcy5sZWFmRmFsbGJhY2sodCk7dGhpcy5hZGRBbGwodCksciYmdGhpcy5zeW5jKG8pLHRoaXMubmVlZHNCbG9jaz1pfWVsc2UgdGhpcy5hZGRFbGVtZW50QnlSdWxlKHQsbil9LEZpLnByb3RvdHlwZS5sZWFmRmFsbGJhY2s9ZnVuY3Rpb24odCl7IkJSIj09dC5ub2RlTmFtZSYmdGhpcy50b3AudHlwZSYmdGhpcy50b3AudHlwZS5pbmxpbmVDb250ZW50JiZ0aGlzLmFkZFRleHROb2RlKHQub3duZXJEb2N1bWVudC5jcmVhdGVUZXh0Tm9kZSgiXG4iKSl9LEZpLnByb3RvdHlwZS5yZWFkU3R5bGVzPWZ1bmN0aW9uKHQpe2Zvcih2YXIgZT1Bby5ub25lLG49MDtuPHQubGVuZ3RoO24rPTIpe3ZhciByPXRoaXMucGFyc2VyLm1hdGNoU3R5bGUodFtuXSx0W24rMV0sdGhpcyk7aWYocil7aWYoci5pZ25vcmUpcmV0dXJuIG51bGw7ZT10aGlzLnBhcnNlci5zY2hlbWEubWFya3Nbci5tYXJrXS5jcmVhdGUoci5hdHRycykuYWRkVG9TZXQoZSl9fXJldHVybiBlfSxGaS5wcm90b3R5cGUuYWRkRWxlbWVudEJ5UnVsZT1mdW5jdGlvbih0LGUpe3ZhciBuLHIsbyxpLHM9dGhpcztlLm5vZGU/KHI9dGhpcy5wYXJzZXIuc2NoZW1hLm5vZGVzW2Uubm9kZV0sci5pc0xlYWY/dGhpcy5pbnNlcnROb2RlKHIuY3JlYXRlKGUuYXR0cnMpKXx8dGhpcy5sZWFmRmFsbGJhY2sodCk6bj10aGlzLmVudGVyKHIsZS5hdHRycyxlLnByZXNlcnZlV2hpdGVzcGFjZSkpOihvPXRoaXMucGFyc2VyLnNjaGVtYS5tYXJrc1tlLm1hcmtdLGk9by5jcmVhdGUoZS5hdHRycyksdGhpcy5hZGRQZW5kaW5nTWFyayhpKSk7dmFyIGE9dGhpcy50b3A7aWYociYmci5pc0xlYWYpdGhpcy5maW5kSW5zaWRlKHQpO2Vsc2UgaWYoZS5nZXRDb250ZW50KXRoaXMuZmluZEluc2lkZSh0KSxlLmdldENvbnRlbnQodCx0aGlzLnBhcnNlci5zY2hlbWEpLmZvckVhY2goKGZ1bmN0aW9uKHQpe3JldHVybiBzLmluc2VydE5vZGUodCl9KSk7ZWxzZXt2YXIgYz1lLmNvbnRlbnRFbGVtZW50OyJzdHJpbmciPT10eXBlb2YgYz9jPXQucXVlcnlTZWxlY3RvcihjKToiZnVuY3Rpb24iPT10eXBlb2YgYyYmKGM9Yyh0KSksY3x8KGM9dCksdGhpcy5maW5kQXJvdW5kKHQsYywhMCksdGhpcy5hZGRBbGwoYyxuKX1uJiYodGhpcy5zeW5jKGEpLHRoaXMub3Blbi0tKSxpJiZ0aGlzLnJlbW92ZVBlbmRpbmdNYXJrKGksYSl9LEZpLnByb3RvdHlwZS5hZGRBbGw9ZnVuY3Rpb24odCxlLG4scil7Zm9yKHZhciBvPW58fDAsaT1uP3QuY2hpbGROb2Rlc1tuXTp0LmZpcnN0Q2hpbGQscz1udWxsPT1yP251bGw6dC5jaGlsZE5vZGVzW3JdO2khPXM7aT1pLm5leHRTaWJsaW5nLCsrbyl0aGlzLmZpbmRBdFBvaW50KHQsbyksdGhpcy5hZGRET00oaSksZSYmRWkuaGFzT3duUHJvcGVydHkoaS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpKSYmdGhpcy5zeW5jKGUpO3RoaXMuZmluZEF0UG9pbnQodCxvKX0sRmkucHJvdG90eXBlLmZpbmRQbGFjZT1mdW5jdGlvbih0KXtmb3IodmFyIGUsbixyPXRoaXMub3BlbjtyPj0wO3ItLSl7dmFyIG89dGhpcy5ub2Rlc1tyXSxpPW8uZmluZFdyYXBwaW5nKHQpO2lmKGkmJighZXx8ZS5sZW5ndGg+aS5sZW5ndGgpJiYoZT1pLG49bywhaS5sZW5ndGgpKWJyZWFrO2lmKG8uc29saWQpYnJlYWt9aWYoIWUpcmV0dXJuITE7dGhpcy5zeW5jKG4pO2Zvcih2YXIgcz0wO3M8ZS5sZW5ndGg7cysrKXRoaXMuZW50ZXJJbm5lcihlW3NdLG51bGwsITEpO3JldHVybiEwfSxGaS5wcm90b3R5cGUuaW5zZXJ0Tm9kZT1mdW5jdGlvbih0KXtpZih0LmlzSW5saW5lJiZ0aGlzLm5lZWRzQmxvY2smJiF0aGlzLnRvcC50eXBlKXt2YXIgZT10aGlzLnRleHRibG9ja0Zyb21Db250ZXh0KCk7ZSYmdGhpcy5lbnRlcklubmVyKGUpfWlmKHRoaXMuZmluZFBsYWNlKHQpKXt0aGlzLmNsb3NlRXh0cmEoKTt2YXIgbj10aGlzLnRvcDtuLmFwcGx5UGVuZGluZyh0LnR5cGUpLG4ubWF0Y2gmJihuLm1hdGNoPW4ubWF0Y2gubWF0Y2hUeXBlKHQudHlwZSkpO2Zvcih2YXIgcj1uLmFjdGl2ZU1hcmtzLG89MDtvPHQubWFya3MubGVuZ3RoO28rKyluLnR5cGUmJiFuLnR5cGUuYWxsb3dzTWFya1R5cGUodC5tYXJrc1tvXS50eXBlKXx8KHI9dC5tYXJrc1tvXS5hZGRUb1NldChyKSk7cmV0dXJuIG4uY29udGVudC5wdXNoKHQubWFyayhyKSksITB9cmV0dXJuITF9LEZpLnByb3RvdHlwZS5lbnRlcj1mdW5jdGlvbih0LGUsbil7dmFyIHI9dGhpcy5maW5kUGxhY2UodC5jcmVhdGUoZSkpO3JldHVybiByJiZ0aGlzLmVudGVySW5uZXIodCxlLCEwLG4pLHJ9LEZpLnByb3RvdHlwZS5lbnRlcklubmVyPWZ1bmN0aW9uKHQsZSxuLHIpe3RoaXMuY2xvc2VFeHRyYSgpO3ZhciBvPXRoaXMudG9wO28uYXBwbHlQZW5kaW5nKHQpLG8ubWF0Y2g9by5tYXRjaCYmby5tYXRjaC5tYXRjaFR5cGUodCxlKTt2YXIgaT1udWxsPT1yP28ub3B0aW9ucyZ+SWk6Qmkocik7by5vcHRpb25zJklpJiYwPT1vLmNvbnRlbnQubGVuZ3RoJiYoaXw9SWkpLHRoaXMubm9kZXMucHVzaChuZXcgX2kodCxlLG8uYWN0aXZlTWFya3Msby5wZW5kaW5nTWFya3MsbixudWxsLGkpKSx0aGlzLm9wZW4rK30sRmkucHJvdG90eXBlLmNsb3NlRXh0cmE9ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5ub2Rlcy5sZW5ndGgtMTtpZihlPnRoaXMub3Blbil7Zm9yKDtlPnRoaXMub3BlbjtlLS0pdGhpcy5ub2Rlc1tlLTFdLmNvbnRlbnQucHVzaCh0aGlzLm5vZGVzW2VdLmZpbmlzaCh0KSk7dGhpcy5ub2Rlcy5sZW5ndGg9dGhpcy5vcGVuKzF9fSxGaS5wcm90b3R5cGUuZmluaXNoPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMub3Blbj0wLHRoaXMuY2xvc2VFeHRyYSh0aGlzLmlzT3BlbiksdGhpcy5ub2Rlc1swXS5maW5pc2godGhpcy5pc09wZW58fHRoaXMub3B0aW9ucy50b3BPcGVuKX0sRmkucHJvdG90eXBlLnN5bmM9ZnVuY3Rpb24odCl7Zm9yKHZhciBlPXRoaXMub3BlbjtlPj0wO2UtLSlpZih0aGlzLm5vZGVzW2VdPT10KXJldHVybiB2b2lkKHRoaXMub3Blbj1lKX0samkuY3VycmVudFBvcy5nZXQ9ZnVuY3Rpb24oKXt0aGlzLmNsb3NlRXh0cmEoKTtmb3IodmFyIHQ9MCxlPXRoaXMub3BlbjtlPj0wO2UtLSl7Zm9yKHZhciBuPXRoaXMubm9kZXNbZV0uY29udGVudCxyPW4ubGVuZ3RoLTE7cj49MDtyLS0pdCs9bltyXS5ub2RlU2l6ZTtlJiZ0Kyt9cmV0dXJuIHR9LEZpLnByb3RvdHlwZS5maW5kQXRQb2ludD1mdW5jdGlvbih0LGUpe2lmKHRoaXMuZmluZClmb3IodmFyIG49MDtuPHRoaXMuZmluZC5sZW5ndGg7bisrKXRoaXMuZmluZFtuXS5ub2RlPT10JiZ0aGlzLmZpbmRbbl0ub2Zmc2V0PT1lJiYodGhpcy5maW5kW25dLnBvcz10aGlzLmN1cnJlbnRQb3MpfSxGaS5wcm90b3R5cGUuZmluZEluc2lkZT1mdW5jdGlvbih0KXtpZih0aGlzLmZpbmQpZm9yKHZhciBlPTA7ZTx0aGlzLmZpbmQubGVuZ3RoO2UrKyludWxsPT10aGlzLmZpbmRbZV0ucG9zJiYxPT10Lm5vZGVUeXBlJiZ0LmNvbnRhaW5zKHRoaXMuZmluZFtlXS5ub2RlKSYmKHRoaXMuZmluZFtlXS5wb3M9dGhpcy5jdXJyZW50UG9zKX0sRmkucHJvdG90eXBlLmZpbmRBcm91bmQ9ZnVuY3Rpb24odCxlLG4pe2lmKHQhPWUmJnRoaXMuZmluZClmb3IodmFyIHI9MDtyPHRoaXMuZmluZC5sZW5ndGg7cisrKWlmKG51bGw9PXRoaXMuZmluZFtyXS5wb3MmJjE9PXQubm9kZVR5cGUmJnQuY29udGFpbnModGhpcy5maW5kW3JdLm5vZGUpKXt2YXIgbz1lLmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uKHRoaXMuZmluZFtyXS5ub2RlKTtvJihuPzI6NCkmJih0aGlzLmZpbmRbcl0ucG9zPXRoaXMuY3VycmVudFBvcyl9fSxGaS5wcm90b3R5cGUuZmluZEluVGV4dD1mdW5jdGlvbih0KXtpZih0aGlzLmZpbmQpZm9yKHZhciBlPTA7ZTx0aGlzLmZpbmQubGVuZ3RoO2UrKyl0aGlzLmZpbmRbZV0ubm9kZT09dCYmKHRoaXMuZmluZFtlXS5wb3M9dGhpcy5jdXJyZW50UG9zLSh0Lm5vZGVWYWx1ZS5sZW5ndGgtdGhpcy5maW5kW2VdLm9mZnNldCkpfSxGaS5wcm90b3R5cGUubWF0Y2hlc0NvbnRleHQ9ZnVuY3Rpb24odCl7dmFyIGU9dGhpcztpZih0LmluZGV4T2YoInwiKT4tMSlyZXR1cm4gdC5zcGxpdCgvXHMqXHxccyovKS5zb21lKHRoaXMubWF0Y2hlc0NvbnRleHQsdGhpcyk7dmFyIG49dC5zcGxpdCgiLyIpLHI9dGhpcy5vcHRpb25zLmNvbnRleHQsbz0hdGhpcy5pc09wZW4mJighcnx8ci5wYXJlbnQudHlwZT09dGhpcy5ub2Rlc1swXS50eXBlKSxpPS0ocj9yLmRlcHRoKzE6MCkrKG8/MDoxKSxzPWZ1bmN0aW9uKHQsYSl7Zm9yKDt0Pj0wO3QtLSl7dmFyIGM9blt0XTtpZigiIj09Yyl7aWYodD09bi5sZW5ndGgtMXx8MD09dCljb250aW51ZTtmb3IoO2E+PWk7YS0tKWlmKHModC0xLGEpKXJldHVybiEwO3JldHVybiExfXZhciB1PWE+MHx8MD09YSYmbz9lLm5vZGVzW2FdLnR5cGU6ciYmYT49aT9yLm5vZGUoYS1pKS50eXBlOm51bGw7aWYoIXV8fHUubmFtZSE9YyYmLTE9PXUuZ3JvdXBzLmluZGV4T2YoYykpcmV0dXJuITE7YS0tfXJldHVybiEwfTtyZXR1cm4gcyhuLmxlbmd0aC0xLHRoaXMub3Blbil9LEZpLnByb3RvdHlwZS50ZXh0YmxvY2tGcm9tQ29udGV4dD1mdW5jdGlvbigpe3ZhciB0PXRoaXMub3B0aW9ucy5jb250ZXh0O2lmKHQpZm9yKHZhciBlPXQuZGVwdGg7ZT49MDtlLS0pe3ZhciBuPXQubm9kZShlKS5jb250ZW50TWF0Y2hBdCh0LmluZGV4QWZ0ZXIoZSkpLmRlZmF1bHRUeXBlO2lmKG4mJm4uaXNUZXh0YmxvY2smJm4uZGVmYXVsdEF0dHJzKXJldHVybiBufWZvcih2YXIgciBpbiB0aGlzLnBhcnNlci5zY2hlbWEubm9kZXMpe3ZhciBvPXRoaXMucGFyc2VyLnNjaGVtYS5ub2Rlc1tyXTtpZihvLmlzVGV4dGJsb2NrJiZvLmRlZmF1bHRBdHRycylyZXR1cm4gb319LEZpLnByb3RvdHlwZS5hZGRQZW5kaW5nTWFyaz1mdW5jdGlvbih0KXt0aGlzLnRvcC5wZW5kaW5nTWFya3M9dC5hZGRUb1NldCh0aGlzLnRvcC5wZW5kaW5nTWFya3MpfSxGaS5wcm90b3R5cGUucmVtb3ZlUGVuZGluZ01hcms9ZnVuY3Rpb24odCxlKXtmb3IodmFyIG49dGhpcy5vcGVuO24+PTA7bi0tKXt2YXIgcj10aGlzLm5vZGVzW25dLG89ci5wZW5kaW5nTWFya3MubGFzdEluZGV4T2YodCk7aWYobz4tMT9yLnBlbmRpbmdNYXJrcz10LnJlbW92ZUZyb21TZXQoci5wZW5kaW5nTWFya3MpOnIuYWN0aXZlTWFya3M9dC5yZW1vdmVGcm9tU2V0KHIuYWN0aXZlTWFya3MpLHI9PWUpYnJlYWt9fSxPYmplY3QuZGVmaW5lUHJvcGVydGllcyhGaS5wcm90b3R5cGUsamkpO3ZhciBXaT1mdW5jdGlvbih0LGUpe3RoaXMubm9kZXM9dHx8e30sdGhpcy5tYXJrcz1lfHx7fX07ZnVuY3Rpb24gSGkodCl7dmFyIGU9e307Zm9yKHZhciBuIGluIHQpe3ZhciByPXRbbl0uc3BlYy50b0RPTTtyJiYoZVtuXT1yKX1yZXR1cm4gZX1mdW5jdGlvbiBLaSh0KXtyZXR1cm4gdC5kb2N1bWVudHx8d2luZG93LmRvY3VtZW50fWZ1bmN0aW9uIFVpKHQpe3JldHVybiB2b2lkIDA9PT10JiYodD17fSksbmV3IGNbIlBsdWdpbiJdKHt2aWV3OmZ1bmN0aW9uKGUpe3JldHVybiBuZXcgR2koZSx0KX19KX1XaS5wcm90b3R5cGUuc2VyaWFsaXplRnJhZ21lbnQ9ZnVuY3Rpb24odCxlLG4pe3ZhciByPXRoaXM7dm9pZCAwPT09ZSYmKGU9e30pLG58fChuPUtpKGUpLmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKSk7dmFyIG89bixpPW51bGw7cmV0dXJuIHQuZm9yRWFjaCgoZnVuY3Rpb24odCl7aWYoaXx8dC5tYXJrcy5sZW5ndGgpe2l8fChpPVtdKTt2YXIgbj0wLHM9MDt3aGlsZShuPGkubGVuZ3RoJiZzPHQubWFya3MubGVuZ3RoKXt2YXIgYT10Lm1hcmtzW3NdO2lmKHIubWFya3NbYS50eXBlLm5hbWVdKXtpZighYS5lcShpW25dKXx8ITE9PT1hLnR5cGUuc3BlYy5zcGFubmluZylicmVhaztuKz0yLHMrK31lbHNlIHMrK313aGlsZShuPGkubGVuZ3RoKW89aS5wb3AoKSxpLnBvcCgpO3doaWxlKHM8dC5tYXJrcy5sZW5ndGgpe3ZhciBjPXQubWFya3NbcysrXSx1PXIuc2VyaWFsaXplTWFyayhjLHQuaXNJbmxpbmUsZSk7dSYmKGkucHVzaChjLG8pLG8uYXBwZW5kQ2hpbGQodS5kb20pLG89dS5jb250ZW50RE9NfHx1LmRvbSl9fW8uYXBwZW5kQ2hpbGQoci5zZXJpYWxpemVOb2RlKHQsZSkpfSkpLG59LFdpLnByb3RvdHlwZS5zZXJpYWxpemVOb2RlPWZ1bmN0aW9uKHQsZSl7dm9pZCAwPT09ZSYmKGU9e30pO3ZhciBuPVdpLnJlbmRlclNwZWMoS2koZSksdGhpcy5ub2Rlc1t0LnR5cGUubmFtZV0odCkpLHI9bi5kb20sbz1uLmNvbnRlbnRET007aWYobyl7aWYodC5pc0xlYWYpdGhyb3cgbmV3IFJhbmdlRXJyb3IoIkNvbnRlbnQgaG9sZSBub3QgYWxsb3dlZCBpbiBhIGxlYWYgbm9kZSBzcGVjIik7ZS5vbkNvbnRlbnQ/ZS5vbkNvbnRlbnQodCxvLGUpOnRoaXMuc2VyaWFsaXplRnJhZ21lbnQodC5jb250ZW50LGUsbyl9cmV0dXJuIHJ9LFdpLnByb3RvdHlwZS5zZXJpYWxpemVOb2RlQW5kTWFya3M9ZnVuY3Rpb24odCxlKXt2b2lkIDA9PT1lJiYoZT17fSk7Zm9yKHZhciBuPXRoaXMuc2VyaWFsaXplTm9kZSh0LGUpLHI9dC5tYXJrcy5sZW5ndGgtMTtyPj0wO3ItLSl7dmFyIG89dGhpcy5zZXJpYWxpemVNYXJrKHQubWFya3Nbcl0sdC5pc0lubGluZSxlKTtvJiYoKG8uY29udGVudERPTXx8by5kb20pLmFwcGVuZENoaWxkKG4pLG49by5kb20pfXJldHVybiBufSxXaS5wcm90b3R5cGUuc2VyaWFsaXplTWFyaz1mdW5jdGlvbih0LGUsbil7dm9pZCAwPT09biYmKG49e30pO3ZhciByPXRoaXMubWFya3NbdC50eXBlLm5hbWVdO3JldHVybiByJiZXaS5yZW5kZXJTcGVjKEtpKG4pLHIodCxlKSl9LFdpLnJlbmRlclNwZWM9ZnVuY3Rpb24odCxlLG4pe2lmKHZvaWQgMD09PW4mJihuPW51bGwpLCJzdHJpbmciPT10eXBlb2YgZSlyZXR1cm57ZG9tOnQuY3JlYXRlVGV4dE5vZGUoZSl9O2lmKG51bGwhPWUubm9kZVR5cGUpcmV0dXJue2RvbTplfTt2YXIgcj1lWzBdLG89ci5pbmRleE9mKCIgIik7bz4wJiYobj1yLnNsaWNlKDAsbykscj1yLnNsaWNlKG8rMSkpO3ZhciBpPW51bGwscz1uP3QuY3JlYXRlRWxlbWVudE5TKG4scik6dC5jcmVhdGVFbGVtZW50KHIpLGE9ZVsxXSxjPTE7aWYoYSYmIm9iamVjdCI9PXR5cGVvZiBhJiZudWxsPT1hLm5vZGVUeXBlJiYhQXJyYXkuaXNBcnJheShhKSlmb3IodmFyIHUgaW4gYz0yLGEpaWYobnVsbCE9YVt1XSl7dmFyIGw9dS5pbmRleE9mKCIgIik7bD4wP3Muc2V0QXR0cmlidXRlTlModS5zbGljZSgwLGwpLHUuc2xpY2UobCsxKSxhW3VdKTpzLnNldEF0dHJpYnV0ZSh1LGFbdV0pfWZvcih2YXIgaD1jO2g8ZS5sZW5ndGg7aCsrKXt2YXIgZj1lW2hdO2lmKDA9PT1mKXtpZihoPGUubGVuZ3RoLTF8fGg+Yyl0aHJvdyBuZXcgUmFuZ2VFcnJvcigiQ29udGVudCBob2xlIG11c3QgYmUgdGhlIG9ubHkgY2hpbGQgb2YgaXRzIHBhcmVudCBub2RlIik7cmV0dXJue2RvbTpzLGNvbnRlbnRET006c319dmFyIHA9V2kucmVuZGVyU3BlYyh0LGYsbiksZD1wLmRvbSx2PXAuY29udGVudERPTTtpZihzLmFwcGVuZENoaWxkKGQpLHYpe2lmKGkpdGhyb3cgbmV3IFJhbmdlRXJyb3IoIk11bHRpcGxlIGNvbnRlbnQgaG9sZXMiKTtpPXZ9fXJldHVybntkb206cyxjb250ZW50RE9NOml9fSxXaS5mcm9tU2NoZW1hPWZ1bmN0aW9uKHQpe3JldHVybiB0LmNhY2hlZC5kb21TZXJpYWxpemVyfHwodC5jYWNoZWQuZG9tU2VyaWFsaXplcj1uZXcgV2kodGhpcy5ub2Rlc0Zyb21TY2hlbWEodCksdGhpcy5tYXJrc0Zyb21TY2hlbWEodCkpKX0sV2kubm9kZXNGcm9tU2NoZW1hPWZ1bmN0aW9uKHQpe3ZhciBlPUhpKHQubm9kZXMpO3JldHVybiBlLnRleHR8fChlLnRleHQ9ZnVuY3Rpb24odCl7cmV0dXJuIHQudGV4dH0pLGV9LFdpLm1hcmtzRnJvbVNjaGVtYT1mdW5jdGlvbih0KXtyZXR1cm4gSGkodC5tYXJrcyl9O3ZhciBHaT1mdW5jdGlvbih0LGUpe3ZhciBuPXRoaXM7dGhpcy5lZGl0b3JWaWV3PXQsdGhpcy53aWR0aD1lLndpZHRofHwxLHRoaXMuY29sb3I9ZS5jb2xvcnx8ImJsYWNrIix0aGlzLmNsYXNzPWUuY2xhc3MsdGhpcy5jdXJzb3JQb3M9bnVsbCx0aGlzLmVsZW1lbnQ9bnVsbCx0aGlzLnRpbWVvdXQ9bnVsbCx0aGlzLmhhbmRsZXJzPVsiZHJhZ292ZXIiLCJkcmFnZW5kIiwiZHJvcCIsImRyYWdsZWF2ZSJdLm1hcCgoZnVuY3Rpb24oZSl7dmFyIHI9ZnVuY3Rpb24odCl7cmV0dXJuIG5bZV0odCl9O3JldHVybiB0LmRvbS5hZGRFdmVudExpc3RlbmVyKGUscikse25hbWU6ZSxoYW5kbGVyOnJ9fSkpfTtHaS5wcm90b3R5cGUuZGVzdHJveT1mdW5jdGlvbigpe3ZhciB0PXRoaXM7dGhpcy5oYW5kbGVycy5mb3JFYWNoKChmdW5jdGlvbihlKXt2YXIgbj1lLm5hbWUscj1lLmhhbmRsZXI7cmV0dXJuIHQuZWRpdG9yVmlldy5kb20ucmVtb3ZlRXZlbnRMaXN0ZW5lcihuLHIpfSkpfSxHaS5wcm90b3R5cGUudXBkYXRlPWZ1bmN0aW9uKHQsZSl7bnVsbCE9dGhpcy5jdXJzb3JQb3MmJmUuZG9jIT10LnN0YXRlLmRvYyYmdGhpcy51cGRhdGVPdmVybGF5KCl9LEdpLnByb3RvdHlwZS5zZXRDdXJzb3I9ZnVuY3Rpb24odCl7dCE9dGhpcy5jdXJzb3JQb3MmJih0aGlzLmN1cnNvclBvcz10LG51bGw9PXQ/KHRoaXMuZWxlbWVudC5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKHRoaXMuZWxlbWVudCksdGhpcy5lbGVtZW50PW51bGwpOnRoaXMudXBkYXRlT3ZlcmxheSgpKX0sR2kucHJvdG90eXBlLnVwZGF0ZU92ZXJsYXk9ZnVuY3Rpb24oKXt2YXIgdCxlPXRoaXMuZWRpdG9yVmlldy5zdGF0ZS5kb2MucmVzb2x2ZSh0aGlzLmN1cnNvclBvcyk7aWYoIWUucGFyZW50LmlubGluZUNvbnRlbnQpe3ZhciBuPWUubm9kZUJlZm9yZSxyPWUubm9kZUFmdGVyO2lmKG58fHIpe3ZhciBvPXRoaXMuZWRpdG9yVmlldy5ub2RlRE9NKHRoaXMuY3Vyc29yUG9zLShuP24ubm9kZVNpemU6MCkpLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLGk9bj9vLmJvdHRvbTpvLnRvcDtuJiZyJiYoaT0oaSt0aGlzLmVkaXRvclZpZXcubm9kZURPTSh0aGlzLmN1cnNvclBvcykuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkudG9wKS8yKSx0PXtsZWZ0Om8ubGVmdCxyaWdodDpvLnJpZ2h0LHRvcDppLXRoaXMud2lkdGgvMixib3R0b206aSt0aGlzLndpZHRoLzJ9fX1pZighdCl7dmFyIHM9dGhpcy5lZGl0b3JWaWV3LmNvb3Jkc0F0UG9zKHRoaXMuY3Vyc29yUG9zKTt0PXtsZWZ0OnMubGVmdC10aGlzLndpZHRoLzIscmlnaHQ6cy5sZWZ0K3RoaXMud2lkdGgvMix0b3A6cy50b3AsYm90dG9tOnMuYm90dG9tfX12YXIgYT10aGlzLmVkaXRvclZpZXcuZG9tLm9mZnNldFBhcmVudDt0aGlzLmVsZW1lbnR8fCh0aGlzLmVsZW1lbnQ9YS5hcHBlbmRDaGlsZChkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKSksdGhpcy5jbGFzcyYmKHRoaXMuZWxlbWVudC5jbGFzc05hbWU9dGhpcy5jbGFzcyksdGhpcy5lbGVtZW50LnN0eWxlLmNzc1RleHQ9InBvc2l0aW9uOiBhYnNvbHV0ZTsgei1pbmRleDogNTA7IHBvaW50ZXItZXZlbnRzOiBub25lOyBiYWNrZ3JvdW5kLWNvbG9yOiAiK3RoaXMuY29sb3IpO3ZhciBjPSFhfHxhPT1kb2N1bWVudC5ib2R5JiYic3RhdGljIj09Z2V0Q29tcHV0ZWRTdHlsZShhKS5wb3NpdGlvbj97bGVmdDotcGFnZVhPZmZzZXQsdG9wOi1wYWdlWU9mZnNldH06YS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTt0aGlzLmVsZW1lbnQuc3R5bGUubGVmdD10LmxlZnQtYy5sZWZ0KyJweCIsdGhpcy5lbGVtZW50LnN0eWxlLnRvcD10LnRvcC1jLnRvcCsicHgiLHRoaXMuZWxlbWVudC5zdHlsZS53aWR0aD10LnJpZ2h0LXQubGVmdCsicHgiLHRoaXMuZWxlbWVudC5zdHlsZS5oZWlnaHQ9dC5ib3R0b20tdC50b3ArInB4In0sR2kucHJvdG90eXBlLnNjaGVkdWxlUmVtb3ZhbD1mdW5jdGlvbih0KXt2YXIgZT10aGlzO2NsZWFyVGltZW91dCh0aGlzLnRpbWVvdXQpLHRoaXMudGltZW91dD1zZXRUaW1lb3V0KChmdW5jdGlvbigpe3JldHVybiBlLnNldEN1cnNvcihudWxsKX0pLHQpfSxHaS5wcm90b3R5cGUuZHJhZ292ZXI9ZnVuY3Rpb24odCl7aWYodGhpcy5lZGl0b3JWaWV3LmVkaXRhYmxlKXt2YXIgZT10aGlzLmVkaXRvclZpZXcucG9zQXRDb29yZHMoe2xlZnQ6dC5jbGllbnRYLHRvcDp0LmNsaWVudFl9KTtpZihlKXt2YXIgbj1lLnBvczt0aGlzLmVkaXRvclZpZXcuZHJhZ2dpbmcmJnRoaXMuZWRpdG9yVmlldy5kcmFnZ2luZy5zbGljZSYmKG49T2JqZWN0KEJ0WyJoIl0pKHRoaXMuZWRpdG9yVmlldy5zdGF0ZS5kb2Msbix0aGlzLmVkaXRvclZpZXcuZHJhZ2dpbmcuc2xpY2UpLG51bGw9PW4mJihuPWUucG9zKSksdGhpcy5zZXRDdXJzb3IobiksdGhpcy5zY2hlZHVsZVJlbW92YWwoNWUzKX19fSxHaS5wcm90b3R5cGUuZHJhZ2VuZD1mdW5jdGlvbigpe3RoaXMuc2NoZWR1bGVSZW1vdmFsKDIwKX0sR2kucHJvdG90eXBlLmRyb3A9ZnVuY3Rpb24oKXt0aGlzLnNjaGVkdWxlUmVtb3ZhbCgyMCl9LEdpLnByb3RvdHlwZS5kcmFnbGVhdmU9ZnVuY3Rpb24odCl7dC50YXJnZXQhPXRoaXMuZWRpdG9yVmlldy5kb20mJnRoaXMuZWRpdG9yVmlldy5kb20uY29udGFpbnModC5yZWxhdGVkVGFyZ2V0KXx8dGhpcy5zZXRDdXJzb3IobnVsbCl9O3ZhciBYaT1uKCI3ZjA2IiksWWk9bigiNTc2YSIpLFppPW4oIjMwNGEiKSxRaT1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKGUpe3QuY2FsbCh0aGlzLGUsZSl9cmV0dXJuIHQmJihlLl9fcHJvdG9fXz10KSxlLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKHQmJnQucHJvdG90eXBlKSxlLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1lLGUucHJvdG90eXBlLm1hcD1mdW5jdGlvbihuLHIpe3ZhciBvPW4ucmVzb2x2ZShyLm1hcCh0aGlzLmhlYWQpKTtyZXR1cm4gZS52YWxpZChvKT9uZXcgZShvKTp0Lm5lYXIobyl9LGUucHJvdG90eXBlLmNvbnRlbnQ9ZnVuY3Rpb24oKXtyZXR1cm4gWmlbImkiXS5lbXB0eX0sZS5wcm90b3R5cGUuZXE9ZnVuY3Rpb24odCl7cmV0dXJuIHQgaW5zdGFuY2VvZiBlJiZ0LmhlYWQ9PXRoaXMuaGVhZH0sZS5wcm90b3R5cGUudG9KU09OPWZ1bmN0aW9uKCl7cmV0dXJue3R5cGU6ImdhcGN1cnNvciIscG9zOnRoaXMuaGVhZH19LGUuZnJvbUpTT049ZnVuY3Rpb24odCxuKXtpZigibnVtYmVyIiE9dHlwZW9mIG4ucG9zKXRocm93IG5ldyBSYW5nZUVycm9yKCJJbnZhbGlkIGlucHV0IGZvciBHYXBDdXJzb3IuZnJvbUpTT04iKTtyZXR1cm4gbmV3IGUodC5yZXNvbHZlKG4ucG9zKSl9LGUucHJvdG90eXBlLmdldEJvb2ttYXJrPWZ1bmN0aW9uKCl7cmV0dXJuIG5ldyB0cyh0aGlzLmFuY2hvcil9LGUudmFsaWQ9ZnVuY3Rpb24odCl7dmFyIGU9dC5wYXJlbnQ7aWYoZS5pc1RleHRibG9ja3x8IWVzKHQpfHwhbnModCkpcmV0dXJuITE7dmFyIG49ZS50eXBlLnNwZWMuYWxsb3dHYXBDdXJzb3I7aWYobnVsbCE9bilyZXR1cm4gbjt2YXIgcj1lLmNvbnRlbnRNYXRjaEF0KHQuaW5kZXgoKSkuZGVmYXVsdFR5cGU7cmV0dXJuIHImJnIuaXNUZXh0YmxvY2t9LGUuZmluZEZyb209ZnVuY3Rpb24odCxuLHIpe3Q6Zm9yKDs7KXtpZighciYmZS52YWxpZCh0KSlyZXR1cm4gdDtmb3IodmFyIG89dC5wb3MsaT1udWxsLHM9dC5kZXB0aDs7cy0tKXt2YXIgYT10Lm5vZGUocyk7aWYobj4wP3QuaW5kZXhBZnRlcihzKTxhLmNoaWxkQ291bnQ6dC5pbmRleChzKT4wKXtpPWEuY2hpbGQobj4wP3QuaW5kZXhBZnRlcihzKTp0LmluZGV4KHMpLTEpO2JyZWFrfWlmKDA9PXMpcmV0dXJuIG51bGw7bys9bjt2YXIgdT10LmRvYy5yZXNvbHZlKG8pO2lmKGUudmFsaWQodSkpcmV0dXJuIHV9Zm9yKDs7KXt2YXIgbD1uPjA/aS5maXJzdENoaWxkOmkubGFzdENoaWxkO2lmKCFsKXtpZihpLmlzQXRvbSYmIWkuaXNUZXh0JiYhY1siTm9kZVNlbGVjdGlvbiJdLmlzU2VsZWN0YWJsZShpKSl7dD10LmRvYy5yZXNvbHZlKG8raS5ub2RlU2l6ZSpuKSxyPSExO2NvbnRpbnVlIHR9YnJlYWt9aT1sLG8rPW47dmFyIGg9dC5kb2MucmVzb2x2ZShvKTtpZihlLnZhbGlkKGgpKXJldHVybiBofXJldHVybiBudWxsfX0sZX0oY1siU2VsZWN0aW9uIl0pO1FpLnByb3RvdHlwZS52aXNpYmxlPSExLGNbIlNlbGVjdGlvbiJdLmpzb25JRCgiZ2FwY3Vyc29yIixRaSk7dmFyIHRzPWZ1bmN0aW9uKHQpe3RoaXMucG9zPXR9O2Z1bmN0aW9uIGVzKHQpe2Zvcih2YXIgZT10LmRlcHRoO2U+PTA7ZS0tKXt2YXIgbj10LmluZGV4KGUpO2lmKDAhPW4pZm9yKHZhciByPXQubm9kZShlKS5jaGlsZChuLTEpOztyPXIubGFzdENoaWxkKXtpZigwPT1yLmNoaWxkQ291bnQmJiFyLmlubGluZUNvbnRlbnR8fHIuaXNBdG9tfHxyLnR5cGUuc3BlYy5pc29sYXRpbmcpcmV0dXJuITA7aWYoci5pbmxpbmVDb250ZW50KXJldHVybiExfX1yZXR1cm4hMH1mdW5jdGlvbiBucyh0KXtmb3IodmFyIGU9dC5kZXB0aDtlPj0wO2UtLSl7dmFyIG49dC5pbmRleEFmdGVyKGUpLHI9dC5ub2RlKGUpO2lmKG4hPXIuY2hpbGRDb3VudClmb3IodmFyIG89ci5jaGlsZChuKTs7bz1vLmZpcnN0Q2hpbGQpe2lmKDA9PW8uY2hpbGRDb3VudCYmIW8uaW5saW5lQ29udGVudHx8by5pc0F0b218fG8udHlwZS5zcGVjLmlzb2xhdGluZylyZXR1cm4hMDtpZihvLmlubGluZUNvbnRlbnQpcmV0dXJuITF9fXJldHVybiEwfXRzLnByb3RvdHlwZS5tYXA9ZnVuY3Rpb24odCl7cmV0dXJuIG5ldyB0cyh0Lm1hcCh0aGlzLnBvcykpfSx0cy5wcm90b3R5cGUucmVzb2x2ZT1mdW5jdGlvbih0KXt2YXIgZT10LnJlc29sdmUodGhpcy5wb3MpO3JldHVybiBRaS52YWxpZChlKT9uZXcgUWkoZSk6Y1siU2VsZWN0aW9uIl0ubmVhcihlKX07dmFyIHJzPWZ1bmN0aW9uKCl7cmV0dXJuIG5ldyBjWyJQbHVnaW4iXSh7cHJvcHM6e2RlY29yYXRpb25zOmNzLGNyZWF0ZVNlbGVjdGlvbkJldHdlZW46ZnVuY3Rpb24odCxlLG4pe2lmKGUucG9zPT1uLnBvcyYmUWkudmFsaWQobikpcmV0dXJuIG5ldyBRaShuKX0saGFuZGxlQ2xpY2s6YXMsaGFuZGxlS2V5RG93bjppc319KX0saXM9T2JqZWN0KFhpWyJhIl0pKHtBcnJvd0xlZnQ6c3MoImhvcml6IiwtMSksQXJyb3dSaWdodDpzcygiaG9yaXoiLDEpLEFycm93VXA6c3MoInZlcnQiLC0xKSxBcnJvd0Rvd246c3MoInZlcnQiLDEpfSk7ZnVuY3Rpb24gc3ModCxlKXt2YXIgbj0idmVydCI9PXQ/ZT4wPyJkb3duIjoidXAiOmU+MD8icmlnaHQiOiJsZWZ0IjtyZXR1cm4gZnVuY3Rpb24odCxyLG8pe3ZhciBpPXQuc2VsZWN0aW9uLHM9ZT4wP2kuJHRvOmkuJGZyb20sYT1pLmVtcHR5O2lmKGkgaW5zdGFuY2VvZiBjWyJUZXh0U2VsZWN0aW9uIl0pe2lmKCFvLmVuZE9mVGV4dGJsb2NrKG4pfHwwPT1zLmRlcHRoKXJldHVybiExO2E9ITEscz10LmRvYy5yZXNvbHZlKGU+MD9zLmFmdGVyKCk6cy5iZWZvcmUoKSl9dmFyIHU9UWkuZmluZEZyb20ocyxlLGEpO3JldHVybiEhdSYmKHImJnIodC50ci5zZXRTZWxlY3Rpb24obmV3IFFpKHUpKSksITApfX1mdW5jdGlvbiBhcyh0LGUsbil7aWYoIXQuZWRpdGFibGUpcmV0dXJuITE7dmFyIHI9dC5zdGF0ZS5kb2MucmVzb2x2ZShlKTtpZighUWkudmFsaWQocikpcmV0dXJuITE7dmFyIG89dC5wb3NBdENvb3Jkcyh7bGVmdDpuLmNsaWVudFgsdG9wOm4uY2xpZW50WX0pLGk9by5pbnNpZGU7cmV0dXJuIShpPi0xJiZjWyJOb2RlU2VsZWN0aW9uIl0uaXNTZWxlY3RhYmxlKHQuc3RhdGUuZG9jLm5vZGVBdChpKSkpJiYodC5kaXNwYXRjaCh0LnN0YXRlLnRyLnNldFNlbGVjdGlvbihuZXcgUWkocikpKSwhMCl9ZnVuY3Rpb24gY3ModCl7aWYoISh0LnNlbGVjdGlvbiBpbnN0YW5jZW9mIFFpKSlyZXR1cm4gbnVsbDt2YXIgZT1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKTtyZXR1cm4gZS5jbGFzc05hbWU9IlByb3NlTWlycm9yLWdhcGN1cnNvciIsWWlbImIiXS5jcmVhdGUodC5kb2MsW1lpWyJhIl0ud2lkZ2V0KHQuc2VsZWN0aW9uLmhlYWQsZSx7a2V5OiJnYXBjdXJzb3IifSldKX12YXIgdXM9bigiOWVhNyIpLGxzPSJ1bmRlZmluZWQiIT10eXBlb2YgbmF2aWdhdG9yJiYvTWFjLy50ZXN0KG5hdmlnYXRvci5wbGF0Zm9ybSk7ZnVuY3Rpb24gaHModCl7dmFyIGUsbixyLG8saT10LnNwbGl0KC8tKD8hJCkvKSxzPWlbaS5sZW5ndGgtMV07IlNwYWNlIj09cyYmKHM9IiAiKTtmb3IodmFyIGE9MDthPGkubGVuZ3RoLTE7YSsrKXt2YXIgYz1pW2FdO2lmKC9eKGNtZHxtZXRhfG0pJC9pLnRlc3QoYykpbz0hMDtlbHNlIGlmKC9eYShsdCk/JC9pLnRlc3QoYykpZT0hMDtlbHNlIGlmKC9eKGN8Y3RybHxjb250cm9sKSQvaS50ZXN0KGMpKW49ITA7ZWxzZSBpZigvXnMoaGlmdCk/JC9pLnRlc3QoYykpcj0hMDtlbHNle2lmKCEvXm1vZCQvaS50ZXN0KGMpKXRocm93IG5ldyBFcnJvcigiVW5yZWNvZ25pemVkIG1vZGlmaWVyIG5hbWU6ICIrYyk7bHM/bz0hMDpuPSEwfX1yZXR1cm4gZSYmKHM9IkFsdC0iK3MpLG4mJihzPSJDdHJsLSIrcyksbyYmKHM9Ik1ldGEtIitzKSxyJiYocz0iU2hpZnQtIitzKSxzfWZ1bmN0aW9uIGZzKHQpe3ZhciBlPU9iamVjdC5jcmVhdGUobnVsbCk7Zm9yKHZhciBuIGluIHQpZVtocyhuKV09dFtuXTtyZXR1cm4gZX1mdW5jdGlvbiBwcyh0LGUsbil7cmV0dXJuIGUuYWx0S2V5JiYodD0iQWx0LSIrdCksZS5jdHJsS2V5JiYodD0iQ3RybC0iK3QpLGUubWV0YUtleSYmKHQ9Ik1ldGEtIit0KSwhMSE9PW4mJmUuc2hpZnRLZXkmJih0PSJTaGlmdC0iK3QpLHR9ZnVuY3Rpb24gZHModCl7cmV0dXJuIG5ldyBjWyJQbHVnaW4iXSh7cHJvcHM6e2hhbmRsZUtleURvd246dnModCl9fSl9ZnVuY3Rpb24gdnModCl7dmFyIGU9ZnModCk7cmV0dXJuIGZ1bmN0aW9uKHQsbil7dmFyIHIsbz1PYmplY3QodXNbImIiXSkobiksaT0xPT1vLmxlbmd0aCYmIiAiIT1vLHM9ZVtwcyhvLG4sIWkpXTtpZihzJiZzKHQuc3RhdGUsdC5kaXNwYXRjaCx0KSlyZXR1cm4hMDtpZihpJiYobi5zaGlmdEtleXx8bi5hbHRLZXl8fG4ubWV0YUtleSkmJihyPXVzWyJhIl1bbi5rZXlDb2RlXSkmJnIhPW8pe3ZhciBhPWVbcHMocixuLCEwKV07aWYoYSYmYSh0LnN0YXRlLHQuZGlzcGF0Y2gsdCkpcmV0dXJuITB9ZWxzZSBpZihpJiZuLnNoaWZ0S2V5KXt2YXIgYz1lW3BzKG8sbiwhMCldO2lmKGMmJmModC5zdGF0ZSx0LmRpc3BhdGNoLHQpKXJldHVybiEwfXJldHVybiExfX1mdW5jdGlvbiBtcyh0LGUpe3JldHVybiF0LnNlbGVjdGlvbi5lbXB0eSYmKGUmJmUodC50ci5kZWxldGVTZWxlY3Rpb24oKS5zY3JvbGxJbnRvVmlldygpKSwhMCl9ZnVuY3Rpb24gZ3ModCxlLG4pe3ZhciByPXQuc2VsZWN0aW9uLG89ci4kY3Vyc29yO2lmKCFvfHwobj8hbi5lbmRPZlRleHRibG9jaygiYmFja3dhcmQiLHQpOm8ucGFyZW50T2Zmc2V0PjApKXJldHVybiExO3ZhciBpPWJzKG8pO2lmKCFpKXt2YXIgcz1vLmJsb2NrUmFuZ2UoKSxhPXMmJk9iamVjdChCdFsiayJdKShzKTtyZXR1cm4gbnVsbCE9YSYmKGUmJmUodC50ci5saWZ0KHMsYSkuc2Nyb2xsSW50b1ZpZXcoKSksITApfXZhciB1PWkubm9kZUJlZm9yZTtpZighdS50eXBlLnNwZWMuaXNvbGF0aW5nJiZ6cyh0LGksZSkpcmV0dXJuITA7aWYoMD09by5wYXJlbnQuY29udGVudC5zaXplJiYoeXModSwiZW5kIil8fGNbIk5vZGVTZWxlY3Rpb24iXS5pc1NlbGVjdGFibGUodSkpKXtpZihlKXt2YXIgbD10LnRyLmRlbGV0ZVJhbmdlKG8uYmVmb3JlKCksby5hZnRlcigpKTtsLnNldFNlbGVjdGlvbih5cyh1LCJlbmQiKT9jWyJTZWxlY3Rpb24iXS5maW5kRnJvbShsLmRvYy5yZXNvbHZlKGwubWFwcGluZy5tYXAoaS5wb3MsLTEpKSwtMSk6Y1siTm9kZVNlbGVjdGlvbiJdLmNyZWF0ZShsLmRvYyxpLnBvcy11Lm5vZGVTaXplKSksZShsLnNjcm9sbEludG9WaWV3KCkpfXJldHVybiEwfXJldHVybiEoIXUuaXNBdG9tfHxpLmRlcHRoIT1vLmRlcHRoLTEpJiYoZSYmZSh0LnRyLmRlbGV0ZShpLnBvcy11Lm5vZGVTaXplLGkucG9zKS5zY3JvbGxJbnRvVmlldygpKSwhMCl9ZnVuY3Rpb24geXModCxlKXtmb3IoO3Q7dD0ic3RhcnQiPT1lP3QuZmlyc3RDaGlsZDp0Lmxhc3RDaGlsZClpZih0LmlzVGV4dGJsb2NrKXJldHVybiEwO3JldHVybiExfWZ1bmN0aW9uIHdzKHQsZSxuKXt2YXIgcj10LnNlbGVjdGlvbixvPXIuJGhlYWQsaT1yLmVtcHR5LHM9bztpZighaSlyZXR1cm4hMTtpZihvLnBhcmVudC5pc1RleHRibG9jayl7aWYobj8hbi5lbmRPZlRleHRibG9jaygiYmFja3dhcmQiLHQpOm8ucGFyZW50T2Zmc2V0PjApcmV0dXJuITE7cz1icyhvKX12YXIgYT1zJiZzLm5vZGVCZWZvcmU7cmV0dXJuISghYXx8IWNbIk5vZGVTZWxlY3Rpb24iXS5pc1NlbGVjdGFibGUoYSkpJiYoZSYmZSh0LnRyLnNldFNlbGVjdGlvbihjWyJOb2RlU2VsZWN0aW9uIl0uY3JlYXRlKHQuZG9jLHMucG9zLWEubm9kZVNpemUpKS5zY3JvbGxJbnRvVmlldygpKSwhMCl9ZnVuY3Rpb24gYnModCl7aWYoIXQucGFyZW50LnR5cGUuc3BlYy5pc29sYXRpbmcpZm9yKHZhciBlPXQuZGVwdGgtMTtlPj0wO2UtLSl7aWYodC5pbmRleChlKT4wKXJldHVybiB0LmRvYy5yZXNvbHZlKHQuYmVmb3JlKGUrMSkpO2lmKHQubm9kZShlKS50eXBlLnNwZWMuaXNvbGF0aW5nKWJyZWFrfXJldHVybiBudWxsfWZ1bmN0aW9uIHhzKHQsZSxuKXt2YXIgcj10LnNlbGVjdGlvbixvPXIuJGN1cnNvcjtpZighb3x8KG4/IW4uZW5kT2ZUZXh0YmxvY2soImZvcndhcmQiLHQpOm8ucGFyZW50T2Zmc2V0PG8ucGFyZW50LmNvbnRlbnQuc2l6ZSkpcmV0dXJuITE7dmFyIGk9U3Mobyk7aWYoIWkpcmV0dXJuITE7dmFyIHM9aS5ub2RlQWZ0ZXI7aWYoenModCxpLGUpKXJldHVybiEwO2lmKDA9PW8ucGFyZW50LmNvbnRlbnQuc2l6ZSYmKHlzKHMsInN0YXJ0Iil8fGNbIk5vZGVTZWxlY3Rpb24iXS5pc1NlbGVjdGFibGUocykpKXtpZihlKXt2YXIgYT10LnRyLmRlbGV0ZVJhbmdlKG8uYmVmb3JlKCksby5hZnRlcigpKTthLnNldFNlbGVjdGlvbih5cyhzLCJzdGFydCIpP2NbIlNlbGVjdGlvbiJdLmZpbmRGcm9tKGEuZG9jLnJlc29sdmUoYS5tYXBwaW5nLm1hcChpLnBvcykpLDEpOmNbIk5vZGVTZWxlY3Rpb24iXS5jcmVhdGUoYS5kb2MsYS5tYXBwaW5nLm1hcChpLnBvcykpKSxlKGEuc2Nyb2xsSW50b1ZpZXcoKSl9cmV0dXJuITB9cmV0dXJuISghcy5pc0F0b218fGkuZGVwdGghPW8uZGVwdGgtMSkmJihlJiZlKHQudHIuZGVsZXRlKGkucG9zLGkucG9zK3Mubm9kZVNpemUpLnNjcm9sbEludG9WaWV3KCkpLCEwKX1mdW5jdGlvbiBrcyh0LGUsbil7dmFyIHI9dC5zZWxlY3Rpb24sbz1yLiRoZWFkLGk9ci5lbXB0eSxzPW87aWYoIWkpcmV0dXJuITE7aWYoby5wYXJlbnQuaXNUZXh0YmxvY2spe2lmKG4/IW4uZW5kT2ZUZXh0YmxvY2soImZvcndhcmQiLHQpOm8ucGFyZW50T2Zmc2V0PG8ucGFyZW50LmNvbnRlbnQuc2l6ZSlyZXR1cm4hMTtzPVNzKG8pfXZhciBhPXMmJnMubm9kZUFmdGVyO3JldHVybiEoIWF8fCFjWyJOb2RlU2VsZWN0aW9uIl0uaXNTZWxlY3RhYmxlKGEpKSYmKGUmJmUodC50ci5zZXRTZWxlY3Rpb24oY1siTm9kZVNlbGVjdGlvbiJdLmNyZWF0ZSh0LmRvYyxzLnBvcykpLnNjcm9sbEludG9WaWV3KCkpLCEwKX1mdW5jdGlvbiBTcyh0KXtpZighdC5wYXJlbnQudHlwZS5zcGVjLmlzb2xhdGluZylmb3IodmFyIGU9dC5kZXB0aC0xO2U+PTA7ZS0tKXt2YXIgbj10Lm5vZGUoZSk7aWYodC5pbmRleChlKSsxPG4uY2hpbGRDb3VudClyZXR1cm4gdC5kb2MucmVzb2x2ZSh0LmFmdGVyKGUrMSkpO2lmKG4udHlwZS5zcGVjLmlzb2xhdGluZylicmVha31yZXR1cm4gbnVsbH1mdW5jdGlvbiBDcyh0LGUpe3ZhciBuPXQuc2VsZWN0aW9uLHI9bi4kZnJvbSxvPW4uJHRvLGk9ci5ibG9ja1JhbmdlKG8pLHM9aSYmT2JqZWN0KEJ0WyJrIl0pKGkpO3JldHVybiBudWxsIT1zJiYoZSYmZSh0LnRyLmxpZnQoaSxzKS5zY3JvbGxJbnRvVmlldygpKSwhMCl9ZnVuY3Rpb24gT3ModCxlKXt2YXIgbj10LnNlbGVjdGlvbixyPW4uJGhlYWQsbz1uLiRhbmNob3I7cmV0dXJuISghci5wYXJlbnQudHlwZS5zcGVjLmNvZGV8fCFyLnNhbWVQYXJlbnQobykpJiYoZSYmZSh0LnRyLmluc2VydFRleHQoIlxuIikuc2Nyb2xsSW50b1ZpZXcoKSksITApfWZ1bmN0aW9uIE1zKHQpe2Zvcih2YXIgZT0wO2U8dC5lZGdlQ291bnQ7ZSsrKXt2YXIgbj10LmVkZ2UoZSkscj1uLnR5cGU7aWYoci5pc1RleHRibG9jayYmIXIuaGFzUmVxdWlyZWRBdHRycygpKXJldHVybiByfXJldHVybiBudWxsfWZ1bmN0aW9uIE5zKHQsZSl7dmFyIG49dC5zZWxlY3Rpb24scj1uLiRoZWFkLG89bi4kYW5jaG9yO2lmKCFyLnBhcmVudC50eXBlLnNwZWMuY29kZXx8IXIuc2FtZVBhcmVudChvKSlyZXR1cm4hMTt2YXIgaT1yLm5vZGUoLTEpLHM9ci5pbmRleEFmdGVyKC0xKSxhPU1zKGkuY29udGVudE1hdGNoQXQocykpO2lmKCFpLmNhblJlcGxhY2VXaXRoKHMscyxhKSlyZXR1cm4hMTtpZihlKXt2YXIgdT1yLmFmdGVyKCksbD10LnRyLnJlcGxhY2VXaXRoKHUsdSxhLmNyZWF0ZUFuZEZpbGwoKSk7bC5zZXRTZWxlY3Rpb24oY1siU2VsZWN0aW9uIl0ubmVhcihsLmRvYy5yZXNvbHZlKHUpLDEpKSxlKGwuc2Nyb2xsSW50b1ZpZXcoKSl9cmV0dXJuITB9ZnVuY3Rpb24gVHModCxlKXt2YXIgbj10LnNlbGVjdGlvbixyPW4uJGZyb20sbz1uLiR0bztpZihyLnBhcmVudC5pbmxpbmVDb250ZW50fHxvLnBhcmVudC5pbmxpbmVDb250ZW50KXJldHVybiExO3ZhciBpPU1zKHIucGFyZW50LmNvbnRlbnRNYXRjaEF0KG8uaW5kZXhBZnRlcigpKSk7aWYoIWl8fCFpLmlzVGV4dGJsb2NrKXJldHVybiExO2lmKGUpe3ZhciBzPSghci5wYXJlbnRPZmZzZXQmJm8uaW5kZXgoKTxvLnBhcmVudC5jaGlsZENvdW50P3I6bykucG9zLGE9dC50ci5pbnNlcnQocyxpLmNyZWF0ZUFuZEZpbGwoKSk7YS5zZXRTZWxlY3Rpb24oY1siVGV4dFNlbGVjdGlvbiJdLmNyZWF0ZShhLmRvYyxzKzEpKSxlKGEuc2Nyb2xsSW50b1ZpZXcoKSl9cmV0dXJuITB9ZnVuY3Rpb24gQXModCxlKXt2YXIgbj10LnNlbGVjdGlvbixyPW4uJGN1cnNvcjtpZighcnx8ci5wYXJlbnQuY29udGVudC5zaXplKXJldHVybiExO2lmKHIuZGVwdGg+MSYmci5hZnRlcigpIT1yLmVuZCgtMSkpe3ZhciBvPXIuYmVmb3JlKCk7aWYoT2JqZWN0KEJ0WyJnIl0pKHQuZG9jLG8pKXJldHVybiBlJiZlKHQudHIuc3BsaXQobykuc2Nyb2xsSW50b1ZpZXcoKSksITB9dmFyIGk9ci5ibG9ja1JhbmdlKCkscz1pJiZPYmplY3QoQnRbImsiXSkoaSk7cmV0dXJuIG51bGwhPXMmJihlJiZlKHQudHIubGlmdChpLHMpLnNjcm9sbEludG9WaWV3KCkpLCEwKX1mdW5jdGlvbiBFcyh0LGUpe3ZhciBuPXQuc2VsZWN0aW9uLHI9bi4kZnJvbSxvPW4uJHRvO2lmKHQuc2VsZWN0aW9uIGluc3RhbmNlb2YgY1siTm9kZVNlbGVjdGlvbiJdJiZ0LnNlbGVjdGlvbi5ub2RlLmlzQmxvY2spcmV0dXJuISghci5wYXJlbnRPZmZzZXR8fCFPYmplY3QoQnRbImciXSkodC5kb2Msci5wb3MpKSYmKGUmJmUodC50ci5zcGxpdChyLnBvcykuc2Nyb2xsSW50b1ZpZXcoKSksITApO2lmKCFyLnBhcmVudC5pc0Jsb2NrKXJldHVybiExO2lmKGUpe3ZhciBpPW8ucGFyZW50T2Zmc2V0PT1vLnBhcmVudC5jb250ZW50LnNpemUscz10LnRyO3Quc2VsZWN0aW9uIGluc3RhbmNlb2YgY1siVGV4dFNlbGVjdGlvbiJdJiZzLmRlbGV0ZVNlbGVjdGlvbigpO3ZhciBhPTA9PXIuZGVwdGg/bnVsbDpNcyhyLm5vZGUoLTEpLmNvbnRlbnRNYXRjaEF0KHIuaW5kZXhBZnRlcigtMSkpKSx1PWkmJmE/W3t0eXBlOmF9XTpudWxsLGw9T2JqZWN0KEJ0WyJnIl0pKHMuZG9jLHMubWFwcGluZy5tYXAoci5wb3MpLDEsdSk7dXx8bHx8IU9iamVjdChCdFsiZyJdKShzLmRvYyxzLm1hcHBpbmcubWFwKHIucG9zKSwxLGEmJlt7dHlwZTphfV0pfHwodT1be3R5cGU6YX1dLGw9ITApLGwmJihzLnNwbGl0KHMubWFwcGluZy5tYXAoci5wb3MpLDEsdSksaXx8ci5wYXJlbnRPZmZzZXR8fHIucGFyZW50LnR5cGU9PWF8fCFyLm5vZGUoLTEpLmNhblJlcGxhY2Uoci5pbmRleCgtMSksci5pbmRleEFmdGVyKC0xKSxaaVsiYyJdLmZyb20oYS5jcmVhdGUoKSxyLnBhcmVudCkpfHxzLnNldE5vZGVNYXJrdXAocy5tYXBwaW5nLm1hcChyLmJlZm9yZSgpKSxhKSksZShzLnNjcm9sbEludG9WaWV3KCkpfXJldHVybiEwfWZ1bmN0aW9uIERzKHQsZSl7cmV0dXJuIGUmJmUodC50ci5zZXRTZWxlY3Rpb24obmV3IGNbIkFsbFNlbGVjdGlvbiJdKHQuZG9jKSkpLCEwfWZ1bmN0aW9uIFJzKHQsZSxuKXt2YXIgcj1lLm5vZGVCZWZvcmUsbz1lLm5vZGVBZnRlcixpPWUuaW5kZXgoKTtyZXR1cm4hIShyJiZvJiZyLnR5cGUuY29tcGF0aWJsZUNvbnRlbnQoby50eXBlKSkmJighci5jb250ZW50LnNpemUmJmUucGFyZW50LmNhblJlcGxhY2UoaS0xLGkpPyhuJiZuKHQudHIuZGVsZXRlKGUucG9zLXIubm9kZVNpemUsZS5wb3MpLnNjcm9sbEludG9WaWV3KCkpLCEwKTohKCFlLnBhcmVudC5jYW5SZXBsYWNlKGksaSsxKXx8IW8uaXNUZXh0YmxvY2smJiFPYmplY3QoQnRbImYiXSkodC5kb2MsZS5wb3MpKSYmKG4mJm4odC50ci5jbGVhckluY29tcGF0aWJsZShlLnBvcyxyLnR5cGUsci5jb250ZW50TWF0Y2hBdChyLmNoaWxkQ291bnQpKS5qb2luKGUucG9zKS5zY3JvbGxJbnRvVmlldygpKSwhMCkpfWZ1bmN0aW9uIHpzKHQsZSxuKXt2YXIgcixvLGk9ZS5ub2RlQmVmb3JlLHM9ZS5ub2RlQWZ0ZXI7aWYoaS50eXBlLnNwZWMuaXNvbGF0aW5nfHxzLnR5cGUuc3BlYy5pc29sYXRpbmcpcmV0dXJuITE7aWYoUnModCxlLG4pKXJldHVybiEwO2lmKGUucGFyZW50LmNhblJlcGxhY2UoZS5pbmRleCgpLGUuaW5kZXgoKSsxKSYmKHI9KG89aS5jb250ZW50TWF0Y2hBdChpLmNoaWxkQ291bnQpKS5maW5kV3JhcHBpbmcocy50eXBlKSkmJm8ubWF0Y2hUeXBlKHJbMF18fHMudHlwZSkudmFsaWRFbmQpe2lmKG4pe2Zvcih2YXIgYT1lLnBvcytzLm5vZGVTaXplLHU9WmlbImMiXS5lbXB0eSxsPXIubGVuZ3RoLTE7bD49MDtsLS0pdT1aaVsiYyJdLmZyb20ocltsXS5jcmVhdGUobnVsbCx1KSk7dT1aaVsiYyJdLmZyb20oaS5jb3B5KHUpKTt2YXIgaD10LnRyLnN0ZXAobmV3IEJ0WyJiIl0oZS5wb3MtMSxhLGUucG9zLGEsbmV3IFppWyJpIl0odSwxLDApLHIubGVuZ3RoLCEwKSksZj1hKzIqci5sZW5ndGg7T2JqZWN0KEJ0WyJmIl0pKGguZG9jLGYpJiZoLmpvaW4oZiksbihoLnNjcm9sbEludG9WaWV3KCkpfXJldHVybiEwfXZhciBwPWNbIlNlbGVjdGlvbiJdLmZpbmRGcm9tKGUsMSksZD1wJiZwLiRmcm9tLmJsb2NrUmFuZ2UocC4kdG8pLHY9ZCYmT2JqZWN0KEJ0WyJrIl0pKGQpO3JldHVybiBudWxsIT12JiZ2Pj1lLmRlcHRoJiYobiYmbih0LnRyLmxpZnQoZCx2KS5zY3JvbGxJbnRvVmlldygpKSwhMCl9ZnVuY3Rpb24gUHModCxlKXtyZXR1cm4gZnVuY3Rpb24obixyKXt2YXIgbz1uLnNlbGVjdGlvbixpPW8uJGZyb20scz1vLiR0byxhPWkuYmxvY2tSYW5nZShzKSxjPWEmJk9iamVjdChCdFsiaSJdKShhLHQsZSk7cmV0dXJuISFjJiYociYmcihuLnRyLndyYXAoYSxjKS5zY3JvbGxJbnRvVmlldygpKSwhMCl9fWZ1bmN0aW9uIElzKHQsZSl7cmV0dXJuIGZ1bmN0aW9uKG4scil7dmFyIG89bi5zZWxlY3Rpb24saT1vLmZyb20scz1vLnRvLGE9ITE7cmV0dXJuIG4uZG9jLm5vZGVzQmV0d2VlbihpLHMsKGZ1bmN0aW9uKHIsbyl7aWYoYSlyZXR1cm4hMTtpZihyLmlzVGV4dGJsb2NrJiYhci5oYXNNYXJrdXAodCxlKSlpZihyLnR5cGU9PXQpYT0hMDtlbHNle3ZhciBpPW4uZG9jLnJlc29sdmUobykscz1pLmluZGV4KCk7YT1pLnBhcmVudC5jYW5SZXBsYWNlV2l0aChzLHMrMSx0KX19KSksISFhJiYociYmcihuLnRyLnNldEJsb2NrVHlwZShpLHMsdCxlKS5zY3JvbGxJbnRvVmlldygpKSwhMCl9fWZ1bmN0aW9uIEJzKHQsZSxuKXtmb3IodmFyIHI9ZnVuY3Rpb24ocil7dmFyIG89ZVtyXSxpPW8uJGZyb20scz1vLiR0byxhPTA9PWkuZGVwdGgmJnQudHlwZS5hbGxvd3NNYXJrVHlwZShuKTtpZih0Lm5vZGVzQmV0d2VlbihpLnBvcyxzLnBvcywoZnVuY3Rpb24odCl7aWYoYSlyZXR1cm4hMTthPXQuaW5saW5lQ29udGVudCYmdC50eXBlLmFsbG93c01hcmtUeXBlKG4pfSkpLGEpcmV0dXJue3Y6ITB9fSxvPTA7bzxlLmxlbmd0aDtvKyspe3ZhciBpPXIobyk7aWYoaSlyZXR1cm4gaS52fXJldHVybiExfWZ1bmN0aW9uIF9zKHQsZSl7cmV0dXJuIGZ1bmN0aW9uKG4scil7dmFyIG89bi5zZWxlY3Rpb24saT1vLmVtcHR5LHM9by4kY3Vyc29yLGE9by5yYW5nZXM7aWYoaSYmIXN8fCFCcyhuLmRvYyxhLHQpKXJldHVybiExO2lmKHIpaWYocyl0LmlzSW5TZXQobi5zdG9yZWRNYXJrc3x8cy5tYXJrcygpKT9yKG4udHIucmVtb3ZlU3RvcmVkTWFyayh0KSk6cihuLnRyLmFkZFN0b3JlZE1hcmsodC5jcmVhdGUoZSkpKTtlbHNle2Zvcih2YXIgYz0hMSx1PW4udHIsbD0wOyFjJiZsPGEubGVuZ3RoO2wrKyl7dmFyIGg9YVtsXSxmPWguJGZyb20scD1oLiR0bztjPW4uZG9jLnJhbmdlSGFzTWFyayhmLnBvcyxwLnBvcyx0KX1mb3IodmFyIGQ9MDtkPGEubGVuZ3RoO2QrKyl7dmFyIHY9YVtkXSxtPXYuJGZyb20sZz12LiR0bztjP3UucmVtb3ZlTWFyayhtLnBvcyxnLnBvcyx0KTp1LmFkZE1hcmsobS5wb3MsZy5wb3MsdC5jcmVhdGUoZSkpfXIodS5zY3JvbGxJbnRvVmlldygpKX1yZXR1cm4hMH19ZnVuY3Rpb24gRnMoKXt2YXIgdD1bXSxlPWFyZ3VtZW50cy5sZW5ndGg7d2hpbGUoZS0tKXRbZV09YXJndW1lbnRzW2VdO3JldHVybiBmdW5jdGlvbihlLG4scil7Zm9yKHZhciBvPTA7bzx0Lmxlbmd0aDtvKyspaWYodFtvXShlLG4scikpcmV0dXJuITA7cmV0dXJuITF9fXZhciBqcz1Gcyhtcyxncyx3cyksJHM9RnMobXMseHMsa3MpLFZzPXtFbnRlcjpGcyhPcyxUcyxBcyxFcyksIk1vZC1FbnRlciI6TnMsQmFja3NwYWNlOmpzLCJNb2QtQmFja3NwYWNlIjpqcyxEZWxldGU6JHMsIk1vZC1EZWxldGUiOiRzLCJNb2QtYSI6RHN9LExzPXsiQ3RybC1oIjpWc1siQmFja3NwYWNlIl0sIkFsdC1CYWNrc3BhY2UiOlZzWyJNb2QtQmFja3NwYWNlIl0sIkN0cmwtZCI6VnNbIkRlbGV0ZSJdLCJDdHJsLUFsdC1CYWNrc3BhY2UiOlZzWyJNb2QtRGVsZXRlIl0sIkFsdC1EZWxldGUiOlZzWyJNb2QtRGVsZXRlIl0sIkFsdC1kIjpWc1siTW9kLURlbGV0ZSJdfTtmb3IodmFyIHFzIGluIFZzKUxzW3FzXT1Wc1txc107dmFyIEpzPSJ1bmRlZmluZWQiIT10eXBlb2YgbmF2aWdhdG9yPy9NYWMvLnRlc3QobmF2aWdhdG9yLnBsYXRmb3JtKToidW5kZWZpbmVkIiE9dHlwZW9mIG9zJiYiZGFyd2luIj09b3MucGxhdGZvcm0oKSxXcz1Kcz9MczpWcyxIcz1mdW5jdGlvbih0LGUpe3RoaXMubWF0Y2g9dCx0aGlzLmhhbmRsZXI9InN0cmluZyI9PXR5cGVvZiBlP0tzKGUpOmV9O2Z1bmN0aW9uIEtzKHQpe3JldHVybiBmdW5jdGlvbihlLG4scixvKXt2YXIgaT10O2lmKG5bMV0pe3ZhciBzPW5bMF0ubGFzdEluZGV4T2YoblsxXSk7aSs9blswXS5zbGljZShzK25bMV0ubGVuZ3RoKSxyKz1zO3ZhciBhPXItbzthPjAmJihpPW5bMF0uc2xpY2Uocy1hLHMpK2kscj1vKX1yZXR1cm4gZS50ci5pbnNlcnRUZXh0KGkscixvKX19dmFyIFVzPTUwMDtmdW5jdGlvbiBHcyh0KXt2YXIgZT10LnJ1bGVzLG49bmV3IGNbIlBsdWdpbiJdKHtzdGF0ZTp7aW5pdDpmdW5jdGlvbigpe3JldHVybiBudWxsfSxhcHBseTpmdW5jdGlvbih0LGUpe3ZhciBuPXQuZ2V0TWV0YSh0aGlzKTtyZXR1cm4gbnx8KHQuc2VsZWN0aW9uU2V0fHx0LmRvY0NoYW5nZWQ/bnVsbDplKX19LHByb3BzOntoYW5kbGVUZXh0SW5wdXQ6ZnVuY3Rpb24odCxyLG8saSl7cmV0dXJuIFhzKHQscixvLGksZSxuKX0saGFuZGxlRE9NRXZlbnRzOntjb21wb3NpdGlvbmVuZDpmdW5jdGlvbih0KXtzZXRUaW1lb3V0KChmdW5jdGlvbigpe3ZhciByPXQuc3RhdGUuc2VsZWN0aW9uLG89ci4kY3Vyc29yO28mJlhzKHQsby5wb3Msby5wb3MsIiIsZSxuKX0pKX19fSxpc0lucHV0UnVsZXM6ITB9KTtyZXR1cm4gbn1mdW5jdGlvbiBYcyh0LGUsbixyLG8saSl7aWYodC5jb21wb3NpbmcpcmV0dXJuITE7dmFyIHM9dC5zdGF0ZSxhPXMuZG9jLnJlc29sdmUoZSk7aWYoYS5wYXJlbnQudHlwZS5zcGVjLmNvZGUpcmV0dXJuITE7Zm9yKHZhciBjPWEucGFyZW50LnRleHRCZXR3ZWVuKE1hdGgubWF4KDAsYS5wYXJlbnRPZmZzZXQtVXMpLGEucGFyZW50T2Zmc2V0LG51bGwsIu+/vCIpK3IsdT0wO3U8by5sZW5ndGg7dSsrKXt2YXIgbD1vW3VdLm1hdGNoLmV4ZWMoYyksaD1sJiZvW3VdLmhhbmRsZXIocyxsLGUtKGxbMF0ubGVuZ3RoLXIubGVuZ3RoKSxuKTtpZihoKXJldHVybiB0LmRpc3BhdGNoKGguc2V0TWV0YShpLHt0cmFuc2Zvcm06aCxmcm9tOmUsdG86bix0ZXh0OnJ9KSksITB9cmV0dXJuITF9ZnVuY3Rpb24gWXModCxlKXtmb3IodmFyIG49dC5wbHVnaW5zLHI9MDtyPG4ubGVuZ3RoO3IrKyl7dmFyIG89bltyXSxpPXZvaWQgMDtpZihvLnNwZWMuaXNJbnB1dFJ1bGVzJiYoaT1vLmdldFN0YXRlKHQpKSl7aWYoZSl7Zm9yKHZhciBzPXQudHIsYT1pLnRyYW5zZm9ybSxjPWEuc3RlcHMubGVuZ3RoLTE7Yz49MDtjLS0pcy5zdGVwKGEuc3RlcHNbY10uaW52ZXJ0KGEuZG9jc1tjXSkpO3ZhciB1PXMuZG9jLnJlc29sdmUoaS5mcm9tKS5tYXJrcygpO2Uocy5yZXBsYWNlV2l0aChpLmZyb20saS50byx0LnNjaGVtYS50ZXh0KGkudGV4dCx1KSkpfXJldHVybiEwfX1yZXR1cm4hMX1uZXcgSHMoLy0tJC8sIuKAlCIpLG5ldyBIcygvXC5cLlwuJC8sIuKApiIpLG5ldyBIcygvKD86XnxbXHNce1xbXChcPCciXHUyMDE4XHUyMDFDXSkoIikkLywi4oCcIiksbmV3IEhzKC8iJC8sIuKAnSIpLG5ldyBIcygvKD86XnxbXHNce1xbXChcPCciXHUyMDE4XHUyMDFDXSkoJykkLywi4oCYIiksbmV3IEhzKC8nJC8sIuKAmSIpO2Z1bmN0aW9uIFpzKHQsZSxuLHIpe3JldHVybiBuZXcgSHModCwoZnVuY3Rpb24odCxvLGkscyl7dmFyIGE9biBpbnN0YW5jZW9mIEZ1bmN0aW9uP24obyk6bixjPXQudHIuZGVsZXRlKGkscyksdT1jLmRvYy5yZXNvbHZlKGkpLGw9dS5ibG9ja1JhbmdlKCksaD1sJiZPYmplY3QoQnRbImkiXSkobCxlLGEpO2lmKCFoKXJldHVybiBudWxsO2Mud3JhcChsLGgpO3ZhciBmPWMuZG9jLnJlc29sdmUoaS0xKS5ub2RlQmVmb3JlO3JldHVybiBmJiZmLnR5cGU9PWUmJk9iamVjdChCdFsiZiJdKShjLmRvYyxpLTEpJiYoIXJ8fHIobyxmKSkmJmMuam9pbihpLTEpLGN9KSl9ZnVuY3Rpb24gUXModCxlLG4pe3JldHVybiBuZXcgSHModCwoZnVuY3Rpb24odCxyLG8saSl7dmFyIHM9dC5kb2MucmVzb2x2ZShvKSxhPW4gaW5zdGFuY2VvZiBGdW5jdGlvbj9uKHIpOm47cmV0dXJuIHMubm9kZSgtMSkuY2FuUmVwbGFjZVdpdGgocy5pbmRleCgtMSkscy5pbmRleEFmdGVyKC0xKSxlKT90LnRyLmRlbGV0ZShvLGkpLnNldEJsb2NrVHlwZShvLG8sZSxhKTpudWxsfSkpfXZhciB0YT1uKCJlZmRmIik7Ci8qIQogICAgKiB0aXB0YXAtdXRpbHMgdjEuOS4wCiAgICAqIChjKSAyMDIwIFNjcnVtcHkgVUcgKGxpbWl0ZWQgbGlhYmlsaXR5KQogICAgKiBAbGljZW5zZSBNSVQKICAgICovZnVuY3Rpb24gZWEodCxlLG4pe3JldHVybiBlIGluIHQ/T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsZSx7dmFsdWU6bixlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMCx3cml0YWJsZTohMH0pOnRbZV09bix0fWZ1bmN0aW9uIG5hKHQsZSl7dmFyIG49T2JqZWN0LmtleXModCk7aWYoT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyl7dmFyIHI9T2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyh0KTtlJiYocj1yLmZpbHRlcigoZnVuY3Rpb24oZSl7cmV0dXJuIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodCxlKS5lbnVtZXJhYmxlfSkpKSxuLnB1c2guYXBwbHkobixyKX1yZXR1cm4gbn1mdW5jdGlvbiByYSh0KXtmb3IodmFyIGU9MTtlPGFyZ3VtZW50cy5sZW5ndGg7ZSsrKXt2YXIgbj1udWxsIT1hcmd1bWVudHNbZV0/YXJndW1lbnRzW2VdOnt9O2UlMj9uYShPYmplY3QobiksITApLmZvckVhY2goKGZ1bmN0aW9uKGUpe2VhKHQsZSxuW2VdKX0pKTpPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycz9PYmplY3QuZGVmaW5lUHJvcGVydGllcyh0LE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzKG4pKTpuYShPYmplY3QobikpLmZvckVhY2goKGZ1bmN0aW9uKGUpe09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LGUsT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihuLGUpKX0pKX1yZXR1cm4gdH1mdW5jdGlvbiBvYSh0KXtyZXR1cm4gaWEodCl8fHNhKHQpfHxhYSh0KXx8dWEoKX1mdW5jdGlvbiBpYSh0KXtpZihBcnJheS5pc0FycmF5KHQpKXJldHVybiBjYSh0KX1mdW5jdGlvbiBzYSh0KXtpZigidW5kZWZpbmVkIiE9PXR5cGVvZiBTeW1ib2wmJlN5bWJvbC5pdGVyYXRvciBpbiBPYmplY3QodCkpcmV0dXJuIEFycmF5LmZyb20odCl9ZnVuY3Rpb24gYWEodCxlKXtpZih0KXtpZigic3RyaW5nIj09PXR5cGVvZiB0KXJldHVybiBjYSh0LGUpO3ZhciBuPU9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbCh0KS5zbGljZSg4LC0xKTtyZXR1cm4iT2JqZWN0Ij09PW4mJnQuY29uc3RydWN0b3ImJihuPXQuY29uc3RydWN0b3IubmFtZSksIk1hcCI9PT1ufHwiU2V0Ij09PW4/QXJyYXkuZnJvbShuKToiQXJndW1lbnRzIj09PW58fC9eKD86VWl8SSludCg/Ojh8MTZ8MzIpKD86Q2xhbXBlZCk/QXJyYXkkLy50ZXN0KG4pP2NhKHQsZSk6dm9pZCAwfX1mdW5jdGlvbiBjYSh0LGUpeyhudWxsPT1lfHxlPnQubGVuZ3RoKSYmKGU9dC5sZW5ndGgpO2Zvcih2YXIgbj0wLHI9bmV3IEFycmF5KGUpO248ZTtuKyspcltuXT10W25dO3JldHVybiByfWZ1bmN0aW9uIHVhKCl7dGhyb3cgbmV3IFR5cGVFcnJvcigiSW52YWxpZCBhdHRlbXB0IHRvIHNwcmVhZCBub24taXRlcmFibGUgaW5zdGFuY2UuXG5JbiBvcmRlciB0byBiZSBpdGVyYWJsZSwgbm9uLWFycmF5IG9iamVjdHMgbXVzdCBoYXZlIGEgW1N5bWJvbC5pdGVyYXRvcl0oKSBtZXRob2QuIil9ZnVuY3Rpb24gbGEodCxlKXt2YXIgbj10LnNlbGVjdGlvbixyPW4uZnJvbSxvPW4udG8saT1bXTt0LmRvYy5ub2Rlc0JldHdlZW4ocixvLChmdW5jdGlvbih0KXtpPVtdLmNvbmNhdChvYShpKSxvYSh0Lm1hcmtzKSl9KSk7dmFyIHM9aS5maW5kKChmdW5jdGlvbih0KXtyZXR1cm4gdC50eXBlLm5hbWU9PT1lLm5hbWV9KSk7cmV0dXJuIHM/cy5hdHRyczp7fX1mdW5jdGlvbiBoYSh0LGUpe3ZhciBuPXQuc2VsZWN0aW9uLHI9bi5mcm9tLG89bi50byxpPVtdO3QuZG9jLm5vZGVzQmV0d2VlbihyLG8sKGZ1bmN0aW9uKHQpe2k9W10uY29uY2F0KG9hKGkpLFt0XSl9KSk7dmFyIHM9aS5yZXZlcnNlKCkuZmluZCgoZnVuY3Rpb24odCl7cmV0dXJuIHQudHlwZS5uYW1lPT09ZS5uYW1lfSkpO3JldHVybiBzP3MuYXR0cnM6e319ZnVuY3Rpb24gZmEoKXt2YXIgdD1hcmd1bWVudHMubGVuZ3RoPjAmJnZvaWQgMCE9PWFyZ3VtZW50c1swXT9hcmd1bWVudHNbMF06bnVsbCxlPWFyZ3VtZW50cy5sZW5ndGg+MSYmdm9pZCAwIT09YXJndW1lbnRzWzFdP2FyZ3VtZW50c1sxXTpudWxsO2lmKCF0fHwhZSlyZXR1cm4hMTt2YXIgbj10LnBhcmVudC5jaGlsZEFmdGVyKHQucGFyZW50T2Zmc2V0KTtpZighbi5ub2RlKXJldHVybiExO3ZhciByPW4ubm9kZS5tYXJrcy5maW5kKChmdW5jdGlvbih0KXtyZXR1cm4gdC50eXBlPT09ZX0pKTtpZighcilyZXR1cm4hMTt2YXIgbz10LmluZGV4KCksaT10LnN0YXJ0KCkrbi5vZmZzZXQscz1vKzEsYT1pK24ubm9kZS5ub2RlU2l6ZTt3aGlsZShvPjAmJnIuaXNJblNldCh0LnBhcmVudC5jaGlsZChvLTEpLm1hcmtzKSlvLT0xLGktPXQucGFyZW50LmNoaWxkKG8pLm5vZGVTaXplO3doaWxlKHM8dC5wYXJlbnQuY2hpbGRDb3VudCYmci5pc0luU2V0KHQucGFyZW50LmNoaWxkKHMpLm1hcmtzKSlhKz10LnBhcmVudC5jaGlsZChzKS5ub2RlU2l6ZSxzKz0xO3JldHVybntmcm9tOmksdG86YX19ZnVuY3Rpb24gcGEodCxlKXt2YXIgbj10LnNlbGVjdGlvbixyPW4uZnJvbSxvPW4uJGZyb20saT1uLnRvLHM9bi5lbXB0eTtyZXR1cm4gcz8hIWUuaXNJblNldCh0LnN0b3JlZE1hcmtzfHxvLm1hcmtzKCkpOiEhdC5kb2MucmFuZ2VIYXNNYXJrKHIsaSxlKX1mdW5jdGlvbiBkYSh0LGUpe3ZhciBuPWFyZ3VtZW50cy5sZW5ndGg+MiYmdm9pZCAwIT09YXJndW1lbnRzWzJdP2FyZ3VtZW50c1syXTp7fSxyPWZ1bmN0aW9uKHQpe3JldHVybiB0LnR5cGU9PT1lfSxvPU9iamVjdCh0YVsiZmluZFNlbGVjdGVkTm9kZU9mVHlwZSJdKShlKSh0LnNlbGVjdGlvbil8fE9iamVjdCh0YVsiZmluZFBhcmVudE5vZGUiXSkocikodC5zZWxlY3Rpb24pO3JldHVybiBPYmplY3Qua2V5cyhuKS5sZW5ndGgmJm8/by5ub2RlLmhhc01hcmt1cChlLHJhKHt9LG8ubm9kZS5hdHRycyx7fSxuKSk6ISFvfXZhciB2YT1uKCI4YmJmIiksbWE9bi5uKHZhKTtmdW5jdGlvbiBnYSh0LGUpe3JldHVybiBmdW5jdGlvbihuLHIpe3ZhciBvPW4uc2VsZWN0aW9uLGk9by4kZnJvbSxzPW8uJHRvLGE9aS5ibG9ja1JhbmdlKHMpLGM9ITEsdT1hO2lmKCFhKXJldHVybiExO2lmKGEuZGVwdGg+PTImJmkubm9kZShhLmRlcHRoLTEpLnR5cGUuY29tcGF0aWJsZUNvbnRlbnQodCkmJjA9PWEuc3RhcnRJbmRleCl7aWYoMD09aS5pbmRleChhLmRlcHRoLTEpKXJldHVybiExO3ZhciBsPW4uZG9jLnJlc29sdmUoYS5zdGFydC0yKTt1PW5ldyBaaVsiZyJdKGwsbCxhLmRlcHRoKSxhLmVuZEluZGV4PGEucGFyZW50LmNoaWxkQ291bnQmJihhPW5ldyBaaVsiZyJdKGksbi5kb2MucmVzb2x2ZShzLmVuZChhLmRlcHRoKSksYS5kZXB0aCkpLGM9ITB9dmFyIGg9T2JqZWN0KEJ0WyJpIl0pKHUsdCxlLGEpO3JldHVybiEhaCYmKHImJnIoeWEobi50cixhLGgsYyx0KS5zY3JvbGxJbnRvVmlldygpKSwhMCl9fWZ1bmN0aW9uIHlhKHQsZSxuLHIsbyl7Zm9yKHZhciBpPVppWyJjIl0uZW1wdHkscz1uLmxlbmd0aC0xO3M+PTA7cy0tKWk9WmlbImMiXS5mcm9tKG5bc10udHlwZS5jcmVhdGUobltzXS5hdHRycyxpKSk7dC5zdGVwKG5ldyBCdFsiYiJdKGUuc3RhcnQtKHI/MjowKSxlLmVuZCxlLnN0YXJ0LGUuZW5kLG5ldyBaaVsiaSJdKGksMCwwKSxuLmxlbmd0aCwhMCkpO2Zvcih2YXIgYT0wLGM9MDtjPG4ubGVuZ3RoO2MrKyluW2NdLnR5cGU9PW8mJihhPWMrMSk7Zm9yKHZhciB1PW4ubGVuZ3RoLWEsbD1lLnN0YXJ0K24ubGVuZ3RoLShyPzI6MCksaD1lLnBhcmVudCxmPWUuc3RhcnRJbmRleCxwPWUuZW5kSW5kZXgsZD0hMDtmPHA7ZisrLGQ9ITEpIWQmJk9iamVjdChCdFsiZyJdKSh0LmRvYyxsLHUpJiYodC5zcGxpdChsLHUpLGwrPTIqdSksbCs9aC5jaGlsZChmKS5ub2RlU2l6ZTtyZXR1cm4gdH1mdW5jdGlvbiB3YSh0KXtyZXR1cm4gZnVuY3Rpb24oZSxuKXt2YXIgcj1lLnNlbGVjdGlvbixvPXIuJGZyb20saT1yLiR0byxzPXIubm9kZTtpZihzJiZzLmlzQmxvY2t8fG8uZGVwdGg8Mnx8IW8uc2FtZVBhcmVudChpKSlyZXR1cm4hMTt2YXIgYT1vLm5vZGUoLTEpO2lmKGEudHlwZSE9dClyZXR1cm4hMTtpZigwPT1vLnBhcmVudC5jb250ZW50LnNpemUpe2lmKDI9PW8uZGVwdGh8fG8ubm9kZSgtMykudHlwZSE9dHx8by5pbmRleCgtMikhPW8ubm9kZSgtMikuY2hpbGRDb3VudC0xKXJldHVybiExO2lmKG4pe2Zvcih2YXIgYz1aaVsiYyJdLmVtcHR5LHU9by5pbmRleCgtMSk+MCxsPW8uZGVwdGgtKHU/MToyKTtsPj1vLmRlcHRoLTM7bC0tKWM9WmlbImMiXS5mcm9tKG8ubm9kZShsKS5jb3B5KGMpKTtjPWMuYXBwZW5kKFppWyJjIl0uZnJvbSh0LmNyZWF0ZUFuZEZpbGwoKSkpO3ZhciBoPWUudHIucmVwbGFjZShvLmJlZm9yZSh1P251bGw6LTEpLG8uYWZ0ZXIoLTMpLG5ldyBaaVsiaSJdKGMsdT8zOjIsMikpO2guc2V0U2VsZWN0aW9uKGUuc2VsZWN0aW9uLmNvbnN0cnVjdG9yLm5lYXIoaC5kb2MucmVzb2x2ZShvLnBvcysodT8zOjIpKSkpLG4oaC5zY3JvbGxJbnRvVmlldygpKX1yZXR1cm4hMH12YXIgZj1pLnBvcz09by5lbmQoKT9hLmNvbnRlbnRNYXRjaEF0KDApLmRlZmF1bHRUeXBlOm51bGwscD1lLnRyLmRlbGV0ZShvLnBvcyxpLnBvcyksZD1mJiZbbnVsbCx7dHlwZTpmfV07cmV0dXJuISFPYmplY3QoQnRbImciXSkocC5kb2Msby5wb3MsMixkKSYmKG4mJm4ocC5zcGxpdChvLnBvcywyLGQpLnNjcm9sbEludG9WaWV3KCkpLCEwKX19ZnVuY3Rpb24gYmEodCl7cmV0dXJuIGZ1bmN0aW9uKGUsbil7dmFyIHI9ZS5zZWxlY3Rpb24sbz1yLiRmcm9tLGk9ci4kdG8scz1vLmJsb2NrUmFuZ2UoaSwoZnVuY3Rpb24oZSl7cmV0dXJuIGUuY2hpbGRDb3VudCYmZS5maXJzdENoaWxkLnR5cGU9PXR9KSk7cmV0dXJuISFzJiYoIW58fChvLm5vZGUocy5kZXB0aC0xKS50eXBlPT10P3hhKGUsbix0LHMpOmthKGUsbixzKSkpfX1mdW5jdGlvbiB4YSh0LGUsbixyKXt2YXIgbz10LnRyLGk9ci5lbmQscz1yLiR0by5lbmQoci5kZXB0aCk7cmV0dXJuIGk8cyYmKG8uc3RlcChuZXcgQnRbImIiXShpLTEscyxpLHMsbmV3IFppWyJpIl0oWmlbImMiXS5mcm9tKG4uY3JlYXRlKG51bGwsci5wYXJlbnQuY29weSgpKSksMSwwKSwxLCEwKSkscj1uZXcgWmlbImciXShvLmRvYy5yZXNvbHZlKHIuJGZyb20ucG9zKSxvLmRvYy5yZXNvbHZlKHMpLHIuZGVwdGgpKSxlKG8ubGlmdChyLE9iamVjdChCdFsiayJdKShyKSkuc2Nyb2xsSW50b1ZpZXcoKSksITB9ZnVuY3Rpb24ga2EodCxlLG4pe2Zvcih2YXIgcj10LnRyLG89bi5wYXJlbnQsaT1uLmVuZCxzPW4uZW5kSW5kZXgtMSxhPW4uc3RhcnRJbmRleDtzPmE7cy0tKWktPW8uY2hpbGQocykubm9kZVNpemUsci5kZWxldGUoaS0xLGkrMSk7dmFyIGM9ci5kb2MucmVzb2x2ZShuLnN0YXJ0KSx1PWMubm9kZUFmdGVyLGw9MD09bi5zdGFydEluZGV4LGg9bi5lbmRJbmRleD09by5jaGlsZENvdW50LGY9Yy5ub2RlKC0xKSxwPWMuaW5kZXgoLTEpO2lmKCFmLmNhblJlcGxhY2UocCsobD8wOjEpLHArMSx1LmNvbnRlbnQuYXBwZW5kKGg/WmlbImMiXS5lbXB0eTpaaVsiYyJdLmZyb20obykpKSlyZXR1cm4hMTt2YXIgZD1jLnBvcyx2PWQrdS5ub2RlU2l6ZTtyZXR1cm4gci5zdGVwKG5ldyBCdFsiYiJdKGQtKGw/MTowKSx2KyhoPzE6MCksZCsxLHYtMSxuZXcgWmlbImkiXSgobD9aaVsiYyJdLmVtcHR5OlppWyJjIl0uZnJvbShvLmNvcHkoWmlbImMiXS5lbXB0eSkpKS5hcHBlbmQoaD9aaVsiYyJdLmVtcHR5OlppWyJjIl0uZnJvbShvLmNvcHkoWmlbImMiXS5lbXB0eSkpKSxsPzA6MSxoPzA6MSksbD8wOjEpKSxlKHIuc2Nyb2xsSW50b1ZpZXcoKSksITB9ZnVuY3Rpb24gU2EodCl7cmV0dXJuIGZ1bmN0aW9uKGUsbil7dmFyIHI9ZS5zZWxlY3Rpb24sbz1yLiRmcm9tLGk9ci4kdG8scz1vLmJsb2NrUmFuZ2UoaSwoZnVuY3Rpb24oZSl7cmV0dXJuIGUuY2hpbGRDb3VudCYmZS5maXJzdENoaWxkLnR5cGU9PXR9KSk7aWYoIXMpcmV0dXJuITE7dmFyIGE9cy5zdGFydEluZGV4O2lmKDA9PWEpcmV0dXJuITE7dmFyIGM9cy5wYXJlbnQsdT1jLmNoaWxkKGEtMSk7aWYodS50eXBlIT10KXJldHVybiExO2lmKG4pe3ZhciBsPXUubGFzdENoaWxkJiZ1Lmxhc3RDaGlsZC50eXBlPT1jLnR5cGUsaD1aaVsiYyJdLmZyb20obD90LmNyZWF0ZSgpOm51bGwpLGY9bmV3IFppWyJpIl0oWmlbImMiXS5mcm9tKHQuY3JlYXRlKG51bGwsWmlbImMiXS5mcm9tKGMudHlwZS5jcmVhdGUobnVsbCxoKSkpKSxsPzM6MSwwKSxwPXMuc3RhcnQsZD1zLmVuZDtuKGUudHIuc3RlcChuZXcgQnRbImIiXShwLShsPzM6MSksZCxwLGQsZiwxLCEwKSkuc2Nyb2xsSW50b1ZpZXcoKSl9cmV0dXJuITB9fXZhciBDYT1uKCIxNTVjIiksT2E9bigiZWU3ZiIpO2Z1bmN0aW9uIE1hKHQpe3JldHVybiBOYSh0KXx8VGEodCl8fEFhKHQpfHxEYSgpfWZ1bmN0aW9uIE5hKHQpe2lmKEFycmF5LmlzQXJyYXkodCkpcmV0dXJuIEVhKHQpfWZ1bmN0aW9uIFRhKHQpe2lmKCJ1bmRlZmluZWQiIT09dHlwZW9mIFN5bWJvbCYmU3ltYm9sLml0ZXJhdG9yIGluIE9iamVjdCh0KSlyZXR1cm4gQXJyYXkuZnJvbSh0KX1mdW5jdGlvbiBBYSh0LGUpe2lmKHQpe2lmKCJzdHJpbmciPT09dHlwZW9mIHQpcmV0dXJuIEVhKHQsZSk7dmFyIG49T2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKHQpLnNsaWNlKDgsLTEpO3JldHVybiJPYmplY3QiPT09biYmdC5jb25zdHJ1Y3RvciYmKG49dC5jb25zdHJ1Y3Rvci5uYW1lKSwiTWFwIj09PW58fCJTZXQiPT09bj9BcnJheS5mcm9tKG4pOiJBcmd1bWVudHMiPT09bnx8L14oPzpVaXxJKW50KD86OHwxNnwzMikoPzpDbGFtcGVkKT9BcnJheSQvLnRlc3Qobik/RWEodCxlKTp2b2lkIDB9fWZ1bmN0aW9uIEVhKHQsZSl7KG51bGw9PWV8fGU+dC5sZW5ndGgpJiYoZT10Lmxlbmd0aCk7Zm9yKHZhciBuPTAscj1uZXcgQXJyYXkoZSk7bjxlO24rKylyW25dPXRbbl07cmV0dXJuIHJ9ZnVuY3Rpb24gRGEoKXt0aHJvdyBuZXcgVHlwZUVycm9yKCJJbnZhbGlkIGF0dGVtcHQgdG8gc3ByZWFkIG5vbi1pdGVyYWJsZSBpbnN0YW5jZS5cbkluIG9yZGVyIHRvIGJlIGl0ZXJhYmxlLCBub24tYXJyYXkgb2JqZWN0cyBtdXN0IGhhdmUgYSBbU3ltYm9sLml0ZXJhdG9yXSgpIG1ldGhvZC4iKX1mdW5jdGlvbiBSYSh0LGUsbil7dmFyIHI9W107cmV0dXJuIG4uZG9jLm5vZGVzQmV0d2Vlbih0LGUsKGZ1bmN0aW9uKHQsZSl7cj1bXS5jb25jYXQoTWEociksTWEodC5tYXJrcy5tYXAoKGZ1bmN0aW9uKG4pe3JldHVybntzdGFydDplLGVuZDplK3Qubm9kZVNpemUsbWFyazpufX0pKSkpfSkpLHJ9ZnVuY3Rpb24gemEodCxlLG4pe3JldHVybiBuZXcgSHModCwoZnVuY3Rpb24odCxyLG8saSl7dmFyIHM9biBpbnN0YW5jZW9mIEZ1bmN0aW9uP24ocik6bixhPXQudHIsYz1yLmxlbmd0aC0xLHU9aSxsPW87aWYocltjXSl7dmFyIGg9bytyWzBdLmluZGV4T2YocltjLTFdKSxmPWgrcltjLTFdLmxlbmd0aC0xLHA9aCtyW2MtMV0ubGFzdEluZGV4T2YocltjXSksZD1wK3JbY10ubGVuZ3RoLHY9UmEobyxpLHQpLmZpbHRlcigoZnVuY3Rpb24odCl7dmFyIG49dC5tYXJrLnR5cGUuZXhjbHVkZWQ7cmV0dXJuIG4uZmluZCgoZnVuY3Rpb24odCl7cmV0dXJuIHQubmFtZT09PWUubmFtZX0pKX0pKS5maWx0ZXIoKGZ1bmN0aW9uKHQpe3JldHVybiB0LmVuZD5ofSkpO2lmKHYubGVuZ3RoKXJldHVybiExO2Q8ZiYmYS5kZWxldGUoZCxmKSxwPmgmJmEuZGVsZXRlKGgscCksbD1oLHU9bCtyW2NdLmxlbmd0aH1yZXR1cm4gYS5hZGRNYXJrKGwsdSxlLmNyZWF0ZShzKSksYS5yZW1vdmVTdG9yZWRNYXJrKGUpLGF9KSl9ZnVuY3Rpb24gUGEodCxlLG4pe3ZhciByPWZ1bmN0aW9uIHIobyl7dmFyIGk9W107cmV0dXJuIG8uZm9yRWFjaCgoZnVuY3Rpb24obyl7aWYoby5pc1RleHQpe3ZhciBzLGE9by50ZXh0LGM9MDtkb3tpZihzPXQuZXhlYyhhKSxzKXt2YXIgdT1zLmluZGV4LGw9dStzWzBdLmxlbmd0aCxoPW4gaW5zdGFuY2VvZiBGdW5jdGlvbj9uKHNbMF0pOm47dT4wJiZpLnB1c2goby5jdXQoYyx1KSksaS5wdXNoKG8uY3V0KHUsbCkubWFyayhlLmNyZWF0ZShoKS5hZGRUb1NldChvLm1hcmtzKSkpLGM9bH19d2hpbGUocyk7YzxhLmxlbmd0aCYmaS5wdXNoKG8uY3V0KGMpKX1lbHNlIGkucHVzaChvLmNvcHkocihvLmNvbnRlbnQpKSl9KSksQ2FbIkZyYWdtZW50Il0uZnJvbUFycmF5KGkpfTtyZXR1cm4gbmV3IGNbIlBsdWdpbiJdKHtwcm9wczp7dHJhbnNmb3JtUGFzdGVkOmZ1bmN0aW9uKHQpe3JldHVybiBuZXcgQ2FbIlNsaWNlIl0ocih0LmNvbnRlbnQpLHQub3BlblN0YXJ0LHQub3BlbkVuZCl9fX0pfWZ1bmN0aW9uIElhKHQsZSxuKXt2YXIgcj1mdW5jdGlvbiByKG8saSl7dmFyIHM9W107cmV0dXJuIG8uZm9yRWFjaCgoZnVuY3Rpb24obyl7aWYoby5pc1RleHQpe3ZhciBhLGM9by50ZXh0LHU9by5tYXJrcyxsPTAsaD0hIXUuZmlsdGVyKChmdW5jdGlvbih0KXtyZXR1cm4ibGluayI9PT10LnR5cGUubmFtZX0pKVswXTt3aGlsZSghaCYmbnVsbCE9PShhPXQuZXhlYyhjKSkpaWYoaS50eXBlLmFsbG93c01hcmtUeXBlKGUpJiZhWzFdKXt2YXIgZj1hLmluZGV4LHA9ZithWzBdLmxlbmd0aCxkPWYrYVswXS5pbmRleE9mKGFbMV0pLHY9ZCthWzFdLmxlbmd0aCxtPW4gaW5zdGFuY2VvZiBGdW5jdGlvbj9uKGEpOm47Zj4wJiZzLnB1c2goby5jdXQobCxmKSkscy5wdXNoKG8uY3V0KGQsdikubWFyayhlLmNyZWF0ZShtKS5hZGRUb1NldChvLm1hcmtzKSkpLGw9cH1sPGMubGVuZ3RoJiZzLnB1c2goby5jdXQobCkpfWVsc2Ugcy5wdXNoKG8uY29weShyKG8uY29udGVudCxvKSkpfSkpLENhWyJGcmFnbWVudCJdLmZyb21BcnJheShzKX07cmV0dXJuIG5ldyBjWyJQbHVnaW4iXSh7cHJvcHM6e3RyYW5zZm9ybVBhc3RlZDpmdW5jdGlvbih0KXtyZXR1cm4gbmV3IENhWyJTbGljZSJdKHIodC5jb250ZW50KSx0Lm9wZW5TdGFydCx0Lm9wZW5FbmQpfX19KX1mdW5jdGlvbiBCYSh0KXtyZXR1cm4gZnVuY3Rpb24oZSxuKXt2YXIgcj1lLnRyLG89ZS5zZWxlY3Rpb24saT1vLmZyb20scz1vLnRvLGE9by4kZnJvbSxjPW8uZW1wdHk7aWYoYyl7dmFyIHU9ZmEoYSx0KTtpPXUuZnJvbSxzPXUudG99cmV0dXJuIHIucmVtb3ZlTWFyayhpLHMsdCksbihyKX19ZnVuY3Rpb24gX2EodCxlKXt2YXIgbj1hcmd1bWVudHMubGVuZ3RoPjImJnZvaWQgMCE9PWFyZ3VtZW50c1syXT9hcmd1bWVudHNbMl06MSxyPWFyZ3VtZW50cy5sZW5ndGg+Mz9hcmd1bWVudHNbM106dm9pZCAwLG89dC5yZXNvbHZlKGUpLGk9by5kZXB0aC1uLHM9ciYmcltyLmxlbmd0aC0xXXx8by5wYXJlbnQ7aWYoaTwwfHxvLnBhcmVudC50eXBlLnNwZWMuaXNvbGF0aW5nfHwhby5wYXJlbnQuY2FuUmVwbGFjZShvLmluZGV4KCksby5wYXJlbnQuY2hpbGRDb3VudCl8fCFzLnR5cGUudmFsaWRDb250ZW50KG8ucGFyZW50LmNvbnRlbnQuY3V0QnlJbmRleChvLmluZGV4KCksby5wYXJlbnQuY2hpbGRDb3VudCkpKXJldHVybiExO2Zvcih2YXIgYT1vLmRlcHRoLTEsYz1uLTI7YT5pO2EtLSxjLS0pe3ZhciB1PW8ubm9kZShhKSxsPW8uaW5kZXgoYSk7aWYodS50eXBlLnNwZWMuaXNvbGF0aW5nKXJldHVybiExO3ZhciBoPXUuY29udGVudC5jdXRCeUluZGV4KGwsdS5jaGlsZENvdW50KSxmPXImJnJbY118fHU7aWYoZiE9dSYmKGg9aC5yZXBsYWNlQ2hpbGQoMCxmLnR5cGUuY3JlYXRlKGYuYXR0cnMpKSksIXUuY2FuUmVwbGFjZShsKzEsdS5jaGlsZENvdW50KSlyZXR1cm4hMX12YXIgcD1vLmluZGV4QWZ0ZXIoaSksZD1yJiZyWzBdO3JldHVybiBvLm5vZGUoaSkuY2FuUmVwbGFjZVdpdGgocCxwLGQ/ZC50eXBlOm8ubm9kZShpKzEpLnR5cGUpfWZ1bmN0aW9uIEZhKHQpe3JldHVybiBmdW5jdGlvbihlLG4pe3ZhciByPWUuc2VsZWN0aW9uLG89ci4kZnJvbSxpPXIuJHRvLHM9ci5ub2RlO2lmKHMmJnMuaXNCbG9ja3x8by5kZXB0aDwyfHwhby5zYW1lUGFyZW50KGkpKXJldHVybiExO3ZhciBhPW8ubm9kZSgtMSk7aWYoYS50eXBlIT10KXJldHVybiExO2lmKDA9PW8ucGFyZW50LmNvbnRlbnQuc2l6ZSl7aWYoMj09by5kZXB0aHx8by5ub2RlKC0zKS50eXBlIT10fHxvLmluZGV4KC0yKSE9by5ub2RlKC0yKS5jaGlsZENvdW50LTEpcmV0dXJuITE7aWYobil7Zm9yKHZhciBjPUNhWyJGcmFnbWVudCJdLmVtcHR5LHU9by5pbmRleCgtMSk+MCxsPW8uZGVwdGgtKHU/MToyKTtsPj1vLmRlcHRoLTM7bC0tKWM9Q2FbIkZyYWdtZW50Il0uZnJvbShvLm5vZGUobCkuY29weShjKSk7Yz1jLmFwcGVuZChDYVsiRnJhZ21lbnQiXS5mcm9tKHQuY3JlYXRlQW5kRmlsbCgpKSk7dmFyIGg9ZS50ci5yZXBsYWNlKG8uYmVmb3JlKHU/bnVsbDotMSksby5hZnRlcigtMyksbmV3IENhWyJTbGljZSJdKGMsdT8zOjIsMikpO2guc2V0U2VsZWN0aW9uKGUuc2VsZWN0aW9uLmNvbnN0cnVjdG9yLm5lYXIoaC5kb2MucmVzb2x2ZShvLnBvcysodT8zOjIpKSkpLG4oaC5zY3JvbGxJbnRvVmlldygpKX1yZXR1cm4hMH12YXIgZj1pLnBvcz09by5lbmQoKT9hLmNvbnRlbnRNYXRjaEF0KG8uaW5kZXhBZnRlcigtMSkpLmRlZmF1bHRUeXBlOm51bGwscD1lLnRyLmRlbGV0ZShvLnBvcyxpLnBvcyksZD1mJiZbe3R5cGU6dH0se3R5cGU6Zn1dO3JldHVybiBkfHwoZD1be3R5cGU6dH0sbnVsbF0pLCEhX2EocC5kb2Msby5wb3MsMixkKSYmKG4mJm4ocC5zcGxpdChvLnBvcywyLGQpLnNjcm9sbEludG9WaWV3KCkpLCEwKX19ZnVuY3Rpb24gamEodCxlKXt2YXIgbj1hcmd1bWVudHMubGVuZ3RoPjImJnZvaWQgMCE9PWFyZ3VtZW50c1syXT9hcmd1bWVudHNbMl06e307cmV0dXJuIGZ1bmN0aW9uKHIsbyxpKXt2YXIgcz1kYShyLHQsbik7cmV0dXJuIHM/SXMoZSkocixvLGkpOklzKHQsbikocixvLGkpfX1mdW5jdGlvbiAkYSh0LGUpe3JldHVybiB0LnR5cGU9PT1lLm5vZGVzLmJ1bGxldF9saXN0fHx0LnR5cGU9PT1lLm5vZGVzLm9yZGVyZWRfbGlzdHx8dC50eXBlPT09ZS5ub2Rlcy50b2RvX2xpc3R9ZnVuY3Rpb24gVmEodCxlKXtyZXR1cm4gZnVuY3Rpb24obixyLG8pe3ZhciBpPW4uc2NoZW1hLHM9bi5zZWxlY3Rpb24sYT1zLiRmcm9tLGM9cy4kdG8sdT1hLmJsb2NrUmFuZ2UoYyk7aWYoIXUpcmV0dXJuITE7dmFyIGw9T2JqZWN0KE9hWyJmaW5kUGFyZW50Tm9kZSJdKSgoZnVuY3Rpb24odCl7cmV0dXJuICRhKHQsaSl9KSkocyk7aWYodS5kZXB0aD49MSYmbCYmdS5kZXB0aC1sLmRlcHRoPD0xKXtpZihsLm5vZGUudHlwZT09PXQpcmV0dXJuIGJhKGUpKG4scixvKTtpZigkYShsLm5vZGUsaSkmJnQudmFsaWRDb250ZW50KGwubm9kZS5jb250ZW50KSl7dmFyIGg9bi50cjtyZXR1cm4gaC5zZXROb2RlTWFya3VwKGwucG9zLHQpLHImJnIoaCksITF9fXJldHVybiBnYSh0KShuLHIsbyl9fWZ1bmN0aW9uIExhKHQpe3JldHVybiBmdW5jdGlvbihlLG4scil7dmFyIG89ZGEoZSx0KTtyZXR1cm4gbz9DcyhlLG4pOlBzKHQpKGUsbixyKX19ZnVuY3Rpb24gcWEodCxlKXtyZXR1cm4gZnVuY3Rpb24obixyKXt2YXIgbz1uLnRyLGk9bi5zZWxlY3Rpb24scz1uLmRvYyxhPWkuZnJvbSxjPWkudG8sdT1pLiRmcm9tLGw9aS5lbXB0eTtpZihsKXt2YXIgaD1mYSh1LHQpO2E9aC5mcm9tLGM9aC50b312YXIgZj1zLnJhbmdlSGFzTWFyayhhLGMsdCk7cmV0dXJuIGYmJm8ucmVtb3ZlTWFyayhhLGMsdCksby5hZGRNYXJrKGEsYyx0LmNyZWF0ZShlKSkscihvKX19Ci8qIQogICAgKiB0aXB0YXAgdjEuMjcuMAogICAgKiAoYykgMjAyMCBTY3J1bXB5IFVHIChsaW1pdGVkIGxpYWJpbGl0eSkKICAgICogQGxpY2Vuc2UgTUlUCiAgICAqL2Z1bmN0aW9uIEphKHQpe3JldHVybiBKYT0iZnVuY3Rpb24iPT09dHlwZW9mIFN5bWJvbCYmInN5bWJvbCI9PT10eXBlb2YgU3ltYm9sLml0ZXJhdG9yP2Z1bmN0aW9uKHQpe3JldHVybiB0eXBlb2YgdH06ZnVuY3Rpb24odCl7cmV0dXJuIHQmJiJmdW5jdGlvbiI9PT10eXBlb2YgU3ltYm9sJiZ0LmNvbnN0cnVjdG9yPT09U3ltYm9sJiZ0IT09U3ltYm9sLnByb3RvdHlwZT8ic3ltYm9sIjp0eXBlb2YgdH0sSmEodCl9ZnVuY3Rpb24gV2EodCxlKXtpZighKHQgaW5zdGFuY2VvZiBlKSl0aHJvdyBuZXcgVHlwZUVycm9yKCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb24iKX1mdW5jdGlvbiBIYSh0LGUpe2Zvcih2YXIgbj0wO248ZS5sZW5ndGg7bisrKXt2YXIgcj1lW25dO3IuZW51bWVyYWJsZT1yLmVudW1lcmFibGV8fCExLHIuY29uZmlndXJhYmxlPSEwLCJ2YWx1ZSJpbiByJiYoci53cml0YWJsZT0hMCksT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsci5rZXkscil9fWZ1bmN0aW9uIEthKHQsZSxuKXtyZXR1cm4gZSYmSGEodC5wcm90b3R5cGUsZSksbiYmSGEodCxuKSx0fWZ1bmN0aW9uIFVhKHQsZSxuKXtyZXR1cm4gZSBpbiB0P09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LGUse3ZhbHVlOm4sZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITAsd3JpdGFibGU6ITB9KTp0W2VdPW4sdH1mdW5jdGlvbiBHYSh0LGUpe3ZhciBuPU9iamVjdC5rZXlzKHQpO2lmKE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMpe3ZhciByPU9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHModCk7ZSYmKHI9ci5maWx0ZXIoKGZ1bmN0aW9uKGUpe3JldHVybiBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHQsZSkuZW51bWVyYWJsZX0pKSksbi5wdXNoLmFwcGx5KG4scil9cmV0dXJuIG59ZnVuY3Rpb24gWGEodCl7Zm9yKHZhciBlPTE7ZTxhcmd1bWVudHMubGVuZ3RoO2UrKyl7dmFyIG49bnVsbCE9YXJndW1lbnRzW2VdP2FyZ3VtZW50c1tlXTp7fTtlJTI/R2EoT2JqZWN0KG4pLCEwKS5mb3JFYWNoKChmdW5jdGlvbihlKXtVYSh0LGUsbltlXSl9KSk6T2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnM/T2JqZWN0LmRlZmluZVByb3BlcnRpZXModCxPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycyhuKSk6R2EoT2JqZWN0KG4pKS5mb3JFYWNoKChmdW5jdGlvbihlKXtPYmplY3QuZGVmaW5lUHJvcGVydHkodCxlLE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IobixlKSl9KSl9cmV0dXJuIHR9ZnVuY3Rpb24gWWEodCxlKXtpZigiZnVuY3Rpb24iIT09dHlwZW9mIGUmJm51bGwhPT1lKXRocm93IG5ldyBUeXBlRXJyb3IoIlN1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uIik7dC5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShlJiZlLnByb3RvdHlwZSx7Y29uc3RydWN0b3I6e3ZhbHVlOnQsd3JpdGFibGU6ITAsY29uZmlndXJhYmxlOiEwfX0pLGUmJlFhKHQsZSl9ZnVuY3Rpb24gWmEodCl7cmV0dXJuIFphPU9iamVjdC5zZXRQcm90b3R5cGVPZj9PYmplY3QuZ2V0UHJvdG90eXBlT2Y6ZnVuY3Rpb24odCl7cmV0dXJuIHQuX19wcm90b19ffHxPYmplY3QuZ2V0UHJvdG90eXBlT2YodCl9LFphKHQpfWZ1bmN0aW9uIFFhKHQsZSl7cmV0dXJuIFFhPU9iamVjdC5zZXRQcm90b3R5cGVPZnx8ZnVuY3Rpb24odCxlKXtyZXR1cm4gdC5fX3Byb3RvX189ZSx0fSxRYSh0LGUpfWZ1bmN0aW9uIHRjKCl7aWYoInVuZGVmaW5lZCI9PT10eXBlb2YgUmVmbGVjdHx8IVJlZmxlY3QuY29uc3RydWN0KXJldHVybiExO2lmKFJlZmxlY3QuY29uc3RydWN0LnNoYW0pcmV0dXJuITE7aWYoImZ1bmN0aW9uIj09PXR5cGVvZiBQcm94eSlyZXR1cm4hMDt0cnl7cmV0dXJuIERhdGUucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoUmVmbGVjdC5jb25zdHJ1Y3QoRGF0ZSxbXSwoZnVuY3Rpb24oKXt9KSkpLCEwfWNhdGNoKHQpe3JldHVybiExfX1mdW5jdGlvbiBlYyh0KXtpZih2b2lkIDA9PT10KXRocm93IG5ldyBSZWZlcmVuY2VFcnJvcigidGhpcyBoYXNuJ3QgYmVlbiBpbml0aWFsaXNlZCAtIHN1cGVyKCkgaGFzbid0IGJlZW4gY2FsbGVkIik7cmV0dXJuIHR9ZnVuY3Rpb24gbmModCxlKXtyZXR1cm4hZXx8Im9iamVjdCIhPT10eXBlb2YgZSYmImZ1bmN0aW9uIiE9PXR5cGVvZiBlP2VjKHQpOmV9ZnVuY3Rpb24gcmModCl7cmV0dXJuIGZ1bmN0aW9uKCl7dmFyIGUsbj1aYSh0KTtpZih0YygpKXt2YXIgcj1aYSh0aGlzKS5jb25zdHJ1Y3RvcjtlPVJlZmxlY3QuY29uc3RydWN0KG4sYXJndW1lbnRzLHIpfWVsc2UgZT1uLmFwcGx5KHRoaXMsYXJndW1lbnRzKTtyZXR1cm4gbmModGhpcyxlKX19ZnVuY3Rpb24gb2ModCxlKXtyZXR1cm4gYWModCl8fHVjKHQsZSl8fGxjKHQsZSl8fHBjKCl9ZnVuY3Rpb24gaWModCl7cmV0dXJuIHNjKHQpfHxjYyh0KXx8bGModCl8fGZjKCl9ZnVuY3Rpb24gc2ModCl7aWYoQXJyYXkuaXNBcnJheSh0KSlyZXR1cm4gaGModCl9ZnVuY3Rpb24gYWModCl7aWYoQXJyYXkuaXNBcnJheSh0KSlyZXR1cm4gdH1mdW5jdGlvbiBjYyh0KXtpZigidW5kZWZpbmVkIiE9PXR5cGVvZiBTeW1ib2wmJlN5bWJvbC5pdGVyYXRvciBpbiBPYmplY3QodCkpcmV0dXJuIEFycmF5LmZyb20odCl9ZnVuY3Rpb24gdWModCxlKXtpZigidW5kZWZpbmVkIiE9PXR5cGVvZiBTeW1ib2wmJlN5bWJvbC5pdGVyYXRvciBpbiBPYmplY3QodCkpe3ZhciBuPVtdLHI9ITAsbz0hMSxpPXZvaWQgMDt0cnl7Zm9yKHZhciBzLGE9dFtTeW1ib2wuaXRlcmF0b3JdKCk7IShyPShzPWEubmV4dCgpKS5kb25lKTtyPSEwKWlmKG4ucHVzaChzLnZhbHVlKSxlJiZuLmxlbmd0aD09PWUpYnJlYWt9Y2F0Y2goYyl7bz0hMCxpPWN9ZmluYWxseXt0cnl7cnx8bnVsbD09YVsicmV0dXJuIl18fGFbInJldHVybiJdKCl9ZmluYWxseXtpZihvKXRocm93IGl9fXJldHVybiBufX1mdW5jdGlvbiBsYyh0LGUpe2lmKHQpe2lmKCJzdHJpbmciPT09dHlwZW9mIHQpcmV0dXJuIGhjKHQsZSk7dmFyIG49T2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKHQpLnNsaWNlKDgsLTEpO3JldHVybiJPYmplY3QiPT09biYmdC5jb25zdHJ1Y3RvciYmKG49dC5jb25zdHJ1Y3Rvci5uYW1lKSwiTWFwIj09PW58fCJTZXQiPT09bj9BcnJheS5mcm9tKG4pOiJBcmd1bWVudHMiPT09bnx8L14oPzpVaXxJKW50KD86OHwxNnwzMikoPzpDbGFtcGVkKT9BcnJheSQvLnRlc3Qobik/aGModCxlKTp2b2lkIDB9fWZ1bmN0aW9uIGhjKHQsZSl7KG51bGw9PWV8fGU+dC5sZW5ndGgpJiYoZT10Lmxlbmd0aCk7Zm9yKHZhciBuPTAscj1uZXcgQXJyYXkoZSk7bjxlO24rKylyW25dPXRbbl07cmV0dXJuIHJ9ZnVuY3Rpb24gZmMoKXt0aHJvdyBuZXcgVHlwZUVycm9yKCJJbnZhbGlkIGF0dGVtcHQgdG8gc3ByZWFkIG5vbi1pdGVyYWJsZSBpbnN0YW5jZS5cbkluIG9yZGVyIHRvIGJlIGl0ZXJhYmxlLCBub24tYXJyYXkgb2JqZWN0cyBtdXN0IGhhdmUgYSBbU3ltYm9sLml0ZXJhdG9yXSgpIG1ldGhvZC4iKX1mdW5jdGlvbiBwYygpe3Rocm93IG5ldyBUeXBlRXJyb3IoIkludmFsaWQgYXR0ZW1wdCB0byBkZXN0cnVjdHVyZSBub24taXRlcmFibGUgaW5zdGFuY2UuXG5JbiBvcmRlciB0byBiZSBpdGVyYWJsZSwgbm9uLWFycmF5IG9iamVjdHMgbXVzdCBoYXZlIGEgW1N5bWJvbC5pdGVyYXRvcl0oKSBtZXRob2QuIil9ZnVuY3Rpb24gZGModCl7cmV0dXJuIHQucmVwbGFjZSgvKD86Xlx3fFtBLVpdfFxiXHcpL2csKGZ1bmN0aW9uKHQsZSl7cmV0dXJuIDA9PT1lP3QudG9Mb3dlckNhc2UoKTp0LnRvVXBwZXJDYXNlKCl9KSkucmVwbGFjZSgvXHMrL2csIiIpfXZhciB2Yz1mdW5jdGlvbigpe2Z1bmN0aW9uIHQoZSxuKXt2YXIgcj1uLmVkaXRvcixvPW4uZXh0ZW5zaW9uLGk9bi5wYXJlbnQscz1uLm5vZGUsYT1uLnZpZXcsYz1uLmRlY29yYXRpb25zLHU9bi5nZXRQb3M7V2EodGhpcyx0KSx0aGlzLmNvbXBvbmVudD1lLHRoaXMuZWRpdG9yPXIsdGhpcy5leHRlbnNpb249byx0aGlzLnBhcmVudD1pLHRoaXMubm9kZT1zLHRoaXMudmlldz1hLHRoaXMuZGVjb3JhdGlvbnM9Yyx0aGlzLmlzTm9kZT0hIXRoaXMubm9kZS5tYXJrcyx0aGlzLmlzTWFyaz0hdGhpcy5pc05vZGUsdGhpcy5nZXRQb3M9dGhpcy5pc01hcms/dGhpcy5nZXRNYXJrUG9zOnUsdGhpcy5jYXB0dXJlRXZlbnRzPSEwLHRoaXMuZG9tPXRoaXMuY3JlYXRlRE9NKCksdGhpcy5jb250ZW50RE9NPXRoaXMudm0uJHJlZnMuY29udGVudH1yZXR1cm4gS2EodCxbe2tleToiY3JlYXRlRE9NIix2YWx1ZTpmdW5jdGlvbigpe3ZhciB0PXRoaXMsZT1tYS5hLmV4dGVuZCh0aGlzLmNvbXBvbmVudCksbj17ZWRpdG9yOnRoaXMuZWRpdG9yLG5vZGU6dGhpcy5ub2RlLHZpZXc6dGhpcy52aWV3LGdldFBvczpmdW5jdGlvbigpe3JldHVybiB0LmdldFBvcygpfSxkZWNvcmF0aW9uczp0aGlzLmRlY29yYXRpb25zLHNlbGVjdGVkOiExLG9wdGlvbnM6dGhpcy5leHRlbnNpb24ub3B0aW9ucyx1cGRhdGVBdHRyczpmdW5jdGlvbihlKXtyZXR1cm4gdC51cGRhdGVBdHRycyhlKX19O3JldHVybiJmdW5jdGlvbiI9PT10eXBlb2YgdGhpcy5leHRlbnNpb24uc2V0U2VsZWN0aW9uJiYodGhpcy5zZXRTZWxlY3Rpb249dGhpcy5leHRlbnNpb24uc2V0U2VsZWN0aW9uKSwiZnVuY3Rpb24iPT09dHlwZW9mIHRoaXMuZXh0ZW5zaW9uLnVwZGF0ZSYmKHRoaXMudXBkYXRlPXRoaXMuZXh0ZW5zaW9uLnVwZGF0ZSksdGhpcy52bT1uZXcgZSh7cGFyZW50OnRoaXMucGFyZW50LHByb3BzRGF0YTpufSkuJG1vdW50KCksdGhpcy52bS4kZWx9fSx7a2V5OiJ1cGRhdGUiLHZhbHVlOmZ1bmN0aW9uKHQsZSl7cmV0dXJuIHQudHlwZT09PXRoaXMubm9kZS50eXBlJiYodD09PXRoaXMubm9kZSYmdGhpcy5kZWNvcmF0aW9ucz09PWV8fCh0aGlzLm5vZGU9dCx0aGlzLmRlY29yYXRpb25zPWUsdGhpcy51cGRhdGVDb21wb25lbnRQcm9wcyh7bm9kZTp0LGRlY29yYXRpb25zOmV9KSksITApfX0se2tleToidXBkYXRlQ29tcG9uZW50UHJvcHMiLHZhbHVlOmZ1bmN0aW9uKHQpe3ZhciBlPXRoaXM7aWYodGhpcy52bS5fcHJvcHMpe3ZhciBuPW1hLmEuY29uZmlnLnNpbGVudDttYS5hLmNvbmZpZy5zaWxlbnQ9ITAsT2JqZWN0LmVudHJpZXModCkuZm9yRWFjaCgoZnVuY3Rpb24odCl7dmFyIG49b2ModCwyKSxyPW5bMF0sbz1uWzFdO2Uudm0uX3Byb3BzW3JdPW99KSksbWEuYS5jb25maWcuc2lsZW50PW59fX0se2tleToidXBkYXRlQXR0cnMiLHZhbHVlOmZ1bmN0aW9uKHQpe2lmKHRoaXMudmlldy5lZGl0YWJsZSl7dmFyIGU9dGhpcy52aWV3LnN0YXRlLG49dGhpcy5ub2RlLnR5cGUscj10aGlzLmdldFBvcygpLG89WGEoe30sdGhpcy5ub2RlLmF0dHJzLHt9LHQpLGk9dGhpcy5pc01hcms/ZS50ci5yZW1vdmVNYXJrKHIuZnJvbSxyLnRvLG4pLmFkZE1hcmsoci5mcm9tLHIudG8sbi5jcmVhdGUobykpOmUudHIuc2V0Tm9kZU1hcmt1cChyLG51bGwsbyk7dGhpcy52aWV3LmRpc3BhdGNoKGkpfX19LHtrZXk6Imlnbm9yZU11dGF0aW9uIix2YWx1ZTpmdW5jdGlvbih0KXtyZXR1cm4ic2VsZWN0aW9uIiE9PXQudHlwZSYmKCF0aGlzLmNvbnRlbnRET018fCF0aGlzLmNvbnRlbnRET00uY29udGFpbnModC50YXJnZXQpKX19LHtrZXk6InN0b3BFdmVudCIsdmFsdWU6ZnVuY3Rpb24odCl7dmFyIGU9dGhpcztpZigiZnVuY3Rpb24iPT09dHlwZW9mIHRoaXMuZXh0ZW5zaW9uLnN0b3BFdmVudClyZXR1cm4gdGhpcy5leHRlbnNpb24uc3RvcEV2ZW50KHQpO3ZhciBuPSEhdGhpcy5leHRlbnNpb24uc2NoZW1hLmRyYWdnYWJsZTtpZihuJiYibW91c2Vkb3duIj09PXQudHlwZSl7dmFyIHI9dC50YXJnZXQuY2xvc2VzdCYmdC50YXJnZXQuY2xvc2VzdCgiW2RhdGEtZHJhZy1oYW5kbGVdIiksbz1yJiYodGhpcy5kb209PT1yfHx0aGlzLmRvbS5jb250YWlucyhyKSk7byYmKHRoaXMuY2FwdHVyZUV2ZW50cz0hMSxkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCJkcmFnZW5kIiwoZnVuY3Rpb24oKXtlLmNhcHR1cmVFdmVudHM9ITB9KSx7b25jZTohMH0pKX12YXIgaT0iY29weSI9PT10LnR5cGUscz0icGFzdGUiPT09dC50eXBlLGE9ImN1dCI9PT10LnR5cGUsYz10LnR5cGUuc3RhcnRzV2l0aCgiZHJhZyIpfHwiZHJvcCI9PT10LnR5cGU7cmV0dXJuIShuJiZjfHxpfHxzfHxhKSYmdGhpcy5jYXB0dXJlRXZlbnRzfX0se2tleToic2VsZWN0Tm9kZSIsdmFsdWU6ZnVuY3Rpb24oKXt0aGlzLnVwZGF0ZUNvbXBvbmVudFByb3BzKHtzZWxlY3RlZDohMH0pfX0se2tleToiZGVzZWxlY3ROb2RlIix2YWx1ZTpmdW5jdGlvbigpe3RoaXMudXBkYXRlQ29tcG9uZW50UHJvcHMoe3NlbGVjdGVkOiExfSl9fSx7a2V5OiJnZXRNYXJrUG9zIix2YWx1ZTpmdW5jdGlvbigpe3ZhciB0PXRoaXMudmlldy5wb3NBdERPTSh0aGlzLmRvbSksZT10aGlzLnZpZXcuc3RhdGUuZG9jLnJlc29sdmUodCksbj1mYShlLHRoaXMubm9kZS50eXBlKTtyZXR1cm4gbn19LHtrZXk6ImRlc3Ryb3kiLHZhbHVlOmZ1bmN0aW9uKCl7dGhpcy52bS4kZGVzdHJveSgpfX1dKSx0fSgpLG1jPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCgpe1dhKHRoaXMsdCl9cmV0dXJuIEthKHQsW3trZXk6Im9uIix2YWx1ZTpmdW5jdGlvbih0LGUpe3JldHVybiB0aGlzLl9jYWxsYmFja3M9dGhpcy5fY2FsbGJhY2tzfHx7fSx0aGlzLl9jYWxsYmFja3NbdF18fCh0aGlzLl9jYWxsYmFja3NbdF09W10pLHRoaXMuX2NhbGxiYWNrc1t0XS5wdXNoKGUpLHRoaXN9fSx7a2V5OiJlbWl0Iix2YWx1ZTpmdW5jdGlvbih0KXtmb3IodmFyIGU9dGhpcyxuPWFyZ3VtZW50cy5sZW5ndGgscj1uZXcgQXJyYXkobj4xP24tMTowKSxvPTE7bzxuO28rKylyW28tMV09YXJndW1lbnRzW29dO3RoaXMuX2NhbGxiYWNrcz10aGlzLl9jYWxsYmFja3N8fHt9O3ZhciBpPXRoaXMuX2NhbGxiYWNrc1t0XTtyZXR1cm4gaSYmaS5mb3JFYWNoKChmdW5jdGlvbih0KXtyZXR1cm4gdC5hcHBseShlLHIpfSkpLHRoaXN9fSx7a2V5OiJvZmYiLHZhbHVlOmZ1bmN0aW9uKHQsZSl7aWYoYXJndW1lbnRzLmxlbmd0aCl7dmFyIG49dGhpcy5fY2FsbGJhY2tzP3RoaXMuX2NhbGxiYWNrc1t0XTpudWxsO24mJihlP3RoaXMuX2NhbGxiYWNrc1t0XT1uLmZpbHRlcigoZnVuY3Rpb24odCl7cmV0dXJuIHQhPT1lfSkpOmRlbGV0ZSB0aGlzLl9jYWxsYmFja3NbdF0pfWVsc2UgdGhpcy5fY2FsbGJhY2tzPXt9O3JldHVybiB0aGlzfX1dKSx0fSgpLGdjPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCgpe3ZhciBlPWFyZ3VtZW50cy5sZW5ndGg+MCYmdm9pZCAwIT09YXJndW1lbnRzWzBdP2FyZ3VtZW50c1swXTp7fTtXYSh0aGlzLHQpLHRoaXMub3B0aW9ucz1YYSh7fSx0aGlzLmRlZmF1bHRPcHRpb25zLHt9LGUpfXJldHVybiBLYSh0LFt7a2V5OiJpbml0Iix2YWx1ZTpmdW5jdGlvbigpe3JldHVybiBudWxsfX0se2tleToiYmluZEVkaXRvciIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgdD1hcmd1bWVudHMubGVuZ3RoPjAmJnZvaWQgMCE9PWFyZ3VtZW50c1swXT9hcmd1bWVudHNbMF06bnVsbDt0aGlzLmVkaXRvcj10fX0se2tleToiaW5wdXRSdWxlcyIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm5bXX19LHtrZXk6InBhc3RlUnVsZXMiLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuW119fSx7a2V5OiJrZXlzIix2YWx1ZTpmdW5jdGlvbigpe3JldHVybnt9fX0se2tleToibmFtZSIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIG51bGx9fSx7a2V5OiJ0eXBlIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4iZXh0ZW5zaW9uIn19LHtrZXk6ImRlZmF1bHRPcHRpb25zIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm57fX19LHtrZXk6InBsdWdpbnMiLGdldDpmdW5jdGlvbigpe3JldHVybltdfX1dKSx0fSgpLHljPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCgpe3ZhciBlPWFyZ3VtZW50cy5sZW5ndGg+MCYmdm9pZCAwIT09YXJndW1lbnRzWzBdP2FyZ3VtZW50c1swXTpbXSxuPWFyZ3VtZW50cy5sZW5ndGg+MT9hcmd1bWVudHNbMV06dm9pZCAwO1dhKHRoaXMsdCksZS5mb3JFYWNoKChmdW5jdGlvbih0KXt0LmJpbmRFZGl0b3IobiksdC5pbml0KCl9KSksdGhpcy5leHRlbnNpb25zPWV9cmV0dXJuIEthKHQsW3trZXk6ImtleW1hcHMiLHZhbHVlOmZ1bmN0aW9uKHQpe3ZhciBlPXQuc2NoZW1hLG49dGhpcy5leHRlbnNpb25zLmZpbHRlcigoZnVuY3Rpb24odCl7cmV0dXJuWyJleHRlbnNpb24iXS5pbmNsdWRlcyh0LnR5cGUpfSkpLmZpbHRlcigoZnVuY3Rpb24odCl7cmV0dXJuIHQua2V5c30pKS5tYXAoKGZ1bmN0aW9uKHQpe3JldHVybiB0LmtleXMoe3NjaGVtYTplfSl9KSkscj10aGlzLmV4dGVuc2lvbnMuZmlsdGVyKChmdW5jdGlvbih0KXtyZXR1cm5bIm5vZGUiLCJtYXJrIl0uaW5jbHVkZXModC50eXBlKX0pKS5maWx0ZXIoKGZ1bmN0aW9uKHQpe3JldHVybiB0LmtleXN9KSkubWFwKChmdW5jdGlvbih0KXtyZXR1cm4gdC5rZXlzKHt0eXBlOmVbIiIuY29uY2F0KHQudHlwZSwicyIpXVt0Lm5hbWVdLHNjaGVtYTplfSl9KSk7cmV0dXJuW10uY29uY2F0KGljKG4pLGljKHIpKS5tYXAoKGZ1bmN0aW9uKHQpe3JldHVybiBkcyh0KX0pKX19LHtrZXk6ImlucHV0UnVsZXMiLHZhbHVlOmZ1bmN0aW9uKHQpe3ZhciBlPXQuc2NoZW1hLG49dC5leGNsdWRlZEV4dGVuc2lvbnM7aWYoIShuIGluc3RhbmNlb2YgQXJyYXkpJiZuKXJldHVybltdO3ZhciByPW4gaW5zdGFuY2VvZiBBcnJheT90aGlzLmV4dGVuc2lvbnMuZmlsdGVyKChmdW5jdGlvbih0KXtyZXR1cm4hbi5pbmNsdWRlcyh0Lm5hbWUpfSkpOnRoaXMuZXh0ZW5zaW9ucyxvPXIuZmlsdGVyKChmdW5jdGlvbih0KXtyZXR1cm5bImV4dGVuc2lvbiJdLmluY2x1ZGVzKHQudHlwZSl9KSkuZmlsdGVyKChmdW5jdGlvbih0KXtyZXR1cm4gdC5pbnB1dFJ1bGVzfSkpLm1hcCgoZnVuY3Rpb24odCl7cmV0dXJuIHQuaW5wdXRSdWxlcyh7c2NoZW1hOmV9KX0pKSxpPXIuZmlsdGVyKChmdW5jdGlvbih0KXtyZXR1cm5bIm5vZGUiLCJtYXJrIl0uaW5jbHVkZXModC50eXBlKX0pKS5maWx0ZXIoKGZ1bmN0aW9uKHQpe3JldHVybiB0LmlucHV0UnVsZXN9KSkubWFwKChmdW5jdGlvbih0KXtyZXR1cm4gdC5pbnB1dFJ1bGVzKHt0eXBlOmVbIiIuY29uY2F0KHQudHlwZSwicyIpXVt0Lm5hbWVdLHNjaGVtYTplfSl9KSk7cmV0dXJuW10uY29uY2F0KGljKG8pLGljKGkpKS5yZWR1Y2UoKGZ1bmN0aW9uKHQsZSl7cmV0dXJuW10uY29uY2F0KGljKHQpLGljKGUpKX0pLFtdKX19LHtrZXk6InBhc3RlUnVsZXMiLHZhbHVlOmZ1bmN0aW9uKHQpe3ZhciBlPXQuc2NoZW1hLG49dC5leGNsdWRlZEV4dGVuc2lvbnM7aWYoIShuIGluc3RhbmNlb2YgQXJyYXkpJiZuKXJldHVybltdO3ZhciByPW4gaW5zdGFuY2VvZiBBcnJheT90aGlzLmV4dGVuc2lvbnMuZmlsdGVyKChmdW5jdGlvbih0KXtyZXR1cm4hbi5pbmNsdWRlcyh0Lm5hbWUpfSkpOnRoaXMuZXh0ZW5zaW9ucyxvPXIuZmlsdGVyKChmdW5jdGlvbih0KXtyZXR1cm5bImV4dGVuc2lvbiJdLmluY2x1ZGVzKHQudHlwZSl9KSkuZmlsdGVyKChmdW5jdGlvbih0KXtyZXR1cm4gdC5wYXN0ZVJ1bGVzfSkpLm1hcCgoZnVuY3Rpb24odCl7cmV0dXJuIHQucGFzdGVSdWxlcyh7c2NoZW1hOmV9KX0pKSxpPXIuZmlsdGVyKChmdW5jdGlvbih0KXtyZXR1cm5bIm5vZGUiLCJtYXJrIl0uaW5jbHVkZXModC50eXBlKX0pKS5maWx0ZXIoKGZ1bmN0aW9uKHQpe3JldHVybiB0LnBhc3RlUnVsZXN9KSkubWFwKChmdW5jdGlvbih0KXtyZXR1cm4gdC5wYXN0ZVJ1bGVzKHt0eXBlOmVbIiIuY29uY2F0KHQudHlwZSwicyIpXVt0Lm5hbWVdLHNjaGVtYTplfSl9KSk7cmV0dXJuW10uY29uY2F0KGljKG8pLGljKGkpKS5yZWR1Y2UoKGZ1bmN0aW9uKHQsZSl7cmV0dXJuW10uY29uY2F0KGljKHQpLGljKGUpKX0pLFtdKX19LHtrZXk6ImNvbW1hbmRzIix2YWx1ZTpmdW5jdGlvbih0KXt2YXIgZT10LnNjaGVtYSxuPXQudmlldztyZXR1cm4gdGhpcy5leHRlbnNpb25zLmZpbHRlcigoZnVuY3Rpb24odCl7cmV0dXJuIHQuY29tbWFuZHN9KSkucmVkdWNlKChmdW5jdGlvbih0LHIpe3ZhciBvPXIubmFtZSxpPXIudHlwZSxzPXt9LGE9ci5jb21tYW5kcyhYYSh7c2NoZW1hOmV9LFsibm9kZSIsIm1hcmsiXS5pbmNsdWRlcyhpKT97dHlwZTplWyIiLmNvbmNhdChpLCJzIildW29dfTp7fSkpLGM9ZnVuY3Rpb24odCxlKXtyZXR1cm4hIW4uZWRpdGFibGUmJihuLmZvY3VzKCksdChlKShuLnN0YXRlLG4uZGlzcGF0Y2gsbikpfSx1PWZ1bmN0aW9uKHQsZSl7QXJyYXkuaXNBcnJheShlKT9zW3RdPWZ1bmN0aW9uKHQpe3JldHVybiBlLmZvckVhY2goKGZ1bmN0aW9uKGUpe3JldHVybiBjKGUsdCl9KSl9OiJmdW5jdGlvbiI9PT10eXBlb2YgZSYmKHNbdF09ZnVuY3Rpb24odCl7cmV0dXJuIGMoZSx0KX0pfTtyZXR1cm4ib2JqZWN0Ij09PUphKGEpP09iamVjdC5lbnRyaWVzKGEpLmZvckVhY2goKGZ1bmN0aW9uKHQpe3ZhciBlPW9jKHQsMiksbj1lWzBdLHI9ZVsxXTt1KG4scil9KSk6dShvLGEpLFhhKHt9LHQse30scyl9KSx7fSl9fSx7a2V5OiJub2RlcyIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZXh0ZW5zaW9ucy5maWx0ZXIoKGZ1bmN0aW9uKHQpe3JldHVybiJub2RlIj09PXQudHlwZX0pKS5yZWR1Y2UoKGZ1bmN0aW9uKHQsZSl7dmFyIG49ZS5uYW1lLHI9ZS5zY2hlbWE7cmV0dXJuIFhhKHt9LHQsVWEoe30sbixyKSl9KSx7fSl9fSx7a2V5OiJvcHRpb25zIixnZXQ6ZnVuY3Rpb24oKXt2YXIgdD10aGlzLnZpZXc7cmV0dXJuIHRoaXMuZXh0ZW5zaW9ucy5yZWR1Y2UoKGZ1bmN0aW9uKGUsbil7cmV0dXJuIFhhKHt9LGUsVWEoe30sbi5uYW1lLG5ldyBQcm94eShuLm9wdGlvbnMse3NldDpmdW5jdGlvbihlLG4scil7dmFyIG89ZVtuXSE9PXI7cmV0dXJuIE9iamVjdC5hc3NpZ24oZSxVYSh7fSxuLHIpKSxvJiZ0LnVwZGF0ZVN0YXRlKHQuc3RhdGUpLCEwfX0pKSl9KSx7fSl9fSx7a2V5OiJtYXJrcyIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZXh0ZW5zaW9ucy5maWx0ZXIoKGZ1bmN0aW9uKHQpe3JldHVybiJtYXJrIj09PXQudHlwZX0pKS5yZWR1Y2UoKGZ1bmN0aW9uKHQsZSl7dmFyIG49ZS5uYW1lLHI9ZS5zY2hlbWE7cmV0dXJuIFhhKHt9LHQsVWEoe30sbixyKSl9KSx7fSl9fSx7a2V5OiJwbHVnaW5zIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5leHRlbnNpb25zLmZpbHRlcigoZnVuY3Rpb24odCl7cmV0dXJuIHQucGx1Z2luc30pKS5yZWR1Y2UoKGZ1bmN0aW9uKHQsZSl7dmFyIG49ZS5wbHVnaW5zO3JldHVybltdLmNvbmNhdChpYyh0KSxpYyhuKSl9KSxbXSl9fV0pLHR9KCk7ZnVuY3Rpb24gd2ModCl7dmFyIGU9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgic3R5bGUiKTtlLnR5cGU9InRleHQvY3NzIixlLnRleHRDb250ZW50PXQ7dmFyIG49ZG9jdW1lbnQscj1uLmhlYWQsbz1yLmZpcnN0Q2hpbGQ7bz9yLmluc2VydEJlZm9yZShlLG8pOnIuYXBwZW5kQ2hpbGQoZSl9dmFyIGJjPWZ1bmN0aW9uKHQpe1lhKG4sdCk7dmFyIGU9cmMobik7ZnVuY3Rpb24gbigpe3ZhciB0PWFyZ3VtZW50cy5sZW5ndGg+MCYmdm9pZCAwIT09YXJndW1lbnRzWzBdP2FyZ3VtZW50c1swXTp7fTtyZXR1cm4gV2EodGhpcyxuKSxlLmNhbGwodGhpcyx0KX1yZXR1cm4gS2Eobixbe2tleToiY29tbWFuZCIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oKXt9fX0se2tleToidHlwZSIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIm1hcmsifX0se2tleToidmlldyIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIG51bGx9fSx7a2V5OiJzY2hlbWEiLGdldDpmdW5jdGlvbigpe3JldHVybiBudWxsfX1dKSxufShnYyk7ZnVuY3Rpb24geGMoKXt2YXIgdD1hcmd1bWVudHMubGVuZ3RoPjAmJnZvaWQgMCE9PWFyZ3VtZW50c1swXT9hcmd1bWVudHNbMF06MCxlPWFyZ3VtZW50cy5sZW5ndGg+MSYmdm9pZCAwIT09YXJndW1lbnRzWzFdP2FyZ3VtZW50c1sxXTowLG49YXJndW1lbnRzLmxlbmd0aD4yJiZ2b2lkIDAhPT1hcmd1bWVudHNbMl0/YXJndW1lbnRzWzJdOjA7cmV0dXJuIE1hdGgubWluKE1hdGgubWF4KHBhcnNlSW50KHQsMTApLGUpLG4pfXZhciBrYz1mdW5jdGlvbih0KXtZYShuLHQpO3ZhciBlPXJjKG4pO2Z1bmN0aW9uIG4oKXt2YXIgdD1hcmd1bWVudHMubGVuZ3RoPjAmJnZvaWQgMCE9PWFyZ3VtZW50c1swXT9hcmd1bWVudHNbMF06e307cmV0dXJuIFdhKHRoaXMsbiksZS5jYWxsKHRoaXMsdCl9cmV0dXJuIEthKG4sW3trZXk6ImNvbW1hbmQiLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKCl7fX19LHtrZXk6InR5cGUiLGdldDpmdW5jdGlvbigpe3JldHVybiJub2RlIn19LHtrZXk6InZpZXciLGdldDpmdW5jdGlvbigpe3JldHVybiBudWxsfX0se2tleToic2NoZW1hIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gbnVsbH19XSksbn0oZ2MpLFNjPWZ1bmN0aW9uKHQpe1lhKG4sdCk7dmFyIGU9cmMobik7ZnVuY3Rpb24gbigpe3JldHVybiBXYSh0aGlzLG4pLGUuYXBwbHkodGhpcyxhcmd1bWVudHMpfXJldHVybiBLYShuLFt7a2V5OiJuYW1lIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4iZG9jIn19LHtrZXk6InNjaGVtYSIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJue2NvbnRlbnQ6ImJsb2NrKyJ9fX1dKSxufShrYyksQ2M9ZnVuY3Rpb24odCl7WWEobix0KTt2YXIgZT1yYyhuKTtmdW5jdGlvbiBuKCl7cmV0dXJuIFdhKHRoaXMsbiksZS5hcHBseSh0aGlzLGFyZ3VtZW50cyl9cmV0dXJuIEthKG4sW3trZXk6ImNvbW1hbmRzIix2YWx1ZTpmdW5jdGlvbih0KXt2YXIgZT10LnR5cGU7cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIElzKGUpfX19LHtrZXk6Im5hbWUiLGdldDpmdW5jdGlvbigpe3JldHVybiJwYXJhZ3JhcGgifX0se2tleToic2NoZW1hIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm57Y29udGVudDoiaW5saW5lKiIsZ3JvdXA6ImJsb2NrIixkcmFnZ2FibGU6ITEscGFyc2VET006W3t0YWc6InAifV0sdG9ET006ZnVuY3Rpb24oKXtyZXR1cm5bInAiLDBdfX19fV0pLG59KGtjKSxPYz1mdW5jdGlvbih0KXtZYShuLHQpO3ZhciBlPXJjKG4pO2Z1bmN0aW9uIG4oKXtyZXR1cm4gV2EodGhpcyxuKSxlLmFwcGx5KHRoaXMsYXJndW1lbnRzKX1yZXR1cm4gS2Eobixbe2tleToibmFtZSIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuInRleHQifX0se2tleToic2NoZW1hIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm57Z3JvdXA6ImlubGluZSJ9fX1dKSxufShrYyksTWM9Jy5Qcm9zZU1pcnJvciB7XG4gIHBvc2l0aW9uOiByZWxhdGl2ZTtcbn1cblxuLlByb3NlTWlycm9yIHtcbiAgd29yZC13cmFwOiBicmVhay13b3JkO1xuICB3aGl0ZS1zcGFjZTogcHJlLXdyYXA7XG4gIC13ZWJraXQtZm9udC12YXJpYW50LWxpZ2F0dXJlczogbm9uZTtcbiAgZm9udC12YXJpYW50LWxpZ2F0dXJlczogbm9uZTtcbn1cblxuLlByb3NlTWlycm9yIHByZSB7XG4gIHdoaXRlLXNwYWNlOiBwcmUtd3JhcDtcbn1cblxuLlByb3NlTWlycm9yLWdhcGN1cnNvciB7XG4gIGRpc3BsYXk6IG5vbmU7XG4gIHBvaW50ZXItZXZlbnRzOiBub25lO1xuICBwb3NpdGlvbjogYWJzb2x1dGU7XG59XG5cbi5Qcm9zZU1pcnJvci1nYXBjdXJzb3I6YWZ0ZXIge1xuICBjb250ZW50OiAiIjtcbiAgZGlzcGxheTogYmxvY2s7XG4gIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgdG9wOiAtMnB4O1xuICB3aWR0aDogMjBweDtcbiAgYm9yZGVyLXRvcDogMXB4IHNvbGlkIGJsYWNrO1xuICBhbmltYXRpb246IFByb3NlTWlycm9yLWN1cnNvci1ibGluayAxLjFzIHN0ZXBzKDIsIHN0YXJ0KSBpbmZpbml0ZTtcbn1cblxuQGtleWZyYW1lcyBQcm9zZU1pcnJvci1jdXJzb3ItYmxpbmsge1xuICB0byB7XG4gICAgdmlzaWJpbGl0eTogaGlkZGVuO1xuICB9XG59XG5cbi5Qcm9zZU1pcnJvci1oaWRlc2VsZWN0aW9uICo6OnNlbGVjdGlvbiB7XG4gIGJhY2tncm91bmQ6IHRyYW5zcGFyZW50O1xufVxuXG4uUHJvc2VNaXJyb3ItaGlkZXNlbGVjdGlvbiAqOjotbW96LXNlbGVjdGlvbiB7XG4gIGJhY2tncm91bmQ6IHRyYW5zcGFyZW50O1xufVxuXG4uUHJvc2VNaXJyb3ItaGlkZXNlbGVjdGlvbiAqIHtcbiAgY2FyZXQtY29sb3I6IHRyYW5zcGFyZW50O1xufVxuXG4uUHJvc2VNaXJyb3ItZm9jdXNlZCAuUHJvc2VNaXJyb3ItZ2FwY3Vyc29yIHtcbiAgZGlzcGxheTogYmxvY2s7XG59XG4nLE5jPWZ1bmN0aW9uKHQpe1lhKG4sdCk7dmFyIGU9cmMobik7ZnVuY3Rpb24gbigpe3ZhciB0LHI9YXJndW1lbnRzLmxlbmd0aD4wJiZ2b2lkIDAhPT1hcmd1bWVudHNbMF0/YXJndW1lbnRzWzBdOnt9O3JldHVybiBXYSh0aGlzLG4pLHQ9ZS5jYWxsKHRoaXMpLHQuZGVmYXVsdE9wdGlvbnM9e2VkaXRvclByb3BzOnt9LGVkaXRhYmxlOiEwLGF1dG9Gb2N1czpudWxsLGV4dGVuc2lvbnM6W10sY29udGVudDoiIix0b3BOb2RlOiJkb2MiLGVtcHR5RG9jdW1lbnQ6e3R5cGU6ImRvYyIsY29udGVudDpbe3R5cGU6InBhcmFncmFwaCJ9XX0sdXNlQnVpbHRJbkV4dGVuc2lvbnM6ITAsZGlzYWJsZUlucHV0UnVsZXM6ITEsZGlzYWJsZVBhc3RlUnVsZXM6ITEsZHJvcEN1cnNvcjp7fSxwYXJzZU9wdGlvbnM6e30saW5qZWN0Q1NTOiEwLG9uSW5pdDpmdW5jdGlvbigpe30sb25UcmFuc2FjdGlvbjpmdW5jdGlvbigpe30sb25VcGRhdGU6ZnVuY3Rpb24oKXt9LG9uRm9jdXM6ZnVuY3Rpb24oKXt9LG9uQmx1cjpmdW5jdGlvbigpe30sb25QYXN0ZTpmdW5jdGlvbigpe30sb25Ecm9wOmZ1bmN0aW9uKCl7fX0sdC5ldmVudHM9WyJpbml0IiwidHJhbnNhY3Rpb24iLCJ1cGRhdGUiLCJmb2N1cyIsImJsdXIiLCJwYXN0ZSIsImRyb3AiXSx0LmluaXQociksdH1yZXR1cm4gS2Eobixbe2tleToiaW5pdCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgdD10aGlzLGU9YXJndW1lbnRzLmxlbmd0aD4wJiZ2b2lkIDAhPT1hcmd1bWVudHNbMF0/YXJndW1lbnRzWzBdOnt9O3RoaXMuc2V0T3B0aW9ucyhYYSh7fSx0aGlzLmRlZmF1bHRPcHRpb25zLHt9LGUpKSx0aGlzLmZvY3VzZWQ9ITEsdGhpcy5zZWxlY3Rpb249e2Zyb206MCx0bzowfSx0aGlzLmVsZW1lbnQ9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2IiksdGhpcy5leHRlbnNpb25zPXRoaXMuY3JlYXRlRXh0ZW5zaW9ucygpLHRoaXMubm9kZXM9dGhpcy5jcmVhdGVOb2RlcygpLHRoaXMubWFya3M9dGhpcy5jcmVhdGVNYXJrcygpLHRoaXMuc2NoZW1hPXRoaXMuY3JlYXRlU2NoZW1hKCksdGhpcy5wbHVnaW5zPXRoaXMuY3JlYXRlUGx1Z2lucygpLHRoaXMua2V5bWFwcz10aGlzLmNyZWF0ZUtleW1hcHMoKSx0aGlzLmlucHV0UnVsZXM9dGhpcy5jcmVhdGVJbnB1dFJ1bGVzKCksdGhpcy5wYXN0ZVJ1bGVzPXRoaXMuY3JlYXRlUGFzdGVSdWxlcygpLHRoaXMudmlldz10aGlzLmNyZWF0ZVZpZXcoKSx0aGlzLmNvbW1hbmRzPXRoaXMuY3JlYXRlQ29tbWFuZHMoKSx0aGlzLnNldEFjdGl2ZU5vZGVzQW5kTWFya3MoKSx0aGlzLm9wdGlvbnMuaW5qZWN0Q1NTJiZ3YyhNYyksbnVsbCE9PXRoaXMub3B0aW9ucy5hdXRvRm9jdXMmJnRoaXMuZm9jdXModGhpcy5vcHRpb25zLmF1dG9Gb2N1cyksdGhpcy5ldmVudHMuZm9yRWFjaCgoZnVuY3Rpb24oZSl7dC5vbihlLHQub3B0aW9uc1tkYygib24gIi5jb25jYXQoZSkpXXx8ZnVuY3Rpb24oKXt9KX0pKSx0aGlzLmVtaXQoImluaXQiLHt2aWV3OnRoaXMudmlldyxzdGF0ZTp0aGlzLnN0YXRlfSksdGhpcy5leHRlbnNpb25zLnZpZXc9dGhpcy52aWV3fX0se2tleToic2V0T3B0aW9ucyIsdmFsdWU6ZnVuY3Rpb24odCl7dGhpcy5vcHRpb25zPVhhKHt9LHRoaXMub3B0aW9ucyx7fSx0KSx0aGlzLnZpZXcmJnRoaXMuc3RhdGUmJnRoaXMudmlldy51cGRhdGVTdGF0ZSh0aGlzLnN0YXRlKX19LHtrZXk6ImNyZWF0ZUV4dGVuc2lvbnMiLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIG5ldyB5YyhbXS5jb25jYXQoaWModGhpcy5idWlsdEluRXh0ZW5zaW9ucyksaWModGhpcy5vcHRpb25zLmV4dGVuc2lvbnMpKSx0aGlzKX19LHtrZXk6ImNyZWF0ZVBsdWdpbnMiLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZXh0ZW5zaW9ucy5wbHVnaW5zfX0se2tleToiY3JlYXRlS2V5bWFwcyIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5leHRlbnNpb25zLmtleW1hcHMoe3NjaGVtYTp0aGlzLnNjaGVtYX0pfX0se2tleToiY3JlYXRlSW5wdXRSdWxlcyIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5leHRlbnNpb25zLmlucHV0UnVsZXMoe3NjaGVtYTp0aGlzLnNjaGVtYSxleGNsdWRlZEV4dGVuc2lvbnM6dGhpcy5vcHRpb25zLmRpc2FibGVJbnB1dFJ1bGVzfSl9fSx7a2V5OiJjcmVhdGVQYXN0ZVJ1bGVzIix2YWx1ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLmV4dGVuc2lvbnMucGFzdGVSdWxlcyh7c2NoZW1hOnRoaXMuc2NoZW1hLGV4Y2x1ZGVkRXh0ZW5zaW9uczp0aGlzLm9wdGlvbnMuZGlzYWJsZVBhc3RlUnVsZXN9KX19LHtrZXk6ImNyZWF0ZUNvbW1hbmRzIix2YWx1ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLmV4dGVuc2lvbnMuY29tbWFuZHMoe3NjaGVtYTp0aGlzLnNjaGVtYSx2aWV3OnRoaXMudmlld30pfX0se2tleToiY3JlYXRlTm9kZXMiLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZXh0ZW5zaW9ucy5ub2Rlc319LHtrZXk6ImNyZWF0ZU1hcmtzIix2YWx1ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLmV4dGVuc2lvbnMubWFya3N9fSx7a2V5OiJjcmVhdGVTY2hlbWEiLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIG5ldyBOaSh7dG9wTm9kZTp0aGlzLm9wdGlvbnMudG9wTm9kZSxub2Rlczp0aGlzLm5vZGVzLG1hcmtzOnRoaXMubWFya3N9KX19LHtrZXk6ImNyZWF0ZVN0YXRlIix2YWx1ZTpmdW5jdGlvbigpe3ZhciB0PXRoaXM7cmV0dXJuIGNbIkVkaXRvclN0YXRlIl0uY3JlYXRlKHtzY2hlbWE6dGhpcy5zY2hlbWEsZG9jOnRoaXMuY3JlYXRlRG9jdW1lbnQodGhpcy5vcHRpb25zLmNvbnRlbnQpLHBsdWdpbnM6W10uY29uY2F0KGljKHRoaXMucGx1Z2lucyksW0dzKHtydWxlczp0aGlzLmlucHV0UnVsZXN9KV0saWModGhpcy5wYXN0ZVJ1bGVzKSxpYyh0aGlzLmtleW1hcHMpLFtkcyh7QmFja3NwYWNlOllzfSksZHMoV3MpLFVpKHRoaXMub3B0aW9ucy5kcm9wQ3Vyc29yKSxycygpLG5ldyBjWyJQbHVnaW4iXSh7a2V5Om5ldyBjWyJQbHVnaW5LZXkiXSgiZWRpdGFibGUiKSxwcm9wczp7ZWRpdGFibGU6ZnVuY3Rpb24oKXtyZXR1cm4gdC5vcHRpb25zLmVkaXRhYmxlfX19KSxuZXcgY1siUGx1Z2luIl0oe3Byb3BzOnthdHRyaWJ1dGVzOnt0YWJpbmRleDowfSxoYW5kbGVET01FdmVudHM6e2ZvY3VzOmZ1bmN0aW9uKGUsbil7dC5mb2N1c2VkPSEwLHQuZW1pdCgiZm9jdXMiLHtldmVudDpuLHN0YXRlOmUuc3RhdGUsdmlldzplfSk7dmFyIHI9dC5zdGF0ZS50ci5zZXRNZXRhKCJmb2N1c2VkIiwhMCk7dC52aWV3LmRpc3BhdGNoKHIpfSxibHVyOmZ1bmN0aW9uKGUsbil7dC5mb2N1c2VkPSExLHQuZW1pdCgiYmx1ciIse2V2ZW50Om4sc3RhdGU6ZS5zdGF0ZSx2aWV3OmV9KTt2YXIgcj10LnN0YXRlLnRyLnNldE1ldGEoImZvY3VzZWQiLCExKTt0LnZpZXcuZGlzcGF0Y2gocil9fX19KSxuZXcgY1siUGx1Z2luIl0oe3Byb3BzOnRoaXMub3B0aW9ucy5lZGl0b3JQcm9wc30pXSl9KX19LHtrZXk6ImNyZWF0ZURvY3VtZW50Iix2YWx1ZTpmdW5jdGlvbih0KXt2YXIgZT1hcmd1bWVudHMubGVuZ3RoPjEmJnZvaWQgMCE9PWFyZ3VtZW50c1sxXT9hcmd1bWVudHNbMV06dGhpcy5vcHRpb25zLnBhcnNlT3B0aW9ucztpZihudWxsPT09dClyZXR1cm4gdGhpcy5zY2hlbWEubm9kZUZyb21KU09OKHRoaXMub3B0aW9ucy5lbXB0eURvY3VtZW50KTtpZigib2JqZWN0Ij09PUphKHQpKXRyeXtyZXR1cm4gdGhpcy5zY2hlbWEubm9kZUZyb21KU09OKHQpfWNhdGNoKHIpe3JldHVybiBjb25zb2xlLndhcm4oIlt0aXB0YXAgd2Fybl06IEludmFsaWQgY29udGVudC4iLCJQYXNzZWQgdmFsdWU6Iix0LCJFcnJvcjoiLHIpLHRoaXMuc2NoZW1hLm5vZGVGcm9tSlNPTih0aGlzLm9wdGlvbnMuZW1wdHlEb2N1bWVudCl9aWYoInN0cmluZyI9PT10eXBlb2YgdCl7dmFyIG49ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2Iik7cmV0dXJuIG4uaW5uZXJIVE1MPXQudHJpbSgpLEFpLmZyb21TY2hlbWEodGhpcy5zY2hlbWEpLnBhcnNlKG4sZSl9cmV0dXJuITF9fSx7a2V5OiJjcmVhdGVWaWV3Iix2YWx1ZTpmdW5jdGlvbigpe3ZhciB0PXRoaXM7cmV0dXJuIG5ldyBobyh0aGlzLmVsZW1lbnQse3N0YXRlOnRoaXMuY3JlYXRlU3RhdGUoKSxoYW5kbGVQYXN0ZTpmdW5jdGlvbigpe2Zvcih2YXIgZT1hcmd1bWVudHMubGVuZ3RoLG49bmV3IEFycmF5KGUpLHI9MDtyPGU7cisrKW5bcl09YXJndW1lbnRzW3JdO3QuZW1pdC5hcHBseSh0LFsicGFzdGUiXS5jb25jYXQobikpfSxoYW5kbGVEcm9wOmZ1bmN0aW9uKCl7Zm9yKHZhciBlPWFyZ3VtZW50cy5sZW5ndGgsbj1uZXcgQXJyYXkoZSkscj0wO3I8ZTtyKyspbltyXT1hcmd1bWVudHNbcl07dC5lbWl0LmFwcGx5KHQsWyJkcm9wIl0uY29uY2F0KG4pKX0sZGlzcGF0Y2hUcmFuc2FjdGlvbjp0aGlzLmRpc3BhdGNoVHJhbnNhY3Rpb24uYmluZCh0aGlzKX0pfX0se2tleToic2V0UGFyZW50Q29tcG9uZW50Iix2YWx1ZTpmdW5jdGlvbigpe3ZhciB0PWFyZ3VtZW50cy5sZW5ndGg+MCYmdm9pZCAwIT09YXJndW1lbnRzWzBdP2FyZ3VtZW50c1swXTpudWxsO3QmJnRoaXMudmlldy5zZXRQcm9wcyh7bm9kZVZpZXdzOnRoaXMuaW5pdE5vZGVWaWV3cyh7cGFyZW50OnQsZXh0ZW5zaW9uczpbXS5jb25jYXQoaWModGhpcy5idWlsdEluRXh0ZW5zaW9ucyksaWModGhpcy5vcHRpb25zLmV4dGVuc2lvbnMpKX0pfSl9fSx7a2V5OiJpbml0Tm9kZVZpZXdzIix2YWx1ZTpmdW5jdGlvbih0KXt2YXIgZT10aGlzLG49dC5wYXJlbnQscj10LmV4dGVuc2lvbnM7cmV0dXJuIHIuZmlsdGVyKChmdW5jdGlvbih0KXtyZXR1cm5bIm5vZGUiLCJtYXJrIl0uaW5jbHVkZXModC50eXBlKX0pKS5maWx0ZXIoKGZ1bmN0aW9uKHQpe3JldHVybiB0LnZpZXd9KSkucmVkdWNlKChmdW5jdGlvbih0LHIpe3ZhciBvPWZ1bmN0aW9uKHQsbyxpLHMpe3ZhciBhPXIudmlldztyZXR1cm4gbmV3IHZjKGEse2VkaXRvcjplLGV4dGVuc2lvbjpyLHBhcmVudDpuLG5vZGU6dCx2aWV3Om8sZ2V0UG9zOmksZGVjb3JhdGlvbnM6c30pfTtyZXR1cm4gWGEoe30sdCxVYSh7fSxyLm5hbWUsbykpfSkse30pfX0se2tleToiZGlzcGF0Y2hUcmFuc2FjdGlvbiIsdmFsdWU6ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5zdGF0ZS5hcHBseSh0KTt0aGlzLnZpZXcudXBkYXRlU3RhdGUoZSksdGhpcy5zZWxlY3Rpb249e2Zyb206dGhpcy5zdGF0ZS5zZWxlY3Rpb24uZnJvbSx0bzp0aGlzLnN0YXRlLnNlbGVjdGlvbi50b30sdGhpcy5zZXRBY3RpdmVOb2Rlc0FuZE1hcmtzKCksdGhpcy5lbWl0KCJ0cmFuc2FjdGlvbiIse2dldEhUTUw6dGhpcy5nZXRIVE1MLmJpbmQodGhpcyksZ2V0SlNPTjp0aGlzLmdldEpTT04uYmluZCh0aGlzKSxzdGF0ZTp0aGlzLnN0YXRlLHRyYW5zYWN0aW9uOnR9KSx0LmRvY0NoYW5nZWQmJiF0LmdldE1ldGEoInByZXZlbnRVcGRhdGUiKSYmdGhpcy5lbWl0VXBkYXRlKHQpfX0se2tleToiZW1pdFVwZGF0ZSIsdmFsdWU6ZnVuY3Rpb24odCl7dGhpcy5lbWl0KCJ1cGRhdGUiLHtnZXRIVE1MOnRoaXMuZ2V0SFRNTC5iaW5kKHRoaXMpLGdldEpTT046dGhpcy5nZXRKU09OLmJpbmQodGhpcyksc3RhdGU6dGhpcy5zdGF0ZSx0cmFuc2FjdGlvbjp0fSl9fSx7a2V5OiJyZXNvbHZlU2VsZWN0aW9uIix2YWx1ZTpmdW5jdGlvbigpe3ZhciB0PWFyZ3VtZW50cy5sZW5ndGg+MCYmdm9pZCAwIT09YXJndW1lbnRzWzBdP2FyZ3VtZW50c1swXTpudWxsO2lmKHRoaXMuc2VsZWN0aW9uJiZudWxsPT09dClyZXR1cm4gdGhpcy5zZWxlY3Rpb247aWYoInN0YXJ0Ij09PXR8fCEwPT09dClyZXR1cm57ZnJvbTowLHRvOjB9O2lmKCJlbmQiPT09dCl7dmFyIGU9dGhpcy5zdGF0ZS5kb2M7cmV0dXJue2Zyb206ZS5jb250ZW50LnNpemUsdG86ZS5jb250ZW50LnNpemV9fXJldHVybntmcm9tOnQsdG86dH19fSx7a2V5OiJmb2N1cyIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgdD10aGlzLGU9YXJndW1lbnRzLmxlbmd0aD4wJiZ2b2lkIDAhPT1hcmd1bWVudHNbMF0/YXJndW1lbnRzWzBdOm51bGw7aWYoISh0aGlzLnZpZXcuZm9jdXNlZCYmbnVsbD09PWV8fCExPT09ZSkpe3ZhciBuPXRoaXMucmVzb2x2ZVNlbGVjdGlvbihlKSxyPW4uZnJvbSxvPW4udG87dGhpcy5zZXRTZWxlY3Rpb24ocixvKSxzZXRUaW1lb3V0KChmdW5jdGlvbigpe3JldHVybiB0LnZpZXcuZm9jdXMoKX0pLDEwKX19fSx7a2V5OiJzZXRTZWxlY3Rpb24iLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIHQ9YXJndW1lbnRzLmxlbmd0aD4wJiZ2b2lkIDAhPT1hcmd1bWVudHNbMF0/YXJndW1lbnRzWzBdOjAsZT1hcmd1bWVudHMubGVuZ3RoPjEmJnZvaWQgMCE9PWFyZ3VtZW50c1sxXT9hcmd1bWVudHNbMV06MCxuPXRoaXMuc3RhdGUscj1uLmRvYyxvPW4udHIsaT14Yyh0LDAsci5jb250ZW50LnNpemUpLHM9eGMoZSwwLHIuY29udGVudC5zaXplKSxhPWNbIlRleHRTZWxlY3Rpb24iXS5jcmVhdGUocixpLHMpLHU9by5zZXRTZWxlY3Rpb24oYSk7dGhpcy52aWV3LmRpc3BhdGNoKHUpfX0se2tleToiYmx1ciIsdmFsdWU6ZnVuY3Rpb24oKXt0aGlzLnZpZXcuZG9tLmJsdXIoKX19LHtrZXk6ImdldFNjaGVtYUpTT04iLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkoe25vZGVzOnRoaXMuZXh0ZW5zaW9ucy5ub2RlcyxtYXJrczp0aGlzLmV4dGVuc2lvbnMubWFya3N9KSl9fSx7a2V5OiJnZXRIVE1MIix2YWx1ZTpmdW5jdGlvbigpe3ZhciB0PWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpLGU9V2kuZnJvbVNjaGVtYSh0aGlzLnNjaGVtYSkuc2VyaWFsaXplRnJhZ21lbnQodGhpcy5zdGF0ZS5kb2MuY29udGVudCk7cmV0dXJuIHQuYXBwZW5kQ2hpbGQoZSksdC5pbm5lckhUTUx9fSx7a2V5OiJnZXRKU09OIix2YWx1ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLnN0YXRlLmRvYy50b0pTT04oKX19LHtrZXk6InNldENvbnRlbnQiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIHQ9YXJndW1lbnRzLmxlbmd0aD4wJiZ2b2lkIDAhPT1hcmd1bWVudHNbMF0/YXJndW1lbnRzWzBdOnt9LGU9YXJndW1lbnRzLmxlbmd0aD4xJiZ2b2lkIDAhPT1hcmd1bWVudHNbMV0mJmFyZ3VtZW50c1sxXSxuPWFyZ3VtZW50cy5sZW5ndGg+Mj9hcmd1bWVudHNbMl06dm9pZCAwLHI9dGhpcy5zdGF0ZSxvPXIuZG9jLGk9ci50cixzPXRoaXMuY3JlYXRlRG9jdW1lbnQodCxuKSxhPWNbIlRleHRTZWxlY3Rpb24iXS5jcmVhdGUobywwLG8uY29udGVudC5zaXplKSx1PWkuc2V0U2VsZWN0aW9uKGEpLnJlcGxhY2VTZWxlY3Rpb25XaXRoKHMsITEpLnNldE1ldGEoInByZXZlbnRVcGRhdGUiLCFlKTt0aGlzLnZpZXcuZGlzcGF0Y2godSl9fSx7a2V5OiJjbGVhckNvbnRlbnQiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIHQ9YXJndW1lbnRzLmxlbmd0aD4wJiZ2b2lkIDAhPT1hcmd1bWVudHNbMF0mJmFyZ3VtZW50c1swXTt0aGlzLnNldENvbnRlbnQodGhpcy5vcHRpb25zLmVtcHR5RG9jdW1lbnQsdCl9fSx7a2V5OiJzZXRBY3RpdmVOb2Rlc0FuZE1hcmtzIix2YWx1ZTpmdW5jdGlvbigpe3ZhciB0PXRoaXM7dGhpcy5hY3RpdmVNYXJrcz1PYmplY3QuZW50cmllcyh0aGlzLnNjaGVtYS5tYXJrcykucmVkdWNlKChmdW5jdGlvbihlLG4pe3ZhciByPW9jKG4sMiksbz1yWzBdLGk9clsxXTtyZXR1cm4gWGEoe30sZSxVYSh7fSxvLChmdW5jdGlvbigpe3ZhciBlPWFyZ3VtZW50cy5sZW5ndGg+MCYmdm9pZCAwIT09YXJndW1lbnRzWzBdP2FyZ3VtZW50c1swXTp7fTtyZXR1cm4gcGEodC5zdGF0ZSxpLGUpfSkpKX0pLHt9KSx0aGlzLmFjdGl2ZU1hcmtBdHRycz1PYmplY3QuZW50cmllcyh0aGlzLnNjaGVtYS5tYXJrcykucmVkdWNlKChmdW5jdGlvbihlLG4pe3ZhciByPW9jKG4sMiksbz1yWzBdLGk9clsxXTtyZXR1cm4gWGEoe30sZSxVYSh7fSxvLGxhKHQuc3RhdGUsaSkpKX0pLHt9KSx0aGlzLmFjdGl2ZU5vZGVzPU9iamVjdC5lbnRyaWVzKHRoaXMuc2NoZW1hLm5vZGVzKS5yZWR1Y2UoKGZ1bmN0aW9uKGUsbil7dmFyIHI9b2MobiwyKSxvPXJbMF0saT1yWzFdO3JldHVybiBYYSh7fSxlLFVhKHt9LG8sKGZ1bmN0aW9uKCl7dmFyIGU9YXJndW1lbnRzLmxlbmd0aD4wJiZ2b2lkIDAhPT1hcmd1bWVudHNbMF0/YXJndW1lbnRzWzBdOnt9O3JldHVybiBkYSh0LnN0YXRlLGksZSl9KSkpfSkse30pfX0se2tleToiZ2V0TWFya0F0dHJzIix2YWx1ZTpmdW5jdGlvbigpe3ZhciB0PWFyZ3VtZW50cy5sZW5ndGg+MCYmdm9pZCAwIT09YXJndW1lbnRzWzBdP2FyZ3VtZW50c1swXTpudWxsO3JldHVybiB0aGlzLmFjdGl2ZU1hcmtBdHRyc1t0XX19LHtrZXk6ImdldE5vZGVBdHRycyIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgdD1hcmd1bWVudHMubGVuZ3RoPjAmJnZvaWQgMCE9PWFyZ3VtZW50c1swXT9hcmd1bWVudHNbMF06bnVsbDtyZXR1cm4gWGEoe30saGEodGhpcy5zdGF0ZSx0aGlzLnNjaGVtYS5ub2Rlc1t0XSkpfX0se2tleToicmVnaXN0ZXJQbHVnaW4iLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIHQ9YXJndW1lbnRzLmxlbmd0aD4wJiZ2b2lkIDAhPT1hcmd1bWVudHNbMF0/YXJndW1lbnRzWzBdOm51bGwsZT1hcmd1bWVudHMubGVuZ3RoPjE/YXJndW1lbnRzWzFdOnZvaWQgMCxuPSJmdW5jdGlvbiI9PT10eXBlb2YgZT9lKHQsdGhpcy5zdGF0ZS5wbHVnaW5zKTpbdF0uY29uY2F0KGljKHRoaXMuc3RhdGUucGx1Z2lucykpLHI9dGhpcy5zdGF0ZS5yZWNvbmZpZ3VyZSh7cGx1Z2luczpufSk7dGhpcy52aWV3LnVwZGF0ZVN0YXRlKHIpfX0se2tleToidW5yZWdpc3RlclBsdWdpbiIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgdD1hcmd1bWVudHMubGVuZ3RoPjAmJnZvaWQgMCE9PWFyZ3VtZW50c1swXT9hcmd1bWVudHNbMF06bnVsbDtpZih0JiZ0aGlzLnZpZXcuZG9jVmlldyl7dmFyIGU9dGhpcy5zdGF0ZS5yZWNvbmZpZ3VyZSh7cGx1Z2luczp0aGlzLnN0YXRlLnBsdWdpbnMuZmlsdGVyKChmdW5jdGlvbihlKXtyZXR1cm4hZS5rZXkuc3RhcnRzV2l0aCgiIi5jb25jYXQodCwiJCIpKX0pKX0pO3RoaXMudmlldy51cGRhdGVTdGF0ZShlKX19fSx7a2V5OiJkZXN0cm95Iix2YWx1ZTpmdW5jdGlvbigpe3RoaXMudmlldyYmdGhpcy52aWV3LmRlc3Ryb3koKX19LHtrZXk6ImJ1aWx0SW5FeHRlbnNpb25zIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5vcHRpb25zLnVzZUJ1aWx0SW5FeHRlbnNpb25zP1tuZXcgU2MsbmV3IE9jLG5ldyBDY106W119fSx7a2V5OiJzdGF0ZSIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudmlldz90aGlzLnZpZXcuc3RhdGU6bnVsbH19LHtrZXk6ImlzQWN0aXZlIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gT2JqZWN0LmVudHJpZXMoWGEoe30sdGhpcy5hY3RpdmVNYXJrcyx7fSx0aGlzLmFjdGl2ZU5vZGVzKSkucmVkdWNlKChmdW5jdGlvbih0LGUpe3ZhciBuPW9jKGUsMikscj1uWzBdLG89blsxXTtyZXR1cm4gWGEoe30sdCxVYSh7fSxyLChmdW5jdGlvbigpe3ZhciB0PWFyZ3VtZW50cy5sZW5ndGg+MCYmdm9pZCAwIT09YXJndW1lbnRzWzBdP2FyZ3VtZW50c1swXTp7fTtyZXR1cm4gbyh0KX0pKSl9KSx7fSl9fV0pLG59KG1jKSxUYz17cHJvcHM6e2VkaXRvcjp7ZGVmYXVsdDpudWxsLHR5cGU6T2JqZWN0fX0sd2F0Y2g6e2VkaXRvcjp7aW1tZWRpYXRlOiEwLGhhbmRsZXI6ZnVuY3Rpb24odCl7dmFyIGU9dGhpczt0JiZ0LmVsZW1lbnQmJnRoaXMuJG5leHRUaWNrKChmdW5jdGlvbigpe2UuJGVsLmFwcGVuZENoaWxkKHQuZWxlbWVudC5maXJzdENoaWxkKSx0LnNldFBhcmVudENvbXBvbmVudChlKX0pKX19fSxyZW5kZXI6ZnVuY3Rpb24odCl7cmV0dXJuIHQoImRpdiIpfSxiZWZvcmVEZXN0cm95OmZ1bmN0aW9uKCl7dGhpcy5lZGl0b3IuZWxlbWVudD10aGlzLiRlbH19LEFjPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdChlKXt2YXIgbj10aGlzLHI9ZS5vcHRpb25zO1dhKHRoaXMsdCksdGhpcy5vcHRpb25zPXIsdGhpcy5wcmV2ZW50SGlkZT0hMSx0aGlzLm1vdXNlZG93bkhhbmRsZXI9dGhpcy5oYW5kbGVDbGljay5iaW5kKHRoaXMpLHRoaXMub3B0aW9ucy5lbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoIm1vdXNlZG93biIsdGhpcy5tb3VzZWRvd25IYW5kbGVyLHtjYXB0dXJlOiEwfSksdGhpcy5ibHVySGFuZGxlcj1mdW5jdGlvbigpe24ucHJldmVudEhpZGU/bi5wcmV2ZW50SGlkZT0hMTpuLm9wdGlvbnMuZWRpdG9yLmVtaXQoIm1lbnViYXI6Zm9jdXNVcGRhdGUiLCExKX0sdGhpcy5vcHRpb25zLmVkaXRvci5vbigiYmx1ciIsdGhpcy5ibHVySGFuZGxlcil9cmV0dXJuIEthKHQsW3trZXk6ImhhbmRsZUNsaWNrIix2YWx1ZTpmdW5jdGlvbigpe3RoaXMucHJldmVudEhpZGU9ITB9fSx7a2V5OiJkZXN0cm95Iix2YWx1ZTpmdW5jdGlvbigpe3RoaXMub3B0aW9ucy5lbGVtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoIm1vdXNlZG93biIsdGhpcy5tb3VzZWRvd25IYW5kbGVyKSx0aGlzLm9wdGlvbnMuZWRpdG9yLm9mZigiYmx1ciIsdGhpcy5ibHVySGFuZGxlcil9fV0pLHR9KCk7ZnVuY3Rpb24gRWModCl7cmV0dXJuIG5ldyBjWyJQbHVnaW4iXSh7a2V5Om5ldyBjWyJQbHVnaW5LZXkiXSgibWVudV9iYXIiKSx2aWV3OmZ1bmN0aW9uKGUpe3JldHVybiBuZXcgQWMoe2VkaXRvclZpZXc6ZSxvcHRpb25zOnR9KX19KX12YXIgRGM9e3Byb3BzOntlZGl0b3I6e2RlZmF1bHQ6bnVsbCx0eXBlOk9iamVjdH19LGRhdGE6ZnVuY3Rpb24oKXtyZXR1cm57Zm9jdXNlZDohMX19LHdhdGNoOntlZGl0b3I6e2ltbWVkaWF0ZTohMCxoYW5kbGVyOmZ1bmN0aW9uKHQpe3ZhciBlPXRoaXM7dCYmdGhpcy4kbmV4dFRpY2soKGZ1bmN0aW9uKCl7dC5yZWdpc3RlclBsdWdpbihFYyh7ZWRpdG9yOnQsZWxlbWVudDplLiRlbH0pKSxlLmZvY3VzZWQ9dC5mb2N1c2VkLHQub24oImZvY3VzIiwoZnVuY3Rpb24oKXtlLmZvY3VzZWQ9ITB9KSksdC5vbigibWVudWJhcjpmb2N1c1VwZGF0ZSIsKGZ1bmN0aW9uKHQpe2UuZm9jdXNlZD10fSkpfSkpfX19LHJlbmRlcjpmdW5jdGlvbigpe3JldHVybiB0aGlzLmVkaXRvcj90aGlzLiRzY29wZWRTbG90cy5kZWZhdWx0KHtmb2N1c2VkOnRoaXMuZm9jdXNlZCxmb2N1czp0aGlzLmVkaXRvci5mb2N1cyxjb21tYW5kczp0aGlzLmVkaXRvci5jb21tYW5kcyxpc0FjdGl2ZTp0aGlzLmVkaXRvci5pc0FjdGl2ZSxnZXRNYXJrQXR0cnM6dGhpcy5lZGl0b3IuZ2V0TWFya0F0dHJzLmJpbmQodGhpcy5lZGl0b3IpLGdldE5vZGVBdHRyczp0aGlzLmVkaXRvci5nZXROb2RlQXR0cnMuYmluZCh0aGlzLmVkaXRvcil9KTpudWxsfX07ZnVuY3Rpb24gUmModCxlLG4pe3ZhciByPWRvY3VtZW50LmNyZWF0ZVJhbmdlKCk7cmV0dXJuIHIuc2V0RW5kKHQsbnVsbD09bj90Lm5vZGVWYWx1ZS5sZW5ndGg6biksci5zZXRTdGFydCh0LGV8fDApLHJ9ZnVuY3Rpb24gemModCxlKXt2YXIgbj10LmdldENsaWVudFJlY3RzKCk7cmV0dXJuIG4ubGVuZ3RoP25bZTwwPzA6bi5sZW5ndGgtMV06dC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKX1mdW5jdGlvbiBQYyh0LGUpe3ZhciBuLHIsbz1hcmd1bWVudHMubGVuZ3RoPjImJnZvaWQgMCE9PWFyZ3VtZW50c1syXSYmYXJndW1lbnRzWzJdLGk9dC5kb2NWaWV3LmRvbUZyb21Qb3MoZSkscz1pLm5vZGUsYT1pLm9mZnNldDtpZigzPT09cy5ub2RlVHlwZSlvJiZhPHMubm9kZVZhbHVlLmxlbmd0aD8ocj16YyhSYyhzLGEtMSxhKSwtMSksbj0icmlnaHQiKTphPHMubm9kZVZhbHVlLmxlbmd0aCYmKHI9emMoUmMocyxhLGErMSksLTEpLG49ImxlZnQiKTtlbHNlIGlmKHMuZmlyc3RDaGlsZCl7aWYoYTxzLmNoaWxkTm9kZXMubGVuZ3RoKXt2YXIgYz1zLmNoaWxkTm9kZXNbYV07cj16YygzPT09Yy5ub2RlVHlwZT9SYyhjKTpjLC0xKSxuPSJsZWZ0In1pZigoIXJ8fHIudG9wPT09ci5ib3R0b20pJiZhKXt2YXIgdT1zLmNoaWxkTm9kZXNbYS0xXTtyPXpjKDM9PT11Lm5vZGVUeXBlP1JjKHUpOnUsMSksbj0icmlnaHQifX1lbHNlIHI9cy5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKSxuPSJsZWZ0Ijt2YXIgbD1yW25dO3JldHVybnt0b3A6ci50b3AsYm90dG9tOnIuYm90dG9tLGxlZnQ6bCxyaWdodDpsfX12YXIgSWM9ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KGUpe3ZhciBuPXRoaXMscj1lLm9wdGlvbnMsbz1lLmVkaXRvclZpZXc7V2EodGhpcyx0KSx0aGlzLm9wdGlvbnM9WGEoe30se2VsZW1lbnQ6bnVsbCxrZWVwSW5Cb3VuZHM6ITAsb25VcGRhdGU6ZnVuY3Rpb24oKXtyZXR1cm4hMX19LHt9LHIpLHRoaXMuZWRpdG9yVmlldz1vLHRoaXMuaXNBY3RpdmU9ITEsdGhpcy5sZWZ0PTAsdGhpcy5ib3R0b209MCx0aGlzLnRvcD0wLHRoaXMucHJldmVudEhpZGU9ITEsdGhpcy5tb3VzZWRvd25IYW5kbGVyPXRoaXMuaGFuZGxlQ2xpY2suYmluZCh0aGlzKSx0aGlzLm9wdGlvbnMuZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCJtb3VzZWRvd24iLHRoaXMubW91c2Vkb3duSGFuZGxlcix7Y2FwdHVyZTohMH0pLHRoaXMuZm9jdXNIYW5kbGVyPWZ1bmN0aW9uKHQpe3ZhciBlPXQudmlldztuLnVwZGF0ZShlKX0sdGhpcy5vcHRpb25zLmVkaXRvci5vbigiZm9jdXMiLHRoaXMuZm9jdXNIYW5kbGVyKSx0aGlzLmJsdXJIYW5kbGVyPWZ1bmN0aW9uKHQpe3ZhciBlPXQuZXZlbnQ7bi5wcmV2ZW50SGlkZT9uLnByZXZlbnRIaWRlPSExOm4uaGlkZShlKX0sdGhpcy5vcHRpb25zLmVkaXRvci5vbigiYmx1ciIsdGhpcy5ibHVySGFuZGxlcil9cmV0dXJuIEthKHQsW3trZXk6ImhhbmRsZUNsaWNrIix2YWx1ZTpmdW5jdGlvbigpe3RoaXMucHJldmVudEhpZGU9ITB9fSx7a2V5OiJ1cGRhdGUiLHZhbHVlOmZ1bmN0aW9uKHQsZSl7dmFyIG49dC5zdGF0ZTtpZighdC5jb21wb3NpbmcmJiEoZSYmZS5kb2MuZXEobi5kb2MpJiZlLnNlbGVjdGlvbi5lcShuLnNlbGVjdGlvbikpKWlmKG4uc2VsZWN0aW9uLmVtcHR5KXRoaXMuaGlkZSgpO2Vsc2V7dmFyIHI9bi5zZWxlY3Rpb24sbz1yLmZyb20saT1yLnRvLHM9UGModCxvKSxhPVBjKHQsaSwhMCksYz10aGlzLm9wdGlvbnMuZWxlbWVudC5vZmZzZXRQYXJlbnQ7aWYoYyl7dmFyIHU9Yy5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKSxsPXRoaXMub3B0aW9ucy5lbGVtZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLGg9KHMubGVmdCthLmxlZnQpLzItdS5sZWZ0O3RoaXMubGVmdD1NYXRoLnJvdW5kKHRoaXMub3B0aW9ucy5rZWVwSW5Cb3VuZHM/TWF0aC5taW4odS53aWR0aC1sLndpZHRoLzIsTWF0aC5tYXgoaCxsLndpZHRoLzIpKTpoKSx0aGlzLmJvdHRvbT1NYXRoLnJvdW5kKHUuYm90dG9tLXMudG9wKSx0aGlzLnRvcD1NYXRoLnJvdW5kKGEuYm90dG9tLXUudG9wKSx0aGlzLmlzQWN0aXZlPSEwLHRoaXMuc2VuZFVwZGF0ZSgpfWVsc2UgdGhpcy5oaWRlKCl9fX0se2tleToic2VuZFVwZGF0ZSIsdmFsdWU6ZnVuY3Rpb24oKXt0aGlzLm9wdGlvbnMub25VcGRhdGUoe2lzQWN0aXZlOnRoaXMuaXNBY3RpdmUsbGVmdDp0aGlzLmxlZnQsYm90dG9tOnRoaXMuYm90dG9tLHRvcDp0aGlzLnRvcH0pfX0se2tleToiaGlkZSIsdmFsdWU6ZnVuY3Rpb24odCl7dCYmdC5yZWxhdGVkVGFyZ2V0JiZ0aGlzLm9wdGlvbnMuZWxlbWVudC5wYXJlbnROb2RlJiZ0aGlzLm9wdGlvbnMuZWxlbWVudC5wYXJlbnROb2RlLmNvbnRhaW5zKHQucmVsYXRlZFRhcmdldCl8fCh0aGlzLmlzQWN0aXZlPSExLHRoaXMuc2VuZFVwZGF0ZSgpKX19LHtrZXk6ImRlc3Ryb3kiLHZhbHVlOmZ1bmN0aW9uKCl7dGhpcy5vcHRpb25zLmVsZW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcigibW91c2Vkb3duIix0aGlzLm1vdXNlZG93bkhhbmRsZXIpLHRoaXMub3B0aW9ucy5lZGl0b3Iub2ZmKCJmb2N1cyIsdGhpcy5mb2N1c0hhbmRsZXIpLHRoaXMub3B0aW9ucy5lZGl0b3Iub2ZmKCJibHVyIix0aGlzLmJsdXJIYW5kbGVyKX19XSksdH0oKTtmdW5jdGlvbiBCYyh0KXtyZXR1cm4gbmV3IGNbIlBsdWdpbiJdKHtrZXk6bmV3IGNbIlBsdWdpbktleSJdKCJtZW51X2J1YmJsZSIpLHZpZXc6ZnVuY3Rpb24oZSl7cmV0dXJuIG5ldyBJYyh7ZWRpdG9yVmlldzplLG9wdGlvbnM6dH0pfX0pfUJvb2xlYW47dmFyIF9jPWZ1bmN0aW9uKCl7dmFyIHQ9dGhpcyxlPXQuJGNyZWF0ZUVsZW1lbnQsbj10Ll9zZWxmLl9jfHxlO3JldHVybiBuKCJkaXYiLHtzdGF0aWNDbGFzczoiaWNvbiIsY2xhc3M6WyJpY29uLS0iK3QubmFtZSwiaWNvbi0tIit0LnNpemVdfSxbbih0Lmljb24se3RhZzoiY29tcG9uZW50In0pXSwxKX0sRmM9W107bigiYjBjMCIpLG4oIjRmYWQiKTtmdW5jdGlvbiBqYyh0KXtpZihBcnJheS5pc0FycmF5KHQpKXJldHVybiB0fW4oImE0ZDMiKSxuKCJlMDFhIiksbigiZDI4YiIpLG4oImUyNjAiKSxuKCJkM2I3IiksbigiM2NhMyIpLG4oImRkYjAiKTtmdW5jdGlvbiAkYyh0LGUpe2lmKCJ1bmRlZmluZWQiIT09dHlwZW9mIFN5bWJvbCYmU3ltYm9sLml0ZXJhdG9yIGluIE9iamVjdCh0KSl7dmFyIG49W10scj0hMCxvPSExLGk9dm9pZCAwO3RyeXtmb3IodmFyIHMsYT10W1N5bWJvbC5pdGVyYXRvcl0oKTshKHI9KHM9YS5uZXh0KCkpLmRvbmUpO3I9ITApaWYobi5wdXNoKHMudmFsdWUpLGUmJm4ubGVuZ3RoPT09ZSlicmVha31jYXRjaChjKXtvPSEwLGk9Y31maW5hbGx5e3RyeXtyfHxudWxsPT1hWyJyZXR1cm4iXXx8YVsicmV0dXJuIl0oKX1maW5hbGx5e2lmKG8pdGhyb3cgaX19cmV0dXJuIG59fW4oImE2MzAiKSxuKCJmYjZhIiksbigiMjVmMCIpO2Z1bmN0aW9uIFZjKHQsZSl7KG51bGw9PWV8fGU+dC5sZW5ndGgpJiYoZT10Lmxlbmd0aCk7Zm9yKHZhciBuPTAscj1uZXcgQXJyYXkoZSk7bjxlO24rKylyW25dPXRbbl07cmV0dXJuIHJ9ZnVuY3Rpb24gTGModCxlKXtpZih0KXtpZigic3RyaW5nIj09PXR5cGVvZiB0KXJldHVybiBWYyh0LGUpO3ZhciBuPU9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbCh0KS5zbGljZSg4LC0xKTtyZXR1cm4iT2JqZWN0Ij09PW4mJnQuY29uc3RydWN0b3ImJihuPXQuY29uc3RydWN0b3IubmFtZSksIk1hcCI9PT1ufHwiU2V0Ij09PW4/QXJyYXkuZnJvbSh0KToiQXJndW1lbnRzIj09PW58fC9eKD86VWl8SSludCg/Ojh8MTZ8MzIpKD86Q2xhbXBlZCk/QXJyYXkkLy50ZXN0KG4pP1ZjKHQsZSk6dm9pZCAwfX1mdW5jdGlvbiBxYygpe3Rocm93IG5ldyBUeXBlRXJyb3IoIkludmFsaWQgYXR0ZW1wdCB0byBkZXN0cnVjdHVyZSBub24taXRlcmFibGUgaW5zdGFuY2UuXG5JbiBvcmRlciB0byBiZSBpdGVyYWJsZSwgbm9uLWFycmF5IG9iamVjdHMgbXVzdCBoYXZlIGEgW1N5bWJvbC5pdGVyYXRvcl0oKSBtZXRob2QuIil9ZnVuY3Rpb24gSmModCxlKXtyZXR1cm4gamModCl8fCRjKHQsZSl8fExjKHQsZSl8fHFjKCl9Zm9yKHZhciBXYz1uKCI3MGM3IiksSGM9bi5uKFdjKSxLYz1uKCJlZDUzIiksVWM9bi5uKEtjKSxHYz1uKCI1ZmVkIiksWGM9bi5uKEdjKSxZYz1uKCJmOTM5IiksWmM9bi5uKFljKSxRYz1uKCIzZWIzIiksdHU9bi5uKFFjKSxldT1uKCIzOTIyIiksbnU9bi5uKGV1KSxydT1uKCI0M2NhIiksb3U9bi5uKHJ1KSxpdT1uKCJhNzBkIiksc3U9bi5uKGl1KSxhdT1uKCJhYzRlIiksY3U9bi5uKGF1KSx1dT1uKCJhZDZlIiksbHU9bi5uKHV1KSxodT1uKCI1YmIxIiksZnU9bi5uKGh1KSxwdT1uKCJjNmVlIiksZHU9bi5uKHB1KSx2dT1uKCJjOTQzIiksbXU9bi5uKHZ1KSxndT1uKCI0ZjM1IikseXU9bi5uKGd1KSx3dT1uKCI5ZjYxIiksYnU9bi5uKHd1KSx4dT1uKCJkN2I2Iiksa3U9bi5uKHh1KSxTdT1uKCI1ZDc1IiksQ3U9bi5uKFN1KSxPdT1uKCI0ZjY2IiksTXU9bi5uKE91KSxOdT1uKCI0OThjIiksVHU9bi5uKE51KSxBdT1uKCJhZWMyIiksRXU9bi5uKEF1KSxEdT1uKCIyZDFiIiksUnU9bi5uKER1KSx6dT1uKCJlNDhjIiksUHU9bi5uKHp1KSxJdT1uKCJhNzA3IiksQnU9bi5uKEl1KSxfdT1uKCI1NTA0IiksRnU9bi5uKF91KSxqdT1uKCI2ZDU0IiksJHU9bi5uKGp1KSxWdT1uKCIwMTA5IiksTHU9bi5uKFZ1KSxxdT1uKCJmYTBiIiksSnU9bi5uKHF1KSxXdT1uKCI5MmNmIiksSHU9bi5uKFd1KSxLdT17YWRkX2NvbF9hZnRlcjpIYy5hLGFkZF9jb2xfYmVmb3JlOlVjLmEsYWRkX3Jvd19hZnRlcjpYYy5hLGFkZF9yb3dfYmVmb3JlOlpjLmEsYm9sZDp0dS5hLGNoZWNrbGlzdDpudS5hLGNvZGU6b3UuYSxjb2RlX2Jsb2NrOnN1LmEsY29tYmluZV9jZWxsczpjdS5hLGRlbGV0ZV9jb2w6bHUuYSxkZWxldGVfcm93OmZ1LmEsZGVsZXRlX3RhYmxlOmR1LmEsZ2l0aHViOm11LmEsaHI6eXUuYSxpbWFnZTpidS5hLGl0YWxpYzprdS5hLGxpbms6Q3UuYSxtZW50aW9uOk11LmEsb2w6VHUuYSxwYXJhZ3JhcGg6RXUuYSxxdW90ZTpSdS5hLHJlZG86UHUuYSxyZW1vdmU6QnUuYSxzdHJpa2U6RnUuYSx0YWJsZTokdS5hLHVsOkx1LmEsdW5kZXJsaW5lOkp1LmEsdW5kbzpIdS5hfSxVdT17fSxHdT0wLFh1PU9iamVjdC5lbnRyaWVzKEt1KTtHdTxYdS5sZW5ndGg7R3UrKyl7dmFyIFl1PUpjKFh1W0d1XSwyKSxadT1ZdVswXSxRdT1ZdVsxXTtVdVsiaWNvbl8iK1p1XT1RdX12YXIgdGw9e2NvbXBvbmVudHM6VXUscHJvcHM6e25hbWU6e30sc2l6ZTp7ZGVmYXVsdDoibm9ybWFsIn0sbW9kaWZpZXI6e2RlZmF1bHQ6bnVsbH0sZml4QWxpZ246e2RlZmF1bHQ6ITB9fSxjb21wdXRlZDp7aWNvbjpmdW5jdGlvbigpe3JldHVybiJpY29uXyIrdGhpcy5uYW1lfX19LGVsPXRsO24oIjFhZmEiKTtmdW5jdGlvbiBubCh0LGUsbixyLG8saSxzLGEpe3ZhciBjLHU9ImZ1bmN0aW9uIj09PXR5cGVvZiB0P3Qub3B0aW9uczp0O2lmKGUmJih1LnJlbmRlcj1lLHUuc3RhdGljUmVuZGVyRm5zPW4sdS5fY29tcGlsZWQ9ITApLHImJih1LmZ1bmN0aW9uYWw9ITApLGkmJih1Ll9zY29wZUlkPSJkYXRhLXYtIitpKSxzPyhjPWZ1bmN0aW9uKHQpe3Q9dHx8dGhpcy4kdm5vZGUmJnRoaXMuJHZub2RlLnNzckNvbnRleHR8fHRoaXMucGFyZW50JiZ0aGlzLnBhcmVudC4kdm5vZGUmJnRoaXMucGFyZW50LiR2bm9kZS5zc3JDb250ZXh0LHR8fCJ1bmRlZmluZWQiPT09dHlwZW9mIF9fVlVFX1NTUl9DT05URVhUX198fCh0PV9fVlVFX1NTUl9DT05URVhUX18pLG8mJm8uY2FsbCh0aGlzLHQpLHQmJnQuX3JlZ2lzdGVyZWRDb21wb25lbnRzJiZ0Ll9yZWdpc3RlcmVkQ29tcG9uZW50cy5hZGQocyl9LHUuX3NzclJlZ2lzdGVyPWMpOm8mJihjPWE/ZnVuY3Rpb24oKXtvLmNhbGwodGhpcywodS5mdW5jdGlvbmFsP3RoaXMucGFyZW50OnRoaXMpLiRyb290LiRvcHRpb25zLnNoYWRvd1Jvb3QpfTpvKSxjKWlmKHUuZnVuY3Rpb25hbCl7dS5faW5qZWN0U3R5bGVzPWM7dmFyIGw9dS5yZW5kZXI7dS5yZW5kZXI9ZnVuY3Rpb24odCxlKXtyZXR1cm4gYy5jYWxsKGUpLGwodCxlKX19ZWxzZXt2YXIgaD11LmJlZm9yZUNyZWF0ZTt1LmJlZm9yZUNyZWF0ZT1oP1tdLmNvbmNhdChoLGMpOltjXX1yZXR1cm57ZXhwb3J0czp0LG9wdGlvbnM6dX19dmFyIHJsPW5sKGVsLF9jLEZjLCExLG51bGwsImU1OWY3ODMyIixudWxsKSxvbD1ybC5leHBvcnRzO24oIjNjZTQiKTtmdW5jdGlvbiBpbCh0LGUsbil7Zm9yKHZhciByPTA7O3IrKyl7aWYocj09dC5jaGlsZENvdW50fHxyPT1lLmNoaWxkQ291bnQpcmV0dXJuIHQuY2hpbGRDb3VudD09ZS5jaGlsZENvdW50P251bGw6bjt2YXIgbz10LmNoaWxkKHIpLGk9ZS5jaGlsZChyKTtpZihvIT1pKXtpZighby5zYW1lTWFya3VwKGkpKXJldHVybiBuO2lmKG8uaXNUZXh0JiZvLnRleHQhPWkudGV4dCl7Zm9yKHZhciBzPTA7by50ZXh0W3NdPT1pLnRleHRbc107cysrKW4rKztyZXR1cm4gbn1pZihvLmNvbnRlbnQuc2l6ZXx8aS5jb250ZW50LnNpemUpe3ZhciBhPWlsKG8uY29udGVudCxpLmNvbnRlbnQsbisxKTtpZihudWxsIT1hKXJldHVybiBhfW4rPW8ubm9kZVNpemV9ZWxzZSBuKz1vLm5vZGVTaXplfX1mdW5jdGlvbiBzbCh0LGUsbixyKXtmb3IodmFyIG89dC5jaGlsZENvdW50LGk9ZS5jaGlsZENvdW50Ozspe2lmKDA9PW98fDA9PWkpcmV0dXJuIG89PWk/bnVsbDp7YTpuLGI6cn07dmFyIHM9dC5jaGlsZCgtLW8pLGE9ZS5jaGlsZCgtLWkpLGM9cy5ub2RlU2l6ZTtpZihzIT1hKXtpZighcy5zYW1lTWFya3VwKGEpKXJldHVybnthOm4sYjpyfTtpZihzLmlzVGV4dCYmcy50ZXh0IT1hLnRleHQpe3ZhciB1PTAsbD1NYXRoLm1pbihzLnRleHQubGVuZ3RoLGEudGV4dC5sZW5ndGgpO3doaWxlKHU8bCYmcy50ZXh0W3MudGV4dC5sZW5ndGgtdS0xXT09YS50ZXh0W2EudGV4dC5sZW5ndGgtdS0xXSl1Kyssbi0tLHItLTtyZXR1cm57YTpuLGI6cn19aWYocy5jb250ZW50LnNpemV8fGEuY29udGVudC5zaXplKXt2YXIgaD1zbChzLmNvbnRlbnQsYS5jb250ZW50LG4tMSxyLTEpO2lmKGgpcmV0dXJuIGh9bi09YyxyLT1jfWVsc2Ugbi09YyxyLT1jfX12YXIgYWw9ZnVuY3Rpb24odCxlKXtpZih0aGlzLmNvbnRlbnQ9dCx0aGlzLnNpemU9ZXx8MCxudWxsPT1lKWZvcih2YXIgbj0wO248dC5sZW5ndGg7bisrKXRoaXMuc2l6ZSs9dFtuXS5ub2RlU2l6ZX0sY2w9e2ZpcnN0Q2hpbGQ6e2NvbmZpZ3VyYWJsZTohMH0sbGFzdENoaWxkOntjb25maWd1cmFibGU6ITB9LGNoaWxkQ291bnQ6e2NvbmZpZ3VyYWJsZTohMH19O2FsLnByb3RvdHlwZS5ub2Rlc0JldHdlZW49ZnVuY3Rpb24odCxlLG4scixvKXt2b2lkIDA9PT1yJiYocj0wKTtmb3IodmFyIGk9MCxzPTA7czxlO2krKyl7dmFyIGE9dGhpcy5jb250ZW50W2ldLGM9cythLm5vZGVTaXplO2lmKGM+dCYmITEhPT1uKGEscitzLG8saSkmJmEuY29udGVudC5zaXplKXt2YXIgdT1zKzE7YS5ub2Rlc0JldHdlZW4oTWF0aC5tYXgoMCx0LXUpLE1hdGgubWluKGEuY29udGVudC5zaXplLGUtdSksbixyK3UpfXM9Y319LGFsLnByb3RvdHlwZS5kZXNjZW5kYW50cz1mdW5jdGlvbih0KXt0aGlzLm5vZGVzQmV0d2VlbigwLHRoaXMuc2l6ZSx0KX0sYWwucHJvdG90eXBlLnRleHRCZXR3ZWVuPWZ1bmN0aW9uKHQsZSxuLHIpe3ZhciBvPSIiLGk9ITA7cmV0dXJuIHRoaXMubm9kZXNCZXR3ZWVuKHQsZSwoZnVuY3Rpb24ocyxhKXtzLmlzVGV4dD8obys9cy50ZXh0LnNsaWNlKE1hdGgubWF4KHQsYSktYSxlLWEpLGk9IW4pOnMuaXNMZWFmJiZyPyhvKz1yLGk9IW4pOiFpJiZzLmlzQmxvY2smJihvKz1uLGk9ITApfSksMCksb30sYWwucHJvdG90eXBlLmFwcGVuZD1mdW5jdGlvbih0KXtpZighdC5zaXplKXJldHVybiB0aGlzO2lmKCF0aGlzLnNpemUpcmV0dXJuIHQ7dmFyIGU9dGhpcy5sYXN0Q2hpbGQsbj10LmZpcnN0Q2hpbGQscj10aGlzLmNvbnRlbnQuc2xpY2UoKSxvPTA7Zm9yKGUuaXNUZXh0JiZlLnNhbWVNYXJrdXAobikmJihyW3IubGVuZ3RoLTFdPWUud2l0aFRleHQoZS50ZXh0K24udGV4dCksbz0xKTtvPHQuY29udGVudC5sZW5ndGg7bysrKXIucHVzaCh0LmNvbnRlbnRbb10pO3JldHVybiBuZXcgYWwocix0aGlzLnNpemUrdC5zaXplKX0sYWwucHJvdG90eXBlLmN1dD1mdW5jdGlvbih0LGUpe2lmKG51bGw9PWUmJihlPXRoaXMuc2l6ZSksMD09dCYmZT09dGhpcy5zaXplKXJldHVybiB0aGlzO3ZhciBuPVtdLHI9MDtpZihlPnQpZm9yKHZhciBvPTAsaT0wO2k8ZTtvKyspe3ZhciBzPXRoaXMuY29udGVudFtvXSxhPWkrcy5ub2RlU2l6ZTthPnQmJigoaTx0fHxhPmUpJiYocz1zLmlzVGV4dD9zLmN1dChNYXRoLm1heCgwLHQtaSksTWF0aC5taW4ocy50ZXh0Lmxlbmd0aCxlLWkpKTpzLmN1dChNYXRoLm1heCgwLHQtaS0xKSxNYXRoLm1pbihzLmNvbnRlbnQuc2l6ZSxlLWktMSkpKSxuLnB1c2gocykscis9cy5ub2RlU2l6ZSksaT1hfXJldHVybiBuZXcgYWwobixyKX0sYWwucHJvdG90eXBlLmN1dEJ5SW5kZXg9ZnVuY3Rpb24odCxlKXtyZXR1cm4gdD09ZT9hbC5lbXB0eTowPT10JiZlPT10aGlzLmNvbnRlbnQubGVuZ3RoP3RoaXM6bmV3IGFsKHRoaXMuY29udGVudC5zbGljZSh0LGUpKX0sYWwucHJvdG90eXBlLnJlcGxhY2VDaGlsZD1mdW5jdGlvbih0LGUpe3ZhciBuPXRoaXMuY29udGVudFt0XTtpZihuPT1lKXJldHVybiB0aGlzO3ZhciByPXRoaXMuY29udGVudC5zbGljZSgpLG89dGhpcy5zaXplK2Uubm9kZVNpemUtbi5ub2RlU2l6ZTtyZXR1cm4gclt0XT1lLG5ldyBhbChyLG8pfSxhbC5wcm90b3R5cGUuYWRkVG9TdGFydD1mdW5jdGlvbih0KXtyZXR1cm4gbmV3IGFsKFt0XS5jb25jYXQodGhpcy5jb250ZW50KSx0aGlzLnNpemUrdC5ub2RlU2l6ZSl9LGFsLnByb3RvdHlwZS5hZGRUb0VuZD1mdW5jdGlvbih0KXtyZXR1cm4gbmV3IGFsKHRoaXMuY29udGVudC5jb25jYXQodCksdGhpcy5zaXplK3Qubm9kZVNpemUpfSxhbC5wcm90b3R5cGUuZXE9ZnVuY3Rpb24odCl7aWYodGhpcy5jb250ZW50Lmxlbmd0aCE9dC5jb250ZW50Lmxlbmd0aClyZXR1cm4hMTtmb3IodmFyIGU9MDtlPHRoaXMuY29udGVudC5sZW5ndGg7ZSsrKWlmKCF0aGlzLmNvbnRlbnRbZV0uZXEodC5jb250ZW50W2VdKSlyZXR1cm4hMTtyZXR1cm4hMH0sY2wuZmlyc3RDaGlsZC5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jb250ZW50Lmxlbmd0aD90aGlzLmNvbnRlbnRbMF06bnVsbH0sY2wubGFzdENoaWxkLmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLmNvbnRlbnQubGVuZ3RoP3RoaXMuY29udGVudFt0aGlzLmNvbnRlbnQubGVuZ3RoLTFdOm51bGx9LGNsLmNoaWxkQ291bnQuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY29udGVudC5sZW5ndGh9LGFsLnByb3RvdHlwZS5jaGlsZD1mdW5jdGlvbih0KXt2YXIgZT10aGlzLmNvbnRlbnRbdF07aWYoIWUpdGhyb3cgbmV3IFJhbmdlRXJyb3IoIkluZGV4ICIrdCsiIG91dCBvZiByYW5nZSBmb3IgIit0aGlzKTtyZXR1cm4gZX0sYWwucHJvdG90eXBlLm1heWJlQ2hpbGQ9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuY29udGVudFt0XX0sYWwucHJvdG90eXBlLmZvckVhY2g9ZnVuY3Rpb24odCl7Zm9yKHZhciBlPTAsbj0wO2U8dGhpcy5jb250ZW50Lmxlbmd0aDtlKyspe3ZhciByPXRoaXMuY29udGVudFtlXTt0KHIsbixlKSxuKz1yLm5vZGVTaXplfX0sYWwucHJvdG90eXBlLmZpbmREaWZmU3RhcnQ9ZnVuY3Rpb24odCxlKXtyZXR1cm4gdm9pZCAwPT09ZSYmKGU9MCksaWwodGhpcyx0LGUpfSxhbC5wcm90b3R5cGUuZmluZERpZmZFbmQ9ZnVuY3Rpb24odCxlLG4pe3JldHVybiB2b2lkIDA9PT1lJiYoZT10aGlzLnNpemUpLHZvaWQgMD09PW4mJihuPXQuc2l6ZSksc2wodGhpcyx0LGUsbil9LGFsLnByb3RvdHlwZS5maW5kSW5kZXg9ZnVuY3Rpb24odCxlKXtpZih2b2lkIDA9PT1lJiYoZT0tMSksMD09dClyZXR1cm4gbGwoMCx0KTtpZih0PT10aGlzLnNpemUpcmV0dXJuIGxsKHRoaXMuY29udGVudC5sZW5ndGgsdCk7aWYodD50aGlzLnNpemV8fHQ8MCl0aHJvdyBuZXcgUmFuZ2VFcnJvcigiUG9zaXRpb24gIit0KyIgb3V0c2lkZSBvZiBmcmFnbWVudCAoIit0aGlzKyIpIik7Zm9yKHZhciBuPTAscj0wOztuKyspe3ZhciBvPXRoaXMuY2hpbGQobiksaT1yK28ubm9kZVNpemU7aWYoaT49dClyZXR1cm4gaT09dHx8ZT4wP2xsKG4rMSxpKTpsbChuLHIpO3I9aX19LGFsLnByb3RvdHlwZS50b1N0cmluZz1mdW5jdGlvbigpe3JldHVybiI8Iit0aGlzLnRvU3RyaW5nSW5uZXIoKSsiPiJ9LGFsLnByb3RvdHlwZS50b1N0cmluZ0lubmVyPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY29udGVudC5qb2luKCIsICIpfSxhbC5wcm90b3R5cGUudG9KU09OPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY29udGVudC5sZW5ndGg/dGhpcy5jb250ZW50Lm1hcCgoZnVuY3Rpb24odCl7cmV0dXJuIHQudG9KU09OKCl9KSk6bnVsbH0sYWwuZnJvbUpTT049ZnVuY3Rpb24odCxlKXtpZighZSlyZXR1cm4gYWwuZW1wdHk7aWYoIUFycmF5LmlzQXJyYXkoZSkpdGhyb3cgbmV3IFJhbmdlRXJyb3IoIkludmFsaWQgaW5wdXQgZm9yIEZyYWdtZW50LmZyb21KU09OIik7cmV0dXJuIG5ldyBhbChlLm1hcCh0Lm5vZGVGcm9tSlNPTikpfSxhbC5mcm9tQXJyYXk9ZnVuY3Rpb24odCl7aWYoIXQubGVuZ3RoKXJldHVybiBhbC5lbXB0eTtmb3IodmFyIGUsbj0wLHI9MDtyPHQubGVuZ3RoO3IrKyl7dmFyIG89dFtyXTtuKz1vLm5vZGVTaXplLHImJm8uaXNUZXh0JiZ0W3ItMV0uc2FtZU1hcmt1cChvKT8oZXx8KGU9dC5zbGljZSgwLHIpKSxlW2UubGVuZ3RoLTFdPW8ud2l0aFRleHQoZVtlLmxlbmd0aC0xXS50ZXh0K28udGV4dCkpOmUmJmUucHVzaChvKX1yZXR1cm4gbmV3IGFsKGV8fHQsbil9LGFsLmZyb209ZnVuY3Rpb24odCl7aWYoIXQpcmV0dXJuIGFsLmVtcHR5O2lmKHQgaW5zdGFuY2VvZiBhbClyZXR1cm4gdDtpZihBcnJheS5pc0FycmF5KHQpKXJldHVybiB0aGlzLmZyb21BcnJheSh0KTtpZih0LmF0dHJzKXJldHVybiBuZXcgYWwoW3RdLHQubm9kZVNpemUpO3Rocm93IG5ldyBSYW5nZUVycm9yKCJDYW4gbm90IGNvbnZlcnQgIit0KyIgdG8gYSBGcmFnbWVudCIrKHQubm9kZXNCZXR3ZWVuPyIgKGxvb2tzIGxpa2UgbXVsdGlwbGUgdmVyc2lvbnMgb2YgcHJvc2VtaXJyb3ItbW9kZWwgd2VyZSBsb2FkZWQpIjoiIikpfSxPYmplY3QuZGVmaW5lUHJvcGVydGllcyhhbC5wcm90b3R5cGUsY2wpO3ZhciB1bD17aW5kZXg6MCxvZmZzZXQ6MH07ZnVuY3Rpb24gbGwodCxlKXtyZXR1cm4gdWwuaW5kZXg9dCx1bC5vZmZzZXQ9ZSx1bH1mdW5jdGlvbiBobCh0LGUpe2lmKHQ9PT1lKXJldHVybiEwO2lmKCF0fHwib2JqZWN0IiE9dHlwZW9mIHR8fCFlfHwib2JqZWN0IiE9dHlwZW9mIGUpcmV0dXJuITE7dmFyIG49QXJyYXkuaXNBcnJheSh0KTtpZihBcnJheS5pc0FycmF5KGUpIT1uKXJldHVybiExO2lmKG4pe2lmKHQubGVuZ3RoIT1lLmxlbmd0aClyZXR1cm4hMTtmb3IodmFyIHI9MDtyPHQubGVuZ3RoO3IrKylpZighaGwodFtyXSxlW3JdKSlyZXR1cm4hMX1lbHNle2Zvcih2YXIgbyBpbiB0KWlmKCEobyBpbiBlKXx8IWhsKHRbb10sZVtvXSkpcmV0dXJuITE7Zm9yKHZhciBpIGluIGUpaWYoIShpIGluIHQpKXJldHVybiExfXJldHVybiEwfWFsLmVtcHR5PW5ldyBhbChbXSwwKTt2YXIgZmw9ZnVuY3Rpb24odCxlKXt0aGlzLnR5cGU9dCx0aGlzLmF0dHJzPWV9O2Z1bmN0aW9uIHBsKHQpe3ZhciBlPUVycm9yLmNhbGwodGhpcyx0KTtyZXR1cm4gZS5fX3Byb3RvX189cGwucHJvdG90eXBlLGV9ZmwucHJvdG90eXBlLmFkZFRvU2V0PWZ1bmN0aW9uKHQpe2Zvcih2YXIgZSxuPSExLHI9MDtyPHQubGVuZ3RoO3IrKyl7dmFyIG89dFtyXTtpZih0aGlzLmVxKG8pKXJldHVybiB0O2lmKHRoaXMudHlwZS5leGNsdWRlcyhvLnR5cGUpKWV8fChlPXQuc2xpY2UoMCxyKSk7ZWxzZXtpZihvLnR5cGUuZXhjbHVkZXModGhpcy50eXBlKSlyZXR1cm4gdDshbiYmby50eXBlLnJhbms+dGhpcy50eXBlLnJhbmsmJihlfHwoZT10LnNsaWNlKDAscikpLGUucHVzaCh0aGlzKSxuPSEwKSxlJiZlLnB1c2gobyl9fXJldHVybiBlfHwoZT10LnNsaWNlKCkpLG58fGUucHVzaCh0aGlzKSxlfSxmbC5wcm90b3R5cGUucmVtb3ZlRnJvbVNldD1mdW5jdGlvbih0KXtmb3IodmFyIGU9MDtlPHQubGVuZ3RoO2UrKylpZih0aGlzLmVxKHRbZV0pKXJldHVybiB0LnNsaWNlKDAsZSkuY29uY2F0KHQuc2xpY2UoZSsxKSk7cmV0dXJuIHR9LGZsLnByb3RvdHlwZS5pc0luU2V0PWZ1bmN0aW9uKHQpe2Zvcih2YXIgZT0wO2U8dC5sZW5ndGg7ZSsrKWlmKHRoaXMuZXEodFtlXSkpcmV0dXJuITA7cmV0dXJuITF9LGZsLnByb3RvdHlwZS5lcT1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcz09dHx8dGhpcy50eXBlPT10LnR5cGUmJmhsKHRoaXMuYXR0cnMsdC5hdHRycyl9LGZsLnByb3RvdHlwZS50b0pTT049ZnVuY3Rpb24oKXt2YXIgdD17dHlwZTp0aGlzLnR5cGUubmFtZX07Zm9yKHZhciBlIGluIHRoaXMuYXR0cnMpe3QuYXR0cnM9dGhpcy5hdHRyczticmVha31yZXR1cm4gdH0sZmwuZnJvbUpTT049ZnVuY3Rpb24odCxlKXtpZighZSl0aHJvdyBuZXcgUmFuZ2VFcnJvcigiSW52YWxpZCBpbnB1dCBmb3IgTWFyay5mcm9tSlNPTiIpO3ZhciBuPXQubWFya3NbZS50eXBlXTtpZighbil0aHJvdyBuZXcgUmFuZ2VFcnJvcigiVGhlcmUgaXMgbm8gbWFyayB0eXBlICIrZS50eXBlKyIgaW4gdGhpcyBzY2hlbWEiKTtyZXR1cm4gbi5jcmVhdGUoZS5hdHRycyl9LGZsLnNhbWVTZXQ9ZnVuY3Rpb24odCxlKXtpZih0PT1lKXJldHVybiEwO2lmKHQubGVuZ3RoIT1lLmxlbmd0aClyZXR1cm4hMTtmb3IodmFyIG49MDtuPHQubGVuZ3RoO24rKylpZighdFtuXS5lcShlW25dKSlyZXR1cm4hMTtyZXR1cm4hMH0sZmwuc2V0RnJvbT1mdW5jdGlvbih0KXtpZighdHx8MD09dC5sZW5ndGgpcmV0dXJuIGZsLm5vbmU7aWYodCBpbnN0YW5jZW9mIGZsKXJldHVyblt0XTt2YXIgZT10LnNsaWNlKCk7cmV0dXJuIGUuc29ydCgoZnVuY3Rpb24odCxlKXtyZXR1cm4gdC50eXBlLnJhbmstZS50eXBlLnJhbmt9KSksZX0sZmwubm9uZT1bXSxwbC5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShFcnJvci5wcm90b3R5cGUpLHBsLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1wbCxwbC5wcm90b3R5cGUubmFtZT0iUmVwbGFjZUVycm9yIjt2YXIgZGw9ZnVuY3Rpb24odCxlLG4pe3RoaXMuY29udGVudD10LHRoaXMub3BlblN0YXJ0PWUsdGhpcy5vcGVuRW5kPW59LHZsPXtzaXplOntjb25maWd1cmFibGU6ITB9fTtmdW5jdGlvbiBtbCh0LGUsbil7dmFyIHI9dC5maW5kSW5kZXgoZSksbz1yLmluZGV4LGk9ci5vZmZzZXQscz10Lm1heWJlQ2hpbGQobyksYT10LmZpbmRJbmRleChuKSxjPWEuaW5kZXgsdT1hLm9mZnNldDtpZihpPT1lfHxzLmlzVGV4dCl7aWYodSE9biYmIXQuY2hpbGQoYykuaXNUZXh0KXRocm93IG5ldyBSYW5nZUVycm9yKCJSZW1vdmluZyBub24tZmxhdCByYW5nZSIpO3JldHVybiB0LmN1dCgwLGUpLmFwcGVuZCh0LmN1dChuKSl9aWYobyE9Yyl0aHJvdyBuZXcgUmFuZ2VFcnJvcigiUmVtb3Zpbmcgbm9uLWZsYXQgcmFuZ2UiKTtyZXR1cm4gdC5yZXBsYWNlQ2hpbGQobyxzLmNvcHkobWwocy5jb250ZW50LGUtaS0xLG4taS0xKSkpfWZ1bmN0aW9uIGdsKHQsZSxuLHIpe3ZhciBvPXQuZmluZEluZGV4KGUpLGk9by5pbmRleCxzPW8ub2Zmc2V0LGE9dC5tYXliZUNoaWxkKGkpO2lmKHM9PWV8fGEuaXNUZXh0KXJldHVybiByJiYhci5jYW5SZXBsYWNlKGksaSxuKT9udWxsOnQuY3V0KDAsZSkuYXBwZW5kKG4pLmFwcGVuZCh0LmN1dChlKSk7dmFyIGM9Z2woYS5jb250ZW50LGUtcy0xLG4pO3JldHVybiBjJiZ0LnJlcGxhY2VDaGlsZChpLGEuY29weShjKSl9ZnVuY3Rpb24geWwodCxlLG4pe2lmKG4ub3BlblN0YXJ0PnQuZGVwdGgpdGhyb3cgbmV3IHBsKCJJbnNlcnRlZCBjb250ZW50IGRlZXBlciB0aGFuIGluc2VydGlvbiBwb3NpdGlvbiIpO2lmKHQuZGVwdGgtbi5vcGVuU3RhcnQhPWUuZGVwdGgtbi5vcGVuRW5kKXRocm93IG5ldyBwbCgiSW5jb25zaXN0ZW50IG9wZW4gZGVwdGhzIik7cmV0dXJuIHdsKHQsZSxuLDApfWZ1bmN0aW9uIHdsKHQsZSxuLHIpe3ZhciBvPXQuaW5kZXgociksaT10Lm5vZGUocik7aWYobz09ZS5pbmRleChyKSYmcjx0LmRlcHRoLW4ub3BlblN0YXJ0KXt2YXIgcz13bCh0LGUsbixyKzEpO3JldHVybiBpLmNvcHkoaS5jb250ZW50LnJlcGxhY2VDaGlsZChvLHMpKX1pZihuLmNvbnRlbnQuc2l6ZSl7aWYobi5vcGVuU3RhcnR8fG4ub3BlbkVuZHx8dC5kZXB0aCE9cnx8ZS5kZXB0aCE9cil7dmFyIGE9Tmwobix0KSxjPWEuc3RhcnQsdT1hLmVuZDtyZXR1cm4gQ2woaSxPbCh0LGMsdSxlLHIpKX12YXIgbD10LnBhcmVudCxoPWwuY29udGVudDtyZXR1cm4gQ2wobCxoLmN1dCgwLHQucGFyZW50T2Zmc2V0KS5hcHBlbmQobi5jb250ZW50KS5hcHBlbmQoaC5jdXQoZS5wYXJlbnRPZmZzZXQpKSl9cmV0dXJuIENsKGksTWwodCxlLHIpKX1mdW5jdGlvbiBibCh0LGUpe2lmKCFlLnR5cGUuY29tcGF0aWJsZUNvbnRlbnQodC50eXBlKSl0aHJvdyBuZXcgcGwoIkNhbm5vdCBqb2luICIrZS50eXBlLm5hbWUrIiBvbnRvICIrdC50eXBlLm5hbWUpfWZ1bmN0aW9uIHhsKHQsZSxuKXt2YXIgcj10Lm5vZGUobik7cmV0dXJuIGJsKHIsZS5ub2RlKG4pKSxyfWZ1bmN0aW9uIGtsKHQsZSl7dmFyIG49ZS5sZW5ndGgtMTtuPj0wJiZ0LmlzVGV4dCYmdC5zYW1lTWFya3VwKGVbbl0pP2Vbbl09dC53aXRoVGV4dChlW25dLnRleHQrdC50ZXh0KTplLnB1c2godCl9ZnVuY3Rpb24gU2wodCxlLG4scil7dmFyIG89KGV8fHQpLm5vZGUobiksaT0wLHM9ZT9lLmluZGV4KG4pOm8uY2hpbGRDb3VudDt0JiYoaT10LmluZGV4KG4pLHQuZGVwdGg+bj9pKys6dC50ZXh0T2Zmc2V0JiYoa2wodC5ub2RlQWZ0ZXIsciksaSsrKSk7Zm9yKHZhciBhPWk7YTxzO2ErKylrbChvLmNoaWxkKGEpLHIpO2UmJmUuZGVwdGg9PW4mJmUudGV4dE9mZnNldCYma2woZS5ub2RlQmVmb3JlLHIpfWZ1bmN0aW9uIENsKHQsZSl7aWYoIXQudHlwZS52YWxpZENvbnRlbnQoZSkpdGhyb3cgbmV3IHBsKCJJbnZhbGlkIGNvbnRlbnQgZm9yIG5vZGUgIit0LnR5cGUubmFtZSk7cmV0dXJuIHQuY29weShlKX1mdW5jdGlvbiBPbCh0LGUsbixyLG8pe3ZhciBpPXQuZGVwdGg+byYmeGwodCxlLG8rMSkscz1yLmRlcHRoPm8mJnhsKG4scixvKzEpLGE9W107cmV0dXJuIFNsKG51bGwsdCxvLGEpLGkmJnMmJmUuaW5kZXgobyk9PW4uaW5kZXgobyk/KGJsKGkscyksa2woQ2woaSxPbCh0LGUsbixyLG8rMSkpLGEpKTooaSYma2woQ2woaSxNbCh0LGUsbysxKSksYSksU2woZSxuLG8sYSkscyYma2woQ2wocyxNbChuLHIsbysxKSksYSkpLFNsKHIsbnVsbCxvLGEpLG5ldyBhbChhKX1mdW5jdGlvbiBNbCh0LGUsbil7dmFyIHI9W107aWYoU2wobnVsbCx0LG4sciksdC5kZXB0aD5uKXt2YXIgbz14bCh0LGUsbisxKTtrbChDbChvLE1sKHQsZSxuKzEpKSxyKX1yZXR1cm4gU2woZSxudWxsLG4sciksbmV3IGFsKHIpfWZ1bmN0aW9uIE5sKHQsZSl7Zm9yKHZhciBuPWUuZGVwdGgtdC5vcGVuU3RhcnQscj1lLm5vZGUobiksbz1yLmNvcHkodC5jb250ZW50KSxpPW4tMTtpPj0wO2ktLSlvPWUubm9kZShpKS5jb3B5KGFsLmZyb20obykpO3JldHVybntzdGFydDpvLnJlc29sdmVOb0NhY2hlKHQub3BlblN0YXJ0K24pLGVuZDpvLnJlc29sdmVOb0NhY2hlKG8uY29udGVudC5zaXplLXQub3BlbkVuZC1uKX19dmwuc2l6ZS5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jb250ZW50LnNpemUtdGhpcy5vcGVuU3RhcnQtdGhpcy5vcGVuRW5kfSxkbC5wcm90b3R5cGUuaW5zZXJ0QXQ9ZnVuY3Rpb24odCxlKXt2YXIgbj1nbCh0aGlzLmNvbnRlbnQsdCt0aGlzLm9wZW5TdGFydCxlLG51bGwpO3JldHVybiBuJiZuZXcgZGwobix0aGlzLm9wZW5TdGFydCx0aGlzLm9wZW5FbmQpfSxkbC5wcm90b3R5cGUucmVtb3ZlQmV0d2Vlbj1mdW5jdGlvbih0LGUpe3JldHVybiBuZXcgZGwobWwodGhpcy5jb250ZW50LHQrdGhpcy5vcGVuU3RhcnQsZSt0aGlzLm9wZW5TdGFydCksdGhpcy5vcGVuU3RhcnQsdGhpcy5vcGVuRW5kKX0sZGwucHJvdG90eXBlLmVxPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLmNvbnRlbnQuZXEodC5jb250ZW50KSYmdGhpcy5vcGVuU3RhcnQ9PXQub3BlblN0YXJ0JiZ0aGlzLm9wZW5FbmQ9PXQub3BlbkVuZH0sZGwucHJvdG90eXBlLnRvU3RyaW5nPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY29udGVudCsiKCIrdGhpcy5vcGVuU3RhcnQrIiwiK3RoaXMub3BlbkVuZCsiKSJ9LGRsLnByb3RvdHlwZS50b0pTT049ZnVuY3Rpb24oKXtpZighdGhpcy5jb250ZW50LnNpemUpcmV0dXJuIG51bGw7dmFyIHQ9e2NvbnRlbnQ6dGhpcy5jb250ZW50LnRvSlNPTigpfTtyZXR1cm4gdGhpcy5vcGVuU3RhcnQ+MCYmKHQub3BlblN0YXJ0PXRoaXMub3BlblN0YXJ0KSx0aGlzLm9wZW5FbmQ+MCYmKHQub3BlbkVuZD10aGlzLm9wZW5FbmQpLHR9LGRsLmZyb21KU09OPWZ1bmN0aW9uKHQsZSl7aWYoIWUpcmV0dXJuIGRsLmVtcHR5O3ZhciBuPWUub3BlblN0YXJ0fHwwLHI9ZS5vcGVuRW5kfHwwO2lmKCJudW1iZXIiIT10eXBlb2Ygbnx8Im51bWJlciIhPXR5cGVvZiByKXRocm93IG5ldyBSYW5nZUVycm9yKCJJbnZhbGlkIGlucHV0IGZvciBTbGljZS5mcm9tSlNPTiIpO3JldHVybiBuZXcgZGwoYWwuZnJvbUpTT04odCxlLmNvbnRlbnQpLGUub3BlblN0YXJ0fHwwLGUub3BlbkVuZHx8MCl9LGRsLm1heE9wZW49ZnVuY3Rpb24odCxlKXt2b2lkIDA9PT1lJiYoZT0hMCk7Zm9yKHZhciBuPTAscj0wLG89dC5maXJzdENoaWxkO28mJiFvLmlzTGVhZiYmKGV8fCFvLnR5cGUuc3BlYy5pc29sYXRpbmcpO289by5maXJzdENoaWxkKW4rKztmb3IodmFyIGk9dC5sYXN0Q2hpbGQ7aSYmIWkuaXNMZWFmJiYoZXx8IWkudHlwZS5zcGVjLmlzb2xhdGluZyk7aT1pLmxhc3RDaGlsZClyKys7cmV0dXJuIG5ldyBkbCh0LG4scil9LE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKGRsLnByb3RvdHlwZSx2bCksZGwuZW1wdHk9bmV3IGRsKGFsLmVtcHR5LDAsMCk7dmFyIFRsPWZ1bmN0aW9uKHQsZSxuKXt0aGlzLnBvcz10LHRoaXMucGF0aD1lLHRoaXMuZGVwdGg9ZS5sZW5ndGgvMy0xLHRoaXMucGFyZW50T2Zmc2V0PW59LEFsPXtwYXJlbnQ6e2NvbmZpZ3VyYWJsZTohMH0sZG9jOntjb25maWd1cmFibGU6ITB9LHRleHRPZmZzZXQ6e2NvbmZpZ3VyYWJsZTohMH0sbm9kZUFmdGVyOntjb25maWd1cmFibGU6ITB9LG5vZGVCZWZvcmU6e2NvbmZpZ3VyYWJsZTohMH19O1RsLnByb3RvdHlwZS5yZXNvbHZlRGVwdGg9ZnVuY3Rpb24odCl7cmV0dXJuIG51bGw9PXQ/dGhpcy5kZXB0aDp0PDA/dGhpcy5kZXB0aCt0OnR9LEFsLnBhcmVudC5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5ub2RlKHRoaXMuZGVwdGgpfSxBbC5kb2MuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubm9kZSgwKX0sVGwucHJvdG90eXBlLm5vZGU9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMucGF0aFszKnRoaXMucmVzb2x2ZURlcHRoKHQpXX0sVGwucHJvdG90eXBlLmluZGV4PWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLnBhdGhbMyp0aGlzLnJlc29sdmVEZXB0aCh0KSsxXX0sVGwucHJvdG90eXBlLmluZGV4QWZ0ZXI9ZnVuY3Rpb24odCl7cmV0dXJuIHQ9dGhpcy5yZXNvbHZlRGVwdGgodCksdGhpcy5pbmRleCh0KSsodCE9dGhpcy5kZXB0aHx8dGhpcy50ZXh0T2Zmc2V0PzE6MCl9LFRsLnByb3RvdHlwZS5zdGFydD1mdW5jdGlvbih0KXtyZXR1cm4gdD10aGlzLnJlc29sdmVEZXB0aCh0KSwwPT10PzA6dGhpcy5wYXRoWzMqdC0xXSsxfSxUbC5wcm90b3R5cGUuZW5kPWZ1bmN0aW9uKHQpe3JldHVybiB0PXRoaXMucmVzb2x2ZURlcHRoKHQpLHRoaXMuc3RhcnQodCkrdGhpcy5ub2RlKHQpLmNvbnRlbnQuc2l6ZX0sVGwucHJvdG90eXBlLmJlZm9yZT1mdW5jdGlvbih0KXtpZih0PXRoaXMucmVzb2x2ZURlcHRoKHQpLCF0KXRocm93IG5ldyBSYW5nZUVycm9yKCJUaGVyZSBpcyBubyBwb3NpdGlvbiBiZWZvcmUgdGhlIHRvcC1sZXZlbCBub2RlIik7cmV0dXJuIHQ9PXRoaXMuZGVwdGgrMT90aGlzLnBvczp0aGlzLnBhdGhbMyp0LTFdfSxUbC5wcm90b3R5cGUuYWZ0ZXI9ZnVuY3Rpb24odCl7aWYodD10aGlzLnJlc29sdmVEZXB0aCh0KSwhdCl0aHJvdyBuZXcgUmFuZ2VFcnJvcigiVGhlcmUgaXMgbm8gcG9zaXRpb24gYWZ0ZXIgdGhlIHRvcC1sZXZlbCBub2RlIik7cmV0dXJuIHQ9PXRoaXMuZGVwdGgrMT90aGlzLnBvczp0aGlzLnBhdGhbMyp0LTFdK3RoaXMucGF0aFszKnRdLm5vZGVTaXplfSxBbC50ZXh0T2Zmc2V0LmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLnBvcy10aGlzLnBhdGhbdGhpcy5wYXRoLmxlbmd0aC0xXX0sQWwubm9kZUFmdGVyLmdldD1mdW5jdGlvbigpe3ZhciB0PXRoaXMucGFyZW50LGU9dGhpcy5pbmRleCh0aGlzLmRlcHRoKTtpZihlPT10LmNoaWxkQ291bnQpcmV0dXJuIG51bGw7dmFyIG49dGhpcy5wb3MtdGhpcy5wYXRoW3RoaXMucGF0aC5sZW5ndGgtMV0scj10LmNoaWxkKGUpO3JldHVybiBuP3QuY2hpbGQoZSkuY3V0KG4pOnJ9LEFsLm5vZGVCZWZvcmUuZ2V0PWZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5pbmRleCh0aGlzLmRlcHRoKSxlPXRoaXMucG9zLXRoaXMucGF0aFt0aGlzLnBhdGgubGVuZ3RoLTFdO3JldHVybiBlP3RoaXMucGFyZW50LmNoaWxkKHQpLmN1dCgwLGUpOjA9PXQ/bnVsbDp0aGlzLnBhcmVudC5jaGlsZCh0LTEpfSxUbC5wcm90b3R5cGUubWFya3M9ZnVuY3Rpb24oKXt2YXIgdD10aGlzLnBhcmVudCxlPXRoaXMuaW5kZXgoKTtpZigwPT10LmNvbnRlbnQuc2l6ZSlyZXR1cm4gZmwubm9uZTtpZih0aGlzLnRleHRPZmZzZXQpcmV0dXJuIHQuY2hpbGQoZSkubWFya3M7dmFyIG49dC5tYXliZUNoaWxkKGUtMSkscj10Lm1heWJlQ2hpbGQoZSk7aWYoIW4pe3ZhciBvPW47bj1yLHI9b31mb3IodmFyIGk9bi5tYXJrcyxzPTA7czxpLmxlbmd0aDtzKyspITEhPT1pW3NdLnR5cGUuc3BlYy5pbmNsdXNpdmV8fHImJmlbc10uaXNJblNldChyLm1hcmtzKXx8KGk9aVtzLS1dLnJlbW92ZUZyb21TZXQoaSkpO3JldHVybiBpfSxUbC5wcm90b3R5cGUubWFya3NBY3Jvc3M9ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5wYXJlbnQubWF5YmVDaGlsZCh0aGlzLmluZGV4KCkpO2lmKCFlfHwhZS5pc0lubGluZSlyZXR1cm4gbnVsbDtmb3IodmFyIG49ZS5tYXJrcyxyPXQucGFyZW50Lm1heWJlQ2hpbGQodC5pbmRleCgpKSxvPTA7bzxuLmxlbmd0aDtvKyspITEhPT1uW29dLnR5cGUuc3BlYy5pbmNsdXNpdmV8fHImJm5bb10uaXNJblNldChyLm1hcmtzKXx8KG49bltvLS1dLnJlbW92ZUZyb21TZXQobikpO3JldHVybiBufSxUbC5wcm90b3R5cGUuc2hhcmVkRGVwdGg9ZnVuY3Rpb24odCl7Zm9yKHZhciBlPXRoaXMuZGVwdGg7ZT4wO2UtLSlpZih0aGlzLnN0YXJ0KGUpPD10JiZ0aGlzLmVuZChlKT49dClyZXR1cm4gZTtyZXR1cm4gMH0sVGwucHJvdG90eXBlLmJsb2NrUmFuZ2U9ZnVuY3Rpb24odCxlKXtpZih2b2lkIDA9PT10JiYodD10aGlzKSx0LnBvczx0aGlzLnBvcylyZXR1cm4gdC5ibG9ja1JhbmdlKHRoaXMpO2Zvcih2YXIgbj10aGlzLmRlcHRoLSh0aGlzLnBhcmVudC5pbmxpbmVDb250ZW50fHx0aGlzLnBvcz09dC5wb3M/MTowKTtuPj0wO24tLSlpZih0LnBvczw9dGhpcy5lbmQobikmJighZXx8ZSh0aGlzLm5vZGUobikpKSlyZXR1cm4gbmV3IHpsKHRoaXMsdCxuKX0sVGwucHJvdG90eXBlLnNhbWVQYXJlbnQ9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMucG9zLXRoaXMucGFyZW50T2Zmc2V0PT10LnBvcy10LnBhcmVudE9mZnNldH0sVGwucHJvdG90eXBlLm1heD1mdW5jdGlvbih0KXtyZXR1cm4gdC5wb3M+dGhpcy5wb3M/dDp0aGlzfSxUbC5wcm90b3R5cGUubWluPWZ1bmN0aW9uKHQpe3JldHVybiB0LnBvczx0aGlzLnBvcz90OnRoaXN9LFRsLnByb3RvdHlwZS50b1N0cmluZz1mdW5jdGlvbigpe2Zvcih2YXIgdD0iIixlPTE7ZTw9dGhpcy5kZXB0aDtlKyspdCs9KHQ/Ii8iOiIiKSt0aGlzLm5vZGUoZSkudHlwZS5uYW1lKyJfIit0aGlzLmluZGV4KGUtMSk7cmV0dXJuIHQrIjoiK3RoaXMucGFyZW50T2Zmc2V0fSxUbC5yZXNvbHZlPWZ1bmN0aW9uKHQsZSl7aWYoIShlPj0wJiZlPD10LmNvbnRlbnQuc2l6ZSkpdGhyb3cgbmV3IFJhbmdlRXJyb3IoIlBvc2l0aW9uICIrZSsiIG91dCBvZiByYW5nZSIpO2Zvcih2YXIgbj1bXSxyPTAsbz1lLGk9dDs7KXt2YXIgcz1pLmNvbnRlbnQuZmluZEluZGV4KG8pLGE9cy5pbmRleCxjPXMub2Zmc2V0LHU9by1jO2lmKG4ucHVzaChpLGEscitjKSwhdSlicmVhaztpZihpPWkuY2hpbGQoYSksaS5pc1RleHQpYnJlYWs7bz11LTEscis9YysxfXJldHVybiBuZXcgVGwoZSxuLG8pfSxUbC5yZXNvbHZlQ2FjaGVkPWZ1bmN0aW9uKHQsZSl7Zm9yKHZhciBuPTA7bjxFbC5sZW5ndGg7bisrKXt2YXIgcj1FbFtuXTtpZihyLnBvcz09ZSYmci5kb2M9PXQpcmV0dXJuIHJ9dmFyIG89RWxbRGxdPVRsLnJlc29sdmUodCxlKTtyZXR1cm4gRGw9KERsKzEpJVJsLG99LE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKFRsLnByb3RvdHlwZSxBbCk7dmFyIEVsPVtdLERsPTAsUmw9MTIsemw9ZnVuY3Rpb24odCxlLG4pe3RoaXMuJGZyb209dCx0aGlzLiR0bz1lLHRoaXMuZGVwdGg9bn0sUGw9e3N0YXJ0Ontjb25maWd1cmFibGU6ITB9LGVuZDp7Y29uZmlndXJhYmxlOiEwfSxwYXJlbnQ6e2NvbmZpZ3VyYWJsZTohMH0sc3RhcnRJbmRleDp7Y29uZmlndXJhYmxlOiEwfSxlbmRJbmRleDp7Y29uZmlndXJhYmxlOiEwfX07UGwuc3RhcnQuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuJGZyb20uYmVmb3JlKHRoaXMuZGVwdGgrMSl9LFBsLmVuZC5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy4kdG8uYWZ0ZXIodGhpcy5kZXB0aCsxKX0sUGwucGFyZW50LmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLiRmcm9tLm5vZGUodGhpcy5kZXB0aCl9LFBsLnN0YXJ0SW5kZXguZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuJGZyb20uaW5kZXgodGhpcy5kZXB0aCl9LFBsLmVuZEluZGV4LmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLiR0by5pbmRleEFmdGVyKHRoaXMuZGVwdGgpfSxPYmplY3QuZGVmaW5lUHJvcGVydGllcyh6bC5wcm90b3R5cGUsUGwpO3ZhciBJbD1PYmplY3QuY3JlYXRlKG51bGwpLEJsPWZ1bmN0aW9uKHQsZSxuLHIpe3RoaXMudHlwZT10LHRoaXMuYXR0cnM9ZSx0aGlzLmNvbnRlbnQ9bnx8YWwuZW1wdHksdGhpcy5tYXJrcz1yfHxmbC5ub25lfSxfbD17bm9kZVNpemU6e2NvbmZpZ3VyYWJsZTohMH0sY2hpbGRDb3VudDp7Y29uZmlndXJhYmxlOiEwfSx0ZXh0Q29udGVudDp7Y29uZmlndXJhYmxlOiEwfSxmaXJzdENoaWxkOntjb25maWd1cmFibGU6ITB9LGxhc3RDaGlsZDp7Y29uZmlndXJhYmxlOiEwfSxpc0Jsb2NrOntjb25maWd1cmFibGU6ITB9LGlzVGV4dGJsb2NrOntjb25maWd1cmFibGU6ITB9LGlubGluZUNvbnRlbnQ6e2NvbmZpZ3VyYWJsZTohMH0saXNJbmxpbmU6e2NvbmZpZ3VyYWJsZTohMH0saXNUZXh0Ontjb25maWd1cmFibGU6ITB9LGlzTGVhZjp7Y29uZmlndXJhYmxlOiEwfSxpc0F0b206e2NvbmZpZ3VyYWJsZTohMH19O19sLm5vZGVTaXplLmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLmlzTGVhZj8xOjIrdGhpcy5jb250ZW50LnNpemV9LF9sLmNoaWxkQ291bnQuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY29udGVudC5jaGlsZENvdW50fSxCbC5wcm90b3R5cGUuY2hpbGQ9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuY29udGVudC5jaGlsZCh0KX0sQmwucHJvdG90eXBlLm1heWJlQ2hpbGQ9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuY29udGVudC5tYXliZUNoaWxkKHQpfSxCbC5wcm90b3R5cGUuZm9yRWFjaD1mdW5jdGlvbih0KXt0aGlzLmNvbnRlbnQuZm9yRWFjaCh0KX0sQmwucHJvdG90eXBlLm5vZGVzQmV0d2Vlbj1mdW5jdGlvbih0LGUsbixyKXt2b2lkIDA9PT1yJiYocj0wKSx0aGlzLmNvbnRlbnQubm9kZXNCZXR3ZWVuKHQsZSxuLHIsdGhpcyl9LEJsLnByb3RvdHlwZS5kZXNjZW5kYW50cz1mdW5jdGlvbih0KXt0aGlzLm5vZGVzQmV0d2VlbigwLHRoaXMuY29udGVudC5zaXplLHQpfSxfbC50ZXh0Q29udGVudC5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy50ZXh0QmV0d2VlbigwLHRoaXMuY29udGVudC5zaXplLCIiKX0sQmwucHJvdG90eXBlLnRleHRCZXR3ZWVuPWZ1bmN0aW9uKHQsZSxuLHIpe3JldHVybiB0aGlzLmNvbnRlbnQudGV4dEJldHdlZW4odCxlLG4scil9LF9sLmZpcnN0Q2hpbGQuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY29udGVudC5maXJzdENoaWxkfSxfbC5sYXN0Q2hpbGQuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY29udGVudC5sYXN0Q2hpbGR9LEJsLnByb3RvdHlwZS5lcT1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcz09dHx8dGhpcy5zYW1lTWFya3VwKHQpJiZ0aGlzLmNvbnRlbnQuZXEodC5jb250ZW50KX0sQmwucHJvdG90eXBlLnNhbWVNYXJrdXA9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuaGFzTWFya3VwKHQudHlwZSx0LmF0dHJzLHQubWFya3MpfSxCbC5wcm90b3R5cGUuaGFzTWFya3VwPWZ1bmN0aW9uKHQsZSxuKXtyZXR1cm4gdGhpcy50eXBlPT10JiZobCh0aGlzLmF0dHJzLGV8fHQuZGVmYXVsdEF0dHJzfHxJbCkmJmZsLnNhbWVTZXQodGhpcy5tYXJrcyxufHxmbC5ub25lKX0sQmwucHJvdG90eXBlLmNvcHk9ZnVuY3Rpb24odCl7cmV0dXJuIHZvaWQgMD09PXQmJih0PW51bGwpLHQ9PXRoaXMuY29udGVudD90aGlzOm5ldyB0aGlzLmNvbnN0cnVjdG9yKHRoaXMudHlwZSx0aGlzLmF0dHJzLHQsdGhpcy5tYXJrcyl9LEJsLnByb3RvdHlwZS5tYXJrPWZ1bmN0aW9uKHQpe3JldHVybiB0PT10aGlzLm1hcmtzP3RoaXM6bmV3IHRoaXMuY29uc3RydWN0b3IodGhpcy50eXBlLHRoaXMuYXR0cnMsdGhpcy5jb250ZW50LHQpfSxCbC5wcm90b3R5cGUuY3V0PWZ1bmN0aW9uKHQsZSl7cmV0dXJuIDA9PXQmJmU9PXRoaXMuY29udGVudC5zaXplP3RoaXM6dGhpcy5jb3B5KHRoaXMuY29udGVudC5jdXQodCxlKSl9LEJsLnByb3RvdHlwZS5zbGljZT1mdW5jdGlvbih0LGUsbil7aWYodm9pZCAwPT09ZSYmKGU9dGhpcy5jb250ZW50LnNpemUpLHZvaWQgMD09PW4mJihuPSExKSx0PT1lKXJldHVybiBkbC5lbXB0eTt2YXIgcj10aGlzLnJlc29sdmUodCksbz10aGlzLnJlc29sdmUoZSksaT1uPzA6ci5zaGFyZWREZXB0aChlKSxzPXIuc3RhcnQoaSksYT1yLm5vZGUoaSksYz1hLmNvbnRlbnQuY3V0KHIucG9zLXMsby5wb3Mtcyk7cmV0dXJuIG5ldyBkbChjLHIuZGVwdGgtaSxvLmRlcHRoLWkpfSxCbC5wcm90b3R5cGUucmVwbGFjZT1mdW5jdGlvbih0LGUsbil7cmV0dXJuIHlsKHRoaXMucmVzb2x2ZSh0KSx0aGlzLnJlc29sdmUoZSksbil9LEJsLnByb3RvdHlwZS5ub2RlQXQ9ZnVuY3Rpb24odCl7Zm9yKHZhciBlPXRoaXM7Oyl7dmFyIG49ZS5jb250ZW50LmZpbmRJbmRleCh0KSxyPW4uaW5kZXgsbz1uLm9mZnNldDtpZihlPWUubWF5YmVDaGlsZChyKSwhZSlyZXR1cm4gbnVsbDtpZihvPT10fHxlLmlzVGV4dClyZXR1cm4gZTt0LT1vKzF9fSxCbC5wcm90b3R5cGUuY2hpbGRBZnRlcj1mdW5jdGlvbih0KXt2YXIgZT10aGlzLmNvbnRlbnQuZmluZEluZGV4KHQpLG49ZS5pbmRleCxyPWUub2Zmc2V0O3JldHVybntub2RlOnRoaXMuY29udGVudC5tYXliZUNoaWxkKG4pLGluZGV4Om4sb2Zmc2V0OnJ9fSxCbC5wcm90b3R5cGUuY2hpbGRCZWZvcmU9ZnVuY3Rpb24odCl7aWYoMD09dClyZXR1cm57bm9kZTpudWxsLGluZGV4OjAsb2Zmc2V0OjB9O3ZhciBlPXRoaXMuY29udGVudC5maW5kSW5kZXgodCksbj1lLmluZGV4LHI9ZS5vZmZzZXQ7aWYocjx0KXJldHVybntub2RlOnRoaXMuY29udGVudC5jaGlsZChuKSxpbmRleDpuLG9mZnNldDpyfTt2YXIgbz10aGlzLmNvbnRlbnQuY2hpbGQobi0xKTtyZXR1cm57bm9kZTpvLGluZGV4Om4tMSxvZmZzZXQ6ci1vLm5vZGVTaXplfX0sQmwucHJvdG90eXBlLnJlc29sdmU9ZnVuY3Rpb24odCl7cmV0dXJuIFRsLnJlc29sdmVDYWNoZWQodGhpcyx0KX0sQmwucHJvdG90eXBlLnJlc29sdmVOb0NhY2hlPWZ1bmN0aW9uKHQpe3JldHVybiBUbC5yZXNvbHZlKHRoaXMsdCl9LEJsLnByb3RvdHlwZS5yYW5nZUhhc01hcms9ZnVuY3Rpb24odCxlLG4pe3ZhciByPSExO3JldHVybiBlPnQmJnRoaXMubm9kZXNCZXR3ZWVuKHQsZSwoZnVuY3Rpb24odCl7cmV0dXJuIG4uaXNJblNldCh0Lm1hcmtzKSYmKHI9ITApLCFyfSkpLHJ9LF9sLmlzQmxvY2suZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudHlwZS5pc0Jsb2NrfSxfbC5pc1RleHRibG9jay5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy50eXBlLmlzVGV4dGJsb2NrfSxfbC5pbmxpbmVDb250ZW50LmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLnR5cGUuaW5saW5lQ29udGVudH0sX2wuaXNJbmxpbmUuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudHlwZS5pc0lubGluZX0sX2wuaXNUZXh0LmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLnR5cGUuaXNUZXh0fSxfbC5pc0xlYWYuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudHlwZS5pc0xlYWZ9LF9sLmlzQXRvbS5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy50eXBlLmlzQXRvbX0sQmwucHJvdG90eXBlLnRvU3RyaW5nPWZ1bmN0aW9uKCl7aWYodGhpcy50eXBlLnNwZWMudG9EZWJ1Z1N0cmluZylyZXR1cm4gdGhpcy50eXBlLnNwZWMudG9EZWJ1Z1N0cmluZyh0aGlzKTt2YXIgdD10aGlzLnR5cGUubmFtZTtyZXR1cm4gdGhpcy5jb250ZW50LnNpemUmJih0Kz0iKCIrdGhpcy5jb250ZW50LnRvU3RyaW5nSW5uZXIoKSsiKSIpLGpsKHRoaXMubWFya3MsdCl9LEJsLnByb3RvdHlwZS5jb250ZW50TWF0Y2hBdD1mdW5jdGlvbih0KXt2YXIgZT10aGlzLnR5cGUuY29udGVudE1hdGNoLm1hdGNoRnJhZ21lbnQodGhpcy5jb250ZW50LDAsdCk7aWYoIWUpdGhyb3cgbmV3IEVycm9yKCJDYWxsZWQgY29udGVudE1hdGNoQXQgb24gYSBub2RlIHdpdGggaW52YWxpZCBjb250ZW50Iik7cmV0dXJuIGV9LEJsLnByb3RvdHlwZS5jYW5SZXBsYWNlPWZ1bmN0aW9uKHQsZSxuLHIsbyl7dm9pZCAwPT09biYmKG49YWwuZW1wdHkpLHZvaWQgMD09PXImJihyPTApLHZvaWQgMD09PW8mJihvPW4uY2hpbGRDb3VudCk7dmFyIGk9dGhpcy5jb250ZW50TWF0Y2hBdCh0KS5tYXRjaEZyYWdtZW50KG4scixvKSxzPWkmJmkubWF0Y2hGcmFnbWVudCh0aGlzLmNvbnRlbnQsZSk7aWYoIXN8fCFzLnZhbGlkRW5kKXJldHVybiExO2Zvcih2YXIgYT1yO2E8bzthKyspaWYoIXRoaXMudHlwZS5hbGxvd3NNYXJrcyhuLmNoaWxkKGEpLm1hcmtzKSlyZXR1cm4hMTtyZXR1cm4hMH0sQmwucHJvdG90eXBlLmNhblJlcGxhY2VXaXRoPWZ1bmN0aW9uKHQsZSxuLHIpe2lmKHImJiF0aGlzLnR5cGUuYWxsb3dzTWFya3MocikpcmV0dXJuITE7dmFyIG89dGhpcy5jb250ZW50TWF0Y2hBdCh0KS5tYXRjaFR5cGUobiksaT1vJiZvLm1hdGNoRnJhZ21lbnQodGhpcy5jb250ZW50LGUpO3JldHVybiEhaSYmaS52YWxpZEVuZH0sQmwucHJvdG90eXBlLmNhbkFwcGVuZD1mdW5jdGlvbih0KXtyZXR1cm4gdC5jb250ZW50LnNpemU/dGhpcy5jYW5SZXBsYWNlKHRoaXMuY2hpbGRDb3VudCx0aGlzLmNoaWxkQ291bnQsdC5jb250ZW50KTp0aGlzLnR5cGUuY29tcGF0aWJsZUNvbnRlbnQodC50eXBlKX0sQmwucHJvdG90eXBlLmNoZWNrPWZ1bmN0aW9uKCl7aWYoIXRoaXMudHlwZS52YWxpZENvbnRlbnQodGhpcy5jb250ZW50KSl0aHJvdyBuZXcgUmFuZ2VFcnJvcigiSW52YWxpZCBjb250ZW50IGZvciBub2RlICIrdGhpcy50eXBlLm5hbWUrIjogIit0aGlzLmNvbnRlbnQudG9TdHJpbmcoKS5zbGljZSgwLDUwKSk7dGhpcy5jb250ZW50LmZvckVhY2goKGZ1bmN0aW9uKHQpe3JldHVybiB0LmNoZWNrKCl9KSl9LEJsLnByb3RvdHlwZS50b0pTT049ZnVuY3Rpb24oKXt2YXIgdD17dHlwZTp0aGlzLnR5cGUubmFtZX07Zm9yKHZhciBlIGluIHRoaXMuYXR0cnMpe3QuYXR0cnM9dGhpcy5hdHRyczticmVha31yZXR1cm4gdGhpcy5jb250ZW50LnNpemUmJih0LmNvbnRlbnQ9dGhpcy5jb250ZW50LnRvSlNPTigpKSx0aGlzLm1hcmtzLmxlbmd0aCYmKHQubWFya3M9dGhpcy5tYXJrcy5tYXAoKGZ1bmN0aW9uKHQpe3JldHVybiB0LnRvSlNPTigpfSkpKSx0fSxCbC5mcm9tSlNPTj1mdW5jdGlvbih0LGUpe2lmKCFlKXRocm93IG5ldyBSYW5nZUVycm9yKCJJbnZhbGlkIGlucHV0IGZvciBOb2RlLmZyb21KU09OIik7dmFyIG49bnVsbDtpZihlLm1hcmtzKXtpZighQXJyYXkuaXNBcnJheShlLm1hcmtzKSl0aHJvdyBuZXcgUmFuZ2VFcnJvcigiSW52YWxpZCBtYXJrIGRhdGEgZm9yIE5vZGUuZnJvbUpTT04iKTtuPWUubWFya3MubWFwKHQubWFya0Zyb21KU09OKX1pZigidGV4dCI9PWUudHlwZSl7aWYoInN0cmluZyIhPXR5cGVvZiBlLnRleHQpdGhyb3cgbmV3IFJhbmdlRXJyb3IoIkludmFsaWQgdGV4dCBub2RlIGluIEpTT04iKTtyZXR1cm4gdC50ZXh0KGUudGV4dCxuKX12YXIgcj1hbC5mcm9tSlNPTih0LGUuY29udGVudCk7cmV0dXJuIHQubm9kZVR5cGUoZS50eXBlKS5jcmVhdGUoZS5hdHRycyxyLG4pfSxPYmplY3QuZGVmaW5lUHJvcGVydGllcyhCbC5wcm90b3R5cGUsX2wpO3ZhciBGbD1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKGUsbixyLG8pe2lmKHQuY2FsbCh0aGlzLGUsbixudWxsLG8pLCFyKXRocm93IG5ldyBSYW5nZUVycm9yKCJFbXB0eSB0ZXh0IG5vZGVzIGFyZSBub3QgYWxsb3dlZCIpO3RoaXMudGV4dD1yfXQmJihlLl9fcHJvdG9fXz10KSxlLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKHQmJnQucHJvdG90eXBlKSxlLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1lO3ZhciBuPXt0ZXh0Q29udGVudDp7Y29uZmlndXJhYmxlOiEwfSxub2RlU2l6ZTp7Y29uZmlndXJhYmxlOiEwfX07cmV0dXJuIGUucHJvdG90eXBlLnRvU3RyaW5nPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudHlwZS5zcGVjLnRvRGVidWdTdHJpbmc/dGhpcy50eXBlLnNwZWMudG9EZWJ1Z1N0cmluZyh0aGlzKTpqbCh0aGlzLm1hcmtzLEpTT04uc3RyaW5naWZ5KHRoaXMudGV4dCkpfSxuLnRleHRDb250ZW50LmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLnRleHR9LGUucHJvdG90eXBlLnRleHRCZXR3ZWVuPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIHRoaXMudGV4dC5zbGljZSh0LGUpfSxuLm5vZGVTaXplLmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLnRleHQubGVuZ3RofSxlLnByb3RvdHlwZS5tYXJrPWZ1bmN0aW9uKHQpe3JldHVybiB0PT10aGlzLm1hcmtzP3RoaXM6bmV3IGUodGhpcy50eXBlLHRoaXMuYXR0cnMsdGhpcy50ZXh0LHQpfSxlLnByb3RvdHlwZS53aXRoVGV4dD1mdW5jdGlvbih0KXtyZXR1cm4gdD09dGhpcy50ZXh0P3RoaXM6bmV3IGUodGhpcy50eXBlLHRoaXMuYXR0cnMsdCx0aGlzLm1hcmtzKX0sZS5wcm90b3R5cGUuY3V0PWZ1bmN0aW9uKHQsZSl7cmV0dXJuIHZvaWQgMD09PXQmJih0PTApLHZvaWQgMD09PWUmJihlPXRoaXMudGV4dC5sZW5ndGgpLDA9PXQmJmU9PXRoaXMudGV4dC5sZW5ndGg/dGhpczp0aGlzLndpdGhUZXh0KHRoaXMudGV4dC5zbGljZSh0LGUpKX0sZS5wcm90b3R5cGUuZXE9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuc2FtZU1hcmt1cCh0KSYmdGhpcy50ZXh0PT10LnRleHR9LGUucHJvdG90eXBlLnRvSlNPTj1mdW5jdGlvbigpe3ZhciBlPXQucHJvdG90eXBlLnRvSlNPTi5jYWxsKHRoaXMpO3JldHVybiBlLnRleHQ9dGhpcy50ZXh0LGV9LE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKGUucHJvdG90eXBlLG4pLGV9KEJsKTtmdW5jdGlvbiBqbCh0LGUpe2Zvcih2YXIgbj10Lmxlbmd0aC0xO24+PTA7bi0tKWU9dFtuXS50eXBlLm5hbWUrIigiK2UrIikiO3JldHVybiBlfXZhciAkbD1mdW5jdGlvbih0KXt0aGlzLnZhbGlkRW5kPXQsdGhpcy5uZXh0PVtdLHRoaXMud3JhcENhY2hlPVtdfSxWbD17aW5saW5lQ29udGVudDp7Y29uZmlndXJhYmxlOiEwfSxkZWZhdWx0VHlwZTp7Y29uZmlndXJhYmxlOiEwfSxlZGdlQ291bnQ6e2NvbmZpZ3VyYWJsZTohMH19OyRsLnBhcnNlPWZ1bmN0aW9uKHQsZSl7dmFyIG49bmV3IExsKHQsZSk7aWYobnVsbD09bi5uZXh0KXJldHVybiAkbC5lbXB0eTt2YXIgcj1KbChuKTtuLm5leHQmJm4uZXJyKCJVbmV4cGVjdGVkIHRyYWlsaW5nIHRleHQiKTt2YXIgbz10aChZbChyKSk7cmV0dXJuIGVoKG8sbiksb30sJGwucHJvdG90eXBlLm1hdGNoVHlwZT1mdW5jdGlvbih0KXtmb3IodmFyIGU9MDtlPHRoaXMubmV4dC5sZW5ndGg7ZSs9MilpZih0aGlzLm5leHRbZV09PXQpcmV0dXJuIHRoaXMubmV4dFtlKzFdO3JldHVybiBudWxsfSwkbC5wcm90b3R5cGUubWF0Y2hGcmFnbWVudD1mdW5jdGlvbih0LGUsbil7dm9pZCAwPT09ZSYmKGU9MCksdm9pZCAwPT09biYmKG49dC5jaGlsZENvdW50KTtmb3IodmFyIHI9dGhpcyxvPWU7ciYmbzxuO28rKylyPXIubWF0Y2hUeXBlKHQuY2hpbGQobykudHlwZSk7cmV0dXJuIHJ9LFZsLmlubGluZUNvbnRlbnQuZ2V0PWZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5uZXh0WzBdO3JldHVybiEhdCYmdC5pc0lubGluZX0sVmwuZGVmYXVsdFR5cGUuZ2V0PWZ1bmN0aW9uKCl7Zm9yKHZhciB0PTA7dDx0aGlzLm5leHQubGVuZ3RoO3QrPTIpe3ZhciBlPXRoaXMubmV4dFt0XTtpZighZS5pc1RleHQmJiFlLmhhc1JlcXVpcmVkQXR0cnMoKSlyZXR1cm4gZX19LCRsLnByb3RvdHlwZS5jb21wYXRpYmxlPWZ1bmN0aW9uKHQpe2Zvcih2YXIgZT0wO2U8dGhpcy5uZXh0Lmxlbmd0aDtlKz0yKWZvcih2YXIgbj0wO248dC5uZXh0Lmxlbmd0aDtuKz0yKWlmKHRoaXMubmV4dFtlXT09dC5uZXh0W25dKXJldHVybiEwO3JldHVybiExfSwkbC5wcm90b3R5cGUuZmlsbEJlZm9yZT1mdW5jdGlvbih0LGUsbil7dm9pZCAwPT09ZSYmKGU9ITEpLHZvaWQgMD09PW4mJihuPTApO3ZhciByPVt0aGlzXTtmdW5jdGlvbiBvKGkscyl7dmFyIGE9aS5tYXRjaEZyYWdtZW50KHQsbik7aWYoYSYmKCFlfHxhLnZhbGlkRW5kKSlyZXR1cm4gYWwuZnJvbShzLm1hcCgoZnVuY3Rpb24odCl7cmV0dXJuIHQuY3JlYXRlQW5kRmlsbCgpfSkpKTtmb3IodmFyIGM9MDtjPGkubmV4dC5sZW5ndGg7Yys9Mil7dmFyIHU9aS5uZXh0W2NdLGw9aS5uZXh0W2MrMV07aWYoIXUuaXNUZXh0JiYhdS5oYXNSZXF1aXJlZEF0dHJzKCkmJi0xPT1yLmluZGV4T2YobCkpe3IucHVzaChsKTt2YXIgaD1vKGwscy5jb25jYXQodSkpO2lmKGgpcmV0dXJuIGh9fX1yZXR1cm4gbyh0aGlzLFtdKX0sJGwucHJvdG90eXBlLmZpbmRXcmFwcGluZz1mdW5jdGlvbih0KXtmb3IodmFyIGU9MDtlPHRoaXMud3JhcENhY2hlLmxlbmd0aDtlKz0yKWlmKHRoaXMud3JhcENhY2hlW2VdPT10KXJldHVybiB0aGlzLndyYXBDYWNoZVtlKzFdO3ZhciBuPXRoaXMuY29tcHV0ZVdyYXBwaW5nKHQpO3JldHVybiB0aGlzLndyYXBDYWNoZS5wdXNoKHQsbiksbn0sJGwucHJvdG90eXBlLmNvbXB1dGVXcmFwcGluZz1mdW5jdGlvbih0KXt2YXIgZT1PYmplY3QuY3JlYXRlKG51bGwpLG49W3ttYXRjaDp0aGlzLHR5cGU6bnVsbCx2aWE6bnVsbH1dO3doaWxlKG4ubGVuZ3RoKXt2YXIgcj1uLnNoaWZ0KCksbz1yLm1hdGNoO2lmKG8ubWF0Y2hUeXBlKHQpKXtmb3IodmFyIGk9W10scz1yO3MudHlwZTtzPXMudmlhKWkucHVzaChzLnR5cGUpO3JldHVybiBpLnJldmVyc2UoKX1mb3IodmFyIGE9MDthPG8ubmV4dC5sZW5ndGg7YSs9Mil7dmFyIGM9by5uZXh0W2FdO2MuaXNMZWFmfHxjLmhhc1JlcXVpcmVkQXR0cnMoKXx8Yy5uYW1lIGluIGV8fHIudHlwZSYmIW8ubmV4dFthKzFdLnZhbGlkRW5kfHwobi5wdXNoKHttYXRjaDpjLmNvbnRlbnRNYXRjaCx0eXBlOmMsdmlhOnJ9KSxlW2MubmFtZV09ITApfX19LFZsLmVkZ2VDb3VudC5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5uZXh0Lmxlbmd0aD4+MX0sJGwucHJvdG90eXBlLmVkZ2U9ZnVuY3Rpb24odCl7dmFyIGU9dDw8MTtpZihlPj10aGlzLm5leHQubGVuZ3RoKXRocm93IG5ldyBSYW5nZUVycm9yKCJUaGVyZSdzIG5vICIrdCsidGggZWRnZSBpbiB0aGlzIGNvbnRlbnQgbWF0Y2giKTtyZXR1cm57dHlwZTp0aGlzLm5leHRbZV0sbmV4dDp0aGlzLm5leHRbZSsxXX19LCRsLnByb3RvdHlwZS50b1N0cmluZz1mdW5jdGlvbigpe3ZhciB0PVtdO2Z1bmN0aW9uIGUobil7dC5wdXNoKG4pO2Zvcih2YXIgcj0xO3I8bi5uZXh0Lmxlbmd0aDtyKz0yKS0xPT10LmluZGV4T2Yobi5uZXh0W3JdKSYmZShuLm5leHRbcl0pfXJldHVybiBlKHRoaXMpLHQubWFwKChmdW5jdGlvbihlLG4pe2Zvcih2YXIgcj1uKyhlLnZhbGlkRW5kPyIqIjoiICIpKyIgIixvPTA7bzxlLm5leHQubGVuZ3RoO28rPTIpcis9KG8/IiwgIjoiIikrZS5uZXh0W29dLm5hbWUrIi0+Iit0LmluZGV4T2YoZS5uZXh0W28rMV0pO3JldHVybiByfSkpLmpvaW4oIlxuIil9LE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKCRsLnByb3RvdHlwZSxWbCksJGwuZW1wdHk9bmV3ICRsKCEwKTt2YXIgTGw9ZnVuY3Rpb24odCxlKXt0aGlzLnN0cmluZz10LHRoaXMubm9kZVR5cGVzPWUsdGhpcy5pbmxpbmU9bnVsbCx0aGlzLnBvcz0wLHRoaXMudG9rZW5zPXQuc3BsaXQoL1xzKig/PVxifFxXfCQpLyksIiI9PXRoaXMudG9rZW5zW3RoaXMudG9rZW5zLmxlbmd0aC0xXSYmdGhpcy50b2tlbnMucG9wKCksIiI9PXRoaXMudG9rZW5zWzBdJiZ0aGlzLnRva2Vucy51bnNoaWZ0KCl9LHFsPXtuZXh0Ontjb25maWd1cmFibGU6ITB9fTtmdW5jdGlvbiBKbCh0KXt2YXIgZT1bXTtkb3tlLnB1c2goV2wodCkpfXdoaWxlKHQuZWF0KCJ8IikpO3JldHVybiAxPT1lLmxlbmd0aD9lWzBdOnt0eXBlOiJjaG9pY2UiLGV4cHJzOmV9fWZ1bmN0aW9uIFdsKHQpe3ZhciBlPVtdO2Rve2UucHVzaChIbCh0KSl9d2hpbGUodC5uZXh0JiYiKSIhPXQubmV4dCYmInwiIT10Lm5leHQpO3JldHVybiAxPT1lLmxlbmd0aD9lWzBdOnt0eXBlOiJzZXEiLGV4cHJzOmV9fWZ1bmN0aW9uIEhsKHQpe2Zvcih2YXIgZT1YbCh0KTs7KWlmKHQuZWF0KCIrIikpZT17dHlwZToicGx1cyIsZXhwcjplfTtlbHNlIGlmKHQuZWF0KCIqIikpZT17dHlwZToic3RhciIsZXhwcjplfTtlbHNlIGlmKHQuZWF0KCI/IikpZT17dHlwZToib3B0IixleHByOmV9O2Vsc2V7aWYoIXQuZWF0KCJ7IikpYnJlYWs7ZT1VbCh0LGUpfXJldHVybiBlfWZ1bmN0aW9uIEtsKHQpey9cRC8udGVzdCh0Lm5leHQpJiZ0LmVycigiRXhwZWN0ZWQgbnVtYmVyLCBnb3QgJyIrdC5uZXh0KyInIik7dmFyIGU9TnVtYmVyKHQubmV4dCk7cmV0dXJuIHQucG9zKyssZX1mdW5jdGlvbiBVbCh0LGUpe3ZhciBuPUtsKHQpLHI9bjtyZXR1cm4gdC5lYXQoIiwiKSYmKHI9In0iIT10Lm5leHQ/S2wodCk6LTEpLHQuZWF0KCJ9Iil8fHQuZXJyKCJVbmNsb3NlZCBicmFjZWQgcmFuZ2UiKSx7dHlwZToicmFuZ2UiLG1pbjpuLG1heDpyLGV4cHI6ZX19ZnVuY3Rpb24gR2wodCxlKXt2YXIgbj10Lm5vZGVUeXBlcyxyPW5bZV07aWYocilyZXR1cm5bcl07dmFyIG89W107Zm9yKHZhciBpIGluIG4pe3ZhciBzPW5baV07cy5ncm91cHMuaW5kZXhPZihlKT4tMSYmby5wdXNoKHMpfXJldHVybiAwPT1vLmxlbmd0aCYmdC5lcnIoIk5vIG5vZGUgdHlwZSBvciBncm91cCAnIitlKyInIGZvdW5kIiksb31mdW5jdGlvbiBYbCh0KXtpZih0LmVhdCgiKCIpKXt2YXIgZT1KbCh0KTtyZXR1cm4gdC5lYXQoIikiKXx8dC5lcnIoIk1pc3NpbmcgY2xvc2luZyBwYXJlbiIpLGV9aWYoIS9cVy8udGVzdCh0Lm5leHQpKXt2YXIgbj1HbCh0LHQubmV4dCkubWFwKChmdW5jdGlvbihlKXtyZXR1cm4gbnVsbD09dC5pbmxpbmU/dC5pbmxpbmU9ZS5pc0lubGluZTp0LmlubGluZSE9ZS5pc0lubGluZSYmdC5lcnIoIk1peGluZyBpbmxpbmUgYW5kIGJsb2NrIGNvbnRlbnQiKSx7dHlwZToibmFtZSIsdmFsdWU6ZX19KSk7cmV0dXJuIHQucG9zKyssMT09bi5sZW5ndGg/blswXTp7dHlwZToiY2hvaWNlIixleHByczpufX10LmVycigiVW5leHBlY3RlZCB0b2tlbiAnIit0Lm5leHQrIiciKX1mdW5jdGlvbiBZbCh0KXt2YXIgZT1bW11dO3JldHVybiBvKGkodCwwKSxuKCkpLGU7ZnVuY3Rpb24gbigpe3JldHVybiBlLnB1c2goW10pLTF9ZnVuY3Rpb24gcih0LG4scil7dmFyIG89e3Rlcm06cix0bzpufTtyZXR1cm4gZVt0XS5wdXNoKG8pLG99ZnVuY3Rpb24gbyh0LGUpe3QuZm9yRWFjaCgoZnVuY3Rpb24odCl7cmV0dXJuIHQudG89ZX0pKX1mdW5jdGlvbiBpKHQsZSl7aWYoImNob2ljZSI9PXQudHlwZSlyZXR1cm4gdC5leHBycy5yZWR1Y2UoKGZ1bmN0aW9uKHQsbil7cmV0dXJuIHQuY29uY2F0KGkobixlKSl9KSxbXSk7aWYoInNlcSI9PXQudHlwZSlmb3IodmFyIHM9MDs7cysrKXt2YXIgYT1pKHQuZXhwcnNbc10sZSk7aWYocz09dC5leHBycy5sZW5ndGgtMSlyZXR1cm4gYTtvKGEsZT1uKCkpfWVsc2V7aWYoInN0YXIiPT10LnR5cGUpe3ZhciBjPW4oKTtyZXR1cm4gcihlLGMpLG8oaSh0LmV4cHIsYyksYyksW3IoYyldfWlmKCJwbHVzIj09dC50eXBlKXt2YXIgdT1uKCk7cmV0dXJuIG8oaSh0LmV4cHIsZSksdSksbyhpKHQuZXhwcix1KSx1KSxbcih1KV19aWYoIm9wdCI9PXQudHlwZSlyZXR1cm5bcihlKV0uY29uY2F0KGkodC5leHByLGUpKTtpZigicmFuZ2UiPT10LnR5cGUpe2Zvcih2YXIgbD1lLGg9MDtoPHQubWluO2grKyl7dmFyIGY9bigpO28oaSh0LmV4cHIsbCksZiksbD1mfWlmKC0xPT10Lm1heClvKGkodC5leHByLGwpLGwpO2Vsc2UgZm9yKHZhciBwPXQubWluO3A8dC5tYXg7cCsrKXt2YXIgZD1uKCk7cihsLGQpLG8oaSh0LmV4cHIsbCksZCksbD1kfXJldHVybltyKGwpXX1pZigibmFtZSI9PXQudHlwZSlyZXR1cm5bcihlLG51bGwsdC52YWx1ZSldfX19ZnVuY3Rpb24gWmwodCxlKXtyZXR1cm4gZS10fWZ1bmN0aW9uIFFsKHQsZSl7dmFyIG49W107cmV0dXJuIHIoZSksbi5zb3J0KFpsKTtmdW5jdGlvbiByKGUpe3ZhciBvPXRbZV07aWYoMT09by5sZW5ndGgmJiFvWzBdLnRlcm0pcmV0dXJuIHIob1swXS50byk7bi5wdXNoKGUpO2Zvcih2YXIgaT0wO2k8by5sZW5ndGg7aSsrKXt2YXIgcz1vW2ldLGE9cy50ZXJtLGM9cy50bzthfHwtMSE9bi5pbmRleE9mKGMpfHxyKGMpfX19ZnVuY3Rpb24gdGgodCl7dmFyIGU9T2JqZWN0LmNyZWF0ZShudWxsKTtyZXR1cm4gbihRbCh0LDApKTtmdW5jdGlvbiBuKHIpe3ZhciBvPVtdO3IuZm9yRWFjaCgoZnVuY3Rpb24oZSl7dFtlXS5mb3JFYWNoKChmdW5jdGlvbihlKXt2YXIgbj1lLnRlcm0scj1lLnRvO2lmKG4pe3ZhciBpPW8uaW5kZXhPZihuKSxzPWk+LTEmJm9baSsxXTtRbCh0LHIpLmZvckVhY2goKGZ1bmN0aW9uKHQpe3N8fG8ucHVzaChuLHM9W10pLC0xPT1zLmluZGV4T2YodCkmJnMucHVzaCh0KX0pKX19KSl9KSk7Zm9yKHZhciBpPWVbci5qb2luKCIsIildPW5ldyAkbChyLmluZGV4T2YodC5sZW5ndGgtMSk+LTEpLHM9MDtzPG8ubGVuZ3RoO3MrPTIpe3ZhciBhPW9bcysxXS5zb3J0KFpsKTtpLm5leHQucHVzaChvW3NdLGVbYS5qb2luKCIsIildfHxuKGEpKX1yZXR1cm4gaX19ZnVuY3Rpb24gZWgodCxlKXtmb3IodmFyIG49MCxyPVt0XTtuPHIubGVuZ3RoO24rKyl7Zm9yKHZhciBvPXJbbl0saT0hby52YWxpZEVuZCxzPVtdLGE9MDthPG8ubmV4dC5sZW5ndGg7YSs9Mil7dmFyIGM9by5uZXh0W2FdLHU9by5uZXh0W2ErMV07cy5wdXNoKGMubmFtZSksIWl8fGMuaXNUZXh0fHxjLmhhc1JlcXVpcmVkQXR0cnMoKXx8KGk9ITEpLC0xPT1yLmluZGV4T2YodSkmJnIucHVzaCh1KX1pJiZlLmVycigiT25seSBub24tZ2VuZXJhdGFibGUgbm9kZXMgKCIrcy5qb2luKCIsICIpKyIpIGluIGEgcmVxdWlyZWQgcG9zaXRpb24gKHNlZSBodHRwczovL3Byb3NlbWlycm9yLm5ldC9kb2NzL2d1aWRlLyNnZW5lcmF0YWJsZSkiKX19ZnVuY3Rpb24gbmgodCl7dmFyIGU9T2JqZWN0LmNyZWF0ZShudWxsKTtmb3IodmFyIG4gaW4gdCl7dmFyIHI9dFtuXTtpZighci5oYXNEZWZhdWx0KXJldHVybiBudWxsO2Vbbl09ci5kZWZhdWx0fXJldHVybiBlfWZ1bmN0aW9uIHJoKHQsZSl7dmFyIG49T2JqZWN0LmNyZWF0ZShudWxsKTtmb3IodmFyIHIgaW4gdCl7dmFyIG89ZSYmZVtyXTtpZih2b2lkIDA9PT1vKXt2YXIgaT10W3JdO2lmKCFpLmhhc0RlZmF1bHQpdGhyb3cgbmV3IFJhbmdlRXJyb3IoIk5vIHZhbHVlIHN1cHBsaWVkIGZvciBhdHRyaWJ1dGUgIityKTtvPWkuZGVmYXVsdH1uW3JdPW99cmV0dXJuIG59ZnVuY3Rpb24gb2godCl7dmFyIGU9T2JqZWN0LmNyZWF0ZShudWxsKTtpZih0KWZvcih2YXIgbiBpbiB0KWVbbl09bmV3IGFoKHRbbl0pO3JldHVybiBlfXFsLm5leHQuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudG9rZW5zW3RoaXMucG9zXX0sTGwucHJvdG90eXBlLmVhdD1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5uZXh0PT10JiYodGhpcy5wb3MrK3x8ITApfSxMbC5wcm90b3R5cGUuZXJyPWZ1bmN0aW9uKHQpe3Rocm93IG5ldyBTeW50YXhFcnJvcih0KyIgKGluIGNvbnRlbnQgZXhwcmVzc2lvbiAnIit0aGlzLnN0cmluZysiJykiKX0sT2JqZWN0LmRlZmluZVByb3BlcnRpZXMoTGwucHJvdG90eXBlLHFsKTt2YXIgaWg9ZnVuY3Rpb24odCxlLG4pe3RoaXMubmFtZT10LHRoaXMuc2NoZW1hPWUsdGhpcy5zcGVjPW4sdGhpcy5ncm91cHM9bi5ncm91cD9uLmdyb3VwLnNwbGl0KCIgIik6W10sdGhpcy5hdHRycz1vaChuLmF0dHJzKSx0aGlzLmRlZmF1bHRBdHRycz1uaCh0aGlzLmF0dHJzKSx0aGlzLmNvbnRlbnRNYXRjaD1udWxsLHRoaXMubWFya1NldD1udWxsLHRoaXMuaW5saW5lQ29udGVudD1udWxsLHRoaXMuaXNCbG9jaz0hKG4uaW5saW5lfHwidGV4dCI9PXQpLHRoaXMuaXNUZXh0PSJ0ZXh0Ij09dH0sc2g9e2lzSW5saW5lOntjb25maWd1cmFibGU6ITB9LGlzVGV4dGJsb2NrOntjb25maWd1cmFibGU6ITB9LGlzTGVhZjp7Y29uZmlndXJhYmxlOiEwfSxpc0F0b206e2NvbmZpZ3VyYWJsZTohMH19O3NoLmlzSW5saW5lLmdldD1mdW5jdGlvbigpe3JldHVybiF0aGlzLmlzQmxvY2t9LHNoLmlzVGV4dGJsb2NrLmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLmlzQmxvY2smJnRoaXMuaW5saW5lQ29udGVudH0sc2guaXNMZWFmLmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLmNvbnRlbnRNYXRjaD09JGwuZW1wdHl9LHNoLmlzQXRvbS5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5pc0xlYWZ8fHRoaXMuc3BlYy5hdG9tfSxpaC5wcm90b3R5cGUuaGFzUmVxdWlyZWRBdHRycz1mdW5jdGlvbigpe2Zvcih2YXIgdCBpbiB0aGlzLmF0dHJzKWlmKHRoaXMuYXR0cnNbdF0uaXNSZXF1aXJlZClyZXR1cm4hMDtyZXR1cm4hMX0saWgucHJvdG90eXBlLmNvbXBhdGlibGVDb250ZW50PWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzPT10fHx0aGlzLmNvbnRlbnRNYXRjaC5jb21wYXRpYmxlKHQuY29udGVudE1hdGNoKX0saWgucHJvdG90eXBlLmNvbXB1dGVBdHRycz1mdW5jdGlvbih0KXtyZXR1cm4hdCYmdGhpcy5kZWZhdWx0QXR0cnM/dGhpcy5kZWZhdWx0QXR0cnM6cmgodGhpcy5hdHRycyx0KX0saWgucHJvdG90eXBlLmNyZWF0ZT1mdW5jdGlvbih0LGUsbil7aWYodGhpcy5pc1RleHQpdGhyb3cgbmV3IEVycm9yKCJOb2RlVHlwZS5jcmVhdGUgY2FuJ3QgY29uc3RydWN0IHRleHQgbm9kZXMiKTtyZXR1cm4gbmV3IEJsKHRoaXMsdGhpcy5jb21wdXRlQXR0cnModCksYWwuZnJvbShlKSxmbC5zZXRGcm9tKG4pKX0saWgucHJvdG90eXBlLmNyZWF0ZUNoZWNrZWQ9ZnVuY3Rpb24odCxlLG4pe2lmKGU9YWwuZnJvbShlKSwhdGhpcy52YWxpZENvbnRlbnQoZSkpdGhyb3cgbmV3IFJhbmdlRXJyb3IoIkludmFsaWQgY29udGVudCBmb3Igbm9kZSAiK3RoaXMubmFtZSk7cmV0dXJuIG5ldyBCbCh0aGlzLHRoaXMuY29tcHV0ZUF0dHJzKHQpLGUsZmwuc2V0RnJvbShuKSl9LGloLnByb3RvdHlwZS5jcmVhdGVBbmRGaWxsPWZ1bmN0aW9uKHQsZSxuKXtpZih0PXRoaXMuY29tcHV0ZUF0dHJzKHQpLGU9YWwuZnJvbShlKSxlLnNpemUpe3ZhciByPXRoaXMuY29udGVudE1hdGNoLmZpbGxCZWZvcmUoZSk7aWYoIXIpcmV0dXJuIG51bGw7ZT1yLmFwcGVuZChlKX12YXIgbz10aGlzLmNvbnRlbnRNYXRjaC5tYXRjaEZyYWdtZW50KGUpLmZpbGxCZWZvcmUoYWwuZW1wdHksITApO3JldHVybiBvP25ldyBCbCh0aGlzLHQsZS5hcHBlbmQobyksZmwuc2V0RnJvbShuKSk6bnVsbH0saWgucHJvdG90eXBlLnZhbGlkQ29udGVudD1mdW5jdGlvbih0KXt2YXIgZT10aGlzLmNvbnRlbnRNYXRjaC5tYXRjaEZyYWdtZW50KHQpO2lmKCFlfHwhZS52YWxpZEVuZClyZXR1cm4hMTtmb3IodmFyIG49MDtuPHQuY2hpbGRDb3VudDtuKyspaWYoIXRoaXMuYWxsb3dzTWFya3ModC5jaGlsZChuKS5tYXJrcykpcmV0dXJuITE7cmV0dXJuITB9LGloLnByb3RvdHlwZS5hbGxvd3NNYXJrVHlwZT1mdW5jdGlvbih0KXtyZXR1cm4gbnVsbD09dGhpcy5tYXJrU2V0fHx0aGlzLm1hcmtTZXQuaW5kZXhPZih0KT4tMX0saWgucHJvdG90eXBlLmFsbG93c01hcmtzPWZ1bmN0aW9uKHQpe2lmKG51bGw9PXRoaXMubWFya1NldClyZXR1cm4hMDtmb3IodmFyIGU9MDtlPHQubGVuZ3RoO2UrKylpZighdGhpcy5hbGxvd3NNYXJrVHlwZSh0W2VdLnR5cGUpKXJldHVybiExO3JldHVybiEwfSxpaC5wcm90b3R5cGUuYWxsb3dlZE1hcmtzPWZ1bmN0aW9uKHQpe2lmKG51bGw9PXRoaXMubWFya1NldClyZXR1cm4gdDtmb3IodmFyIGUsbj0wO248dC5sZW5ndGg7bisrKXRoaXMuYWxsb3dzTWFya1R5cGUodFtuXS50eXBlKT9lJiZlLnB1c2godFtuXSk6ZXx8KGU9dC5zbGljZSgwLG4pKTtyZXR1cm4gZT9lLmxlbmd0aD9lOmZsLmVtcHR5OnR9LGloLmNvbXBpbGU9ZnVuY3Rpb24odCxlKXt2YXIgbj1PYmplY3QuY3JlYXRlKG51bGwpO3QuZm9yRWFjaCgoZnVuY3Rpb24odCxyKXtyZXR1cm4gblt0XT1uZXcgaWgodCxlLHIpfSkpO3ZhciByPWUuc3BlYy50b3BOb2RlfHwiZG9jIjtpZighbltyXSl0aHJvdyBuZXcgUmFuZ2VFcnJvcigiU2NoZW1hIGlzIG1pc3NpbmcgaXRzIHRvcCBub2RlIHR5cGUgKCciK3IrIicpIik7aWYoIW4udGV4dCl0aHJvdyBuZXcgUmFuZ2VFcnJvcigiRXZlcnkgc2NoZW1hIG5lZWRzIGEgJ3RleHQnIHR5cGUiKTtmb3IodmFyIG8gaW4gbi50ZXh0LmF0dHJzKXRocm93IG5ldyBSYW5nZUVycm9yKCJUaGUgdGV4dCBub2RlIHR5cGUgc2hvdWxkIG5vdCBoYXZlIGF0dHJpYnV0ZXMiKTtyZXR1cm4gbn0sT2JqZWN0LmRlZmluZVByb3BlcnRpZXMoaWgucHJvdG90eXBlLHNoKTt2YXIgYWg9ZnVuY3Rpb24odCl7dGhpcy5oYXNEZWZhdWx0PU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbCh0LCJkZWZhdWx0IiksdGhpcy5kZWZhdWx0PXQuZGVmYXVsdH0sY2g9e2lzUmVxdWlyZWQ6e2NvbmZpZ3VyYWJsZTohMH19O2NoLmlzUmVxdWlyZWQuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIXRoaXMuaGFzRGVmYXVsdH0sT2JqZWN0LmRlZmluZVByb3BlcnRpZXMoYWgucHJvdG90eXBlLGNoKTt2YXIgdWg9ZnVuY3Rpb24odCxlLG4scil7dGhpcy5uYW1lPXQsdGhpcy5zY2hlbWE9bix0aGlzLnNwZWM9cix0aGlzLmF0dHJzPW9oKHIuYXR0cnMpLHRoaXMucmFuaz1lLHRoaXMuZXhjbHVkZWQ9bnVsbDt2YXIgbz1uaCh0aGlzLmF0dHJzKTt0aGlzLmluc3RhbmNlPW8mJm5ldyBmbCh0aGlzLG8pfTt1aC5wcm90b3R5cGUuY3JlYXRlPWZ1bmN0aW9uKHQpe3JldHVybiF0JiZ0aGlzLmluc3RhbmNlP3RoaXMuaW5zdGFuY2U6bmV3IGZsKHRoaXMscmgodGhpcy5hdHRycyx0KSl9LHVoLmNvbXBpbGU9ZnVuY3Rpb24odCxlKXt2YXIgbj1PYmplY3QuY3JlYXRlKG51bGwpLHI9MDtyZXR1cm4gdC5mb3JFYWNoKChmdW5jdGlvbih0LG8pe3JldHVybiBuW3RdPW5ldyB1aCh0LHIrKyxlLG8pfSkpLG59LHVoLnByb3RvdHlwZS5yZW1vdmVGcm9tU2V0PWZ1bmN0aW9uKHQpe2Zvcih2YXIgZT0wO2U8dC5sZW5ndGg7ZSsrKWlmKHRbZV0udHlwZT09dGhpcylyZXR1cm4gdC5zbGljZSgwLGUpLmNvbmNhdCh0LnNsaWNlKGUrMSkpO3JldHVybiB0fSx1aC5wcm90b3R5cGUuaXNJblNldD1mdW5jdGlvbih0KXtmb3IodmFyIGU9MDtlPHQubGVuZ3RoO2UrKylpZih0W2VdLnR5cGU9PXRoaXMpcmV0dXJuIHRbZV19LHVoLnByb3RvdHlwZS5leGNsdWRlcz1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5leGNsdWRlZC5pbmRleE9mKHQpPi0xfTt2YXIgbGg9ZnVuY3Rpb24odCl7Zm9yKHZhciBlIGluIHRoaXMuc3BlYz17fSx0KXRoaXMuc3BlY1tlXT10W2VdO3RoaXMuc3BlYy5ub2Rlcz11WyJhIl0uZnJvbSh0Lm5vZGVzKSx0aGlzLnNwZWMubWFya3M9dVsiYSJdLmZyb20odC5tYXJrcyksdGhpcy5ub2Rlcz1paC5jb21waWxlKHRoaXMuc3BlYy5ub2Rlcyx0aGlzKSx0aGlzLm1hcmtzPXVoLmNvbXBpbGUodGhpcy5zcGVjLm1hcmtzLHRoaXMpO3ZhciBuPU9iamVjdC5jcmVhdGUobnVsbCk7Zm9yKHZhciByIGluIHRoaXMubm9kZXMpe2lmKHIgaW4gdGhpcy5tYXJrcyl0aHJvdyBuZXcgUmFuZ2VFcnJvcihyKyIgY2FuIG5vdCBiZSBib3RoIGEgbm9kZSBhbmQgYSBtYXJrIik7dmFyIG89dGhpcy5ub2Rlc1tyXSxpPW8uc3BlYy5jb250ZW50fHwiIixzPW8uc3BlYy5tYXJrcztvLmNvbnRlbnRNYXRjaD1uW2ldfHwobltpXT0kbC5wYXJzZShpLHRoaXMubm9kZXMpKSxvLmlubGluZUNvbnRlbnQ9by5jb250ZW50TWF0Y2guaW5saW5lQ29udGVudCxvLm1hcmtTZXQ9Il8iPT1zP251bGw6cz9oaCh0aGlzLHMuc3BsaXQoIiAiKSk6IiIhPXMmJm8uaW5saW5lQ29udGVudD9udWxsOltdfWZvcih2YXIgYSBpbiB0aGlzLm1hcmtzKXt2YXIgYz10aGlzLm1hcmtzW2FdLGw9Yy5zcGVjLmV4Y2x1ZGVzO2MuZXhjbHVkZWQ9bnVsbD09bD9bY106IiI9PWw/W106aGgodGhpcyxsLnNwbGl0KCIgIikpfXRoaXMubm9kZUZyb21KU09OPXRoaXMubm9kZUZyb21KU09OLmJpbmQodGhpcyksdGhpcy5tYXJrRnJvbUpTT049dGhpcy5tYXJrRnJvbUpTT04uYmluZCh0aGlzKSx0aGlzLnRvcE5vZGVUeXBlPXRoaXMubm9kZXNbdGhpcy5zcGVjLnRvcE5vZGV8fCJkb2MiXSx0aGlzLmNhY2hlZD1PYmplY3QuY3JlYXRlKG51bGwpLHRoaXMuY2FjaGVkLndyYXBwaW5ncz1PYmplY3QuY3JlYXRlKG51bGwpfTtmdW5jdGlvbiBoaCh0LGUpe2Zvcih2YXIgbj1bXSxyPTA7cjxlLmxlbmd0aDtyKyspe3ZhciBvPWVbcl0saT10Lm1hcmtzW29dLHM9aTtpZihpKW4ucHVzaChpKTtlbHNlIGZvcih2YXIgYSBpbiB0Lm1hcmtzKXt2YXIgYz10Lm1hcmtzW2FdOygiXyI9PW98fGMuc3BlYy5ncm91cCYmYy5zcGVjLmdyb3VwLnNwbGl0KCIgIikuaW5kZXhPZihvKT4tMSkmJm4ucHVzaChzPWMpfWlmKCFzKXRocm93IG5ldyBTeW50YXhFcnJvcigiVW5rbm93biBtYXJrIHR5cGU6ICciK2Vbcl0rIiciKX1yZXR1cm4gbn1saC5wcm90b3R5cGUubm9kZT1mdW5jdGlvbih0LGUsbixyKXtpZigic3RyaW5nIj09dHlwZW9mIHQpdD10aGlzLm5vZGVUeXBlKHQpO2Vsc2V7aWYoISh0IGluc3RhbmNlb2YgaWgpKXRocm93IG5ldyBSYW5nZUVycm9yKCJJbnZhbGlkIG5vZGUgdHlwZTogIit0KTtpZih0LnNjaGVtYSE9dGhpcyl0aHJvdyBuZXcgUmFuZ2VFcnJvcigiTm9kZSB0eXBlIGZyb20gZGlmZmVyZW50IHNjaGVtYSB1c2VkICgiK3QubmFtZSsiKSIpfXJldHVybiB0LmNyZWF0ZUNoZWNrZWQoZSxuLHIpfSxsaC5wcm90b3R5cGUudGV4dD1mdW5jdGlvbih0LGUpe3ZhciBuPXRoaXMubm9kZXMudGV4dDtyZXR1cm4gbmV3IEZsKG4sbi5kZWZhdWx0QXR0cnMsdCxmbC5zZXRGcm9tKGUpKX0sbGgucHJvdG90eXBlLm1hcms9ZnVuY3Rpb24odCxlKXtyZXR1cm4ic3RyaW5nIj09dHlwZW9mIHQmJih0PXRoaXMubWFya3NbdF0pLHQuY3JlYXRlKGUpfSxsaC5wcm90b3R5cGUubm9kZUZyb21KU09OPWZ1bmN0aW9uKHQpe3JldHVybiBCbC5mcm9tSlNPTih0aGlzLHQpfSxsaC5wcm90b3R5cGUubWFya0Zyb21KU09OPWZ1bmN0aW9uKHQpe3JldHVybiBmbC5mcm9tSlNPTih0aGlzLHQpfSxsaC5wcm90b3R5cGUubm9kZVR5cGU9ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5ub2Rlc1t0XTtpZighZSl0aHJvdyBuZXcgUmFuZ2VFcnJvcigiVW5rbm93biBub2RlIHR5cGU6ICIrdCk7cmV0dXJuIGV9O3ZhciBmaD1mdW5jdGlvbih0LGUpe3ZhciBuPXRoaXM7dGhpcy5zY2hlbWE9dCx0aGlzLnJ1bGVzPWUsdGhpcy50YWdzPVtdLHRoaXMuc3R5bGVzPVtdLGUuZm9yRWFjaCgoZnVuY3Rpb24odCl7dC50YWc/bi50YWdzLnB1c2godCk6dC5zdHlsZSYmbi5zdHlsZXMucHVzaCh0KX0pKSx0aGlzLm5vcm1hbGl6ZUxpc3RzPSF0aGlzLnRhZ3Muc29tZSgoZnVuY3Rpb24oZSl7aWYoIS9eKHVsfG9sKVxiLy50ZXN0KGUudGFnKXx8IWUubm9kZSlyZXR1cm4hMTt2YXIgbj10Lm5vZGVzW2Uubm9kZV07cmV0dXJuIG4uY29udGVudE1hdGNoLm1hdGNoVHlwZShuKX0pKX07ZmgucHJvdG90eXBlLnBhcnNlPWZ1bmN0aW9uKHQsZSl7dm9pZCAwPT09ZSYmKGU9e30pO3ZhciBuPW5ldyB4aCh0aGlzLGUsITEpO3JldHVybiBuLmFkZEFsbCh0LG51bGwsZS5mcm9tLGUudG8pLG4uZmluaXNoKCl9LGZoLnByb3RvdHlwZS5wYXJzZVNsaWNlPWZ1bmN0aW9uKHQsZSl7dm9pZCAwPT09ZSYmKGU9e30pO3ZhciBuPW5ldyB4aCh0aGlzLGUsITApO3JldHVybiBuLmFkZEFsbCh0LG51bGwsZS5mcm9tLGUudG8pLGRsLm1heE9wZW4obi5maW5pc2goKSl9LGZoLnByb3RvdHlwZS5tYXRjaFRhZz1mdW5jdGlvbih0LGUpe2Zvcih2YXIgbj0wO248dGhpcy50YWdzLmxlbmd0aDtuKyspe3ZhciByPXRoaXMudGFnc1tuXTtpZihDaCh0LHIudGFnKSYmKHZvaWQgMD09PXIubmFtZXNwYWNlfHx0Lm5hbWVzcGFjZVVSST09ci5uYW1lc3BhY2UpJiYoIXIuY29udGV4dHx8ZS5tYXRjaGVzQ29udGV4dChyLmNvbnRleHQpKSl7aWYoci5nZXRBdHRycyl7dmFyIG89ci5nZXRBdHRycyh0KTtpZighMT09PW8pY29udGludWU7ci5hdHRycz1vfXJldHVybiByfX19LGZoLnByb3RvdHlwZS5tYXRjaFN0eWxlPWZ1bmN0aW9uKHQsZSxuKXtmb3IodmFyIHI9MDtyPHRoaXMuc3R5bGVzLmxlbmd0aDtyKyspe3ZhciBvPXRoaXMuc3R5bGVzW3JdO2lmKCEoMCE9by5zdHlsZS5pbmRleE9mKHQpfHxvLmNvbnRleHQmJiFuLm1hdGNoZXNDb250ZXh0KG8uY29udGV4dCl8fG8uc3R5bGUubGVuZ3RoPnQubGVuZ3RoJiYoNjEhPW8uc3R5bGUuY2hhckNvZGVBdCh0Lmxlbmd0aCl8fG8uc3R5bGUuc2xpY2UodC5sZW5ndGgrMSkhPWUpKSl7aWYoby5nZXRBdHRycyl7dmFyIGk9by5nZXRBdHRycyhlKTtpZighMT09PWkpY29udGludWU7by5hdHRycz1pfXJldHVybiBvfX19LGZoLnNjaGVtYVJ1bGVzPWZ1bmN0aW9uKHQpe3ZhciBlPVtdO2Z1bmN0aW9uIG4odCl7Zm9yKHZhciBuPW51bGw9PXQucHJpb3JpdHk/NTA6dC5wcmlvcml0eSxyPTA7cjxlLmxlbmd0aDtyKyspe3ZhciBvPWVbcl0saT1udWxsPT1vLnByaW9yaXR5PzUwOm8ucHJpb3JpdHk7aWYoaTxuKWJyZWFrfWUuc3BsaWNlKHIsMCx0KX12YXIgcj1mdW5jdGlvbihlKXt2YXIgcj10Lm1hcmtzW2VdLnNwZWMucGFyc2VET007ciYmci5mb3JFYWNoKChmdW5jdGlvbih0KXtuKHQ9TWgodCkpLHQubWFyaz1lfSkpfTtmb3IodmFyIG8gaW4gdC5tYXJrcylyKG8pO3ZhciBpPWZ1bmN0aW9uKGUpe3ZhciByPXQubm9kZXNbc10uc3BlYy5wYXJzZURPTTtyJiZyLmZvckVhY2goKGZ1bmN0aW9uKHQpe24odD1NaCh0KSksdC5ub2RlPXN9KSl9O2Zvcih2YXIgcyBpbiB0Lm5vZGVzKWkoKTtyZXR1cm4gZX0sZmguZnJvbVNjaGVtYT1mdW5jdGlvbih0KXtyZXR1cm4gdC5jYWNoZWQuZG9tUGFyc2VyfHwodC5jYWNoZWQuZG9tUGFyc2VyPW5ldyBmaCh0LGZoLnNjaGVtYVJ1bGVzKHQpKSl9O3ZhciBwaD17YWRkcmVzczohMCxhcnRpY2xlOiEwLGFzaWRlOiEwLGJsb2NrcXVvdGU6ITAsY2FudmFzOiEwLGRkOiEwLGRpdjohMCxkbDohMCxmaWVsZHNldDohMCxmaWdjYXB0aW9uOiEwLGZpZ3VyZTohMCxmb290ZXI6ITAsZm9ybTohMCxoMTohMCxoMjohMCxoMzohMCxoNDohMCxoNTohMCxoNjohMCxoZWFkZXI6ITAsaGdyb3VwOiEwLGhyOiEwLGxpOiEwLG5vc2NyaXB0OiEwLG9sOiEwLG91dHB1dDohMCxwOiEwLHByZTohMCxzZWN0aW9uOiEwLHRhYmxlOiEwLHRmb290OiEwLHVsOiEwfSxkaD17aGVhZDohMCxub3NjcmlwdDohMCxvYmplY3Q6ITAsc2NyaXB0OiEwLHN0eWxlOiEwLHRpdGxlOiEwfSx2aD17b2w6ITAsdWw6ITB9LG1oPTEsZ2g9Mix5aD00O2Z1bmN0aW9uIHdoKHQpe3JldHVybih0P21oOjApfCgiZnVsbCI9PT10P2doOjApfXZhciBiaD1mdW5jdGlvbih0LGUsbixyLG8saSxzKXt0aGlzLnR5cGU9dCx0aGlzLmF0dHJzPWUsdGhpcy5zb2xpZD1vLHRoaXMubWF0Y2g9aXx8KHMmeWg/bnVsbDp0LmNvbnRlbnRNYXRjaCksdGhpcy5vcHRpb25zPXMsdGhpcy5jb250ZW50PVtdLHRoaXMubWFya3M9bix0aGlzLmFjdGl2ZU1hcmtzPWZsLm5vbmUsdGhpcy5wZW5kaW5nTWFya3M9cn07YmgucHJvdG90eXBlLmZpbmRXcmFwcGluZz1mdW5jdGlvbih0KXtpZighdGhpcy5tYXRjaCl7aWYoIXRoaXMudHlwZSlyZXR1cm5bXTt2YXIgZT10aGlzLnR5cGUuY29udGVudE1hdGNoLmZpbGxCZWZvcmUoYWwuZnJvbSh0KSk7aWYoIWUpe3ZhciBuLHI9dGhpcy50eXBlLmNvbnRlbnRNYXRjaDtyZXR1cm4obj1yLmZpbmRXcmFwcGluZyh0LnR5cGUpKT8odGhpcy5tYXRjaD1yLG4pOm51bGx9dGhpcy5tYXRjaD10aGlzLnR5cGUuY29udGVudE1hdGNoLm1hdGNoRnJhZ21lbnQoZSl9cmV0dXJuIHRoaXMubWF0Y2guZmluZFdyYXBwaW5nKHQudHlwZSl9LGJoLnByb3RvdHlwZS5maW5pc2g9ZnVuY3Rpb24odCl7aWYoISh0aGlzLm9wdGlvbnMmbWgpKXt2YXIgZSxuPXRoaXMuY29udGVudFt0aGlzLmNvbnRlbnQubGVuZ3RoLTFdO24mJm4uaXNUZXh0JiYoZT0vWyBcdFxyXG5cdTAwMGNdKyQvLmV4ZWMobi50ZXh0KSkmJihuLnRleHQubGVuZ3RoPT1lWzBdLmxlbmd0aD90aGlzLmNvbnRlbnQucG9wKCk6dGhpcy5jb250ZW50W3RoaXMuY29udGVudC5sZW5ndGgtMV09bi53aXRoVGV4dChuLnRleHQuc2xpY2UoMCxuLnRleHQubGVuZ3RoLWVbMF0ubGVuZ3RoKSkpfXZhciByPWFsLmZyb20odGhpcy5jb250ZW50KTtyZXR1cm4hdCYmdGhpcy5tYXRjaCYmKHI9ci5hcHBlbmQodGhpcy5tYXRjaC5maWxsQmVmb3JlKGFsLmVtcHR5LCEwKSkpLHRoaXMudHlwZT90aGlzLnR5cGUuY3JlYXRlKHRoaXMuYXR0cnMscix0aGlzLm1hcmtzKTpyfSxiaC5wcm90b3R5cGUuYXBwbHlQZW5kaW5nPWZ1bmN0aW9uKHQpe2Zvcih2YXIgZT0wLG49dGhpcy5wZW5kaW5nTWFya3M7ZTxuLmxlbmd0aDtlKyspe3ZhciByPW5bZV07KHRoaXMudHlwZT90aGlzLnR5cGUuYWxsb3dzTWFya1R5cGUoci50eXBlKTpOaChyLnR5cGUsdCkpJiYhci5pc0luU2V0KHRoaXMuYWN0aXZlTWFya3MpJiYodGhpcy5hY3RpdmVNYXJrcz1yLmFkZFRvU2V0KHRoaXMuYWN0aXZlTWFya3MpLHRoaXMucGVuZGluZ01hcmtzPXIucmVtb3ZlRnJvbVNldCh0aGlzLnBlbmRpbmdNYXJrcykpfX07dmFyIHhoPWZ1bmN0aW9uKHQsZSxuKXt0aGlzLnBhcnNlcj10LHRoaXMub3B0aW9ucz1lLHRoaXMuaXNPcGVuPW47dmFyIHIsbz1lLnRvcE5vZGUsaT13aChlLnByZXNlcnZlV2hpdGVzcGFjZSl8KG4/eWg6MCk7cj1vP25ldyBiaChvLnR5cGUsby5hdHRycyxmbC5ub25lLGZsLm5vbmUsITAsZS50b3BNYXRjaHx8by50eXBlLmNvbnRlbnRNYXRjaCxpKTpuZXcgYmgobj9udWxsOnQuc2NoZW1hLnRvcE5vZGVUeXBlLG51bGwsZmwubm9uZSxmbC5ub25lLCEwLG51bGwsaSksdGhpcy5ub2Rlcz1bcl0sdGhpcy5vcGVuPTAsdGhpcy5maW5kPWUuZmluZFBvc2l0aW9ucyx0aGlzLm5lZWRzQmxvY2s9ITF9LGtoPXt0b3A6e2NvbmZpZ3VyYWJsZTohMH0sY3VycmVudFBvczp7Y29uZmlndXJhYmxlOiEwfX07ZnVuY3Rpb24gU2godCl7Zm9yKHZhciBlPXQuZmlyc3RDaGlsZCxuPW51bGw7ZTtlPWUubmV4dFNpYmxpbmcpe3ZhciByPTE9PWUubm9kZVR5cGU/ZS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpOm51bGw7ciYmdmguaGFzT3duUHJvcGVydHkocikmJm4/KG4uYXBwZW5kQ2hpbGQoZSksZT1uKToibGkiPT1yP249ZTpyJiYobj1udWxsKX19ZnVuY3Rpb24gQ2godCxlKXtyZXR1cm4odC5tYXRjaGVzfHx0Lm1zTWF0Y2hlc1NlbGVjdG9yfHx0LndlYmtpdE1hdGNoZXNTZWxlY3Rvcnx8dC5tb3pNYXRjaGVzU2VsZWN0b3IpLmNhbGwodCxlKX1mdW5jdGlvbiBPaCh0KXt2YXIgZSxuPS9ccyooW1x3LV0rKVxzKjpccyooW147XSspL2cscj1bXTt3aGlsZShlPW4uZXhlYyh0KSlyLnB1c2goZVsxXSxlWzJdLnRyaW0oKSk7cmV0dXJuIHJ9ZnVuY3Rpb24gTWgodCl7dmFyIGU9e307Zm9yKHZhciBuIGluIHQpZVtuXT10W25dO3JldHVybiBlfWZ1bmN0aW9uIE5oKHQsZSl7dmFyIG49ZS5zY2hlbWEubm9kZXMscj1mdW5jdGlvbihyKXt2YXIgbz1uW3JdO2lmKG8uYWxsb3dzTWFya1R5cGUodCkpe3ZhciBpPVtdLHM9ZnVuY3Rpb24odCl7aS5wdXNoKHQpO2Zvcih2YXIgbj0wO248dC5lZGdlQ291bnQ7bisrKXt2YXIgcj10LmVkZ2Uobiksbz1yLnR5cGUsYT1yLm5leHQ7aWYobz09ZSlyZXR1cm4hMDtpZihpLmluZGV4T2YoYSk8MCYmcyhhKSlyZXR1cm4hMH19O3JldHVybiBzKG8uY29udGVudE1hdGNoKT97djohMH06dm9pZCAwfX07Zm9yKHZhciBvIGluIG4pe3ZhciBpPXIobyk7aWYoaSlyZXR1cm4gaS52fX1raC50b3AuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubm9kZXNbdGhpcy5vcGVuXX0seGgucHJvdG90eXBlLmFkZERPTT1mdW5jdGlvbih0KXtpZigzPT10Lm5vZGVUeXBlKXRoaXMuYWRkVGV4dE5vZGUodCk7ZWxzZSBpZigxPT10Lm5vZGVUeXBlKXt2YXIgZT10LmdldEF0dHJpYnV0ZSgic3R5bGUiKSxuPWU/dGhpcy5yZWFkU3R5bGVzKE9oKGUpKTpudWxsLHI9dGhpcy50b3A7aWYobnVsbCE9bilmb3IodmFyIG89MDtvPG4ubGVuZ3RoO28rKyl0aGlzLmFkZFBlbmRpbmdNYXJrKG5bb10pO2lmKHRoaXMuYWRkRWxlbWVudCh0KSxudWxsIT1uKWZvcih2YXIgaT0wO2k8bi5sZW5ndGg7aSsrKXRoaXMucmVtb3ZlUGVuZGluZ01hcmsobltpXSxyKX19LHhoLnByb3RvdHlwZS5hZGRUZXh0Tm9kZT1mdW5jdGlvbih0KXt2YXIgZT10Lm5vZGVWYWx1ZSxuPXRoaXMudG9wO2lmKChuLnR5cGU/bi50eXBlLmlubGluZUNvbnRlbnQ6bi5jb250ZW50Lmxlbmd0aCYmbi5jb250ZW50WzBdLmlzSW5saW5lKXx8L1teIFx0XHJcblx1MDAwY10vLnRlc3QoZSkpe2lmKG4ub3B0aW9ucyZtaCluLm9wdGlvbnMmZ2h8fChlPWUucmVwbGFjZSgvXHI/XG58XHIvZywiICIpKTtlbHNlIGlmKGU9ZS5yZXBsYWNlKC9bIFx0XHJcblx1MDAwY10rL2csIiAiKSwvXlsgXHRcclxuXHUwMDBjXS8udGVzdChlKSYmdGhpcy5vcGVuPT10aGlzLm5vZGVzLmxlbmd0aC0xKXt2YXIgcj1uLmNvbnRlbnRbbi5jb250ZW50Lmxlbmd0aC0xXSxvPXQucHJldmlvdXNTaWJsaW5nOyghcnx8byYmIkJSIj09by5ub2RlTmFtZXx8ci5pc1RleHQmJi9bIFx0XHJcblx1MDAwY10kLy50ZXN0KHIudGV4dCkpJiYoZT1lLnNsaWNlKDEpKX1lJiZ0aGlzLmluc2VydE5vZGUodGhpcy5wYXJzZXIuc2NoZW1hLnRleHQoZSkpLHRoaXMuZmluZEluVGV4dCh0KX1lbHNlIHRoaXMuZmluZEluc2lkZSh0KX0seGgucHJvdG90eXBlLmFkZEVsZW1lbnQ9ZnVuY3Rpb24odCl7dmFyIGU9dC5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpO3ZoLmhhc093blByb3BlcnR5KGUpJiZ0aGlzLm5vcm1hbGl6ZUxpc3RzJiZTaCh0KTt2YXIgbj10aGlzLm9wdGlvbnMucnVsZUZyb21Ob2RlJiZ0aGlzLm9wdGlvbnMucnVsZUZyb21Ob2RlKHQpfHx0aGlzLnBhcnNlci5tYXRjaFRhZyh0LHRoaXMpO2lmKG4/bi5pZ25vcmU6ZGguaGFzT3duUHJvcGVydHkoZSkpdGhpcy5maW5kSW5zaWRlKHQpO2Vsc2UgaWYoIW58fG4uc2tpcHx8bi5jbG9zZVBhcmVudCl7biYmbi5jbG9zZVBhcmVudD90aGlzLm9wZW49TWF0aC5tYXgoMCx0aGlzLm9wZW4tMSk6biYmbi5za2lwLm5vZGVUeXBlJiYodD1uLnNraXApO3ZhciByLG89dGhpcy50b3AsaT10aGlzLm5lZWRzQmxvY2s7aWYocGguaGFzT3duUHJvcGVydHkoZSkpcj0hMCxvLnR5cGV8fCh0aGlzLm5lZWRzQmxvY2s9ITApO2Vsc2UgaWYoIXQuZmlyc3RDaGlsZClyZXR1cm4gdm9pZCB0aGlzLmxlYWZGYWxsYmFjayh0KTt0aGlzLmFkZEFsbCh0KSxyJiZ0aGlzLnN5bmMobyksdGhpcy5uZWVkc0Jsb2NrPWl9ZWxzZSB0aGlzLmFkZEVsZW1lbnRCeVJ1bGUodCxuKX0seGgucHJvdG90eXBlLmxlYWZGYWxsYmFjaz1mdW5jdGlvbih0KXsiQlIiPT10Lm5vZGVOYW1lJiZ0aGlzLnRvcC50eXBlJiZ0aGlzLnRvcC50eXBlLmlubGluZUNvbnRlbnQmJnRoaXMuYWRkVGV4dE5vZGUodC5vd25lckRvY3VtZW50LmNyZWF0ZVRleHROb2RlKCJcbiIpKX0seGgucHJvdG90eXBlLnJlYWRTdHlsZXM9ZnVuY3Rpb24odCl7Zm9yKHZhciBlPWZsLm5vbmUsbj0wO248dC5sZW5ndGg7bis9Mil7dmFyIHI9dGhpcy5wYXJzZXIubWF0Y2hTdHlsZSh0W25dLHRbbisxXSx0aGlzKTtpZihyKXtpZihyLmlnbm9yZSlyZXR1cm4gbnVsbDtlPXRoaXMucGFyc2VyLnNjaGVtYS5tYXJrc1tyLm1hcmtdLmNyZWF0ZShyLmF0dHJzKS5hZGRUb1NldChlKX19cmV0dXJuIGV9LHhoLnByb3RvdHlwZS5hZGRFbGVtZW50QnlSdWxlPWZ1bmN0aW9uKHQsZSl7dmFyIG4scixvLGkscz10aGlzO2Uubm9kZT8ocj10aGlzLnBhcnNlci5zY2hlbWEubm9kZXNbZS5ub2RlXSxyLmlzTGVhZj90aGlzLmluc2VydE5vZGUoci5jcmVhdGUoZS5hdHRycykpfHx0aGlzLmxlYWZGYWxsYmFjayh0KTpuPXRoaXMuZW50ZXIocixlLmF0dHJzLGUucHJlc2VydmVXaGl0ZXNwYWNlKSk6KG89dGhpcy5wYXJzZXIuc2NoZW1hLm1hcmtzW2UubWFya10saT1vLmNyZWF0ZShlLmF0dHJzKSx0aGlzLmFkZFBlbmRpbmdNYXJrKGkpKTt2YXIgYT10aGlzLnRvcDtpZihyJiZyLmlzTGVhZil0aGlzLmZpbmRJbnNpZGUodCk7ZWxzZSBpZihlLmdldENvbnRlbnQpdGhpcy5maW5kSW5zaWRlKHQpLGUuZ2V0Q29udGVudCh0LHRoaXMucGFyc2VyLnNjaGVtYSkuZm9yRWFjaCgoZnVuY3Rpb24odCl7cmV0dXJuIHMuaW5zZXJ0Tm9kZSh0KX0pKTtlbHNle3ZhciBjPWUuY29udGVudEVsZW1lbnQ7InN0cmluZyI9PXR5cGVvZiBjP2M9dC5xdWVyeVNlbGVjdG9yKGMpOiJmdW5jdGlvbiI9PXR5cGVvZiBjJiYoYz1jKHQpKSxjfHwoYz10KSx0aGlzLmZpbmRBcm91bmQodCxjLCEwKSx0aGlzLmFkZEFsbChjLG4pfW4mJih0aGlzLnN5bmMoYSksdGhpcy5vcGVuLS0pLGkmJnRoaXMucmVtb3ZlUGVuZGluZ01hcmsoaSxhKX0seGgucHJvdG90eXBlLmFkZEFsbD1mdW5jdGlvbih0LGUsbixyKXtmb3IodmFyIG89bnx8MCxpPW4/dC5jaGlsZE5vZGVzW25dOnQuZmlyc3RDaGlsZCxzPW51bGw9PXI/bnVsbDp0LmNoaWxkTm9kZXNbcl07aSE9cztpPWkubmV4dFNpYmxpbmcsKytvKXRoaXMuZmluZEF0UG9pbnQodCxvKSx0aGlzLmFkZERPTShpKSxlJiZwaC5oYXNPd25Qcm9wZXJ0eShpLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCkpJiZ0aGlzLnN5bmMoZSk7dGhpcy5maW5kQXRQb2ludCh0LG8pfSx4aC5wcm90b3R5cGUuZmluZFBsYWNlPWZ1bmN0aW9uKHQpe2Zvcih2YXIgZSxuLHI9dGhpcy5vcGVuO3I+PTA7ci0tKXt2YXIgbz10aGlzLm5vZGVzW3JdLGk9by5maW5kV3JhcHBpbmcodCk7aWYoaSYmKCFlfHxlLmxlbmd0aD5pLmxlbmd0aCkmJihlPWksbj1vLCFpLmxlbmd0aCkpYnJlYWs7aWYoby5zb2xpZClicmVha31pZighZSlyZXR1cm4hMTt0aGlzLnN5bmMobik7Zm9yKHZhciBzPTA7czxlLmxlbmd0aDtzKyspdGhpcy5lbnRlcklubmVyKGVbc10sbnVsbCwhMSk7cmV0dXJuITB9LHhoLnByb3RvdHlwZS5pbnNlcnROb2RlPWZ1bmN0aW9uKHQpe2lmKHQuaXNJbmxpbmUmJnRoaXMubmVlZHNCbG9jayYmIXRoaXMudG9wLnR5cGUpe3ZhciBlPXRoaXMudGV4dGJsb2NrRnJvbUNvbnRleHQoKTtlJiZ0aGlzLmVudGVySW5uZXIoZSl9aWYodGhpcy5maW5kUGxhY2UodCkpe3RoaXMuY2xvc2VFeHRyYSgpO3ZhciBuPXRoaXMudG9wO24uYXBwbHlQZW5kaW5nKHQudHlwZSksbi5tYXRjaCYmKG4ubWF0Y2g9bi5tYXRjaC5tYXRjaFR5cGUodC50eXBlKSk7Zm9yKHZhciByPW4uYWN0aXZlTWFya3Msbz0wO288dC5tYXJrcy5sZW5ndGg7bysrKW4udHlwZSYmIW4udHlwZS5hbGxvd3NNYXJrVHlwZSh0Lm1hcmtzW29dLnR5cGUpfHwocj10Lm1hcmtzW29dLmFkZFRvU2V0KHIpKTtyZXR1cm4gbi5jb250ZW50LnB1c2godC5tYXJrKHIpKSwhMH1yZXR1cm4hMX0seGgucHJvdG90eXBlLmVudGVyPWZ1bmN0aW9uKHQsZSxuKXt2YXIgcj10aGlzLmZpbmRQbGFjZSh0LmNyZWF0ZShlKSk7cmV0dXJuIHImJnRoaXMuZW50ZXJJbm5lcih0LGUsITAsbikscn0seGgucHJvdG90eXBlLmVudGVySW5uZXI9ZnVuY3Rpb24odCxlLG4scil7dGhpcy5jbG9zZUV4dHJhKCk7dmFyIG89dGhpcy50b3A7by5hcHBseVBlbmRpbmcodCksby5tYXRjaD1vLm1hdGNoJiZvLm1hdGNoLm1hdGNoVHlwZSh0LGUpO3ZhciBpPW51bGw9PXI/by5vcHRpb25zJn55aDp3aChyKTtvLm9wdGlvbnMmeWgmJjA9PW8uY29udGVudC5sZW5ndGgmJihpfD15aCksdGhpcy5ub2Rlcy5wdXNoKG5ldyBiaCh0LGUsby5hY3RpdmVNYXJrcyxvLnBlbmRpbmdNYXJrcyxuLG51bGwsaSkpLHRoaXMub3BlbisrfSx4aC5wcm90b3R5cGUuY2xvc2VFeHRyYT1mdW5jdGlvbih0KXt2YXIgZT10aGlzLm5vZGVzLmxlbmd0aC0xO2lmKGU+dGhpcy5vcGVuKXtmb3IoO2U+dGhpcy5vcGVuO2UtLSl0aGlzLm5vZGVzW2UtMV0uY29udGVudC5wdXNoKHRoaXMubm9kZXNbZV0uZmluaXNoKHQpKTt0aGlzLm5vZGVzLmxlbmd0aD10aGlzLm9wZW4rMX19LHhoLnByb3RvdHlwZS5maW5pc2g9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5vcGVuPTAsdGhpcy5jbG9zZUV4dHJhKHRoaXMuaXNPcGVuKSx0aGlzLm5vZGVzWzBdLmZpbmlzaCh0aGlzLmlzT3Blbnx8dGhpcy5vcHRpb25zLnRvcE9wZW4pfSx4aC5wcm90b3R5cGUuc3luYz1mdW5jdGlvbih0KXtmb3IodmFyIGU9dGhpcy5vcGVuO2U+PTA7ZS0tKWlmKHRoaXMubm9kZXNbZV09PXQpcmV0dXJuIHZvaWQodGhpcy5vcGVuPWUpfSxraC5jdXJyZW50UG9zLmdldD1mdW5jdGlvbigpe3RoaXMuY2xvc2VFeHRyYSgpO2Zvcih2YXIgdD0wLGU9dGhpcy5vcGVuO2U+PTA7ZS0tKXtmb3IodmFyIG49dGhpcy5ub2Rlc1tlXS5jb250ZW50LHI9bi5sZW5ndGgtMTtyPj0wO3ItLSl0Kz1uW3JdLm5vZGVTaXplO2UmJnQrK31yZXR1cm4gdH0seGgucHJvdG90eXBlLmZpbmRBdFBvaW50PWZ1bmN0aW9uKHQsZSl7aWYodGhpcy5maW5kKWZvcih2YXIgbj0wO248dGhpcy5maW5kLmxlbmd0aDtuKyspdGhpcy5maW5kW25dLm5vZGU9PXQmJnRoaXMuZmluZFtuXS5vZmZzZXQ9PWUmJih0aGlzLmZpbmRbbl0ucG9zPXRoaXMuY3VycmVudFBvcyl9LHhoLnByb3RvdHlwZS5maW5kSW5zaWRlPWZ1bmN0aW9uKHQpe2lmKHRoaXMuZmluZClmb3IodmFyIGU9MDtlPHRoaXMuZmluZC5sZW5ndGg7ZSsrKW51bGw9PXRoaXMuZmluZFtlXS5wb3MmJjE9PXQubm9kZVR5cGUmJnQuY29udGFpbnModGhpcy5maW5kW2VdLm5vZGUpJiYodGhpcy5maW5kW2VdLnBvcz10aGlzLmN1cnJlbnRQb3MpfSx4aC5wcm90b3R5cGUuZmluZEFyb3VuZD1mdW5jdGlvbih0LGUsbil7aWYodCE9ZSYmdGhpcy5maW5kKWZvcih2YXIgcj0wO3I8dGhpcy5maW5kLmxlbmd0aDtyKyspaWYobnVsbD09dGhpcy5maW5kW3JdLnBvcyYmMT09dC5ub2RlVHlwZSYmdC5jb250YWlucyh0aGlzLmZpbmRbcl0ubm9kZSkpe3ZhciBvPWUuY29tcGFyZURvY3VtZW50UG9zaXRpb24odGhpcy5maW5kW3JdLm5vZGUpO28mKG4/Mjo0KSYmKHRoaXMuZmluZFtyXS5wb3M9dGhpcy5jdXJyZW50UG9zKX19LHhoLnByb3RvdHlwZS5maW5kSW5UZXh0PWZ1bmN0aW9uKHQpe2lmKHRoaXMuZmluZClmb3IodmFyIGU9MDtlPHRoaXMuZmluZC5sZW5ndGg7ZSsrKXRoaXMuZmluZFtlXS5ub2RlPT10JiYodGhpcy5maW5kW2VdLnBvcz10aGlzLmN1cnJlbnRQb3MtKHQubm9kZVZhbHVlLmxlbmd0aC10aGlzLmZpbmRbZV0ub2Zmc2V0KSl9LHhoLnByb3RvdHlwZS5tYXRjaGVzQ29udGV4dD1mdW5jdGlvbih0KXt2YXIgZT10aGlzO2lmKHQuaW5kZXhPZigifCIpPi0xKXJldHVybiB0LnNwbGl0KC9ccypcfFxzKi8pLnNvbWUodGhpcy5tYXRjaGVzQ29udGV4dCx0aGlzKTt2YXIgbj10LnNwbGl0KCIvIikscj10aGlzLm9wdGlvbnMuY29udGV4dCxvPSF0aGlzLmlzT3BlbiYmKCFyfHxyLnBhcmVudC50eXBlPT10aGlzLm5vZGVzWzBdLnR5cGUpLGk9LShyP3IuZGVwdGgrMTowKSsobz8wOjEpLHM9ZnVuY3Rpb24odCxhKXtmb3IoO3Q+PTA7dC0tKXt2YXIgYz1uW3RdO2lmKCIiPT1jKXtpZih0PT1uLmxlbmd0aC0xfHwwPT10KWNvbnRpbnVlO2Zvcig7YT49aTthLS0paWYocyh0LTEsYSkpcmV0dXJuITA7cmV0dXJuITF9dmFyIHU9YT4wfHwwPT1hJiZvP2Uubm9kZXNbYV0udHlwZTpyJiZhPj1pP3Iubm9kZShhLWkpLnR5cGU6bnVsbDtpZighdXx8dS5uYW1lIT1jJiYtMT09dS5ncm91cHMuaW5kZXhPZihjKSlyZXR1cm4hMTthLS19cmV0dXJuITB9O3JldHVybiBzKG4ubGVuZ3RoLTEsdGhpcy5vcGVuKX0seGgucHJvdG90eXBlLnRleHRibG9ja0Zyb21Db250ZXh0PWZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5vcHRpb25zLmNvbnRleHQ7aWYodClmb3IodmFyIGU9dC5kZXB0aDtlPj0wO2UtLSl7dmFyIG49dC5ub2RlKGUpLmNvbnRlbnRNYXRjaEF0KHQuaW5kZXhBZnRlcihlKSkuZGVmYXVsdFR5cGU7aWYobiYmbi5pc1RleHRibG9jayYmbi5kZWZhdWx0QXR0cnMpcmV0dXJuIG59Zm9yKHZhciByIGluIHRoaXMucGFyc2VyLnNjaGVtYS5ub2Rlcyl7dmFyIG89dGhpcy5wYXJzZXIuc2NoZW1hLm5vZGVzW3JdO2lmKG8uaXNUZXh0YmxvY2smJm8uZGVmYXVsdEF0dHJzKXJldHVybiBvfX0seGgucHJvdG90eXBlLmFkZFBlbmRpbmdNYXJrPWZ1bmN0aW9uKHQpe3RoaXMudG9wLnBlbmRpbmdNYXJrcz10LmFkZFRvU2V0KHRoaXMudG9wLnBlbmRpbmdNYXJrcyl9LHhoLnByb3RvdHlwZS5yZW1vdmVQZW5kaW5nTWFyaz1mdW5jdGlvbih0LGUpe2Zvcih2YXIgbj10aGlzLm9wZW47bj49MDtuLS0pe3ZhciByPXRoaXMubm9kZXNbbl0sbz1yLnBlbmRpbmdNYXJrcy5sYXN0SW5kZXhPZih0KTtpZihvPi0xP3IucGVuZGluZ01hcmtzPXQucmVtb3ZlRnJvbVNldChyLnBlbmRpbmdNYXJrcyk6ci5hY3RpdmVNYXJrcz10LnJlbW92ZUZyb21TZXQoci5hY3RpdmVNYXJrcykscj09ZSlicmVha319LE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKHhoLnByb3RvdHlwZSxraCk7dmFyIFRoPWZ1bmN0aW9uKHQsZSl7dGhpcy5ub2Rlcz10fHx7fSx0aGlzLm1hcmtzPWV8fHt9fTtmdW5jdGlvbiBBaCh0KXt2YXIgZT17fTtmb3IodmFyIG4gaW4gdCl7dmFyIHI9dFtuXS5zcGVjLnRvRE9NO3ImJihlW25dPXIpfXJldHVybiBlfWZ1bmN0aW9uIEVoKHQpe3JldHVybiB0LmRvY3VtZW50fHx3aW5kb3cuZG9jdW1lbnR9VGgucHJvdG90eXBlLnNlcmlhbGl6ZUZyYWdtZW50PWZ1bmN0aW9uKHQsZSxuKXt2YXIgcj10aGlzO3ZvaWQgMD09PWUmJihlPXt9KSxufHwobj1FaChlKS5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCkpO3ZhciBvPW4saT1udWxsO3JldHVybiB0LmZvckVhY2goKGZ1bmN0aW9uKHQpe2lmKGl8fHQubWFya3MubGVuZ3RoKXtpfHwoaT1bXSk7dmFyIG49MCxzPTA7d2hpbGUobjxpLmxlbmd0aCYmczx0Lm1hcmtzLmxlbmd0aCl7dmFyIGE9dC5tYXJrc1tzXTtpZihyLm1hcmtzW2EudHlwZS5uYW1lXSl7aWYoIWEuZXEoaVtuXSl8fCExPT09YS50eXBlLnNwZWMuc3Bhbm5pbmcpYnJlYWs7bis9MixzKyt9ZWxzZSBzKyt9d2hpbGUobjxpLmxlbmd0aClvPWkucG9wKCksaS5wb3AoKTt3aGlsZShzPHQubWFya3MubGVuZ3RoKXt2YXIgYz10Lm1hcmtzW3MrK10sdT1yLnNlcmlhbGl6ZU1hcmsoYyx0LmlzSW5saW5lLGUpO3UmJihpLnB1c2goYyxvKSxvLmFwcGVuZENoaWxkKHUuZG9tKSxvPXUuY29udGVudERPTXx8dS5kb20pfX1vLmFwcGVuZENoaWxkKHIuc2VyaWFsaXplTm9kZSh0LGUpKX0pKSxufSxUaC5wcm90b3R5cGUuc2VyaWFsaXplTm9kZT1mdW5jdGlvbih0LGUpe3ZvaWQgMD09PWUmJihlPXt9KTt2YXIgbj1UaC5yZW5kZXJTcGVjKEVoKGUpLHRoaXMubm9kZXNbdC50eXBlLm5hbWVdKHQpKSxyPW4uZG9tLG89bi5jb250ZW50RE9NO2lmKG8pe2lmKHQuaXNMZWFmKXRocm93IG5ldyBSYW5nZUVycm9yKCJDb250ZW50IGhvbGUgbm90IGFsbG93ZWQgaW4gYSBsZWFmIG5vZGUgc3BlYyIpO2Uub25Db250ZW50P2Uub25Db250ZW50KHQsbyxlKTp0aGlzLnNlcmlhbGl6ZUZyYWdtZW50KHQuY29udGVudCxlLG8pfXJldHVybiByfSxUaC5wcm90b3R5cGUuc2VyaWFsaXplTm9kZUFuZE1hcmtzPWZ1bmN0aW9uKHQsZSl7dm9pZCAwPT09ZSYmKGU9e30pO2Zvcih2YXIgbj10aGlzLnNlcmlhbGl6ZU5vZGUodCxlKSxyPXQubWFya3MubGVuZ3RoLTE7cj49MDtyLS0pe3ZhciBvPXRoaXMuc2VyaWFsaXplTWFyayh0Lm1hcmtzW3JdLHQuaXNJbmxpbmUsZSk7byYmKChvLmNvbnRlbnRET018fG8uZG9tKS5hcHBlbmRDaGlsZChuKSxuPW8uZG9tKX1yZXR1cm4gbn0sVGgucHJvdG90eXBlLnNlcmlhbGl6ZU1hcms9ZnVuY3Rpb24odCxlLG4pe3ZvaWQgMD09PW4mJihuPXt9KTt2YXIgcj10aGlzLm1hcmtzW3QudHlwZS5uYW1lXTtyZXR1cm4gciYmVGgucmVuZGVyU3BlYyhFaChuKSxyKHQsZSkpfSxUaC5yZW5kZXJTcGVjPWZ1bmN0aW9uKHQsZSxuKXtpZih2b2lkIDA9PT1uJiYobj1udWxsKSwic3RyaW5nIj09dHlwZW9mIGUpcmV0dXJue2RvbTp0LmNyZWF0ZVRleHROb2RlKGUpfTtpZihudWxsIT1lLm5vZGVUeXBlKXJldHVybntkb206ZX07dmFyIHI9ZVswXSxvPXIuaW5kZXhPZigiICIpO28+MCYmKG49ci5zbGljZSgwLG8pLHI9ci5zbGljZShvKzEpKTt2YXIgaT1udWxsLHM9bj90LmNyZWF0ZUVsZW1lbnROUyhuLHIpOnQuY3JlYXRlRWxlbWVudChyKSxhPWVbMV0sYz0xO2lmKGEmJiJvYmplY3QiPT10eXBlb2YgYSYmbnVsbD09YS5ub2RlVHlwZSYmIUFycmF5LmlzQXJyYXkoYSkpZm9yKHZhciB1IGluIGM9MixhKWlmKG51bGwhPWFbdV0pe3ZhciBsPXUuaW5kZXhPZigiICIpO2w+MD9zLnNldEF0dHJpYnV0ZU5TKHUuc2xpY2UoMCxsKSx1LnNsaWNlKGwrMSksYVt1XSk6cy5zZXRBdHRyaWJ1dGUodSxhW3VdKX1mb3IodmFyIGg9YztoPGUubGVuZ3RoO2grKyl7dmFyIGY9ZVtoXTtpZigwPT09Zil7aWYoaDxlLmxlbmd0aC0xfHxoPmMpdGhyb3cgbmV3IFJhbmdlRXJyb3IoIkNvbnRlbnQgaG9sZSBtdXN0IGJlIHRoZSBvbmx5IGNoaWxkIG9mIGl0cyBwYXJlbnQgbm9kZSIpO3JldHVybntkb206cyxjb250ZW50RE9NOnN9fXZhciBwPVRoLnJlbmRlclNwZWModCxmLG4pLGQ9cC5kb20sdj1wLmNvbnRlbnRET007aWYocy5hcHBlbmRDaGlsZChkKSx2KXtpZihpKXRocm93IG5ldyBSYW5nZUVycm9yKCJNdWx0aXBsZSBjb250ZW50IGhvbGVzIik7aT12fX1yZXR1cm57ZG9tOnMsY29udGVudERPTTppfX0sVGguZnJvbVNjaGVtYT1mdW5jdGlvbih0KXtyZXR1cm4gdC5jYWNoZWQuZG9tU2VyaWFsaXplcnx8KHQuY2FjaGVkLmRvbVNlcmlhbGl6ZXI9bmV3IFRoKHRoaXMubm9kZXNGcm9tU2NoZW1hKHQpLHRoaXMubWFya3NGcm9tU2NoZW1hKHQpKSl9LFRoLm5vZGVzRnJvbVNjaGVtYT1mdW5jdGlvbih0KXt2YXIgZT1BaCh0Lm5vZGVzKTtyZXR1cm4gZS50ZXh0fHwoZS50ZXh0PWZ1bmN0aW9uKHQpe3JldHVybiB0LnRleHR9KSxlfSxUaC5tYXJrc0Zyb21TY2hlbWE9ZnVuY3Rpb24odCl7cmV0dXJuIEFoKHQubWFya3MpfTt2YXIgRGg9e307aWYoInVuZGVmaW5lZCIhPXR5cGVvZiBuYXZpZ2F0b3ImJiJ1bmRlZmluZWQiIT10eXBlb2YgZG9jdW1lbnQpe3ZhciBSaD0vRWRnZVwvKFxkKykvLmV4ZWMobmF2aWdhdG9yLnVzZXJBZ2VudCksemg9L01TSUUgXGQvLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudCksUGg9L1RyaWRlbnRcLyg/Ols3LTldfFxkezIsfSlcLi4qcnY6KFxkKykvLmV4ZWMobmF2aWdhdG9yLnVzZXJBZ2VudCk7RGgubWFjPS9NYWMvLnRlc3QobmF2aWdhdG9yLnBsYXRmb3JtKTt2YXIgSWg9RGguaWU9ISEoemh8fFBofHxSaCk7RGguaWVfdmVyc2lvbj16aD9kb2N1bWVudC5kb2N1bWVudE1vZGV8fDY6UGg/K1BoWzFdOlJoPytSaFsxXTpudWxsLERoLmdlY2tvPSFJaCYmL2dlY2tvXC8oXGQrKS9pLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudCksRGguZ2Vja29fdmVyc2lvbj1EaC5nZWNrbyYmKygvRmlyZWZveFwvKFxkKykvLmV4ZWMobmF2aWdhdG9yLnVzZXJBZ2VudCl8fFswLDBdKVsxXTt2YXIgQmg9IUloJiYvQ2hyb21lXC8oXGQrKS8uZXhlYyhuYXZpZ2F0b3IudXNlckFnZW50KTtEaC5jaHJvbWU9ISFCaCxEaC5jaHJvbWVfdmVyc2lvbj1CaCYmK0JoWzFdLERoLmlvcz0hSWgmJi9BcHBsZVdlYktpdC8udGVzdChuYXZpZ2F0b3IudXNlckFnZW50KSYmL01vYmlsZVwvXHcrLy50ZXN0KG5hdmlnYXRvci51c2VyQWdlbnQpLERoLmFuZHJvaWQ9L0FuZHJvaWQgXGQvLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudCksRGgud2Via2l0PSJ3ZWJraXRGb250U21vb3RoaW5nImluIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zdHlsZSxEaC5zYWZhcmk9L0FwcGxlIENvbXB1dGVyLy50ZXN0KG5hdmlnYXRvci52ZW5kb3IpLERoLndlYmtpdF92ZXJzaW9uPURoLndlYmtpdCYmKygvXGJBcHBsZVdlYktpdFwvKFxkKykvLmV4ZWMobmF2aWdhdG9yLnVzZXJBZ2VudCl8fFswLDBdKVsxXX12YXIgX2g9ZnVuY3Rpb24odCl7Zm9yKHZhciBlPTA7O2UrKylpZih0PXQucHJldmlvdXNTaWJsaW5nLCF0KXJldHVybiBlfSxGaD1mdW5jdGlvbih0KXt2YXIgZT10LnBhcmVudE5vZGU7cmV0dXJuIGUmJjExPT1lLm5vZGVUeXBlP2UuaG9zdDplfSxqaD1mdW5jdGlvbih0LGUsbil7dmFyIHI9ZG9jdW1lbnQuY3JlYXRlUmFuZ2UoKTtyZXR1cm4gci5zZXRFbmQodCxudWxsPT1uP3Qubm9kZVZhbHVlLmxlbmd0aDpuKSxyLnNldFN0YXJ0KHQsZXx8MCkscn0sJGg9ZnVuY3Rpb24odCxlLG4scil7cmV0dXJuIG4mJihMaCh0LGUsbixyLC0xKXx8TGgodCxlLG4sciwxKSl9LFZoPS9eKGltZ3xicnxpbnB1dHx0ZXh0YXJlYXxocikkL2k7ZnVuY3Rpb24gTGgodCxlLG4scixvKXtmb3IoOzspe2lmKHQ9PW4mJmU9PXIpcmV0dXJuITA7aWYoZT09KG88MD8wOnFoKHQpKSl7dmFyIGk9dC5wYXJlbnROb2RlO2lmKDEhPWkubm9kZVR5cGV8fFdoKHQpfHxWaC50ZXN0KHQubm9kZU5hbWUpfHwiZmFsc2UiPT10LmNvbnRlbnRFZGl0YWJsZSlyZXR1cm4hMTtlPV9oKHQpKyhvPDA/MDoxKSx0PWl9ZWxzZXtpZigxIT10Lm5vZGVUeXBlKXJldHVybiExO2lmKHQ9dC5jaGlsZE5vZGVzW2UrKG88MD8tMTowKV0sImZhbHNlIj09dC5jb250ZW50RWRpdGFibGUpcmV0dXJuITE7ZT1vPDA/cWgodCk6MH19fWZ1bmN0aW9uIHFoKHQpe3JldHVybiAzPT10Lm5vZGVUeXBlP3Qubm9kZVZhbHVlLmxlbmd0aDp0LmNoaWxkTm9kZXMubGVuZ3RofWZ1bmN0aW9uIEpoKHQsZSxuKXtmb3IodmFyIHI9MD09ZSxvPWU9PXFoKHQpO3J8fG87KXtpZih0PT1uKXJldHVybiEwO3ZhciBpPV9oKHQpO2lmKHQ9dC5wYXJlbnROb2RlLCF0KXJldHVybiExO3I9ciYmMD09aSxvPW8mJmk9PXFoKHQpfX1mdW5jdGlvbiBXaCh0KXtmb3IodmFyIGUsbj10O247bj1uLnBhcmVudE5vZGUpaWYoZT1uLnBtVmlld0Rlc2MpYnJlYWs7cmV0dXJuIGUmJmUubm9kZSYmZS5ub2RlLmlzQmxvY2smJihlLmRvbT09dHx8ZS5jb250ZW50RE9NPT10KX12YXIgSGg9ZnVuY3Rpb24odCl7dmFyIGU9dC5pc0NvbGxhcHNlZDtyZXR1cm4gZSYmRGguY2hyb21lJiZ0LnJhbmdlQ291bnQmJiF0LmdldFJhbmdlQXQoMCkuY29sbGFwc2VkJiYoZT0hMSksZX07ZnVuY3Rpb24gS2godCxlKXt2YXIgbj1kb2N1bWVudC5jcmVhdGVFdmVudCgiRXZlbnQiKTtyZXR1cm4gbi5pbml0RXZlbnQoImtleWRvd24iLCEwLCEwKSxuLmtleUNvZGU9dCxuLmtleT1uLmNvZGU9ZSxufWZ1bmN0aW9uIFVoKHQpe3JldHVybntsZWZ0OjAscmlnaHQ6dC5pbm5lcldpZHRoLHRvcDowLGJvdHRvbTp0LmlubmVySGVpZ2h0fX1mdW5jdGlvbiBHaCh0LGUpe3JldHVybiJudW1iZXIiPT10eXBlb2YgdD90OnRbZV19ZnVuY3Rpb24gWGgodCxlLG4pe2Zvcih2YXIgcj10LnNvbWVQcm9wKCJzY3JvbGxUaHJlc2hvbGQiKXx8MCxvPXQuc29tZVByb3AoInNjcm9sbE1hcmdpbiIpfHw1LGk9dC5kb20ub3duZXJEb2N1bWVudCxzPWkuZGVmYXVsdFZpZXcsYT1ufHx0LmRvbTs7YT1GaChhKSl7aWYoIWEpYnJlYWs7aWYoMT09YS5ub2RlVHlwZSl7dmFyIGM9YT09aS5ib2R5fHwxIT1hLm5vZGVUeXBlLHU9Yz9VaChzKTphLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLGw9MCxoPTA7aWYoZS50b3A8dS50b3ArR2gociwidG9wIik/aD0tKHUudG9wLWUudG9wK0doKG8sInRvcCIpKTplLmJvdHRvbT51LmJvdHRvbS1HaChyLCJib3R0b20iKSYmKGg9ZS5ib3R0b20tdS5ib3R0b20rR2gobywiYm90dG9tIikpLGUubGVmdDx1LmxlZnQrR2gociwibGVmdCIpP2w9LSh1LmxlZnQtZS5sZWZ0K0doKG8sImxlZnQiKSk6ZS5yaWdodD51LnJpZ2h0LUdoKHIsInJpZ2h0IikmJihsPWUucmlnaHQtdS5yaWdodCtHaChvLCJyaWdodCIpKSxsfHxoKWlmKGMpcy5zY3JvbGxCeShsLGgpO2Vsc2V7dmFyIGY9YS5zY3JvbGxMZWZ0LHA9YS5zY3JvbGxUb3A7aCYmKGEuc2Nyb2xsVG9wKz1oKSxsJiYoYS5zY3JvbGxMZWZ0Kz1sKTt2YXIgZD1hLnNjcm9sbExlZnQtZix2PWEuc2Nyb2xsVG9wLXA7ZT17bGVmdDplLmxlZnQtZCx0b3A6ZS50b3AtdixyaWdodDplLnJpZ2h0LWQsYm90dG9tOmUuYm90dG9tLXZ9fWlmKGMpYnJlYWt9fX1mdW5jdGlvbiBZaCh0KXtmb3IodmFyIGUsbixyPXQuZG9tLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLG89TWF0aC5tYXgoMCxyLnRvcCksaT0oci5sZWZ0K3IucmlnaHQpLzIscz1vKzE7czxNYXRoLm1pbihpbm5lckhlaWdodCxyLmJvdHRvbSk7cys9NSl7dmFyIGE9dC5yb290LmVsZW1lbnRGcm9tUG9pbnQoaSxzKTtpZihhIT10LmRvbSYmdC5kb20uY29udGFpbnMoYSkpe3ZhciBjPWEuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7aWYoYy50b3A+PW8tMjApe2U9YSxuPWMudG9wO2JyZWFrfX19cmV0dXJue3JlZkRPTTplLHJlZlRvcDpuLHN0YWNrOlpoKHQuZG9tKX19ZnVuY3Rpb24gWmgodCl7Zm9yKHZhciBlPVtdLG49dC5vd25lckRvY3VtZW50O3Q7dD1GaCh0KSlpZihlLnB1c2goe2RvbTp0LHRvcDp0LnNjcm9sbFRvcCxsZWZ0OnQuc2Nyb2xsTGVmdH0pLHQ9PW4pYnJlYWs7cmV0dXJuIGV9ZnVuY3Rpb24gUWgodCl7dmFyIGU9dC5yZWZET00sbj10LnJlZlRvcCxyPXQuc3RhY2ssbz1lP2UuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkudG9wOjA7dGYociwwPT1vPzA6by1uKX1mdW5jdGlvbiB0Zih0LGUpe2Zvcih2YXIgbj0wO248dC5sZW5ndGg7bisrKXt2YXIgcj10W25dLG89ci5kb20saT1yLnRvcCxzPXIubGVmdDtvLnNjcm9sbFRvcCE9aStlJiYoby5zY3JvbGxUb3A9aStlKSxvLnNjcm9sbExlZnQhPXMmJihvLnNjcm9sbExlZnQ9cyl9fXZhciBlZj1udWxsO2Z1bmN0aW9uIG5mKHQpe2lmKHQuc2V0QWN0aXZlKXJldHVybiB0LnNldEFjdGl2ZSgpO2lmKGVmKXJldHVybiB0LmZvY3VzKGVmKTt2YXIgZT1aaCh0KTt0LmZvY3VzKG51bGw9PWVmP3tnZXQgcHJldmVudFNjcm9sbCgpe3JldHVybiBlZj17cHJldmVudFNjcm9sbDohMH0sITB9fTp2b2lkIDApLGVmfHwoZWY9ITEsdGYoZSwwKSl9ZnVuY3Rpb24gcmYodCxlKXtmb3IodmFyIG4scixvPTJlOCxpPTAscz1lLnRvcCxhPWUudG9wLGM9dC5maXJzdENoaWxkLHU9MDtjO2M9Yy5uZXh0U2libGluZyx1Kyspe3ZhciBsPXZvaWQgMDtpZigxPT1jLm5vZGVUeXBlKWw9Yy5nZXRDbGllbnRSZWN0cygpO2Vsc2V7aWYoMyE9Yy5ub2RlVHlwZSljb250aW51ZTtsPWpoKGMpLmdldENsaWVudFJlY3RzKCl9Zm9yKHZhciBoPTA7aDxsLmxlbmd0aDtoKyspe3ZhciBmPWxbaF07aWYoZi50b3A8PXMmJmYuYm90dG9tPj1hKXtzPU1hdGgubWF4KGYuYm90dG9tLHMpLGE9TWF0aC5taW4oZi50b3AsYSk7dmFyIHA9Zi5sZWZ0PmUubGVmdD9mLmxlZnQtZS5sZWZ0OmYucmlnaHQ8ZS5sZWZ0P2UubGVmdC1mLnJpZ2h0OjA7aWYocDxvKXtuPWMsbz1wLHI9cCYmMz09bi5ub2RlVHlwZT97bGVmdDpmLnJpZ2h0PGUubGVmdD9mLnJpZ2h0OmYubGVmdCx0b3A6ZS50b3B9OmUsMT09Yy5ub2RlVHlwZSYmcCYmKGk9dSsoZS5sZWZ0Pj0oZi5sZWZ0K2YucmlnaHQpLzI/MTowKSk7Y29udGludWV9fSFuJiYoZS5sZWZ0Pj1mLnJpZ2h0JiZlLnRvcD49Zi50b3B8fGUubGVmdD49Zi5sZWZ0JiZlLnRvcD49Zi5ib3R0b20pJiYoaT11KzEpfX1yZXR1cm4gbiYmMz09bi5ub2RlVHlwZT9vZihuLHIpOiFufHxvJiYxPT1uLm5vZGVUeXBlP3tub2RlOnQsb2Zmc2V0Oml9OnJmKG4scil9ZnVuY3Rpb24gb2YodCxlKXtmb3IodmFyIG49dC5ub2RlVmFsdWUubGVuZ3RoLHI9ZG9jdW1lbnQuY3JlYXRlUmFuZ2UoKSxvPTA7bzxuO28rKyl7ci5zZXRFbmQodCxvKzEpLHIuc2V0U3RhcnQodCxvKTt2YXIgaT1mZihyLDEpO2lmKGkudG9wIT1pLmJvdHRvbSYmc2YoZSxpKSlyZXR1cm57bm9kZTp0LG9mZnNldDpvKyhlLmxlZnQ+PShpLmxlZnQraS5yaWdodCkvMj8xOjApfX1yZXR1cm57bm9kZTp0LG9mZnNldDowfX1mdW5jdGlvbiBzZih0LGUpe3JldHVybiB0LmxlZnQ+PWUubGVmdC0xJiZ0LmxlZnQ8PWUucmlnaHQrMSYmdC50b3A+PWUudG9wLTEmJnQudG9wPD1lLmJvdHRvbSsxfWZ1bmN0aW9uIGFmKHQsZSl7dmFyIG49dC5wYXJlbnROb2RlO3JldHVybiBuJiYvXmxpJC9pLnRlc3Qobi5ub2RlTmFtZSkmJmUubGVmdDx0LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLmxlZnQ/bjp0fWZ1bmN0aW9uIGNmKHQsZSxuKXt2YXIgcj1yZihlLG4pLG89ci5ub2RlLGk9ci5vZmZzZXQscz0tMTtpZigxPT1vLm5vZGVUeXBlJiYhby5maXJzdENoaWxkKXt2YXIgYT1vLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO3M9YS5sZWZ0IT1hLnJpZ2h0JiZuLmxlZnQ+KGEubGVmdCthLnJpZ2h0KS8yPzE6LTF9cmV0dXJuIHQuZG9jVmlldy5wb3NGcm9tRE9NKG8saSxzKX1mdW5jdGlvbiB1Zih0LGUsbixyKXtmb3IodmFyIG89LTEsaT1lOzspe2lmKGk9PXQuZG9tKWJyZWFrO3ZhciBzPXQuZG9jVmlldy5uZWFyZXN0RGVzYyhpLCEwKTtpZighcylyZXR1cm4gbnVsbDtpZihzLm5vZGUuaXNCbG9jayYmcy5wYXJlbnQpe3ZhciBhPXMuZG9tLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO2lmKGEubGVmdD5yLmxlZnR8fGEudG9wPnIudG9wKW89cy5wb3NCZWZvcmU7ZWxzZXtpZighKGEucmlnaHQ8ci5sZWZ0fHxhLmJvdHRvbTxyLnRvcCkpYnJlYWs7bz1zLnBvc0FmdGVyfX1pPXMuZG9tLnBhcmVudE5vZGV9cmV0dXJuIG8+LTE/bzp0LmRvY1ZpZXcucG9zRnJvbURPTShlLG4pfWZ1bmN0aW9uIGxmKHQsZSxuKXt2YXIgcj10LmNoaWxkTm9kZXMubGVuZ3RoO2lmKHImJm4udG9wPG4uYm90dG9tKWZvcih2YXIgbz1NYXRoLm1heCgwLE1hdGgubWluKHItMSxNYXRoLmZsb29yKHIqKGUudG9wLW4udG9wKS8obi5ib3R0b20tbi50b3ApKS0yKSksaT1vOzspe3ZhciBzPXQuY2hpbGROb2Rlc1tpXTtpZigxPT1zLm5vZGVUeXBlKWZvcih2YXIgYT1zLmdldENsaWVudFJlY3RzKCksYz0wO2M8YS5sZW5ndGg7YysrKXt2YXIgdT1hW2NdO2lmKHNmKGUsdSkpcmV0dXJuIGxmKHMsZSx1KX1pZigoaT0oaSsxKSVyKT09bylicmVha31yZXR1cm4gdH1mdW5jdGlvbiBoZih0LGUpe3ZhciBuLHIsbyxpLHM9dC5yb290O2lmKHMuY2FyZXRQb3NpdGlvbkZyb21Qb2ludCl0cnl7dmFyIGE9cy5jYXJldFBvc2l0aW9uRnJvbVBvaW50KGUubGVmdCxlLnRvcCk7YSYmKG49YSxvPW4ub2Zmc2V0Tm9kZSxpPW4ub2Zmc2V0KX1jYXRjaCh2KXt9aWYoIW8mJnMuY2FyZXRSYW5nZUZyb21Qb2ludCl7dmFyIGM9cy5jYXJldFJhbmdlRnJvbVBvaW50KGUubGVmdCxlLnRvcCk7YyYmKHI9YyxvPXIuc3RhcnRDb250YWluZXIsaT1yLnN0YXJ0T2Zmc2V0KX12YXIgdSxsPXMuZWxlbWVudEZyb21Qb2ludChlLmxlZnQsZS50b3ArMSk7aWYoIWx8fCF0LmRvbS5jb250YWlucygxIT1sLm5vZGVUeXBlP2wucGFyZW50Tm9kZTpsKSl7dmFyIGg9dC5kb20uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7aWYoIXNmKGUsaCkpcmV0dXJuIG51bGw7aWYobD1sZih0LmRvbSxlLGgpLCFsKXJldHVybiBudWxsfWlmKGw9YWYobCxlKSxvKXtpZihEaC5nZWNrbyYmMT09by5ub2RlVHlwZSYmKGk9TWF0aC5taW4oaSxvLmNoaWxkTm9kZXMubGVuZ3RoKSxpPG8uY2hpbGROb2Rlcy5sZW5ndGgpKXt2YXIgZixwPW8uY2hpbGROb2Rlc1tpXTsiSU1HIj09cC5ub2RlTmFtZSYmKGY9cC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKSkucmlnaHQ8PWUubGVmdCYmZi5ib3R0b20+ZS50b3AmJmkrK31vPT10LmRvbSYmaT09by5jaGlsZE5vZGVzLmxlbmd0aC0xJiYxPT1vLmxhc3RDaGlsZC5ub2RlVHlwZSYmZS50b3A+by5sYXN0Q2hpbGQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkuYm90dG9tP3U9dC5zdGF0ZS5kb2MuY29udGVudC5zaXplOjAhPWkmJjE9PW8ubm9kZVR5cGUmJiJCUiI9PW8uY2hpbGROb2Rlc1tpLTFdLm5vZGVOYW1lfHwodT11Zih0LG8saSxlKSl9bnVsbD09dSYmKHU9Y2YodCxsLGUpKTt2YXIgZD10LmRvY1ZpZXcubmVhcmVzdERlc2MobCwhMCk7cmV0dXJue3Bvczp1LGluc2lkZTpkP2QucG9zQXRTdGFydC1kLmJvcmRlcjotMX19ZnVuY3Rpb24gZmYodCxlKXt2YXIgbj10LmdldENsaWVudFJlY3RzKCk7cmV0dXJuIG4ubGVuZ3RoP25bZTwwPzA6bi5sZW5ndGgtMV06dC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKX1mdW5jdGlvbiBwZih0LGUpe3ZhciBuPXQuZG9jVmlldy5kb21Gcm9tUG9zKGUpLHI9bi5ub2RlLG89bi5vZmZzZXQ7aWYoMz09ci5ub2RlVHlwZSYmKERoLndlYmtpdHx8RGguZ2Vja28pKXt2YXIgaT1mZihqaChyLG8sbyksMCk7aWYoRGguZ2Vja28mJm8mJi9ccy8udGVzdChyLm5vZGVWYWx1ZVtvLTFdKSYmbzxyLm5vZGVWYWx1ZS5sZW5ndGgpe3ZhciBzPWZmKGpoKHIsby0xLG8tMSksLTEpO2lmKHMudG9wPT1pLnRvcCl7dmFyIGE9ZmYoamgocixvLG8rMSksLTEpO2lmKGEudG9wIT1pLnRvcClyZXR1cm4gZGYoYSxhLmxlZnQ8cy5sZWZ0KX19cmV0dXJuIGl9aWYoMT09ci5ub2RlVHlwZSYmIXQuc3RhdGUuZG9jLnJlc29sdmUoZSkucGFyZW50LmlubGluZUNvbnRlbnQpe3ZhciBjLHU9ITA7aWYobzxyLmNoaWxkTm9kZXMubGVuZ3RoKXt2YXIgbD1yLmNoaWxkTm9kZXNbb107MT09bC5ub2RlVHlwZSYmKGM9bC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKSl9aWYoIWMmJm8pe3ZhciBoPXIuY2hpbGROb2Rlc1tvLTFdOzE9PWgubm9kZVR5cGUmJihjPWguZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCksdT0hMSl9cmV0dXJuIHZmKGN8fHIuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCksdSl9Zm9yKHZhciBmPS0xO2Y8MjtmKz0yKWlmKGY8MCYmbyl7dmFyIHA9dm9pZCAwLGQ9Mz09ci5ub2RlVHlwZT9qaChyLG8tMSxvKTozPT0ocD1yLmNoaWxkTm9kZXNbby0xXSkubm9kZVR5cGU/amgocCk6MT09cC5ub2RlVHlwZSYmIkJSIiE9cC5ub2RlTmFtZT9wOm51bGw7aWYoZCl7dmFyIHY9ZmYoZCwxKTtpZih2LnRvcDx2LmJvdHRvbSlyZXR1cm4gZGYodiwhMSl9fWVsc2UgaWYoZj4wJiZvPHFoKHIpKXt2YXIgbT12b2lkIDAsZz0zPT1yLm5vZGVUeXBlP2poKHIsbyxvKzEpOjM9PShtPXIuY2hpbGROb2Rlc1tvXSkubm9kZVR5cGU/amgobSk6MT09bS5ub2RlVHlwZT9tOm51bGw7aWYoZyl7dmFyIHk9ZmYoZywtMSk7aWYoeS50b3A8eS5ib3R0b20pcmV0dXJuIGRmKHksITApfX1yZXR1cm4gZGYoZmYoMz09ci5ub2RlVHlwZT9qaChyKTpyLDApLCExKX1mdW5jdGlvbiBkZih0LGUpe2lmKDA9PXQud2lkdGgpcmV0dXJuIHQ7dmFyIG49ZT90LmxlZnQ6dC5yaWdodDtyZXR1cm57dG9wOnQudG9wLGJvdHRvbTp0LmJvdHRvbSxsZWZ0Om4scmlnaHQ6bn19ZnVuY3Rpb24gdmYodCxlKXtpZigwPT10LmhlaWdodClyZXR1cm4gdDt2YXIgbj1lP3QudG9wOnQuYm90dG9tO3JldHVybnt0b3A6bixib3R0b206bixsZWZ0OnQubGVmdCxyaWdodDp0LnJpZ2h0fX1mdW5jdGlvbiBtZih0LGUsbil7dmFyIHI9dC5zdGF0ZSxvPXQucm9vdC5hY3RpdmVFbGVtZW50O3IhPWUmJnQudXBkYXRlU3RhdGUoZSksbyE9dC5kb20mJnQuZm9jdXMoKTt0cnl7cmV0dXJuIG4oKX1maW5hbGx5e3IhPWUmJnQudXBkYXRlU3RhdGUociksbyE9dC5kb20mJm8uZm9jdXMoKX19ZnVuY3Rpb24gZ2YodCxlLG4pe3ZhciByPWUuc2VsZWN0aW9uLG89InVwIj09bj9yLiRhbmNob3IubWluKHIuJGhlYWQpOnIuJGFuY2hvci5tYXgoci4kaGVhZCk7cmV0dXJuIG1mKHQsZSwoZnVuY3Rpb24oKXtmb3IodmFyIGU9dC5kb2NWaWV3LmRvbUZyb21Qb3Moby5wb3MpLHI9ZS5ub2RlOzspe3ZhciBpPXQuZG9jVmlldy5uZWFyZXN0RGVzYyhyLCEwKTtpZighaSlicmVhaztpZihpLm5vZGUuaXNCbG9jayl7cj1pLmRvbTticmVha31yPWkuZG9tLnBhcmVudE5vZGV9Zm9yKHZhciBzPXBmKHQsby5wb3MpLGE9ci5maXJzdENoaWxkO2E7YT1hLm5leHRTaWJsaW5nKXt2YXIgYz12b2lkIDA7aWYoMT09YS5ub2RlVHlwZSljPWEuZ2V0Q2xpZW50UmVjdHMoKTtlbHNle2lmKDMhPWEubm9kZVR5cGUpY29udGludWU7Yz1qaChhLDAsYS5ub2RlVmFsdWUubGVuZ3RoKS5nZXRDbGllbnRSZWN0cygpfWZvcih2YXIgdT0wO3U8Yy5sZW5ndGg7dSsrKXt2YXIgbD1jW3VdO2lmKGwuYm90dG9tPmwudG9wJiYoInVwIj09bj9sLmJvdHRvbTxzLnRvcCsxOmwudG9wPnMuYm90dG9tLTEpKXJldHVybiExfX1yZXR1cm4hMH0pKX12YXIgeWY9L1tcdTA1OTAtXHUwOGFjXS87ZnVuY3Rpb24gd2YodCxlLG4pe3ZhciByPWUuc2VsZWN0aW9uLG89ci4kaGVhZDtpZighby5wYXJlbnQuaXNUZXh0YmxvY2spcmV0dXJuITE7dmFyIGk9by5wYXJlbnRPZmZzZXQscz0haSxhPWk9PW8ucGFyZW50LmNvbnRlbnQuc2l6ZSxjPWdldFNlbGVjdGlvbigpO3JldHVybiB5Zi50ZXN0KG8ucGFyZW50LnRleHRDb250ZW50KSYmYy5tb2RpZnk/bWYodCxlLChmdW5jdGlvbigpe3ZhciBlPWMuZ2V0UmFuZ2VBdCgwKSxyPWMuZm9jdXNOb2RlLGk9Yy5mb2N1c09mZnNldCxzPWMuY2FyZXRCaWRpTGV2ZWw7Yy5tb2RpZnkoIm1vdmUiLG4sImNoYXJhY3RlciIpO3ZhciBhPW8uZGVwdGg/dC5kb2NWaWV3LmRvbUFmdGVyUG9zKG8uYmVmb3JlKCkpOnQuZG9tLHU9IWEuY29udGFpbnMoMT09Yy5mb2N1c05vZGUubm9kZVR5cGU/Yy5mb2N1c05vZGU6Yy5mb2N1c05vZGUucGFyZW50Tm9kZSl8fHI9PWMuZm9jdXNOb2RlJiZpPT1jLmZvY3VzT2Zmc2V0O3JldHVybiBjLnJlbW92ZUFsbFJhbmdlcygpLGMuYWRkUmFuZ2UoZSksbnVsbCE9cyYmKGMuY2FyZXRCaWRpTGV2ZWw9cyksdX0pKToibGVmdCI9PW58fCJiYWNrd2FyZCI9PW4/czphfXZhciBiZj1udWxsLHhmPW51bGwsa2Y9ITE7ZnVuY3Rpb24gU2YodCxlLG4pe3JldHVybiBiZj09ZSYmeGY9PW4/a2Y6KGJmPWUseGY9bixrZj0idXAiPT1ufHwiZG93biI9PW4/Z2YodCxlLG4pOndmKHQsZSxuKSl9dmFyIENmPTAsT2Y9MSxNZj0yLE5mPTMsVGY9ZnVuY3Rpb24odCxlLG4scil7dGhpcy5wYXJlbnQ9dCx0aGlzLmNoaWxkcmVuPWUsdGhpcy5kb209bixuLnBtVmlld0Rlc2M9dGhpcyx0aGlzLmNvbnRlbnRET009cix0aGlzLmRpcnR5PUNmfSxBZj17YmVmb3JlUG9zaXRpb246e2NvbmZpZ3VyYWJsZTohMH0sc2l6ZTp7Y29uZmlndXJhYmxlOiEwfSxib3JkZXI6e2NvbmZpZ3VyYWJsZTohMH0scG9zQmVmb3JlOntjb25maWd1cmFibGU6ITB9LHBvc0F0U3RhcnQ6e2NvbmZpZ3VyYWJsZTohMH0scG9zQWZ0ZXI6e2NvbmZpZ3VyYWJsZTohMH0scG9zQXRFbmQ6e2NvbmZpZ3VyYWJsZTohMH0sY29udGVudExvc3Q6e2NvbmZpZ3VyYWJsZTohMH19O1RmLnByb3RvdHlwZS5tYXRjaGVzV2lkZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuITF9LFRmLnByb3RvdHlwZS5tYXRjaGVzTWFyaz1mdW5jdGlvbigpe3JldHVybiExfSxUZi5wcm90b3R5cGUubWF0Y2hlc05vZGU9ZnVuY3Rpb24oKXtyZXR1cm4hMX0sVGYucHJvdG90eXBlLm1hdGNoZXNIYWNrPWZ1bmN0aW9uKCl7cmV0dXJuITF9LEFmLmJlZm9yZVBvc2l0aW9uLmdldD1mdW5jdGlvbigpe3JldHVybiExfSxUZi5wcm90b3R5cGUucGFyc2VSdWxlPWZ1bmN0aW9uKCl7cmV0dXJuIG51bGx9LFRmLnByb3RvdHlwZS5zdG9wRXZlbnQ9ZnVuY3Rpb24oKXtyZXR1cm4hMX0sQWYuc2l6ZS5nZXQ9ZnVuY3Rpb24oKXtmb3IodmFyIHQ9MCxlPTA7ZTx0aGlzLmNoaWxkcmVuLmxlbmd0aDtlKyspdCs9dGhpcy5jaGlsZHJlbltlXS5zaXplO3JldHVybiB0fSxBZi5ib3JkZXIuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIDB9LFRmLnByb3RvdHlwZS5kZXN0cm95PWZ1bmN0aW9uKCl7dGhpcy5wYXJlbnQ9bnVsbCx0aGlzLmRvbS5wbVZpZXdEZXNjPT10aGlzJiYodGhpcy5kb20ucG1WaWV3RGVzYz1udWxsKTtmb3IodmFyIHQ9MDt0PHRoaXMuY2hpbGRyZW4ubGVuZ3RoO3QrKyl0aGlzLmNoaWxkcmVuW3RdLmRlc3Ryb3koKX0sVGYucHJvdG90eXBlLnBvc0JlZm9yZUNoaWxkPWZ1bmN0aW9uKHQpe2Zvcih2YXIgZT0wLG49dGhpcy5wb3NBdFN0YXJ0O2U8dGhpcy5jaGlsZHJlbi5sZW5ndGg7ZSsrKXt2YXIgcj10aGlzLmNoaWxkcmVuW2VdO2lmKHI9PXQpcmV0dXJuIG47bis9ci5zaXplfX0sQWYucG9zQmVmb3JlLmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLnBhcmVudC5wb3NCZWZvcmVDaGlsZCh0aGlzKX0sQWYucG9zQXRTdGFydC5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5wYXJlbnQ/dGhpcy5wYXJlbnQucG9zQmVmb3JlQ2hpbGQodGhpcykrdGhpcy5ib3JkZXI6MH0sQWYucG9zQWZ0ZXIuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucG9zQmVmb3JlK3RoaXMuc2l6ZX0sQWYucG9zQXRFbmQuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucG9zQXRTdGFydCt0aGlzLnNpemUtMip0aGlzLmJvcmRlcn0sVGYucHJvdG90eXBlLmxvY2FsUG9zRnJvbURPTT1mdW5jdGlvbih0LGUsbil7aWYodGhpcy5jb250ZW50RE9NJiZ0aGlzLmNvbnRlbnRET00uY29udGFpbnMoMT09dC5ub2RlVHlwZT90OnQucGFyZW50Tm9kZSkpe2lmKG48MCl7dmFyIHIsbztpZih0PT10aGlzLmNvbnRlbnRET00pcj10LmNoaWxkTm9kZXNbZS0xXTtlbHNle3doaWxlKHQucGFyZW50Tm9kZSE9dGhpcy5jb250ZW50RE9NKXQ9dC5wYXJlbnROb2RlO3I9dC5wcmV2aW91c1NpYmxpbmd9d2hpbGUociYmKCEobz1yLnBtVmlld0Rlc2MpfHxvLnBhcmVudCE9dGhpcykpcj1yLnByZXZpb3VzU2libGluZztyZXR1cm4gcj90aGlzLnBvc0JlZm9yZUNoaWxkKG8pK28uc2l6ZTp0aGlzLnBvc0F0U3RhcnR9dmFyIGkscztpZih0PT10aGlzLmNvbnRlbnRET00paT10LmNoaWxkTm9kZXNbZV07ZWxzZXt3aGlsZSh0LnBhcmVudE5vZGUhPXRoaXMuY29udGVudERPTSl0PXQucGFyZW50Tm9kZTtpPXQubmV4dFNpYmxpbmd9d2hpbGUoaSYmKCEocz1pLnBtVmlld0Rlc2MpfHxzLnBhcmVudCE9dGhpcykpaT1pLm5leHRTaWJsaW5nO3JldHVybiBpP3RoaXMucG9zQmVmb3JlQ2hpbGQocyk6dGhpcy5wb3NBdEVuZH12YXIgYTtpZih0aGlzLmNvbnRlbnRET00mJnRoaXMuY29udGVudERPTSE9dGhpcy5kb20mJnRoaXMuZG9tLmNvbnRhaW5zKHRoaXMuY29udGVudERPTSkpYT0yJnQuY29tcGFyZURvY3VtZW50UG9zaXRpb24odGhpcy5jb250ZW50RE9NKTtlbHNlIGlmKHRoaXMuZG9tLmZpcnN0Q2hpbGQpe2lmKDA9PWUpZm9yKHZhciBjPXQ7O2M9Yy5wYXJlbnROb2RlKXtpZihjPT10aGlzLmRvbSl7YT0hMTticmVha31pZihjLnBhcmVudE5vZGUuZmlyc3RDaGlsZCE9YylicmVha31pZihudWxsPT1hJiZlPT10LmNoaWxkTm9kZXMubGVuZ3RoKWZvcih2YXIgdT10Ozt1PXUucGFyZW50Tm9kZSl7aWYodT09dGhpcy5kb20pe2E9ITA7YnJlYWt9aWYodS5wYXJlbnROb2RlLmxhc3RDaGlsZCE9dSlicmVha319cmV0dXJuKG51bGw9PWE/bj4wOmEpP3RoaXMucG9zQXRFbmQ6dGhpcy5wb3NBdFN0YXJ0fSxUZi5wcm90b3R5cGUubmVhcmVzdERlc2M9ZnVuY3Rpb24odCxlKXtmb3IodmFyIG49ITAscj10O3I7cj1yLnBhcmVudE5vZGUpe3ZhciBvPXRoaXMuZ2V0RGVzYyhyKTtpZihvJiYoIWV8fG8ubm9kZSkpe2lmKCFufHwhby5ub2RlRE9NfHwoMT09by5ub2RlRE9NLm5vZGVUeXBlP28ubm9kZURPTS5jb250YWlucygxPT10Lm5vZGVUeXBlP3Q6dC5wYXJlbnROb2RlKTpvLm5vZGVET009PXQpKXJldHVybiBvO249ITF9fX0sVGYucHJvdG90eXBlLmdldERlc2M9ZnVuY3Rpb24odCl7Zm9yKHZhciBlPXQucG1WaWV3RGVzYyxuPWU7bjtuPW4ucGFyZW50KWlmKG49PXRoaXMpcmV0dXJuIGV9LFRmLnByb3RvdHlwZS5wb3NGcm9tRE9NPWZ1bmN0aW9uKHQsZSxuKXtmb3IodmFyIHI9dDs7cj1yLnBhcmVudE5vZGUpe3ZhciBvPXRoaXMuZ2V0RGVzYyhyKTtpZihvKXJldHVybiBvLmxvY2FsUG9zRnJvbURPTSh0LGUsbil9fSxUZi5wcm90b3R5cGUuZGVzY0F0PWZ1bmN0aW9uKHQpe2Zvcih2YXIgZT0wLG49MDtlPHRoaXMuY2hpbGRyZW4ubGVuZ3RoO2UrKyl7dmFyIHI9dGhpcy5jaGlsZHJlbltlXSxvPW4rci5zaXplO2lmKG49PXQmJm8hPW4pe3doaWxlKCFyLmJvcmRlciYmci5jaGlsZHJlbi5sZW5ndGgpcj1yLmNoaWxkcmVuWzBdO3JldHVybiByfWlmKHQ8bylyZXR1cm4gci5kZXNjQXQodC1uLXIuYm9yZGVyKTtuPW99fSxUZi5wcm90b3R5cGUuZG9tRnJvbVBvcz1mdW5jdGlvbih0KXtpZighdGhpcy5jb250ZW50RE9NKXJldHVybntub2RlOnRoaXMuZG9tLG9mZnNldDowfTtmb3IodmFyIGU9MCxuPTA7O24rKyl7aWYoZT09dCl7d2hpbGUobjx0aGlzLmNoaWxkcmVuLmxlbmd0aCYmKHRoaXMuY2hpbGRyZW5bbl0uYmVmb3JlUG9zaXRpb258fHRoaXMuY2hpbGRyZW5bbl0uZG9tLnBhcmVudE5vZGUhPXRoaXMuY29udGVudERPTSkpbisrO3JldHVybntub2RlOnRoaXMuY29udGVudERPTSxvZmZzZXQ6bj09dGhpcy5jaGlsZHJlbi5sZW5ndGg/dGhpcy5jb250ZW50RE9NLmNoaWxkTm9kZXMubGVuZ3RoOl9oKHRoaXMuY2hpbGRyZW5bbl0uZG9tKX19aWYobj09dGhpcy5jaGlsZHJlbi5sZW5ndGgpdGhyb3cgbmV3IEVycm9yKCJJbnZhbGlkIHBvc2l0aW9uICIrdCk7dmFyIHI9dGhpcy5jaGlsZHJlbltuXSxvPWUrci5zaXplO2lmKHQ8bylyZXR1cm4gci5kb21Gcm9tUG9zKHQtZS1yLmJvcmRlcik7ZT1vfX0sVGYucHJvdG90eXBlLnBhcnNlUmFuZ2U9ZnVuY3Rpb24odCxlLG4pe2lmKHZvaWQgMD09PW4mJihuPTApLDA9PXRoaXMuY2hpbGRyZW4ubGVuZ3RoKXJldHVybntub2RlOnRoaXMuY29udGVudERPTSxmcm9tOnQsdG86ZSxmcm9tT2Zmc2V0OjAsdG9PZmZzZXQ6dGhpcy5jb250ZW50RE9NLmNoaWxkTm9kZXMubGVuZ3RofTtmb3IodmFyIHI9LTEsbz0tMSxpPW4scz0wOztzKyspe3ZhciBhPXRoaXMuY2hpbGRyZW5bc10sYz1pK2Euc2l6ZTtpZigtMT09ciYmdDw9Yyl7dmFyIHU9aSthLmJvcmRlcjtpZih0Pj11JiZlPD1jLWEuYm9yZGVyJiZhLm5vZGUmJmEuY29udGVudERPTSYmdGhpcy5jb250ZW50RE9NLmNvbnRhaW5zKGEuY29udGVudERPTSkpcmV0dXJuIGEucGFyc2VSYW5nZSh0LGUsdSk7dD1pO2Zvcih2YXIgbD1zO2w+MDtsLS0pe3ZhciBoPXRoaXMuY2hpbGRyZW5bbC0xXTtpZihoLnNpemUmJmguZG9tLnBhcmVudE5vZGU9PXRoaXMuY29udGVudERPTSYmIWguZW1wdHlDaGlsZEF0KDEpKXtyPV9oKGguZG9tKSsxO2JyZWFrfXQtPWguc2l6ZX0tMT09ciYmKHI9MCl9aWYocj4tMSYmZTw9Yyl7ZT1jO2Zvcih2YXIgZj1zKzE7Zjx0aGlzLmNoaWxkcmVuLmxlbmd0aDtmKyspe3ZhciBwPXRoaXMuY2hpbGRyZW5bZl07aWYocC5zaXplJiZwLmRvbS5wYXJlbnROb2RlPT10aGlzLmNvbnRlbnRET00mJiFwLmVtcHR5Q2hpbGRBdCgtMSkpe289X2gocC5kb20pO2JyZWFrfWUrPXAuc2l6ZX0tMT09byYmKG89dGhpcy5jb250ZW50RE9NLmNoaWxkTm9kZXMubGVuZ3RoKTticmVha31pPWN9cmV0dXJue25vZGU6dGhpcy5jb250ZW50RE9NLGZyb206dCx0bzplLGZyb21PZmZzZXQ6cix0b09mZnNldDpvfX0sVGYucHJvdG90eXBlLmVtcHR5Q2hpbGRBdD1mdW5jdGlvbih0KXtpZih0aGlzLmJvcmRlcnx8IXRoaXMuY29udGVudERPTXx8IXRoaXMuY2hpbGRyZW4ubGVuZ3RoKXJldHVybiExO3ZhciBlPXRoaXMuY2hpbGRyZW5bdDwwPzA6dGhpcy5jaGlsZHJlbi5sZW5ndGgtMV07cmV0dXJuIDA9PWUuc2l6ZXx8ZS5lbXB0eUNoaWxkQXQodCl9LFRmLnByb3RvdHlwZS5kb21BZnRlclBvcz1mdW5jdGlvbih0KXt2YXIgZT10aGlzLmRvbUZyb21Qb3ModCksbj1lLm5vZGUscj1lLm9mZnNldDtpZigxIT1uLm5vZGVUeXBlfHxyPT1uLmNoaWxkTm9kZXMubGVuZ3RoKXRocm93IG5ldyBSYW5nZUVycm9yKCJObyBub2RlIGFmdGVyIHBvcyAiK3QpO3JldHVybiBuLmNoaWxkTm9kZXNbcl19LFRmLnByb3RvdHlwZS5zZXRTZWxlY3Rpb249ZnVuY3Rpb24odCxlLG4scil7Zm9yKHZhciBvPU1hdGgubWluKHQsZSksaT1NYXRoLm1heCh0LGUpLHM9MCxhPTA7czx0aGlzLmNoaWxkcmVuLmxlbmd0aDtzKyspe3ZhciBjPXRoaXMuY2hpbGRyZW5bc10sdT1hK2Muc2l6ZTtpZihvPmEmJmk8dSlyZXR1cm4gYy5zZXRTZWxlY3Rpb24odC1hLWMuYm9yZGVyLGUtYS1jLmJvcmRlcixuLHIpO2E9dX12YXIgbD10aGlzLmRvbUZyb21Qb3ModCksaD10aGlzLmRvbUZyb21Qb3MoZSksZj1uLmdldFNlbGVjdGlvbigpO2lmKHJ8fCEkaChsLm5vZGUsbC5vZmZzZXQsZi5hbmNob3JOb2RlLGYuYW5jaG9yT2Zmc2V0KXx8ISRoKGgubm9kZSxoLm9mZnNldCxmLmZvY3VzTm9kZSxmLmZvY3VzT2Zmc2V0KSl7dmFyIHA9ITE7aWYoZi5leHRlbmR8fHQ9PWUpe2YuY29sbGFwc2UobC5ub2RlLGwub2Zmc2V0KTt0cnl7dCE9ZSYmZi5leHRlbmQoaC5ub2RlLGgub2Zmc2V0KSxwPSEwfWNhdGNoKG0pe2lmKCEobSBpbnN0YW5jZW9mIERPTUV4Y2VwdGlvbikpdGhyb3cgbX19aWYoIXApe2lmKHQ+ZSl7dmFyIGQ9bDtsPWgsaD1kfXZhciB2PWRvY3VtZW50LmNyZWF0ZVJhbmdlKCk7di5zZXRFbmQoaC5ub2RlLGgub2Zmc2V0KSx2LnNldFN0YXJ0KGwubm9kZSxsLm9mZnNldCksZi5yZW1vdmVBbGxSYW5nZXMoKSxmLmFkZFJhbmdlKHYpfX19LFRmLnByb3RvdHlwZS5pZ25vcmVNdXRhdGlvbj1mdW5jdGlvbih0KXtyZXR1cm4hdGhpcy5jb250ZW50RE9NJiYic2VsZWN0aW9uIiE9dC50eXBlfSxBZi5jb250ZW50TG9zdC5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jb250ZW50RE9NJiZ0aGlzLmNvbnRlbnRET00hPXRoaXMuZG9tJiYhdGhpcy5kb20uY29udGFpbnModGhpcy5jb250ZW50RE9NKX0sVGYucHJvdG90eXBlLm1hcmtEaXJ0eT1mdW5jdGlvbih0LGUpe2Zvcih2YXIgbj0wLHI9MDtyPHRoaXMuY2hpbGRyZW4ubGVuZ3RoO3IrKyl7dmFyIG89dGhpcy5jaGlsZHJlbltyXSxpPW4rby5zaXplO2lmKG49PWk/dDw9aSYmZT49bjp0PGkmJmU+bil7dmFyIHM9bitvLmJvcmRlcixhPWktby5ib3JkZXI7aWYodD49cyYmZTw9YSlyZXR1cm4gdGhpcy5kaXJ0eT10PT1ufHxlPT1pP01mOk9mLHZvaWQodCE9c3x8ZSE9YXx8IW8uY29udGVudExvc3QmJm8uZG9tLnBhcmVudE5vZGU9PXRoaXMuY29udGVudERPTT9vLm1hcmtEaXJ0eSh0LXMsZS1zKTpvLmRpcnR5PU5mKTtvLmRpcnR5PU5mfW49aX10aGlzLmRpcnR5PU1mfSxUZi5wcm90b3R5cGUubWFya1BhcmVudHNEaXJ0eT1mdW5jdGlvbigpe2Zvcih2YXIgdD0xLGU9dGhpcy5wYXJlbnQ7ZTtlPWUucGFyZW50LHQrKyl7dmFyIG49MT09dD9NZjpPZjtlLmRpcnR5PG4mJihlLmRpcnR5PW4pfX0sT2JqZWN0LmRlZmluZVByb3BlcnRpZXMoVGYucHJvdG90eXBlLEFmKTt2YXIgRWY9W10sRGY9ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZShlLG4scixvKXt2YXIgaSxzPW4udHlwZS50b0RPTTtpZigiZnVuY3Rpb24iPT10eXBlb2YgcyYmKHM9cyhyLChmdW5jdGlvbigpe3JldHVybiBpP2kucGFyZW50P2kucGFyZW50LnBvc0JlZm9yZUNoaWxkKGkpOnZvaWQgMDpvfSkpKSwhbi50eXBlLnNwZWMucmF3KXtpZigxIT1zLm5vZGVUeXBlKXt2YXIgYT1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJzcGFuIik7YS5hcHBlbmRDaGlsZChzKSxzPWF9cy5jb250ZW50RWRpdGFibGU9ITEscy5jbGFzc0xpc3QuYWRkKCJQcm9zZU1pcnJvci13aWRnZXQiKX10LmNhbGwodGhpcyxlLEVmLHMsbnVsbCksdGhpcy53aWRnZXQ9bixpPXRoaXN9dCYmKGUuX19wcm90b19fPXQpLGUucHJvdG90eXBlPU9iamVjdC5jcmVhdGUodCYmdC5wcm90b3R5cGUpLGUucHJvdG90eXBlLmNvbnN0cnVjdG9yPWU7dmFyIG49e2JlZm9yZVBvc2l0aW9uOntjb25maWd1cmFibGU6ITB9fTtyZXR1cm4gbi5iZWZvcmVQb3NpdGlvbi5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy53aWRnZXQudHlwZS5zaWRlPDB9LGUucHJvdG90eXBlLm1hdGNoZXNXaWRnZXQ9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuZGlydHk9PUNmJiZ0LnR5cGUuZXEodGhpcy53aWRnZXQudHlwZSl9LGUucHJvdG90eXBlLnBhcnNlUnVsZT1mdW5jdGlvbigpe3JldHVybntpZ25vcmU6ITB9fSxlLnByb3RvdHlwZS5zdG9wRXZlbnQ9ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy53aWRnZXQuc3BlYy5zdG9wRXZlbnQ7cmV0dXJuISFlJiZlKHQpfSxlLnByb3RvdHlwZS5pZ25vcmVNdXRhdGlvbj1mdW5jdGlvbih0KXtyZXR1cm4ic2VsZWN0aW9uIiE9dC50eXBlfHx0aGlzLndpZGdldC5zcGVjLmlnbm9yZVNlbGVjdGlvbn0sT2JqZWN0LmRlZmluZVByb3BlcnRpZXMoZS5wcm90b3R5cGUsbiksZX0oVGYpLFJmPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoZSxuLHIsbyl7dC5jYWxsKHRoaXMsZSxFZixuLG51bGwpLHRoaXMudGV4dERPTT1yLHRoaXMudGV4dD1vfXQmJihlLl9fcHJvdG9fXz10KSxlLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKHQmJnQucHJvdG90eXBlKSxlLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1lO3ZhciBuPXtzaXplOntjb25maWd1cmFibGU6ITB9fTtyZXR1cm4gbi5zaXplLmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLnRleHQubGVuZ3RofSxlLnByb3RvdHlwZS5sb2NhbFBvc0Zyb21ET009ZnVuY3Rpb24odCxlKXtyZXR1cm4gdCE9dGhpcy50ZXh0RE9NP3RoaXMucG9zQXRTdGFydCsoZT90aGlzLnNpemU6MCk6dGhpcy5wb3NBdFN0YXJ0K2V9LGUucHJvdG90eXBlLmRvbUZyb21Qb3M9ZnVuY3Rpb24odCl7cmV0dXJue25vZGU6dGhpcy50ZXh0RE9NLG9mZnNldDp0fX0sZS5wcm90b3R5cGUuaWdub3JlTXV0YXRpb249ZnVuY3Rpb24odCl7cmV0dXJuImNoYXJhY3RlckRhdGEiPT09dC50eXBlJiZ0LnRhcmdldC5ub2RlVmFsdWU9PXQub2xkVmFsdWV9LE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKGUucHJvdG90eXBlLG4pLGV9KFRmKSx6Zj1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKGUsbixyLG8pe3QuY2FsbCh0aGlzLGUsW10scixvKSx0aGlzLm1hcms9bn1yZXR1cm4gdCYmKGUuX19wcm90b19fPXQpLGUucHJvdG90eXBlPU9iamVjdC5jcmVhdGUodCYmdC5wcm90b3R5cGUpLGUucHJvdG90eXBlLmNvbnN0cnVjdG9yPWUsZS5jcmVhdGU9ZnVuY3Rpb24odCxuLHIsbyl7dmFyIGk9by5ub2RlVmlld3Nbbi50eXBlLm5hbWVdLHM9aSYmaShuLG8scik7cmV0dXJuIHMmJnMuZG9tfHwocz1UaC5yZW5kZXJTcGVjKGRvY3VtZW50LG4udHlwZS5zcGVjLnRvRE9NKG4scikpKSxuZXcgZSh0LG4scy5kb20scy5jb250ZW50RE9NfHxzLmRvbSl9LGUucHJvdG90eXBlLnBhcnNlUnVsZT1mdW5jdGlvbigpe3JldHVybnttYXJrOnRoaXMubWFyay50eXBlLm5hbWUsYXR0cnM6dGhpcy5tYXJrLmF0dHJzLGNvbnRlbnRFbGVtZW50OnRoaXMuY29udGVudERPTX19LGUucHJvdG90eXBlLm1hdGNoZXNNYXJrPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLmRpcnR5IT1OZiYmdGhpcy5tYXJrLmVxKHQpfSxlLnByb3RvdHlwZS5tYXJrRGlydHk9ZnVuY3Rpb24oZSxuKXtpZih0LnByb3RvdHlwZS5tYXJrRGlydHkuY2FsbCh0aGlzLGUsbiksdGhpcy5kaXJ0eSE9Q2Ype3ZhciByPXRoaXMucGFyZW50O3doaWxlKCFyLm5vZGUpcj1yLnBhcmVudDtyLmRpcnR5PHRoaXMuZGlydHkmJihyLmRpcnR5PXRoaXMuZGlydHkpLHRoaXMuZGlydHk9Q2Z9fSxlLnByb3RvdHlwZS5zbGljZT1mdW5jdGlvbih0LG4scil7dmFyIG89ZS5jcmVhdGUodGhpcy5wYXJlbnQsdGhpcy5tYXJrLCEwLHIpLGk9dGhpcy5jaGlsZHJlbixzPXRoaXMuc2l6ZTtuPHMmJihpPWVwKGksbixzLHIpKSx0PjAmJihpPWVwKGksMCx0LHIpKTtmb3IodmFyIGE9MDthPGkubGVuZ3RoO2ErKylpW2FdLnBhcmVudD1vO3JldHVybiBvLmNoaWxkcmVuPWksb30sZX0oVGYpLFBmPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoZSxuLHIsbyxpLHMsYSxjLHUpe3QuY2FsbCh0aGlzLGUsbi5pc0xlYWY/RWY6W10saSxzKSx0aGlzLm5vZGVET009YSx0aGlzLm5vZGU9bix0aGlzLm91dGVyRGVjbz1yLHRoaXMuaW5uZXJEZWNvPW8scyYmdGhpcy51cGRhdGVDaGlsZHJlbihjLHUpfXQmJihlLl9fcHJvdG9fXz10KSxlLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKHQmJnQucHJvdG90eXBlKSxlLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1lO3ZhciBuPXtzaXplOntjb25maWd1cmFibGU6ITB9LGJvcmRlcjp7Y29uZmlndXJhYmxlOiEwfX07cmV0dXJuIGUuY3JlYXRlPWZ1bmN0aW9uKHQsbixyLG8saSxzKXt2YXIgYSxjLHU9aS5ub2RlVmlld3Nbbi50eXBlLm5hbWVdLGw9dSYmdShuLGksKGZ1bmN0aW9uKCl7cmV0dXJuIGM/Yy5wYXJlbnQ/Yy5wYXJlbnQucG9zQmVmb3JlQ2hpbGQoYyk6dm9pZCAwOnN9KSxyKSxoPWwmJmwuZG9tLGY9bCYmbC5jb250ZW50RE9NO2lmKG4uaXNUZXh0KWlmKGgpe2lmKDMhPWgubm9kZVR5cGUpdGhyb3cgbmV3IFJhbmdlRXJyb3IoIlRleHQgbXVzdCBiZSByZW5kZXJlZCBhcyBhIERPTSB0ZXh0IG5vZGUiKX1lbHNlIGg9ZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUobi50ZXh0KTtlbHNlIGh8fChhPVRoLnJlbmRlclNwZWMoZG9jdW1lbnQsbi50eXBlLnNwZWMudG9ET00obikpLGg9YS5kb20sZj1hLmNvbnRlbnRET00pO2Z8fG4uaXNUZXh0fHwiQlIiPT1oLm5vZGVOYW1lfHwoaC5oYXNBdHRyaWJ1dGUoImNvbnRlbnRlZGl0YWJsZSIpfHwoaC5jb250ZW50RWRpdGFibGU9ITEpLG4udHlwZS5zcGVjLmRyYWdnYWJsZSYmKGguZHJhZ2dhYmxlPSEwKSk7dmFyIHA9aDtyZXR1cm4gaD1XZihoLHIsbiksbD9jPW5ldyBGZih0LG4scixvLGgsZixwLGwsaSxzKzEpOm4uaXNUZXh0P25ldyBCZih0LG4scixvLGgscCxpKTpuZXcgZSh0LG4scixvLGgsZixwLGkscysxKX0sZS5wcm90b3R5cGUucGFyc2VSdWxlPWZ1bmN0aW9uKCl7dmFyIHQ9dGhpcztpZih0aGlzLm5vZGUudHlwZS5zcGVjLnJlcGFyc2VJblZpZXcpcmV0dXJuIG51bGw7dmFyIGU9e25vZGU6dGhpcy5ub2RlLnR5cGUubmFtZSxhdHRyczp0aGlzLm5vZGUuYXR0cnN9O3JldHVybiB0aGlzLm5vZGUudHlwZS5zcGVjLmNvZGUmJihlLnByZXNlcnZlV2hpdGVzcGFjZT0iZnVsbCIpLHRoaXMuY29udGVudERPTSYmIXRoaXMuY29udGVudExvc3Q/ZS5jb250ZW50RWxlbWVudD10aGlzLmNvbnRlbnRET006ZS5nZXRDb250ZW50PWZ1bmN0aW9uKCl7cmV0dXJuIHQuY29udGVudERPTT9hbC5lbXB0eTp0Lm5vZGUuY29udGVudH0sZX0sZS5wcm90b3R5cGUubWF0Y2hlc05vZGU9ZnVuY3Rpb24odCxlLG4pe3JldHVybiB0aGlzLmRpcnR5PT1DZiYmdC5lcSh0aGlzLm5vZGUpJiZIZihlLHRoaXMub3V0ZXJEZWNvKSYmbi5lcSh0aGlzLmlubmVyRGVjbyl9LG4uc2l6ZS5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5ub2RlLm5vZGVTaXplfSxuLmJvcmRlci5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5ub2RlLmlzTGVhZj8wOjF9LGUucHJvdG90eXBlLnVwZGF0ZUNoaWxkcmVuPWZ1bmN0aW9uKHQsZSl7dmFyIG49dGhpcyxyPXRoaXMubm9kZS5pbmxpbmVDb250ZW50LG89ZSxpPXImJnQuY29tcG9zaW5nJiZ0aGlzLmxvY2FsQ29tcG9zaXRpb25Ob2RlKHQsZSkscz1uZXcgVWYodGhpcyxpJiZpLm5vZGUpO1lmKHRoaXMubm9kZSx0aGlzLmlubmVyRGVjbywoZnVuY3Rpb24oZSxpLGEpe2Uuc3BlYy5tYXJrcz9zLnN5bmNUb01hcmtzKGUuc3BlYy5tYXJrcyxyLHQpOmUudHlwZS5zaWRlPj0wJiYhYSYmcy5zeW5jVG9NYXJrcyhpPT1uLm5vZGUuY2hpbGRDb3VudD9mbC5ub25lOm4ubm9kZS5jaGlsZChpKS5tYXJrcyxyLHQpLHMucGxhY2VXaWRnZXQoZSx0LG8pfSksKGZ1bmN0aW9uKGUsbixpLGEpe3Muc3luY1RvTWFya3MoZS5tYXJrcyxyLHQpLHMuZmluZE5vZGVNYXRjaChlLG4saSxhKXx8cy51cGRhdGVOZXh0Tm9kZShlLG4saSx0LGEpfHxzLmFkZE5vZGUoZSxuLGksdCxvKSxvKz1lLm5vZGVTaXplfSkpLHMuc3luY1RvTWFya3MoRWYscix0KSx0aGlzLm5vZGUuaXNUZXh0YmxvY2smJnMuYWRkVGV4dGJsb2NrSGFja3MoKSxzLmRlc3Ryb3lSZXN0KCksKHMuY2hhbmdlZHx8dGhpcy5kaXJ0eT09TWYpJiYoaSYmdGhpcy5wcm90ZWN0TG9jYWxDb21wb3NpdGlvbih0LGkpLHRoaXMucmVuZGVyQ2hpbGRyZW4oKSl9LGUucHJvdG90eXBlLnJlbmRlckNoaWxkcmVuPWZ1bmN0aW9uKCl7amYodGhpcy5jb250ZW50RE9NLHRoaXMuY2hpbGRyZW4pLERoLmlvcyYmWmYodGhpcy5kb20pfSxlLnByb3RvdHlwZS5sb2NhbENvbXBvc2l0aW9uTm9kZT1mdW5jdGlvbih0LGUpe3ZhciBuPXQuc3RhdGUuc2VsZWN0aW9uLHI9bi5mcm9tLG89bi50bztpZighKCEodC5zdGF0ZS5zZWxlY3Rpb24gaW5zdGFuY2VvZiBjWyJUZXh0U2VsZWN0aW9uIl0pfHxyPGV8fG8+ZSt0aGlzLm5vZGUuY29udGVudC5zaXplKSl7dmFyIGk9dC5yb290LmdldFNlbGVjdGlvbigpLHM9UWYoaS5mb2N1c05vZGUsaS5mb2N1c09mZnNldCk7aWYocyYmdGhpcy5kb20uY29udGFpbnMocy5wYXJlbnROb2RlKSl7dmFyIGE9cy5ub2RlVmFsdWUsdT10cCh0aGlzLm5vZGUuY29udGVudCxhLHItZSxvLWUpO3JldHVybiB1PDA/bnVsbDp7bm9kZTpzLHBvczp1LHRleHQ6YX19fX0sZS5wcm90b3R5cGUucHJvdGVjdExvY2FsQ29tcG9zaXRpb249ZnVuY3Rpb24odCxlKXt2YXIgbj1lLm5vZGUscj1lLnBvcyxvPWUudGV4dDtpZighdGhpcy5nZXREZXNjKG4pKXtmb3IodmFyIGk9bjs7aT1pLnBhcmVudE5vZGUpe2lmKGkucGFyZW50Tm9kZT09dGhpcy5jb250ZW50RE9NKWJyZWFrO3doaWxlKGkucHJldmlvdXNTaWJsaW5nKWkucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChpLnByZXZpb3VzU2libGluZyk7d2hpbGUoaS5uZXh0U2libGluZylpLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoaS5uZXh0U2libGluZyk7aS5wbVZpZXdEZXNjJiYoaS5wbVZpZXdEZXNjPW51bGwpfXZhciBzPW5ldyBSZih0aGlzLGksbixvKTt0LmNvbXBvc2l0aW9uTm9kZXMucHVzaChzKSx0aGlzLmNoaWxkcmVuPWVwKHRoaXMuY2hpbGRyZW4scixyK28ubGVuZ3RoLHQscyl9fSxlLnByb3RvdHlwZS51cGRhdGU9ZnVuY3Rpb24odCxlLG4scil7cmV0dXJuISh0aGlzLmRpcnR5PT1OZnx8IXQuc2FtZU1hcmt1cCh0aGlzLm5vZGUpKSYmKHRoaXMudXBkYXRlSW5uZXIodCxlLG4sciksITApfSxlLnByb3RvdHlwZS51cGRhdGVJbm5lcj1mdW5jdGlvbih0LGUsbixyKXt0aGlzLnVwZGF0ZU91dGVyRGVjbyhlKSx0aGlzLm5vZGU9dCx0aGlzLmlubmVyRGVjbz1uLHRoaXMuY29udGVudERPTSYmdGhpcy51cGRhdGVDaGlsZHJlbihyLHRoaXMucG9zQXRTdGFydCksdGhpcy5kaXJ0eT1DZn0sZS5wcm90b3R5cGUudXBkYXRlT3V0ZXJEZWNvPWZ1bmN0aW9uKHQpe2lmKCFIZih0LHRoaXMub3V0ZXJEZWNvKSl7dmFyIGU9MSE9dGhpcy5ub2RlRE9NLm5vZGVUeXBlLG49dGhpcy5kb207dGhpcy5kb209cWYodGhpcy5kb20sdGhpcy5ub2RlRE9NLExmKHRoaXMub3V0ZXJEZWNvLHRoaXMubm9kZSxlKSxMZih0LHRoaXMubm9kZSxlKSksdGhpcy5kb20hPW4mJihuLnBtVmlld0Rlc2M9bnVsbCx0aGlzLmRvbS5wbVZpZXdEZXNjPXRoaXMpLHRoaXMub3V0ZXJEZWNvPXR9fSxlLnByb3RvdHlwZS5zZWxlY3ROb2RlPWZ1bmN0aW9uKCl7dGhpcy5ub2RlRE9NLmNsYXNzTGlzdC5hZGQoIlByb3NlTWlycm9yLXNlbGVjdGVkbm9kZSIpLCF0aGlzLmNvbnRlbnRET00mJnRoaXMubm9kZS50eXBlLnNwZWMuZHJhZ2dhYmxlfHwodGhpcy5kb20uZHJhZ2dhYmxlPSEwKX0sZS5wcm90b3R5cGUuZGVzZWxlY3ROb2RlPWZ1bmN0aW9uKCl7dGhpcy5ub2RlRE9NLmNsYXNzTGlzdC5yZW1vdmUoIlByb3NlTWlycm9yLXNlbGVjdGVkbm9kZSIpLCF0aGlzLmNvbnRlbnRET00mJnRoaXMubm9kZS50eXBlLnNwZWMuZHJhZ2dhYmxlfHx0aGlzLmRvbS5yZW1vdmVBdHRyaWJ1dGUoImRyYWdnYWJsZSIpfSxPYmplY3QuZGVmaW5lUHJvcGVydGllcyhlLnByb3RvdHlwZSxuKSxlfShUZik7ZnVuY3Rpb24gSWYodCxlLG4scixvKXtyZXR1cm4gV2YocixlLHQpLG5ldyBQZihudWxsLHQsZSxuLHIscixyLG8sMCl9dmFyIEJmPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoZSxuLHIsbyxpLHMsYSl7dC5jYWxsKHRoaXMsZSxuLHIsbyxpLG51bGwscyxhKX1yZXR1cm4gdCYmKGUuX19wcm90b19fPXQpLGUucHJvdG90eXBlPU9iamVjdC5jcmVhdGUodCYmdC5wcm90b3R5cGUpLGUucHJvdG90eXBlLmNvbnN0cnVjdG9yPWUsZS5wcm90b3R5cGUucGFyc2VSdWxlPWZ1bmN0aW9uKCl7cmV0dXJue3NraXA6dGhpcy5ub2RlRE9NLnBhcmVudE5vZGV8fCEwfX0sZS5wcm90b3R5cGUudXBkYXRlPWZ1bmN0aW9uKHQsZSl7cmV0dXJuISh0aGlzLmRpcnR5PT1OZnx8dGhpcy5kaXJ0eSE9Q2YmJiF0aGlzLmluUGFyZW50KCl8fCF0LnNhbWVNYXJrdXAodGhpcy5ub2RlKSkmJih0aGlzLnVwZGF0ZU91dGVyRGVjbyhlKSx0aGlzLmRpcnR5PT1DZiYmdC50ZXh0PT10aGlzLm5vZGUudGV4dHx8dC50ZXh0PT10aGlzLm5vZGVET00ubm9kZVZhbHVlfHwodGhpcy5ub2RlRE9NLm5vZGVWYWx1ZT10LnRleHQpLHRoaXMubm9kZT10LHRoaXMuZGlydHk9Q2YsITApfSxlLnByb3RvdHlwZS5pblBhcmVudD1mdW5jdGlvbigpe2Zvcih2YXIgdD10aGlzLnBhcmVudC5jb250ZW50RE9NLGU9dGhpcy5ub2RlRE9NO2U7ZT1lLnBhcmVudE5vZGUpaWYoZT09dClyZXR1cm4hMDtyZXR1cm4hMX0sZS5wcm90b3R5cGUuZG9tRnJvbVBvcz1mdW5jdGlvbih0KXtyZXR1cm57bm9kZTp0aGlzLm5vZGVET00sb2Zmc2V0OnR9fSxlLnByb3RvdHlwZS5sb2NhbFBvc0Zyb21ET009ZnVuY3Rpb24oZSxuLHIpe3JldHVybiBlPT10aGlzLm5vZGVET00/dGhpcy5wb3NBdFN0YXJ0K01hdGgubWluKG4sdGhpcy5ub2RlLnRleHQubGVuZ3RoKTp0LnByb3RvdHlwZS5sb2NhbFBvc0Zyb21ET00uY2FsbCh0aGlzLGUsbixyKX0sZS5wcm90b3R5cGUuaWdub3JlTXV0YXRpb249ZnVuY3Rpb24odCl7cmV0dXJuImNoYXJhY3RlckRhdGEiIT10LnR5cGUmJiJzZWxlY3Rpb24iIT10LnR5cGV9LGUucHJvdG90eXBlLnNsaWNlPWZ1bmN0aW9uKHQsbixyKXt2YXIgbz10aGlzLm5vZGUuY3V0KHQsbiksaT1kb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShvLnRleHQpO3JldHVybiBuZXcgZSh0aGlzLnBhcmVudCxvLHRoaXMub3V0ZXJEZWNvLHRoaXMuaW5uZXJEZWNvLGksaSxyKX0sZX0oUGYpLF9mPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoKXt0LmFwcGx5KHRoaXMsYXJndW1lbnRzKX1yZXR1cm4gdCYmKGUuX19wcm90b19fPXQpLGUucHJvdG90eXBlPU9iamVjdC5jcmVhdGUodCYmdC5wcm90b3R5cGUpLGUucHJvdG90eXBlLmNvbnN0cnVjdG9yPWUsZS5wcm90b3R5cGUucGFyc2VSdWxlPWZ1bmN0aW9uKCl7cmV0dXJue2lnbm9yZTohMH19LGUucHJvdG90eXBlLm1hdGNoZXNIYWNrPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZGlydHk9PUNmfSxlfShUZiksRmY9ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZShlLG4scixvLGkscyxhLGMsdSxsKXt0LmNhbGwodGhpcyxlLG4scixvLGkscyxhLHUsbCksdGhpcy5zcGVjPWN9cmV0dXJuIHQmJihlLl9fcHJvdG9fXz10KSxlLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKHQmJnQucHJvdG90eXBlKSxlLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1lLGUucHJvdG90eXBlLnVwZGF0ZT1mdW5jdGlvbihlLG4scixvKXtpZih0aGlzLmRpcnR5PT1OZilyZXR1cm4hMTtpZih0aGlzLnNwZWMudXBkYXRlKXt2YXIgaT10aGlzLnNwZWMudXBkYXRlKGUsbik7cmV0dXJuIGkmJnRoaXMudXBkYXRlSW5uZXIoZSxuLHIsbyksaX1yZXR1cm4hKCF0aGlzLmNvbnRlbnRET00mJiFlLmlzTGVhZikmJnQucHJvdG90eXBlLnVwZGF0ZS5jYWxsKHRoaXMsZSxuLHIsbyl9LGUucHJvdG90eXBlLnNlbGVjdE5vZGU9ZnVuY3Rpb24oKXt0aGlzLnNwZWMuc2VsZWN0Tm9kZT90aGlzLnNwZWMuc2VsZWN0Tm9kZSgpOnQucHJvdG90eXBlLnNlbGVjdE5vZGUuY2FsbCh0aGlzKX0sZS5wcm90b3R5cGUuZGVzZWxlY3ROb2RlPWZ1bmN0aW9uKCl7dGhpcy5zcGVjLmRlc2VsZWN0Tm9kZT90aGlzLnNwZWMuZGVzZWxlY3ROb2RlKCk6dC5wcm90b3R5cGUuZGVzZWxlY3ROb2RlLmNhbGwodGhpcyl9LGUucHJvdG90eXBlLnNldFNlbGVjdGlvbj1mdW5jdGlvbihlLG4scixvKXt0aGlzLnNwZWMuc2V0U2VsZWN0aW9uP3RoaXMuc3BlYy5zZXRTZWxlY3Rpb24oZSxuLHIpOnQucHJvdG90eXBlLnNldFNlbGVjdGlvbi5jYWxsKHRoaXMsZSxuLHIsbyl9LGUucHJvdG90eXBlLmRlc3Ryb3k9ZnVuY3Rpb24oKXt0aGlzLnNwZWMuZGVzdHJveSYmdGhpcy5zcGVjLmRlc3Ryb3koKSx0LnByb3RvdHlwZS5kZXN0cm95LmNhbGwodGhpcyl9LGUucHJvdG90eXBlLnN0b3BFdmVudD1mdW5jdGlvbih0KXtyZXR1cm4hIXRoaXMuc3BlYy5zdG9wRXZlbnQmJnRoaXMuc3BlYy5zdG9wRXZlbnQodCl9LGUucHJvdG90eXBlLmlnbm9yZU11dGF0aW9uPWZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLnNwZWMuaWdub3JlTXV0YXRpb24/dGhpcy5zcGVjLmlnbm9yZU11dGF0aW9uKGUpOnQucHJvdG90eXBlLmlnbm9yZU11dGF0aW9uLmNhbGwodGhpcyxlKX0sZX0oUGYpO2Z1bmN0aW9uIGpmKHQsZSl7Zm9yKHZhciBuPXQuZmlyc3RDaGlsZCxyPTA7cjxlLmxlbmd0aDtyKyspe3ZhciBvPWVbcl0saT1vLmRvbTtpZihpLnBhcmVudE5vZGU9PXQpe3doaWxlKGkhPW4pbj1LZihuKTtuPW4ubmV4dFNpYmxpbmd9ZWxzZSB0Lmluc2VydEJlZm9yZShpLG4pO2lmKG8gaW5zdGFuY2VvZiB6Zil7dmFyIHM9bj9uLnByZXZpb3VzU2libGluZzp0Lmxhc3RDaGlsZDtqZihvLmNvbnRlbnRET00sby5jaGlsZHJlbiksbj1zP3MubmV4dFNpYmxpbmc6dC5maXJzdENoaWxkfX13aGlsZShuKW49S2Yobil9ZnVuY3Rpb24gJGYodCl7dCYmKHRoaXMubm9kZU5hbWU9dCl9JGYucHJvdG90eXBlPU9iamVjdC5jcmVhdGUobnVsbCk7dmFyIFZmPVtuZXcgJGZdO2Z1bmN0aW9uIExmKHQsZSxuKXtpZigwPT10Lmxlbmd0aClyZXR1cm4gVmY7Zm9yKHZhciByPW4/VmZbMF06bmV3ICRmLG89W3JdLGk9MDtpPHQubGVuZ3RoO2krKyl7dmFyIHM9dFtpXS50eXBlLmF0dHJzLGE9cjtpZihzKWZvcih2YXIgYyBpbiBzLm5vZGVOYW1lJiZvLnB1c2goYT1uZXcgJGYocy5ub2RlTmFtZSkpLHMpe3ZhciB1PXNbY107bnVsbCE9dSYmKG4mJjE9PW8ubGVuZ3RoJiZvLnB1c2goYT1yPW5ldyAkZihlLmlzSW5saW5lPyJzcGFuIjoiZGl2IikpLCJjbGFzcyI9PWM/YS5jbGFzcz0oYS5jbGFzcz9hLmNsYXNzKyIgIjoiIikrdToic3R5bGUiPT1jP2Euc3R5bGU9KGEuc3R5bGU/YS5zdHlsZSsiOyI6IiIpK3U6Im5vZGVOYW1lIiE9YyYmKGFbY109dSkpfX1yZXR1cm4gb31mdW5jdGlvbiBxZih0LGUsbixyKXtpZihuPT1WZiYmcj09VmYpcmV0dXJuIGU7Zm9yKHZhciBvPWUsaT0wO2k8ci5sZW5ndGg7aSsrKXt2YXIgcz1yW2ldLGE9bltpXTtpZihpKXt2YXIgYz12b2lkIDA7YSYmYS5ub2RlTmFtZT09cy5ub2RlTmFtZSYmbyE9dCYmKGM9by5wYXJlbnROb2RlKSYmYy50YWdOYW1lLnRvTG93ZXJDYXNlKCk9PXMubm9kZU5hbWV8fChjPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQocy5ub2RlTmFtZSksYy5hcHBlbmRDaGlsZChvKSxhPVZmWzBdKSxvPWN9SmYobyxhfHxWZlswXSxzKX1yZXR1cm4gb31mdW5jdGlvbiBKZih0LGUsbil7Zm9yKHZhciByIGluIGUpImNsYXNzIj09cnx8InN0eWxlIj09cnx8Im5vZGVOYW1lIj09cnx8ciBpbiBufHx0LnJlbW92ZUF0dHJpYnV0ZShyKTtmb3IodmFyIG8gaW4gbikiY2xhc3MiIT1vJiYic3R5bGUiIT1vJiYibm9kZU5hbWUiIT1vJiZuW29dIT1lW29dJiZ0LnNldEF0dHJpYnV0ZShvLG5bb10pO2lmKGUuY2xhc3MhPW4uY2xhc3Mpe2Zvcih2YXIgaT1lLmNsYXNzP2UuY2xhc3Muc3BsaXQoIiAiKTpFZixzPW4uY2xhc3M/bi5jbGFzcy5zcGxpdCgiICIpOkVmLGE9MDthPGkubGVuZ3RoO2ErKyktMT09cy5pbmRleE9mKGlbYV0pJiZ0LmNsYXNzTGlzdC5yZW1vdmUoaVthXSk7Zm9yKHZhciBjPTA7YzxzLmxlbmd0aDtjKyspLTE9PWkuaW5kZXhPZihzW2NdKSYmdC5jbGFzc0xpc3QuYWRkKHNbY10pfWlmKGUuc3R5bGUhPW4uc3R5bGUpe2lmKGUuc3R5bGUpe3ZhciB1LGw9L1xzKihbXHdcLVx4YTEtXHVmZmZmXSspXHMqOig/OiIoPzpcXC58W14iXSkqInwnKD86XFwufFteJ10pKid8XCguKj9cKXxbXjtdKSovZzt3aGlsZSh1PWwuZXhlYyhlLnN0eWxlKSl0LnN0eWxlLnJlbW92ZVByb3BlcnR5KHVbMV0pfW4uc3R5bGUmJih0LnN0eWxlLmNzc1RleHQrPW4uc3R5bGUpfX1mdW5jdGlvbiBXZih0LGUsbil7cmV0dXJuIHFmKHQsdCxWZixMZihlLG4sMSE9dC5ub2RlVHlwZSkpfWZ1bmN0aW9uIEhmKHQsZSl7aWYodC5sZW5ndGghPWUubGVuZ3RoKXJldHVybiExO2Zvcih2YXIgbj0wO248dC5sZW5ndGg7bisrKWlmKCF0W25dLnR5cGUuZXEoZVtuXS50eXBlKSlyZXR1cm4hMTtyZXR1cm4hMH1mdW5jdGlvbiBLZih0KXt2YXIgZT10Lm5leHRTaWJsaW5nO3JldHVybiB0LnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQodCksZX12YXIgVWY9ZnVuY3Rpb24odCxlKXt0aGlzLnRvcD10LHRoaXMubG9jaz1lLHRoaXMuaW5kZXg9MCx0aGlzLnN0YWNrPVtdLHRoaXMuY2hhbmdlZD0hMTt2YXIgbj1HZih0Lm5vZGUuY29udGVudCx0LmNoaWxkcmVuKTt0aGlzLnByZU1hdGNoZWQ9bi5ub2Rlcyx0aGlzLnByZU1hdGNoT2Zmc2V0PW4ub2Zmc2V0fTtmdW5jdGlvbiBHZih0LGUpe2Zvcih2YXIgbj1bXSxyPXQuY2hpbGRDb3VudCxvPWUubGVuZ3RoLTE7cj4wJiZvPj0wO28tLSl7dmFyIGk9ZVtvXSxzPWkubm9kZTtpZihzKXtpZihzIT10LmNoaWxkKHItMSkpYnJlYWs7bi5wdXNoKGkpLC0tcn19cmV0dXJue25vZGVzOm4ucmV2ZXJzZSgpLG9mZnNldDpyfX1mdW5jdGlvbiBYZih0LGUpe3JldHVybiB0LnR5cGUuc2lkZS1lLnR5cGUuc2lkZX1mdW5jdGlvbiBZZih0LGUsbixyKXt2YXIgbz1lLmxvY2Fscyh0KSxpPTA7aWYoMCE9by5sZW5ndGgpZm9yKHZhciBzPTAsYT1bXSxjPW51bGwsdT0wOzspe2lmKHM8by5sZW5ndGgmJm9bc10udG89PWkpe3ZhciBsPW9bcysrXSxoPXZvaWQgMDt3aGlsZShzPG8ubGVuZ3RoJiZvW3NdLnRvPT1pKShofHwoaD1bbF0pKS5wdXNoKG9bcysrXSk7aWYoaCl7aC5zb3J0KFhmKTtmb3IodmFyIGY9MDtmPGgubGVuZ3RoO2YrKyluKGhbZl0sdSwhIWMpfWVsc2UgbihsLHUsISFjKX12YXIgcD12b2lkIDAsZD12b2lkIDA7aWYoYylkPS0xLHA9YyxjPW51bGw7ZWxzZXtpZighKHU8dC5jaGlsZENvdW50KSlicmVhaztkPXUscD10LmNoaWxkKHUrKyl9Zm9yKHZhciB2PTA7djxhLmxlbmd0aDt2KyspYVt2XS50bzw9aSYmYS5zcGxpY2Uodi0tLDEpO3doaWxlKHM8by5sZW5ndGgmJm9bc10uZnJvbT09aSlhLnB1c2gob1tzKytdKTt2YXIgbT1pK3Aubm9kZVNpemU7aWYocC5pc1RleHQpe3ZhciBnPW07czxvLmxlbmd0aCYmb1tzXS5mcm9tPGcmJihnPW9bc10uZnJvbSk7Zm9yKHZhciB5PTA7eTxhLmxlbmd0aDt5KyspYVt5XS50bzxnJiYoZz1hW3ldLnRvKTtnPG0mJihjPXAuY3V0KGctaSkscD1wLmN1dCgwLGctaSksbT1nLGQ9LTEpfXIocCxhLmxlbmd0aD9hLnNsaWNlKCk6RWYsZS5mb3JDaGlsZChpLHApLGQpLGk9bX1lbHNlIGZvcih2YXIgdz0wO3c8dC5jaGlsZENvdW50O3crKyl7dmFyIGI9dC5jaGlsZCh3KTtyKGIsbyxlLmZvckNoaWxkKGksYiksdyksaSs9Yi5ub2RlU2l6ZX19ZnVuY3Rpb24gWmYodCl7aWYoIlVMIj09dC5ub2RlTmFtZXx8Ik9MIj09dC5ub2RlTmFtZSl7dmFyIGU9dC5zdHlsZS5jc3NUZXh0O3Quc3R5bGUuY3NzVGV4dD1lKyI7IGxpc3Qtc3R5bGU6IHNxdWFyZSAhaW1wb3J0YW50Iix3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZSh0KS5saXN0U3R5bGUsdC5zdHlsZS5jc3NUZXh0PWV9fWZ1bmN0aW9uIFFmKHQsZSl7Zm9yKDs7KXtpZigzPT10Lm5vZGVUeXBlKXJldHVybiB0O2lmKDE9PXQubm9kZVR5cGUmJmU+MCl7aWYodC5jaGlsZE5vZGVzLmxlbmd0aD5lJiYzPT10LmNoaWxkTm9kZXNbZV0ubm9kZVR5cGUpcmV0dXJuIHQuY2hpbGROb2Rlc1tlXTt0PXQuY2hpbGROb2Rlc1tlLTFdLGU9cWgodCl9ZWxzZXtpZighKDE9PXQubm9kZVR5cGUmJmU8dC5jaGlsZE5vZGVzLmxlbmd0aCkpcmV0dXJuIG51bGw7dD10LmNoaWxkTm9kZXNbZV0sZT0wfX19ZnVuY3Rpb24gdHAodCxlLG4scil7Zm9yKHZhciBvPTAsaT0wO288dC5jaGlsZENvdW50JiZpPD1yOyl7dmFyIHM9dC5jaGlsZChvKyspLGE9aTtpZihpKz1zLm5vZGVTaXplLHMuaXNUZXh0KXt2YXIgYz1zLnRleHQ7d2hpbGUobzx0LmNoaWxkQ291bnQpe3ZhciB1PXQuY2hpbGQobysrKTtpZihpKz11Lm5vZGVTaXplLCF1LmlzVGV4dClicmVhaztjKz11LnRleHR9aWYoaT49bil7dmFyIGw9Yy5sYXN0SW5kZXhPZihlLHItYSk7aWYobD49MCYmbCtlLmxlbmd0aCthPj1uKXJldHVybiBhK2x9fX1yZXR1cm4tMX1mdW5jdGlvbiBlcCh0LGUsbixyLG8pe2Zvcih2YXIgaT1bXSxzPTAsYT0wO3M8dC5sZW5ndGg7cysrKXt2YXIgYz10W3NdLHU9YSxsPWErPWMuc2l6ZTt1Pj1ufHxsPD1lP2kucHVzaChjKToodTxlJiZpLnB1c2goYy5zbGljZSgwLGUtdSxyKSksbyYmKGkucHVzaChvKSxvPW51bGwpLGw+biYmaS5wdXNoKGMuc2xpY2Uobi11LGMuc2l6ZSxyKSkpfXJldHVybiBpfWZ1bmN0aW9uIG5wKHQsZSl7dmFyIG49dC5zZWxlY3Rpb24scj1uLiRhbmNob3Isbz1uLiRoZWFkLGk9ZT4wP3IubWF4KG8pOnIubWluKG8pLHM9aS5wYXJlbnQuaW5saW5lQ29udGVudD9pLmRlcHRoP3QuZG9jLnJlc29sdmUoZT4wP2kuYWZ0ZXIoKTppLmJlZm9yZSgpKTpudWxsOmk7cmV0dXJuIHMmJmNbIlNlbGVjdGlvbiJdLmZpbmRGcm9tKHMsZSl9ZnVuY3Rpb24gcnAodCxlKXtyZXR1cm4gdC5kaXNwYXRjaCh0LnN0YXRlLnRyLnNldFNlbGVjdGlvbihlKS5zY3JvbGxJbnRvVmlldygpKSwhMH1mdW5jdGlvbiBvcCh0LGUsbil7dmFyIHI9dC5zdGF0ZS5zZWxlY3Rpb247aWYociBpbnN0YW5jZW9mIGNbIlRleHRTZWxlY3Rpb24iXSl7aWYoIXIuZW1wdHl8fG4uaW5kZXhPZigicyIpPi0xKXJldHVybiExO2lmKHQuZW5kT2ZUZXh0YmxvY2soZT4wPyJyaWdodCI6ImxlZnQiKSl7dmFyIG89bnAodC5zdGF0ZSxlKTtyZXR1cm4hIShvJiZvIGluc3RhbmNlb2YgY1siTm9kZVNlbGVjdGlvbiJdKSYmcnAodCxvKX12YXIgaSxzPXIuJGhlYWQsYT1zLnRleHRPZmZzZXQ/bnVsbDplPDA/cy5ub2RlQmVmb3JlOnMubm9kZUFmdGVyO2lmKCFhfHxhLmlzVGV4dClyZXR1cm4hMTt2YXIgdT1lPDA/cy5wb3MtYS5ub2RlU2l6ZTpzLnBvcztyZXR1cm4hIShhLmlzQXRvbXx8KGk9dC5kb2NWaWV3LmRlc2NBdCh1KSkmJiFpLmNvbnRlbnRET00pJiYoY1siTm9kZVNlbGVjdGlvbiJdLmlzU2VsZWN0YWJsZShhKT9ycCh0LG5ldyBjWyJOb2RlU2VsZWN0aW9uIl0oZTwwP3Quc3RhdGUuZG9jLnJlc29sdmUocy5wb3MtYS5ub2RlU2l6ZSk6cykpOiEhRGgud2Via2l0JiZycCh0LG5ldyBjWyJUZXh0U2VsZWN0aW9uIl0odC5zdGF0ZS5kb2MucmVzb2x2ZShlPDA/dTp1K2Eubm9kZVNpemUpKSkpfWlmKHIgaW5zdGFuY2VvZiBjWyJOb2RlU2VsZWN0aW9uIl0mJnIubm9kZS5pc0lubGluZSlyZXR1cm4gcnAodCxuZXcgY1siVGV4dFNlbGVjdGlvbiJdKGU+MD9yLiR0bzpyLiRmcm9tKSk7dmFyIGw9bnAodC5zdGF0ZSxlKTtyZXR1cm4hIWwmJnJwKHQsbCl9ZnVuY3Rpb24gaXAodCl7cmV0dXJuIDM9PXQubm9kZVR5cGU/dC5ub2RlVmFsdWUubGVuZ3RoOnQuY2hpbGROb2Rlcy5sZW5ndGh9ZnVuY3Rpb24gc3AodCl7dmFyIGU9dC5wbVZpZXdEZXNjO3JldHVybiBlJiYwPT1lLnNpemUmJih0Lm5leHRTaWJsaW5nfHwiQlIiIT10Lm5vZGVOYW1lKX1mdW5jdGlvbiBhcCh0KXt2YXIgZT10LnJvb3QuZ2V0U2VsZWN0aW9uKCksbj1lLmZvY3VzTm9kZSxyPWUuZm9jdXNPZmZzZXQ7aWYobil7dmFyIG8saSxzPSExO2ZvcihEaC5nZWNrbyYmMT09bi5ub2RlVHlwZSYmcjxpcChuKSYmc3Aobi5jaGlsZE5vZGVzW3JdKSYmKHM9ITApOzspaWYocj4wKXtpZigxIT1uLm5vZGVUeXBlKWJyZWFrO3ZhciBhPW4uY2hpbGROb2Rlc1tyLTFdO2lmKHNwKGEpKW89bixpPS0tcjtlbHNle2lmKDMhPWEubm9kZVR5cGUpYnJlYWs7bj1hLHI9bi5ub2RlVmFsdWUubGVuZ3RofX1lbHNle2lmKHVwKG4pKWJyZWFrO3ZhciBjPW4ucHJldmlvdXNTaWJsaW5nO3doaWxlKGMmJnNwKGMpKW89bi5wYXJlbnROb2RlLGk9X2goYyksYz1jLnByZXZpb3VzU2libGluZztpZihjKW49YyxyPWlwKG4pO2Vsc2V7aWYobj1uLnBhcmVudE5vZGUsbj09dC5kb20pYnJlYWs7cj0wfX1zP2xwKHQsZSxuLHIpOm8mJmxwKHQsZSxvLGkpfX1mdW5jdGlvbiBjcCh0KXt2YXIgZT10LnJvb3QuZ2V0U2VsZWN0aW9uKCksbj1lLmZvY3VzTm9kZSxyPWUuZm9jdXNPZmZzZXQ7aWYobil7Zm9yKHZhciBvLGkscz1pcChuKTs7KWlmKHI8cyl7aWYoMSE9bi5ub2RlVHlwZSlicmVhazt2YXIgYT1uLmNoaWxkTm9kZXNbcl07aWYoIXNwKGEpKWJyZWFrO289bixpPSsrcn1lbHNle2lmKHVwKG4pKWJyZWFrO3ZhciBjPW4ubmV4dFNpYmxpbmc7d2hpbGUoYyYmc3AoYykpbz1jLnBhcmVudE5vZGUsaT1faChjKSsxLGM9Yy5uZXh0U2libGluZztpZihjKW49YyxyPTAscz1pcChuKTtlbHNle2lmKG49bi5wYXJlbnROb2RlLG49PXQuZG9tKWJyZWFrO3I9cz0wfX1vJiZscCh0LGUsbyxpKX19ZnVuY3Rpb24gdXAodCl7dmFyIGU9dC5wbVZpZXdEZXNjO3JldHVybiBlJiZlLm5vZGUmJmUubm9kZS5pc0Jsb2NrfWZ1bmN0aW9uIGxwKHQsZSxuLHIpe2lmKEhoKGUpKXt2YXIgbz1kb2N1bWVudC5jcmVhdGVSYW5nZSgpO28uc2V0RW5kKG4sciksby5zZXRTdGFydChuLHIpLGUucmVtb3ZlQWxsUmFuZ2VzKCksZS5hZGRSYW5nZShvKX1lbHNlIGUuZXh0ZW5kJiZlLmV4dGVuZChuLHIpO3QuZG9tT2JzZXJ2ZXIuc2V0Q3VyU2VsZWN0aW9uKCl9ZnVuY3Rpb24gaHAodCxlLG4pe3ZhciByPXQuc3RhdGUuc2VsZWN0aW9uO2lmKHIgaW5zdGFuY2VvZiBjWyJUZXh0U2VsZWN0aW9uIl0mJiFyLmVtcHR5fHxuLmluZGV4T2YoInMiKT4tMSlyZXR1cm4hMTt2YXIgbz1yLiRmcm9tLGk9ci4kdG87aWYoIW8ucGFyZW50LmlubGluZUNvbnRlbnR8fHQuZW5kT2ZUZXh0YmxvY2soZTwwPyJ1cCI6ImRvd24iKSl7dmFyIHM9bnAodC5zdGF0ZSxlKTtpZihzJiZzIGluc3RhbmNlb2YgY1siTm9kZVNlbGVjdGlvbiJdKXJldHVybiBycCh0LHMpfWlmKCFvLnBhcmVudC5pbmxpbmVDb250ZW50KXt2YXIgYT1jWyJTZWxlY3Rpb24iXS5maW5kRnJvbShlPDA/bzppLGUpO3JldHVybiFhfHxycCh0LGEpfXJldHVybiExfWZ1bmN0aW9uIGZwKHQsZSl7aWYoISh0LnN0YXRlLnNlbGVjdGlvbiBpbnN0YW5jZW9mIGNbIlRleHRTZWxlY3Rpb24iXSkpcmV0dXJuITA7dmFyIG49dC5zdGF0ZS5zZWxlY3Rpb24scj1uLiRoZWFkLG89bi4kYW5jaG9yLGk9bi5lbXB0eTtpZighci5zYW1lUGFyZW50KG8pKXJldHVybiEwO2lmKCFpKXJldHVybiExO2lmKHQuZW5kT2ZUZXh0YmxvY2soZT4wPyJmb3J3YXJkIjoiYmFja3dhcmQiKSlyZXR1cm4hMDt2YXIgcz0hci50ZXh0T2Zmc2V0JiYoZTwwP3Iubm9kZUJlZm9yZTpyLm5vZGVBZnRlcik7aWYocyYmIXMuaXNUZXh0KXt2YXIgYT10LnN0YXRlLnRyO3JldHVybiBlPDA/YS5kZWxldGUoci5wb3Mtcy5ub2RlU2l6ZSxyLnBvcyk6YS5kZWxldGUoci5wb3Msci5wb3Mrcy5ub2RlU2l6ZSksdC5kaXNwYXRjaChhKSwhMH1yZXR1cm4hMX1mdW5jdGlvbiBwcCh0LGUsbil7dC5kb21PYnNlcnZlci5zdG9wKCksZS5jb250ZW50RWRpdGFibGU9bix0LmRvbU9ic2VydmVyLnN0YXJ0KCl9ZnVuY3Rpb24gZHAodCl7aWYoRGguY2hyb21lJiYhKHQuc3RhdGUuc2VsZWN0aW9uLiRoZWFkLnBhcmVudE9mZnNldD4wKSl7dmFyIGU9dC5yb290LmdldFNlbGVjdGlvbigpLG49ZS5mb2N1c05vZGUscj1lLmZvY3VzT2Zmc2V0O2lmKG4mJjE9PW4ubm9kZVR5cGUmJjA9PXImJm4uZmlyc3RDaGlsZCYmImZhbHNlIj09bi5maXJzdENoaWxkLmNvbnRlbnRFZGl0YWJsZSl7dmFyIG89bi5maXJzdENoaWxkO3BwKHQsbywhMCksc2V0VGltZW91dCgoZnVuY3Rpb24oKXtyZXR1cm4gcHAodCxvLCExKX0pLDIwKX19fWZ1bmN0aW9uIHZwKHQpe3ZhciBlPSIiO3JldHVybiB0LmN0cmxLZXkmJihlKz0iYyIpLHQubWV0YUtleSYmKGUrPSJtIiksdC5hbHRLZXkmJihlKz0iYSIpLHQuc2hpZnRLZXkmJihlKz0icyIpLGV9ZnVuY3Rpb24gbXAodCxlKXt2YXIgbj1lLmtleUNvZGUscj12cChlKTtyZXR1cm4gOD09bnx8RGgubWFjJiY3Mj09biYmImMiPT1yP2ZwKHQsLTEpfHxhcCh0KTo0Nj09bnx8RGgubWFjJiY2OD09biYmImMiPT1yP2ZwKHQsMSl8fGNwKHQpOjEzPT1ufHwyNz09bnx8KDM3PT1uP29wKHQsLTEscil8fGFwKHQpOjM5PT1uP29wKHQsMSxyKXx8Y3AodCk6Mzg9PW4/aHAodCwtMSxyKXx8YXAodCk6NDA9PW4/ZHAodCl8fGhwKHQsMSxyKXx8Y3AodCk6cj09KERoLm1hYz8ibSI6ImMiKSYmKDY2PT1ufHw3Mz09bnx8ODk9PW58fDkwPT1uKSl9ZnVuY3Rpb24gZ3AodCxlKXt2YXIgbixyLG89dC5yb290LmdldFNlbGVjdGlvbigpLGk9dC5zdGF0ZS5kb2Mscz10LmRvY1ZpZXcubmVhcmVzdERlc2Moby5mb2N1c05vZGUpLGE9cyYmMD09cy5zaXplLHU9dC5kb2NWaWV3LnBvc0Zyb21ET00oby5mb2N1c05vZGUsby5mb2N1c09mZnNldCksbD1pLnJlc29sdmUodSk7aWYoSGgobykpe249bDt3aGlsZShzJiYhcy5ub2RlKXM9cy5wYXJlbnQ7aWYocyYmcy5ub2RlLmlzQXRvbSYmY1siTm9kZVNlbGVjdGlvbiJdLmlzU2VsZWN0YWJsZShzLm5vZGUpJiZzLnBhcmVudCYmKCFzLm5vZGUuaXNJbmxpbmV8fCFKaChvLmZvY3VzTm9kZSxvLmZvY3VzT2Zmc2V0LHMuZG9tKSkpe3ZhciBoPXMucG9zQmVmb3JlO3I9bmV3IGNbIk5vZGVTZWxlY3Rpb24iXSh1PT1oP2w6aS5yZXNvbHZlKGgpKX19ZWxzZSBuPWkucmVzb2x2ZSh0LmRvY1ZpZXcucG9zRnJvbURPTShvLmFuY2hvck5vZGUsby5hbmNob3JPZmZzZXQpKTtpZighcil7dmFyIGY9InBvaW50ZXIiPT1lfHx0LnN0YXRlLnNlbGVjdGlvbi5oZWFkPGwucG9zJiYhYT8xOi0xO3I9TnAodCxuLGwsZil9cmV0dXJuIHJ9ZnVuY3Rpb24geXAodCxlKXt2YXIgbj10LnN0YXRlLnNlbGVjdGlvbjtpZihPcCh0LG4pLHQuZWRpdGFibGU/dC5oYXNGb2N1cygpOkFwKHQpJiZkb2N1bWVudC5hY3RpdmVFbGVtZW50LmNvbnRhaW5zKHQuZG9tKSl7aWYodC5kb21PYnNlcnZlci5kaXNjb25uZWN0U2VsZWN0aW9uKCksdC5jdXJzb3JXcmFwcGVyKUNwKHQpO2Vsc2V7dmFyIHIsbyxpPW4uYW5jaG9yLHM9bi5oZWFkOyF3cHx8biBpbnN0YW5jZW9mIGNbIlRleHRTZWxlY3Rpb24iXXx8KG4uJGZyb20ucGFyZW50LmlubGluZUNvbnRlbnR8fChyPWJwKHQsbi5mcm9tKSksbi5lbXB0eXx8bi4kZnJvbS5wYXJlbnQuaW5saW5lQ29udGVudHx8KG89YnAodCxuLnRvKSkpLHQuZG9jVmlldy5zZXRTZWxlY3Rpb24oaSxzLHQucm9vdCxlKSx3cCYmKHImJmtwKHIpLG8mJmtwKG8pKSxuLnZpc2libGU/dC5kb20uY2xhc3NMaXN0LnJlbW92ZSgiUHJvc2VNaXJyb3ItaGlkZXNlbGVjdGlvbiIpOih0LmRvbS5jbGFzc0xpc3QuYWRkKCJQcm9zZU1pcnJvci1oaWRlc2VsZWN0aW9uIiksIm9uc2VsZWN0aW9uY2hhbmdlImluIGRvY3VtZW50JiZTcCh0KSl9dC5kb21PYnNlcnZlci5zZXRDdXJTZWxlY3Rpb24oKSx0LmRvbU9ic2VydmVyLmNvbm5lY3RTZWxlY3Rpb24oKX19VWYucHJvdG90eXBlLmdldFByZU1hdGNoPWZ1bmN0aW9uKHQpe3JldHVybiB0Pj10aGlzLnByZU1hdGNoT2Zmc2V0P3RoaXMucHJlTWF0Y2hlZFt0LXRoaXMucHJlTWF0Y2hPZmZzZXRdOm51bGx9LFVmLnByb3RvdHlwZS5kZXN0cm95QmV0d2Vlbj1mdW5jdGlvbih0LGUpe2lmKHQhPWUpe2Zvcih2YXIgbj10O248ZTtuKyspdGhpcy50b3AuY2hpbGRyZW5bbl0uZGVzdHJveSgpO3RoaXMudG9wLmNoaWxkcmVuLnNwbGljZSh0LGUtdCksdGhpcy5jaGFuZ2VkPSEwfX0sVWYucHJvdG90eXBlLmRlc3Ryb3lSZXN0PWZ1bmN0aW9uKCl7dGhpcy5kZXN0cm95QmV0d2Vlbih0aGlzLmluZGV4LHRoaXMudG9wLmNoaWxkcmVuLmxlbmd0aCl9LFVmLnByb3RvdHlwZS5zeW5jVG9NYXJrcz1mdW5jdGlvbih0LGUsbil7dmFyIHI9MCxvPXRoaXMuc3RhY2subGVuZ3RoPj4xLGk9TWF0aC5taW4obyx0Lmxlbmd0aCk7d2hpbGUocjxpJiYocj09by0xP3RoaXMudG9wOnRoaXMuc3RhY2tbcisxPDwxXSkubWF0Y2hlc01hcmsodFtyXSkmJiExIT09dFtyXS50eXBlLnNwZWMuc3Bhbm5pbmcpcisrO3doaWxlKHI8byl0aGlzLmRlc3Ryb3lSZXN0KCksdGhpcy50b3AuZGlydHk9Q2YsdGhpcy5pbmRleD10aGlzLnN0YWNrLnBvcCgpLHRoaXMudG9wPXRoaXMuc3RhY2sucG9wKCksby0tO3doaWxlKG88dC5sZW5ndGgpe3RoaXMuc3RhY2sucHVzaCh0aGlzLnRvcCx0aGlzLmluZGV4KzEpO2Zvcih2YXIgcz0tMSxhPXRoaXMuaW5kZXg7YTxNYXRoLm1pbih0aGlzLmluZGV4KzMsdGhpcy50b3AuY2hpbGRyZW4ubGVuZ3RoKTthKyspaWYodGhpcy50b3AuY2hpbGRyZW5bYV0ubWF0Y2hlc01hcmsodFtvXSkpe3M9YTticmVha31pZihzPi0xKXM+dGhpcy5pbmRleCYmKHRoaXMuY2hhbmdlZD0hMCx0aGlzLmRlc3Ryb3lCZXR3ZWVuKHRoaXMuaW5kZXgscykpLHRoaXMudG9wPXRoaXMudG9wLmNoaWxkcmVuW3RoaXMuaW5kZXhdO2Vsc2V7dmFyIGM9emYuY3JlYXRlKHRoaXMudG9wLHRbb10sZSxuKTt0aGlzLnRvcC5jaGlsZHJlbi5zcGxpY2UodGhpcy5pbmRleCwwLGMpLHRoaXMudG9wPWMsdGhpcy5jaGFuZ2VkPSEwfXRoaXMuaW5kZXg9MCxvKyt9fSxVZi5wcm90b3R5cGUuZmluZE5vZGVNYXRjaD1mdW5jdGlvbih0LGUsbixyKXt2YXIgbz0tMSxpPXI8MD92b2lkIDA6dGhpcy5nZXRQcmVNYXRjaChyKSxzPXRoaXMudG9wLmNoaWxkcmVuO2lmKGkmJmkubWF0Y2hlc05vZGUodCxlLG4pKW89cy5pbmRleE9mKGkpO2Vsc2UgZm9yKHZhciBhPXRoaXMuaW5kZXgsYz1NYXRoLm1pbihzLmxlbmd0aCxhKzUpO2E8YzthKyspe3ZhciB1PXNbYV07aWYodS5tYXRjaGVzTm9kZSh0LGUsbikmJnRoaXMucHJlTWF0Y2hlZC5pbmRleE9mKHUpPDApe289YTticmVha319cmV0dXJuIShvPDApJiYodGhpcy5kZXN0cm95QmV0d2Vlbih0aGlzLmluZGV4LG8pLHRoaXMuaW5kZXgrKywhMCl9LFVmLnByb3RvdHlwZS51cGRhdGVOZXh0Tm9kZT1mdW5jdGlvbih0LGUsbixyLG8pe2Zvcih2YXIgaT10aGlzLmluZGV4O2k8dGhpcy50b3AuY2hpbGRyZW4ubGVuZ3RoO2krKyl7dmFyIHM9dGhpcy50b3AuY2hpbGRyZW5baV07aWYocyBpbnN0YW5jZW9mIFBmKXt2YXIgYT10aGlzLnByZU1hdGNoZWQuaW5kZXhPZihzKTtpZihhPi0xJiZhK3RoaXMucHJlTWF0Y2hPZmZzZXQhPW8pcmV0dXJuITE7dmFyIGM9cy5kb20sdT10aGlzLmxvY2smJihjPT10aGlzLmxvY2t8fDE9PWMubm9kZVR5cGUmJmMuY29udGFpbnModGhpcy5sb2NrLnBhcmVudE5vZGUpKSYmISh0LmlzVGV4dCYmcy5ub2RlJiZzLm5vZGUuaXNUZXh0JiZzLm5vZGVET00ubm9kZVZhbHVlPT10LnRleHQmJnMuZGlydHkhPU5mJiZIZihlLHMub3V0ZXJEZWNvKSk7aWYoIXUmJnMudXBkYXRlKHQsZSxuLHIpKXJldHVybiB0aGlzLmRlc3Ryb3lCZXR3ZWVuKHRoaXMuaW5kZXgsaSkscy5kb20hPWMmJih0aGlzLmNoYW5nZWQ9ITApLHRoaXMuaW5kZXgrKywhMDticmVha319cmV0dXJuITF9LFVmLnByb3RvdHlwZS5hZGROb2RlPWZ1bmN0aW9uKHQsZSxuLHIsbyl7dGhpcy50b3AuY2hpbGRyZW4uc3BsaWNlKHRoaXMuaW5kZXgrKywwLFBmLmNyZWF0ZSh0aGlzLnRvcCx0LGUsbixyLG8pKSx0aGlzLmNoYW5nZWQ9ITB9LFVmLnByb3RvdHlwZS5wbGFjZVdpZGdldD1mdW5jdGlvbih0LGUsbil7aWYodGhpcy5pbmRleDx0aGlzLnRvcC5jaGlsZHJlbi5sZW5ndGgmJnRoaXMudG9wLmNoaWxkcmVuW3RoaXMuaW5kZXhdLm1hdGNoZXNXaWRnZXQodCkpdGhpcy5pbmRleCsrO2Vsc2V7dmFyIHI9bmV3IERmKHRoaXMudG9wLHQsZSxuKTt0aGlzLnRvcC5jaGlsZHJlbi5zcGxpY2UodGhpcy5pbmRleCsrLDAsciksdGhpcy5jaGFuZ2VkPSEwfX0sVWYucHJvdG90eXBlLmFkZFRleHRibG9ja0hhY2tzPWZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy50b3AuY2hpbGRyZW5bdGhpcy5pbmRleC0xXTt3aGlsZSh0IGluc3RhbmNlb2YgemYpdD10LmNoaWxkcmVuW3QuY2hpbGRyZW4ubGVuZ3RoLTFdO2lmKCF0fHwhKHQgaW5zdGFuY2VvZiBCZil8fC9cbiQvLnRlc3QodC5ub2RlLnRleHQpKWlmKHRoaXMuaW5kZXg8dGhpcy50b3AuY2hpbGRyZW4ubGVuZ3RoJiZ0aGlzLnRvcC5jaGlsZHJlblt0aGlzLmluZGV4XS5tYXRjaGVzSGFjaygpKXRoaXMuaW5kZXgrKztlbHNle3ZhciBlPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImJyIik7dGhpcy50b3AuY2hpbGRyZW4uc3BsaWNlKHRoaXMuaW5kZXgrKywwLG5ldyBfZih0aGlzLnRvcCxFZixlLG51bGwpKSx0aGlzLmNoYW5nZWQ9ITB9fTt2YXIgd3A9RGguc2FmYXJpfHxEaC5jaHJvbWUmJkRoLmNocm9tZV92ZXJzaW9uPDYzO2Z1bmN0aW9uIGJwKHQsZSl7dmFyIG49dC5kb2NWaWV3LmRvbUZyb21Qb3MoZSkscj1uLm5vZGUsbz1uLm9mZnNldCxpPW88ci5jaGlsZE5vZGVzLmxlbmd0aD9yLmNoaWxkTm9kZXNbb106bnVsbCxzPW8/ci5jaGlsZE5vZGVzW28tMV06bnVsbDtpZihEaC5zYWZhcmkmJmkmJiJmYWxzZSI9PWkuY29udGVudEVkaXRhYmxlKXJldHVybiB4cChpKTtpZigoIWl8fCJmYWxzZSI9PWkuY29udGVudEVkaXRhYmxlKSYmKCFzfHwiZmFsc2UiPT1zLmNvbnRlbnRFZGl0YWJsZSkpe2lmKGkpcmV0dXJuIHhwKGkpO2lmKHMpcmV0dXJuIHhwKHMpfX1mdW5jdGlvbiB4cCh0KXtyZXR1cm4gdC5jb250ZW50RWRpdGFibGU9InRydWUiLERoLnNhZmFyaSYmdC5kcmFnZ2FibGUmJih0LmRyYWdnYWJsZT0hMSx0Lndhc0RyYWdnYWJsZT0hMCksdH1mdW5jdGlvbiBrcCh0KXt0LmNvbnRlbnRFZGl0YWJsZT0iZmFsc2UiLHQud2FzRHJhZ2dhYmxlJiYodC5kcmFnZ2FibGU9ITAsdC53YXNEcmFnZ2FibGU9bnVsbCl9ZnVuY3Rpb24gU3AodCl7dmFyIGU9dC5kb20ub3duZXJEb2N1bWVudDtlLnJlbW92ZUV2ZW50TGlzdGVuZXIoInNlbGVjdGlvbmNoYW5nZSIsdC5oaWRlU2VsZWN0aW9uR3VhcmQpO3ZhciBuPXQucm9vdC5nZXRTZWxlY3Rpb24oKSxyPW4uYW5jaG9yTm9kZSxvPW4uYW5jaG9yT2Zmc2V0O2UuYWRkRXZlbnRMaXN0ZW5lcigic2VsZWN0aW9uY2hhbmdlIix0LmhpZGVTZWxlY3Rpb25HdWFyZD1mdW5jdGlvbigpe24uYW5jaG9yTm9kZT09ciYmbi5hbmNob3JPZmZzZXQ9PW98fChlLnJlbW92ZUV2ZW50TGlzdGVuZXIoInNlbGVjdGlvbmNoYW5nZSIsdC5oaWRlU2VsZWN0aW9uR3VhcmQpLHQuZG9tLmNsYXNzTGlzdC5yZW1vdmUoIlByb3NlTWlycm9yLWhpZGVzZWxlY3Rpb24iKSl9KX1mdW5jdGlvbiBDcCh0KXt2YXIgZT10LnJvb3QuZ2V0U2VsZWN0aW9uKCksbj1kb2N1bWVudC5jcmVhdGVSYW5nZSgpLHI9dC5jdXJzb3JXcmFwcGVyLmRvbSxvPSJJTUciPT1yLm5vZGVOYW1lO28/bi5zZXRFbmQoci5wYXJlbnROb2RlLF9oKHIpKzEpOm4uc2V0RW5kKHIsMCksbi5jb2xsYXBzZSghMSksZS5yZW1vdmVBbGxSYW5nZXMoKSxlLmFkZFJhbmdlKG4pLCFvJiYhdC5zdGF0ZS5zZWxlY3Rpb24udmlzaWJsZSYmRGguaWUmJkRoLmllX3ZlcnNpb248PTExJiYoci5kaXNhYmxlZD0hMCxyLmRpc2FibGVkPSExKX1mdW5jdGlvbiBPcCh0LGUpe2lmKGUgaW5zdGFuY2VvZiBjWyJOb2RlU2VsZWN0aW9uIl0pe3ZhciBuPXQuZG9jVmlldy5kZXNjQXQoZS5mcm9tKTtuIT10Lmxhc3RTZWxlY3RlZFZpZXdEZXNjJiYoTXAodCksbiYmbi5zZWxlY3ROb2RlKCksdC5sYXN0U2VsZWN0ZWRWaWV3RGVzYz1uKX1lbHNlIE1wKHQpfWZ1bmN0aW9uIE1wKHQpe3QubGFzdFNlbGVjdGVkVmlld0Rlc2MmJih0Lmxhc3RTZWxlY3RlZFZpZXdEZXNjLnBhcmVudCYmdC5sYXN0U2VsZWN0ZWRWaWV3RGVzYy5kZXNlbGVjdE5vZGUoKSx0Lmxhc3RTZWxlY3RlZFZpZXdEZXNjPW51bGwpfWZ1bmN0aW9uIE5wKHQsZSxuLHIpe3JldHVybiB0LnNvbWVQcm9wKCJjcmVhdGVTZWxlY3Rpb25CZXR3ZWVuIiwoZnVuY3Rpb24ocil7cmV0dXJuIHIodCxlLG4pfSkpfHxjWyJUZXh0U2VsZWN0aW9uIl0uYmV0d2VlbihlLG4scil9ZnVuY3Rpb24gVHAodCl7cmV0dXJuKCF0LmVkaXRhYmxlfHx0LnJvb3QuYWN0aXZlRWxlbWVudD09dC5kb20pJiZBcCh0KX1mdW5jdGlvbiBBcCh0KXt2YXIgZT10LnJvb3QuZ2V0U2VsZWN0aW9uKCk7aWYoIWUuYW5jaG9yTm9kZSlyZXR1cm4hMTt0cnl7cmV0dXJuIHQuZG9tLmNvbnRhaW5zKDM9PWUuYW5jaG9yTm9kZS5ub2RlVHlwZT9lLmFuY2hvck5vZGUucGFyZW50Tm9kZTplLmFuY2hvck5vZGUpJiYodC5lZGl0YWJsZXx8dC5kb20uY29udGFpbnMoMz09ZS5mb2N1c05vZGUubm9kZVR5cGU/ZS5mb2N1c05vZGUucGFyZW50Tm9kZTplLmZvY3VzTm9kZSkpfWNhdGNoKG4pe3JldHVybiExfX1mdW5jdGlvbiBFcCh0KXt2YXIgZT10LmRvY1ZpZXcuZG9tRnJvbVBvcyh0LnN0YXRlLnNlbGVjdGlvbi5hbmNob3IpLG49dC5yb290LmdldFNlbGVjdGlvbigpO3JldHVybiAkaChlLm5vZGUsZS5vZmZzZXQsbi5hbmNob3JOb2RlLG4uYW5jaG9yT2Zmc2V0KX1mdW5jdGlvbiBEcCh0LGUsbil7dmFyIHI9dC5kb2NWaWV3LnBhcnNlUmFuZ2UoZSxuKSxvPXIubm9kZSxpPXIuZnJvbU9mZnNldCxzPXIudG9PZmZzZXQsYT1yLmZyb20sYz1yLnRvLHU9dC5yb290LmdldFNlbGVjdGlvbigpLGw9bnVsbCxoPXUuYW5jaG9yTm9kZTtpZihoJiZ0LmRvbS5jb250YWlucygxPT1oLm5vZGVUeXBlP2g6aC5wYXJlbnROb2RlKSYmKGw9W3tub2RlOmgsb2Zmc2V0OnUuYW5jaG9yT2Zmc2V0fV0sSGgodSl8fGwucHVzaCh7bm9kZTp1LmZvY3VzTm9kZSxvZmZzZXQ6dS5mb2N1c09mZnNldH0pKSxEaC5jaHJvbWUmJjg9PT10Lmxhc3RLZXlDb2RlKWZvcih2YXIgZj1zO2Y+aTtmLS0pe3ZhciBwPW8uY2hpbGROb2Rlc1tmLTFdLGQ9cC5wbVZpZXdEZXNjO2lmKCJCUiI9PXAubm9kZVR5cGUmJiFkKXtzPWY7YnJlYWt9aWYoIWR8fGQuc2l6ZSlicmVha312YXIgdj10LnN0YXRlLmRvYyxtPXQuc29tZVByb3AoImRvbVBhcnNlciIpfHxmaC5mcm9tU2NoZW1hKHQuc3RhdGUuc2NoZW1hKSxnPXYucmVzb2x2ZShhKSx5PW51bGwsdz1tLnBhcnNlKG8se3RvcE5vZGU6Zy5wYXJlbnQsdG9wTWF0Y2g6Zy5wYXJlbnQuY29udGVudE1hdGNoQXQoZy5pbmRleCgpKSx0b3BPcGVuOiEwLGZyb206aSx0bzpzLHByZXNlcnZlV2hpdGVzcGFjZTohZy5wYXJlbnQudHlwZS5zcGVjLmNvZGV8fCJmdWxsIixlZGl0YWJsZUNvbnRlbnQ6ITAsZmluZFBvc2l0aW9uczpsLHJ1bGVGcm9tTm9kZTpScCxjb250ZXh0Omd9KTtpZihsJiZudWxsIT1sWzBdLnBvcyl7dmFyIGI9bFswXS5wb3MseD1sWzFdJiZsWzFdLnBvcztudWxsPT14JiYoeD1iKSx5PXthbmNob3I6YithLGhlYWQ6eCthfX1yZXR1cm57ZG9jOncsc2VsOnksZnJvbTphLHRvOmN9fWZ1bmN0aW9uIFJwKHQpe3ZhciBlPXQucG1WaWV3RGVzYztpZihlKXJldHVybiBlLnBhcnNlUnVsZSgpO2lmKCJCUiI9PXQubm9kZU5hbWUmJnQucGFyZW50Tm9kZSl7aWYoRGguc2FmYXJpJiYvXih1bHxvbCkkL2kudGVzdCh0LnBhcmVudE5vZGUubm9kZU5hbWUpKXt2YXIgbj1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKTtyZXR1cm4gbi5hcHBlbmRDaGlsZChkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJsaSIpKSx7c2tpcDpufX1pZih0LnBhcmVudE5vZGUubGFzdENoaWxkPT10fHxEaC5zYWZhcmkmJi9eKHRyfHRhYmxlKSQvaS50ZXN0KHQucGFyZW50Tm9kZS5ub2RlTmFtZSkpcmV0dXJue2lnbm9yZTohMH19ZWxzZSBpZigiSU1HIj09dC5ub2RlTmFtZSYmdC5nZXRBdHRyaWJ1dGUoIm1hcmstcGxhY2Vob2xkZXIiKSlyZXR1cm57aWdub3JlOiEwfX1mdW5jdGlvbiB6cCh0LGUsbixyLG8pe2lmKGU8MCl7dmFyIGk9dC5sYXN0U2VsZWN0aW9uVGltZT5EYXRlLm5vdygpLTUwP3QubGFzdFNlbGVjdGlvbk9yaWdpbjpudWxsLHM9Z3AodCxpKTtpZighdC5zdGF0ZS5zZWxlY3Rpb24uZXEocykpe3ZhciBhPXQuc3RhdGUudHIuc2V0U2VsZWN0aW9uKHMpOyJwb2ludGVyIj09aT9hLnNldE1ldGEoInBvaW50ZXIiLCEwKToia2V5Ij09aSYmYS5zY3JvbGxJbnRvVmlldygpLHQuZGlzcGF0Y2goYSl9fWVsc2V7dmFyIHU9dC5zdGF0ZS5kb2MucmVzb2x2ZShlKSxsPXUuc2hhcmVkRGVwdGgobik7ZT11LmJlZm9yZShsKzEpLG49dC5zdGF0ZS5kb2MucmVzb2x2ZShuKS5hZnRlcihsKzEpO3ZhciBoLGYscD10LnN0YXRlLnNlbGVjdGlvbixkPURwKHQsZSxuKSx2PXQuc3RhdGUuZG9jLG09di5zbGljZShkLmZyb20sZC50byk7OD09PXQubGFzdEtleUNvZGUmJkRhdGUubm93KCktMTAwPHQubGFzdEtleUNvZGVUaW1lPyhoPXQuc3RhdGUuc2VsZWN0aW9uLnRvLGY9ImVuZCIpOihoPXQuc3RhdGUuc2VsZWN0aW9uLmZyb20sZj0ic3RhcnQiKSx0Lmxhc3RLZXlDb2RlPW51bGw7dmFyIGc9RnAobS5jb250ZW50LGQuZG9jLmNvbnRlbnQsZC5mcm9tLGgsZik7aWYoIWcpe2lmKCEociYmcCBpbnN0YW5jZW9mIGNbIlRleHRTZWxlY3Rpb24iXSYmIXAuZW1wdHkmJnAuJGhlYWQuc2FtZVBhcmVudChwLiRhbmNob3IpKXx8dC5jb21wb3Npbmd8fGQuc2VsJiZkLnNlbC5hbmNob3IhPWQuc2VsLmhlYWQpe2lmKGQuc2VsKXt2YXIgeT1QcCh0LHQuc3RhdGUuZG9jLGQuc2VsKTt5JiYheS5lcSh0LnN0YXRlLnNlbGVjdGlvbikmJnQuZGlzcGF0Y2godC5zdGF0ZS50ci5zZXRTZWxlY3Rpb24oeSkpfXJldHVybn1nPXtzdGFydDpwLmZyb20sZW5kQTpwLnRvLGVuZEI6cC50b319dC5kb21DaGFuZ2VDb3VudCsrLHQuc3RhdGUuc2VsZWN0aW9uLmZyb208dC5zdGF0ZS5zZWxlY3Rpb24udG8mJmcuc3RhcnQ9PWcuZW5kQiYmdC5zdGF0ZS5zZWxlY3Rpb24gaW5zdGFuY2VvZiBjWyJUZXh0U2VsZWN0aW9uIl0mJihnLnN0YXJ0PnQuc3RhdGUuc2VsZWN0aW9uLmZyb20mJmcuc3RhcnQ8PXQuc3RhdGUuc2VsZWN0aW9uLmZyb20rMj9nLnN0YXJ0PXQuc3RhdGUuc2VsZWN0aW9uLmZyb206Zy5lbmRBPHQuc3RhdGUuc2VsZWN0aW9uLnRvJiZnLmVuZEE+PXQuc3RhdGUuc2VsZWN0aW9uLnRvLTImJihnLmVuZEIrPXQuc3RhdGUuc2VsZWN0aW9uLnRvLWcuZW5kQSxnLmVuZEE9dC5zdGF0ZS5zZWxlY3Rpb24udG8pKSxEaC5pZSYmRGguaWVfdmVyc2lvbjw9MTEmJmcuZW5kQj09Zy5zdGFydCsxJiZnLmVuZEE9PWcuc3RhcnQmJmcuc3RhcnQ+ZC5mcm9tJiYiIMKgIj09ZC5kb2MudGV4dEJldHdlZW4oZy5zdGFydC1kLmZyb20tMSxnLnN0YXJ0LWQuZnJvbSsxKSYmKGcuc3RhcnQtLSxnLmVuZEEtLSxnLmVuZEItLSk7dmFyIHcsYj1kLmRvYy5yZXNvbHZlTm9DYWNoZShnLnN0YXJ0LWQuZnJvbSkseD1kLmRvYy5yZXNvbHZlTm9DYWNoZShnLmVuZEItZC5mcm9tKTtpZigoRGguaW9zJiZ0Lmxhc3RJT1NFbnRlcj5EYXRlLm5vdygpLTEwMCYmKCFiLnNhbWVQYXJlbnQoeCl8fG8uc29tZSgoZnVuY3Rpb24odCl7cmV0dXJuIkRJViI9PXQubm9kZU5hbWV9KSkpfHwhYi5zYW1lUGFyZW50KHgpJiZiLnBvczxkLmRvYy5jb250ZW50LnNpemUmJih3PWNbIlNlbGVjdGlvbiJdLmZpbmRGcm9tKGQuZG9jLnJlc29sdmUoYi5wb3MrMSksMSwhMCkpJiZ3LmhlYWQ9PXgucG9zKSYmdC5zb21lUHJvcCgiaGFuZGxlS2V5RG93biIsKGZ1bmN0aW9uKGUpe3JldHVybiBlKHQsS2goMTMsIkVudGVyIikpfSkpKXQubGFzdElPU0VudGVyPTA7ZWxzZSBpZih0LnN0YXRlLnNlbGVjdGlvbi5hbmNob3I+Zy5zdGFydCYmQnAodixnLnN0YXJ0LGcuZW5kQSxiLHgpJiZ0LnNvbWVQcm9wKCJoYW5kbGVLZXlEb3duIiwoZnVuY3Rpb24oZSl7cmV0dXJuIGUodCxLaCg4LCJCYWNrc3BhY2UiKSl9KSkpRGguYW5kcm9pZCYmRGguY2hyb21lJiZ0LmRvbU9ic2VydmVyLnN1cHByZXNzU2VsZWN0aW9uVXBkYXRlcygpO2Vsc2V7dmFyIGssUyxDLE8sTT1nLnN0YXJ0LE49Zy5lbmRBO2lmKGIuc2FtZVBhcmVudCh4KSYmYi5wYXJlbnQuaW5saW5lQ29udGVudClpZihiLnBvcz09eC5wb3MpRGguaWUmJkRoLmllX3ZlcnNpb248PTExJiYwPT1iLnBhcmVudE9mZnNldCYmKHQuZG9tT2JzZXJ2ZXIuc3VwcHJlc3NTZWxlY3Rpb25VcGRhdGVzKCksc2V0VGltZW91dCgoZnVuY3Rpb24oKXtyZXR1cm4geXAodCl9KSwyMCkpLGs9dC5zdGF0ZS50ci5kZWxldGUoTSxOKSxTPXYucmVzb2x2ZShnLnN0YXJ0KS5tYXJrc0Fjcm9zcyh2LnJlc29sdmUoZy5lbmRBKSk7ZWxzZSBpZihnLmVuZEE9PWcuZW5kQiYmKE89di5yZXNvbHZlKGcuc3RhcnQpKSYmKEM9SXAoYi5wYXJlbnQuY29udGVudC5jdXQoYi5wYXJlbnRPZmZzZXQseC5wYXJlbnRPZmZzZXQpLE8ucGFyZW50LmNvbnRlbnQuY3V0KE8ucGFyZW50T2Zmc2V0LGcuZW5kQS1PLnN0YXJ0KCkpKSkpaz10LnN0YXRlLnRyLCJhZGQiPT1DLnR5cGU/ay5hZGRNYXJrKE0sTixDLm1hcmspOmsucmVtb3ZlTWFyayhNLE4sQy5tYXJrKTtlbHNlIGlmKGIucGFyZW50LmNoaWxkKGIuaW5kZXgoKSkuaXNUZXh0JiZiLmluZGV4KCk9PXguaW5kZXgoKS0oeC50ZXh0T2Zmc2V0PzA6MSkpe3ZhciBUPWIucGFyZW50LnRleHRCZXR3ZWVuKGIucGFyZW50T2Zmc2V0LHgucGFyZW50T2Zmc2V0KTtpZih0LnNvbWVQcm9wKCJoYW5kbGVUZXh0SW5wdXQiLChmdW5jdGlvbihlKXtyZXR1cm4gZSh0LE0sTixUKX0pKSlyZXR1cm47az10LnN0YXRlLnRyLmluc2VydFRleHQoVCxNLE4pfWlmKGt8fChrPXQuc3RhdGUudHIucmVwbGFjZShNLE4sZC5kb2Muc2xpY2UoZy5zdGFydC1kLmZyb20sZy5lbmRCLWQuZnJvbSkpKSxkLnNlbCl7dmFyIEE9UHAodCxrLmRvYyxkLnNlbCk7QSYmIShEaC5jaHJvbWUmJkRoLmFuZHJvaWQmJnQuY29tcG9zaW5nJiZBLmVtcHR5JiYoQS5oZWFkPT1NfHxBLmhlYWQ9PWsubWFwcGluZy5tYXAoTiktMSl8fERoLmllJiZBLmVtcHR5JiZBLmhlYWQ9PU0pJiZrLnNldFNlbGVjdGlvbihBKX1TJiZrLmVuc3VyZU1hcmtzKFMpLHQuZGlzcGF0Y2goay5zY3JvbGxJbnRvVmlldygpKX19fWZ1bmN0aW9uIFBwKHQsZSxuKXtyZXR1cm4gTWF0aC5tYXgobi5hbmNob3Isbi5oZWFkKT5lLmNvbnRlbnQuc2l6ZT9udWxsOk5wKHQsZS5yZXNvbHZlKG4uYW5jaG9yKSxlLnJlc29sdmUobi5oZWFkKSl9ZnVuY3Rpb24gSXAodCxlKXtmb3IodmFyIG4scixvLGk9dC5maXJzdENoaWxkLm1hcmtzLHM9ZS5maXJzdENoaWxkLm1hcmtzLGE9aSxjPXMsdT0wO3U8cy5sZW5ndGg7dSsrKWE9c1t1XS5yZW1vdmVGcm9tU2V0KGEpO2Zvcih2YXIgbD0wO2w8aS5sZW5ndGg7bCsrKWM9aVtsXS5yZW1vdmVGcm9tU2V0KGMpO2lmKDE9PWEubGVuZ3RoJiYwPT1jLmxlbmd0aClyPWFbMF0sbj0iYWRkIixvPWZ1bmN0aW9uKHQpe3JldHVybiB0Lm1hcmsoci5hZGRUb1NldCh0Lm1hcmtzKSl9O2Vsc2V7aWYoMCE9YS5sZW5ndGh8fDEhPWMubGVuZ3RoKXJldHVybiBudWxsO3I9Y1swXSxuPSJyZW1vdmUiLG89ZnVuY3Rpb24odCl7cmV0dXJuIHQubWFyayhyLnJlbW92ZUZyb21TZXQodC5tYXJrcykpfX1mb3IodmFyIGg9W10sZj0wO2Y8ZS5jaGlsZENvdW50O2YrKyloLnB1c2gobyhlLmNoaWxkKGYpKSk7aWYoYWwuZnJvbShoKS5lcSh0KSlyZXR1cm57bWFyazpyLHR5cGU6bn19ZnVuY3Rpb24gQnAodCxlLG4scixvKXtpZighci5wYXJlbnQuaXNUZXh0YmxvY2t8fG4tZTw9by5wb3Mtci5wb3N8fF9wKHIsITAsITEpPG8ucG9zKXJldHVybiExO3ZhciBpPXQucmVzb2x2ZShlKTtpZihpLnBhcmVudE9mZnNldDxpLnBhcmVudC5jb250ZW50LnNpemV8fCFpLnBhcmVudC5pc1RleHRibG9jaylyZXR1cm4hMTt2YXIgcz10LnJlc29sdmUoX3AoaSwhMCwhMCkpO3JldHVybiEoIXMucGFyZW50LmlzVGV4dGJsb2NrfHxzLnBvcz5ufHxfcChzLCEwLCExKTxuKSYmci5wYXJlbnQuY29udGVudC5jdXQoci5wYXJlbnRPZmZzZXQpLmVxKHMucGFyZW50LmNvbnRlbnQpfWZ1bmN0aW9uIF9wKHQsZSxuKXt2YXIgcj10LmRlcHRoLG89ZT90LmVuZCgpOnQucG9zO3doaWxlKHI+MCYmKGV8fHQuaW5kZXhBZnRlcihyKT09dC5ub2RlKHIpLmNoaWxkQ291bnQpKXItLSxvKyssZT0hMTtpZihuKXt2YXIgaT10Lm5vZGUocikubWF5YmVDaGlsZCh0LmluZGV4QWZ0ZXIocikpO3doaWxlKGkmJiFpLmlzTGVhZilpPWkuZmlyc3RDaGlsZCxvKyt9cmV0dXJuIG99ZnVuY3Rpb24gRnAodCxlLG4scixvKXt2YXIgaT10LmZpbmREaWZmU3RhcnQoZSxuKTtpZihudWxsPT1pKXJldHVybiBudWxsO3ZhciBzPXQuZmluZERpZmZFbmQoZSxuK3Quc2l6ZSxuK2Uuc2l6ZSksYT1zLmEsYz1zLmI7aWYoImVuZCI9PW8pe3ZhciB1PU1hdGgubWF4KDAsaS1NYXRoLm1pbihhLGMpKTtyLT1hK3UtaX1pZihhPGkmJnQuc2l6ZTxlLnNpemUpe3ZhciBsPXI8PWkmJnI+PWE/aS1yOjA7aS09bCxjPWkrKGMtYSksYT1pfWVsc2UgaWYoYzxpKXt2YXIgaD1yPD1pJiZyPj1jP2ktcjowO2ktPWgsYT1pKyhhLWMpLGM9aX1yZXR1cm57c3RhcnQ6aSxlbmRBOmEsZW5kQjpjfX1mdW5jdGlvbiBqcCh0LGUpe3ZhciBuPVtdLHI9ZS5jb250ZW50LG89ZS5vcGVuU3RhcnQsaT1lLm9wZW5FbmQ7d2hpbGUobz4xJiZpPjEmJjE9PXIuY2hpbGRDb3VudCYmMT09ci5maXJzdENoaWxkLmNoaWxkQ291bnQpe28tLSxpLS07dmFyIHM9ci5maXJzdENoaWxkO24ucHVzaChzLnR5cGUubmFtZSxzLnR5cGUuaGFzUmVxdWlyZWRBdHRycygpP3MuYXR0cnM6bnVsbCkscj1zLmNvbnRlbnR9dmFyIGE9dC5zb21lUHJvcCgiY2xpcGJvYXJkU2VyaWFsaXplciIpfHxUaC5mcm9tU2NoZW1hKHQuc3RhdGUuc2NoZW1hKSxjPUdwKCksdT1jLmNyZWF0ZUVsZW1lbnQoImRpdiIpO3UuYXBwZW5kQ2hpbGQoYS5zZXJpYWxpemVGcmFnbWVudChyLHtkb2N1bWVudDpjfSkpO3ZhciBsLGg9dS5maXJzdENoaWxkO3doaWxlKGgmJjE9PWgubm9kZVR5cGUmJihsPUtwW2gubm9kZU5hbWUudG9Mb3dlckNhc2UoKV0pKXtmb3IodmFyIGY9bC5sZW5ndGgtMTtmPj0wO2YtLSl7dmFyIHA9Yy5jcmVhdGVFbGVtZW50KGxbZl0pO3doaWxlKHUuZmlyc3RDaGlsZClwLmFwcGVuZENoaWxkKHUuZmlyc3RDaGlsZCk7dS5hcHBlbmRDaGlsZChwKX1oPXUuZmlyc3RDaGlsZH1oJiYxPT1oLm5vZGVUeXBlJiZoLnNldEF0dHJpYnV0ZSgiZGF0YS1wbS1zbGljZSIsbysiICIraSsiICIrSlNPTi5zdHJpbmdpZnkobikpO3ZhciBkPXQuc29tZVByb3AoImNsaXBib2FyZFRleHRTZXJpYWxpemVyIiwoZnVuY3Rpb24odCl7cmV0dXJuIHQoZSl9KSl8fGUuY29udGVudC50ZXh0QmV0d2VlbigwLGUuY29udGVudC5zaXplLCJcblxuIik7cmV0dXJue2RvbTp1LHRleHQ6ZH19ZnVuY3Rpb24gJHAodCxlLG4scixvKXt2YXIgaSxzLGE9by5wYXJlbnQudHlwZS5zcGVjLmNvZGU7aWYoIW4mJiFlKXJldHVybiBudWxsO3ZhciBjPWUmJihyfHxhfHwhbik7aWYoYyl7aWYodC5zb21lUHJvcCgidHJhbnNmb3JtUGFzdGVkVGV4dCIsKGZ1bmN0aW9uKHQpe2U9dChlKX0pKSxhKXJldHVybiBuZXcgZGwoYWwuZnJvbSh0LnN0YXRlLnNjaGVtYS50ZXh0KGUpKSwwLDApO3ZhciB1PXQuc29tZVByb3AoImNsaXBib2FyZFRleHRQYXJzZXIiLChmdW5jdGlvbih0KXtyZXR1cm4gdChlLG8pfSkpO3U/cz11OihpPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpLGUudHJpbSgpLnNwbGl0KC8oPzpcclxuP3xcbikrLykuZm9yRWFjaCgoZnVuY3Rpb24odCl7aS5hcHBlbmRDaGlsZChkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJwIikpLnRleHRDb250ZW50PXR9KSkpfWVsc2UgdC5zb21lUHJvcCgidHJhbnNmb3JtUGFzdGVkSFRNTCIsKGZ1bmN0aW9uKHQpe249dChuKX0pKSxpPVhwKG4pO3ZhciBsPWkmJmkucXVlcnlTZWxlY3RvcigiW2RhdGEtcG0tc2xpY2VdIiksaD1sJiYvXihcZCspIChcZCspICguKikvLmV4ZWMobC5nZXRBdHRyaWJ1dGUoImRhdGEtcG0tc2xpY2UiKSk7aWYoIXMpe3ZhciBmPXQuc29tZVByb3AoImNsaXBib2FyZFBhcnNlciIpfHx0LnNvbWVQcm9wKCJkb21QYXJzZXIiKXx8ZmguZnJvbVNjaGVtYSh0LnN0YXRlLnNjaGVtYSk7cz1mLnBhcnNlU2xpY2UoaSx7cHJlc2VydmVXaGl0ZXNwYWNlOiEoIWMmJiFoKSxjb250ZXh0Om99KX1yZXR1cm4gcz1oP1lwKEhwKHMsK2hbMV0sK2hbMl0pLGhbM10pOmRsLm1heE9wZW4oVnAocy5jb250ZW50LG8pLCExKSx0LnNvbWVQcm9wKCJ0cmFuc2Zvcm1QYXN0ZWQiLChmdW5jdGlvbih0KXtzPXQocyl9KSksc31mdW5jdGlvbiBWcCh0LGUpe2lmKHQuY2hpbGRDb3VudDwyKXJldHVybiB0O2Zvcih2YXIgbj1mdW5jdGlvbihuKXt2YXIgcj1lLm5vZGUobiksbz1yLmNvbnRlbnRNYXRjaEF0KGUuaW5kZXgobikpLGk9dm9pZCAwLHM9W107aWYodC5mb3JFYWNoKChmdW5jdGlvbih0KXtpZihzKXt2YXIgZSxuPW8uZmluZFdyYXBwaW5nKHQudHlwZSk7aWYoIW4pcmV0dXJuIHM9bnVsbDtpZihlPXMubGVuZ3RoJiZpLmxlbmd0aCYmcXAobixpLHQsc1tzLmxlbmd0aC0xXSwwKSlzW3MubGVuZ3RoLTFdPWU7ZWxzZXtzLmxlbmd0aCYmKHNbcy5sZW5ndGgtMV09SnAoc1tzLmxlbmd0aC0xXSxpLmxlbmd0aCkpO3ZhciByPUxwKHQsbik7cy5wdXNoKHIpLG89by5tYXRjaFR5cGUoci50eXBlLHIuYXR0cnMpLGk9bn19fSkpLHMpcmV0dXJue3Y6YWwuZnJvbShzKX19LHI9ZS5kZXB0aDtyPj0wO3ItLSl7dmFyIG89bihyKTtpZihvKXJldHVybiBvLnZ9cmV0dXJuIHR9ZnVuY3Rpb24gTHAodCxlLG4pe3ZvaWQgMD09PW4mJihuPTApO2Zvcih2YXIgcj1lLmxlbmd0aC0xO3I+PW47ci0tKXQ9ZVtyXS5jcmVhdGUobnVsbCxhbC5mcm9tKHQpKTtyZXR1cm4gdH1mdW5jdGlvbiBxcCh0LGUsbixyLG8pe2lmKG88dC5sZW5ndGgmJm88ZS5sZW5ndGgmJnRbb109PWVbb10pe3ZhciBpPXFwKHQsZSxuLHIubGFzdENoaWxkLG8rMSk7aWYoaSlyZXR1cm4gci5jb3B5KHIuY29udGVudC5yZXBsYWNlQ2hpbGQoci5jaGlsZENvdW50LTEsaSkpO3ZhciBzPXIuY29udGVudE1hdGNoQXQoci5jaGlsZENvdW50KTtpZihzLm1hdGNoVHlwZShvPT10Lmxlbmd0aC0xP24udHlwZTp0W28rMV0pKXJldHVybiByLmNvcHkoci5jb250ZW50LmFwcGVuZChhbC5mcm9tKExwKG4sdCxvKzEpKSkpfX1mdW5jdGlvbiBKcCh0LGUpe2lmKDA9PWUpcmV0dXJuIHQ7dmFyIG49dC5jb250ZW50LnJlcGxhY2VDaGlsZCh0LmNoaWxkQ291bnQtMSxKcCh0Lmxhc3RDaGlsZCxlLTEpKSxyPXQuY29udGVudE1hdGNoQXQodC5jaGlsZENvdW50KS5maWxsQmVmb3JlKGFsLmVtcHR5LCEwKTtyZXR1cm4gdC5jb3B5KG4uYXBwZW5kKHIpKX1mdW5jdGlvbiBXcCh0LGUsbixyLG8saSl7dmFyIHM9ZTwwP3QuZmlyc3RDaGlsZDp0Lmxhc3RDaGlsZCxhPXMuY29udGVudDtyZXR1cm4gbzxyLTEmJihhPVdwKGEsZSxuLHIsbysxLGkpKSxvPj1uJiYoYT1lPDA/cy5jb250ZW50TWF0Y2hBdCgwKS5maWxsQmVmb3JlKGEsdC5jaGlsZENvdW50PjF8fGk8PW8pLmFwcGVuZChhKTphLmFwcGVuZChzLmNvbnRlbnRNYXRjaEF0KHMuY2hpbGRDb3VudCkuZmlsbEJlZm9yZShhbC5lbXB0eSwhMCkpKSx0LnJlcGxhY2VDaGlsZChlPDA/MDp0LmNoaWxkQ291bnQtMSxzLmNvcHkoYSkpfWZ1bmN0aW9uIEhwKHQsZSxuKXtyZXR1cm4gZTx0Lm9wZW5TdGFydCYmKHQ9bmV3IGRsKFdwKHQuY29udGVudCwtMSxlLHQub3BlblN0YXJ0LDAsdC5vcGVuRW5kKSxlLHQub3BlbkVuZCkpLG48dC5vcGVuRW5kJiYodD1uZXcgZGwoV3AodC5jb250ZW50LDEsbix0Lm9wZW5FbmQsMCwwKSx0Lm9wZW5TdGFydCxuKSksdH12YXIgS3A9e3RoZWFkOlsidGFibGUiXSx0Ym9keTpbInRhYmxlIl0sdGZvb3Q6WyJ0YWJsZSJdLGNhcHRpb246WyJ0YWJsZSJdLGNvbGdyb3VwOlsidGFibGUiXSxjb2w6WyJ0YWJsZSIsImNvbGdyb3VwIl0sdHI6WyJ0YWJsZSIsInRib2R5Il0sdGQ6WyJ0YWJsZSIsInRib2R5IiwidHIiXSx0aDpbInRhYmxlIiwidGJvZHkiLCJ0ciJdfSxVcD1udWxsO2Z1bmN0aW9uIEdwKCl7cmV0dXJuIFVwfHwoVXA9ZG9jdW1lbnQuaW1wbGVtZW50YXRpb24uY3JlYXRlSFRNTERvY3VtZW50KCJ0aXRsZSIpKX1mdW5jdGlvbiBYcCh0KXt2YXIgZT0vKFxzKjxtZXRhIFtePl0qPikqLy5leGVjKHQpO2UmJih0PXQuc2xpY2UoZVswXS5sZW5ndGgpKTt2YXIgbixyPUdwKCkuY3JlYXRlRWxlbWVudCgiZGl2Iiksbz0vKD86PG1ldGEgW14+XSo+KSo8KFthLXpdW14+XHNdKykvaS5leGVjKHQpLGk9MDsobj1vJiZLcFtvWzFdLnRvTG93ZXJDYXNlKCldKSYmKHQ9bi5tYXAoKGZ1bmN0aW9uKHQpe3JldHVybiI8Iit0KyI+In0pKS5qb2luKCIiKSt0K24ubWFwKChmdW5jdGlvbih0KXtyZXR1cm4iPC8iK3QrIj4ifSkpLnJldmVyc2UoKS5qb2luKCIiKSxpPW4ubGVuZ3RoKSxyLmlubmVySFRNTD10O2Zvcih2YXIgcz0wO3M8aTtzKyspcj1yLmZpcnN0Q2hpbGQ7cmV0dXJuIHJ9ZnVuY3Rpb24gWXAodCxlKXtpZighdC5zaXplKXJldHVybiB0O3ZhciBuLHI9dC5jb250ZW50LmZpcnN0Q2hpbGQudHlwZS5zY2hlbWE7dHJ5e249SlNPTi5wYXJzZShlKX1jYXRjaCh1KXtyZXR1cm4gdH1mb3IodmFyIG89dC5jb250ZW50LGk9dC5vcGVuU3RhcnQscz10Lm9wZW5FbmQsYT1uLmxlbmd0aC0yO2E+PTA7YS09Mil7dmFyIGM9ci5ub2Rlc1tuW2FdXTtpZighY3x8Yy5oYXNSZXF1aXJlZEF0dHJzKCkpYnJlYWs7bz1hbC5mcm9tKGMuY3JlYXRlKG5bYSsxXSxvKSksaSsrLHMrK31yZXR1cm4gbmV3IGRsKG8saSxzKX12YXIgWnA9e2NoaWxkTGlzdDohMCxjaGFyYWN0ZXJEYXRhOiEwLGNoYXJhY3RlckRhdGFPbGRWYWx1ZTohMCxhdHRyaWJ1dGVzOiEwLGF0dHJpYnV0ZU9sZFZhbHVlOiEwLHN1YnRyZWU6ITB9LFFwPURoLmllJiZEaC5pZV92ZXJzaW9uPD0xMSx0ZD1mdW5jdGlvbigpe3RoaXMuYW5jaG9yTm9kZT10aGlzLmFuY2hvck9mZnNldD10aGlzLmZvY3VzTm9kZT10aGlzLmZvY3VzT2Zmc2V0PW51bGx9O3RkLnByb3RvdHlwZS5zZXQ9ZnVuY3Rpb24odCl7dGhpcy5hbmNob3JOb2RlPXQuYW5jaG9yTm9kZSx0aGlzLmFuY2hvck9mZnNldD10LmFuY2hvck9mZnNldCx0aGlzLmZvY3VzTm9kZT10LmZvY3VzTm9kZSx0aGlzLmZvY3VzT2Zmc2V0PXQuZm9jdXNPZmZzZXR9LHRkLnByb3RvdHlwZS5lcT1mdW5jdGlvbih0KXtyZXR1cm4gdC5hbmNob3JOb2RlPT10aGlzLmFuY2hvck5vZGUmJnQuYW5jaG9yT2Zmc2V0PT10aGlzLmFuY2hvck9mZnNldCYmdC5mb2N1c05vZGU9PXRoaXMuZm9jdXNOb2RlJiZ0LmZvY3VzT2Zmc2V0PT10aGlzLmZvY3VzT2Zmc2V0fTt2YXIgZWQ9ZnVuY3Rpb24odCxlKXt2YXIgbj10aGlzO3RoaXMudmlldz10LHRoaXMuaGFuZGxlRE9NQ2hhbmdlPWUsdGhpcy5xdWV1ZT1bXSx0aGlzLmZsdXNoaW5nU29vbj0tMSx0aGlzLm9ic2VydmVyPXdpbmRvdy5NdXRhdGlvbk9ic2VydmVyJiZuZXcgd2luZG93Lk11dGF0aW9uT2JzZXJ2ZXIoKGZ1bmN0aW9uKHQpe2Zvcih2YXIgZT0wO2U8dC5sZW5ndGg7ZSsrKW4ucXVldWUucHVzaCh0W2VdKTtEaC5pZSYmRGguaWVfdmVyc2lvbjw9MTEmJnQuc29tZSgoZnVuY3Rpb24odCl7cmV0dXJuImNoaWxkTGlzdCI9PXQudHlwZSYmdC5yZW1vdmVkTm9kZXMubGVuZ3RofHwiY2hhcmFjdGVyRGF0YSI9PXQudHlwZSYmdC5vbGRWYWx1ZS5sZW5ndGg+dC50YXJnZXQubm9kZVZhbHVlLmxlbmd0aH0pKT9uLmZsdXNoU29vbigpOm4uZmx1c2goKX0pKSx0aGlzLmN1cnJlbnRTZWxlY3Rpb249bmV3IHRkLFFwJiYodGhpcy5vbkNoYXJEYXRhPWZ1bmN0aW9uKHQpe24ucXVldWUucHVzaCh7dGFyZ2V0OnQudGFyZ2V0LHR5cGU6ImNoYXJhY3RlckRhdGEiLG9sZFZhbHVlOnQucHJldlZhbHVlfSksbi5mbHVzaFNvb24oKX0pLHRoaXMub25TZWxlY3Rpb25DaGFuZ2U9dGhpcy5vblNlbGVjdGlvbkNoYW5nZS5iaW5kKHRoaXMpLHRoaXMuc3VwcHJlc3NpbmdTZWxlY3Rpb25VcGRhdGVzPSExfTtlZC5wcm90b3R5cGUuZmx1c2hTb29uPWZ1bmN0aW9uKCl7dmFyIHQ9dGhpczt0aGlzLmZsdXNoaW5nU29vbjwwJiYodGhpcy5mbHVzaGluZ1Nvb249d2luZG93LnNldFRpbWVvdXQoKGZ1bmN0aW9uKCl7dC5mbHVzaGluZ1Nvb249LTEsdC5mbHVzaCgpfSksMjApKX0sZWQucHJvdG90eXBlLmZvcmNlRmx1c2g9ZnVuY3Rpb24oKXt0aGlzLmZsdXNoaW5nU29vbj4tMSYmKHdpbmRvdy5jbGVhclRpbWVvdXQodGhpcy5mbHVzaGluZ1Nvb24pLHRoaXMuZmx1c2hpbmdTb29uPS0xLHRoaXMuZmx1c2goKSl9LGVkLnByb3RvdHlwZS5zdGFydD1mdW5jdGlvbigpe3RoaXMub2JzZXJ2ZXImJnRoaXMub2JzZXJ2ZXIub2JzZXJ2ZSh0aGlzLnZpZXcuZG9tLFpwKSxRcCYmdGhpcy52aWV3LmRvbS5hZGRFdmVudExpc3RlbmVyKCJET01DaGFyYWN0ZXJEYXRhTW9kaWZpZWQiLHRoaXMub25DaGFyRGF0YSksdGhpcy5jb25uZWN0U2VsZWN0aW9uKCl9LGVkLnByb3RvdHlwZS5zdG9wPWZ1bmN0aW9uKCl7dmFyIHQ9dGhpcztpZih0aGlzLm9ic2VydmVyKXt2YXIgZT10aGlzLm9ic2VydmVyLnRha2VSZWNvcmRzKCk7aWYoZS5sZW5ndGgpe2Zvcih2YXIgbj0wO248ZS5sZW5ndGg7bisrKXRoaXMucXVldWUucHVzaChlW25dKTt3aW5kb3cuc2V0VGltZW91dCgoZnVuY3Rpb24oKXtyZXR1cm4gdC5mbHVzaCgpfSksMjApfXRoaXMub2JzZXJ2ZXIuZGlzY29ubmVjdCgpfVFwJiZ0aGlzLnZpZXcuZG9tLnJlbW92ZUV2ZW50TGlzdGVuZXIoIkRPTUNoYXJhY3RlckRhdGFNb2RpZmllZCIsdGhpcy5vbkNoYXJEYXRhKSx0aGlzLmRpc2Nvbm5lY3RTZWxlY3Rpb24oKX0sZWQucHJvdG90eXBlLmNvbm5lY3RTZWxlY3Rpb249ZnVuY3Rpb24oKXt0aGlzLnZpZXcuZG9tLm93bmVyRG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigic2VsZWN0aW9uY2hhbmdlIix0aGlzLm9uU2VsZWN0aW9uQ2hhbmdlKX0sZWQucHJvdG90eXBlLmRpc2Nvbm5lY3RTZWxlY3Rpb249ZnVuY3Rpb24oKXt0aGlzLnZpZXcuZG9tLm93bmVyRG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcigic2VsZWN0aW9uY2hhbmdlIix0aGlzLm9uU2VsZWN0aW9uQ2hhbmdlKX0sZWQucHJvdG90eXBlLnN1cHByZXNzU2VsZWN0aW9uVXBkYXRlcz1mdW5jdGlvbigpe3ZhciB0PXRoaXM7dGhpcy5zdXBwcmVzc2luZ1NlbGVjdGlvblVwZGF0ZXM9ITAsc2V0VGltZW91dCgoZnVuY3Rpb24oKXtyZXR1cm4gdC5zdXBwcmVzc2luZ1NlbGVjdGlvblVwZGF0ZXM9ITF9KSw1MCl9LGVkLnByb3RvdHlwZS5vblNlbGVjdGlvbkNoYW5nZT1mdW5jdGlvbigpe2lmKFRwKHRoaXMudmlldykpe2lmKHRoaXMuc3VwcHJlc3NpbmdTZWxlY3Rpb25VcGRhdGVzKXJldHVybiB5cCh0aGlzLnZpZXcpO2lmKERoLmllJiZEaC5pZV92ZXJzaW9uPD0xMSYmIXRoaXMudmlldy5zdGF0ZS5zZWxlY3Rpb24uZW1wdHkpe3ZhciB0PXRoaXMudmlldy5yb290LmdldFNlbGVjdGlvbigpO2lmKHQuZm9jdXNOb2RlJiYkaCh0LmZvY3VzTm9kZSx0LmZvY3VzT2Zmc2V0LHQuYW5jaG9yTm9kZSx0LmFuY2hvck9mZnNldCkpcmV0dXJuIHRoaXMuZmx1c2hTb29uKCl9dGhpcy5mbHVzaCgpfX0sZWQucHJvdG90eXBlLnNldEN1clNlbGVjdGlvbj1mdW5jdGlvbigpe3RoaXMuY3VycmVudFNlbGVjdGlvbi5zZXQodGhpcy52aWV3LnJvb3QuZ2V0U2VsZWN0aW9uKCkpfSxlZC5wcm90b3R5cGUuaWdub3JlU2VsZWN0aW9uQ2hhbmdlPWZ1bmN0aW9uKHQpe2lmKDA9PXQucmFuZ2VDb3VudClyZXR1cm4hMDt2YXIgZT10LmdldFJhbmdlQXQoMCkuY29tbW9uQW5jZXN0b3JDb250YWluZXIsbj10aGlzLnZpZXcuZG9jVmlldy5uZWFyZXN0RGVzYyhlKTtyZXR1cm4gbiYmbi5pZ25vcmVNdXRhdGlvbih7dHlwZToic2VsZWN0aW9uIix0YXJnZXQ6Mz09ZS5ub2RlVHlwZT9lLnBhcmVudE5vZGU6ZX0pPyh0aGlzLnNldEN1clNlbGVjdGlvbigpLCEwKTp2b2lkIDB9LGVkLnByb3RvdHlwZS5mbHVzaD1mdW5jdGlvbigpe2lmKHRoaXMudmlldy5kb2NWaWV3JiYhKHRoaXMuZmx1c2hpbmdTb29uPi0xKSl7dmFyIHQ9dGhpcy5vYnNlcnZlcj90aGlzLm9ic2VydmVyLnRha2VSZWNvcmRzKCk6W107dGhpcy5xdWV1ZS5sZW5ndGgmJih0PXRoaXMucXVldWUuY29uY2F0KHQpLHRoaXMucXVldWUubGVuZ3RoPTApO3ZhciBlPXRoaXMudmlldy5yb290LmdldFNlbGVjdGlvbigpLG49IXRoaXMuc3VwcHJlc3NpbmdTZWxlY3Rpb25VcGRhdGVzJiYhdGhpcy5jdXJyZW50U2VsZWN0aW9uLmVxKGUpJiZBcCh0aGlzLnZpZXcpJiYhdGhpcy5pZ25vcmVTZWxlY3Rpb25DaGFuZ2UoZSkscj0tMSxvPS0xLGk9ITEscz1bXTtpZih0aGlzLnZpZXcuZWRpdGFibGUpZm9yKHZhciBhPTA7YTx0Lmxlbmd0aDthKyspe3ZhciBjPXRoaXMucmVnaXN0ZXJNdXRhdGlvbih0W2FdLHMpO2MmJihyPXI8MD9jLmZyb206TWF0aC5taW4oYy5mcm9tLHIpLG89bzwwP2MudG86TWF0aC5tYXgoYy50byxvKSxjLnR5cGVPdmVyJiYoaT0hMCkpfWlmKERoLmdlY2tvJiZzLmxlbmd0aD4xKXt2YXIgdT1zLmZpbHRlcigoZnVuY3Rpb24odCl7cmV0dXJuIkJSIj09dC5ub2RlTmFtZX0pKTtpZigyPT11Lmxlbmd0aCl7dmFyIGw9dVswXSxoPXVbMV07bC5wYXJlbnROb2RlJiZsLnBhcmVudE5vZGUucGFyZW50Tm9kZT09aC5wYXJlbnROb2RlP2gucmVtb3ZlKCk6bC5yZW1vdmUoKX19KHI+LTF8fG4pJiYocj4tMSYmKHRoaXMudmlldy5kb2NWaWV3Lm1hcmtEaXJ0eShyLG8pLHJkKHRoaXMudmlldykpLHRoaXMuaGFuZGxlRE9NQ2hhbmdlKHIsbyxpLHMpLHRoaXMudmlldy5kb2NWaWV3LmRpcnR5P3RoaXMudmlldy51cGRhdGVTdGF0ZSh0aGlzLnZpZXcuc3RhdGUpOnRoaXMuY3VycmVudFNlbGVjdGlvbi5lcShlKXx8eXAodGhpcy52aWV3KSl9fSxlZC5wcm90b3R5cGUucmVnaXN0ZXJNdXRhdGlvbj1mdW5jdGlvbih0LGUpe2lmKGUuaW5kZXhPZih0LnRhcmdldCk+LTEpcmV0dXJuIG51bGw7dmFyIG49dGhpcy52aWV3LmRvY1ZpZXcubmVhcmVzdERlc2ModC50YXJnZXQpO2lmKCJhdHRyaWJ1dGVzIj09dC50eXBlJiYobj09dGhpcy52aWV3LmRvY1ZpZXd8fCJjb250ZW50ZWRpdGFibGUiPT10LmF0dHJpYnV0ZU5hbWV8fCJzdHlsZSI9PXQuYXR0cmlidXRlTmFtZSYmIXQub2xkVmFsdWUmJiF0LnRhcmdldC5nZXRBdHRyaWJ1dGUoInN0eWxlIikpKXJldHVybiBudWxsO2lmKCFufHxuLmlnbm9yZU11dGF0aW9uKHQpKXJldHVybiBudWxsO2lmKCJjaGlsZExpc3QiPT10LnR5cGUpe3ZhciByPXQucHJldmlvdXNTaWJsaW5nLG89dC5uZXh0U2libGluZztpZihEaC5pZSYmRGguaWVfdmVyc2lvbjw9MTEmJnQuYWRkZWROb2Rlcy5sZW5ndGgpZm9yKHZhciBpPTA7aTx0LmFkZGVkTm9kZXMubGVuZ3RoO2krKyl7dmFyIHM9dC5hZGRlZE5vZGVzW2ldLGE9cy5wcmV2aW91c1NpYmxpbmcsYz1zLm5leHRTaWJsaW5nOyghYXx8QXJyYXkucHJvdG90eXBlLmluZGV4T2YuY2FsbCh0LmFkZGVkTm9kZXMsYSk8MCkmJihyPWEpLCghY3x8QXJyYXkucHJvdG90eXBlLmluZGV4T2YuY2FsbCh0LmFkZGVkTm9kZXMsYyk8MCkmJihvPWMpfWZvcih2YXIgdT1yJiZyLnBhcmVudE5vZGU9PXQudGFyZ2V0P19oKHIpKzE6MCxsPW4ubG9jYWxQb3NGcm9tRE9NKHQudGFyZ2V0LHUsLTEpLGg9byYmby5wYXJlbnROb2RlPT10LnRhcmdldD9faChvKTp0LnRhcmdldC5jaGlsZE5vZGVzLmxlbmd0aCxmPTA7Zjx0LmFkZGVkTm9kZXMubGVuZ3RoO2YrKyllLnB1c2godC5hZGRlZE5vZGVzW2ZdKTt2YXIgcD1uLmxvY2FsUG9zRnJvbURPTSh0LnRhcmdldCxoLDEpO3JldHVybntmcm9tOmwsdG86cH19cmV0dXJuImF0dHJpYnV0ZXMiPT10LnR5cGU/e2Zyb206bi5wb3NBdFN0YXJ0LW4uYm9yZGVyLHRvOm4ucG9zQXRFbmQrbi5ib3JkZXJ9Ontmcm9tOm4ucG9zQXRTdGFydCx0bzpuLnBvc0F0RW5kLHR5cGVPdmVyOnQudGFyZ2V0Lm5vZGVWYWx1ZT09dC5vbGRWYWx1ZX19O3ZhciBuZD0hMTtmdW5jdGlvbiByZCh0KXtuZHx8KG5kPSEwLCJub3JtYWwiPT1nZXRDb21wdXRlZFN0eWxlKHQuZG9tKS53aGl0ZVNwYWNlJiZjb25zb2xlWyJ3YXJuIl0oIlByb3NlTWlycm9yIGV4cGVjdHMgdGhlIENTUyB3aGl0ZS1zcGFjZSBwcm9wZXJ0eSB0byBiZSBzZXQsIHByZWZlcmFibHkgdG8gJ3ByZS13cmFwJy4gSXQgaXMgcmVjb21tZW5kZWQgdG8gbG9hZCBzdHlsZS9wcm9zZW1pcnJvci5jc3MgZnJvbSB0aGUgcHJvc2VtaXJyb3ItdmlldyBwYWNrYWdlLiIpKX12YXIgb2Q9e30saWQ9e307ZnVuY3Rpb24gc2QodCl7dC5zaGlmdEtleT0hMSx0Lm1vdXNlRG93bj1udWxsLHQubGFzdEtleUNvZGU9bnVsbCx0Lmxhc3RLZXlDb2RlVGltZT0wLHQubGFzdENsaWNrPXt0aW1lOjAseDowLHk6MCx0eXBlOiIifSx0Lmxhc3RTZWxlY3Rpb25PcmlnaW49bnVsbCx0Lmxhc3RTZWxlY3Rpb25UaW1lPTAsdC5sYXN0SU9TRW50ZXI9MCx0LmNvbXBvc2luZz0hMSx0LmNvbXBvc2luZ1RpbWVvdXQ9bnVsbCx0LmNvbXBvc2l0aW9uTm9kZXM9W10sdC5jb21wb3NpdGlvbkVuZGVkQXQ9LTJlOCx0LmRvbU9ic2VydmVyPW5ldyBlZCh0LChmdW5jdGlvbihlLG4scixvKXtyZXR1cm4genAodCxlLG4scixvKX0pKSx0LmRvbU9ic2VydmVyLnN0YXJ0KCksdC5kb21DaGFuZ2VDb3VudD0wLHQuZXZlbnRIYW5kbGVycz1PYmplY3QuY3JlYXRlKG51bGwpO3ZhciBlPWZ1bmN0aW9uKGUpe3ZhciBuPW9kW2VdO3QuZG9tLmFkZEV2ZW50TGlzdGVuZXIoZSx0LmV2ZW50SGFuZGxlcnNbZV09ZnVuY3Rpb24oZSl7IWhkKHQsZSl8fGxkKHQsZSl8fCF0LmVkaXRhYmxlJiZlLnR5cGUgaW4gaWR8fG4odCxlKX0pfTtmb3IodmFyIG4gaW4gb2QpZShuKTtEaC5zYWZhcmkmJnQuZG9tLmFkZEV2ZW50TGlzdGVuZXIoImlucHV0IiwoZnVuY3Rpb24oKXtyZXR1cm4gbnVsbH0pKSx1ZCh0KX1mdW5jdGlvbiBhZCh0LGUpe3QubGFzdFNlbGVjdGlvbk9yaWdpbj1lLHQubGFzdFNlbGVjdGlvblRpbWU9RGF0ZS5ub3coKX1mdW5jdGlvbiBjZCh0KXtmb3IodmFyIGUgaW4gdC5kb21PYnNlcnZlci5zdG9wKCksdC5ldmVudEhhbmRsZXJzKXQuZG9tLnJlbW92ZUV2ZW50TGlzdGVuZXIoZSx0LmV2ZW50SGFuZGxlcnNbZV0pO2NsZWFyVGltZW91dCh0LmNvbXBvc2luZ1RpbWVvdXQpfWZ1bmN0aW9uIHVkKHQpe3Quc29tZVByb3AoImhhbmRsZURPTUV2ZW50cyIsKGZ1bmN0aW9uKGUpe2Zvcih2YXIgbiBpbiBlKXQuZXZlbnRIYW5kbGVyc1tuXXx8dC5kb20uYWRkRXZlbnRMaXN0ZW5lcihuLHQuZXZlbnRIYW5kbGVyc1tuXT1mdW5jdGlvbihlKXtyZXR1cm4gbGQodCxlKX0pfSkpfWZ1bmN0aW9uIGxkKHQsZSl7cmV0dXJuIHQuc29tZVByb3AoImhhbmRsZURPTUV2ZW50cyIsKGZ1bmN0aW9uKG4pe3ZhciByPW5bZS50eXBlXTtyZXR1cm4hIXImJihyKHQsZSl8fGUuZGVmYXVsdFByZXZlbnRlZCl9KSl9ZnVuY3Rpb24gaGQodCxlKXtpZighZS5idWJibGVzKXJldHVybiEwO2lmKGUuZGVmYXVsdFByZXZlbnRlZClyZXR1cm4hMTtmb3IodmFyIG49ZS50YXJnZXQ7biE9dC5kb207bj1uLnBhcmVudE5vZGUpaWYoIW58fDExPT1uLm5vZGVUeXBlfHxuLnBtVmlld0Rlc2MmJm4ucG1WaWV3RGVzYy5zdG9wRXZlbnQoZSkpcmV0dXJuITE7cmV0dXJuITB9ZnVuY3Rpb24gZmQodCxlKXtsZCh0LGUpfHwhb2RbZS50eXBlXXx8IXQuZWRpdGFibGUmJmUudHlwZSBpbiBpZHx8b2RbZS50eXBlXSh0LGUpfWZ1bmN0aW9uIHBkKHQpe3JldHVybntsZWZ0OnQuY2xpZW50WCx0b3A6dC5jbGllbnRZfX1mdW5jdGlvbiBkZCh0LGUpe3ZhciBuPWUueC10LmNsaWVudFgscj1lLnktdC5jbGllbnRZO3JldHVybiBuKm4rcipyPDEwMH1mdW5jdGlvbiB2ZCh0LGUsbixyLG8pe2lmKC0xPT1yKXJldHVybiExO2Zvcih2YXIgaT10LnN0YXRlLmRvYy5yZXNvbHZlKHIpLHM9ZnVuY3Rpb24ocil7aWYodC5zb21lUHJvcChlLChmdW5jdGlvbihlKXtyZXR1cm4gcj5pLmRlcHRoP2UodCxuLGkubm9kZUFmdGVyLGkuYmVmb3JlKHIpLG8sITApOmUodCxuLGkubm9kZShyKSxpLmJlZm9yZShyKSxvLCExKX0pKSlyZXR1cm57djohMH19LGE9aS5kZXB0aCsxO2E+MDthLS0pe3ZhciBjPXMoYSk7aWYoYylyZXR1cm4gYy52fXJldHVybiExfWZ1bmN0aW9uIG1kKHQsZSxuKXt0LmZvY3VzZWR8fHQuZm9jdXMoKTt2YXIgcj10LnN0YXRlLnRyLnNldFNlbGVjdGlvbihlKTsicG9pbnRlciI9PW4mJnIuc2V0TWV0YSgicG9pbnRlciIsITApLHQuZGlzcGF0Y2gocil9ZnVuY3Rpb24gZ2QodCxlKXtpZigtMT09ZSlyZXR1cm4hMTt2YXIgbj10LnN0YXRlLmRvYy5yZXNvbHZlKGUpLHI9bi5ub2RlQWZ0ZXI7cmV0dXJuISEociYmci5pc0F0b20mJmNbIk5vZGVTZWxlY3Rpb24iXS5pc1NlbGVjdGFibGUocikpJiYobWQodCxuZXcgY1siTm9kZVNlbGVjdGlvbiJdKG4pLCJwb2ludGVyIiksITApfWZ1bmN0aW9uIHlkKHQsZSl7aWYoLTE9PWUpcmV0dXJuITE7dmFyIG4scixvPXQuc3RhdGUuc2VsZWN0aW9uO28gaW5zdGFuY2VvZiBjWyJOb2RlU2VsZWN0aW9uIl0mJihuPW8ubm9kZSk7Zm9yKHZhciBpPXQuc3RhdGUuZG9jLnJlc29sdmUoZSkscz1pLmRlcHRoKzE7cz4wO3MtLSl7dmFyIGE9cz5pLmRlcHRoP2kubm9kZUFmdGVyOmkubm9kZShzKTtpZihjWyJOb2RlU2VsZWN0aW9uIl0uaXNTZWxlY3RhYmxlKGEpKXtyPW4mJm8uJGZyb20uZGVwdGg+MCYmcz49by4kZnJvbS5kZXB0aCYmaS5iZWZvcmUoby4kZnJvbS5kZXB0aCsxKT09by4kZnJvbS5wb3M/aS5iZWZvcmUoby4kZnJvbS5kZXB0aCk6aS5iZWZvcmUocyk7YnJlYWt9fXJldHVybiBudWxsIT1yJiYobWQodCxjWyJOb2RlU2VsZWN0aW9uIl0uY3JlYXRlKHQuc3RhdGUuZG9jLHIpLCJwb2ludGVyIiksITApfWZ1bmN0aW9uIHdkKHQsZSxuLHIsbyl7cmV0dXJuIHZkKHQsImhhbmRsZUNsaWNrT24iLGUsbixyKXx8dC5zb21lUHJvcCgiaGFuZGxlQ2xpY2siLChmdW5jdGlvbihuKXtyZXR1cm4gbih0LGUscil9KSl8fChvP3lkKHQsbik6Z2QodCxuKSl9ZnVuY3Rpb24gYmQodCxlLG4scil7cmV0dXJuIHZkKHQsImhhbmRsZURvdWJsZUNsaWNrT24iLGUsbixyKXx8dC5zb21lUHJvcCgiaGFuZGxlRG91YmxlQ2xpY2siLChmdW5jdGlvbihuKXtyZXR1cm4gbih0LGUscil9KSl9ZnVuY3Rpb24geGQodCxlLG4scil7cmV0dXJuIHZkKHQsImhhbmRsZVRyaXBsZUNsaWNrT24iLGUsbixyKXx8dC5zb21lUHJvcCgiaGFuZGxlVHJpcGxlQ2xpY2siLChmdW5jdGlvbihuKXtyZXR1cm4gbih0LGUscil9KSl8fGtkKHQsbil9ZnVuY3Rpb24ga2QodCxlKXt2YXIgbj10LnN0YXRlLmRvYztpZigtMT09ZSlyZXR1cm4hIW4uaW5saW5lQ29udGVudCYmKG1kKHQsY1siVGV4dFNlbGVjdGlvbiJdLmNyZWF0ZShuLDAsbi5jb250ZW50LnNpemUpLCJwb2ludGVyIiksITApO2Zvcih2YXIgcj1uLnJlc29sdmUoZSksbz1yLmRlcHRoKzE7bz4wO28tLSl7dmFyIGk9bz5yLmRlcHRoP3Iubm9kZUFmdGVyOnIubm9kZShvKSxzPXIuYmVmb3JlKG8pO2lmKGkuaW5saW5lQ29udGVudCltZCh0LGNbIlRleHRTZWxlY3Rpb24iXS5jcmVhdGUobixzKzEscysxK2kuY29udGVudC5zaXplKSwicG9pbnRlciIpO2Vsc2V7aWYoIWNbIk5vZGVTZWxlY3Rpb24iXS5pc1NlbGVjdGFibGUoaSkpY29udGludWU7bWQodCxjWyJOb2RlU2VsZWN0aW9uIl0uY3JlYXRlKG4scyksInBvaW50ZXIiKX1yZXR1cm4hMH19ZnVuY3Rpb24gU2QodCl7cmV0dXJuIEFkKHQpfWlkLmtleWRvd249ZnVuY3Rpb24odCxlKXtpZih0LnNoaWZ0S2V5PTE2PT1lLmtleUNvZGV8fGUuc2hpZnRLZXksIU1kKHQsZSkpaWYodC5kb21PYnNlcnZlci5mb3JjZUZsdXNoKCksdC5sYXN0S2V5Q29kZT1lLmtleUNvZGUsdC5sYXN0S2V5Q29kZVRpbWU9RGF0ZS5ub3coKSwhRGguaW9zfHwxMyE9ZS5rZXlDb2RlfHxlLmN0cmxLZXl8fGUuYWx0S2V5fHxlLm1ldGFLZXkpdC5zb21lUHJvcCgiaGFuZGxlS2V5RG93biIsKGZ1bmN0aW9uKG4pe3JldHVybiBuKHQsZSl9KSl8fG1wKHQsZSk/ZS5wcmV2ZW50RGVmYXVsdCgpOmFkKHQsImtleSIpO2Vsc2V7dmFyIG49RGF0ZS5ub3coKTt0Lmxhc3RJT1NFbnRlcj1uLHNldFRpbWVvdXQoKGZ1bmN0aW9uKCl7dC5sYXN0SU9TRW50ZXI9PW4mJih0LnNvbWVQcm9wKCJoYW5kbGVLZXlEb3duIiwoZnVuY3Rpb24oZSl7cmV0dXJuIGUodCxLaCgxMywiRW50ZXIiKSl9KSksdC5sYXN0SU9TRW50ZXI9MCl9KSw1MCl9fSxpZC5rZXl1cD1mdW5jdGlvbih0LGUpezE2PT1lLmtleUNvZGUmJih0LnNoaWZ0S2V5PSExKX0saWQua2V5cHJlc3M9ZnVuY3Rpb24odCxlKXtpZighKE1kKHQsZSl8fCFlLmNoYXJDb2RlfHxlLmN0cmxLZXkmJiFlLmFsdEtleXx8RGgubWFjJiZlLm1ldGFLZXkpKWlmKHQuc29tZVByb3AoImhhbmRsZUtleVByZXNzIiwoZnVuY3Rpb24obil7cmV0dXJuIG4odCxlKX0pKSllLnByZXZlbnREZWZhdWx0KCk7ZWxzZXt2YXIgbj10LnN0YXRlLnNlbGVjdGlvbjtpZighKG4gaW5zdGFuY2VvZiBjWyJUZXh0U2VsZWN0aW9uIl0pfHwhbi4kZnJvbS5zYW1lUGFyZW50KG4uJHRvKSl7dmFyIHI9U3RyaW5nLmZyb21DaGFyQ29kZShlLmNoYXJDb2RlKTt0LnNvbWVQcm9wKCJoYW5kbGVUZXh0SW5wdXQiLChmdW5jdGlvbihlKXtyZXR1cm4gZSh0LG4uJGZyb20ucG9zLG4uJHRvLnBvcyxyKX0pKXx8dC5kaXNwYXRjaCh0LnN0YXRlLnRyLmluc2VydFRleHQocikuc2Nyb2xsSW50b1ZpZXcoKSksZS5wcmV2ZW50RGVmYXVsdCgpfX19O3ZhciBDZD1EaC5tYWM/Im1ldGFLZXkiOiJjdHJsS2V5IjtvZC5tb3VzZWRvd249ZnVuY3Rpb24odCxlKXt0LnNoaWZ0S2V5PWUuc2hpZnRLZXk7dmFyIG49U2QodCkscj1EYXRlLm5vdygpLG89InNpbmdsZUNsaWNrIjtyLXQubGFzdENsaWNrLnRpbWU8NTAwJiZkZChlLHQubGFzdENsaWNrKSYmIWVbQ2RdJiYoInNpbmdsZUNsaWNrIj09dC5sYXN0Q2xpY2sudHlwZT9vPSJkb3VibGVDbGljayI6ImRvdWJsZUNsaWNrIj09dC5sYXN0Q2xpY2sudHlwZSYmKG89InRyaXBsZUNsaWNrIikpLHQubGFzdENsaWNrPXt0aW1lOnIseDplLmNsaWVudFgseTplLmNsaWVudFksdHlwZTpvfTt2YXIgaT10LnBvc0F0Q29vcmRzKHBkKGUpKTtpJiYoInNpbmdsZUNsaWNrIj09bz90Lm1vdXNlRG93bj1uZXcgT2QodCxpLGUsbik6KCJkb3VibGVDbGljayI9PW8/YmQ6eGQpKHQsaS5wb3MsaS5pbnNpZGUsZSk/ZS5wcmV2ZW50RGVmYXVsdCgpOmFkKHQsInBvaW50ZXIiKSl9O3ZhciBPZD1mdW5jdGlvbih0LGUsbixyKXt2YXIgbyxpLHM9dGhpcztpZih0aGlzLnZpZXc9dCx0aGlzLnN0YXJ0RG9jPXQuc3RhdGUuZG9jLHRoaXMucG9zPWUsdGhpcy5ldmVudD1uLHRoaXMuZmx1c2hlZD1yLHRoaXMuc2VsZWN0Tm9kZT1uW0NkXSx0aGlzLmFsbG93RGVmYXVsdD1uLnNoaWZ0S2V5LGUuaW5zaWRlPi0xKW89dC5zdGF0ZS5kb2Mubm9kZUF0KGUuaW5zaWRlKSxpPWUuaW5zaWRlO2Vsc2V7dmFyIGE9dC5zdGF0ZS5kb2MucmVzb2x2ZShlLnBvcyk7bz1hLnBhcmVudCxpPWEuZGVwdGg/YS5iZWZvcmUoKTowfXRoaXMubWlnaHREcmFnPW51bGw7dmFyIHU9cj9udWxsOm4udGFyZ2V0LGw9dT90LmRvY1ZpZXcubmVhcmVzdERlc2ModSwhMCk6bnVsbDt0aGlzLnRhcmdldD1sP2wuZG9tOm51bGwsKG8udHlwZS5zcGVjLmRyYWdnYWJsZSYmITEhPT1vLnR5cGUuc3BlYy5zZWxlY3RhYmxlfHx0LnN0YXRlLnNlbGVjdGlvbiBpbnN0YW5jZW9mIGNbIk5vZGVTZWxlY3Rpb24iXSYmaT09dC5zdGF0ZS5zZWxlY3Rpb24uZnJvbSkmJih0aGlzLm1pZ2h0RHJhZz17bm9kZTpvLHBvczppLGFkZEF0dHI6dGhpcy50YXJnZXQmJiF0aGlzLnRhcmdldC5kcmFnZ2FibGUsc2V0VW5lZGl0YWJsZTp0aGlzLnRhcmdldCYmRGguZ2Vja28mJiF0aGlzLnRhcmdldC5oYXNBdHRyaWJ1dGUoImNvbnRlbnRFZGl0YWJsZSIpfSksdGhpcy50YXJnZXQmJnRoaXMubWlnaHREcmFnJiYodGhpcy5taWdodERyYWcuYWRkQXR0cnx8dGhpcy5taWdodERyYWcuc2V0VW5lZGl0YWJsZSkmJih0aGlzLnZpZXcuZG9tT2JzZXJ2ZXIuc3RvcCgpLHRoaXMubWlnaHREcmFnLmFkZEF0dHImJih0aGlzLnRhcmdldC5kcmFnZ2FibGU9ITApLHRoaXMubWlnaHREcmFnLnNldFVuZWRpdGFibGUmJnNldFRpbWVvdXQoKGZ1bmN0aW9uKCl7cmV0dXJuIHMudGFyZ2V0LnNldEF0dHJpYnV0ZSgiY29udGVudEVkaXRhYmxlIiwiZmFsc2UiKX0pLDIwKSx0aGlzLnZpZXcuZG9tT2JzZXJ2ZXIuc3RhcnQoKSksdC5yb290LmFkZEV2ZW50TGlzdGVuZXIoIm1vdXNldXAiLHRoaXMudXA9dGhpcy51cC5iaW5kKHRoaXMpKSx0LnJvb3QuYWRkRXZlbnRMaXN0ZW5lcigibW91c2Vtb3ZlIix0aGlzLm1vdmU9dGhpcy5tb3ZlLmJpbmQodGhpcykpLGFkKHQsInBvaW50ZXIiKX07ZnVuY3Rpb24gTWQodCxlKXtyZXR1cm4hIXQuY29tcG9zaW5nfHwhIShEaC5zYWZhcmkmJk1hdGguYWJzKGUudGltZVN0YW1wLXQuY29tcG9zaXRpb25FbmRlZEF0KTw1MDApJiYodC5jb21wb3NpdGlvbkVuZGVkQXQ9LTJlOCwhMCl9T2QucHJvdG90eXBlLmRvbmU9ZnVuY3Rpb24oKXt0aGlzLnZpZXcucm9vdC5yZW1vdmVFdmVudExpc3RlbmVyKCJtb3VzZXVwIix0aGlzLnVwKSx0aGlzLnZpZXcucm9vdC5yZW1vdmVFdmVudExpc3RlbmVyKCJtb3VzZW1vdmUiLHRoaXMubW92ZSksdGhpcy5taWdodERyYWcmJnRoaXMudGFyZ2V0JiYodGhpcy52aWV3LmRvbU9ic2VydmVyLnN0b3AoKSx0aGlzLm1pZ2h0RHJhZy5hZGRBdHRyJiZ0aGlzLnRhcmdldC5yZW1vdmVBdHRyaWJ1dGUoImRyYWdnYWJsZSIpLHRoaXMubWlnaHREcmFnLnNldFVuZWRpdGFibGUmJnRoaXMudGFyZ2V0LnJlbW92ZUF0dHJpYnV0ZSgiY29udGVudEVkaXRhYmxlIiksdGhpcy52aWV3LmRvbU9ic2VydmVyLnN0YXJ0KCkpLHRoaXMudmlldy5tb3VzZURvd249bnVsbH0sT2QucHJvdG90eXBlLnVwPWZ1bmN0aW9uKHQpe2lmKHRoaXMuZG9uZSgpLHRoaXMudmlldy5kb20uY29udGFpbnMoMz09dC50YXJnZXQubm9kZVR5cGU/dC50YXJnZXQucGFyZW50Tm9kZTp0LnRhcmdldCkpe3ZhciBlPXRoaXMucG9zO3RoaXMudmlldy5zdGF0ZS5kb2MhPXRoaXMuc3RhcnREb2MmJihlPXRoaXMudmlldy5wb3NBdENvb3JkcyhwZCh0KSkpLHRoaXMuYWxsb3dEZWZhdWx0fHwhZT9hZCh0aGlzLnZpZXcsInBvaW50ZXIiKTp3ZCh0aGlzLnZpZXcsZS5wb3MsZS5pbnNpZGUsdCx0aGlzLnNlbGVjdE5vZGUpP3QucHJldmVudERlZmF1bHQoKTohdGhpcy5mbHVzaGVkJiYoIURoLmNocm9tZXx8dGhpcy52aWV3LnN0YXRlLnNlbGVjdGlvbiBpbnN0YW5jZW9mIGNbIlRleHRTZWxlY3Rpb24iXXx8ZS5wb3MhPXRoaXMudmlldy5zdGF0ZS5zZWxlY3Rpb24uZnJvbSYmZS5wb3MhPXRoaXMudmlldy5zdGF0ZS5zZWxlY3Rpb24udG8pP2FkKHRoaXMudmlldywicG9pbnRlciIpOihtZCh0aGlzLnZpZXcsY1siU2VsZWN0aW9uIl0ubmVhcih0aGlzLnZpZXcuc3RhdGUuZG9jLnJlc29sdmUoZS5wb3MpKSwicG9pbnRlciIpLHQucHJldmVudERlZmF1bHQoKSl9fSxPZC5wcm90b3R5cGUubW92ZT1mdW5jdGlvbih0KXshdGhpcy5hbGxvd0RlZmF1bHQmJihNYXRoLmFicyh0aGlzLmV2ZW50LngtdC5jbGllbnRYKT40fHxNYXRoLmFicyh0aGlzLmV2ZW50LnktdC5jbGllbnRZKT40KSYmKHRoaXMuYWxsb3dEZWZhdWx0PSEwKSxhZCh0aGlzLnZpZXcsInBvaW50ZXIiKX0sb2QudG91Y2hkb3duPWZ1bmN0aW9uKHQpe1NkKHQpLGFkKHQsInBvaW50ZXIiKX0sb2QuY29udGV4dG1lbnU9ZnVuY3Rpb24odCl7cmV0dXJuIFNkKHQpfTt2YXIgTmQ9RGguYW5kcm9pZD81ZTM6LTE7ZnVuY3Rpb24gVGQodCxlKXtjbGVhclRpbWVvdXQodC5jb21wb3NpbmdUaW1lb3V0KSxlPi0xJiYodC5jb21wb3NpbmdUaW1lb3V0PXNldFRpbWVvdXQoKGZ1bmN0aW9uKCl7cmV0dXJuIEFkKHQpfSksZSkpfWZ1bmN0aW9uIEFkKHQsZSl7dC5kb21PYnNlcnZlci5mb3JjZUZsdXNoKCksdC5jb21wb3Npbmc9ITE7d2hpbGUodC5jb21wb3NpdGlvbk5vZGVzLmxlbmd0aD4wKXQuY29tcG9zaXRpb25Ob2Rlcy5wb3AoKS5tYXJrUGFyZW50c0RpcnR5KCk7aWYoZXx8dC5kb2NWaWV3LmRpcnR5KXt2YXIgbj1ncCh0KTtyZXR1cm4gbi5lcSh0LnN0YXRlLnNlbGVjdGlvbik/dC51cGRhdGVTdGF0ZSh0LnN0YXRlKTp0LmRpc3BhdGNoKHQuc3RhdGUudHIuc2V0U2VsZWN0aW9uKG4pKSwhMH1yZXR1cm4hMX1mdW5jdGlvbiBFZCh0LGUpe3ZhciBuPXQuZG9tLm93bmVyRG9jdW1lbnQscj1uLmJvZHkuYXBwZW5kQ2hpbGQobi5jcmVhdGVFbGVtZW50KCJkaXYiKSk7ci5hcHBlbmRDaGlsZChlKSxyLnN0eWxlLmNzc1RleHQ9InBvc2l0aW9uOiBmaXhlZDsgbGVmdDogLTEwMDAwcHg7IHRvcDogMTBweCI7dmFyIG89Z2V0U2VsZWN0aW9uKCksaT1uLmNyZWF0ZVJhbmdlKCk7aS5zZWxlY3ROb2RlQ29udGVudHMoZSksdC5kb20uYmx1cigpLG8ucmVtb3ZlQWxsUmFuZ2VzKCksby5hZGRSYW5nZShpKSxzZXRUaW1lb3V0KChmdW5jdGlvbigpe24uYm9keS5yZW1vdmVDaGlsZChyKSx0LmZvY3VzKCl9KSw1MCl9aWQuY29tcG9zaXRpb25zdGFydD1pZC5jb21wb3NpdGlvbnVwZGF0ZT1mdW5jdGlvbih0KXtpZighdC5jb21wb3Npbmcpe3QuZG9tT2JzZXJ2ZXIuZmx1c2goKTt2YXIgZT10LnN0YXRlLG49ZS5zZWxlY3Rpb24uJGZyb207aWYoZS5zZWxlY3Rpb24uZW1wdHkmJihlLnN0b3JlZE1hcmtzfHwhbi50ZXh0T2Zmc2V0JiZuLnBhcmVudE9mZnNldCYmbi5ub2RlQmVmb3JlLm1hcmtzLnNvbWUoKGZ1bmN0aW9uKHQpe3JldHVybiExPT09dC50eXBlLnNwZWMuaW5jbHVzaXZlfSkpKSl0Lm1hcmtDdXJzb3I9dC5zdGF0ZS5zdG9yZWRNYXJrc3x8bi5tYXJrcygpLEFkKHQsITApLHQubWFya0N1cnNvcj1udWxsO2Vsc2UgaWYoQWQodCksRGguZ2Vja28mJmUuc2VsZWN0aW9uLmVtcHR5JiZuLnBhcmVudE9mZnNldCYmIW4udGV4dE9mZnNldCYmbi5ub2RlQmVmb3JlLm1hcmtzLmxlbmd0aClmb3IodmFyIHI9dC5yb290LmdldFNlbGVjdGlvbigpLG89ci5mb2N1c05vZGUsaT1yLmZvY3VzT2Zmc2V0O28mJjE9PW8ubm9kZVR5cGUmJjAhPWk7KXt2YXIgcz1pPDA/by5sYXN0Q2hpbGQ6by5jaGlsZE5vZGVzW2ktMV07aWYoIXMpYnJlYWs7aWYoMz09cy5ub2RlVHlwZSl7ci5jb2xsYXBzZShzLHMubm9kZVZhbHVlLmxlbmd0aCk7YnJlYWt9bz1zLGk9LTF9dC5jb21wb3Npbmc9ITB9VGQodCxOZCl9LGlkLmNvbXBvc2l0aW9uZW5kPWZ1bmN0aW9uKHQsZSl7dC5jb21wb3NpbmcmJih0LmNvbXBvc2luZz0hMSx0LmNvbXBvc2l0aW9uRW5kZWRBdD1lLnRpbWVTdGFtcCxUZCh0LDIwKSl9O3ZhciBEZD1EaC5pZSYmRGguaWVfdmVyc2lvbjwxNXx8RGguaW9zJiZEaC53ZWJraXRfdmVyc2lvbjw2MDQ7ZnVuY3Rpb24gUmQodCl7cmV0dXJuIDA9PXQub3BlblN0YXJ0JiYwPT10Lm9wZW5FbmQmJjE9PXQuY29udGVudC5jaGlsZENvdW50P3QuY29udGVudC5maXJzdENoaWxkOm51bGx9ZnVuY3Rpb24gemQodCxlKXt2YXIgbj10LmRvbS5vd25lckRvY3VtZW50LHI9dC5zaGlmdEtleXx8dC5zdGF0ZS5zZWxlY3Rpb24uJGZyb20ucGFyZW50LnR5cGUuc3BlYy5jb2RlLG89bi5ib2R5LmFwcGVuZENoaWxkKG4uY3JlYXRlRWxlbWVudChyPyJ0ZXh0YXJlYSI6ImRpdiIpKTtyfHwoby5jb250ZW50RWRpdGFibGU9InRydWUiKSxvLnN0eWxlLmNzc1RleHQ9InBvc2l0aW9uOiBmaXhlZDsgbGVmdDogLTEwMDAwcHg7IHRvcDogMTBweCIsby5mb2N1cygpLHNldFRpbWVvdXQoKGZ1bmN0aW9uKCl7dC5mb2N1cygpLG4uYm9keS5yZW1vdmVDaGlsZChvKSxyP1BkKHQsby52YWx1ZSxudWxsLGUpOlBkKHQsby50ZXh0Q29udGVudCxvLmlubmVySFRNTCxlKX0pLDUwKX1mdW5jdGlvbiBQZCh0LGUsbixyKXt2YXIgbz0kcCh0LGUsbix0LnNoaWZ0S2V5LHQuc3RhdGUuc2VsZWN0aW9uLiRmcm9tKTtpZighdC5zb21lUHJvcCgiaGFuZGxlUGFzdGUiLChmdW5jdGlvbihlKXtyZXR1cm4gZSh0LHIsb3x8ZGwuZW1wdHkpfSkpJiZvKXt2YXIgaT1SZChvKSxzPWk/dC5zdGF0ZS50ci5yZXBsYWNlU2VsZWN0aW9uV2l0aChpLHQuc2hpZnRLZXkpOnQuc3RhdGUudHIucmVwbGFjZVNlbGVjdGlvbihvKTt0LmRpc3BhdGNoKHMuc2Nyb2xsSW50b1ZpZXcoKS5zZXRNZXRhKCJwYXN0ZSIsITApLnNldE1ldGEoInVpRXZlbnQiLCJwYXN0ZSIpKX19b2QuY29weT1pZC5jdXQ9ZnVuY3Rpb24odCxlKXt2YXIgbj10LnN0YXRlLnNlbGVjdGlvbixyPSJjdXQiPT1lLnR5cGU7aWYoIW4uZW1wdHkpe3ZhciBvPURkP251bGw6ZS5jbGlwYm9hcmREYXRhLGk9bi5jb250ZW50KCkscz1qcCh0LGkpLGE9cy5kb20sYz1zLnRleHQ7bz8oZS5wcmV2ZW50RGVmYXVsdCgpLG8uY2xlYXJEYXRhKCksby5zZXREYXRhKCJ0ZXh0L2h0bWwiLGEuaW5uZXJIVE1MKSxvLnNldERhdGEoInRleHQvcGxhaW4iLGMpKTpFZCh0LGEpLHImJnQuZGlzcGF0Y2godC5zdGF0ZS50ci5kZWxldGVTZWxlY3Rpb24oKS5zY3JvbGxJbnRvVmlldygpLnNldE1ldGEoInVpRXZlbnQiLCJjdXQiKSl9fSxpZC5wYXN0ZT1mdW5jdGlvbih0LGUpe3ZhciBuPURkP251bGw6ZS5jbGlwYm9hcmREYXRhLHI9biYmbi5nZXREYXRhKCJ0ZXh0L2h0bWwiKSxvPW4mJm4uZ2V0RGF0YSgidGV4dC9wbGFpbiIpO24mJihyfHxvfHxuLmZpbGVzLmxlbmd0aCk/KFBkKHQsbyxyLGUpLGUucHJldmVudERlZmF1bHQoKSk6emQodCxlKX07dmFyIElkPWZ1bmN0aW9uKHQsZSl7dGhpcy5zbGljZT10LHRoaXMubW92ZT1lfSxCZD1EaC5tYWM/ImFsdEtleSI6ImN0cmxLZXkiO2Zvcih2YXIgX2QgaW4gb2QuZHJhZ3N0YXJ0PWZ1bmN0aW9uKHQsZSl7dmFyIG49dC5tb3VzZURvd247aWYobiYmbi5kb25lKCksZS5kYXRhVHJhbnNmZXIpe3ZhciByPXQuc3RhdGUuc2VsZWN0aW9uLG89ci5lbXB0eT9udWxsOnQucG9zQXRDb29yZHMocGQoZSkpO2lmKG8mJm8ucG9zPj1yLmZyb20mJm8ucG9zPD0ociBpbnN0YW5jZW9mIGNbIk5vZGVTZWxlY3Rpb24iXT9yLnRvLTE6ci50bykpO2Vsc2UgaWYobiYmbi5taWdodERyYWcpdC5kaXNwYXRjaCh0LnN0YXRlLnRyLnNldFNlbGVjdGlvbihjWyJOb2RlU2VsZWN0aW9uIl0uY3JlYXRlKHQuc3RhdGUuZG9jLG4ubWlnaHREcmFnLnBvcykpKTtlbHNlIGlmKGUudGFyZ2V0JiYxPT1lLnRhcmdldC5ub2RlVHlwZSl7dmFyIGk9dC5kb2NWaWV3Lm5lYXJlc3REZXNjKGUudGFyZ2V0LCEwKTtpZighaXx8IWkubm9kZS50eXBlLnNwZWMuZHJhZ2dhYmxlfHxpPT10LmRvY1ZpZXcpcmV0dXJuO3QuZGlzcGF0Y2godC5zdGF0ZS50ci5zZXRTZWxlY3Rpb24oY1siTm9kZVNlbGVjdGlvbiJdLmNyZWF0ZSh0LnN0YXRlLmRvYyxpLnBvc0JlZm9yZSkpKX12YXIgcz10LnN0YXRlLnNlbGVjdGlvbi5jb250ZW50KCksYT1qcCh0LHMpLHU9YS5kb20sbD1hLnRleHQ7ZS5kYXRhVHJhbnNmZXIuY2xlYXJEYXRhKCksZS5kYXRhVHJhbnNmZXIuc2V0RGF0YShEZD8iVGV4dCI6InRleHQvaHRtbCIsdS5pbm5lckhUTUwpLERkfHxlLmRhdGFUcmFuc2Zlci5zZXREYXRhKCJ0ZXh0L3BsYWluIixsKSx0LmRyYWdnaW5nPW5ldyBJZChzLCFlW0JkXSl9fSxvZC5kcmFnZW5kPWZ1bmN0aW9uKHQpe3dpbmRvdy5zZXRUaW1lb3V0KChmdW5jdGlvbigpe3JldHVybiB0LmRyYWdnaW5nPW51bGx9KSw1MCl9LGlkLmRyYWdvdmVyPWlkLmRyYWdlbnRlcj1mdW5jdGlvbih0LGUpe3JldHVybiBlLnByZXZlbnREZWZhdWx0KCl9LGlkLmRyb3A9ZnVuY3Rpb24odCxlKXt2YXIgbj10LmRyYWdnaW5nO2lmKHQuZHJhZ2dpbmc9bnVsbCxlLmRhdGFUcmFuc2Zlcil7dmFyIHI9dC5wb3NBdENvb3JkcyhwZChlKSk7aWYocil7dmFyIG89dC5zdGF0ZS5kb2MucmVzb2x2ZShyLnBvcyk7aWYobyl7dmFyIGk9biYmbi5zbGljZXx8JHAodCxlLmRhdGFUcmFuc2Zlci5nZXREYXRhKERkPyJUZXh0IjoidGV4dC9wbGFpbiIpLERkP251bGw6ZS5kYXRhVHJhbnNmZXIuZ2V0RGF0YSgidGV4dC9odG1sIiksITEsbyk7aWYodC5zb21lUHJvcCgiaGFuZGxlRHJvcCIsKGZ1bmN0aW9uKHIpe3JldHVybiByKHQsZSxpfHxkbC5lbXB0eSxuJiZuLm1vdmUpfSkpKWUucHJldmVudERlZmF1bHQoKTtlbHNlIGlmKGkpe2UucHJldmVudERlZmF1bHQoKTt2YXIgcz1pP09iamVjdChCdFsiaCJdKSh0LnN0YXRlLmRvYyxvLnBvcyxpKTpvLnBvcztudWxsPT1zJiYocz1vLnBvcyk7dmFyIGE9dC5zdGF0ZS50cjtuJiZuLm1vdmUmJmEuZGVsZXRlU2VsZWN0aW9uKCk7dmFyIHU9YS5tYXBwaW5nLm1hcChzKSxsPTA9PWkub3BlblN0YXJ0JiYwPT1pLm9wZW5FbmQmJjE9PWkuY29udGVudC5jaGlsZENvdW50LGg9YS5kb2M7aWYobD9hLnJlcGxhY2VSYW5nZVdpdGgodSx1LGkuY29udGVudC5maXJzdENoaWxkKTphLnJlcGxhY2VSYW5nZSh1LHUsaSksIWEuZG9jLmVxKGgpKXt2YXIgZj1hLmRvYy5yZXNvbHZlKHUpO2wmJmNbIk5vZGVTZWxlY3Rpb24iXS5pc1NlbGVjdGFibGUoaS5jb250ZW50LmZpcnN0Q2hpbGQpJiZmLm5vZGVBZnRlciYmZi5ub2RlQWZ0ZXIuc2FtZU1hcmt1cChpLmNvbnRlbnQuZmlyc3RDaGlsZCk/YS5zZXRTZWxlY3Rpb24obmV3IGNbIk5vZGVTZWxlY3Rpb24iXShmKSk6YS5zZXRTZWxlY3Rpb24oTnAodCxmLGEuZG9jLnJlc29sdmUoYS5tYXBwaW5nLm1hcChzKSkpKSx0LmZvY3VzKCksdC5kaXNwYXRjaChhLnNldE1ldGEoInVpRXZlbnQiLCJkcm9wIikpfX19fX19LG9kLmZvY3VzPWZ1bmN0aW9uKHQpe3QuZm9jdXNlZHx8KHQuZG9tT2JzZXJ2ZXIuc3RvcCgpLHQuZG9tLmNsYXNzTGlzdC5hZGQoIlByb3NlTWlycm9yLWZvY3VzZWQiKSx0LmRvbU9ic2VydmVyLnN0YXJ0KCksdC5mb2N1c2VkPSEwLHNldFRpbWVvdXQoKGZ1bmN0aW9uKCl7dC5kb2NWaWV3JiZ0Lmhhc0ZvY3VzKCkmJiF0LmRvbU9ic2VydmVyLmN1cnJlbnRTZWxlY3Rpb24uZXEodC5yb290LmdldFNlbGVjdGlvbigpKSYmeXAodCl9KSwyMCkpfSxvZC5ibHVyPWZ1bmN0aW9uKHQpe3QuZm9jdXNlZCYmKHQuZG9tT2JzZXJ2ZXIuc3RvcCgpLHQuZG9tLmNsYXNzTGlzdC5yZW1vdmUoIlByb3NlTWlycm9yLWZvY3VzZWQiKSx0LmRvbU9ic2VydmVyLnN0YXJ0KCksdC5kb21PYnNlcnZlci5jdXJyZW50U2VsZWN0aW9uLnNldCh7fSksdC5mb2N1c2VkPSExKX0sb2QuYmVmb3JlaW5wdXQ9ZnVuY3Rpb24odCxlKXtpZihEaC5jaHJvbWUmJkRoLmFuZHJvaWQmJiJkZWxldGVDb250ZW50QmFja3dhcmQiPT1lLmlucHV0VHlwZSl7dmFyIG49dC5kb21DaGFuZ2VDb3VudDtzZXRUaW1lb3V0KChmdW5jdGlvbigpe2lmKHQuZG9tQ2hhbmdlQ291bnQ9PW4mJih0LmRvbS5ibHVyKCksdC5mb2N1cygpLCF0LnNvbWVQcm9wKCJoYW5kbGVLZXlEb3duIiwoZnVuY3Rpb24oZSl7cmV0dXJuIGUodCxLaCg4LCJCYWNrc3BhY2UiKSl9KSkpKXt2YXIgZT10LnN0YXRlLnNlbGVjdGlvbixyPWUuJGN1cnNvcjtyJiZyLnBvcz4wJiZ0LmRpc3BhdGNoKHQuc3RhdGUudHIuZGVsZXRlKHIucG9zLTEsci5wb3MpLnNjcm9sbEludG9WaWV3KCkpfX0pLDUwKX19LGlkKW9kW19kXT1pZFtfZF07ZnVuY3Rpb24gRmQodCxlKXtpZih0PT1lKXJldHVybiEwO2Zvcih2YXIgbiBpbiB0KWlmKHRbbl0hPT1lW25dKXJldHVybiExO2Zvcih2YXIgciBpbiBlKWlmKCEociBpbiB0KSlyZXR1cm4hMTtyZXR1cm4hMH12YXIgamQ9ZnVuY3Rpb24odCxlKXt0aGlzLnNwZWM9ZXx8V2QsdGhpcy5zaWRlPXRoaXMuc3BlYy5zaWRlfHwwLHRoaXMudG9ET009dH07amQucHJvdG90eXBlLm1hcD1mdW5jdGlvbih0LGUsbixyKXt2YXIgbz10Lm1hcFJlc3VsdChlLmZyb20rcix0aGlzLnNpZGU8MD8tMToxKSxpPW8ucG9zLHM9by5kZWxldGVkO3JldHVybiBzP251bGw6bmV3IExkKGktbixpLW4sdGhpcyl9LGpkLnByb3RvdHlwZS52YWxpZD1mdW5jdGlvbigpe3JldHVybiEwfSxqZC5wcm90b3R5cGUuZXE9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXM9PXR8fHQgaW5zdGFuY2VvZiBqZCYmKHRoaXMuc3BlYy5rZXkmJnRoaXMuc3BlYy5rZXk9PXQuc3BlYy5rZXl8fHRoaXMudG9ET009PXQudG9ET00mJkZkKHRoaXMuc3BlYyx0LnNwZWMpKX07dmFyICRkPWZ1bmN0aW9uKHQsZSl7dGhpcy5zcGVjPWV8fFdkLHRoaXMuYXR0cnM9dH07JGQucHJvdG90eXBlLm1hcD1mdW5jdGlvbih0LGUsbixyKXt2YXIgbz10Lm1hcChlLmZyb20rcix0aGlzLnNwZWMuaW5jbHVzaXZlU3RhcnQ/LTE6MSktbixpPXQubWFwKGUudG8rcix0aGlzLnNwZWMuaW5jbHVzaXZlRW5kPzE6LTEpLW47cmV0dXJuIG8+PWk/bnVsbDpuZXcgTGQobyxpLHRoaXMpfSwkZC5wcm90b3R5cGUudmFsaWQ9ZnVuY3Rpb24odCxlKXtyZXR1cm4gZS5mcm9tPGUudG99LCRkLnByb3RvdHlwZS5lcT1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcz09dHx8dCBpbnN0YW5jZW9mICRkJiZGZCh0aGlzLmF0dHJzLHQuYXR0cnMpJiZGZCh0aGlzLnNwZWMsdC5zcGVjKX0sJGQuaXM9ZnVuY3Rpb24odCl7cmV0dXJuIHQudHlwZSBpbnN0YW5jZW9mICRkfTt2YXIgVmQ9ZnVuY3Rpb24odCxlKXt0aGlzLnNwZWM9ZXx8V2QsdGhpcy5hdHRycz10fTtWZC5wcm90b3R5cGUubWFwPWZ1bmN0aW9uKHQsZSxuLHIpe3ZhciBvPXQubWFwUmVzdWx0KGUuZnJvbStyLDEpO2lmKG8uZGVsZXRlZClyZXR1cm4gbnVsbDt2YXIgaT10Lm1hcFJlc3VsdChlLnRvK3IsLTEpO3JldHVybiBpLmRlbGV0ZWR8fGkucG9zPD1vLnBvcz9udWxsOm5ldyBMZChvLnBvcy1uLGkucG9zLW4sdGhpcyl9LFZkLnByb3RvdHlwZS52YWxpZD1mdW5jdGlvbih0LGUpe3ZhciBuPXQuY29udGVudC5maW5kSW5kZXgoZS5mcm9tKSxyPW4uaW5kZXgsbz1uLm9mZnNldDtyZXR1cm4gbz09ZS5mcm9tJiZvK3QuY2hpbGQocikubm9kZVNpemU9PWUudG99LFZkLnByb3RvdHlwZS5lcT1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcz09dHx8dCBpbnN0YW5jZW9mIFZkJiZGZCh0aGlzLmF0dHJzLHQuYXR0cnMpJiZGZCh0aGlzLnNwZWMsdC5zcGVjKX07dmFyIExkPWZ1bmN0aW9uKHQsZSxuKXt0aGlzLmZyb209dCx0aGlzLnRvPWUsdGhpcy50eXBlPW59LHFkPXtzcGVjOntjb25maWd1cmFibGU6ITB9fTtMZC5wcm90b3R5cGUuY29weT1mdW5jdGlvbih0LGUpe3JldHVybiBuZXcgTGQodCxlLHRoaXMudHlwZSl9LExkLnByb3RvdHlwZS5lcT1mdW5jdGlvbih0LGUpe3JldHVybiB2b2lkIDA9PT1lJiYoZT0wKSx0aGlzLnR5cGUuZXEodC50eXBlKSYmdGhpcy5mcm9tK2U9PXQuZnJvbSYmdGhpcy50bytlPT10LnRvfSxMZC5wcm90b3R5cGUubWFwPWZ1bmN0aW9uKHQsZSxuKXtyZXR1cm4gdGhpcy50eXBlLm1hcCh0LHRoaXMsZSxuKX0sTGQud2lkZ2V0PWZ1bmN0aW9uKHQsZSxuKXtyZXR1cm4gbmV3IExkKHQsdCxuZXcgamQoZSxuKSl9LExkLmlubGluZT1mdW5jdGlvbih0LGUsbixyKXtyZXR1cm4gbmV3IExkKHQsZSxuZXcgJGQobixyKSl9LExkLm5vZGU9ZnVuY3Rpb24odCxlLG4scil7cmV0dXJuIG5ldyBMZCh0LGUsbmV3IFZkKG4scikpfSxxZC5zcGVjLmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLnR5cGUuc3BlY30sT2JqZWN0LmRlZmluZVByb3BlcnRpZXMoTGQucHJvdG90eXBlLHFkKTt2YXIgSmQ9W10sV2Q9e30sSGQ9ZnVuY3Rpb24odCxlKXt0aGlzLmxvY2FsPXQmJnQubGVuZ3RoP3Q6SmQsdGhpcy5jaGlsZHJlbj1lJiZlLmxlbmd0aD9lOkpkfTtIZC5jcmVhdGU9ZnVuY3Rpb24odCxlKXtyZXR1cm4gZS5sZW5ndGg/dHYoZSx0LDAsV2QpOktkfSxIZC5wcm90b3R5cGUuZmluZD1mdW5jdGlvbih0LGUsbil7dmFyIHI9W107cmV0dXJuIHRoaXMuZmluZElubmVyKG51bGw9PXQ/MDp0LG51bGw9PWU/MWU5OmUsciwwLG4pLHJ9LEhkLnByb3RvdHlwZS5maW5kSW5uZXI9ZnVuY3Rpb24odCxlLG4scixvKXtmb3IodmFyIGk9MDtpPHRoaXMubG9jYWwubGVuZ3RoO2krKyl7dmFyIHM9dGhpcy5sb2NhbFtpXTtzLmZyb208PWUmJnMudG8+PXQmJighb3x8byhzLnNwZWMpKSYmbi5wdXNoKHMuY29weShzLmZyb20rcixzLnRvK3IpKX1mb3IodmFyIGE9MDthPHRoaXMuY2hpbGRyZW4ubGVuZ3RoO2ErPTMpaWYodGhpcy5jaGlsZHJlblthXTxlJiZ0aGlzLmNoaWxkcmVuW2ErMV0+dCl7dmFyIGM9dGhpcy5jaGlsZHJlblthXSsxO3RoaXMuY2hpbGRyZW5bYSsyXS5maW5kSW5uZXIodC1jLGUtYyxuLHIrYyxvKX19LEhkLnByb3RvdHlwZS5tYXA9ZnVuY3Rpb24odCxlLG4pe3JldHVybiB0aGlzPT1LZHx8MD09dC5tYXBzLmxlbmd0aD90aGlzOnRoaXMubWFwSW5uZXIodCxlLDAsMCxufHxXZCl9LEhkLnByb3RvdHlwZS5tYXBJbm5lcj1mdW5jdGlvbih0LGUsbixyLG8pe2Zvcih2YXIgaSxzPTA7czx0aGlzLmxvY2FsLmxlbmd0aDtzKyspe3ZhciBhPXRoaXMubG9jYWxbc10ubWFwKHQsbixyKTthJiZhLnR5cGUudmFsaWQoZSxhKT8oaXx8KGk9W10pKS5wdXNoKGEpOm8ub25SZW1vdmUmJm8ub25SZW1vdmUodGhpcy5sb2NhbFtzXS5zcGVjKX1yZXR1cm4gdGhpcy5jaGlsZHJlbi5sZW5ndGg/R2QodGhpcy5jaGlsZHJlbixpLHQsZSxuLHIsbyk6aT9uZXcgSGQoaS5zb3J0KGV2KSk6S2R9LEhkLnByb3RvdHlwZS5hZGQ9ZnVuY3Rpb24odCxlKXtyZXR1cm4gZS5sZW5ndGg/dGhpcz09S2Q/SGQuY3JlYXRlKHQsZSk6dGhpcy5hZGRJbm5lcih0LGUsMCk6dGhpc30sSGQucHJvdG90eXBlLmFkZElubmVyPWZ1bmN0aW9uKHQsZSxuKXt2YXIgcixvPXRoaXMsaT0wO3QuZm9yRWFjaCgoZnVuY3Rpb24odCxzKXt2YXIgYSxjPXMrbjtpZihhPVpkKGUsdCxjKSl7cnx8KHI9by5jaGlsZHJlbi5zbGljZSgpKTt3aGlsZShpPHIubGVuZ3RoJiZyW2ldPHMpaSs9MztyW2ldPT1zP3JbaSsyXT1yW2krMl0uYWRkSW5uZXIodCxhLGMrMSk6ci5zcGxpY2UoaSwwLHMscyt0Lm5vZGVTaXplLHR2KGEsdCxjKzEsV2QpKSxpKz0zfX0pKTt2YXIgcz1YZChpP1FkKGUpOmUsLW4pO3JldHVybiBuZXcgSGQocy5sZW5ndGg/dGhpcy5sb2NhbC5jb25jYXQocykuc29ydChldik6dGhpcy5sb2NhbCxyfHx0aGlzLmNoaWxkcmVuKX0sSGQucHJvdG90eXBlLnJlbW92ZT1mdW5jdGlvbih0KXtyZXR1cm4gMD09dC5sZW5ndGh8fHRoaXM9PUtkP3RoaXM6dGhpcy5yZW1vdmVJbm5lcih0LDApfSxIZC5wcm90b3R5cGUucmVtb3ZlSW5uZXI9ZnVuY3Rpb24odCxlKXtmb3IodmFyIG49dGhpcy5jaGlsZHJlbixyPXRoaXMubG9jYWwsbz0wO288bi5sZW5ndGg7bys9Myl7Zm9yKHZhciBpPXZvaWQgMCxzPW5bb10rZSxhPW5bbysxXStlLGM9MCx1PXZvaWQgMDtjPHQubGVuZ3RoO2MrKykodT10W2NdKSYmdS5mcm9tPnMmJnUudG88YSYmKHRbY109bnVsbCwoaXx8KGk9W10pKS5wdXNoKHUpKTtpZihpKXtuPT10aGlzLmNoaWxkcmVuJiYobj10aGlzLmNoaWxkcmVuLnNsaWNlKCkpO3ZhciBsPW5bbysyXS5yZW1vdmVJbm5lcihpLHMrMSk7bCE9S2Q/bltvKzJdPWw6KG4uc3BsaWNlKG8sMyksby09Myl9fWlmKHIubGVuZ3RoKWZvcih2YXIgaD0wLGY9dm9pZCAwO2g8dC5sZW5ndGg7aCsrKWlmKGY9dFtoXSlmb3IodmFyIHA9MDtwPHIubGVuZ3RoO3ArKylyW3BdLmVxKGYsZSkmJihyPT10aGlzLmxvY2FsJiYocj10aGlzLmxvY2FsLnNsaWNlKCkpLHIuc3BsaWNlKHAtLSwxKSk7cmV0dXJuIG49PXRoaXMuY2hpbGRyZW4mJnI9PXRoaXMubG9jYWw/dGhpczpyLmxlbmd0aHx8bi5sZW5ndGg/bmV3IEhkKHIsbik6S2R9LEhkLnByb3RvdHlwZS5mb3JDaGlsZD1mdW5jdGlvbih0LGUpe2lmKHRoaXM9PUtkKXJldHVybiB0aGlzO2lmKGUuaXNMZWFmKXJldHVybiBIZC5lbXB0eTtmb3IodmFyIG4scixvPTA7bzx0aGlzLmNoaWxkcmVuLmxlbmd0aDtvKz0zKWlmKHRoaXMuY2hpbGRyZW5bb10+PXQpe3RoaXMuY2hpbGRyZW5bb109PXQmJihuPXRoaXMuY2hpbGRyZW5bbysyXSk7YnJlYWt9Zm9yKHZhciBpPXQrMSxzPWkrZS5jb250ZW50LnNpemUsYT0wO2E8dGhpcy5sb2NhbC5sZW5ndGg7YSsrKXt2YXIgYz10aGlzLmxvY2FsW2FdO2lmKGMuZnJvbTxzJiZjLnRvPmkmJmMudHlwZSBpbnN0YW5jZW9mICRkKXt2YXIgdT1NYXRoLm1heChpLGMuZnJvbSktaSxsPU1hdGgubWluKHMsYy50byktaTt1PGwmJihyfHwocj1bXSkpLnB1c2goYy5jb3B5KHUsbCkpfX1pZihyKXt2YXIgaD1uZXcgSGQoci5zb3J0KGV2KSk7cmV0dXJuIG4/bmV3IFVkKFtoLG5dKTpofXJldHVybiBufHxLZH0sSGQucHJvdG90eXBlLmVxPWZ1bmN0aW9uKHQpe2lmKHRoaXM9PXQpcmV0dXJuITA7aWYoISh0IGluc3RhbmNlb2YgSGQpfHx0aGlzLmxvY2FsLmxlbmd0aCE9dC5sb2NhbC5sZW5ndGh8fHRoaXMuY2hpbGRyZW4ubGVuZ3RoIT10LmNoaWxkcmVuLmxlbmd0aClyZXR1cm4hMTtmb3IodmFyIGU9MDtlPHRoaXMubG9jYWwubGVuZ3RoO2UrKylpZighdGhpcy5sb2NhbFtlXS5lcSh0LmxvY2FsW2VdKSlyZXR1cm4hMTtmb3IodmFyIG49MDtuPHRoaXMuY2hpbGRyZW4ubGVuZ3RoO24rPTMpaWYodGhpcy5jaGlsZHJlbltuXSE9dC5jaGlsZHJlbltuXXx8dGhpcy5jaGlsZHJlbltuKzFdIT10LmNoaWxkcmVuW24rMV18fCF0aGlzLmNoaWxkcmVuW24rMl0uZXEodC5jaGlsZHJlbltuKzJdKSlyZXR1cm4hMTtyZXR1cm4hMH0sSGQucHJvdG90eXBlLmxvY2Fscz1mdW5jdGlvbih0KXtyZXR1cm4gbnYodGhpcy5sb2NhbHNJbm5lcih0KSl9LEhkLnByb3RvdHlwZS5sb2NhbHNJbm5lcj1mdW5jdGlvbih0KXtpZih0aGlzPT1LZClyZXR1cm4gSmQ7aWYodC5pbmxpbmVDb250ZW50fHwhdGhpcy5sb2NhbC5zb21lKCRkLmlzKSlyZXR1cm4gdGhpcy5sb2NhbDtmb3IodmFyIGU9W10sbj0wO248dGhpcy5sb2NhbC5sZW5ndGg7bisrKXRoaXMubG9jYWxbbl0udHlwZSBpbnN0YW5jZW9mICRkfHxlLnB1c2godGhpcy5sb2NhbFtuXSk7cmV0dXJuIGV9O3ZhciBLZD1uZXcgSGQ7SGQuZW1wdHk9S2QsSGQucmVtb3ZlT3ZlcmxhcD1udjt2YXIgVWQ9ZnVuY3Rpb24odCl7dGhpcy5tZW1iZXJzPXR9O2Z1bmN0aW9uIEdkKHQsZSxuLHIsbyxpLHMpe2Zvcih2YXIgYT10LnNsaWNlKCksYz1mdW5jdGlvbih0LGUsbixyKXtmb3IodmFyIHM9MDtzPGEubGVuZ3RoO3MrPTMpe3ZhciBjPWFbcysxXSx1PXZvaWQgMDstMT09Y3x8dD5jK2l8fChlPj1hW3NdK2k/YVtzKzFdPS0xOm4+PW8mJih1PXItbi0oZS10KSkmJihhW3NdKz11LGFbcysxXSs9dSkpfX0sdT0wO3U8bi5tYXBzLmxlbmd0aDt1Kyspbi5tYXBzW3VdLmZvckVhY2goYyk7Zm9yKHZhciBsPSExLGg9MDtoPGEubGVuZ3RoO2grPTMpaWYoLTE9PWFbaCsxXSl7dmFyIGY9bi5tYXAoYVtoXStpKSxwPWYtbztpZihwPDB8fHA+PXIuY29udGVudC5zaXplKXtsPSEwO2NvbnRpbnVlfXZhciBkPW4ubWFwKHRbaCsxXStpLC0xKSx2PWQtbyxtPXIuY29udGVudC5maW5kSW5kZXgocCksZz1tLmluZGV4LHk9bS5vZmZzZXQsdz1yLm1heWJlQ2hpbGQoZyk7aWYodyYmeT09cCYmeSt3Lm5vZGVTaXplPT12KXt2YXIgYj1hW2grMl0ubWFwSW5uZXIobix3LGYrMSxhW2hdK2krMSxzKTtiIT1LZD8oYVtoXT1wLGFbaCsxXT12LGFbaCsyXT1iKTooYVtoKzFdPS0yLGw9ITApfWVsc2UgbD0hMH1pZihsKXt2YXIgeD1ZZChhLHQsZXx8W10sbixvLGkscyksaz10dih4LHIsMCxzKTtlPWsubG9jYWw7Zm9yKHZhciBTPTA7UzxhLmxlbmd0aDtTKz0zKWFbUysxXTwwJiYoYS5zcGxpY2UoUywzKSxTLT0zKTtmb3IodmFyIEM9MCxPPTA7QzxrLmNoaWxkcmVuLmxlbmd0aDtDKz0zKXt2YXIgTT1rLmNoaWxkcmVuW0NdO3doaWxlKE88YS5sZW5ndGgmJmFbT108TSlPKz0zO2Euc3BsaWNlKE8sMCxrLmNoaWxkcmVuW0NdLGsuY2hpbGRyZW5bQysxXSxrLmNoaWxkcmVuW0MrMl0pfX1yZXR1cm4gbmV3IEhkKGUmJmUuc29ydChldiksYSl9ZnVuY3Rpb24gWGQodCxlKXtpZighZXx8IXQubGVuZ3RoKXJldHVybiB0O2Zvcih2YXIgbj1bXSxyPTA7cjx0Lmxlbmd0aDtyKyspe3ZhciBvPXRbcl07bi5wdXNoKG5ldyBMZChvLmZyb20rZSxvLnRvK2Usby50eXBlKSl9cmV0dXJuIG59ZnVuY3Rpb24gWWQodCxlLG4scixvLGkscyl7ZnVuY3Rpb24gYSh0LGUpe2Zvcih2YXIgaT0wO2k8dC5sb2NhbC5sZW5ndGg7aSsrKXt2YXIgYz10LmxvY2FsW2ldLm1hcChyLG8sZSk7Yz9uLnB1c2goYyk6cy5vblJlbW92ZSYmcy5vblJlbW92ZSh0LmxvY2FsW2ldLnNwZWMpfWZvcih2YXIgdT0wO3U8dC5jaGlsZHJlbi5sZW5ndGg7dSs9MylhKHQuY2hpbGRyZW5bdSsyXSx0LmNoaWxkcmVuW3VdK2UrMSl9Zm9yKHZhciBjPTA7Yzx0Lmxlbmd0aDtjKz0zKS0xPT10W2MrMV0mJmEodFtjKzJdLGVbY10raSsxKTtyZXR1cm4gbn1mdW5jdGlvbiBaZCh0LGUsbil7aWYoZS5pc0xlYWYpcmV0dXJuIG51bGw7Zm9yKHZhciByPW4rZS5ub2RlU2l6ZSxvPW51bGwsaT0wLHM9dm9pZCAwO2k8dC5sZW5ndGg7aSsrKShzPXRbaV0pJiZzLmZyb20+biYmcy50bzxyJiYoKG98fChvPVtdKSkucHVzaChzKSx0W2ldPW51bGwpO3JldHVybiBvfWZ1bmN0aW9uIFFkKHQpe2Zvcih2YXIgZT1bXSxuPTA7bjx0Lmxlbmd0aDtuKyspbnVsbCE9dFtuXSYmZS5wdXNoKHRbbl0pO3JldHVybiBlfWZ1bmN0aW9uIHR2KHQsZSxuLHIpe3ZhciBvPVtdLGk9ITE7ZS5mb3JFYWNoKChmdW5jdGlvbihlLHMpe3ZhciBhPVpkKHQsZSxzK24pO2lmKGEpe2k9ITA7dmFyIGM9dHYoYSxlLG4rcysxLHIpO2MhPUtkJiZvLnB1c2gocyxzK2Uubm9kZVNpemUsYyl9fSkpO2Zvcih2YXIgcz1YZChpP1FkKHQpOnQsLW4pLnNvcnQoZXYpLGE9MDthPHMubGVuZ3RoO2ErKylzW2FdLnR5cGUudmFsaWQoZSxzW2FdKXx8KHIub25SZW1vdmUmJnIub25SZW1vdmUoc1thXS5zcGVjKSxzLnNwbGljZShhLS0sMSkpO3JldHVybiBzLmxlbmd0aHx8by5sZW5ndGg/bmV3IEhkKHMsbyk6S2R9ZnVuY3Rpb24gZXYodCxlKXtyZXR1cm4gdC5mcm9tLWUuZnJvbXx8dC50by1lLnRvfWZ1bmN0aW9uIG52KHQpe2Zvcih2YXIgZT10LG49MDtuPGUubGVuZ3RoLTE7bisrKXt2YXIgcj1lW25dO2lmKHIuZnJvbSE9ci50bylmb3IodmFyIG89bisxO288ZS5sZW5ndGg7bysrKXt2YXIgaT1lW29dO2lmKGkuZnJvbSE9ci5mcm9tKXtpLmZyb208ci50byYmKGU9PXQmJihlPXQuc2xpY2UoKSksZVtuXT1yLmNvcHkoci5mcm9tLGkuZnJvbSkscnYoZSxvLHIuY29weShpLmZyb20sci50bykpKTticmVha31pLnRvIT1yLnRvJiYoZT09dCYmKGU9dC5zbGljZSgpKSxlW29dPWkuY29weShpLmZyb20sci50bykscnYoZSxvKzEsaS5jb3B5KHIudG8saS50bykpKX19cmV0dXJuIGV9ZnVuY3Rpb24gcnYodCxlLG4pe3doaWxlKGU8dC5sZW5ndGgmJmV2KG4sdFtlXSk+MCllKys7dC5zcGxpY2UoZSwwLG4pfWZ1bmN0aW9uIG92KHQpe3ZhciBlPVtdO3JldHVybiB0LnNvbWVQcm9wKCJkZWNvcmF0aW9ucyIsKGZ1bmN0aW9uKG4pe3ZhciByPW4odC5zdGF0ZSk7ciYmciE9S2QmJmUucHVzaChyKX0pKSx0LmN1cnNvcldyYXBwZXImJmUucHVzaChIZC5jcmVhdGUodC5zdGF0ZS5kb2MsW3QuY3Vyc29yV3JhcHBlci5kZWNvXSkpLFVkLmZyb20oZSl9VWQucHJvdG90eXBlLmZvckNoaWxkPWZ1bmN0aW9uKHQsZSl7aWYoZS5pc0xlYWYpcmV0dXJuIEhkLmVtcHR5O2Zvcih2YXIgbj1bXSxyPTA7cjx0aGlzLm1lbWJlcnMubGVuZ3RoO3IrKyl7dmFyIG89dGhpcy5tZW1iZXJzW3JdLmZvckNoaWxkKHQsZSk7byE9S2QmJihvIGluc3RhbmNlb2YgVWQ/bj1uLmNvbmNhdChvLm1lbWJlcnMpOm4ucHVzaChvKSl9cmV0dXJuIFVkLmZyb20obil9LFVkLnByb3RvdHlwZS5lcT1mdW5jdGlvbih0KXtpZighKHQgaW5zdGFuY2VvZiBVZCl8fHQubWVtYmVycy5sZW5ndGghPXRoaXMubWVtYmVycy5sZW5ndGgpcmV0dXJuITE7Zm9yKHZhciBlPTA7ZTx0aGlzLm1lbWJlcnMubGVuZ3RoO2UrKylpZighdGhpcy5tZW1iZXJzW2VdLmVxKHQubWVtYmVyc1tlXSkpcmV0dXJuITE7cmV0dXJuITB9LFVkLnByb3RvdHlwZS5sb2NhbHM9ZnVuY3Rpb24odCl7Zm9yKHZhciBlLG49ITAscj0wO3I8dGhpcy5tZW1iZXJzLmxlbmd0aDtyKyspe3ZhciBvPXRoaXMubWVtYmVyc1tyXS5sb2NhbHNJbm5lcih0KTtpZihvLmxlbmd0aClpZihlKXtuJiYoZT1lLnNsaWNlKCksbj0hMSk7Zm9yKHZhciBpPTA7aTxvLmxlbmd0aDtpKyspZS5wdXNoKG9baV0pfWVsc2UgZT1vfXJldHVybiBlP252KG4/ZTplLnNvcnQoZXYpKTpKZH0sVWQuZnJvbT1mdW5jdGlvbih0KXtzd2l0Y2godC5sZW5ndGgpe2Nhc2UgMDpyZXR1cm4gS2Q7Y2FzZSAxOnJldHVybiB0WzBdO2RlZmF1bHQ6cmV0dXJuIG5ldyBVZCh0KX19O3ZhciBpdj1mdW5jdGlvbih0LGUpe3RoaXMuX3Byb3BzPWUsdGhpcy5zdGF0ZT1lLnN0YXRlLHRoaXMuZGlzcGF0Y2g9dGhpcy5kaXNwYXRjaC5iaW5kKHRoaXMpLHRoaXMuX3Jvb3Q9bnVsbCx0aGlzLmZvY3VzZWQ9ITEsdGhpcy5kb209dCYmdC5tb3VudHx8ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2IiksdCYmKHQuYXBwZW5kQ2hpbGQ/dC5hcHBlbmRDaGlsZCh0aGlzLmRvbSk6dC5hcHBseT90KHRoaXMuZG9tKTp0Lm1vdW50JiYodGhpcy5tb3VudGVkPSEwKSksdGhpcy5lZGl0YWJsZT11dih0aGlzKSx0aGlzLm1hcmtDdXJzb3I9bnVsbCx0aGlzLmN1cnNvcldyYXBwZXI9bnVsbCxjdih0aGlzKSx0aGlzLm5vZGVWaWV3cz1odih0aGlzKSx0aGlzLmRvY1ZpZXc9SWYodGhpcy5zdGF0ZS5kb2MsYXYodGhpcyksb3YodGhpcyksdGhpcy5kb20sdGhpcyksdGhpcy5sYXN0U2VsZWN0ZWRWaWV3RGVzYz1udWxsLHRoaXMuZHJhZ2dpbmc9bnVsbCxzZCh0aGlzKSx0aGlzLnBsdWdpblZpZXdzPVtdLHRoaXMudXBkYXRlUGx1Z2luVmlld3MoKX0sc3Y9e3Byb3BzOntjb25maWd1cmFibGU6ITB9LHJvb3Q6e2NvbmZpZ3VyYWJsZTohMH19O2Z1bmN0aW9uIGF2KHQpe3ZhciBlPU9iamVjdC5jcmVhdGUobnVsbCk7cmV0dXJuIGUuY2xhc3M9IlByb3NlTWlycm9yIixlLmNvbnRlbnRlZGl0YWJsZT1TdHJpbmcodC5lZGl0YWJsZSksdC5zb21lUHJvcCgiYXR0cmlidXRlcyIsKGZ1bmN0aW9uKG4pe2lmKCJmdW5jdGlvbiI9PXR5cGVvZiBuJiYobj1uKHQuc3RhdGUpKSxuKWZvcih2YXIgciBpbiBuKSJjbGFzcyI9PXI/ZS5jbGFzcys9IiAiK25bcl06ZVtyXXx8ImNvbnRlbnRlZGl0YWJsZSI9PXJ8fCJub2RlTmFtZSI9PXJ8fChlW3JdPVN0cmluZyhuW3JdKSl9KSksW0xkLm5vZGUoMCx0LnN0YXRlLmRvYy5jb250ZW50LnNpemUsZSldfWZ1bmN0aW9uIGN2KHQpe2lmKHQubWFya0N1cnNvcil7dmFyIGU9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiaW1nIik7ZS5zZXRBdHRyaWJ1dGUoIm1hcmstcGxhY2Vob2xkZXIiLCJ0cnVlIiksdC5jdXJzb3JXcmFwcGVyPXtkb206ZSxkZWNvOkxkLndpZGdldCh0LnN0YXRlLnNlbGVjdGlvbi5oZWFkLGUse3JhdzohMCxtYXJrczp0Lm1hcmtDdXJzb3J9KX19ZWxzZSB0LmN1cnNvcldyYXBwZXI9bnVsbH1mdW5jdGlvbiB1dih0KXtyZXR1cm4hdC5zb21lUHJvcCgiZWRpdGFibGUiLChmdW5jdGlvbihlKXtyZXR1cm4hMT09PWUodC5zdGF0ZSl9KSl9ZnVuY3Rpb24gbHYodCxlKXt2YXIgbj1NYXRoLm1pbih0LiRhbmNob3Iuc2hhcmVkRGVwdGgodC5oZWFkKSxlLiRhbmNob3Iuc2hhcmVkRGVwdGgoZS5oZWFkKSk7cmV0dXJuIHQuJGFuY2hvci5zdGFydChuKSE9ZS4kYW5jaG9yLnN0YXJ0KG4pfWZ1bmN0aW9uIGh2KHQpe3ZhciBlPXt9O3JldHVybiB0LnNvbWVQcm9wKCJub2RlVmlld3MiLChmdW5jdGlvbih0KXtmb3IodmFyIG4gaW4gdClPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoZSxuKXx8KGVbbl09dFtuXSl9KSksZX1mdW5jdGlvbiBmdih0LGUpe3ZhciBuPTAscj0wO2Zvcih2YXIgbyBpbiB0KXtpZih0W29dIT1lW29dKXJldHVybiEwO24rK31mb3IodmFyIGkgaW4gZSlyKys7cmV0dXJuIG4hPXJ9ZnVuY3Rpb24gcHYodCl7dmFyIGU9dC5nZXRTZWxlY3Rpb24oKSxuPWUuZm9jdXNPZmZzZXQscj1lLmZvY3VzTm9kZTtyZXR1cm4gciYmMT09ci5ub2RlVHlwZT9bcixuLHIuY2hpbGROb2Rlc1tuLTFdLHIuY2hpbGROb2Rlc1tuXV06bnVsbH1mdW5jdGlvbiBkdih0LGUpe3ZhciBuPXB2KGUpO2lmKCFufHwzPT1uWzBdLm5vZGVUeXBlKXJldHVybiExO2Zvcih2YXIgcj0wO3I8dC5sZW5ndGg7cisrKWlmKG5bcl0hPXRbcl0pcmV0dXJuITA7cmV0dXJuITF9c3YucHJvcHMuZ2V0PWZ1bmN0aW9uKCl7aWYodGhpcy5fcHJvcHMuc3RhdGUhPXRoaXMuc3RhdGUpe3ZhciB0PXRoaXMuX3Byb3BzO2Zvcih2YXIgZSBpbiB0aGlzLl9wcm9wcz17fSx0KXRoaXMuX3Byb3BzW2VdPXRbZV07dGhpcy5fcHJvcHMuc3RhdGU9dGhpcy5zdGF0ZX1yZXR1cm4gdGhpcy5fcHJvcHN9LGl2LnByb3RvdHlwZS51cGRhdGU9ZnVuY3Rpb24odCl7dC5oYW5kbGVET01FdmVudHMhPXRoaXMuX3Byb3BzLmhhbmRsZURPTUV2ZW50cyYmdWQodGhpcyksdGhpcy5fcHJvcHM9dCx0aGlzLnVwZGF0ZVN0YXRlSW5uZXIodC5zdGF0ZSwhMCl9LGl2LnByb3RvdHlwZS5zZXRQcm9wcz1mdW5jdGlvbih0KXt2YXIgZT17fTtmb3IodmFyIG4gaW4gdGhpcy5fcHJvcHMpZVtuXT10aGlzLl9wcm9wc1tuXTtmb3IodmFyIHIgaW4gZS5zdGF0ZT10aGlzLnN0YXRlLHQpZVtyXT10W3JdO3RoaXMudXBkYXRlKGUpfSxpdi5wcm90b3R5cGUudXBkYXRlU3RhdGU9ZnVuY3Rpb24odCl7dGhpcy51cGRhdGVTdGF0ZUlubmVyKHQsdGhpcy5zdGF0ZS5wbHVnaW5zIT10LnBsdWdpbnMpfSxpdi5wcm90b3R5cGUudXBkYXRlU3RhdGVJbm5lcj1mdW5jdGlvbih0LGUpe3ZhciBuPXRoaXMscj10aGlzLnN0YXRlLG89ITE7aWYodGhpcy5zdGF0ZT10LGUpe3ZhciBpPWh2KHRoaXMpO2Z2KGksdGhpcy5ub2RlVmlld3MpJiYodGhpcy5ub2RlVmlld3M9aSxvPSEwKSx1ZCh0aGlzKX10aGlzLmVkaXRhYmxlPXV2KHRoaXMpLGN2KHRoaXMpO3ZhciBzPW92KHRoaXMpLGE9YXYodGhpcyksdT1lPyJyZXNldCI6dC5zY3JvbGxUb1NlbGVjdGlvbj5yLnNjcm9sbFRvU2VsZWN0aW9uPyJ0byBzZWxlY3Rpb24iOiJwcmVzZXJ2ZSIsbD1vfHwhdGhpcy5kb2NWaWV3Lm1hdGNoZXNOb2RlKHQuZG9jLGEscyksaD1sfHwhdC5zZWxlY3Rpb24uZXEoci5zZWxlY3Rpb24pLGY9InByZXNlcnZlIj09dSYmaCYmbnVsbD09dGhpcy5kb20uc3R5bGUub3ZlcmZsb3dBbmNob3ImJlloKHRoaXMpO2lmKGgpe3RoaXMuZG9tT2JzZXJ2ZXIuc3RvcCgpO3ZhciBwPWwmJihEaC5pZXx8RGguY2hyb21lKSYmIXRoaXMuY29tcG9zaW5nJiYhci5zZWxlY3Rpb24uZW1wdHkmJiF0LnNlbGVjdGlvbi5lbXB0eSYmbHYoci5zZWxlY3Rpb24sdC5zZWxlY3Rpb24pO2lmKGwpe3ZhciBkPURoLmNocm9tZSYmcHYodGhpcy5yb290KTshbyYmdGhpcy5kb2NWaWV3LnVwZGF0ZSh0LmRvYyxhLHMsdGhpcyl8fCh0aGlzLmRvY1ZpZXcudXBkYXRlT3V0ZXJEZWNvKFtdKSx0aGlzLmRvY1ZpZXcuZGVzdHJveSgpLHRoaXMuZG9jVmlldz1JZih0LmRvYyxhLHMsdGhpcy5kb20sdGhpcykpLGQmJmR2KGQsdGhpcy5yb290KSYmKHA9ITApfXB8fCEodGhpcy5tb3VzZURvd24mJnRoaXMuZG9tT2JzZXJ2ZXIuY3VycmVudFNlbGVjdGlvbi5lcSh0aGlzLnJvb3QuZ2V0U2VsZWN0aW9uKCkpJiZFcCh0aGlzKSk/eXAodGhpcyxwKTooT3AodGhpcyx0LnNlbGVjdGlvbiksdGhpcy5kb21PYnNlcnZlci5zZXRDdXJTZWxlY3Rpb24oKSksdGhpcy5kb21PYnNlcnZlci5zdGFydCgpfWlmKHRoaXMudXBkYXRlUGx1Z2luVmlld3MociksInJlc2V0Ij09dSl0aGlzLmRvbS5zY3JvbGxUb3A9MDtlbHNlIGlmKCJ0byBzZWxlY3Rpb24iPT11KXt2YXIgdj10aGlzLnJvb3QuZ2V0U2VsZWN0aW9uKCkuZm9jdXNOb2RlO3RoaXMuc29tZVByb3AoImhhbmRsZVNjcm9sbFRvU2VsZWN0aW9uIiwoZnVuY3Rpb24odCl7cmV0dXJuIHQobil9KSl8fCh0LnNlbGVjdGlvbiBpbnN0YW5jZW9mIGNbIk5vZGVTZWxlY3Rpb24iXT9YaCh0aGlzLHRoaXMuZG9jVmlldy5kb21BZnRlclBvcyh0LnNlbGVjdGlvbi5mcm9tKS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKSx2KTpYaCh0aGlzLHRoaXMuY29vcmRzQXRQb3ModC5zZWxlY3Rpb24uaGVhZCksdikpfWVsc2UgZiYmUWgoZil9LGl2LnByb3RvdHlwZS5kZXN0cm95UGx1Z2luVmlld3M9ZnVuY3Rpb24oKXt2YXIgdDt3aGlsZSh0PXRoaXMucGx1Z2luVmlld3MucG9wKCkpdC5kZXN0cm95JiZ0LmRlc3Ryb3koKX0saXYucHJvdG90eXBlLnVwZGF0ZVBsdWdpblZpZXdzPWZ1bmN0aW9uKHQpe2lmKHQmJnQucGx1Z2lucz09dGhpcy5zdGF0ZS5wbHVnaW5zKWZvcih2YXIgZT0wO2U8dGhpcy5wbHVnaW5WaWV3cy5sZW5ndGg7ZSsrKXt2YXIgbj10aGlzLnBsdWdpblZpZXdzW2VdO24udXBkYXRlJiZuLnVwZGF0ZSh0aGlzLHQpfWVsc2V7dGhpcy5kZXN0cm95UGx1Z2luVmlld3MoKTtmb3IodmFyIHI9MDtyPHRoaXMuc3RhdGUucGx1Z2lucy5sZW5ndGg7cisrKXt2YXIgbz10aGlzLnN0YXRlLnBsdWdpbnNbcl07by5zcGVjLnZpZXcmJnRoaXMucGx1Z2luVmlld3MucHVzaChvLnNwZWMudmlldyh0aGlzKSl9fX0saXYucHJvdG90eXBlLnNvbWVQcm9wPWZ1bmN0aW9uKHQsZSl7dmFyIG4scj10aGlzLl9wcm9wcyYmdGhpcy5fcHJvcHNbdF07aWYobnVsbCE9ciYmKG49ZT9lKHIpOnIpKXJldHVybiBuO3ZhciBvPXRoaXMuc3RhdGUucGx1Z2lucztpZihvKWZvcih2YXIgaT0wO2k8by5sZW5ndGg7aSsrKXt2YXIgcz1vW2ldLnByb3BzW3RdO2lmKG51bGwhPXMmJihuPWU/ZShzKTpzKSlyZXR1cm4gbn19LGl2LnByb3RvdHlwZS5oYXNGb2N1cz1mdW5jdGlvbigpe3JldHVybiB0aGlzLnJvb3QuYWN0aXZlRWxlbWVudD09dGhpcy5kb219LGl2LnByb3RvdHlwZS5mb2N1cz1mdW5jdGlvbigpe3RoaXMuZG9tT2JzZXJ2ZXIuc3RvcCgpLHRoaXMuZWRpdGFibGUmJm5mKHRoaXMuZG9tKSx5cCh0aGlzKSx0aGlzLmRvbU9ic2VydmVyLnN0YXJ0KCl9LHN2LnJvb3QuZ2V0PWZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5fcm9vdDtpZihudWxsPT10KWZvcih2YXIgZT10aGlzLmRvbS5wYXJlbnROb2RlO2U7ZT1lLnBhcmVudE5vZGUpaWYoOT09ZS5ub2RlVHlwZXx8MTE9PWUubm9kZVR5cGUmJmUuaG9zdClyZXR1cm4gZS5nZXRTZWxlY3Rpb258fChPYmplY3QuZ2V0UHJvdG90eXBlT2YoZSkuZ2V0U2VsZWN0aW9uPWZ1bmN0aW9uKCl7cmV0dXJuIGRvY3VtZW50LmdldFNlbGVjdGlvbigpfSksdGhpcy5fcm9vdD1lO3JldHVybiB0fHxkb2N1bWVudH0saXYucHJvdG90eXBlLnBvc0F0Q29vcmRzPWZ1bmN0aW9uKHQpe3JldHVybiBoZih0aGlzLHQpfSxpdi5wcm90b3R5cGUuY29vcmRzQXRQb3M9ZnVuY3Rpb24odCl7cmV0dXJuIHBmKHRoaXMsdCl9LGl2LnByb3RvdHlwZS5kb21BdFBvcz1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5kb2NWaWV3LmRvbUZyb21Qb3ModCl9LGl2LnByb3RvdHlwZS5ub2RlRE9NPWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMuZG9jVmlldy5kZXNjQXQodCk7cmV0dXJuIGU/ZS5ub2RlRE9NOm51bGx9LGl2LnByb3RvdHlwZS5wb3NBdERPTT1mdW5jdGlvbih0LGUsbil7dm9pZCAwPT09biYmKG49LTEpO3ZhciByPXRoaXMuZG9jVmlldy5wb3NGcm9tRE9NKHQsZSxuKTtpZihudWxsPT1yKXRocm93IG5ldyBSYW5nZUVycm9yKCJET00gcG9zaXRpb24gbm90IGluc2lkZSB0aGUgZWRpdG9yIik7cmV0dXJuIHJ9LGl2LnByb3RvdHlwZS5lbmRPZlRleHRibG9jaz1mdW5jdGlvbih0LGUpe3JldHVybiBTZih0aGlzLGV8fHRoaXMuc3RhdGUsdCl9LGl2LnByb3RvdHlwZS5kZXN0cm95PWZ1bmN0aW9uKCl7dGhpcy5kb2NWaWV3JiYoY2QodGhpcyksdGhpcy5kZXN0cm95UGx1Z2luVmlld3MoKSx0aGlzLm1vdW50ZWQ/KHRoaXMuZG9jVmlldy51cGRhdGUodGhpcy5zdGF0ZS5kb2MsW10sb3YodGhpcyksdGhpcyksdGhpcy5kb20udGV4dENvbnRlbnQ9IiIpOnRoaXMuZG9tLnBhcmVudE5vZGUmJnRoaXMuZG9tLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQodGhpcy5kb20pLHRoaXMuZG9jVmlldy5kZXN0cm95KCksdGhpcy5kb2NWaWV3PW51bGwpfSxpdi5wcm90b3R5cGUuZGlzcGF0Y2hFdmVudD1mdW5jdGlvbih0KXtyZXR1cm4gZmQodGhpcyx0KX0saXYucHJvdG90eXBlLmRpc3BhdGNoPWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMuX3Byb3BzLmRpc3BhdGNoVHJhbnNhY3Rpb247ZT9lLmNhbGwodGhpcyx0KTp0aGlzLnVwZGF0ZVN0YXRlKHRoaXMuc3RhdGUuYXBwbHkodCkpfSxPYmplY3QuZGVmaW5lUHJvcGVydGllcyhpdi5wcm90b3R5cGUsc3YpO3ZhciB2dj1uKCI0MGY3IiksbXY9bigiNTViZSIpO25ldyBjWyJQbHVnaW5LZXkiXSgiY29sbGFiIik7dmFyIGd2PTIwMCx5dj1mdW5jdGlvbigpe307eXYucHJvdG90eXBlLmFwcGVuZD1mdW5jdGlvbih0KXtyZXR1cm4gdC5sZW5ndGg/KHQ9eXYuZnJvbSh0KSwhdGhpcy5sZW5ndGgmJnR8fHQubGVuZ3RoPGd2JiZ0aGlzLmxlYWZBcHBlbmQodCl8fHRoaXMubGVuZ3RoPGd2JiZ0LmxlYWZQcmVwZW5kKHRoaXMpfHx0aGlzLmFwcGVuZElubmVyKHQpKTp0aGlzfSx5di5wcm90b3R5cGUucHJlcGVuZD1mdW5jdGlvbih0KXtyZXR1cm4gdC5sZW5ndGg/eXYuZnJvbSh0KS5hcHBlbmQodGhpcyk6dGhpc30seXYucHJvdG90eXBlLmFwcGVuZElubmVyPWZ1bmN0aW9uKHQpe3JldHVybiBuZXcgYnYodGhpcyx0KX0seXYucHJvdG90eXBlLnNsaWNlPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIHZvaWQgMD09PXQmJih0PTApLHZvaWQgMD09PWUmJihlPXRoaXMubGVuZ3RoKSx0Pj1lP3l2LmVtcHR5OnRoaXMuc2xpY2VJbm5lcihNYXRoLm1heCgwLHQpLE1hdGgubWluKHRoaXMubGVuZ3RoLGUpKX0seXYucHJvdG90eXBlLmdldD1mdW5jdGlvbih0KXtpZighKHQ8MHx8dD49dGhpcy5sZW5ndGgpKXJldHVybiB0aGlzLmdldElubmVyKHQpfSx5di5wcm90b3R5cGUuZm9yRWFjaD1mdW5jdGlvbih0LGUsbil7dm9pZCAwPT09ZSYmKGU9MCksdm9pZCAwPT09biYmKG49dGhpcy5sZW5ndGgpLGU8PW4/dGhpcy5mb3JFYWNoSW5uZXIodCxlLG4sMCk6dGhpcy5mb3JFYWNoSW52ZXJ0ZWRJbm5lcih0LGUsbiwwKX0seXYucHJvdG90eXBlLm1hcD1mdW5jdGlvbih0LGUsbil7dm9pZCAwPT09ZSYmKGU9MCksdm9pZCAwPT09biYmKG49dGhpcy5sZW5ndGgpO3ZhciByPVtdO3JldHVybiB0aGlzLmZvckVhY2goKGZ1bmN0aW9uKGUsbil7cmV0dXJuIHIucHVzaCh0KGUsbikpfSksZSxuKSxyfSx5di5mcm9tPWZ1bmN0aW9uKHQpe3JldHVybiB0IGluc3RhbmNlb2YgeXY/dDp0JiZ0Lmxlbmd0aD9uZXcgd3YodCk6eXYuZW1wdHl9O3ZhciB3dj1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKGUpe3QuY2FsbCh0aGlzKSx0aGlzLnZhbHVlcz1lfXQmJihlLl9fcHJvdG9fXz10KSxlLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKHQmJnQucHJvdG90eXBlKSxlLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1lO3ZhciBuPXtsZW5ndGg6e2NvbmZpZ3VyYWJsZTohMH0sZGVwdGg6e2NvbmZpZ3VyYWJsZTohMH19O3JldHVybiBlLnByb3RvdHlwZS5mbGF0dGVuPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudmFsdWVzfSxlLnByb3RvdHlwZS5zbGljZUlubmVyPWZ1bmN0aW9uKHQsbil7cmV0dXJuIDA9PXQmJm49PXRoaXMubGVuZ3RoP3RoaXM6bmV3IGUodGhpcy52YWx1ZXMuc2xpY2UodCxuKSl9LGUucHJvdG90eXBlLmdldElubmVyPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLnZhbHVlc1t0XX0sZS5wcm90b3R5cGUuZm9yRWFjaElubmVyPWZ1bmN0aW9uKHQsZSxuLHIpe2Zvcih2YXIgbz1lO288bjtvKyspaWYoITE9PT10KHRoaXMudmFsdWVzW29dLHIrbykpcmV0dXJuITF9LGUucHJvdG90eXBlLmZvckVhY2hJbnZlcnRlZElubmVyPWZ1bmN0aW9uKHQsZSxuLHIpe2Zvcih2YXIgbz1lLTE7bz49bjtvLS0paWYoITE9PT10KHRoaXMudmFsdWVzW29dLHIrbykpcmV0dXJuITF9LGUucHJvdG90eXBlLmxlYWZBcHBlbmQ9ZnVuY3Rpb24odCl7aWYodGhpcy5sZW5ndGgrdC5sZW5ndGg8PWd2KXJldHVybiBuZXcgZSh0aGlzLnZhbHVlcy5jb25jYXQodC5mbGF0dGVuKCkpKX0sZS5wcm90b3R5cGUubGVhZlByZXBlbmQ9ZnVuY3Rpb24odCl7aWYodGhpcy5sZW5ndGgrdC5sZW5ndGg8PWd2KXJldHVybiBuZXcgZSh0LmZsYXR0ZW4oKS5jb25jYXQodGhpcy52YWx1ZXMpKX0sbi5sZW5ndGguZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudmFsdWVzLmxlbmd0aH0sbi5kZXB0aC5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gMH0sT2JqZWN0LmRlZmluZVByb3BlcnRpZXMoZS5wcm90b3R5cGUsbiksZX0oeXYpO3l2LmVtcHR5PW5ldyB3dihbXSk7dmFyIGJ2PWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoZSxuKXt0LmNhbGwodGhpcyksdGhpcy5sZWZ0PWUsdGhpcy5yaWdodD1uLHRoaXMubGVuZ3RoPWUubGVuZ3RoK24ubGVuZ3RoLHRoaXMuZGVwdGg9TWF0aC5tYXgoZS5kZXB0aCxuLmRlcHRoKSsxfXJldHVybiB0JiYoZS5fX3Byb3RvX189dCksZS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZSh0JiZ0LnByb3RvdHlwZSksZS5wcm90b3R5cGUuY29uc3RydWN0b3I9ZSxlLnByb3RvdHlwZS5mbGF0dGVuPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubGVmdC5mbGF0dGVuKCkuY29uY2F0KHRoaXMucmlnaHQuZmxhdHRlbigpKX0sZS5wcm90b3R5cGUuZ2V0SW5uZXI9ZnVuY3Rpb24odCl7cmV0dXJuIHQ8dGhpcy5sZWZ0Lmxlbmd0aD90aGlzLmxlZnQuZ2V0KHQpOnRoaXMucmlnaHQuZ2V0KHQtdGhpcy5sZWZ0Lmxlbmd0aCl9LGUucHJvdG90eXBlLmZvckVhY2hJbm5lcj1mdW5jdGlvbih0LGUsbixyKXt2YXIgbz10aGlzLmxlZnQubGVuZ3RoO3JldHVybiEoZTxvJiYhMT09PXRoaXMubGVmdC5mb3JFYWNoSW5uZXIodCxlLE1hdGgubWluKG4sbykscikpJiYoIShuPm8mJiExPT09dGhpcy5yaWdodC5mb3JFYWNoSW5uZXIodCxNYXRoLm1heChlLW8sMCksTWF0aC5taW4odGhpcy5sZW5ndGgsbiktbyxyK28pKSYmdm9pZCAwKX0sZS5wcm90b3R5cGUuZm9yRWFjaEludmVydGVkSW5uZXI9ZnVuY3Rpb24odCxlLG4scil7dmFyIG89dGhpcy5sZWZ0Lmxlbmd0aDtyZXR1cm4hKGU+byYmITE9PT10aGlzLnJpZ2h0LmZvckVhY2hJbnZlcnRlZElubmVyKHQsZS1vLE1hdGgubWF4KG4sbyktbyxyK28pKSYmKCEobjxvJiYhMT09PXRoaXMubGVmdC5mb3JFYWNoSW52ZXJ0ZWRJbm5lcih0LE1hdGgubWluKGUsbyksbixyKSkmJnZvaWQgMCl9LGUucHJvdG90eXBlLnNsaWNlSW5uZXI9ZnVuY3Rpb24odCxlKXtpZigwPT10JiZlPT10aGlzLmxlbmd0aClyZXR1cm4gdGhpczt2YXIgbj10aGlzLmxlZnQubGVuZ3RoO3JldHVybiBlPD1uP3RoaXMubGVmdC5zbGljZSh0LGUpOnQ+PW4/dGhpcy5yaWdodC5zbGljZSh0LW4sZS1uKTp0aGlzLmxlZnQuc2xpY2UodCxuKS5hcHBlbmQodGhpcy5yaWdodC5zbGljZSgwLGUtbikpfSxlLnByb3RvdHlwZS5sZWFmQXBwZW5kPWZ1bmN0aW9uKHQpe3ZhciBuPXRoaXMucmlnaHQubGVhZkFwcGVuZCh0KTtpZihuKXJldHVybiBuZXcgZSh0aGlzLmxlZnQsbil9LGUucHJvdG90eXBlLmxlYWZQcmVwZW5kPWZ1bmN0aW9uKHQpe3ZhciBuPXRoaXMubGVmdC5sZWFmUHJlcGVuZCh0KTtpZihuKXJldHVybiBuZXcgZShuLHRoaXMucmlnaHQpfSxlLnByb3RvdHlwZS5hcHBlbmRJbm5lcj1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5sZWZ0LmRlcHRoPj1NYXRoLm1heCh0aGlzLnJpZ2h0LmRlcHRoLHQuZGVwdGgpKzE/bmV3IGUodGhpcy5sZWZ0LG5ldyBlKHRoaXMucmlnaHQsdCkpOm5ldyBlKHRoaXMsdCl9LGV9KHl2KSx4dj15dixrdj14dixTdj01MDAsQ3Y9ZnVuY3Rpb24odCxlKXt0aGlzLml0ZW1zPXQsdGhpcy5ldmVudENvdW50PWV9O2Z1bmN0aW9uIE92KHQsZSl7dmFyIG47cmV0dXJuIHQuZm9yRWFjaCgoZnVuY3Rpb24odCxyKXtpZih0LnNlbGVjdGlvbiYmMD09ZS0tKXJldHVybiBuPXIsITF9KSksdC5zbGljZShuKX1Ddi5wcm90b3R5cGUucG9wRXZlbnQ9ZnVuY3Rpb24odCxlKXt2YXIgbj10aGlzO2lmKDA9PXRoaXMuZXZlbnRDb3VudClyZXR1cm4gbnVsbDtmb3IodmFyIHIsbyxpPXRoaXMuaXRlbXMubGVuZ3RoOztpLS0pe3ZhciBzPXRoaXMuaXRlbXMuZ2V0KGktMSk7aWYocy5zZWxlY3Rpb24pey0taTticmVha319ZSYmKHI9dGhpcy5yZW1hcHBpbmcoaSx0aGlzLml0ZW1zLmxlbmd0aCksbz1yLm1hcHMubGVuZ3RoKTt2YXIgYSxjLHU9dC50cixsPVtdLGg9W107cmV0dXJuIHRoaXMuaXRlbXMuZm9yRWFjaCgoZnVuY3Rpb24odCxlKXtpZighdC5zdGVwKXJldHVybiByfHwocj1uLnJlbWFwcGluZyhpLGUrMSksbz1yLm1hcHMubGVuZ3RoKSxvLS0sdm9pZCBoLnB1c2godCk7aWYocil7aC5wdXNoKG5ldyBNdih0Lm1hcCkpO3ZhciBzLGY9dC5zdGVwLm1hcChyLnNsaWNlKG8pKTtmJiZ1Lm1heWJlU3RlcChmKS5kb2MmJihzPXUubWFwcGluZy5tYXBzW3UubWFwcGluZy5tYXBzLmxlbmd0aC0xXSxsLnB1c2gobmV3IE12KHMsbnVsbCxudWxsLGwubGVuZ3RoK2gubGVuZ3RoKSkpLG8tLSxzJiZyLmFwcGVuZE1hcChzLG8pfWVsc2UgdS5tYXliZVN0ZXAodC5zdGVwKTtyZXR1cm4gdC5zZWxlY3Rpb24/KGE9cj90LnNlbGVjdGlvbi5tYXAoci5zbGljZShvKSk6dC5zZWxlY3Rpb24sYz1uZXcgQ3Yobi5pdGVtcy5zbGljZSgwLGkpLmFwcGVuZChoLnJldmVyc2UoKS5jb25jYXQobCkpLG4uZXZlbnRDb3VudC0xKSwhMSk6dm9pZCAwfSksdGhpcy5pdGVtcy5sZW5ndGgsMCkse3JlbWFpbmluZzpjLHRyYW5zZm9ybTp1LHNlbGVjdGlvbjphfX0sQ3YucHJvdG90eXBlLmFkZFRyYW5zZm9ybT1mdW5jdGlvbih0LGUsbixyKXtmb3IodmFyIG89W10saT10aGlzLmV2ZW50Q291bnQscz10aGlzLml0ZW1zLGE9IXImJnMubGVuZ3RoP3MuZ2V0KHMubGVuZ3RoLTEpOm51bGwsYz0wO2M8dC5zdGVwcy5sZW5ndGg7YysrKXt2YXIgdT10LnN0ZXBzW2NdLmludmVydCh0LmRvY3NbY10pLGw9bmV3IE12KHQubWFwcGluZy5tYXBzW2NdLHUsZSksaD12b2lkIDA7KGg9YSYmYS5tZXJnZShsKSkmJihsPWgsYz9vLnBvcCgpOnM9cy5zbGljZSgwLHMubGVuZ3RoLTEpKSxvLnB1c2gobCksZSYmKGkrKyxlPW51bGwpLHJ8fChhPWwpfXZhciBmPWktbi5kZXB0aDtyZXR1cm4gZj5UdiYmKHM9T3YocyxmKSxpLT1mKSxuZXcgQ3Yocy5hcHBlbmQobyksaSl9LEN2LnByb3RvdHlwZS5yZW1hcHBpbmc9ZnVuY3Rpb24odCxlKXt2YXIgbj1uZXcgQnRbImEiXTtyZXR1cm4gdGhpcy5pdGVtcy5mb3JFYWNoKChmdW5jdGlvbihlLHIpe3ZhciBvPW51bGwhPWUubWlycm9yT2Zmc2V0JiZyLWUubWlycm9yT2Zmc2V0Pj10P24ubWFwcy5sZW5ndGgtZS5taXJyb3JPZmZzZXQ6bnVsbDtuLmFwcGVuZE1hcChlLm1hcCxvKX0pLHQsZSksbn0sQ3YucHJvdG90eXBlLmFkZE1hcHM9ZnVuY3Rpb24odCl7cmV0dXJuIDA9PXRoaXMuZXZlbnRDb3VudD90aGlzOm5ldyBDdih0aGlzLml0ZW1zLmFwcGVuZCh0Lm1hcCgoZnVuY3Rpb24odCl7cmV0dXJuIG5ldyBNdih0KX0pKSksdGhpcy5ldmVudENvdW50KX0sQ3YucHJvdG90eXBlLnJlYmFzZWQ9ZnVuY3Rpb24odCxlKXtpZighdGhpcy5ldmVudENvdW50KXJldHVybiB0aGlzO3ZhciBuPVtdLHI9TWF0aC5tYXgoMCx0aGlzLml0ZW1zLmxlbmd0aC1lKSxvPXQubWFwcGluZyxpPXQuc3RlcHMubGVuZ3RoLHM9dGhpcy5ldmVudENvdW50O3RoaXMuaXRlbXMuZm9yRWFjaCgoZnVuY3Rpb24odCl7dC5zZWxlY3Rpb24mJnMtLX0pLHIpO3ZhciBhPWU7dGhpcy5pdGVtcy5mb3JFYWNoKChmdW5jdGlvbihlKXt2YXIgcj1vLmdldE1pcnJvcigtLWEpO2lmKG51bGwhPXIpe2k9TWF0aC5taW4oaSxyKTt2YXIgYz1vLm1hcHNbcl07aWYoZS5zdGVwKXt2YXIgdT10LnN0ZXBzW3JdLmludmVydCh0LmRvY3Nbcl0pLGw9ZS5zZWxlY3Rpb24mJmUuc2VsZWN0aW9uLm1hcChvLnNsaWNlKGErMSxyKSk7bCYmcysrLG4ucHVzaChuZXcgTXYoYyx1LGwpKX1lbHNlIG4ucHVzaChuZXcgTXYoYykpfX0pLHIpO2Zvcih2YXIgYz1bXSx1PWU7dTxpO3UrKyljLnB1c2gobmV3IE12KG8ubWFwc1t1XSkpO3ZhciBsPXRoaXMuaXRlbXMuc2xpY2UoMCxyKS5hcHBlbmQoYykuYXBwZW5kKG4pLGg9bmV3IEN2KGwscyk7cmV0dXJuIGguZW1wdHlJdGVtQ291bnQoKT5TdiYmKGg9aC5jb21wcmVzcyh0aGlzLml0ZW1zLmxlbmd0aC1uLmxlbmd0aCkpLGh9LEN2LnByb3RvdHlwZS5lbXB0eUl0ZW1Db3VudD1mdW5jdGlvbigpe3ZhciB0PTA7cmV0dXJuIHRoaXMuaXRlbXMuZm9yRWFjaCgoZnVuY3Rpb24oZSl7ZS5zdGVwfHx0Kyt9KSksdH0sQ3YucHJvdG90eXBlLmNvbXByZXNzPWZ1bmN0aW9uKHQpe3ZvaWQgMD09PXQmJih0PXRoaXMuaXRlbXMubGVuZ3RoKTt2YXIgZT10aGlzLnJlbWFwcGluZygwLHQpLG49ZS5tYXBzLmxlbmd0aCxyPVtdLG89MDtyZXR1cm4gdGhpcy5pdGVtcy5mb3JFYWNoKChmdW5jdGlvbihpLHMpe2lmKHM+PXQpci5wdXNoKGkpLGkuc2VsZWN0aW9uJiZvKys7ZWxzZSBpZihpLnN0ZXApe3ZhciBhPWkuc3RlcC5tYXAoZS5zbGljZShuKSksYz1hJiZhLmdldE1hcCgpO2lmKG4tLSxjJiZlLmFwcGVuZE1hcChjLG4pLGEpe3ZhciB1PWkuc2VsZWN0aW9uJiZpLnNlbGVjdGlvbi5tYXAoZS5zbGljZShuKSk7dSYmbysrO3ZhciBsLGg9bmV3IE12KGMuaW52ZXJ0KCksYSx1KSxmPXIubGVuZ3RoLTE7KGw9ci5sZW5ndGgmJnJbZl0ubWVyZ2UoaCkpP3JbZl09bDpyLnB1c2goaCl9fWVsc2UgaS5tYXAmJm4tLX0pLHRoaXMuaXRlbXMubGVuZ3RoLDApLG5ldyBDdihrdi5mcm9tKHIucmV2ZXJzZSgpKSxvKX0sQ3YuZW1wdHk9bmV3IEN2KGt2LmVtcHR5LDApO3ZhciBNdj1mdW5jdGlvbih0LGUsbixyKXt0aGlzLm1hcD10LHRoaXMuc3RlcD1lLHRoaXMuc2VsZWN0aW9uPW4sdGhpcy5taXJyb3JPZmZzZXQ9cn07TXYucHJvdG90eXBlLm1lcmdlPWZ1bmN0aW9uKHQpe2lmKHRoaXMuc3RlcCYmdC5zdGVwJiYhdC5zZWxlY3Rpb24pe3ZhciBlPXQuc3RlcC5tZXJnZSh0aGlzLnN0ZXApO2lmKGUpcmV0dXJuIG5ldyBNdihlLmdldE1hcCgpLmludmVydCgpLGUsdGhpcy5zZWxlY3Rpb24pfX07dmFyIE52PWZ1bmN0aW9uKHQsZSxuLHIpe3RoaXMuZG9uZT10LHRoaXMudW5kb25lPWUsdGhpcy5wcmV2UmFuZ2VzPW4sdGhpcy5wcmV2VGltZT1yfSxUdj0yMDtmdW5jdGlvbiBBdih0LGUsbixyKXt2YXIgbyxpPW4uZ2V0TWV0YShfdik7aWYoaSlyZXR1cm4gaS5oaXN0b3J5U3RhdGU7bi5nZXRNZXRhKEZ2KSYmKHQ9bmV3IE52KHQuZG9uZSx0LnVuZG9uZSxudWxsLDApKTt2YXIgcz1uLmdldE1ldGEoImFwcGVuZGVkVHJhbnNhY3Rpb24iKTtpZigwPT1uLnN0ZXBzLmxlbmd0aClyZXR1cm4gdDtpZihzJiZzLmdldE1ldGEoX3YpKXJldHVybiBzLmdldE1ldGEoX3YpLnJlZG8/bmV3IE52KHQuZG9uZS5hZGRUcmFuc2Zvcm0obixudWxsLHIsQnYoZSkpLHQudW5kb25lLER2KG4ubWFwcGluZy5tYXBzW24uc3RlcHMubGVuZ3RoLTFdKSx0LnByZXZUaW1lKTpuZXcgTnYodC5kb25lLHQudW5kb25lLmFkZFRyYW5zZm9ybShuLG51bGwscixCdihlKSksbnVsbCx0LnByZXZUaW1lKTtpZighMT09PW4uZ2V0TWV0YSgiYWRkVG9IaXN0b3J5Iil8fHMmJiExPT09cy5nZXRNZXRhKCJhZGRUb0hpc3RvcnkiKSlyZXR1cm4obz1uLmdldE1ldGEoInJlYmFzZWQiKSk/bmV3IE52KHQuZG9uZS5yZWJhc2VkKG4sbyksdC51bmRvbmUucmViYXNlZChuLG8pLFJ2KHQucHJldlJhbmdlcyxuLm1hcHBpbmcpLHQucHJldlRpbWUpOm5ldyBOdih0LmRvbmUuYWRkTWFwcyhuLm1hcHBpbmcubWFwcyksdC51bmRvbmUuYWRkTWFwcyhuLm1hcHBpbmcubWFwcyksUnYodC5wcmV2UmFuZ2VzLG4ubWFwcGluZyksdC5wcmV2VGltZSk7dmFyIGE9MD09dC5wcmV2VGltZXx8IXMmJih0LnByZXZUaW1lPChuLnRpbWV8fDApLXIubmV3R3JvdXBEZWxheXx8IUV2KG4sdC5wcmV2UmFuZ2VzKSksYz1zP1J2KHQucHJldlJhbmdlcyxuLm1hcHBpbmcpOkR2KG4ubWFwcGluZy5tYXBzW24uc3RlcHMubGVuZ3RoLTFdKTtyZXR1cm4gbmV3IE52KHQuZG9uZS5hZGRUcmFuc2Zvcm0obixhP2Uuc2VsZWN0aW9uLmdldEJvb2ttYXJrKCk6bnVsbCxyLEJ2KGUpKSxDdi5lbXB0eSxjLG4udGltZSl9ZnVuY3Rpb24gRXYodCxlKXtpZighZSlyZXR1cm4hMTtpZighdC5kb2NDaGFuZ2VkKXJldHVybiEwO3ZhciBuPSExO3JldHVybiB0Lm1hcHBpbmcubWFwc1swXS5mb3JFYWNoKChmdW5jdGlvbih0LHIpe2Zvcih2YXIgbz0wO288ZS5sZW5ndGg7bys9Mil0PD1lW28rMV0mJnI+PWVbb10mJihuPSEwKX0pKSxufWZ1bmN0aW9uIER2KHQpe3ZhciBlPVtdO3JldHVybiB0LmZvckVhY2goKGZ1bmN0aW9uKHQsbixyLG8pe3JldHVybiBlLnB1c2gocixvKX0pKSxlfWZ1bmN0aW9uIFJ2KHQsZSl7aWYoIXQpcmV0dXJuIG51bGw7Zm9yKHZhciBuPVtdLHI9MDtyPHQubGVuZ3RoO3IrPTIpe3ZhciBvPWUubWFwKHRbcl0sMSksaT1lLm1hcCh0W3IrMV0sLTEpO288PWkmJm4ucHVzaChvLGkpfXJldHVybiBufWZ1bmN0aW9uIHp2KHQsZSxuLHIpe3ZhciBvPUJ2KGUpLGk9X3YuZ2V0KGUpLnNwZWMuY29uZmlnLHM9KHI/dC51bmRvbmU6dC5kb25lKS5wb3BFdmVudChlLG8pO2lmKHMpe3ZhciBhPXMuc2VsZWN0aW9uLnJlc29sdmUocy50cmFuc2Zvcm0uZG9jKSxjPShyP3QuZG9uZTp0LnVuZG9uZSkuYWRkVHJhbnNmb3JtKHMudHJhbnNmb3JtLGUuc2VsZWN0aW9uLmdldEJvb2ttYXJrKCksaSxvKSx1PW5ldyBOdihyP2M6cy5yZW1haW5pbmcscj9zLnJlbWFpbmluZzpjLG51bGwsMCk7bihzLnRyYW5zZm9ybS5zZXRTZWxlY3Rpb24oYSkuc2V0TWV0YShfdix7cmVkbzpyLGhpc3RvcnlTdGF0ZTp1fSkuc2Nyb2xsSW50b1ZpZXcoKSl9fXZhciBQdj0hMSxJdj1udWxsO2Z1bmN0aW9uIEJ2KHQpe3ZhciBlPXQucGx1Z2lucztpZihJdiE9ZSl7UHY9ITEsSXY9ZTtmb3IodmFyIG49MDtuPGUubGVuZ3RoO24rKylpZihlW25dLnNwZWMuaGlzdG9yeVByZXNlcnZlSXRlbXMpe1B2PSEwO2JyZWFrfX1yZXR1cm4gUHZ9dmFyIF92PW5ldyBjWyJQbHVnaW5LZXkiXSgiaGlzdG9yeSIpLEZ2PW5ldyBjWyJQbHVnaW5LZXkiXSgiY2xvc2VIaXN0b3J5Iik7ZnVuY3Rpb24ganYodCl7cmV0dXJuIHQ9e2RlcHRoOnQmJnQuZGVwdGh8fDEwMCxuZXdHcm91cERlbGF5OnQmJnQubmV3R3JvdXBEZWxheXx8NTAwfSxuZXcgY1siUGx1Z2luIl0oe2tleTpfdixzdGF0ZTp7aW5pdDpmdW5jdGlvbigpe3JldHVybiBuZXcgTnYoQ3YuZW1wdHksQ3YuZW1wdHksbnVsbCwwKX0sYXBwbHk6ZnVuY3Rpb24oZSxuLHIpe3JldHVybiBBdihuLHIsZSx0KX19LGNvbmZpZzp0fSl9ZnVuY3Rpb24gJHYodCxlKXt2YXIgbj1fdi5nZXRTdGF0ZSh0KTtyZXR1cm4hKCFufHwwPT1uLmRvbmUuZXZlbnRDb3VudCkmJihlJiZ6dihuLHQsZSwhMSksITApfWZ1bmN0aW9uIFZ2KHQsZSl7dmFyIG49X3YuZ2V0U3RhdGUodCk7cmV0dXJuISghbnx8MD09bi51bmRvbmUuZXZlbnRDb3VudCkmJihlJiZ6dihuLHQsZSwhMCksITApfWZ1bmN0aW9uIEx2KHQpe3ZhciBlPV92LmdldFN0YXRlKHQpO3JldHVybiBlP2UuZG9uZS5ldmVudENvdW50OjB9ZnVuY3Rpb24gcXYodCl7dmFyIGU9X3YuZ2V0U3RhdGUodCk7cmV0dXJuIGU/ZS51bmRvbmUuZXZlbnRDb3VudDowfQovKiEKICAgICogdGlwdGFwLWV4dGVuc2lvbnMgdjEuMjkuMAogICAgKiAoYykgMjAyMCBTY3J1bXB5IFVHIChsaW1pdGVkIGxpYWJpbGl0eSkKICAgICogQGxpY2Vuc2UgTUlUCiAgICAqL2Z1bmN0aW9uIEp2KHQsZSl7aWYoISh0IGluc3RhbmNlb2YgZSkpdGhyb3cgbmV3IFR5cGVFcnJvcigiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uIil9ZnVuY3Rpb24gV3YodCxlKXtmb3IodmFyIG49MDtuPGUubGVuZ3RoO24rKyl7dmFyIHI9ZVtuXTtyLmVudW1lcmFibGU9ci5lbnVtZXJhYmxlfHwhMSxyLmNvbmZpZ3VyYWJsZT0hMCwidmFsdWUiaW4gciYmKHIud3JpdGFibGU9ITApLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LHIua2V5LHIpfX1mdW5jdGlvbiBIdih0LGUsbil7cmV0dXJuIGUmJld2KHQucHJvdG90eXBlLGUpLG4mJld2KHQsbiksdH1mdW5jdGlvbiBLdih0LGUsbil7cmV0dXJuIGUgaW4gdD9PYmplY3QuZGVmaW5lUHJvcGVydHkodCxlLHt2YWx1ZTpuLGVudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwLHdyaXRhYmxlOiEwfSk6dFtlXT1uLHR9ZnVuY3Rpb24gVXYodCxlKXt2YXIgbj1PYmplY3Qua2V5cyh0KTtpZihPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKXt2YXIgcj1PYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKHQpO2UmJihyPXIuZmlsdGVyKChmdW5jdGlvbihlKXtyZXR1cm4gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0LGUpLmVudW1lcmFibGV9KSkpLG4ucHVzaC5hcHBseShuLHIpfXJldHVybiBufWZ1bmN0aW9uIEd2KHQpe2Zvcih2YXIgZT0xO2U8YXJndW1lbnRzLmxlbmd0aDtlKyspe3ZhciBuPW51bGwhPWFyZ3VtZW50c1tlXT9hcmd1bWVudHNbZV06e307ZSUyP1V2KE9iamVjdChuKSwhMCkuZm9yRWFjaCgoZnVuY3Rpb24oZSl7S3YodCxlLG5bZV0pfSkpOk9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzP09iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKHQsT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnMobikpOlV2KE9iamVjdChuKSkuZm9yRWFjaCgoZnVuY3Rpb24oZSl7T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsZSxPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKG4sZSkpfSkpfXJldHVybiB0fWZ1bmN0aW9uIFh2KHQsZSl7aWYoImZ1bmN0aW9uIiE9PXR5cGVvZiBlJiZudWxsIT09ZSl0aHJvdyBuZXcgVHlwZUVycm9yKCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvbiIpO3QucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoZSYmZS5wcm90b3R5cGUse2NvbnN0cnVjdG9yOnt2YWx1ZTp0LHdyaXRhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH19KSxlJiZadih0LGUpfWZ1bmN0aW9uIFl2KHQpe3JldHVybiBZdj1PYmplY3Quc2V0UHJvdG90eXBlT2Y/T2JqZWN0LmdldFByb3RvdHlwZU9mOmZ1bmN0aW9uKHQpe3JldHVybiB0Ll9fcHJvdG9fX3x8T2JqZWN0LmdldFByb3RvdHlwZU9mKHQpfSxZdih0KX1mdW5jdGlvbiBadih0LGUpe3JldHVybiBadj1PYmplY3Quc2V0UHJvdG90eXBlT2Z8fGZ1bmN0aW9uKHQsZSl7cmV0dXJuIHQuX19wcm90b19fPWUsdH0sWnYodCxlKX1mdW5jdGlvbiBRdigpe2lmKCJ1bmRlZmluZWQiPT09dHlwZW9mIFJlZmxlY3R8fCFSZWZsZWN0LmNvbnN0cnVjdClyZXR1cm4hMTtpZihSZWZsZWN0LmNvbnN0cnVjdC5zaGFtKXJldHVybiExO2lmKCJmdW5jdGlvbiI9PT10eXBlb2YgUHJveHkpcmV0dXJuITA7dHJ5e3JldHVybiBEYXRlLnByb3RvdHlwZS50b1N0cmluZy5jYWxsKFJlZmxlY3QuY29uc3RydWN0KERhdGUsW10sKGZ1bmN0aW9uKCl7fSkpKSwhMH1jYXRjaCh0KXtyZXR1cm4hMX19ZnVuY3Rpb24gdG0odCl7aWYodm9pZCAwPT09dCl0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZCIpO3JldHVybiB0fWZ1bmN0aW9uIGVtKHQsZSl7cmV0dXJuIWV8fCJvYmplY3QiIT09dHlwZW9mIGUmJiJmdW5jdGlvbiIhPT10eXBlb2YgZT90bSh0KTplfWZ1bmN0aW9uIG5tKHQpe3JldHVybiBmdW5jdGlvbigpe3ZhciBlLG49WXYodCk7aWYoUXYoKSl7dmFyIHI9WXYodGhpcykuY29uc3RydWN0b3I7ZT1SZWZsZWN0LmNvbnN0cnVjdChuLGFyZ3VtZW50cyxyKX1lbHNlIGU9bi5hcHBseSh0aGlzLGFyZ3VtZW50cyk7cmV0dXJuIGVtKHRoaXMsZSl9fWZ1bmN0aW9uIHJtKHQpe3JldHVybiBvbSh0KXx8aW0odCl8fHNtKHQpfHxjbSgpfWZ1bmN0aW9uIG9tKHQpe2lmKEFycmF5LmlzQXJyYXkodCkpcmV0dXJuIGFtKHQpfWZ1bmN0aW9uIGltKHQpe2lmKCJ1bmRlZmluZWQiIT09dHlwZW9mIFN5bWJvbCYmU3ltYm9sLml0ZXJhdG9yIGluIE9iamVjdCh0KSlyZXR1cm4gQXJyYXkuZnJvbSh0KX1mdW5jdGlvbiBzbSh0LGUpe2lmKHQpe2lmKCJzdHJpbmciPT09dHlwZW9mIHQpcmV0dXJuIGFtKHQsZSk7dmFyIG49T2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKHQpLnNsaWNlKDgsLTEpO3JldHVybiJPYmplY3QiPT09biYmdC5jb25zdHJ1Y3RvciYmKG49dC5jb25zdHJ1Y3Rvci5uYW1lKSwiTWFwIj09PW58fCJTZXQiPT09bj9BcnJheS5mcm9tKG4pOiJBcmd1bWVudHMiPT09bnx8L14oPzpVaXxJKW50KD86OHwxNnwzMikoPzpDbGFtcGVkKT9BcnJheSQvLnRlc3Qobik/YW0odCxlKTp2b2lkIDB9fWZ1bmN0aW9uIGFtKHQsZSl7KG51bGw9PWV8fGU+dC5sZW5ndGgpJiYoZT10Lmxlbmd0aCk7Zm9yKHZhciBuPTAscj1uZXcgQXJyYXkoZSk7bjxlO24rKylyW25dPXRbbl07cmV0dXJuIHJ9ZnVuY3Rpb24gY20oKXt0aHJvdyBuZXcgVHlwZUVycm9yKCJJbnZhbGlkIGF0dGVtcHQgdG8gc3ByZWFkIG5vbi1pdGVyYWJsZSBpbnN0YW5jZS5cbkluIG9yZGVyIHRvIGJlIGl0ZXJhYmxlLCBub24tYXJyYXkgb2JqZWN0cyBtdXN0IGhhdmUgYSBbU3ltYm9sLml0ZXJhdG9yXSgpIG1ldGhvZC4iKX12YXIgdW09ZnVuY3Rpb24odCl7WHYobix0KTt2YXIgZT1ubShuKTtmdW5jdGlvbiBuKCl7cmV0dXJuIEp2KHRoaXMsbiksZS5hcHBseSh0aGlzLGFyZ3VtZW50cyl9cmV0dXJuIEh2KG4sW3trZXk6ImNvbW1hbmRzIix2YWx1ZTpmdW5jdGlvbih0KXt2YXIgZT10LnR5cGUsbj10LnNjaGVtYTtyZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gTGEoZSxuLm5vZGVzLnBhcmFncmFwaCl9fX0se2tleToia2V5cyIsdmFsdWU6ZnVuY3Rpb24odCl7dmFyIGU9dC50eXBlO3JldHVybnsiQ3RybC0+IjpMYShlKX19fSx7a2V5OiJpbnB1dFJ1bGVzIix2YWx1ZTpmdW5jdGlvbih0KXt2YXIgZT10LnR5cGU7cmV0dXJuW1pzKC9eXHMqPlxzJC8sZSldfX0se2tleToibmFtZSIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuImJsb2NrcXVvdGUifX0se2tleToic2NoZW1hIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm57Y29udGVudDoiYmxvY2sqIixncm91cDoiYmxvY2siLGRlZmluaW5nOiEwLGRyYWdnYWJsZTohMSxwYXJzZURPTTpbe3RhZzoiYmxvY2txdW90ZSJ9XSx0b0RPTTpmdW5jdGlvbigpe3JldHVyblsiYmxvY2txdW90ZSIsMF19fX19XSksbn0oa2MpLGxtPWZ1bmN0aW9uKHQpe1h2KG4sdCk7dmFyIGU9bm0obik7ZnVuY3Rpb24gbigpe3JldHVybiBKdih0aGlzLG4pLGUuYXBwbHkodGhpcyxhcmd1bWVudHMpfXJldHVybiBIdihuLFt7a2V5OiJjb21tYW5kcyIsdmFsdWU6ZnVuY3Rpb24odCl7dmFyIGU9dC50eXBlLG49dC5zY2hlbWE7cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIFZhKGUsbi5ub2Rlcy5saXN0X2l0ZW0pfX19LHtrZXk6ImtleXMiLHZhbHVlOmZ1bmN0aW9uKHQpe3ZhciBlPXQudHlwZSxuPXQuc2NoZW1hO3JldHVybnsiU2hpZnQtQ3RybC04IjpWYShlLG4ubm9kZXMubGlzdF9pdGVtKX19fSx7a2V5OiJpbnB1dFJ1bGVzIix2YWx1ZTpmdW5jdGlvbih0KXt2YXIgZT10LnR5cGU7cmV0dXJuW1pzKC9eXHMqKFstKypdKVxzJC8sZSldfX0se2tleToibmFtZSIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuImJ1bGxldF9saXN0In19LHtrZXk6InNjaGVtYSIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJue2NvbnRlbnQ6Imxpc3RfaXRlbSsiLGdyb3VwOiJibG9jayIscGFyc2VET006W3t0YWc6InVsIn1dLHRvRE9NOmZ1bmN0aW9uKCl7cmV0dXJuWyJ1bCIsMF19fX19XSksbn0oa2MpLGhtPWZ1bmN0aW9uKHQpe1h2KG4sdCk7dmFyIGU9bm0obik7ZnVuY3Rpb24gbigpe3JldHVybiBKdih0aGlzLG4pLGUuYXBwbHkodGhpcyxhcmd1bWVudHMpfXJldHVybiBIdihuLFt7a2V5OiJjb21tYW5kcyIsdmFsdWU6ZnVuY3Rpb24odCl7dmFyIGU9dC50eXBlLG49dC5zY2hlbWE7cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIGphKGUsbi5ub2Rlcy5wYXJhZ3JhcGgpfX19LHtrZXk6ImtleXMiLHZhbHVlOmZ1bmN0aW9uKHQpe3ZhciBlPXQudHlwZTtyZXR1cm57IlNoaWZ0LUN0cmwtXFwiOklzKGUpfX19LHtrZXk6ImlucHV0UnVsZXMiLHZhbHVlOmZ1bmN0aW9uKHQpe3ZhciBlPXQudHlwZTtyZXR1cm5bUXMoL15gYGAkLyxlKV19fSx7a2V5OiJuYW1lIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4iY29kZV9ibG9jayJ9fSx7a2V5OiJzY2hlbWEiLGdldDpmdW5jdGlvbigpe3JldHVybntjb250ZW50OiJ0ZXh0KiIsbWFya3M6IiIsZ3JvdXA6ImJsb2NrIixjb2RlOiEwLGRlZmluaW5nOiEwLGRyYWdnYWJsZTohMSxwYXJzZURPTTpbe3RhZzoicHJlIixwcmVzZXJ2ZVdoaXRlc3BhY2U6ImZ1bGwifV0sdG9ET006ZnVuY3Rpb24oKXtyZXR1cm5bInByZSIsWyJjb2RlIiwwXV19fX19XSksbn0oa2MpO3ZhciBmbT1mdW5jdGlvbih0KXtYdihuLHQpO3ZhciBlPW5tKG4pO2Z1bmN0aW9uIG4oKXtyZXR1cm4gSnYodGhpcyxuKSxlLmFwcGx5KHRoaXMsYXJndW1lbnRzKX1yZXR1cm4gSHYobixbe2tleToia2V5cyIsdmFsdWU6ZnVuY3Rpb24odCl7dmFyIGU9dC50eXBlLG49RnMoTnMsKGZ1bmN0aW9uKHQsbil7cmV0dXJuIG4odC50ci5yZXBsYWNlU2VsZWN0aW9uV2l0aChlLmNyZWF0ZSgpKS5zY3JvbGxJbnRvVmlldygpKSwhMH0pKTtyZXR1cm57Ik1vZC1FbnRlciI6biwiU2hpZnQtRW50ZXIiOm59fX0se2tleToibmFtZSIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuImhhcmRfYnJlYWsifX0se2tleToic2NoZW1hIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm57aW5saW5lOiEwLGdyb3VwOiJpbmxpbmUiLHNlbGVjdGFibGU6ITEscGFyc2VET006W3t0YWc6ImJyIn1dLHRvRE9NOmZ1bmN0aW9uKCl7cmV0dXJuWyJiciJdfX19fV0pLG59KGtjKSxwbT1mdW5jdGlvbih0KXtYdihuLHQpO3ZhciBlPW5tKG4pO2Z1bmN0aW9uIG4oKXtyZXR1cm4gSnYodGhpcyxuKSxlLmFwcGx5KHRoaXMsYXJndW1lbnRzKX1yZXR1cm4gSHYobixbe2tleToiY29tbWFuZHMiLHZhbHVlOmZ1bmN0aW9uKHQpe3ZhciBlPXQudHlwZSxuPXQuc2NoZW1hO3JldHVybiBmdW5jdGlvbih0KXtyZXR1cm4gamEoZSxuLm5vZGVzLnBhcmFncmFwaCx0KX19fSx7a2V5OiJrZXlzIix2YWx1ZTpmdW5jdGlvbih0KXt2YXIgZT10LnR5cGU7cmV0dXJuIHRoaXMub3B0aW9ucy5sZXZlbHMucmVkdWNlKChmdW5jdGlvbih0LG4pe3JldHVybiBHdih7fSx0LHt9LEt2KHt9LCJTaGlmdC1DdHJsLSIuY29uY2F0KG4pLElzKGUse2xldmVsOm59KSkpfSkse30pfX0se2tleToiaW5wdXRSdWxlcyIsdmFsdWU6ZnVuY3Rpb24odCl7dmFyIGU9dC50eXBlO3JldHVybiB0aGlzLm9wdGlvbnMubGV2ZWxzLm1hcCgoZnVuY3Rpb24odCl7cmV0dXJuIFFzKG5ldyBSZWdFeHAoIl4oI3sxLCIuY29uY2F0KHQsIn0pXFxzJCIpKSxlLChmdW5jdGlvbigpe3JldHVybntsZXZlbDp0fX0pKX0pKX19LHtrZXk6Im5hbWUiLGdldDpmdW5jdGlvbigpe3JldHVybiJoZWFkaW5nIn19LHtrZXk6ImRlZmF1bHRPcHRpb25zIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm57bGV2ZWxzOlsxLDIsMyw0LDUsNl19fX0se2tleToic2NoZW1hIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm57YXR0cnM6e2xldmVsOntkZWZhdWx0OjF9fSxjb250ZW50OiJpbmxpbmUqIixncm91cDoiYmxvY2siLGRlZmluaW5nOiEwLGRyYWdnYWJsZTohMSxwYXJzZURPTTp0aGlzLm9wdGlvbnMubGV2ZWxzLm1hcCgoZnVuY3Rpb24odCl7cmV0dXJue3RhZzoiaCIuY29uY2F0KHQpLGF0dHJzOntsZXZlbDp0fX19KSksdG9ET006ZnVuY3Rpb24odCl7cmV0dXJuWyJoIi5jb25jYXQodC5hdHRycy5sZXZlbCksMF19fX19XSksbn0oa2MpLGRtPWZ1bmN0aW9uKHQpe1h2KG4sdCk7dmFyIGU9bm0obik7ZnVuY3Rpb24gbigpe3JldHVybiBKdih0aGlzLG4pLGUuYXBwbHkodGhpcyxhcmd1bWVudHMpfXJldHVybiBIdihuLFt7a2V5OiJrZXlzIix2YWx1ZTpmdW5jdGlvbih0KXt2YXIgZT10LnR5cGU7cmV0dXJue0VudGVyOndhKGUpLFRhYjpTYShlKSwiU2hpZnQtVGFiIjpiYShlKX19fSx7a2V5OiJuYW1lIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4ibGlzdF9pdGVtIn19LHtrZXk6InNjaGVtYSIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJue2NvbnRlbnQ6InBhcmFncmFwaCBibG9jayoiLGRlZmluaW5nOiEwLGRyYWdnYWJsZTohMSxwYXJzZURPTTpbe3RhZzoibGkifV0sdG9ET006ZnVuY3Rpb24oKXtyZXR1cm5bImxpIiwwXX19fX1dKSxufShrYyk7dmFyIHZtPWZ1bmN0aW9uKHQpe1h2KG4sdCk7dmFyIGU9bm0obik7ZnVuY3Rpb24gbigpe3JldHVybiBKdih0aGlzLG4pLGUuYXBwbHkodGhpcyxhcmd1bWVudHMpfXJldHVybiBIdihuLFt7a2V5OiJjb21tYW5kcyIsdmFsdWU6ZnVuY3Rpb24odCl7dmFyIGU9dC50eXBlLG49dC5zY2hlbWE7cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIFZhKGUsbi5ub2Rlcy5saXN0X2l0ZW0pfX19LHtrZXk6ImtleXMiLHZhbHVlOmZ1bmN0aW9uKHQpe3ZhciBlPXQudHlwZSxuPXQuc2NoZW1hO3JldHVybnsiU2hpZnQtQ3RybC05IjpWYShlLG4ubm9kZXMubGlzdF9pdGVtKX19fSx7a2V5OiJpbnB1dFJ1bGVzIix2YWx1ZTpmdW5jdGlvbih0KXt2YXIgZT10LnR5cGU7cmV0dXJuW1pzKC9eKFxkKylcLlxzJC8sZSwoZnVuY3Rpb24odCl7cmV0dXJue29yZGVyOit0WzFdfX0pLChmdW5jdGlvbih0LGUpe3JldHVybiBlLmNoaWxkQ291bnQrZS5hdHRycy5vcmRlcj09PSt0WzFdfSkpXX19LHtrZXk6Im5hbWUiLGdldDpmdW5jdGlvbigpe3JldHVybiJvcmRlcmVkX2xpc3QifX0se2tleToic2NoZW1hIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm57YXR0cnM6e29yZGVyOntkZWZhdWx0OjF9fSxjb250ZW50OiJsaXN0X2l0ZW0rIixncm91cDoiYmxvY2siLHBhcnNlRE9NOlt7dGFnOiJvbCIsZ2V0QXR0cnM6ZnVuY3Rpb24odCl7cmV0dXJue29yZGVyOnQuaGFzQXR0cmlidXRlKCJzdGFydCIpPyt0LmdldEF0dHJpYnV0ZSgic3RhcnQiKToxfX19XSx0b0RPTTpmdW5jdGlvbih0KXtyZXR1cm4gMT09PXQuYXR0cnMub3JkZXI/WyJvbCIsMF06WyJvbCIse3N0YXJ0OnQuYXR0cnMub3JkZXJ9LDBdfX19fV0pLG59KGtjKSxtbT1PYmplY3QobXZbInRhYmxlTm9kZXMiXSkoe3RhYmxlR3JvdXA6ImJsb2NrIixjZWxsQ29udGVudDoiYmxvY2srIixjZWxsQXR0cmlidXRlczp7YmFja2dyb3VuZDp7ZGVmYXVsdDpudWxsLGdldEZyb21ET006ZnVuY3Rpb24odCl7cmV0dXJuIHQuc3R5bGUuYmFja2dyb3VuZENvbG9yfHxudWxsfSxzZXRET01BdHRyOmZ1bmN0aW9uKHQsZSl7aWYodCl7dmFyIG49e3N0eWxlOiIiLmNvbmNhdChlLnN0eWxlfHwiIiwiYmFja2dyb3VuZC1jb2xvcjogIikuY29uY2F0KHQsIjsiKX07T2JqZWN0LmFzc2lnbihlLG4pfX19fX0pLGdtPWZ1bmN0aW9uKHQpe1h2KG4sdCk7dmFyIGU9bm0obik7ZnVuY3Rpb24gbigpe3JldHVybiBKdih0aGlzLG4pLGUuYXBwbHkodGhpcyxhcmd1bWVudHMpfXJldHVybiBIdihuLFt7a2V5OiJjb21tYW5kcyIsdmFsdWU6ZnVuY3Rpb24odCl7dmFyIGU9dC5zY2hlbWE7cmV0dXJue2NyZWF0ZVRhYmxlOmZ1bmN0aW9uKHQpe3ZhciBuPXQucm93c0NvdW50LHI9dC5jb2xzQ291bnQsbz10LndpdGhIZWFkZXJSb3c7cmV0dXJuIGZ1bmN0aW9uKHQsaSl7dmFyIHM9dC50ci5zZWxlY3Rpb24uYW5jaG9yKzEsYT1PYmplY3QodnZbImNyZWF0ZVRhYmxlIl0pKGUsbixyLG8pLHU9dC50ci5yZXBsYWNlU2VsZWN0aW9uV2l0aChhKS5zY3JvbGxJbnRvVmlldygpLGw9dS5kb2MucmVzb2x2ZShzKTt1LnNldFNlbGVjdGlvbihjWyJUZXh0U2VsZWN0aW9uIl0ubmVhcihsKSksaSh1KX19LGFkZENvbHVtbkJlZm9yZTpmdW5jdGlvbigpe3JldHVybiBtdlsiYWRkQ29sdW1uQmVmb3JlIl19LGFkZENvbHVtbkFmdGVyOmZ1bmN0aW9uKCl7cmV0dXJuIG12WyJhZGRDb2x1bW5BZnRlciJdfSxkZWxldGVDb2x1bW46ZnVuY3Rpb24oKXtyZXR1cm4gbXZbImRlbGV0ZUNvbHVtbiJdfSxhZGRSb3dCZWZvcmU6ZnVuY3Rpb24oKXtyZXR1cm4gbXZbImFkZFJvd0JlZm9yZSJdfSxhZGRSb3dBZnRlcjpmdW5jdGlvbigpe3JldHVybiBtdlsiYWRkUm93QWZ0ZXIiXX0sZGVsZXRlUm93OmZ1bmN0aW9uKCl7cmV0dXJuIG12WyJkZWxldGVSb3ciXX0sZGVsZXRlVGFibGU6ZnVuY3Rpb24oKXtyZXR1cm4gbXZbImRlbGV0ZVRhYmxlIl19LHRvZ2dsZUNlbGxNZXJnZTpmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbih0LGUpe09iamVjdChtdlsibWVyZ2VDZWxscyJdKSh0LGUpfHxPYmplY3QobXZbInNwbGl0Q2VsbCJdKSh0LGUpfX0sbWVyZ2VDZWxsczpmdW5jdGlvbigpe3JldHVybiBtdlsibWVyZ2VDZWxscyJdfSxzcGxpdENlbGw6ZnVuY3Rpb24oKXtyZXR1cm4gbXZbInNwbGl0Q2VsbCJdfSx0b2dnbGVIZWFkZXJDb2x1bW46ZnVuY3Rpb24oKXtyZXR1cm4gbXZbInRvZ2dsZUhlYWRlckNvbHVtbiJdfSx0b2dnbGVIZWFkZXJSb3c6ZnVuY3Rpb24oKXtyZXR1cm4gbXZbInRvZ2dsZUhlYWRlclJvdyJdfSx0b2dnbGVIZWFkZXJDZWxsOmZ1bmN0aW9uKCl7cmV0dXJuIG12WyJ0b2dnbGVIZWFkZXJDZWxsIl19LHNldENlbGxBdHRyOmZ1bmN0aW9uKCl7cmV0dXJuIG12WyJzZXRDZWxsQXR0ciJdfSxmaXhUYWJsZXM6ZnVuY3Rpb24oKXtyZXR1cm4gbXZbImZpeFRhYmxlcyJdfX19fSx7a2V5OiJrZXlzIix2YWx1ZTpmdW5jdGlvbigpe3JldHVybntUYWI6T2JqZWN0KG12WyJnb1RvTmV4dENlbGwiXSkoMSksIlNoaWZ0LVRhYiI6T2JqZWN0KG12WyJnb1RvTmV4dENlbGwiXSkoLTEpfX19LHtrZXk6Im5hbWUiLGdldDpmdW5jdGlvbigpe3JldHVybiJ0YWJsZSJ9fSx7a2V5OiJkZWZhdWx0T3B0aW9ucyIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJue3Jlc2l6YWJsZTohMX19fSx7a2V5OiJzY2hlbWEiLGdldDpmdW5jdGlvbigpe3JldHVybiBtbS50YWJsZX19LHtrZXk6InBsdWdpbnMiLGdldDpmdW5jdGlvbigpe3JldHVybltdLmNvbmNhdChybSh0aGlzLm9wdGlvbnMucmVzaXphYmxlP1tPYmplY3QobXZbImNvbHVtblJlc2l6aW5nIl0pKCldOltdKSxbT2JqZWN0KG12WyJ0YWJsZUVkaXRpbmciXSkoKV0pfX1dKSxufShrYykseW09ZnVuY3Rpb24odCl7WHYobix0KTt2YXIgZT1ubShuKTtmdW5jdGlvbiBuKCl7cmV0dXJuIEp2KHRoaXMsbiksZS5hcHBseSh0aGlzLGFyZ3VtZW50cyl9cmV0dXJuIEh2KG4sW3trZXk6Im5hbWUiLGdldDpmdW5jdGlvbigpe3JldHVybiJ0YWJsZV9oZWFkZXIifX0se2tleToic2NoZW1hIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gbW0udGFibGVfaGVhZGVyfX1dKSxufShrYyksd209ZnVuY3Rpb24odCl7WHYobix0KTt2YXIgZT1ubShuKTtmdW5jdGlvbiBuKCl7cmV0dXJuIEp2KHRoaXMsbiksZS5hcHBseSh0aGlzLGFyZ3VtZW50cyl9cmV0dXJuIEh2KG4sW3trZXk6Im5hbWUiLGdldDpmdW5jdGlvbigpe3JldHVybiJ0YWJsZV9jZWxsIn19LHtrZXk6InNjaGVtYSIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIG1tLnRhYmxlX2NlbGx9fV0pLG59KGtjKSxibT1mdW5jdGlvbih0KXtYdihuLHQpO3ZhciBlPW5tKG4pO2Z1bmN0aW9uIG4oKXtyZXR1cm4gSnYodGhpcyxuKSxlLmFwcGx5KHRoaXMsYXJndW1lbnRzKX1yZXR1cm4gSHYobixbe2tleToibmFtZSIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuInRhYmxlX3JvdyJ9fSx7a2V5OiJzY2hlbWEiLGdldDpmdW5jdGlvbigpe3JldHVybiBtbS50YWJsZV9yb3d9fV0pLG59KGtjKSx4bT1mdW5jdGlvbih0KXtYdihuLHQpO3ZhciBlPW5tKG4pO2Z1bmN0aW9uIG4oKXtyZXR1cm4gSnYodGhpcyxuKSxlLmFwcGx5KHRoaXMsYXJndW1lbnRzKX1yZXR1cm4gSHYobixbe2tleToia2V5cyIsdmFsdWU6ZnVuY3Rpb24odCl7dmFyIGU9dC50eXBlO3JldHVybntFbnRlcjpGYShlKSxUYWI6dGhpcy5vcHRpb25zLm5lc3RlZD9TYShlKTpmdW5jdGlvbigpe30sIlNoaWZ0LVRhYiI6YmEoZSl9fX0se2tleToibmFtZSIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuInRvZG9faXRlbSJ9fSx7a2V5OiJkZWZhdWx0T3B0aW9ucyIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJue25lc3RlZDohMX19fSx7a2V5OiJ2aWV3IixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm57cHJvcHM6WyJub2RlIiwidXBkYXRlQXR0cnMiLCJ2aWV3Il0sbWV0aG9kczp7b25DaGFuZ2U6ZnVuY3Rpb24oKXt0aGlzLnVwZGF0ZUF0dHJzKHtkb25lOiF0aGlzLm5vZGUuYXR0cnMuZG9uZX0pfX0sdGVtcGxhdGU6J1xuICAgICAgICA8bGkgOmRhdGEtdHlwZT0ibm9kZS50eXBlLm5hbWUiIDpkYXRhLWRvbmU9Im5vZGUuYXR0cnMuZG9uZS50b1N0cmluZygpIiBkYXRhLWRyYWctaGFuZGxlPlxuICAgICAgICAgIDxzcGFuIGNsYXNzPSJ0b2RvLWNoZWNrYm94IiBjb250ZW50ZWRpdGFibGU9ImZhbHNlIiBAY2xpY2s9Im9uQ2hhbmdlIj48L3NwYW4+XG4gICAgICAgICAgPGRpdiBjbGFzcz0idG9kby1jb250ZW50IiByZWY9ImNvbnRlbnQiIDpjb250ZW50ZWRpdGFibGU9InZpZXcuZWRpdGFibGUudG9TdHJpbmcoKSI+PC9kaXY+XG4gICAgICAgIDwvbGk+XG4gICAgICAnfX19LHtrZXk6InNjaGVtYSIsZ2V0OmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcztyZXR1cm57YXR0cnM6e2RvbmU6e2RlZmF1bHQ6ITF9fSxkcmFnZ2FibGU6ITAsY29udGVudDp0aGlzLm9wdGlvbnMubmVzdGVkPyIocGFyYWdyYXBofHRvZG9fbGlzdCkrIjoicGFyYWdyYXBoKyIsdG9ET006ZnVuY3Rpb24oZSl7dmFyIG49ZS5hdHRycy5kb25lO3JldHVyblsibGkiLHsiZGF0YS10eXBlIjp0Lm5hbWUsImRhdGEtZG9uZSI6bi50b1N0cmluZygpfSxbInNwYW4iLHtjbGFzczoidG9kby1jaGVja2JveCIsY29udGVudGVkaXRhYmxlOiJmYWxzZSJ9XSxbImRpdiIse2NsYXNzOiJ0b2RvLWNvbnRlbnQifSwwXV19LHBhcnNlRE9NOlt7cHJpb3JpdHk6NTEsdGFnOidbZGF0YS10eXBlPSInLmNvbmNhdCh0aGlzLm5hbWUsJyJdJyksZ2V0QXR0cnM6ZnVuY3Rpb24odCl7cmV0dXJue2RvbmU6InRydWUiPT09dC5nZXRBdHRyaWJ1dGUoImRhdGEtZG9uZSIpfX19XX19fV0pLG59KGtjKSxrbT1mdW5jdGlvbih0KXtYdihuLHQpO3ZhciBlPW5tKG4pO2Z1bmN0aW9uIG4oKXtyZXR1cm4gSnYodGhpcyxuKSxlLmFwcGx5KHRoaXMsYXJndW1lbnRzKX1yZXR1cm4gSHYobixbe2tleToiY29tbWFuZHMiLHZhbHVlOmZ1bmN0aW9uKHQpe3ZhciBlPXQudHlwZSxuPXQuc2NoZW1hO3JldHVybiBmdW5jdGlvbigpe3JldHVybiBWYShlLG4ubm9kZXMudG9kb19pdGVtKX19fSx7a2V5OiJpbnB1dFJ1bGVzIix2YWx1ZTpmdW5jdGlvbih0KXt2YXIgZT10LnR5cGU7cmV0dXJuW1pzKC9eXHMqKFxbIFxdKVxzJC8sZSldfX0se2tleToibmFtZSIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuInRvZG9fbGlzdCJ9fSx7a2V5OiJzY2hlbWEiLGdldDpmdW5jdGlvbigpe3ZhciB0PXRoaXM7cmV0dXJue2dyb3VwOiJibG9jayIsY29udGVudDoidG9kb19pdGVtKyIsdG9ET006ZnVuY3Rpb24oKXtyZXR1cm5bInVsIix7ImRhdGEtdHlwZSI6dC5uYW1lfSwwXX0scGFyc2VET006W3twcmlvcml0eTo1MSx0YWc6J1tkYXRhLXR5cGU9IicuY29uY2F0KHRoaXMubmFtZSwnIl0nKX1dfX19XSksbn0oa2MpLFNtPWZ1bmN0aW9uKHQpe1h2KG4sdCk7dmFyIGU9bm0obik7ZnVuY3Rpb24gbigpe3JldHVybiBKdih0aGlzLG4pLGUuYXBwbHkodGhpcyxhcmd1bWVudHMpfXJldHVybiBIdihuLFt7a2V5OiJrZXlzIix2YWx1ZTpmdW5jdGlvbih0KXt2YXIgZT10LnR5cGU7cmV0dXJueyJNb2QtYiI6X3MoZSl9fX0se2tleToiY29tbWFuZHMiLHZhbHVlOmZ1bmN0aW9uKHQpe3ZhciBlPXQudHlwZTtyZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gX3MoZSl9fX0se2tleToiaW5wdXRSdWxlcyIsdmFsdWU6ZnVuY3Rpb24odCl7dmFyIGU9dC50eXBlO3JldHVyblt6YSgvKD86XCpcKnxfXykoW14qX10rKSg/OlwqXCp8X18pJC8sZSldfX0se2tleToicGFzdGVSdWxlcyIsdmFsdWU6ZnVuY3Rpb24odCl7dmFyIGU9dC50eXBlO3JldHVybltJYSgvKD86XCpcKnxfXykoW14qX10rKSg/OlwqXCp8X18pL2csZSldfX0se2tleToibmFtZSIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuImJvbGQifX0se2tleToic2NoZW1hIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm57cGFyc2VET006W3t0YWc6InN0cm9uZyJ9LHt0YWc6ImIiLGdldEF0dHJzOmZ1bmN0aW9uKHQpe3JldHVybiJub3JtYWwiIT09dC5zdHlsZS5mb250V2VpZ2h0JiZudWxsfX0se3N0eWxlOiJmb250LXdlaWdodCIsZ2V0QXR0cnM6ZnVuY3Rpb24odCl7cmV0dXJuL14oYm9sZChlcik/fFs1LTldXGR7Mix9KSQvLnRlc3QodCkmJm51bGx9fV0sdG9ET006ZnVuY3Rpb24oKXtyZXR1cm5bInN0cm9uZyIsMF19fX19XSksbn0oYmMpLENtPWZ1bmN0aW9uKHQpe1h2KG4sdCk7dmFyIGU9bm0obik7ZnVuY3Rpb24gbigpe3JldHVybiBKdih0aGlzLG4pLGUuYXBwbHkodGhpcyxhcmd1bWVudHMpfXJldHVybiBIdihuLFt7a2V5OiJrZXlzIix2YWx1ZTpmdW5jdGlvbih0KXt2YXIgZT10LnR5cGU7cmV0dXJueyJNb2QtYCI6X3MoZSl9fX0se2tleToiY29tbWFuZHMiLHZhbHVlOmZ1bmN0aW9uKHQpe3ZhciBlPXQudHlwZTtyZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gX3MoZSl9fX0se2tleToiaW5wdXRSdWxlcyIsdmFsdWU6ZnVuY3Rpb24odCl7dmFyIGU9dC50eXBlO3JldHVyblt6YSgvKD86YCkoW15gXSspKD86YCkkLyxlKV19fSx7a2V5OiJwYXN0ZVJ1bGVzIix2YWx1ZTpmdW5jdGlvbih0KXt2YXIgZT10LnR5cGU7cmV0dXJuW0lhKC8oPzpgKShbXmBdKykoPzpgKS9nLGUpXX19LHtrZXk6Im5hbWUiLGdldDpmdW5jdGlvbigpe3JldHVybiJjb2RlIn19LHtrZXk6InNjaGVtYSIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJue2V4Y2x1ZGVzOiJfIixwYXJzZURPTTpbe3RhZzoiY29kZSJ9XSx0b0RPTTpmdW5jdGlvbigpe3JldHVyblsiY29kZSIsMF19fX19XSksbn0oYmMpLE9tPWZ1bmN0aW9uKHQpe1h2KG4sdCk7dmFyIGU9bm0obik7ZnVuY3Rpb24gbigpe3JldHVybiBKdih0aGlzLG4pLGUuYXBwbHkodGhpcyxhcmd1bWVudHMpfXJldHVybiBIdihuLFt7a2V5OiJrZXlzIix2YWx1ZTpmdW5jdGlvbih0KXt2YXIgZT10LnR5cGU7cmV0dXJueyJNb2QtaSI6X3MoZSl9fX0se2tleToiY29tbWFuZHMiLHZhbHVlOmZ1bmN0aW9uKHQpe3ZhciBlPXQudHlwZTtyZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gX3MoZSl9fX0se2tleToiaW5wdXRSdWxlcyIsdmFsdWU6ZnVuY3Rpb24odCl7dmFyIGU9dC50eXBlO3JldHVyblt6YSgvKD86XnxbXl9dKShfKFteX10rKV8pJC8sZSksemEoLyg/Ol58W14qXSkoXCooW14qXSspXCopJC8sZSldfX0se2tleToicGFzdGVSdWxlcyIsdmFsdWU6ZnVuY3Rpb24odCl7dmFyIGU9dC50eXBlO3JldHVybltJYSgvXyhbXl9dKylfL2csZSksSWEoL1wqKFteKl0rKVwqL2csZSldfX0se2tleToibmFtZSIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIml0YWxpYyJ9fSx7a2V5OiJzY2hlbWEiLGdldDpmdW5jdGlvbigpe3JldHVybntwYXJzZURPTTpbe3RhZzoiaSJ9LHt0YWc6ImVtIn0se3N0eWxlOiJmb250LXN0eWxlPWl0YWxpYyJ9XSx0b0RPTTpmdW5jdGlvbigpe3JldHVyblsiZW0iLDBdfX19fV0pLG59KGJjKSxNbT1mdW5jdGlvbih0KXtYdihuLHQpO3ZhciBlPW5tKG4pO2Z1bmN0aW9uIG4oKXtyZXR1cm4gSnYodGhpcyxuKSxlLmFwcGx5KHRoaXMsYXJndW1lbnRzKX1yZXR1cm4gSHYobixbe2tleToiY29tbWFuZHMiLHZhbHVlOmZ1bmN0aW9uKHQpe3ZhciBlPXQudHlwZTtyZXR1cm4gZnVuY3Rpb24odCl7cmV0dXJuIHQuaHJlZj9xYShlLHQpOkJhKGUpfX19LHtrZXk6InBhc3RlUnVsZXMiLHZhbHVlOmZ1bmN0aW9uKHQpe3ZhciBlPXQudHlwZTtyZXR1cm5bUGEoL2h0dHBzPzpcL1wvKHd3d1wuKT9bLWEtekEtWjAtOUA6JS5fK34jPV17MiwyNTZ9XC5bYS16QS1aXXsyLH1cYihbLWEtekEtWjAtOUA6JV8rLn4jPyYvLz1dKikvZyxlLChmdW5jdGlvbih0KXtyZXR1cm57aHJlZjp0fX0pKV19fSx7a2V5OiJuYW1lIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4ibGluayJ9fSx7a2V5OiJkZWZhdWx0T3B0aW9ucyIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJue29wZW5PbkNsaWNrOiEwfX19LHtrZXk6InNjaGVtYSIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJue2F0dHJzOntocmVmOntkZWZhdWx0Om51bGx9fSxpbmNsdXNpdmU6ITEscGFyc2VET006W3t0YWc6ImFbaHJlZl0iLGdldEF0dHJzOmZ1bmN0aW9uKHQpe3JldHVybntocmVmOnQuZ2V0QXR0cmlidXRlKCJocmVmIil9fX1dLHRvRE9NOmZ1bmN0aW9uKHQpe3JldHVyblsiYSIsR3Yoe30sdC5hdHRycyx7cmVsOiJub29wZW5lciBub3JlZmVycmVyIG5vZm9sbG93In0pLDBdfX19fSx7a2V5OiJwbHVnaW5zIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5vcHRpb25zLm9wZW5PbkNsaWNrP1tuZXcgY1siUGx1Z2luIl0oe3Byb3BzOntoYW5kbGVDbGljazpmdW5jdGlvbih0LGUsbil7dmFyIHI9dC5zdGF0ZS5zY2hlbWEsbz1sYSh0LnN0YXRlLHIubWFya3MubGluayk7by5ocmVmJiZuLnRhcmdldCBpbnN0YW5jZW9mIEhUTUxBbmNob3JFbGVtZW50JiYobi5zdG9wUHJvcGFnYXRpb24oKSx3aW5kb3cub3BlbihvLmhyZWYpKX19fSldOltdfX1dKSxufShiYyksTm09ZnVuY3Rpb24odCl7WHYobix0KTt2YXIgZT1ubShuKTtmdW5jdGlvbiBuKCl7cmV0dXJuIEp2KHRoaXMsbiksZS5hcHBseSh0aGlzLGFyZ3VtZW50cyl9cmV0dXJuIEh2KG4sW3trZXk6ImtleXMiLHZhbHVlOmZ1bmN0aW9uKHQpe3ZhciBlPXQudHlwZTtyZXR1cm57Ik1vZC1kIjpfcyhlKX19fSx7a2V5OiJjb21tYW5kcyIsdmFsdWU6ZnVuY3Rpb24odCl7dmFyIGU9dC50eXBlO3JldHVybiBmdW5jdGlvbigpe3JldHVybiBfcyhlKX19fSx7a2V5OiJpbnB1dFJ1bGVzIix2YWx1ZTpmdW5jdGlvbih0KXt2YXIgZT10LnR5cGU7cmV0dXJuW3phKC9+KFtefl0rKX4kLyxlKV19fSx7a2V5OiJwYXN0ZVJ1bGVzIix2YWx1ZTpmdW5jdGlvbih0KXt2YXIgZT10LnR5cGU7cmV0dXJuW0lhKC9+KFtefl0rKX4vZyxlKV19fSx7a2V5OiJuYW1lIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4ic3RyaWtlIn19LHtrZXk6InNjaGVtYSIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJue3BhcnNlRE9NOlt7dGFnOiJzIn0se3RhZzoiZGVsIn0se3RhZzoic3RyaWtlIn0se3N0eWxlOiJ0ZXh0LWRlY29yYXRpb24iLGdldEF0dHJzOmZ1bmN0aW9uKHQpe3JldHVybiJsaW5lLXRocm91Z2giPT09dH19XSx0b0RPTTpmdW5jdGlvbigpe3JldHVyblsicyIsMF19fX19XSksbn0oYmMpLFRtPWZ1bmN0aW9uKHQpe1h2KG4sdCk7dmFyIGU9bm0obik7ZnVuY3Rpb24gbigpe3JldHVybiBKdih0aGlzLG4pLGUuYXBwbHkodGhpcyxhcmd1bWVudHMpfXJldHVybiBIdihuLFt7a2V5OiJrZXlzIix2YWx1ZTpmdW5jdGlvbih0KXt2YXIgZT10LnR5cGU7cmV0dXJueyJNb2QtdSI6X3MoZSl9fX0se2tleToiY29tbWFuZHMiLHZhbHVlOmZ1bmN0aW9uKHQpe3ZhciBlPXQudHlwZTtyZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gX3MoZSl9fX0se2tleToibmFtZSIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuInVuZGVybGluZSJ9fSx7a2V5OiJzY2hlbWEiLGdldDpmdW5jdGlvbigpe3JldHVybntwYXJzZURPTTpbe3RhZzoidSJ9LHtzdHlsZToidGV4dC1kZWNvcmF0aW9uIixnZXRBdHRyczpmdW5jdGlvbih0KXtyZXR1cm4idW5kZXJsaW5lIj09PXR9fV0sdG9ET006ZnVuY3Rpb24oKXtyZXR1cm5bInUiLDBdfX19fV0pLG59KGJjKSxBbT1mdW5jdGlvbih0KXtYdihuLHQpO3ZhciBlPW5tKG4pO2Z1bmN0aW9uIG4oKXtyZXR1cm4gSnYodGhpcyxuKSxlLmFwcGx5KHRoaXMsYXJndW1lbnRzKX1yZXR1cm4gSHYobixbe2tleToia2V5cyIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgdD17Ik1vZC16IjokdiwiTW9kLXkiOlZ2LCJTaGlmdC1Nb2QteiI6VnZ9O3JldHVybiB0fX0se2tleToiY29tbWFuZHMiLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJue3VuZG86ZnVuY3Rpb24oKXtyZXR1cm4gJHZ9LHJlZG86ZnVuY3Rpb24oKXtyZXR1cm4gVnZ9LHVuZG9EZXB0aDpmdW5jdGlvbigpe3JldHVybiBMdn0scmVkb0RlcHRoOmZ1bmN0aW9uKCl7cmV0dXJuIHF2fX19fSx7a2V5OiJuYW1lIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4iaGlzdG9yeSJ9fSx7a2V5OiJkZWZhdWx0T3B0aW9ucyIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJue2RlcHRoOiIiLG5ld0dyb3VwRGVsYXk6IiJ9fX0se2tleToicGx1Z2lucyIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuW2p2KHtkZXB0aDp0aGlzLm9wdGlvbnMuZGVwdGgsbmV3R3JvdXBEZWxheTp0aGlzLm9wdGlvbnMubmV3R3JvdXBEZWxheX0pXX19XSksbn0oZ2MpO2Z1bmN0aW9uIEVtKCl7cmV0dXJuW25ldyB1bSxuZXcgbG0sbmV3IGhtLG5ldyBmbSxuZXcgcG0sbmV3IGRtLG5ldyB2bSxuZXcgeG0sbmV3IGttLG5ldyBNbSxuZXcgZ20oe3Jlc2l6YWJsZTohMH0pLG5ldyB5bSxuZXcgd20sbmV3IGJtLG5ldyBTbSxuZXcgQ20sbmV3IE9tLG5ldyBObSxuZXcgVG0sbmV3IEFtXX12YXIgRG09e2luamVjdDpbImNvcmUiXSxjb21wb25lbnRzOntFZGl0b3JDb250ZW50OlRjLEVkaXRvck1lbnVCYXI6RGMsSWNvbjpvbH0scHJvcHM6e2ZpZWxkTmFtZTpTdHJpbmcsdmFsdWU6U3RyaW5nfSxtb3VudGVkOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy4kcHJvcHMsZT10LnZhbHVlLG49dC5maWVsZE5hbWU7dGhpcy5jb3JlLnNldEZvcm1WYWx1ZShuLGUpfSxkYXRhOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcyxlPXQuJHByb3BzLmZpZWxkTmFtZTtyZXR1cm57ZWRpdG9yOm5ldyBOYyh7Y29udGVudDp0aGlzLiRwcm9wcy52YWx1ZSxleHRlbnNpb25zOkVtKCksb25VcGRhdGU6ZnVuY3Rpb24obil7dmFyIHI9bi5nZXRIVE1MLG89cigpO2UmJjAhPWUubGVuZ3RoJiZ0LmNvcmUuc2V0Rm9ybVZhbHVlKGUsbyl9fSl9fSxiZWZvcmVEZXN0cm95OmZ1bmN0aW9uKCl7dGhpcy5lZGl0b3IuZGVzdHJveSgpfX0sUm09RG0sem09bmwoUm0scyxhLCExLG51bGwsbnVsbCxudWxsKSxQbT16bS5leHBvcnRzOyh3aW5kb3cuX19nb3BsYWlkVnVlQ29tcG9uZW50UmVnaXN0ZXJzPXdpbmRvdy5fX2dvcGxhaWRWdWVDb21wb25lbnRSZWdpc3RlcnN8fFtdKS5wdXNoKChmdW5jdGlvbih0KXt0LmNvbXBvbmVudCgidGlwdGFwLWVkaXRvciIsUG0pfSkpfSxmYjZhOmZ1bmN0aW9uKHQsZSxuKXsidXNlIHN0cmljdCI7dmFyIHI9bigiMjNlNyIpLG89bigiODYxZCIpLGk9bigiZThiNSIpLHM9bigiMjNjYiIpLGE9bigiNTBjNCIpLGM9bigiZmM2YSIpLHU9bigiODQxOCIpLGw9bigiYjYyMiIpLGg9bigiMWRkZSIpLGY9bigiYWU0MCIpLHA9aCgic2xpY2UiKSxkPWYoInNsaWNlIix7QUNDRVNTT1JTOiEwLDA6MCwxOjJ9KSx2PWwoInNwZWNpZXMiKSxtPVtdLnNsaWNlLGc9TWF0aC5tYXg7cih7dGFyZ2V0OiJBcnJheSIscHJvdG86ITAsZm9yY2VkOiFwfHwhZH0se3NsaWNlOmZ1bmN0aW9uKHQsZSl7dmFyIG4scixsLGg9Yyh0aGlzKSxmPWEoaC5sZW5ndGgpLHA9cyh0LGYpLGQ9cyh2b2lkIDA9PT1lP2Y6ZSxmKTtpZihpKGgpJiYobj1oLmNvbnN0cnVjdG9yLCJmdW5jdGlvbiIhPXR5cGVvZiBufHxuIT09QXJyYXkmJiFpKG4ucHJvdG90eXBlKT9vKG4pJiYobj1uW3ZdLG51bGw9PT1uJiYobj12b2lkIDApKTpuPXZvaWQgMCxuPT09QXJyYXl8fHZvaWQgMD09PW4pKXJldHVybiBtLmNhbGwoaCxwLGQpO2ZvcihyPW5ldyh2b2lkIDA9PT1uP0FycmF5Om4pKGcoZC1wLDApKSxsPTA7cDxkO3ArKyxsKyspcCBpbiBoJiZ1KHIsbCxoW3BdKTtyZXR1cm4gci5sZW5ndGg9bCxyfX0pfSxmYzZhOmZ1bmN0aW9uKHQsZSxuKXt2YXIgcj1uKCI0NGFkIiksbz1uKCIxZDgwIik7dC5leHBvcnRzPWZ1bmN0aW9uKHQpe3JldHVybiByKG8odCkpfX0sZmRiYzpmdW5jdGlvbih0LGUpe3QuZXhwb3J0cz17Q1NTUnVsZUxpc3Q6MCxDU1NTdHlsZURlY2xhcmF0aW9uOjAsQ1NTVmFsdWVMaXN0OjAsQ2xpZW50UmVjdExpc3Q6MCxET01SZWN0TGlzdDowLERPTVN0cmluZ0xpc3Q6MCxET01Ub2tlbkxpc3Q6MSxEYXRhVHJhbnNmZXJJdGVtTGlzdDowLEZpbGVMaXN0OjAsSFRNTEFsbENvbGxlY3Rpb246MCxIVE1MQ29sbGVjdGlvbjowLEhUTUxGb3JtRWxlbWVudDowLEhUTUxTZWxlY3RFbGVtZW50OjAsTWVkaWFMaXN0OjAsTWltZVR5cGVBcnJheTowLE5hbWVkTm9kZU1hcDowLE5vZGVMaXN0OjEsUGFpbnRSZXF1ZXN0TGlzdDowLFBsdWdpbjowLFBsdWdpbkFycmF5OjAsU1ZHTGVuZ3RoTGlzdDowLFNWR051bWJlckxpc3Q6MCxTVkdQYXRoU2VnTGlzdDowLFNWR1BvaW50TGlzdDowLFNWR1N0cmluZ0xpc3Q6MCxTVkdUcmFuc2Zvcm1MaXN0OjAsU291cmNlQnVmZmVyTGlzdDowLFN0eWxlU2hlZXRMaXN0OjAsVGV4dFRyYWNrQ3VlTGlzdDowLFRleHRUcmFja0xpc3Q6MCxUb3VjaExpc3Q6MH19LGZkYmY6ZnVuY3Rpb24odCxlLG4pe3ZhciByPW4oIjQ5MzAiKTt0LmV4cG9ydHM9ciYmIVN5bWJvbC5zaGFtJiYic3ltYm9sIj09dHlwZW9mIFN5bWJvbC5pdGVyYXRvcn19KVsiZGVmYXVsdCJdfSkpOw==\"")
}
